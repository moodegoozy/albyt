import{u as Pe,c as Se,b as Le,j as e,d as g,_ as Z,s as Ce}from"./index-FuU3jBZc.js";import{r as l,L as R}from"./vendor-react-C_wfuX_s.js";import{j as B,k as A,H as _e,I as Re,J as Ae,u as ee,z as S,v as Ee,s as Ie}from"./vendor-firebase-Co4MdP0H.js";import{P as se,g as De,L as Oe}from"./paypal-BnpsEAs5.js";import{P as Ue,a as Fe}from"./vendor-paypal-CbTd4Kqs.js";import{ac as E,U as te,ah as Te,X as ae,k as re,g as $e,ai as Be,ae as le,aj as ne,ak as Me,B as ze,ab as We,R as He,j as oe,N as qe,m as Ve,a9 as Qe,h as Ye,Y as Ge,b as Je,al as Xe,ad as Ke}from"./vendor-icons-Dyg7S3Xx.js";const os=()=>{const{user:r,role:c}=Pe(),j=Se(),d=Le(),M=l.useRef(null),[o,f]=l.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[L,I]=l.useState(null),[z,W]=l.useState(!1),[D,ce]=l.useState({totalOrders:0,favoriteRestaurants:0,pendingOrders:0}),[H,O]=l.useState(0),[q,V]=l.useState([]),[ie,U]=l.useState(!1),[x,F]=l.useState(""),[Q,Y]=l.useState(!1),[Ze,es]=l.useState(!1),[i,N]=l.useState([]),[m,w]=l.useState(0),[de,v]=l.useState(!1),[h,C]=l.useState(null),[G,J]=l.useState(""),[xe,me]=l.useState(!0),[X,K]=l.useState(!1);l.useEffect(()=>{if(!r)return;(async()=>{const t=await B(A(g,"users",r.uid));if(t.exists()){const a=t.data();f({name:a.name||"",phone:a.phone||r.phoneNumber||"",city:a.city||"",address:a.address||"",restaurantName:a.restaurantName||""}),I(a.photoUrl||null),a.savedLocations&&Array.isArray(a.savedLocations)?(N(a.savedLocations),w(a.defaultLocationIndex||0)):a.savedLocation&&(N([{...a.savedLocation,label:"Ø§Ù„Ù…Ù†Ø²Ù„"}]),w(0))}if(c==="customer")try{const a=await B(A(g,"wallets",r.uid));if(a.exists()){const n=a.data();O((n==null?void 0:n.balance)||0),V((n==null?void 0:n.transactions)||[])}}catch(a){console.warn("Error loading wallet:",a)}if(c==="customer")try{const{collection:a,query:n,where:u,getDocs:b}=await Z(async()=>{const{collection:P,query:$,where:we,getDocs:ve}=await import("./vendor-firebase-Co4MdP0H.js").then(ke=>ke.M);return{collection:P,query:$,where:we,getDocs:ve}},[]),T=n(a(g,"orders"),u("customerId","==",r.uid)),y=await b(T),_=y.docs.filter(P=>["pending","accepted","preparing","ready","out_for_delivery"].includes(P.data().status)).length,k=n(a(g,"storeFollowers"),u("followerId","==",r.uid)),p=await b(k);ce({totalOrders:y.size,favoriteRestaurants:p.size,pendingOrders:_})}catch(a){console.warn("Error loading stats:",a)}me(!1)})()},[r,c]);const ue=async s=>{if(s.preventDefault(),!!r){K(!0);try{const t=i[m]||null;await ee(A(g,"users",r.uid),{name:o.name,phone:o.phone,city:o.city,address:o.address,photoUrl:L,savedLocation:t,savedLocations:i,defaultLocationIndex:m,...c==="owner"&&{restaurantName:o.restaurantName}}),j.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­! âœ…")}catch{j.error("ÙØ´Ù„ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{K(!1)}}},he=async s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];if(!(!t||!r)){if(!t.type.startsWith("image/")){d.error("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ØµØ§Ù„Ø­Ø©");return}if(t.size>5*1024*1024){d.error("Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª");return}W(!0);try{const n=_e(Ce,`users/${r.uid}/profile.${t.name.split(".").pop()}`);await Re(n,t);const u=await Ae(n);I(u),d.success("ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©! Ø§Ø¶ØºØ· Ø­ÙØ¸ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª")}catch(n){console.error("Error uploading photo:",n),d.error("ÙØ´Ù„ ÙÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©")}finally{W(!1)}}},pe=()=>{I(null),d.info("ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø©! Ø§Ø¶ØºØ· Ø­ÙØ¸ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª")},ge=async s=>{var a,n,u;if(!r)return;const t=parseFloat(x);Y(!0);try{const{collection:b,addDoc:T}=await Z(async()=>{const{collection:p,addDoc:P}=await import("./vendor-firebase-Co4MdP0H.js").then($=>$.M);return{collection:p,addDoc:P}},[]);await T(b(g,"rechargeRequests"),{userId:r.uid,userName:o.name||r.email,userPhone:o.phone,amount:t,paymentMethod:"paypal",paypalOrderId:s.id,paypalPayerId:(a=s.payer)==null?void 0:a.payer_id,paypalEmail:(n=s.payer)==null?void 0:n.email_address,status:"approved",createdAt:S(),updatedAt:S()});const y=A(g,"wallets",r.uid),_=await B(y),k={id:s.id,type:"credit",amount:t,description:"Ø´Ø­Ù† Ø¹Ø¨Ø± PayPal",paypalOrderId:s.id,createdAt:new Date};if(_.exists()){const p=((u=_.data())==null?void 0:u.balance)||0;await ee(y,{balance:p+t,transactions:Ee(k),updatedAt:S()}),O(p+t)}else await Ie(y,{id:r.uid,balance:t,totalEarnings:t,totalWithdrawn:0,transactions:[k],createdAt:S(),updatedAt:S()}),O(t);V(p=>[k,...p]),j.success(`ØªÙ… Ø´Ø­Ù† ${t} Ø±ÙŠØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­! âœ…`),F(""),U(!1)}catch(b){console.error("Error processing PayPal payment:",b),j.error("ÙØ´Ù„ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹")}finally{Y(!1)}},fe=(s,t)=>{const a={lat:s.lat,lng:s.lng,address:t,label:G||`Ø¹Ù†ÙˆØ§Ù† ${i.length+1}`};N([...i,a]),J(""),v(!1),d.success("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†ÙˆØ§Ù†! Ø§Ø¶ØºØ· Ø­ÙØ¸ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª")},be=(s,t)=>{if(h===null)return;const a=[...i];a[h]={...a[h],lat:s.lat,lng:s.lng,address:t},N(a),C(null),v(!1),d.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù†! Ø§Ø¶ØºØ· Ø­ÙØ¸ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª")},ye=async s=>{if(!await j.confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŸ"))return;const a=i.filter((n,u)=>u!==s);N(a),m>=a.length?w(Math.max(0,a.length-1)):m>s&&w(m-1),d.info("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ÙˆØ§Ù†")},je=s=>{w(s),d.success("ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ")};if(xe)return e.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[e.jsx(E,{className:"w-6 h-6 animate-spin ml-2"}),"Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."]});const Ne=()=>c==="owner"?"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ø¹Ù…":c==="courier"?"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨":c==="admin"?"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø±Ù":"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙŠ";return e.jsxs("div",{className:"max-w-md mx-auto py-8 px-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-sky-100 border-4 border-sky-200 shadow-lg",children:L?e.jsx("img",{src:L,alt:"ØµÙˆØ±ØªÙŠ",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(te,{className:"w-12 h-12 text-sky-400"})})}),e.jsx("button",{type:"button",onClick:()=>{var s;return(s=M.current)==null?void 0:s.click()},disabled:z,className:"absolute bottom-0 right-0 w-8 h-8 bg-sky-500 hover:bg-sky-600 text-white rounded-full shadow-lg flex items-center justify-center transition disabled:opacity-50",children:z?e.jsx(E,{className:"w-4 h-4 animate-spin"}):e.jsx(Te,{className:"w-4 h-4"})}),L&&e.jsx("button",{type:"button",onClick:pe,className:"absolute top-0 right-0 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg flex items-center justify-center transition opacity-0 group-hover:opacity-100",children:e.jsx(ae,{className:"w-3 h-3"})}),e.jsx("input",{ref:M,type:"file",accept:"image/*",onChange:he,className:"hidden"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:Ne()}),e.jsx("p",{className:"text-sm text-gray-500",children:(r==null?void 0:r.email)||(r==null?void 0:r.phoneNumber)})]})]}),c==="customer"&&e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs(R,{to:"/orders",className:"bg-sky-50 rounded-xl p-3 text-center hover:bg-sky-100 transition",children:[e.jsx(re,{className:"w-6 h-6 text-sky-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-sky-600",children:D.totalOrders}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ø·Ù„Ø¨Ø§ØªÙŠ"})]}),e.jsxs("div",{className:"bg-pink-50 rounded-xl p-3 text-center",children:[e.jsx($e,{className:"w-6 h-6 text-pink-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-pink-600",children:D.favoriteRestaurants}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ù…ØªØ§Ø¨ÙŽØ¹"})]}),e.jsxs(R,{to:"/orders",className:"bg-amber-50 rounded-xl p-3 text-center hover:bg-amber-100 transition",children:[e.jsx(Be,{className:"w-6 h-6 text-amber-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-amber-600",children:D.pendingOrders}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°"})]})]}),c==="customer"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 via-sky-600 to-sky-700 rounded-2xl p-5 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(le,{className:"w-6 h-6"})}),e.jsx("span",{className:"font-bold",children:"Ù…Ø­ÙØ¸ØªÙŠ"})]}),e.jsxs("button",{type:"button",onClick:()=>U(!0),className:"px-4 py-2 bg-white text-sky-600 rounded-xl font-bold text-sm hover:bg-sky-50 transition flex items-center gap-1",children:[e.jsx(ne,{className:"w-4 h-4"}),"Ø´Ø­Ù†"]})]}),e.jsxs("div",{className:"text-center py-3",children:[e.jsx("p",{className:"text-sky-100 text-sm mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsxs("p",{className:"text-4xl font-black",children:[H.toFixed(2)," ",e.jsx("span",{className:"text-lg",children:"Ø±.Ø³"})]})]}),q.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20",children:[e.jsx("p",{className:"text-xs text-sky-100 mb-2",children:"Ø¢Ø®Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:q.slice(-3).reverse().map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-white/10 rounded-lg p-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.type==="credit"?e.jsx(ne,{className:"w-4 h-4 text-green-300"}):e.jsx(Me,{className:"w-4 h-4 text-red-300"}),e.jsx("span",{className:"text-xs",children:s.description||(s.type==="credit"?"Ø´Ø­Ù†":"Ø®ØµÙ…")})]}),e.jsxs("span",{className:s.type==="credit"?"text-green-300 font-bold":"text-red-300 font-bold",children:[s.type==="credit"?"+":"-",s.amount," Ø±.Ø³"]})]},t))})]})]})}),c==="customer"&&e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs(R,{to:"/notifications",className:"flex-1 flex items-center justify-center gap-2 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition text-gray-700 font-medium",children:[e.jsx(ze,{className:"w-5 h-5"}),"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"]}),e.jsxs(R,{to:"/orders",className:"flex-1 flex items-center justify-center gap-2 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition text-gray-700 font-medium",children:[e.jsx(re,{className:"w-5 h-5"}),"Ø·Ù„Ø¨Ø§ØªÙŠ"]})]}),e.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(te,{className:"w-4 h-4 inline ml-1"}),"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ",value:o.name,onChange:s=>f({...o,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(We,{className:"w-4 h-4 inline ml-1"}),"Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:o.phone,onChange:s=>f({...o,phone:s.target.value}),dir:"ltr"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(He,{className:"w-4 h-4 inline ml-1"}),"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶",value:o.city,onChange:s=>f({...o,city:s.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(oe,{className:"w-4 h-4 inline ml-1"}),"Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ"]}),e.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"Ø§Ù„Ø­ÙŠØŒ Ø§Ù„Ø´Ø§Ø±Ø¹ØŒ Ø±Ù‚Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰ØŒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...",value:o.address,onChange:s=>f({...o,address:s.target.value})})]}),(c==="customer"||c==="admin")&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:[e.jsx(qe,{className:"w-4 h-4"}),"Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[i.length,"/5"]})]}),i.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:i.map((s,t)=>e.jsxs("div",{className:`rounded-xl p-3 border-2 transition ${t===m?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${t===m?"bg-green-500":"bg-gray-400"}`,children:e.jsx(oe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-bold text-gray-800",children:s.label||`Ø¹Ù†ÙˆØ§Ù† ${t+1}`}),t===m&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-500 text-white text-xs font-bold rounded-full",children:[e.jsx(Ve,{className:"w-3 h-3"})," Ø§ÙØªØ±Ø§Ø¶ÙŠ"]})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.address})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[t!==m&&e.jsxs("button",{type:"button",onClick:()=>je(t),className:"flex-1 py-2 px-3 rounded-lg border border-green-200 text-green-600 text-xs font-medium hover:bg-green-50 transition flex items-center justify-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3"})," ØªØ¹ÙŠÙŠÙ† ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ"]}),e.jsx("button",{type:"button",onClick:()=>{C(t),v(!0)},className:"flex-1 py-2 px-3 rounded-lg border border-sky-200 text-sky-600 text-xs font-medium hover:bg-sky-50 transition",children:"ØªØ¹Ø¯ÙŠÙ„"}),e.jsx("button",{type:"button",onClick:()=>ye(t),className:"py-2 px-3 rounded-lg border border-red-200 text-red-500 hover:bg-red-50 transition",children:e.jsx(Ye,{className:"w-4 h-4"})})]})]},t))}),i.length<5&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:G,onChange:s=>J(s.target.value),placeholder:"Ø§Ø³Ù… Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ù…Ø«Ø§Ù„: Ø§Ù„Ù…Ù†Ø²Ù„ØŒ Ø§Ù„Ø¹Ù…Ù„...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 text-sm focus:border-sky-400 focus:outline-none"}),e.jsxs("button",{type:"button",onClick:()=>{C(null),v(!0)},className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-100 to-sky-50 border-2 border-dashed border-sky-300 text-sky-600 font-semibold hover:border-sky-400 transition flex items-center justify-center gap-3",children:[e.jsx(Ge,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯"})]})]}),i.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"ðŸ’¡ Ø£Ø¶Ù Ø¹Ù†Ø§ÙˆÙŠÙ†Ùƒ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨"})]}),c==="owner"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Je,{className:"w-4 h-4 inline ml-1"}),"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…",value:o.restaurantName,onChange:s=>f({...o,restaurantName:s.target.value})})]}),e.jsx("button",{type:"submit",disabled:X,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:X?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5 animate-spin"}),"Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"w-5 h-5"}),"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[e.jsx("p",{children:"ðŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª"}),(c==="customer"||c==="admin")&&e.jsx("p",{className:"mt-1",children:"ðŸ“ ÙŠÙ…ÙƒÙ†Ùƒ Ø­ÙØ¸ Ø­ØªÙ‰ 5 Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø®ØªÙ„ÙØ©"})]})]}),ie&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl w-full max-w-md shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-sky-500"}),"Ø´Ø­Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©"]}),e.jsx("button",{onClick:()=>U(!1),className:"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:e.jsx(ae,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-sky-600 rounded-xl p-4 text-center text-white",children:[e.jsx("p",{className:"text-sm text-sky-100 mb-1",children:"Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsxs("p",{className:"text-3xl font-black",children:[H.toFixed(2)," Ø±.Ø³"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ø§Ø®ØªØ± Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ø­Ù† (Ø±ÙŠØ§Ù„)"}),e.jsx("input",{type:"number",value:x,onChange:s=>F(s.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº (10 - 1000)",className:"w-full border-2 border-gray-200 rounded-xl p-4 text-lg font-bold text-center focus:border-sky-400 focus:outline-none",min:"10",max:"1000",dir:"ltr"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[20,50,100,200].map(s=>e.jsxs("button",{type:"button",onClick:()=>F(s.toString()),className:`py-3 rounded-xl font-bold text-sm transition ${x===s.toString()?"bg-sky-500 text-white shadow-lg scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s," Ø±.Ø³"]},s))}),x&&parseFloat(x)>=10&&parseFloat(x)<=1e3&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("p",{className:"text-sm text-center text-gray-600 mb-3",children:["ðŸ’³ Ø§Ø¯ÙØ¹ ",e.jsxs("span",{className:"font-bold text-sky-600",children:[x," Ø±.Ø³"]}),e.jsxs("span",{className:"text-gray-400 text-xs mr-1",children:["(â‰ˆ $",se.sarToUsd(parseFloat(x)),")"]}),"Ø¹Ø¨Ø± PayPal"]}),e.jsx(Ue,{options:De(),children:e.jsx(Fe,{style:{layout:"vertical",shape:"pill",color:"blue",label:"pay",height:50},disabled:Q,createOrder:(s,t)=>{const a=se.sarToUsd(parseFloat(x));return t.order.create({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:a.toString()},description:`Ø´Ø­Ù† Ù…Ø­ÙØ¸Ø© Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª - ${x} Ø±.Ø³`}]})},onApprove:async(s,t)=>{if(t.order){const a=await t.order.capture();ge(a)}},onError:s=>{console.error("PayPal Error:",s),d.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹")},onCancel:()=>{d.info("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹")}})}),Q&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 text-sky-600",children:[e.jsx(E,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Ø¬Ø§Ø±Ù Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹..."})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ke,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-blue-800",children:"Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¢Ù…Ù† Ø¹Ø¨Ø± PayPal"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±ØµÙŠØ¯ ÙÙˆØ±Ø§Ù‹ Ø¨Ø¹Ø¯ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø·Ø§Ù‚Ø© Visa/Mastercard Ø£Ùˆ Ø­Ø³Ø§Ø¨ PayPal."})]})]})}),e.jsx("p",{className:"text-xs text-center text-gray-400",children:"ðŸ”’ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù…Ø´ÙØ±Ø© ÙˆØ¢Ù…Ù†Ø©"})]})]})}),e.jsx(Oe,{isOpen:de,onClose:()=>{v(!1),C(null)},onConfirm:(s,t)=>{h!==null?be(s,t):fe(s,t)},initialLocation:h!==null&&i[h]?{lat:i[h].lat,lng:i[h].lng}:null})]})};export{os as ProfileEdit};
