function Ub(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Bb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zx={exports:{}},id={},ev={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pl=Symbol.for("react.element"),$b=Symbol.for("react.portal"),zb=Symbol.for("react.fragment"),qb=Symbol.for("react.strict_mode"),Hb=Symbol.for("react.profiler"),Wb=Symbol.for("react.provider"),Kb=Symbol.for("react.context"),Gb=Symbol.for("react.forward_ref"),Qb=Symbol.for("react.suspense"),Xb=Symbol.for("react.memo"),Yb=Symbol.for("react.lazy"),Zg=Symbol.iterator;function Jb(t){return t===null||typeof t!="object"?null:(t=Zg&&t[Zg]||t["@@iterator"],typeof t=="function"?t:null)}var tv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nv=Object.assign,rv={};function Ao(t,e,n){this.props=t,this.context=e,this.refs=rv,this.updater=n||tv}Ao.prototype.isReactComponent={};Ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sv(){}sv.prototype=Ao.prototype;function Ip(t,e,n){this.props=t,this.context=e,this.refs=rv,this.updater=n||tv}var kp=Ip.prototype=new sv;kp.constructor=Ip;nv(kp,Ao.prototype);kp.isPureReactComponent=!0;var ey=Array.isArray,iv=Object.prototype.hasOwnProperty,Sp={current:null},ov={key:!0,ref:!0,__self:!0,__source:!0};function av(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)iv.call(e,r)&&!ov.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Pl,type:t,key:i,ref:a,props:s,_owner:Sp.current}}function Zb(t,e){return{$$typeof:Pl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pl}function eN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ty=/\/+/g;function ah(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eN(""+t.key):e.toString(36)}function Kc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Pl:case $b:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+ah(a,0):r,ey(s)?(n="",t!=null&&(n=t.replace(ty,"$&/")+"/"),Kc(s,e,n,"",function(d){return d})):s!=null&&(jp(s)&&(s=Zb(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(ty,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",ey(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+ah(i,c);a+=Kc(i,e,n,u,s)}else if(u=Jb(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+ah(i,c++),a+=Kc(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ec(t,e,n){if(t==null)return t;var r=[],s=0;return Kc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function tN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},Gc={transition:null},nN={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Gc,ReactCurrentOwner:Sp};function lv(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ec,forEach:function(t,e,n){Ec(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ec(t,function(){e++}),e},toArray:function(t){return Ec(t,function(e){return e})||[]},only:function(t){if(!jp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Ao;le.Fragment=zb;le.Profiler=Hb;le.PureComponent=Ip;le.StrictMode=qb;le.Suspense=Qb;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nN;le.act=lv;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nv({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Sp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)iv.call(e,u)&&!ov.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Pl,type:t.type,key:s,ref:i,props:r,_owner:a}};le.createContext=function(t){return t={$$typeof:Kb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Wb,_context:t},t.Consumer=t};le.createElement=av;le.createFactory=function(t){var e=av.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:Gb,render:t}};le.isValidElement=jp;le.lazy=function(t){return{$$typeof:Yb,_payload:{_status:-1,_result:t},_init:tN}};le.memo=function(t,e){return{$$typeof:Xb,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Gc.transition;Gc.transition={};try{t()}finally{Gc.transition=e}};le.unstable_act=lv;le.useCallback=function(t,e){return $t.current.useCallback(t,e)};le.useContext=function(t){return $t.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};le.useEffect=function(t,e){return $t.current.useEffect(t,e)};le.useId=function(){return $t.current.useId()};le.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return $t.current.useMemo(t,e)};le.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};le.useRef=function(t){return $t.current.useRef(t)};le.useState=function(t){return $t.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return $t.current.useTransition()};le.version="18.3.1";ev.exports=le;var j=ev.exports;const cv=Bb(j),rN=Ub({__proto__:null,default:cv},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sN=j,iN=Symbol.for("react.element"),oN=Symbol.for("react.fragment"),aN=Object.prototype.hasOwnProperty,lN=sN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cN={key:!0,ref:!0,__self:!0,__source:!0};function uv(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)aN.call(e,r)&&!cN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:iN,type:t,key:i,ref:a,props:s,_owner:lN.current}}id.Fragment=oN;id.jsx=uv;id.jsxs=uv;Zx.exports=id;var o=Zx.exports,Zh={},dv={exports:{}},mn={},hv={exports:{}},fv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,J){var te=q.length;q.push(J);e:for(;0<te;){var ve=te-1>>>1,ge=q[ve];if(0<s(ge,J))q[ve]=J,q[te]=ge,te=ve;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var J=q[0],te=q.pop();if(te!==J){q[0]=te;e:for(var ve=0,ge=q.length,Ve=ge>>>1;ve<Ve;){var en=2*(ve+1)-1,Sn=q[en],tn=en+1,nn=q[tn];if(0>s(Sn,te))tn<ge&&0>s(nn,Sn)?(q[ve]=nn,q[tn]=te,ve=tn):(q[ve]=Sn,q[en]=te,ve=en);else if(tn<ge&&0>s(nn,te))q[ve]=nn,q[tn]=te,ve=tn;else break e}}return J}function s(q,J){var te=q.sortIndex-J.sortIndex;return te!==0?te:q.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,p=null,g=3,w=!1,C=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(q){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=q)r(d),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(d)}}function T(q){if(R=!1,x(q),!C)if(n(u)!==null)C=!0,qt(O);else{var J=n(d);J!==null&&ut(T,J.startTime-q)}}function O(q,J){C=!1,R&&(R=!1,E(y),y=-1),w=!0;var te=g;try{for(x(J),p=n(u);p!==null&&(!(p.expirationTime>J)||q&&!P());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,g=p.priorityLevel;var ge=ve(p.expirationTime<=J);J=t.unstable_now(),typeof ge=="function"?p.callback=ge:p===n(u)&&r(u),x(J)}else r(u);p=n(u)}if(p!==null)var Ve=!0;else{var en=n(d);en!==null&&ut(T,en.startTime-J),Ve=!1}return Ve}finally{p=null,g=te,w=!1}}var V=!1,b=null,y=-1,I=5,S=-1;function P(){return!(t.unstable_now()-S<I)}function D(){if(b!==null){var q=t.unstable_now();S=q;var J=!0;try{J=b(!0,q)}finally{J?A():(V=!1,b=null)}}else V=!1}var A;if(typeof v=="function")A=function(){v(D)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,ct=De.port2;De.port1.onmessage=D,A=function(){ct.postMessage(null)}}else A=function(){k(D,0)};function qt(q){b=q,V||(V=!0,A())}function ut(q,J){y=k(function(){q(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){C||w||(C=!0,qt(O))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var te=g;g=J;try{return q()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,J){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=g;g=q;try{return J()}finally{g=te}},t.unstable_scheduleCallback=function(q,J,te){var ve=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ve+te:ve):te=ve,q){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=te+ge,q={id:f++,callback:J,priorityLevel:q,startTime:te,expirationTime:ge,sortIndex:-1},te>ve?(q.sortIndex=te,e(d,q),n(u)===null&&q===n(d)&&(R?(E(y),y=-1):R=!0,ut(T,te-ve))):(q.sortIndex=ge,e(u,q),C||w||(C=!0,qt(O))),q},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(q){var J=g;return function(){var te=g;g=J;try{return q.apply(this,arguments)}finally{g=te}}}})(fv);hv.exports=fv;var uN=hv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dN=j,pn=uN;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pv=new Set,tl={};function pi(t,e){xo(t,e),xo(t+"Capture",e)}function xo(t,e){for(tl[t]=e,t=0;t<e.length;t++)pv.add(e[t])}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ef=Object.prototype.hasOwnProperty,hN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ny={},ry={};function fN(t){return ef.call(ry,t)?!0:ef.call(ny,t)?!1:hN.test(t)?ry[t]=!0:(ny[t]=!0,!1)}function pN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mN(t,e,n,r){if(e===null||typeof e>"u"||pN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rp=/[\-:]([a-z])/g;function Cp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rp,Cp);It[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rp,Cp);It[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rp,Cp);It[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ap(t,e,n,r){var s=It.hasOwnProperty(e)?It[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mN(e,n,s,r)&&(n=null),r||s===null?fN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dr=dN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bc=Symbol.for("react.element"),Ki=Symbol.for("react.portal"),Gi=Symbol.for("react.fragment"),Pp=Symbol.for("react.strict_mode"),tf=Symbol.for("react.profiler"),mv=Symbol.for("react.provider"),gv=Symbol.for("react.context"),Dp=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),rf=Symbol.for("react.suspense_list"),Op=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),yv=Symbol.for("react.offscreen"),sy=Symbol.iterator;function ya(t){return t===null||typeof t!="object"?null:(t=sy&&t[sy]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,lh;function ka(t){if(lh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lh=e&&e[1]||""}return`
`+lh+t}var ch=!1;function uh(t,e){if(!t||ch)return"";ch=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{ch=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ka(t):""}function gN(t){switch(t.tag){case 5:return ka(t.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return t=uh(t.type,!1),t;case 11:return t=uh(t.type.render,!1),t;case 1:return t=uh(t.type,!0),t;default:return""}}function sf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gi:return"Fragment";case Ki:return"Portal";case tf:return"Profiler";case Pp:return"StrictMode";case nf:return"Suspense";case rf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gv:return(t.displayName||"Context")+".Consumer";case mv:return(t._context.displayName||"Context")+".Provider";case Dp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Op:return e=t.displayName||null,e!==null?e:sf(t.type)||"Memo";case Gr:e=t._payload,t=t._init;try{return sf(t(e))}catch{}}return null}function yN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sf(e);case 8:return e===Pp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xN(t){var e=xv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nc(t){t._valueTracker||(t._valueTracker=xN(t))}function vv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function of(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _v(t,e){e=e.checked,e!=null&&Ap(t,"checked",e,!1)}function af(t,e){_v(t,e);var n=xs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lf(t,e.type,n):e.hasOwnProperty("defaultValue")&&lf(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lf(t,e,n){(e!=="number"||pu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sa=Array.isArray;function ao(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ay(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Sa(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function wv(t,e){var n=xs(e.value),r=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ly(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ev(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ev(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tc,bv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tc=Tc||document.createElement("div"),Tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vN=["Webkit","ms","Moz","O"];Object.keys(Ma).forEach(function(t){vN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ma[e]=Ma[t]})});function Nv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ma.hasOwnProperty(t)&&Ma[t]?(""+e).trim():e+"px"}function Tv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Nv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var _N=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function df(t,e){if(e){if(_N[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function hf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ff=null;function Lp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pf=null,lo=null,co=null;function cy(t){if(t=Ll(t)){if(typeof pf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=ud(e),pf(t.stateNode,t.type,e))}}function Iv(t){lo?co?co.push(t):co=[t]:lo=t}function kv(){if(lo){var t=lo,e=co;if(co=lo=null,cy(t),e)for(t=0;t<e.length;t++)cy(e[t])}}function Sv(t,e){return t(e)}function jv(){}var dh=!1;function Rv(t,e,n){if(dh)return t(e,n);dh=!0;try{return Sv(t,e,n)}finally{dh=!1,(lo!==null||co!==null)&&(jv(),kv())}}function rl(t,e){var n=t.stateNode;if(n===null)return null;var r=ud(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var mf=!1;if(Ir)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){mf=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{mf=!1}function wN(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Fa=!1,mu=null,gu=!1,gf=null,EN={onError:function(t){Fa=!0,mu=t}};function bN(t,e,n,r,s,i,a,c,u){Fa=!1,mu=null,wN.apply(EN,arguments)}function NN(t,e,n,r,s,i,a,c,u){if(bN.apply(this,arguments),Fa){if(Fa){var d=mu;Fa=!1,mu=null}else throw Error(z(198));gu||(gu=!0,gf=d)}}function mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Cv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uy(t){if(mi(t)!==t)throw Error(z(188))}function TN(t){var e=t.alternate;if(!e){if(e=mi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return uy(s),t;if(i===r)return uy(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Av(t){return t=TN(t),t!==null?Pv(t):null}function Pv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pv(t);if(e!==null)return e;t=t.sibling}return null}var Dv=pn.unstable_scheduleCallback,dy=pn.unstable_cancelCallback,IN=pn.unstable_shouldYield,kN=pn.unstable_requestPaint,Qe=pn.unstable_now,SN=pn.unstable_getCurrentPriorityLevel,Vp=pn.unstable_ImmediatePriority,Ov=pn.unstable_UserBlockingPriority,yu=pn.unstable_NormalPriority,jN=pn.unstable_LowPriority,Lv=pn.unstable_IdlePriority,od=null,Yn=null;function RN(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(od,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:PN,CN=Math.log,AN=Math.LN2;function PN(t){return t>>>=0,t===0?32:31-(CN(t)/AN|0)|0}var Ic=64,kc=4194304;function ja(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=ja(c):(i&=a,i!==0&&(r=ja(i)))}else a=n&~s,a!==0?r=ja(a):i!==0&&(r=ja(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vn(e),s=1<<n,r|=t[n],e&=~s;return r}function DN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ON(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Vn(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=DN(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function yf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vv(){var t=Ic;return Ic<<=1,!(Ic&4194240)&&(Ic=64),t}function hh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function LN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Mp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function Mv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fv,Fp,Uv,Bv,$v,xf=!1,Sc=[],as=null,ls=null,cs=null,sl=new Map,il=new Map,Xr=[],VN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hy(t,e){switch(t){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":sl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(e.pointerId)}}function va(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ll(e),e!==null&&Fp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function MN(t,e,n,r,s){switch(e){case"focusin":return as=va(as,t,e,n,r,s),!0;case"dragenter":return ls=va(ls,t,e,n,r,s),!0;case"mouseover":return cs=va(cs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return sl.set(i,va(sl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,il.set(i,va(il.get(i)||null,t,e,n,r,s)),!0}return!1}function zv(t){var e=Hs(t.target);if(e!==null){var n=mi(e);if(n!==null){if(e=n.tag,e===13){if(e=Cv(n),e!==null){t.blockedOn=e,$v(t.priority,function(){Uv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ff=r,n.target.dispatchEvent(r),ff=null}else return e=Ll(n),e!==null&&Fp(e),t.blockedOn=n,!1;e.shift()}return!0}function fy(t,e,n){Qc(t)&&n.delete(e)}function FN(){xf=!1,as!==null&&Qc(as)&&(as=null),ls!==null&&Qc(ls)&&(ls=null),cs!==null&&Qc(cs)&&(cs=null),sl.forEach(fy),il.forEach(fy)}function _a(t,e){t.blockedOn===e&&(t.blockedOn=null,xf||(xf=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,FN)))}function ol(t){function e(s){return _a(s,t)}if(0<Sc.length){_a(Sc[0],t);for(var n=1;n<Sc.length;n++){var r=Sc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(as!==null&&_a(as,t),ls!==null&&_a(ls,t),cs!==null&&_a(cs,t),sl.forEach(e),il.forEach(e),n=0;n<Xr.length;n++)r=Xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xr.length&&(n=Xr[0],n.blockedOn===null);)zv(n),n.blockedOn===null&&Xr.shift()}var uo=Dr.ReactCurrentBatchConfig,vu=!0;function UN(t,e,n,r){var s=_e,i=uo.transition;uo.transition=null;try{_e=1,Up(t,e,n,r)}finally{_e=s,uo.transition=i}}function BN(t,e,n,r){var s=_e,i=uo.transition;uo.transition=null;try{_e=4,Up(t,e,n,r)}finally{_e=s,uo.transition=i}}function Up(t,e,n,r){if(vu){var s=vf(t,e,n,r);if(s===null)Eh(t,e,r,_u,n),hy(t,r);else if(MN(s,t,e,n,r))r.stopPropagation();else if(hy(t,r),e&4&&-1<VN.indexOf(t)){for(;s!==null;){var i=Ll(s);if(i!==null&&Fv(i),i=vf(t,e,n,r),i===null&&Eh(t,e,r,_u,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Eh(t,e,r,null,n)}}var _u=null;function vf(t,e,n,r){if(_u=null,t=Lp(r),t=Hs(t),t!==null)if(e=mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Cv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _u=t,null}function qv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SN()){case Vp:return 1;case Ov:return 4;case yu:case jN:return 16;case Lv:return 536870912;default:return 16}default:return 16}}var ns=null,Bp=null,Xc=null;function Hv(){if(Xc)return Xc;var t,e=Bp,n=e.length,r,s="value"in ns?ns.value:ns.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Xc=s.slice(t,1<r?1-r:void 0)}function Yc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jc(){return!0}function py(){return!1}function gn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jc:py,this.isPropagationStopped=py,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){},isPersistent:jc}),e}var Po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$p=gn(Po),Ol=$e({},Po,{view:0,detail:0}),$N=gn(Ol),fh,ph,wa,ad=$e({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wa&&(wa&&t.type==="mousemove"?(fh=t.screenX-wa.screenX,ph=t.screenY-wa.screenY):ph=fh=0,wa=t),fh)},movementY:function(t){return"movementY"in t?t.movementY:ph}}),my=gn(ad),zN=$e({},ad,{dataTransfer:0}),qN=gn(zN),HN=$e({},Ol,{relatedTarget:0}),mh=gn(HN),WN=$e({},Po,{animationName:0,elapsedTime:0,pseudoElement:0}),KN=gn(WN),GN=$e({},Po,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QN=gn(GN),XN=$e({},Po,{data:0}),gy=gn(XN),YN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZN[t])?!!e[t]:!1}function zp(){return eT}var tT=$e({},Ol,{key:function(t){if(t.key){var e=YN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zp,charCode:function(t){return t.type==="keypress"?Yc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nT=gn(tT),rT=$e({},ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yy=gn(rT),sT=$e({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zp}),iT=gn(sT),oT=$e({},Po,{propertyName:0,elapsedTime:0,pseudoElement:0}),aT=gn(oT),lT=$e({},ad,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cT=gn(lT),uT=[9,13,27,32],qp=Ir&&"CompositionEvent"in window,Ua=null;Ir&&"documentMode"in document&&(Ua=document.documentMode);var dT=Ir&&"TextEvent"in window&&!Ua,Wv=Ir&&(!qp||Ua&&8<Ua&&11>=Ua),xy=" ",vy=!1;function Kv(t,e){switch(t){case"keyup":return uT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qi=!1;function hT(t,e){switch(t){case"compositionend":return Gv(e);case"keypress":return e.which!==32?null:(vy=!0,xy);case"textInput":return t=e.data,t===xy&&vy?null:t;default:return null}}function fT(t,e){if(Qi)return t==="compositionend"||!qp&&Kv(t,e)?(t=Hv(),Xc=Bp=ns=null,Qi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wv&&e.locale!=="ko"?null:e.data;default:return null}}var pT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pT[t.type]:e==="textarea"}function Qv(t,e,n,r){Iv(r),e=wu(e,"onChange"),0<e.length&&(n=new $p("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ba=null,al=null;function mT(t){o_(t,0)}function ld(t){var e=Ji(t);if(vv(e))return t}function gT(t,e){if(t==="change")return e}var Xv=!1;if(Ir){var gh;if(Ir){var yh="oninput"in document;if(!yh){var wy=document.createElement("div");wy.setAttribute("oninput","return;"),yh=typeof wy.oninput=="function"}gh=yh}else gh=!1;Xv=gh&&(!document.documentMode||9<document.documentMode)}function Ey(){Ba&&(Ba.detachEvent("onpropertychange",Yv),al=Ba=null)}function Yv(t){if(t.propertyName==="value"&&ld(al)){var e=[];Qv(e,al,t,Lp(t)),Rv(mT,e)}}function yT(t,e,n){t==="focusin"?(Ey(),Ba=e,al=n,Ba.attachEvent("onpropertychange",Yv)):t==="focusout"&&Ey()}function xT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ld(al)}function vT(t,e){if(t==="click")return ld(e)}function _T(t,e){if(t==="input"||t==="change")return ld(e)}function wT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:wT;function ll(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ef.call(e,s)||!Un(t[s],e[s]))return!1}return!0}function by(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ny(t,e){var n=by(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=by(n)}}function Jv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zv(){for(var t=window,e=pu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pu(t.document)}return e}function Hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ET(t){var e=Zv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jv(n.ownerDocument.documentElement,n)){if(r!==null&&Hp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ny(n,i);var a=Ny(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bT=Ir&&"documentMode"in document&&11>=document.documentMode,Xi=null,_f=null,$a=null,wf=!1;function Ty(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wf||Xi==null||Xi!==pu(r)||(r=Xi,"selectionStart"in r&&Hp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$a&&ll($a,r)||($a=r,r=wu(_f,"onSelect"),0<r.length&&(e=new $p("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xi)))}function Rc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yi={animationend:Rc("Animation","AnimationEnd"),animationiteration:Rc("Animation","AnimationIteration"),animationstart:Rc("Animation","AnimationStart"),transitionend:Rc("Transition","TransitionEnd")},xh={},e_={};Ir&&(e_=document.createElement("div").style,"AnimationEvent"in window||(delete Yi.animationend.animation,delete Yi.animationiteration.animation,delete Yi.animationstart.animation),"TransitionEvent"in window||delete Yi.transitionend.transition);function cd(t){if(xh[t])return xh[t];if(!Yi[t])return t;var e=Yi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in e_)return xh[t]=e[n];return t}var t_=cd("animationend"),n_=cd("animationiteration"),r_=cd("animationstart"),s_=cd("transitionend"),i_=new Map,Iy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(t,e){i_.set(t,e),pi(e,[t])}for(var vh=0;vh<Iy.length;vh++){var _h=Iy[vh],NT=_h.toLowerCase(),TT=_h[0].toUpperCase()+_h.slice(1);Ts(NT,"on"+TT)}Ts(t_,"onAnimationEnd");Ts(n_,"onAnimationIteration");Ts(r_,"onAnimationStart");Ts("dblclick","onDoubleClick");Ts("focusin","onFocus");Ts("focusout","onBlur");Ts(s_,"onTransitionEnd");xo("onMouseEnter",["mouseout","mouseover"]);xo("onMouseLeave",["mouseout","mouseover"]);xo("onPointerEnter",["pointerout","pointerover"]);xo("onPointerLeave",["pointerout","pointerover"]);pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function ky(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,NN(r,e,void 0,t),t.currentTarget=null}function o_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;ky(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;ky(s,c,d),i=u}}}if(gu)throw t=gf,gu=!1,gf=null,t}function Re(t,e){var n=e[If];n===void 0&&(n=e[If]=new Set);var r=t+"__bubble";n.has(r)||(a_(e,t,2,!1),n.add(r))}function wh(t,e,n){var r=0;e&&(r|=4),a_(n,t,r,e)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function cl(t){if(!t[Cc]){t[Cc]=!0,pv.forEach(function(n){n!=="selectionchange"&&(IT.has(n)||wh(n,!1,t),wh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cc]||(e[Cc]=!0,wh("selectionchange",!1,e))}}function a_(t,e,n,r){switch(qv(e)){case 1:var s=UN;break;case 4:s=BN;break;default:s=Up}n=s.bind(null,e,n,t),s=void 0,!mf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Eh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=Hs(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}Rv(function(){var d=i,f=Lp(n),p=[];e:{var g=i_.get(t);if(g!==void 0){var w=$p,C=t;switch(t){case"keypress":if(Yc(n)===0)break e;case"keydown":case"keyup":w=nT;break;case"focusin":C="focus",w=mh;break;case"focusout":C="blur",w=mh;break;case"beforeblur":case"afterblur":w=mh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=my;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=qN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=iT;break;case t_:case n_:case r_:w=KN;break;case s_:w=aT;break;case"scroll":w=$N;break;case"wheel":w=cT;break;case"copy":case"cut":case"paste":w=QN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=yy}var R=(e&4)!==0,k=!R&&t==="scroll",E=R?g!==null?g+"Capture":null:g;R=[];for(var v=d,x;v!==null;){x=v;var T=x.stateNode;if(x.tag===5&&T!==null&&(x=T,E!==null&&(T=rl(v,E),T!=null&&R.push(ul(v,T,x)))),k)break;v=v.return}0<R.length&&(g=new w(g,C,null,n,f),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==ff&&(C=n.relatedTarget||n.fromElement)&&(Hs(C)||C[kr]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(C=n.relatedTarget||n.toElement,w=d,C=C?Hs(C):null,C!==null&&(k=mi(C),C!==k||C.tag!==5&&C.tag!==6)&&(C=null)):(w=null,C=d),w!==C)){if(R=my,T="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(R=yy,T="onPointerLeave",E="onPointerEnter",v="pointer"),k=w==null?g:Ji(w),x=C==null?g:Ji(C),g=new R(T,v+"leave",w,n,f),g.target=k,g.relatedTarget=x,T=null,Hs(f)===d&&(R=new R(E,v+"enter",C,n,f),R.target=x,R.relatedTarget=k,T=R),k=T,w&&C)t:{for(R=w,E=C,v=0,x=R;x;x=$i(x))v++;for(x=0,T=E;T;T=$i(T))x++;for(;0<v-x;)R=$i(R),v--;for(;0<x-v;)E=$i(E),x--;for(;v--;){if(R===E||E!==null&&R===E.alternate)break t;R=$i(R),E=$i(E)}R=null}else R=null;w!==null&&Sy(p,g,w,R,!1),C!==null&&k!==null&&Sy(p,k,C,R,!0)}}e:{if(g=d?Ji(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var O=gT;else if(_y(g))if(Xv)O=_T;else{O=xT;var V=yT}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=vT);if(O&&(O=O(t,d))){Qv(p,O,n,f);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&lf(g,"number",g.value)}switch(V=d?Ji(d):window,t){case"focusin":(_y(V)||V.contentEditable==="true")&&(Xi=V,_f=d,$a=null);break;case"focusout":$a=_f=Xi=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,Ty(p,n,f);break;case"selectionchange":if(bT)break;case"keydown":case"keyup":Ty(p,n,f)}var b;if(qp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Qi?Kv(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Wv&&n.locale!=="ko"&&(Qi||y!=="onCompositionStart"?y==="onCompositionEnd"&&Qi&&(b=Hv()):(ns=f,Bp="value"in ns?ns.value:ns.textContent,Qi=!0)),V=wu(d,y),0<V.length&&(y=new gy(y,t,null,n,f),p.push({event:y,listeners:V}),b?y.data=b:(b=Gv(n),b!==null&&(y.data=b)))),(b=dT?hT(t,n):fT(t,n))&&(d=wu(d,"onBeforeInput"),0<d.length&&(f=new gy("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=b))}o_(p,e)})}function ul(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=rl(t,n),i!=null&&r.unshift(ul(t,i,s)),i=rl(t,e),i!=null&&r.push(ul(t,i,s))),t=t.return}return r}function $i(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sy(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=rl(n,i),u!=null&&a.unshift(ul(n,u,c))):s||(u=rl(n,i),u!=null&&a.push(ul(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var kT=/\r\n?/g,ST=/\u0000|\uFFFD/g;function jy(t){return(typeof t=="string"?t:""+t).replace(kT,`
`).replace(ST,"")}function Ac(t,e,n){if(e=jy(e),jy(t)!==e&&n)throw Error(z(425))}function Eu(){}var Ef=null,bf=null;function Nf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tf=typeof setTimeout=="function"?setTimeout:void 0,jT=typeof clearTimeout=="function"?clearTimeout:void 0,Ry=typeof Promise=="function"?Promise:void 0,RT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ry<"u"?function(t){return Ry.resolve(null).then(t).catch(CT)}:Tf;function CT(t){setTimeout(function(){throw t})}function bh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ol(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ol(e)}function us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Do=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Do,dl="__reactProps$"+Do,kr="__reactContainer$"+Do,If="__reactEvents$"+Do,AT="__reactListeners$"+Do,PT="__reactHandles$"+Do;function Hs(t){var e=t[Qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kr]||n[Qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cy(t);t!==null;){if(n=t[Qn])return n;t=Cy(t)}return e}t=n,n=t.parentNode}return null}function Ll(t){return t=t[Qn]||t[kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ji(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function ud(t){return t[dl]||null}var kf=[],Zi=-1;function Is(t){return{current:t}}function Ae(t){0>Zi||(t.current=kf[Zi],kf[Zi]=null,Zi--)}function ke(t,e){Zi++,kf[Zi]=t.current,t.current=e}var vs={},Ot=Is(vs),Xt=Is(!1),Zs=vs;function vo(t,e){var n=t.type.contextTypes;if(!n)return vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Yt(t){return t=t.childContextTypes,t!=null}function bu(){Ae(Xt),Ae(Ot)}function Ay(t,e,n){if(Ot.current!==vs)throw Error(z(168));ke(Ot,e),ke(Xt,n)}function l_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,yN(t)||"Unknown",s));return $e({},n,r)}function Nu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vs,Zs=Ot.current,ke(Ot,t),ke(Xt,Xt.current),!0}function Py(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=l_(t,e,Zs),r.__reactInternalMemoizedMergedChildContext=t,Ae(Xt),Ae(Ot),ke(Ot,t)):Ae(Xt),ke(Xt,n)}var pr=null,dd=!1,Nh=!1;function c_(t){pr===null?pr=[t]:pr.push(t)}function DT(t){dd=!0,c_(t)}function ks(){if(!Nh&&pr!==null){Nh=!0;var t=0,e=_e;try{var n=pr;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pr=null,dd=!1}catch(s){throw pr!==null&&(pr=pr.slice(t+1)),Dv(Vp,ks),s}finally{_e=e,Nh=!1}}return null}var eo=[],to=0,Tu=null,Iu=0,vn=[],_n=0,ei=null,yr=1,xr="";function Bs(t,e){eo[to++]=Iu,eo[to++]=Tu,Tu=t,Iu=e}function u_(t,e,n){vn[_n++]=yr,vn[_n++]=xr,vn[_n++]=ei,ei=t;var r=yr;t=xr;var s=32-Vn(r)-1;r&=~(1<<s),n+=1;var i=32-Vn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,yr=1<<32-Vn(e)+s|n<<s|r,xr=i+t}else yr=1<<i|n<<s|r,xr=t}function Wp(t){t.return!==null&&(Bs(t,1),u_(t,1,0))}function Kp(t){for(;t===Tu;)Tu=eo[--to],eo[to]=null,Iu=eo[--to],eo[to]=null;for(;t===ei;)ei=vn[--_n],vn[_n]=null,xr=vn[--_n],vn[_n]=null,yr=vn[--_n],vn[_n]=null}var dn=null,ln=null,Le=!1,On=null;function d_(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,ln=us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ei!==null?{id:yr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,ln=null,!0):!1;default:return!1}}function Sf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jf(t){if(Le){var e=ln;if(e){var n=e;if(!Dy(t,e)){if(Sf(t))throw Error(z(418));e=us(n.nextSibling);var r=dn;e&&Dy(t,e)?d_(r,n):(t.flags=t.flags&-4097|2,Le=!1,dn=t)}}else{if(Sf(t))throw Error(z(418));t.flags=t.flags&-4097|2,Le=!1,dn=t}}}function Oy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function Pc(t){if(t!==dn)return!1;if(!Le)return Oy(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nf(t.type,t.memoizedProps)),e&&(e=ln)){if(Sf(t))throw h_(),Error(z(418));for(;e;)d_(t,e),e=us(e.nextSibling)}if(Oy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=us(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=dn?us(t.stateNode.nextSibling):null;return!0}function h_(){for(var t=ln;t;)t=us(t.nextSibling)}function _o(){ln=dn=null,Le=!1}function Gp(t){On===null?On=[t]:On.push(t)}var OT=Dr.ReactCurrentBatchConfig;function Ea(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Dc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ly(t){var e=t._init;return e(t._payload)}function f_(t){function e(E,v){if(t){var x=E.deletions;x===null?(E.deletions=[v],E.flags|=16):x.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function s(E,v){return E=ps(E,v),E.index=0,E.sibling=null,E}function i(E,v,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<v?(E.flags|=2,v):x):(E.flags|=2,v)):(E.flags|=1048576,v)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,v,x,T){return v===null||v.tag!==6?(v=Ch(x,E.mode,T),v.return=E,v):(v=s(v,x),v.return=E,v)}function u(E,v,x,T){var O=x.type;return O===Gi?f(E,v,x.props.children,T,x.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Gr&&Ly(O)===v.type)?(T=s(v,x.props),T.ref=Ea(E,v,x),T.return=E,T):(T=su(x.type,x.key,x.props,null,E.mode,T),T.ref=Ea(E,v,x),T.return=E,T)}function d(E,v,x,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Ah(x,E.mode,T),v.return=E,v):(v=s(v,x.children||[]),v.return=E,v)}function f(E,v,x,T,O){return v===null||v.tag!==7?(v=Xs(x,E.mode,T,O),v.return=E,v):(v=s(v,x),v.return=E,v)}function p(E,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ch(""+v,E.mode,x),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case bc:return x=su(v.type,v.key,v.props,null,E.mode,x),x.ref=Ea(E,null,v),x.return=E,x;case Ki:return v=Ah(v,E.mode,x),v.return=E,v;case Gr:var T=v._init;return p(E,T(v._payload),x)}if(Sa(v)||ya(v))return v=Xs(v,E.mode,x,null),v.return=E,v;Dc(E,v)}return null}function g(E,v,x,T){var O=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return O!==null?null:c(E,v,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case bc:return x.key===O?u(E,v,x,T):null;case Ki:return x.key===O?d(E,v,x,T):null;case Gr:return O=x._init,g(E,v,O(x._payload),T)}if(Sa(x)||ya(x))return O!==null?null:f(E,v,x,T,null);Dc(E,x)}return null}function w(E,v,x,T,O){if(typeof T=="string"&&T!==""||typeof T=="number")return E=E.get(x)||null,c(v,E,""+T,O);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case bc:return E=E.get(T.key===null?x:T.key)||null,u(v,E,T,O);case Ki:return E=E.get(T.key===null?x:T.key)||null,d(v,E,T,O);case Gr:var V=T._init;return w(E,v,x,V(T._payload),O)}if(Sa(T)||ya(T))return E=E.get(x)||null,f(v,E,T,O,null);Dc(v,T)}return null}function C(E,v,x,T){for(var O=null,V=null,b=v,y=v=0,I=null;b!==null&&y<x.length;y++){b.index>y?(I=b,b=null):I=b.sibling;var S=g(E,b,x[y],T);if(S===null){b===null&&(b=I);break}t&&b&&S.alternate===null&&e(E,b),v=i(S,v,y),V===null?O=S:V.sibling=S,V=S,b=I}if(y===x.length)return n(E,b),Le&&Bs(E,y),O;if(b===null){for(;y<x.length;y++)b=p(E,x[y],T),b!==null&&(v=i(b,v,y),V===null?O=b:V.sibling=b,V=b);return Le&&Bs(E,y),O}for(b=r(E,b);y<x.length;y++)I=w(b,E,y,x[y],T),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?y:I.key),v=i(I,v,y),V===null?O=I:V.sibling=I,V=I);return t&&b.forEach(function(P){return e(E,P)}),Le&&Bs(E,y),O}function R(E,v,x,T){var O=ya(x);if(typeof O!="function")throw Error(z(150));if(x=O.call(x),x==null)throw Error(z(151));for(var V=O=null,b=v,y=v=0,I=null,S=x.next();b!==null&&!S.done;y++,S=x.next()){b.index>y?(I=b,b=null):I=b.sibling;var P=g(E,b,S.value,T);if(P===null){b===null&&(b=I);break}t&&b&&P.alternate===null&&e(E,b),v=i(P,v,y),V===null?O=P:V.sibling=P,V=P,b=I}if(S.done)return n(E,b),Le&&Bs(E,y),O;if(b===null){for(;!S.done;y++,S=x.next())S=p(E,S.value,T),S!==null&&(v=i(S,v,y),V===null?O=S:V.sibling=S,V=S);return Le&&Bs(E,y),O}for(b=r(E,b);!S.done;y++,S=x.next())S=w(b,E,y,S.value,T),S!==null&&(t&&S.alternate!==null&&b.delete(S.key===null?y:S.key),v=i(S,v,y),V===null?O=S:V.sibling=S,V=S);return t&&b.forEach(function(D){return e(E,D)}),Le&&Bs(E,y),O}function k(E,v,x,T){if(typeof x=="object"&&x!==null&&x.type===Gi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case bc:e:{for(var O=x.key,V=v;V!==null;){if(V.key===O){if(O=x.type,O===Gi){if(V.tag===7){n(E,V.sibling),v=s(V,x.props.children),v.return=E,E=v;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Gr&&Ly(O)===V.type){n(E,V.sibling),v=s(V,x.props),v.ref=Ea(E,V,x),v.return=E,E=v;break e}n(E,V);break}else e(E,V);V=V.sibling}x.type===Gi?(v=Xs(x.props.children,E.mode,T,x.key),v.return=E,E=v):(T=su(x.type,x.key,x.props,null,E.mode,T),T.ref=Ea(E,v,x),T.return=E,E=T)}return a(E);case Ki:e:{for(V=x.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(E,v.sibling),v=s(v,x.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=Ah(x,E.mode,T),v.return=E,E=v}return a(E);case Gr:return V=x._init,k(E,v,V(x._payload),T)}if(Sa(x))return C(E,v,x,T);if(ya(x))return R(E,v,x,T);Dc(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(E,v.sibling),v=s(v,x),v.return=E,E=v):(n(E,v),v=Ch(x,E.mode,T),v.return=E,E=v),a(E)):n(E,v)}return k}var wo=f_(!0),p_=f_(!1),ku=Is(null),Su=null,no=null,Qp=null;function Xp(){Qp=no=Su=null}function Yp(t){var e=ku.current;Ae(ku),t._currentValue=e}function Rf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ho(t,e){Su=t,Qp=no=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(Qp!==t)if(t={context:t,memoizedValue:e,next:null},no===null){if(Su===null)throw Error(z(308));no=t,Su.dependencies={lanes:0,firstContext:t}}else no=no.next=t;return e}var Ws=null;function Jp(t){Ws===null?Ws=[t]:Ws.push(t)}function m_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Jp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qr=!1;function Zp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ds(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Sr(t,n)}return s=r.interleaved,s===null?(e.next=e,Jp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Sr(t,n)}function Jc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mp(t,n)}}function Vy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ju(t,e,n,r){var s=t.updateQueue;Qr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==a&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;a=0,f=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,R=c;switch(g=e,w=n,R.tag){case 1:if(C=R.payload,typeof C=="function"){p=C.call(w,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,g=typeof C=="function"?C.call(w,p,g):C,g==null)break e;p=$e({},p,g);break e;case 2:Qr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=w,u=p):f=f.next=w,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ni|=a,t.lanes=a,t.memoizedState=p}}function My(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Vl={},Jn=Is(Vl),hl=Is(Vl),fl=Is(Vl);function Ks(t){if(t===Vl)throw Error(z(174));return t}function em(t,e){switch(ke(fl,e),ke(hl,t),ke(Jn,Vl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uf(e,t)}Ae(Jn),ke(Jn,e)}function Eo(){Ae(Jn),Ae(hl),Ae(fl)}function y_(t){Ks(fl.current);var e=Ks(Jn.current),n=uf(e,t.type);e!==n&&(ke(hl,t),ke(Jn,n))}function tm(t){hl.current===t&&(Ae(Jn),Ae(hl))}var Ue=Is(0);function Ru(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Th=[];function nm(){for(var t=0;t<Th.length;t++)Th[t]._workInProgressVersionPrimary=null;Th.length=0}var Zc=Dr.ReactCurrentDispatcher,Ih=Dr.ReactCurrentBatchConfig,ti=0,Be=null,at=null,pt=null,Cu=!1,za=!1,pl=0,LT=0;function jt(){throw Error(z(321))}function rm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function sm(t,e,n,r,s,i){if(ti=i,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zc.current=t===null||t.memoizedState===null?UT:BT,t=n(r,s),za){i=0;do{if(za=!1,pl=0,25<=i)throw Error(z(301));i+=1,pt=at=null,e.updateQueue=null,Zc.current=$T,t=n(r,s)}while(za)}if(Zc.current=Au,e=at!==null&&at.next!==null,ti=0,pt=at=Be=null,Cu=!1,e)throw Error(z(300));return t}function im(){var t=pl!==0;return pl=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Be.memoizedState=pt=t:pt=pt.next=t,pt}function In(){if(at===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=pt===null?Be.memoizedState:pt.next;if(e!==null)pt=e,at=t;else{if(t===null)throw Error(z(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},pt===null?Be.memoizedState=pt=t:pt=pt.next=t}return pt}function ml(t,e){return typeof e=="function"?e(t):e}function kh(t){var e=In(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=at,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var f=d.lane;if((ti&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,a=r):u=u.next=p,Be.lanes|=f,ni|=f}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,Un(r,e.memoizedState)||(Qt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Be.lanes|=i,ni|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sh(t){var e=In(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Un(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function x_(){}function v_(t,e){var n=Be,r=In(),s=e(),i=!Un(r.memoizedState,s);if(i&&(r.memoizedState=s,Qt=!0),r=r.queue,om(E_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,gl(9,w_.bind(null,n,r,s,e),void 0,null),gt===null)throw Error(z(349));ti&30||__(n,e,s)}return s}function __(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function w_(t,e,n,r){e.value=n,e.getSnapshot=r,b_(e)&&N_(t)}function E_(t,e,n){return n(function(){b_(e)&&N_(t)})}function b_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function N_(t){var e=Sr(t,1);e!==null&&Mn(e,t,1,-1)}function Fy(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:t},e.queue=t,t=t.dispatch=FT.bind(null,Be,t),[e.memoizedState,t]}function gl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T_(){return In().memoizedState}function eu(t,e,n,r){var s=Gn();Be.flags|=t,s.memoizedState=gl(1|e,n,void 0,r===void 0?null:r)}function hd(t,e,n,r){var s=In();r=r===void 0?null:r;var i=void 0;if(at!==null){var a=at.memoizedState;if(i=a.destroy,r!==null&&rm(r,a.deps)){s.memoizedState=gl(e,n,i,r);return}}Be.flags|=t,s.memoizedState=gl(1|e,n,i,r)}function Uy(t,e){return eu(8390656,8,t,e)}function om(t,e){return hd(2048,8,t,e)}function I_(t,e){return hd(4,2,t,e)}function k_(t,e){return hd(4,4,t,e)}function S_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function j_(t,e,n){return n=n!=null?n.concat([t]):null,hd(4,4,S_.bind(null,e,t),n)}function am(){}function R_(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function C_(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function A_(t,e,n){return ti&21?(Un(n,e)||(n=Vv(),Be.lanes|=n,ni|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function VT(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Ih.transition;Ih.transition={};try{t(!1),e()}finally{_e=n,Ih.transition=r}}function P_(){return In().memoizedState}function MT(t,e,n){var r=fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},D_(t))O_(e,n);else if(n=m_(t,e,n,r),n!==null){var s=Ft();Mn(n,t,r,s),L_(n,e,r)}}function FT(t,e,n){var r=fs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(D_(t))O_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,Un(c,a)){var u=e.interleaved;u===null?(s.next=s,Jp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=m_(t,e,s,r),n!==null&&(s=Ft(),Mn(n,t,r,s),L_(n,e,r))}}function D_(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function O_(t,e){za=Cu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mp(t,n)}}var Au={readContext:Tn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},UT={readContext:Tn,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:Uy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,eu(4194308,4,S_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return eu(4194308,4,t,e)},useInsertionEffect:function(t,e){return eu(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MT.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:Fy,useDebugValue:am,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=Fy(!1),e=t[0];return t=VT.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,s=Gn();if(Le){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),gt===null)throw Error(z(349));ti&30||__(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Uy(E_.bind(null,r,i,t),[t]),r.flags|=2048,gl(9,w_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gn(),e=gt.identifierPrefix;if(Le){var n=xr,r=yr;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BT={readContext:Tn,useCallback:R_,useContext:Tn,useEffect:om,useImperativeHandle:j_,useInsertionEffect:I_,useLayoutEffect:k_,useMemo:C_,useReducer:kh,useRef:T_,useState:function(){return kh(ml)},useDebugValue:am,useDeferredValue:function(t){var e=In();return A_(e,at.memoizedState,t)},useTransition:function(){var t=kh(ml)[0],e=In().memoizedState;return[t,e]},useMutableSource:x_,useSyncExternalStore:v_,useId:P_,unstable_isNewReconciler:!1},$T={readContext:Tn,useCallback:R_,useContext:Tn,useEffect:om,useImperativeHandle:j_,useInsertionEffect:I_,useLayoutEffect:k_,useMemo:C_,useReducer:Sh,useRef:T_,useState:function(){return Sh(ml)},useDebugValue:am,useDeferredValue:function(t){var e=In();return at===null?e.memoizedState=t:A_(e,at.memoizedState,t)},useTransition:function(){var t=Sh(ml)[0],e=In().memoizedState;return[t,e]},useMutableSource:x_,useSyncExternalStore:v_,useId:P_,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fd={isMounted:function(t){return(t=t._reactInternals)?mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ft(),s=fs(t),i=Er(r,s);i.payload=e,n!=null&&(i.callback=n),e=ds(t,i,s),e!==null&&(Mn(e,t,s,r),Jc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ft(),s=fs(t),i=Er(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ds(t,i,s),e!==null&&(Mn(e,t,s,r),Jc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ft(),r=fs(t),s=Er(n,r);s.tag=2,e!=null&&(s.callback=e),e=ds(t,s,r),e!==null&&(Mn(e,t,r,n),Jc(e,t,r))}};function By(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!ll(n,r)||!ll(s,i):!0}function V_(t,e,n){var r=!1,s=vs,i=e.contextType;return typeof i=="object"&&i!==null?i=Tn(i):(s=Yt(e)?Zs:Ot.current,r=e.contextTypes,i=(r=r!=null)?vo(t,s):vs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $y(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fd.enqueueReplaceState(e,e.state,null)}function Af(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Tn(i):(i=Yt(e)?Zs:Ot.current,s.context=vo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Cf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fd.enqueueReplaceState(s,s.state,null),ju(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bo(t,e){try{var n="",r=e;do n+=gN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zT=typeof WeakMap=="function"?WeakMap:Map;function M_(t,e,n){n=Er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Du||(Du=!0,zf=r),Pf(t,e)},n}function F_(t,e,n){n=Er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Pf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Pf(t,e),typeof r!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function zy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=rI.bind(null,t,e,n),e.then(t,t))}function qy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Er(-1,1),e.tag=2,ds(n,e,1))),n.lanes|=1),t)}var qT=Dr.ReactCurrentOwner,Qt=!1;function Mt(t,e,n,r){e.child=t===null?p_(e,null,n,r):wo(e,t.child,n,r)}function Wy(t,e,n,r,s){n=n.render;var i=e.ref;return ho(e,s),r=sm(t,e,n,r,i,s),n=im(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jr(t,e,s)):(Le&&n&&Wp(e),e.flags|=1,Mt(t,e,r,s),e.child)}function Ky(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,U_(t,e,i,r,s)):(t=su(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ll,n(a,r)&&t.ref===e.ref)return jr(t,e,s)}return e.flags|=1,t=ps(i,r),t.ref=e.ref,t.return=e,e.child=t}function U_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ll(i,r)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,jr(t,e,s)}return Df(t,e,n,r,s)}function B_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(so,on),on|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(so,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ke(so,on),on|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ke(so,on),on|=r;return Mt(t,e,s,n),e.child}function $_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Df(t,e,n,r,s){var i=Yt(n)?Zs:Ot.current;return i=vo(e,i),ho(e,s),n=sm(t,e,n,r,i,s),r=im(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jr(t,e,s)):(Le&&r&&Wp(e),e.flags|=1,Mt(t,e,n,s),e.child)}function Gy(t,e,n,r,s){if(Yt(n)){var i=!0;Nu(e)}else i=!1;if(ho(e,s),e.stateNode===null)tu(t,e),V_(e,n,r),Af(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tn(d):(d=Yt(n)?Zs:Ot.current,d=vo(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&$y(e,a,r,d),Qr=!1;var g=e.memoizedState;a.state=g,ju(e,r,a,s),u=e.memoizedState,c!==r||g!==u||Xt.current||Qr?(typeof f=="function"&&(Cf(e,n,f,r),u=e.memoizedState),(c=Qr||By(e,n,c,r,g,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,g_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Pn(e.type,c),a.props=d,p=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Tn(u):(u=Yt(n)?Zs:Ot.current,u=vo(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==p||g!==u)&&$y(e,a,r,u),Qr=!1,g=e.memoizedState,a.state=g,ju(e,r,a,s);var C=e.memoizedState;c!==p||g!==C||Xt.current||Qr?(typeof w=="function"&&(Cf(e,n,w,r),C=e.memoizedState),(d=Qr||By(e,n,d,r,g,C,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Of(t,e,n,r,i,s)}function Of(t,e,n,r,s,i){$_(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Py(e,n,!1),jr(t,e,i);r=e.stateNode,qT.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=wo(e,t.child,null,i),e.child=wo(e,null,c,i)):Mt(t,e,c,i),e.memoizedState=r.state,s&&Py(e,n,!0),e.child}function z_(t){var e=t.stateNode;e.pendingContext?Ay(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ay(t,e.context,!1),em(t,e.containerInfo)}function Qy(t,e,n,r,s){return _o(),Gp(s),e.flags|=256,Mt(t,e,n,r),e.child}var Lf={dehydrated:null,treeContext:null,retryLane:0};function Vf(t){return{baseLanes:t,cachePool:null,transitions:null}}function q_(t,e,n){var r=e.pendingProps,s=Ue.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ke(Ue,s&1),t===null)return jf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=gd(a,r,0,null),t=Xs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vf(n),e.memoizedState=Lf,t):lm(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return HT(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ps(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=ps(c,i):(i=Xs(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Vf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Lf,r}return i=t.child,t=i.sibling,r=ps(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lm(t,e){return e=gd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oc(t,e,n,r){return r!==null&&Gp(r),wo(e,t.child,null,n),t=lm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HT(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=jh(Error(z(422))),Oc(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=gd({mode:"visible",children:r.children},s,0,null),i=Xs(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wo(e,t.child,null,a),e.child.memoizedState=Vf(a),e.memoizedState=Lf,i);if(!(e.mode&1))return Oc(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=jh(i,r,void 0),Oc(t,e,a,r)}if(c=(a&t.childLanes)!==0,Qt||c){if(r=gt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Sr(t,s),Mn(r,t,s,-1))}return pm(),r=jh(Error(z(421))),Oc(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=sI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ln=us(s.nextSibling),dn=e,Le=!0,On=null,t!==null&&(vn[_n++]=yr,vn[_n++]=xr,vn[_n++]=ei,yr=t.id,xr=t.overflow,ei=e),e=lm(e,r.children),e.flags|=4096,e)}function Xy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rf(t.return,e,n)}function Rh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function H_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Mt(t,e,r.children,n),r=Ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xy(t,n,e);else if(t.tag===19)Xy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Ue,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ru(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ru(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rh(e,!0,n,null,i);break;case"together":Rh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ni|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WT(t,e,n){switch(e.tag){case 3:z_(e),_o();break;case 5:y_(e);break;case 1:Yt(e.type)&&Nu(e);break;case 4:em(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ke(ku,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?q_(t,e,n):(ke(Ue,Ue.current&1),t=jr(t,e,n),t!==null?t.sibling:null);ke(Ue,Ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return H_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Ue,Ue.current),r)break;return null;case 22:case 23:return e.lanes=0,B_(t,e,n)}return jr(t,e,n)}var W_,Mf,K_,G_;W_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mf=function(){};K_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ks(Jn.current);var i=null;switch(n){case"input":s=of(t,s),r=of(t,r),i=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),i=[];break;case"textarea":s=cf(t,s),r=cf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Eu)}df(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(tl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(tl.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Re("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};G_=function(t,e,n,r){n!==r&&(e.flags|=4)};function ba(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KT(t,e,n){var r=e.pendingProps;switch(Kp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return Yt(e.type)&&bu(),Rt(e),null;case 3:return r=e.stateNode,Eo(),Ae(Xt),Ae(Ot),nm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Wf(On),On=null))),Mf(t,e),Rt(e),null;case 5:tm(e);var s=Ks(fl.current);if(n=e.type,t!==null&&e.stateNode!=null)K_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Rt(e),null}if(t=Ks(Jn.current),Pc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qn]=e,r[dl]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Ra.length;s++)Re(Ra[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":iy(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":ay(r,i),Re("invalid",r)}df(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ac(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ac(r.textContent,c,t),s=["children",""+c]):tl.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Re("scroll",r)}switch(n){case"input":Nc(r),oy(r,i,!0);break;case"textarea":Nc(r),ly(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Eu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ev(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Qn]=e,t[dl]=r,W_(t,e,!1,!1),e.stateNode=t;e:{switch(a=hf(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ra.length;s++)Re(Ra[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":iy(t,r),s=of(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),Re("invalid",t);break;case"textarea":ay(t,r),s=cf(t,r),Re("invalid",t);break;default:s=r}df(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Tv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&bv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&nl(t,u):typeof u=="number"&&nl(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(tl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Re("scroll",t):u!=null&&Ap(t,i,u,a))}switch(n){case"input":Nc(t),oy(t,r,!1);break;case"textarea":Nc(t),ly(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ao(t,!!r.multiple,i,!1):r.defaultValue!=null&&ao(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Eu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(t&&e.stateNode!=null)G_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ks(fl.current),Ks(Jn.current),Pc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qn]=e,(i=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:Ac(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ac(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=e,e.stateNode=r}return Rt(e),null;case 13:if(Ae(Ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&ln!==null&&e.mode&1&&!(e.flags&128))h_(),_o(),e.flags|=98560,i=!1;else if(i=Pc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Qn]=e}else _o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),i=!1}else On!==null&&(Wf(On),On=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?lt===0&&(lt=3):pm())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return Eo(),Mf(t,e),t===null&&cl(e.stateNode.containerInfo),Rt(e),null;case 10:return Yp(e.type._context),Rt(e),null;case 17:return Yt(e.type)&&bu(),Rt(e),null;case 19:if(Ae(Ue),i=e.memoizedState,i===null)return Rt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)ba(i,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ru(t),a!==null){for(e.flags|=128,ba(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Ue,Ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&Qe()>No&&(e.flags|=128,r=!0,ba(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ru(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ba(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Le)return Rt(e),null}else 2*Qe()-i.renderingStartTime>No&&n!==1073741824&&(e.flags|=128,r=!0,ba(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qe(),e.sibling=null,n=Ue.current,ke(Ue,r?n&1|2:n&1),e):(Rt(e),null);case 22:case 23:return fm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?on&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function GT(t,e){switch(Kp(e),e.tag){case 1:return Yt(e.type)&&bu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Eo(),Ae(Xt),Ae(Ot),nm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tm(e),null;case 13:if(Ae(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));_o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Ue),null;case 4:return Eo(),null;case 10:return Yp(e.type._context),null;case 22:case 23:return fm(),null;case 24:return null;default:return null}}var Lc=!1,Pt=!1,QT=typeof WeakSet=="function"?WeakSet:Set,G=null;function ro(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function Ff(t,e,n){try{n()}catch(r){We(t,e,r)}}var Yy=!1;function XT(t,e){if(Ef=vu,t=Zv(),Hp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(c=a+s),p!==i||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++d===s&&(c=a),g===i&&++f===r&&(u=a),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bf={focusedElem:t,selectionRange:n},vu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,k=C.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?R:Pn(e.type,R),k);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(T){We(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return C=Yy,Yy=!1,C}function qa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ff(e,n,i)}s=s.next}while(s!==r)}}function pd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Q_(t){var e=t.alternate;e!==null&&(t.alternate=null,Q_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[dl],delete e[If],delete e[AT],delete e[PT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function X_(t){return t.tag===5||t.tag===3||t.tag===4}function Jy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||X_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Eu));else if(r!==4&&(t=t.child,t!==null))for(Bf(t,e,n),t=t.sibling;t!==null;)Bf(t,e,n),t=t.sibling}function $f(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($f(t,e,n),t=t.sibling;t!==null;)$f(t,e,n),t=t.sibling}var _t=null,Dn=!1;function Wr(t,e,n){for(n=n.child;n!==null;)Y_(t,e,n),n=n.sibling}function Y_(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(od,n)}catch{}switch(n.tag){case 5:Pt||ro(n,e);case 6:var r=_t,s=Dn;_t=null,Wr(t,e,n),_t=r,Dn=s,_t!==null&&(Dn?(t=_t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_t.removeChild(n.stateNode));break;case 18:_t!==null&&(Dn?(t=_t,n=n.stateNode,t.nodeType===8?bh(t.parentNode,n):t.nodeType===1&&bh(t,n),ol(t)):bh(_t,n.stateNode));break;case 4:r=_t,s=Dn,_t=n.stateNode.containerInfo,Dn=!0,Wr(t,e,n),_t=r,Dn=s;break;case 0:case 11:case 14:case 15:if(!Pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ff(n,e,a),s=s.next}while(s!==r)}Wr(t,e,n);break;case 1:if(!Pt&&(ro(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){We(n,e,c)}Wr(t,e,n);break;case 21:Wr(t,e,n);break;case 22:n.mode&1?(Pt=(r=Pt)||n.memoizedState!==null,Wr(t,e,n),Pt=r):Wr(t,e,n);break;default:Wr(t,e,n)}}function Zy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QT),e.forEach(function(r){var s=iI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function An(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:_t=c.stateNode,Dn=!1;break e;case 3:_t=c.stateNode.containerInfo,Dn=!0;break e;case 4:_t=c.stateNode.containerInfo,Dn=!0;break e}c=c.return}if(_t===null)throw Error(z(160));Y_(i,a,s),_t=null,Dn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){We(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)J_(e,t),e=e.sibling}function J_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(An(e,t),Kn(t),r&4){try{qa(3,t,t.return),pd(3,t)}catch(R){We(t,t.return,R)}try{qa(5,t,t.return)}catch(R){We(t,t.return,R)}}break;case 1:An(e,t),Kn(t),r&512&&n!==null&&ro(n,n.return);break;case 5:if(An(e,t),Kn(t),r&512&&n!==null&&ro(n,n.return),t.flags&32){var s=t.stateNode;try{nl(s,"")}catch(R){We(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&_v(s,i),hf(c,a);var d=hf(c,i);for(a=0;a<u.length;a+=2){var f=u[a],p=u[a+1];f==="style"?Tv(s,p):f==="dangerouslySetInnerHTML"?bv(s,p):f==="children"?nl(s,p):Ap(s,f,p,d)}switch(c){case"input":af(s,i);break;case"textarea":wv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?ao(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?ao(s,!!i.multiple,i.defaultValue,!0):ao(s,!!i.multiple,i.multiple?[]:"",!1))}s[dl]=i}catch(R){We(t,t.return,R)}}break;case 6:if(An(e,t),Kn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){We(t,t.return,R)}}break;case 3:if(An(e,t),Kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ol(e.containerInfo)}catch(R){We(t,t.return,R)}break;case 4:An(e,t),Kn(t);break;case 13:An(e,t),Kn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dm=Qe())),r&4&&Zy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(d=Pt)||f,An(e,t),Pt=d):An(e,t),Kn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(G=t,f=t.child;f!==null;){for(p=G=f;G!==null;){switch(g=G,w=g.child,g.tag){case 0:case 11:case 14:case 15:qa(4,g,g.return);break;case 1:ro(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(R){We(r,n,R)}}break;case 5:ro(g,g.return);break;case 22:if(g.memoizedState!==null){t0(p);continue}}w!==null?(w.return=g,G=w):t0(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Nv("display",a))}catch(R){We(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){We(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:An(e,t),Kn(t),r&4&&Zy(t);break;case 21:break;default:An(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(X_(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(nl(s,""),r.flags&=-33);var i=Jy(t);$f(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=Jy(t);Bf(t,c,a);break;default:throw Error(z(161))}}catch(u){We(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YT(t,e,n){G=t,Z_(t)}function Z_(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Lc;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Pt;c=Lc;var d=Pt;if(Lc=a,(Pt=u)&&!d)for(G=s;G!==null;)a=G,u=a.child,a.tag===22&&a.memoizedState!==null?n0(s):u!==null?(u.return=a,G=u):n0(s);for(;i!==null;)G=i,Z_(i),i=i.sibling;G=s,Lc=c,Pt=d}e0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):e0(t)}}function e0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||pd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&My(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}My(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ol(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Pt||e.flags&512&&Uf(e)}catch(g){We(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function t0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function n0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pd(4,e)}catch(u){We(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){We(e,s,u)}}var i=e.return;try{Uf(e)}catch(u){We(e,i,u)}break;case 5:var a=e.return;try{Uf(e)}catch(u){We(e,a,u)}}}catch(u){We(e,e.return,u)}if(e===t){G=null;break}var c=e.sibling;if(c!==null){c.return=e.return,G=c;break}G=e.return}}var JT=Math.ceil,Pu=Dr.ReactCurrentDispatcher,cm=Dr.ReactCurrentOwner,bn=Dr.ReactCurrentBatchConfig,fe=0,gt=null,rt=null,bt=0,on=0,so=Is(0),lt=0,yl=null,ni=0,md=0,um=0,Ha=null,Kt=null,dm=0,No=1/0,fr=null,Du=!1,zf=null,hs=null,Vc=!1,rs=null,Ou=0,Wa=0,qf=null,nu=-1,ru=0;function Ft(){return fe&6?Qe():nu!==-1?nu:nu=Qe()}function fs(t){return t.mode&1?fe&2&&bt!==0?bt&-bt:OT.transition!==null?(ru===0&&(ru=Vv()),ru):(t=_e,t!==0||(t=window.event,t=t===void 0?16:qv(t.type)),t):1}function Mn(t,e,n,r){if(50<Wa)throw Wa=0,qf=null,Error(z(185));Dl(t,n,r),(!(fe&2)||t!==gt)&&(t===gt&&(!(fe&2)&&(md|=n),lt===4&&Yr(t,bt)),Jt(t,r),n===1&&fe===0&&!(e.mode&1)&&(No=Qe()+500,dd&&ks()))}function Jt(t,e){var n=t.callbackNode;ON(t,e);var r=xu(t,t===gt?bt:0);if(r===0)n!==null&&dy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dy(n),e===1)t.tag===0?DT(r0.bind(null,t)):c_(r0.bind(null,t)),RT(function(){!(fe&6)&&ks()}),n=null;else{switch(Mv(r)){case 1:n=Vp;break;case 4:n=Ov;break;case 16:n=yu;break;case 536870912:n=Lv;break;default:n=yu}n=aw(n,ew.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ew(t,e){if(nu=-1,ru=0,fe&6)throw Error(z(327));var n=t.callbackNode;if(fo()&&t.callbackNode!==n)return null;var r=xu(t,t===gt?bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lu(t,r);else{e=r;var s=fe;fe|=2;var i=nw();(gt!==t||bt!==e)&&(fr=null,No=Qe()+500,Qs(t,e));do try{tI();break}catch(c){tw(t,c)}while(!0);Xp(),Pu.current=i,fe=s,rt!==null?e=0:(gt=null,bt=0,e=lt)}if(e!==0){if(e===2&&(s=yf(t),s!==0&&(r=s,e=Hf(t,s))),e===1)throw n=yl,Qs(t,0),Yr(t,r),Jt(t,Qe()),n;if(e===6)Yr(t,r);else{if(s=t.current.alternate,!(r&30)&&!ZT(s)&&(e=Lu(t,r),e===2&&(i=yf(t),i!==0&&(r=i,e=Hf(t,i))),e===1))throw n=yl,Qs(t,0),Yr(t,r),Jt(t,Qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:$s(t,Kt,fr);break;case 3:if(Yr(t,r),(r&130023424)===r&&(e=dm+500-Qe(),10<e)){if(xu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ft(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Tf($s.bind(null,t,Kt,fr),e);break}$s(t,Kt,fr);break;case 4:if(Yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Vn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JT(r/1960))-r,10<r){t.timeoutHandle=Tf($s.bind(null,t,Kt,fr),r);break}$s(t,Kt,fr);break;case 5:$s(t,Kt,fr);break;default:throw Error(z(329))}}}return Jt(t,Qe()),t.callbackNode===n?ew.bind(null,t):null}function Hf(t,e){var n=Ha;return t.current.memoizedState.isDehydrated&&(Qs(t,e).flags|=256),t=Lu(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&Wf(e)),t}function Wf(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function ZT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Un(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yr(t,e){for(e&=~um,e&=~md,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),r=1<<n;t[n]=-1,e&=~r}}function r0(t){if(fe&6)throw Error(z(327));fo();var e=xu(t,0);if(!(e&1))return Jt(t,Qe()),null;var n=Lu(t,e);if(t.tag!==0&&n===2){var r=yf(t);r!==0&&(e=r,n=Hf(t,r))}if(n===1)throw n=yl,Qs(t,0),Yr(t,e),Jt(t,Qe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,Kt,fr),Jt(t,Qe()),null}function hm(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(No=Qe()+500,dd&&ks())}}function ri(t){rs!==null&&rs.tag===0&&!(fe&6)&&fo();var e=fe;fe|=1;var n=bn.transition,r=_e;try{if(bn.transition=null,_e=1,t)return t()}finally{_e=r,bn.transition=n,fe=e,!(fe&6)&&ks()}}function fm(){on=so.current,Ae(so)}function Qs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jT(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(Kp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bu();break;case 3:Eo(),Ae(Xt),Ae(Ot),nm();break;case 5:tm(r);break;case 4:Eo();break;case 13:Ae(Ue);break;case 19:Ae(Ue);break;case 10:Yp(r.type._context);break;case 22:case 23:fm()}n=n.return}if(gt=t,rt=t=ps(t.current,null),bt=on=e,lt=0,yl=null,um=md=ni=0,Kt=Ha=null,Ws!==null){for(e=0;e<Ws.length;e++)if(n=Ws[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ws=null}return t}function tw(t,e){do{var n=rt;try{if(Xp(),Zc.current=Au,Cu){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cu=!1}if(ti=0,pt=at=Be=null,za=!1,pl=0,cm.current=null,n===null||n.return===null){lt=1,yl=e,rt=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=bt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=qy(a);if(w!==null){w.flags&=-257,Hy(w,a,c,i,e),w.mode&1&&zy(i,d,e),e=w,u=d;var C=e.updateQueue;if(C===null){var R=new Set;R.add(u),e.updateQueue=R}else C.add(u);break e}else{if(!(e&1)){zy(i,d,e),pm();break e}u=Error(z(426))}}else if(Le&&c.mode&1){var k=qy(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Hy(k,a,c,i,e),Gp(bo(u,c));break e}}i=u=bo(u,c),lt!==4&&(lt=2),Ha===null?Ha=[i]:Ha.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=M_(i,u,e);Vy(i,E);break e;case 1:c=u;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(hs===null||!hs.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=F_(i,c,e);Vy(i,T);break e}}i=i.return}while(i!==null)}sw(n)}catch(O){e=O,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function nw(){var t=Pu.current;return Pu.current=Au,t===null?Au:t}function pm(){(lt===0||lt===3||lt===2)&&(lt=4),gt===null||!(ni&268435455)&&!(md&268435455)||Yr(gt,bt)}function Lu(t,e){var n=fe;fe|=2;var r=nw();(gt!==t||bt!==e)&&(fr=null,Qs(t,e));do try{eI();break}catch(s){tw(t,s)}while(!0);if(Xp(),fe=n,Pu.current=r,rt!==null)throw Error(z(261));return gt=null,bt=0,lt}function eI(){for(;rt!==null;)rw(rt)}function tI(){for(;rt!==null&&!IN();)rw(rt)}function rw(t){var e=ow(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?sw(t):rt=e,cm.current=null}function sw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GT(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,rt=null;return}}else if(n=KT(n,e,on),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);lt===0&&(lt=5)}function $s(t,e,n){var r=_e,s=bn.transition;try{bn.transition=null,_e=1,nI(t,e,n,r)}finally{bn.transition=s,_e=r}return null}function nI(t,e,n,r){do fo();while(rs!==null);if(fe&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(LN(t,i),t===gt&&(rt=gt=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vc||(Vc=!0,aw(yu,function(){return fo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=bn.transition,bn.transition=null;var a=_e;_e=1;var c=fe;fe|=4,cm.current=null,XT(t,n),J_(n,t),ET(bf),vu=!!Ef,bf=Ef=null,t.current=n,YT(n),kN(),fe=c,_e=a,bn.transition=i}else t.current=n;if(Vc&&(Vc=!1,rs=t,Ou=s),i=t.pendingLanes,i===0&&(hs=null),RN(n.stateNode),Jt(t,Qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Du)throw Du=!1,t=zf,zf=null,t;return Ou&1&&t.tag!==0&&fo(),i=t.pendingLanes,i&1?t===qf?Wa++:(Wa=0,qf=t):Wa=0,ks(),null}function fo(){if(rs!==null){var t=Mv(Ou),e=bn.transition,n=_e;try{if(bn.transition=null,_e=16>t?16:t,rs===null)var r=!1;else{if(t=rs,rs=null,Ou=0,fe&6)throw Error(z(331));var s=fe;for(fe|=4,G=t.current;G!==null;){var i=G,a=i.child;if(G.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(G=d;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:qa(8,f,i)}var p=f.child;if(p!==null)p.return=f,G=p;else for(;G!==null;){f=G;var g=f.sibling,w=f.return;if(Q_(f),f===d){G=null;break}if(g!==null){g.return=w,G=g;break}G=w}}}var C=i.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var k=R.sibling;R.sibling=null,R=k}while(R!==null)}}G=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,G=a;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qa(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,G=E;break e}G=i.return}}var v=t.current;for(G=v;G!==null;){a=G;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,G=x;else e:for(a=v;G!==null;){if(c=G,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:pd(9,c)}}catch(O){We(c,c.return,O)}if(c===a){G=null;break e}var T=c.sibling;if(T!==null){T.return=c.return,G=T;break e}G=c.return}}if(fe=s,ks(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(od,t)}catch{}r=!0}return r}finally{_e=n,bn.transition=e}}return!1}function s0(t,e,n){e=bo(n,e),e=M_(t,e,1),t=ds(t,e,1),e=Ft(),t!==null&&(Dl(t,1,e),Jt(t,e))}function We(t,e,n){if(t.tag===3)s0(t,t,n);else for(;e!==null;){if(e.tag===3){s0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hs===null||!hs.has(r))){t=bo(n,t),t=F_(e,t,1),e=ds(e,t,1),t=Ft(),e!==null&&(Dl(e,1,t),Jt(e,t));break}}e=e.return}}function rI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ft(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(bt&n)===n&&(lt===4||lt===3&&(bt&130023424)===bt&&500>Qe()-dm?Qs(t,0):um|=n),Jt(t,e)}function iw(t,e){e===0&&(t.mode&1?(e=kc,kc<<=1,!(kc&130023424)&&(kc=4194304)):e=1);var n=Ft();t=Sr(t,e),t!==null&&(Dl(t,e,n),Jt(t,n))}function sI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iw(t,n)}function iI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),iw(t,n)}var ow;ow=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,WT(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,Le&&e.flags&1048576&&u_(e,Iu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tu(t,e),t=e.pendingProps;var s=vo(e,Ot.current);ho(e,n),s=sm(null,e,r,t,s,n);var i=im();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(r)?(i=!0,Nu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zp(e),s.updater=fd,e.stateNode=s,s._reactInternals=e,Af(e,r,t,n),e=Of(null,e,r,!0,i,n)):(e.tag=0,Le&&i&&Wp(e),Mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=aI(r),t=Pn(r,t),s){case 0:e=Df(null,e,r,t,n);break e;case 1:e=Gy(null,e,r,t,n);break e;case 11:e=Wy(null,e,r,t,n);break e;case 14:e=Ky(null,e,r,Pn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),Df(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),Gy(t,e,r,s,n);case 3:e:{if(z_(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,g_(t,e),ju(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=bo(Error(z(423)),e),e=Qy(t,e,r,n,s);break e}else if(r!==s){s=bo(Error(z(424)),e),e=Qy(t,e,r,n,s);break e}else for(ln=us(e.stateNode.containerInfo.firstChild),dn=e,Le=!0,On=null,n=p_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_o(),r===s){e=jr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return y_(e),t===null&&jf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Nf(r,s)?a=null:i!==null&&Nf(r,i)&&(e.flags|=32),$_(t,e),Mt(t,e,a,n),e.child;case 6:return t===null&&jf(e),null;case 13:return q_(t,e,n);case 4:return em(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wo(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),Wy(t,e,r,s,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ke(ku,r._currentValue),r._currentValue=a,i!==null)if(Un(i.value,a)){if(i.children===s.children&&!Xt.current){e=jr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Er(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Rf(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Rf(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ho(e,n),s=Tn(s),r=r(s),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,s=Pn(r,e.pendingProps),s=Pn(r.type,s),Ky(t,e,r,s,n);case 15:return U_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),tu(t,e),e.tag=1,Yt(r)?(t=!0,Nu(e)):t=!1,ho(e,n),V_(e,r,s),Af(e,r,s,n),Of(null,e,r,!0,t,n);case 19:return H_(t,e,n);case 22:return B_(t,e,n)}throw Error(z(156,e.tag))};function aw(t,e){return Dv(t,e)}function oI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,r){return new oI(t,e,n,r)}function mm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aI(t){if(typeof t=="function")return mm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dp)return 11;if(t===Op)return 14}return 2}function ps(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function su(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")mm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Gi:return Xs(n.children,s,i,e);case Pp:a=8,s|=8;break;case tf:return t=En(12,n,e,s|2),t.elementType=tf,t.lanes=i,t;case nf:return t=En(13,n,e,s),t.elementType=nf,t.lanes=i,t;case rf:return t=En(19,n,e,s),t.elementType=rf,t.lanes=i,t;case yv:return gd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mv:a=10;break e;case gv:a=9;break e;case Dp:a=11;break e;case Op:a=14;break e;case Gr:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=En(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xs(t,e,n,r){return t=En(7,t,r,e),t.lanes=n,t}function gd(t,e,n,r){return t=En(22,t,r,e),t.elementType=yv,t.lanes=n,t.stateNode={isHidden:!1},t}function Ch(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Ah(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hh(0),this.expirationTimes=hh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gm(t,e,n,r,s,i,a,c,u){return t=new lI(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=En(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zp(i),t}function cI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ki,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lw(t){if(!t)return vs;t=t._reactInternals;e:{if(mi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Yt(n))return l_(t,n,e)}return e}function cw(t,e,n,r,s,i,a,c,u){return t=gm(n,r,!0,t,s,i,a,c,u),t.context=lw(null),n=t.current,r=Ft(),s=fs(n),i=Er(r,s),i.callback=e??null,ds(n,i,s),t.current.lanes=s,Dl(t,s,r),Jt(t,r),t}function yd(t,e,n,r){var s=e.current,i=Ft(),a=fs(s);return n=lw(n),e.context===null?e.context=n:e.pendingContext=n,e=Er(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ds(s,e,a),t!==null&&(Mn(t,s,a,i),Jc(t,s,a)),a}function Vu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ym(t,e){i0(t,e),(t=t.alternate)&&i0(t,e)}function uI(){return null}var uw=typeof reportError=="function"?reportError:function(t){console.error(t)};function xm(t){this._internalRoot=t}xd.prototype.render=xm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));yd(t,e,null,null)};xd.prototype.unmount=xm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ri(function(){yd(null,t,null,null)}),e[kr]=null}};function xd(t){this._internalRoot=t}xd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xr.length&&e!==0&&e<Xr[n].priority;n++);Xr.splice(n,0,t),n===0&&zv(t)}};function vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function o0(){}function dI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Vu(a);i.call(d)}}var a=cw(e,r,t,0,null,!1,!1,"",o0);return t._reactRootContainer=a,t[kr]=a.current,cl(t.nodeType===8?t.parentNode:t),ri(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Vu(u);c.call(d)}}var u=gm(t,0,!1,null,null,!1,!1,"",o0);return t._reactRootContainer=u,t[kr]=u.current,cl(t.nodeType===8?t.parentNode:t),ri(function(){yd(e,u,n,r)}),u}function _d(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=Vu(a);c.call(u)}}yd(e,a,t,s)}else a=dI(n,e,t,s,r);return Vu(a)}Fv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ja(e.pendingLanes);n!==0&&(Mp(e,n|1),Jt(e,Qe()),!(fe&6)&&(No=Qe()+500,ks()))}break;case 13:ri(function(){var r=Sr(t,1);if(r!==null){var s=Ft();Mn(r,t,1,s)}}),ym(t,1)}};Fp=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=Ft();Mn(e,t,134217728,n)}ym(t,134217728)}};Uv=function(t){if(t.tag===13){var e=fs(t),n=Sr(t,e);if(n!==null){var r=Ft();Mn(n,t,e,r)}ym(t,e)}};Bv=function(){return _e};$v=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};pf=function(t,e,n){switch(e){case"input":if(af(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ud(r);if(!s)throw Error(z(90));vv(r),af(r,s)}}}break;case"textarea":wv(t,n);break;case"select":e=n.value,e!=null&&ao(t,!!n.multiple,e,!1)}};Sv=hm;jv=ri;var hI={usingClientEntryPoint:!1,Events:[Ll,Ji,ud,Iv,kv,hm]},Na={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fI={bundleType:Na.bundleType,version:Na.version,rendererPackageName:Na.rendererPackageName,rendererConfig:Na.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Av(t),t===null?null:t.stateNode},findFiberByHostInstance:Na.findFiberByHostInstance||uI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{od=Mc.inject(fI),Yn=Mc}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hI;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vm(e))throw Error(z(200));return cI(t,e,null,n)};mn.createRoot=function(t,e){if(!vm(t))throw Error(z(299));var n=!1,r="",s=uw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gm(t,1,!1,null,null,n,!1,r,s),t[kr]=e.current,cl(t.nodeType===8?t.parentNode:t),new xm(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Av(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return ri(t)};mn.hydrate=function(t,e,n){if(!vd(e))throw Error(z(200));return _d(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!vm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=uw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=cw(e,null,t,1,n??null,s,!1,i,a),t[kr]=e.current,cl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new xd(e)};mn.render=function(t,e,n){if(!vd(e))throw Error(z(200));return _d(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!vd(t))throw Error(z(40));return t._reactRootContainer?(ri(function(){_d(null,null,t,!1,function(){t._reactRootContainer=null,t[kr]=null})}),!0):!1};mn.unstable_batchedUpdates=hm;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vd(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return _d(t,e,n,!1,r)};mn.version="18.3.1-next-f1338f8080-20240426";function dw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dw)}catch(t){console.error(t)}}dw(),dv.exports=mn;var pI=dv.exports,a0=pI;Zh.createRoot=a0.createRoot,Zh.hydrateRoot=a0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xl.apply(this,arguments)}var ss;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ss||(ss={}));const l0="popstate";function mI(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return Kf("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Mu(s)}return yI(e,n,null,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gI(){return Math.random().toString(36).substr(2,8)}function c0(t,e){return{usr:t.state,key:t.key,idx:e}}function Kf(t,e,n,r){return n===void 0&&(n=null),xl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Oo(e):e,{state:n,key:e&&e.key||r||gI()})}function Mu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yI(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c=ss.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(xl({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function p(){c=ss.Pop;let k=f(),E=k==null?null:k-d;d=k,u&&u({action:c,location:R.location,delta:E})}function g(k,E){c=ss.Push;let v=Kf(R.location,k,E);d=f()+1;let x=c0(v,d),T=R.createHref(v);try{a.pushState(x,"",T)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(T)}i&&u&&u({action:c,location:R.location,delta:1})}function w(k,E){c=ss.Replace;let v=Kf(R.location,k,E);d=f();let x=c0(v,d),T=R.createHref(v);a.replaceState(x,"",T),i&&u&&u({action:c,location:R.location,delta:0})}function C(k){let E=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof k=="string"?k:Mu(k);return v=v.replace(/ $/,"%20"),Xe(E,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,E)}let R={get action(){return c},get location(){return t(s,a)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(l0,p),u=k,()=>{s.removeEventListener(l0,p),u=null}},createHref(k){return e(s,k)},createURL:C,encodeLocation(k){let E=C(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:w,go(k){return a.go(k)}};return R}var u0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(u0||(u0={}));function xI(t,e,n){return n===void 0&&(n="/"),vI(t,e,n)}function vI(t,e,n,r){let s=typeof e=="string"?Oo(e):e,i=_m(s.pathname||"/",n);if(i==null)return null;let a=fw(t);_I(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=AI(i);c=jI(a[u],d)}return c}function fw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(Xe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=ms([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Xe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),fw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:kI(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of pw(i.path))s(i,a,u)}),e}function pw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=pw(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function _I(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:SI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wI=/^:[\w-]+$/,EI=3,bI=2,NI=1,TI=10,II=-2,d0=t=>t==="*";function kI(t,e){let n=t.split("/"),r=n.length;return n.some(d0)&&(r+=II),e&&(r+=bI),n.filter(s=>!d0(s)).reduce((s,i)=>s+(wI.test(i)?EI:i===""?NI:TI),r)}function SI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function jI(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=RI({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:ms([i,p.pathname]),pathnameBase:LI(ms([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=ms([i,p.pathnameBase]))}return a}function RI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:w}=f;if(g==="*"){let R=c[p]||"";a=i.slice(0,i.length-R.length).replace(/(.)\/+$/,"$1")}const C=c[p];return w&&!C?d[g]=void 0:d[g]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function CI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function AI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _m(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function PI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Oo(t):t;return{pathname:n?n.startsWith("/")?n:DI(n,e):e,search:VI(r),hash:MI(s)}}function DI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ph(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wm(t,e){let n=OI(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Em(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Oo(t):(s=xl({},t),Xe(!s.pathname||!s.pathname.includes("?"),Ph("?","pathname","search",s)),Xe(!s.pathname||!s.pathname.includes("#"),Ph("#","pathname","hash",s)),Xe(!s.search||!s.search.includes("#"),Ph("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=PI(s,c),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const ms=t=>t.join("/").replace(/\/\/+/g,"/"),LI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mw=["post","put","patch","delete"];new Set(mw);const UI=["get",...mw];new Set(UI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vl.apply(this,arguments)}const bm=j.createContext(null),BI=j.createContext(null),Ss=j.createContext(null),wd=j.createContext(null),js=j.createContext({outlet:null,matches:[],isDataRoute:!1}),gw=j.createContext(null);function $I(t,e){let{relative:n}=e===void 0?{}:e;Lo()||Xe(!1);let{basename:r,navigator:s}=j.useContext(Ss),{hash:i,pathname:a,search:c}=xw(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:ms([r,a])),s.createHref({pathname:u,search:c,hash:i})}function Lo(){return j.useContext(wd)!=null}function Rs(){return Lo()||Xe(!1),j.useContext(wd).location}function yw(t){j.useContext(Ss).static||j.useLayoutEffect(t)}function Or(){let{isDataRoute:t}=j.useContext(js);return t?t2():zI()}function zI(){Lo()||Xe(!1);let t=j.useContext(bm),{basename:e,future:n,navigator:r}=j.useContext(Ss),{matches:s}=j.useContext(js),{pathname:i}=Rs(),a=JSON.stringify(wm(s,n.v7_relativeSplatPath)),c=j.useRef(!1);return yw(()=>{c.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=Em(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ms([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,a,i,t])}function xw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(Ss),{matches:s}=j.useContext(js),{pathname:i}=Rs(),a=JSON.stringify(wm(s,r.v7_relativeSplatPath));return j.useMemo(()=>Em(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function qI(t,e){return HI(t,e)}function HI(t,e,n,r){Lo()||Xe(!1);let{navigator:s}=j.useContext(Ss),{matches:i}=j.useContext(js),a=i[i.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=Rs(),f;if(e){var p;let k=typeof e=="string"?Oo(e):e;u==="/"||(p=k.pathname)!=null&&p.startsWith(u)||Xe(!1),f=k}else f=d;let g=f.pathname||"/",w=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let C=xI(t,{pathname:w}),R=XI(C&&C.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:ms([u,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:ms([u,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return e&&R?j.createElement(wd.Provider,{value:{location:vl({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ss.Pop}},R):R}function WI(){let t=e2(),e=FI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const KI=j.createElement(WI,null);class GI extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(js.Provider,{value:this.props.routeContext},j.createElement(gw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QI(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(bm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(js.Provider,{value:e},r)}function XI(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=a.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);f>=0||Xe(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:w}=n,C=p.route.loader&&g[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||C){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,p,g)=>{let w,C=!1,R=null,k=null;n&&(w=c&&p.route.id?c[p.route.id]:void 0,R=p.route.errorElement||KI,u&&(d<0&&g===0?(n2("route-fallback"),C=!0,k=null):d===g&&(C=!0,k=p.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,g+1)),v=()=>{let x;return w?x=R:C?x=k:p.route.Component?x=j.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=f,j.createElement(QI,{match:p,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:x})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?j.createElement(GI,{location:n.location,revalidation:n.revalidation,component:R,error:w,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):v()},null)}var vw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vw||{}),_w=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_w||{});function YI(t){let e=j.useContext(bm);return e||Xe(!1),e}function JI(t){let e=j.useContext(BI);return e||Xe(!1),e}function ZI(t){let e=j.useContext(js);return e||Xe(!1),e}function ww(t){let e=ZI(),n=e.matches[e.matches.length-1];return n.route.id||Xe(!1),n.route.id}function e2(){var t;let e=j.useContext(gw),n=JI(),r=ww();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function t2(){let{router:t}=YI(vw.UseNavigateStable),e=ww(_w.UseNavigateStable),n=j.useRef(!1);return yw(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,vl({fromRouteId:e},i)))},[t,e])}const h0={};function n2(t,e,n){h0[t]||(h0[t]=!0)}function r2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Nm(t){let{to:e,replace:n,state:r,relative:s}=t;Lo()||Xe(!1);let{future:i,static:a}=j.useContext(Ss),{matches:c}=j.useContext(js),{pathname:u}=Rs(),d=Or(),f=Em(e,wm(c,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function Ie(t){Xe(!1)}function s2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ss.Pop,navigator:i,static:a=!1,future:c}=t;Lo()&&Xe(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:i,static:a,future:vl({v7_relativeSplatPath:!1},c)}),[u,c,i,a]);typeof r=="string"&&(r=Oo(r));let{pathname:f="/",search:p="",hash:g="",state:w=null,key:C="default"}=r,R=j.useMemo(()=>{let k=_m(f,u);return k==null?null:{location:{pathname:k,search:p,hash:g,state:w,key:C},navigationType:s}},[u,f,p,g,w,C,s]);return R==null?null:j.createElement(Ss.Provider,{value:d},j.createElement(wd.Provider,{children:n,value:R}))}function i2(t){let{children:e,location:n}=t;return qI(Gf(e),n)}new Promise(()=>{});function Gf(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,Gf(r.props.children,i));return}r.type!==Ie&&Xe(!1),!r.props.index||!r.props.children||Xe(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Gf(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qf(){return Qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qf.apply(this,arguments)}function o2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function a2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function l2(t,e){return t.button===0&&(!e||e==="_self")&&!a2(t)}function Xf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function c2(t,e){let n=Xf(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const u2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],d2="6";try{window.__reactRouterVersion=d2}catch{}const h2="startTransition",f0=rN[h2];function f2(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=mI({window:s,v5Compat:!0}));let a=i.current,[c,u]=j.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=j.useCallback(p=>{d&&f0?f0(()=>u(p)):u(p)},[u,d]);return j.useLayoutEffect(()=>a.listen(f),[a,f]),j.useEffect(()=>r2(r),[r]),j.createElement(s2,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const p2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=o2(e,u2),{basename:w}=j.useContext(Ss),C,R=!1;if(typeof d=="string"&&m2.test(d)&&(C=d,p2))try{let x=new URL(window.location.href),T=d.startsWith("//")?new URL(x.protocol+d):new URL(d),O=_m(T.pathname,w);T.origin===x.origin&&O!=null?d=O+T.search+T.hash:R=!0}catch{}let k=$I(d,{relative:s}),E=g2(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:p});function v(x){r&&r(x),x.defaultPrevented||E(x)}return j.createElement("a",Qf({},g,{href:C||k,onClick:R||i?r:v,ref:n,target:u}))});var p0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(p0||(p0={}));var m0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(m0||(m0={}));function g2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:c}=e===void 0?{}:e,u=Or(),d=Rs(),f=xw(t,{relative:a});return j.useCallback(p=>{if(l2(p,n)){p.preventDefault();let g=r!==void 0?r:Mu(d)===Mu(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[d,u,f,r,s,n,t,i,a,c])}function y2(t){let e=j.useRef(Xf(t)),n=j.useRef(!1),r=Rs(),s=j.useMemo(()=>c2(r.search,n.current?null:e.current),[r.search]),i=Or(),a=j.useCallback((c,u)=>{const d=Xf(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,a]}var g0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},x2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},bw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,a||(g=64)),r.push(n[f],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ew(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):x2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new v2;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),p!==64){const C=d<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class v2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _2=function(t){const e=Ew(t);return bw.encodeByteArray(e,!0)},Fu=function(t){return _2(t).replace(/\./g,"")},Nw=function(t){try{return bw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=()=>w2().__FIREBASE_DEFAULTS__,b2=()=>{if(typeof process>"u"||typeof g0>"u")return;const t=g0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},N2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Nw(t[1]);return e&&JSON.parse(e)},Ed=()=>{try{return E2()||b2()||N2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Tw=t=>{var e,n;return(n=(e=Ed())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Iw=t=>{const e=Tw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kw=()=>{var t;return(t=Ed())===null||t===void 0?void 0:t.config},Sw=t=>{var e;return(e=Ed())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fu(JSON.stringify(n)),Fu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function I2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function k2(){var t;const e=(t=Ed())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function S2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function R2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function C2(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A2(){return!k2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P2(){try{return typeof indexedDB=="object"}catch{return!1}}function D2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="FirebaseError";class ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=O2,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ml.prototype.create)}}class Ml{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?L2(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new ir(s,c,r)}}function L2(t,e){return t.replace(V2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const V2=/\{\$([^}]+)}/g;function M2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(y0(i)&&y0(a)){if(!Uu(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function y0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ca(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Aa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function F2(t,e){const n=new U2(t,e);return n.subscribe.bind(n)}class U2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");B2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Dh),s.error===void 0&&(s.error=Dh),s.complete===void 0&&(s.complete=Dh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new T2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(q2(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:z2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z2(t){return t===zs?void 0:t}function q2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const W2={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},K2=ue.INFO,G2={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},Q2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=G2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tm{constructor(e){this.name=e,this._logLevel=K2,this._logHandler=Q2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const X2=(t,e)=>e.some(n=>t instanceof n);let x0,v0;function Y2(){return x0||(x0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J2(){return v0||(v0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rw=new WeakMap,Yf=new WeakMap,Cw=new WeakMap,Oh=new WeakMap,Im=new WeakMap;function Z2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(gs(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Rw.set(n,t)}).catch(()=>{}),Im.set(e,t),e}function ek(t){if(Yf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Yf.set(t,e)}let Jf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tk(t){Jf=t(Jf)}function nk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lh(this),e,...n);return Cw.set(r,e.sort?e.sort():[e]),gs(r)}:J2().includes(t)?function(...e){return t.apply(Lh(this),e),gs(Rw.get(this))}:function(...e){return gs(t.apply(Lh(this),e))}}function rk(t){return typeof t=="function"?nk(t):(t instanceof IDBTransaction&&ek(t),X2(t,Y2())?new Proxy(t,Jf):t)}function gs(t){if(t instanceof IDBRequest)return Z2(t);if(Oh.has(t))return Oh.get(t);const e=rk(t);return e!==t&&(Oh.set(t,e),Im.set(e,t)),e}const Lh=t=>Im.get(t);function sk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=gs(a);return r&&a.addEventListener("upgradeneeded",u=>{r(gs(a.result),u.oldVersion,u.newVersion,gs(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const ik=["get","getKey","getAll","getAllKeys","count"],ok=["put","add","delete","clear"],Vh=new Map;function _0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ok.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ik.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Vh.set(e,i),i}tk(t=>({...t,get:(e,n,r)=>_0(e,n)||t.get(e,n,r),has:(e,n)=>!!_0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zf="@firebase/app",w0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Tm("@firebase/app"),ck="@firebase/app-compat",uk="@firebase/analytics-compat",dk="@firebase/analytics",hk="@firebase/app-check-compat",fk="@firebase/app-check",pk="@firebase/auth",mk="@firebase/auth-compat",gk="@firebase/database",yk="@firebase/data-connect",xk="@firebase/database-compat",vk="@firebase/functions",_k="@firebase/functions-compat",wk="@firebase/installations",Ek="@firebase/installations-compat",bk="@firebase/messaging",Nk="@firebase/messaging-compat",Tk="@firebase/performance",Ik="@firebase/performance-compat",kk="@firebase/remote-config",Sk="@firebase/remote-config-compat",jk="@firebase/storage",Rk="@firebase/storage-compat",Ck="@firebase/firestore",Ak="@firebase/vertexai-preview",Pk="@firebase/firestore-compat",Dk="firebase",Ok="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="[DEFAULT]",Lk={[Zf]:"fire-core",[ck]:"fire-core-compat",[dk]:"fire-analytics",[uk]:"fire-analytics-compat",[fk]:"fire-app-check",[hk]:"fire-app-check-compat",[pk]:"fire-auth",[mk]:"fire-auth-compat",[gk]:"fire-rtdb",[yk]:"fire-data-connect",[xk]:"fire-rtdb-compat",[vk]:"fire-fn",[_k]:"fire-fn-compat",[wk]:"fire-iid",[Ek]:"fire-iid-compat",[bk]:"fire-fcm",[Nk]:"fire-fcm-compat",[Tk]:"fire-perf",[Ik]:"fire-perf-compat",[kk]:"fire-rc",[Sk]:"fire-rc-compat",[jk]:"fire-gcs",[Rk]:"fire-gcs-compat",[Ck]:"fire-fst",[Pk]:"fire-fst-compat",[Ak]:"fire-vertex","fire-js":"fire-js",[Dk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=new Map,Vk=new Map,tp=new Map;function E0(t,e){try{t.container.addComponent(e)}catch(n){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function si(t){const e=t.name;if(tp.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;tp.set(e,t);for(const n of _l.values())E0(n,t);for(const n of Vk.values())E0(n,t);return!0}function bd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Ml("app","Firebase",Mk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=Ok;function Aw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ep,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ys.create("bad-app-name",{appName:String(s)});if(n||(n=kw()),!n)throw ys.create("no-options");const i=_l.get(s);if(i){if(Uu(n,i.options)&&Uu(r,i.config))return i;throw ys.create("duplicate-app",{appName:s})}const a=new H2(s);for(const u of tp.values())a.addComponent(u);const c=new Fk(n,r,a);return _l.set(s,c),c}function Nd(t=ep){const e=_l.get(t);if(!e&&t===ep&&kw())return Aw();if(!e)throw ys.create("no-app",{appName:t});return e}function Pw(){return Array.from(_l.values())}function Zn(t,e,n){var r;let s=(r=Lk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(c.join(" "));return}si(new _s(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="firebase-heartbeat-database",Bk=1,wl="firebase-heartbeat-store";let Mh=null;function Dw(){return Mh||(Mh=sk(Uk,Bk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),Mh}async function $k(t){try{const n=(await Dw()).transaction(wl),r=await n.objectStore(wl).get(Ow(t));return await n.done,r}catch(e){if(e instanceof ir)Rr.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(n.message)}}}async function b0(t,e){try{const r=(await Dw()).transaction(wl,"readwrite");await r.objectStore(wl).put(e,Ow(t)),await r.done}catch(n){if(n instanceof ir)Rr.warn(n.message);else{const r=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rr.warn(r.message)}}}function Ow(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=1024,qk=30*24*60*60*1e3;class Hk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Kk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=N0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=qk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=N0(),{heartbeatsToSend:r,unsentEntries:s}=Wk(this._heartbeatsCache.heartbeats),i=Fu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Rr.warn(n),""}}}function N0(){return new Date().toISOString().substring(0,10)}function Wk(t,e=zk){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),T0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),T0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Kk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return P2()?D2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $k(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return b0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return b0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function T0(t){return Fu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t){si(new _s("platform-logger",e=>new ak(e),"PRIVATE")),si(new _s("heartbeat",e=>new Hk(e),"PRIVATE")),Zn(Zf,w0,t),Zn(Zf,w0,"esm2017"),Zn("fire-js","")}Gk("");function km(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Lw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Qk=Lw,Vw=new Ml("auth","Firebase",Lw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new Tm("@firebase/auth");function Xk(t,...e){Bu.logLevel<=ue.WARN&&Bu.warn(`Auth (${gi}): ${t}`,...e)}function iu(t,...e){Bu.logLevel<=ue.ERROR&&Bu.error(`Auth (${gi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw Sm(t,...e)}function hn(t,...e){return Sm(t,...e)}function Mw(t,e,n){const r=Object.assign(Object.assign({},Qk()),{[e]:n});return new Ml("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return Mw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Vw.create(t,...e)}function Q(t,e,...n){if(!t)throw Sm(e,...n)}function vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iu(e),new Error(e)}function Cr(t,e){t||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Fw(){return I0()==="http:"||I0()==="https:"}function I0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fw()||j2()||"connection"in navigator)?navigator.onLine:!0}function Jk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Cr(n>e,"Short delay should be less than long delay!"),this.isMobile=I2()||R2()}get(){return Yk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t,e){Cr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=new Fl(3e4,6e4);function Zt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kn(t,e,n,r,s={}){return Bw(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Vo(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return S2()||(d.referrerPolicy="no-referrer"),Uw.fetch()($w(t,t.config.apiHost,n,c),d)})}async function Bw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zk),e);try{const s=new nS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Pa(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pa(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Pa(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Pa(t,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Mw(t,f,d);Bn(t,f)}}catch(s){if(s instanceof ir)throw s;Bn(t,"network-request-failed",{message:String(s)})}}async function Cs(t,e,n,r,s={}){const i=await kn(t,e,n,r,s);return"mfaPendingCredential"in i&&Bn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function $w(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?jm(t.config,s):`${t.config.apiScheme}://${s}`}function tS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hn(this.auth,"network-request-failed")),eS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t){return t!==void 0&&t.getResponse!==void 0}function S0(t){return t!==void 0&&t.enterprise!==void 0}class rS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(t){return(await kn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function iS(t,e){return kn(t,"GET","/v2/recaptchaConfig",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(t,e){return kn(t,"POST","/v1/accounts:delete",e)}async function zw(t,e){return kn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aS(t,e=!1){const n=Se(t),r=await n.getIdToken(e),s=Rm(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ka(Fh(s.auth_time)),issuedAtTime:Ka(Fh(s.iat)),expirationTime:Ka(Fh(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Fh(t){return Number(t)*1e3}function Rm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return iu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Nw(n);return s?JSON.parse(s):(iu("Failed to decode base64 JWT payload"),null)}catch(s){return iu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function j0(t){const e=Rm(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ir&&lS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function lS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t){var e;const n=t.auth,r=await t.getIdToken(),s=await El(t,zw(n,{idToken:r}));Q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?qw(i.providerUserInfo):[],c=dS(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new rp(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function uS(t){const e=Se(t);await $u(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function qw(t){return t.map(e=>{var{providerId:n}=e,r=km(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(t,e){const n=await Bw(t,{},async()=>{const r=Vo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=$w(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Uw.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fS(t,e){return kn(t,"POST","/v2/accounts:revokeToken",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=j0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await hS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new po;return r&&(Q(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new po,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _r{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=km(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await El(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aS(this,e)}reload(){return uS(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $u(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await El(this,oS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,c,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:x,emailVerified:T,isAnonymous:O,providerData:V,stsTokenManager:b}=n;Q(x&&b,e,"internal-error");const y=po.fromJSON(this.name,b);Q(typeof x=="string",e,"internal-error"),Kr(p,e.name),Kr(g,e.name),Q(typeof T=="boolean",e,"internal-error"),Q(typeof O=="boolean",e,"internal-error"),Kr(w,e.name),Kr(C,e.name),Kr(R,e.name),Kr(k,e.name),Kr(E,e.name),Kr(v,e.name);const I=new _r({uid:x,auth:e,email:g,emailVerified:T,displayName:p,isAnonymous:O,photoURL:C,phoneNumber:w,tenantId:R,stsTokenManager:y,createdAt:E,lastLoginAt:v});return V&&Array.isArray(V)&&(I.providerData=V.map(S=>Object.assign({},S))),k&&(I._redirectEventId=k),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new po;s.updateFromServerResponse(n);const i=new _r({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await $u(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?qw(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new po;c.updateFromIdToken(r);const u=new _r({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new rp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map;function wr(t){Cr(t instanceof Function,"Expected a class definition");let e=R0.get(t);return e?(Cr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,R0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Hw.type="NONE";const C0=Hw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t,e,n){return`firebase:${t}:${e}:${n}`}class mo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ou(this.userKey,s.apiKey,i),this.fullPersistenceKey=ou("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_r._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new mo(wr(C0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||wr(C0);const a=ou(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(a);if(f){const p=_r._fromJSON(e,f);d!==i&&(c=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new mo(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new mo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ww(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yw(e))return"Blackberry";if(Jw(e))return"Webos";if(Kw(e))return"Safari";if((e.includes("chrome/")||Gw(e))&&!e.includes("edge/"))return"Chrome";if(Xw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ww(t=Lt()){return/firefox\//i.test(t)}function Kw(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gw(t=Lt()){return/crios\//i.test(t)}function Qw(t=Lt()){return/iemobile/i.test(t)}function Xw(t=Lt()){return/android/i.test(t)}function Yw(t=Lt()){return/blackberry/i.test(t)}function Jw(t=Lt()){return/webos/i.test(t)}function Cm(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pS(t=Lt()){var e;return Cm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mS(){return C2()&&document.documentMode===10}function Zw(t=Lt()){return Cm(t)||Xw(t)||Jw(t)||Yw(t)||/windows phone/i.test(t)||Qw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e=[]){let n;switch(t){case"Browser":n=A0(Lt());break;case"Worker":n=`${A0(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e={}){return kn(t,"GET","/v2/passwordPolicy",Zt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=6;class vS{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:xS,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P0(this),this.idTokenSubscription=new P0(this),this.beforeStateQueue=new gS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await mo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zw(this,{idToken:e}),r=await _r._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ln(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $u(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Jk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(er(this));const n=e?Se(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yS(this),n=new vS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ml("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await mo.create(this,[wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Xk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Lr(t){return Se(t)}class P0{constructor(e){this.auth=e,this.observer=null,this.addObserver=F2(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wS(t){Ul=t}function Am(t){return Ul.loadJS(t)}function ES(){return Ul.recaptchaV2Script}function bS(){return Ul.recaptchaEnterpriseScript}function NS(){return Ul.gapiScript}function tE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const TS="recaptcha-enterprise",IS="NO_RECAPTCHA";class kS{constructor(e){this.type=TS,this.auth=Lr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{iS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new rS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;S0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(IS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&S0(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=bS();u.length!==0&&(u+=c),Am(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function D0(t,e,n,r=!1){const s=new kS(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function sp(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await D0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await D0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t,e){const n=bd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Uu(i,e??{}))return s;Bn(s,"already-initialized")}return n.initialize({options:e})}function SS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jS(t,e,n){const r=Lr(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=rE(e),{host:a,port:c}=RS(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),CS()}function rE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RS(t){const e=rE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:O0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:O0(a)}}}function O0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function AS(t,e){return kn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(t,e){return Cs(t,"POST","/v1/accounts:signInWithPassword",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(t,e){return Cs(t,"POST","/v1/accounts:signInWithEmailLink",Zt(t,e))}async function OS(t,e){return Cs(t,"POST","/v1/accounts:signInWithEmailLink",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends Td{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new bl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new bl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sp(e,n,"signInWithPassword",PS);case"emailLink":return DS(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sp(e,r,"signUpPassword",AS);case"emailLink":return OS(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(t,e){return Cs(t,"POST","/v1/accounts:signInWithIdp",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="http://localhost";class ii extends Td{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=km(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new ii(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return go(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,go(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,go(e,n)}buildRequest(){const e={requestUri:LS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(t,e){return kn(t,"POST","/v1/accounts:sendVerificationCode",Zt(t,e))}async function MS(t,e){return Cs(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,e))}async function FS(t,e){const n=await Cs(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,e));if(n.temporaryProof)throw Pa(t,"account-exists-with-different-credential",n);return n}const US={USER_NOT_FOUND:"user-not-found"};async function BS(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Cs(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,n),US)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends Td{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ga({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ga({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return MS(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return FS(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return BS(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Ga({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zS(t){const e=Ca(Aa(t)).link,n=e?Ca(Aa(e)).deep_link_id:null,r=Ca(Aa(t)).deep_link_id;return(r?Ca(Aa(r)).link:null)||r||n||e||t}class Pm{constructor(e){var n,r,s,i,a,c;const u=Ca(Aa(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=$S((s=u.mode)!==null&&s!==void 0?s:null);Q(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=zS(e);try{return new Pm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.providerId=Mo.PROVIDER_ID}static credential(e,n){return bl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Pm.parseLink(n);return Q(r,"argument-error"),bl._fromEmailAndCode(e,r.code,r.tenantId)}}Mo.PROVIDER_ID="password";Mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends sE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Bl{constructor(){super("facebook.com")}static credential(e){return ii._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ii._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zr.credential(n,r)}catch{return null}}}Zr.GOOGLE_SIGN_IN_METHOD="google.com";Zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Bl{constructor(){super("github.com")}static credential(e){return ii._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.GITHUB_SIGN_IN_METHOD="github.com";es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Bl{constructor(){super("twitter.com")}static credential(e,n){return ii._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ts.credential(n,r)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(t,e){return Cs(t,"POST","/v1/accounts:signUp",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await _r._fromIdTokenResponse(e,r,s),a=L0(r);return new oi({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=L0(r);return new oi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function L0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends ir{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,zu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new zu(e,n,r,s)}}function iE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?zu._fromErrorAndOperation(t,i,e,r):i})}async function HS(t,e,n=!1){const r=await El(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(t,e,n=!1){const{auth:r}=t;if(Ln(r.app))return Promise.reject(er(r));const s="reauthenticate";try{const i=await El(t,iE(r,s,e,t),n);Q(i.idToken,r,"internal-error");const a=Rm(i.idToken);Q(a,r,"internal-error");const{sub:c}=a;return Q(t.uid===c,r,"user-mismatch"),oi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Bn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(t,e,n=!1){if(Ln(t.app))return Promise.reject(er(t));const r="signIn",s=await iE(t,r,e),i=await oi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function aE(t,e){return oE(Lr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lE(t){const e=Lr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function au(t,e,n){if(Ln(t.app))return Promise.reject(er(t));const r=Lr(t),a=await sp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&lE(t),u}),c=await oi._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function KS(t,e,n){return Ln(t.app)?Promise.reject(er(t)):aE(Se(t),Mo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lE(t),r})}function GS(t,e,n,r){return Se(t).onIdTokenChanged(e,n,r)}function QS(t,e,n){return Se(t).beforeAuthStateChanged(e,n)}function XS(t,e,n,r){return Se(t).onAuthStateChanged(e,n,r)}function YS(t){return Se(t).signOut()}async function JS(t){return Se(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t,e){return kn(t,"POST","/v2/accounts/mfaEnrollment:start",Zt(t,e))}const qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=1e3,tj=10;class uE extends cE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);mS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,tj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ej)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uE.type="LOCAL";const dE=uE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends cE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hE.type="SESSION";const fE=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Id(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await nj(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Dm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(){return window}function sj(t){nt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(){return typeof nt().WorkerGlobalScope<"u"&&typeof nt().importScripts=="function"}async function ij(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aj(){return Om()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firebaseLocalStorageDb",lj=1,Hu="firebaseLocalStorage",mE="fbase_key";class $l{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kd(t,e){return t.transaction([Hu],e?"readwrite":"readonly").objectStore(Hu)}function cj(){const t=indexedDB.deleteDatabase(pE);return new $l(t).toPromise()}function ip(){const t=indexedDB.open(pE,lj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hu,{keyPath:mE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hu)?e(r):(r.close(),await cj(),e(await ip()))})})}async function V0(t,e,n){const r=kd(t,!0).put({[mE]:e,value:n});return new $l(r).toPromise()}async function uj(t,e){const n=kd(t,!1).get(e),r=await new $l(n).toPromise();return r===void 0?null:r.value}function M0(t,e){const n=kd(t,!0).delete(e);return new $l(n).toPromise()}const dj=800,hj=3;class gE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ip(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Om()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Id._getInstance(aj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ij(),!this.activeServiceWorker)return;this.sender=new rj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ip();return await V0(e,qu,"1"),await M0(e,qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>V0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>M0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=kd(s,!1).getAll();return new $l(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gE.type="LOCAL";const yE=gE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t,e){return kn(t,"POST","/v2/accounts/mfaSignIn:start",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=500,mj=6e4,Fc=1e12;class gj{constructor(e){this.auth=e,this.counter=Fc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new yj(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Fc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Fc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Fc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class yj{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;Q(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=xj(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},mj)},pj))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function xj(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=tE("rcb"),vj=new Fl(3e4,6e4);class _j{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=nt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return Q(wj(n),e,"argument-error"),this.shouldResolveImmediately(n)&&k0(nt().grecaptcha)?Promise.resolve(nt().grecaptcha):new Promise((r,s)=>{const i=nt().setTimeout(()=>{s(hn(e,"network-request-failed"))},vj.get());nt()[Uh]=()=>{nt().clearTimeout(i),delete nt()[Uh];const c=nt().grecaptcha;if(!c||!k0(c)){s(hn(e,"internal-error"));return}const u=c.render;c.render=(d,f)=>{const p=u(d,f);return this.counter++,p},this.hostLanguage=n,r(c)};const a=`${ES()}?${Vo({onload:Uh,render:"explicit",hl:n})}`;Am(a).catch(()=>{clearTimeout(i),s(hn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=nt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function wj(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Ej{async load(e){return new gj(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="recaptcha",bj={theme:"light",type:"image"};class F0{constructor(e,n,r=Object.assign({},bj)){this.parameters=r,this.type=xE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lr(e),this.isInvisible=this.parameters.size==="invisible",Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;Q(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ej:new _j,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=a=>{a&&(this.tokenChangeListeners.delete(i),s(a))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=nt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Q(Fw()&&!Om(),this.auth,"internal-error"),await Nj(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await sS(this.auth);Q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function Nj(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ga._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Ij(t,e,n){if(Ln(t.app))return Promise.reject(er(t));const r=Lr(t),s=await kj(r,e,Se(n));return new Tj(s,i=>aE(r,i))}async function kj(t,e,n){var r;const s=await n.verify();try{Q(typeof s=="string",t,"argument-error"),Q(n.type===xE,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const a=i.session;if("phoneNumber"in i)return Q(a.type==="enroll",t,"internal-error"),(await ZS(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{Q(a.type==="signin",t,"internal-error");const c=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return Q(c,t,"missing-multi-factor-info"),(await fj(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await VS(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return a}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t,e){return e?wr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends Td{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return go(e,this._buildIdpRequest())}_linkToIdToken(e,n){return go(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return go(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jj(t){return oE(t.auth,new Lm(t),t.bypassAuthState)}function Rj(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),WS(n,new Lm(t),t.bypassAuthState)}async function Cj(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),HS(n,new Lm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jj;case"linkViaPopup":case"linkViaRedirect":return Cj;case"reauthViaPopup":case"reauthViaRedirect":return Rj;default:Bn(this.auth,"internal-error")}}resolve(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new Fl(2e3,1e4);class io extends vE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Cr(this.filter.length===1,"Popup operations only handle one event");const e=Dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Aj.get())};e()}}io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj="pendingRedirect",lu=new Map;class Dj extends vE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=lu.get(this.auth._key());if(!e){try{const r=await Oj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}lu.set(this.auth._key(),e)}return this.bypassAuthState||lu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Oj(t,e){const n=Mj(e),r=Vj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Lj(t,e){lu.set(t._key(),e)}function Vj(t){return wr(t._redirectPersistence)}function Mj(t){return ou(Pj,t.config.apiKey,t.name)}async function Fj(t,e,n=!1){if(Ln(t.app))return Promise.reject(er(t));const r=Lr(t),s=Sj(r,e),a=await new Dj(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=10*60*1e3;class Bj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$j(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_E(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Uj&&this.cachedEventUids.clear(),this.cachedEventUids.has(U0(e))}saveEventToCache(e){this.cachedEventUids.add(U0(e)),this.lastProcessedEventTime=Date.now()}}function U0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _E({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $j(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _E(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,e={}){return kn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hj=/^https?/;async function Wj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zj(t);for(const n of e)try{if(Kj(n))return}catch{}Bn(t,"unauthorized-domain")}function Kj(t){const e=np(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!Hj.test(n))return!1;if(qj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new Fl(3e4,6e4);function B0(){const t=nt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Qj(t){return new Promise((e,n)=>{var r,s,i;function a(){B0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B0(),n(hn(t,"network-request-failed"))},timeout:Gj.get()})}if(!((s=(r=nt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=nt().gapi)===null||i===void 0)&&i.load)a();else{const c=tE("iframefcb");return nt()[c]=()=>{gapi.load?a():n(hn(t,"network-request-failed"))},Am(`${NS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw cu=null,e})}let cu=null;function Xj(t){return cu=cu||Qj(t),cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=new Fl(5e3,15e3),Jj="__/auth/iframe",Zj="emulator/auth/iframe",eR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nR(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jm(e,Zj):`https://${t.config.authDomain}/${Jj}`,r={apiKey:e.apiKey,appName:t.name,v:gi},s=tR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Vo(r).slice(1)}`}async function rR(t){const e=await Xj(t),n=nt().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:nR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=hn(t,"network-request-failed"),c=nt().setTimeout(()=>{i(a)},Yj.get());function u(){nt().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iR=500,oR=600,aR="_blank",lR="http://localhost";class $0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cR(t,e,n,r=iR,s=oR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},sR),{width:r.toString(),height:s.toString(),top:i,left:a}),d=Lt().toLowerCase();n&&(c=Gw(d)?aR:n),Ww(d)&&(e=e||lR,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,C])=>`${g}${w}=${C},`,"");if(pS(d)&&c!=="_self")return uR(e||"",c),new $0(null);const p=window.open(e||"",c,f);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new $0(p)}function uR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="__/auth/handler",hR="emulator/auth/handler",fR=encodeURIComponent("fac");async function z0(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gi,eventId:s};if(e instanceof sE){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",M2(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof Bl){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${fR}=${encodeURIComponent(u)}`:"";return`${pR(t)}?${Vo(c).slice(1)}${d}`}function pR({config:t}){return t.emulator?jm(t,hR):`https://${t.authDomain}/${dR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="webStorageSupport";class mR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fE,this._completeRedirectFn=Fj,this._overrideRedirectResult=Lj}async _openPopup(e,n,r,s){var i;Cr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await z0(e,n,r,np(),s);return cR(e,a,Dm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await z0(e,n,r,np(),s);return sj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Cr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rR(e),r=new Bj(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bh,{type:Bh},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Bh];a!==void 0&&n(!!a),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Wj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Zw()||Kw()||Cm()}}const gR=mR;var q0="@firebase/auth",H0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vR(t){si(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Q(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eE(t)},d=new _S(r,s,i,u);return SS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),si(new _s("auth-internal",e=>{const n=Lr(e.getProvider("auth").getImmediate());return(r=>new yR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(q0,H0,xR(t)),Zn(q0,H0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=5*60,wR=Sw("authIdTokenMaxAge")||_R;let W0=null;const ER=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wR)return;const s=n==null?void 0:n.token;W0!==s&&(W0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bR(t=Nd()){const e=bd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nE(t,{popupRedirectResolver:gR,persistence:[yE,dE,fE]}),r=Sw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=ER(i.toString());QS(n,a,()=>a(n.currentUser)),GS(n,c=>a(c))}}const s=Tw("auth");return s&&jS(n,`http://${s}`),n}function NR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",NR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vR("Browser");var TR="firebase",IR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(TR,IR,"app");var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,wE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,y){function I(){}I.prototype=y.prototype,b.D=y.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(S,P,D){for(var A=Array(arguments.length-2),De=2;De<arguments.length;De++)A[De-2]=arguments[De];return y.prototype[P].apply(S,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,y,I){I||(I=0);var S=Array(16);if(typeof y=="string")for(var P=0;16>P;++P)S[P]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(P=0;16>P;++P)S[P]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=b.g[0],I=b.g[1],P=b.g[2];var D=b.g[3],A=y+(D^I&(P^D))+S[0]+3614090360&4294967295;y=I+(A<<7&4294967295|A>>>25),A=D+(P^y&(I^P))+S[1]+3905402710&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(I^D&(y^I))+S[2]+606105819&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(y^P&(D^y))+S[3]+3250441966&4294967295,I=P+(A<<22&4294967295|A>>>10),A=y+(D^I&(P^D))+S[4]+4118548399&4294967295,y=I+(A<<7&4294967295|A>>>25),A=D+(P^y&(I^P))+S[5]+1200080426&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(I^D&(y^I))+S[6]+2821735955&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(y^P&(D^y))+S[7]+4249261313&4294967295,I=P+(A<<22&4294967295|A>>>10),A=y+(D^I&(P^D))+S[8]+1770035416&4294967295,y=I+(A<<7&4294967295|A>>>25),A=D+(P^y&(I^P))+S[9]+2336552879&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(I^D&(y^I))+S[10]+4294925233&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(y^P&(D^y))+S[11]+2304563134&4294967295,I=P+(A<<22&4294967295|A>>>10),A=y+(D^I&(P^D))+S[12]+1804603682&4294967295,y=I+(A<<7&4294967295|A>>>25),A=D+(P^y&(I^P))+S[13]+4254626195&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(I^D&(y^I))+S[14]+2792965006&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(y^P&(D^y))+S[15]+1236535329&4294967295,I=P+(A<<22&4294967295|A>>>10),A=y+(P^D&(I^P))+S[1]+4129170786&4294967295,y=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(y^I))+S[6]+3225465664&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^I&(D^y))+S[11]+643717713&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^y&(P^D))+S[0]+3921069994&4294967295,I=P+(A<<20&4294967295|A>>>12),A=y+(P^D&(I^P))+S[5]+3593408605&4294967295,y=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(y^I))+S[10]+38016083&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^I&(D^y))+S[15]+3634488961&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^y&(P^D))+S[4]+3889429448&4294967295,I=P+(A<<20&4294967295|A>>>12),A=y+(P^D&(I^P))+S[9]+568446438&4294967295,y=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(y^I))+S[14]+3275163606&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^I&(D^y))+S[3]+4107603335&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^y&(P^D))+S[8]+1163531501&4294967295,I=P+(A<<20&4294967295|A>>>12),A=y+(P^D&(I^P))+S[13]+2850285829&4294967295,y=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(y^I))+S[2]+4243563512&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^I&(D^y))+S[7]+1735328473&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^y&(P^D))+S[12]+2368359562&4294967295,I=P+(A<<20&4294967295|A>>>12),A=y+(I^P^D)+S[5]+4294588738&4294967295,y=I+(A<<4&4294967295|A>>>28),A=D+(y^I^P)+S[8]+2272392833&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^I)+S[11]+1839030562&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^y)+S[14]+4259657740&4294967295,I=P+(A<<23&4294967295|A>>>9),A=y+(I^P^D)+S[1]+2763975236&4294967295,y=I+(A<<4&4294967295|A>>>28),A=D+(y^I^P)+S[4]+1272893353&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^I)+S[7]+4139469664&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^y)+S[10]+3200236656&4294967295,I=P+(A<<23&4294967295|A>>>9),A=y+(I^P^D)+S[13]+681279174&4294967295,y=I+(A<<4&4294967295|A>>>28),A=D+(y^I^P)+S[0]+3936430074&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^I)+S[3]+3572445317&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^y)+S[6]+76029189&4294967295,I=P+(A<<23&4294967295|A>>>9),A=y+(I^P^D)+S[9]+3654602809&4294967295,y=I+(A<<4&4294967295|A>>>28),A=D+(y^I^P)+S[12]+3873151461&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^I)+S[15]+530742520&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^y)+S[2]+3299628645&4294967295,I=P+(A<<23&4294967295|A>>>9),A=y+(P^(I|~D))+S[0]+4096336452&4294967295,y=I+(A<<6&4294967295|A>>>26),A=D+(I^(y|~P))+S[7]+1126891415&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~I))+S[14]+2878612391&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~y))+S[5]+4237533241&4294967295,I=P+(A<<21&4294967295|A>>>11),A=y+(P^(I|~D))+S[12]+1700485571&4294967295,y=I+(A<<6&4294967295|A>>>26),A=D+(I^(y|~P))+S[3]+2399980690&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~I))+S[10]+4293915773&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~y))+S[1]+2240044497&4294967295,I=P+(A<<21&4294967295|A>>>11),A=y+(P^(I|~D))+S[8]+1873313359&4294967295,y=I+(A<<6&4294967295|A>>>26),A=D+(I^(y|~P))+S[15]+4264355552&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~I))+S[6]+2734768916&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~y))+S[13]+1309151649&4294967295,I=P+(A<<21&4294967295|A>>>11),A=y+(P^(I|~D))+S[4]+4149444226&4294967295,y=I+(A<<6&4294967295|A>>>26),A=D+(I^(y|~P))+S[11]+3174756917&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~I))+S[2]+718787259&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~y))+S[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+D&4294967295}r.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var I=y-this.blockSize,S=this.B,P=this.h,D=0;D<y;){if(P==0)for(;D<=I;)s(this,b,D),D+=this.blockSize;if(typeof b=="string"){for(;D<y;)if(S[P++]=b.charCodeAt(D++),P==this.blockSize){s(this,S),P=0;break}}else for(;D<y;)if(S[P++]=b[D++],P==this.blockSize){s(this,S),P=0;break}}this.h=P,this.o+=y},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var I=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=I&255,I/=256;for(this.u(b),b=Array(16),y=I=0;4>y;++y)for(var S=0;32>S;S+=8)b[I++]=this.g[y]>>>S&255;return b};function i(b,y){var I=c;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=y(b)}function a(b,y){this.h=y;for(var I=[],S=!0,P=b.length-1;0<=P;P--){var D=b[P]|0;S&&D==y||(I[P]=D,S=!1)}this.g=I}var c={};function u(b){return-128<=b&&128>b?i(b,function(y){return new a([y|0],0>y?-1:0)}):new a([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return k(d(-b));for(var y=[],I=1,S=0;b>=I;S++)y[S]=b/I|0,I*=4294967296;return new a(y,0)}function f(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return k(f(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(y,8)),S=p,P=0;P<b.length;P+=8){var D=Math.min(8,b.length-P),A=parseInt(b.substring(P,P+D),y);8>D?(D=d(Math.pow(y,D)),S=S.j(D).add(d(A))):(S=S.j(I),S=S.add(d(A)))}return S}var p=u(0),g=u(1),w=u(16777216);t=a.prototype,t.m=function(){if(R(this))return-k(this).m();for(var b=0,y=1,I=0;I<this.g.length;I++){var S=this.i(I);b+=(0<=S?S:4294967296+S)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(R(this))return"-"+k(this).toString(b);for(var y=d(Math.pow(b,6)),I=this,S="";;){var P=T(I,y).g;I=E(I,P.j(y));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=P,C(I))return D+S;for(;6>D.length;)D="0"+D;S=D+S}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function R(b){return b.h==-1}t.l=function(b){return b=E(this,b),R(b)?-1:C(b)?0:1};function k(b){for(var y=b.g.length,I=[],S=0;S<y;S++)I[S]=~b.g[S];return new a(I,~b.h).add(g)}t.abs=function(){return R(this)?k(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0,P=0;P<=y;P++){var D=S+(this.i(P)&65535)+(b.i(P)&65535),A=(D>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);S=A>>>16,D&=65535,A&=65535,I[P]=A<<16|D}return new a(I,I[I.length-1]&-2147483648?-1:0)};function E(b,y){return b.add(k(y))}t.j=function(b){if(C(this)||C(b))return p;if(R(this))return R(b)?k(this).j(k(b)):k(k(this).j(b));if(R(b))return k(this.j(k(b)));if(0>this.l(w)&&0>b.l(w))return d(this.m()*b.m());for(var y=this.g.length+b.g.length,I=[],S=0;S<2*y;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var P=0;P<b.g.length;P++){var D=this.i(S)>>>16,A=this.i(S)&65535,De=b.i(P)>>>16,ct=b.i(P)&65535;I[2*S+2*P]+=A*ct,v(I,2*S+2*P),I[2*S+2*P+1]+=D*ct,v(I,2*S+2*P+1),I[2*S+2*P+1]+=A*De,v(I,2*S+2*P+1),I[2*S+2*P+2]+=D*De,v(I,2*S+2*P+2)}for(S=0;S<y;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=y;S<2*y;S++)I[S]=0;return new a(I,0)};function v(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function x(b,y){this.g=b,this.h=y}function T(b,y){if(C(y))throw Error("division by zero");if(C(b))return new x(p,p);if(R(b))return y=T(k(b),y),new x(k(y.g),k(y.h));if(R(y))return y=T(b,k(y)),new x(k(y.g),y.h);if(30<b.g.length){if(R(b)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,S=y;0>=S.l(b);)I=O(I),S=O(S);var P=V(I,1),D=V(S,1);for(S=V(S,2),I=V(I,2);!C(S);){var A=D.add(S);0>=A.l(b)&&(P=P.add(I),D=A),S=V(S,1),I=V(I,1)}return y=E(b,P.j(y)),new x(P,y)}for(P=p;0<=b.l(y);){for(I=Math.max(1,Math.floor(b.m()/y.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),D=d(I),A=D.j(y);R(A)||0<A.l(b);)I-=S,D=d(I),A=D.j(y);C(D)&&(D=g),P=P.add(D),b=E(b,A)}return new x(P,b)}t.A=function(b){return T(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0;S<y;S++)I[S]=this.i(S)&b.i(S);return new a(I,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0;S<y;S++)I[S]=this.i(S)|b.i(S);return new a(I,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0;S<y;S++)I[S]=this.i(S)^b.i(S);return new a(I,this.h^b.h)};function O(b){for(var y=b.g.length+1,I=[],S=0;S<y;S++)I[S]=b.i(S)<<1|b.i(S-1)>>>31;return new a(I,b.h)}function V(b,y){var I=y>>5;y%=32;for(var S=b.g.length-I,P=[],D=0;D<S;D++)P[D]=0<y?b.i(D+I)>>>y|b.i(D+I+1)<<32-y:b.i(D+I);return new a(P,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wE=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Ys=a}).apply(typeof K0<"u"?K0:typeof self<"u"?self:typeof window<"u"?window:{});var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EE,Da,bE,uu,op,NE,TE,IE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uc=="object"&&Uc];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var L=l[_];if(!(L in m))break e;m=m[L]}l=l[l.length-1],_=m[l],h=h(_),h!=_&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var m=0,_=!1,L={next:function(){if(!_&&m<l.length){var M=m++;return{value:h(M,l[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,m){return l.call.apply(l.bind,arguments)}function p(l,h,m){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,_),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function g(l,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function w(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function C(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(_,L,M){for(var W=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)W[Ne-2]=arguments[Ne];return h.prototype[L].apply(_,W)}}function R(l){const h=l.length;if(0<h){const m=Array(h);for(let _=0;_<h;_++)m[_]=l[_];return m}return[]}function k(l,h){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(u(_)){const L=l.length||0,M=_.length||0;l.length=L+M;for(let W=0;W<M;W++)l[L+W]=_[W]}else l.push(_)}}class E{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(l){return/^[\s\xa0]*$/.test(l)}function x(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function T(l){return T[" "](l),l}T[" "]=function(){};var O=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function V(l,h,m){for(const _ in l)h.call(m,l[_],_,l)}function b(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function y(l){const h={};for(const m in l)h[m]=l[m];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let m,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(m in _)l[m]=_[m];for(let M=0;M<I.length;M++)m=I[M],Object.prototype.hasOwnProperty.call(_,m)&&(l[m]=_[m])}}function P(l){var h=1;l=l.split(":");const m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function D(l){c.setTimeout(()=>{throw l},0)}function A(){var l=J;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class De{constructor(){this.h=this.g=null}add(h,m){const _=ct.get();_.set(h,m),this.h?this.h.next=_:this.g=_,this.h=_}}var ct=new E(()=>new qt,l=>l.reset());class qt{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,q=!1,J=new De,te=()=>{const l=c.Promise.resolve(void 0);ut=()=>{l.then(ve)}};var ve=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(m){D(m)}var h=ct;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}q=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var en=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};c.addEventListener("test",m,h),c.removeEventListener("test",m,h)}catch{}return l}();function Sn(l,h){if(Ve.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{T(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:tn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Sn.aa.h.call(this)}}C(Sn,Ve);var tn={2:"touch",3:"pen",4:"mouse"};Sn.prototype.h=function(){Sn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var nn="closure_listenable_"+(1e6*Math.random()|0),Mr=0;function nc(l,h,m,_,L){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!_,this.ha=L,this.key=++Mr,this.da=this.fa=!1}function Fr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ps(l){this.src=l,this.g={},this.h=0}Ps.prototype.add=function(l,h,m,_,L){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var W=_i(l,h,_,L);return-1<W?(h=l[W],m||(h.fa=!1)):(h=new nc(h,this.src,M,!!_,L),h.fa=m,l.push(h)),h};function ar(l,h){var m=h.type;if(m in l.g){var _=l.g[m],L=Array.prototype.indexOf.call(_,h,void 0),M;(M=0<=L)&&Array.prototype.splice.call(_,L,1),M&&(Fr(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function _i(l,h,m,_){for(var L=0;L<l.length;++L){var M=l[L];if(!M.da&&M.listener==h&&M.capture==!!m&&M.ha==_)return L}return-1}var wi="closure_lm_"+(1e6*Math.random()|0),Ei={};function Wo(l,h,m,_,L){if(Array.isArray(h)){for(var M=0;M<h.length;M++)Wo(l,h[M],m,_,L);return null}return m=Yo(m),l&&l[nn]?l.K(h,m,d(_)?!!_.capture:!1,L):rc(l,h,m,!1,_,L)}function rc(l,h,m,_,L,M){if(!h)throw Error("Invalid event type");var W=d(L)?!!L.capture:!!L,Ne=bi(l);if(Ne||(l[wi]=Ne=new Ps(l)),m=Ne.add(h,m,_,W,M),m.proxy)return m;if(_=Ko(),m.proxy=_,_.src=l,_.listener=m,l.addEventListener)en||(L=W),L===void 0&&(L=!1),l.addEventListener(h.toString(),_,L);else if(l.attachEvent)l.attachEvent(Qo(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ko(){function l(m){return h.call(l.src,l.listener,m)}const h=Xo;return l}function Go(l,h,m,_,L){if(Array.isArray(h))for(var M=0;M<h.length;M++)Go(l,h[M],m,_,L);else _=d(_)?!!_.capture:!!_,m=Yo(m),l&&l[nn]?(l=l.i,h=String(h).toString(),h in l.g&&(M=l.g[h],m=_i(M,m,_,L),-1<m&&(Fr(M[m]),Array.prototype.splice.call(M,m,1),M.length==0&&(delete l.g[h],l.h--)))):l&&(l=bi(l))&&(h=l.g[h.toString()],l=-1,h&&(l=_i(h,m,_,L)),(m=-1<l?h[l]:null)&&zn(m))}function zn(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[nn])ar(h.i,l);else{var m=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(m,_,l.capture):h.detachEvent?h.detachEvent(Qo(m),_):h.addListener&&h.removeListener&&h.removeListener(_),(m=bi(h))?(ar(m,l),m.h==0&&(m.src=null,h[wi]=null)):Fr(l)}}}function Qo(l){return l in Ei?Ei[l]:Ei[l]="on"+l}function Xo(l,h){if(l.da)l=!0;else{h=new Sn(h,this);var m=l.listener,_=l.ha||l.src;l.fa&&zn(l),l=m.call(_,h)}return l}function bi(l){return l=l[wi],l instanceof Ps?l:null}var lr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yo(l){return typeof l=="function"?l:(l[lr]||(l[lr]=function(h){return l.handleEvent(h)}),l[lr])}function Ye(){ge.call(this),this.i=new Ps(this),this.M=this,this.F=null}C(Ye,ge),Ye.prototype[nn]=!0,Ye.prototype.removeEventListener=function(l,h,m,_){Go(this,l,h,m,_)};function dt(l,h){var m,_=l.F;if(_)for(m=[];_;_=_.F)m.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new Ve(h,l);else if(h instanceof Ve)h.target=h.target||l;else{var L=h;h=new Ve(_,l),S(h,L)}if(L=!0,m)for(var M=m.length-1;0<=M;M--){var W=h.g=m[M];L=Ds(W,_,!0,h)&&L}if(W=h.g=l,L=Ds(W,_,!0,h)&&L,L=Ds(W,_,!1,h)&&L,m)for(M=0;M<m.length;M++)W=h.g=m[M],L=Ds(W,_,!1,h)&&L}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],_=0;_<m.length;_++)Fr(m[_]);delete l.g[h],l.h--}}this.F=null},Ye.prototype.K=function(l,h,m,_){return this.i.add(String(l),h,!1,m,_)},Ye.prototype.L=function(l,h,m,_){return this.i.add(String(l),h,!0,m,_)};function Ds(l,h,m,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,M=0;M<h.length;++M){var W=h[M];if(W&&!W.da&&W.capture==m){var Ne=W.listener,vt=W.ha||W.src;W.fa&&ar(l.i,W),L=Ne.call(vt,_)!==!1&&L}}return L&&!_.defaultPrevented}function Jo(l,h,m){if(typeof l=="function")m&&(l=g(l,m));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Ni(l){l.g=Jo(()=>{l.g=null,l.i&&(l.i=!1,Ni(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class sc extends ge{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ni(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(l){ge.call(this),this.h=l,this.g={}}C(yn,ge);var Zo=[];function Ti(l){V(l.g,function(h,m){this.g.hasOwnProperty(m)&&zn(h)},l),l.g={}}yn.prototype.N=function(){yn.aa.N.call(this),Ti(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ii=c.JSON.stringify,ic=c.JSON.parse,oc=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function ki(){}ki.prototype.h=null;function ea(l){return l.h||(l.h=l.i())}function qn(){}var Ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Br(){Ve.call(this,"d")}C(Br,Ve);function Si(){Ve.call(this,"c")}C(Si,Ve);var Hn={},ta=null;function jn(){return ta=ta||new Ye}Hn.La="serverreachability";function ac(l){Ve.call(this,Hn.La,l)}C(ac,Ve);function Os(l){const h=jn();dt(h,new ac(h))}Hn.STAT_EVENT="statevent";function ji(l,h){Ve.call(this,Hn.STAT_EVENT,l),this.stat=h}C(ji,Ve);function ot(l){const h=jn();dt(h,new ji(h,l))}Hn.Ma="timingevent";function Ri(l,h){Ve.call(this,Hn.Ma,l),this.size=h}C(Ri,Ve);function $r(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function cr(){this.g=!0}cr.prototype.xa=function(){this.g=!1};function Ci(l,h,m,_,L,M){l.info(function(){if(l.g)if(M)for(var W="",Ne=M.split("&"),vt=0;vt<Ne.length;vt++){var pe=Ne[vt].split("=");if(1<pe.length){var kt=pe[0];pe=pe[1];var St=kt.split("_");W=2<=St.length&&St[1]=="type"?W+(kt+"="+pe+"&"):W+(kt+"=redacted&")}}else W=null;else W=M;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+h+`
`+m+`
`+W})}function na(l,h,m,_,L,M,W){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+h+`
`+m+`
`+M+" "+W})}function ur(l,h,m,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+lc(l,m)+(_?" "+_:"")})}function ra(l,h){l.info(function(){return"TIMEOUT: "+h})}cr.prototype.info=function(){};function lc(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var _=m[l];if(!(2>_.length)){var L=_[1];if(Array.isArray(L)&&!(1>L.length)){var M=L[0];if(M!="noop"&&M!="stop"&&M!="close")for(var W=1;W<L.length;W++)L[W]=""}}}}return Ii(m)}catch{return h}}var zr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ai;function Rn(){}C(Rn,ki),Rn.prototype.g=function(){return new XMLHttpRequest},Rn.prototype.i=function(){return{}},Ai=new Rn;function Wn(l,h,m,_){this.j=l,this.i=h,this.l=m,this.R=_||1,this.U=new yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cc}function cc(){this.i=null,this.g="",this.h=!1}var uc={},ia={};function oa(l,h,m){l.L=1,l.v=Li(oe(h)),l.m=m,l.P=!0,Je(l,null)}function Je(l,h){l.F=Date.now(),Pi(l),l.A=oe(l.v);var m=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Cg(m.i,"t",_),l.C=0,m=l.j.J,l.h=new cc,l.g=Qg(l.j,m?h:null,!l.m),0<l.O&&(l.M=new sc(g(l.Y,l,l.g),l.O)),h=l.U,m=l.g,_=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Zo[0]=L.toString()),L=Zo);for(var M=0;M<L.length;M++){var W=Wo(m,L[M],_||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Os(),Ci(l.i,l.u,l.A,l.l,l.R,l.m)}Wn.prototype.ca=function(l){l=l.target;const h=this.M;h&&hr(l)==3?h.j():this.Y(l)},Wn.prototype.Y=function(l){try{if(l==this.g)e:{const St=hr(this.g);var h=this.g.Ba();const Bi=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||Mg(this.g)))){this.J||St!=4||h==7||(h==8||0>=Bi?Os(3):Os(2)),aa(this);var m=this.g.Z();this.X=m;t:if(dc(this)){var _=Mg(this.g);l="";var L=_.length,M=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dr(this),Ls(this);var W="";break t}this.h.i=new c.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(M&&h==L-1)});_.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,na(this.i,this.u,this.A,this.l,this.R,St,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,vt=this.g;if((Ne=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ne)){var pe=Ne;break t}}pe=null}if(m=pe)ur(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,la(this,m);else{this.o=!1,this.s=3,ot(12),dr(this),Ls(this);break e}}if(this.P){m=!0;let Cn;for(;!this.J&&this.C<W.length;)if(Cn=Zd(this,W),Cn==ia){St==4&&(this.s=4,ot(14),m=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==uc){this.s=4,ot(15),ur(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else ur(this.i,this.l,Cn,null),la(this,Cn);if(dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||W.length!=0||this.h.h||(this.s=1,ot(16),m=!1),this.o=this.o&&m,!m)ur(this.i,this.l,W,"[Invalid Chunked Response]"),dr(this),Ls(this);else if(0<W.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),ih(kt),kt.M=!0,ot(11))}}else ur(this.i,this.l,W,null),la(this,W);St==4&&dr(this),this.o&&!this.J&&(St==4?Hg(this.j,this):(this.o=!1,Pi(this)))}else Mb(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),dr(this),Ls(this)}}}catch{}finally{}};function dc(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Zd(l,h){var m=l.C,_=h.indexOf(`
`,m);return _==-1?ia:(m=Number(h.substring(m,_)),isNaN(m)?uc:(_+=1,_+m>h.length?ia:(h=h.slice(_,_+m),l.C=_+m,h)))}Wn.prototype.cancel=function(){this.J=!0,dr(this)};function Pi(l){l.S=Date.now()+l.I,hc(l,l.I)}function hc(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=$r(g(l.ba,l),h)}function aa(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Wn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ra(this.i,this.A),this.L!=2&&(Os(),ot(17)),dr(this),this.s=2,Ls(this)):hc(this,this.S-l)};function Ls(l){l.j.G==0||l.J||Hg(l.j,l)}function dr(l){aa(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Ti(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function la(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||Di(m.h,l))){if(!l.K&&Di(m.h,l)&&m.G==3){try{var _=m.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)vc(m),yc(m);else break e;sh(m),ot(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=$r(g(m.Za,m),6e3));if(1>=ua(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Us(m,11)}else if((l.K||m.g==l)&&vc(m),!v(h))for(L=m.Da.g.parse(h),h=0;h<L.length;h++){let pe=L[h];if(m.T=pe[0],pe=pe[1],m.G==2)if(pe[0]=="c"){m.K=pe[1],m.ia=pe[2];const kt=pe[3];kt!=null&&(m.la=kt,m.j.info("VER="+m.la));const St=pe[4];St!=null&&(m.Aa=St,m.j.info("SVER="+m.Aa));const Bi=pe[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(_=1.5*Bi,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const Cn=l.g;if(Cn){const wc=Cn.g?Cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wc){var M=_.h;M.g||wc.indexOf("spdy")==-1&&wc.indexOf("quic")==-1&&wc.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Oi(M,M.h),M.h=null))}if(_.D){const oh=Cn.g?Cn.g.getResponseHeader("X-HTTP-Session-Id"):null;oh&&(_.ya=oh,Ee(_.I,_.D,oh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var W=l;if(_.qa=Gg(_,_.J?_.ia:null,_.W),W.K){N(_.h,W);var Ne=W,vt=_.L;vt&&(Ne.I=vt),Ne.B&&(aa(Ne),Pi(Ne)),_.g=W}else zg(_);0<m.i.length&&xc(m)}else pe[0]!="stop"&&pe[0]!="close"||Us(m,7);else m.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Us(m,7):rh(m):pe[0]!="noop"&&m.l&&m.l.ta(pe),m.v=0)}}Os(4)}catch{}}var eh=class{constructor(l,h){this.g=l,this.map=h}};function fc(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ca(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ua(l){return l.h?1:l.g?l.g.size:0}function Di(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Oi(l,h){l.g?l.g.add(h):l.h=h}function N(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}fc.prototype.cancel=function(){if(this.i=B(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function B(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.D);return h}return R(l.i)}function $(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],m=l.length,_=0;_<m;_++)h.push(l[_]);return h}h=[],m=0;for(_ in l)h[m++]=l[_];return h}function ne(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(const _ in l)h[m++]=_;return h}}}function ye(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=ne(l),_=$(l),L=_.length,M=0;M<L;M++)h.call(void 0,_[M],m&&m[M],l)}var je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var _=l[m].indexOf("="),L=null;if(0<=_){var M=l[m].substring(0,_);L=l[m].substring(_+1)}else M=l[m];h(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ht(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ht){this.h=l.h,be(this,l.j),this.o=l.o,this.g=l.g,Me(this,l.s),this.l=l.l;var h=l.i,m=new ha;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),rn(this,m),this.m=l.m}else l&&(h=String(l).match(je))?(this.h=!1,be(this,h[1]||"",!0),this.o=Vs(h[2]||""),this.g=Vs(h[3]||"",!0),Me(this,h[4]),this.l=Vs(h[5]||"",!0),rn(this,h[6]||"",!0),this.m=Vs(h[7]||"")):(this.h=!1,this.i=new ha(null,this.h))}ht.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Ms(h,da,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ms(h,da,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Ms(m,m.charAt(0)=="/"?Vi:ae,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Ms(m,Mi)),l.join("")};function oe(l){return new ht(l)}function be(l,h,m){l.j=m?Vs(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Me(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function rn(l,h,m){h instanceof ha?(l.i=h,Cb(l.i,l.h)):(m||(h=Ms(h,Fs)),l.i=new ha(h,l.h))}function Ee(l,h,m){l.i.set(h,m)}function Li(l){return Ee(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Vs(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ms(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,th),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function th(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var da=/[#\/\?@]/g,ae=/[#\?:]/g,Vi=/[#\?]/g,Fs=/[#\?@]/g,Mi=/#/g;function ha(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function qr(l){l.g||(l.g=new Map,l.h=0,l.i&&Ze(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=ha.prototype,t.add=function(l,h){qr(this),this.i=null,l=Fi(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function jg(l,h){qr(l),h=Fi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Rg(l,h){return qr(l),h=Fi(l,h),l.g.has(h)}t.forEach=function(l,h){qr(this),this.g.forEach(function(m,_){m.forEach(function(L){l.call(h,L,_,this)},this)},this)},t.na=function(){qr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let _=0;_<h.length;_++){const L=l[_];for(let M=0;M<L.length;M++)m.push(h[_])}return m},t.V=function(l){qr(this);let h=[];if(typeof l=="string")Rg(this,l)&&(h=h.concat(this.g.get(Fi(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},t.set=function(l,h){return qr(this),this.i=null,l=Fi(this,l),Rg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Cg(l,h,m){jg(l,h),0<m.length&&(l.i=null,l.g.set(Fi(l,h),R(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var _=h[m];const M=encodeURIComponent(String(_)),W=this.V(_);for(_=0;_<W.length;_++){var L=M;W[_]!==""&&(L+="="+encodeURIComponent(String(W[_]))),l.push(L)}}return this.i=l.join("&")};function Fi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Cb(l,h){h&&!l.j&&(qr(l),l.i=null,l.g.forEach(function(m,_){var L=_.toLowerCase();_!=L&&(jg(this,_),Cg(this,L,m))},l)),l.j=h}function Ab(l,h){const m=new cr;if(c.Image){const _=new Image;_.onload=w(Hr,m,"TestLoadImage: loaded",!0,h,_),_.onerror=w(Hr,m,"TestLoadImage: error",!1,h,_),_.onabort=w(Hr,m,"TestLoadImage: abort",!1,h,_),_.ontimeout=w(Hr,m,"TestLoadImage: timeout",!1,h,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function Pb(l,h){const m=new cr,_=new AbortController,L=setTimeout(()=>{_.abort(),Hr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(M=>{clearTimeout(L),M.ok?Hr(m,"TestPingServer: ok",!0,h):Hr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),Hr(m,"TestPingServer: error",!1,h)})}function Hr(l,h,m,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(m)}catch{}}function Db(){this.g=new oc}function Ob(l,h,m){const _=m||"";try{ye(l,function(L,M){let W=L;d(L)&&(W=Ii(L)),h.push(_+M+"="+encodeURIComponent(W))})}catch(L){throw h.push(_+"type="+encodeURIComponent("_badmap")),L}}function pc(l){this.l=l.Ub||null,this.j=l.eb||!1}C(pc,ki),pc.prototype.g=function(){return new mc(this.l,this.j)},pc.prototype.i=function(l){return function(){return l}}({});function mc(l,h){Ye.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(mc,Ye),t=mc.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,pa(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fa(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,pa(this)),this.g&&(this.readyState=3,pa(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ag(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ag(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?fa(this):pa(this),this.readyState==3&&Ag(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,fa(this))},t.Qa=function(l){this.g&&(this.response=l,fa(this))},t.ga=function(){this.g&&fa(this)};function fa(l){l.readyState=4,l.l=null,l.j=null,l.v=null,pa(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function pa(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Pg(l){let h="";return V(l,function(m,_){h+=_,h+=":",h+=m,h+=`\r
`}),h}function nh(l,h,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Pg(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Ee(l,h,m))}function He(l){Ye.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(He,Ye);var Lb=/^https?$/i,Vb=["POST","PUT"];t=He.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ai.g(),this.v=this.o?ea(this.o):ea(Ai),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){Dg(this,M);return}if(l=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)m.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const M of _.keys())m.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),L=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Vb,h,void 0))||_||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,W]of m)this.g.setRequestHeader(M,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vg(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){Dg(this,M)}};function Dg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Og(l),gc(l)}function Og(l){l.A||(l.A=!0,dt(l,"complete"),dt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,dt(this,"complete"),dt(this,"abort"),gc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gc(this,!0)),He.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lg(this):this.bb())},t.bb=function(){Lg(this)};function Lg(l){if(l.h&&typeof a<"u"&&(!l.v[1]||hr(l)!=4||l.Z()!=2)){if(l.u&&hr(l)==4)Jo(l.Ea,0,l);else if(dt(l,"readystatechange"),hr(l)==4){l.h=!1;try{const W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var _;if(_=W===0){var L=String(l.D).match(je)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),_=!Lb.test(L?L.toLowerCase():"")}m=_}if(m)dt(l,"complete"),dt(l,"success");else{l.m=6;try{var M=2<hr(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",Og(l)}}finally{gc(l)}}}}function gc(l,h){if(l.g){Vg(l);const m=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||dt(l,"ready");try{m.onreadystatechange=_}catch{}}}function Vg(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function hr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),ic(h)}};function Mg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Mb(l){const h={};l=(l.g&&2<=hr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(v(l[_]))continue;var m=P(l[_]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=h[L]||[];h[L]=M,M.push(m)}b(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function Fg(l){this.Aa=0,this.i=[],this.j=new cr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,l),this.cb=ma("retryDelaySeedMs",1e4,l),this.Wa=ma("forwardChannelMaxRetries",2,l),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new fc(l&&l.concurrentRequestLimit),this.Da=new Db,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fg.prototype,t.la=8,t.G=1,t.connect=function(l,h,m,_){ot(0),this.W=l,this.H=h||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=Gg(this,null,this.W),xc(this)};function rh(l){if(Ug(l),l.G==3){var h=l.U++,m=oe(l.I);if(Ee(m,"SID",l.K),Ee(m,"RID",h),Ee(m,"TYPE","terminate"),ga(l,m),h=new Wn(l,l.j,h),h.L=2,h.v=Li(oe(m)),m=!1,c.navigator&&c.navigator.sendBeacon)try{m=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&c.Image&&(new Image().src=h.v,m=!0),m||(h.g=Qg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Pi(h)}Kg(l)}function yc(l){l.g&&(ih(l),l.g.cancel(),l.g=null)}function Ug(l){yc(l),l.u&&(c.clearTimeout(l.u),l.u=null),vc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function xc(l){if(!ca(l.h)&&!l.s){l.s=!0;var h=l.Ga;ut||te(),q||(ut(),q=!0),J.add(h,l),l.B=0}}function Fb(l,h){return ua(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=$r(g(l.Ga,l,h),Wg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Wn(this,this.j,l);let M=this.o;if(this.S&&(M?(M=y(M),S(M,this.S)):M=this.S),this.m!==null||this.O||(L.H=M,M=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=$g(this,L,h),m=oe(this.I),Ee(m,"RID",l),Ee(m,"CVER",22),this.D&&Ee(m,"X-HTTP-Session-Id",this.D),ga(this,m),M&&(this.O?h="headers="+encodeURIComponent(String(Pg(M)))+"&"+h:this.m&&nh(m,this.m,M)),Oi(this.h,L),this.Ua&&Ee(m,"TYPE","init"),this.P?(Ee(m,"$req",h),Ee(m,"SID","null"),L.T=!0,oa(L,m,null)):oa(L,m,h),this.G=2}}else this.G==3&&(l?Bg(this,l):this.i.length==0||ca(this.h)||Bg(this))};function Bg(l,h){var m;h?m=h.l:m=l.U++;const _=oe(l.I);Ee(_,"SID",l.K),Ee(_,"RID",m),Ee(_,"AID",l.T),ga(l,_),l.m&&l.o&&nh(_,l.m,l.o),m=new Wn(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=$g(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Oi(l.h,m),oa(m,_,h)}function ga(l,h){l.H&&V(l.H,function(m,_){Ee(h,_,m)}),l.l&&ye({},function(m,_){Ee(h,_,m)})}function $g(l,h,m){m=Math.min(l.i.length,m);var _=l.l?g(l.l.Na,l.l,l):null;e:{var L=l.i;let M=-1;for(;;){const W=["count="+m];M==-1?0<m?(M=L[0].g,W.push("ofs="+M)):M=0:W.push("ofs="+M);let Ne=!0;for(let vt=0;vt<m;vt++){let pe=L[vt].g;const kt=L[vt].map;if(pe-=M,0>pe)M=Math.max(0,L[vt].g-100),Ne=!1;else try{Ob(kt,W,"req"+pe+"_")}catch{_&&_(kt)}}if(Ne){_=W.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,_}function zg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ut||te(),q||(ut(),q=!0),J.add(h,l),l.v=0}}function sh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=$r(g(l.Fa,l),Wg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,qg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=$r(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),yc(this),qg(this))};function ih(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function qg(l){l.g=new Wn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=oe(l.qa);Ee(h,"RID","rpc"),Ee(h,"SID",l.K),Ee(h,"AID",l.T),Ee(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ee(h,"TO",l.ja),Ee(h,"TYPE","xmlhttp"),ga(l,h),l.m&&l.o&&nh(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Li(oe(h)),m.m=null,m.P=!0,Je(m,l)}t.Za=function(){this.C!=null&&(this.C=null,yc(this),sh(this),ot(19))};function vc(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Hg(l,h){var m=null;if(l.g==h){vc(l),ih(l),l.g=null;var _=2}else if(Di(l.h,h))m=h.D,N(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;_=jn(),dt(_,new Ri(_,m)),xc(l)}else zg(l);else if(L=h.s,L==3||L==0&&0<h.X||!(_==1&&Fb(l,h)||_==2&&sh(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),L){case 1:Us(l,5);break;case 4:Us(l,10);break;case 3:Us(l,6);break;default:Us(l,2)}}}function Wg(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function Us(l,h){if(l.j.info("Error code "+h),h==2){var m=g(l.fb,l),_=l.Xa;const L=!_;_=new ht(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||be(_,"https"),Li(_),L?Ab(_.toString(),m):Pb(_.toString(),m)}else ot(2);l.G=0,l.l&&l.l.sa(h),Kg(l),Ug(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Kg(l){if(l.G=0,l.ka=[],l.l){const h=B(l.h);(h.length!=0||l.i.length!=0)&&(k(l.ka,h),k(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function Gg(l,h,m){var _=m instanceof ht?oe(m):new ht(m);if(_.g!="")h&&(_.g=h+"."+_.g),Me(_,_.s);else{var L=c.location;_=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var M=new ht(null);_&&be(M,_),h&&(M.g=h),L&&Me(M,L),m&&(M.l=m),_=M}return m=l.D,h=l.ya,m&&h&&Ee(_,m,h),Ee(_,"VER",l.la),ga(l,_),_}function Qg(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new He(new pc({eb:m})):new He(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xg(){}t=Xg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _c(){}_c.prototype.g=function(l,h){return new sn(l,h)};function sn(l,h){Ye.call(this),this.g=new Fg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!v(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ui(this)}C(sn,Ye),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){rh(this.g)},sn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Ii(l),l=m);h.i.push(new eh(h.Ya++,l)),h.G==3&&xc(h)},sn.prototype.N=function(){this.g.l=null,delete this.j,rh(this.g),delete this.g,sn.aa.N.call(this)};function Yg(l){Br.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}C(Yg,Br);function Jg(){Si.call(this),this.status=1}C(Jg,Si);function Ui(l){this.g=l}C(Ui,Xg),Ui.prototype.ua=function(){dt(this.g,"a")},Ui.prototype.ta=function(l){dt(this.g,new Yg(l))},Ui.prototype.sa=function(l){dt(this.g,new Jg)},Ui.prototype.ra=function(){dt(this.g,"b")},_c.prototype.createWebChannel=_c.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,IE=function(){return new _c},TE=function(){return jn()},NE=Hn,op={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zr.NO_ERROR=0,zr.TIMEOUT=8,zr.HTTP_ERROR=6,uu=zr,sa.COMPLETE="complete",bE=sa,qn.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,Da=qn,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,EE=He}).apply(typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{});const G0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let At=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Tm("@firebase/firestore");function Ta(){return ai.logLevel}function X(t,...e){if(ai.logLevel<=ue.DEBUG){const n=e.map(Vm);ai.debug(`Firestore (${Fo}): ${t}`,...n)}}function Ar(t,...e){if(ai.logLevel<=ue.ERROR){const n=e.map(Vm);ai.error(`Firestore (${Fo}): ${t}`,...n)}}function li(t,...e){if(ai.logLevel<=ue.WARN){const n=e.map(Vm);ai.warn(`Firestore (${Fo}): ${t}`,...n)}}function Vm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: `+t;throw Ar(e),new Error(e)}function we(t,e){t||re()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class kR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SR{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new br;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new br,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new br)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new kE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new At(e)}}class jR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new jR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new CR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=PR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function To(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new it(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new it(0,0))}static max(){return new se(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends Nl{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const DR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends Nl{construct(e,n,r){return new mt(e,n,r)}static isValidIdentifier(e){return DR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ce.fromString(e))}static fromName(e){return new Y(Ce.fromString(e).popFirst(5))}static empty(){return new Y(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ce(e.slice()))}}function OR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new ws(s,Y.empty(),e)}function LR(t){return new ws(t.readTime,t.key,-1)}class ws{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ws(se.min(),Y.empty(),-1)}static max(){return new ws(se.max(),Y.empty(),-1)}}function VR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==MR)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++c,c===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function UR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ql(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Fm.oe=-1;function Sd(t){return t==null}function Wu(t){return t===0&&1/t==-1/0}function BR(t){return typeof t=="number"&&Number.isInteger(t)&&!Wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,s,i){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new X0(this.data.getIterator())}getIteratorFrom(e){return new X0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class X0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new cn([])}unionWith(e){let n=new Nt(mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new RE("Invalid base64 string: "+i):i}}(e);return new yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const $R=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(t){if(we(!!t),typeof t=="string"){let e=0;const n=$R.exec(t);if(we(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ci(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Bm(t){const e=t.mapValue.fields.__previous_value__;return Um(e)?Bm(e):e}function Tl(t){const e=Es(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,s,i,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Io{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Io("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Io&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c={mapValue:{}};function ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Um(t)?4:HR(t)?9007199254740991:qR(t)?10:11:re()}function rr(t,e){if(t===e)return!0;const n=ui(t);if(n!==ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tl(t).isEqual(Tl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Es(s.timestampValue),c=Es(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ci(s.bytesValue).isEqual(ci(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ge(s.geoPointValue.latitude)===Ge(i.geoPointValue.latitude)&&Ge(s.geoPointValue.longitude)===Ge(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ge(s.integerValue)===Ge(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ge(s.doubleValue),c=Ge(i.doubleValue);return a===c?Wu(a)===Wu(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return To(t.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Q0(a)!==Q0(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!rr(a[u],c[u])))return!1;return!0}(t,e);default:return re()}}function Il(t,e){return(t.values||[]).find(n=>rr(n,e))!==void 0}function ko(t,e){if(t===e)return 0;const n=ui(t),r=ui(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Ge(i.integerValue||i.doubleValue),u=Ge(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Y0(t.timestampValue,e.timestampValue);case 4:return Y0(Tl(t),Tl(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,a){const c=ci(i),u=ci(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=me(c[d],u[d]);if(f!==0)return f}return me(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=me(Ge(i.latitude),Ge(a.latitude));return c!==0?c:me(Ge(i.longitude),Ge(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return J0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,u,d,f;const p=i.fields||{},g=a.fields||{},w=(c=p.value)===null||c===void 0?void 0:c.arrayValue,C=(u=g.value)===null||u===void 0?void 0:u.arrayValue,R=me(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:J0(w,C)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===$c.mapValue&&a===$c.mapValue)return 0;if(i===$c.mapValue)return 1;if(a===$c.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=me(u[p],f[p]);if(g!==0)return g;const w=ko(c[u[p]],d[f[p]]);if(w!==0)return w}return me(u.length,f.length)}(t.mapValue,e.mapValue);default:throw re()}}function Y0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Es(t),r=Es(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function J0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ko(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function So(t){return ap(t)}function ap(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Es(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ci(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ap(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${ap(n.fields[a])}`;return s+"}"}(t.mapValue):re()}function Z0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function lp(t){return!!t&&"integerValue"in t}function $m(t){return!!t&&"arrayValue"in t}function ex(t){return!!t&&"nullValue"in t}function tx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function du(t){return!!t&&"mapValue"in t}function qR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Qa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return yi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function HR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!du(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qa(n)}setAll(e){let n=mt.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Qa(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());du(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];du(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){yi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Gt(Qa(this.value))}}function CE(t){const e=[];return yi(t.fields,(n,r)=>{const s=new mt([n]);if(du(r)){const i=CE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Dt(e,0,se.min(),se.min(),se.min(),Gt.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,se.min(),se.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,se.min(),se.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.position=e,this.inclusive=n}}function nx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(a.referenceValue),n.key):r=ko(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function rx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n="asc"){this.field=e,this.dir=n}}function WR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{}class st extends AE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GR(e,n,r):n==="array-contains"?new YR(e,r):n==="in"?new JR(e,r):n==="not-in"?new ZR(e,r):n==="array-contains-any"?new eC(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new QR(e,r):new XR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ko(n,this.value)):n!==null&&ui(this.value)===ui(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends AE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $n(e,n)}matches(e){return PE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function PE(t){return t.op==="and"}function DE(t){return KR(t)&&PE(t)}function KR(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function cp(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+So(t.value);if(DE(t))return t.filters.map(e=>cp(e)).join(",");{const e=t.filters.map(n=>cp(n)).join(",");return`${t.op}(${e})`}}function OE(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&rr(r.value,s.value)}(t,e):t instanceof $n?function(r,s){return s instanceof $n&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&OE(a,s.filters[c]),!0):!1}(t,e):void re()}function LE(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${So(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(LE).join(" ,")+"}"}(t):"Filter"}class GR extends st{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class QR extends st{constructor(e,n){super(e,"in",n),this.keys=VE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XR extends st{constructor(e,n){super(e,"not-in",n),this.keys=VE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class YR extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $m(n)&&Il(n.arrayValue,this.value)}}class JR extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Il(this.value.arrayValue,n)}}class ZR extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Il(this.value.arrayValue,n)}}class eC extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$m(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Il(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.ue=null}}function sx(t,e=null,n=[],r=[],s=null,i=null,a=null){return new tC(t,e,n,r,s,i,a)}function zm(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>So(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>So(r)).join(",")),e.ue=n}return e.ue}function qm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rx(t.startAt,e.startAt)&&rx(t.endAt,e.endAt)}function up(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function nC(t,e,n,r,s,i,a,c){return new Uo(t,e,n,r,s,i,a,c)}function jd(t){return new Uo(t)}function ix(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ME(t){return t.collectionGroup!==null}function Xa(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Nt(mt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new kl(i,r))}),n.has(mt.keyField().canonicalString())||e.ce.push(new kl(mt.keyField(),r))}return e.ce}function tr(t){const e=ie(t);return e.le||(e.le=rC(e,Xa(t))),e.le}function rC(t,e){if(t.limitType==="F")return sx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new kl(s.field,i)});const n=t.endAt?new Ku(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ku(t.startAt.position,t.startAt.inclusive):null;return sx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dp(t,e){const n=t.filters.concat([e]);return new Uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gu(t,e,n){return new Uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rd(t,e){return qm(tr(t),tr(e))&&t.limitType===e.limitType}function FE(t){return`${zm(tr(t))}|lt:${t.limitType}`}function qi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>LE(s)).join(", ")}]`),Sd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>So(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>So(s)).join(",")),`Target(${r})`}(tr(t))}; limitType=${t.limitType})`}function Cd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Xa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=nx(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Xa(r),s)||r.endAt&&!function(a,c,u){const d=nx(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Xa(r),s))}(t,e)}function sC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UE(t){return(e,n)=>{let r=!1;for(const s of Xa(t)){const i=iC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function iC(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?ko(u,d):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){yi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new ze(Y.comparator);function Pr(){return oC}const BE=new ze(Y.comparator);function Oa(...t){let e=BE;for(const n of t)e=e.insert(n.key,n);return e}function $E(t){let e=BE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gs(){return Ya()}function zE(){return Ya()}function Ya(){return new Bo(t=>t.toString(),(t,e)=>t.isEqual(e))}const aC=new ze(Y.comparator),lC=new Nt(Y.comparator);function ce(...t){let e=lC;for(const n of t)e=e.add(n);return e}const cC=new Nt(me);function uC(){return cC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function qE(t){return{integerValue:""+t}}function HE(t,e){return BR(e)?qE(e):Hm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(){this._=void 0}}function dC(t,e,n){return t instanceof Sl?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Um(i)&&(i=Bm(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof jl?KE(t,e):t instanceof Rl?GE(t,e):function(s,i){const a=WE(s,i),c=ox(a)+ox(s.Pe);return lp(a)&&lp(s.Pe)?qE(c):Hm(s.serializer,c)}(t,e)}function hC(t,e,n){return t instanceof jl?KE(t,e):t instanceof Rl?GE(t,e):n}function WE(t,e){return t instanceof Cl?function(r){return lp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Sl extends Ad{}class jl extends Ad{constructor(e){super(),this.elements=e}}function KE(t,e){const n=QE(e);for(const r of t.elements)n.some(s=>rr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Rl extends Ad{constructor(e){super(),this.elements=e}}function GE(t,e){let n=QE(e);for(const r of t.elements)n=n.filter(s=>!rr(s,r));return{arrayValue:{values:n}}}class Cl extends Ad{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ox(t){return Ge(t.integerValue||t.doubleValue)}function QE(t){return $m(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.field=e,this.transform=n}}function fC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof jl&&s instanceof jl||r instanceof Rl&&s instanceof Rl?To(r.elements,s.elements,rr):r instanceof Cl&&s instanceof Cl?rr(r.Pe,s.Pe):r instanceof Sl&&s instanceof Sl}(t.transform,e.transform)}class pC{constructor(e,n){this.version=e,this.transformResults=n}}class Nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pd{}function YE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wm(t.key,Nn.none()):new Hl(t.key,t.data,Nn.none());{const n=t.data,r=Gt.empty();let s=new Nt(mt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new As(t.key,r,new cn(s.toArray()),Nn.none())}}function mC(t,e,n){t instanceof Hl?function(s,i,a){const c=s.value.clone(),u=lx(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof As?function(s,i,a){if(!hu(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=lx(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(JE(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ja(t,e,n,r){return t instanceof Hl?function(i,a,c,u){if(!hu(i.precondition,a))return c;const d=i.value.clone(),f=cx(i.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof As?function(i,a,c,u){if(!hu(i.precondition,a))return c;const d=cx(i.fieldTransforms,u,a),f=a.data;return f.setAll(JE(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,a,c){return hu(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function gC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=WE(r.transform,s||null);i!=null&&(n===null&&(n=Gt.empty()),n.set(r.field,i))}return n||null}function ax(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&To(r,s,(i,a)=>fC(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hl extends Pd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class As extends Pd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function JE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lx(t,e,n){const r=new Map;we(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,hC(a,c,n[s]))}return r}function cx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,dC(i,a,e))}return r}class Wm extends Pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yC extends Pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&mC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zE();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=YE(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(n,r)=>ax(n,r))&&To(this.baseMutations,e.baseMutations,(n,r)=>ax(n,r))}}class Km{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length);let s=function(){return aC}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Km(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,de;function wC(t){switch(t){default:return re();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function ZE(t){if(t===void 0)return Ar("GRPC error has no .code"),F.UNKNOWN;switch(t){case et.OK:return F.OK;case et.CANCELLED:return F.CANCELLED;case et.UNKNOWN:return F.UNKNOWN;case et.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case et.INTERNAL:return F.INTERNAL;case et.UNAVAILABLE:return F.UNAVAILABLE;case et.UNAUTHENTICATED:return F.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case et.NOT_FOUND:return F.NOT_FOUND;case et.ALREADY_EXISTS:return F.ALREADY_EXISTS;case et.PERMISSION_DENIED:return F.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case et.ABORTED:return F.ABORTED;case et.OUT_OF_RANGE:return F.OUT_OF_RANGE;case et.UNIMPLEMENTED:return F.UNIMPLEMENTED;case et.DATA_LOSS:return F.DATA_LOSS;default:return re()}}(de=et||(et={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new Ys([4294967295,4294967295],0);function ux(t){const e=EC().encode(t),n=new wE;return n.update(e),new Uint8Array(n.digest())}function dx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ys([n,r],0),new Ys([s,i],0)]}class Gm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new La(`Invalid padding: ${n}`);if(r<0)throw new La(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new La(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new La(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ys.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ys.fromNumber(r)));return s.compare(bC)===1&&(s=new Ys([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ux(e),[r,s]=dx(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Gm(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=ux(e),[r,s]=dx(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class La extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Wl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dd(se.min(),s,new ze(me),Pr(),ce())}}class Wl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wl(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class e1{constructor(e,n){this.targetId=e,this.me=n}}class t1{constructor(e,n,r=yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hx{constructor(){this.fe=0,this.ge=px(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re()}}),new Wl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=px()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class NC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pr(),this.qe=fx(),this.Qe=new ze(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(up(i))if(r===0){const a=new Y(i.path);this.Ue(n,a,Dt.newNoDocument(a,se.min()))}else we(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=ci(r).toUint8Array()}catch(u){if(u instanceof RE)return li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Gm(a,s,i)}catch(u){return li(u instanceof La?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const c=this.Je(a);if(c){if(i.current&&up(c.target)){const u=new Y(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Dt.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ce();this.qe.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Dd(e,n,this.Qe,this.ke,r);return this.ke=Pr(),this.qe=fx(),this.Qe=new ze(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new hx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Nt(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function fx(){return new ze(Y.comparator)}function px(){return new ze(Y.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},IC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kC={and:"AND",or:"OR"};class SC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hp(t,e){return t.useProto3Json||Sd(e)?e:{value:e}}function Qu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jC(t,e){return Qu(t,e.toTimestamp())}function nr(t){return we(!!t),se.fromTimestamp(function(n){const r=Es(n);return new it(r.seconds,r.nanos)}(t))}function Qm(t,e){return fp(t,e).canonicalString()}function fp(t,e){const n=function(s){return new Ce(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function r1(t){const e=Ce.fromString(t);return we(l1(e)),e}function pp(t,e){return Qm(t.databaseId,e.path)}function $h(t,e){const n=r1(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(i1(n))}function s1(t,e){return Qm(t.databaseId,e)}function RC(t){const e=r1(t);return e.length===4?Ce.emptyPath():i1(e)}function mp(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function i1(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mx(t,e,n){return{name:pp(t,e),fields:n.value.mapValue.fields}}function CC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(we(f===void 0||typeof f=="string"),yt.fromBase64String(f||"")):(we(f===void 0||f instanceof Buffer||f instanceof Uint8Array),yt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const f=d.code===void 0?F.UNKNOWN:ZE(d.code);return new K(f,d.message||"")}(a);n=new t1(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$h(t,r.document.name),i=nr(r.document.updateTime),a=r.document.createTime?nr(r.document.createTime):se.min(),c=new Gt({mapValue:{fields:r.document.fields}}),u=Dt.newFoundDocument(s,i,a,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new fu(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$h(t,r.document),i=r.readTime?nr(r.readTime):se.min(),a=Dt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new fu([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$h(t,r.document),i=r.removedTargetIds||[];n=new fu([],i,s,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new _C(s,i),c=r.targetId;n=new e1(c,a)}}return n}function AC(t,e){let n;if(e instanceof Hl)n={update:mx(t,e.key,e.value)};else if(e instanceof Wm)n={delete:pp(t,e.key)};else if(e instanceof As)n={update:mx(t,e.key,e.data),updateMask:BC(e.fieldMask)};else{if(!(e instanceof yC))return re();n={verify:pp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Sl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof jl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Rl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Cl)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re()}(t,e.precondition)),n}function PC(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?nr(s.updateTime):nr(i);return a.isEqual(se.min())&&(a=nr(i)),new pC(a,s.transformResults||[])}(n,e))):[]}function DC(t,e){return{documents:[s1(t,e.path)]}}function OC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=s1(t,s);const i=function(d){if(d.length!==0)return a1($n.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Hi(g.field),direction:MC(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=hp(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function LC(t){let e=RC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=o1(p);return g instanceof $n&&DE(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(C){return new kl(Wi(C.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Sd(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new Ku(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,w=p.values||[];return new Ku(w,g)}(n.endAt)),nC(e,s,a,i,c,"F",u,d)}function VC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function o1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wi(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wi(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wi(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Wi(n.unaryFilter.field);return st.create(a,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return st.create(Wi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(r=>o1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function MC(t){return TC[t]}function FC(t){return IC[t]}function UC(t){return kC[t]}function Hi(t){return{fieldPath:t.canonicalString()}}function Wi(t){return mt.fromServerFormat(t.fieldPath)}function a1(t){return t instanceof st?function(n){if(n.op==="=="){if(tx(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NAN"}};if(ex(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tx(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NOT_NAN"}};if(ex(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hi(n.field),op:FC(n.op),value:n.value}}}(t):t instanceof $n?function(n){const r=n.getFilters().map(s=>a1(s));return r.length===1?r[0]:{compositeFilter:{op:UC(n.op),filters:r}}}(t):re()}function BC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function l1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r,s,i=se.min(),a=se.min(),c=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.ct=e}}function zC(t){const e=LC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.un=new HC}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(ws.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class HC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Nt(Ce.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nt(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new jo(0)}static kn(){return new jo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.changes=new Bo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ja(r.mutation,s,cn.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Oa();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Pr();const a=Ya(),c=function(){return Ya()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof As)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Ja(f.mutation,d,f.mutation.getFieldMask(),it.now())):a.set(d.key,cn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var p;return c.set(d,new KC(f,(p=a.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Ya();let s=new ze((a,c)=>a-c),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||cn.empty();f=c.applyToLocalView(d,f),r.set(u,f);const p=(s.get(c.batchId)||ce()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,p=zE();f.forEach(g=>{if(!i.has(g)){const w=YE(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ME(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Gs());let c=-1,u=i;return a.next(d=>U.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ce())).next(f=>({batchId:c,changes:$E(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=Oa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Oa();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(p,g){return new Uo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,Dt.newInvalidDocument(f)))});let c=Oa();return a.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Ja(f.mutation,d,cn.empty(),it.now()),Cd(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nr(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:zC(s.bundledQuery),readTime:nr(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.overlays=new ze(Y.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Gs(),i=n.length+1,a=new Y(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Gs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Gs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return U.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new vC(n,r));let i=this.Ir.get(n);i===void 0&&(i=ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.Tr=new Nt(ft.Er),this.dr=new Nt(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new Ce([])),r=new ft(n,e),s=new ft(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new Ce([])),r=new ft(n,e),s=new ft(n,e+1);let i=ce();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Nt(ft.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new xC(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new ft(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(me);return n.forEach(s=>{const i=new ft(s,0),a=new ft(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],c=>{r=r.add(c.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const a=new ft(new Y(i),0);let c=new Nt(me);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},a),U.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ft(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.Mr=e,this.docs=function(){return new ze(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Pr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Pr();const a=n.path,c=new Y(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||VR(LR(f),r)<=0||(s.has(f.key)||Cd(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eA(this)}getSize(e){return U.resolve(this.size)}}class eA extends WC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.persistence=e,this.Nr=new Bo(n=>zm(n),qm),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Xm,this.targetCount=0,this.kr=jo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new jo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Fm(0),this.Kr=!1,this.Kr=!0,this.$r=new YC,this.referenceDelegate=e(this),this.Ur=new tA(this),this.indexManager=new qC,this.remoteDocumentCache=function(s){return new ZC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $C(n),this.Gr=new QC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new JC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new rA(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class rA extends FR{constructor(e){super(),this.currentSequenceNumber=e}}class Ym{constructor(e){this.persistence=e,this.Jr=new Xm,this.Yr=null}static Zr(e){return new Ym(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=Y.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Jm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return A2()?8:UR(Lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new sA;return this.Xi(e,n,a).next(c=>{if(i.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ta()<=ue.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",qi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Ta()<=ue.DEBUG&&X("QueryEngine","Query:",qi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ta()<=ue.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",qi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(n))):U.resolve())}Yi(e,n){if(ix(n))return U.resolve(null);let r=tr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gu(n,null,"F"),r=tr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ce(...i);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,a,u.readTime)?this.Yi(e,Gu(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return ix(n)||s.isEqual(se.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?U.resolve(null):(Ta()<=ue.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),qi(n)),this.rs(e,a,n,OR(s,-1)).next(c=>c))})}ts(e,n){let r=new Nt(UE(e));return n.forEach((s,i)=>{Cd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ta()<=ue.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",qi(n)),this.Ji.getDocumentsMatchingQuery(e,n,ws.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ze(me),this._s=new Bo(i=>zm(i),qm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function aA(t,e,n,r){return new oA(t,e,n,r)}async function c1(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=ce();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function lA(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const p=d.batch,g=p.keys();let w=U.resolve();return g.forEach(C=>{w=w.next(()=>f.getEntry(u,C)).next(R=>{const k=d.docVersions.get(C);we(k!==null),R.version.compareTo(k)<0&&(p.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),f.addEntry(R)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ce();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function u1(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function cA(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;c.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(yt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(p,w),function(R,k,E){return R.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,w,f)&&c.push(n.Ur.updateTargetData(i,w))});let u=Pr(),d=ce();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(uA(i,a,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(se.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function uA(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Pr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):X("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function dA(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hA(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new is(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function gp(t,e,n){const r=ie(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ql(a))throw a;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function gx(t,e,n){const r=ie(t);let s=se.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const p=ie(u),g=p._s.get(f);return g!==void 0?U.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,a,tr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:se.min(),n?i:ce())).next(c=>(fA(r,sC(e),c),{documents:c,Ts:i})))}function fA(t,e,n){let r=t.us.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class yx{constructor(){this.activeTargetIds=uC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pA{constructor(){this.so=new yx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc=null;function zh(){return zc===null?zc=function(){return 268435456+Math.round(2147483648*Math.random())}():zc++,"0x"+zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class xA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const c=zh(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(f=>(X("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw li("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,c){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=gA[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=zh();return new Promise((a,c)=>{const u=new EE;u.setWithCredentials(!0),u.listenOnce(bE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case uu.NO_ERROR:const f=u.getResponseJson();X(Ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case uu.TIMEOUT:X(Ct,`RPC '${e}' ${i} timed out`),c(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case uu.HTTP_ERROR:const p=u.getStatus();if(X(Ct,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const C=function(k){const E=k.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(w.status);c(new K(C,w.message))}else c(new K(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(F.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{X(Ct,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);X(Ct,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=zh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=IE(),c=TE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");X(Ct,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=a.createWebChannel(f,u);let g=!1,w=!1;const C=new yA({Io:k=>{w?X(Ct,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(g||(X(Ct,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),X(Ct,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},To:()=>p.close()}),R=(k,E,v)=>{k.listen(E,x=>{try{v(x)}catch(T){setTimeout(()=>{throw T},0)}})};return R(p,Da.EventType.OPEN,()=>{w||(X(Ct,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),R(p,Da.EventType.CLOSE,()=>{w||(w=!0,X(Ct,`RPC '${e}' stream ${s} transport closed`),C.So())}),R(p,Da.EventType.ERROR,k=>{w||(w=!0,li(Ct,`RPC '${e}' stream ${s} transport errored:`,k),C.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),R(p,Da.EventType.MESSAGE,k=>{var E;if(!w){const v=k.data[0];we(!!v);const x=v,T=x.error||((E=x[0])===null||E===void 0?void 0:E.error);if(T){X(Ct,`RPC '${e}' stream ${s} received error:`,T);const O=T.status;let V=function(I){const S=et[I];if(S!==void 0)return ZE(S)}(O),b=T.message;V===void 0&&(V=F.INTERNAL,b="Unknown error status: "+O+" with message "+T.message),w=!0,C.So(new K(V,b)),p.close()}else X(Ct,`RPC '${e}' stream ${s} received:`,v),C.bo(v)}}),R(c,NE.STAT_EVENT,k=>{k.stat===op.PROXY?X(Ct,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===op.NOPROXY&&X(Ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){return new SC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r,s,i,a,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new d1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Ar(n.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vA extends h1{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=CC(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?se.min():a.readTime?nr(a.readTime):se.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=mp(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=up(u)?{documents:DC(i,u)}:{query:OC(i,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=n1(i,a.resumeToken);const d=hp(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(se.min())>0){c.readTime=Qu(i,a.snapshotVersion.toTimestamp());const d=hp(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=VC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=mp(this.serializer),n.removeTarget=e,this.a_(n)}}class _A extends h1{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=PC(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=mp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>AC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,fp(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,fp(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(F.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class EA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ar(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{xi(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.L_.add(4),await Kl(d),d.q_.set("Unknown"),d.L_.delete(4),await Ld(d)}(this))})}),this.q_=new EA(r,s)}}async function Ld(t){if(xi(t))for(const e of t.B_)await e(!0)}async function Kl(t){for(const e of t.B_)await e(!1)}function f1(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ng(n)?tg(n):$o(n).r_()&&eg(n,e))}function Zm(t,e){const n=ie(t),r=$o(n);n.N_.delete(e),r.r_()&&p1(n,e),n.N_.size===0&&(r.r_()?r.o_():xi(n)&&n.q_.set("Unknown"))}function eg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$o(t).A_(e)}function p1(t,e){t.Q_.xe(e),$o(t).R_(e)}function tg(t){t.Q_=new NC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),$o(t).start(),t.q_.v_()}function ng(t){return xi(t)&&!$o(t).n_()&&t.N_.size>0}function xi(t){return ie(t).L_.size===0}function m1(t){t.Q_=void 0}async function NA(t){t.q_.set("Online")}async function TA(t){t.N_.forEach((e,n)=>{eg(t,e)})}async function IA(t,e){m1(t),ng(t)?(t.q_.M_(e),tg(t)):t.q_.set("Unknown")}async function kA(t,e,n){if(t.q_.set("Online"),e instanceof t1&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xu(t,r)}else if(e instanceof fu?t.Q_.Ke(e):e instanceof e1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(se.min()))try{const r=await u1(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(yt.EMPTY_BYTE_STRING,f.snapshotVersion)),p1(i,u);const p=new is(f.target,u,d,f.sequenceNumber);eg(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Xu(t,r)}}async function Xu(t,e,n){if(!ql(e))throw e;t.L_.add(1),await Kl(t),t.q_.set("Offline"),n||(n=()=>u1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ld(t)})}function g1(t,e){return e().catch(n=>Xu(t,n,e))}async function Vd(t){const e=ie(t),n=bs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;SA(e);)try{const s=await dA(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,jA(e,s)}catch(s){await Xu(e,s)}y1(e)&&x1(e)}function SA(t){return xi(t)&&t.O_.length<10}function jA(t,e){t.O_.push(e);const n=bs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function y1(t){return xi(t)&&!bs(t).n_()&&t.O_.length>0}function x1(t){bs(t).start()}async function RA(t){bs(t).p_()}async function CA(t){const e=bs(t);for(const n of t.O_)e.m_(n.mutations)}async function AA(t,e,n){const r=t.O_.shift(),s=Km.from(r,e,n);await g1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Vd(t)}async function PA(t,e){e&&bs(t).V_&&await async function(r,s){if(function(a){return wC(a)&&a!==F.ABORTED}(s.code)){const i=r.O_.shift();bs(r).s_(),await g1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Vd(r)}}(t,e),y1(t)&&x1(t)}async function vx(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=xi(n);n.L_.add(3),await Kl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ld(n)}async function DA(t,e){const n=ie(t);e?(n.L_.delete(2),await Ld(n)):e||(n.L_.add(2),await Kl(n),n.q_.set("Unknown"))}function $o(t){return t.K_||(t.K_=function(n,r,s){const i=ie(n);return i.w_(),new vA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:NA.bind(null,t),Ro:TA.bind(null,t),mo:IA.bind(null,t),d_:kA.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ng(t)?tg(t):t.q_.set("Unknown")):(await t.K_.stop(),m1(t))})),t.K_}function bs(t){return t.U_||(t.U_=function(n,r,s){const i=ie(n);return i.w_(),new _A(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:RA.bind(null,t),mo:PA.bind(null,t),f_:CA.bind(null,t),g_:AA.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Vd(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new rg(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(t,e){if(Ar("AsyncQueue",`${e}: ${t}`),ql(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Oa(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new yo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.W_=new ze(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ro{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ro(e,n,yo.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class LA{constructor(){this.queries=wx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=wx(),i.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function wx(){return new Bo(t=>FE(t),Rd)}async function ig(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new OA,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=sg(a,`Initialization of query '${qi(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&ag(n)}async function og(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function VA(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&ag(n)}function MA(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function ag(t){t.Y_.forEach(e=>{e.next()})}var yp,Ex;(Ex=yp||(yp={})).ea="default",Ex.Cache="cache";class lg{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ro(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.key=e}}class _1{constructor(e){this.key=e}}class FA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=UE(e),this.Ra=new yo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new _x,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),w=Cd(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let k=!1;g&&w?g.data.isEqual(w.data)?C!==R&&(r.track({type:3,doc:w}),k=!0):this.ga(g,w)||(r.track({type:2,doc:w}),k=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),k=!0):g&&!w&&(r.track({type:1,doc:g}),k=!0,(u||d)&&(c=!0)),k&&(w?(a=a.add(w),i=R?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,p)=>function(w,C){const R=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return R(w)-R(C)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new Ro(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _x,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new _1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new v1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ro.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class UA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BA{constructor(e){this.key=e,this.va=!1}}class $A{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Bo(c=>FE(c),Rd),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(Y.comparator),this.Na=new Map,this.La=new Xm,this.Ba={},this.ka=new Map,this.qa=jo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function zA(t,e,n=!0){const r=I1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await w1(r,e,n,!0),s}async function qA(t,e){const n=I1(t);await w1(n,e,!0,!1)}async function w1(t,e,n,r){const s=await hA(t.localStore,tr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await HA(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&f1(t.remoteStore,s),c}async function HA(t,e,n,r,s){t.Ka=(p,g,w)=>async function(R,k,E,v){let x=k.view.ma(E);x.ns&&(x=await gx(R.localStore,k.query,!1).then(({documents:b})=>k.view.ma(b,x)));const T=v&&v.targetChanges.get(k.targetId),O=v&&v.targetMismatches.get(k.targetId)!=null,V=k.view.applyChanges(x,R.isPrimaryClient,T,O);return Nx(R,k.targetId,V.wa),V.snapshot}(t,p,g,w);const i=await gx(t.localStore,e,!0),a=new FA(e,i.Ts),c=a.ma(i.documents),u=Wl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);Nx(t,n,d.wa);const f=new UA(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function WA(t,e,n){const r=ie(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Rd(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Zm(r.remoteStore,s.targetId),xp(r,s.targetId)}).catch(zl)):(xp(r,s.targetId),await gp(r.localStore,s.targetId,!0))}async function KA(t,e){const n=ie(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zm(n.remoteStore,r.targetId))}async function GA(t,e,n){const r=tP(t);try{const s=await function(a,c){const u=ie(a),d=it.now(),f=c.reduce((w,C)=>w.add(C.key),ce());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let C=Pr(),R=ce();return u.cs.getEntries(w,f).next(k=>{C=k,C.forEach((E,v)=>{v.isValidDocument()||(R=R.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,C)).next(k=>{p=k;const E=[];for(const v of c){const x=gC(v,p.get(v.key).overlayedDocument);x!=null&&E.push(new As(v.key,x,CE(x.value.mapValue),Nn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,E,c)}).next(k=>{g=k;const E=k.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(w,k.batchId,E)})}).then(()=>({batchId:g.batchId,changes:$E(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new ze(me)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await Gl(r,s.changes),await Vd(r.remoteStore)}catch(s){const i=sg(s,"Failed to persist write");n.reject(i)}}async function E1(t,e){const n=ie(t);try{const r=await cA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?we(a.va):s.removedDocuments.size>0&&(we(a.va),a.va=!1))}),await Gl(n,r,e)}catch(r){await zl(r)}}function bx(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const c=a.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ie(a);u.onlineState=c;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(c)&&(d=!0)}),d&&ag(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QA(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new ze(Y.comparator);a=a.insert(i,Dt.newNoDocument(i,se.min()));const c=ce().add(i),u=new Dd(se.min(),new Map,new ze(me),a,c);await E1(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),cg(r)}else await gp(r.localStore,e,!1).then(()=>xp(r,e,n)).catch(zl)}async function XA(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await lA(n.localStore,e);N1(n,r,null),b1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gl(n,s)}catch(s){await zl(s)}}async function YA(t,e,n){const r=ie(t);try{const s=await function(a,c){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(we(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);N1(r,e,n),b1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gl(r,s)}catch(s){await zl(s)}}function b1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function N1(t,e,n){const r=ie(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function xp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||T1(t,r)})}function T1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Zm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),cg(t))}function Nx(t,e,n){for(const r of n)r instanceof v1?(t.La.addReference(r.key,e),JA(t,r)):r instanceof _1?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||T1(t,r.key)):re()}function JA(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),cg(t))}function cg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(Ce.fromString(e)),r=t.qa.next();t.Na.set(r,new BA(n)),t.Oa=t.Oa.insert(n,r),f1(t.remoteStore,new is(tr(jd(n.path)),r,"TargetPurposeLimboResolution",Fm.oe))}}async function Gl(t,e,n){const r=ie(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Jm.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const f=ie(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(d,g=>U.forEach(g.$i,w=>f.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>U.forEach(g.Ui,w=>f.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!ql(p))throw p;X("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const w=f.os.get(g),C=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(g,R)}}}(r.localStore,i))}async function ZA(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await c1(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new K(F.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gl(n,r.hs)}}function eP(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let s=ce();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const c=n.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function I1(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=E1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QA.bind(null,e),e.Ca.d_=VA.bind(null,e.eventManager),e.Ca.$a=MA.bind(null,e.eventManager),e}function tP(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YA.bind(null,e),e}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Od(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return aA(this.persistence,new iA,e.initialUser,this.serializer)}Ga(e){return new nA(Ym.Zr,this.serializer)}Wa(e){return new pA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class vp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZA.bind(null,this.syncEngine),await DA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LA}()}createDatastore(e){const n=Od(e.databaseInfo.databaseId),r=function(i){return new xA(i)}(e.databaseInfo);return function(i,a,c,u){return new wA(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new bA(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>bx(this.syncEngine,n,0),function(){return xx.D()?new xx:new mA}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,f){const p=new $A(s,i,a,c,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Kl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vp.provider={build:()=>new vp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=At.UNAUTHENTICATED,this.clientId=Mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hh(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await c1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Tx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rP(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>vx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>vx(e.remoteStore,s)),t._onlineComponents=e}async function rP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;li("Error using user provided cache. Falling back to memory cache: "+n),await Hh(t,new Yu)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Hh(t,new Yu);return t._offlineComponents}async function k1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Tx(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Tx(t,new vp))),t._onlineComponents}function sP(t){return k1(t).then(e=>e.syncEngine)}async function Ju(t){const e=await k1(t),n=e.eventManager;return n.onListen=zA.bind(null,e.syncEngine),n.onUnlisten=WA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KA.bind(null,e.syncEngine),n}function iP(t,e,n={}){const r=new br;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new ug({next:g=>{f.Za(),a.enqueueAndForget(()=>og(i,p));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new lg(jd(c.path),f,{includeMetadataChanges:!0,_a:!0});return ig(i,p)}(await Ju(t),t.asyncQueue,e,n,r)),r.promise}function oP(t,e,n={}){const r=new br;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new ug({next:g=>{f.Za(),a.enqueueAndForget(()=>og(i,p)),g.fromCache&&u.source==="server"?d.reject(new K(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new lg(c,f,{includeMetadataChanges:!0,_a:!0});return ig(i,p)}(await Ju(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R1(t,e,n,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kx(t){if(!Y.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sx(t){if(Y.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Md(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Md(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function aP(t,e){if(e<=0)throw new K(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SE;switch(r.type){case"firstParty":return new RR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ix.get(n);r&&(X("ComponentProvider","Removing Datastore"),Ix.delete(n),r.terminate())}(this),Promise.resolve()}}function C1(t,e,n,r={}){var s;const i=(t=Ut(t,Fd))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=At.MOCK_USER;else{c=jw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new At(d)}t._authCredentials=new kR(new kE(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new or(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class Nr extends or{constructor(e,n,r){super(e,n,jd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new Y(e))}withConverter(e){return new Nr(this.firestore,e,this._path)}}function he(t,e,...n){if(t=Se(t),j1("collection","path",e),t instanceof Fd){const r=Ce.fromString(e,...n);return Sx(r),new Nr(t,null,r)}{if(!(t instanceof Tt||t instanceof Nr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Sx(r),new Nr(t.firestore,null,r)}}function Z(t,e,...n){if(t=Se(t),arguments.length===1&&(e=Mm.newId()),j1("doc","path",e),t instanceof Fd){const r=Ce.fromString(e,...n);return kx(r),new Tt(t,null,new Y(r))}{if(!(t instanceof Tt||t instanceof Nr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return kx(r),new Tt(t.firestore,t instanceof Nr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new d1(this,"async_queue_retry"),this.Vu=()=>{const r=qh();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=qh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=qh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new br;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ql(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Ar("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=rg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Cx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class sr extends Fd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Rx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rx(e),this._firestoreClient=void 0,await e}}}function A1(t,e){const n=typeof t=="object"?t:Nd(),r=typeof t=="string"?t:"(default)",s=bd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Iw("firestore");i&&C1(s,...i)}return s}function Ql(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lP(t),t._firestoreClient}function lP(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new zR(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,S1(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new nP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new di(yt.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new di(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=/^__.*__$/;class uP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hl(e,this.data,n,this.fieldTransforms)}}class P1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new As(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function D1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class dg{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(D1(this.Cu)&&cP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class dP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Od(e)}Qu(e,n,r,s=!1){return new dg({Cu:e,methodName:n,qu:r,path:mt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $d(t){const e=t._freezeSettings(),n=Od(t._databaseId);return new dP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function O1(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);pg("Data must be an object, but it was:",a,r);const c=L1(r,a);let u,d;if(i.merge)u=new cn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=_p(e,p,n);if(!a.contains(g))throw new K(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);M1(f,g)||f.push(g)}u=new cn(f),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new uP(new Gt(c),u,d)}class zd extends zo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zd}}class hg extends zo{_toFieldTransform(e){return new XE(e.path,new Sl)}isEqual(e){return e instanceof hg}}class fg extends zo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Cl(e.serializer,HE(e.serializer,this.$u));return new XE(e.path,n)}isEqual(e){return e instanceof fg&&this.$u===e.$u}}function hP(t,e,n,r){const s=t.Qu(1,e,n);pg("Data must be an object, but it was:",s,r);const i=[],a=Gt.empty();yi(r,(u,d)=>{const f=mg(e,u,n);d=Se(d);const p=s.Nu(f);if(d instanceof zd)i.push(f);else{const g=Yl(d,p);g!=null&&(i.push(f),a.set(f,g))}});const c=new cn(i);return new P1(a,c,s.fieldTransforms)}function fP(t,e,n,r,s,i){const a=t.Qu(1,e,n),c=[_p(e,r,n)],u=[s];if(i.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(_p(e,i[g])),u.push(i[g+1]);const d=[],f=Gt.empty();for(let g=c.length-1;g>=0;--g)if(!M1(d,c[g])){const w=c[g];let C=u[g];C=Se(C);const R=a.Nu(w);if(C instanceof zd)d.push(w);else{const k=Yl(C,R);k!=null&&(d.push(w),f.set(w,k))}}const p=new cn(d);return new P1(f,p,a.fieldTransforms)}function pP(t,e,n,r=!1){return Yl(n,t.Qu(r?4:3,e))}function Yl(t,e){if(V1(t=Se(t)))return pg("Unsupported field value:",e,t),L1(t,e);if(t instanceof zo)return function(r,s){if(!D1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=Yl(c,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=it.fromDate(r);return{timestampValue:Qu(s.serializer,i)}}if(r instanceof it){const i=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qu(s.serializer,i)}}if(r instanceof Ud)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof di)return{bytesValue:n1(s.serializer,r._byteString)};if(r instanceof Tt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Bd)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Hm(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Md(r)}`)}(t,e)}function L1(t,e){const n={};return jE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yi(t,(r,s)=>{const i=Yl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function V1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof Ud||t instanceof di||t instanceof Tt||t instanceof zo||t instanceof Bd)}function pg(t,e,n){if(!V1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Md(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function _p(t,e,n){if((e=Se(e))instanceof Xl)return e._internalPath;if(typeof e=="string")return mg(t,e);throw Zu("Field path arguments must be of type string or ",t,!1,void 0,n)}const mP=new RegExp("[~\\*/\\[\\]]");function mg(t,e,n){if(e.search(mP)>=0)throw Zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xl(...e.split("."))._internalPath}catch{throw Zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zu(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new K(F.INVALID_ARGUMENT,c+t+u)}function M1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gP extends F1{data(){return super.data()}}function qd(t,e){return typeof e=="string"?mg(t,e):e instanceof Xl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gg{}class Hd extends gg{}function Bt(t,e,...n){let r=[];e instanceof gg&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Wd).length,c=i.filter(u=>u instanceof Jl).length;if(a>1||a>0&&c>0)throw new K(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Jl extends Hd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Jl(e,n,r)}_apply(e){const n=this._parse(e);return B1(e._query,n),new or(e.firestore,e.converter,dp(e._query,n))}_parse(e){const n=$d(e.firestore);return function(i,a,c,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Px(p,f);const w=[];for(const C of p)w.push(Ax(u,i,C));g={arrayValue:{values:w}}}else g=Ax(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Px(p,f),g=pP(c,a,p,f==="in"||f==="not-in");return st.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fn(t,e,n){const r=e,s=qd("where",t);return Jl._create(s,r,n)}class Wd extends gg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)B1(a,u),a=dp(a,u)}(e._query,n),new or(e.firestore,e.converter,dp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kd extends Hd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Kd(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kl(i,a)}(e._query,this._field,this._direction);return new or(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Uo(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ns(t,e="asc"){const n=e,r=qd("orderBy",t);return Kd._create(r,n)}class Gd extends Hd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Gd(e,n,r)}_apply(e){return new or(e.firestore,e.converter,Gu(e._query,this._limit,this._limitType))}}function yg(t){return aP("limit",t),Gd._create("limit",t,"F")}function Ax(t,e,n){if(typeof(n=Se(n))=="string"){if(n==="")throw new K(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ME(e)&&n.indexOf("/")!==-1)throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!Y.isDocumentKey(r))throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Z0(t,new Y(r))}if(n instanceof Tt)return Z0(t,n._key);throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Md(n)}.`)}function Px(t,e){if(!Array.isArray(t)||t.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B1(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $1{convertValue(e,n="none"){switch(ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Ge(a.doubleValue));return new Bd(i)}convertGeoPoint(e){return new Ud(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Bm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tl(e));default:return null}}convertTimestamp(e){const n=Es(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);we(l1(r));const s=new Io(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Ar(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xg extends F1{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Za(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Za extends xg{data(e={}){return super.data(e)}}class vg{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new oo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Za(this._firestore,this._userDataWriter,r.key,r,new oo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Za(s._firestore,s._userDataWriter,c.doc.key,c.doc,new oo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Za(s._firestore,s._userDataWriter,c.doc.key,c.doc,new oo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:yP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){t=Ut(t,Tt);const e=Ut(t.firestore,sr);return iP(Ql(e),t._key).then(n=>q1(e,t,n))}class _g extends $1{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function Ke(t){t=Ut(t,or);const e=Ut(t.firestore,sr),n=Ql(e),r=new _g(e);return U1(t._query),oP(n,t._query).then(s=>new vg(e,r,t,s))}function wn(t,e,n){t=Ut(t,Tt);const r=Ut(t.firestore,sr),s=z1(t.converter,e,n);return Zl(r,[O1($d(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Nn.none())])}function tt(t,e,n,...r){t=Ut(t,Tt);const s=Ut(t.firestore,sr),i=$d(s);let a;return a=typeof(e=Se(e))=="string"||e instanceof Xl?fP(i,"updateDoc",t._key,e,n,r):hP(i,"updateDoc",t._key,e),Zl(s,[a.toMutation(t._key,Nn.exists(!0))])}function os(t){return Zl(Ut(t.firestore,sr),[new Wm(t._key,Nn.none())])}function qo(t,e){const n=Ut(t.firestore,sr),r=Z(t),s=z1(t.converter,e);return Zl(n,[O1($d(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Nn.exists(!1))]).then(()=>r)}function Al(t,...e){var n,r,s;t=Se(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Cx(e[a])||(i=e[a],a++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Cx(e[a])){const p=e[a];e[a]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[a+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[a+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,d,f;if(t instanceof Tt)d=Ut(t.firestore,sr),f=jd(t._key.path),u={next:p=>{e[a]&&e[a](q1(d,t,p))},error:e[a+1],complete:e[a+2]};else{const p=Ut(t,or);d=Ut(p.firestore,sr),f=p._query;const g=new _g(d);u={next:w=>{e[a]&&e[a](new vg(d,g,p,w))},error:e[a+1],complete:e[a+2]},U1(t._query)}return function(g,w,C,R){const k=new ug(R),E=new lg(w,k,C);return g.asyncQueue.enqueueAndForget(async()=>ig(await Ju(g),E)),()=>{k.Za(),g.asyncQueue.enqueueAndForget(async()=>og(await Ju(g),E))}}(Ql(d),f,c,u)}function Zl(t,e){return function(r,s){const i=new br;return r.asyncQueue.enqueueAndForget(async()=>GA(await sP(r),s,i)),i.promise}(Ql(t),e)}function q1(t,e,n){const r=n.docs.get(e._key),s=new _g(t);return new xg(t,s,e._key,r,new oo(n.hasPendingWrites,n.fromCache),e.converter)}function xe(){return new hg("serverTimestamp")}function Va(t){return new fg("increment",t)}(function(e,n=!0){(function(s){Fo=s})(gi),si(new _s("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new sr(new SR(r.getProvider("auth-internal")),new AR(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Io(d.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Zn(G0,"4.7.3",e),Zn(G0,"4.7.3","esm2017")})();const Dx=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:$1,Bytes:di,CollectionReference:Nr,DocumentReference:Tt,DocumentSnapshot:xg,FieldPath:Xl,FieldValue:zo,Firestore:sr,FirestoreError:K,GeoPoint:Ud,Query:or,QueryCompositeFilterConstraint:Wd,QueryConstraint:Hd,QueryDocumentSnapshot:Za,QueryFieldFilterConstraint:Jl,QueryLimitConstraint:Gd,QueryOrderByConstraint:Kd,QuerySnapshot:vg,SnapshotMetadata:oo,Timestamp:it,VectorValue:Bd,_AutoId:Mm,_ByteString:yt,_DatabaseId:Io,_DocumentKey:Y,_EmptyAuthCredentialsProvider:SE,_FieldPath:mt,_cast:Ut,_logWarn:li,_validateIsNotUsedTogether:R1,addDoc:qo,collection:he,connectFirestoreEmulator:C1,deleteDoc:os,doc:Z,ensureFirestoreConfigured:Ql,executeWrite:Zl,getDoc:Et,getDocs:Ke,getFirestore:A1,increment:Va,limit:yg,onSnapshot:Al,orderBy:Ns,query:Bt,serverTimestamp:xe,setDoc:wn,updateDoc:tt,where:fn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="firebasestorage.googleapis.com",W1="storageBucket",xP=2*60*1e3,vP=10*60*1e3,_P=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe extends ir{constructor(e,n,r=0){super(Wh(e),`Firebase Storage: ${n} (${Wh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pe||(Pe={}));function Wh(t){return"storage/"+t}function wg(){const t="An unknown error occurred, please check the error payload for server response.";return new qe(Pe.UNKNOWN,t)}function wP(t){return new qe(Pe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function EP(t){return new qe(Pe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function bP(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qe(Pe.UNAUTHENTICATED,t)}function NP(){return new qe(Pe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function TP(t){return new qe(Pe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function K1(){return new qe(Pe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function G1(){return new qe(Pe.CANCELED,"User canceled the upload/download.")}function IP(t){return new qe(Pe.INVALID_URL,"Invalid URL '"+t+"'.")}function kP(t){return new qe(Pe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function SP(){return new qe(Pe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+W1+"' property when initializing the app?")}function Q1(){return new qe(Pe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jP(){return new qe(Pe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function RP(){return new qe(Pe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function CP(t){return new qe(Pe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wp(t){return new qe(Pe.INVALID_ARGUMENT,t)}function X1(){return new qe(Pe.APP_DELETED,"The Firebase app was deleted.")}function AP(t){return new qe(Pe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function el(t,e){return new qe(Pe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ia(t){throw new qe(Pe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=un.makeFromUrl(e,n)}catch{return new un(e,"")}if(r.path==="")return r;throw kP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function d(T){T.path_=decodeURIComponent(T.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),C={bucket:1,path:3},R=n===H1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",E=new RegExp(`^https?://${R}/${s}/${k}`,"i"),x=[{regex:c,indices:u,postModify:i},{regex:w,indices:C,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let T=0;T<x.length;T++){const O=x[T],V=O.regex.exec(e);if(V){const b=V[O.indices.bucket];let y=V[O.indices.path];y||(y=""),r=new un(b,y),O.postModify(r);break}}if(r==null)throw IP(e);return r}}class PP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t,e,n){let r=1,s=null,i=null,a=!1,c=0;function u(){return c===2}let d=!1;function f(...k){d||(d=!0,e.apply(null,k))}function p(k){s=setTimeout(()=>{s=null,t(w,u())},k)}function g(){i&&clearTimeout(i)}function w(k,...E){if(d){g();return}if(k){g(),f.call(null,k,...E);return}if(u()||a){g(),f.call(null,k,...E);return}r<64&&(r*=2);let x;c===1?(c=2,x=0):x=(r+Math.random())*1e3,p(x)}let C=!1;function R(k){C||(C=!0,g(),!d&&(s!==null?(k||(c=2),clearTimeout(s),p(0)):k||(c=1)))}return p(0),i=setTimeout(()=>{a=!0,R(!0)},n),R}function OP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t){return t!==void 0}function VP(t){return typeof t=="function"}function MP(t){return typeof t=="object"&&!Array.isArray(t)}function Qd(t){return typeof t=="string"||t instanceof String}function Ox(t){return Eg()&&t instanceof Blob}function Eg(){return typeof Blob<"u"}function Lx(t,e,n,r){if(r<e)throw wp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw wp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Y1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Js;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Js||(Js={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n,r,s,i,a,c,u,d,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,C)=>{this.resolve_=w,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new qc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===Js.NO_ERROR,u=i.getStatus();if(!c||J1(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Js.ABORT;r(!1,new qc(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new qc(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());LP(u)?i(u):i()}catch(u){a(u)}else if(c!==null){const u=wg();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(s.canceled){const u=this.appDelete_?X1():G1();a(u)}else{const u=K1();a(u)}};this.canceled_?n(!1,new qc(!1,null,!0)):this.backoffId_=DP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function UP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function BP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $P(t,e){e&&(t["X-Firebase-GMPID"]=e)}function zP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qP(t,e,n,r,s,i,a=!0){const c=Y1(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return $P(d,e),UP(d,n),BP(d,i),zP(d,r),new FP(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WP(...t){const e=HP();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Eg())return new Blob(t);throw new qe(Pe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function KP(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t){if(typeof atob>"u")throw CP("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kh{constructor(e,n){this.data=e,this.contentType=n||null}}function QP(t,e){switch(t){case Xn.RAW:return new Kh(Z1(e));case Xn.BASE64:case Xn.BASE64URL:return new Kh(eb(t,e));case Xn.DATA_URL:return new Kh(YP(e),JP(e))}throw wg()}function Z1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function XP(t){let e;try{e=decodeURIComponent(t)}catch{throw el(Xn.DATA_URL,"Malformed data URL.")}return Z1(e)}function eb(t,e){switch(t){case Xn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw el(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Xn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw el(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=GP(e)}catch(s){throw s.message.includes("polyfill")?s:el(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class tb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw el(Xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=ZP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function YP(t){const e=new tb(t);return e.base64?eb(Xn.BASE64,e.rest):XP(e.rest)}function JP(t){return new tb(t).contentType}function ZP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){let r=0,s="";Ox(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ox(this.data_)){const r=this.data_,s=KP(r,e,n);return s===null?null:new mr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mr(r,!0)}}static getBlob(...e){if(Eg()){const n=e.map(r=>r instanceof mr?r.data_:r);return new mr(WP.apply(null,n))}else{const n=e.map(a=>Qd(a)?QP(Xn.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)s[i++]=a[c]}),new mr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t){let e;try{e=JSON.parse(t)}catch{return null}return MP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function t4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function rb(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t,e){return e}class Vt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||n4}}let Hc=null;function r4(t){return!Qd(t)||t.length<2?t:rb(t)}function bg(){if(Hc)return Hc;const t=[];t.push(new Vt("bucket")),t.push(new Vt("generation")),t.push(new Vt("metageneration")),t.push(new Vt("name","fullPath",!0));function e(i,a){return r4(a)}const n=new Vt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Vt("size");return s.xform=r,t.push(s),t.push(new Vt("timeCreated")),t.push(new Vt("updated")),t.push(new Vt("md5Hash",null,!0)),t.push(new Vt("cacheControl",null,!0)),t.push(new Vt("contentDisposition",null,!0)),t.push(new Vt("contentEncoding",null,!0)),t.push(new Vt("contentLanguage",null,!0)),t.push(new Vt("contentType",null,!0)),t.push(new Vt("metadata","customMetadata",!0)),Hc=t,Hc}function s4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new un(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function i4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return s4(r,t),r}function sb(t,e,n){const r=nb(e);return r===null?null:i4(t,r,n)}function o4(t,e,n,r){const s=nb(e);if(s===null||!Qd(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,p=t.fullPath,g="/b/"+a(f)+"/o/"+a(p),w=ec(g,n,r),C=Y1({alt:"media",token:d});return w+C})[0]}function ib(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Ho{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t){if(!t)throw wg()}function Ng(t,e){function n(r,s){const i=sb(t,s,e);return Tr(i!==null),i}return n}function a4(t,e){function n(r,s){const i=sb(t,s,e);return Tr(i!==null),o4(i,s,t.host,t._protocol)}return n}function tc(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=NP():s=bP():n.getStatus()===402?s=EP(t.bucket):n.getStatus()===403?s=TP(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ob(t){const e=tc(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=wP(t.path)),i.serverResponse=s.serverResponse,i}return n}function l4(t,e,n){const r=e.fullServerUrl(),s=ec(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new Ho(s,i,Ng(t,n),a);return c.errorHandler=ob(e),c}function c4(t,e,n){const r=e.fullServerUrl(),s=ec(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new Ho(s,i,a4(t,n),a);return c.errorHandler=ob(e),c}function u4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ab(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=u4(null,e)),r}function lb(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let x="";for(let T=0;T<2;T++)x=x+Math.random().toString().slice(2);return x}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const d=ab(e,r,s),f=ib(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=mr.getBlob(p,r,g);if(w===null)throw Q1();const C={name:d.fullPath},R=ec(i,t.host,t._protocol),k="POST",E=t.maxUploadRetryTime,v=new Ho(R,k,Ng(t,n),E);return v.urlParams=C,v.headers=a,v.body=w.uploadData(),v.errorHandler=tc(e),v}class ed{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Tg(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Tr(!1)}return Tr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function d4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a=ab(e,r,s),c={name:a.fullPath},u=ec(i,t.host,t._protocol),d="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},p=ib(a,n),g=t.maxUploadRetryTime;function w(R){Tg(R);let k;try{k=R.getResponseHeader("X-Goog-Upload-URL")}catch{Tr(!1)}return Tr(Qd(k)),k}const C=new Ho(u,d,w,g);return C.urlParams=c,C.headers=f,C.body=p,C.errorHandler=tc(e),C}function h4(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(d){const f=Tg(d,["active","final"]);let p=null;try{p=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Tr(!1)}p||Tr(!1);const g=Number(p);return Tr(!isNaN(g)),new ed(g,r.size(),f==="final")}const a="POST",c=t.maxUploadRetryTime,u=new Ho(n,a,i,c);return u.headers=s,u.errorHandler=tc(e),u}const Vx=256*1024;function f4(t,e,n,r,s,i,a,c){const u=new ed(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw jP();const d=u.total-u.current;let f=d;s>0&&(f=Math.min(f,s));const p=u.current,g=p+f;let w="";f===0?w="finalize":d===f?w="upload, finalize":w="upload";const C={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${u.current}`},R=r.slice(p,g);if(R===null)throw Q1();function k(T,O){const V=Tg(T,["active","final"]),b=u.current+f,y=r.size();let I;return V==="final"?I=Ng(e,i)(T,O):I=null,new ed(b,y,V==="final",I)}const E="POST",v=e.maxUploadRetryTime,x=new Ho(n,E,k,v);return x.headers=C,x.body=R.uploadData(),x.progressCallback=c||null,x.errorHandler=tc(t),x}const Wt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Gh(t){switch(t){case"running":case"pausing":case"canceling":return Wt.RUNNING;case"paused":return Wt.PAUSED;case"success":return Wt.SUCCESS;case"canceled":return Wt.CANCELED;case"error":return Wt.ERROR;default:return Wt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n,r){if(VP(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class m4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Js.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Js.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Js.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ia("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ia("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ia("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ia("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ia("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class g4 extends m4{initXhr(){this.xhr_.responseType="text"}}function qs(){return new g4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=bg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Pe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(J1(s.status,[]))if(i)s=K1();else{this.sleepTime=Math.max(this.sleepTime*2,_P),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Pe.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=d4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,qs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=h4(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,qs,n,r);this._request=i,i.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Vx*this._chunkMultiplier,n=new ed(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let a;try{a=f4(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(a,qs,s,i,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Vx*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=l4(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,qs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=lb(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,qs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=G1(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Gh(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new p4(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Gh(this._state)){case Wt.SUCCESS:zi(this._resolve.bind(null,this.snapshot))();break;case Wt.CANCELED:case Wt.ERROR:const n=this._reject;zi(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Gh(this._state)){case Wt.RUNNING:case Wt.PAUSED:e.next&&zi(e.next.bind(e,this.snapshot))();break;case Wt.SUCCESS:e.complete&&zi(e.complete.bind(e))();break;case Wt.CANCELED:case Wt.ERROR:e.error&&zi(e.error.bind(e,this._error))();break;default:e.error&&zi(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n){this._service=e,n instanceof un?this._location=n:this._location=un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new hi(e,n)}get root(){const e=new un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rb(this._location.path)}get storage(){return this._service}get parent(){const e=e4(this._location.path);if(e===null)return null;const n=new un(this._location.bucket,e);return new hi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw AP(e)}}function x4(t,e,n){t._throwIfRoot("uploadBytes");const r=lb(t.storage,t._location,bg(),new mr(e,!0),n);return t.storage.makeRequestWithTokens(r,qs).then(s=>({metadata:s,ref:t}))}function v4(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new y4(t,new mr(e),n)}function _4(t){t._throwIfRoot("getDownloadURL");const e=c4(t.storage,t._location,bg());return t.storage.makeRequestWithTokens(e,qs).then(n=>{if(n===null)throw RP();return n})}function w4(t,e){const n=t4(t._location.path,e),r=new un(t._location.bucket,n);return new hi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){return/^[A-Za-z]+:\/\//.test(t)}function b4(t,e){return new hi(t,e)}function cb(t,e){if(t instanceof Ig){const n=t;if(n._bucket==null)throw SP();const r=new hi(n,n._bucket);return e!=null?cb(r,e):r}else return e!==void 0?w4(t,e):t}function N4(t,e){if(e&&E4(e)){if(t instanceof Ig)return b4(t,e);throw wp("To use ref(service, url), the first argument must be a Storage instance.")}else return cb(t,e)}function Mx(t,e){const n=e==null?void 0:e[W1];return n==null?null:un.makeFromBucketSpec(n,t)}function T4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:jw(s,t.app.options.projectId))}class Ig{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=H1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xP,this._maxUploadRetryTime=vP,this._requests=new Set,s!=null?this._bucket=un.makeFromBucketSpec(s,this._host):this._bucket=Mx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=un.makeFromBucketSpec(this._url,e):this._bucket=Mx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Lx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Lx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new PP(X1());{const a=qP(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Fx="@firebase/storage",Ux="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="storage";function db(t,e,n){return t=Se(t),x4(t,e,n)}function hb(t,e,n){return t=Se(t),v4(t,e,n)}function Xd(t){return t=Se(t),_4(t)}function Yd(t,e){return t=Se(t),N4(t,e)}function Jd(t=Nd(),e){t=Se(t);const r=bd(t,ub).getImmediate({identifier:e}),s=Iw("storage");return s&&I4(r,...s),r}function I4(t,e,n,r={}){T4(t,e,n,r)}function k4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ig(n,r,s,e,gi)}function S4(){si(new _s(ub,k4,"PUBLIC").setMultipleInstances(!0)),Zn(Fx,Ux,""),Zn(Fx,Ux,"esm2017")}S4();const j4={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},an=Pw().length?Nd():Aw(j4),Fn=Pw().length>0?bR(an):nE(an,{persistence:[yE,dE]}),H=A1(an),R4=Jd(an),fb=j.createContext({user:null,role:null,loading:!0,logout:async()=>{}}),C4=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(null),[i,a]=j.useState(!0);j.useEffect(()=>{const u=XS(Fn,async d=>{if(n(d),d){const f=await Et(Z(H,"users",d.uid)),p=f.data(),g=f.exists()?p==null?void 0:p.role:null;if(s(g),g==="owner")try{const w=Z(H,"restaurants",d.uid);(await Et(w)).exists()||await wn(w,{name:(p==null?void 0:p.restaurantName)||(p==null?void 0:p.name)||" ",ownerId:d.uid,email:(p==null?void 0:p.email)||d.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(w){console.warn("    ",w)}}else s(null);a(!1)});return()=>u()},[]);const c=async()=>{await YS(Fn)};return o.jsx(fb.Provider,{value:{user:e,role:r,loading:i,logout:c},children:t})},xt=()=>j.useContext(fb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Bx=t=>{const e=P4(t);return e.charAt(0).toUpperCase()+e.slice(1)},pb=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),D4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...c},u)=>j.createElement("svg",{ref:u,...O4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:pb("lucide",s),...!i&&!D4(c)&&{"aria-hidden":"true"},...c},[...a.map(([d,f])=>j.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(t,e)=>{const n=j.forwardRef(({className:r,...s},i)=>j.createElement(L4,{ref:i,iconNode:e,className:pb(`lucide-${A4(Bx(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Bx(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ep=ee("arrow-left",V4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],mb=ee("arrow-right",M4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],U4=ee("briefcase",F4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],gb=ee("building-2",B4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Qh=ee("chart-column",$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],yb=ee("chef-hat",z4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],H4=ee("chevron-down",q4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],K4=ee("chevron-up",W4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xb=ee("circle-check-big",G4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],X4=ee("circle-check",Q4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],vb=ee("circle-x",Y4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],bp=ee("clipboard-list",J4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],eD=ee("clock",Z4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],_b=ee("code-xml",tD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],rD=ee("heart",nD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Np=ee("house",sD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],oD=ee("image",iD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$x=ee("info",aD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],cD=ee("key-round",lD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wb=ee("lock",uD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Eb=ee("log-in",dD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],bb=ee("mail",hD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],pD=ee("map-pin",fD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],gD=ee("menu",mD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M5 12h14",key:"1ays0h"}]],xD=ee("minus",yD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Xh=ee("package",vD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zx=ee("pen-line",_D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Nb=ee("phone",wD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kg=ee("plus",ED);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gr=ee("refresh-cw",bD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Tb=ee("save",ND);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ID=ee("server",TD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],SD=ee("settings",kD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ib=ee("shield",jD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],qx=ee("shopping-bag",RD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],kb=ee("shopping-cart",CD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],td=ee("sparkles",AD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Yh=ee("star",PD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Tp=ee("store",DD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Co=ee("trash-2",OD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Hx=ee("triangle-alert",LD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],nd=ee("truck",VD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],FD=ee("upload",MD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],rd=ee("user-plus",UD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fi=ee("user",BD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zD=ee("users",$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],HD=ee("utensils",qD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Sb=ee("wallet",WD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sd=ee("x",KD),Oe=({to:t,label:e,icon:n,onClick:r})=>{const{pathname:s}=Rs(),i=s===t;return o.jsxs(Te,{to:t,onClick:r,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(i?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20 backdrop-blur-sm"),children:[n,o.jsx("span",{children:e})]})},GD=()=>{const{user:t,role:e,logout:n}=xt(),[r,s]=j.useState(!1),i=Rs(),a=Or(),c=i.pathname==="/";return j.useEffect(()=>{s(!1)},[i.pathname]),j.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),o.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30",children:[o.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!c&&o.jsx("button",{onClick:()=>a(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"",children:o.jsx(mb,{className:"w-5 h-5"})}),o.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[o.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),o.jsx("span",{className:"text-lg sm:text-2xl",children:" "})]})]}),o.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[o.jsx(Oe,{to:"/restaurants",label:"",icon:o.jsx(Tp,{className:"w-4 h-4"})}),e==="customer"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/cart",label:" "}),o.jsx(Oe,{to:"/orders",label:""}),o.jsx(Oe,{to:"/profile",label:"",icon:o.jsx(fi,{className:"w-4 h-4"})})]}),e==="owner"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/owner",label:" "}),o.jsx(Oe,{to:"/owner/orders",label:" "}),o.jsx(Oe,{to:"/owner/courier-requests",label:""})]}),e==="courier"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/courier",label:" "}),o.jsx(Oe,{to:"/courier/hiring",label:""})]}),e==="admin"&&o.jsx(Oe,{to:"/admin",label:" "}),e==="developer"&&o.jsx(Oe,{to:"/developer",label:" "}),t?o.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:""}):o.jsx(Oe,{to:"/login",label:""})]}),o.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white/20 hover:bg-white/30 transition backdrop-blur-sm",onClick:()=>s(!r),children:r?o.jsx(sd,{className:"w-6 h-6 text-white"}):o.jsx(gD,{className:"w-6 h-6 text-white"})})]}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>s(!1)}),o.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] bg-gradient-to-b from-sky-500 to-sky-700 
        z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${r?"translate-x-0":"translate-x-full"}
      `,children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[o.jsx("span",{className:"text-white font-bold text-lg",children:""}),o.jsx("button",{onClick:()=>s(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:o.jsx(sd,{className:"w-5 h-5 text-white"})})]}),o.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[o.jsx(Oe,{to:"/restaurants",label:"",icon:o.jsx(Tp,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="customer"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/cart",label:"",icon:o.jsx(kb,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/orders",label:"",icon:o.jsx(Xh,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/profile",label:"",icon:o.jsx(fi,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="owner"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/owner",label:" ",icon:o.jsx(Np,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/owner/orders",label:" ",icon:o.jsx(Xh,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/owner/courier-requests",label:"",icon:o.jsx(nd,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="courier"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/courier",label:" ",icon:o.jsx(nd,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/courier/hiring",label:"",icon:o.jsx(Xh,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="admin"&&o.jsx(Oe,{to:"/admin",label:" ",icon:o.jsx(Ib,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="developer"&&o.jsx(Oe,{to:"/developer",label:" ",icon:o.jsx(_b,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx("div",{className:"h-px bg-white/20 my-2"}),t?o.jsx("button",{onClick:()=>{n(),s(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"  "}):o.jsx(Oe,{to:"/login",label:" ",icon:o.jsx(Np,{className:"w-5 h-5"}),onClick:()=>s(!1)})]})]})]})},jb=j.createContext(null),Vr=()=>{const t=j.useContext(jb);if(!t)throw new Error("useDialog must be used within DialogProvider");return t},QD=({children:t})=>{const[e,n]=j.useState({isOpen:!1,message:"",type:"confirm"}),r=j.useCallback(u=>new Promise(d=>{n({...u,isOpen:!0,resolve:d})}),[]),s=j.useCallback(u=>{e.resolve&&e.resolve(u),n(d=>({...d,isOpen:!1}))},[e.resolve]),i=j.useCallback(async()=>{e.onConfirm&&await e.onConfirm(),s(!0)},[e.onConfirm,s]),a=j.useCallback(()=>{e.onCancel&&e.onCancel(),s(!1)},[e.onCancel,s]),c=j.useMemo(()=>({confirm:(u,d={})=>r({message:u,type:"confirm",title:d.title||"",confirmText:d.confirmText||"",cancelText:d.cancelText||"",...d}),alert:(u,d={})=>r({message:u,type:"alert",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),success:(u,d={})=>r({message:u,type:"success",title:d.title||" ",confirmText:d.confirmText||"",...d}).then(()=>{}),error:(u,d={})=>r({message:u,type:"error",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),warning:(u,d={})=>r({message:u,type:"warning",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),info:(u,d={})=>r({message:u,type:"info",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{})}),[r]);return o.jsxs(jb.Provider,{value:c,children:[t,o.jsx(XD,{...e,onConfirm:i,onCancel:a})]})},XD=({isOpen:t,title:e,message:n,type:r="confirm",confirmText:s="",cancelText:i="",dangerous:a,onConfirm:c,onCancel:u})=>{if(!t)return null;const f={confirm:{icon:o.jsx($x,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:a?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:o.jsx(Hx,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:o.jsx(xb,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:o.jsx(vb,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:o.jsx(Hx,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:o.jsx($x,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[r],p=r==="confirm";return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:u}),o.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:g=>g.stopPropagation(),children:[o.jsxs("div",{className:"relative p-6 pb-0",children:[o.jsx("button",{onClick:u,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:o.jsx(sd,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:`w-16 h-16 rounded-full ${f.iconBg} ${f.iconColor} flex items-center justify-center`,children:f.icon})}),o.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:e})]}),o.jsx("div",{className:"p-6 pt-3",children:o.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),o.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${p?"flex-row-reverse":"justify-center"}`,children:[o.jsx("button",{onClick:c,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${f.buttonColor}`,children:s}),p&&o.jsx("button",{onClick:u,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:i})]})]})}),o.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},YD=()=>{const{user:t}=xt(),e=Or(),n=Vr(),r=async()=>{if(!(!t||!await n.confirm("     .     .",{title:"  ",dangerous:!0,confirmText:"  ",cancelText:""})))try{await os(Z(H,"users",t.uid)),await JS(Fn.currentUser),n.success("   "),e("/account-deleted")}catch(i){console.error("Error deleting account:",i),n.error("    .   .")}};return o.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),o.jsx("span",{className:"text-xl sm:text-2xl font-black",children:" "})]}),o.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["  ",o.jsx(rD,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"}),"    ",new Date().getFullYear()]}),o.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[o.jsxs(Te,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(Ib,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),o.jsxs(Te,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(_b,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),t&&o.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(Co,{className:"w-3 h-3 sm:w-4 sm:h-4"})," "]})]}),o.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),o.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"     "})]})})},JD=()=>o.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:o.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[o.jsx(td,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),o.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"            ! "}),o.jsx(td,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),ZD=()=>{const{user:t}=xt();return o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 text-center px-4 sm:px-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-64 sm:w-96 h-64 sm:h-96 bg-gradient-to-br from-sky-400/20 to-sky-300/10 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-gradient-to-tl from-sky-500/20 to-sky-400/10 rounded-full blur-3xl animate-pulse delay-1000"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] sm:w-[600px] h-[300px] sm:h-[600px] bg-gradient-radial from-sky-200/30 to-transparent rounded-full blur-3xl"}),o.jsx("div",{className:"hidden sm:block absolute top-20 left-20 text-sky-300 float",children:o.jsx(td,{className:"w-8 h-8"})}),o.jsx("div",{className:"hidden sm:block absolute top-40 right-32 text-sky-400 float delay-500",children:o.jsx(Yh,{className:"w-6 h-6 fill-current"})}),o.jsx("div",{className:"hidden sm:block absolute bottom-32 left-32 text-sky-300 float delay-1000",children:o.jsx(Yh,{className:"w-5 h-5 fill-current"})}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center max-w-3xl w-full",children:[o.jsxs("div",{className:"mb-6 sm:mb-8 relative",children:[o.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 bg-gradient-to-br from-sky-500 to-sky-600 rounded-[2rem] sm:rounded-[2.5rem] flex items-center justify-center shadow-2xl shadow-sky-300/50 glow",children:o.jsx("span",{className:"text-5xl sm:text-7xl drop-shadow-lg",children:""})}),o.jsx("div",{className:"absolute -top-1 -right-1 sm:-top-2 sm:-right-2 w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(td,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})})]}),o.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 mb-4 sm:mb-6 drop-shadow-sm",children:" "}),o.jsxs("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl text-sky-700/80 max-w-2xl mb-6 sm:mb-10 leading-relaxed font-medium px-2",children:["      ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"text-sky-500",children:"        "})," "]}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-4 mb-6 sm:mb-10 px-2",children:[o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[o.jsx(yb,{className:"w-4 h-4 sm:w-5 sm:h-5 text-sky-500"}),o.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:"  "})]}),o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[o.jsx(nd,{className:"w-4 h-4 sm:w-5 sm:h-5 text-sky-500"}),o.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:" "})]}),o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[o.jsx(Yh,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 fill-yellow-500"}),o.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:" "})]})]}),o.jsxs("div",{className:"relative mb-8 sm:mb-12",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-sky-400/30 to-sky-500/30 rounded-[1.5rem] sm:rounded-[2rem] blur-2xl scale-110"}),o.jsx("img",{src:"/landing.png",alt:"  ",className:"relative w-56 sm:w-72 md:w-80 lg:w-96 rounded-[1.5rem] sm:rounded-[2rem] shadow-2xl shadow-sky-200/50 border-2 sm:border-4 border-white object-cover hover:scale-105 transition-transform duration-500"})]}),t?o.jsxs(Te,{to:"/restaurants",className:"group flex items-center gap-2 sm:gap-3 px-8 sm:px-10 py-4 sm:py-5 rounded-full text-lg sm:text-xl font-bold text-white bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 shadow-2xl shadow-sky-300/50 hover:shadow-sky-400/60 hover:scale-105 transition-all duration-300",children:["  ",o.jsx(Ep,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform"})]}):o.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-5 w-full px-4",children:[o.jsxs(Te,{to:"/customer-login",className:"group flex items-center justify-center gap-2 sm:gap-3 w-full max-w-xs px-8 sm:px-12 py-4 sm:py-5 rounded-full text-lg sm:text-xl font-bold text-white bg-gradient-to-r from-green-500 via-green-400 to-green-500 shadow-2xl shadow-green-300/50 hover:shadow-green-400/60 hover:scale-105 transition-all duration-300",children:["   ",o.jsx(Ep,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform"})]}),o.jsx(Te,{to:"/login",className:"text-sky-600 font-semibold hover:text-sky-700 hover:underline transition text-sm sm:text-base",children:"       "}),o.jsxs("p",{className:"text-sky-600/80 text-base sm:text-lg",children:[" "," ",o.jsx(Te,{to:"/customer-login",className:"text-green-600 font-bold hover:text-green-700 hover:underline transition",children:"   "})]})]})]})]})},eO=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0);return j.useEffect(()=>{(async()=>{const s=await Ke(he(H,"restaurants"));e(s.docs.map(i=>({id:i.id,...i.data()}))),r(!1)})()},[]),n?o.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."}):o.jsxs("div",{className:"py-10",children:[o.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:"  "}),t.length===0&&o.jsx("div",{className:"text-center text-gray-400",children:"    "}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>o.jsxs(Te,{to:`/menu?restaurant=${s.id}`,className:"bg-gray-800 text-white rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center",children:[s.logoUrl?o.jsx("img",{src:s.logoUrl,alt:s.name,className:"w-28 h-28 object-cover rounded-full border-4 border-gray-700 mb-4"}):o.jsx("div",{className:"w-28 h-28 flex items-center justify-center bg-gray-600 rounded-full text-3xl mb-4",children:""}),o.jsx("h3",{className:"font-bold text-xl",children:s.name}),s.city&&o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.city})]},s.id))})]})},Wx="broast_cart";function Sg(){const[t,e]=j.useState(()=>{try{const c=localStorage.getItem(Wx);return c?JSON.parse(c):[]}catch{return[]}});j.useEffect(()=>{localStorage.setItem(Wx,JSON.stringify(t))},[t]);const n=(c,u=1)=>{e(d=>{const f=d.findIndex(p=>p.id===c.id);if(f>=0){const p=[...d];return p[f]={...p[f],qty:p[f].qty+u,ownerId:c.ownerId??p[f].ownerId},p}return[...d,{...c,qty:u}]})},r=c=>e(u=>u.filter(d=>d.id!==c)),s=(c,u)=>e(d=>d.map(f=>f.id===c?{...f,qty:u}:f)),i=()=>e([]),a=t.reduce((c,u)=>c+u.price*u.qty,0);return{items:t,add:n,remove:r,changeQty:s,clear:i,subtotal:a}}const Rb=j.createContext(null),vi=()=>{const t=j.useContext(Rb);if(!t)throw new Error("useToast must be used within ToastProvider");return t},tO=({children:t})=>{const[e,n]=j.useState([]),r=j.useCallback(a=>{n(c=>c.filter(u=>u.id!==a))},[]),s=j.useCallback((a,c,u)=>{const d=Math.random().toString(36).slice(2),f={id:d,message:a,type:c,title:u==null?void 0:u.title,duration:(u==null?void 0:u.duration)??3e3};n(p=>[...p,f]),f.duration&&f.duration>0&&setTimeout(()=>r(d),f.duration)},[r]),i=j.useMemo(()=>({show:(a,c)=>s(a,(c==null?void 0:c.type)??"info",c),success:(a,c)=>s(a,"success",c),error:(a,c)=>s(a,"error",c),info:(a,c)=>s(a,"info",c),warning:(a,c)=>s(a,"warning",c)}),[s]);return o.jsxs(Rb.Provider,{value:i,children:[t,o.jsx(sO,{items:e,onClose:r})]})},nO={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},rO={success:"",error:"",info:"",warning:""},sO=({items:t,onClose:e})=>(j.useEffect(()=>{},[]),o.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[o.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:t.map(n=>o.jsx("div",{className:`pointer-events-auto ${nO[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"text-xl leading-none",children:rO[n.type]}),o.jsxs("div",{className:"flex-1",children:[n.title&&o.jsx("div",{className:"font-bold",children:n.title}),o.jsx("div",{className:"text-sm",children:n.message})]}),o.jsx("button",{onClick:()=>e(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:""})]})},n.id))}),o.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),iO=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),{add:a,subtotal:c,items:u}=Sg(),{user:d,role:f}=xt(),p=vi(),[g]=y2(),w=g.get("restaurant");j.useEffect(()=>{(async()=>{let k;if(w){k=Bt(he(H,"menuItems"),fn("available","==",!0),fn("ownerId","==",w));const T=await Et(Z(H,"restaurants",w));T.exists()&&i(T.data().name)}else k=Bt(he(H,"menuItems"),fn("available","==",!0));const v=(await Ke(k)).docs.map(T=>({id:T.id,...T.data()})),x=await Promise.all(v.map(async T=>{if(!T.ownerId)return T;const O=await Et(Z(H,"restaurants",T.ownerId));return O.exists()?{...T,restaurant:O.data()}:T}));e(x),r(!1)})()},[w]);const C=k=>{var v;if(!k.ownerId){p.warning("    ",{title:""});return}const E=(v=u[0])==null?void 0:v.ownerId;if(E&&E!==k.ownerId){p.warning("           ",{title:""});return}a({id:k.id,name:k.name,price:k.price,ownerId:k.ownerId}),p.success("    ")};if(n)return o.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."});const R=d&&(f==="customer"||f==="admin"||f==="developer"||!f);return o.jsxs("div",{className:"py-10",children:[o.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:s?`  ${s}`:"  "}),w&&o.jsx("div",{className:"text-center mb-6",children:o.jsx(Te,{to:"/restaurants",className:"text-sky-400 hover:text-sky-300 underline",children:"   "})}),t.length===0&&o.jsx("div",{className:"text-center text-gray-400",children:"    "}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(k=>o.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[k.restaurant&&o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[k.restaurant.logoUrl?o.jsx("img",{src:k.restaurant.logoUrl,alt:k.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):o.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:""}),o.jsx("span",{className:"font-semibold",children:k.restaurant.name})]}),o.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:k.imageUrl?o.jsx("img",{src:k.imageUrl,alt:k.name,className:"w-full h-full object-cover rounded-xl"}):o.jsx("span",{className:"text-gray-400",children:" "})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:k.name}),k.desc&&o.jsx("p",{className:"text-sm text-gray-300 mt-1",children:k.desc})]}),o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[k.price.toFixed(2)," ."]}),R&&o.jsx("button",{onClick:()=>C(k),disabled:!k.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${k.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"  "})]})]},k.id))}),c>0&&R&&o.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-40",children:o.jsxs(Te,{to:"/checkout",className:"block w-full sm:w-auto text-center px-6 py-4 rounded-2xl bg-sky-600 text-white shadow-xl font-bold hover:bg-sky-700 transition text-base sm:text-lg",children:["    ",c.toFixed(2)," ."]})})]})},oO=()=>{const{items:t,subtotal:e,remove:n,clear:r,changeQty:s}=Sg();return t.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[o.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:o.jsx(qx,{className:"w-12 h-12 text-gray-400"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-2",children:" "}),o.jsx("p",{className:"text-gray-500 mb-6",children:"   !"}),o.jsxs(Te,{to:"/restaurants",className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-sky-600 transition",children:[o.jsx(Ep,{className:"w-5 h-5"})," "]})]}):o.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[o.jsx(qx,{className:"w-6 h-6 text-primary"})," ",o.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:t.length})]})}),o.jsx("div",{className:"space-y-3",children:t.map(i=>o.jsxs("div",{className:"flex items-center gap-3 bg-white text-gray-900 p-3 sm:p-4 rounded-xl shadow-sm border border-gray-100",children:[o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:i.name}),o.jsxs("p",{className:"text-primary font-bold text-sm",children:[i.price.toFixed(2)," ."]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("button",{onClick:()=>i.qty>1?s(i.id,i.qty-1):n(i.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:o.jsx(xD,{className:"w-4 h-4"})}),o.jsx("span",{className:"font-bold text-lg w-8 text-center",children:i.qty}),o.jsx("button",{onClick:()=>s(i.id,i.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:o.jsx(kg,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(i.price*i.qty).toFixed(2)," ."]}),o.jsx("button",{onClick:()=>n(i.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:o.jsx(Co,{className:"w-4 h-4"})})]})]},i.id))}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-gray-600",children:[o.jsx("span",{children:" "}),o.jsxs("span",{className:"font-bold",children:[e.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between text-gray-600",children:[o.jsx("span",{children:" "}),o.jsx("span",{className:"font-bold",children:"7.00 ."})]}),o.jsx("div",{className:"h-px bg-gray-200"}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-bold text-lg",children:""}),o.jsxs("span",{className:"font-bold text-xl text-primary",children:[(e+7).toFixed(2)," ."]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[o.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:[o.jsx(Co,{className:"w-5 h-5"})," "]}),o.jsx(Te,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition",children:"  "})]})]})},aO=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(!1),a=Or(),c=Vr(),u=async d=>{d.preventDefault(),i(!0);try{const p=(await KS(Fn,t,n)).user.uid,g=await Et(Z(H,"users",p));if(g.exists()){const w=g.data();console.log("  :",w),w.role==="owner"?a("/owner"):w.role==="admin"?a("/admin"):w.role==="developer"?a("/developer"):w.role==="courier"?a("/courier"):a("/")}else c.warning("   Auth       Firestore")}catch(f){c.error(f.message,{title:"   "})}finally{i(!1)}};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:o.jsx("span",{className:"text-4xl",children:"  "})}),o.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),o.jsx("p",{className:"text-sky-500 mt-1",children:" "})]}),o.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(bb,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"email",placeholder:"",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:t,onChange:d=>e(d.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(wb,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"password",placeholder:" ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:d=>r(d.target.value)})]}),o.jsx("button",{disabled:s,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50`,children:s?o.jsx(o.Fragment,{children:" ..."}):o.jsxs(o.Fragment,{children:[o.jsx(Eb,{className:"w-5 h-5"}),""]})})]}),o.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["  "," ",o.jsx(Te,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"  "})]}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[o.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"    "}),o.jsx(Te,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"   "})]})]})]})},lO=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(""),[a,c]=j.useState(""),[u,d]=j.useState(""),[f,p]=j.useState(!1),g=Or(),w=async R=>{if(R.preventDefault(),!u)return alert("  ");if(u==="owner"&&!a)return alert("  ");p(!0);try{const k=await au(Fn,t,n);await wn(Z(H,"users",k.user.uid),{name:s,email:t,role:u,restaurantName:u==="owner"?a:null}),u==="owner"&&await wn(Z(H,"restaurants",k.user.uid),{name:a||s||" ",ownerId:k.user.uid,email:t,phone:"",city:"",location:"",logoUrl:""},{merge:!0}),g("/")}catch(k){alert(k.message)}finally{p(!1)}},C=[{value:"customer",label:"",icon:zD,color:"sky"},{value:"courier",label:"",icon:nd,color:"emerald"},{value:"owner",label:" ",icon:yb,color:"orange"}];return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:o.jsx(rd,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"  "})]}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(fi,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",value:s,onChange:R=>i(R.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(bb,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",type:"email",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(wb,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:" ",type:"password",value:n,onChange:R=>r(R.target.value)})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:C.map(R=>{const k=R.icon,E=u===R.value;return o.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${E?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[o.jsx("input",{type:"radio",name:"role",value:R.value,className:"hidden",onChange:()=>d(R.value)}),o.jsx(k,{className:"w-6 h-6"}),o.jsx("span",{className:"text-sm font-bold",children:R.label})]},R.value)})}),u==="owner"&&o.jsxs("div",{className:"relative",children:[o.jsx(Tp,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:" ",value:a,onChange:R=>c(R.target.value)})]}),o.jsx("button",{disabled:f,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02]",children:f?" ...":o.jsxs(o.Fragment,{children:[o.jsx(rd,{className:"w-5 h-5"}),""]})})]}),o.jsxs("p",{className:"mt-6 text-center text-sky-600",children:[" "," ",o.jsx(Te,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"  "})]})]})]})},Kx=t=>{let e=t.replace(/\D/g,"");return e.startsWith("0")&&(e=e.substring(1)),e.startsWith("966")||(e="966"+e),"+"+e},cO=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState("phone"),[a,c]=j.useState(!1),[u,d]=j.useState(null),[f,p]=j.useState(0),g=j.useRef(null),w=j.useRef(null),C=Or(),R=Vr();j.useEffect(()=>(g.current&&!w.current&&(w.current=new F0(Fn,g.current,{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired"),w.current=null}})),()=>{w.current&&(w.current.clear(),w.current=null)}),[]),j.useEffect(()=>{if(f>0){const x=setTimeout(()=>p(f-1),1e3);return()=>clearTimeout(x)}},[f]);const k=async()=>{if(!t||t.length<9){R.warning("   ");return}const x=Kx(t);console.log("Sending OTP to:",x),c(!0);try{!w.current&&g.current&&(w.current=new F0(Fn,g.current,{size:"invisible"}));const T=await Ij(Fn,x,w.current);d(T),i("otp"),p(60),R.success("     ")}catch(T){console.error("OTP Error:",T),w.current&&(w.current.clear(),w.current=null),T.code==="auth/invalid-phone-number"?R.error("   "):T.code==="auth/too-many-requests"?R.error("   "):T.code==="auth/quota-exceeded"?R.error("     "):R.error(T.message||"  ")}finally{c(!1)}},E=async()=>{if(!n||n.length!==6){R.warning("     6 ");return}if(!u){R.error("    "),i("phone");return}c(!0);try{const x=await u.confirm(n),T=x.user.uid,O=x.user.phoneNumber,V=await Et(Z(H,"users",T));V.exists()?R.success(" ! "):(await wn(Z(H,"users",T),{phone:O,role:"customer",name:"",createdAt:xe()}),R.success("   ! "));const b=V.exists()?V.data():{role:"customer"};b.role==="owner"?C("/owner"):b.role==="admin"?C("/admin"):b.role==="developer"?C("/developer"):b.role==="courier"?C("/courier"):C("/")}catch(x){console.error("Verify Error:",x),x.code==="auth/invalid-verification-code"?R.error("   "):x.code==="auth/code-expired"?(R.error("    "),i("phone")):R.error(x.message||" ")}finally{c(!1)}},v=()=>{f>0||(i("phone"),r(""),d(null))};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsx("div",{ref:g,id:"recaptcha-container"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:o.jsx("span",{className:"text-4xl",children:""})}),o.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),o.jsx("p",{className:"text-sky-500 mt-1",children:s==="phone"?" ":"  "})]}),s==="phone"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Nb,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:t,onChange:x=>e(x.target.value.replace(/\D/g,"")),maxLength:10})]}),o.jsx("p",{className:"text-sm text-gray-500 text-center",children:"     SMS"}),o.jsx("button",{onClick:k,disabled:a||t.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:a?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(mb,{className:"w-5 h-5"}),"  "]})})]}),s==="otp"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("p",{className:"text-gray-600",children:"   "}),o.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:Kx(t)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(cD,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:x=>r(x.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),o.jsx("button",{onClick:E,disabled:a||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:a?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Eb,{className:"w-5 h-5"})," "]})}),o.jsx("div",{className:"text-center",children:f>0?o.jsxs("p",{className:"text-gray-500 text-sm",children:["   ",o.jsx("span",{className:"font-bold text-sky-600",children:f})," "]}):o.jsx("button",{onClick:v,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"    "})}),o.jsx("button",{onClick:()=>{i("phone"),r("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"   "})]}),o.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[o.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"   "}),o.jsx(Te,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"   "})]})]})]})};function uO(){return o.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:o.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"  -   "}),o.jsxs("p",{className:"mb-4",children:["   ",o.jsx("strong",{children:" "}),"          ."]}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1.  "}),o.jsx("p",{className:"mb-4",children:"                   .            ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2.  "}),o.jsx("p",{className:"mb-4",children:"               ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3.  "}),o.jsx("p",{className:"mb-4",children:"              .                 ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4.  "}),o.jsx("p",{className:"mb-4",children:"       (    )         ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5.  "}),o.jsxs("p",{className:"mb-4",children:["              .         :",o.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6.   "}),o.jsx("p",{className:"mb-4",children:"                  ."}),o.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["      ",new Date().toLocaleDateString("ar-SA"),"."]}),o.jsx("div",{className:"mt-8 text-center",children:o.jsx(Te,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"   "})})]})})}function dO(){return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"   "}),o.jsx("p",{className:"text-gray-600 mb-6",children:"          ."}),o.jsx(Te,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"   "})]})}const hO="modulepreload",fO=function(t){return"/"+t},Gx={},Qx=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=fO(u),u in Gx)return;Gx[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":hO,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,w)=>{p.addEventListener("load",g),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},Fe=({allow:t,children:e})=>{const{role:n,loading:r}=xt();return r?o.jsx("div",{className:"p-8 text-center",children:" ..."}):!n||!t.includes(n)?o.jsx(Nm,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:e})},Xx=1,Wc=.75,pO=()=>{const{items:t,subtotal:e,clear:n}=Sg(),{user:r}=xt(),s=Or(),i=Vr(),a=vi(),[c,u]=j.useState(""),[d,f]=j.useState(!1),[p,g]=j.useState(null),[w,C]=j.useState(null),R=7,k=e+R;j.useEffect(()=>{(async()=>{var b,y;if(t.length===0)return;let T=(b=t[0])==null?void 0:b.ownerId;if(!T&&((y=t[0])!=null&&y.id))try{const I=await Et(Z(H,"menuItems",t[0].id)),S=I.exists()?I.data():null;T=(S==null?void 0:S.ownerId)||null}catch(I){console.error("    :",I)}if(!T){g(null);return}const O=await Et(Z(H,"restaurants",T)),V=O.exists()?O.data():null;g({id:T,name:(V==null?void 0:V.name)||"",referredBy:V==null?void 0:V.referredBy,referrerType:V==null?void 0:V.referrerType})})()},[t]);const E=()=>{if(!navigator.geolocation){i.warning("    ");return}navigator.geolocation.getCurrentPosition(x=>{console.log("  :",x.coords),C({lat:x.coords.latitude,lng:x.coords.longitude}),a.success("    ")},x=>{console.error("   :",x),i.error("  .      .")},{enableHighAccuracy:!0})},v=async()=>{var I;if(!r)return;if(t.length===0){i.warning(" ");return}if(!c){i.warning(" ");return}if(!w){i.warning("   ");return}let x=p==null?void 0:p.id;if(!x&&((I=t[0])!=null&&I.id)){const S=await Et(Z(H,"menuItems",t[0].id)),P=S.exists()?S.data():null;x=(P==null?void 0:P.ownerId)||null}if(!x){i.error("   .    .");return}f(!0);const T=(p==null?void 0:p.referrerType)==="admin"&&(p==null?void 0:p.referredBy),O=t.reduce((S,P)=>S+P.qty,0),V=Xx*O,b=T?Wc*O:0,y=V+(T?0:Wc*O);if(await qo(he(H,"orders"),{customerId:r.uid,restaurantId:x,restaurantName:(p==null?void 0:p.name)||"",items:t.map(S=>({id:S.id,name:S.name,price:S.price,qty:S.qty,ownerId:S.ownerId??x})),subtotal:e,deliveryFee:R,total:k,status:"pending",address:c,location:w,createdAt:xe(),updatedAt:xe(),paymentMethod:"cod",platformFee:V,platformFeePerItem:Xx,adminCommission:b,adminCommissionPerItem:Wc,totalItemsCount:O,referredBy:(p==null?void 0:p.referredBy)||null}),T&&(p!=null&&p.referredBy)&&b>0)try{const S=Z(H,"wallets",p.referredBy);if((await Et(S)).exists())await tt(S,{balance:Va(b),totalEarnings:Va(b),updatedAt:xe()});else{const{setDoc:D}=await Qx(async()=>{const{setDoc:A}=await Promise.resolve().then(()=>Dx);return{setDoc:A}},void 0);await D(S,{balance:b,totalEarnings:b,totalWithdrawn:0,transactions:[],updatedAt:xe()})}console.log(`   ${b}    ${p.referredBy} (${O}   ${Wc} .)`)}catch(S){console.error("    :",S)}try{const S=Z(H,"wallets","app_earnings");if((await Et(S)).exists())await tt(S,{balance:Va(y),totalEarnings:Va(y),updatedAt:xe()});else{const{setDoc:D}=await Qx(async()=>{const{setDoc:A}=await Promise.resolve().then(()=>Dx);return{setDoc:A}},void 0);await D(S,{balance:y,totalEarnings:y,totalWithdrawn:0,transactions:[],updatedAt:xe()})}console.log(`   ${y}   `)}catch(S){console.error("    :",S)}n(),f(!1),s("/orders")};return o.jsx(Fe,{allow:["customer","admin"],children:o.jsxs("div",{className:"max-w-xl mx-auto bg-white rounded-2xl shadow p-6 text-gray-900",children:[o.jsx("h1",{className:"text-xl font-bold mb-4",children:" "}),o.jsx("div",{className:"border rounded-xl p-3 text-gray-800",children:t.map(x=>o.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[o.jsxs("span",{className:"text-sm",children:[x.name,"  ",x.qty]}),o.jsxs("span",{className:"font-semibold",children:[(x.price*x.qty).toFixed(2)," ."]})]},x.id))}),o.jsx("input",{className:"w-full border rounded-xl p-3 text-gray-900 placeholder-gray-500 mt-3",placeholder:" ",value:c,onChange:x=>u(x.target.value)}),o.jsx("button",{onClick:E,className:"w-full mt-3 rounded-xl p-3 bg-blue-600 text-white font-semibold hover:bg-blue-700",children:"   "}),w&&o.jsx("iframe",{title:" ",width:"100%",height:"250",style:{borderRadius:"12px",marginTop:"10px"},loading:"lazy",allowFullScreen:!0,src:`https://maps.google.com/maps?hl=ar&q=${w.lat},${w.lng}&z=15&output=embed`}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-gray-800 mt-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:""}),o.jsxs("span",{children:[e.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:" "}),o.jsxs("span",{children:[R.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex items-center justify-between font-bold text-lg mt-1 text-gray-900",children:[o.jsx("span",{children:""}),o.jsxs("span",{children:[k.toFixed(2)," ."]})]})]}),o.jsx("button",{disabled:d,onClick:v,className:"w-full rounded-xl p-3 bg-green-600 hover:bg-green-700 text-white font-bold mt-3",children:d?"...":"  (  )"})]})})},mO=()=>{const{user:t}=xt(),[e,n]=j.useState(null),[r,s]=j.useState([]),[i,a]=j.useState(null);j.useEffect(()=>{if(!t)return;n(null),a(null);const u=Bt(he(H,"orders"),fn("customerId","==",t.uid),Ns("createdAt","desc")),d=Al(u,f=>{s(f.docs.map(p=>({id:p.id,...p.data()}))),n(null)},async f=>{console.error("TrackOrders onSnapshot error:",f),n("   Composite Index  customerId + createdAt.     .");const p=Bt(he(H,"orders"),fn("customerId","==",t.uid)),w=(await Ke(p)).docs.map(k=>({id:k.id,...k.data()})),C=Bt(he(H,"orders"),Ns("createdAt","desc"),yg(5));let R=[];try{R=(await Ke(C)).docs.map(E=>{var x,T,O,V;const v=E.data();return{id:E.id,customerId:v.customerId,restaurantId:v.restaurantId,createdAt:((V=(O=(T=(x=v.createdAt)==null?void 0:x.toDate)==null?void 0:T.call(x))==null?void 0:O.toISOString)==null?void 0:V.call(O))??null}})}catch{}a({uid:t.uid,fallbackCount:w.length,sample:R}),s(w)});return()=>d()},[t]);const c=u=>({pending:" ",accepted:" ",preparing:" ",ready:" ",out_for_delivery:" ",delivered:" ",cancelled:""})[u]||u;return o.jsxs("div",{className:"space-y-3",children:[o.jsx("h1",{className:"text-xl font-bold",children:""}),e&&o.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[e,i&&o.jsxs("div",{className:"mt-1",children:[o.jsxs("div",{children:["UID: ",o.jsx("b",{children:i.uid})]}),o.jsxs("div",{children:["  : ",o.jsx("b",{children:i.fallbackCount})]}),Array.isArray(i.sample)&&i.sample.length>0&&o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"font-semibold",children:" ( 5):"}),i.sample.map(u=>o.jsxs("div",{className:"truncate",children:["#",u.id,"  customerId: ",String(u.customerId),"  restaurantId: ",String(u.restaurantId),"  createdAt: ",u.createdAt||""]},u.id))]})]})]}),r.map(u=>{var d,f,p;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"font-bold",children:[" #",u.id.slice(-6)]}),o.jsx("div",{className:"text-sm px-3 py-1 rounded-full bg-gray-900 text-white",children:c(u.status)})]}),u.restaurantName&&o.jsxs("div",{className:"mt-1 text-yellow-600 font-semibold",children:[": ",String(u.restaurantName)]}),o.jsx("div",{className:"mt-2 text-sm text-gray-700",children:(d=u.items)==null?void 0:d.map(g=>`${g.name}${g.qty}`).join("  ")}),o.jsxs("div",{className:"mt-2 font-bold",children:[": ",(p=(f=u.total)==null?void 0:f.toFixed)==null?void 0:p.call(f,2)," ."]})]},u.id)}),r.length===0&&!e&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})},gO=()=>{const{user:t,role:e}=xt(),n=Vr(),[r,s]=j.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[i,a]=j.useState(!0),[c,u]=j.useState(!1);j.useEffect(()=>{if(!t)return;(async()=>{const g=await Et(Z(H,"users",t.uid));if(g.exists()){const w=g.data();s({name:w.name||"",phone:w.phone||t.phoneNumber||"",city:w.city||"",address:w.address||"",restaurantName:w.restaurantName||""})}a(!1)})()},[t]);const d=async p=>{if(p.preventDefault(),!!t){u(!0);try{await tt(Z(H,"users",t.uid),{name:r.name,phone:r.phone,city:r.city,address:r.address,...e==="owner"&&{restaurantName:r.restaurantName}}),n.success("   ! ")}catch{n.error("   ")}finally{u(!1)}}};if(i)return o.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[o.jsx(gr,{className:"w-6 h-6 animate-spin ml-2"}),"  ..."]});const f=()=>e==="owner"?"  ":e==="courier"?"  ":e==="admin"?"  ":" ";return o.jsx("div",{className:"max-w-md mx-auto py-8 px-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center",children:o.jsx(fi,{className:"w-6 h-6 text-sky-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-800",children:f()}),o.jsx("p",{className:"text-sm text-gray-500",children:(t==null?void 0:t.email)||(t==null?void 0:t.phoneNumber)})]})]}),o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(fi,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:r.name,onChange:p=>s({...r,name:p.target.value})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(Nb,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:r.phone,onChange:p=>s({...r,phone:p.target.value}),dir:"ltr"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(gb,{className:"w-4 h-4 inline ml-1"}),""]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:": ",value:r.city,onChange:p=>s({...r,city:p.target.value})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(pD,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"     ...",value:r.address,onChange:p=>s({...r,address:p.target.value})})]}),e==="owner"&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(Np,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:r.restaurantName,onChange:p=>s({...r,restaurantName:p.target.value})})]}),o.jsx("button",{type:"submit",disabled:c,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:c?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Tb,{className:"w-5 h-5"})," "]})})]}),o.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[o.jsx("p",{children:"      "}),e==="customer"&&o.jsx("p",{className:"mt-1",children:"    "})]})]})})},yO=()=>{const t=[{to:"/owner/menu",title:" ",desc:"     .",icon:o.jsx(HD,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:" ",desc:"     .",icon:o.jsx(bp,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"  ",desc:"     .",icon:o.jsx(SD,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>o.jsxs(Te,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,o.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),o.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},xO=({kind:t,message:e,onClose:n})=>{const r=t==="success"?"bg-green-600":t==="error"?"bg-rose-600":t==="warning"?"bg-amber-500":"bg-slate-800";return j.useEffect(()=>{const s=setTimeout(n,2500);return()=>clearTimeout(s)},[n]),o.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${r}`,children:e})},Yx=()=>({name:"",desc:"",price:0,available:!0,file:null});async function vO(t,e=900,n=.8){try{const r=await createImageBitmap(t),s=Math.min(1,e/r.width),i=Math.round(r.width*s),a=Math.round(r.height*s),c=document.createElement("canvas");c.width=i,c.height=a,c.getContext("2d").drawImage(r,0,0,i,a);const d=t.type.includes("png")?"image/png":"image/jpeg";return await new Promise(p=>c.toBlob(g=>p(g),d,n))}catch{return t}}const _O=()=>{const{user:t}=xt(),e=Vr(),[n,r]=j.useState([]),[s,i]=j.useState(!0),[a,c]=j.useState(Yx()),[u,d]=j.useState(!1),[f,p]=j.useState(null),g=(x,T)=>p({kind:x,message:T}),w=Jd(an),C=j.useRef(null),R=async()=>{if(!t)return;i(!0);const x=Bt(he(H,"menuItems"),fn("ownerId","==",t.uid)),T=await Ke(x);r(T.docs.map(O=>({id:O.id,...O.data()}))),i(!1)};j.useEffect(()=>{R()},[t]);const k=async x=>{if(x.preventDefault(),!t){g("warning","    ");return}const T=Number(a.price||0);if(!a.name.trim()){g("warning","   ");return}if(!Number.isFinite(T)||T<=0){g("warning","   ");return}d(!0);const O="temp_"+Date.now(),V=a.file?URL.createObjectURL(a.file):void 0,b={_tempId:O,_optimistic:!0,_progress:a.file?1:100,name:a.name,desc:a.desc||"",price:T,imageUrl:V,available:a.available??!0,ownerId:t.uid};r(y=>[b,...y]);try{let y;if(a.file){const P=await vO(a.file),D=a.file.name.replace(/\s+/g,"_").slice(-60),A=`menuImages/${t.uid}_${Date.now()}_${D}`,De=Yd(w,A),ct=hb(De,P,{contentType:a.file.type||"image/jpeg"});await new Promise((qt,ut)=>{ct.on("state_changed",q=>{const J=Math.round(q.bytesTransferred/q.totalBytes*100);r(te=>te.map(ve=>ve._tempId===O?{...ve,_progress:J}:ve))},ut,async()=>{const q=await Xd(ct.snapshot.ref);y=`${q}${q.includes("?")?"&":"?"}v=${Date.now()}`,qt()})})}const I={name:b.name,desc:b.desc,price:T,imageUrl:y||"",available:b.available,ownerId:t.uid,...b.categoryId?{categoryId:b.categoryId}:{}},S=await qo(he(H,"menuItems"),I);r(P=>P.map(D=>D._tempId===O?{...D,id:S.id,imageUrl:y||D.imageUrl,_optimistic:!1,_progress:100}:D)),g("success","    ")}catch(y){r(I=>I.filter(S=>S._tempId!==O)),g("error",`   : ${(y==null?void 0:y.message)||y}`)}finally{d(!1),c(Yx()),C.current&&(C.current.value=""),V&&URL.revokeObjectURL(V)}},E=async(x,T)=>{if(x){r(O=>O.map(V=>V.id===x?{...V,available:!T}:V));try{await tt(Z(H,"menuItems",x),{available:!T}),g("success","  ")}catch{r(O=>O.map(V=>V.id===x?{...V,available:!!T}:V)),g("error","  .  .")}}},v=async x=>{if(!x||!await e.confirm("       ",{dangerous:!0,title:" "}))return;const O=n;r(V=>V.filter(b=>b.id!==x));try{await os(Z(H,"menuItems",x)),g("success"," ")}catch{r(O),g("error","  .  .")}};return s?o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[o.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),o.jsx("div",{className:"space-y-3",children:[1,2,3].map(x=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},x))})]}):o.jsxs(o.Fragment,{children:[f&&o.jsx(xO,{kind:f.kind,message:f.message,onClose:()=>p(null)}),o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("form",{onSubmit:k,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[o.jsx("h2",{className:"text-lg font-bold",children:" "}),o.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:a.name,onChange:x=>c({...a,name:x.target.value})}),o.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:a.desc,onChange:x=>c({...a,desc:x.target.value})}),o.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(a.price)?a.price:0,onChange:x=>c({...a,price:Number(x.target.value)})}),o.jsx("input",{ref:C,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:x=>{var T;return c({...a,file:((T=x.target.files)==null?void 0:T[0])||null})}}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:a.available,onChange:x=>c({...a,available:x.target.checked})}),""]}),o.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:u,children:u?" ":""})]}),o.jsxs("div",{className:"space-y-3",children:[n.map(x=>{var T,O;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:x.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:V=>{V.currentTarget.style.display="none"}}),x._optimistic&&o.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:o.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:o.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${x._progress||1}%`}})})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold",children:x.name}),x.desc&&o.jsx("div",{className:"text-sm text-gray-600",children:x.desc}),o.jsxs("div",{className:"font-semibold mt-1",children:[(O=(T=x.price)==null?void 0:T.toFixed)==null?void 0:O.call(T,2)," ."]}),x._optimistic&&o.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" "})]}),o.jsx("button",{onClick:()=>E(x.id,x.available),disabled:!!x._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:x.available?"":""}),o.jsx("button",{onClick:()=>v(x.id),disabled:!!x._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:""})]},x.id||x._tempId)}),n.length===0&&o.jsx("div",{className:"text-gray-600",children:"   ."})]})]})]})},Jx=t=>({pending:"  ",accepted:"  ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "})[t]||t,wO=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},EO=()=>{const{user:t}=xt(),[e,n]=j.useState([]),[r,s]=j.useState(null),i=j.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);j.useEffect(()=>{if(!i)return;s(null);const c=Al(he(H,"orders"),u=>{const f=u.docs.map(p=>({id:p.id,...p.data()})).filter(p=>{var C,R;const g=p.restaurantId===i,w=((R=(C=p==null?void 0:p.items)==null?void 0:C[0])==null?void 0:R.ownerId)===i;return g||w});f.sort((p,g)=>{var R,k,E,v;const w=((k=(R=p.createdAt)==null?void 0:R.toMillis)==null?void 0:k.call(R))??0;return(((v=(E=g.createdAt)==null?void 0:E.toMillis)==null?void 0:v.call(E))??0)-w}),n(f),s(null)},u=>{console.error("Firestore error:",u),s("    .")});return()=>c()},[i]);const a=async(c,u)=>{await tt(Z(H,"orders",c),{status:u,updatedAt:xe()})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"  "}),r&&o.jsx("div",{className:"text-red-500 text-sm mb-2",children:r}),e.map(c=>{var u,d,f;return o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[o.jsxs("div",{className:"font-bold text-lg",children:[" #",c.id.slice(-6),o.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(u=c.items)==null?void 0:u.map(p=>`${p.name}${p.qty}`).join("  ")})]}),o.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(f=(d=c.total)==null?void 0:d.toFixed)==null?void 0:f.call(d,2)," ."]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-semibold",children:":"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${wO(c.status)}`,children:Jx(c.status||"pending")})]}),o.jsxs("div",{className:"text-sm text-gray-700",children:[o.jsx("span",{className:"font-semibold",children:":"})," ",c.address]}),c.location&&o.jsxs("div",{className:"mt-3",children:[o.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"  :"}),o.jsx("iframe",{title:`map-${c.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${c.location.lat},${c.location.lng}&hl=ar&z=15&output=embed`})]}),o.jsx("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(p=>o.jsx("button",{onClick:()=>a(c.id,p),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gray-100 hover:bg-gray-200 transition",children:Jx(p)},p))})]},c.id)}),e.length===0&&!r&&o.jsx("div",{className:"text-gray-400 text-center text-lg",children:"    ."})]})},bO=()=>{const{user:t}=xt(),e=vi(),[n,r]=j.useState({name:"",phone:"",city:"",location:"",logoUrl:""}),[s,i]=j.useState(null),[a,c]=j.useState(""),[u,d]=j.useState(!0),[f,p]=j.useState(!1),g=j.useMemo(()=>!f&&!!t,[f,t]);j.useEffect(()=>{t&&(async()=>{try{const E=await Et(Z(H,"restaurants",t.uid));if(E.exists()){const v=E.data();r({name:v.name??"",phone:v.phone??"",city:v.city??"",location:v.location??"",logoUrl:v.logoUrl??""})}}catch{e.error("   ")}finally{d(!1)}})()},[t,e]),j.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]);const w=E=>{const{name:v,value:x}=E.target;r(T=>({...T,[v]:x}))},C=E=>{var x;const v=((x=E.target.files)==null?void 0:x[0])||null;if(i(v),v){const T=URL.createObjectURL(v);c(T)}else c("")},R=async()=>{if(!t||!s)return;if(!/^image\//.test(s.type)){e.warning("   ");return}const v=3*1024*1024;if(s.size>v){e.warning("        3MB");return}const x=s.name.replace(/\s+/g,"_"),T=`restaurants/${t.uid}/logo_${Date.now()}_${x}`,O=Yd(R4,T),V={contentType:s.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await db(O,s,V);const b=await Xd(O);return`${b}${b.includes("?")?"&":"?"}v=${Date.now()}`},k=async E=>{if(E.preventDefault(),!t){e.warning("    ");return}if(!n.name.trim()){e.warning("  ");return}p(!0);try{let v=n.logoUrl;if(s){e.info("    ");const x=await R();x&&(v=x)}await wn(Z(H,"restaurants",t.uid),{...n,logoUrl:v},{merge:!0}),a&&URL.revokeObjectURL(a),c(""),i(null),e.success("    ",{title:" "})}catch(v){e.error(` : ${(v==null?void 0:v.message)||"  "}`)}finally{p(!1)}};return u?o.jsx("div",{className:"p-6 text-center",children:" "}):o.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[o.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"  "}),o.jsxs("form",{onSubmit:k,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block font-semibold",children:" "}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:a||n.logoUrl?o.jsx("img",{src:a||n.logoUrl,className:"w-full h-full object-cover",onError:E=>E.currentTarget.style.display="none",alt:"logo"}):null}),o.jsx("input",{type:"file",accept:"image/*",onChange:C})]}),s&&o.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",o.jsx("span",{className:"font-semibold",children:s.name})]})]}),o.jsx("input",{name:"name",placeholder:" ",value:n.name,onChange:w,className:"w-full border p-3 rounded-xl"}),o.jsx("input",{name:"phone",placeholder:" ",value:n.phone,onChange:w,className:"w-full border p-3 rounded-xl"}),o.jsx("input",{name:"city",placeholder:"",value:n.city,onChange:w,className:"w-full border p-3 rounded-xl"}),o.jsx("input",{name:"location",placeholder:"",value:n.location,onChange:w,className:"w-full border p-3 rounded-xl"}),o.jsx("button",{type:"submit",disabled:!g,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:f?" ":""})]})]})},NO=()=>{const{user:t}=xt(),[e,n]=j.useState([]),[r,s]=j.useState(!0);j.useEffect(()=>{t&&(async()=>{const a=Bt(he(H,"hiringRequests"),fn("restaurantId","==",t.uid)),c=await Ke(a);n(c.docs.map(u=>({id:u.id,...u.data()}))),s(!1)})()},[t]);const i=async(a,c)=>{await tt(Z(H,"hiringRequests",a),{status:c}),n(u=>u.map(d=>d.id===a?{...d,status:c}:d))};return r?o.jsx("div",{className:"text-center py-10",children:" ..."}):o.jsxs("div",{className:"py-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-yellow-400 text-center mb-6",children:" "}),e.length===0?o.jsx("div",{className:"text-gray-400 text-center",children:"  "}):o.jsx("div",{className:"space-y-3",children:e.map(a=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:a.courierName}),o.jsx("div",{className:"text-sm text-gray-600",children:a.status==="pending"?" ":a.status})]}),a.status==="pending"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>i(a.id,"accepted"),className:"px-3 py-1 rounded bg-green-500 text-white",children:""}),o.jsx("button",{onClick:()=>i(a.id,"rejected"),className:"px-3 py-1 rounded bg-red-500 text-white",children:""})]})]},a.id))})]})},TO=()=>{const{user:t}=xt(),[e,n]=j.useState([]),[r,s]=j.useState([]);j.useEffect(()=>{const c=Bt(he(H,"orders"),fn("status","in",["ready"]),Ns("createdAt","desc")),u=Al(c,p=>n(p.docs.map(g=>({id:g.id,...g.data()})))),d=Bt(he(H,"orders"),fn("courierId","==",(t==null?void 0:t.uid)||""),Ns("createdAt","desc")),f=Al(d,p=>s(p.docs.map(g=>({id:g.id,...g.data()}))));return()=>{u(),f()}},[t==null?void 0:t.uid]);const i=async c=>{t&&await tt(Z(H,"orders",c),{courierId:t.uid,status:"out_for_delivery",updatedAt:xe()})},a=async c=>{await tt(Z(H,"orders",c),{status:"delivered",updatedAt:xe()})};return o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold mb-3",children:"  "}),o.jsxs("div",{className:"space-y-3",children:[e.map(c=>{var u,d;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"font-bold",children:["#",c.id.slice(-6),"  ",(d=(u=c.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ."]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[": ",c.address]}),o.jsx("button",{onClick:()=>i(c.id),className:"mt-2 px-3 py-2 rounded-xl bg-gray-900 text-white text-sm",children:" "})]},c.id)}),e.length===0&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold mb-3",children:""}),o.jsxs("div",{className:"space-y-3",children:[r.map(c=>{var u,d;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"font-bold",children:["#",c.id.slice(-6),"  ",(d=(u=c.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ."]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[": ",c.address]}),o.jsx("button",{onClick:()=>a(c.id),className:"mt-2 px-3 py-2 rounded-xl bg-green-600 text-white text-sm",children:" "})]},c.id)}),r.length===0&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})]})]})},IO=()=>{const{user:t}=xt(),e=Vr(),[n,r]=j.useState([]),[s,i]=j.useState({}),[a,c]=j.useState(!0),[u,d]=j.useState(null);j.useEffect(()=>{if(!t)return;(async()=>{const w=(await Ke(he(H,"restaurants"))).docs.map(E=>({id:E.id,...E.data()}));r(w);const C=Bt(he(H,"hiringRequests"),fn("courierId","==",t.uid)),R=await Ke(C),k={};R.docs.forEach(E=>{const v=E.data();k[v.restaurantId]={restaurantId:v.restaurantId,status:v.status}}),i(k),c(!1)})()},[t]);const f=async p=>{if(!t){e.warning("  ");return}d(p.id),await qo(he(H,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"",restaurantId:p.id,restaurantName:p.name,status:"pending",createdAt:xe()}),i(g=>({...g,[p.id]:{restaurantId:p.id,status:"pending"}})),d(null)};return a?o.jsx("div",{className:"text-center py-10 text-gray-300",children:"  ..."}):o.jsxs("div",{className:"py-8",children:[o.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[o.jsx(U4,{className:"w-7 h-7 text-yellow-400"})," "]}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(p=>{const g=s[p.id];return o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[p.logoUrl?o.jsx("img",{src:p.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):o.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:""}),o.jsx("h3",{className:"font-bold text-lg mb-2",children:p.name}),g?o.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${g.status==="pending"?"bg-gray-500 text-white":g.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[g.status==="pending"&&o.jsx(eD,{className:"w-4 h-4"}),g.status==="accepted"&&o.jsx(X4,{className:"w-4 h-4"}),g.status==="rejected"&&o.jsx(vb,{className:"w-4 h-4"}),g.status==="pending"?" ":g.status==="accepted"?"  ":" "]}):o.jsx("button",{disabled:u===p.id,onClick:()=>f(p),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:u===p.id?"  ...":"  "})]},p.id)})})]})},kO=()=>{var v,x;const{user:t,role:e}=xt(),n=vi(),[r,s]=j.useState("dashboard"),[i,a]=j.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[c,u]=j.useState(0),[d,f]=j.useState(!0),[p,g]=j.useState(null),[w,C]=j.useState([]),[R,k]=j.useState("all");j.useEffect(()=>{t&&(async()=>{try{const O=(await Ke(he(H,"restaurants"))).size,b=(await Ke(he(H,"orders"))).docs.map(P=>({id:P.id,...P.data()})),y=b.length,I=b.filter(P=>P.status==="pending").length,S=b.reduce((P,D)=>P+(D.deliveryFee||0),0);try{const D=(await Et(Z(H,"wallets",t.uid))).data();u((D==null?void 0:D.balance)||0)}catch{u(0)}try{const P=Bt(he(H,"tasks"),fn("assignedTo","==",t.uid)),A=(await Ke(P)).docs.map(De=>({id:De.id,...De.data()}));C(A.sort((De,ct)=>{var qt,ut;return(((qt=ct.createdAt)==null?void 0:qt.seconds)||0)-(((ut=De.createdAt)==null?void 0:ut.seconds)||0)}))}catch(P){console.error("   :",P)}a({totalRestaurants:O,totalOrders:y,totalEarnings:S,pendingOrders:I})}catch(T){console.error("   :",T)}finally{f(!1)}})()},[t]);const E=async(T,O)=>{try{const V={status:O,updatedAt:xe()};O==="completed"&&(V.completedAt=xe()),await tt(Z(H,"tasks",T),V),C(b=>b.map(y=>y.id===T?{...y,status:O}:y)),n.success(O==="in_progress"?"  ":O==="completed"?"   ! ":"  ")}catch{n.error("   ")}};return j.useEffect(()=>{t&&(async()=>{try{const T=await Et(Z(H,"users",t.uid));T.exists()&&g({uid:T.id,...T.data()})}catch(T){console.error("    :",T)}})()},[t]),d?o.jsx(Fe,{allow:["admin"],children:o.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:" ..."})}):o.jsx(Fe,{allow:["admin"],children:o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"  "}),o.jsx("p",{className:"text-gray-600 mt-2",children:"   ! "})]}),o.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[o.jsxs("button",{onClick:()=>s("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(Qh,{className:"w-5 h-5"})," "]}),o.jsxs("button",{onClick:()=>s("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(fi,{className:"w-5 h-5"}),""]}),o.jsxs("button",{onClick:()=>s("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${r==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(bp,{className:"w-5 h-5"}),"",w.filter(T=>T.status==="pending"||T.status==="in_progress").length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:w.filter(T=>T.status==="pending"||T.status==="in_progress").length})]})]}),r==="profile"&&o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[o.jsx(fi,{className:"w-6 h-6"}),""]}),p?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((v=p.name)==null?void 0:v.charAt(0))||((x=p.email)==null?void 0:x.charAt(0))||""}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:p.name||" "}),o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:" "})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:p.email})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),o.jsx("p",{className:"font-semibold text-gray-900",children:e==="admin"?"":e})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:p.uid})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[c.toFixed(2)," ."]})]})]})]}),o.jsx(Te,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"   "})]}):o.jsx("div",{className:"text-center py-8 text-gray-600",children:" ..."})]}),r==="tasks"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[o.jsx(bp,{className:"w-6 h-6"})," "]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(T=>o.jsxs("button",{onClick:()=>k(T),className:`px-4 py-2 rounded-xl font-semibold transition ${R===T?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[T==="all"&&" ",T==="pending"&&"  ",T==="in_progress"&&"  ",T==="completed"&&" "]},T))}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:w.filter(T=>T.status==="pending").length}),o.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w.filter(T=>T.status==="in_progress").length}),o.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),o.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:w.filter(T=>T.status==="completed").length}),o.jsx("p",{className:"text-sm text-green-700",children:""})]})]}),w.filter(T=>R==="all"||T.status===R).length===0?o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx("p",{className:"text-5xl mb-4",children:""}),o.jsxs("p",{className:"text-lg",children:["   ",R!=="all"&&"  "]}),o.jsx("p",{className:"text-sm mt-2",children:"      "})]}):o.jsx("div",{className:"space-y-4",children:w.filter(T=>R==="all"||T.status===R).map(T=>{var O,V,b;return o.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${T.status==="completed"?"bg-green-50 border-green-200":T.status==="in_progress"?"bg-blue-50 border-blue-200":T.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${T.priority==="high"?"bg-red-100 text-red-700":T.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:T.priority==="high"?" ":T.priority==="medium"?" ":" "}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${T.status==="pending"?"bg-yellow-100 text-yellow-700":T.status==="in_progress"?"bg-blue-100 text-blue-700":T.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[T.status==="pending"&&"  ",T.status==="in_progress"&&"  ",T.status==="completed"&&" ",T.status==="cancelled"&&" "]})]}),o.jsx("h3",{className:"font-bold text-lg text-gray-800",children:T.title}),T.description&&o.jsx("p",{className:"text-gray-600 mt-1",children:T.description}),o.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[T.dueDate&&o.jsxs("span",{className:new Date(T.dueDate)<new Date&&T.status!=="completed"?"text-red-600 font-semibold":"",children:[" ",new Date(T.dueDate).toLocaleDateString("ar-SA"),new Date(T.dueDate)<new Date&&T.status!=="completed"&&" (!)"]}),o.jsxs("span",{children:[" ",((b=(V=(O=T.createdAt)==null?void 0:O.toDate)==null?void 0:V.call(O))==null?void 0:b.toLocaleDateString("ar-SA"))||" "]})]}),T.notes&&o.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:[" ",T.notes]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[T.status==="pending"&&o.jsx("button",{onClick:()=>E(T.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:" "}),T.status==="in_progress"&&o.jsxs("button",{onClick:()=>E(T.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(xb,{className:"w-4 h-4"}),""]}),T.status==="completed"&&o.jsx("span",{className:"text-green-600 font-semibold text-center",children:"  "})]})]})},T.id)})})]})}),r==="dashboard"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-90",children:" "}),o.jsxs("h2",{className:"text-3xl font-bold",children:[c.toFixed(2)," ."]}),o.jsx("p",{className:"text-sm opacity-75 mt-2",children:"   50       "})]}),o.jsx(Sb,{className:"w-16 h-16 opacity-80"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:i.totalRestaurants})]}),o.jsx(gb,{className:"w-12 h-12 text-primary opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:i.totalOrders})]}),o.jsx(kb,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:i.pendingOrders})]}),o.jsx(Qh,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:i.totalEarnings.toFixed(2)})]}),o.jsx(Qh,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"   "}),o.jsx(Te,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"     "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),o.jsx(Te,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:""}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"       "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),o.jsx(Te,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:" "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:[" : ",c.toFixed(2)," ."]}),o.jsx(Te,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]})]}),o.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 p-6 rounded-lg",children:[o.jsx("h4",{className:"font-bold text-sky-900 mb-2",children:"  :"}),o.jsxs("ul",{className:"text-sky-800 text-sm space-y-1",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:"50 "}),"         "]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"1 "}),"     (     )"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"1.5 "}),"       "]}),o.jsx("li",{children:"        "})]})]})]})]})})},SO=()=>{const{user:t,role:e}=xt(),n=vi(),r=Vr(),[s,i]=j.useState([]),[a,c]=j.useState(!0),[u,d]=j.useState(!1),[f,p]=j.useState(!1),[g,w]=j.useState(0),C=j.useRef(null),R=Jd(an),[k,E]=j.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});j.useEffect(()=>{v()},[]);const v=async()=>{try{const V=(await Ke(he(H,"restaurants"))).docs.map(b=>({id:b.id,...b.data()}));i(V)}catch(O){n.error("   "),console.error(O)}finally{c(!1)}},x=async O=>{if(O.preventDefault(),!k.name.trim()){n.warning("  ");return}try{p(!0);let V="";if(k.logoFile){const I=k.logoFile.name.replace(/\s+/g,"_").slice(-60),S=`uploads/restaurant_${Date.now()}_${I}`,P=Yd(R,S),D=hb(P,k.logoFile,{contentType:k.logoFile.type||"image/jpeg"});await new Promise((A,De)=>{D.on("state_changed",ct=>{const qt=Math.round(ct.bytesTransferred/ct.totalBytes*100);w(qt)},De,async()=>{V=await Xd(D.snapshot.ref),A()})})}const b=e==="admin",y=e==="developer";await qo(he(H,"restaurants"),{name:k.name,phone:k.phone,city:k.city,location:k.location,ownerId:"admin_"+Date.now(),email:(t==null?void 0:t.email)||"",logoUrl:V,createdAt:new Date,referredBy:b?t==null?void 0:t.uid:null,referrerType:b?"admin":y?"developer":null}),n.success("    "),b&&n.info("   75        "),E({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),d(!1),w(0),v()}catch(V){n.error("   "),console.error(V)}finally{p(!1)}},T=async O=>{if(await r.confirm("      ",{dangerous:!0,title:" "}))try{await os(Z(H,"restaurants",O)),n.success("   "),v()}catch(b){n.error("   "),console.error(b)}};return a?o.jsx(Fe,{allow:["admin","developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):o.jsx(Fe,{allow:["admin","developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),o.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[o.jsx(kg,{className:"w-5 h-5"}),"  "]})]}),u&&o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),o.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block font-semibold text-gray-700",children:" "}),o.jsxs("div",{className:"flex items-center gap-4",children:[k.logoPreview?o.jsx("img",{src:k.logoPreview,alt:" ",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):o.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:o.jsx(oD,{className:"w-8 h-8 text-gray-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{ref:C,type:"file",accept:"image/*",className:"hidden",onChange:O=>{var b;const V=(b=O.target.files)==null?void 0:b[0];V&&E({...k,logoFile:V,logoPreview:URL.createObjectURL(V)})}}),o.jsxs("button",{type:"button",onClick:()=>{var O;return(O=C.current)==null?void 0:O.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[o.jsx(FD,{className:"w-4 h-4"}),k.logoFile?" ":" "]}),k.logoFile&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:k.logoFile.name})]})]}),f&&g>0&&o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${g}%`}})})]}),o.jsx("input",{type:"text",placeholder:" ",value:k.name,onChange:O=>E({...k,name:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("input",{type:"text",placeholder:" ",value:k.phone,onChange:O=>E({...k,phone:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("input",{type:"text",placeholder:"",value:k.city,onChange:O=>E({...k,city:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("textarea",{placeholder:" / ",value:k.location,onChange:O=>E({...k,location:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:f?` ... ${g}%`:" "}),o.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:" "})]})]})]}),o.jsx("div",{className:"grid gap-4",children:s.length===0?o.jsx("div",{className:"text-center text-gray-500 py-12",children:"    "}):s.map(O=>o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex gap-4",children:[O.logoUrl?o.jsx("img",{src:O.logoUrl,alt:O.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):o.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold text-primary",children:O.name}),O.city&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.city]}),O.phone&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.phone]}),O.location&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.location]})]})]}),o.jsx("button",{onClick:()=>T(O.id),className:"p-3 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:" ",children:o.jsx(Co,{className:"w-5 h-5"})})]})},O.id))})]})})},Jh={pending:"  ",accepted:" ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "},jO=()=>{const t=vi(),[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,a]=j.useState("all");j.useEffect(()=>{c()},[i]);const c=async()=>{try{let u;i==="all"?u=Bt(he(H,"orders"),Ns("createdAt","desc")):u=Bt(he(H,"orders"),fn("status","==",i),Ns("createdAt","desc"));const f=(await Ke(u)).docs.map(p=>({id:p.id,...p.data()}));n(f)}catch(u){t.error("   "),console.error(u)}finally{s(!1)}};return r?o.jsx(Fe,{allow:["admin","developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):o.jsx(Fe,{allow:["admin","developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[o.jsxs("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${i==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[" (",e.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(u=>{const d=e.filter(f=>f.status===u).length;return o.jsxs("button",{onClick:()=>a(u),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${i===u?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[Jh[u]," (",d,")"]},u)})]}),o.jsx("div",{className:"space-y-4",children:e.length===0?o.jsxs("div",{className:"text-center text-gray-500 py-12",children:["   ",i!=="all"&&` "${Jh[i]}"`]}):e.map(u=>{var d,f;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold",children:[" #",u.id.slice(-8)]}),o.jsx("p",{className:"text-gray-600 text-sm",children:u.createdAt?new Date(u.createdAt).toLocaleDateString("ar-SA"):""})]}),o.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${u.status==="pending"?"bg-yellow-500":u.status==="delivered"?"bg-green-600":u.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:Jh[u.status]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" ID"}),o.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[u.customerId.slice(0,12),"..."]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsx("p",{className:"font-semibold text-gray-800",children:u.restaurantName||""})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsx("p",{className:"text-sm text-gray-800",children:u.address})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsxs("p",{className:"text-lg font-bold text-primary",children:[((d=u.total)==null?void 0:d.toFixed(2))||0," ."]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[o.jsx("p",{className:"font-semibold mb-2",children:":"}),o.jsx("div",{className:"space-y-1",children:(f=u.items)==null?void 0:f.map((p,g)=>o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsxs("span",{children:[p.name,"  ",p.qty]}),o.jsxs("span",{children:[(p.price*p.qty).toFixed(2)," ."]})]},g))})]})]},u.id)})})]})})},xn={projectId:an.options.projectId,authDomain:an.options.authDomain,storageBucket:an.options.storageBucket,messagingSenderId:an.options.messagingSenderId,appId:an.options.appId},RO=()=>{var ca,ua,Di,Oi;const{user:t}=xt(),e=vi(),n=Vr(),r=Jd(an),[s,i]=j.useState("overview"),[a,c]=j.useState(!0),[u,d]=j.useState(!1),[f,p]=j.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[g,w]=j.useState({}),[C,R]=j.useState([]),[k,E]=j.useState([]),[v,x]=j.useState([]),[T,O]=j.useState([]),[V,b]=j.useState(!1),[y,I]=j.useState({}),[S,P]=j.useState(null),[D,A]=j.useState({}),[De,ct]=j.useState(!1),[qt,ut]=j.useState(null),[q,J]=j.useState({}),[te,ve]=j.useState("all"),[ge,Ve]=j.useState("all"),[en,Sn]=j.useState(null),[tn,nn]=j.useState(!1),[Mr,nc]=j.useState(""),[Fr,Ps]=j.useState(""),[ar,_i]=j.useState(""),[wi,Ei]=j.useState(""),[Wo,rc]=j.useState(!1),[Ko,Go]=j.useState(!1),[zn,Qo]=j.useState(""),[Xo,bi]=j.useState(""),[lr,Yo]=j.useState(""),[Ye,dt]=j.useState(""),[Ds,Jo]=j.useState(!1),[Ni,sc]=j.useState(!1),[yn,Zo]=j.useState(""),[Ti,Ii]=j.useState(""),[ic,oc]=j.useState(""),[ki,ea]=j.useState(""),[qn,Ur]=j.useState(""),[Br,Si]=j.useState(""),[Hn,ta]=j.useState(!1),[jn,ac]=j.useState([]),[Os,ji]=j.useState(!1),[ot,Ri]=j.useState(""),[$r,cr]=j.useState(""),[Ci,na]=j.useState(""),[ur,ra]=j.useState("medium"),[lc,zr]=j.useState(""),[sa,Ai]=j.useState(!1),[Rn,Wn]=j.useState("all");t!=null&&t.email;const cc=async()=>{if(!Mr.trim()||!ar.trim()){e.warning("    ");return}if(ar.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${Mr}
 ${Fr||" "}

:         .`,{title:"  "})){rc(!0);try{const $=(await au(Fn,Mr.trim(),ar)).user.uid;await wn(Z(H,"users",$),{email:Mr.trim(),name:Fr.trim()||" ",phone:wi.trim()||"",role:"admin",createdAt:xe()}),await wn(Z(H,"wallets",$),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:xe()}),e.success("     "),e.info("        "),nc(""),Ps(""),_i(""),Ei(""),nn(!1)}catch(B){console.error("   :",B),B.code==="auth/email-already-in-use"?e.error("   "):B.code==="auth/invalid-email"?e.error("   "):B.code==="auth/weak-password"?e.error("   "):e.error("  : "+(B.message||"  "))}finally{rc(!1)}}},uc=async()=>{if(!zn.trim()||!lr.trim()){e.warning("    ");return}if(lr.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${zn}
 ${Xo||" "}
 ${Ye||" "}`,{title:"  "})){Jo(!0);try{const $=(await au(Fn,zn.trim(),lr)).user.uid;await wn(Z(H,"users",$),{email:zn.trim(),name:Xo.trim()||" ",phone:Ye.trim()||"",role:"courier",createdAt:xe()}),e.success("     "),e.info("        "),Qo(""),bi(""),Yo(""),dt(""),Go(!1)}catch(B){console.error("   :",B),B.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(B.message||"  "))}finally{Jo(!1)}}},ia=async()=>{if(!yn.trim()){e.warning("  ");return}if(!qn.trim()||!Br.trim()){e.warning("   ");return}if(await n.confirm(`   :

 ${yn}
 ${Ti||" "}
  : ${qn}`,{title:"  "})){ta(!0);try{const $=(await au(Fn,qn.trim(),Br)).user.uid;await wn(Z(H,"users",$),{email:qn.trim(),name:yn.trim()+" - ",role:"owner",createdAt:xe()}),await wn(Z(H,"restaurants",$),{name:yn.trim(),ownerId:$,email:ki.trim()||qn.trim(),phone:ic.trim()||"",city:Ti.trim()||"",referredBy:t==null?void 0:t.uid,referrerType:"developer",createdAt:xe()}),e.success("      "),e.info("        "),Zo(""),Ii(""),oc(""),ea(""),Ur(""),Si(""),sc(!1)}catch(B){console.error("   :",B),B.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(B.message||"  "))}finally{ta(!1)}}},oa=()=>{const N=new Date,B=new Date(N.getFullYear(),N.getMonth(),N.getDate()),$=new Date(B.getTime()-7*24*60*60*1e3),ne=new Date(B.getTime()-30*24*60*60*1e3),ye=v.filter(oe=>{var Me,rn;return(((rn=(Me=oe.createdAt)==null?void 0:Me.toDate)==null?void 0:rn.call(Me))||new Date(0))>=B&&oe.status!=="cancelled"}),je=v.filter(oe=>{var Me,rn;return(((rn=(Me=oe.createdAt)==null?void 0:Me.toDate)==null?void 0:rn.call(Me))||new Date(0))>=$&&oe.status!=="cancelled"}),Ze=v.filter(oe=>{var Me,rn;return(((rn=(Me=oe.createdAt)==null?void 0:Me.toDate)==null?void 0:rn.call(Me))||new Date(0))>=ne&&oe.status!=="cancelled"}),ht=v.filter(oe=>oe.status==="delivered");return{todayRevenue:ye.reduce((oe,be)=>oe+(be.total||0),0),todayOrders:ye.length,todayPlatformFee:ye.reduce((oe,be)=>oe+(be.platformFee||0),0),weekRevenue:je.reduce((oe,be)=>oe+(be.total||0),0),weekOrders:je.length,weekPlatformFee:je.reduce((oe,be)=>oe+(be.platformFee||0),0),monthRevenue:Ze.reduce((oe,be)=>oe+(be.total||0),0),monthOrders:Ze.length,monthPlatformFee:Ze.reduce((oe,be)=>oe+(be.platformFee||0),0),totalRevenue:ht.reduce((oe,be)=>oe+(be.total||0),0),totalPlatformFee:ht.reduce((oe,be)=>oe+(be.platformFee||0),0),totalAdminCommission:ht.reduce((oe,be)=>oe+(be.adminCommission||0),0)}},Je=async()=>{try{const[N,B,$,ne,ye]=await Promise.all([Ke(he(H,"users")),Ke(he(H,"restaurants")),Ke(he(H,"menuItems")),Ke(he(H,"orders")),Ke(he(H,"wallets"))]);let je={docs:[]};try{je=await Ke(he(H,"tasks"))}catch{console.log("   ")}const Ze=N.docs.map(ae=>({uid:ae.id,...ae.data()}));R(Ze);const ht=B.docs.map(ae=>({id:ae.id,...ae.data()}));E(ht);const oe=ne.docs.map(ae=>({id:ae.id,...ae.data()}));x(oe);const be=je.docs.map(ae=>({id:ae.id,...ae.data()}));ac(be.sort((ae,Vi)=>{var Fs,Mi;return(((Fs=Vi.createdAt)==null?void 0:Fs.seconds)||0)-(((Mi=ae.createdAt)==null?void 0:Mi.seconds)||0)}));const Me={};ye.docs.forEach(ae=>{Me[ae.id]=ae.data()});const rn=Me.app_earnings||{balance:0,totalEarnings:0},Ee=Ze.filter(ae=>ae.role==="admin"),Li=Ze.filter(ae=>ae.role==="courier"),Vs=Ze.filter(ae=>ae.role==="customer"),Ms=Ze.filter(ae=>ae.role==="owner"),th=Ee.map(ae=>{const Vi=ht.filter(Mi=>Mi.referredBy===ae.uid),Fs=Me[ae.uid]||{balance:0,totalEarnings:0};return{uid:ae.uid,email:ae.email,name:ae.name,walletBalance:Fs.balance||0,totalEarnings:Fs.totalEarnings||0,restaurantsCount:Vi.length,restaurants:Vi}});O(th),p({users:Ze.length,restaurants:ht.length,menuItems:$.size,orders:oe.length,pendingOrders:oe.filter(ae=>ae.status==="pending").length,deliveredOrders:oe.filter(ae=>ae.status==="delivered").length,admins:Ee.length,couriers:Li.length,customers:Vs.length,owners:Ms.length,totalAppEarnings:rn.totalEarnings||0});const da=await Et(Z(H,"settings","general"));if(da.exists()){const ae=da.data();w(ae),I(ae)}else{const ae={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};w(ae),I(ae)}}catch(N){console.error("   :",N),e.error("  ")}finally{c(!1),d(!1)}};j.useEffect(()=>{Je()},[]);const dc=()=>{d(!0),Je(),e.info("  ...")},Zd=async()=>{try{await wn(Z(H,"settings","general"),y,{merge:!0}),w(y),b(!1),e.success("    ")}catch(N){console.error("   :",N),e.error("  ")}},Pi=async N=>{try{await tt(Z(H,"restaurants",N),{...D,updatedAt:xe()}),P(null),e.success("    "),Je()}catch(B){console.error("   :",B),e.error("  ")}},hc=async(N,B)=>{try{ct(!0);const $=`restaurants/${N}/logo_${Date.now()}_${B.name}`,ne=Yd(r,$);await db(ne,B);const ye=await Xd(ne);await tt(Z(H,"restaurants",N),{logoUrl:ye,updatedAt:xe()}),e.success("    "),Je()}catch($){console.error("   :",$),e.error("  ")}finally{ct(!1)}},aa=async N=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await os(Z(H,"restaurants",N)),e.success("   "),Je()}catch($){console.error("   :",$),e.error("  ")}},Ls=async N=>{try{await tt(Z(H,"users",N),{...q,updatedAt:xe()}),ut(null),e.success("    "),Je()}catch(B){console.error("   :",B),e.error("  ")}},dr=async N=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await os(Z(H,"users",N)),e.success("     "),e.warning(":      Firebase Auth"),Je()}catch($){console.error("   :",$),e.error("  ")}},la=async(N,B)=>{try{await tt(Z(H,"orders",N),{status:B,updatedAt:xe()}),e.success("    "),Je()}catch($){console.error("   :",$),e.error("  ")}},eh=N=>{switch(N){case"customer":return" ";case"owner":return"  ";case"courier":return" ";case"admin":return" ";case"developer":return" ";default:return N}},fc=N=>{switch(N){case"pending":return"  ";case"accepted":return" ";case"preparing":return"  ";case"ready":return" ";case"out_for_delivery":return"  ";case"delivered":return"  ";case"cancelled":return" ";default:return N}};return a?o.jsx(Fe,{allow:["developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsxs("div",{className:"text-center",children:[o.jsx(gr,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-lg text-gray-600",children:"   ..."})]})})}):o.jsx(Fe,{allow:["developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-extrabold text-primary",children:"   "}),o.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),o.jsxs("button",{onClick:dc,disabled:u,className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition disabled:opacity-50",children:[o.jsx(gr,{className:`w-5 h-5 ${u?"animate-spin":""}`}),""]})]}),o.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[{id:"overview",label:"  "},{id:"finance",label:" "},{id:"restaurants",label:" "},{id:"orders",label:" "},{id:"users",label:" "},{id:"couriers",label:" "},{id:"admins",label:" "},{id:"tasks",label:" "},{id:"settings",label:" "},{id:"tools",label:" "}].map(N=>o.jsx("button",{onClick:()=>i(N.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition ${s===N.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N.label},N.id))}),s==="overview"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.users}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.restaurants}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.orders}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.admins}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.couriers}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.totalAppEarnings.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(ID,{className:"w-6 h-6 text-orange-500"}),o.jsx("h2",{className:"text-xl font-bold",children:" Firebase"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),o.jsx("p",{className:"font-mono text-sm",children:xn.projectId})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),o.jsx("p",{className:"font-mono text-sm",children:xn.storageBucket})]})]}),o.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[o.jsx("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:" Console"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:" Firestore"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:" Auth"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:" Storage"})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.customers}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.owners}),o.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),o.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:f.couriers}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:f.admins}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]})]})]}),s==="finance"&&o.jsx("div",{className:"space-y-6",children:(()=>{const N=oa();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:N.totalRevenue.toFixed(0)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:N.totalPlatformFee.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:N.totalAdminCommission.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:(N.totalPlatformFee+N.totalAdminCommission).toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:" "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:N.todayOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[N.todayRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[N.todayPlatformFee.toFixed(2)," ."]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"  7 "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:N.weekOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[N.weekRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[N.weekPlatformFee.toFixed(2)," ."]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"  30 "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:N.monthOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[N.monthRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[N.monthPlatformFee.toFixed(2)," ."]})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"   "}),o.jsx("div",{className:"space-y-3",children:k.map(B=>({...B,ordersCount:v.filter($=>$.restaurantId===B.id&&$.status==="delivered").length,revenue:v.filter($=>$.restaurantId===B.id&&$.status==="delivered").reduce(($,ne)=>$+(ne.total||0),0)})).sort((B,$)=>$.revenue-B.revenue).slice(0,5).map((B,$)=>o.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:$===0?"":$===1?"":$===2?"":`#${$+1}`}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:B.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[B.ordersCount," "]})]})]}),o.jsxs("p",{className:"font-bold text-green-600",children:[B.revenue.toFixed(2)," ."]})]},B.id))})]})]})})()}),s==="restaurants"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",k.length,")"]}),o.jsx("button",{onClick:()=>sc(!Ni),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold",children:Ni?" ":"  "})]}),Ni&&o.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[o.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"   "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"text",placeholder:":  ",value:yn,onChange:N=>Zo(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:": ",value:Ti,onChange:N=>Ii(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:ic,onChange:N=>oc(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:ki,onChange:N=>ea(N.target.value),className:"w-full border rounded-xl p-3"})]})]}),o.jsxs("div",{className:"border-t mt-4 pt-4",children:[o.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"    ( )"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   *"}),o.jsx("input",{type:"email",placeholder:"owner@example.com",value:qn,onChange:N=>Ur(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"6   ",value:Br,onChange:N=>Si(N.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),o.jsx("button",{onClick:ia,disabled:Hn||!yn.trim()||!qn.trim()||!Br.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Hn?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):"  "})]}),o.jsx("div",{className:"space-y-4",children:k.map(N=>{var B;return o.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:S===N.id?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"text",value:D.name||"",onChange:$=>A({...D,name:$.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"text",value:D.phone||"",onChange:$=>A({...D,phone:$.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"email",value:D.email||"",onChange:$=>A({...D,email:$.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:""}),o.jsx("input",{type:"text",value:D.city||"",onChange:$=>A({...D,city:$.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm text-gray-600",children:""}),o.jsx("input",{type:"text",value:D.location||"",onChange:$=>A({...D,location:$.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm text-gray-600",children:"  ()"}),o.jsxs("select",{value:D.referredBy||"",onChange:$=>A({...D,referredBy:$.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[o.jsx("option",{value:"",children:"--   ( ) --"}),C.filter($=>$.role==="admin").map($=>o.jsxs("option",{value:$.uid,children:[" ",$.name||$.email]},$.uid))]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"file",accept:"image/*",onChange:$=>{var ye;const ne=(ye=$.target.files)==null?void 0:ye[0];ne&&hc(N.id,ne)},className:"w-full border rounded-xl p-2 mt-1",disabled:De}),De&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" ..."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>Pi(N.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[o.jsx(Tb,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>P(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[o.jsx(sd,{className:"w-4 h-4"})," "]})]})]}):o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:N.logoUrl?o.jsx("img",{src:N.logoUrl,alt:N.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:N.name}),o.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[N.phone&&o.jsxs("p",{children:[" ",N.phone]}),N.email&&o.jsxs("p",{children:[" ",N.email]}),N.city&&o.jsxs("p",{children:[" ",N.city]}),N.referredBy&&o.jsxs("p",{className:"text-purple-600",children:["  : ",((B=T.find($=>$.uid===N.referredBy))==null?void 0:B.name)||N.referredBy.slice(0,8)]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{P(N.id),A(N)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"",children:o.jsx(zx,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>aa(N.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"",children:o.jsx(Co,{className:"w-5 h-5"})})]}),o.jsxs("select",{value:N.referredBy||"",onChange:async $=>{const ne=$.target.value;try{await tt(Z(H,"restaurants",N.id),{referredBy:ne||null,updatedAt:xe()}),e.success(ne?"   ":"   "),Je()}catch{e.error("   ")}},className:"text-xs border rounded-lg p-1",title:" ",children:[o.jsx("option",{value:"",children:"  "}),C.filter($=>$.role==="admin").map($=>o.jsxs("option",{value:$.uid,children:[" ",$.name||$.email]},$.uid))]})]})]})},N.id)})})]}),s==="orders"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",v.length,")"]}),o.jsxs("select",{value:te,onChange:N=>ve(N.target.value),className:"border rounded-xl p-2",children:[o.jsx("option",{value:"all",children:" "}),o.jsx("option",{value:"pending",children:" "}),o.jsx("option",{value:"accepted",children:""}),o.jsx("option",{value:"preparing",children:" "}),o.jsx("option",{value:"ready",children:""}),o.jsx("option",{value:"out_for_delivery",children:" "}),o.jsx("option",{value:"delivered",children:" "}),o.jsx("option",{value:"cancelled",children:""})]})]}),o.jsx("div",{className:"space-y-3",children:v.filter(N=>te==="all"||N.status===te).sort((N,B)=>{var $,ne;return((($=B.createdAt)==null?void 0:$.seconds)||0)-(((ne=N.createdAt)==null?void 0:ne.seconds)||0)}).map(N=>{var B,$;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold",children:[" #",N.id.slice(-8)]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",N.restaurantName||""]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",N.address]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",(B=N.total)==null?void 0:B.toFixed(2)," ."]}),N.platformFee&&o.jsxs("p",{className:"text-xs text-green-600",children:[" : ",N.platformFee," .",N.adminCommission?` |  : ${N.adminCommission} .`:""]})]}),o.jsxs("div",{className:"text-left",children:[o.jsx("span",{className:`inline-block px-3 py-1 rounded-xl text-sm font-semibold ${N.status==="delivered"?"bg-green-100 text-green-700":N.status==="cancelled"?"bg-red-100 text-red-700":N.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:fc(N.status)}),o.jsxs("select",{value:N.status,onChange:ne=>la(N.id,ne.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[o.jsx("option",{value:"pending",children:" "}),o.jsx("option",{value:"accepted",children:""}),o.jsx("option",{value:"preparing",children:" "}),o.jsx("option",{value:"ready",children:""}),o.jsx("option",{value:"out_for_delivery",children:" "}),o.jsx("option",{value:"delivered",children:" "}),o.jsx("option",{value:"cancelled",children:""})]})]})]}),o.jsxs("div",{className:"mt-3 pt-3 border-t",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:($=N.items)==null?void 0:$.map((ne,ye)=>o.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[ne.name,"  ",ne.qty]},ye))})]})]},N.id)})})]}),s==="users"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",C.length,")"]}),o.jsxs("select",{value:ge,onChange:N=>Ve(N.target.value),className:"border rounded-xl p-2",children:[o.jsx("option",{value:"all",children:" "}),o.jsx("option",{value:"customer",children:""}),o.jsx("option",{value:"owner",children:" "}),o.jsx("option",{value:"courier",children:""}),o.jsx("option",{value:"admin",children:""}),o.jsx("option",{value:"developer",children:""})]})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.filter(N=>ge==="all"||N.role===ge).map(N=>o.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:qt===N.uid?o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{type:"text",placeholder:"",value:q.name||"",onChange:B=>J({...q,name:B.target.value}),className:"w-full border rounded-xl p-2"}),o.jsx("input",{type:"text",placeholder:"",value:q.phone||"",onChange:B=>J({...q,phone:B.target.value}),className:"w-full border rounded-xl p-2"}),o.jsxs("select",{value:q.role||"customer",onChange:B=>J({...q,role:B.target.value}),className:"w-full border rounded-xl p-2",children:[o.jsx("option",{value:"customer",children:""}),o.jsx("option",{value:"owner",children:" "}),o.jsx("option",{value:"courier",children:""}),o.jsx("option",{value:"admin",children:""}),o.jsx("option",{value:"developer",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Ls(N.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:""}),o.jsx("button",{onClick:()=>ut(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:""})]})]}):o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:N.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:N.email}),o.jsx("p",{className:"text-xs mt-1",children:eh(N.role)})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>{ut(N.uid),J(N)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:o.jsx(zx,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>dr(N.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:o.jsx(Co,{className:"w-4 h-4"})})]})]})})},N.uid))})]}),s==="couriers"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["  (",f.couriers,")"]}),o.jsx("button",{onClick:()=>Go(!Ko),className:"flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-xl font-semibold",children:Ko?" ":"  "})]}),Ko&&o.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[o.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"   "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"email",placeholder:"courier@example.com",value:zn,onChange:N=>Qo(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"6   ",value:lr,onChange:N=>Yo(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:" ",value:Xo,onChange:N=>bi(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Ye,onChange:N=>dt(N.target.value),className:"w-full border rounded-xl p-3"})]})]}),o.jsx("button",{onClick:uc,disabled:Ds||!zn.trim()||!lr.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Ds?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):"   "})]}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[C.filter(N=>N.role==="courier").map(N=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:N.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:N.email}),N.phone&&o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",N.phone]})]})]}),o.jsx("div",{className:"mt-4 pt-3 border-t",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[o.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[o.jsx("p",{className:"text-lg font-bold text-green-600",children:v.filter(B=>B.courierId===N.uid&&B.status==="delivered").length}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[o.jsx("p",{className:"text-lg font-bold text-blue-600",children:v.filter(B=>B.courierId===N.uid&&B.status==="out_for_delivery").length}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]})]})})]},N.uid)),f.couriers===0&&o.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"   "})]})]}),s==="admins"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",T.length,")"]}),o.jsxs("button",{onClick:()=>nn(!tn),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(rd,{className:"w-5 h-5"}),tn?"":" "]})]}),tn&&o.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"    "}),o.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"           "}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"  :"}),o.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[C.filter(N=>N.role==="customer").slice(0,10).map(N=>o.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:N.name||" "}),o.jsx("p",{className:"text-sm text-gray-500",children:N.email})]}),o.jsx("button",{onClick:async()=>{if(await n.confirm(`   ${N.name||N.email}  `,{title:"  "}))try{await tt(Z(H,"users",N.uid),{role:"admin"}),e.success("     "),nn(!1),Je()}catch{e.error("  ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:" "})]},N.uid)),C.filter(N=>N.role==="customer").length===0&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"    "})]})]}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"     :"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"email",placeholder:"admin@example.com",value:Mr,onChange:N=>nc(N.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"  (6   )",value:ar,onChange:N=>_i(N.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:" ",value:Fr,onChange:N=>Ps(N.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:wi,onChange:N=>Ei(N.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),o.jsx("button",{onClick:cc,disabled:Wo||!Mr.trim()||!ar.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:Wo?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(rd,{className:"w-5 h-5"}),"  "]})}),o.jsx("p",{className:"text-xs text-orange-600 mt-2",children:" :        .     ."})]}),o.jsx("div",{className:"border-t pt-4 mt-4",children:o.jsx("p",{className:"text-xs text-gray-500",children:'         ""'})})]}),o.jsxs("div",{className:"space-y-4",children:[T.map(N=>o.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[o.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>Sn(en===N.uid?null:N.uid),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:N.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:N.email})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Sb,{className:"w-4 h-4 text-green-600"}),o.jsxs("span",{className:"font-bold text-green-600",children:[N.walletBalance.toFixed(2)," ."]})]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[": ",N.totalEarnings.toFixed(2)," . | ",N.restaurantsCount," "]})]}),en===N.uid?o.jsx(K4,{className:"w-5 h-5 text-gray-400"}):o.jsx(H4,{className:"w-5 h-5 text-gray-400"})]})]})}),en===N.uid&&o.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[o.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["      (",N.restaurants.length,"):"]}),N.restaurants.length>0?o.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:N.restaurants.map(B=>o.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:B.logoUrl?o.jsx("img",{src:B.logoUrl,alt:B.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm",children:B.name}),o.jsx("p",{className:"text-xs text-gray-500",children:B.city||" "})]})]},B.id))}):o.jsx("p",{className:"text-gray-500 text-sm",children:"    "}),o.jsx("div",{className:"mt-4 pt-3 border-t",children:o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[o.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-green-700",children:N.walletBalance.toFixed(2)}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-blue-700",children:N.totalEarnings.toFixed(2)}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-purple-700",children:v.filter(B=>B.referredBy===N.uid).length}),o.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})})]})]},N.uid)),T.length===0&&o.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"   "})]})]}),s==="settings"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"  "}),V?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{b(!1),I(g)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:""}),o.jsx("button",{onClick:Zd,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:" "})]}):o.jsx("button",{onClick:()=>b(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:" "})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),V?o.jsx("input",{type:"number",value:y.deliveryFee||0,onChange:N=>I({...y,deliveryFee:Number(N.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.deliveryFee||7," ."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),V?o.jsx("input",{type:"number",step:"0.1",value:y.platformFee||1,onChange:N=>I({...y,platformFee:Number(N.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.platformFee||1," ./"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),V?o.jsx("input",{type:"number",step:"0.05",value:y.adminCommissionRate||.75,onChange:N=>I({...y,adminCommissionRate:Number(N.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.adminCommissionRate||.75," ./"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   "}),V?o.jsx("input",{type:"number",value:y.minOrderAmount||0,onChange:N=>I({...y,minOrderAmount:Number(N.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.minOrderAmount||20," ."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),V?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"time",value:((ca=y.workingHours)==null?void 0:ca.open)||"09:00",onChange:N=>I({...y,workingHours:{...y.workingHours,open:N.target.value}}),className:"flex-1 border rounded-xl p-3"}),o.jsx("input",{type:"time",value:((ua=y.workingHours)==null?void 0:ua.close)||"23:00",onChange:N=>I({...y,workingHours:{...y.workingHours,close:N.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):o.jsxs("p",{className:"text-2xl font-bold",children:[((Di=g.workingHours)==null?void 0:Di.open)||"09:00"," - ",((Oi=g.workingHours)==null?void 0:Oi.close)||"23:00"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),V?o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:y.maintenanceMode||!1,onChange:N=>I({...y,maintenanceMode:N.target.checked}),className:"w-6 h-6"}),o.jsx("span",{className:"text-lg",children:y.maintenanceMode?"":""})]}):o.jsx("p",{className:`text-2xl font-bold ${g.maintenanceMode?"text-red-600":"text-green-600"}`,children:g.maintenanceMode?" ":" "})]})]})}),o.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[o.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"   (  = 1.75 .):"}),o.jsxs("div",{className:"text-sky-800 space-y-2",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:" :"})," ",g.platformFee||1," .   "]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:" :"})," ",g.adminCommissionRate||.75," .   "]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[o.jsx("p",{className:"font-bold mb-2",children:" :   5 "}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"    :"})]}),o.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[o.jsxs("li",{children:["  : 5  ",g.adminCommissionRate||.75," = ",o.jsxs("strong",{children:[(5*(g.adminCommissionRate||.75)).toFixed(2)," ."]})]}),o.jsxs("li",{children:["  : 5  ",g.platformFee||1," = ",o.jsxs("strong",{children:[(5*(g.platformFee||1)).toFixed(2)," ."]})]}),o.jsxs("li",{className:"text-green-700",children:[": ",o.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})]}),o.jsxs("p",{className:"mt-2",children:[" ",o.jsx("strong",{children:"    :"})]}),o.jsx("ul",{className:"mr-6 list-disc text-sm",children:o.jsxs("li",{children:["    : 5  1.75 = ",o.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})})]})]})]})]}),s==="tasks"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"   "}),o.jsxs("button",{onClick:()=>ji(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(kg,{className:"w-5 h-5"})," "]})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(N=>o.jsxs("button",{onClick:()=>Wn(N),className:`px-4 py-2 rounded-xl font-semibold transition ${Rn===N?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[N==="all"&&" ",N==="pending"&&"  ",N==="in_progress"&&"  ",N==="completed"&&" ",N==="cancelled"&&" "]},N))}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:jn.filter(N=>N.status==="pending").length}),o.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:jn.filter(N=>N.status==="in_progress").length}),o.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),o.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:jn.filter(N=>N.status==="completed").length}),o.jsx("p",{className:"text-sm text-green-700",children:""})]}),o.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:jn.filter(N=>N.status==="cancelled").length}),o.jsx("p",{className:"text-sm text-red-700",children:""})]})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:jn.filter(N=>Rn==="all"||N.status===Rn).length===0?o.jsxs("div",{className:"p-8 text-center text-gray-500",children:[o.jsx("p",{className:"text-4xl mb-2",children:""}),o.jsxs("p",{children:["   ",Rn!=="all"&&"  "]})]}):o.jsx("div",{className:"divide-y",children:jn.filter(N=>Rn==="all"||N.status===Rn).map(N=>{var $,ne,ye;const B=C.find(je=>je.uid===N.assignedTo);return o.jsx("div",{className:"p-4 hover:bg-gray-50",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${N.priority==="high"?"bg-red-100 text-red-700":N.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:N.priority==="high"?" ":N.priority==="medium"?" ":" "}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${N.status==="pending"?"bg-yellow-100 text-yellow-700":N.status==="in_progress"?"bg-blue-100 text-blue-700":N.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[N.status==="pending"&&"  ",N.status==="in_progress"&&"  ",N.status==="completed"&&" ",N.status==="cancelled"&&" "]})]}),o.jsx("h3",{className:"font-bold text-gray-800",children:N.title}),N.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.description}),o.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[o.jsxs("span",{children:[" ",(B==null?void 0:B.name)||N.assignedToName||" "]}),N.dueDate&&o.jsxs("span",{children:[" ",new Date(N.dueDate).toLocaleDateString("ar-SA")]}),o.jsxs("span",{children:[" ",((ye=(ne=($=N.createdAt)==null?void 0:$.toDate)==null?void 0:ne.call($))==null?void 0:ye.toLocaleDateString("ar-SA"))||" "]})]}),N.notes&&o.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:[" ",N.notes]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[N.status==="pending"&&o.jsx("button",{onClick:async()=>{try{await tt(Z(H,"tasks",N.id),{status:"in_progress",updatedAt:xe()}),e.success("  "),Je()}catch{e.error("   ")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:" ",children:""}),(N.status==="pending"||N.status==="in_progress")&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:async()=>{try{await tt(Z(H,"tasks",N.id),{status:"completed",completedAt:xe(),updatedAt:xe()}),e.success("  "),Je()}catch{e.error("   ")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:" ",children:""}),o.jsx("button",{onClick:async()=>{if(await n.confirm("    ",{dangerous:!0}))try{await tt(Z(H,"tasks",N.id),{status:"cancelled",updatedAt:xe()}),e.success("  "),Je()}catch{e.error("   ")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]}),o.jsx("button",{onClick:async()=>{if(await n.confirm("     ",{dangerous:!0}))try{await os(Z(H,"tasks",N.id)),e.success("  "),Je()}catch{e.error("   ")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]})]})},N.id)})})}),Os&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"   "}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),o.jsx("input",{type:"text",value:ot,onChange:N=>Ri(N.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:":    "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),o.jsx("textarea",{value:$r,onChange:N=>cr(N.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:" ..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),o.jsxs("select",{value:Ci,onChange:N=>na(N.target.value),className:"w-full border rounded-xl px-4 py-2",children:[o.jsx("option",{value:"",children:"--   --"}),C.filter(N=>N.role==="admin").map(N=>o.jsx("option",{value:N.uid,children:N.name||N.email},N.uid))]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),o.jsxs("select",{value:ur,onChange:N=>ra(N.target.value),className:"w-full border rounded-xl px-4 py-2",children:[o.jsx("option",{value:"low",children:" "}),o.jsx("option",{value:"medium",children:" "}),o.jsx("option",{value:"high",children:" "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:" "}),o.jsx("input",{type:"date",value:lc,onChange:N=>zr(N.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:()=>{ji(!1),Ri(""),cr(""),na(""),ra("medium"),zr("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:""}),o.jsx("button",{onClick:async()=>{if(!ot.trim()||!Ci){e.error("   ");return}Ai(!0);try{const N=C.find(B=>B.uid===Ci);await qo(he(H,"tasks"),{title:ot.trim(),description:$r.trim(),assignedTo:Ci,assignedToName:(N==null?void 0:N.name)||(N==null?void 0:N.email)||"",status:"pending",priority:ur,dueDate:lc||null,createdBy:t==null?void 0:t.uid,createdAt:xe(),updatedAt:xe(),completedAt:null,notes:""}),e.success("   "),ji(!1),Ri(""),cr(""),na(""),ra("medium"),zr(""),Je()}catch(N){console.error(N),e.error("   ")}finally{Ai(!1)}},disabled:sa,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:sa?" ...":" "})]})]})})]}),s==="tools"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold",children:"  "}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("button",{onClick:()=>{const N={exportDate:new Date().toISOString(),users:C.length,restaurants:k.length,orders:v.length,admins:T.length,stats:f,settings:g},B=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),$=URL.createObjectURL(B),ne=document.createElement("a");ne.href=$,ne.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,ne.click(),e.success("   ")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:"  JSON"})]})]}),o.jsxs("button",{onClick:()=>{const N=[[" ","","","",""].join(","),...v.map(ye=>{var je,Ze,ht;return[ye.id.slice(-8),ye.restaurantName||" ",ye.total,ye.status,((ht=(Ze=(je=ye.createdAt)==null?void 0:je.toDate)==null?void 0:Ze.call(je))==null?void 0:ht.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),B=new Blob(["\uFEFF"+N],{type:"text/csv;charset=utf-8"}),$=URL.createObjectURL(B),ne=document.createElement("a");ne.href=$,ne.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,ne.click(),e.success("   ")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]}),o.jsxs("button",{onClick:()=>{const N=[["","","",""].join(","),...C.map(ye=>[ye.name||" ",ye.email,ye.role,ye.phone||""].join(","))].join(`
`),B=new Blob(["\uFEFF"+N],{type:"text/csv;charset=utf-8"}),$=URL.createObjectURL(B),ne=document.createElement("a");ne.href=$,ne.download=`users-${new Date().toISOString().split("T")[0]}.csv`,ne.click(),e.success("   ")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("button",{onClick:async()=>{const N=v.filter($=>$.status==="pending");if(N.length===0){e.info("   ");return}if(await n.confirm(`  ${N.length}  .   `,{title:"  ",dangerous:!0}))try{await Promise.all(N.map($=>tt(Z(H,"orders",$.id),{status:"cancelled",updatedAt:xe()}))),e.success(`  ${N.length} `),Je()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:"  "}),o.jsxs("p",{className:"text-xs opacity-75",children:[v.filter(N=>N.status==="pending").length,"  "]})]})]}),o.jsxs("button",{onClick:async()=>{const N=new Date;N.setMonth(N.getMonth()-3);const B=v.filter(ne=>{var je,Ze;return(((Ze=(je=ne.createdAt)==null?void 0:je.toDate)==null?void 0:Ze.call(je))||new Date)<N&&(ne.status==="delivered"||ne.status==="cancelled")});if(B.length===0){e.info("   ");return}if(await n.confirm(`  ${B.length}   (  3 ).   `,{title:"  ",dangerous:!0}))try{await Promise.all(B.map(ne=>os(Z(H,"orders",ne.id)))),e.success(`  ${B.length}  `),Je()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:"  "}),o.jsx("p",{className:"text-xs opacity-75",children:"   3 "})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Firestore"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Authentication"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Storage"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:"Project ID"}),o.jsx("p",{className:"font-mono",children:xn.projectId})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),o.jsx("p",{className:"font-mono",children:xn.storageBucket})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:" "}),o.jsx("p",{className:"font-bold",children:g.appVersion||"1.0.0"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:" "}),o.jsx("p",{className:`font-bold ${g.maintenanceMode?"text-red-600":"text-green-600"}`,children:g.maintenanceMode?" ":" "})]})]})]})]}),o.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:o.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[o.jsxs("span",{children:[" ",t==null?void 0:t.email]}),o.jsxs("span",{children:[" ",t==null?void 0:t.uid.slice(0,12),"..."]}),o.jsxs("span",{children:[" ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},Ht=({children:t})=>{const{user:e,loading:n}=xt();return n?o.jsx("div",{className:"p-8 text-center",children:" ..."}):e?o.jsx(o.Fragment,{children:t}):o.jsx(Nm,{to:"/login",replace:!0})},CO=()=>{var c;const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null);j.useEffect(()=>{(async()=>{try{i(null);const u=Bt(he(H,"orders"),Ns("createdAt","desc"),yg(10)),f=(await Ke(u)).docs.map(p=>{var w,C,R,k,E,v;const g=p.data();return{id:p.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((C=(w=g==null?void 0:g.items)==null?void 0:w[0])==null?void 0:C.ownerId)??null,customerId:g.customerId??null,createdAtISO:((v=(E=(k=(R=g.createdAt)==null?void 0:R.toDate)==null?void 0:k.call(R))==null?void 0:E.toISOString)==null?void 0:v.call(E))??null}});e(f)}catch(u){if(String((u==null?void 0:u.message)||"").includes("index"))try{const f=(await Ke(he(H,"orders"))).docs.map(p=>{var w,C,R,k,E,v;const g=p.data();return{id:p.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((C=(w=g==null?void 0:g.items)==null?void 0:w[0])==null?void 0:C.ownerId)??null,customerId:g.customerId??null,createdAtISO:((v=(E=(k=(R=g.createdAt)==null?void 0:R.toDate)==null?void 0:k.call(R))==null?void 0:E.toISOString)==null?void 0:v.call(E))??null}});e(f),i("     createdAt     .")}catch(d){i("     : "+((d==null?void 0:d.message)||d))}else i("  : "+((u==null?void 0:u.message)||u))}finally{r(!1)}})()},[]);const a=(c=an.options)==null?void 0:c.projectId;return o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),o.jsxs("div",{className:"text-sm",children:["ProjectId: ",o.jsx("b",{children:String(a)})]}),s&&o.jsx("div",{className:"text-red-600 text-sm",children:s}),n&&o.jsx("div",{children:" Loading"}),!n&&t.length===0&&o.jsxs("div",{className:"text-gray-600",children:["     collection: ",o.jsx("code",{children:"orders"}),"   ."]}),t.map(u=>o.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[o.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",u.id]}),o.jsxs("div",{children:["restaurantId: ",o.jsx("b",{children:String(u.restaurantId)})]}),o.jsxs("div",{children:["items[0].ownerId: ",o.jsx("b",{children:String(u.firstItemOwnerId)})]}),o.jsxs("div",{children:["customerId: ",o.jsx("b",{children:String(u.customerId)})]}),o.jsxs("div",{children:["createdAt: ",o.jsx("b",{children:u.createdAtISO||""})]})]},u.id))]})};function AO(){return o.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[o.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[o.jsx(JD,{}),o.jsx(GD,{})]}),o.jsx("div",{className:"h-[100px] sm:h-[120px]"}),o.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:o.jsxs(i2,{children:[o.jsx(Ie,{path:"/",element:o.jsx(ZD,{})}),o.jsx(Ie,{path:"/restaurants",element:o.jsx(eO,{})}),o.jsx(Ie,{path:"/menu",element:o.jsx(iO,{})}),o.jsx(Ie,{path:"/cart",element:o.jsx(oO,{})}),o.jsx(Ie,{path:"/login",element:o.jsx(aO,{})}),o.jsx(Ie,{path:"/customer-login",element:o.jsx(cO,{})}),o.jsx(Ie,{path:"/register",element:o.jsx(lO,{})}),o.jsx(Ie,{path:"/privacy-policy",element:o.jsx(uO,{})}),o.jsx(Ie,{path:"/account-deleted",element:o.jsx(dO,{})}),o.jsx(Ie,{path:"/checkout",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["customer","admin"],children:o.jsx(pO,{})})})}),o.jsx(Ie,{path:"/orders",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["customer","admin"],children:o.jsx(mO,{})})})}),o.jsx(Ie,{path:"/profile",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["customer","courier","owner","admin","developer"],children:o.jsx(gO,{})})})}),o.jsx(Ie,{path:"/owner",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["owner"],children:o.jsx(yO,{})})})}),o.jsx(Ie,{path:"/owner/menu",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["owner"],children:o.jsx(_O,{})})})}),o.jsx(Ie,{path:"/owner/orders",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["owner"],children:o.jsx(EO,{})})})}),o.jsx(Ie,{path:"/owner/edit",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["owner"],children:o.jsx(bO,{})})})}),o.jsx(Ie,{path:"/owner/courier-requests",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["owner"],children:o.jsx(NO,{})})})}),o.jsx(Ie,{path:"/courier",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["courier"],children:o.jsx(TO,{})})})}),o.jsx(Ie,{path:"/courier/hiring",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["courier"],children:o.jsx(IO,{})})})}),o.jsx(Ie,{path:"/admin",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["admin","developer"],children:o.jsx(kO,{})})})}),o.jsx(Ie,{path:"/admin/restaurants",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["admin","developer"],children:o.jsx(SO,{})})})}),o.jsx(Ie,{path:"/admin/orders",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["admin","developer"],children:o.jsx(jO,{})})})}),o.jsx(Ie,{path:"/developer",element:o.jsx(Ht,{children:o.jsx(Fe,{allow:["developer","admin"],children:o.jsx(RO,{})})})}),o.jsx(Ie,{path:"/__debug_orders",element:o.jsx(CO,{})}),o.jsx(Ie,{path:"*",element:o.jsx(Nm,{to:"/",replace:!0})})]})}),o.jsx(YD,{})]})}j.createContext(void 0);const PO=({children:t})=>o.jsx(o.Fragment,{children:t});Zh.createRoot(document.getElementById("root")).render(o.jsx(cv.StrictMode,{children:o.jsx(f2,{children:o.jsx(tO,{children:o.jsx(QD,{children:o.jsx(C4,{children:o.jsxs(PO,{children:["   ",o.jsx(AO,{})]})})})})})}));
