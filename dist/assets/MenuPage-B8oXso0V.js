import{a as Te,u as Me,b as Ve,d as x,j as e,_ as $e}from"./index-FuU3jBZc.js";import{r as i,e as qe,L as _}from"./vendor-react-C_wfuX_s.js";import{q as A,w as f,m as k,j as fe,k as T,t as U,u as ne,x as oe,A as Le,p as Ue,y as ze,z as be}from"./vendor-firebase-Co4MdP0H.js";import{Q as Ce,R as Be,o as K,A as we,g as pe,W as Oe,f as je,m as Qe,j as He,P as Ke,K as We,z as ye,X as ve,v as Ne,s as Xe,t as Ye,Y as ce,k as Ze,n as Se,Z as ke,i as Ge,_ as Je}from"./vendor-icons-Dyg7S3Xx.js";const es=(a,P)=>{const C=[];for(let b=0;b<a.length;b+=P)C.push(a.slice(b,b+P));return C},ns=()=>{var he;const[a,P]=i.useState([]),[C,b]=i.useState(!0),[l,z]=i.useState(null),[w,W]=i.useState(null),[M,X]=i.useState(!0),[S,I]=i.useState(!1),[D,V]=i.useState(null),[F,E]=i.useState(0),[R,Y]=i.useState(""),[$,de]=i.useState("all"),[Z,xe]=i.useState("all"),G=i.useRef(null),{add:Ie,subtotal:De,items:J,changeQty:ee}=Te(),{user:m,role:B}=Me(),v=Ve(),[Ae]=qe(),n=Ae.get("restaurant"),O=1.75,se=i.useMemo(()=>{const s=new Set;return a.forEach(t=>{t.category&&s.add(t.category)}),["all",...Array.from(s)]},[a]),q=i.useMemo(()=>{let s=[...a];if($!=="all"&&(s=s.filter(t=>t.category===$)),R.trim()){const t=R.toLowerCase();s=s.filter(r=>{var h,c;return r.name.toLowerCase().includes(t)||((h=r.description)==null?void 0:h.toLowerCase().includes(t))||((c=r.category)==null?void 0:c.toLowerCase().includes(t))})}switch(Z){case"popular":s.sort((t,r)=>(r.orderCount||0)-(t.orderCount||0));break;case"price_low":s.sort((t,r)=>t.price-r.price);break;case"price_high":s.sort((t,r)=>r.price-t.price);break;case"new":s.sort((t,r)=>{var g,o,u,d,j,N;const h=((u=(o=(g=t.createdAt)==null?void 0:g.toDate)==null?void 0:o.call(g))==null?void 0:u.getTime())||0;return(((N=(j=(d=r.createdAt)==null?void 0:d.toDate)==null?void 0:j.call(d))==null?void 0:N.getTime())||0)-h});break;case"available":s=s.filter(t=>t.available!==!1);break}return s},[a,$,R,Z]),Pe=s=>{navigator.clipboard.writeText(s),v.success("ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ! üìã")},Fe=()=>{navigator.share?navigator.share({title:(l==null?void 0:l.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",text:`ÿ™ŸÅÿ∂ŸÑ ÿ®ÿ≤Ÿäÿßÿ±ÿ© ${l==null?void 0:l.name} ÿπŸÑŸâ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™`,url:window.location.href}):Pe(window.location.href)};i.useEffect(()=>{if(!n)return;(async()=>{try{const t=A(k(x,"storeFollowers"),f("restaurantId","==",n)),r=await U(t);if(E(r.size),m){const h=A(k(x,"storeFollowers"),f("restaurantId","==",n),f("followerId","==",m.uid)),c=await U(h);c.empty||(I(!0),V(c.docs[0].id))}}catch(t){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©:",t)}})()},[n,m]);const Ee=async()=>{var s;if(!m){v.warning("ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑŸÉ ÿ£ŸàŸÑÿßŸã ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©");return}if(n)try{if(S&&D){await Ue(T(x,"storeFollowers",D)),I(!1),V(null),E(r=>Math.max(0,r-1));const t=T(x,"restaurantStats",n);await ne(t,{followersCount:oe(-1)}).catch(()=>{}),v.info("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©")}else{const t=await ze(k(x,"storeFollowers"),{followerId:m.uid,followerName:m.displayName||((s=m.email)==null?void 0:s.split("@")[0])||"ÿπŸÖŸäŸÑ",restaurantId:n,createdAt:be()});I(!0),V(t.id),E(c=>c+1);const r=T(x,"restaurantStats",n);if((await fe(r)).exists())await ne(r,{followersCount:oe(1)});else{const{setDoc:c}=await $e(async()=>{const{setDoc:g}=await import("./vendor-firebase-Co4MdP0H.js").then(o=>o.M);return{setDoc:g}},[]);await c(T(x,"restaurantStats",n),{restaurantId:n,totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:0,appDownloads:0,followersCount:1,dailyViews:{},updatedAt:be()})}v.success("ÿ£ŸÜÿ™ ÿßŸÑÿ¢ŸÜ ÿ™ÿ™ÿßÿ®ÿπ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ™ÿ¨ÿ±! üíú")}}catch(t){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©:",t),v.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}};i.useEffect(()=>{(async()=>{let s;if(n){(m==null?void 0:m.uid)===n?s=A(k(x,"menuItems"),f("ownerId","==",n)):s=A(k(x,"menuItems"),f("available","==",!0),f("ownerId","==",n));const u=await fe(T(x,"restaurants",n));u.exists()&&z({id:u.id,...u.data()});try{const d=A(k(x,"promotions"),f("ownerId","==",n),f("isActive","==",!0)),j=await U(d);if(!j.empty){const N=j.docs.map(y=>{var H,ue;return{id:y.id,...y.data(),expiresAt:(ue=(H=y.data().expiresAt)==null?void 0:H.toDate)==null?void 0:ue.call(H)}}),_e=new Date,ge=N.filter(y=>!y.expiresAt||new Date(y.expiresAt)>_e);if(ge.length>0){const y=ge[0];W(y),await ne(T(x,"promotions",y.id),{viewsCount:oe(1)})}}}catch{}}else s=A(k(x,"menuItems"),f("available","==",!0));const r=(await U(s)).docs.map(o=>({id:o.id,...o.data()})),h=[...new Set(r.map(o=>o.ownerId).filter(Boolean))],c=new Map;if(h.length>0){const o=es(h,30);for(const u of o){const d=A(k(x,"restaurants"),f(Le(),"in",u));(await U(d)).docs.forEach(N=>c.set(N.id,{id:N.id,...N.data()}))}}const g=r.map(o=>({...o,restaurant:o.ownerId?c.get(o.ownerId):void 0}));P(g),b(!1)})()},[n]);const te=s=>J.find(t=>t.id===s),ae=s=>{var u,d,j;if(!s.ownerId){v.warning("‚ö†Ô∏è ÿßŸÑÿµŸÜŸÅ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÖÿ∑ÿπŸÖ");return}const t=(u=J[0])==null?void 0:u.ownerId;if(t&&t!==s.ownerId){v.warning("‚ö†Ô∏è ŸÑÿß ŸäŸÖŸÉŸÜ ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖŸÜ ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ŸÖÿ∑ÿπŸÖ ŸÅŸä ŸÜŸÅÿ≥ ÿßŸÑÿ∑ŸÑÿ®");return}const r=s.discountPercent&&s.discountPercent>0,h=((j=(d=s.discountExpiresAt)==null?void 0:d.toDate)==null?void 0:j.call(d))||(s.discountExpiresAt?new Date(s.discountExpiresAt):null),c=r&&(!h||h>new Date),g=s.price+O,o=c?g-g*((s.discountPercent||0)/100):g;Ie({id:s.id,name:s.name,price:o,ownerId:s.ownerId}),v.success("ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ‚úÖ")},me=s=>{G.current&&G.current.scrollBy({left:s==="left"?-200:200,behavior:"smooth"})};if(C)return e.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-sky-50 to-white gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-sky-200 rounded-full"}),e.jsx("div",{className:"w-20 h-20 border-4 border-sky-500 border-t-transparent rounded-full animate-spin absolute inset-0"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sky-600 text-lg font-bold mb-1",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÜŸäŸà"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ŸÑÿ≠ÿ∏ÿßÿ™..."})]})]});const Q=!m||B==="customer"||B==="admin"||B==="developer"||!B,L=(l==null?void 0:l.isOpen)!==!1,p=m&&n===m.uid,le=J.reduce((s,t)=>s+t.qty,0),re=(s=>{switch(s){case"gold":return{label:"ÿ∞Ÿáÿ®Ÿä",bg:"from-yellow-400 to-amber-500",icon:"üëë"};case"silver":return{label:"ŸÅÿ∂Ÿä",bg:"from-gray-300 to-gray-400",icon:"ü•à"};default:return{label:"ÿ®ÿ±ŸàŸÜÿ≤Ÿä",bg:"from-orange-400 to-orange-500",icon:"ü•â"}}})(l==null?void 0:l.sellerTier),Re=[{value:"all",label:"ÿßŸÑŸÉŸÑ",icon:e.jsx(K,{className:"w-4 h-4"})},{value:"popular",label:"ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ∑ŸÑÿ®Ÿãÿß",icon:e.jsx(Se,{className:"w-4 h-4"})},{value:"price_low",label:"ÿßŸÑÿ£ÿ±ÿÆÿµ",icon:e.jsx(ke,{className:"w-4 h-4 rotate-180"})},{value:"price_high",label:"ÿßŸÑÿ£ÿ∫ŸÑŸâ",icon:e.jsx(ke,{className:"w-4 h-4"})},{value:"new",label:"ÿ¨ÿØŸäÿØ",icon:e.jsx(Ge,{className:"w-4 h-4"})},{value:"available",label:"ŸÖÿ™ŸàŸÅÿ± ÿßŸÑÿ¢ŸÜ",icon:e.jsx(je,{className:"w-4 h-4"})}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-sky-50 via-white to-sky-50 pb-32 -mx-4 -mt-4",children:[!L&&!p&&e.jsxs("div",{className:"bg-gradient-to-l from-red-500 to-rose-600 text-white p-4 flex items-center justify-center gap-3 shadow-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Ce,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-lg block",children:"ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖÿ∫ŸÑŸÇ ÿ≠ÿßŸÑŸäÿßŸã"}),e.jsx("span",{className:"text-white/80 text-sm",children:"ŸÑÿß ŸäŸÖŸÉŸÜ ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]})]}),p&&e.jsxs("div",{className:"bg-gradient-to-l from-emerald-500 to-teal-600 text-white p-4 shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold block",children:"Ÿáÿ∞ÿß ŸÖÿ™ÿ¨ÿ±ŸÉ!"}),e.jsxs("span",{className:"text-white/80 text-sm",children:["ÿ£ŸÜÿ™ ÿ™ÿ±Ÿâ ",a.length," ÿµŸÜŸÅ (",a.filter(s=>s.available!==!1).length," ŸÖÿ™ÿßÿ≠)"]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(_,{to:"/owner/menu",className:"flex-1 bg-white text-emerald-600 px-4 py-2.5 rounded-xl font-bold hover:bg-gray-100 transition flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(K,{className:"w-4 h-4"}),"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÜŸäŸà"]}),e.jsx(_,{to:"/owner/edit",className:"flex-1 bg-white/20 text-white px-4 py-2.5 rounded-xl font-bold hover:bg-white/30 transition flex items-center justify-center gap-2",children:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ™ÿ¨ÿ±"}),e.jsxs(_,{to:"/",className:"flex-1 bg-white/20 text-white px-4 py-2.5 rounded-xl font-bold hover:bg-white/30 transition flex items-center justify-center gap-2",children:["ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ",e.jsx(we,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-56 sm:h-72 relative overflow-hidden",children:[l!=null&&l.coverUrl?e.jsx("img",{src:l.coverUrl,alt:"ÿ∫ŸÑÿßŸÅ",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-sky-400 via-sky-500 to-sky-600"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-56 h-56 bg-sky-300/10 rounded-full translate-y-1/2 -translate-x-1/2 blur-2xl"}),e.jsxs(_,{to:"/restaurants",className:"absolute top-4 right-4 flex items-center gap-2 bg-white/90 backdrop-blur-sm text-gray-700 px-4 py-2.5 rounded-xl text-sm font-bold hover:bg-white transition shadow-lg",children:[e.jsx(we,{className:"w-4 h-4"}),"ÿ±ÿ¨Ÿàÿπ"]}),e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[!p&&e.jsxs("button",{onClick:Ee,className:`flex items-center gap-2 px-4 py-2.5 backdrop-blur-sm rounded-xl font-bold transition shadow-lg ${S?"bg-pink-500 text-white hover:bg-pink-600":"bg-white/90 text-gray-700 hover:bg-white"}`,children:[e.jsx(pe,{className:`w-5 h-5 ${S?"fill-white":""}`}),e.jsx("span",{className:"text-sm",children:S?"ŸÖÿ™ÿßÿ®Ÿéÿπ":"ŸÖÿ™ÿßÿ®ÿπÿ©"})]}),e.jsx("button",{onClick:Fe,className:"p-3 bg-white/90 backdrop-blur-sm rounded-xl text-gray-700 hover:bg-white transition shadow-lg",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),l&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-2xl bg-white p-1 shadow-2xl",children:l.logoUrl?e.jsx("img",{src:l.logoUrl,alt:l.name,className:"w-full h-full rounded-xl object-cover"}):e.jsx("div",{className:"w-full h-full rounded-xl bg-gradient-to-br from-sky-100 to-sky-200 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"üçΩÔ∏è"})})}),(l.isVerified||l.licenseStatus==="approved")&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center border-3 border-white shadow-lg",children:e.jsx(je,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"flex-1 pb-1",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-white mb-1 drop-shadow-lg",children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[L?e.jsxs("span",{className:"bg-emerald-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"ŸÖÿ™ÿßÿ≠ ÿßŸÑÿ¢ŸÜ"]}):e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow",children:"ŸÖÿ∫ŸÑŸÇ"}),e.jsxs("span",{className:"bg-white/90 backdrop-blur-sm text-gray-700 text-xs font-bold px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx(Qe,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),((he=l.averageRating)==null?void 0:he.toFixed(1))||"0.0"]}),e.jsxs("span",{className:`bg-gradient-to-r ${re.bg} text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow`,children:[re.icon," ",re.label]}),l.city&&e.jsxs("span",{className:"bg-white/90 backdrop-blur-sm text-gray-600 text-xs font-medium px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx(He,{className:"w-3 h-3"}),l.city]})]})]})]})})]}),l&&e.jsx("div",{className:"mx-4 -mt-4 relative z-10",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-4",children:e.jsxs("div",{className:"grid grid-cols-4 divide-x divide-gray-100 divide-x-reverse",children:[e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-pink-50 rounded-xl flex items-center justify-center",children:e.jsx(pe,{className:"w-5 h-5 text-pink-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:F}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ŸÖÿ™ÿßÿ®ÿπ"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-amber-50 rounded-xl flex items-center justify-center",children:e.jsx(K,{className:"w-5 h-5 text-amber-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:a.length}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ÿµŸÜŸÅ"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-emerald-50 rounded-xl flex items-center justify-center",children:e.jsx(Ke,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:l.totalOrders||0}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ÿ∑ŸÑÿ®"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-sky-50 rounded-xl flex items-center justify-center",children:e.jsx(We,{className:"w-5 h-5 text-sky-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:l.onTimeDeliveryRate?`${Math.round(l.onTimeDeliveryRate)}%`:"‚Äî"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ÿßŸÑÿ™ÿ≤ÿßŸÖ"})]})]})})})]}),(l==null?void 0:l.announcement)&&e.jsx("div",{className:"mx-4 mt-4",children:e.jsxs("div",{className:"bg-gradient-to-l from-sky-50 to-sky-100 border border-sky-200 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ye,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sky-900 font-medium leading-relaxed",children:l.announcement})})]})}),w&&M&&e.jsxs("div",{className:"mx-4 mt-6 bg-gradient-to-r from-violet-500 via-purple-500 to-pink-500 rounded-2xl shadow-xl overflow-hidden relative",children:[e.jsx("button",{onClick:()=>X(!1),className:"absolute top-3 left-3 z-10 p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:e.jsx(ve,{className:"w-4 h-4"})}),e.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1.5 px-3 py-1.5 bg-white text-purple-600 text-xs font-bold rounded-full shadow",children:[e.jsx(ye,{className:"w-3.5 h-3.5"}),"ÿ•ÿπŸÑÿßŸÜ"]}),w.mediaUrl&&e.jsx("img",{src:w.mediaUrl,alt:"",className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-4",children:[w.title&&e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:w.title}),w.description&&e.jsx("p",{className:"text-white/80 text-sm",children:w.description})]})]}),e.jsxs("div",{className:"px-4 mt-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿµŸÜŸÅ...",value:R,onChange:s=>Y(s.target.value),className:"w-full pr-12 pl-12 py-4 bg-white rounded-2xl border-2 border-gray-100 focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-lg shadow-sm"}),R&&e.jsx("button",{onClick:()=>Y(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(ve,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide",children:Re.map(s=>e.jsxs("button",{onClick:()=>xe(s.value),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${Z===s.value?"bg-sky-500 text-white shadow-lg shadow-sky-200":"bg-white text-gray-600 border border-gray-200 hover:border-sky-300"}`,children:[s.icon,s.label]},s.value))}),se.length>1&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>me("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 bg-gradient-to-l from-sky-50 via-sky-50 to-transparent flex items-center justify-start",children:e.jsx(Xe,{className:"w-5 h-5 text-gray-500"})}),e.jsx("div",{ref:G,className:"flex items-center gap-2 overflow-x-auto px-8 py-2 scrollbar-hide scroll-smooth",children:se.map(s=>e.jsx("button",{onClick:()=>de(s),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${$===s?"bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-200":"bg-white text-gray-600 border border-gray-200 hover:border-sky-300 hover:bg-sky-50"}`,children:s==="all"?"üçΩÔ∏è ÿßŸÑŸÉŸÑ":s},s))}),e.jsx("button",{onClick:()=>me("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 bg-gradient-to-r from-sky-50 via-sky-50 to-transparent flex items-center justify-end",children:e.jsx(Ye,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-sky-100 to-blue-100 rounded-2xl flex items-center justify-center shadow-sm",children:e.jsx(K,{className:"w-6 h-6 text-sky-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ÿµŸÜÿßŸÅ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[q.length," ÿµŸÜŸÅ",p&&` ‚Ä¢ ${a.filter(s=>s.available===!1).length} ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠`]})]})]}),p&&e.jsxs(_,{to:"/owner/menu",className:"flex items-center gap-2 px-4 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition",children:[e.jsx(ce,{className:"w-4 h-4"}),"ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÜŸÅ"]})]}),q.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-3xl border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Ne,{className:"w-10 h-10 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 text-lg font-bold mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿµŸÜÿßŸÅ"}),e.jsx("p",{className:"text-gray-400",children:"ÿ¨ÿ±ÿ® ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÅŸÑÿ™ÿ± ÿ£Ÿà ÿßŸÑÿ®ÿ≠ÿ´"}),e.jsx("button",{onClick:()=>{Y(""),de("all"),xe("all")},className:"mt-4 px-6 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition",children:"ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿπŸäŸäŸÜ"})]}):$==="all"&&!R?e.jsxs("div",{className:"space-y-8",children:[se.filter(s=>s!=="all").map(s=>{const t=q.filter(r=>r.category===s);return t.length===0?null:e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 px-5 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-xl",children:"üçΩÔ∏è"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:s}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.length," ÿµŸÜŸÅ"]})]})]}),p&&e.jsxs("span",{className:"text-xs text-gray-400",children:[t.filter(r=>r.available===!1).length," ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠"]})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(r=>e.jsx(ie,{item:r,isOwnStore:p,canOrder:Q,isStoreOpen:L,getItemInCart:te,handleAdd:ae,changeQty:ee,SERVICE_FEE_PER_ITEM:O},r.id))})})]},s)}),(()=>{const s=q.filter(t=>!t.category);return s.length===0?null:e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 px-5 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-xl",children:"üì¶"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"ÿ£ÿµŸÜÿßŸÅ ÿ£ÿÆÿ±Ÿâ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.length," ÿµŸÜŸÅ"]})]})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map(t=>e.jsx(ie,{item:t,isOwnStore:p,canOrder:Q,isStoreOpen:L,getItemInCart:te,handleAdd:ae,changeQty:ee,SERVICE_FEE_PER_ITEM:O},t.id))})})]})})()]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:q.map(s=>e.jsx(ie,{item:s,isOwnStore:p,canOrder:Q,isStoreOpen:L,getItemInCart:te,handleAdd:ae,changeQty:ee,SERVICE_FEE_PER_ITEM:O},s.id))})]}),le>0&&Q&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 pb-6 bg-gradient-to-t from-white via-white/95 to-transparent",children:e.jsxs(_,{to:"/checkout",className:"flex items-center justify-between w-full max-w-lg mx-auto px-6 py-4 rounded-2xl bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-2xl shadow-sky-300/50 font-bold hover:from-sky-600 hover:to-blue-700 transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(Ze,{className:"w-6 h-6"})}),e.jsx("span",{className:"absolute -top-2 -right-2 w-6 h-6 bg-amber-400 text-sky-900 text-sm font-black rounded-full flex items-center justify-center shadow-lg",children:le})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-lg font-bold",children:"ÿπÿ±ÿ∂ ÿßŸÑÿ≥ŸÑÿ©"}),e.jsxs("span",{className:"block text-sky-100 text-sm",children:[le," ŸÖŸÜÿ™ÿ¨"]})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"block text-2xl font-black",children:De.toFixed(2)}),e.jsx("span",{className:"block text-sky-100 text-sm",children:"ÿ±.ÿ≥"})]})]})})]})},ie=({item:a,isOwnStore:P,canOrder:C,isStoreOpen:b,getItemInCart:l,handleAdd:z,changeQty:w,SERVICE_FEE_PER_ITEM:W})=>{var F,E;const M=l(a.id),X=a.discountPercent&&a.discountPercent>0,S=((E=(F=a.discountExpiresAt)==null?void 0:F.toDate)==null?void 0:E.call(F))||(a.discountExpiresAt?new Date(a.discountExpiresAt):null),I=X&&(!S||S>new Date),D=a.price+W,V=I?D-D*((a.discountPercent||0)/100):D;return e.jsxs("div",{className:`bg-white rounded-2xl overflow-hidden border shadow-sm hover:shadow-xl transition-all duration-300 group ${a.available===!1?"border-red-200 opacity-75":"border-gray-100 hover:border-sky-200"}`,children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[a.imageUrl?e.jsx("img",{src:a.imageUrl,alt:a.name,className:`w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 ${a.available===!1?"grayscale":""}`}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:e.jsx("span",{className:"text-5xl opacity-30",children:"üçΩÔ∏è"})}),a.available===!1&&P&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-lg",children:"üö´ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠"})}),I&&a.available!==!1&&e.jsxs("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2.5 py-1 rounded-lg shadow-lg",children:["ÿÆÿµŸÖ ",a.discountPercent,"%"]}),(a.orderCount||0)>10&&a.available!==!1&&e.jsxs("div",{className:"absolute top-2 left-2 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-lg shadow flex items-center gap-1",children:[e.jsx(Se,{className:"w-3 h-3"}),"ÿ¥ÿßÿ¶ÿπ"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-1 line-clamp-1",children:a.name}),a.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mb-2",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:`text-lg font-black ${a.available===!1?"text-gray-400":"text-sky-600"}`,children:[V.toFixed(0)," ÿ±.ÿ≥"]}),I&&e.jsx("span",{className:"text-sm text-gray-400 line-through",children:D.toFixed(0)})]}),C&&b&&a.available!==!1&&e.jsx(e.Fragment,{children:M?e.jsxs("div",{className:"flex items-center justify-between bg-sky-50 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>w(a.id,M.qty-1),className:"w-9 h-9 bg-white rounded-lg flex items-center justify-center text-sky-600 shadow-sm hover:bg-sky-100 transition",children:e.jsx(Je,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-lg font-black text-sky-600",children:M.qty}),e.jsx("button",{onClick:()=>z(a),className:"w-9 h-9 bg-sky-500 rounded-lg flex items-center justify-center text-white shadow-lg hover:bg-sky-600 transition",children:e.jsx(ce,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>z(a),className:"w-full py-2.5 rounded-xl font-bold text-sm bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-200 hover:shadow-xl hover:from-sky-600 hover:to-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"ÿ£ÿ∂ŸÅ"]})}),C&&!b&&e.jsxs("div",{className:"w-full py-2.5 rounded-xl font-bold text-sm bg-gray-100 text-gray-400 text-center flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4"}),"ŸÖÿ∫ŸÑŸÇ"]})]})]})};export{ns as MenuPage};
