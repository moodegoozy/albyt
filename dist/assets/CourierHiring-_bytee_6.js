import{u as v,c as q,j as s,d as o}from"./index-FuU3jBZc.js";import{r}from"./vendor-react-C_wfuX_s.js";import{t as x,m as i,q as I,w as C,y as R,z as S}from"./vendor-firebase-Co4MdP0H.js";import{at as E,K as D,aO as A,e as U}from"./vendor-icons-Dyg7S3Xx.js";const L=()=>{const{user:a}=v(),g=q(),[h,p]=r.useState([]),[b,c]=r.useState({}),[f,y]=r.useState(!0),[l,u]=r.useState(null);r.useEffect(()=>{if(!a)return;(async()=>{const j=(await x(i(o,"restaurants"))).docs.map(n=>({id:n.id,...n.data()}));p(j);const N=I(i(o,"hiringRequests"),C("courierId","==",a.uid)),k=await x(N),m={};k.docs.forEach(n=>{const d=n.data();m[d.restaurantId]={restaurantId:d.restaurantId,status:d.status}}),c(m),y(!1)})()},[a]);const w=async e=>{if(!a){g.warning("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");return}u(e.id),await R(i(o,"hiringRequests"),{courierId:a.uid,courierName:a.displayName||"Ù…Ù†Ø¯ÙˆØ¨",restaurantId:e.id,restaurantName:e.name,status:"pending",createdAt:S()}),c(t=>({...t,[e.id]:{restaurantId:e.id,status:"pending"}})),u(null)};return f?s.jsx("div",{className:"text-center py-10 text-sky-600",children:"â³ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…..."}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 py-8 px-4",children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold text-sky-600 text-center mb-8 flex items-center justify-center gap-2",children:[s.jsx(E,{className:"w-7 h-7 text-sky-500"}),"Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØ¸ÙŠÙ"]}),s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto",children:h.map(e=>{const t=b[e.id];return s.jsxs("div",{className:"glass-card rounded-2xl p-6 hover:shadow-xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[e.logoUrl?s.jsx("img",{src:e.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-sky-300 shadow"}):s.jsx("div",{className:"w-24 h-24 rounded-full bg-sky-100 flex items-center justify-center text-3xl mb-4",children:"ğŸ´"}),s.jsx("h3",{className:"font-bold text-lg mb-2 text-sky-900",children:e.name}),t?s.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${t.status==="pending"?"bg-amber-100 text-amber-700 border border-amber-200":t.status==="accepted"?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:[t.status==="pending"&&s.jsx(D,{className:"w-4 h-4"}),t.status==="accepted"&&s.jsx(A,{className:"w-4 h-4"}),t.status==="rejected"&&s.jsx(U,{className:"w-4 h-4"}),t.status==="pending"?"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©":t.status==="accepted"?"âœ… ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„":"âŒ Ù…Ø±ÙÙˆØ¶"]}):s.jsx("button",{disabled:l===e.id,onClick:()=>w(e),className:"mt-4 w-full px-4 py-2 rounded-xl bg-gradient-to-r from-sky-500 to-sky-600 text-white font-bold shadow-lg shadow-sky-200/50 hover:shadow-xl hover:scale-105 transition disabled:opacity-50",children:l===e.id?"â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"ğŸ“© Ø·Ù„Ø¨ ØªÙˆØ¸ÙŠÙ"})]},e.id)})})]})};export{L as CourierHiring};
