function XN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function YN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dv={exports:{}},dd={},hv={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fl=Symbol.for("react.element"),JN=Symbol.for("react.portal"),ZN=Symbol.for("react.fragment"),eE=Symbol.for("react.strict_mode"),tE=Symbol.for("react.profiler"),nE=Symbol.for("react.provider"),rE=Symbol.for("react.context"),sE=Symbol.for("react.forward_ref"),iE=Symbol.for("react.suspense"),oE=Symbol.for("react.memo"),aE=Symbol.for("react.lazy"),ay=Symbol.iterator;function lE(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var fv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mv=Object.assign,pv={};function Do(t,e,n){this.props=t,this.context=e,this.refs=pv,this.updater=n||fv}Do.prototype.isReactComponent={};Do.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Do.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gv(){}gv.prototype=Do.prototype;function Am(t,e,n){this.props=t,this.context=e,this.refs=pv,this.updater=n||fv}var Pm=Am.prototype=new gv;Pm.constructor=Am;mv(Pm,Do.prototype);Pm.isPureReactComponent=!0;var ly=Array.isArray,yv=Object.prototype.hasOwnProperty,Dm={current:null},xv={key:!0,ref:!0,__self:!0,__source:!0};function vv(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)yv.call(e,r)&&!xv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Fl,type:t,key:i,ref:a,props:s,_owner:Dm.current}}function cE(t,e){return{$$typeof:Fl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Om(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fl}function uE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cy=/\/+/g;function dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uE(""+t.key):e.toString(36)}function Zc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fl:case JN:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+dh(a,0):r,ly(s)?(n="",t!=null&&(n=t.replace(cy,"$&/")+"/"),Zc(s,e,n,"",function(d){return d})):s!=null&&(Om(s)&&(s=cE(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(cy,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",ly(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+dh(i,c);a+=Zc(i,e,n,u,s)}else if(u=lE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+dh(i,c++),a+=Zc(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function jc(t,e,n){if(t==null)return t;var r=[],s=0;return Zc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function dE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},eu={transition:null},hE={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:eu,ReactCurrentOwner:Dm};function _v(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:jc,forEach:function(t,e,n){jc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jc(t,function(){e++}),e},toArray:function(t){return jc(t,function(e){return e})||[]},only:function(t){if(!Om(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Do;le.Fragment=ZN;le.Profiler=tE;le.PureComponent=Am;le.StrictMode=eE;le.Suspense=iE;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hE;le.act=_v;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mv({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Dm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)yv.call(e,u)&&!xv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Fl,type:t.type,key:s,ref:i,props:r,_owner:a}};le.createContext=function(t){return t={$$typeof:rE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nE,_context:t},t.Consumer=t};le.createElement=vv;le.createFactory=function(t){var e=vv.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:sE,render:t}};le.isValidElement=Om;le.lazy=function(t){return{$$typeof:aE,_payload:{_status:-1,_result:t},_init:dE}};le.memo=function(t,e){return{$$typeof:oE,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=eu.transition;eu.transition={};try{t()}finally{eu.transition=e}};le.unstable_act=_v;le.useCallback=function(t,e){return Bt.current.useCallback(t,e)};le.useContext=function(t){return Bt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Bt.current.useEffect(t,e)};le.useId=function(){return Bt.current.useId()};le.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Bt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};le.useRef=function(t){return Bt.current.useRef(t)};le.useState=function(t){return Bt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Bt.current.useTransition()};le.version="18.3.1";hv.exports=le;var j=hv.exports;const wv=YN(j),fE=XN({__proto__:null,default:wv},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE=j,pE=Symbol.for("react.element"),gE=Symbol.for("react.fragment"),yE=Object.prototype.hasOwnProperty,xE=mE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vE={key:!0,ref:!0,__self:!0,__source:!0};function bv(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)yE.call(e,r)&&!vE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:pE,type:t,key:i,ref:a,props:s,_owner:xE.current}}dd.Fragment=gE;dd.jsx=bv;dd.jsxs=bv;dv.exports=dd;var o=dv.exports,rf={},Nv={exports:{}},pn={},Ev={exports:{}},Tv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ee){var te=q.length;q.push(ee);e:for(;0<te;){var ve=te-1>>>1,ye=q[ve];if(0<s(ye,ee))q[ve]=ee,q[te]=ye,te=ve;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ee=q[0],te=q.pop();if(te!==ee){q[0]=te;e:for(var ve=0,ye=q.length,Me=ye>>>1;ve<Me;){var en=2*(ve+1)-1,jn=q[en],tn=en+1,nn=q[tn];if(0>s(jn,te))tn<ye&&0>s(nn,jn)?(q[ve]=nn,q[tn]=te,ve=tn):(q[ve]=jn,q[en]=te,ve=en);else if(tn<ye&&0>s(nn,te))q[ve]=nn,q[tn]=te,ve=tn;else break e}}return ee}function s(q,ee){var te=q.sortIndex-ee.sortIndex;return te!==0?te:q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,m=null,g=3,_=!1,R=!1,k=!1,S=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var ee=n(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=q)r(d),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=n(d)}}function E(q){if(k=!1,N(q),!R)if(n(u)!==null)R=!0,qt(O);else{var ee=n(d);ee!==null&&ut(E,ee.startTime-q)}}function O(q,ee){R=!1,k&&(k=!1,b(y),y=-1),_=!0;var te=g;try{for(N(ee),m=n(u);m!==null&&(!(m.expirationTime>ee)||q&&!P());){var ve=m.callback;if(typeof ve=="function"){m.callback=null,g=m.priorityLevel;var ye=ve(m.expirationTime<=ee);ee=t.unstable_now(),typeof ye=="function"?m.callback=ye:m===n(u)&&r(u),N(ee)}else r(u);m=n(u)}if(m!==null)var Me=!0;else{var en=n(d);en!==null&&ut(E,en.startTime-ee),Me=!1}return Me}finally{m=null,g=te,_=!1}}var L=!1,x=null,y=-1,I=5,C=-1;function P(){return!(t.unstable_now()-C<I)}function D(){if(x!==null){var q=t.unstable_now();C=q;var ee=!0;try{ee=x(!0,q)}finally{ee?A():(L=!1,x=null)}}else L=!1}var A;if(typeof v=="function")A=function(){v(D)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,He=be.port2;be.port1.onmessage=D,A=function(){He.postMessage(null)}}else A=function(){S(D,0)};function qt(q){x=q,L||(L=!0,A())}function ut(q,ee){y=S(function(){q(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){R||_||(R=!0,qt(O))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var te=g;g=ee;try{return q()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ee){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=g;g=q;try{return ee()}finally{g=te}},t.unstable_scheduleCallback=function(q,ee,te){var ve=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ve+te:ve):te=ve,q){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=te+ye,q={id:f++,callback:ee,priorityLevel:q,startTime:te,expirationTime:ye,sortIndex:-1},te>ve?(q.sortIndex=te,e(d,q),n(u)===null&&q===n(d)&&(k?(b(y),y=-1):k=!0,ut(E,te-ve))):(q.sortIndex=ye,e(u,q),R||_||(R=!0,qt(O))),q},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(q){var ee=g;return function(){var te=g;g=ee;try{return q.apply(this,arguments)}finally{g=te}}}})(Tv);Ev.exports=Tv;var _E=Ev.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE=j,mn=_E;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Iv=new Set,sl={};function gi(t,e){_o(t,e),_o(t+"Capture",e)}function _o(t,e){for(sl[t]=e,t=0;t<e.length;t++)Iv.add(e[t])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sf=Object.prototype.hasOwnProperty,bE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uy={},dy={};function NE(t){return sf.call(dy,t)?!0:sf.call(uy,t)?!1:bE.test(t)?dy[t]=!0:(uy[t]=!0,!1)}function EE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TE(t,e,n,r){if(e===null||typeof e>"u"||EE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lm=/[\-:]([a-z])/g;function Mm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lm,Mm);It[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lm,Mm);It[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lm,Mm);It[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vm(t,e,n,r){var s=It.hasOwnProperty(e)?It[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TE(e,n,s,r)&&(n=null),r||s===null?NE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Or=wE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sc=Symbol.for("react.element"),Qi=Symbol.for("react.portal"),Xi=Symbol.for("react.fragment"),Um=Symbol.for("react.strict_mode"),of=Symbol.for("react.profiler"),kv=Symbol.for("react.provider"),jv=Symbol.for("react.context"),Fm=Symbol.for("react.forward_ref"),af=Symbol.for("react.suspense"),lf=Symbol.for("react.suspense_list"),$m=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),Sv=Symbol.for("react.offscreen"),hy=Symbol.iterator;function _a(t){return t===null||typeof t!="object"?null:(t=hy&&t[hy]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,hh;function Ca(t){if(hh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hh=e&&e[1]||""}return`
`+hh+t}var fh=!1;function mh(t,e){if(!t||fh)return"";fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{fh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ca(t):""}function IE(t){switch(t.tag){case 5:return Ca(t.type);case 16:return Ca("Lazy");case 13:return Ca("Suspense");case 19:return Ca("SuspenseList");case 0:case 2:case 15:return t=mh(t.type,!1),t;case 11:return t=mh(t.type.render,!1),t;case 1:return t=mh(t.type,!0),t;default:return""}}function cf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xi:return"Fragment";case Qi:return"Portal";case of:return"Profiler";case Um:return"StrictMode";case af:return"Suspense";case lf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jv:return(t.displayName||"Context")+".Consumer";case kv:return(t._context.displayName||"Context")+".Provider";case Fm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $m:return e=t.displayName||null,e!==null?e:cf(t.type)||"Memo";case Qr:e=t._payload,t=t._init;try{return cf(t(e))}catch{}}return null}function kE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cf(e);case 8:return e===Um?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jE(t){var e=Cv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cc(t){t._valueTracker||(t._valueTracker=jE(t))}function Rv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Cv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uf(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Av(t,e){e=e.checked,e!=null&&Vm(t,"checked",e,!1)}function df(t,e){Av(t,e);var n=vs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hf(t,e.type,n):e.hasOwnProperty("defaultValue")&&hf(t,e.type,vs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function my(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hf(t,e,n){(e!=="number"||_u(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ra=Array.isArray;function co(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ff(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function py(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ra(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vs(n)}}function Pv(t,e){var n=vs(e.value),r=vs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rc,Ov=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rc=Rc||document.createElement("div"),Rc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function il(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $a={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SE=["Webkit","ms","Moz","O"];Object.keys($a).forEach(function(t){SE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$a[e]=$a[t]})});function Lv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$a.hasOwnProperty(t)&&$a[t]?(""+e).trim():e+"px"}function Mv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Lv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var CE=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pf(t,e){if(e){if(CE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function gf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yf=null;function Bm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xf=null,uo=null,ho=null;function yy(t){if(t=zl(t)){if(typeof xf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=gd(e),xf(t.stateNode,t.type,e))}}function Vv(t){uo?ho?ho.push(t):ho=[t]:uo=t}function Uv(){if(uo){var t=uo,e=ho;if(ho=uo=null,yy(t),e)for(t=0;t<e.length;t++)yy(e[t])}}function Fv(t,e){return t(e)}function $v(){}var ph=!1;function Bv(t,e,n){if(ph)return t(e,n);ph=!0;try{return Fv(t,e,n)}finally{ph=!1,(uo!==null||ho!==null)&&($v(),Uv())}}function ol(t,e){var n=t.stateNode;if(n===null)return null;var r=gd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var vf=!1;if(kr)try{var wa={};Object.defineProperty(wa,"passive",{get:function(){vf=!0}}),window.addEventListener("test",wa,wa),window.removeEventListener("test",wa,wa)}catch{vf=!1}function RE(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ba=!1,wu=null,bu=!1,_f=null,AE={onError:function(t){Ba=!0,wu=t}};function PE(t,e,n,r,s,i,a,c,u){Ba=!1,wu=null,RE.apply(AE,arguments)}function DE(t,e,n,r,s,i,a,c,u){if(PE.apply(this,arguments),Ba){if(Ba){var d=wu;Ba=!1,wu=null}else throw Error(z(198));bu||(bu=!0,_f=d)}}function yi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xy(t){if(yi(t)!==t)throw Error(z(188))}function OE(t){var e=t.alternate;if(!e){if(e=yi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return xy(s),t;if(i===r)return xy(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function qv(t){return t=OE(t),t!==null?Hv(t):null}function Hv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hv(t);if(e!==null)return e;t=t.sibling}return null}var Wv=mn.unstable_scheduleCallback,vy=mn.unstable_cancelCallback,LE=mn.unstable_shouldYield,ME=mn.unstable_requestPaint,Ye=mn.unstable_now,VE=mn.unstable_getCurrentPriorityLevel,zm=mn.unstable_ImmediatePriority,Kv=mn.unstable_UserBlockingPriority,Nu=mn.unstable_NormalPriority,UE=mn.unstable_LowPriority,Gv=mn.unstable_IdlePriority,hd=null,Yn=null;function FE(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(hd,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:zE,$E=Math.log,BE=Math.LN2;function zE(t){return t>>>=0,t===0?32:31-($E(t)/BE|0)|0}var Ac=64,Pc=4194304;function Aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Eu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=Aa(c):(i&=a,i!==0&&(r=Aa(i)))}else a=n&~s,a!==0?r=Aa(a):i!==0&&(r=Aa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mn(e),s=1<<n,r|=t[n],e&=~s;return r}function qE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Mn(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=qE(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qv(){var t=Ac;return Ac<<=1,!(Ac&4194240)&&(Ac=64),t}function gh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $l(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function WE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function qm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function Xv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yv,Hm,Jv,Zv,e_,bf=!1,Dc=[],ls=null,cs=null,us=null,al=new Map,ll=new Map,Yr=[],KE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _y(t,e){switch(t){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":al.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ll.delete(e.pointerId)}}function ba(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zl(e),e!==null&&Hm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GE(t,e,n,r,s){switch(e){case"focusin":return ls=ba(ls,t,e,n,r,s),!0;case"dragenter":return cs=ba(cs,t,e,n,r,s),!0;case"mouseover":return us=ba(us,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return al.set(i,ba(al.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ll.set(i,ba(ll.get(i)||null,t,e,n,r,s)),!0}return!1}function t_(t){var e=Ws(t.target);if(e!==null){var n=yi(e);if(n!==null){if(e=n.tag,e===13){if(e=zv(n),e!==null){t.blockedOn=e,e_(t.priority,function(){Jv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yf=r,n.target.dispatchEvent(r),yf=null}else return e=zl(n),e!==null&&Hm(e),t.blockedOn=n,!1;e.shift()}return!0}function wy(t,e,n){tu(t)&&n.delete(e)}function QE(){bf=!1,ls!==null&&tu(ls)&&(ls=null),cs!==null&&tu(cs)&&(cs=null),us!==null&&tu(us)&&(us=null),al.forEach(wy),ll.forEach(wy)}function Na(t,e){t.blockedOn===e&&(t.blockedOn=null,bf||(bf=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,QE)))}function cl(t){function e(s){return Na(s,t)}if(0<Dc.length){Na(Dc[0],t);for(var n=1;n<Dc.length;n++){var r=Dc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ls!==null&&Na(ls,t),cs!==null&&Na(cs,t),us!==null&&Na(us,t),al.forEach(e),ll.forEach(e),n=0;n<Yr.length;n++)r=Yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yr.length&&(n=Yr[0],n.blockedOn===null);)t_(n),n.blockedOn===null&&Yr.shift()}var fo=Or.ReactCurrentBatchConfig,Tu=!0;function XE(t,e,n,r){var s=_e,i=fo.transition;fo.transition=null;try{_e=1,Wm(t,e,n,r)}finally{_e=s,fo.transition=i}}function YE(t,e,n,r){var s=_e,i=fo.transition;fo.transition=null;try{_e=4,Wm(t,e,n,r)}finally{_e=s,fo.transition=i}}function Wm(t,e,n,r){if(Tu){var s=Nf(t,e,n,r);if(s===null)Ih(t,e,r,Iu,n),_y(t,r);else if(GE(s,t,e,n,r))r.stopPropagation();else if(_y(t,r),e&4&&-1<KE.indexOf(t)){for(;s!==null;){var i=zl(s);if(i!==null&&Yv(i),i=Nf(t,e,n,r),i===null&&Ih(t,e,r,Iu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ih(t,e,r,null,n)}}var Iu=null;function Nf(t,e,n,r){if(Iu=null,t=Bm(r),t=Ws(t),t!==null)if(e=yi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Iu=t,null}function n_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VE()){case zm:return 1;case Kv:return 4;case Nu:case UE:return 16;case Gv:return 536870912;default:return 16}default:return 16}}var rs=null,Km=null,nu=null;function r_(){if(nu)return nu;var t,e=Km,n=e.length,r,s="value"in rs?rs.value:rs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return nu=s.slice(t,1<r?1-r:void 0)}function ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oc(){return!0}function by(){return!1}function gn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oc:by,this.isPropagationStopped=by,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oc)},persist:function(){},isPersistent:Oc}),e}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gm=gn(Oo),Bl=Be({},Oo,{view:0,detail:0}),JE=gn(Bl),yh,xh,Ea,fd=Be({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ea&&(Ea&&t.type==="mousemove"?(yh=t.screenX-Ea.screenX,xh=t.screenY-Ea.screenY):xh=yh=0,Ea=t),yh)},movementY:function(t){return"movementY"in t?t.movementY:xh}}),Ny=gn(fd),ZE=Be({},fd,{dataTransfer:0}),e2=gn(ZE),t2=Be({},Bl,{relatedTarget:0}),vh=gn(t2),n2=Be({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),r2=gn(n2),s2=Be({},Oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),i2=gn(s2),o2=Be({},Oo,{data:0}),Ey=gn(o2),a2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=c2[t])?!!e[t]:!1}function Qm(){return u2}var d2=Be({},Bl,{key:function(t){if(t.key){var e=a2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?l2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qm,charCode:function(t){return t.type==="keypress"?ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),h2=gn(d2),f2=Be({},fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ty=gn(f2),m2=Be({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qm}),p2=gn(m2),g2=Be({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),y2=gn(g2),x2=Be({},fd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),v2=gn(x2),_2=[9,13,27,32],Xm=kr&&"CompositionEvent"in window,za=null;kr&&"documentMode"in document&&(za=document.documentMode);var w2=kr&&"TextEvent"in window&&!za,s_=kr&&(!Xm||za&&8<za&&11>=za),Iy=" ",ky=!1;function i_(t,e){switch(t){case"keyup":return _2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yi=!1;function b2(t,e){switch(t){case"compositionend":return o_(e);case"keypress":return e.which!==32?null:(ky=!0,Iy);case"textInput":return t=e.data,t===Iy&&ky?null:t;default:return null}}function N2(t,e){if(Yi)return t==="compositionend"||!Xm&&i_(t,e)?(t=r_(),nu=Km=rs=null,Yi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return s_&&e.locale!=="ko"?null:e.data;default:return null}}var E2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!E2[t.type]:e==="textarea"}function a_(t,e,n,r){Vv(r),e=ku(e,"onChange"),0<e.length&&(n=new Gm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qa=null,ul=null;function T2(t){x_(t,0)}function md(t){var e=eo(t);if(Rv(e))return t}function I2(t,e){if(t==="change")return e}var l_=!1;if(kr){var _h;if(kr){var wh="oninput"in document;if(!wh){var Sy=document.createElement("div");Sy.setAttribute("oninput","return;"),wh=typeof Sy.oninput=="function"}_h=wh}else _h=!1;l_=_h&&(!document.documentMode||9<document.documentMode)}function Cy(){qa&&(qa.detachEvent("onpropertychange",c_),ul=qa=null)}function c_(t){if(t.propertyName==="value"&&md(ul)){var e=[];a_(e,ul,t,Bm(t)),Bv(T2,e)}}function k2(t,e,n){t==="focusin"?(Cy(),qa=e,ul=n,qa.attachEvent("onpropertychange",c_)):t==="focusout"&&Cy()}function j2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return md(ul)}function S2(t,e){if(t==="click")return md(e)}function C2(t,e){if(t==="input"||t==="change")return md(e)}function R2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:R2;function dl(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!sf.call(e,s)||!Fn(t[s],e[s]))return!1}return!0}function Ry(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ay(t,e){var n=Ry(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ry(n)}}function u_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?u_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function d_(){for(var t=window,e=_u();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_u(t.document)}return e}function Ym(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function A2(t){var e=d_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&u_(n.ownerDocument.documentElement,n)){if(r!==null&&Ym(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ay(n,i);var a=Ay(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var P2=kr&&"documentMode"in document&&11>=document.documentMode,Ji=null,Ef=null,Ha=null,Tf=!1;function Py(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tf||Ji==null||Ji!==_u(r)||(r=Ji,"selectionStart"in r&&Ym(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ha&&dl(Ha,r)||(Ha=r,r=ku(Ef,"onSelect"),0<r.length&&(e=new Gm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ji)))}function Lc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zi={animationend:Lc("Animation","AnimationEnd"),animationiteration:Lc("Animation","AnimationIteration"),animationstart:Lc("Animation","AnimationStart"),transitionend:Lc("Transition","TransitionEnd")},bh={},h_={};kr&&(h_=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function pd(t){if(bh[t])return bh[t];if(!Zi[t])return t;var e=Zi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in h_)return bh[t]=e[n];return t}var f_=pd("animationend"),m_=pd("animationiteration"),p_=pd("animationstart"),g_=pd("transitionend"),y_=new Map,Dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(t,e){y_.set(t,e),gi(e,[t])}for(var Nh=0;Nh<Dy.length;Nh++){var Eh=Dy[Nh],D2=Eh.toLowerCase(),O2=Eh[0].toUpperCase()+Eh.slice(1);Is(D2,"on"+O2)}Is(f_,"onAnimationEnd");Is(m_,"onAnimationIteration");Is(p_,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(g_,"onTransitionEnd");_o("onMouseEnter",["mouseout","mouseover"]);_o("onMouseLeave",["mouseout","mouseover"]);_o("onPointerEnter",["pointerout","pointerover"]);_o("onPointerLeave",["pointerout","pointerover"]);gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function Oy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,DE(r,e,void 0,t),t.currentTarget=null}function x_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Oy(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Oy(s,c,d),i=u}}}if(bu)throw t=_f,bu=!1,_f=null,t}function Re(t,e){var n=e[Cf];n===void 0&&(n=e[Cf]=new Set);var r=t+"__bubble";n.has(r)||(v_(e,t,2,!1),n.add(r))}function Th(t,e,n){var r=0;e&&(r|=4),v_(n,t,r,e)}var Mc="_reactListening"+Math.random().toString(36).slice(2);function hl(t){if(!t[Mc]){t[Mc]=!0,Iv.forEach(function(n){n!=="selectionchange"&&(L2.has(n)||Th(n,!1,t),Th(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mc]||(e[Mc]=!0,Th("selectionchange",!1,e))}}function v_(t,e,n,r){switch(n_(e)){case 1:var s=XE;break;case 4:s=YE;break;default:s=Wm}n=s.bind(null,e,n,t),s=void 0,!vf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ih(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=Ws(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}Bv(function(){var d=i,f=Bm(n),m=[];e:{var g=y_.get(t);if(g!==void 0){var _=Gm,R=t;switch(t){case"keypress":if(ru(n)===0)break e;case"keydown":case"keyup":_=h2;break;case"focusin":R="focus",_=vh;break;case"focusout":R="blur",_=vh;break;case"beforeblur":case"afterblur":_=vh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Ny;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=e2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=p2;break;case f_:case m_:case p_:_=r2;break;case g_:_=y2;break;case"scroll":_=JE;break;case"wheel":_=v2;break;case"copy":case"cut":case"paste":_=i2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Ty}var k=(e&4)!==0,S=!k&&t==="scroll",b=k?g!==null?g+"Capture":null:g;k=[];for(var v=d,N;v!==null;){N=v;var E=N.stateNode;if(N.tag===5&&E!==null&&(N=E,b!==null&&(E=ol(v,b),E!=null&&k.push(fl(v,E,N)))),S)break;v=v.return}0<k.length&&(g=new _(g,R,null,n,f),m.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==yf&&(R=n.relatedTarget||n.fromElement)&&(Ws(R)||R[jr]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(R=n.relatedTarget||n.toElement,_=d,R=R?Ws(R):null,R!==null&&(S=yi(R),R!==S||R.tag!==5&&R.tag!==6)&&(R=null)):(_=null,R=d),_!==R)){if(k=Ny,E="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(k=Ty,E="onPointerLeave",b="onPointerEnter",v="pointer"),S=_==null?g:eo(_),N=R==null?g:eo(R),g=new k(E,v+"leave",_,n,f),g.target=S,g.relatedTarget=N,E=null,Ws(f)===d&&(k=new k(b,v+"enter",R,n,f),k.target=N,k.relatedTarget=S,E=k),S=E,_&&R)t:{for(k=_,b=R,v=0,N=k;N;N=qi(N))v++;for(N=0,E=b;E;E=qi(E))N++;for(;0<v-N;)k=qi(k),v--;for(;0<N-v;)b=qi(b),N--;for(;v--;){if(k===b||b!==null&&k===b.alternate)break t;k=qi(k),b=qi(b)}k=null}else k=null;_!==null&&Ly(m,g,_,k,!1),R!==null&&S!==null&&Ly(m,S,R,k,!0)}}e:{if(g=d?eo(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var O=I2;else if(jy(g))if(l_)O=C2;else{O=j2;var L=k2}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=S2);if(O&&(O=O(t,d))){a_(m,O,n,f);break e}L&&L(t,g,d),t==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&hf(g,"number",g.value)}switch(L=d?eo(d):window,t){case"focusin":(jy(L)||L.contentEditable==="true")&&(Ji=L,Ef=d,Ha=null);break;case"focusout":Ha=Ef=Ji=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,Py(m,n,f);break;case"selectionchange":if(P2)break;case"keydown":case"keyup":Py(m,n,f)}var x;if(Xm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Yi?i_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(s_&&n.locale!=="ko"&&(Yi||y!=="onCompositionStart"?y==="onCompositionEnd"&&Yi&&(x=r_()):(rs=f,Km="value"in rs?rs.value:rs.textContent,Yi=!0)),L=ku(d,y),0<L.length&&(y=new Ey(y,t,null,n,f),m.push({event:y,listeners:L}),x?y.data=x:(x=o_(n),x!==null&&(y.data=x)))),(x=w2?b2(t,n):N2(t,n))&&(d=ku(d,"onBeforeInput"),0<d.length&&(f=new Ey("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=x))}x_(m,e)})}function fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ku(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ol(t,n),i!=null&&r.unshift(fl(t,i,s)),i=ol(t,e),i!=null&&r.push(fl(t,i,s))),t=t.return}return r}function qi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ly(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=ol(n,i),u!=null&&a.unshift(fl(n,u,c))):s||(u=ol(n,i),u!=null&&a.push(fl(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var M2=/\r\n?/g,V2=/\u0000|\uFFFD/g;function My(t){return(typeof t=="string"?t:""+t).replace(M2,`
`).replace(V2,"")}function Vc(t,e,n){if(e=My(e),My(t)!==e&&n)throw Error(z(425))}function ju(){}var If=null,kf=null;function jf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sf=typeof setTimeout=="function"?setTimeout:void 0,U2=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,F2=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(t){return Vy.resolve(null).then(t).catch($2)}:Sf;function $2(t){setTimeout(function(){throw t})}function kh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);cl(e)}function ds(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Uy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Lo,ml="__reactProps$"+Lo,jr="__reactContainer$"+Lo,Cf="__reactEvents$"+Lo,B2="__reactListeners$"+Lo,z2="__reactHandles$"+Lo;function Ws(t){var e=t[Qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[Qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Uy(t);t!==null;){if(n=t[Qn])return n;t=Uy(t)}return e}t=n,n=t.parentNode}return null}function zl(t){return t=t[Qn]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function gd(t){return t[ml]||null}var Rf=[],to=-1;function ks(t){return{current:t}}function Pe(t){0>to||(t.current=Rf[to],Rf[to]=null,to--)}function je(t,e){to++,Rf[to]=t.current,t.current=e}var _s={},Ot=ks(_s),Xt=ks(!1),ei=_s;function wo(t,e){var n=t.type.contextTypes;if(!n)return _s;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Yt(t){return t=t.childContextTypes,t!=null}function Su(){Pe(Xt),Pe(Ot)}function Fy(t,e,n){if(Ot.current!==_s)throw Error(z(168));je(Ot,e),je(Xt,n)}function __(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,kE(t)||"Unknown",s));return Be({},n,r)}function Cu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_s,ei=Ot.current,je(Ot,t),je(Xt,Xt.current),!0}function $y(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=__(t,e,ei),r.__reactInternalMemoizedMergedChildContext=t,Pe(Xt),Pe(Ot),je(Ot,t)):Pe(Xt),je(Xt,n)}var mr=null,yd=!1,jh=!1;function w_(t){mr===null?mr=[t]:mr.push(t)}function q2(t){yd=!0,w_(t)}function js(){if(!jh&&mr!==null){jh=!0;var t=0,e=_e;try{var n=mr;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mr=null,yd=!1}catch(s){throw mr!==null&&(mr=mr.slice(t+1)),Wv(zm,js),s}finally{_e=e,jh=!1}}return null}var no=[],ro=0,Ru=null,Au=0,vn=[],_n=0,ti=null,yr=1,xr="";function Bs(t,e){no[ro++]=Au,no[ro++]=Ru,Ru=t,Au=e}function b_(t,e,n){vn[_n++]=yr,vn[_n++]=xr,vn[_n++]=ti,ti=t;var r=yr;t=xr;var s=32-Mn(r)-1;r&=~(1<<s),n+=1;var i=32-Mn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,yr=1<<32-Mn(e)+s|n<<s|r,xr=i+t}else yr=1<<i|n<<s|r,xr=t}function Jm(t){t.return!==null&&(Bs(t,1),b_(t,1,0))}function Zm(t){for(;t===Ru;)Ru=no[--ro],no[ro]=null,Au=no[--ro],no[ro]=null;for(;t===ti;)ti=vn[--_n],vn[_n]=null,xr=vn[--_n],vn[_n]=null,yr=vn[--_n],vn[_n]=null}var dn=null,ln=null,Le=!1,On=null;function N_(t,e){var n=bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function By(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,ln=ds(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ti!==null?{id:yr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,ln=null,!0):!1;default:return!1}}function Af(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pf(t){if(Le){var e=ln;if(e){var n=e;if(!By(t,e)){if(Af(t))throw Error(z(418));e=ds(n.nextSibling);var r=dn;e&&By(t,e)?N_(r,n):(t.flags=t.flags&-4097|2,Le=!1,dn=t)}}else{if(Af(t))throw Error(z(418));t.flags=t.flags&-4097|2,Le=!1,dn=t}}}function zy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function Uc(t){if(t!==dn)return!1;if(!Le)return zy(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jf(t.type,t.memoizedProps)),e&&(e=ln)){if(Af(t))throw E_(),Error(z(418));for(;e;)N_(t,e),e=ds(e.nextSibling)}if(zy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=ds(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=dn?ds(t.stateNode.nextSibling):null;return!0}function E_(){for(var t=ln;t;)t=ds(t.nextSibling)}function bo(){ln=dn=null,Le=!1}function ep(t){On===null?On=[t]:On.push(t)}var H2=Or.ReactCurrentBatchConfig;function Ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Fc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qy(t){var e=t._init;return e(t._payload)}function T_(t){function e(b,v){if(t){var N=b.deletions;N===null?(b.deletions=[v],b.flags|=16):N.push(v)}}function n(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function r(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function s(b,v){return b=ps(b,v),b.index=0,b.sibling=null,b}function i(b,v,N){return b.index=N,t?(N=b.alternate,N!==null?(N=N.index,N<v?(b.flags|=2,v):N):(b.flags|=2,v)):(b.flags|=1048576,v)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,v,N,E){return v===null||v.tag!==6?(v=Oh(N,b.mode,E),v.return=b,v):(v=s(v,N),v.return=b,v)}function u(b,v,N,E){var O=N.type;return O===Xi?f(b,v,N.props.children,E,N.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Qr&&qy(O)===v.type)?(E=s(v,N.props),E.ref=Ta(b,v,N),E.return=b,E):(E=uu(N.type,N.key,N.props,null,b.mode,E),E.ref=Ta(b,v,N),E.return=b,E)}function d(b,v,N,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==N.containerInfo||v.stateNode.implementation!==N.implementation?(v=Lh(N,b.mode,E),v.return=b,v):(v=s(v,N.children||[]),v.return=b,v)}function f(b,v,N,E,O){return v===null||v.tag!==7?(v=Ys(N,b.mode,E,O),v.return=b,v):(v=s(v,N),v.return=b,v)}function m(b,v,N){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Oh(""+v,b.mode,N),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sc:return N=uu(v.type,v.key,v.props,null,b.mode,N),N.ref=Ta(b,null,v),N.return=b,N;case Qi:return v=Lh(v,b.mode,N),v.return=b,v;case Qr:var E=v._init;return m(b,E(v._payload),N)}if(Ra(v)||_a(v))return v=Ys(v,b.mode,N,null),v.return=b,v;Fc(b,v)}return null}function g(b,v,N,E){var O=v!==null?v.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return O!==null?null:c(b,v,""+N,E);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Sc:return N.key===O?u(b,v,N,E):null;case Qi:return N.key===O?d(b,v,N,E):null;case Qr:return O=N._init,g(b,v,O(N._payload),E)}if(Ra(N)||_a(N))return O!==null?null:f(b,v,N,E,null);Fc(b,N)}return null}function _(b,v,N,E,O){if(typeof E=="string"&&E!==""||typeof E=="number")return b=b.get(N)||null,c(v,b,""+E,O);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Sc:return b=b.get(E.key===null?N:E.key)||null,u(v,b,E,O);case Qi:return b=b.get(E.key===null?N:E.key)||null,d(v,b,E,O);case Qr:var L=E._init;return _(b,v,N,L(E._payload),O)}if(Ra(E)||_a(E))return b=b.get(N)||null,f(v,b,E,O,null);Fc(v,E)}return null}function R(b,v,N,E){for(var O=null,L=null,x=v,y=v=0,I=null;x!==null&&y<N.length;y++){x.index>y?(I=x,x=null):I=x.sibling;var C=g(b,x,N[y],E);if(C===null){x===null&&(x=I);break}t&&x&&C.alternate===null&&e(b,x),v=i(C,v,y),L===null?O=C:L.sibling=C,L=C,x=I}if(y===N.length)return n(b,x),Le&&Bs(b,y),O;if(x===null){for(;y<N.length;y++)x=m(b,N[y],E),x!==null&&(v=i(x,v,y),L===null?O=x:L.sibling=x,L=x);return Le&&Bs(b,y),O}for(x=r(b,x);y<N.length;y++)I=_(x,b,y,N[y],E),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?y:I.key),v=i(I,v,y),L===null?O=I:L.sibling=I,L=I);return t&&x.forEach(function(P){return e(b,P)}),Le&&Bs(b,y),O}function k(b,v,N,E){var O=_a(N);if(typeof O!="function")throw Error(z(150));if(N=O.call(N),N==null)throw Error(z(151));for(var L=O=null,x=v,y=v=0,I=null,C=N.next();x!==null&&!C.done;y++,C=N.next()){x.index>y?(I=x,x=null):I=x.sibling;var P=g(b,x,C.value,E);if(P===null){x===null&&(x=I);break}t&&x&&P.alternate===null&&e(b,x),v=i(P,v,y),L===null?O=P:L.sibling=P,L=P,x=I}if(C.done)return n(b,x),Le&&Bs(b,y),O;if(x===null){for(;!C.done;y++,C=N.next())C=m(b,C.value,E),C!==null&&(v=i(C,v,y),L===null?O=C:L.sibling=C,L=C);return Le&&Bs(b,y),O}for(x=r(b,x);!C.done;y++,C=N.next())C=_(x,b,y,C.value,E),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?y:C.key),v=i(C,v,y),L===null?O=C:L.sibling=C,L=C);return t&&x.forEach(function(D){return e(b,D)}),Le&&Bs(b,y),O}function S(b,v,N,E){if(typeof N=="object"&&N!==null&&N.type===Xi&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Sc:e:{for(var O=N.key,L=v;L!==null;){if(L.key===O){if(O=N.type,O===Xi){if(L.tag===7){n(b,L.sibling),v=s(L,N.props.children),v.return=b,b=v;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Qr&&qy(O)===L.type){n(b,L.sibling),v=s(L,N.props),v.ref=Ta(b,L,N),v.return=b,b=v;break e}n(b,L);break}else e(b,L);L=L.sibling}N.type===Xi?(v=Ys(N.props.children,b.mode,E,N.key),v.return=b,b=v):(E=uu(N.type,N.key,N.props,null,b.mode,E),E.ref=Ta(b,v,N),E.return=b,b=E)}return a(b);case Qi:e:{for(L=N.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===N.containerInfo&&v.stateNode.implementation===N.implementation){n(b,v.sibling),v=s(v,N.children||[]),v.return=b,b=v;break e}else{n(b,v);break}else e(b,v);v=v.sibling}v=Lh(N,b.mode,E),v.return=b,b=v}return a(b);case Qr:return L=N._init,S(b,v,L(N._payload),E)}if(Ra(N))return R(b,v,N,E);if(_a(N))return k(b,v,N,E);Fc(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,v!==null&&v.tag===6?(n(b,v.sibling),v=s(v,N),v.return=b,b=v):(n(b,v),v=Oh(N,b.mode,E),v.return=b,b=v),a(b)):n(b,v)}return S}var No=T_(!0),I_=T_(!1),Pu=ks(null),Du=null,so=null,tp=null;function np(){tp=so=Du=null}function rp(t){var e=Pu.current;Pe(Pu),t._currentValue=e}function Df(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function mo(t,e){Du=t,tp=so=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(tp!==t)if(t={context:t,memoizedValue:e,next:null},so===null){if(Du===null)throw Error(z(308));so=t,Du.dependencies={lanes:0,firstContext:t}}else so=so.next=t;return e}var Ks=null;function sp(t){Ks===null?Ks=[t]:Ks.push(t)}function k_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,sp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function ip(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Sr(t,n)}return s=r.interleaved,s===null?(e.next=e,sp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Sr(t,n)}function su(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qm(t,n)}}function Hy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ou(t,e,n,r){var s=t.updateQueue;Xr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==a&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,f=d=u=null,c=i;do{var g=c.lane,_=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var R=t,k=c;switch(g=e,_=n,k.tag){case 1:if(R=k.payload,typeof R=="function"){m=R.call(_,m,g);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=k.payload,g=typeof R=="function"?R.call(_,m,g):R,g==null)break e;m=Be({},m,g);break e;case 2:Xr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else _={eventTime:_,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=_,u=m):f=f.next=_,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ri|=a,t.lanes=a,t.memoizedState=m}}function Wy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var ql={},Jn=ks(ql),pl=ks(ql),gl=ks(ql);function Gs(t){if(t===ql)throw Error(z(174));return t}function op(t,e){switch(je(gl,e),je(pl,t),je(Jn,ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mf(e,t)}Pe(Jn),je(Jn,e)}function Eo(){Pe(Jn),Pe(pl),Pe(gl)}function S_(t){Gs(gl.current);var e=Gs(Jn.current),n=mf(e,t.type);e!==n&&(je(pl,t),je(Jn,n))}function ap(t){pl.current===t&&(Pe(Jn),Pe(pl))}var Fe=ks(0);function Lu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sh=[];function lp(){for(var t=0;t<Sh.length;t++)Sh[t]._workInProgressVersionPrimary=null;Sh.length=0}var iu=Or.ReactCurrentDispatcher,Ch=Or.ReactCurrentBatchConfig,ni=0,$e=null,lt=null,mt=null,Mu=!1,Wa=!1,yl=0,W2=0;function St(){throw Error(z(321))}function cp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function up(t,e,n,r,s,i){if(ni=i,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,iu.current=t===null||t.memoizedState===null?X2:Y2,t=n(r,s),Wa){i=0;do{if(Wa=!1,yl=0,25<=i)throw Error(z(301));i+=1,mt=lt=null,e.updateQueue=null,iu.current=J2,t=n(r,s)}while(Wa)}if(iu.current=Vu,e=lt!==null&&lt.next!==null,ni=0,mt=lt=$e=null,Mu=!1,e)throw Error(z(300));return t}function dp(){var t=yl!==0;return yl=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?$e.memoizedState=mt=t:mt=mt.next=t,mt}function In(){if(lt===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=mt===null?$e.memoizedState:mt.next;if(e!==null)mt=e,lt=t;else{if(t===null)throw Error(z(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},mt===null?$e.memoizedState=mt=t:mt=mt.next=t}return mt}function xl(t,e){return typeof e=="function"?e(t):e}function Rh(t){var e=In(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=lt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var f=d.lane;if((ni&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,a=r):u=u.next=m,$e.lanes|=f,ri|=f}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,Fn(r,e.memoizedState)||(Qt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,$e.lanes|=i,ri|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ah(t){var e=In(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Fn(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function C_(){}function R_(t,e){var n=$e,r=In(),s=e(),i=!Fn(r.memoizedState,s);if(i&&(r.memoizedState=s,Qt=!0),r=r.queue,hp(D_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,vl(9,P_.bind(null,n,r,s,e),void 0,null),gt===null)throw Error(z(349));ni&30||A_(n,e,s)}return s}function A_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function P_(t,e,n,r){e.value=n,e.getSnapshot=r,O_(e)&&L_(t)}function D_(t,e,n){return n(function(){O_(e)&&L_(t)})}function O_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function L_(t){var e=Sr(t,1);e!==null&&Vn(e,t,1,-1)}function Ky(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:t},e.queue=t,t=t.dispatch=Q2.bind(null,$e,t),[e.memoizedState,t]}function vl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function M_(){return In().memoizedState}function ou(t,e,n,r){var s=Gn();$e.flags|=t,s.memoizedState=vl(1|e,n,void 0,r===void 0?null:r)}function xd(t,e,n,r){var s=In();r=r===void 0?null:r;var i=void 0;if(lt!==null){var a=lt.memoizedState;if(i=a.destroy,r!==null&&cp(r,a.deps)){s.memoizedState=vl(e,n,i,r);return}}$e.flags|=t,s.memoizedState=vl(1|e,n,i,r)}function Gy(t,e){return ou(8390656,8,t,e)}function hp(t,e){return xd(2048,8,t,e)}function V_(t,e){return xd(4,2,t,e)}function U_(t,e){return xd(4,4,t,e)}function F_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $_(t,e,n){return n=n!=null?n.concat([t]):null,xd(4,4,F_.bind(null,e,t),n)}function fp(){}function B_(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function z_(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function q_(t,e,n){return ni&21?(Fn(n,e)||(n=Qv(),$e.lanes|=n,ri|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function K2(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Ch.transition;Ch.transition={};try{t(!1),e()}finally{_e=n,Ch.transition=r}}function H_(){return In().memoizedState}function G2(t,e,n){var r=ms(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},W_(t))K_(e,n);else if(n=k_(t,e,n,r),n!==null){var s=Ut();Vn(n,t,r,s),G_(n,e,r)}}function Q2(t,e,n){var r=ms(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(W_(t))K_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,Fn(c,a)){var u=e.interleaved;u===null?(s.next=s,sp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=k_(t,e,s,r),n!==null&&(s=Ut(),Vn(n,t,r,s),G_(n,e,r))}}function W_(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function K_(t,e){Wa=Mu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function G_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qm(t,n)}}var Vu={readContext:Tn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},X2={readContext:Tn,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:Gy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ou(4194308,4,F_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return ou(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=G2.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:Ky,useDebugValue:fp,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=Ky(!1),e=t[0];return t=K2.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,s=Gn();if(Le){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),gt===null)throw Error(z(349));ni&30||A_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Gy(D_.bind(null,r,i,t),[t]),r.flags|=2048,vl(9,P_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gn(),e=gt.identifierPrefix;if(Le){var n=xr,r=yr;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=W2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Y2={readContext:Tn,useCallback:B_,useContext:Tn,useEffect:hp,useImperativeHandle:$_,useInsertionEffect:V_,useLayoutEffect:U_,useMemo:z_,useReducer:Rh,useRef:M_,useState:function(){return Rh(xl)},useDebugValue:fp,useDeferredValue:function(t){var e=In();return q_(e,lt.memoizedState,t)},useTransition:function(){var t=Rh(xl)[0],e=In().memoizedState;return[t,e]},useMutableSource:C_,useSyncExternalStore:R_,useId:H_,unstable_isNewReconciler:!1},J2={readContext:Tn,useCallback:B_,useContext:Tn,useEffect:hp,useImperativeHandle:$_,useInsertionEffect:V_,useLayoutEffect:U_,useMemo:z_,useReducer:Ah,useRef:M_,useState:function(){return Ah(xl)},useDebugValue:fp,useDeferredValue:function(t){var e=In();return lt===null?e.memoizedState=t:q_(e,lt.memoizedState,t)},useTransition:function(){var t=Ah(xl)[0],e=In().memoizedState;return[t,e]},useMutableSource:C_,useSyncExternalStore:R_,useId:H_,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Of(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vd={isMounted:function(t){return(t=t._reactInternals)?yi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ut(),s=ms(t),i=br(r,s);i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(Vn(e,t,s,r),su(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ut(),s=ms(t),i=br(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(Vn(e,t,s,r),su(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ut(),r=ms(t),s=br(n,r);s.tag=2,e!=null&&(s.callback=e),e=hs(t,s,r),e!==null&&(Vn(e,t,r,n),su(e,t,r))}};function Qy(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!dl(n,r)||!dl(s,i):!0}function Q_(t,e,n){var r=!1,s=_s,i=e.contextType;return typeof i=="object"&&i!==null?i=Tn(i):(s=Yt(e)?ei:Ot.current,r=e.contextTypes,i=(r=r!=null)?wo(t,s):_s),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Xy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vd.enqueueReplaceState(e,e.state,null)}function Lf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ip(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Tn(i):(i=Yt(e)?ei:Ot.current,s.context=wo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Of(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vd.enqueueReplaceState(s,s.state,null),Ou(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function To(t,e){try{var n="",r=e;do n+=IE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ph(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Z2=typeof WeakMap=="function"?WeakMap:Map;function X_(t,e,n){n=br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fu||(Fu=!0,Kf=r),Mf(t,e)},n}function Y_(t,e,n){n=br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Mf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Mf(t,e),typeof r!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Yy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Z2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=fT.bind(null,t,e,n),e.then(t,t))}function Jy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=br(-1,1),e.tag=2,hs(n,e,1))),n.lanes|=1),t)}var eT=Or.ReactCurrentOwner,Qt=!1;function Vt(t,e,n,r){e.child=t===null?I_(e,null,n,r):No(e,t.child,n,r)}function e0(t,e,n,r,s){n=n.render;var i=e.ref;return mo(e,s),r=up(t,e,n,r,i,s),n=dp(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cr(t,e,s)):(Le&&n&&Jm(e),e.flags|=1,Vt(t,e,r,s),e.child)}function t0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,J_(t,e,i,r,s)):(t=uu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:dl,n(a,r)&&t.ref===e.ref)return Cr(t,e,s)}return e.flags|=1,t=ps(i,r),t.ref=e.ref,t.return=e,e.child=t}function J_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(dl(i,r)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Cr(t,e,s)}return Vf(t,e,n,r,s)}function Z_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(oo,on),on|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(oo,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,je(oo,on),on|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,je(oo,on),on|=r;return Vt(t,e,s,n),e.child}function ew(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vf(t,e,n,r,s){var i=Yt(n)?ei:Ot.current;return i=wo(e,i),mo(e,s),n=up(t,e,n,r,i,s),r=dp(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cr(t,e,s)):(Le&&r&&Jm(e),e.flags|=1,Vt(t,e,n,s),e.child)}function n0(t,e,n,r,s){if(Yt(n)){var i=!0;Cu(e)}else i=!1;if(mo(e,s),e.stateNode===null)au(t,e),Q_(e,n,r),Lf(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tn(d):(d=Yt(n)?ei:Ot.current,d=wo(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Xy(e,a,r,d),Xr=!1;var g=e.memoizedState;a.state=g,Ou(e,r,a,s),u=e.memoizedState,c!==r||g!==u||Xt.current||Xr?(typeof f=="function"&&(Of(e,n,f,r),u=e.memoizedState),(c=Xr||Qy(e,n,c,r,g,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,j_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Pn(e.type,c),a.props=d,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Tn(u):(u=Yt(n)?ei:Ot.current,u=wo(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||g!==u)&&Xy(e,a,r,u),Xr=!1,g=e.memoizedState,a.state=g,Ou(e,r,a,s);var R=e.memoizedState;c!==m||g!==R||Xt.current||Xr?(typeof _=="function"&&(Of(e,n,_,r),R=e.memoizedState),(d=Xr||Qy(e,n,d,r,g,R,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,R,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,R,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),a.props=r,a.state=R,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Uf(t,e,n,r,i,s)}function Uf(t,e,n,r,s,i){ew(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&$y(e,n,!1),Cr(t,e,i);r=e.stateNode,eT.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=No(e,t.child,null,i),e.child=No(e,null,c,i)):Vt(t,e,c,i),e.memoizedState=r.state,s&&$y(e,n,!0),e.child}function tw(t){var e=t.stateNode;e.pendingContext?Fy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fy(t,e.context,!1),op(t,e.containerInfo)}function r0(t,e,n,r,s){return bo(),ep(s),e.flags|=256,Vt(t,e,n,r),e.child}var Ff={dehydrated:null,treeContext:null,retryLane:0};function $f(t){return{baseLanes:t,cachePool:null,transitions:null}}function nw(t,e,n){var r=e.pendingProps,s=Fe.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),je(Fe,s&1),t===null)return Pf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=bd(a,r,0,null),t=Ys(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$f(n),e.memoizedState=Ff,t):mp(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return tT(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ps(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=ps(c,i):(i=Ys(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?$f(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Ff,r}return i=t.child,t=i.sibling,r=ps(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mp(t,e){return e=bd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $c(t,e,n,r){return r!==null&&ep(r),No(e,t.child,null,n),t=mp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tT(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Ph(Error(z(422))),$c(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bd({mode:"visible",children:r.children},s,0,null),i=Ys(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&No(e,t.child,null,a),e.child.memoizedState=$f(a),e.memoizedState=Ff,i);if(!(e.mode&1))return $c(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=Ph(i,r,void 0),$c(t,e,a,r)}if(c=(a&t.childLanes)!==0,Qt||c){if(r=gt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Sr(t,s),Vn(r,t,s,-1))}return _p(),r=Ph(Error(z(421))),$c(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ln=ds(s.nextSibling),dn=e,Le=!0,On=null,t!==null&&(vn[_n++]=yr,vn[_n++]=xr,vn[_n++]=ti,yr=t.id,xr=t.overflow,ti=e),e=mp(e,r.children),e.flags|=4096,e)}function s0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Df(t.return,e,n)}function Dh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function rw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Vt(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&s0(t,n,e);else if(t.tag===19)s0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Dh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Dh(e,!0,n,null,i);break;case"together":Dh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function au(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ri|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nT(t,e,n){switch(e.tag){case 3:tw(e),bo();break;case 5:S_(e);break;case 1:Yt(e.type)&&Cu(e);break;case 4:op(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;je(Pu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?nw(t,e,n):(je(Fe,Fe.current&1),t=Cr(t,e,n),t!==null?t.sibling:null);je(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,Z_(t,e,n)}return Cr(t,e,n)}var sw,Bf,iw,ow;sw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bf=function(){};iw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gs(Jn.current);var i=null;switch(n){case"input":s=uf(t,s),r=uf(t,r),i=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),i=[];break;case"textarea":s=ff(t,s),r=ff(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ju)}pf(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(sl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(sl.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Re("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};ow=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ia(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rT(t,e,n){var r=e.pendingProps;switch(Zm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return Yt(e.type)&&Su(),Ct(e),null;case 3:return r=e.stateNode,Eo(),Pe(Xt),Pe(Ot),lp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Xf(On),On=null))),Bf(t,e),Ct(e),null;case 5:ap(e);var s=Gs(gl.current);if(n=e.type,t!==null&&e.stateNode!=null)iw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Ct(e),null}if(t=Gs(Jn.current),Uc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qn]=e,r[ml]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Pa.length;s++)Re(Pa[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":fy(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":py(r,i),Re("invalid",r)}pf(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Vc(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Vc(r.textContent,c,t),s=["children",""+c]):sl.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Re("scroll",r)}switch(n){case"input":Cc(r),my(r,i,!0);break;case"textarea":Cc(r),gy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ju)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Qn]=e,t[ml]=r,sw(t,e,!1,!1),e.stateNode=t;e:{switch(a=gf(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<Pa.length;s++)Re(Pa[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":fy(t,r),s=uf(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Re("invalid",t);break;case"textarea":py(t,r),s=ff(t,r),Re("invalid",t);break;default:s=r}pf(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Mv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ov(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&il(t,u):typeof u=="number"&&il(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(sl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Re("scroll",t):u!=null&&Vm(t,i,u,a))}switch(n){case"input":Cc(t),my(t,r,!1);break;case"textarea":Cc(t),gy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?co(t,!!r.multiple,i,!1):r.defaultValue!=null&&co(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ju)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)ow(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Gs(gl.current),Gs(Jn.current),Uc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qn]=e,(i=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:Vc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=e,e.stateNode=r}return Ct(e),null;case 13:if(Pe(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&ln!==null&&e.mode&1&&!(e.flags&128))E_(),bo(),e.flags|=98560,i=!1;else if(i=Uc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Qn]=e}else bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),i=!1}else On!==null&&(Xf(On),On=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?ct===0&&(ct=3):_p())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return Eo(),Bf(t,e),t===null&&hl(e.stateNode.containerInfo),Ct(e),null;case 10:return rp(e.type._context),Ct(e),null;case 17:return Yt(e.type)&&Su(),Ct(e),null;case 19:if(Pe(Fe),i=e.memoizedState,i===null)return Ct(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ia(i,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Lu(t),a!==null){for(e.flags|=128,Ia(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Fe,Fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ye()>Io&&(e.flags|=128,r=!0,Ia(i,!1),e.lanes=4194304)}else{if(!r)if(t=Lu(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ia(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Le)return Ct(e),null}else 2*Ye()-i.renderingStartTime>Io&&n!==1073741824&&(e.flags|=128,r=!0,Ia(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ye(),e.sibling=null,n=Fe.current,je(Fe,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return vp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?on&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function sT(t,e){switch(Zm(e),e.tag){case 1:return Yt(e.type)&&Su(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Eo(),Pe(Xt),Pe(Ot),lp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ap(e),null;case 13:if(Pe(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Fe),null;case 4:return Eo(),null;case 10:return rp(e.type._context),null;case 22:case 23:return vp(),null;case 24:return null;default:return null}}var Bc=!1,Pt=!1,iT=typeof WeakSet=="function"?WeakSet:Set,G=null;function io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function zf(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var i0=!1;function oT(t,e){if(If=Tu,t=d_(),Ym(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(c=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=a),g===i&&++f===r&&(u=a),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(kf={focusedElem:t,selectionRange:n},Tu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var k=R.memoizedProps,S=R.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?k:Pn(e.type,k),S);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(E){Ke(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return R=i0,i0=!1,R}function Ka(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&zf(e,n,i)}s=s.next}while(s!==r)}}function _d(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function aw(t){var e=t.alternate;e!==null&&(t.alternate=null,aw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[ml],delete e[Cf],delete e[B2],delete e[z2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lw(t){return t.tag===5||t.tag===3||t.tag===4}function o0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ju));else if(r!==4&&(t=t.child,t!==null))for(Hf(t,e,n),t=t.sibling;t!==null;)Hf(t,e,n),t=t.sibling}function Wf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wf(t,e,n),t=t.sibling;t!==null;)Wf(t,e,n),t=t.sibling}var _t=null,Dn=!1;function Kr(t,e,n){for(n=n.child;n!==null;)cw(t,e,n),n=n.sibling}function cw(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(hd,n)}catch{}switch(n.tag){case 5:Pt||io(n,e);case 6:var r=_t,s=Dn;_t=null,Kr(t,e,n),_t=r,Dn=s,_t!==null&&(Dn?(t=_t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_t.removeChild(n.stateNode));break;case 18:_t!==null&&(Dn?(t=_t,n=n.stateNode,t.nodeType===8?kh(t.parentNode,n):t.nodeType===1&&kh(t,n),cl(t)):kh(_t,n.stateNode));break;case 4:r=_t,s=Dn,_t=n.stateNode.containerInfo,Dn=!0,Kr(t,e,n),_t=r,Dn=s;break;case 0:case 11:case 14:case 15:if(!Pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&zf(n,e,a),s=s.next}while(s!==r)}Kr(t,e,n);break;case 1:if(!Pt&&(io(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ke(n,e,c)}Kr(t,e,n);break;case 21:Kr(t,e,n);break;case 22:n.mode&1?(Pt=(r=Pt)||n.memoizedState!==null,Kr(t,e,n),Pt=r):Kr(t,e,n);break;default:Kr(t,e,n)}}function a0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iT),e.forEach(function(r){var s=pT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function An(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:_t=c.stateNode,Dn=!1;break e;case 3:_t=c.stateNode.containerInfo,Dn=!0;break e;case 4:_t=c.stateNode.containerInfo,Dn=!0;break e}c=c.return}if(_t===null)throw Error(z(160));cw(i,a,s),_t=null,Dn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ke(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uw(e,t),e=e.sibling}function uw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(An(e,t),Kn(t),r&4){try{Ka(3,t,t.return),_d(3,t)}catch(k){Ke(t,t.return,k)}try{Ka(5,t,t.return)}catch(k){Ke(t,t.return,k)}}break;case 1:An(e,t),Kn(t),r&512&&n!==null&&io(n,n.return);break;case 5:if(An(e,t),Kn(t),r&512&&n!==null&&io(n,n.return),t.flags&32){var s=t.stateNode;try{il(s,"")}catch(k){Ke(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Av(s,i),gf(c,a);var d=gf(c,i);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?Mv(s,m):f==="dangerouslySetInnerHTML"?Ov(s,m):f==="children"?il(s,m):Vm(s,f,m,d)}switch(c){case"input":df(s,i);break;case"textarea":Pv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?co(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?co(s,!!i.multiple,i.defaultValue,!0):co(s,!!i.multiple,i.multiple?[]:"",!1))}s[ml]=i}catch(k){Ke(t,t.return,k)}}break;case 6:if(An(e,t),Kn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Ke(t,t.return,k)}}break;case 3:if(An(e,t),Kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cl(e.containerInfo)}catch(k){Ke(t,t.return,k)}break;case 4:An(e,t),Kn(t);break;case 13:An(e,t),Kn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yp=Ye())),r&4&&a0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(d=Pt)||f,An(e,t),Pt=d):An(e,t),Kn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(G=t,f=t.child;f!==null;){for(m=G=f;G!==null;){switch(g=G,_=g.child,g.tag){case 0:case 11:case 14:case 15:Ka(4,g,g.return);break;case 1:io(g,g.return);var R=g.stateNode;if(typeof R.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(k){Ke(r,n,k)}}break;case 5:io(g,g.return);break;case 22:if(g.memoizedState!==null){c0(m);continue}}_!==null?(_.return=g,G=_):c0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Lv("display",a))}catch(k){Ke(t,t.return,k)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(k){Ke(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:An(e,t),Kn(t),r&4&&a0(t);break;case 21:break;default:An(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(il(s,""),r.flags&=-33);var i=o0(t);Wf(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=o0(t);Hf(t,c,a);break;default:throw Error(z(161))}}catch(u){Ke(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aT(t,e,n){G=t,dw(t)}function dw(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Bc;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Pt;c=Bc;var d=Pt;if(Bc=a,(Pt=u)&&!d)for(G=s;G!==null;)a=G,u=a.child,a.tag===22&&a.memoizedState!==null?u0(s):u!==null?(u.return=a,G=u):u0(s);for(;i!==null;)G=i,dw(i),i=i.sibling;G=s,Bc=c,Pt=d}l0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):l0(t)}}function l0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||_d(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wy(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wy(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&cl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Pt||e.flags&512&&qf(e)}catch(g){Ke(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function c0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function u0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_d(4,e)}catch(u){Ke(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ke(e,s,u)}}var i=e.return;try{qf(e)}catch(u){Ke(e,i,u)}break;case 5:var a=e.return;try{qf(e)}catch(u){Ke(e,a,u)}}}catch(u){Ke(e,e.return,u)}if(e===t){G=null;break}var c=e.sibling;if(c!==null){c.return=e.return,G=c;break}G=e.return}}var lT=Math.ceil,Uu=Or.ReactCurrentDispatcher,pp=Or.ReactCurrentOwner,Nn=Or.ReactCurrentBatchConfig,fe=0,gt=null,st=null,Nt=0,on=0,oo=ks(0),ct=0,_l=null,ri=0,wd=0,gp=0,Ga=null,Kt=null,yp=0,Io=1/0,fr=null,Fu=!1,Kf=null,fs=null,zc=!1,ss=null,$u=0,Qa=0,Gf=null,lu=-1,cu=0;function Ut(){return fe&6?Ye():lu!==-1?lu:lu=Ye()}function ms(t){return t.mode&1?fe&2&&Nt!==0?Nt&-Nt:H2.transition!==null?(cu===0&&(cu=Qv()),cu):(t=_e,t!==0||(t=window.event,t=t===void 0?16:n_(t.type)),t):1}function Vn(t,e,n,r){if(50<Qa)throw Qa=0,Gf=null,Error(z(185));$l(t,n,r),(!(fe&2)||t!==gt)&&(t===gt&&(!(fe&2)&&(wd|=n),ct===4&&Jr(t,Nt)),Jt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Io=Ye()+500,yd&&js()))}function Jt(t,e){var n=t.callbackNode;HE(t,e);var r=Eu(t,t===gt?Nt:0);if(r===0)n!==null&&vy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vy(n),e===1)t.tag===0?q2(d0.bind(null,t)):w_(d0.bind(null,t)),F2(function(){!(fe&6)&&js()}),n=null;else{switch(Xv(r)){case 1:n=zm;break;case 4:n=Kv;break;case 16:n=Nu;break;case 536870912:n=Gv;break;default:n=Nu}n=vw(n,hw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hw(t,e){if(lu=-1,cu=0,fe&6)throw Error(z(327));var n=t.callbackNode;if(po()&&t.callbackNode!==n)return null;var r=Eu(t,t===gt?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bu(t,r);else{e=r;var s=fe;fe|=2;var i=mw();(gt!==t||Nt!==e)&&(fr=null,Io=Ye()+500,Xs(t,e));do try{dT();break}catch(c){fw(t,c)}while(!0);np(),Uu.current=i,fe=s,st!==null?e=0:(gt=null,Nt=0,e=ct)}if(e!==0){if(e===2&&(s=wf(t),s!==0&&(r=s,e=Qf(t,s))),e===1)throw n=_l,Xs(t,0),Jr(t,r),Jt(t,Ye()),n;if(e===6)Jr(t,r);else{if(s=t.current.alternate,!(r&30)&&!cT(s)&&(e=Bu(t,r),e===2&&(i=wf(t),i!==0&&(r=i,e=Qf(t,i))),e===1))throw n=_l,Xs(t,0),Jr(t,r),Jt(t,Ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:zs(t,Kt,fr);break;case 3:if(Jr(t,r),(r&130023424)===r&&(e=yp+500-Ye(),10<e)){if(Eu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ut(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Sf(zs.bind(null,t,Kt,fr),e);break}zs(t,Kt,fr);break;case 4:if(Jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Mn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lT(r/1960))-r,10<r){t.timeoutHandle=Sf(zs.bind(null,t,Kt,fr),r);break}zs(t,Kt,fr);break;case 5:zs(t,Kt,fr);break;default:throw Error(z(329))}}}return Jt(t,Ye()),t.callbackNode===n?hw.bind(null,t):null}function Qf(t,e){var n=Ga;return t.current.memoizedState.isDehydrated&&(Xs(t,e).flags|=256),t=Bu(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&Xf(e)),t}function Xf(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function cT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Fn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jr(t,e){for(e&=~gp,e&=~wd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),r=1<<n;t[n]=-1,e&=~r}}function d0(t){if(fe&6)throw Error(z(327));po();var e=Eu(t,0);if(!(e&1))return Jt(t,Ye()),null;var n=Bu(t,e);if(t.tag!==0&&n===2){var r=wf(t);r!==0&&(e=r,n=Qf(t,r))}if(n===1)throw n=_l,Xs(t,0),Jr(t,e),Jt(t,Ye()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zs(t,Kt,fr),Jt(t,Ye()),null}function xp(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Io=Ye()+500,yd&&js())}}function si(t){ss!==null&&ss.tag===0&&!(fe&6)&&po();var e=fe;fe|=1;var n=Nn.transition,r=_e;try{if(Nn.transition=null,_e=1,t)return t()}finally{_e=r,Nn.transition=n,fe=e,!(fe&6)&&js()}}function vp(){on=oo.current,Pe(oo)}function Xs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,U2(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(Zm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Su();break;case 3:Eo(),Pe(Xt),Pe(Ot),lp();break;case 5:ap(r);break;case 4:Eo();break;case 13:Pe(Fe);break;case 19:Pe(Fe);break;case 10:rp(r.type._context);break;case 22:case 23:vp()}n=n.return}if(gt=t,st=t=ps(t.current,null),Nt=on=e,ct=0,_l=null,gp=wd=ri=0,Kt=Ga=null,Ks!==null){for(e=0;e<Ks.length;e++)if(n=Ks[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ks=null}return t}function fw(t,e){do{var n=st;try{if(np(),iu.current=Vu,Mu){for(var r=$e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mu=!1}if(ni=0,mt=lt=$e=null,Wa=!1,yl=0,pp.current=null,n===null||n.return===null){ct=1,_l=e,st=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=Nt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=Jy(a);if(_!==null){_.flags&=-257,Zy(_,a,c,i,e),_.mode&1&&Yy(i,d,e),e=_,u=d;var R=e.updateQueue;if(R===null){var k=new Set;k.add(u),e.updateQueue=k}else R.add(u);break e}else{if(!(e&1)){Yy(i,d,e),_p();break e}u=Error(z(426))}}else if(Le&&c.mode&1){var S=Jy(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Zy(S,a,c,i,e),ep(To(u,c));break e}}i=u=To(u,c),ct!==4&&(ct=2),Ga===null?Ga=[i]:Ga.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=X_(i,u,e);Hy(i,b);break e;case 1:c=u;var v=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(fs===null||!fs.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=Y_(i,c,e);Hy(i,E);break e}}i=i.return}while(i!==null)}gw(n)}catch(O){e=O,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function mw(){var t=Uu.current;return Uu.current=Vu,t===null?Vu:t}function _p(){(ct===0||ct===3||ct===2)&&(ct=4),gt===null||!(ri&268435455)&&!(wd&268435455)||Jr(gt,Nt)}function Bu(t,e){var n=fe;fe|=2;var r=mw();(gt!==t||Nt!==e)&&(fr=null,Xs(t,e));do try{uT();break}catch(s){fw(t,s)}while(!0);if(np(),fe=n,Uu.current=r,st!==null)throw Error(z(261));return gt=null,Nt=0,ct}function uT(){for(;st!==null;)pw(st)}function dT(){for(;st!==null&&!LE();)pw(st)}function pw(t){var e=xw(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?gw(t):st=e,pp.current=null}function gw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sT(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,st=null;return}}else if(n=rT(n,e,on),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ct===0&&(ct=5)}function zs(t,e,n){var r=_e,s=Nn.transition;try{Nn.transition=null,_e=1,hT(t,e,n,r)}finally{Nn.transition=s,_e=r}return null}function hT(t,e,n,r){do po();while(ss!==null);if(fe&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(WE(t,i),t===gt&&(st=gt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zc||(zc=!0,vw(Nu,function(){return po(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nn.transition,Nn.transition=null;var a=_e;_e=1;var c=fe;fe|=4,pp.current=null,oT(t,n),uw(n,t),A2(kf),Tu=!!If,kf=If=null,t.current=n,aT(n),ME(),fe=c,_e=a,Nn.transition=i}else t.current=n;if(zc&&(zc=!1,ss=t,$u=s),i=t.pendingLanes,i===0&&(fs=null),FE(n.stateNode),Jt(t,Ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fu)throw Fu=!1,t=Kf,Kf=null,t;return $u&1&&t.tag!==0&&po(),i=t.pendingLanes,i&1?t===Gf?Qa++:(Qa=0,Gf=t):Qa=0,js(),null}function po(){if(ss!==null){var t=Xv($u),e=Nn.transition,n=_e;try{if(Nn.transition=null,_e=16>t?16:t,ss===null)var r=!1;else{if(t=ss,ss=null,$u=0,fe&6)throw Error(z(331));var s=fe;for(fe|=4,G=t.current;G!==null;){var i=G,a=i.child;if(G.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(G=d;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:Ka(8,f,i)}var m=f.child;if(m!==null)m.return=f,G=m;else for(;G!==null;){f=G;var g=f.sibling,_=f.return;if(aw(f),f===d){G=null;break}if(g!==null){g.return=_,G=g;break}G=_}}}var R=i.alternate;if(R!==null){var k=R.child;if(k!==null){R.child=null;do{var S=k.sibling;k.sibling=null,k=S}while(k!==null)}}G=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,G=a;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ka(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,G=b;break e}G=i.return}}var v=t.current;for(G=v;G!==null;){a=G;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,G=N;else e:for(a=v;G!==null;){if(c=G,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:_d(9,c)}}catch(O){Ke(c,c.return,O)}if(c===a){G=null;break e}var E=c.sibling;if(E!==null){E.return=c.return,G=E;break e}G=c.return}}if(fe=s,js(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(hd,t)}catch{}r=!0}return r}finally{_e=n,Nn.transition=e}}return!1}function h0(t,e,n){e=To(n,e),e=X_(t,e,1),t=hs(t,e,1),e=Ut(),t!==null&&($l(t,1,e),Jt(t,e))}function Ke(t,e,n){if(t.tag===3)h0(t,t,n);else for(;e!==null;){if(e.tag===3){h0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fs===null||!fs.has(r))){t=To(n,t),t=Y_(e,t,1),e=hs(e,t,1),t=Ut(),e!==null&&($l(e,1,t),Jt(e,t));break}}e=e.return}}function fT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ut(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(Nt&n)===n&&(ct===4||ct===3&&(Nt&130023424)===Nt&&500>Ye()-yp?Xs(t,0):gp|=n),Jt(t,e)}function yw(t,e){e===0&&(t.mode&1?(e=Pc,Pc<<=1,!(Pc&130023424)&&(Pc=4194304)):e=1);var n=Ut();t=Sr(t,e),t!==null&&($l(t,e,n),Jt(t,n))}function mT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yw(t,n)}function pT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),yw(t,n)}var xw;xw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,nT(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,Le&&e.flags&1048576&&b_(e,Au,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;au(t,e),t=e.pendingProps;var s=wo(e,Ot.current);mo(e,n),s=up(null,e,r,t,s,n);var i=dp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(r)?(i=!0,Cu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ip(e),s.updater=vd,e.stateNode=s,s._reactInternals=e,Lf(e,r,t,n),e=Uf(null,e,r,!0,i,n)):(e.tag=0,Le&&i&&Jm(e),Vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(au(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yT(r),t=Pn(r,t),s){case 0:e=Vf(null,e,r,t,n);break e;case 1:e=n0(null,e,r,t,n);break e;case 11:e=e0(null,e,r,t,n);break e;case 14:e=t0(null,e,r,Pn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),Vf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),n0(t,e,r,s,n);case 3:e:{if(tw(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,j_(t,e),Ou(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=To(Error(z(423)),e),e=r0(t,e,r,n,s);break e}else if(r!==s){s=To(Error(z(424)),e),e=r0(t,e,r,n,s);break e}else for(ln=ds(e.stateNode.containerInfo.firstChild),dn=e,Le=!0,On=null,n=I_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bo(),r===s){e=Cr(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return S_(e),t===null&&Pf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,jf(r,s)?a=null:i!==null&&jf(r,i)&&(e.flags|=32),ew(t,e),Vt(t,e,a,n),e.child;case 6:return t===null&&Pf(e),null;case 13:return nw(t,e,n);case 4:return op(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=No(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),e0(t,e,r,s,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,je(Pu,r._currentValue),r._currentValue=a,i!==null)if(Fn(i.value,a)){if(i.children===s.children&&!Xt.current){e=Cr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=br(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Df(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Df(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,mo(e,n),s=Tn(s),r=r(s),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,s=Pn(r,e.pendingProps),s=Pn(r.type,s),t0(t,e,r,s,n);case 15:return J_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),au(t,e),e.tag=1,Yt(r)?(t=!0,Cu(e)):t=!1,mo(e,n),Q_(e,r,s),Lf(e,r,s,n),Uf(null,e,r,!0,t,n);case 19:return rw(t,e,n);case 22:return Z_(t,e,n)}throw Error(z(156,e.tag))};function vw(t,e){return Wv(t,e)}function gT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,e,n,r){return new gT(t,e,n,r)}function wp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yT(t){if(typeof t=="function")return wp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fm)return 11;if(t===$m)return 14}return 2}function ps(t,e){var n=t.alternate;return n===null?(n=bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uu(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")wp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Xi:return Ys(n.children,s,i,e);case Um:a=8,s|=8;break;case of:return t=bn(12,n,e,s|2),t.elementType=of,t.lanes=i,t;case af:return t=bn(13,n,e,s),t.elementType=af,t.lanes=i,t;case lf:return t=bn(19,n,e,s),t.elementType=lf,t.lanes=i,t;case Sv:return bd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kv:a=10;break e;case jv:a=9;break e;case Fm:a=11;break e;case $m:a=14;break e;case Qr:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=bn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ys(t,e,n,r){return t=bn(7,t,r,e),t.lanes=n,t}function bd(t,e,n,r){return t=bn(22,t,r,e),t.elementType=Sv,t.lanes=n,t.stateNode={isHidden:!1},t}function Oh(t,e,n){return t=bn(6,t,null,e),t.lanes=n,t}function Lh(t,e,n){return e=bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gh(0),this.expirationTimes=gh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bp(t,e,n,r,s,i,a,c,u){return t=new xT(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ip(i),t}function vT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _w(t){if(!t)return _s;t=t._reactInternals;e:{if(yi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Yt(n))return __(t,n,e)}return e}function ww(t,e,n,r,s,i,a,c,u){return t=bp(n,r,!0,t,s,i,a,c,u),t.context=_w(null),n=t.current,r=Ut(),s=ms(n),i=br(r,s),i.callback=e??null,hs(n,i,s),t.current.lanes=s,$l(t,s,r),Jt(t,r),t}function Nd(t,e,n,r){var s=e.current,i=Ut(),a=ms(s);return n=_w(n),e.context===null?e.context=n:e.pendingContext=n,e=br(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hs(s,e,a),t!==null&&(Vn(t,s,a,i),su(t,s,a)),a}function zu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function f0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Np(t,e){f0(t,e),(t=t.alternate)&&f0(t,e)}function _T(){return null}var bw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ep(t){this._internalRoot=t}Ed.prototype.render=Ep.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Nd(t,e,null,null)};Ed.prototype.unmount=Ep.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;si(function(){Nd(null,t,null,null)}),e[jr]=null}};function Ed(t){this._internalRoot=t}Ed.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yr.length&&e!==0&&e<Yr[n].priority;n++);Yr.splice(n,0,t),n===0&&t_(t)}};function Tp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function m0(){}function wT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=zu(a);i.call(d)}}var a=ww(e,r,t,0,null,!1,!1,"",m0);return t._reactRootContainer=a,t[jr]=a.current,hl(t.nodeType===8?t.parentNode:t),si(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=zu(u);c.call(d)}}var u=bp(t,0,!1,null,null,!1,!1,"",m0);return t._reactRootContainer=u,t[jr]=u.current,hl(t.nodeType===8?t.parentNode:t),si(function(){Nd(e,u,n,r)}),u}function Id(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=zu(a);c.call(u)}}Nd(e,a,t,s)}else a=wT(n,e,t,s,r);return zu(a)}Yv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Aa(e.pendingLanes);n!==0&&(qm(e,n|1),Jt(e,Ye()),!(fe&6)&&(Io=Ye()+500,js()))}break;case 13:si(function(){var r=Sr(t,1);if(r!==null){var s=Ut();Vn(r,t,1,s)}}),Np(t,1)}};Hm=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=Ut();Vn(e,t,134217728,n)}Np(t,134217728)}};Jv=function(t){if(t.tag===13){var e=ms(t),n=Sr(t,e);if(n!==null){var r=Ut();Vn(n,t,e,r)}Np(t,e)}};Zv=function(){return _e};e_=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};xf=function(t,e,n){switch(e){case"input":if(df(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gd(r);if(!s)throw Error(z(90));Rv(r),df(r,s)}}}break;case"textarea":Pv(t,n);break;case"select":e=n.value,e!=null&&co(t,!!n.multiple,e,!1)}};Fv=xp;$v=si;var bT={usingClientEntryPoint:!1,Events:[zl,eo,gd,Vv,Uv,xp]},ka={findFiberByHostInstance:Ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NT={bundleType:ka.bundleType,version:ka.version,rendererPackageName:ka.rendererPackageName,rendererConfig:ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Or.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qv(t),t===null?null:t.stateNode},findFiberByHostInstance:ka.findFiberByHostInstance||_T,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{hd=qc.inject(NT),Yn=qc}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bT;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tp(e))throw Error(z(200));return vT(t,e,null,n)};pn.createRoot=function(t,e){if(!Tp(t))throw Error(z(299));var n=!1,r="",s=bw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bp(t,1,!1,null,null,n,!1,r,s),t[jr]=e.current,hl(t.nodeType===8?t.parentNode:t),new Ep(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=qv(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return si(t)};pn.hydrate=function(t,e,n){if(!Td(e))throw Error(z(200));return Id(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!Tp(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=bw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=ww(e,null,t,1,n??null,s,!1,i,a),t[jr]=e.current,hl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ed(e)};pn.render=function(t,e,n){if(!Td(e))throw Error(z(200));return Id(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!Td(t))throw Error(z(40));return t._reactRootContainer?(si(function(){Id(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};pn.unstable_batchedUpdates=xp;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Td(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Id(t,e,n,!1,r)};pn.version="18.3.1-next-f1338f8080-20240426";function Nw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nw)}catch(t){console.error(t)}}Nw(),Nv.exports=pn;var ET=Nv.exports,p0=ET;rf.createRoot=p0.createRoot,rf.hydrateRoot=p0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wl.apply(this,arguments)}var is;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(is||(is={}));const g0="popstate";function TT(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return Yf("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:qu(s)}return kT(e,n,null,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ew(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IT(){return Math.random().toString(36).substr(2,8)}function y0(t,e){return{usr:t.state,key:t.key,idx:e}}function Yf(t,e,n,r){return n===void 0&&(n=null),wl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Mo(e):e,{state:n,key:e&&e.key||r||IT()})}function qu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Mo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function kT(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c=is.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(wl({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function m(){c=is.Pop;let S=f(),b=S==null?null:S-d;d=S,u&&u({action:c,location:k.location,delta:b})}function g(S,b){c=is.Push;let v=Yf(k.location,S,b);d=f()+1;let N=y0(v,d),E=k.createHref(v);try{a.pushState(N,"",E)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(E)}i&&u&&u({action:c,location:k.location,delta:1})}function _(S,b){c=is.Replace;let v=Yf(k.location,S,b);d=f();let N=y0(v,d),E=k.createHref(v);a.replaceState(N,"",E),i&&u&&u({action:c,location:k.location,delta:0})}function R(S){let b=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof S=="string"?S:qu(S);return v=v.replace(/ $/,"%20"),Je(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let k={get action(){return c},get location(){return t(s,a)},listen(S){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(g0,m),u=S,()=>{s.removeEventListener(g0,m),u=null}},createHref(S){return e(s,S)},createURL:R,encodeLocation(S){let b=R(S);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:_,go(S){return a.go(S)}};return k}var x0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(x0||(x0={}));function jT(t,e,n){return n===void 0&&(n="/"),ST(t,e,n)}function ST(t,e,n,r){let s=typeof e=="string"?Mo(e):e,i=Ip(s.pathname||"/",n);if(i==null)return null;let a=Tw(t);CT(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=BT(i);c=UT(a[u],d)}return c}function Tw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(Je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=gs([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Tw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:MT(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of Iw(i.path))s(i,a,u)}),e}function Iw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Iw(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function CT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:VT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const RT=/^:[\w-]+$/,AT=3,PT=2,DT=1,OT=10,LT=-2,v0=t=>t==="*";function MT(t,e){let n=t.split("/"),r=n.length;return n.some(v0)&&(r+=LT),e&&(r+=PT),n.filter(s=>!v0(s)).reduce((s,i)=>s+(RT.test(i)?AT:i===""?DT:OT),r)}function VT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function UT(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=FT({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:gs([i,m.pathname]),pathnameBase:WT(gs([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=gs([i,m.pathnameBase]))}return a}function FT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$T(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let k=c[m]||"";a=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const R=c[m];return _&&!R?d[g]=void 0:d[g]=(R||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function $T(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ew(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function BT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ew(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ip(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function zT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Mo(t):t;return{pathname:n?n.startsWith("/")?n:qT(n,e):e,search:KT(r),hash:GT(s)}}function qT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Mh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kp(t,e){let n=HT(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Mo(t):(s=wl({},t),Je(!s.pathname||!s.pathname.includes("?"),Mh("?","pathname","search",s)),Je(!s.pathname||!s.pathname.includes("#"),Mh("#","pathname","hash",s)),Je(!s.search||!s.search.includes("#"),Mh("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=zT(s,c),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const gs=t=>t.join("/").replace(/\/\/+/g,"/"),WT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),KT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,GT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function QT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kw=["post","put","patch","delete"];new Set(kw);const XT=["get",...kw];new Set(XT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bl.apply(this,arguments)}const Sp=j.createContext(null),YT=j.createContext(null),Ss=j.createContext(null),kd=j.createContext(null),Cs=j.createContext({outlet:null,matches:[],isDataRoute:!1}),jw=j.createContext(null);function JT(t,e){let{relative:n}=e===void 0?{}:e;Vo()||Je(!1);let{basename:r,navigator:s}=j.useContext(Ss),{hash:i,pathname:a,search:c}=Cw(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:gs([r,a])),s.createHref({pathname:u,search:c,hash:i})}function Vo(){return j.useContext(kd)!=null}function Rs(){return Vo()||Je(!1),j.useContext(kd).location}function Sw(t){j.useContext(Ss).static||j.useLayoutEffect(t)}function Lr(){let{isDataRoute:t}=j.useContext(Cs);return t?dI():ZT()}function ZT(){Vo()||Je(!1);let t=j.useContext(Sp),{basename:e,future:n,navigator:r}=j.useContext(Ss),{matches:s}=j.useContext(Cs),{pathname:i}=Rs(),a=JSON.stringify(kp(s,n.v7_relativeSplatPath)),c=j.useRef(!1);return Sw(()=>{c.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=jp(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:gs([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,a,i,t])}function Cw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(Ss),{matches:s}=j.useContext(Cs),{pathname:i}=Rs(),a=JSON.stringify(kp(s,r.v7_relativeSplatPath));return j.useMemo(()=>jp(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function eI(t,e){return tI(t,e)}function tI(t,e,n,r){Vo()||Je(!1);let{navigator:s}=j.useContext(Ss),{matches:i}=j.useContext(Cs),a=i[i.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=Rs(),f;if(e){var m;let S=typeof e=="string"?Mo(e):e;u==="/"||(m=S.pathname)!=null&&m.startsWith(u)||Je(!1),f=S}else f=d;let g=f.pathname||"/",_=g;if(u!=="/"){let S=u.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let R=jT(t,{pathname:_}),k=oI(R&&R.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:gs([u,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:gs([u,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&k?j.createElement(kd.Provider,{value:{location:bl({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:is.Pop}},k):k}function nI(){let t=uI(),e=QT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const rI=j.createElement(nI,null);class sI extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(Cs.Provider,{value:this.props.routeContext},j.createElement(jw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iI(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(Sp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Cs.Provider,{value:e},r)}function oI(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=a.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||Je(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:_}=n,R=m.route.loader&&g[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||R){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,m,g)=>{let _,R=!1,k=null,S=null;n&&(_=c&&m.route.id?c[m.route.id]:void 0,k=m.route.errorElement||rI,u&&(d<0&&g===0?(hI("route-fallback"),R=!0,S=null):d===g&&(R=!0,S=m.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,g+1)),v=()=>{let N;return _?N=k:R?N=S:m.route.Component?N=j.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=f,j.createElement(iI,{match:m,routeContext:{outlet:f,matches:b,isDataRoute:n!=null},children:N})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?j.createElement(sI,{location:n.location,revalidation:n.revalidation,component:k,error:_,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var Rw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Rw||{}),Aw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Aw||{});function aI(t){let e=j.useContext(Sp);return e||Je(!1),e}function lI(t){let e=j.useContext(YT);return e||Je(!1),e}function cI(t){let e=j.useContext(Cs);return e||Je(!1),e}function Pw(t){let e=cI(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function uI(){var t;let e=j.useContext(jw),n=lI(),r=Pw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function dI(){let{router:t}=aI(Rw.UseNavigateStable),e=Pw(Aw.UseNavigateStable),n=j.useRef(!1);return Sw(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bl({fromRouteId:e},i)))},[t,e])}const _0={};function hI(t,e,n){_0[t]||(_0[t]=!0)}function fI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Cp(t){let{to:e,replace:n,state:r,relative:s}=t;Vo()||Je(!1);let{future:i,static:a}=j.useContext(Ss),{matches:c}=j.useContext(Cs),{pathname:u}=Rs(),d=Lr(),f=jp(e,kp(c,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function ke(t){Je(!1)}function mI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=is.Pop,navigator:i,static:a=!1,future:c}=t;Vo()&&Je(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:i,static:a,future:bl({v7_relativeSplatPath:!1},c)}),[u,c,i,a]);typeof r=="string"&&(r=Mo(r));let{pathname:f="/",search:m="",hash:g="",state:_=null,key:R="default"}=r,k=j.useMemo(()=>{let S=Ip(f,u);return S==null?null:{location:{pathname:S,search:m,hash:g,state:_,key:R},navigationType:s}},[u,f,m,g,_,R,s]);return k==null?null:j.createElement(Ss.Provider,{value:d},j.createElement(kd.Provider,{children:n,value:k}))}function pI(t){let{children:e,location:n}=t;return eI(Jf(e),n)}new Promise(()=>{});function Jf(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,Jf(r.props.children,i));return}r.type!==ke&&Je(!1),!r.props.index||!r.props.children||Je(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Jf(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zf(){return Zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zf.apply(this,arguments)}function gI(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function yI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xI(t,e){return t.button===0&&(!e||e==="_self")&&!yI(t)}function em(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function vI(t,e){let n=em(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const _I=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wI="6";try{window.__reactRouterVersion=wI}catch{}const bI="startTransition",w0=fE[bI];function NI(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=TT({window:s,v5Compat:!0}));let a=i.current,[c,u]=j.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=j.useCallback(m=>{d&&w0?w0(()=>u(m)):u(m)},[u,d]);return j.useLayoutEffect(()=>a.listen(f),[a,f]),j.useEffect(()=>fI(r),[r]),j.createElement(mI,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const EI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=gI(e,_I),{basename:_}=j.useContext(Ss),R,k=!1;if(typeof d=="string"&&TI.test(d)&&(R=d,EI))try{let N=new URL(window.location.href),E=d.startsWith("//")?new URL(N.protocol+d):new URL(d),O=Ip(E.pathname,_);E.origin===N.origin&&O!=null?d=O+E.search+E.hash:k=!0}catch{}let S=JT(d,{relative:s}),b=II(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function v(N){r&&r(N),N.defaultPrevented||b(N)}return j.createElement("a",Zf({},g,{href:R||S,onClick:k||i?r:v,ref:n,target:u}))});var b0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(b0||(b0={}));var N0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(N0||(N0={}));function II(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:c}=e===void 0?{}:e,u=Lr(),d=Rs(),f=Cw(t,{relative:a});return j.useCallback(m=>{if(xI(m,n)){m.preventDefault();let g=r!==void 0?r:qu(d)===qu(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[d,u,f,r,s,n,t,i,a,c])}function kI(t){let e=j.useRef(em(t)),n=j.useRef(!1),r=Rs(),s=j.useMemo(()=>vI(r.search,n.current?null:e.current),[r.search]),i=Lr(),a=j.useCallback((c,u)=>{const d=em(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,a]}var E0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,_=d&63;u||(_=64,a||(g=64)),r.push(n[f],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Dw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new SI;const g=i<<2|c>>4;if(r.push(g),d!==64){const _=c<<4&240|d>>2;if(r.push(_),m!==64){const R=d<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CI=function(t){const e=Dw(t);return Ow.encodeByteArray(e,!0)},Hu=function(t){return CI(t).replace(/\./g,"")},Lw=function(t){try{return Ow.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=()=>RI().__FIREBASE_DEFAULTS__,PI=()=>{if(typeof process>"u"||typeof E0>"u")return;const t=E0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Lw(t[1]);return e&&JSON.parse(e)},jd=()=>{try{return AI()||PI()||DI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Mw=t=>{var e,n;return(n=(e=jd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Vw=t=>{const e=Mw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Uw=()=>{var t;return(t=jd())===null||t===void 0?void 0:t.config},Fw=t=>{var e;return(e=jd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hu(JSON.stringify(n)),Hu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function MI(){var t;const e=(t=jd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $I(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BI(){return!MI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zI(){try{return typeof indexedDB=="object"}catch{return!1}}function qI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="FirebaseError";class ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=HI,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?WI(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new ir(s,c,r)}}function WI(t,e){return t.replace(KI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const KI=/\{\$([^}]+)}/g;function GI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(T0(i)&&T0(a)){if(!Wu(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function T0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Da(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Oa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QI(t,e){const n=new XI(t,e);return n.subscribe.bind(n)}class XI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");YI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Vh),s.error===void 0&&(s.error=Vh),s.complete===void 0&&(s.complete=Vh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t){return t&&t._delegate?t._delegate:t}class ws{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ek(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZI(t){return t===qs?void 0:t}function ek(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const nk={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},rk=ue.INFO,sk={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},ik=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=sk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rp{constructor(e){this.name=e,this._logLevel=rk,this._logHandler=ik,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const ok=(t,e)=>e.some(n=>t instanceof n);let I0,k0;function ak(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lk(){return k0||(k0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bw=new WeakMap,tm=new WeakMap,zw=new WeakMap,Uh=new WeakMap,Ap=new WeakMap;function ck(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ys(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Bw.set(n,t)}).catch(()=>{}),Ap.set(e,t),e}function uk(t){if(tm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});tm.set(t,e)}let nm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ys(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dk(t){nm=t(nm)}function hk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fh(this),e,...n);return zw.set(r,e.sort?e.sort():[e]),ys(r)}:lk().includes(t)?function(...e){return t.apply(Fh(this),e),ys(Bw.get(this))}:function(...e){return ys(t.apply(Fh(this),e))}}function fk(t){return typeof t=="function"?hk(t):(t instanceof IDBTransaction&&uk(t),ok(t,ak())?new Proxy(t,nm):t)}function ys(t){if(t instanceof IDBRequest)return ck(t);if(Uh.has(t))return Uh.get(t);const e=fk(t);return e!==t&&(Uh.set(t,e),Ap.set(e,t)),e}const Fh=t=>Ap.get(t);function mk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=ys(a);return r&&a.addEventListener("upgradeneeded",u=>{r(ys(a.result),u.oldVersion,u.newVersion,ys(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const pk=["get","getKey","getAll","getAllKeys","count"],gk=["put","add","delete","clear"],$h=new Map;function j0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($h.get(e))return $h.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=gk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||pk.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return $h.set(e,i),i}dk(t=>({...t,get:(e,n,r)=>j0(e,n)||t.get(e,n,r),has:(e,n)=>!!j0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rm="@firebase/app",S0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Rp("@firebase/app"),vk="@firebase/app-compat",_k="@firebase/analytics-compat",wk="@firebase/analytics",bk="@firebase/app-check-compat",Nk="@firebase/app-check",Ek="@firebase/auth",Tk="@firebase/auth-compat",Ik="@firebase/database",kk="@firebase/data-connect",jk="@firebase/database-compat",Sk="@firebase/functions",Ck="@firebase/functions-compat",Rk="@firebase/installations",Ak="@firebase/installations-compat",Pk="@firebase/messaging",Dk="@firebase/messaging-compat",Ok="@firebase/performance",Lk="@firebase/performance-compat",Mk="@firebase/remote-config",Vk="@firebase/remote-config-compat",Uk="@firebase/storage",Fk="@firebase/storage-compat",$k="@firebase/firestore",Bk="@firebase/vertexai-preview",zk="@firebase/firestore-compat",qk="firebase",Hk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="[DEFAULT]",Wk={[rm]:"fire-core",[vk]:"fire-core-compat",[wk]:"fire-analytics",[_k]:"fire-analytics-compat",[Nk]:"fire-app-check",[bk]:"fire-app-check-compat",[Ek]:"fire-auth",[Tk]:"fire-auth-compat",[Ik]:"fire-rtdb",[kk]:"fire-data-connect",[jk]:"fire-rtdb-compat",[Sk]:"fire-fn",[Ck]:"fire-fn-compat",[Rk]:"fire-iid",[Ak]:"fire-iid-compat",[Pk]:"fire-fcm",[Dk]:"fire-fcm-compat",[Ok]:"fire-perf",[Lk]:"fire-perf-compat",[Mk]:"fire-rc",[Vk]:"fire-rc-compat",[Uk]:"fire-gcs",[Fk]:"fire-gcs-compat",[$k]:"fire-fst",[zk]:"fire-fst-compat",[Bk]:"fire-vertex","fire-js":"fire-js",[qk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new Map,Kk=new Map,im=new Map;function C0(t,e){try{t.container.addComponent(e)}catch(n){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ii(t){const e=t.name;if(im.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;im.set(e,t);for(const n of Nl.values())C0(n,t);for(const n of Kk.values())C0(n,t);return!0}function Sd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new Hl("app","Firebase",Gk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=Hk;function qw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw xs.create("bad-app-name",{appName:String(s)});if(n||(n=Uw()),!n)throw xs.create("no-options");const i=Nl.get(s);if(i){if(Wu(n,i.options)&&Wu(r,i.config))return i;throw xs.create("duplicate-app",{appName:s})}const a=new tk(s);for(const u of im.values())a.addComponent(u);const c=new Qk(n,r,a);return Nl.set(s,c),c}function Cd(t=sm){const e=Nl.get(t);if(!e&&t===sm&&Uw())return qw();if(!e)throw xs.create("no-app",{appName:t});return e}function Hw(){return Array.from(Nl.values())}function Zn(t,e,n){var r;let s=(r=Wk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(c.join(" "));return}ii(new ws(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="firebase-heartbeat-database",Yk=1,El="firebase-heartbeat-store";let Bh=null;function Ww(){return Bh||(Bh=mk(Xk,Yk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(El)}catch(n){console.warn(n)}}}}).catch(t=>{throw xs.create("idb-open",{originalErrorMessage:t.message})})),Bh}async function Jk(t){try{const n=(await Ww()).transaction(El),r=await n.objectStore(El).get(Kw(t));return await n.done,r}catch(e){if(e instanceof ir)Rr.warn(e.message);else{const n=xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(n.message)}}}async function R0(t,e){try{const r=(await Ww()).transaction(El,"readwrite");await r.objectStore(El).put(e,Kw(t)),await r.done}catch(n){if(n instanceof ir)Rr.warn(n.message);else{const r=xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rr.warn(r.message)}}}function Kw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=1024,ej=30*24*60*60*1e3;class tj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=A0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=ej}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=A0(),{heartbeatsToSend:r,unsentEntries:s}=nj(this._heartbeatsCache.heartbeats),i=Hu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Rr.warn(n),""}}}function A0(){return new Date().toISOString().substring(0,10)}function nj(t,e=Zk){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),P0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),P0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zI()?qI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Jk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return R0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return R0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function P0(t){return Hu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t){ii(new ws("platform-logger",e=>new yk(e),"PRIVATE")),ii(new ws("heartbeat",e=>new tj(e),"PRIVATE")),Zn(rm,S0,t),Zn(rm,S0,"esm2017"),Zn("fire-js","")}sj("");function Pp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Gw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ij=Gw,Qw=new Hl("auth","Firebase",Gw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new Rp("@firebase/auth");function oj(t,...e){Ku.logLevel<=ue.WARN&&Ku.warn(`Auth (${xi}): ${t}`,...e)}function du(t,...e){Ku.logLevel<=ue.ERROR&&Ku.error(`Auth (${xi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw Dp(t,...e)}function hn(t,...e){return Dp(t,...e)}function Xw(t,e,n){const r=Object.assign(Object.assign({},ij()),{[e]:n});return new Hl("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return Xw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Qw.create(t,...e)}function Q(t,e,...n){if(!t)throw Dp(e,...n)}function vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw du(e),new Error(e)}function Ar(t,e){t||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Yw(){return D0()==="http:"||D0()==="https:"}function D0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yw()||UI()||"connection"in navigator)?navigator.onLine:!0}function lj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=LI()||FI()}get(){return aj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t,e){Ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new Wl(3e4,6e4);function Zt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kn(t,e,n,r,s={}){return Zw(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Uo(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return VI()||(d.referrerPolicy="no-referrer"),Jw.fetch()(e1(t,t.config.apiHost,n,c),d)})}async function Zw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},cj),e);try{const s=new hj(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw La(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw La(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw La(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw La(t,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Xw(t,f,d);$n(t,f)}}catch(s){if(s instanceof ir)throw s;$n(t,"network-request-failed",{message:String(s)})}}async function As(t,e,n,r,s={}){const i=await kn(t,e,n,r,s);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}function e1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Op(t.config,s):`${t.config.apiScheme}://${s}`}function dj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hn(this.auth,"network-request-failed")),uj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function La(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t){return t!==void 0&&t.getResponse!==void 0}function L0(t){return t!==void 0&&t.enterprise!==void 0}class fj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t){return(await kn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function pj(t,e){return kn(t,"GET","/v2/recaptchaConfig",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(t,e){return kn(t,"POST","/v1/accounts:delete",e)}async function t1(t,e){return kn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yj(t,e=!1){const n=Se(t),r=await n.getIdToken(e),s=Lp(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Xa(zh(s.auth_time)),issuedAtTime:Xa(zh(s.iat)),expirationTime:Xa(zh(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function zh(t){return Number(t)*1e3}function Lp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return du("JWT malformed, contained fewer than 3 sections"),null;try{const s=Lw(n);return s?JSON.parse(s):(du("Failed to decode base64 JWT payload"),null)}catch(s){return du("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function M0(t){const e=Lp(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ir&&xj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function xj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Tl(t,t1(n,{idToken:r}));Q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?n1(i.providerUserInfo):[],c=wj(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new am(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function _j(t){const e=Se(t);await Gu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function n1(t){return t.map(e=>{var{providerId:n}=e,r=Pp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e){const n=await Zw(t,{},async()=>{const r=Uo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=e1(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Jw.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Nj(t,e){return kn(t,"POST","/v2/accounts:revokeToken",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):M0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=M0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bj(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new go;return r&&(Q(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _r{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Pp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new am(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Tl(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yj(this,e)}reload(){return _j(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await Tl(this,gj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,c,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,R=(a=n.photoURL)!==null&&a!==void 0?a:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:N,emailVerified:E,isAnonymous:O,providerData:L,stsTokenManager:x}=n;Q(N&&x,e,"internal-error");const y=go.fromJSON(this.name,x);Q(typeof N=="string",e,"internal-error"),Gr(m,e.name),Gr(g,e.name),Q(typeof E=="boolean",e,"internal-error"),Q(typeof O=="boolean",e,"internal-error"),Gr(_,e.name),Gr(R,e.name),Gr(k,e.name),Gr(S,e.name),Gr(b,e.name),Gr(v,e.name);const I=new _r({uid:N,auth:e,email:g,emailVerified:E,displayName:m,isAnonymous:O,photoURL:R,phoneNumber:_,tenantId:k,stsTokenManager:y,createdAt:b,lastLoginAt:v});return L&&Array.isArray(L)&&(I.providerData=L.map(C=>Object.assign({},C))),S&&(I._redirectEventId=S),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new go;s.updateFromServerResponse(n);const i=new _r({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Gu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?n1(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new go;c.updateFromIdToken(r);const u=new _r({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new am(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new Map;function wr(t){Ar(t instanceof Function,"Expected a class definition");let e=V0.get(t);return e?(Ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,V0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}r1.type="NONE";const U0=r1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t,e,n){return`firebase:${t}:${e}:${n}`}class yo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hu(this.userKey,s.apiKey,i),this.fullPersistenceKey=hu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_r._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new yo(wr(U0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||wr(U0);const a=hu(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(a);if(f){const m=_r._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new yo(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new yo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(a1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(s1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c1(e))return"Blackberry";if(u1(e))return"Webos";if(i1(e))return"Safari";if((e.includes("chrome/")||o1(e))&&!e.includes("edge/"))return"Chrome";if(l1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function s1(t=Lt()){return/firefox\//i.test(t)}function i1(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o1(t=Lt()){return/crios\//i.test(t)}function a1(t=Lt()){return/iemobile/i.test(t)}function l1(t=Lt()){return/android/i.test(t)}function c1(t=Lt()){return/blackberry/i.test(t)}function u1(t=Lt()){return/webos/i.test(t)}function Mp(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ej(t=Lt()){var e;return Mp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Tj(){return $I()&&document.documentMode===10}function d1(t=Lt()){return Mp(t)||l1(t)||u1(t)||c1(t)||/windows phone/i.test(t)||a1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t,e=[]){let n;switch(t){case"Browser":n=F0(Lt());break;case"Worker":n=`${F0(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(t,e={}){return kn(t,"GET","/v2/passwordPolicy",Zt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=6;class Sj{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:jj,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $0(this),this.idTokenSubscription=new $0(this),this.beforeStateQueue=new Ij(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await t1(this,{idToken:e}),r=await _r._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ln(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(er(this));const n=e?Se(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kj(this),n=new Sj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Nj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mr(t){return Se(t)}class $0{constructor(e){this.auth=e,this.observer=null,this.addObserver=QI(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rj(t){Kl=t}function Vp(t){return Kl.loadJS(t)}function Aj(){return Kl.recaptchaV2Script}function Pj(){return Kl.recaptchaEnterpriseScript}function Dj(){return Kl.gapiScript}function f1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Oj="recaptcha-enterprise",Lj="NO_RECAPTCHA";class Mj{constructor(e){this.type=Oj,this.auth=Mr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{pj(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new fj(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;L0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(Lj)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&L0(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Pj();u.length!==0&&(u+=c),Vp(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function B0(t,e,n,r=!1){const s=new Mj(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function lm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await B0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await B0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t,e){const n=Sd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Wu(i,e??{}))return s;$n(s,"already-initialized")}return n.initialize({options:e})}function Vj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Uj(t,e,n){const r=Mr(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=p1(e),{host:a,port:c}=Fj(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),$j()}function p1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Fj(t){const e=p1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:z0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:z0(a)}}}function z0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $j(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function Bj(t,e){return kn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,e){return As(t,"POST","/v1/accounts:signInWithPassword",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(t,e){return As(t,"POST","/v1/accounts:signInWithEmailLink",Zt(t,e))}async function Hj(t,e){return As(t,"POST","/v1/accounts:signInWithEmailLink",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends Rd{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Il(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Il(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(e,n,"signInWithPassword",zj);case"emailLink":return qj(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(e,r,"signUpPassword",Bj);case"emailLink":return Hj(e,{idToken:n,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t,e){return As(t,"POST","/v1/accounts:signInWithIdp",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj="http://localhost";class oi extends Rd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Pp(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new oi(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return xo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xo(e,n)}buildRequest(){const e={requestUri:Wj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kj(t,e){return kn(t,"POST","/v1/accounts:sendVerificationCode",Zt(t,e))}async function Gj(t,e){return As(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,e))}async function Qj(t,e){const n=await As(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,e));if(n.temporaryProof)throw La(t,"account-exists-with-different-credential",n);return n}const Xj={USER_NOT_FOUND:"user-not-found"};async function Yj(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return As(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,n),Xj)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Rd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ya({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ya({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Gj(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Qj(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Yj(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Ya({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zj(t){const e=Da(Oa(t)).link,n=e?Da(Oa(e)).deep_link_id:null,r=Da(Oa(t)).deep_link_id;return(r?Da(Oa(r)).link:null)||r||n||e||t}class Up{constructor(e){var n,r,s,i,a,c;const u=Da(Oa(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=Jj((s=u.mode)!==null&&s!==void 0?s:null);Q(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=Zj(e);try{return new Up(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,n){return Il._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Up.parseLink(n);return Q(r,"argument-error"),Il._fromEmailAndCode(e,r.code,r.tenantId)}}Fo.PROVIDER_ID="password";Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends g1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Gl{constructor(){super("facebook.com")}static credential(e){return oi._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oi._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return es.credential(n,r)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Gl{constructor(){super("github.com")}static credential(e){return oi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Gl{constructor(){super("twitter.com")}static credential(e,n){return oi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ns.credential(n,r)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(t,e){return As(t,"POST","/v1/accounts:signUp",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await _r._fromIdTokenResponse(e,r,s),a=q0(r);return new ai({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=q0(r);return new ai({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function q0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends ir{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Qu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Qu(e,n,r,s)}}function y1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qu._fromErrorAndOperation(t,i,e,r):i})}async function tS(t,e,n=!1){const r=await Tl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ai._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(t,e,n=!1){const{auth:r}=t;if(Ln(r.app))return Promise.reject(er(r));const s="reauthenticate";try{const i=await Tl(t,y1(r,s,e,t),n);Q(i.idToken,r,"internal-error");const a=Lp(i.idToken);Q(a,r,"internal-error");const{sub:c}=a;return Q(t.uid===c,r,"user-mismatch"),ai._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(t,e,n=!1){if(Ln(t.app))return Promise.reject(er(t));const r="signIn",s=await y1(t,r,e),i=await ai._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function v1(t,e){return x1(Mr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(t){const e=Mr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fu(t,e,n){if(Ln(t.app))return Promise.reject(er(t));const r=Mr(t),a=await lm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&_1(t),u}),c=await ai._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function rS(t,e,n){return Ln(t.app)?Promise.reject(er(t)):v1(Se(t),Fo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_1(t),r})}function sS(t,e,n,r){return Se(t).onIdTokenChanged(e,n,r)}function iS(t,e,n){return Se(t).beforeAuthStateChanged(e,n)}function oS(t,e,n,r){return Se(t).onAuthStateChanged(e,n,r)}function aS(t){return Se(t).signOut()}async function lS(t){return Se(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t,e){return kn(t,"POST","/v2/accounts/mfaEnrollment:start",Zt(t,e))}const Xu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xu,"1"),this.storage.removeItem(Xu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=1e3,dS=10;class b1 extends w1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);Tj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},uS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}b1.type="LOCAL";const N1=b1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1 extends w1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}E1.type="SESSION";const T1=E1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ad(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await hS(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Fp("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(){return window}function mS(t){rt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){return typeof rt().WorkerGlobalScope<"u"&&typeof rt().importScripts=="function"}async function pS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function yS(){return $p()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="firebaseLocalStorageDb",xS=1,Yu="firebaseLocalStorage",k1="fbase_key";class Ql{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pd(t,e){return t.transaction([Yu],e?"readwrite":"readonly").objectStore(Yu)}function vS(){const t=indexedDB.deleteDatabase(I1);return new Ql(t).toPromise()}function cm(){const t=indexedDB.open(I1,xS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yu,{keyPath:k1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yu)?e(r):(r.close(),await vS(),e(await cm()))})})}async function H0(t,e,n){const r=Pd(t,!0).put({[k1]:e,value:n});return new Ql(r).toPromise()}async function _S(t,e){const n=Pd(t,!1).get(e),r=await new Ql(n).toPromise();return r===void 0?null:r.value}function W0(t,e){const n=Pd(t,!0).delete(e);return new Ql(n).toPromise()}const wS=800,bS=3;class j1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>bS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $p()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ad._getInstance(yS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pS(),!this.activeServiceWorker)return;this.sender=new fS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cm();return await H0(e,Xu,"1"),await W0(e,Xu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>H0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_S(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>W0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Pd(s,!1).getAll();return new Ql(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j1.type="LOCAL";const S1=j1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t,e){return kn(t,"POST","/v2/accounts/mfaSignIn:start",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=500,TS=6e4,Hc=1e12;class IS{constructor(e){this.auth=e,this.counter=Hc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new kS(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Hc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Hc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Hc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class kS{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;Q(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=jS(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},TS)},ES))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function jS(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=f1("rcb"),SS=new Wl(3e4,6e4);class CS{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=rt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return Q(RS(n),e,"argument-error"),this.shouldResolveImmediately(n)&&O0(rt().grecaptcha)?Promise.resolve(rt().grecaptcha):new Promise((r,s)=>{const i=rt().setTimeout(()=>{s(hn(e,"network-request-failed"))},SS.get());rt()[qh]=()=>{rt().clearTimeout(i),delete rt()[qh];const c=rt().grecaptcha;if(!c||!O0(c)){s(hn(e,"internal-error"));return}const u=c.render;c.render=(d,f)=>{const m=u(d,f);return this.counter++,m},this.hostLanguage=n,r(c)};const a=`${Aj()}?${Uo({onload:qh,render:"explicit",hl:n})}`;Vp(a).catch(()=>{clearTimeout(i),s(hn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=rt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function RS(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class AS{async load(e){return new IS(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="recaptcha",PS={theme:"light",type:"image"};class K0{constructor(e,n,r=Object.assign({},PS)){this.parameters=r,this.type=C1,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mr(e),this.isInvisible=this.parameters.size==="invisible",Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;Q(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new AS:new CS,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=a=>{a&&(this.tokenChangeListeners.delete(i),s(a))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=rt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Q(Yw()&&!$p(),this.auth,"internal-error"),await DS(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await mj(this.auth);Q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function DS(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ya._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function LS(t,e,n){if(Ln(t.app))return Promise.reject(er(t));const r=Mr(t),s=await MS(r,e,Se(n));return new OS(s,i=>v1(r,i))}async function MS(t,e,n){var r;const s=await n.verify();try{Q(typeof s=="string",t,"argument-error"),Q(n.type===C1,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const a=i.session;if("phoneNumber"in i)return Q(a.type==="enroll",t,"internal-error"),(await cS(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{Q(a.type==="signin",t,"internal-error");const c=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return Q(c,t,"missing-multi-factor-info"),(await NS(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await Kj(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return a}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e){return e?wr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends Rd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function US(t){return x1(t.auth,new Bp(t),t.bypassAuthState)}function FS(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),nS(n,new Bp(t),t.bypassAuthState)}async function $S(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),tS(n,new Bp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return US;case"linkViaPopup":case"linkViaRedirect":return $S;case"reauthViaPopup":case"reauthViaRedirect":return FS;default:$n(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Wl(2e3,1e4);class ao extends R1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BS.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="pendingRedirect",mu=new Map;class qS extends R1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=mu.get(this.auth._key());if(!e){try{const r=await HS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}mu.set(this.auth._key(),e)}return this.bypassAuthState||mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HS(t,e){const n=GS(e),r=KS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function WS(t,e){mu.set(t._key(),e)}function KS(t){return wr(t._redirectPersistence)}function GS(t){return hu(zS,t.config.apiKey,t.name)}async function QS(t,e,n=!1){if(Ln(t.app))return Promise.reject(er(t));const r=Mr(t),s=VS(r,e),a=await new qS(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=10*60*1e3;class YS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!A1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XS&&this.cachedEventUids.clear(),this.cachedEventUids.has(G0(e))}saveEventToCache(e){this.cachedEventUids.add(G0(e)),this.lastProcessedEventTime=Date.now()}}function G0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function A1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(t,e={}){return kn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tC=/^https?/;async function nC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZS(t);for(const n of e)try{if(rC(n))return}catch{}$n(t,"unauthorized-domain")}function rC(t){const e=om(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!tC.test(n))return!1;if(eC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=new Wl(3e4,6e4);function Q0(){const t=rt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iC(t){return new Promise((e,n)=>{var r,s,i;function a(){Q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q0(),n(hn(t,"network-request-failed"))},timeout:sC.get()})}if(!((s=(r=rt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=rt().gapi)===null||i===void 0)&&i.load)a();else{const c=f1("iframefcb");return rt()[c]=()=>{gapi.load?a():n(hn(t,"network-request-failed"))},Vp(`${Dj()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw pu=null,e})}let pu=null;function oC(t){return pu=pu||iC(t),pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new Wl(5e3,15e3),lC="__/auth/iframe",cC="emulator/auth/iframe",uC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hC(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Op(e,cC):`https://${t.config.authDomain}/${lC}`,r={apiKey:e.apiKey,appName:t.name,v:xi},s=dC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Uo(r).slice(1)}`}async function fC(t){const e=await oC(t),n=rt().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:hC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=hn(t,"network-request-failed"),c=rt().setTimeout(()=>{i(a)},aC.get());function u(){rt().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pC=500,gC=600,yC="_blank",xC="http://localhost";class X0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vC(t,e,n,r=pC,s=gC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},mC),{width:r.toString(),height:s.toString(),top:i,left:a}),d=Lt().toLowerCase();n&&(c=o1(d)?yC:n),s1(d)&&(e=e||xC,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[_,R])=>`${g}${_}=${R},`,"");if(Ej(d)&&c!=="_self")return _C(e||"",c),new X0(null);const m=window.open(e||"",c,f);Q(m,t,"popup-blocked");try{m.focus()}catch{}return new X0(m)}function _C(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="__/auth/handler",bC="emulator/auth/handler",NC=encodeURIComponent("fac");async function Y0(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xi,eventId:s};if(e instanceof g1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",GI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof Gl){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${NC}=${encodeURIComponent(u)}`:"";return`${EC(t)}?${Uo(c).slice(1)}${d}`}function EC({config:t}){return t.emulator?Op(t,bC):`https://${t.authDomain}/${wC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="webStorageSupport";class TC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T1,this._completeRedirectFn=QS,this._overrideRedirectResult=WS}async _openPopup(e,n,r,s){var i;Ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Y0(e,n,r,om(),s);return vC(e,a,Fp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Y0(e,n,r,om(),s);return mS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fC(e),r=new YS(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hh,{type:Hh},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Hh];a!==void 0&&n(!!a),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return d1()||i1()||Mp()}}const IC=TC;var J0="@firebase/auth",Z0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SC(t){ii(new ws("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Q(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h1(t)},d=new Cj(r,s,i,u);return Vj(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ii(new ws("auth-internal",e=>{const n=Mr(e.getProvider("auth").getImmediate());return(r=>new kC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(J0,Z0,jC(t)),Zn(J0,Z0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=5*60,RC=Fw("authIdTokenMaxAge")||CC;let ex=null;const AC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RC)return;const s=n==null?void 0:n.token;ex!==s&&(ex=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function PC(t=Cd()){const e=Sd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=m1(t,{popupRedirectResolver:IC,persistence:[S1,N1,T1]}),r=Fw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=AC(i.toString());iS(n,a,()=>a(n.currentUser)),sS(n,c=>a(c))}}const s=Mw("auth");return s&&Uj(n,`http://${s}`),n}function DC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Rj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",DC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SC("Browser");var OC="firebase",LC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(OC,LC,"app");var tx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,P1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function I(){}I.prototype=y.prototype,x.D=y.prototype,x.prototype=new I,x.prototype.constructor=x,x.C=function(C,P,D){for(var A=Array(arguments.length-2),be=2;be<arguments.length;be++)A[be-2]=arguments[be];return y.prototype[P].apply(C,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,I){I||(I=0);var C=Array(16);if(typeof y=="string")for(var P=0;16>P;++P)C[P]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(P=0;16>P;++P)C[P]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=x.g[0],I=x.g[1],P=x.g[2];var D=x.g[3],A=y+(D^I&(P^D))+C[0]+3614090360&4294967295;y=I+(A<<7&4294967295|A>>>25),A=D+(P^y&(I^P))+C[1]+3905402710&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(I^D&(y^I))+C[2]+606105819&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(y^P&(D^y))+C[3]+3250441966&4294967295,I=P+(A<<22&4294967295|A>>>10),A=y+(D^I&(P^D))+C[4]+4118548399&4294967295,y=I+(A<<7&4294967295|A>>>25),A=D+(P^y&(I^P))+C[5]+1200080426&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(I^D&(y^I))+C[6]+2821735955&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(y^P&(D^y))+C[7]+4249261313&4294967295,I=P+(A<<22&4294967295|A>>>10),A=y+(D^I&(P^D))+C[8]+1770035416&4294967295,y=I+(A<<7&4294967295|A>>>25),A=D+(P^y&(I^P))+C[9]+2336552879&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(I^D&(y^I))+C[10]+4294925233&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(y^P&(D^y))+C[11]+2304563134&4294967295,I=P+(A<<22&4294967295|A>>>10),A=y+(D^I&(P^D))+C[12]+1804603682&4294967295,y=I+(A<<7&4294967295|A>>>25),A=D+(P^y&(I^P))+C[13]+4254626195&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(I^D&(y^I))+C[14]+2792965006&4294967295,P=D+(A<<17&4294967295|A>>>15),A=I+(y^P&(D^y))+C[15]+1236535329&4294967295,I=P+(A<<22&4294967295|A>>>10),A=y+(P^D&(I^P))+C[1]+4129170786&4294967295,y=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(y^I))+C[6]+3225465664&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^I&(D^y))+C[11]+643717713&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^y&(P^D))+C[0]+3921069994&4294967295,I=P+(A<<20&4294967295|A>>>12),A=y+(P^D&(I^P))+C[5]+3593408605&4294967295,y=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(y^I))+C[10]+38016083&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^I&(D^y))+C[15]+3634488961&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^y&(P^D))+C[4]+3889429448&4294967295,I=P+(A<<20&4294967295|A>>>12),A=y+(P^D&(I^P))+C[9]+568446438&4294967295,y=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(y^I))+C[14]+3275163606&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^I&(D^y))+C[3]+4107603335&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^y&(P^D))+C[8]+1163531501&4294967295,I=P+(A<<20&4294967295|A>>>12),A=y+(P^D&(I^P))+C[13]+2850285829&4294967295,y=I+(A<<5&4294967295|A>>>27),A=D+(I^P&(y^I))+C[2]+4243563512&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^I&(D^y))+C[7]+1735328473&4294967295,P=D+(A<<14&4294967295|A>>>18),A=I+(D^y&(P^D))+C[12]+2368359562&4294967295,I=P+(A<<20&4294967295|A>>>12),A=y+(I^P^D)+C[5]+4294588738&4294967295,y=I+(A<<4&4294967295|A>>>28),A=D+(y^I^P)+C[8]+2272392833&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^I)+C[11]+1839030562&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^y)+C[14]+4259657740&4294967295,I=P+(A<<23&4294967295|A>>>9),A=y+(I^P^D)+C[1]+2763975236&4294967295,y=I+(A<<4&4294967295|A>>>28),A=D+(y^I^P)+C[4]+1272893353&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^I)+C[7]+4139469664&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^y)+C[10]+3200236656&4294967295,I=P+(A<<23&4294967295|A>>>9),A=y+(I^P^D)+C[13]+681279174&4294967295,y=I+(A<<4&4294967295|A>>>28),A=D+(y^I^P)+C[0]+3936430074&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^I)+C[3]+3572445317&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^y)+C[6]+76029189&4294967295,I=P+(A<<23&4294967295|A>>>9),A=y+(I^P^D)+C[9]+3654602809&4294967295,y=I+(A<<4&4294967295|A>>>28),A=D+(y^I^P)+C[12]+3873151461&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^I)+C[15]+530742520&4294967295,P=D+(A<<16&4294967295|A>>>16),A=I+(P^D^y)+C[2]+3299628645&4294967295,I=P+(A<<23&4294967295|A>>>9),A=y+(P^(I|~D))+C[0]+4096336452&4294967295,y=I+(A<<6&4294967295|A>>>26),A=D+(I^(y|~P))+C[7]+1126891415&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~I))+C[14]+2878612391&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~y))+C[5]+4237533241&4294967295,I=P+(A<<21&4294967295|A>>>11),A=y+(P^(I|~D))+C[12]+1700485571&4294967295,y=I+(A<<6&4294967295|A>>>26),A=D+(I^(y|~P))+C[3]+2399980690&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~I))+C[10]+4293915773&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~y))+C[1]+2240044497&4294967295,I=P+(A<<21&4294967295|A>>>11),A=y+(P^(I|~D))+C[8]+1873313359&4294967295,y=I+(A<<6&4294967295|A>>>26),A=D+(I^(y|~P))+C[15]+4264355552&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~I))+C[6]+2734768916&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~y))+C[13]+1309151649&4294967295,I=P+(A<<21&4294967295|A>>>11),A=y+(P^(I|~D))+C[4]+4149444226&4294967295,y=I+(A<<6&4294967295|A>>>26),A=D+(I^(y|~P))+C[11]+3174756917&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~I))+C[2]+718787259&4294967295,P=D+(A<<15&4294967295|A>>>17),A=I+(D^(P|~y))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+D&4294967295}r.prototype.u=function(x,y){y===void 0&&(y=x.length);for(var I=y-this.blockSize,C=this.B,P=this.h,D=0;D<y;){if(P==0)for(;D<=I;)s(this,x,D),D+=this.blockSize;if(typeof x=="string"){for(;D<y;)if(C[P++]=x.charCodeAt(D++),P==this.blockSize){s(this,C),P=0;break}}else for(;D<y;)if(C[P++]=x[D++],P==this.blockSize){s(this,C),P=0;break}}this.h=P,this.o+=y},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;var I=8*this.o;for(y=x.length-8;y<x.length;++y)x[y]=I&255,I/=256;for(this.u(x),x=Array(16),y=I=0;4>y;++y)for(var C=0;32>C;C+=8)x[I++]=this.g[y]>>>C&255;return x};function i(x,y){var I=c;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=y(x)}function a(x,y){this.h=y;for(var I=[],C=!0,P=x.length-1;0<=P;P--){var D=x[P]|0;C&&D==y||(I[P]=D,C=!1)}this.g=I}var c={};function u(x){return-128<=x&&128>x?i(x,function(y){return new a([y|0],0>y?-1:0)}):new a([x|0],0>x?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return m;if(0>x)return S(d(-x));for(var y=[],I=1,C=0;x>=I;C++)y[C]=x/I|0,I*=4294967296;return new a(y,0)}function f(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return S(f(x.substring(1),y));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(y,8)),C=m,P=0;P<x.length;P+=8){var D=Math.min(8,x.length-P),A=parseInt(x.substring(P,P+D),y);8>D?(D=d(Math.pow(y,D)),C=C.j(D).add(d(A))):(C=C.j(I),C=C.add(d(A)))}return C}var m=u(0),g=u(1),_=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-S(this).m();for(var x=0,y=1,I=0;I<this.g.length;I++){var C=this.i(I);x+=(0<=C?C:4294967296+C)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(R(this))return"0";if(k(this))return"-"+S(this).toString(x);for(var y=d(Math.pow(x,6)),I=this,C="";;){var P=E(I,y).g;I=b(I,P.j(y));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(x);if(I=P,R(I))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function R(x){if(x.h!=0)return!1;for(var y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function k(x){return x.h==-1}t.l=function(x){return x=b(this,x),k(x)?-1:R(x)?0:1};function S(x){for(var y=x.g.length,I=[],C=0;C<y;C++)I[C]=~x.g[C];return new a(I,~x.h).add(g)}t.abs=function(){return k(this)?S(this):this},t.add=function(x){for(var y=Math.max(this.g.length,x.g.length),I=[],C=0,P=0;P<=y;P++){var D=C+(this.i(P)&65535)+(x.i(P)&65535),A=(D>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);C=A>>>16,D&=65535,A&=65535,I[P]=A<<16|D}return new a(I,I[I.length-1]&-2147483648?-1:0)};function b(x,y){return x.add(S(y))}t.j=function(x){if(R(this)||R(x))return m;if(k(this))return k(x)?S(this).j(S(x)):S(S(this).j(x));if(k(x))return S(this.j(S(x)));if(0>this.l(_)&&0>x.l(_))return d(this.m()*x.m());for(var y=this.g.length+x.g.length,I=[],C=0;C<2*y;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<x.g.length;P++){var D=this.i(C)>>>16,A=this.i(C)&65535,be=x.i(P)>>>16,He=x.i(P)&65535;I[2*C+2*P]+=A*He,v(I,2*C+2*P),I[2*C+2*P+1]+=D*He,v(I,2*C+2*P+1),I[2*C+2*P+1]+=A*be,v(I,2*C+2*P+1),I[2*C+2*P+2]+=D*be,v(I,2*C+2*P+2)}for(C=0;C<y;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=y;C<2*y;C++)I[C]=0;return new a(I,0)};function v(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function N(x,y){this.g=x,this.h=y}function E(x,y){if(R(y))throw Error("division by zero");if(R(x))return new N(m,m);if(k(x))return y=E(S(x),y),new N(S(y.g),S(y.h));if(k(y))return y=E(x,S(y)),new N(S(y.g),y.h);if(30<x.g.length){if(k(x)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,C=y;0>=C.l(x);)I=O(I),C=O(C);var P=L(I,1),D=L(C,1);for(C=L(C,2),I=L(I,2);!R(C);){var A=D.add(C);0>=A.l(x)&&(P=P.add(I),D=A),C=L(C,1),I=L(I,1)}return y=b(x,P.j(y)),new N(P,y)}for(P=m;0<=x.l(y);){for(I=Math.max(1,Math.floor(x.m()/y.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=d(I),A=D.j(y);k(A)||0<A.l(x);)I-=C,D=d(I),A=D.j(y);R(D)&&(D=g),P=P.add(D),x=b(x,A)}return new N(P,x)}t.A=function(x){return E(this,x).h},t.and=function(x){for(var y=Math.max(this.g.length,x.g.length),I=[],C=0;C<y;C++)I[C]=this.i(C)&x.i(C);return new a(I,this.h&x.h)},t.or=function(x){for(var y=Math.max(this.g.length,x.g.length),I=[],C=0;C<y;C++)I[C]=this.i(C)|x.i(C);return new a(I,this.h|x.h)},t.xor=function(x){for(var y=Math.max(this.g.length,x.g.length),I=[],C=0;C<y;C++)I[C]=this.i(C)^x.i(C);return new a(I,this.h^x.h)};function O(x){for(var y=x.g.length+1,I=[],C=0;C<y;C++)I[C]=x.i(C)<<1|x.i(C-1)>>>31;return new a(I,x.h)}function L(x,y){var I=y>>5;y%=32;for(var C=x.g.length-I,P=[],D=0;D<C;D++)P[D]=0<y?x.i(D+I)>>>y|x.i(D+I+1)<<32-y:x.i(D+I);return new a(P,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,P1=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Js=a}).apply(typeof tx<"u"?tx:typeof self<"u"?self:typeof window<"u"?window:{});var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D1,Ma,O1,gu,um,L1,M1,V1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wc=="object"&&Wc];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var M=l[w];if(!(M in p))break e;p=p[M]}l=l[l.length-1],w=p[l],h=h(w),h!=w&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,w=!1,M={next:function(){if(!w&&p<l.length){var V=p++;return{value:h(V,l[V]),done:!1}}return w=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,w),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function _(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function R(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(w,M,V){for(var W=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)W[Te-2]=arguments[Te];return h.prototype[M].apply(w,W)}}function k(l){const h=l.length;if(0<h){const p=Array(h);for(let w=0;w<h;w++)p[w]=l[w];return p}return[]}function S(l,h){for(let p=1;p<arguments.length;p++){const w=arguments[p];if(u(w)){const M=l.length||0,V=w.length||0;l.length=M+V;for(let W=0;W<V;W++)l[M+W]=w[W]}else l.push(w)}}class b{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(l){return/^[\s\xa0]*$/.test(l)}function N(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function E(l){return E[" "](l),l}E[" "]=function(){};var O=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function L(l,h,p){for(const w in l)h.call(p,l[w],w,l)}function x(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,h){let p,w;for(let M=1;M<arguments.length;M++){w=arguments[M];for(p in w)l[p]=w[p];for(let V=0;V<I.length;V++)p=I[V],Object.prototype.hasOwnProperty.call(w,p)&&(l[p]=w[p])}}function P(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function D(l){c.setTimeout(()=>{throw l},0)}function A(){var l=ee;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class be{constructor(){this.h=this.g=null}add(h,p){const w=He.get();w.set(h,p),this.h?this.h.next=w:this.g=w,this.h=w}}var He=new b(()=>new qt,l=>l.reset());class qt{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,q=!1,ee=new be,te=()=>{const l=c.Promise.resolve(void 0);ut=()=>{l.then(ve)}};var ve=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(p){D(p)}var h=He;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}q=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Me(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Me.prototype.h=function(){this.defaultPrevented=!0};var en=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function jn(l,h){if(Me.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{E(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:tn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&jn.aa.h.call(this)}}R(jn,Me);var tn={2:"touch",3:"pen",4:"mouse"};jn.prototype.h=function(){jn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var nn="closure_listenable_"+(1e6*Math.random()|0),Ur=0;function cc(l,h,p,w,M){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!w,this.ha=M,this.key=++Ur,this.da=this.fa=!1}function Fr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ds(l){this.src=l,this.g={},this.h=0}Ds.prototype.add=function(l,h,p,w,M){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var W=bi(l,h,w,M);return-1<W?(h=l[W],p||(h.fa=!1)):(h=new cc(h,this.src,V,!!w,M),h.fa=p,l.push(h)),h};function ar(l,h){var p=h.type;if(p in l.g){var w=l.g[p],M=Array.prototype.indexOf.call(w,h,void 0),V;(V=0<=M)&&Array.prototype.splice.call(w,M,1),V&&(Fr(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function bi(l,h,p,w){for(var M=0;M<l.length;++M){var V=l[M];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==w)return M}return-1}var Ni="closure_lm_"+(1e6*Math.random()|0),Ei={};function Go(l,h,p,w,M){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Go(l,h[V],p,w,M);return null}return p=Zo(p),l&&l[nn]?l.K(h,p,d(w)?!!w.capture:!1,M):uc(l,h,p,!1,w,M)}function uc(l,h,p,w,M,V){if(!h)throw Error("Invalid event type");var W=d(M)?!!M.capture:!!M,Te=Ti(l);if(Te||(l[Ni]=Te=new Ds(l)),p=Te.add(h,p,w,W,V),p.proxy)return p;if(w=Qo(),p.proxy=w,w.src=l,w.listener=p,l.addEventListener)en||(M=W),M===void 0&&(M=!1),l.addEventListener(h.toString(),w,M);else if(l.attachEvent)l.attachEvent(Yo(h.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Qo(){function l(p){return h.call(l.src,l.listener,p)}const h=Jo;return l}function Xo(l,h,p,w,M){if(Array.isArray(h))for(var V=0;V<h.length;V++)Xo(l,h[V],p,w,M);else w=d(w)?!!w.capture:!!w,p=Zo(p),l&&l[nn]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],p=bi(V,p,w,M),-1<p&&(Fr(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=Ti(l))&&(h=l.g[h.toString()],l=-1,h&&(l=bi(h,p,w,M)),(p=-1<l?h[l]:null)&&zn(p))}function zn(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[nn])ar(h.i,l);else{var p=l.type,w=l.proxy;h.removeEventListener?h.removeEventListener(p,w,l.capture):h.detachEvent?h.detachEvent(Yo(p),w):h.addListener&&h.removeListener&&h.removeListener(w),(p=Ti(h))?(ar(p,l),p.h==0&&(p.src=null,h[Ni]=null)):Fr(l)}}}function Yo(l){return l in Ei?Ei[l]:Ei[l]="on"+l}function Jo(l,h){if(l.da)l=!0;else{h=new jn(h,this);var p=l.listener,w=l.ha||l.src;l.fa&&zn(l),l=p.call(w,h)}return l}function Ti(l){return l=l[Ni],l instanceof Ds?l:null}var lr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zo(l){return typeof l=="function"?l:(l[lr]||(l[lr]=function(h){return l.handleEvent(h)}),l[lr])}function Ze(){ye.call(this),this.i=new Ds(this),this.M=this,this.F=null}R(Ze,ye),Ze.prototype[nn]=!0,Ze.prototype.removeEventListener=function(l,h,p,w){Xo(this,l,h,p,w)};function dt(l,h){var p,w=l.F;if(w)for(p=[];w;w=w.F)p.push(w);if(l=l.M,w=h.type||h,typeof h=="string")h=new Me(h,l);else if(h instanceof Me)h.target=h.target||l;else{var M=h;h=new Me(w,l),C(h,M)}if(M=!0,p)for(var V=p.length-1;0<=V;V--){var W=h.g=p[V];M=Os(W,w,!0,h)&&M}if(W=h.g=l,M=Os(W,w,!0,h)&&M,M=Os(W,w,!1,h)&&M,p)for(V=0;V<p.length;V++)W=h.g=p[V],M=Os(W,w,!1,h)&&M}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],w=0;w<p.length;w++)Fr(p[w]);delete l.g[h],l.h--}}this.F=null},Ze.prototype.K=function(l,h,p,w){return this.i.add(String(l),h,!1,p,w)},Ze.prototype.L=function(l,h,p,w){return this.i.add(String(l),h,!0,p,w)};function Os(l,h,p,w){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,V=0;V<h.length;++V){var W=h[V];if(W&&!W.da&&W.capture==p){var Te=W.listener,vt=W.ha||W.src;W.fa&&ar(l.i,W),M=Te.call(vt,w)!==!1&&M}}return M&&!w.defaultPrevented}function ea(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Ii(l){l.g=ea(()=>{l.g=null,l.i&&(l.i=!1,Ii(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class dc extends ye{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ii(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(l){ye.call(this),this.h=l,this.g={}}R(yn,ye);var ta=[];function ki(l){L(l.g,function(h,p){this.g.hasOwnProperty(p)&&zn(h)},l),l.g={}}yn.prototype.N=function(){yn.aa.N.call(this),ki(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=c.JSON.stringify,hc=c.JSON.parse,fc=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Si(){}Si.prototype.h=null;function na(l){return l.h||(l.h=l.i())}function qn(){}var $r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Br(){Me.call(this,"d")}R(Br,Me);function Ci(){Me.call(this,"c")}R(Ci,Me);var Hn={},ra=null;function Sn(){return ra=ra||new Ze}Hn.La="serverreachability";function mc(l){Me.call(this,Hn.La,l)}R(mc,Me);function Ls(l){const h=Sn();dt(h,new mc(h))}Hn.STAT_EVENT="statevent";function Ri(l,h){Me.call(this,Hn.STAT_EVENT,l),this.stat=h}R(Ri,Me);function at(l){const h=Sn();dt(h,new Ri(h,l))}Hn.Ma="timingevent";function Ai(l,h){Me.call(this,Hn.Ma,l),this.size=h}R(Ai,Me);function zr(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function cr(){this.g=!0}cr.prototype.xa=function(){this.g=!1};function Pi(l,h,p,w,M,V){l.info(function(){if(l.g)if(V)for(var W="",Te=V.split("&"),vt=0;vt<Te.length;vt++){var me=Te[vt].split("=");if(1<me.length){var kt=me[0];me=me[1];var jt=kt.split("_");W=2<=jt.length&&jt[1]=="type"?W+(kt+"="+me+"&"):W+(kt+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+w+") [attempt "+M+"]: "+h+`
`+p+`
`+W})}function sa(l,h,p,w,M,V,W){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+M+"]: "+h+`
`+p+`
`+V+" "+W})}function ur(l,h,p,w){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+pc(l,p)+(w?" "+w:"")})}function ia(l,h){l.info(function(){return"TIMEOUT: "+h})}cr.prototype.info=function(){};function pc(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var w=p[l];if(!(2>w.length)){var M=w[1];if(Array.isArray(M)&&!(1>M.length)){var V=M[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<M.length;W++)M[W]=""}}}}return ji(p)}catch{return h}}var qr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Di;function Cn(){}R(Cn,Si),Cn.prototype.g=function(){return new XMLHttpRequest},Cn.prototype.i=function(){return{}},Di=new Cn;function Wn(l,h,p,w){this.j=l,this.i=h,this.l=p,this.R=w||1,this.U=new yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gc}function gc(){this.i=null,this.g="",this.h=!1}var yc={},aa={};function la(l,h,p){l.L=1,l.v=Vi(oe(h)),l.m=p,l.P=!0,et(l,null)}function et(l,h){l.F=Date.now(),Oi(l),l.A=oe(l.v);var p=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Ug(p.i,"t",w),l.C=0,p=l.j.J,l.h=new gc,l.g=ry(l.j,p?h:null,!l.m),0<l.O&&(l.M=new dc(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,w=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(ta[0]=M.toString()),M=ta);for(var V=0;V<M.length;V++){var W=Go(p,M[V],w||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ls(),Pi(l.i,l.u,l.A,l.l,l.R,l.m)}Wn.prototype.ca=function(l){l=l.target;const h=this.M;h&&hr(l)==3?h.j():this.Y(l)},Wn.prototype.Y=function(l){try{if(l==this.g)e:{const jt=hr(this.g);var h=this.g.Ba();const zi=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||Wg(this.g)))){this.J||jt!=4||h==7||(h==8||0>=zi?Ls(3):Ls(2)),ua(this);var p=this.g.Z();this.X=p;t:if(ca(this)){var w=Wg(this.g);l="";var M=w.length,V=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dr(this),Ms(this);var W="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(w[h],{stream:!(V&&h==M-1)});w.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,sa(this.i,this.u,this.A,this.l,this.R,jt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,vt=this.g;if((Te=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Te)){var me=Te;break t}}me=null}if(p=me)ur(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,da(this,p);else{this.o=!1,this.s=3,at(12),dr(this),Ms(this);break e}}if(this.P){p=!0;let Rn;for(;!this.J&&this.C<W.length;)if(Rn=rh(this,W),Rn==aa){jt==4&&(this.s=4,at(14),p=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==yc){this.s=4,at(15),ur(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else ur(this.i,this.l,Rn,null),da(this,Rn);if(ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||W.length!=0||this.h.h||(this.s=1,at(16),p=!1),this.o=this.o&&p,!p)ur(this.i,this.l,W,"[Invalid Chunked Response]"),dr(this),Ms(this);else if(0<W.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),ch(kt),kt.M=!0,at(11))}}else ur(this.i,this.l,W,null),da(this,W);jt==4&&dr(this),this.o&&!this.J&&(jt==4?Zg(this.j,this):(this.o=!1,Oi(this)))}else GN(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),dr(this),Ms(this)}}}catch{}finally{}};function ca(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function rh(l,h){var p=l.C,w=h.indexOf(`
`,p);return w==-1?aa:(p=Number(h.substring(p,w)),isNaN(p)?yc:(w+=1,w+p>h.length?aa:(h=h.slice(w,w+p),l.C=w+p,h)))}Wn.prototype.cancel=function(){this.J=!0,dr(this)};function Oi(l){l.S=Date.now()+l.I,xc(l,l.I)}function xc(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=zr(g(l.ba,l),h)}function ua(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Wn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ia(this.i,this.A),this.L!=2&&(Ls(),at(17)),dr(this),this.s=2,Ms(this)):xc(this,this.S-l)};function Ms(l){l.j.G==0||l.J||Zg(l.j,l)}function dr(l){ua(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,ki(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function da(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Li(p.h,l))){if(!l.K&&Li(p.h,l)&&p.G==3){try{var w=p.Da.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var M=w;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Tc(p),Nc(p);else break e;lh(p),at(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=zr(g(p.Za,p),6e3));if(1>=fa(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else $s(p,11)}else if((l.K||p.g==l)&&Tc(p),!v(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let me=M[h];if(p.T=me[0],me=me[1],p.G==2)if(me[0]=="c"){p.K=me[1],p.ia=me[2];const kt=me[3];kt!=null&&(p.la=kt,p.j.info("VER="+p.la));const jt=me[4];jt!=null&&(p.Aa=jt,p.j.info("SVER="+p.Aa));const zi=me[5];zi!=null&&typeof zi=="number"&&0<zi&&(w=1.5*zi,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;const Rn=l.g;if(Rn){const kc=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kc){var V=w.h;V.g||kc.indexOf("spdy")==-1&&kc.indexOf("quic")==-1&&kc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Mi(V,V.h),V.h=null))}if(w.D){const uh=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;uh&&(w.ya=uh,Ne(w.I,w.D,uh))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var W=l;if(w.qa=ny(w,w.J?w.ia:null,w.W),W.K){T(w.h,W);var Te=W,vt=w.L;vt&&(Te.I=vt),Te.B&&(ua(Te),Oi(Te)),w.g=W}else Yg(w);0<p.i.length&&Ec(p)}else me[0]!="stop"&&me[0]!="close"||$s(p,7);else p.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?$s(p,7):ah(p):me[0]!="noop"&&p.l&&p.l.ta(me),p.v=0)}}Ls(4)}catch{}}var sh=class{constructor(l,h){this.g=l,this.map=h}};function vc(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ha(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function fa(l){return l.h?1:l.g?l.g.size:0}function Li(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Mi(l,h){l.g?l.g.add(h):l.h=h}function T(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}vc.prototype.cancel=function(){if(this.i=$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function $(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return k(l.i)}function B(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,w=0;w<p;w++)h.push(l[w]);return h}h=[],p=0;for(w in l)h[p++]=l[w];return h}function ne(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const w in l)h[p++]=w;return h}}}function xe(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=ne(l),w=B(l),M=w.length,V=0;V<M;V++)h.call(void 0,w[V],p&&p[V],l)}var Ce=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tt(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var w=l[p].indexOf("="),M=null;if(0<=w){var V=l[p].substring(0,w);M=l[p].substring(w+1)}else V=l[p];h(V,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function ht(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ht){this.h=l.h,Ee(this,l.j),this.o=l.o,this.g=l.g,Ve(this,l.s),this.l=l.l;var h=l.i,p=new pa;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),rn(this,p),this.m=l.m}else l&&(h=String(l).match(Ce))?(this.h=!1,Ee(this,h[1]||"",!0),this.o=Vs(h[2]||""),this.g=Vs(h[3]||"",!0),Ve(this,h[4]),this.l=Vs(h[5]||"",!0),rn(this,h[6]||"",!0),this.m=Vs(h[7]||"")):(this.h=!1,this.i=new pa(null,this.h))}ht.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Us(h,ma,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Us(h,ma,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Us(p,p.charAt(0)=="/"?Ui:ae,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Us(p,Fi)),l.join("")};function oe(l){return new ht(l)}function Ee(l,h,p){l.j=p?Vs(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ve(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function rn(l,h,p){h instanceof pa?(l.i=h,$N(l.i,l.h)):(p||(h=Us(h,Fs)),l.i=new pa(h,l.h))}function Ne(l,h,p){l.i.set(h,p)}function Vi(l){return Ne(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Vs(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Us(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,ih),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ih(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ma=/[#\/\?@]/g,ae=/[#\?:]/g,Ui=/[#\?]/g,Fs=/[#\?@]/g,Fi=/#/g;function pa(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Hr(l){l.g||(l.g=new Map,l.h=0,l.i&&tt(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=pa.prototype,t.add=function(l,h){Hr(this),this.i=null,l=$i(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Mg(l,h){Hr(l),h=$i(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Vg(l,h){return Hr(l),h=$i(l,h),l.g.has(h)}t.forEach=function(l,h){Hr(this),this.g.forEach(function(p,w){p.forEach(function(M){l.call(h,M,w,this)},this)},this)},t.na=function(){Hr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let w=0;w<h.length;w++){const M=l[w];for(let V=0;V<M.length;V++)p.push(h[w])}return p},t.V=function(l){Hr(this);let h=[];if(typeof l=="string")Vg(this,l)&&(h=h.concat(this.g.get($i(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Hr(this),this.i=null,l=$i(this,l),Vg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Ug(l,h,p){Mg(l,h),0<p.length&&(l.i=null,l.g.set($i(l,h),k(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var w=h[p];const V=encodeURIComponent(String(w)),W=this.V(w);for(w=0;w<W.length;w++){var M=V;W[w]!==""&&(M+="="+encodeURIComponent(String(W[w]))),l.push(M)}}return this.i=l.join("&")};function $i(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function $N(l,h){h&&!l.j&&(Hr(l),l.i=null,l.g.forEach(function(p,w){var M=w.toLowerCase();w!=M&&(Mg(this,w),Ug(this,M,p))},l)),l.j=h}function BN(l,h){const p=new cr;if(c.Image){const w=new Image;w.onload=_(Wr,p,"TestLoadImage: loaded",!0,h,w),w.onerror=_(Wr,p,"TestLoadImage: error",!1,h,w),w.onabort=_(Wr,p,"TestLoadImage: abort",!1,h,w),w.ontimeout=_(Wr,p,"TestLoadImage: timeout",!1,h,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else h(!1)}function zN(l,h){const p=new cr,w=new AbortController,M=setTimeout(()=>{w.abort(),Wr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:w.signal}).then(V=>{clearTimeout(M),V.ok?Wr(p,"TestPingServer: ok",!0,h):Wr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Wr(p,"TestPingServer: error",!1,h)})}function Wr(l,h,p,w,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),w(p)}catch{}}function qN(){this.g=new fc}function HN(l,h,p){const w=p||"";try{xe(l,function(M,V){let W=M;d(M)&&(W=ji(M)),h.push(w+V+"="+encodeURIComponent(W))})}catch(M){throw h.push(w+"type="+encodeURIComponent("_badmap")),M}}function _c(l){this.l=l.Ub||null,this.j=l.eb||!1}R(_c,Si),_c.prototype.g=function(){return new wc(this.l,this.j)},_c.prototype.i=function(l){return function(){return l}}({});function wc(l,h){Ze.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(wc,Ze),t=wc.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,ya(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ga(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ya(this)),this.g&&(this.readyState=3,ya(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?ga(this):ya(this),this.readyState==3&&Fg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ga(this))},t.Qa=function(l){this.g&&(this.response=l,ga(this))},t.ga=function(){this.g&&ga(this)};function ga(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ya(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function ya(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(wc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function $g(l){let h="";return L(l,function(p,w){h+=w,h+=":",h+=p,h+=`\r
`}),h}function oh(l,h,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=$g(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ne(l,h,p))}function We(l){Ze.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(We,Ze);var WN=/^https?$/i,KN=["POST","PUT"];t=We.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Di.g(),this.v=this.o?na(this.o):na(Di),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Bg(this,V);return}if(l=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var M in w)p.set(M,w[M]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const V of w.keys())p.set(V,w.get(V));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(KN,h,void 0))||w||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of p)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hg(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Bg(this,V)}};function Bg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,zg(l),bc(l)}function zg(l){l.A||(l.A=!0,dt(l,"complete"),dt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,dt(this,"complete"),dt(this,"abort"),bc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bc(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qg(this):this.bb())},t.bb=function(){qg(this)};function qg(l){if(l.h&&typeof a<"u"&&(!l.v[1]||hr(l)!=4||l.Z()!=2)){if(l.u&&hr(l)==4)ea(l.Ea,0,l);else if(dt(l,"readystatechange"),hr(l)==4){l.h=!1;try{const W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var w;if(w=W===0){var M=String(l.D).match(Ce)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),w=!WN.test(M?M.toLowerCase():"")}p=w}if(p)dt(l,"complete"),dt(l,"success");else{l.m=6;try{var V=2<hr(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",zg(l)}}finally{bc(l)}}}}function bc(l,h){if(l.g){Hg(l);const p=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||dt(l,"ready");try{p.onreadystatechange=w}catch{}}}function Hg(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function hr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),hc(h)}};function Wg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function GN(l){const h={};l=(l.g&&2<=hr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(v(l[w]))continue;var p=P(l[w]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[M]||[];h[M]=V,V.push(p)}x(h,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Kg(l){this.Aa=0,this.i=[],this.j=new cr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xa("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xa("baseRetryDelayMs",5e3,l),this.cb=xa("retryDelaySeedMs",1e4,l),this.Wa=xa("forwardChannelMaxRetries",2,l),this.wa=xa("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new vc(l&&l.concurrentRequestLimit),this.Da=new qN,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Kg.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,w){at(0),this.W=l,this.H=h||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=ny(this,null,this.W),Ec(this)};function ah(l){if(Gg(l),l.G==3){var h=l.U++,p=oe(l.I);if(Ne(p,"SID",l.K),Ne(p,"RID",h),Ne(p,"TYPE","terminate"),va(l,p),h=new Wn(l,l.j,h),h.L=2,h.v=Vi(oe(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=ry(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Oi(h)}ty(l)}function Nc(l){l.g&&(ch(l),l.g.cancel(),l.g=null)}function Gg(l){Nc(l),l.u&&(c.clearTimeout(l.u),l.u=null),Tc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ec(l){if(!ha(l.h)&&!l.s){l.s=!0;var h=l.Ga;ut||te(),q||(ut(),q=!0),ee.add(h,l),l.B=0}}function QN(l,h){return fa(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=zr(g(l.Ga,l,h),ey(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Wn(this,this.j,l);let V=this.o;if(this.S&&(V?(V=y(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(M.H=V,V=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Xg(this,M,h),p=oe(this.I),Ne(p,"RID",l),Ne(p,"CVER",22),this.D&&Ne(p,"X-HTTP-Session-Id",this.D),va(this,p),V&&(this.O?h="headers="+encodeURIComponent(String($g(V)))+"&"+h:this.m&&oh(p,this.m,V)),Mi(this.h,M),this.Ua&&Ne(p,"TYPE","init"),this.P?(Ne(p,"$req",h),Ne(p,"SID","null"),M.T=!0,la(M,p,null)):la(M,p,h),this.G=2}}else this.G==3&&(l?Qg(this,l):this.i.length==0||ha(this.h)||Qg(this))};function Qg(l,h){var p;h?p=h.l:p=l.U++;const w=oe(l.I);Ne(w,"SID",l.K),Ne(w,"RID",p),Ne(w,"AID",l.T),va(l,w),l.m&&l.o&&oh(w,l.m,l.o),p=new Wn(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Xg(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Mi(l.h,p),la(p,w,h)}function va(l,h){l.H&&L(l.H,function(p,w){Ne(h,w,p)}),l.l&&xe({},function(p,w){Ne(h,w,p)})}function Xg(l,h,p){p=Math.min(l.i.length,p);var w=l.l?g(l.l.Na,l.l,l):null;e:{var M=l.i;let V=-1;for(;;){const W=["count="+p];V==-1?0<p?(V=M[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let Te=!0;for(let vt=0;vt<p;vt++){let me=M[vt].g;const kt=M[vt].map;if(me-=V,0>me)V=Math.max(0,M[vt].g-100),Te=!1;else try{HN(kt,W,"req"+me+"_")}catch{w&&w(kt)}}if(Te){w=W.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,w}function Yg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ut||te(),q||(ut(),q=!0),ee.add(h,l),l.v=0}}function lh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=zr(g(l.Fa,l),ey(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Jg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=zr(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Nc(this),Jg(this))};function ch(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Jg(l){l.g=new Wn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=oe(l.qa);Ne(h,"RID","rpc"),Ne(h,"SID",l.K),Ne(h,"AID",l.T),Ne(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ne(h,"TO",l.ja),Ne(h,"TYPE","xmlhttp"),va(l,h),l.m&&l.o&&oh(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Vi(oe(h)),p.m=null,p.P=!0,et(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Nc(this),lh(this),at(19))};function Tc(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Zg(l,h){var p=null;if(l.g==h){Tc(l),ch(l),l.g=null;var w=2}else if(Li(l.h,h))p=h.D,T(l.h,h),w=1;else return;if(l.G!=0){if(h.o)if(w==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;w=Sn(),dt(w,new Ai(w,p)),Ec(l)}else Yg(l);else if(M=h.s,M==3||M==0&&0<h.X||!(w==1&&QN(l,h)||w==2&&lh(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),M){case 1:$s(l,5);break;case 4:$s(l,10);break;case 3:$s(l,6);break;default:$s(l,2)}}}function ey(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function $s(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),w=l.Xa;const M=!w;w=new ht(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ee(w,"https"),Vi(w),M?BN(w.toString(),p):zN(w.toString(),p)}else at(2);l.G=0,l.l&&l.l.sa(h),ty(l),Gg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function ty(l){if(l.G=0,l.ka=[],l.l){const h=$(l.h);(h.length!=0||l.i.length!=0)&&(S(l.ka,h),S(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function ny(l,h,p){var w=p instanceof ht?oe(p):new ht(p);if(w.g!="")h&&(w.g=h+"."+w.g),Ve(w,w.s);else{var M=c.location;w=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var V=new ht(null);w&&Ee(V,w),h&&(V.g=h),M&&Ve(V,M),p&&(V.l=p),w=V}return p=l.D,h=l.ya,p&&h&&Ne(w,p,h),Ne(w,"VER",l.la),va(l,w),w}function ry(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new We(new _c({eb:p})):new We(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sy(){}t=sy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ic(){}Ic.prototype.g=function(l,h){return new sn(l,h)};function sn(l,h){Ze.call(this),this.g=new Kg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!v(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Bi(this)}R(sn,Ze),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){ah(this.g)},sn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=ji(l),l=p);h.i.push(new sh(h.Ya++,l)),h.G==3&&Ec(h)},sn.prototype.N=function(){this.g.l=null,delete this.j,ah(this.g),delete this.g,sn.aa.N.call(this)};function iy(l){Br.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}R(iy,Br);function oy(){Ci.call(this),this.status=1}R(oy,Ci);function Bi(l){this.g=l}R(Bi,sy),Bi.prototype.ua=function(){dt(this.g,"a")},Bi.prototype.ta=function(l){dt(this.g,new iy(l))},Bi.prototype.sa=function(l){dt(this.g,new oy)},Bi.prototype.ra=function(){dt(this.g,"b")},Ic.prototype.createWebChannel=Ic.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,V1=function(){return new Ic},M1=function(){return Sn()},L1=Hn,um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,gu=qr,oa.COMPLETE="complete",O1=oa,qn.EventType=$r,$r.OPEN="a",$r.CLOSE="b",$r.ERROR="c",$r.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,Ma=qn,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,D1=We}).apply(typeof Wc<"u"?Wc:typeof self<"u"?self:typeof window<"u"?window:{});const nx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let At=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Rp("@firebase/firestore");function ja(){return li.logLevel}function X(t,...e){if(li.logLevel<=ue.DEBUG){const n=e.map(zp);li.debug(`Firestore (${$o}): ${t}`,...n)}}function Pr(t,...e){if(li.logLevel<=ue.ERROR){const n=e.map(zp);li.error(`Firestore (${$o}): ${t}`,...n)}}function ci(t,...e){if(li.logLevel<=ue.WARN){const n=e.map(zp);li.warn(`Firestore (${$o}): ${t}`,...n)}}function zp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: `+t;throw Pr(e),new Error(e)}function we(t,e){t||re()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class MC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VC{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Nr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new U1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new At(e)}}class UC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new UC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $C{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new $C(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=zC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function ko(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new ot(0,0))}static max(){return new se(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return kl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends kl{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const qC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends kl{construct(e,n,r){return new pt(e,n,r)}static isValidIdentifier(e){return qC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(n)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ae.fromString(e))}static fromName(e){return new J(Ae.fromString(e).popFirst(5))}static empty(){return new J(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ae(e.slice()))}}function HC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new ot(n+1,0):new ot(n,r));return new bs(s,J.empty(),e)}function WC(t){return new bs(t.readTime,t.key,-1)}class bs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new bs(se.min(),J.empty(),-1)}static max(){return new bs(se.max(),J.empty(),-1)}}function KC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==GC)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++c,c===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function XC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hp.oe=-1;function Dd(t){return t==null}function Ju(t){return t===0&&1/t==-1/0}function YC(t){return typeof t=="number"&&Number.isInteger(t)&&!Ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kc(this.root,e,this.comparator,!0)}}class Kc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??wt.RED,this.left=s??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,s,i){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sx(this.data.getIterator())}getIteratorFrom(e){return new sx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class sx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new cn([])}unionWith(e){let n=new Et(pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new B1("Invalid base64 string: "+i):i}}(e);return new yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const JC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(t){if(we(!!t),typeof t=="string"){let e=0;const n=JC.exec(t);if(we(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ui(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Kp(t){const e=t.mapValue.fields.__previous_value__;return Wp(e)?Kp(e):e}function jl(t){const e=Ns(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,r,s,i,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class jo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new jo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof jo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc={mapValue:{}};function di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wp(t)?4:tR(t)?9007199254740991:eR(t)?10:11:re()}function rr(t,e){if(t===e)return!0;const n=di(t);if(n!==di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jl(t).isEqual(jl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ns(s.timestampValue),c=Ns(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ui(s.bytesValue).isEqual(ui(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Xe(s.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(s.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Xe(s.integerValue)===Xe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Xe(s.doubleValue),c=Xe(i.doubleValue);return a===c?Ju(a)===Ju(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return ko(t.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(rx(a)!==rx(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!rr(a[u],c[u])))return!1;return!0}(t,e);default:return re()}}function Sl(t,e){return(t.values||[]).find(n=>rr(n,e))!==void 0}function So(t,e){if(t===e)return 0;const n=di(t),r=di(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Xe(i.integerValue||i.doubleValue),u=Xe(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return ix(t.timestampValue,e.timestampValue);case 4:return ix(jl(t),jl(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(i,a){const c=ui(i),u=ui(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ge(c[d],u[d]);if(f!==0)return f}return ge(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=ge(Xe(i.latitude),Xe(a.latitude));return c!==0?c:ge(Xe(i.longitude),Xe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ox(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,u,d,f;const m=i.fields||{},g=a.fields||{},_=(c=m.value)===null||c===void 0?void 0:c.arrayValue,R=(u=g.value)===null||u===void 0?void 0:u.arrayValue,k=ge(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((f=R==null?void 0:R.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:ox(_,R)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Gc.mapValue&&a===Gc.mapValue)return 0;if(i===Gc.mapValue)return 1;if(a===Gc.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=ge(u[m],f[m]);if(g!==0)return g;const _=So(c[u[m]],d[f[m]]);if(_!==0)return _}return ge(u.length,f.length)}(t.mapValue,e.mapValue);default:throw re()}}function ix(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Ns(t),r=Ns(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function ox(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=So(n[s],r[s]);if(i)return i}return ge(n.length,r.length)}function Co(t){return dm(t)}function dm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=dm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${dm(n.fields[a])}`;return s+"}"}(t.mapValue):re()}function ax(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hm(t){return!!t&&"integerValue"in t}function Gp(t){return!!t&&"arrayValue"in t}function lx(t){return!!t&&"nullValue"in t}function cx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yu(t){return!!t&&"mapValue"in t}function eR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ja(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ja(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ja(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ja(n)}setAll(e){let n=pt.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Ja(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());yu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];yu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Gt(Ja(this.value))}}function z1(t){const e=[];return vi(t.fields,(n,r)=>{const s=new pt([n]);if(yu(r)){const i=z1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Dt(e,0,se.min(),se.min(),se.min(),Gt.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,se.min(),se.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,se.min(),se.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){this.position=e,this.inclusive=n}}function ux(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(a.referenceValue),n.key):r=So(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function dx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n="asc"){this.field=e,this.dir=n}}function nR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{}class it extends q1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sR(e,n,r):n==="array-contains"?new aR(e,r):n==="in"?new lR(e,r):n==="not-in"?new cR(e,r):n==="array-contains-any"?new uR(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new iR(e,r):new oR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(So(n,this.value)):n!==null&&di(this.value)===di(n)&&this.matchesComparison(So(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends q1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Bn(e,n)}matches(e){return H1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function H1(t){return t.op==="and"}function W1(t){return rR(t)&&H1(t)}function rR(t){for(const e of t.filters)if(e instanceof Bn)return!1;return!0}function fm(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Co(t.value);if(W1(t))return t.filters.map(e=>fm(e)).join(",");{const e=t.filters.map(n=>fm(n)).join(",");return`${t.op}(${e})`}}function K1(t,e){return t instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&rr(r.value,s.value)}(t,e):t instanceof Bn?function(r,s){return s instanceof Bn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&K1(a,s.filters[c]),!0):!1}(t,e):void re()}function G1(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${Co(n.value)}`}(t):t instanceof Bn?function(n){return n.op.toString()+" {"+n.getFilters().map(G1).join(" ,")+"}"}(t):"Filter"}class sR extends it{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class iR extends it{constructor(e,n){super(e,"in",n),this.keys=Q1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oR extends it{constructor(e,n){super(e,"not-in",n),this.keys=Q1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Q1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class aR extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gp(n)&&Sl(n.arrayValue,this.value)}}class lR extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sl(this.value.arrayValue,n)}}class cR extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Sl(this.value.arrayValue,n)}}class uR extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.ue=null}}function hx(t,e=null,n=[],r=[],s=null,i=null,a=null){return new dR(t,e,n,r,s,i,a)}function Qp(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Co(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Co(r)).join(",")),e.ue=n}return e.ue}function Xp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!K1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dx(t.startAt,e.startAt)&&dx(t.endAt,e.endAt)}function mm(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hR(t,e,n,r,s,i,a,c){return new Bo(t,e,n,r,s,i,a,c)}function Od(t){return new Bo(t)}function fx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function X1(t){return t.collectionGroup!==null}function Za(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Et(pt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Cl(i,r))}),n.has(pt.keyField().canonicalString())||e.ce.push(new Cl(pt.keyField(),r))}return e.ce}function tr(t){const e=ie(t);return e.le||(e.le=fR(e,Za(t))),e.le}function fR(t,e){if(t.limitType==="F")return hx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Cl(s.field,i)});const n=t.endAt?new Zu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zu(t.startAt.position,t.startAt.inclusive):null;return hx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pm(t,e){const n=t.filters.concat([e]);return new Bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ed(t,e,n){return new Bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ld(t,e){return Xp(tr(t),tr(e))&&t.limitType===e.limitType}function Y1(t){return`${Qp(tr(t))}|lt:${t.limitType}`}function Wi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>G1(s)).join(", ")}]`),Dd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Co(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Co(s)).join(",")),`Target(${r})`}(tr(t))}; limitType=${t.limitType})`}function Md(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Za(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=ux(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Za(r),s)||r.endAt&&!function(a,c,u){const d=ux(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Za(r),s))}(t,e)}function mR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function J1(t){return(e,n)=>{let r=!1;for(const s of Za(t)){const i=pR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function pR(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?So(u,d):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new ze(J.comparator);function Dr(){return gR}const Z1=new ze(J.comparator);function Va(...t){let e=Z1;for(const n of t)e=e.insert(n.key,n);return e}function eb(t){let e=Z1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qs(){return el()}function tb(){return el()}function el(){return new zo(t=>t.toString(),(t,e)=>t.isEqual(e))}const yR=new ze(J.comparator),xR=new Et(J.comparator);function ce(...t){let e=xR;for(const n of t)e=e.add(n);return e}const vR=new Et(ge);function _R(){return vR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function nb(t){return{integerValue:""+t}}function rb(t,e){return YC(e)?nb(e):Yp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(){this._=void 0}}function wR(t,e,n){return t instanceof Rl?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Wp(i)&&(i=Kp(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Al?ib(t,e):t instanceof Pl?ob(t,e):function(s,i){const a=sb(s,i),c=mx(a)+mx(s.Pe);return hm(a)&&hm(s.Pe)?nb(c):Yp(s.serializer,c)}(t,e)}function bR(t,e,n){return t instanceof Al?ib(t,e):t instanceof Pl?ob(t,e):n}function sb(t,e){return t instanceof Dl?function(r){return hm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Rl extends Vd{}class Al extends Vd{constructor(e){super(),this.elements=e}}function ib(t,e){const n=ab(e);for(const r of t.elements)n.some(s=>rr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Pl extends Vd{constructor(e){super(),this.elements=e}}function ob(t,e){let n=ab(e);for(const r of t.elements)n=n.filter(s=>!rr(s,r));return{arrayValue:{values:n}}}class Dl extends Vd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function mx(t){return Xe(t.integerValue||t.doubleValue)}function ab(t){return Gp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.field=e,this.transform=n}}function NR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Al&&s instanceof Al||r instanceof Pl&&s instanceof Pl?ko(r.elements,s.elements,rr):r instanceof Dl&&s instanceof Dl?rr(r.Pe,s.Pe):r instanceof Rl&&s instanceof Rl}(t.transform,e.transform)}class ER{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ud{}function cb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jp(t.key,En.none()):new Jl(t.key,t.data,En.none());{const n=t.data,r=Gt.empty();let s=new Et(pt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Ps(t.key,r,new cn(s.toArray()),En.none())}}function TR(t,e,n){t instanceof Jl?function(s,i,a){const c=s.value.clone(),u=gx(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ps?function(s,i,a){if(!xu(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=gx(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(ub(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function tl(t,e,n,r){return t instanceof Jl?function(i,a,c,u){if(!xu(i.precondition,a))return c;const d=i.value.clone(),f=yx(i.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ps?function(i,a,c,u){if(!xu(i.precondition,a))return c;const d=yx(i.fieldTransforms,u,a),f=a.data;return f.setAll(ub(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,c){return xu(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function IR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=sb(r.transform,s||null);i!=null&&(n===null&&(n=Gt.empty()),n.set(r.field,i))}return n||null}function px(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ko(r,s,(i,a)=>NR(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jl extends Ud{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ps extends Ud{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ub(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gx(t,e,n){const r=new Map;we(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,bR(a,c,n[s]))}return r}function yx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,wR(i,a,e))}return r}class Jp extends Ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kR extends Ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&TR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=tl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=tl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tb();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=cb(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(n,r)=>px(n,r))&&ko(this.baseMutations,e.baseMutations,(n,r)=>px(n,r))}}class Zp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length);let s=function(){return yR}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Zp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,de;function RR(t){switch(t){default:return re();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function db(t){if(t===void 0)return Pr("GRPC error has no .code"),U.UNKNOWN;switch(t){case nt.OK:return U.OK;case nt.CANCELLED:return U.CANCELLED;case nt.UNKNOWN:return U.UNKNOWN;case nt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case nt.INTERNAL:return U.INTERNAL;case nt.UNAVAILABLE:return U.UNAVAILABLE;case nt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case nt.NOT_FOUND:return U.NOT_FOUND;case nt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case nt.ABORTED:return U.ABORTED;case nt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case nt.DATA_LOSS:return U.DATA_LOSS;default:return re()}}(de=nt||(nt={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Js([4294967295,4294967295],0);function xx(t){const e=AR().encode(t),n=new P1;return n.update(e),new Uint8Array(n.digest())}function vx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Js([n,r],0),new Js([s,i],0)]}class eg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ua(`Invalid padding: ${n}`);if(r<0)throw new Ua(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ua(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ua(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Js.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Js.fromNumber(r)));return s.compare(PR)===1&&(s=new Js([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=xx(e),[r,s]=vx(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new eg(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=xx(e),[r,s]=vx(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Zl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fd(se.min(),s,new ze(ge),Dr(),ce())}}class Zl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zl(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class hb{constructor(e,n){this.targetId=e,this.me=n}}class fb{constructor(e,n,r=yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class _x{constructor(){this.fe=0,this.ge=bx(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re()}}),new Zl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=bx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Dr(),this.qe=wx(),this.Qe=new ze(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(mm(i))if(r===0){const a=new J(i.path);this.Ue(n,a,Dt.newNoDocument(a,se.min()))}else we(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=ui(r).toUint8Array()}catch(u){if(u instanceof B1)return ci("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new eg(a,s,i)}catch(u){return ci(u instanceof Ua?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const c=this.Je(a);if(c){if(i.current&&mm(c.target)){const u=new J(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Dt.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ce();this.qe.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Fd(e,n,this.Qe,this.ke,r);return this.ke=Dr(),this.qe=wx(),this.Qe=new ze(ge),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new _x,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _x),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function wx(){return new ze(J.comparator)}function bx(){return new ze(J.comparator)}const OR={asc:"ASCENDING",desc:"DESCENDING"},LR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MR={and:"AND",or:"OR"};class VR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gm(t,e){return t.useProto3Json||Dd(e)?e:{value:e}}function td(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UR(t,e){return td(t,e.toTimestamp())}function nr(t){return we(!!t),se.fromTimestamp(function(n){const r=Ns(n);return new ot(r.seconds,r.nanos)}(t))}function tg(t,e){return ym(t,e).canonicalString()}function ym(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pb(t){const e=Ae.fromString(t);return we(_b(e)),e}function xm(t,e){return tg(t.databaseId,e.path)}function Wh(t,e){const n=pb(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(yb(n))}function gb(t,e){return tg(t.databaseId,e)}function FR(t){const e=pb(t);return e.length===4?Ae.emptyPath():yb(e)}function vm(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yb(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Nx(t,e,n){return{name:xm(t,e),fields:n.value.mapValue.fields}}function $R(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(we(f===void 0||typeof f=="string"),yt.fromBase64String(f||"")):(we(f===void 0||f instanceof Buffer||f instanceof Uint8Array),yt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const f=d.code===void 0?U.UNKNOWN:db(d.code);return new K(f,d.message||"")}(a);n=new fb(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Wh(t,r.document.name),i=nr(r.document.updateTime),a=r.document.createTime?nr(r.document.createTime):se.min(),c=new Gt({mapValue:{fields:r.document.fields}}),u=Dt.newFoundDocument(s,i,a,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new vu(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Wh(t,r.document),i=r.readTime?nr(r.readTime):se.min(),a=Dt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new vu([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Wh(t,r.document),i=r.removedTargetIds||[];n=new vu([],i,s,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new CR(s,i),c=r.targetId;n=new hb(c,a)}}return n}function BR(t,e){let n;if(e instanceof Jl)n={update:Nx(t,e.key,e.value)};else if(e instanceof Jp)n={delete:xm(t,e.key)};else if(e instanceof Ps)n={update:Nx(t,e.key,e.data),updateMask:YR(e.fieldMask)};else{if(!(e instanceof kR))return re();n={verify:xm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Rl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Al)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Dl)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:UR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re()}(t,e.precondition)),n}function zR(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?nr(s.updateTime):nr(i);return a.isEqual(se.min())&&(a=nr(i)),new ER(a,s.transformResults||[])}(n,e))):[]}function qR(t,e){return{documents:[gb(t,e.path)]}}function HR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gb(t,s);const i=function(d){if(d.length!==0)return vb(Bn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Ki(g.field),direction:GR(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=gm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function WR(t){let e=FR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=xb(m);return g instanceof Bn&&W1(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(R){return new Cl(Gi(R.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Dd(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,_=m.values||[];return new Zu(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,_=m.values||[];return new Zu(_,g)}(n.endAt)),hR(e,s,a,i,c,"F",u,d)}function KR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gi(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Gi(n.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Gi(n.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Gi(n.unaryFilter.field);return it.create(a,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return it.create(Gi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bn.create(n.compositeFilter.filters.map(r=>xb(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function GR(t){return OR[t]}function QR(t){return LR[t]}function XR(t){return MR[t]}function Ki(t){return{fieldPath:t.canonicalString()}}function Gi(t){return pt.fromServerFormat(t.fieldPath)}function vb(t){return t instanceof it?function(n){if(n.op==="=="){if(cx(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NAN"}};if(lx(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cx(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NOT_NAN"}};if(lx(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ki(n.field),op:QR(n.op),value:n.value}}}(t):t instanceof Bn?function(n){const r=n.getFilters().map(s=>vb(s));return r.length===1?r[0]:{compositeFilter:{op:XR(n.op),filters:r}}}(t):re()}function YR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _b(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r,s,i=se.min(),a=se.min(),c=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.ct=e}}function ZR(t){const e=WR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ed(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.un=new tA}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(bs.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class tA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Et(Ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ro(0)}static kn(){return new Ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.changes=new zo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&tl(r.mutation,s,cn.empty(),ot.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Qs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Va();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Qs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Dr();const a=el(),c=function(){return el()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Ps)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),tl(f.mutation,d,f.mutation.getFieldMask(),ot.now())):a.set(d.key,cn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var m;return c.set(d,new rA(f,(m=a.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=el();let s=new ze((a,c)=>a-c),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||cn.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||ce()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=tb();f.forEach(g=>{if(!i.has(g)){const _=cb(n.get(g),r.get(g));_!==null&&m.set(g,_),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return J.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Qs());let c=-1,u=i;return a.next(d=>F.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ce())).next(f=>({batchId:c,changes:eb(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Va();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Va();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const d=function(m,g){return new Bo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,Dt.newInvalidDocument(f)))});let c=Va();return a.forEach((u,d)=>{const f=i.get(u);f!==void 0&&tl(f.mutation,d,cn.empty(),ot.now()),Md(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nr(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:ZR(s.bundledQuery),readTime:nr(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.overlays=new ze(J.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qs();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Qs(),i=n.length+1,a=new J(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Qs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Qs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return F.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new SR(n,r));let i=this.Ir.get(n);i===void 0&&(i=ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.Tr=new Et(ft.Er),this.dr=new Et(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new Ae([])),r=new ft(n,e),s=new ft(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new Ae([])),r=new ft(n,e),s=new ft(n,e+1);let i=ce();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(ft.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jR(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new ft(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(ge);return n.forEach(s=>{const i=new ft(s,0),a=new ft(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],c=>{r=r.add(c.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const a=new ft(new J(i),0);let c=new Et(ge);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},a),F.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ft(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.Mr=e,this.docs=function(){return new ze(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Dr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Dr();const a=n.path,c=new J(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||KC(WC(f),r)<=0||(s.has(f.key)||Md(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uA(this)}getSize(e){return F.resolve(this.size)}}class uA extends nA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.persistence=e,this.Nr=new zo(n=>Qp(n),Xp),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ng,this.targetCount=0,this.kr=Ro.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Hp(0),this.Kr=!1,this.Kr=!0,this.$r=new aA,this.referenceDelegate=e(this),this.Ur=new dA(this),this.indexManager=new eA,this.remoteDocumentCache=function(s){return new cA(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new JR(n),this.Gr=new iA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new lA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new fA(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class fA extends QC{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Jr=new ng,this.Yr=null}static Zr(e){return new rg(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=J.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new sg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return BI()?8:XC(Lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new mA;return this.Xi(e,n,a).next(c=>{if(i.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ja()<=ue.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Wi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(ja()<=ue.DEBUG&&X("QueryEngine","Query:",Wi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ja()<=ue.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Wi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(n))):F.resolve())}Yi(e,n){if(fx(n))return F.resolve(null);let r=tr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ed(n,null,"F"),r=tr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ce(...i);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,a,u.readTime)?this.Yi(e,ed(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return fx(n)||s.isEqual(se.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?F.resolve(null):(ja()<=ue.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Wi(n)),this.rs(e,a,n,HC(s,-1)).next(c=>c))})}ts(e,n){let r=new Et(J1(e));return n.forEach((s,i)=>{Md(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ja()<=ue.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Wi(n)),this.Ji.getDocumentsMatchingQuery(e,n,bs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ze(ge),this._s=new zo(i=>Qp(i),Xp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function yA(t,e,n,r){return new gA(t,e,n,r)}async function wb(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=ce();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function xA(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let _=F.resolve();return g.forEach(R=>{_=_.next(()=>f.getEntry(u,R)).next(k=>{const S=d.docVersions.get(R);we(S!==null),k.version.compareTo(S)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ce();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function bb(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function vA(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,m)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(yt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(m,_),function(k,S,b){return k.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,_,f)&&c.push(n.Ur.updateTargetData(i,_))});let u=Dr(),d=ce();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(_A(i,a,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(se.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return F.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function _A(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Dr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):X("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function wA(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bA(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new os(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function _m(t,e,n){const r=ie(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Yl(a))throw a;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Ex(t,e,n){const r=ie(t);let s=se.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const m=ie(u),g=m._s.get(f);return g!==void 0?F.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,a,tr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:se.min(),n?i:ce())).next(c=>(NA(r,mR(e),c),{documents:c,Ts:i})))}function NA(t,e,n){let r=t.us.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Tx{constructor(){this.activeTargetIds=_R()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EA{constructor(){this.so=new Tx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Tx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Kh(){return Qc===null?Qc=function(){return 268435456+Math.round(2147483648*Math.random())}():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class jA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const c=Kh(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(f=>(X("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw ci("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,c){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$o}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=IA[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Kh();return new Promise((a,c)=>{const u=new D1;u.setWithCredentials(!0),u.listenOnce(O1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case gu.NO_ERROR:const f=u.getResponseJson();X(Rt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case gu.TIMEOUT:X(Rt,`RPC '${e}' ${i} timed out`),c(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case gu.HTTP_ERROR:const m=u.getStatus();if(X(Rt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const R=function(S){const b=S.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(b)>=0?b:U.UNKNOWN}(_.status);c(new K(R,_.message))}else c(new K(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(U.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{X(Rt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);X(Rt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Kh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=V1(),c=M1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");X(Rt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);let g=!1,_=!1;const R=new kA({Io:S=>{_?X(Rt,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(g||(X(Rt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),X(Rt,`RPC '${e}' stream ${s} sending:`,S),m.send(S))},To:()=>m.close()}),k=(S,b,v)=>{S.listen(b,N=>{try{v(N)}catch(E){setTimeout(()=>{throw E},0)}})};return k(m,Ma.EventType.OPEN,()=>{_||(X(Rt,`RPC '${e}' stream ${s} transport opened.`),R.yo())}),k(m,Ma.EventType.CLOSE,()=>{_||(_=!0,X(Rt,`RPC '${e}' stream ${s} transport closed`),R.So())}),k(m,Ma.EventType.ERROR,S=>{_||(_=!0,ci(Rt,`RPC '${e}' stream ${s} transport errored:`,S),R.So(new K(U.UNAVAILABLE,"The operation could not be completed")))}),k(m,Ma.EventType.MESSAGE,S=>{var b;if(!_){const v=S.data[0];we(!!v);const N=v,E=N.error||((b=N[0])===null||b===void 0?void 0:b.error);if(E){X(Rt,`RPC '${e}' stream ${s} received error:`,E);const O=E.status;let L=function(I){const C=nt[I];if(C!==void 0)return db(C)}(O),x=E.message;L===void 0&&(L=U.INTERNAL,x="Unknown error status: "+O+" with message "+E.message),_=!0,R.So(new K(L,x)),m.close()}else X(Rt,`RPC '${e}' stream ${s} received:`,v),R.bo(v)}}),k(c,L1.STAT_EVENT,S=>{S.stat===um.PROXY?X(Rt,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===um.NOPROXY&&X(Rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){return new VR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,r,s,i,a,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Nb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Pr(n.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SA extends Eb{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=$R(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?se.min():a.readTime?nr(a.readTime):se.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=vm(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=mm(u)?{documents:qR(i,u)}:{query:HR(i,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=mb(i,a.resumeToken);const d=gm(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(se.min())>0){c.readTime=td(i,a.snapshotVersion.toTimestamp());const d=gm(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=KR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=vm(this.serializer),n.removeTarget=e,this.a_(n)}}class CA extends Eb{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=zR(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=vm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>BR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,ym(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,ym(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(U.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class AA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Pr(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{_i(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.L_.add(4),await ec(d),d.q_.set("Unknown"),d.L_.delete(4),await Bd(d)}(this))})}),this.q_=new AA(r,s)}}async function Bd(t){if(_i(t))for(const e of t.B_)await e(!0)}async function ec(t){for(const e of t.B_)await e(!1)}function Tb(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),lg(n)?ag(n):qo(n).r_()&&og(n,e))}function ig(t,e){const n=ie(t),r=qo(n);n.N_.delete(e),r.r_()&&Ib(n,e),n.N_.size===0&&(r.r_()?r.o_():_i(n)&&n.q_.set("Unknown"))}function og(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qo(t).A_(e)}function Ib(t,e){t.Q_.xe(e),qo(t).R_(e)}function ag(t){t.Q_=new DR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qo(t).start(),t.q_.v_()}function lg(t){return _i(t)&&!qo(t).n_()&&t.N_.size>0}function _i(t){return ie(t).L_.size===0}function kb(t){t.Q_=void 0}async function DA(t){t.q_.set("Online")}async function OA(t){t.N_.forEach((e,n)=>{og(t,e)})}async function LA(t,e){kb(t),lg(t)?(t.q_.M_(e),ag(t)):t.q_.set("Unknown")}async function MA(t,e,n){if(t.q_.set("Online"),e instanceof fb&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nd(t,r)}else if(e instanceof vu?t.Q_.Ke(e):e instanceof hb?t.Q_.He(e):t.Q_.We(e),!n.isEqual(se.min()))try{const r=await bb(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(yt.EMPTY_BYTE_STRING,f.snapshotVersion)),Ib(i,u);const m=new os(f.target,u,d,f.sequenceNumber);og(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await nd(t,r)}}async function nd(t,e,n){if(!Yl(e))throw e;t.L_.add(1),await ec(t),t.q_.set("Offline"),n||(n=()=>bb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Bd(t)})}function jb(t,e){return e().catch(n=>nd(t,n,e))}async function zd(t){const e=ie(t),n=Es(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;VA(e);)try{const s=await wA(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,UA(e,s)}catch(s){await nd(e,s)}Sb(e)&&Cb(e)}function VA(t){return _i(t)&&t.O_.length<10}function UA(t,e){t.O_.push(e);const n=Es(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Sb(t){return _i(t)&&!Es(t).n_()&&t.O_.length>0}function Cb(t){Es(t).start()}async function FA(t){Es(t).p_()}async function $A(t){const e=Es(t);for(const n of t.O_)e.m_(n.mutations)}async function BA(t,e,n){const r=t.O_.shift(),s=Zp.from(r,e,n);await jb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zd(t)}async function zA(t,e){e&&Es(t).V_&&await async function(r,s){if(function(a){return RR(a)&&a!==U.ABORTED}(s.code)){const i=r.O_.shift();Es(r).s_(),await jb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zd(r)}}(t,e),Sb(t)&&Cb(t)}async function kx(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=_i(n);n.L_.add(3),await ec(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bd(n)}async function qA(t,e){const n=ie(t);e?(n.L_.delete(2),await Bd(n)):e||(n.L_.add(2),await ec(n),n.q_.set("Unknown"))}function qo(t){return t.K_||(t.K_=function(n,r,s){const i=ie(n);return i.w_(),new SA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:DA.bind(null,t),Ro:OA.bind(null,t),mo:LA.bind(null,t),d_:MA.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),lg(t)?ag(t):t.q_.set("Unknown")):(await t.K_.stop(),kb(t))})),t.K_}function Es(t){return t.U_||(t.U_=function(n,r,s){const i=ie(n);return i.w_(),new CA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:FA.bind(null,t),mo:zA.bind(null,t),f_:$A.bind(null,t),g_:BA.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await zd(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new cg(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ug(t,e){if(Pr("AsyncQueue",`${e}: ${t}`),Yl(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Va(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new vo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.W_=new ze(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ao{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ao(e,n,vo.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class WA{constructor(){this.queries=Sx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=Sx(),i.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function Sx(){return new zo(t=>Y1(t),Ld)}async function dg(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new HA,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=ug(a,`Initialization of query '${Wi(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&fg(n)}async function hg(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KA(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&fg(n)}function GA(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function fg(t){t.Y_.forEach(e=>{e.next()})}var wm,Cx;(Cx=wm||(wm={})).ea="default",Cx.Cache="cache";class mg{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.key=e}}class Ab{constructor(e){this.key=e}}class QA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=J1(e),this.Ra=new vo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new jx,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),_=Md(this.query,m)?m:null,R=!!g&&this.mutatedKeys.has(g.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;g&&_?g.data.isEqual(_.data)?R!==k&&(r.track({type:3,doc:_}),S=!0):this.ga(g,_)||(r.track({type:2,doc:_}),S=!0,(u&&this.Aa(_,u)>0||d&&this.Aa(_,d)<0)&&(c=!0)):!g&&_?(r.track({type:0,doc:_}),S=!0):g&&!_&&(r.track({type:1,doc:g}),S=!0,(u||d)&&(c=!0)),S&&(_?(a=a.add(_),i=k?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,m)=>function(_,R){const k=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return k(_)-k(R)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new Ao(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ab(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Rb(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class XA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YA{constructor(e){this.key=e,this.va=!1}}class JA{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new zo(c=>Y1(c),Ld),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(J.comparator),this.Na=new Map,this.La=new ng,this.Ba={},this.ka=new Map,this.qa=Ro.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ZA(t,e,n=!0){const r=Vb(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Pb(r,e,n,!0),s}async function eP(t,e){const n=Vb(t);await Pb(n,e,!0,!1)}async function Pb(t,e,n,r){const s=await bA(t.localStore,tr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await tP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Tb(t.remoteStore,s),c}async function tP(t,e,n,r,s){t.Ka=(m,g,_)=>async function(k,S,b,v){let N=S.view.ma(b);N.ns&&(N=await Ex(k.localStore,S.query,!1).then(({documents:x})=>S.view.ma(x,N)));const E=v&&v.targetChanges.get(S.targetId),O=v&&v.targetMismatches.get(S.targetId)!=null,L=S.view.applyChanges(N,k.isPrimaryClient,E,O);return Ax(k,S.targetId,L.wa),L.snapshot}(t,m,g,_);const i=await Ex(t.localStore,e,!0),a=new QA(e,i.Ts),c=a.ma(i.documents),u=Zl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);Ax(t,n,d.wa);const f=new XA(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function nP(t,e,n){const r=ie(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Ld(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await _m(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ig(r.remoteStore,s.targetId),bm(r,s.targetId)}).catch(Xl)):(bm(r,s.targetId),await _m(r.localStore,s.targetId,!0))}async function rP(t,e){const n=ie(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ig(n.remoteStore,r.targetId))}async function sP(t,e,n){const r=dP(t);try{const s=await function(a,c){const u=ie(a),d=ot.now(),f=c.reduce((_,R)=>_.add(R.key),ce());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let R=Dr(),k=ce();return u.cs.getEntries(_,f).next(S=>{R=S,R.forEach((b,v)=>{v.isValidDocument()||(k=k.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,R)).next(S=>{m=S;const b=[];for(const v of c){const N=IR(v,m.get(v.key).overlayedDocument);N!=null&&b.push(new Ps(v.key,N,z1(N.value.mapValue),En.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,b,c)}).next(S=>{g=S;const b=S.applyToLocalDocumentSet(m,k);return u.documentOverlayCache.saveOverlays(_,S.batchId,b)})}).then(()=>({batchId:g.batchId,changes:eb(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new ze(ge)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await tc(r,s.changes),await zd(r.remoteStore)}catch(s){const i=ug(s,"Failed to persist write");n.reject(i)}}async function Db(t,e){const n=ie(t);try{const r=await vA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?we(a.va):s.removedDocuments.size>0&&(we(a.va),a.va=!1))}),await tc(n,r,e)}catch(r){await Xl(r)}}function Rx(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const c=a.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ie(a);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(c)&&(d=!0)}),d&&fg(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iP(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new ze(J.comparator);a=a.insert(i,Dt.newNoDocument(i,se.min()));const c=ce().add(i),u=new Fd(se.min(),new Map,new ze(ge),a,c);await Db(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),pg(r)}else await _m(r.localStore,e,!1).then(()=>bm(r,e,n)).catch(Xl)}async function oP(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await xA(n.localStore,e);Lb(n,r,null),Ob(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await tc(n,s)}catch(s){await Xl(s)}}async function aP(t,e,n){const r=ie(t);try{const s=await function(a,c){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(we(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);Lb(r,e,n),Ob(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await tc(r,s)}catch(s){await Xl(s)}}function Ob(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Lb(t,e,n){const r=ie(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function bm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Mb(t,r)})}function Mb(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ig(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),pg(t))}function Ax(t,e,n){for(const r of n)r instanceof Rb?(t.La.addReference(r.key,e),lP(t,r)):r instanceof Ab?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Mb(t,r.key)):re()}function lP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),pg(t))}function pg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(Ae.fromString(e)),r=t.qa.next();t.Na.set(r,new YA(n)),t.Oa=t.Oa.insert(n,r),Tb(t.remoteStore,new os(tr(Od(n.path)),r,"TargetPurposeLimboResolution",Hp.oe))}}async function tc(t,e,n){const r=ie(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=sg.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const f=ie(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,g=>F.forEach(g.$i,_=>f.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>F.forEach(g.Ui,_=>f.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!Yl(m))throw m;X("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const _=f.os.get(g),R=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(R);f.os=f.os.insert(g,k)}}}(r.localStore,i))}async function cP(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await wb(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new K(U.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tc(n,r.hs)}}function uP(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let s=ce();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const c=n.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function Vb(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Db.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iP.bind(null,e),e.Ca.d_=KA.bind(null,e.eventManager),e.Ca.$a=GA.bind(null,e.eventManager),e}function dP(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aP.bind(null,e),e}class rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$d(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return yA(this.persistence,new pA,e.initialUser,this.serializer)}Ga(e){return new hA(rg.Zr,this.serializer)}Wa(e){return new EA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rd.provider={build:()=>new rd};class Nm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cP.bind(null,this.syncEngine),await qA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WA}()}createDatastore(e){const n=$d(e.databaseInfo.databaseId),r=function(i){return new jA(i)}(e.databaseInfo);return function(i,a,c,u){return new RA(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new PA(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Rx(this.syncEngine,n,0),function(){return Ix.D()?new Ix:new TA}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,f){const m=new JA(s,i,a,c,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ec(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Nm.provider={build:()=>new Nm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=At.UNAUTHENTICATED,this.clientId=qp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ug(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qh(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await wb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Px(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fP(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>kx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>kx(e.remoteStore,s)),t._onlineComponents=e}async function fP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ci("Error using user provided cache. Falling back to memory cache: "+n),await Qh(t,new rd)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Qh(t,new rd);return t._offlineComponents}async function Ub(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Px(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Px(t,new Nm))),t._onlineComponents}function mP(t){return Ub(t).then(e=>e.syncEngine)}async function sd(t){const e=await Ub(t),n=e.eventManager;return n.onListen=ZA.bind(null,e.syncEngine),n.onUnlisten=nP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rP.bind(null,e.syncEngine),n}function pP(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new gg({next:g=>{f.Za(),a.enqueueAndForget(()=>hg(i,m));const _=g.docs.has(c);!_&&g.fromCache?d.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new mg(Od(c.path),f,{includeMetadataChanges:!0,_a:!0});return dg(i,m)}(await sd(t),t.asyncQueue,e,n,r)),r.promise}function gP(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new gg({next:g=>{f.Za(),a.enqueueAndForget(()=>hg(i,m)),g.fromCache&&u.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new mg(c,f,{includeMetadataChanges:!0,_a:!0});return dg(i,m)}(await sd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Bb(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ox(t){if(!J.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Lx(t){if(J.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Ft(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qd(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function yP(t,e){if(e<=0)throw new K(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new F1;switch(r.type){case"firstParty":return new FC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Dx.get(n);r&&(X("ComponentProvider","Removing Datastore"),Dx.delete(n),r.terminate())}(this),Promise.resolve()}}function zb(t,e,n,r={}){var s;const i=(t=Ft(t,Hd))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=At.MOCK_USER;else{c=$w(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new At(d)}t._authCredentials=new MC(new U1(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new or(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class Er extends or{constructor(e,n,r){super(e,n,Od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new J(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function he(t,e,...n){if(t=Se(t),$b("collection","path",e),t instanceof Hd){const r=Ae.fromString(e,...n);return Lx(r),new Er(t,null,r)}{if(!(t instanceof Tt||t instanceof Er))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return Lx(r),new Er(t.firestore,null,r)}}function Z(t,e,...n){if(t=Se(t),arguments.length===1&&(e=qp.newId()),$b("doc","path",e),t instanceof Hd){const r=Ae.fromString(e,...n);return Ox(r),new Tt(t,null,new J(r))}{if(!(t instanceof Tt||t instanceof Er))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return Ox(r),new Tt(t.firestore,t instanceof Er?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Nb(this,"async_queue_retry"),this.Vu=()=>{const r=Gh();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yl(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Pr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=cg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Ux(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class sr extends Hd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Vx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vx(e),this._firestoreClient=void 0,await e}}}function qb(t,e){const n=typeof t=="object"?t:Cd(),r=typeof t=="string"?t:"(default)",s=Sd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Vw("firestore");i&&zb(s,...i)}return s}function nc(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xP(t),t._firestoreClient}function xP(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new ZC(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Fb(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new hP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hi(yt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hi(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=/^__.*__$/;class _P{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jl(e,this.data,n,this.fieldTransforms)}}class Hb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Wb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class yg{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new yg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return id(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Wb(this.Cu)&&vP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$d(e)}Qu(e,n,r,s=!1){return new yg({Cu:e,methodName:n,qu:r,path:pt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gd(t){const e=t._freezeSettings(),n=$d(t._databaseId);return new wP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Kb(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);_g("Data must be an object, but it was:",a,r);const c=Gb(r,a);let u,d;if(i.merge)u=new cn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Em(e,m,n);if(!a.contains(g))throw new K(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Xb(f,g)||f.push(g)}u=new cn(f),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new _P(new Gt(c),u,d)}class Qd extends Ho{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qd}}class xg extends Ho{_toFieldTransform(e){return new lb(e.path,new Rl)}isEqual(e){return e instanceof xg}}class vg extends Ho{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Dl(e.serializer,rb(e.serializer,this.$u));return new lb(e.path,n)}isEqual(e){return e instanceof vg&&this.$u===e.$u}}function bP(t,e,n,r){const s=t.Qu(1,e,n);_g("Data must be an object, but it was:",s,r);const i=[],a=Gt.empty();vi(r,(u,d)=>{const f=wg(e,u,n);d=Se(d);const m=s.Nu(f);if(d instanceof Qd)i.push(f);else{const g=sc(d,m);g!=null&&(i.push(f),a.set(f,g))}});const c=new cn(i);return new Hb(a,c,s.fieldTransforms)}function NP(t,e,n,r,s,i){const a=t.Qu(1,e,n),c=[Em(e,r,n)],u=[s];if(i.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(Em(e,i[g])),u.push(i[g+1]);const d=[],f=Gt.empty();for(let g=c.length-1;g>=0;--g)if(!Xb(d,c[g])){const _=c[g];let R=u[g];R=Se(R);const k=a.Nu(_);if(R instanceof Qd)d.push(_);else{const S=sc(R,k);S!=null&&(d.push(_),f.set(_,S))}}const m=new cn(d);return new Hb(f,m,a.fieldTransforms)}function EP(t,e,n,r=!1){return sc(n,t.Qu(r?4:3,e))}function sc(t,e){if(Qb(t=Se(t)))return _g("Unsupported field value:",e,t),Gb(t,e);if(t instanceof Ho)return function(r,s){if(!Wb(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=sc(c,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ot.fromDate(r);return{timestampValue:td(s.serializer,i)}}if(r instanceof ot){const i=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:td(s.serializer,i)}}if(r instanceof Wd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hi)return{bytesValue:mb(s.serializer,r._byteString)};if(r instanceof Tt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Kd)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Yp(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${qd(r)}`)}(t,e)}function Gb(t,e){const n={};return $1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vi(t,(r,s)=>{const i=sc(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Qb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof Wd||t instanceof hi||t instanceof Tt||t instanceof Ho||t instanceof Kd)}function _g(t,e,n){if(!Qb(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=qd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Em(t,e,n){if((e=Se(e))instanceof rc)return e._internalPath;if(typeof e=="string")return wg(t,e);throw id("Field path arguments must be of type string or ",t,!1,void 0,n)}const TP=new RegExp("[~\\*/\\[\\]]");function wg(t,e,n){if(e.search(TP)>=0)throw id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rc(...e.split("."))._internalPath}catch{throw id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function id(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new K(U.INVALID_ARGUMENT,c+t+u)}function Xb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IP extends Yb{data(){return super.data()}}function Xd(t,e){return typeof e=="string"?wg(t,e):e instanceof rc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bg{}class Yd extends bg{}function $t(t,e,...n){let r=[];e instanceof bg&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Jd).length,c=i.filter(u=>u instanceof ic).length;if(a>1||a>0&&c>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ic extends Yd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ic(e,n,r)}_apply(e){const n=this._parse(e);return Zb(e._query,n),new or(e.firestore,e.converter,pm(e._query,n))}_parse(e){const n=Gd(e.firestore);return function(i,a,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){$x(m,f);const _=[];for(const R of m)_.push(Fx(u,i,R));g={arrayValue:{values:_}}}else g=Fx(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||$x(m,f),g=EP(c,a,m,f==="in"||f==="not-in");return it.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fn(t,e,n){const r=e,s=Xd("where",t);return ic._create(s,r,n)}class Jd extends bg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)Zb(a,u),a=pm(a,u)}(e._query,n),new or(e.firestore,e.converter,pm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zd extends Yd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Zd(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cl(i,a)}(e._query,this._field,this._direction);return new or(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Bo(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ts(t,e="asc"){const n=e,r=Xd("orderBy",t);return Zd._create(r,n)}class eh extends Yd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new eh(e,n,r)}_apply(e){return new or(e.firestore,e.converter,ed(e._query,this._limit,this._limitType))}}function Ng(t){return yP("limit",t),eh._create("limit",t,"F")}function Fx(t,e,n){if(typeof(n=Se(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X1(e)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ae.fromString(n));if(!J.isDocumentKey(r))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ax(t,new J(r))}if(n instanceof Tt)return ax(t,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qd(n)}.`)}function $x(t,e){if(!Array.isArray(t)||t.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zb(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class eN{convertValue(e,n="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Xe(a.doubleValue));return new Kd(i)}convertGeoPoint(e){return new Wd(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Kp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const n=Ns(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);we(_b(r));const s=new jo(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||Pr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eg extends Yb{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Xd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nl extends Eg{data(e={}){return super.data(e)}}class Tg{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new lo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nl(this._firestore,this._userDataWriter,r.key,r,new lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new nl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new lo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new nl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new lo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:kP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){t=Ft(t,Tt);const e=Ft(t.firestore,sr);return pP(nc(e),t._key).then(n=>nN(e,t,n))}class Ig extends eN{constructor(e){super(),this.firestore=e}convertBytes(e){return new hi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function Ge(t){t=Ft(t,or);const e=Ft(t.firestore,sr),n=nc(e),r=new Ig(e);return Jb(t._query),gP(n,t._query).then(s=>new Tg(e,r,t,s))}function wn(t,e,n){t=Ft(t,Tt);const r=Ft(t.firestore,sr),s=tN(t.converter,e,n);return oc(r,[Kb(Gd(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,En.none())])}function Qe(t,e,n,...r){t=Ft(t,Tt);const s=Ft(t.firestore,sr),i=Gd(s);let a;return a=typeof(e=Se(e))=="string"||e instanceof rc?NP(i,"updateDoc",t._key,e,n,r):bP(i,"updateDoc",t._key,e),oc(s,[a.toMutation(t._key,En.exists(!0))])}function as(t){return oc(Ft(t.firestore,sr),[new Jp(t._key,En.none())])}function Wo(t,e){const n=Ft(t.firestore,sr),r=Z(t),s=tN(t.converter,e);return oc(n,[Kb(Gd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}function Ol(t,...e){var n,r,s;t=Se(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Ux(e[a])||(i=e[a],a++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Ux(e[a])){const m=e[a];e[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,f;if(t instanceof Tt)d=Ft(t.firestore,sr),f=Od(t._key.path),u={next:m=>{e[a]&&e[a](nN(d,t,m))},error:e[a+1],complete:e[a+2]};else{const m=Ft(t,or);d=Ft(m.firestore,sr),f=m._query;const g=new Ig(d);u={next:_=>{e[a]&&e[a](new Tg(d,g,m,_))},error:e[a+1],complete:e[a+2]},Jb(t._query)}return function(g,_,R,k){const S=new gg(k),b=new mg(_,S,R);return g.asyncQueue.enqueueAndForget(async()=>dg(await sd(g),b)),()=>{S.Za(),g.asyncQueue.enqueueAndForget(async()=>hg(await sd(g),b))}}(nc(d),f,c,u)}function oc(t,e){return function(r,s){const i=new Nr;return r.asyncQueue.enqueueAndForget(async()=>sP(await mP(r),s,i)),i.promise}(nc(t),e)}function nN(t,e,n){const r=n.docs.get(e._key),s=new Ig(t);return new Eg(t,s,e._key,r,new lo(n.hasPendingWrites,n.fromCache),e.converter)}function pe(){return new xg("serverTimestamp")}function Fa(t){return new vg("increment",t)}(function(e,n=!0){(function(s){$o=s})(xi),ii(new ws("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new sr(new VC(r.getProvider("auth-internal")),new BC(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(d.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Zn(nx,"4.7.3",e),Zn(nx,"4.7.3","esm2017")})();const Bx=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:eN,Bytes:hi,CollectionReference:Er,DocumentReference:Tt,DocumentSnapshot:Eg,FieldPath:rc,FieldValue:Ho,Firestore:sr,FirestoreError:K,GeoPoint:Wd,Query:or,QueryCompositeFilterConstraint:Jd,QueryConstraint:Yd,QueryDocumentSnapshot:nl,QueryFieldFilterConstraint:ic,QueryLimitConstraint:eh,QueryOrderByConstraint:Zd,QuerySnapshot:Tg,SnapshotMetadata:lo,Timestamp:ot,VectorValue:Kd,_AutoId:qp,_ByteString:yt,_DatabaseId:jo,_DocumentKey:J,_EmptyAuthCredentialsProvider:F1,_FieldPath:pt,_cast:Ft,_logWarn:ci,_validateIsNotUsedTogether:Bb,addDoc:Wo,collection:he,connectFirestoreEmulator:zb,deleteDoc:as,doc:Z,ensureFirestoreConfigured:nc,executeWrite:oc,getDoc:bt,getDocs:Ge,getFirestore:qb,increment:Fa,limit:Ng,onSnapshot:Ol,orderBy:Ts,query:$t,serverTimestamp:pe,setDoc:wn,updateDoc:Qe,where:fn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="firebasestorage.googleapis.com",sN="storageBucket",jP=2*60*1e3,SP=10*60*1e3,CP=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe extends ir{constructor(e,n,r=0){super(Xh(e),`Firebase Storage: ${n} (${Xh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var De;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(De||(De={}));function Xh(t){return"storage/"+t}function kg(){const t="An unknown error occurred, please check the error payload for server response.";return new qe(De.UNKNOWN,t)}function RP(t){return new qe(De.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function AP(t){return new qe(De.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PP(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qe(De.UNAUTHENTICATED,t)}function DP(){return new qe(De.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function OP(t){return new qe(De.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function iN(){return new qe(De.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oN(){return new qe(De.CANCELED,"User canceled the upload/download.")}function LP(t){return new qe(De.INVALID_URL,"Invalid URL '"+t+"'.")}function MP(t){return new qe(De.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function VP(){return new qe(De.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sN+"' property when initializing the app?")}function aN(){return new qe(De.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function UP(){return new qe(De.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function FP(){return new qe(De.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $P(t){return new qe(De.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tm(t){return new qe(De.INVALID_ARGUMENT,t)}function lN(){return new qe(De.APP_DELETED,"The Firebase app was deleted.")}function BP(t){return new qe(De.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rl(t,e){return new qe(De.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Sa(t){throw new qe(De.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=un.makeFromUrl(e,n)}catch{return new un(e,"")}if(r.path==="")return r;throw MP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function d(E){E.path_=decodeURIComponent(E.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),R={bucket:1,path:3},k=n===rN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",b=new RegExp(`^https?://${k}/${s}/${S}`,"i"),N=[{regex:c,indices:u,postModify:i},{regex:_,indices:R,postModify:d},{regex:b,indices:{bucket:1,path:2},postModify:d}];for(let E=0;E<N.length;E++){const O=N[E],L=O.regex.exec(e);if(L){const x=L[O.indices.bucket];let y=L[O.indices.path];y||(y=""),r=new un(x,y),O.postModify(r);break}}if(r==null)throw LP(e);return r}}class zP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t,e,n){let r=1,s=null,i=null,a=!1,c=0;function u(){return c===2}let d=!1;function f(...S){d||(d=!0,e.apply(null,S))}function m(S){s=setTimeout(()=>{s=null,t(_,u())},S)}function g(){i&&clearTimeout(i)}function _(S,...b){if(d){g();return}if(S){g(),f.call(null,S,...b);return}if(u()||a){g(),f.call(null,S,...b);return}r<64&&(r*=2);let N;c===1?(c=2,N=0):N=(r+Math.random())*1e3,m(N)}let R=!1;function k(S){R||(R=!0,g(),!d&&(s!==null?(S||(c=2),clearTimeout(s),m(0)):S||(c=1)))}return m(0),i=setTimeout(()=>{a=!0,k(!0)},n),k}function HP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){return t!==void 0}function KP(t){return typeof t=="function"}function GP(t){return typeof t=="object"&&!Array.isArray(t)}function th(t){return typeof t=="string"||t instanceof String}function zx(t){return jg()&&t instanceof Blob}function jg(){return typeof Blob<"u"}function qx(t,e,n,r){if(r<e)throw Tm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Tm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function cN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Zs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Zs||(Zs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n,r,s,i,a,c,u,d,f,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,R)=>{this.resolve_=_,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Xc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===Zs.NO_ERROR,u=i.getStatus();if(!c||uN(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Zs.ABORT;r(!1,new Xc(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Xc(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());WP(u)?i(u):i()}catch(u){a(u)}else if(c!==null){const u=kg();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(s.canceled){const u=this.appDelete_?lN():oN();a(u)}else{const u=iN();a(u)}};this.canceled_?n(!1,new Xc(!1,null,!0)):this.backoffId_=qP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&HP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function XP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function YP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ZP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function e4(t,e,n,r,s,i,a=!0){const c=cN(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return JP(d,e),XP(d,n),YP(d,i),ZP(d,r),new QP(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function n4(...t){const e=t4();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(jg())return new Blob(t);throw new qe(De.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function r4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t){if(typeof atob>"u")throw $P("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Yh{constructor(e,n){this.data=e,this.contentType=n||null}}function i4(t,e){switch(t){case Xn.RAW:return new Yh(dN(e));case Xn.BASE64:case Xn.BASE64URL:return new Yh(hN(t,e));case Xn.DATA_URL:return new Yh(a4(e),l4(e))}throw kg()}function dN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function o4(t){let e;try{e=decodeURIComponent(t)}catch{throw rl(Xn.DATA_URL,"Malformed data URL.")}return dN(e)}function hN(t,e){switch(t){case Xn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw rl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Xn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw rl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=s4(e)}catch(s){throw s.message.includes("polyfill")?s:rl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class fN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw rl(Xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=c4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function a4(t){const e=new fN(t);return e.base64?hN(Xn.BASE64,e.rest):o4(e.rest)}function l4(t){return new fN(t).contentType}function c4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){let r=0,s="";zx(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(zx(this.data_)){const r=this.data_,s=r4(r,e,n);return s===null?null:new pr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new pr(r,!0)}}static getBlob(...e){if(jg()){const n=e.map(r=>r instanceof pr?r.data_:r);return new pr(n4.apply(null,n))}else{const n=e.map(a=>th(a)?i4(Xn.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)s[i++]=a[c]}),new pr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){let e;try{e=JSON.parse(t)}catch{return null}return GP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function d4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function pN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t,e){return e}class Mt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||h4}}let Yc=null;function f4(t){return!th(t)||t.length<2?t:pN(t)}function Sg(){if(Yc)return Yc;const t=[];t.push(new Mt("bucket")),t.push(new Mt("generation")),t.push(new Mt("metageneration")),t.push(new Mt("name","fullPath",!0));function e(i,a){return f4(a)}const n=new Mt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Mt("size");return s.xform=r,t.push(s),t.push(new Mt("timeCreated")),t.push(new Mt("updated")),t.push(new Mt("md5Hash",null,!0)),t.push(new Mt("cacheControl",null,!0)),t.push(new Mt("contentDisposition",null,!0)),t.push(new Mt("contentEncoding",null,!0)),t.push(new Mt("contentLanguage",null,!0)),t.push(new Mt("contentType",null,!0)),t.push(new Mt("metadata","customMetadata",!0)),Yc=t,Yc}function m4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new un(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function p4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return m4(r,t),r}function gN(t,e,n){const r=mN(e);return r===null?null:p4(t,r,n)}function g4(t,e,n,r){const s=mN(e);if(s===null||!th(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,m=t.fullPath,g="/b/"+a(f)+"/o/"+a(m),_=ac(g,n,r),R=cN({alt:"media",token:d});return _+R})[0]}function yN(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Ko{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t){if(!t)throw kg()}function Cg(t,e){function n(r,s){const i=gN(t,s,e);return Tr(i!==null),i}return n}function y4(t,e){function n(r,s){const i=gN(t,s,e);return Tr(i!==null),g4(i,s,t.host,t._protocol)}return n}function lc(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=DP():s=PP():n.getStatus()===402?s=AP(t.bucket):n.getStatus()===403?s=OP(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function xN(t){const e=lc(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=RP(t.path)),i.serverResponse=s.serverResponse,i}return n}function x4(t,e,n){const r=e.fullServerUrl(),s=ac(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new Ko(s,i,Cg(t,n),a);return c.errorHandler=xN(e),c}function v4(t,e,n){const r=e.fullServerUrl(),s=ac(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new Ko(s,i,y4(t,n),a);return c.errorHandler=xN(e),c}function _4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function vN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=_4(null,e)),r}function _N(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let N="";for(let E=0;E<2;E++)N=N+Math.random().toString().slice(2);return N}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const d=vN(e,r,s),f=yN(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",_=pr.getBlob(m,r,g);if(_===null)throw aN();const R={name:d.fullPath},k=ac(i,t.host,t._protocol),S="POST",b=t.maxUploadRetryTime,v=new Ko(k,S,Cg(t,n),b);return v.urlParams=R,v.headers=a,v.body=_.uploadData(),v.errorHandler=lc(e),v}class od{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Rg(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Tr(!1)}return Tr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function w4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a=vN(e,r,s),c={name:a.fullPath},u=ac(i,t.host,t._protocol),d="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},m=yN(a,n),g=t.maxUploadRetryTime;function _(k){Rg(k);let S;try{S=k.getResponseHeader("X-Goog-Upload-URL")}catch{Tr(!1)}return Tr(th(S)),S}const R=new Ko(u,d,_,g);return R.urlParams=c,R.headers=f,R.body=m,R.errorHandler=lc(e),R}function b4(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(d){const f=Rg(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Tr(!1)}m||Tr(!1);const g=Number(m);return Tr(!isNaN(g)),new od(g,r.size(),f==="final")}const a="POST",c=t.maxUploadRetryTime,u=new Ko(n,a,i,c);return u.headers=s,u.errorHandler=lc(e),u}const Hx=256*1024;function N4(t,e,n,r,s,i,a,c){const u=new od(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw UP();const d=u.total-u.current;let f=d;s>0&&(f=Math.min(f,s));const m=u.current,g=m+f;let _="";f===0?_="finalize":d===f?_="upload, finalize":_="upload";const R={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${u.current}`},k=r.slice(m,g);if(k===null)throw aN();function S(E,O){const L=Rg(E,["active","final"]),x=u.current+f,y=r.size();let I;return L==="final"?I=Cg(e,i)(E,O):I=null,new od(x,y,L==="final",I)}const b="POST",v=e.maxUploadRetryTime,N=new Ko(n,b,S,v);return N.headers=R,N.body=k.uploadData(),N.progressCallback=c||null,N.errorHandler=lc(t),N}const Wt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Jh(t){switch(t){case"running":case"pausing":case"canceling":return Wt.RUNNING;case"paused":return Wt.PAUSED;case"success":return Wt.SUCCESS;case"canceled":return Wt.CANCELED;case"error":return Wt.ERROR;default:return Wt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n,r){if(KP(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class T4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Sa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Sa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Sa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Sa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Sa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class I4 extends T4{initXhr(){this.xhr_.responseType="text"}}function Hs(){return new I4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Sg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(De.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(uN(s.status,[]))if(i)s=iN();else{this.sleepTime=Math.max(this.sleepTime*2,CP),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(De.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=w4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Hs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=b4(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Hs,n,r);this._request=i,i.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Hx*this._chunkMultiplier,n=new od(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let a;try{a=N4(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(a,Hs,s,i,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Hx*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=x4(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Hs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=_N(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Hs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=oN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Jh(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new E4(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Jh(this._state)){case Wt.SUCCESS:Hi(this._resolve.bind(null,this.snapshot))();break;case Wt.CANCELED:case Wt.ERROR:const n=this._reject;Hi(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Jh(this._state)){case Wt.RUNNING:case Wt.PAUSED:e.next&&Hi(e.next.bind(e,this.snapshot))();break;case Wt.SUCCESS:e.complete&&Hi(e.complete.bind(e))();break;case Wt.CANCELED:case Wt.ERROR:e.error&&Hi(e.error.bind(e,this._error))();break;default:e.error&&Hi(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n){this._service=e,n instanceof un?this._location=n:this._location=un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fi(e,n)}get root(){const e=new un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pN(this._location.path)}get storage(){return this._service}get parent(){const e=u4(this._location.path);if(e===null)return null;const n=new un(this._location.bucket,e);return new fi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw BP(e)}}function j4(t,e,n){t._throwIfRoot("uploadBytes");const r=_N(t.storage,t._location,Sg(),new pr(e,!0),n);return t.storage.makeRequestWithTokens(r,Hs).then(s=>({metadata:s,ref:t}))}function S4(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new k4(t,new pr(e),n)}function C4(t){t._throwIfRoot("getDownloadURL");const e=v4(t.storage,t._location,Sg());return t.storage.makeRequestWithTokens(e,Hs).then(n=>{if(n===null)throw FP();return n})}function R4(t,e){const n=d4(t._location.path,e),r=new un(t._location.bucket,n);return new fi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){return/^[A-Za-z]+:\/\//.test(t)}function P4(t,e){return new fi(t,e)}function wN(t,e){if(t instanceof Ag){const n=t;if(n._bucket==null)throw VP();const r=new fi(n,n._bucket);return e!=null?wN(r,e):r}else return e!==void 0?R4(t,e):t}function D4(t,e){if(e&&A4(e)){if(t instanceof Ag)return P4(t,e);throw Tm("To use ref(service, url), the first argument must be a Storage instance.")}else return wN(t,e)}function Wx(t,e){const n=e==null?void 0:e[sN];return n==null?null:un.makeFromBucketSpec(n,t)}function O4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:$w(s,t.app.options.projectId))}class Ag{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=rN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jP,this._maxUploadRetryTime=SP,this._requests=new Set,s!=null?this._bucket=un.makeFromBucketSpec(s,this._host):this._bucket=Wx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=un.makeFromBucketSpec(this._url,e):this._bucket=Wx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new zP(lN());{const a=e4(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Kx="@firebase/storage",Gx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="storage";function Im(t,e,n){return t=Se(t),j4(t,e,n)}function NN(t,e,n){return t=Se(t),S4(t,e,n)}function Ll(t){return t=Se(t),C4(t)}function Ml(t,e){return t=Se(t),D4(t,e)}function nh(t=Cd(),e){t=Se(t);const r=Sd(t,bN).getImmediate({identifier:e}),s=Vw("storage");return s&&L4(r,...s),r}function L4(t,e,n,r={}){O4(t,e,n,r)}function M4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ag(n,r,s,e,xi)}function V4(){ii(new ws(bN,M4,"PUBLIC").setMultipleInstances(!0)),Zn(Kx,Gx,""),Zn(Kx,Gx,"esm2017")}V4();const U4={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},an=Hw().length?Cd():qw(U4),Un=Hw().length>0?PC(an):m1(an,{persistence:[S1,N1]}),H=qb(an),Qx=nh(an),EN=j.createContext({user:null,role:null,loading:!0,logout:async()=>{}}),F4=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(null),[i,a]=j.useState(!0);j.useEffect(()=>{const u=oS(Un,async d=>{if(n(d),d){const f=await bt(Z(H,"users",d.uid)),m=f.data(),g=f.exists()?m==null?void 0:m.role:null;if(s(g),g==="owner")try{const _=Z(H,"restaurants",d.uid);(await bt(_)).exists()||await wn(_,{name:(m==null?void 0:m.restaurantName)||(m==null?void 0:m.name)||" ",ownerId:d.uid,email:(m==null?void 0:m.email)||d.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(_){console.warn("    ",_)}}else s(null);a(!1)});return()=>u()},[]);const c=async()=>{await aS(Un)};return o.jsx(EN.Provider,{value:{user:e,role:r,loading:i,logout:c},children:t})},xt=()=>j.useContext(EN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Xx=t=>{const e=B4(t);return e.charAt(0).toUpperCase()+e.slice(1)},TN=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),z4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...c},u)=>j.createElement("svg",{ref:u,...q4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:TN("lucide",s),...!i&&!z4(c)&&{"aria-hidden":"true"},...c},[...a.map(([d,f])=>j.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(t,e)=>{const n=j.forwardRef(({className:r,...s},i)=>j.createElement(H4,{ref:i,iconNode:e,className:TN(`lucide-${$4(Xx(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Xx(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],km=Y("arrow-left",W4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],IN=Y("arrow-right",K4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Q4=Y("briefcase",G4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],kN=Y("building-2",X4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Zh=Y("chart-column",Y4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ad=Y("check",J4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],jN=Y("chef-hat",Z4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],tD=Y("chevron-down",eD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],rD=Y("chevron-left",nD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],iD=Y("chevron-up",sD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jm=Y("circle-alert",oD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vl=Y("circle-check-big",aD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cD=Y("circle-check",lD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],SN=Y("circle-x",uD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Sm=Y("clipboard-list",dD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pg=Y("clock",hD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],CN=Y("code-xml",fD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],pD=Y("credit-card",mD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Yx=Y("external-link",gD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Jx=Y("file-check",yD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vD=Y("file-text",xD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wD=Y("funnel",_D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ND=Y("heart",bD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Cm=Y("house",ED);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ID=Y("image",TD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Zx=Y("info",kD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],SD=Y("key-round",jD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ev=Y("loader-circle",CD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],RN=Y("lock",RD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],AN=Y("log-in",AD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],PN=Y("mail",PD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ir=Y("map-pin",DD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],LD=Y("menu",OD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M5 12h14",key:"1ays0h"}]],VD=Y("minus",MD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],FD=Y("navigation",UD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ef=Y("package",$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tv=Y("pen-line",BD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],DN=Y("phone",zD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dg=Y("plus",qD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gr=Y("refresh-cw",HD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ON=Y("save",WD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],GD=Y("server",KD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],XD=Y("settings",QD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nv=Y("shield-check",YD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],LN=Y("shield",JD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ld=Y("shopping-bag",ZD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],MN=Y("shopping-cart",eO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],nO=Y("smartphone",tO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],cd=Y("sparkles",rO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],tf=Y("star",sO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Rm=Y("store",iO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],aO=Y("target",oO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Po=Y("trash-2",lO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rv=Y("triangle-alert",cO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Ul=Y("truck",uO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],hO=Y("upload",dO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ud=Y("user-plus",fO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],mi=Y("user",mO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],gO=Y("users",pO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],xO=Y("utensils",yO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],VN=Y("wallet",vO);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pi=Y("x",_O),Oe=({to:t,label:e,icon:n,onClick:r})=>{const{pathname:s}=Rs(),i=s===t;return o.jsxs(Ie,{to:t,onClick:r,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(i?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20 backdrop-blur-sm"),children:[n,o.jsx("span",{children:e})]})},wO=()=>{const{user:t,role:e,logout:n}=xt(),[r,s]=j.useState(!1),i=Rs(),a=Lr(),c=i.pathname==="/";return j.useEffect(()=>{s(!1)},[i.pathname]),j.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),o.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30",children:[o.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!c&&o.jsx("button",{onClick:()=>a(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"",children:o.jsx(IN,{className:"w-5 h-5"})}),o.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[o.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),o.jsx("span",{className:"text-lg sm:text-2xl",children:" "})]})]}),o.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[o.jsx(Oe,{to:"/restaurants",label:"",icon:o.jsx(Rm,{className:"w-4 h-4"})}),e==="customer"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/cart",label:" "}),o.jsx(Oe,{to:"/orders",label:""}),o.jsx(Oe,{to:"/profile",label:"",icon:o.jsx(mi,{className:"w-4 h-4"})})]}),e==="owner"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/owner",label:" "}),o.jsx(Oe,{to:"/owner/orders",label:" "}),o.jsx(Oe,{to:"/owner/courier-requests",label:""})]}),e==="courier"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/courier",label:" "}),o.jsx(Oe,{to:"/courier/hiring",label:""})]}),e==="admin"&&o.jsx(Oe,{to:"/admin",label:" "}),e==="developer"&&o.jsx(Oe,{to:"/developer",label:" "}),t?o.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:""}):o.jsx(Oe,{to:"/login",label:""})]}),o.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white/20 hover:bg-white/30 transition backdrop-blur-sm",onClick:()=>s(!r),children:r?o.jsx(pi,{className:"w-6 h-6 text-white"}):o.jsx(LD,{className:"w-6 h-6 text-white"})})]}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>s(!1)}),o.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] bg-gradient-to-b from-sky-500 to-sky-700 
        z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${r?"translate-x-0":"translate-x-full"}
      `,children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[o.jsx("span",{className:"text-white font-bold text-lg",children:""}),o.jsx("button",{onClick:()=>s(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:o.jsx(pi,{className:"w-5 h-5 text-white"})})]}),o.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[o.jsx(Oe,{to:"/restaurants",label:"",icon:o.jsx(Rm,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="customer"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/cart",label:"",icon:o.jsx(MN,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/orders",label:"",icon:o.jsx(ef,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/profile",label:"",icon:o.jsx(mi,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="owner"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/owner",label:" ",icon:o.jsx(Cm,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/owner/orders",label:" ",icon:o.jsx(ef,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/owner/courier-requests",label:"",icon:o.jsx(Ul,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="courier"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/courier",label:" ",icon:o.jsx(Ul,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/courier/hiring",label:"",icon:o.jsx(ef,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="admin"&&o.jsx(Oe,{to:"/admin",label:" ",icon:o.jsx(LN,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="developer"&&o.jsx(Oe,{to:"/developer",label:" ",icon:o.jsx(CN,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx("div",{className:"h-px bg-white/20 my-2"}),t?o.jsx("button",{onClick:()=>{n(),s(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"  "}):o.jsx(Oe,{to:"/login",label:" ",icon:o.jsx(Cm,{className:"w-5 h-5"}),onClick:()=>s(!1)})]})]})]})},UN=j.createContext(null),Vr=()=>{const t=j.useContext(UN);if(!t)throw new Error("useDialog must be used within DialogProvider");return t},bO=({children:t})=>{const[e,n]=j.useState({isOpen:!1,message:"",type:"confirm"}),r=j.useCallback(u=>new Promise(d=>{n({...u,isOpen:!0,resolve:d})}),[]),s=j.useCallback(u=>{e.resolve&&e.resolve(u),n(d=>({...d,isOpen:!1}))},[e.resolve]),i=j.useCallback(async()=>{e.onConfirm&&await e.onConfirm(),s(!0)},[e.onConfirm,s]),a=j.useCallback(()=>{e.onCancel&&e.onCancel(),s(!1)},[e.onCancel,s]),c=j.useMemo(()=>({confirm:(u,d={})=>r({message:u,type:"confirm",title:d.title||"",confirmText:d.confirmText||"",cancelText:d.cancelText||"",...d}),alert:(u,d={})=>r({message:u,type:"alert",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),success:(u,d={})=>r({message:u,type:"success",title:d.title||" ",confirmText:d.confirmText||"",...d}).then(()=>{}),error:(u,d={})=>r({message:u,type:"error",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),warning:(u,d={})=>r({message:u,type:"warning",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),info:(u,d={})=>r({message:u,type:"info",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{})}),[r]);return o.jsxs(UN.Provider,{value:c,children:[t,o.jsx(NO,{...e,onConfirm:i,onCancel:a})]})},NO=({isOpen:t,title:e,message:n,type:r="confirm",confirmText:s="",cancelText:i="",dangerous:a,onConfirm:c,onCancel:u})=>{if(!t)return null;const f={confirm:{icon:o.jsx(Zx,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:a?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:o.jsx(rv,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:o.jsx(Vl,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:o.jsx(SN,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:o.jsx(rv,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:o.jsx(Zx,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[r],m=r==="confirm";return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:u}),o.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:g=>g.stopPropagation(),children:[o.jsxs("div",{className:"relative p-6 pb-0",children:[o.jsx("button",{onClick:u,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:o.jsx(pi,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:`w-16 h-16 rounded-full ${f.iconBg} ${f.iconColor} flex items-center justify-center`,children:f.icon})}),o.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:e})]}),o.jsx("div",{className:"p-6 pt-3",children:o.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),o.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${m?"flex-row-reverse":"justify-center"}`,children:[o.jsx("button",{onClick:c,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${f.buttonColor}`,children:s}),m&&o.jsx("button",{onClick:u,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:i})]})]})}),o.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},EO=()=>{const{user:t}=xt(),e=Lr(),n=Vr(),r=async()=>{if(!(!t||!await n.confirm("     .     .",{title:"  ",dangerous:!0,confirmText:"  ",cancelText:""})))try{await as(Z(H,"users",t.uid)),await lS(Un.currentUser),n.success("   "),e("/account-deleted")}catch(i){console.error("Error deleting account:",i),n.error("    .   .")}};return o.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),o.jsx("span",{className:"text-xl sm:text-2xl font-black",children:" "})]}),o.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["  ",o.jsx(ND,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"}),"    ",new Date().getFullYear()]}),o.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[o.jsxs(Ie,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(LN,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),o.jsxs(Ie,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(CN,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),t&&o.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(Po,{className:"w-3 h-3 sm:w-4 sm:h-4"})," "]})]}),o.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),o.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"     "})]})})},TO=()=>o.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:o.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[o.jsx(cd,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),o.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"            ! "}),o.jsx(cd,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),IO=()=>{const{user:t}=xt();return o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 text-center px-4 sm:px-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-64 sm:w-96 h-64 sm:h-96 bg-gradient-to-br from-sky-400/20 to-sky-300/10 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-gradient-to-tl from-sky-500/20 to-sky-400/10 rounded-full blur-3xl animate-pulse delay-1000"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] sm:w-[600px] h-[300px] sm:h-[600px] bg-gradient-radial from-sky-200/30 to-transparent rounded-full blur-3xl"}),o.jsx("div",{className:"hidden sm:block absolute top-20 left-20 text-sky-300 float",children:o.jsx(cd,{className:"w-8 h-8"})}),o.jsx("div",{className:"hidden sm:block absolute top-40 right-32 text-sky-400 float delay-500",children:o.jsx(tf,{className:"w-6 h-6 fill-current"})}),o.jsx("div",{className:"hidden sm:block absolute bottom-32 left-32 text-sky-300 float delay-1000",children:o.jsx(tf,{className:"w-5 h-5 fill-current"})}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center max-w-3xl w-full",children:[o.jsxs("div",{className:"mb-6 sm:mb-8 relative",children:[o.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 bg-gradient-to-br from-sky-500 to-sky-600 rounded-[2rem] sm:rounded-[2.5rem] flex items-center justify-center shadow-2xl shadow-sky-300/50 glow",children:o.jsx("span",{className:"text-5xl sm:text-7xl drop-shadow-lg",children:""})}),o.jsx("div",{className:"absolute -top-1 -right-1 sm:-top-2 sm:-right-2 w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(cd,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})})]}),o.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 mb-4 sm:mb-6 drop-shadow-sm",children:" "}),o.jsxs("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl text-sky-700/80 max-w-2xl mb-6 sm:mb-10 leading-relaxed font-medium px-2",children:["      ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"text-sky-500",children:"        "})," "]}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-4 mb-6 sm:mb-10 px-2",children:[o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[o.jsx(jN,{className:"w-4 h-4 sm:w-5 sm:h-5 text-sky-500"}),o.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:"  "})]}),o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[o.jsx(Ul,{className:"w-4 h-4 sm:w-5 sm:h-5 text-sky-500"}),o.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:" "})]}),o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[o.jsx(tf,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 fill-yellow-500"}),o.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:" "})]})]}),o.jsxs("div",{className:"relative mb-8 sm:mb-12",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-sky-400/30 to-sky-500/30 rounded-[1.5rem] sm:rounded-[2rem] blur-2xl scale-110"}),o.jsx("img",{src:"/landing.png",alt:"  ",className:"relative w-56 sm:w-72 md:w-80 lg:w-96 rounded-[1.5rem] sm:rounded-[2rem] shadow-2xl shadow-sky-200/50 border-2 sm:border-4 border-white object-cover hover:scale-105 transition-transform duration-500"})]}),t?o.jsxs(Ie,{to:"/restaurants",className:"group flex items-center gap-2 sm:gap-3 px-8 sm:px-10 py-4 sm:py-5 rounded-full text-lg sm:text-xl font-bold text-white bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 shadow-2xl shadow-sky-300/50 hover:shadow-sky-400/60 hover:scale-105 transition-all duration-300",children:["  ",o.jsx(km,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform"})]}):o.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-5 w-full px-4",children:[o.jsxs(Ie,{to:"/customer-login",className:"group flex items-center justify-center gap-2 sm:gap-3 w-full max-w-xs px-8 sm:px-12 py-4 sm:py-5 rounded-full text-lg sm:text-xl font-bold text-white bg-gradient-to-r from-green-500 via-green-400 to-green-500 shadow-2xl shadow-green-300/50 hover:shadow-green-400/60 hover:scale-105 transition-all duration-300",children:["   ",o.jsx(km,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform"})]}),o.jsx(Ie,{to:"/login",className:"text-sky-600 font-semibold hover:text-sky-700 hover:underline transition text-sm sm:text-base",children:"       "}),o.jsxs("p",{className:"text-sky-600/80 text-base sm:text-lg",children:[" "," ",o.jsx(Ie,{to:"/customer-login",className:"text-green-600 font-bold hover:text-green-700 hover:underline transition",children:"   "})]})]})]})]})},Og=["",""," "," ","","","","","","","","","",""," ","","","","",""," ","","","","","","","","","","","","","",""," ","","","",""],kO=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState("");j.useEffect(()=>{(async()=>{const u=await Ge(he(H,"restaurants"));e(u.docs.map(d=>({id:d.id,...d.data()}))),r(!1)})()},[]);const a=j.useMemo(()=>{const u=new Set(t.map(d=>d.city).filter(Boolean));return Og.filter(d=>u.has(d))},[t]),c=j.useMemo(()=>s?t.filter(u=>u.city===s):t,[t,s]);return n?o.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."}):o.jsxs("div",{className:"py-10",children:[o.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-sky-600",children:"  "}),a.length>0&&o.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[o.jsx(wD,{className:"w-5 h-5"}),o.jsx("span",{className:"font-semibold",children:":"})]}),o.jsx("button",{onClick:()=>i(""),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${s?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-sky-500 text-white shadow-lg"}`,children:""}),a.map(u=>o.jsxs("button",{onClick:()=>i(u),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1 ${s===u?"bg-sky-500 text-white shadow-lg":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:[o.jsx(Ir,{className:"w-4 h-4"}),u]},u)),s&&o.jsx("button",{onClick:()=>i(""),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:" ",children:o.jsx(pi,{className:"w-5 h-5"})})]}),c.length===0&&o.jsx("div",{className:"text-center text-gray-400",children:s?`     ${s}`:"    "}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(u=>o.jsxs(Ie,{to:`/menu?restaurant=${u.id}`,className:"bg-gray-800 text-white rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center",children:[u.logoUrl?o.jsx("img",{src:u.logoUrl,alt:u.name,className:"w-28 h-28 object-cover rounded-full border-4 border-gray-700 mb-4"}):o.jsx("div",{className:"w-28 h-28 flex items-center justify-center bg-gray-600 rounded-full text-3xl mb-4",children:""}),o.jsx("h3",{className:"font-bold text-xl",children:u.name}),u.city&&o.jsxs("p",{className:"text-sm text-gray-400 mt-1 flex items-center justify-center gap-1",children:[o.jsx(Ir,{className:"w-4 h-4"}),u.city]})]},u.id))})]})},sv="broast_cart";function Lg(){const[t,e]=j.useState(()=>{try{const c=localStorage.getItem(sv);return c?JSON.parse(c):[]}catch{return[]}});j.useEffect(()=>{localStorage.setItem(sv,JSON.stringify(t))},[t]);const n=(c,u=1)=>{e(d=>{const f=d.findIndex(m=>m.id===c.id);if(f>=0){const m=[...d];return m[f]={...m[f],qty:m[f].qty+u,ownerId:c.ownerId??m[f].ownerId},m}return[...d,{...c,qty:u}]})},r=c=>e(u=>u.filter(d=>d.id!==c)),s=(c,u)=>e(d=>d.map(f=>f.id===c?{...f,qty:u}:f)),i=()=>e([]),a=t.reduce((c,u)=>c+u.price*u.qty,0);return{items:t,add:n,remove:r,changeQty:s,clear:i,subtotal:a}}const FN=j.createContext(null),wi=()=>{const t=j.useContext(FN);if(!t)throw new Error("useToast must be used within ToastProvider");return t},jO=({children:t})=>{const[e,n]=j.useState([]),r=j.useCallback(a=>{n(c=>c.filter(u=>u.id!==a))},[]),s=j.useCallback((a,c,u)=>{const d=Math.random().toString(36).slice(2),f={id:d,message:a,type:c,title:u==null?void 0:u.title,duration:(u==null?void 0:u.duration)??3e3};n(m=>[...m,f]),f.duration&&f.duration>0&&setTimeout(()=>r(d),f.duration)},[r]),i=j.useMemo(()=>({show:(a,c)=>s(a,(c==null?void 0:c.type)??"info",c),success:(a,c)=>s(a,"success",c),error:(a,c)=>s(a,"error",c),info:(a,c)=>s(a,"info",c),warning:(a,c)=>s(a,"warning",c)}),[s]);return o.jsxs(FN.Provider,{value:i,children:[t,o.jsx(RO,{items:e,onClose:r})]})},SO={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},CO={success:"",error:"",info:"",warning:""},RO=({items:t,onClose:e})=>(j.useEffect(()=>{},[]),o.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[o.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:t.map(n=>o.jsx("div",{className:`pointer-events-auto ${SO[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"text-xl leading-none",children:CO[n.type]}),o.jsxs("div",{className:"flex-1",children:[n.title&&o.jsx("div",{className:"font-bold",children:n.title}),o.jsx("div",{className:"text-sm",children:n.message})]}),o.jsx("button",{onClick:()=>e(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:""})]})},n.id))}),o.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),AO=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),{add:a,subtotal:c,items:u}=Lg(),{user:d,role:f}=xt(),m=wi(),[g]=kI(),_=g.get("restaurant");j.useEffect(()=>{(async()=>{let S;if(_){S=$t(he(H,"menuItems"),fn("available","==",!0),fn("ownerId","==",_));const E=await bt(Z(H,"restaurants",_));E.exists()&&i(E.data().name)}else S=$t(he(H,"menuItems"),fn("available","==",!0));const v=(await Ge(S)).docs.map(E=>({id:E.id,...E.data()})),N=await Promise.all(v.map(async E=>{if(!E.ownerId)return E;const O=await bt(Z(H,"restaurants",E.ownerId));return O.exists()?{...E,restaurant:O.data()}:E}));e(N),r(!1)})()},[_]);const R=S=>{var v;if(!S.ownerId){m.warning("    ",{title:""});return}const b=(v=u[0])==null?void 0:v.ownerId;if(b&&b!==S.ownerId){m.warning("           ",{title:""});return}a({id:S.id,name:S.name,price:S.price,ownerId:S.ownerId}),m.success("    ")};if(n)return o.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."});const k=d&&(f==="customer"||f==="admin"||f==="developer"||!f);return o.jsxs("div",{className:"py-10",children:[o.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:s?`  ${s}`:"  "}),_&&o.jsx("div",{className:"text-center mb-6",children:o.jsx(Ie,{to:"/restaurants",className:"text-sky-400 hover:text-sky-300 underline",children:"   "})}),t.length===0&&o.jsx("div",{className:"text-center text-gray-400",children:"    "}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(S=>o.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[S.restaurant&&o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[S.restaurant.logoUrl?o.jsx("img",{src:S.restaurant.logoUrl,alt:S.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):o.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:""}),o.jsx("span",{className:"font-semibold",children:S.restaurant.name})]}),o.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:S.imageUrl?o.jsx("img",{src:S.imageUrl,alt:S.name,className:"w-full h-full object-cover rounded-xl"}):o.jsx("span",{className:"text-gray-400",children:" "})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:S.name}),S.desc&&o.jsx("p",{className:"text-sm text-gray-300 mt-1",children:S.desc})]}),o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[S.price.toFixed(2)," ."]}),k&&o.jsx("button",{onClick:()=>R(S),disabled:!S.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${S.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"  "})]})]},S.id))}),c>0&&k&&o.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-40",children:o.jsxs(Ie,{to:"/checkout",className:"block w-full sm:w-auto text-center px-6 py-4 rounded-2xl bg-sky-600 text-white shadow-xl font-bold hover:bg-sky-700 transition text-base sm:text-lg",children:["    ",c.toFixed(2)," ."]})})]})},PO=()=>{const{items:t,subtotal:e,remove:n,clear:r,changeQty:s}=Lg();return t.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[o.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:o.jsx(ld,{className:"w-12 h-12 text-gray-400"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-2",children:" "}),o.jsx("p",{className:"text-gray-500 mb-6",children:"   !"}),o.jsxs(Ie,{to:"/restaurants",className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-sky-600 transition",children:[o.jsx(km,{className:"w-5 h-5"})," "]})]}):o.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[o.jsx(ld,{className:"w-6 h-6 text-primary"})," ",o.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:t.length})]})}),o.jsx("div",{className:"space-y-3",children:t.map(i=>o.jsxs("div",{className:"flex items-center gap-3 bg-white text-gray-900 p-3 sm:p-4 rounded-xl shadow-sm border border-gray-100",children:[o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:i.name}),o.jsxs("p",{className:"text-primary font-bold text-sm",children:[i.price.toFixed(2)," ."]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("button",{onClick:()=>i.qty>1?s(i.id,i.qty-1):n(i.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:o.jsx(VD,{className:"w-4 h-4"})}),o.jsx("span",{className:"font-bold text-lg w-8 text-center",children:i.qty}),o.jsx("button",{onClick:()=>s(i.id,i.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:o.jsx(Dg,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(i.price*i.qty).toFixed(2)," ."]}),o.jsx("button",{onClick:()=>n(i.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:o.jsx(Po,{className:"w-4 h-4"})})]})]},i.id))}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-gray-600",children:[o.jsx("span",{children:" "}),o.jsxs("span",{className:"font-bold",children:[e.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between text-gray-600",children:[o.jsx("span",{children:" "}),o.jsx("span",{className:"font-bold",children:"7.00 ."})]}),o.jsx("div",{className:"h-px bg-gray-200"}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-bold text-lg",children:""}),o.jsxs("span",{className:"font-bold text-xl text-primary",children:[(e+7).toFixed(2)," ."]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[o.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:[o.jsx(Po,{className:"w-5 h-5"})," "]}),o.jsx(Ie,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition",children:"  "})]})]})},DO=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(!1),a=Lr(),c=Vr(),u=async d=>{d.preventDefault(),i(!0);try{const m=(await rS(Un,t,n)).user.uid,g=await bt(Z(H,"users",m));if(g.exists()){const _=g.data();console.log("  :",_),_.role==="owner"?a("/owner"):_.role==="admin"?a("/admin"):_.role==="developer"?a("/developer"):_.role==="courier"?a("/courier"):a("/")}else c.warning("   Auth       Firestore")}catch(f){c.error(f.message,{title:"   "})}finally{i(!1)}};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:o.jsx("span",{className:"text-4xl",children:"  "})}),o.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),o.jsx("p",{className:"text-sky-500 mt-1",children:" "})]}),o.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(PN,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"email",placeholder:"",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:t,onChange:d=>e(d.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(RN,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"password",placeholder:" ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:d=>r(d.target.value)})]}),o.jsx("button",{disabled:s,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50`,children:s?o.jsx(o.Fragment,{children:" ..."}):o.jsxs(o.Fragment,{children:[o.jsx(AN,{className:"w-5 h-5"}),""]})})]}),o.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["  "," ",o.jsx(Ie,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"  "})]}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[o.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"    "}),o.jsx(Ie,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"   "})]})]})]})},OO=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(""),[a,c]=j.useState(""),[u,d]=j.useState(""),[f,m]=j.useState(""),[g,_]=j.useState(!1),R=Lr(),k=async b=>{if(b.preventDefault(),!f)return alert("  ");if(f==="owner"&&!a)return alert("  ");_(!0);try{const v=await fu(Un,t,n);await wn(Z(H,"users",v.user.uid),{name:s,email:t,role:f,restaurantName:f==="owner"?a:null}),f==="owner"&&await wn(Z(H,"restaurants",v.user.uid),{name:a||s||" ",ownerId:v.user.uid,email:t,phone:"",city:u||"",location:"",logoUrl:""},{merge:!0}),R("/")}catch(v){alert(v.message)}finally{_(!1)}},S=[{value:"customer",label:"",icon:gO,color:"sky"},{value:"courier",label:"",icon:Ul,color:"emerald"},{value:"owner",label:" ",icon:jN,color:"orange"}];return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:o.jsx(ud,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"  "})]}),o.jsxs("form",{onSubmit:k,className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(mi,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",value:s,onChange:b=>i(b.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(PN,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",type:"email",value:t,onChange:b=>e(b.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(RN,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:" ",type:"password",value:n,onChange:b=>r(b.target.value)})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:S.map(b=>{const v=b.icon,N=f===b.value;return o.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${N?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[o.jsx("input",{type:"radio",name:"role",value:b.value,className:"hidden",onChange:()=>m(b.value)}),o.jsx(v,{className:"w-6 h-6"}),o.jsx("span",{className:"text-sm font-bold",children:b.label})]},b.value)})}),f==="owner"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsx(Rm,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:" ",value:a,onChange:b=>c(b.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ir,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400 pointer-events-none"}),o.jsxs("select",{value:u,onChange:b=>d(b.target.value),className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all appearance-none cursor-pointer",children:[o.jsx("option",{value:"",children:" "}),Og.map(b=>o.jsx("option",{value:b,children:b},b))]})]})]}),o.jsx("button",{disabled:g,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02]",children:g?" ...":o.jsxs(o.Fragment,{children:[o.jsx(ud,{className:"w-5 h-5"}),""]})})]}),o.jsxs("p",{className:"mt-6 text-center text-sky-600",children:[" "," ",o.jsx(Ie,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"  "})]})]})]})},iv=t=>{let e=t.replace(/\D/g,"");return e.startsWith("0")&&(e=e.substring(1)),e.startsWith("966")||(e="966"+e),"+"+e},LO=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState("phone"),[a,c]=j.useState(!1),[u,d]=j.useState(null),[f,m]=j.useState(0),g=j.useRef(null),_=j.useRef(null),R=Lr(),k=Vr();j.useEffect(()=>(g.current&&!_.current&&(_.current=new K0(Un,g.current,{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired"),_.current=null}})),()=>{_.current&&(_.current.clear(),_.current=null)}),[]),j.useEffect(()=>{if(f>0){const N=setTimeout(()=>m(f-1),1e3);return()=>clearTimeout(N)}},[f]);const S=async()=>{if(!t||t.length<9){k.warning("   ");return}const N=iv(t);console.log("Sending OTP to:",N),c(!0);try{!_.current&&g.current&&(_.current=new K0(Un,g.current,{size:"invisible"}));const E=await LS(Un,N,_.current);d(E),i("otp"),m(60),k.success("     ")}catch(E){console.error("OTP Error:",E),_.current&&(_.current.clear(),_.current=null),E.code==="auth/invalid-phone-number"?k.error("   "):E.code==="auth/too-many-requests"?k.error("   "):E.code==="auth/quota-exceeded"?k.error("     "):k.error(E.message||"  ")}finally{c(!1)}},b=async()=>{if(!n||n.length!==6){k.warning("     6 ");return}if(!u){k.error("    "),i("phone");return}c(!0);try{const N=await u.confirm(n),E=N.user.uid,O=N.user.phoneNumber,L=await bt(Z(H,"users",E));L.exists()?k.success(" ! "):(await wn(Z(H,"users",E),{phone:O,role:"customer",name:"",createdAt:pe()}),k.success("   ! "));const x=L.exists()?L.data():{role:"customer"};x.role==="owner"?R("/owner"):x.role==="admin"?R("/admin"):x.role==="developer"?R("/developer"):x.role==="courier"?R("/courier"):R("/")}catch(N){console.error("Verify Error:",N),N.code==="auth/invalid-verification-code"?k.error("   "):N.code==="auth/code-expired"?(k.error("    "),i("phone")):k.error(N.message||" ")}finally{c(!1)}},v=()=>{f>0||(i("phone"),r(""),d(null))};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsx("div",{ref:g,id:"recaptcha-container"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:o.jsx("span",{className:"text-4xl",children:""})}),o.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),o.jsx("p",{className:"text-sky-500 mt-1",children:s==="phone"?" ":"  "})]}),s==="phone"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(DN,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:t,onChange:N=>e(N.target.value.replace(/\D/g,"")),maxLength:10})]}),o.jsx("p",{className:"text-sm text-gray-500 text-center",children:"     SMS"}),o.jsx("button",{onClick:S,disabled:a||t.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:a?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(IN,{className:"w-5 h-5"}),"  "]})})]}),s==="otp"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("p",{className:"text-gray-600",children:"   "}),o.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:iv(t)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(SD,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:N=>r(N.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),o.jsx("button",{onClick:b,disabled:a||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:a?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(AN,{className:"w-5 h-5"})," "]})}),o.jsx("div",{className:"text-center",children:f>0?o.jsxs("p",{className:"text-gray-500 text-sm",children:["   ",o.jsx("span",{className:"font-bold text-sky-600",children:f})," "]}):o.jsx("button",{onClick:v,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"    "})}),o.jsx("button",{onClick:()=>{i("phone"),r("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"   "})]}),o.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[o.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"   "}),o.jsx(Ie,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"   "})]})]})]})};function MO(){return o.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:o.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"  -   "}),o.jsxs("p",{className:"mb-4",children:["   ",o.jsx("strong",{children:" "}),"          ."]}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1.  "}),o.jsx("p",{className:"mb-4",children:"                   .            ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2.  "}),o.jsx("p",{className:"mb-4",children:"               ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3.  "}),o.jsx("p",{className:"mb-4",children:"              .                 ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4.  "}),o.jsx("p",{className:"mb-4",children:"       (    )         ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5.  "}),o.jsxs("p",{className:"mb-4",children:["              .         :",o.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6.   "}),o.jsx("p",{className:"mb-4",children:"                  ."}),o.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["      ",new Date().toLocaleDateString("ar-SA"),"."]}),o.jsx("div",{className:"mt-8 text-center",children:o.jsx(Ie,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"   "})})]})})}function VO(){return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"   "}),o.jsx("p",{className:"text-gray-600 mb-6",children:"          ."}),o.jsx(Ie,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"   "})]})}const UO="modulepreload",FO=function(t){return"/"+t},ov={},av=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=FO(u),u in ov)return;ov[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":UO,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((g,_)=>{m.addEventListener("load",g),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},Ue=({allow:t,children:e})=>{const{role:n,loading:r}=xt();return r?o.jsx("div",{className:"p-8 text-center",children:" ..."}):!n||!t.includes(n)?o.jsx(Cp,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:e})},$O=({isOpen:t,onClose:e,onConfirm:n,initialLocation:r})=>{const[s,i]=j.useState(r||null),[a,c]=j.useState(""),[u,d]=j.useState(!1),[f,m]=j.useState(!1),[g,_]=j.useState(null),[R,k]=j.useState(!1),S={lat:24.7136,lng:46.6753},b=j.useCallback(()=>{if(!navigator.geolocation){_("    ");return}m(!0),_(null),navigator.geolocation.getCurrentPosition(E=>{const O={lat:E.coords.latitude,lng:E.coords.longitude};i(O),m(!1),window.leafletMap&&(window.leafletMap.setView([O.lat,O.lng],17),window.leafletMarker&&window.leafletMarker.setLatLng([O.lat,O.lng]))},E=>{m(!1),E.code===1?_("   .     "):E.code===2?_("  .    GPS"):_("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);j.useEffect(()=>{if(t){if(!document.getElementById("leaflet-css")){const E=document.createElement("link");E.id="leaflet-css",E.rel="stylesheet",E.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(E)}if(window.L)k(!0);else{const E=document.createElement("script");E.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",E.onload=()=>k(!0),document.body.appendChild(E)}}},[t]),j.useEffect(()=>{if(!t||!R||!window.L)return;const E=window.L;if(!document.getElementById("location-map"))return;window.leafletMap&&window.leafletMap.remove();const L=s||S,x=E.map("location-map",{zoomControl:!1,attributionControl:!1}).setView([L.lat,L.lng],s?17:12);E.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(x);const y=E.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),I=E.marker([L.lat,L.lng],{icon:y,draggable:!0}).addTo(x);return I.on("dragend",()=>{const C=I.getLatLng();i({lat:C.lat,lng:C.lng})}),x.on("click",C=>{const{lat:P,lng:D}=C.latlng;I.setLatLng([P,D]),i({lat:P,lng:D})}),window.leafletMap=x,window.leafletMarker=I,s&&i(s),()=>{window.leafletMap&&(window.leafletMap.remove(),window.leafletMap=null,window.leafletMarker=null)}},[t,R]);const v=()=>{s&&window.leafletMap&&window.leafletMap.setView([s.lat,s.lng],17,{animate:!0,duration:.5})},N=()=>{if(!s){_("  ");return}if(!a.trim()){_("  ");return}n(s,a)};return t?o.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),o.jsxs("div",{className:"relative w-full h-full sm:w-[95%] sm:h-[90%] sm:max-w-2xl sm:rounded-3xl overflow-hidden bg-white shadow-2xl flex flex-col",children:[o.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:o.jsx(Ir,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold text-lg",children:"  "}),o.jsx("p",{className:"text-sm text-white/80",children:"     "})]})]}),o.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition",children:o.jsx(pi,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 relative",children:[!R&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx(ev,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-3"}),o.jsx("p",{className:"text-sky-600 font-medium",children:"  ..."})]})}),o.jsx("div",{id:"location-map",className:"w-full h-full"}),o.jsxs("div",{className:"absolute left-4 top-4 flex flex-col gap-2 z-[1000]",children:[o.jsx("button",{onClick:b,disabled:f,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition disabled:opacity-50",title:" ",children:f?o.jsx(ev,{className:"w-5 h-5 text-sky-500 animate-spin"}):o.jsx(FD,{className:"w-5 h-5 text-sky-500"})}),s&&o.jsx("button",{onClick:v,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition",title:"",children:o.jsx(aO,{className:"w-5 h-5 text-gray-600"})})]}),s&&o.jsxs("div",{className:"absolute right-4 top-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 z-[1000] max-w-[200px]",children:[o.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[o.jsx(ad,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"  "})]}),o.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[s.lat.toFixed(6),", ",s.lng.toFixed(6)]})]})]}),o.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[g&&o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm flex items-center gap-2",children:[o.jsx(pi,{className:"w-4 h-4 flex-shrink-0"}),g]}),o.jsxs("div",{className:"relative",children:[o.jsx(nO,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",value:a,onChange:E=>c(E.target.value),placeholder:"  (:       ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 pr-10 focus:border-sky-400 focus:outline-none transition text-gray-800"})]}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:"      "}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:"flex-1 py-3 px-4 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition",children:""}),o.jsxs("button",{onClick:N,disabled:!s,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:[o.jsx(ad,{className:"w-5 h-5"})," "]})]})]})]}),o.jsx("style",{children:`
        .custom-marker {
          background: transparent !important;
          border: none !important;
        }
        .leaflet-container {
          font-family: inherit;
        }
        .leaflet-control-zoom {
          display: none;
        }
        #location-map {
          background: #f0f9ff;
        }
      `})]}):null},lv=1,Jc=.75,BO=()=>{const{items:t,subtotal:e,clear:n}=Lg(),{user:r}=xt(),s=Lr(),i=Vr(),a=wi(),[c,u]=j.useState(""),[d,f]=j.useState(!1),[m,g]=j.useState(null),[_,R]=j.useState(null),[k,S]=j.useState(!1),b=7,v=e+b;j.useEffect(()=>{(async()=>{var I,C;if(t.length===0)return;let L=(I=t[0])==null?void 0:I.ownerId;if(!L&&((C=t[0])!=null&&C.id))try{const P=await bt(Z(H,"menuItems",t[0].id)),D=P.exists()?P.data():null;L=(D==null?void 0:D.ownerId)||null}catch(P){console.error("    :",P)}if(!L){g(null);return}const x=await bt(Z(H,"restaurants",L)),y=x.exists()?x.data():null;g({id:L,name:(y==null?void 0:y.name)||"",referredBy:y==null?void 0:y.referredBy,referrerType:y==null?void 0:y.referrerType})})()},[t]);const N=(O,L)=>{R(O),u(L),S(!1),a.success("   ! ")},E=async()=>{var P;if(!r)return;if(t.length===0){i.warning(" ");return}if(!c){i.warning(" ");return}if(!_){i.warning("   ");return}let O=m==null?void 0:m.id;if(!O&&((P=t[0])!=null&&P.id)){const D=await bt(Z(H,"menuItems",t[0].id)),A=D.exists()?D.data():null;O=(A==null?void 0:A.ownerId)||null}if(!O){i.error("   .    .");return}f(!0);const L=(m==null?void 0:m.referrerType)==="admin"&&(m==null?void 0:m.referredBy),x=t.reduce((D,A)=>D+A.qty,0),y=lv*x,I=L?Jc*x:0,C=y+(L?0:Jc*x);if(await Wo(he(H,"orders"),{customerId:r.uid,restaurantId:O,restaurantName:(m==null?void 0:m.name)||"",items:t.map(D=>({id:D.id,name:D.name,price:D.price,qty:D.qty,ownerId:D.ownerId??O})),subtotal:e,deliveryFee:b,total:v,status:"pending",address:c,location:_,createdAt:pe(),updatedAt:pe(),paymentMethod:"cod",platformFee:y,platformFeePerItem:lv,adminCommission:I,adminCommissionPerItem:Jc,totalItemsCount:x,referredBy:(m==null?void 0:m.referredBy)||null}),L&&(m!=null&&m.referredBy)&&I>0)try{const D=Z(H,"wallets",m.referredBy);if((await bt(D)).exists())await Qe(D,{balance:Fa(I),totalEarnings:Fa(I),updatedAt:pe()});else{const{setDoc:be}=await av(async()=>{const{setDoc:He}=await Promise.resolve().then(()=>Bx);return{setDoc:He}},void 0);await be(D,{balance:I,totalEarnings:I,totalWithdrawn:0,transactions:[],updatedAt:pe()})}console.log(`   ${I}    ${m.referredBy} (${x}   ${Jc} .)`)}catch(D){console.error("    :",D)}try{const D=Z(H,"wallets","app_earnings");if((await bt(D)).exists())await Qe(D,{balance:Fa(C),totalEarnings:Fa(C),updatedAt:pe()});else{const{setDoc:be}=await av(async()=>{const{setDoc:He}=await Promise.resolve().then(()=>Bx);return{setDoc:He}},void 0);await be(D,{balance:C,totalEarnings:C,totalWithdrawn:0,transactions:[],updatedAt:pe()})}console.log(`   ${C}   `)}catch(D){console.error("    :",D)}n(),f(!1),s("/orders")};return o.jsx(Ue,{allow:["customer","admin"],children:o.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[o.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 text-white shadow-lg",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:o.jsx(ld,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold",children:" "}),o.jsx("p",{className:"text-sm text-white/80",children:(m==null?void 0:m.name)||" ..."})]})]})}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[o.jsx(ld,{className:"w-5 h-5 text-sky-500"}),o.jsx("span",{className:"font-bold text-gray-800",children:" "}),o.jsxs("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full mr-auto",children:[t.length," "]})]}),o.jsx("div",{className:"p-4 space-y-2",children:t.map(O=>o.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center text-sm",children:[O.qty,""]}),o.jsx("span",{className:"text-gray-800 font-medium",children:O.name})]}),o.jsxs("span",{className:"font-bold text-sky-600",children:[(O.price*O.qty).toFixed(2)," ."]})]},O.id))})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[o.jsx(Ir,{className:"w-5 h-5 text-green-500"}),o.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),o.jsx("div",{className:"p-4",children:_?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center flex-shrink-0",children:o.jsx(ad,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-bold text-green-700 mb-1",children:"   "}),o.jsx("p",{className:"text-sm text-gray-600 break-words",children:c}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1 font-mono",children:[_.lat.toFixed(5),", ",_.lng.toFixed(5)]})]})]})}),o.jsxs("button",{onClick:()=>S(!0),className:"w-full py-3 px-4 rounded-xl border-2 border-sky-200 text-sky-600 font-semibold hover:bg-sky-50 transition flex items-center justify-center gap-2",children:[o.jsx(Ir,{className:"w-5 h-5"})," "]})]}):o.jsxs("button",{onClick:()=>S(!0),className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-500 to-sky-600 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[o.jsx(Ir,{className:"w-6 h-6"}),o.jsx("span",{children:"  "}),o.jsx(rD,{className:"w-5 h-5"})]})})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[o.jsx(pD,{className:"w-5 h-5 text-amber-500"}),o.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),o.jsxs("div",{className:"p-4 space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[o.jsx("span",{children:" "}),o.jsxs("span",{className:"font-semibold",children:[e.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ul,{className:"w-4 h-4"}),o.jsx("span",{children:" "})]}),o.jsxs("span",{className:"font-semibold",children:[b.toFixed(2)," ."]})]}),o.jsx("div",{className:"h-px bg-gray-200 my-2"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-bold text-lg text-gray-800",children:""}),o.jsxs("span",{className:"font-black text-xl text-sky-600",children:[v.toFixed(2)," ."]})]})]})]}),o.jsx("button",{disabled:d||!_,onClick:E,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-3",children:d?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"  ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ad,{className:"w-6 h-6"}),"  (  )"]})}),!_&&o.jsx("p",{className:"text-center text-sm text-amber-600 bg-amber-50 rounded-xl p-3",children:"       "}),o.jsx($O,{isOpen:k,onClose:()=>S(!1),onConfirm:N,initialLocation:_})]})})},zO=()=>{const{user:t}=xt(),[e,n]=j.useState(null),[r,s]=j.useState([]),[i,a]=j.useState(null);j.useEffect(()=>{if(!t)return;n(null),a(null);const u=$t(he(H,"orders"),fn("customerId","==",t.uid),Ts("createdAt","desc")),d=Ol(u,f=>{s(f.docs.map(m=>({id:m.id,...m.data()}))),n(null)},async f=>{console.error("TrackOrders onSnapshot error:",f),n("   Composite Index  customerId + createdAt.     .");const m=$t(he(H,"orders"),fn("customerId","==",t.uid)),_=(await Ge(m)).docs.map(S=>({id:S.id,...S.data()})),R=$t(he(H,"orders"),Ts("createdAt","desc"),Ng(5));let k=[];try{k=(await Ge(R)).docs.map(b=>{var N,E,O,L;const v=b.data();return{id:b.id,customerId:v.customerId,restaurantId:v.restaurantId,createdAt:((L=(O=(E=(N=v.createdAt)==null?void 0:N.toDate)==null?void 0:E.call(N))==null?void 0:O.toISOString)==null?void 0:L.call(O))??null}})}catch{}a({uid:t.uid,fallbackCount:_.length,sample:k}),s(_)});return()=>d()},[t]);const c=u=>({pending:" ",accepted:" ",preparing:" ",ready:" ",out_for_delivery:" ",delivered:" ",cancelled:""})[u]||u;return o.jsxs("div",{className:"space-y-3",children:[o.jsx("h1",{className:"text-xl font-bold",children:""}),e&&o.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[e,i&&o.jsxs("div",{className:"mt-1",children:[o.jsxs("div",{children:["UID: ",o.jsx("b",{children:i.uid})]}),o.jsxs("div",{children:["  : ",o.jsx("b",{children:i.fallbackCount})]}),Array.isArray(i.sample)&&i.sample.length>0&&o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"font-semibold",children:" ( 5):"}),i.sample.map(u=>o.jsxs("div",{className:"truncate",children:["#",u.id,"  customerId: ",String(u.customerId),"  restaurantId: ",String(u.restaurantId),"  createdAt: ",u.createdAt||""]},u.id))]})]})]}),r.map(u=>{var d,f,m;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"font-bold",children:[" #",u.id.slice(-6)]}),o.jsx("div",{className:"text-sm px-3 py-1 rounded-full bg-gray-900 text-white",children:c(u.status)})]}),u.restaurantName&&o.jsxs("div",{className:"mt-1 text-yellow-600 font-semibold",children:[": ",String(u.restaurantName)]}),o.jsx("div",{className:"mt-2 text-sm text-gray-700",children:(d=u.items)==null?void 0:d.map(g=>`${g.name}${g.qty}`).join("  ")}),o.jsxs("div",{className:"mt-2 font-bold",children:[": ",(m=(f=u.total)==null?void 0:f.toFixed)==null?void 0:m.call(f,2)," ."]})]},u.id)}),r.length===0&&!e&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})},qO=()=>{const{user:t,role:e}=xt(),n=Vr(),[r,s]=j.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[i,a]=j.useState(!0),[c,u]=j.useState(!1);j.useEffect(()=>{if(!t)return;(async()=>{const g=await bt(Z(H,"users",t.uid));if(g.exists()){const _=g.data();s({name:_.name||"",phone:_.phone||t.phoneNumber||"",city:_.city||"",address:_.address||"",restaurantName:_.restaurantName||""})}a(!1)})()},[t]);const d=async m=>{if(m.preventDefault(),!!t){u(!0);try{await Qe(Z(H,"users",t.uid),{name:r.name,phone:r.phone,city:r.city,address:r.address,...e==="owner"&&{restaurantName:r.restaurantName}}),n.success("   ! ")}catch{n.error("   ")}finally{u(!1)}}};if(i)return o.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[o.jsx(gr,{className:"w-6 h-6 animate-spin ml-2"}),"  ..."]});const f=()=>e==="owner"?"  ":e==="courier"?"  ":e==="admin"?"  ":" ";return o.jsx("div",{className:"max-w-md mx-auto py-8 px-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center",children:o.jsx(mi,{className:"w-6 h-6 text-sky-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-800",children:f()}),o.jsx("p",{className:"text-sm text-gray-500",children:(t==null?void 0:t.email)||(t==null?void 0:t.phoneNumber)})]})]}),o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(mi,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:r.name,onChange:m=>s({...r,name:m.target.value})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(DN,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:r.phone,onChange:m=>s({...r,phone:m.target.value}),dir:"ltr"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(kN,{className:"w-4 h-4 inline ml-1"}),""]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:": ",value:r.city,onChange:m=>s({...r,city:m.target.value})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(Ir,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"     ...",value:r.address,onChange:m=>s({...r,address:m.target.value})})]}),e==="owner"&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(Cm,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:r.restaurantName,onChange:m=>s({...r,restaurantName:m.target.value})})]}),o.jsx("button",{type:"submit",disabled:c,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:c?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ON,{className:"w-5 h-5"})," "]})})]}),o.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[o.jsx("p",{children:"      "}),e==="customer"&&o.jsx("p",{className:"mt-1",children:"    "})]})]})})},HO=()=>{const t=[{to:"/owner/menu",title:" ",desc:"     .",icon:o.jsx(xO,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:" ",desc:"     .",icon:o.jsx(Sm,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"  ",desc:"     .",icon:o.jsx(XD,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>o.jsxs(Ie,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,o.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),o.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},WO=({kind:t,message:e,onClose:n})=>{const r=t==="success"?"bg-green-600":t==="error"?"bg-rose-600":t==="warning"?"bg-amber-500":"bg-slate-800";return j.useEffect(()=>{const s=setTimeout(n,2500);return()=>clearTimeout(s)},[n]),o.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${r}`,children:e})},cv=()=>({name:"",desc:"",price:0,available:!0,file:null});async function KO(t,e=900,n=.8){try{const r=await createImageBitmap(t),s=Math.min(1,e/r.width),i=Math.round(r.width*s),a=Math.round(r.height*s),c=document.createElement("canvas");c.width=i,c.height=a,c.getContext("2d").drawImage(r,0,0,i,a);const d=t.type.includes("png")?"image/png":"image/jpeg";return await new Promise(m=>c.toBlob(g=>m(g),d,n))}catch{return t}}const GO=()=>{const{user:t}=xt(),e=Vr(),[n,r]=j.useState([]),[s,i]=j.useState(!0),[a,c]=j.useState(cv()),[u,d]=j.useState(!1),[f,m]=j.useState(null),g=(N,E)=>m({kind:N,message:E}),_=nh(an),R=j.useRef(null),k=async()=>{if(!t)return;i(!0);const N=$t(he(H,"menuItems"),fn("ownerId","==",t.uid)),E=await Ge(N);r(E.docs.map(O=>({id:O.id,...O.data()}))),i(!1)};j.useEffect(()=>{k()},[t]);const S=async N=>{if(N.preventDefault(),!t){g("warning","    ");return}const E=Number(a.price||0);if(!a.name.trim()){g("warning","   ");return}if(!Number.isFinite(E)||E<=0){g("warning","   ");return}d(!0);const O="temp_"+Date.now(),L=a.file?URL.createObjectURL(a.file):void 0,x={_tempId:O,_optimistic:!0,_progress:a.file?1:100,name:a.name,desc:a.desc||"",price:E,imageUrl:L,available:a.available??!0,ownerId:t.uid};r(y=>[x,...y]);try{let y;if(a.file){const P=await KO(a.file),D=a.file.name.replace(/\s+/g,"_").slice(-60),A=`menuImages/${t.uid}_${Date.now()}_${D}`,be=Ml(_,A),He=NN(be,P,{contentType:a.file.type||"image/jpeg"});await new Promise((qt,ut)=>{He.on("state_changed",q=>{const ee=Math.round(q.bytesTransferred/q.totalBytes*100);r(te=>te.map(ve=>ve._tempId===O?{...ve,_progress:ee}:ve))},ut,async()=>{const q=await Ll(He.snapshot.ref);y=`${q}${q.includes("?")?"&":"?"}v=${Date.now()}`,qt()})})}const I={name:x.name,desc:x.desc,price:E,imageUrl:y||"",available:x.available,ownerId:t.uid,...x.categoryId?{categoryId:x.categoryId}:{}},C=await Wo(he(H,"menuItems"),I);r(P=>P.map(D=>D._tempId===O?{...D,id:C.id,imageUrl:y||D.imageUrl,_optimistic:!1,_progress:100}:D)),g("success","    ")}catch(y){r(I=>I.filter(C=>C._tempId!==O)),g("error",`   : ${(y==null?void 0:y.message)||y}`)}finally{d(!1),c(cv()),R.current&&(R.current.value=""),L&&URL.revokeObjectURL(L)}},b=async(N,E)=>{if(N){r(O=>O.map(L=>L.id===N?{...L,available:!E}:L));try{await Qe(Z(H,"menuItems",N),{available:!E}),g("success","  ")}catch{r(O=>O.map(L=>L.id===N?{...L,available:!!E}:L)),g("error","  .  .")}}},v=async N=>{if(!N||!await e.confirm("       ",{dangerous:!0,title:" "}))return;const O=n;r(L=>L.filter(x=>x.id!==N));try{await as(Z(H,"menuItems",N)),g("success"," ")}catch{r(O),g("error","  .  .")}};return s?o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[o.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),o.jsx("div",{className:"space-y-3",children:[1,2,3].map(N=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},N))})]}):o.jsxs(o.Fragment,{children:[f&&o.jsx(WO,{kind:f.kind,message:f.message,onClose:()=>m(null)}),o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("form",{onSubmit:S,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[o.jsx("h2",{className:"text-lg font-bold",children:" "}),o.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:a.name,onChange:N=>c({...a,name:N.target.value})}),o.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:a.desc,onChange:N=>c({...a,desc:N.target.value})}),o.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(a.price)?a.price:0,onChange:N=>c({...a,price:Number(N.target.value)})}),o.jsx("input",{ref:R,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:N=>{var E;return c({...a,file:((E=N.target.files)==null?void 0:E[0])||null})}}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:a.available,onChange:N=>c({...a,available:N.target.checked})}),""]}),o.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:u,children:u?" ":""})]}),o.jsxs("div",{className:"space-y-3",children:[n.map(N=>{var E,O;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:N.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:L=>{L.currentTarget.style.display="none"}}),N._optimistic&&o.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:o.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:o.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${N._progress||1}%`}})})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold",children:N.name}),N.desc&&o.jsx("div",{className:"text-sm text-gray-600",children:N.desc}),o.jsxs("div",{className:"font-semibold mt-1",children:[(O=(E=N.price)==null?void 0:E.toFixed)==null?void 0:O.call(E,2)," ."]}),N._optimistic&&o.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" "})]}),o.jsx("button",{onClick:()=>b(N.id,N.available),disabled:!!N._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:N.available?"":""}),o.jsx("button",{onClick:()=>v(N.id),disabled:!!N._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:""})]},N.id||N._tempId)}),n.length===0&&o.jsx("div",{className:"text-gray-600",children:"   ."})]})]})]})},uv=t=>({pending:"  ",accepted:"  ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "})[t]||t,QO=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},XO=()=>{const{user:t}=xt(),[e,n]=j.useState([]),[r,s]=j.useState(null),i=j.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);j.useEffect(()=>{if(!i)return;s(null);const c=Ol(he(H,"orders"),u=>{const f=u.docs.map(m=>({id:m.id,...m.data()})).filter(m=>{var R,k;const g=m.restaurantId===i,_=((k=(R=m==null?void 0:m.items)==null?void 0:R[0])==null?void 0:k.ownerId)===i;return g||_});f.sort((m,g)=>{var k,S,b,v;const _=((S=(k=m.createdAt)==null?void 0:k.toMillis)==null?void 0:S.call(k))??0;return(((v=(b=g.createdAt)==null?void 0:b.toMillis)==null?void 0:v.call(b))??0)-_}),n(f),s(null)},u=>{console.error("Firestore error:",u),s("    .")});return()=>c()},[i]);const a=async(c,u)=>{await Qe(Z(H,"orders",c),{status:u,updatedAt:pe()})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"  "}),r&&o.jsx("div",{className:"text-red-500 text-sm mb-2",children:r}),e.map(c=>{var u,d,f;return o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[o.jsxs("div",{className:"font-bold text-lg",children:[" #",c.id.slice(-6),o.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(u=c.items)==null?void 0:u.map(m=>`${m.name}${m.qty}`).join("  ")})]}),o.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(f=(d=c.total)==null?void 0:d.toFixed)==null?void 0:f.call(d,2)," ."]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-semibold",children:":"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${QO(c.status)}`,children:uv(c.status||"pending")})]}),o.jsxs("div",{className:"text-sm text-gray-700",children:[o.jsx("span",{className:"font-semibold",children:":"})," ",c.address]}),c.location&&o.jsxs("div",{className:"mt-3",children:[o.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"  :"}),o.jsx("iframe",{title:`map-${c.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${c.location.lat},${c.location.lng}&hl=ar&z=15&output=embed`})]}),o.jsx("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(m=>o.jsx("button",{onClick:()=>a(c.id,m),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gray-100 hover:bg-gray-200 transition",children:uv(m)},m))})]},c.id)}),e.length===0&&!r&&o.jsx("div",{className:"text-gray-400 text-center text-lg",children:"    ."})]})},YO=()=>{const{user:t}=xt(),e=wi(),[n,r]=j.useState({name:"",phone:"",city:"",location:"",logoUrl:"",commercialLicenseUrl:"",healthCertificateUrl:"",licenseStatus:void 0,licenseNotes:""}),[s,i]=j.useState(null),[a,c]=j.useState(""),[u,d]=j.useState(null),[f,m]=j.useState(null),[g,_]=j.useState(!0),[R,k]=j.useState(!1),S=j.useMemo(()=>!R&&!!t,[R,t]);j.useEffect(()=>{t&&(async()=>{try{const L=await bt(Z(H,"restaurants",t.uid));if(L.exists()){const x=L.data();r({name:x.name??"",phone:x.phone??"",city:x.city??"",location:x.location??"",logoUrl:x.logoUrl??"",commercialLicenseUrl:x.commercialLicenseUrl??"",healthCertificateUrl:x.healthCertificateUrl??"",licenseStatus:x.licenseStatus,licenseNotes:x.licenseNotes??""})}}catch{e.error("   ")}finally{_(!1)}})()},[t,e]),j.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]);const b=L=>{const{name:x,value:y}=L.target;r(I=>({...I,[x]:y}))},v=L=>{var y;const x=((y=L.target.files)==null?void 0:y[0])||null;if(i(x),x){const I=URL.createObjectURL(x);c(I)}else c("")},N=async()=>{if(!t||!s)return;if(!/^image\//.test(s.type)){e.warning("   ");return}const x=3*1024*1024;if(s.size>x){e.warning("        3MB");return}const y=s.name.replace(/\s+/g,"_"),I=`restaurants/${t.uid}/logo_${Date.now()}_${y}`,C=Ml(Qx,I),P={contentType:s.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await Im(C,s,P);const D=await Ll(C);return`${D}${D.includes("?")?"&":"?"}v=${Date.now()}`},E=async(L,x)=>{if(!t||!L)return;if(!/^(image\/|application\/pdf)/.test(L.type)){e.warning("      PDF");return}const I=5*1024*1024;if(L.size>I){e.warning("        5MB");return}const C=L.name.replace(/\s+/g,"_"),P=`restaurants/${t.uid}/licenses/${x}_${Date.now()}_${C}`,D=Ml(Qx,P),A={contentType:L.type,cacheControl:"public,max-age=31536000,immutable"};return await Im(D,L,A),await Ll(D)},O=async L=>{if(L.preventDefault(),!t){e.warning("    ");return}if(!n.name.trim()){e.warning("  ");return}k(!0);try{let x=n.logoUrl,y=n.commercialLicenseUrl,I=n.healthCertificateUrl,C=n.licenseStatus;if(s){e.info("    ");const P=await N();P&&(x=P)}if(u){e.info("     ");const P=await E(u,"commercial");P&&(y=P,C="pending")}if(f){e.info("     ");const P=await E(f,"health");P&&(I=P,C="pending")}await wn(Z(H,"restaurants",t.uid),{...n,logoUrl:x,commercialLicenseUrl:y,healthCertificateUrl:I,licenseStatus:C},{merge:!0}),a&&URL.revokeObjectURL(a),c(""),i(null),d(null),m(null),e.success("    ",{title:" "})}catch(x){e.error(` : ${(x==null?void 0:x.message)||"  "}`)}finally{k(!1)}};return g?o.jsx("div",{className:"p-6 text-center",children:" "}):o.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[o.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"  "}),o.jsxs("form",{onSubmit:O,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block font-semibold",children:" "}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:a||n.logoUrl?o.jsx("img",{src:a||n.logoUrl,className:"w-full h-full object-cover",onError:L=>L.currentTarget.style.display="none",alt:"logo"}):null}),o.jsx("input",{type:"file",accept:"image/*",onChange:v})]}),s&&o.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",o.jsx("span",{className:"font-semibold",children:s.name})]})]}),o.jsx("input",{name:"name",placeholder:" ",value:n.name,onChange:b,className:"w-full border p-3 rounded-xl"}),o.jsx("input",{name:"phone",placeholder:" ",value:n.phone,onChange:b,className:"w-full border p-3 rounded-xl"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ir,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400 pointer-events-none"}),o.jsxs("select",{name:"city",value:n.city,onChange:L=>r(x=>({...x,city:L.target.value})),className:"w-full border p-3 pr-10 rounded-xl bg-white appearance-none cursor-pointer focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[o.jsx("option",{value:"",children:" "}),Og.map(L=>o.jsx("option",{value:L,children:L},L))]})]}),o.jsx("input",{name:"location",placeholder:"",value:n.location,onChange:b,className:"w-full border p-3 rounded-xl"}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[o.jsx(vD,{className:"w-5 h-5 text-sky-500"})," "]}),n.licenseStatus&&o.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 ${n.licenseStatus==="approved"?"bg-green-50 text-green-700":n.licenseStatus==="rejected"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[n.licenseStatus==="approved"&&o.jsx(Vl,{className:"w-5 h-5"}),n.licenseStatus==="rejected"&&o.jsx(jm,{className:"w-5 h-5"}),n.licenseStatus==="pending"&&o.jsx(Pg,{className:"w-5 h-5"}),o.jsxs("span",{className:"font-semibold",children:[n.licenseStatus==="approved"&&"   ",n.licenseStatus==="rejected"&&" ",n.licenseStatus==="pending"&&"  ..."]})]}),n.licenseNotes&&n.licenseStatus==="rejected"&&o.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl text-red-600 text-sm",children:[o.jsx("strong",{children:":"})," ",n.licenseNotes]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[o.jsx(nv,{className:"w-4 h-4 text-orange-500"})," "]}),o.jsxs("div",{className:"flex items-center gap-3",children:[n.commercialLicenseUrl&&o.jsx("a",{href:n.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:text-sky-700 text-sm underline",children:"  "}),o.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:L=>{var x;return d(((x=L.target.files)==null?void 0:x[0])||null)},className:"text-sm"})]}),u&&o.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",o.jsx("span",{className:"font-semibold",children:u.name})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[o.jsx(nv,{className:"w-4 h-4 text-green-500"})," "]}),o.jsxs("div",{className:"flex items-center gap-3",children:[n.healthCertificateUrl&&o.jsx("a",{href:n.healthCertificateUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:text-sky-700 text-sm underline",children:"  "}),o.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:L=>{var x;return m(((x=L.target.files)==null?void 0:x[0])||null)},className:"text-sm"})]}),f&&o.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",o.jsx("span",{className:"font-semibold",children:f.name})]})]})]}),o.jsx("button",{type:"submit",disabled:!S,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:R?" ":""})]})]})},JO=()=>{const{user:t}=xt(),[e,n]=j.useState([]),[r,s]=j.useState(!0);j.useEffect(()=>{t&&(async()=>{const a=$t(he(H,"hiringRequests"),fn("restaurantId","==",t.uid)),c=await Ge(a);n(c.docs.map(u=>({id:u.id,...u.data()}))),s(!1)})()},[t]);const i=async(a,c)=>{await Qe(Z(H,"hiringRequests",a),{status:c}),n(u=>u.map(d=>d.id===a?{...d,status:c}:d))};return r?o.jsx("div",{className:"text-center py-10",children:" ..."}):o.jsxs("div",{className:"py-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-yellow-400 text-center mb-6",children:" "}),e.length===0?o.jsx("div",{className:"text-gray-400 text-center",children:"  "}):o.jsx("div",{className:"space-y-3",children:e.map(a=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:a.courierName}),o.jsx("div",{className:"text-sm text-gray-600",children:a.status==="pending"?" ":a.status})]}),a.status==="pending"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>i(a.id,"accepted"),className:"px-3 py-1 rounded bg-green-500 text-white",children:""}),o.jsx("button",{onClick:()=>i(a.id,"rejected"),className:"px-3 py-1 rounded bg-red-500 text-white",children:""})]})]},a.id))})]})},ZO=()=>{const{user:t}=xt(),[e,n]=j.useState([]),[r,s]=j.useState([]);j.useEffect(()=>{const c=$t(he(H,"orders"),fn("status","in",["ready"]),Ts("createdAt","desc")),u=Ol(c,m=>n(m.docs.map(g=>({id:g.id,...g.data()})))),d=$t(he(H,"orders"),fn("courierId","==",(t==null?void 0:t.uid)||""),Ts("createdAt","desc")),f=Ol(d,m=>s(m.docs.map(g=>({id:g.id,...g.data()}))));return()=>{u(),f()}},[t==null?void 0:t.uid]);const i=async c=>{t&&await Qe(Z(H,"orders",c),{courierId:t.uid,status:"out_for_delivery",updatedAt:pe()})},a=async c=>{await Qe(Z(H,"orders",c),{status:"delivered",updatedAt:pe()})};return o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold mb-3",children:"  "}),o.jsxs("div",{className:"space-y-3",children:[e.map(c=>{var u,d;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"font-bold",children:["#",c.id.slice(-6),"  ",(d=(u=c.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ."]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[": ",c.address]}),o.jsx("button",{onClick:()=>i(c.id),className:"mt-2 px-3 py-2 rounded-xl bg-gray-900 text-white text-sm",children:" "})]},c.id)}),e.length===0&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold mb-3",children:""}),o.jsxs("div",{className:"space-y-3",children:[r.map(c=>{var u,d;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"font-bold",children:["#",c.id.slice(-6),"  ",(d=(u=c.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ."]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[": ",c.address]}),o.jsx("button",{onClick:()=>a(c.id),className:"mt-2 px-3 py-2 rounded-xl bg-green-600 text-white text-sm",children:" "})]},c.id)}),r.length===0&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})]})]})},e5=()=>{const{user:t}=xt(),e=Vr(),[n,r]=j.useState([]),[s,i]=j.useState({}),[a,c]=j.useState(!0),[u,d]=j.useState(null);j.useEffect(()=>{if(!t)return;(async()=>{const _=(await Ge(he(H,"restaurants"))).docs.map(b=>({id:b.id,...b.data()}));r(_);const R=$t(he(H,"hiringRequests"),fn("courierId","==",t.uid)),k=await Ge(R),S={};k.docs.forEach(b=>{const v=b.data();S[v.restaurantId]={restaurantId:v.restaurantId,status:v.status}}),i(S),c(!1)})()},[t]);const f=async m=>{if(!t){e.warning("  ");return}d(m.id),await Wo(he(H,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"",restaurantId:m.id,restaurantName:m.name,status:"pending",createdAt:pe()}),i(g=>({...g,[m.id]:{restaurantId:m.id,status:"pending"}})),d(null)};return a?o.jsx("div",{className:"text-center py-10 text-gray-300",children:"  ..."}):o.jsxs("div",{className:"py-8",children:[o.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[o.jsx(Q4,{className:"w-7 h-7 text-yellow-400"})," "]}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(m=>{const g=s[m.id];return o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[m.logoUrl?o.jsx("img",{src:m.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):o.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:""}),o.jsx("h3",{className:"font-bold text-lg mb-2",children:m.name}),g?o.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${g.status==="pending"?"bg-gray-500 text-white":g.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[g.status==="pending"&&o.jsx(Pg,{className:"w-4 h-4"}),g.status==="accepted"&&o.jsx(cD,{className:"w-4 h-4"}),g.status==="rejected"&&o.jsx(SN,{className:"w-4 h-4"}),g.status==="pending"?" ":g.status==="accepted"?"  ":" "]}):o.jsx("button",{disabled:u===m.id,onClick:()=>f(m),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:u===m.id?"  ...":"  "})]},m.id)})})]})},t5=()=>{var v,N;const{user:t,role:e}=xt(),n=wi(),[r,s]=j.useState("dashboard"),[i,a]=j.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[c,u]=j.useState(0),[d,f]=j.useState(!0),[m,g]=j.useState(null),[_,R]=j.useState([]),[k,S]=j.useState("all");j.useEffect(()=>{t&&(async()=>{try{const O=(await Ge(he(H,"restaurants"))).size,x=(await Ge(he(H,"orders"))).docs.map(P=>({id:P.id,...P.data()})),y=x.length,I=x.filter(P=>P.status==="pending").length,C=x.reduce((P,D)=>P+(D.deliveryFee||0),0);try{const D=(await bt(Z(H,"wallets",t.uid))).data();u((D==null?void 0:D.balance)||0)}catch{u(0)}try{const P=$t(he(H,"tasks"),fn("assignedTo","==",t.uid)),A=(await Ge(P)).docs.map(be=>({id:be.id,...be.data()}));R(A.sort((be,He)=>{var qt,ut;return(((qt=He.createdAt)==null?void 0:qt.seconds)||0)-(((ut=be.createdAt)==null?void 0:ut.seconds)||0)}))}catch(P){console.error("   :",P)}a({totalRestaurants:O,totalOrders:y,totalEarnings:C,pendingOrders:I})}catch(E){console.error("   :",E)}finally{f(!1)}})()},[t]);const b=async(E,O)=>{try{const L={status:O,updatedAt:pe()};O==="completed"&&(L.completedAt=pe()),await Qe(Z(H,"tasks",E),L),R(x=>x.map(y=>y.id===E?{...y,status:O}:y)),n.success(O==="in_progress"?"  ":O==="completed"?"   ! ":"  ")}catch{n.error("   ")}};return j.useEffect(()=>{t&&(async()=>{try{const E=await bt(Z(H,"users",t.uid));E.exists()&&g({uid:E.id,...E.data()})}catch(E){console.error("    :",E)}})()},[t]),d?o.jsx(Ue,{allow:["admin"],children:o.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:" ..."})}):o.jsx(Ue,{allow:["admin"],children:o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"  "}),o.jsx("p",{className:"text-gray-600 mt-2",children:"   ! "})]}),o.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[o.jsxs("button",{onClick:()=>s("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(Zh,{className:"w-5 h-5"})," "]}),o.jsxs("button",{onClick:()=>s("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(mi,{className:"w-5 h-5"}),""]}),o.jsxs("button",{onClick:()=>s("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${r==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(Sm,{className:"w-5 h-5"}),"",_.filter(E=>E.status==="pending"||E.status==="in_progress").length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:_.filter(E=>E.status==="pending"||E.status==="in_progress").length})]})]}),r==="profile"&&o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[o.jsx(mi,{className:"w-6 h-6"}),""]}),m?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((v=m.name)==null?void 0:v.charAt(0))||((N=m.email)==null?void 0:N.charAt(0))||""}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m.name||" "}),o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:" "})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:m.email})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),o.jsx("p",{className:"font-semibold text-gray-900",children:e==="admin"?"":e})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:m.uid})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[c.toFixed(2)," ."]})]})]})]}),o.jsx(Ie,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"   "})]}):o.jsx("div",{className:"text-center py-8 text-gray-600",children:" ..."})]}),r==="tasks"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[o.jsx(Sm,{className:"w-6 h-6"})," "]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(E=>o.jsxs("button",{onClick:()=>S(E),className:`px-4 py-2 rounded-xl font-semibold transition ${k===E?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[E==="all"&&" ",E==="pending"&&"  ",E==="in_progress"&&"  ",E==="completed"&&" "]},E))}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:_.filter(E=>E.status==="pending").length}),o.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:_.filter(E=>E.status==="in_progress").length}),o.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),o.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:_.filter(E=>E.status==="completed").length}),o.jsx("p",{className:"text-sm text-green-700",children:""})]})]}),_.filter(E=>k==="all"||E.status===k).length===0?o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx("p",{className:"text-5xl mb-4",children:""}),o.jsxs("p",{className:"text-lg",children:["   ",k!=="all"&&"  "]}),o.jsx("p",{className:"text-sm mt-2",children:"      "})]}):o.jsx("div",{className:"space-y-4",children:_.filter(E=>k==="all"||E.status===k).map(E=>{var O,L,x;return o.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${E.status==="completed"?"bg-green-50 border-green-200":E.status==="in_progress"?"bg-blue-50 border-blue-200":E.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${E.priority==="high"?"bg-red-100 text-red-700":E.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:E.priority==="high"?" ":E.priority==="medium"?" ":" "}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${E.status==="pending"?"bg-yellow-100 text-yellow-700":E.status==="in_progress"?"bg-blue-100 text-blue-700":E.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[E.status==="pending"&&"  ",E.status==="in_progress"&&"  ",E.status==="completed"&&" ",E.status==="cancelled"&&" "]})]}),o.jsx("h3",{className:"font-bold text-lg text-gray-800",children:E.title}),E.description&&o.jsx("p",{className:"text-gray-600 mt-1",children:E.description}),o.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[E.dueDate&&o.jsxs("span",{className:new Date(E.dueDate)<new Date&&E.status!=="completed"?"text-red-600 font-semibold":"",children:[" ",new Date(E.dueDate).toLocaleDateString("ar-SA"),new Date(E.dueDate)<new Date&&E.status!=="completed"&&" (!)"]}),o.jsxs("span",{children:[" ",((x=(L=(O=E.createdAt)==null?void 0:O.toDate)==null?void 0:L.call(O))==null?void 0:x.toLocaleDateString("ar-SA"))||" "]})]}),E.notes&&o.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:[" ",E.notes]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[E.status==="pending"&&o.jsx("button",{onClick:()=>b(E.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:" "}),E.status==="in_progress"&&o.jsxs("button",{onClick:()=>b(E.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(Vl,{className:"w-4 h-4"}),""]}),E.status==="completed"&&o.jsx("span",{className:"text-green-600 font-semibold text-center",children:"  "})]})]})},E.id)})})]})}),r==="dashboard"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-90",children:" "}),o.jsxs("h2",{className:"text-3xl font-bold",children:[c.toFixed(2)," ."]}),o.jsx("p",{className:"text-sm opacity-75 mt-2",children:"   50       "})]}),o.jsx(VN,{className:"w-16 h-16 opacity-80"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:i.totalRestaurants})]}),o.jsx(kN,{className:"w-12 h-12 text-primary opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:i.totalOrders})]}),o.jsx(MN,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:i.pendingOrders})]}),o.jsx(Zh,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:i.totalEarnings.toFixed(2)})]}),o.jsx(Zh,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ie,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"   "}),o.jsx(Ie,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"     "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ie,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),o.jsx(Ie,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:""}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"       "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ie,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),o.jsx(Ie,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:" "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:[" : ",c.toFixed(2)," ."]}),o.jsx(Ie,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]})]}),o.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 p-6 rounded-lg",children:[o.jsx("h4",{className:"font-bold text-sky-900 mb-2",children:"  :"}),o.jsxs("ul",{className:"text-sky-800 text-sm space-y-1",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:"50 "}),"         "]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"1 "}),"     (     )"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"1.5 "}),"       "]}),o.jsx("li",{children:"        "})]})]})]})]})})},n5=()=>{const{user:t,role:e}=xt(),n=wi(),r=Vr(),[s,i]=j.useState([]),[a,c]=j.useState(!0),[u,d]=j.useState(!1),[f,m]=j.useState(!1),[g,_]=j.useState(0),R=j.useRef(null),k=nh(an),[S,b]=j.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});j.useEffect(()=>{v()},[]);const v=async()=>{try{const L=(await Ge(he(H,"restaurants"))).docs.map(x=>({id:x.id,...x.data()}));i(L)}catch(O){n.error("   "),console.error(O)}finally{c(!1)}},N=async O=>{if(O.preventDefault(),!S.name.trim()){n.warning("  ");return}try{m(!0);let L="";if(S.logoFile){const I=S.logoFile.name.replace(/\s+/g,"_").slice(-60),C=`uploads/restaurant_${Date.now()}_${I}`,P=Ml(k,C),D=NN(P,S.logoFile,{contentType:S.logoFile.type||"image/jpeg"});await new Promise((A,be)=>{D.on("state_changed",He=>{const qt=Math.round(He.bytesTransferred/He.totalBytes*100);_(qt)},be,async()=>{L=await Ll(D.snapshot.ref),A()})})}const x=e==="admin",y=e==="developer";await Wo(he(H,"restaurants"),{name:S.name,phone:S.phone,city:S.city,location:S.location,ownerId:"admin_"+Date.now(),email:(t==null?void 0:t.email)||"",logoUrl:L,createdAt:new Date,referredBy:x?t==null?void 0:t.uid:null,referrerType:x?"admin":y?"developer":null}),n.success("    "),x&&n.info("   75        "),b({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),d(!1),_(0),v()}catch(L){n.error("   "),console.error(L)}finally{m(!1)}},E=async O=>{if(await r.confirm("      ",{dangerous:!0,title:" "}))try{await as(Z(H,"restaurants",O)),n.success("   "),v()}catch(x){n.error("   "),console.error(x)}};return a?o.jsx(Ue,{allow:["admin","developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):o.jsx(Ue,{allow:["admin","developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),o.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[o.jsx(Dg,{className:"w-5 h-5"}),"  "]})]}),u&&o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),o.jsxs("form",{onSubmit:N,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block font-semibold text-gray-700",children:" "}),o.jsxs("div",{className:"flex items-center gap-4",children:[S.logoPreview?o.jsx("img",{src:S.logoPreview,alt:" ",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):o.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:o.jsx(ID,{className:"w-8 h-8 text-gray-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{ref:R,type:"file",accept:"image/*",className:"hidden",onChange:O=>{var x;const L=(x=O.target.files)==null?void 0:x[0];L&&b({...S,logoFile:L,logoPreview:URL.createObjectURL(L)})}}),o.jsxs("button",{type:"button",onClick:()=>{var O;return(O=R.current)==null?void 0:O.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[o.jsx(hO,{className:"w-4 h-4"}),S.logoFile?" ":" "]}),S.logoFile&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:S.logoFile.name})]})]}),f&&g>0&&o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${g}%`}})})]}),o.jsx("input",{type:"text",placeholder:" ",value:S.name,onChange:O=>b({...S,name:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("input",{type:"text",placeholder:" ",value:S.phone,onChange:O=>b({...S,phone:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("input",{type:"text",placeholder:"",value:S.city,onChange:O=>b({...S,city:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("textarea",{placeholder:" / ",value:S.location,onChange:O=>b({...S,location:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:f?` ... ${g}%`:" "}),o.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:" "})]})]})]}),o.jsx("div",{className:"grid gap-4",children:s.length===0?o.jsx("div",{className:"text-center text-gray-500 py-12",children:"    "}):s.map(O=>o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex gap-4",children:[O.logoUrl?o.jsx("img",{src:O.logoUrl,alt:O.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):o.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold text-primary",children:O.name}),O.city&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.city]}),O.phone&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.phone]}),O.location&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.location]})]})]}),o.jsx("button",{onClick:()=>E(O.id),className:"p-3 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:" ",children:o.jsx(Po,{className:"w-5 h-5"})})]})},O.id))})]})})},nf={pending:"  ",accepted:" ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "},r5=()=>{const t=wi(),[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,a]=j.useState("all");j.useEffect(()=>{c()},[i]);const c=async()=>{try{let u;i==="all"?u=$t(he(H,"orders"),Ts("createdAt","desc")):u=$t(he(H,"orders"),fn("status","==",i),Ts("createdAt","desc"));const f=(await Ge(u)).docs.map(m=>({id:m.id,...m.data()}));n(f)}catch(u){t.error("   "),console.error(u)}finally{s(!1)}};return r?o.jsx(Ue,{allow:["admin","developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):o.jsx(Ue,{allow:["admin","developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[o.jsxs("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${i==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[" (",e.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(u=>{const d=e.filter(f=>f.status===u).length;return o.jsxs("button",{onClick:()=>a(u),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${i===u?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[nf[u]," (",d,")"]},u)})]}),o.jsx("div",{className:"space-y-4",children:e.length===0?o.jsxs("div",{className:"text-center text-gray-500 py-12",children:["   ",i!=="all"&&` "${nf[i]}"`]}):e.map(u=>{var d,f;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold",children:[" #",u.id.slice(-8)]}),o.jsx("p",{className:"text-gray-600 text-sm",children:u.createdAt?new Date(u.createdAt).toLocaleDateString("ar-SA"):""})]}),o.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${u.status==="pending"?"bg-yellow-500":u.status==="delivered"?"bg-green-600":u.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:nf[u.status]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" ID"}),o.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[u.customerId.slice(0,12),"..."]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsx("p",{className:"font-semibold text-gray-800",children:u.restaurantName||""})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsx("p",{className:"text-sm text-gray-800",children:u.address})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsxs("p",{className:"text-lg font-bold text-primary",children:[((d=u.total)==null?void 0:d.toFixed(2))||0," ."]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[o.jsx("p",{className:"font-semibold mb-2",children:":"}),o.jsx("div",{className:"space-y-1",children:(f=u.items)==null?void 0:f.map((m,g)=>o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsxs("span",{children:[m.name,"  ",m.qty]}),o.jsxs("span",{children:[(m.price*m.qty).toFixed(2)," ."]})]},g))})]})]},u.id)})})]})})},xn={projectId:an.options.projectId,authDomain:an.options.authDomain,storageBucket:an.options.storageBucket,messagingSenderId:an.options.messagingSenderId,appId:an.options.appId},s5=()=>{var ha,fa,Li,Mi;const{user:t}=xt(),e=wi(),n=Vr(),r=nh(an),[s,i]=j.useState("overview"),[a,c]=j.useState(!0),[u,d]=j.useState(!1),[f,m]=j.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[g,_]=j.useState({}),[R,k]=j.useState([]),[S,b]=j.useState([]),[v,N]=j.useState([]),[E,O]=j.useState([]),[L,x]=j.useState(!1),[y,I]=j.useState({}),[C,P]=j.useState(null),[D,A]=j.useState({}),[be,He]=j.useState(!1),[qt,ut]=j.useState(null),[q,ee]=j.useState({}),[te,ve]=j.useState("all"),[ye,Me]=j.useState("all"),[en,jn]=j.useState(null),[tn,nn]=j.useState(!1),[Ur,cc]=j.useState(""),[Fr,Ds]=j.useState(""),[ar,bi]=j.useState(""),[Ni,Ei]=j.useState(""),[Go,uc]=j.useState(!1),[Qo,Xo]=j.useState(!1),[zn,Yo]=j.useState(""),[Jo,Ti]=j.useState(""),[lr,Zo]=j.useState(""),[Ze,dt]=j.useState(""),[Os,ea]=j.useState(!1),[Ii,dc]=j.useState(!1),[yn,ta]=j.useState(""),[ki,ji]=j.useState(""),[hc,fc]=j.useState(""),[Si,na]=j.useState(""),[qn,$r]=j.useState(""),[Br,Ci]=j.useState(""),[Hn,ra]=j.useState(!1),[Sn,mc]=j.useState([]),[Ls,Ri]=j.useState(!1),[at,Ai]=j.useState(""),[zr,cr]=j.useState(""),[Pi,sa]=j.useState(""),[ur,ia]=j.useState("medium"),[pc,qr]=j.useState(""),[oa,Di]=j.useState(!1),[Cn,Wn]=j.useState("all");t!=null&&t.email;const gc=async()=>{if(!Ur.trim()||!ar.trim()){e.warning("    ");return}if(ar.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${Ur}
 ${Fr||" "}

:         .`,{title:"  "})){uc(!0);try{const B=(await fu(Un,Ur.trim(),ar)).user.uid;await wn(Z(H,"users",B),{email:Ur.trim(),name:Fr.trim()||" ",phone:Ni.trim()||"",role:"admin",createdAt:pe()}),await wn(Z(H,"wallets",B),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:pe()}),e.success("     "),e.info("        "),cc(""),Ds(""),bi(""),Ei(""),nn(!1)}catch($){console.error("   :",$),$.code==="auth/email-already-in-use"?e.error("   "):$.code==="auth/invalid-email"?e.error("   "):$.code==="auth/weak-password"?e.error("   "):e.error("  : "+($.message||"  "))}finally{uc(!1)}}},yc=async()=>{if(!zn.trim()||!lr.trim()){e.warning("    ");return}if(lr.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${zn}
 ${Jo||" "}
 ${Ze||" "}`,{title:"  "})){ea(!0);try{const B=(await fu(Un,zn.trim(),lr)).user.uid;await wn(Z(H,"users",B),{email:zn.trim(),name:Jo.trim()||" ",phone:Ze.trim()||"",role:"courier",createdAt:pe()}),e.success("     "),e.info("        "),Yo(""),Ti(""),Zo(""),dt(""),Xo(!1)}catch($){console.error("   :",$),$.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+($.message||"  "))}finally{ea(!1)}}},aa=async()=>{if(!yn.trim()){e.warning("  ");return}if(!qn.trim()||!Br.trim()){e.warning("   ");return}if(await n.confirm(`   :

 ${yn}
 ${ki||" "}
  : ${qn}`,{title:"  "})){ra(!0);try{const B=(await fu(Un,qn.trim(),Br)).user.uid;await wn(Z(H,"users",B),{email:qn.trim(),name:yn.trim()+" - ",role:"owner",createdAt:pe()}),await wn(Z(H,"restaurants",B),{name:yn.trim(),ownerId:B,email:Si.trim()||qn.trim(),phone:hc.trim()||"",city:ki.trim()||"",referredBy:t==null?void 0:t.uid,referrerType:"developer",createdAt:pe()}),e.success("      "),e.info("        "),ta(""),ji(""),fc(""),na(""),$r(""),Ci(""),dc(!1)}catch($){console.error("   :",$),$.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+($.message||"  "))}finally{ra(!1)}}},la=()=>{const T=new Date,$=new Date(T.getFullYear(),T.getMonth(),T.getDate()),B=new Date($.getTime()-7*24*60*60*1e3),ne=new Date($.getTime()-30*24*60*60*1e3),xe=v.filter(oe=>{var Ve,rn;return(((rn=(Ve=oe.createdAt)==null?void 0:Ve.toDate)==null?void 0:rn.call(Ve))||new Date(0))>=$&&oe.status!=="cancelled"}),Ce=v.filter(oe=>{var Ve,rn;return(((rn=(Ve=oe.createdAt)==null?void 0:Ve.toDate)==null?void 0:rn.call(Ve))||new Date(0))>=B&&oe.status!=="cancelled"}),tt=v.filter(oe=>{var Ve,rn;return(((rn=(Ve=oe.createdAt)==null?void 0:Ve.toDate)==null?void 0:rn.call(Ve))||new Date(0))>=ne&&oe.status!=="cancelled"}),ht=v.filter(oe=>oe.status==="delivered");return{todayRevenue:xe.reduce((oe,Ee)=>oe+(Ee.total||0),0),todayOrders:xe.length,todayPlatformFee:xe.reduce((oe,Ee)=>oe+(Ee.platformFee||0),0),weekRevenue:Ce.reduce((oe,Ee)=>oe+(Ee.total||0),0),weekOrders:Ce.length,weekPlatformFee:Ce.reduce((oe,Ee)=>oe+(Ee.platformFee||0),0),monthRevenue:tt.reduce((oe,Ee)=>oe+(Ee.total||0),0),monthOrders:tt.length,monthPlatformFee:tt.reduce((oe,Ee)=>oe+(Ee.platformFee||0),0),totalRevenue:ht.reduce((oe,Ee)=>oe+(Ee.total||0),0),totalPlatformFee:ht.reduce((oe,Ee)=>oe+(Ee.platformFee||0),0),totalAdminCommission:ht.reduce((oe,Ee)=>oe+(Ee.adminCommission||0),0)}},et=async()=>{try{const[T,$,B,ne,xe]=await Promise.all([Ge(he(H,"users")),Ge(he(H,"restaurants")),Ge(he(H,"menuItems")),Ge(he(H,"orders")),Ge(he(H,"wallets"))]);let Ce={docs:[]};try{Ce=await Ge(he(H,"tasks"))}catch{console.log("   ")}const tt=T.docs.map(ae=>({uid:ae.id,...ae.data()}));k(tt);const ht=$.docs.map(ae=>({id:ae.id,...ae.data()}));b(ht);const oe=ne.docs.map(ae=>({id:ae.id,...ae.data()}));N(oe);const Ee=Ce.docs.map(ae=>({id:ae.id,...ae.data()}));mc(Ee.sort((ae,Ui)=>{var Fs,Fi;return(((Fs=Ui.createdAt)==null?void 0:Fs.seconds)||0)-(((Fi=ae.createdAt)==null?void 0:Fi.seconds)||0)}));const Ve={};xe.docs.forEach(ae=>{Ve[ae.id]=ae.data()});const rn=Ve.app_earnings||{balance:0,totalEarnings:0},Ne=tt.filter(ae=>ae.role==="admin"),Vi=tt.filter(ae=>ae.role==="courier"),Vs=tt.filter(ae=>ae.role==="customer"),Us=tt.filter(ae=>ae.role==="owner"),ih=Ne.map(ae=>{const Ui=ht.filter(Fi=>Fi.referredBy===ae.uid),Fs=Ve[ae.uid]||{balance:0,totalEarnings:0};return{uid:ae.uid,email:ae.email,name:ae.name,walletBalance:Fs.balance||0,totalEarnings:Fs.totalEarnings||0,restaurantsCount:Ui.length,restaurants:Ui}});O(ih),m({users:tt.length,restaurants:ht.length,menuItems:B.size,orders:oe.length,pendingOrders:oe.filter(ae=>ae.status==="pending").length,deliveredOrders:oe.filter(ae=>ae.status==="delivered").length,admins:Ne.length,couriers:Vi.length,customers:Vs.length,owners:Us.length,totalAppEarnings:rn.totalEarnings||0});const ma=await bt(Z(H,"settings","general"));if(ma.exists()){const ae=ma.data();_(ae),I(ae)}else{const ae={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};_(ae),I(ae)}}catch(T){console.error("   :",T),e.error("  ")}finally{c(!1),d(!1)}};j.useEffect(()=>{et()},[]);const ca=()=>{d(!0),et(),e.info("  ...")},rh=async()=>{try{await wn(Z(H,"settings","general"),y,{merge:!0}),_(y),x(!1),e.success("    ")}catch(T){console.error("   :",T),e.error("  ")}},Oi=async T=>{try{await Qe(Z(H,"restaurants",T),{...D,updatedAt:pe()}),P(null),e.success("    "),et()}catch($){console.error("   :",$),e.error("  ")}},xc=async(T,$)=>{try{He(!0);const B=`restaurants/${T}/logo_${Date.now()}_${$.name}`,ne=Ml(r,B);await Im(ne,$);const xe=await Ll(ne);await Qe(Z(H,"restaurants",T),{logoUrl:xe,updatedAt:pe()}),e.success("    "),et()}catch(B){console.error("   :",B),e.error("  ")}finally{He(!1)}},ua=async T=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await as(Z(H,"restaurants",T)),e.success("   "),et()}catch(B){console.error("   :",B),e.error("  ")}},Ms=async T=>{try{await Qe(Z(H,"users",T),{...q,updatedAt:pe()}),ut(null),e.success("    "),et()}catch($){console.error("   :",$),e.error("  ")}},dr=async T=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await as(Z(H,"users",T)),e.success("     "),e.warning(":      Firebase Auth"),et()}catch(B){console.error("   :",B),e.error("  ")}},da=async(T,$)=>{try{await Qe(Z(H,"orders",T),{status:$,updatedAt:pe()}),e.success("    "),et()}catch(B){console.error("   :",B),e.error("  ")}},sh=T=>{switch(T){case"customer":return" ";case"owner":return"  ";case"courier":return" ";case"admin":return" ";case"developer":return" ";default:return T}},vc=T=>{switch(T){case"pending":return"  ";case"accepted":return" ";case"preparing":return"  ";case"ready":return" ";case"out_for_delivery":return"  ";case"delivered":return"  ";case"cancelled":return" ";default:return T}};return a?o.jsx(Ue,{allow:["developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsxs("div",{className:"text-center",children:[o.jsx(gr,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-lg text-gray-600",children:"   ..."})]})})}):o.jsx(Ue,{allow:["developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-extrabold text-primary",children:"   "}),o.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),o.jsxs("button",{onClick:ca,disabled:u,className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition disabled:opacity-50",children:[o.jsx(gr,{className:`w-5 h-5 ${u?"animate-spin":""}`}),""]})]}),o.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[{id:"overview",label:"  "},{id:"finance",label:" "},{id:"restaurants",label:" "},{id:"licenses",label:" "},{id:"orders",label:" "},{id:"users",label:" "},{id:"couriers",label:" "},{id:"admins",label:" "},{id:"tasks",label:" "},{id:"settings",label:" "},{id:"tools",label:" "}].map(T=>o.jsx("button",{onClick:()=>i(T.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition ${s===T.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:T.label},T.id))}),s==="overview"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.users}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.restaurants}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.orders}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.admins}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.couriers}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.totalAppEarnings.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(GD,{className:"w-6 h-6 text-orange-500"}),o.jsx("h2",{className:"text-xl font-bold",children:" Firebase"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),o.jsx("p",{className:"font-mono text-sm",children:xn.projectId})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),o.jsx("p",{className:"font-mono text-sm",children:xn.storageBucket})]})]}),o.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[o.jsx("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:" Console"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:" Firestore"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:" Auth"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:" Storage"})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.customers}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.owners}),o.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),o.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:f.couriers}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:f.admins}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]})]})]}),s==="finance"&&o.jsx("div",{className:"space-y-6",children:(()=>{const T=la();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:T.totalRevenue.toFixed(0)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:T.totalPlatformFee.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:T.totalAdminCommission.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:(T.totalPlatformFee+T.totalAdminCommission).toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:" "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:T.todayOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[T.todayRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[T.todayPlatformFee.toFixed(2)," ."]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"  7 "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:T.weekOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[T.weekRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[T.weekPlatformFee.toFixed(2)," ."]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"  30 "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:T.monthOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[T.monthRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[T.monthPlatformFee.toFixed(2)," ."]})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"   "}),o.jsx("div",{className:"space-y-3",children:S.map($=>({...$,ordersCount:v.filter(B=>B.restaurantId===$.id&&B.status==="delivered").length,revenue:v.filter(B=>B.restaurantId===$.id&&B.status==="delivered").reduce((B,ne)=>B+(ne.total||0),0)})).sort(($,B)=>B.revenue-$.revenue).slice(0,5).map(($,B)=>o.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:B===0?"":B===1?"":B===2?"":`#${B+1}`}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:$.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[$.ordersCount," "]})]})]}),o.jsxs("p",{className:"font-bold text-green-600",children:[$.revenue.toFixed(2)," ."]})]},$.id))})]})]})})()}),s==="restaurants"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",S.length,")"]}),o.jsx("button",{onClick:()=>dc(!Ii),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold",children:Ii?" ":"  "})]}),Ii&&o.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[o.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"   "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"text",placeholder:":  ",value:yn,onChange:T=>ta(T.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:": ",value:ki,onChange:T=>ji(T.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:hc,onChange:T=>fc(T.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:Si,onChange:T=>na(T.target.value),className:"w-full border rounded-xl p-3"})]})]}),o.jsxs("div",{className:"border-t mt-4 pt-4",children:[o.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"    ( )"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   *"}),o.jsx("input",{type:"email",placeholder:"owner@example.com",value:qn,onChange:T=>$r(T.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"6   ",value:Br,onChange:T=>Ci(T.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),o.jsx("button",{onClick:aa,disabled:Hn||!yn.trim()||!qn.trim()||!Br.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Hn?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):"  "})]}),o.jsx("div",{className:"space-y-4",children:S.map(T=>{var $;return o.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:C===T.id?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"text",value:D.name||"",onChange:B=>A({...D,name:B.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"text",value:D.phone||"",onChange:B=>A({...D,phone:B.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"email",value:D.email||"",onChange:B=>A({...D,email:B.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:""}),o.jsx("input",{type:"text",value:D.city||"",onChange:B=>A({...D,city:B.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm text-gray-600",children:""}),o.jsx("input",{type:"text",value:D.location||"",onChange:B=>A({...D,location:B.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm text-gray-600",children:"  ()"}),o.jsxs("select",{value:D.referredBy||"",onChange:B=>A({...D,referredBy:B.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[o.jsx("option",{value:"",children:"--   ( ) --"}),R.filter(B=>B.role==="admin").map(B=>o.jsxs("option",{value:B.uid,children:[" ",B.name||B.email]},B.uid))]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"file",accept:"image/*",onChange:B=>{var xe;const ne=(xe=B.target.files)==null?void 0:xe[0];ne&&xc(T.id,ne)},className:"w-full border rounded-xl p-2 mt-1",disabled:be}),be&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" ..."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>Oi(T.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[o.jsx(ON,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>P(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[o.jsx(pi,{className:"w-4 h-4"})," "]})]})]}):o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:T.logoUrl?o.jsx("img",{src:T.logoUrl,alt:T.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:T.name}),o.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[T.phone&&o.jsxs("p",{children:[" ",T.phone]}),T.email&&o.jsxs("p",{children:[" ",T.email]}),T.city&&o.jsxs("p",{children:[" ",T.city]}),T.referredBy&&o.jsxs("p",{className:"text-purple-600",children:["  : ",(($=E.find(B=>B.uid===T.referredBy))==null?void 0:$.name)||T.referredBy.slice(0,8)]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{P(T.id),A(T)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"",children:o.jsx(tv,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>ua(T.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"",children:o.jsx(Po,{className:"w-5 h-5"})})]}),o.jsxs("select",{value:T.referredBy||"",onChange:async B=>{const ne=B.target.value;try{await Qe(Z(H,"restaurants",T.id),{referredBy:ne||null,updatedAt:pe()}),e.success(ne?"   ":"   "),et()}catch{e.error("   ")}},className:"text-xs border rounded-lg p-1",title:" ",children:[o.jsx("option",{value:"",children:"  "}),R.filter(B=>B.role==="admin").map(B=>o.jsxs("option",{value:B.uid,children:[" ",B.name||B.email]},B.uid))]})]})]})},T.id)})})]}),s==="orders"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",v.length,")"]}),o.jsxs("select",{value:te,onChange:T=>ve(T.target.value),className:"border rounded-xl p-2",children:[o.jsx("option",{value:"all",children:" "}),o.jsx("option",{value:"pending",children:" "}),o.jsx("option",{value:"accepted",children:""}),o.jsx("option",{value:"preparing",children:" "}),o.jsx("option",{value:"ready",children:""}),o.jsx("option",{value:"out_for_delivery",children:" "}),o.jsx("option",{value:"delivered",children:" "}),o.jsx("option",{value:"cancelled",children:""})]})]}),o.jsx("div",{className:"space-y-3",children:v.filter(T=>te==="all"||T.status===te).sort((T,$)=>{var B,ne;return(((B=$.createdAt)==null?void 0:B.seconds)||0)-(((ne=T.createdAt)==null?void 0:ne.seconds)||0)}).map(T=>{var $,B;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold",children:[" #",T.id.slice(-8)]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",T.restaurantName||""]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",T.address]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",($=T.total)==null?void 0:$.toFixed(2)," ."]}),T.platformFee&&o.jsxs("p",{className:"text-xs text-green-600",children:[" : ",T.platformFee," .",T.adminCommission?` |  : ${T.adminCommission} .`:""]})]}),o.jsxs("div",{className:"text-left",children:[o.jsx("span",{className:`inline-block px-3 py-1 rounded-xl text-sm font-semibold ${T.status==="delivered"?"bg-green-100 text-green-700":T.status==="cancelled"?"bg-red-100 text-red-700":T.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:vc(T.status)}),o.jsxs("select",{value:T.status,onChange:ne=>da(T.id,ne.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[o.jsx("option",{value:"pending",children:" "}),o.jsx("option",{value:"accepted",children:""}),o.jsx("option",{value:"preparing",children:" "}),o.jsx("option",{value:"ready",children:""}),o.jsx("option",{value:"out_for_delivery",children:" "}),o.jsx("option",{value:"delivered",children:" "}),o.jsx("option",{value:"cancelled",children:""})]})]})]}),o.jsxs("div",{className:"mt-3 pt-3 border-t",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(B=T.items)==null?void 0:B.map((ne,xe)=>o.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[ne.name,"  ",ne.qty]},xe))})]})]},T.id)})})]}),s==="users"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",R.length,")"]}),o.jsxs("select",{value:ye,onChange:T=>Me(T.target.value),className:"border rounded-xl p-2",children:[o.jsx("option",{value:"all",children:" "}),o.jsx("option",{value:"customer",children:""}),o.jsx("option",{value:"owner",children:" "}),o.jsx("option",{value:"courier",children:""}),o.jsx("option",{value:"admin",children:""}),o.jsx("option",{value:"developer",children:""})]})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.filter(T=>ye==="all"||T.role===ye).map(T=>o.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:qt===T.uid?o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{type:"text",placeholder:"",value:q.name||"",onChange:$=>ee({...q,name:$.target.value}),className:"w-full border rounded-xl p-2"}),o.jsx("input",{type:"text",placeholder:"",value:q.phone||"",onChange:$=>ee({...q,phone:$.target.value}),className:"w-full border rounded-xl p-2"}),o.jsxs("select",{value:q.role||"customer",onChange:$=>ee({...q,role:$.target.value}),className:"w-full border rounded-xl p-2",children:[o.jsx("option",{value:"customer",children:""}),o.jsx("option",{value:"owner",children:" "}),o.jsx("option",{value:"courier",children:""}),o.jsx("option",{value:"admin",children:""}),o.jsx("option",{value:"developer",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Ms(T.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:""}),o.jsx("button",{onClick:()=>ut(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:""})]})]}):o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:T.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:T.email}),o.jsx("p",{className:"text-xs mt-1",children:sh(T.role)})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>{ut(T.uid),ee(T)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:o.jsx(tv,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>dr(T.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:o.jsx(Po,{className:"w-4 h-4"})})]})]})})},T.uid))})]}),s==="couriers"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["  (",f.couriers,")"]}),o.jsx("button",{onClick:()=>Xo(!Qo),className:"flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-xl font-semibold",children:Qo?" ":"  "})]}),Qo&&o.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[o.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"   "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"email",placeholder:"courier@example.com",value:zn,onChange:T=>Yo(T.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"6   ",value:lr,onChange:T=>Zo(T.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:" ",value:Jo,onChange:T=>Ti(T.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Ze,onChange:T=>dt(T.target.value),className:"w-full border rounded-xl p-3"})]})]}),o.jsx("button",{onClick:yc,disabled:Os||!zn.trim()||!lr.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Os?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):"   "})]}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[R.filter(T=>T.role==="courier").map(T=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:T.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:T.email}),T.phone&&o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",T.phone]})]})]}),o.jsx("div",{className:"mt-4 pt-3 border-t",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[o.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[o.jsx("p",{className:"text-lg font-bold text-green-600",children:v.filter($=>$.courierId===T.uid&&$.status==="delivered").length}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[o.jsx("p",{className:"text-lg font-bold text-blue-600",children:v.filter($=>$.courierId===T.uid&&$.status==="out_for_delivery").length}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]})]})})]},T.uid)),f.couriers===0&&o.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"   "})]})]}),s==="admins"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",E.length,")"]}),o.jsxs("button",{onClick:()=>nn(!tn),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(ud,{className:"w-5 h-5"}),tn?"":" "]})]}),tn&&o.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"    "}),o.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"           "}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"  :"}),o.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[R.filter(T=>T.role==="customer").slice(0,10).map(T=>o.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:T.name||" "}),o.jsx("p",{className:"text-sm text-gray-500",children:T.email})]}),o.jsx("button",{onClick:async()=>{if(await n.confirm(`   ${T.name||T.email}  `,{title:"  "}))try{await Qe(Z(H,"users",T.uid),{role:"admin"}),e.success("     "),nn(!1),et()}catch{e.error("  ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:" "})]},T.uid)),R.filter(T=>T.role==="customer").length===0&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"    "})]})]}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"     :"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"email",placeholder:"admin@example.com",value:Ur,onChange:T=>cc(T.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"  (6   )",value:ar,onChange:T=>bi(T.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:" ",value:Fr,onChange:T=>Ds(T.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Ni,onChange:T=>Ei(T.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),o.jsx("button",{onClick:gc,disabled:Go||!Ur.trim()||!ar.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:Go?o.jsxs(o.Fragment,{children:[o.jsx(gr,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ud,{className:"w-5 h-5"}),"  "]})}),o.jsx("p",{className:"text-xs text-orange-600 mt-2",children:" :        .     ."})]}),o.jsx("div",{className:"border-t pt-4 mt-4",children:o.jsx("p",{className:"text-xs text-gray-500",children:'         ""'})})]}),o.jsxs("div",{className:"space-y-4",children:[E.map(T=>o.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[o.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>jn(en===T.uid?null:T.uid),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:T.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:T.email})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(VN,{className:"w-4 h-4 text-green-600"}),o.jsxs("span",{className:"font-bold text-green-600",children:[T.walletBalance.toFixed(2)," ."]})]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[": ",T.totalEarnings.toFixed(2)," . | ",T.restaurantsCount," "]})]}),en===T.uid?o.jsx(iD,{className:"w-5 h-5 text-gray-400"}):o.jsx(tD,{className:"w-5 h-5 text-gray-400"})]})]})}),en===T.uid&&o.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[o.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["      (",T.restaurants.length,"):"]}),T.restaurants.length>0?o.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:T.restaurants.map($=>o.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:$.logoUrl?o.jsx("img",{src:$.logoUrl,alt:$.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm",children:$.name}),o.jsx("p",{className:"text-xs text-gray-500",children:$.city||" "})]})]},$.id))}):o.jsx("p",{className:"text-gray-500 text-sm",children:"    "}),o.jsx("div",{className:"mt-4 pt-3 border-t",children:o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[o.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-green-700",children:T.walletBalance.toFixed(2)}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-blue-700",children:T.totalEarnings.toFixed(2)}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-purple-700",children:v.filter($=>$.referredBy===T.uid).length}),o.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})})]})]},T.uid)),E.length===0&&o.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"   "})]})]}),s==="settings"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"  "}),L?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{x(!1),I(g)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:""}),o.jsx("button",{onClick:rh,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:" "})]}):o.jsx("button",{onClick:()=>x(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:" "})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),L?o.jsx("input",{type:"number",value:y.deliveryFee||0,onChange:T=>I({...y,deliveryFee:Number(T.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.deliveryFee||7," ."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),L?o.jsx("input",{type:"number",step:"0.1",value:y.platformFee||1,onChange:T=>I({...y,platformFee:Number(T.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.platformFee||1," ./"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),L?o.jsx("input",{type:"number",step:"0.05",value:y.adminCommissionRate||.75,onChange:T=>I({...y,adminCommissionRate:Number(T.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.adminCommissionRate||.75," ./"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   "}),L?o.jsx("input",{type:"number",value:y.minOrderAmount||0,onChange:T=>I({...y,minOrderAmount:Number(T.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.minOrderAmount||20," ."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),L?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"time",value:((ha=y.workingHours)==null?void 0:ha.open)||"09:00",onChange:T=>I({...y,workingHours:{...y.workingHours,open:T.target.value}}),className:"flex-1 border rounded-xl p-3"}),o.jsx("input",{type:"time",value:((fa=y.workingHours)==null?void 0:fa.close)||"23:00",onChange:T=>I({...y,workingHours:{...y.workingHours,close:T.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):o.jsxs("p",{className:"text-2xl font-bold",children:[((Li=g.workingHours)==null?void 0:Li.open)||"09:00"," - ",((Mi=g.workingHours)==null?void 0:Mi.close)||"23:00"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),L?o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:y.maintenanceMode||!1,onChange:T=>I({...y,maintenanceMode:T.target.checked}),className:"w-6 h-6"}),o.jsx("span",{className:"text-lg",children:y.maintenanceMode?"":""})]}):o.jsx("p",{className:`text-2xl font-bold ${g.maintenanceMode?"text-red-600":"text-green-600"}`,children:g.maintenanceMode?" ":" "})]})]})}),o.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[o.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"   (  = 1.75 .):"}),o.jsxs("div",{className:"text-sky-800 space-y-2",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:" :"})," ",g.platformFee||1," .   "]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:" :"})," ",g.adminCommissionRate||.75," .   "]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[o.jsx("p",{className:"font-bold mb-2",children:" :   5 "}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"    :"})]}),o.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[o.jsxs("li",{children:["  : 5  ",g.adminCommissionRate||.75," = ",o.jsxs("strong",{children:[(5*(g.adminCommissionRate||.75)).toFixed(2)," ."]})]}),o.jsxs("li",{children:["  : 5  ",g.platformFee||1," = ",o.jsxs("strong",{children:[(5*(g.platformFee||1)).toFixed(2)," ."]})]}),o.jsxs("li",{className:"text-green-700",children:[": ",o.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})]}),o.jsxs("p",{className:"mt-2",children:[" ",o.jsx("strong",{children:"    :"})]}),o.jsx("ul",{className:"mr-6 list-disc text-sm",children:o.jsxs("li",{children:["    : 5  1.75 = ",o.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})})]})]})]})]}),s==="tasks"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"   "}),o.jsxs("button",{onClick:()=>Ri(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(Dg,{className:"w-5 h-5"})," "]})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(T=>o.jsxs("button",{onClick:()=>Wn(T),className:`px-4 py-2 rounded-xl font-semibold transition ${Cn===T?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[T==="all"&&" ",T==="pending"&&"  ",T==="in_progress"&&"  ",T==="completed"&&" ",T==="cancelled"&&" "]},T))}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Sn.filter(T=>T.status==="pending").length}),o.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Sn.filter(T=>T.status==="in_progress").length}),o.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),o.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:Sn.filter(T=>T.status==="completed").length}),o.jsx("p",{className:"text-sm text-green-700",children:""})]}),o.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:Sn.filter(T=>T.status==="cancelled").length}),o.jsx("p",{className:"text-sm text-red-700",children:""})]})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:Sn.filter(T=>Cn==="all"||T.status===Cn).length===0?o.jsxs("div",{className:"p-8 text-center text-gray-500",children:[o.jsx("p",{className:"text-4xl mb-2",children:""}),o.jsxs("p",{children:["   ",Cn!=="all"&&"  "]})]}):o.jsx("div",{className:"divide-y",children:Sn.filter(T=>Cn==="all"||T.status===Cn).map(T=>{var B,ne,xe;const $=R.find(Ce=>Ce.uid===T.assignedTo);return o.jsx("div",{className:"p-4 hover:bg-gray-50",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${T.priority==="high"?"bg-red-100 text-red-700":T.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:T.priority==="high"?" ":T.priority==="medium"?" ":" "}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${T.status==="pending"?"bg-yellow-100 text-yellow-700":T.status==="in_progress"?"bg-blue-100 text-blue-700":T.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[T.status==="pending"&&"  ",T.status==="in_progress"&&"  ",T.status==="completed"&&" ",T.status==="cancelled"&&" "]})]}),o.jsx("h3",{className:"font-bold text-gray-800",children:T.title}),T.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:T.description}),o.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[o.jsxs("span",{children:[" ",($==null?void 0:$.name)||T.assignedToName||" "]}),T.dueDate&&o.jsxs("span",{children:[" ",new Date(T.dueDate).toLocaleDateString("ar-SA")]}),o.jsxs("span",{children:[" ",((xe=(ne=(B=T.createdAt)==null?void 0:B.toDate)==null?void 0:ne.call(B))==null?void 0:xe.toLocaleDateString("ar-SA"))||" "]})]}),T.notes&&o.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:[" ",T.notes]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[T.status==="pending"&&o.jsx("button",{onClick:async()=>{try{await Qe(Z(H,"tasks",T.id),{status:"in_progress",updatedAt:pe()}),e.success("  "),et()}catch{e.error("   ")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:" ",children:""}),(T.status==="pending"||T.status==="in_progress")&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:async()=>{try{await Qe(Z(H,"tasks",T.id),{status:"completed",completedAt:pe(),updatedAt:pe()}),e.success("  "),et()}catch{e.error("   ")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:" ",children:""}),o.jsx("button",{onClick:async()=>{if(await n.confirm("    ",{dangerous:!0}))try{await Qe(Z(H,"tasks",T.id),{status:"cancelled",updatedAt:pe()}),e.success("  "),et()}catch{e.error("   ")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]}),o.jsx("button",{onClick:async()=>{if(await n.confirm("     ",{dangerous:!0}))try{await as(Z(H,"tasks",T.id)),e.success("  "),et()}catch{e.error("   ")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]})]})},T.id)})})}),Ls&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"   "}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),o.jsx("input",{type:"text",value:at,onChange:T=>Ai(T.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:":    "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),o.jsx("textarea",{value:zr,onChange:T=>cr(T.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:" ..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),o.jsxs("select",{value:Pi,onChange:T=>sa(T.target.value),className:"w-full border rounded-xl px-4 py-2",children:[o.jsx("option",{value:"",children:"--   --"}),R.filter(T=>T.role==="admin").map(T=>o.jsx("option",{value:T.uid,children:T.name||T.email},T.uid))]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),o.jsxs("select",{value:ur,onChange:T=>ia(T.target.value),className:"w-full border rounded-xl px-4 py-2",children:[o.jsx("option",{value:"low",children:" "}),o.jsx("option",{value:"medium",children:" "}),o.jsx("option",{value:"high",children:" "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:" "}),o.jsx("input",{type:"date",value:pc,onChange:T=>qr(T.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:()=>{Ri(!1),Ai(""),cr(""),sa(""),ia("medium"),qr("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:""}),o.jsx("button",{onClick:async()=>{if(!at.trim()||!Pi){e.error("   ");return}Di(!0);try{const T=R.find($=>$.uid===Pi);await Wo(he(H,"tasks"),{title:at.trim(),description:zr.trim(),assignedTo:Pi,assignedToName:(T==null?void 0:T.name)||(T==null?void 0:T.email)||"",status:"pending",priority:ur,dueDate:pc||null,createdBy:t==null?void 0:t.uid,createdAt:pe(),updatedAt:pe(),completedAt:null,notes:""}),e.success("   "),Ri(!1),Ai(""),cr(""),sa(""),ia("medium"),qr(""),et()}catch(T){console.error(T),e.error("   ")}finally{Di(!1)}},disabled:oa,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:oa?" ...":" "})]})]})})]}),s==="tools"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold",children:"  "}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("button",{onClick:()=>{const T={exportDate:new Date().toISOString(),users:R.length,restaurants:S.length,orders:v.length,admins:E.length,stats:f,settings:g},$=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),B=URL.createObjectURL($),ne=document.createElement("a");ne.href=B,ne.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,ne.click(),e.success("   ")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:"  JSON"})]})]}),o.jsxs("button",{onClick:()=>{const T=[[" ","","","",""].join(","),...v.map(xe=>{var Ce,tt,ht;return[xe.id.slice(-8),xe.restaurantName||" ",xe.total,xe.status,((ht=(tt=(Ce=xe.createdAt)==null?void 0:Ce.toDate)==null?void 0:tt.call(Ce))==null?void 0:ht.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),$=new Blob(["\uFEFF"+T],{type:"text/csv;charset=utf-8"}),B=URL.createObjectURL($),ne=document.createElement("a");ne.href=B,ne.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,ne.click(),e.success("   ")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]}),o.jsxs("button",{onClick:()=>{const T=[["","","",""].join(","),...R.map(xe=>[xe.name||" ",xe.email,xe.role,xe.phone||""].join(","))].join(`
`),$=new Blob(["\uFEFF"+T],{type:"text/csv;charset=utf-8"}),B=URL.createObjectURL($),ne=document.createElement("a");ne.href=B,ne.download=`users-${new Date().toISOString().split("T")[0]}.csv`,ne.click(),e.success("   ")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("button",{onClick:async()=>{const T=v.filter(B=>B.status==="pending");if(T.length===0){e.info("   ");return}if(await n.confirm(`  ${T.length}  .   `,{title:"  ",dangerous:!0}))try{await Promise.all(T.map(B=>Qe(Z(H,"orders",B.id),{status:"cancelled",updatedAt:pe()}))),e.success(`  ${T.length} `),et()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:"  "}),o.jsxs("p",{className:"text-xs opacity-75",children:[v.filter(T=>T.status==="pending").length,"  "]})]})]}),o.jsxs("button",{onClick:async()=>{const T=new Date;T.setMonth(T.getMonth()-3);const $=v.filter(ne=>{var Ce,tt;return(((tt=(Ce=ne.createdAt)==null?void 0:Ce.toDate)==null?void 0:tt.call(Ce))||new Date)<T&&(ne.status==="delivered"||ne.status==="cancelled")});if($.length===0){e.info("   ");return}if(await n.confirm(`  ${$.length}   (  3 ).   `,{title:"  ",dangerous:!0}))try{await Promise.all($.map(ne=>as(Z(H,"orders",ne.id)))),e.success(`  ${$.length}  `),et()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:"  "}),o.jsx("p",{className:"text-xs opacity-75",children:"   3 "})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Firestore"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Authentication"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Storage"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${xn.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:"Project ID"}),o.jsx("p",{className:"font-mono",children:xn.projectId})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),o.jsx("p",{className:"font-mono",children:xn.storageBucket})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:" "}),o.jsx("p",{className:"font-bold",children:g.appVersion||"1.0.0"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:" "}),o.jsx("p",{className:`font-bold ${g.maintenanceMode?"text-red-600":"text-green-600"}`,children:g.maintenanceMode?" ":" "})]})]})]})]}),s==="licenses"&&o.jsx(i5,{restaurants:S,onUpdate:ca,toast:e,dialog:n}),o.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:o.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[o.jsxs("span",{children:[" ",t==null?void 0:t.email]}),o.jsxs("span",{children:[" ",t==null?void 0:t.uid.slice(0,12),"..."]}),o.jsxs("span",{children:[" ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},i5=({restaurants:t,onUpdate:e,toast:n,dialog:r})=>{const[s,i]=j.useState("pending"),[a,c]=j.useState({}),[u,d]=j.useState(null),f=t.filter(k=>k.commercialLicenseUrl||k.healthCertificateUrl),m=f.filter(k=>s==="all"?!0:k.licenseStatus===s||!k.licenseStatus&&s==="pending"),g={all:f.length,pending:f.filter(k=>!k.licenseStatus||k.licenseStatus==="pending").length,approved:f.filter(k=>k.licenseStatus==="approved").length,rejected:f.filter(k=>k.licenseStatus==="rejected").length},_=async(k,S)=>{const b=a[k]||"";if(S==="rejected"&&!b.trim()){n.warning("   ");return}const v=S==="approved"?" ":"";if(await r.confirm(`    ${v}   `,{title:`${v} `})){d(k);try{await Qe(Z(H,"restaurants",k),{licenseStatus:S,licenseNotes:S==="rejected"?b:"",updatedAt:pe()}),n.success(S==="approved"?"    ":"  "),c(E=>({...E,[k]:""})),e()}catch(E){n.error(" : "+(E.message||"  "))}finally{d(null)}}},R=k=>{switch(k){case"approved":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[o.jsx(Vl,{className:"w-3 h-3"})," "]});case"rejected":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:[o.jsx(jm,{className:"w-3 h-3"})," "]});default:return o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[o.jsx(Pg,{className:"w-3 h-3"}),"  "]})}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Jx,{className:"w-6 h-6 text-sky-500"})," "]}),o.jsx("div",{className:"flex gap-2",children:["pending","approved","rejected","all"].map(k=>o.jsxs("button",{onClick:()=>i(k),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${s===k?"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[k==="all"&&` (${g.all})`,k==="pending"&&`  (${g.pending})`,k==="approved"&&` (${g.approved})`,k==="rejected"&&` (${g.rejected})`]},k))})]}),m.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-400",children:[o.jsx(Jx,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),o.jsxs("p",{children:["   ",s==="pending"?" ":s==="approved"?" ":s==="rejected"?"":""]})]}):o.jsx("div",{className:"grid gap-4",children:m.map(k=>o.jsxs("div",{className:"bg-white border rounded-2xl p-5 shadow-sm",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:k.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[k.city||" ","  ",k.email||" "]})]}),R(k.licenseStatus)]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[k.commercialLicenseUrl&&o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"  "}),o.jsxs("a",{href:k.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[o.jsx(Yx,{className:"w-4 h-4"})," "]})]}),k.healthCertificateUrl&&o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"  "}),o.jsxs("a",{href:k.healthCertificateUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[o.jsx(Yx,{className:"w-4 h-4"})," "]})]})]}),k.licenseStatus==="rejected"&&k.licenseNotes&&o.jsxs("div",{className:"bg-red-50 text-red-700 rounded-xl p-3 mb-4 text-sm",children:[o.jsx("strong",{children:" :"})," ",k.licenseNotes]}),k.licenseStatus!=="approved"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("textarea",{placeholder:" ( )...",value:a[k.id]||"",onChange:S=>c(b=>({...b,[k.id]:S.target.value})),className:"w-full border rounded-xl p-3 text-sm resize-none h-20"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>_(k.id,"approved"),disabled:u===k.id,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[o.jsx(Vl,{className:"w-5 h-5"}),""]}),o.jsxs("button",{onClick:()=>_(k.id,"rejected"),disabled:u===k.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[o.jsx(jm,{className:"w-5 h-5"}),""]})]})]}),k.licenseStatus==="approved"&&o.jsx("button",{onClick:()=>_(k.id,"rejected"),disabled:u===k.id,className:"w-full flex items-center justify-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2.5 rounded-xl font-semibold transition",children:" "})]},k.id))})]})},Ht=({children:t})=>{const{user:e,loading:n}=xt();return n?o.jsx("div",{className:"p-8 text-center",children:" ..."}):e?o.jsx(o.Fragment,{children:t}):o.jsx(Cp,{to:"/login",replace:!0})},o5=()=>{var c;const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null);j.useEffect(()=>{(async()=>{try{i(null);const u=$t(he(H,"orders"),Ts("createdAt","desc"),Ng(10)),f=(await Ge(u)).docs.map(m=>{var _,R,k,S,b,v;const g=m.data();return{id:m.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((R=(_=g==null?void 0:g.items)==null?void 0:_[0])==null?void 0:R.ownerId)??null,customerId:g.customerId??null,createdAtISO:((v=(b=(S=(k=g.createdAt)==null?void 0:k.toDate)==null?void 0:S.call(k))==null?void 0:b.toISOString)==null?void 0:v.call(b))??null}});e(f)}catch(u){if(String((u==null?void 0:u.message)||"").includes("index"))try{const f=(await Ge(he(H,"orders"))).docs.map(m=>{var _,R,k,S,b,v;const g=m.data();return{id:m.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((R=(_=g==null?void 0:g.items)==null?void 0:_[0])==null?void 0:R.ownerId)??null,customerId:g.customerId??null,createdAtISO:((v=(b=(S=(k=g.createdAt)==null?void 0:k.toDate)==null?void 0:S.call(k))==null?void 0:b.toISOString)==null?void 0:v.call(b))??null}});e(f),i("     createdAt     .")}catch(d){i("     : "+((d==null?void 0:d.message)||d))}else i("  : "+((u==null?void 0:u.message)||u))}finally{r(!1)}})()},[]);const a=(c=an.options)==null?void 0:c.projectId;return o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),o.jsxs("div",{className:"text-sm",children:["ProjectId: ",o.jsx("b",{children:String(a)})]}),s&&o.jsx("div",{className:"text-red-600 text-sm",children:s}),n&&o.jsx("div",{children:" Loading"}),!n&&t.length===0&&o.jsxs("div",{className:"text-gray-600",children:["     collection: ",o.jsx("code",{children:"orders"}),"   ."]}),t.map(u=>o.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[o.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",u.id]}),o.jsxs("div",{children:["restaurantId: ",o.jsx("b",{children:String(u.restaurantId)})]}),o.jsxs("div",{children:["items[0].ownerId: ",o.jsx("b",{children:String(u.firstItemOwnerId)})]}),o.jsxs("div",{children:["customerId: ",o.jsx("b",{children:String(u.customerId)})]}),o.jsxs("div",{children:["createdAt: ",o.jsx("b",{children:u.createdAtISO||""})]})]},u.id))]})};function a5(){return o.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[o.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[o.jsx(TO,{}),o.jsx(wO,{})]}),o.jsx("div",{className:"h-[100px] sm:h-[120px]"}),o.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:o.jsxs(pI,{children:[o.jsx(ke,{path:"/",element:o.jsx(IO,{})}),o.jsx(ke,{path:"/restaurants",element:o.jsx(kO,{})}),o.jsx(ke,{path:"/menu",element:o.jsx(AO,{})}),o.jsx(ke,{path:"/cart",element:o.jsx(PO,{})}),o.jsx(ke,{path:"/login",element:o.jsx(DO,{})}),o.jsx(ke,{path:"/customer-login",element:o.jsx(LO,{})}),o.jsx(ke,{path:"/register",element:o.jsx(OO,{})}),o.jsx(ke,{path:"/privacy-policy",element:o.jsx(MO,{})}),o.jsx(ke,{path:"/account-deleted",element:o.jsx(VO,{})}),o.jsx(ke,{path:"/checkout",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["customer","admin"],children:o.jsx(BO,{})})})}),o.jsx(ke,{path:"/orders",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["customer","admin"],children:o.jsx(zO,{})})})}),o.jsx(ke,{path:"/profile",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["customer","courier","owner","admin","developer"],children:o.jsx(qO,{})})})}),o.jsx(ke,{path:"/owner",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["owner"],children:o.jsx(HO,{})})})}),o.jsx(ke,{path:"/owner/menu",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["owner"],children:o.jsx(GO,{})})})}),o.jsx(ke,{path:"/owner/orders",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["owner"],children:o.jsx(XO,{})})})}),o.jsx(ke,{path:"/owner/edit",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["owner"],children:o.jsx(YO,{})})})}),o.jsx(ke,{path:"/owner/courier-requests",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["owner"],children:o.jsx(JO,{})})})}),o.jsx(ke,{path:"/courier",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["courier"],children:o.jsx(ZO,{})})})}),o.jsx(ke,{path:"/courier/hiring",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["courier"],children:o.jsx(e5,{})})})}),o.jsx(ke,{path:"/admin",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["admin","developer"],children:o.jsx(t5,{})})})}),o.jsx(ke,{path:"/admin/restaurants",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["admin","developer"],children:o.jsx(n5,{})})})}),o.jsx(ke,{path:"/admin/orders",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["admin","developer"],children:o.jsx(r5,{})})})}),o.jsx(ke,{path:"/developer",element:o.jsx(Ht,{children:o.jsx(Ue,{allow:["developer","admin"],children:o.jsx(s5,{})})})}),o.jsx(ke,{path:"/__debug_orders",element:o.jsx(o5,{})}),o.jsx(ke,{path:"*",element:o.jsx(Cp,{to:"/",replace:!0})})]})}),o.jsx(EO,{})]})}j.createContext(void 0);const l5=({children:t})=>o.jsx(o.Fragment,{children:t});rf.createRoot(document.getElementById("root")).render(o.jsx(wv.StrictMode,{children:o.jsx(NI,{children:o.jsx(jO,{children:o.jsx(bO,{children:o.jsx(F4,{children:o.jsxs(l5,{children:["   ",o.jsx(a5,{})]})})})})})}));
