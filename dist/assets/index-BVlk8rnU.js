function I1(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function S1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hv={exports:{}},Md={},Wv={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl=Symbol.for("react.element"),C1=Symbol.for("react.portal"),A1=Symbol.for("react.fragment"),R1=Symbol.for("react.strict_mode"),P1=Symbol.for("react.profiler"),D1=Symbol.for("react.provider"),L1=Symbol.for("react.context"),O1=Symbol.for("react.forward_ref"),M1=Symbol.for("react.suspense"),V1=Symbol.for("react.memo"),F1=Symbol.for("react.lazy"),Hx=Symbol.iterator;function U1(t){return t===null||typeof t!="object"?null:(t=Hx&&t[Hx]||t["@@iterator"],typeof t=="function"?t:null)}var Kv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gv=Object.assign,Qv={};function Ja(t,e,n){this.props=t,this.context=e,this.refs=Qv,this.updater=n||Kv}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xv(){}Xv.prototype=Ja.prototype;function hp(t,e,n){this.props=t,this.context=e,this.refs=Qv,this.updater=n||Kv}var fp=hp.prototype=new Xv;fp.constructor=hp;Gv(fp,Ja.prototype);fp.isPureReactComponent=!0;var Wx=Array.isArray,Yv=Object.prototype.hasOwnProperty,mp={current:null},Jv={key:!0,ref:!0,__self:!0,__source:!0};function Zv(t,e,n){var s,i={},a=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Yv.call(e,s)&&!Jv.hasOwnProperty(s)&&(i[s]=e[s]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(s in c=t.defaultProps,c)i[s]===void 0&&(i[s]=c[s]);return{$$typeof:Zl,type:t,key:a,ref:o,props:i,_owner:mp.current}}function $1(t,e){return{$$typeof:Zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zl}function B1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Kx=/\/+/g;function Fh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?B1(""+t.key):e.toString(36)}function Nu(t,e,n,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zl:case C1:o=!0}}if(o)return o=t,i=i(o),t=s===""?"."+Fh(o,0):s,Wx(i)?(n="",t!=null&&(n=t.replace(Kx,"$&/")+"/"),Nu(i,e,n,"",function(d){return d})):i!=null&&(pp(i)&&(i=$1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Kx,"$&/")+"/")+t)),e.push(i)),1;if(o=0,s=s===""?".":s+":",Wx(t))for(var c=0;c<t.length;c++){a=t[c];var u=s+Fh(a,c);o+=Nu(a,e,n,u,i)}else if(u=U1(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=s+Fh(a,c++),o+=Nu(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xc(t,e,n){if(t==null)return t;var s=[],i=0;return Nu(t,s,"","",function(a){return e.call(n,a,i++)}),s}function z1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},ju={transition:null},q1={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:ju,ReactCurrentOwner:mp};function ew(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Xc,forEach:function(t,e,n){Xc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xc(t,function(){e++}),e},toArray:function(t){return Xc(t,function(e){return e})||[]},only:function(t){if(!pp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Ja;xe.Fragment=A1;xe.Profiler=P1;xe.PureComponent=hp;xe.StrictMode=R1;xe.Suspense=M1;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q1;xe.act=ew;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Gv({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=mp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Yv.call(e,u)&&!Jv.hasOwnProperty(u)&&(s[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}return{$$typeof:Zl,type:t.type,key:i,ref:a,props:s,_owner:o}};xe.createContext=function(t){return t={$$typeof:L1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:D1,_context:t},t.Consumer=t};xe.createElement=Zv;xe.createFactory=function(t){var e=Zv.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:O1,render:t}};xe.isValidElement=pp;xe.lazy=function(t){return{$$typeof:F1,_payload:{_status:-1,_result:t},_init:z1}};xe.memo=function(t,e){return{$$typeof:V1,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=ju.transition;ju.transition={};try{t()}finally{ju.transition=e}};xe.unstable_act=ew;xe.useCallback=function(t,e){return Gt.current.useCallback(t,e)};xe.useContext=function(t){return Gt.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};xe.useEffect=function(t,e){return Gt.current.useEffect(t,e)};xe.useId=function(){return Gt.current.useId()};xe.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return Gt.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};xe.useRef=function(t){return Gt.current.useRef(t)};xe.useState=function(t){return Gt.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return Gt.current.useTransition()};xe.version="18.3.1";Wv.exports=xe;var I=Wv.exports;const tw=S1(I),H1=I1({__proto__:null,default:tw},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1=I,K1=Symbol.for("react.element"),G1=Symbol.for("react.fragment"),Q1=Object.prototype.hasOwnProperty,X1=W1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y1={key:!0,ref:!0,__self:!0,__source:!0};function nw(t,e,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)Q1.call(e,s)&&!Y1.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:K1,type:t,key:a,ref:o,props:i,_owner:X1.current}}Md.Fragment=G1;Md.jsx=nw;Md.jsxs=nw;Hv.exports=Md;var r=Hv.exports,Vf={},sw={exports:{}},jn={},rw={exports:{}},iw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,X){var se=F.length;F.push(X);e:for(;0<se;){var be=se-1>>>1,ye=F[be];if(0<i(ye,X))F[be]=X,F[se]=ye,se=be;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var X=F[0],se=F.pop();if(se!==X){F[0]=se;e:for(var be=0,ye=F.length,Le=ye>>>1;be<Le;){var At=2*(be+1)-1,zn=F[At],on=At+1,ln=F[on];if(0>i(zn,se))on<ye&&0>i(ln,zn)?(F[be]=ln,F[on]=se,be=on):(F[be]=zn,F[At]=se,be=At);else if(on<ye&&0>i(ln,se))F[be]=ln,F[on]=se,be=on;else break e}}return X}function i(F,X){var se=F.sortIndex-X.sortIndex;return se!==0?se:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,m=null,p=3,v=!1,_=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(F){for(var X=n(d);X!==null;){if(X.callback===null)s(d);else if(X.startTime<=F)s(d),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(d)}}function j(F){if(R=!1,y(F),!_)if(n(u)!==null)_=!0,$(C);else{var X=n(d);X!==null&&B(j,X.startTime-F)}}function C(F,X){_=!1,R&&(R=!1,b(x),x=-1),v=!0;var se=p;try{for(y(X),m=n(u);m!==null&&(!(m.expirationTime>X)||F&&!P());){var be=m.callback;if(typeof be=="function"){m.callback=null,p=m.priorityLevel;var ye=be(m.expirationTime<=X);X=t.unstable_now(),typeof ye=="function"?m.callback=ye:m===n(u)&&s(u),y(X)}else s(u);m=n(u)}if(m!==null)var Le=!0;else{var At=n(d);At!==null&&B(j,At.startTime-X),Le=!1}return Le}finally{m=null,p=se,v=!1}}var O=!1,N=null,x=-1,E=5,T=-1;function P(){return!(t.unstable_now()-T<E)}function L(){if(N!==null){var F=t.unstable_now();T=F;var X=!0;try{X=N(!0,F)}finally{X?D():(O=!1,N=null)}}else O=!1}var D;if(typeof w=="function")D=function(){w(L)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,V=ae.port2;ae.port1.onmessage=L,D=function(){V.postMessage(null)}}else D=function(){k(L,0)};function $(F){N=F,O||(O=!0,D())}function B(F,X){x=k(function(){F(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,$(C))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var se=p;p=X;try{return F()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var se=p;p=F;try{return X()}finally{p=se}},t.unstable_scheduleCallback=function(F,X,se){var be=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?be+se:be):se=be,F){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=se+ye,F={id:h++,callback:X,priorityLevel:F,startTime:se,expirationTime:ye,sortIndex:-1},se>be?(F.sortIndex=se,e(d,F),n(u)===null&&F===n(d)&&(R?(b(x),x=-1):R=!0,B(j,se-be))):(F.sortIndex=ye,e(u,F),_||v||(_=!0,$(C))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var X=p;return function(){var se=p;p=X;try{return F.apply(this,arguments)}finally{p=se}}}})(iw);rw.exports=iw;var J1=rw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1=I,bn=J1;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aw=new Set,wl={};function Vi(t,e){Oa(t,e),Oa(t+"Capture",e)}function Oa(t,e){for(wl[t]=e,t=0;t<e.length;t++)aw.add(e[t])}var Ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ff=Object.prototype.hasOwnProperty,e2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gx={},Qx={};function t2(t){return Ff.call(Qx,t)?!0:Ff.call(Gx,t)?!1:e2.test(t)?Qx[t]=!0:(Gx[t]=!0,!1)}function n2(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function s2(t,e,n,s){if(e===null||typeof e>"u"||n2(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,s,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var gp=/[\-:]([a-z])/g;function xp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gp,xp);Ct[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gp,xp);Ct[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gp,xp);Ct[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yp(t,e,n,s){var i=Ct.hasOwnProperty(e)?Ct[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(s2(e,n,i,s)&&(n=null),s||i===null?t2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,s=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var nr=Z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yc=Symbol.for("react.element"),ha=Symbol.for("react.portal"),fa=Symbol.for("react.fragment"),vp=Symbol.for("react.strict_mode"),Uf=Symbol.for("react.profiler"),ow=Symbol.for("react.provider"),lw=Symbol.for("react.context"),wp=Symbol.for("react.forward_ref"),$f=Symbol.for("react.suspense"),Bf=Symbol.for("react.suspense_list"),_p=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),cw=Symbol.for("react.offscreen"),Xx=Symbol.iterator;function Lo(t){return t===null||typeof t!="object"?null:(t=Xx&&t[Xx]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,Uh;function Wo(t){if(Uh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uh=e&&e[1]||""}return`
`+Uh+t}var $h=!1;function Bh(t,e){if(!t||$h)return"";$h=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{$h=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wo(t):""}function r2(t){switch(t.tag){case 5:return Wo(t.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return t=Bh(t.type,!1),t;case 11:return t=Bh(t.type.render,!1),t;case 1:return t=Bh(t.type,!0),t;default:return""}}function zf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fa:return"Fragment";case ha:return"Portal";case Uf:return"Profiler";case vp:return"StrictMode";case $f:return"Suspense";case Bf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lw:return(t.displayName||"Context")+".Consumer";case ow:return(t._context.displayName||"Context")+".Provider";case wp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _p:return e=t.displayName||null,e!==null?e:zf(t.type)||"Memo";case pr:e=t._payload,t=t._init;try{return zf(t(e))}catch{}}return null}function i2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zf(e);case 8:return e===vp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function a2(t){var e=uw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jc(t){t._valueTracker||(t._valueTracker=a2(t))}function dw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=uw(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Hu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qf(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yx(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hw(t,e){e=e.checked,e!=null&&yp(t,"checked",e,!1)}function Hf(t,e){hw(t,e);var n=Vr(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wf(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wf(t,e,n){(e!=="number"||Hu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ko=Array.isArray;function ka(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Kf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Ko(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function fw(t,e){var n=Vr(e.value),s=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function e0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zc,pw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zc=Zc||document.createElement("div"),Zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _l(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o2=["Webkit","ms","Moz","O"];Object.keys(nl).forEach(function(t){o2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nl[e]=nl[t]})});function gw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nl.hasOwnProperty(t)&&nl[t]?(""+e).trim():e+"px"}function xw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=gw(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}var l2=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qf(t,e){if(e){if(l2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Xf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yf=null;function bp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jf=null,Ta=null,Ia=null;function t0(t){if(t=nc(t)){if(typeof Jf!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Bd(e),Jf(t.stateNode,t.type,e))}}function yw(t){Ta?Ia?Ia.push(t):Ia=[t]:Ta=t}function vw(){if(Ta){var t=Ta,e=Ia;if(Ia=Ta=null,t0(t),e)for(t=0;t<e.length;t++)t0(e[t])}}function ww(t,e){return t(e)}function _w(){}var zh=!1;function bw(t,e,n){if(zh)return t(e,n);zh=!0;try{return ww(t,e,n)}finally{zh=!1,(Ta!==null||Ia!==null)&&(_w(),vw())}}function bl(t,e){var n=t.stateNode;if(n===null)return null;var s=Bd(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Zf=!1;if(Ks)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){Zf=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{Zf=!1}function c2(t,e,n,s,i,a,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var sl=!1,Wu=null,Ku=!1,em=null,u2={onError:function(t){sl=!0,Wu=t}};function d2(t,e,n,s,i,a,o,c,u){sl=!1,Wu=null,c2.apply(u2,arguments)}function h2(t,e,n,s,i,a,o,c,u){if(d2.apply(this,arguments),sl){if(sl){var d=Wu;sl=!1,Wu=null}else throw Error(G(198));Ku||(Ku=!0,em=d)}}function Fi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function n0(t){if(Fi(t)!==t)throw Error(G(188))}function f2(t){var e=t.alternate;if(!e){if(e=Fi(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return n0(i),t;if(a===s)return n0(i),e;a=a.sibling}throw Error(G(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,s=a;break}if(c===s){o=!0,s=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,s=i;break}if(c===s){o=!0,s=a,n=i;break}c=c.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==s)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function jw(t){return t=f2(t),t!==null?Ew(t):null}function Ew(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ew(t);if(e!==null)return e;t=t.sibling}return null}var kw=bn.unstable_scheduleCallback,s0=bn.unstable_cancelCallback,m2=bn.unstable_shouldYield,p2=bn.unstable_requestPaint,st=bn.unstable_now,g2=bn.unstable_getCurrentPriorityLevel,Np=bn.unstable_ImmediatePriority,Tw=bn.unstable_UserBlockingPriority,Gu=bn.unstable_NormalPriority,x2=bn.unstable_LowPriority,Iw=bn.unstable_IdlePriority,Vd=null,ps=null;function y2(t){if(ps&&typeof ps.onCommitFiberRoot=="function")try{ps.onCommitFiberRoot(Vd,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:_2,v2=Math.log,w2=Math.LN2;function _2(t){return t>>>=0,t===0?32:31-(v2(t)/w2|0)|0}var eu=64,tu=4194304;function Go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qu(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?s=Go(c):(a&=o,a!==0&&(s=Go(a)))}else o=n&~i,o!==0?s=Go(o):a!==0&&(s=Go(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Zn(e),i=1<<n,s|=t[n],e&=~i;return s}function b2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N2(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Zn(a),c=1<<o,u=i[o];u===-1?(!(c&n)||c&s)&&(i[o]=b2(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sw(){var t=eu;return eu<<=1,!(eu&4194240)&&(eu=64),t}function qh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ec(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function j2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zn(n),a=1<<i;e[i]=0,s[i]=-1,t[i]=-1,n&=~a}}function jp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Zn(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}var Ce=0;function Cw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Aw,Ep,Rw,Pw,Dw,nm=!1,nu=[],Tr=null,Ir=null,Sr=null,Nl=new Map,jl=new Map,xr=[],E2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r0(t,e){switch(t){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(e.pointerId)}}function Mo(t,e,n,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=nc(e),e!==null&&Ep(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function k2(t,e,n,s,i){switch(e){case"focusin":return Tr=Mo(Tr,t,e,n,s,i),!0;case"dragenter":return Ir=Mo(Ir,t,e,n,s,i),!0;case"mouseover":return Sr=Mo(Sr,t,e,n,s,i),!0;case"pointerover":var a=i.pointerId;return Nl.set(a,Mo(Nl.get(a)||null,t,e,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,jl.set(a,Mo(jl.get(a)||null,t,e,n,s,i)),!0}return!1}function Lw(t){var e=fi(t.target);if(e!==null){var n=Fi(e);if(n!==null){if(e=n.tag,e===13){if(e=Nw(n),e!==null){t.blockedOn=e,Dw(t.priority,function(){Rw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Eu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Yf=s,n.target.dispatchEvent(s),Yf=null}else return e=nc(n),e!==null&&Ep(e),t.blockedOn=n,!1;e.shift()}return!0}function i0(t,e,n){Eu(t)&&n.delete(e)}function T2(){nm=!1,Tr!==null&&Eu(Tr)&&(Tr=null),Ir!==null&&Eu(Ir)&&(Ir=null),Sr!==null&&Eu(Sr)&&(Sr=null),Nl.forEach(i0),jl.forEach(i0)}function Vo(t,e){t.blockedOn===e&&(t.blockedOn=null,nm||(nm=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,T2)))}function El(t){function e(i){return Vo(i,t)}if(0<nu.length){Vo(nu[0],t);for(var n=1;n<nu.length;n++){var s=nu[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Tr!==null&&Vo(Tr,t),Ir!==null&&Vo(Ir,t),Sr!==null&&Vo(Sr,t),Nl.forEach(e),jl.forEach(e),n=0;n<xr.length;n++)s=xr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)Lw(n),n.blockedOn===null&&xr.shift()}var Sa=nr.ReactCurrentBatchConfig,Xu=!0;function I2(t,e,n,s){var i=Ce,a=Sa.transition;Sa.transition=null;try{Ce=1,kp(t,e,n,s)}finally{Ce=i,Sa.transition=a}}function S2(t,e,n,s){var i=Ce,a=Sa.transition;Sa.transition=null;try{Ce=4,kp(t,e,n,s)}finally{Ce=i,Sa.transition=a}}function kp(t,e,n,s){if(Xu){var i=sm(t,e,n,s);if(i===null)ef(t,e,s,Yu,n),r0(t,s);else if(k2(i,t,e,n,s))s.stopPropagation();else if(r0(t,s),e&4&&-1<E2.indexOf(t)){for(;i!==null;){var a=nc(i);if(a!==null&&Aw(a),a=sm(t,e,n,s),a===null&&ef(t,e,s,Yu,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else ef(t,e,s,null,n)}}var Yu=null;function sm(t,e,n,s){if(Yu=null,t=bp(s),t=fi(t),t!==null)if(e=Fi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yu=t,null}function Ow(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g2()){case Np:return 1;case Tw:return 4;case Gu:case x2:return 16;case Iw:return 536870912;default:return 16}default:return 16}}var Nr=null,Tp=null,ku=null;function Mw(){if(ku)return ku;var t,e=Tp,n=e.length,s,i="value"in Nr?Nr.value:Nr.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===i[a-s];s++);return ku=i.slice(t,1<s?1-s:void 0)}function Tu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function su(){return!0}function a0(){return!1}function En(t){function e(n,s,i,a,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?su:a0,this.isPropagationStopped=a0,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),e}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ip=En(Za),tc=Xe({},Za,{view:0,detail:0}),C2=En(tc),Hh,Wh,Fo,Fd=Xe({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fo&&(Fo&&t.type==="mousemove"?(Hh=t.screenX-Fo.screenX,Wh=t.screenY-Fo.screenY):Wh=Hh=0,Fo=t),Hh)},movementY:function(t){return"movementY"in t?t.movementY:Wh}}),o0=En(Fd),A2=Xe({},Fd,{dataTransfer:0}),R2=En(A2),P2=Xe({},tc,{relatedTarget:0}),Kh=En(P2),D2=Xe({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),L2=En(D2),O2=Xe({},Za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),M2=En(O2),V2=Xe({},Za,{data:0}),l0=En(V2),F2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$2[t])?!!e[t]:!1}function Sp(){return B2}var z2=Xe({},tc,{key:function(t){if(t.key){var e=F2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?U2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sp,charCode:function(t){return t.type==="keypress"?Tu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),q2=En(z2),H2=Xe({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c0=En(H2),W2=Xe({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sp}),K2=En(W2),G2=Xe({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q2=En(G2),X2=Xe({},Fd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y2=En(X2),J2=[9,13,27,32],Cp=Ks&&"CompositionEvent"in window,rl=null;Ks&&"documentMode"in document&&(rl=document.documentMode);var Z2=Ks&&"TextEvent"in window&&!rl,Vw=Ks&&(!Cp||rl&&8<rl&&11>=rl),u0=" ",d0=!1;function Fw(t,e){switch(t){case"keyup":return J2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ma=!1;function eE(t,e){switch(t){case"compositionend":return Uw(e);case"keypress":return e.which!==32?null:(d0=!0,u0);case"textInput":return t=e.data,t===u0&&d0?null:t;default:return null}}function tE(t,e){if(ma)return t==="compositionend"||!Cp&&Fw(t,e)?(t=Mw(),ku=Tp=Nr=null,ma=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vw&&e.locale!=="ko"?null:e.data;default:return null}}var nE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nE[t.type]:e==="textarea"}function $w(t,e,n,s){yw(s),e=Ju(e,"onChange"),0<e.length&&(n=new Ip("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var il=null,kl=null;function sE(t){Jw(t,0)}function Ud(t){var e=xa(t);if(dw(e))return t}function rE(t,e){if(t==="change")return e}var Bw=!1;if(Ks){var Gh;if(Ks){var Qh="oninput"in document;if(!Qh){var f0=document.createElement("div");f0.setAttribute("oninput","return;"),Qh=typeof f0.oninput=="function"}Gh=Qh}else Gh=!1;Bw=Gh&&(!document.documentMode||9<document.documentMode)}function m0(){il&&(il.detachEvent("onpropertychange",zw),kl=il=null)}function zw(t){if(t.propertyName==="value"&&Ud(kl)){var e=[];$w(e,kl,t,bp(t)),bw(sE,e)}}function iE(t,e,n){t==="focusin"?(m0(),il=e,kl=n,il.attachEvent("onpropertychange",zw)):t==="focusout"&&m0()}function aE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ud(kl)}function oE(t,e){if(t==="click")return Ud(e)}function lE(t,e){if(t==="input"||t==="change")return Ud(e)}function cE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rs=typeof Object.is=="function"?Object.is:cE;function Tl(t,e){if(rs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Ff.call(e,i)||!rs(t[i],e[i]))return!1}return!0}function p0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g0(t,e){var n=p0(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=p0(n)}}function qw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hw(){for(var t=window,e=Hu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hu(t.document)}return e}function Ap(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uE(t){var e=Hw(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qw(n.ownerDocument.documentElement,n)){if(s!==null&&Ap(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!t.extend&&a>s&&(i=s,s=a,a=i),i=g0(n,a);var o=g0(n,s);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dE=Ks&&"documentMode"in document&&11>=document.documentMode,pa=null,rm=null,al=null,im=!1;function x0(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;im||pa==null||pa!==Hu(s)||(s=pa,"selectionStart"in s&&Ap(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),al&&Tl(al,s)||(al=s,s=Ju(rm,"onSelect"),0<s.length&&(e=new Ip("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=pa)))}function ru(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ga={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},Xh={},Ww={};Ks&&(Ww=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function $d(t){if(Xh[t])return Xh[t];if(!ga[t])return t;var e=ga[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ww)return Xh[t]=e[n];return t}var Kw=$d("animationend"),Gw=$d("animationiteration"),Qw=$d("animationstart"),Xw=$d("transitionend"),Yw=new Map,y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(t,e){Yw.set(t,e),Vi(e,[t])}for(var Yh=0;Yh<y0.length;Yh++){var Jh=y0[Yh],hE=Jh.toLowerCase(),fE=Jh[0].toUpperCase()+Jh.slice(1);Hr(hE,"on"+fE)}Hr(Kw,"onAnimationEnd");Hr(Gw,"onAnimationIteration");Hr(Qw,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(Xw,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function v0(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,h2(s,e,void 0,t),t.currentTarget=null}function Jw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var o=s.length-1;0<=o;o--){var c=s[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==a&&i.isPropagationStopped())break e;v0(i,c,d),a=u}else for(o=0;o<s.length;o++){if(c=s[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==a&&i.isPropagationStopped())break e;v0(i,c,d),a=u}}}if(Ku)throw t=em,Ku=!1,em=null,t}function Be(t,e){var n=e[um];n===void 0&&(n=e[um]=new Set);var s=t+"__bubble";n.has(s)||(Zw(e,t,2,!1),n.add(s))}function Zh(t,e,n){var s=0;e&&(s|=4),Zw(n,t,s,e)}var iu="_reactListening"+Math.random().toString(36).slice(2);function Il(t){if(!t[iu]){t[iu]=!0,aw.forEach(function(n){n!=="selectionchange"&&(mE.has(n)||Zh(n,!1,t),Zh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[iu]||(e[iu]=!0,Zh("selectionchange",!1,e))}}function Zw(t,e,n,s){switch(Ow(e)){case 1:var i=I2;break;case 4:i=S2;break;default:i=kp}n=i.bind(null,e,n,t),i=void 0,!Zf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ef(t,e,n,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var c=s.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=fi(c),o===null)return;if(u=o.tag,u===5||u===6){s=a=o;continue e}c=c.parentNode}}s=s.return}bw(function(){var d=a,h=bp(n),m=[];e:{var p=Yw.get(t);if(p!==void 0){var v=Ip,_=t;switch(t){case"keypress":if(Tu(n)===0)break e;case"keydown":case"keyup":v=q2;break;case"focusin":_="focus",v=Kh;break;case"focusout":_="blur",v=Kh;break;case"beforeblur":case"afterblur":v=Kh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=o0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=R2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=K2;break;case Kw:case Gw:case Qw:v=L2;break;case Xw:v=Q2;break;case"scroll":v=C2;break;case"wheel":v=Y2;break;case"copy":case"cut":case"paste":v=M2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=c0}var R=(e&4)!==0,k=!R&&t==="scroll",b=R?p!==null?p+"Capture":null:p;R=[];for(var w=d,y;w!==null;){y=w;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,b!==null&&(j=bl(w,b),j!=null&&R.push(Sl(w,j,y)))),k)break;w=w.return}0<R.length&&(p=new v(p,_,null,n,h),m.push({event:p,listeners:R}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==Yf&&(_=n.relatedTarget||n.fromElement)&&(fi(_)||_[Gs]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=d,_=_?fi(_):null,_!==null&&(k=Fi(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=d),v!==_)){if(R=o0,j="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(R=c0,j="onPointerLeave",b="onPointerEnter",w="pointer"),k=v==null?p:xa(v),y=_==null?p:xa(_),p=new R(j,w+"leave",v,n,h),p.target=k,p.relatedTarget=y,j=null,fi(h)===d&&(R=new R(b,w+"enter",_,n,h),R.target=y,R.relatedTarget=k,j=R),k=j,v&&_)t:{for(R=v,b=_,w=0,y=R;y;y=oa(y))w++;for(y=0,j=b;j;j=oa(j))y++;for(;0<w-y;)R=oa(R),w--;for(;0<y-w;)b=oa(b),y--;for(;w--;){if(R===b||b!==null&&R===b.alternate)break t;R=oa(R),b=oa(b)}R=null}else R=null;v!==null&&w0(m,p,v,R,!1),_!==null&&k!==null&&w0(m,k,_,R,!0)}}e:{if(p=d?xa(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var C=rE;else if(h0(p))if(Bw)C=lE;else{C=aE;var O=iE}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=oE);if(C&&(C=C(t,d))){$w(m,C,n,h);break e}O&&O(t,p,d),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Wf(p,"number",p.value)}switch(O=d?xa(d):window,t){case"focusin":(h0(O)||O.contentEditable==="true")&&(pa=O,rm=d,al=null);break;case"focusout":al=rm=pa=null;break;case"mousedown":im=!0;break;case"contextmenu":case"mouseup":case"dragend":im=!1,x0(m,n,h);break;case"selectionchange":if(dE)break;case"keydown":case"keyup":x0(m,n,h)}var N;if(Cp)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ma?Fw(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Vw&&n.locale!=="ko"&&(ma||x!=="onCompositionStart"?x==="onCompositionEnd"&&ma&&(N=Mw()):(Nr=h,Tp="value"in Nr?Nr.value:Nr.textContent,ma=!0)),O=Ju(d,x),0<O.length&&(x=new l0(x,t,null,n,h),m.push({event:x,listeners:O}),N?x.data=N:(N=Uw(n),N!==null&&(x.data=N)))),(N=Z2?eE(t,n):tE(t,n))&&(d=Ju(d,"onBeforeInput"),0<d.length&&(h=new l0("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=N))}Jw(m,e)})}function Sl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ju(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=bl(t,n),a!=null&&s.unshift(Sl(t,a,i)),a=bl(t,e),a!=null&&s.push(Sl(t,a,i))),t=t.return}return s}function oa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function w0(t,e,n,s,i){for(var a=e._reactName,o=[];n!==null&&n!==s;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===s)break;c.tag===5&&d!==null&&(c=d,i?(u=bl(n,a),u!=null&&o.unshift(Sl(n,u,c))):i||(u=bl(n,a),u!=null&&o.push(Sl(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pE=/\r\n?/g,gE=/\u0000|\uFFFD/g;function _0(t){return(typeof t=="string"?t:""+t).replace(pE,`
`).replace(gE,"")}function au(t,e,n){if(e=_0(e),_0(t)!==e&&n)throw Error(G(425))}function Zu(){}var am=null,om=null;function lm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cm=typeof setTimeout=="function"?setTimeout:void 0,xE=typeof clearTimeout=="function"?clearTimeout:void 0,b0=typeof Promise=="function"?Promise:void 0,yE=typeof queueMicrotask=="function"?queueMicrotask:typeof b0<"u"?function(t){return b0.resolve(null).then(t).catch(vE)}:cm;function vE(t){setTimeout(function(){throw t})}function tf(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){t.removeChild(i),El(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);El(e)}function Cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function N0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var eo=Math.random().toString(36).slice(2),fs="__reactFiber$"+eo,Cl="__reactProps$"+eo,Gs="__reactContainer$"+eo,um="__reactEvents$"+eo,wE="__reactListeners$"+eo,_E="__reactHandles$"+eo;function fi(t){var e=t[fs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gs]||n[fs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=N0(t);t!==null;){if(n=t[fs])return n;t=N0(t)}return e}t=n,n=t.parentNode}return null}function nc(t){return t=t[fs]||t[Gs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Bd(t){return t[Cl]||null}var dm=[],ya=-1;function Wr(t){return{current:t}}function qe(t){0>ya||(t.current=dm[ya],dm[ya]=null,ya--)}function Fe(t,e){ya++,dm[ya]=t.current,t.current=e}var Fr={},$t=Wr(Fr),tn=Wr(!1),ji=Fr;function Ma(t,e){var n=t.type.contextTypes;if(!n)return Fr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function nn(t){return t=t.childContextTypes,t!=null}function ed(){qe(tn),qe($t)}function j0(t,e,n){if($t.current!==Fr)throw Error(G(168));Fe($t,e),Fe(tn,n)}function e_(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(G(108,i2(t)||"Unknown",i));return Xe({},n,s)}function td(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,ji=$t.current,Fe($t,t),Fe(tn,tn.current),!0}function E0(t,e,n){var s=t.stateNode;if(!s)throw Error(G(169));n?(t=e_(t,e,ji),s.__reactInternalMemoizedMergedChildContext=t,qe(tn),qe($t),Fe($t,t)):qe(tn),Fe(tn,n)}var Ds=null,zd=!1,nf=!1;function t_(t){Ds===null?Ds=[t]:Ds.push(t)}function bE(t){zd=!0,t_(t)}function Kr(){if(!nf&&Ds!==null){nf=!0;var t=0,e=Ce;try{var n=Ds;for(Ce=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Ds=null,zd=!1}catch(i){throw Ds!==null&&(Ds=Ds.slice(t+1)),kw(Np,Kr),i}finally{Ce=e,nf=!1}}return null}var va=[],wa=0,nd=null,sd=0,Cn=[],An=0,Ei=null,Ms=1,Vs="";function ci(t,e){va[wa++]=sd,va[wa++]=nd,nd=t,sd=e}function n_(t,e,n){Cn[An++]=Ms,Cn[An++]=Vs,Cn[An++]=Ei,Ei=t;var s=Ms;t=Vs;var i=32-Zn(s)-1;s&=~(1<<i),n+=1;var a=32-Zn(e)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Ms=1<<32-Zn(e)+i|n<<i|s,Vs=a+t}else Ms=1<<a|n<<i|s,Vs=t}function Rp(t){t.return!==null&&(ci(t,1),n_(t,1,0))}function Pp(t){for(;t===nd;)nd=va[--wa],va[wa]=null,sd=va[--wa],va[wa]=null;for(;t===Ei;)Ei=Cn[--An],Cn[An]=null,Vs=Cn[--An],Cn[An]=null,Ms=Cn[--An],Cn[An]=null}var vn=null,gn=null,Ke=!1,Xn=null;function s_(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function k0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,gn=Cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ei!==null?{id:Ms,overflow:Vs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,gn=null,!0):!1;default:return!1}}function hm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fm(t){if(Ke){var e=gn;if(e){var n=e;if(!k0(t,e)){if(hm(t))throw Error(G(418));e=Cr(n.nextSibling);var s=vn;e&&k0(t,e)?s_(s,n):(t.flags=t.flags&-4097|2,Ke=!1,vn=t)}}else{if(hm(t))throw Error(G(418));t.flags=t.flags&-4097|2,Ke=!1,vn=t}}}function T0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function ou(t){if(t!==vn)return!1;if(!Ke)return T0(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lm(t.type,t.memoizedProps)),e&&(e=gn)){if(hm(t))throw r_(),Error(G(418));for(;e;)s_(t,e),e=Cr(e.nextSibling)}if(T0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=Cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=vn?Cr(t.stateNode.nextSibling):null;return!0}function r_(){for(var t=gn;t;)t=Cr(t.nextSibling)}function Va(){gn=vn=null,Ke=!1}function Dp(t){Xn===null?Xn=[t]:Xn.push(t)}var NE=nr.ReactCurrentBatchConfig;function Uo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var s=n.stateNode}if(!s)throw Error(G(147,t));var i=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function lu(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I0(t){var e=t._init;return e(t._payload)}function i_(t){function e(b,w){if(t){var y=b.deletions;y===null?(b.deletions=[w],b.flags|=16):y.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function s(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=Dr(b,w),b.index=0,b.sibling=null,b}function a(b,w,y){return b.index=y,t?(y=b.alternate,y!==null?(y=y.index,y<w?(b.flags|=2,w):y):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,w,y,j){return w===null||w.tag!==6?(w=uf(y,b.mode,j),w.return=b,w):(w=i(w,y),w.return=b,w)}function u(b,w,y,j){var C=y.type;return C===fa?h(b,w,y.props.children,j,y.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===pr&&I0(C)===w.type)?(j=i(w,y.props),j.ref=Uo(b,w,y),j.return=b,j):(j=Du(y.type,y.key,y.props,null,b.mode,j),j.ref=Uo(b,w,y),j.return=b,j)}function d(b,w,y,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==y.containerInfo||w.stateNode.implementation!==y.implementation?(w=df(y,b.mode,j),w.return=b,w):(w=i(w,y.children||[]),w.return=b,w)}function h(b,w,y,j,C){return w===null||w.tag!==7?(w=vi(y,b.mode,j,C),w.return=b,w):(w=i(w,y),w.return=b,w)}function m(b,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return w=uf(""+w,b.mode,y),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yc:return y=Du(w.type,w.key,w.props,null,b.mode,y),y.ref=Uo(b,null,w),y.return=b,y;case ha:return w=df(w,b.mode,y),w.return=b,w;case pr:var j=w._init;return m(b,j(w._payload),y)}if(Ko(w)||Lo(w))return w=vi(w,b.mode,y,null),w.return=b,w;lu(b,w)}return null}function p(b,w,y,j){var C=w!==null?w.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:c(b,w,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yc:return y.key===C?u(b,w,y,j):null;case ha:return y.key===C?d(b,w,y,j):null;case pr:return C=y._init,p(b,w,C(y._payload),j)}if(Ko(y)||Lo(y))return C!==null?null:h(b,w,y,j,null);lu(b,y)}return null}function v(b,w,y,j,C){if(typeof j=="string"&&j!==""||typeof j=="number")return b=b.get(y)||null,c(w,b,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Yc:return b=b.get(j.key===null?y:j.key)||null,u(w,b,j,C);case ha:return b=b.get(j.key===null?y:j.key)||null,d(w,b,j,C);case pr:var O=j._init;return v(b,w,y,O(j._payload),C)}if(Ko(j)||Lo(j))return b=b.get(y)||null,h(w,b,j,C,null);lu(w,j)}return null}function _(b,w,y,j){for(var C=null,O=null,N=w,x=w=0,E=null;N!==null&&x<y.length;x++){N.index>x?(E=N,N=null):E=N.sibling;var T=p(b,N,y[x],j);if(T===null){N===null&&(N=E);break}t&&N&&T.alternate===null&&e(b,N),w=a(T,w,x),O===null?C=T:O.sibling=T,O=T,N=E}if(x===y.length)return n(b,N),Ke&&ci(b,x),C;if(N===null){for(;x<y.length;x++)N=m(b,y[x],j),N!==null&&(w=a(N,w,x),O===null?C=N:O.sibling=N,O=N);return Ke&&ci(b,x),C}for(N=s(b,N);x<y.length;x++)E=v(N,b,x,y[x],j),E!==null&&(t&&E.alternate!==null&&N.delete(E.key===null?x:E.key),w=a(E,w,x),O===null?C=E:O.sibling=E,O=E);return t&&N.forEach(function(P){return e(b,P)}),Ke&&ci(b,x),C}function R(b,w,y,j){var C=Lo(y);if(typeof C!="function")throw Error(G(150));if(y=C.call(y),y==null)throw Error(G(151));for(var O=C=null,N=w,x=w=0,E=null,T=y.next();N!==null&&!T.done;x++,T=y.next()){N.index>x?(E=N,N=null):E=N.sibling;var P=p(b,N,T.value,j);if(P===null){N===null&&(N=E);break}t&&N&&P.alternate===null&&e(b,N),w=a(P,w,x),O===null?C=P:O.sibling=P,O=P,N=E}if(T.done)return n(b,N),Ke&&ci(b,x),C;if(N===null){for(;!T.done;x++,T=y.next())T=m(b,T.value,j),T!==null&&(w=a(T,w,x),O===null?C=T:O.sibling=T,O=T);return Ke&&ci(b,x),C}for(N=s(b,N);!T.done;x++,T=y.next())T=v(N,b,x,T.value,j),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?x:T.key),w=a(T,w,x),O===null?C=T:O.sibling=T,O=T);return t&&N.forEach(function(L){return e(b,L)}),Ke&&ci(b,x),C}function k(b,w,y,j){if(typeof y=="object"&&y!==null&&y.type===fa&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Yc:e:{for(var C=y.key,O=w;O!==null;){if(O.key===C){if(C=y.type,C===fa){if(O.tag===7){n(b,O.sibling),w=i(O,y.props.children),w.return=b,b=w;break e}}else if(O.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===pr&&I0(C)===O.type){n(b,O.sibling),w=i(O,y.props),w.ref=Uo(b,O,y),w.return=b,b=w;break e}n(b,O);break}else e(b,O);O=O.sibling}y.type===fa?(w=vi(y.props.children,b.mode,j,y.key),w.return=b,b=w):(j=Du(y.type,y.key,y.props,null,b.mode,j),j.ref=Uo(b,w,y),j.return=b,b=j)}return o(b);case ha:e:{for(O=y.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===y.containerInfo&&w.stateNode.implementation===y.implementation){n(b,w.sibling),w=i(w,y.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=df(y,b.mode,j),w.return=b,b=w}return o(b);case pr:return O=y._init,k(b,w,O(y._payload),j)}if(Ko(y))return _(b,w,y,j);if(Lo(y))return R(b,w,y,j);lu(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,w!==null&&w.tag===6?(n(b,w.sibling),w=i(w,y),w.return=b,b=w):(n(b,w),w=uf(y,b.mode,j),w.return=b,b=w),o(b)):n(b,w)}return k}var Fa=i_(!0),a_=i_(!1),rd=Wr(null),id=null,_a=null,Lp=null;function Op(){Lp=_a=id=null}function Mp(t){var e=rd.current;qe(rd),t._currentValue=e}function mm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Ca(t,e){id=t,Lp=_a=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(Lp!==t)if(t={context:t,memoizedValue:e,next:null},_a===null){if(id===null)throw Error(G(308));_a=t,id.dependencies={lanes:0,firstContext:t}}else _a=_a.next=t;return e}var mi=null;function Vp(t){mi===null?mi=[t]:mi.push(t)}function o_(t,e,n,s){var i=e.interleaved;return i===null?(n.next=n,Vp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qs(t,s)}function Qs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gr=!1;function Fp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ke&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Qs(t,n)}return i=s.interleaved,i===null?(e.next=e,Vp(s)):(e.next=i.next,i.next=e),s.interleaved=e,Qs(t,n)}function Iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,jp(t,n)}}function S0(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ad(t,e,n,s){var i=t.updateQueue;gr=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=u))}if(a!==null){var m=i.baseState;o=0,h=d=u=null,c=a;do{var p=c.lane,v=c.eventTime;if((s&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var _=t,R=c;switch(p=e,v=n,R.tag){case 1:if(_=R.payload,typeof _=="function"){m=_.call(v,m,p);break e}m=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=R.payload,p=typeof _=="function"?_.call(v,m,p):_,p==null)break e;m=Xe({},m,p);break e;case 2:gr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[c]:p.push(c))}else v={eventTime:v,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=v,u=m):h=h.next=v,o|=p;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;p=c,c=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Ti|=o,t.lanes=o,t.memoizedState=m}}function C0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(G(191,i));i.call(s)}}}var sc={},gs=Wr(sc),Al=Wr(sc),Rl=Wr(sc);function pi(t){if(t===sc)throw Error(G(174));return t}function Up(t,e){switch(Fe(Rl,e),Fe(Al,t),Fe(gs,sc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gf(e,t)}qe(gs),Fe(gs,e)}function Ua(){qe(gs),qe(Al),qe(Rl)}function c_(t){pi(Rl.current);var e=pi(gs.current),n=Gf(e,t.type);e!==n&&(Fe(Al,t),Fe(gs,n))}function $p(t){Al.current===t&&(qe(gs),qe(Al))}var Ge=Wr(0);function od(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sf=[];function Bp(){for(var t=0;t<sf.length;t++)sf[t]._workInProgressVersionPrimary=null;sf.length=0}var Su=nr.ReactCurrentDispatcher,rf=nr.ReactCurrentBatchConfig,ki=0,Qe=null,pt=null,wt=null,ld=!1,ol=!1,Pl=0,jE=0;function Dt(){throw Error(G(321))}function zp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rs(t[n],e[n]))return!1;return!0}function qp(t,e,n,s,i,a){if(ki=a,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Su.current=t===null||t.memoizedState===null?IE:SE,t=n(s,i),ol){a=0;do{if(ol=!1,Pl=0,25<=a)throw Error(G(301));a+=1,wt=pt=null,e.updateQueue=null,Su.current=CE,t=n(s,i)}while(ol)}if(Su.current=cd,e=pt!==null&&pt.next!==null,ki=0,wt=pt=Qe=null,ld=!1,e)throw Error(G(300));return t}function Hp(){var t=Pl!==0;return Pl=0,t}function hs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Qe.memoizedState=wt=t:wt=wt.next=t,wt}function Fn(){if(pt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?Qe.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(G(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?Qe.memoizedState=wt=t:wt=wt.next=t}return wt}function Dl(t,e){return typeof e=="function"?e(t):e}function af(t){var e=Fn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var s=pt,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var c=o=null,u=null,d=a;do{var h=d.lane;if((ki&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=s):u=u.next=m,Qe.lanes|=h,Ti|=h}d=d.next}while(d!==null&&d!==a);u===null?o=s:u.next=c,rs(s,e.memoizedState)||(en=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=u,n.lastRenderedState=s}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Qe.lanes|=a,Ti|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function of(t){var e=Fn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);rs(a,e.memoizedState)||(en=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function u_(){}function d_(t,e){var n=Qe,s=Fn(),i=e(),a=!rs(s.memoizedState,i);if(a&&(s.memoizedState=i,en=!0),s=s.queue,Wp(m_.bind(null,n,s,t),[t]),s.getSnapshot!==e||a||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,Ll(9,f_.bind(null,n,s,i,e),void 0,null),bt===null)throw Error(G(349));ki&30||h_(n,e,i)}return i}function h_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f_(t,e,n,s){e.value=n,e.getSnapshot=s,p_(e)&&g_(t)}function m_(t,e,n){return n(function(){p_(e)&&g_(t)})}function p_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rs(t,n)}catch{return!0}}function g_(t){var e=Qs(t,1);e!==null&&es(e,t,1,-1)}function A0(t){var e=hs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:t},e.queue=t,t=t.dispatch=TE.bind(null,Qe,t),[e.memoizedState,t]}function Ll(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function x_(){return Fn().memoizedState}function Cu(t,e,n,s){var i=hs();Qe.flags|=t,i.memoizedState=Ll(1|e,n,void 0,s===void 0?null:s)}function qd(t,e,n,s){var i=Fn();s=s===void 0?null:s;var a=void 0;if(pt!==null){var o=pt.memoizedState;if(a=o.destroy,s!==null&&zp(s,o.deps)){i.memoizedState=Ll(e,n,a,s);return}}Qe.flags|=t,i.memoizedState=Ll(1|e,n,a,s)}function R0(t,e){return Cu(8390656,8,t,e)}function Wp(t,e){return qd(2048,8,t,e)}function y_(t,e){return qd(4,2,t,e)}function v_(t,e){return qd(4,4,t,e)}function w_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function __(t,e,n){return n=n!=null?n.concat([t]):null,qd(4,4,w_.bind(null,e,t),n)}function Kp(){}function b_(t,e){var n=Fn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&zp(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function N_(t,e){var n=Fn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&zp(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function j_(t,e,n){return ki&21?(rs(n,e)||(n=Sw(),Qe.lanes|=n,Ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function EE(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var s=rf.transition;rf.transition={};try{t(!1),e()}finally{Ce=n,rf.transition=s}}function E_(){return Fn().memoizedState}function kE(t,e,n){var s=Pr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},k_(t))T_(e,n);else if(n=o_(t,e,n,s),n!==null){var i=Wt();es(n,t,s,i),I_(n,e,s)}}function TE(t,e,n){var s=Pr(t),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(k_(t))T_(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(i.hasEagerState=!0,i.eagerState=c,rs(c,o)){var u=e.interleaved;u===null?(i.next=i,Vp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=o_(t,e,i,s),n!==null&&(i=Wt(),es(n,t,s,i),I_(n,e,s))}}function k_(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function T_(t,e){ol=ld=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function I_(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,jp(t,n)}}var cd={readContext:Vn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},IE={readContext:Vn,useCallback:function(t,e){return hs().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:R0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cu(4194308,4,w_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cu(4,2,t,e)},useMemo:function(t,e){var n=hs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=hs();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=kE.bind(null,Qe,t),[s.memoizedState,t]},useRef:function(t){var e=hs();return t={current:t},e.memoizedState=t},useState:A0,useDebugValue:Kp,useDeferredValue:function(t){return hs().memoizedState=t},useTransition:function(){var t=A0(!1),e=t[0];return t=EE.bind(null,t[1]),hs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Qe,i=hs();if(Ke){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),bt===null)throw Error(G(349));ki&30||h_(s,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,R0(m_.bind(null,s,a,t),[t]),s.flags|=2048,Ll(9,f_.bind(null,s,a,n,e),void 0,null),n},useId:function(){var t=hs(),e=bt.identifierPrefix;if(Ke){var n=Vs,s=Ms;n=(s&~(1<<32-Zn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},SE={readContext:Vn,useCallback:b_,useContext:Vn,useEffect:Wp,useImperativeHandle:__,useInsertionEffect:y_,useLayoutEffect:v_,useMemo:N_,useReducer:af,useRef:x_,useState:function(){return af(Dl)},useDebugValue:Kp,useDeferredValue:function(t){var e=Fn();return j_(e,pt.memoizedState,t)},useTransition:function(){var t=af(Dl)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:u_,useSyncExternalStore:d_,useId:E_,unstable_isNewReconciler:!1},CE={readContext:Vn,useCallback:b_,useContext:Vn,useEffect:Wp,useImperativeHandle:__,useInsertionEffect:y_,useLayoutEffect:v_,useMemo:N_,useReducer:of,useRef:x_,useState:function(){return of(Dl)},useDebugValue:Kp,useDeferredValue:function(t){var e=Fn();return pt===null?e.memoizedState=t:j_(e,pt.memoizedState,t)},useTransition:function(){var t=of(Dl)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:u_,useSyncExternalStore:d_,useId:E_,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pm(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hd={isMounted:function(t){return(t=t._reactInternals)?Fi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Wt(),i=Pr(t),a=Bs(s,i);a.payload=e,n!=null&&(a.callback=n),e=Ar(t,a,i),e!==null&&(es(e,t,i,s),Iu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Wt(),i=Pr(t),a=Bs(s,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ar(t,a,i),e!==null&&(es(e,t,i,s),Iu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),s=Pr(t),i=Bs(n,s);i.tag=2,e!=null&&(i.callback=e),e=Ar(t,i,s),e!==null&&(es(e,t,s,n),Iu(e,t,s))}};function P0(t,e,n,s,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,o):e.prototype&&e.prototype.isPureReactComponent?!Tl(n,s)||!Tl(i,a):!0}function S_(t,e,n){var s=!1,i=Fr,a=e.contextType;return typeof a=="object"&&a!==null?a=Vn(a):(i=nn(e)?ji:$t.current,s=e.contextTypes,a=(s=s!=null)?Ma(t,i):Fr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hd,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function D0(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Hd.enqueueReplaceState(e,e.state,null)}function gm(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Fp(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Vn(a):(a=nn(e)?ji:$t.current,i.context=Ma(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(pm(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Hd.enqueueReplaceState(i,i.state,null),ad(t,n,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $a(t,e){try{var n="",s=e;do n+=r2(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function lf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AE=typeof WeakMap=="function"?WeakMap:Map;function C_(t,e,n){n=Bs(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){dd||(dd=!0,Tm=s),xm(t,e)},n}function A_(t,e,n){n=Bs(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;n.payload=function(){return s(i)},n.callback=function(){xm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){xm(t,e),typeof s!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function L0(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new AE;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(i.add(n),t=HE.bind(null,t,e,n),e.then(t,t))}function O0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M0(t,e,n,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bs(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var RE=nr.ReactCurrentOwner,en=!1;function Ht(t,e,n,s){e.child=t===null?a_(e,null,n,s):Fa(e,t.child,n,s)}function V0(t,e,n,s,i){n=n.render;var a=e.ref;return Ca(e,i),s=qp(t,e,n,s,a,i),n=Hp(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xs(t,e,i)):(Ke&&n&&Rp(e),e.flags|=1,Ht(t,e,s,i),e.child)}function F0(t,e,n,s,i){if(t===null){var a=n.type;return typeof a=="function"&&!tg(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,R_(t,e,a,s,i)):(t=Du(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Tl,n(o,s)&&t.ref===e.ref)return Xs(t,e,i)}return e.flags|=1,t=Dr(a,s),t.ref=e.ref,t.return=e,e.child=t}function R_(t,e,n,s,i){if(t!==null){var a=t.memoizedProps;if(Tl(a,s)&&t.ref===e.ref)if(en=!1,e.pendingProps=s=a,(t.lanes&i)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,Xs(t,e,i)}return ym(t,e,n,s,i)}function P_(t,e,n){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Na,hn),hn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(Na,hn),hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,Fe(Na,hn),hn|=s}else a!==null?(s=a.baseLanes|n,e.memoizedState=null):s=n,Fe(Na,hn),hn|=s;return Ht(t,e,i,n),e.child}function D_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ym(t,e,n,s,i){var a=nn(n)?ji:$t.current;return a=Ma(e,a),Ca(e,i),n=qp(t,e,n,s,a,i),s=Hp(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xs(t,e,i)):(Ke&&s&&Rp(e),e.flags|=1,Ht(t,e,n,i),e.child)}function U0(t,e,n,s,i){if(nn(n)){var a=!0;td(e)}else a=!1;if(Ca(e,i),e.stateNode===null)Au(t,e),S_(e,n,s),gm(e,n,s,i),s=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Vn(d):(d=nn(n)?ji:$t.current,d=Ma(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==s||u!==d)&&D0(e,o,s,d),gr=!1;var p=e.memoizedState;o.state=p,ad(e,s,o,i),u=e.memoizedState,c!==s||p!==u||tn.current||gr?(typeof h=="function"&&(pm(e,n,h,s),u=e.memoizedState),(c=gr||P0(e,n,c,s,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),o.props=s,o.state=u,o.context=d,s=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,l_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Gn(e.type,c),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vn(u):(u=nn(n)?ji:$t.current,u=Ma(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||p!==u)&&D0(e,o,s,u),gr=!1,p=e.memoizedState,o.state=p,ad(e,s,o,i);var _=e.memoizedState;c!==m||p!==_||tn.current||gr?(typeof v=="function"&&(pm(e,n,v,s),_=e.memoizedState),(d=gr||P0(e,n,d,s,p,_,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=_),o.props=s,o.state=_,o.context=u,s=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),s=!1)}return vm(t,e,n,s,a,i)}function vm(t,e,n,s,i,a){D_(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&E0(e,n,!1),Xs(t,e,a);s=e.stateNode,RE.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Fa(e,t.child,null,a),e.child=Fa(e,null,c,a)):Ht(t,e,c,a),e.memoizedState=s.state,i&&E0(e,n,!0),e.child}function L_(t){var e=t.stateNode;e.pendingContext?j0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&j0(t,e.context,!1),Up(t,e.containerInfo)}function $0(t,e,n,s,i){return Va(),Dp(i),e.flags|=256,Ht(t,e,n,s),e.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function _m(t){return{baseLanes:t,cachePool:null,transitions:null}}function O_(t,e,n){var s=e.pendingProps,i=Ge.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Fe(Ge,i&1),t===null)return fm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,a?(s=e.mode,a=e.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Gd(o,s,0,null),t=vi(t,s,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=_m(n),e.memoizedState=wm,t):Gp(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return PE(t,e,o,s,c,i,n);if(a){a=s.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=u,e.deletions=null):(s=Dr(i,u),s.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Dr(c,a):(a=vi(a,o,n,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,o=t.child.memoizedState,o=o===null?_m(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=wm,s}return a=t.child,t=a.sibling,s=Dr(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Gp(t,e){return e=Gd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cu(t,e,n,s){return s!==null&&Dp(s),Fa(e,t.child,null,n),t=Gp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PE(t,e,n,s,i,a,o){if(n)return e.flags&256?(e.flags&=-257,s=lf(Error(G(422))),cu(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,i=e.mode,s=Gd({mode:"visible",children:s.children},i,0,null),a=vi(a,i,o,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&Fa(e,t.child,null,o),e.child.memoizedState=_m(o),e.memoizedState=wm,a);if(!(e.mode&1))return cu(t,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var c=s.dgst;return s=c,a=Error(G(419)),s=lf(a,s,void 0),cu(t,e,o,s)}if(c=(o&t.childLanes)!==0,en||c){if(s=bt,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Qs(t,i),es(s,t,i,-1))}return eg(),s=lf(Error(G(421))),cu(t,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=WE.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,gn=Cr(i.nextSibling),vn=e,Ke=!0,Xn=null,t!==null&&(Cn[An++]=Ms,Cn[An++]=Vs,Cn[An++]=Ei,Ms=t.id,Vs=t.overflow,Ei=e),e=Gp(e,s.children),e.flags|=4096,e)}function B0(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),mm(t.return,e,n)}function cf(t,e,n,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function M_(t,e,n){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(Ht(t,e,s.children,n),s=Ge.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B0(t,n,e);else if(t.tag===19)B0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Fe(Ge,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&od(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cf(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&od(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cf(e,!0,n,null,a);break;case"together":cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Au(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Dr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Dr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DE(t,e,n){switch(e.tag){case 3:L_(e),Va();break;case 5:c_(e);break;case 1:nn(e.type)&&td(e);break;case 4:Up(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Fe(rd,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Fe(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?O_(t,e,n):(Fe(Ge,Ge.current&1),t=Xs(t,e,n),t!==null?t.sibling:null);Fe(Ge,Ge.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return M_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fe(Ge,Ge.current),s)break;return null;case 22:case 23:return e.lanes=0,P_(t,e,n)}return Xs(t,e,n)}var V_,bm,F_,U_;V_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bm=function(){};F_=function(t,e,n,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,pi(gs.current);var a=null;switch(n){case"input":i=qf(t,i),s=qf(t,s),a=[];break;case"select":i=Xe({},i,{value:void 0}),s=Xe({},s,{value:void 0}),a=[];break;case"textarea":i=Kf(t,i),s=Kf(t,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Zu)}Qf(n,s);var o;n=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(wl.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var u=s[d];if(c=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(wl.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Be("scroll",t),a||c===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};U_=function(t,e,n,s){n!==s&&(e.flags|=4)};function $o(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function LE(t,e,n){var s=e.pendingProps;switch(Pp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return nn(e.type)&&ed(),Lt(e),null;case 3:return s=e.stateNode,Ua(),qe(tn),qe($t),Bp(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(ou(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(Cm(Xn),Xn=null))),bm(t,e),Lt(e),null;case 5:$p(e);var i=pi(Rl.current);if(n=e.type,t!==null&&e.stateNode!=null)F_(t,e,n,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(G(166));return Lt(e),null}if(t=pi(gs.current),ou(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[fs]=e,s[Cl]=a,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(i=0;i<Qo.length;i++)Be(Qo[i],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Yx(s,a),Be("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Be("invalid",s);break;case"textarea":Zx(s,a),Be("invalid",s)}Qf(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?s.textContent!==c&&(a.suppressHydrationWarning!==!0&&au(s.textContent,c,t),i=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&au(s.textContent,c,t),i=["children",""+c]):wl.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Be("scroll",s)}switch(n){case"input":Jc(s),Jx(s,a,!0);break;case"textarea":Jc(s),e0(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Zu)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[fs]=e,t[Cl]=s,V_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xf(n,s),n){case"dialog":Be("cancel",t),Be("close",t),i=s;break;case"iframe":case"object":case"embed":Be("load",t),i=s;break;case"video":case"audio":for(i=0;i<Qo.length;i++)Be(Qo[i],t);i=s;break;case"source":Be("error",t),i=s;break;case"img":case"image":case"link":Be("error",t),Be("load",t),i=s;break;case"details":Be("toggle",t),i=s;break;case"input":Yx(t,s),i=qf(t,s),Be("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=Xe({},s,{value:void 0}),Be("invalid",t);break;case"textarea":Zx(t,s),i=Kf(t,s),Be("invalid",t);break;default:i=s}Qf(n,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?xw(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&pw(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&_l(t,u):typeof u=="number"&&_l(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(wl.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Be("scroll",t):u!=null&&yp(t,a,u,o))}switch(n){case"input":Jc(t),Jx(t,s,!1);break;case"textarea":Jc(t),e0(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Vr(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?ka(t,!!s.multiple,a,!1):s.defaultValue!=null&&ka(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)U_(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(G(166));if(n=pi(Rl.current),pi(gs.current),ou(e)){if(s=e.stateNode,n=e.memoizedProps,s[fs]=e,(a=s.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:au(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&au(s.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[fs]=e,e.stateNode=s}return Lt(e),null;case 13:if(qe(Ge),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&gn!==null&&e.mode&1&&!(e.flags&128))r_(),Va(),e.flags|=98560,a=!1;else if(a=ou(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(G(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(G(317));a[fs]=e}else Va(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),a=!1}else Xn!==null&&(Cm(Xn),Xn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?gt===0&&(gt=3):eg())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Ua(),bm(t,e),t===null&&Il(e.stateNode.containerInfo),Lt(e),null;case 10:return Mp(e.type._context),Lt(e),null;case 17:return nn(e.type)&&ed(),Lt(e),null;case 19:if(qe(Ge),a=e.memoizedState,a===null)return Lt(e),null;if(s=(e.flags&128)!==0,o=a.rendering,o===null)if(s)$o(a,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=od(t),o!==null){for(e.flags|=128,$o(a,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)a=n,t=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(Ge,Ge.current&1|2),e.child}t=t.sibling}a.tail!==null&&st()>Ba&&(e.flags|=128,s=!0,$o(a,!1),e.lanes=4194304)}else{if(!s)if(t=od(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$o(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ke)return Lt(e),null}else 2*st()-a.renderingStartTime>Ba&&n!==1073741824&&(e.flags|=128,s=!0,$o(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=st(),e.sibling=null,n=Ge.current,Fe(Ge,s?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Zp(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?hn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function OE(t,e){switch(Pp(e),e.tag){case 1:return nn(e.type)&&ed(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ua(),qe(tn),qe($t),Bp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $p(e),null;case 13:if(qe(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Va()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Ge),null;case 4:return Ua(),null;case 10:return Mp(e.type._context),null;case 22:case 23:return Zp(),null;case 24:return null;default:return null}}var uu=!1,Vt=!1,ME=typeof WeakSet=="function"?WeakSet:Set,ee=null;function ba(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){et(t,e,s)}else n.current=null}function Nm(t,e,n){try{n()}catch(s){et(t,e,s)}}var z0=!1;function VE(t,e){if(am=Xu,t=Hw(),Ap(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var v;m!==n||i!==0&&m.nodeType!==3||(c=o+i),m!==a||s!==0&&m.nodeType!==3||(u=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===t)break t;if(p===n&&++d===i&&(c=o),p===a&&++h===s&&(u=o),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(om={focusedElem:t,selectionRange:n},Xu=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var R=_.memoizedProps,k=_.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?R:Gn(e.type,R),k);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(j){et(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return _=z0,z0=!1,_}function ll(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Nm(e,n,a)}i=i.next}while(i!==s)}}function Wd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $_(t){var e=t.alternate;e!==null&&(t.alternate=null,$_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fs],delete e[Cl],delete e[um],delete e[wE],delete e[_E])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function B_(t){return t.tag===5||t.tag===3||t.tag===4}function q0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||B_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Em(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zu));else if(s!==4&&(t=t.child,t!==null))for(Em(t,e,n),t=t.sibling;t!==null;)Em(t,e,n),t=t.sibling}function km(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(km(t,e,n),t=t.sibling;t!==null;)km(t,e,n),t=t.sibling}var Et=null,Qn=!1;function fr(t,e,n){for(n=n.child;n!==null;)z_(t,e,n),n=n.sibling}function z_(t,e,n){if(ps&&typeof ps.onCommitFiberUnmount=="function")try{ps.onCommitFiberUnmount(Vd,n)}catch{}switch(n.tag){case 5:Vt||ba(n,e);case 6:var s=Et,i=Qn;Et=null,fr(t,e,n),Et=s,Qn=i,Et!==null&&(Qn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(Qn?(t=Et,n=n.stateNode,t.nodeType===8?tf(t.parentNode,n):t.nodeType===1&&tf(t,n),El(t)):tf(Et,n.stateNode));break;case 4:s=Et,i=Qn,Et=n.stateNode.containerInfo,Qn=!0,fr(t,e,n),Et=s,Qn=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Nm(n,e,o),i=i.next}while(i!==s)}fr(t,e,n);break;case 1:if(!Vt&&(ba(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(c){et(n,e,c)}fr(t,e,n);break;case 21:fr(t,e,n);break;case 22:n.mode&1?(Vt=(s=Vt)||n.memoizedState!==null,fr(t,e,n),Vt=s):fr(t,e,n);break;default:fr(t,e,n)}}function H0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ME),e.forEach(function(s){var i=KE.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Et=c.stateNode,Qn=!1;break e;case 3:Et=c.stateNode.containerInfo,Qn=!0;break e;case 4:Et=c.stateNode.containerInfo,Qn=!0;break e}c=c.return}if(Et===null)throw Error(G(160));z_(a,o,i),Et=null,Qn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){et(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)q_(e,t),e=e.sibling}function q_(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),ds(t),s&4){try{ll(3,t,t.return),Wd(3,t)}catch(R){et(t,t.return,R)}try{ll(5,t,t.return)}catch(R){et(t,t.return,R)}}break;case 1:Kn(e,t),ds(t),s&512&&n!==null&&ba(n,n.return);break;case 5:if(Kn(e,t),ds(t),s&512&&n!==null&&ba(n,n.return),t.flags&32){var i=t.stateNode;try{_l(i,"")}catch(R){et(t,t.return,R)}}if(s&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&hw(i,a),Xf(c,o);var d=Xf(c,a);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?xw(i,m):h==="dangerouslySetInnerHTML"?pw(i,m):h==="children"?_l(i,m):yp(i,h,m,d)}switch(c){case"input":Hf(i,a);break;case"textarea":fw(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?ka(i,!!a.multiple,v,!1):p!==!!a.multiple&&(a.defaultValue!=null?ka(i,!!a.multiple,a.defaultValue,!0):ka(i,!!a.multiple,a.multiple?[]:"",!1))}i[Cl]=a}catch(R){et(t,t.return,R)}}break;case 6:if(Kn(e,t),ds(t),s&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(R){et(t,t.return,R)}}break;case 3:if(Kn(e,t),ds(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{El(e.containerInfo)}catch(R){et(t,t.return,R)}break;case 4:Kn(e,t),ds(t);break;case 13:Kn(e,t),ds(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Yp=st())),s&4&&H0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(d=Vt)||h,Kn(e,t),Vt=d):Kn(e,t),ds(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(m=ee=h;ee!==null;){switch(p=ee,v=p.child,p.tag){case 0:case 11:case 14:case 15:ll(4,p,p.return);break;case 1:ba(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){s=p,n=p.return;try{e=s,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(R){et(s,n,R)}}break;case 5:ba(p,p.return);break;case 22:if(p.memoizedState!==null){K0(m);continue}}v!==null?(v.return=p,ee=v):K0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=gw("display",o))}catch(R){et(t,t.return,R)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(R){et(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Kn(e,t),ds(t),s&4&&H0(t);break;case 21:break;default:Kn(e,t),ds(t)}}function ds(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(B_(n)){var s=n;break e}n=n.return}throw Error(G(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(_l(i,""),s.flags&=-33);var a=q0(t);km(t,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,c=q0(t);Em(t,c,o);break;default:throw Error(G(161))}}catch(u){et(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FE(t,e,n){ee=t,H_(t)}function H_(t,e,n){for(var s=(t.mode&1)!==0;ee!==null;){var i=ee,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||uu;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||Vt;c=uu;var d=Vt;if(uu=o,(Vt=u)&&!d)for(ee=i;ee!==null;)o=ee,u=o.child,o.tag===22&&o.memoizedState!==null?G0(i):u!==null?(u.return=o,ee=u):G0(i);for(;a!==null;)ee=a,H_(a),a=a.sibling;ee=i,uu=c,Vt=d}W0(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ee=a):W0(t)}}function W0(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Wd(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Vt)if(n===null)s.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&C0(e,a,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}C0(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&El(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Vt||e.flags&512&&jm(e)}catch(p){et(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function K0(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function G0(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wd(4,e)}catch(u){et(e,n,u)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(u){et(e,i,u)}}var a=e.return;try{jm(e)}catch(u){et(e,a,u)}break;case 5:var o=e.return;try{jm(e)}catch(u){et(e,o,u)}}}catch(u){et(e,e.return,u)}if(e===t){ee=null;break}var c=e.sibling;if(c!==null){c.return=e.return,ee=c;break}ee=e.return}}var UE=Math.ceil,ud=nr.ReactCurrentDispatcher,Qp=nr.ReactCurrentOwner,Dn=nr.ReactCurrentBatchConfig,ke=0,bt=null,ut=null,Tt=0,hn=0,Na=Wr(0),gt=0,Ol=null,Ti=0,Kd=0,Xp=0,cl=null,Jt=null,Yp=0,Ba=1/0,Ps=null,dd=!1,Tm=null,Rr=null,du=!1,jr=null,hd=0,ul=0,Im=null,Ru=-1,Pu=0;function Wt(){return ke&6?st():Ru!==-1?Ru:Ru=st()}function Pr(t){return t.mode&1?ke&2&&Tt!==0?Tt&-Tt:NE.transition!==null?(Pu===0&&(Pu=Sw()),Pu):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:Ow(t.type)),t):1}function es(t,e,n,s){if(50<ul)throw ul=0,Im=null,Error(G(185));ec(t,n,s),(!(ke&2)||t!==bt)&&(t===bt&&(!(ke&2)&&(Kd|=n),gt===4&&yr(t,Tt)),sn(t,s),n===1&&ke===0&&!(e.mode&1)&&(Ba=st()+500,zd&&Kr()))}function sn(t,e){var n=t.callbackNode;N2(t,e);var s=Qu(t,t===bt?Tt:0);if(s===0)n!==null&&s0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&s0(n),e===1)t.tag===0?bE(Q0.bind(null,t)):t_(Q0.bind(null,t)),yE(function(){!(ke&6)&&Kr()}),n=null;else{switch(Cw(s)){case 1:n=Np;break;case 4:n=Tw;break;case 16:n=Gu;break;case 536870912:n=Iw;break;default:n=Gu}n=Z_(n,W_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function W_(t,e){if(Ru=-1,Pu=0,ke&6)throw Error(G(327));var n=t.callbackNode;if(Aa()&&t.callbackNode!==n)return null;var s=Qu(t,t===bt?Tt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=fd(t,s);else{e=s;var i=ke;ke|=2;var a=G_();(bt!==t||Tt!==e)&&(Ps=null,Ba=st()+500,yi(t,e));do try{zE();break}catch(c){K_(t,c)}while(!0);Op(),ud.current=a,ke=i,ut!==null?e=0:(bt=null,Tt=0,e=gt)}if(e!==0){if(e===2&&(i=tm(t),i!==0&&(s=i,e=Sm(t,i))),e===1)throw n=Ol,yi(t,0),yr(t,s),sn(t,st()),n;if(e===6)yr(t,s);else{if(i=t.current.alternate,!(s&30)&&!$E(i)&&(e=fd(t,s),e===2&&(a=tm(t),a!==0&&(s=a,e=Sm(t,a))),e===1))throw n=Ol,yi(t,0),yr(t,s),sn(t,st()),n;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(G(345));case 2:ui(t,Jt,Ps);break;case 3:if(yr(t,s),(s&130023424)===s&&(e=Yp+500-st(),10<e)){if(Qu(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){Wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=cm(ui.bind(null,t,Jt,Ps),e);break}ui(t,Jt,Ps);break;case 4:if(yr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var o=31-Zn(s);a=1<<o,o=e[o],o>i&&(i=o),s&=~a}if(s=i,s=st()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*UE(s/1960))-s,10<s){t.timeoutHandle=cm(ui.bind(null,t,Jt,Ps),s);break}ui(t,Jt,Ps);break;case 5:ui(t,Jt,Ps);break;default:throw Error(G(329))}}}return sn(t,st()),t.callbackNode===n?W_.bind(null,t):null}function Sm(t,e){var n=cl;return t.current.memoizedState.isDehydrated&&(yi(t,e).flags|=256),t=fd(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&Cm(e)),t}function Cm(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function $E(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!rs(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yr(t,e){for(e&=~Xp,e&=~Kd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),s=1<<n;t[n]=-1,e&=~s}}function Q0(t){if(ke&6)throw Error(G(327));Aa();var e=Qu(t,0);if(!(e&1))return sn(t,st()),null;var n=fd(t,e);if(t.tag!==0&&n===2){var s=tm(t);s!==0&&(e=s,n=Sm(t,s))}if(n===1)throw n=Ol,yi(t,0),yr(t,e),sn(t,st()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ui(t,Jt,Ps),sn(t,st()),null}function Jp(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Ba=st()+500,zd&&Kr())}}function Ii(t){jr!==null&&jr.tag===0&&!(ke&6)&&Aa();var e=ke;ke|=1;var n=Dn.transition,s=Ce;try{if(Dn.transition=null,Ce=1,t)return t()}finally{Ce=s,Dn.transition=n,ke=e,!(ke&6)&&Kr()}}function Zp(){hn=Na.current,qe(Na)}function yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xE(n)),ut!==null)for(n=ut.return;n!==null;){var s=n;switch(Pp(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ed();break;case 3:Ua(),qe(tn),qe($t),Bp();break;case 5:$p(s);break;case 4:Ua();break;case 13:qe(Ge);break;case 19:qe(Ge);break;case 10:Mp(s.type._context);break;case 22:case 23:Zp()}n=n.return}if(bt=t,ut=t=Dr(t.current,null),Tt=hn=e,gt=0,Ol=null,Xp=Kd=Ti=0,Jt=cl=null,mi!==null){for(e=0;e<mi.length;e++)if(n=mi[e],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}n.pending=s}mi=null}return t}function K_(t,e){do{var n=ut;try{if(Op(),Su.current=cd,ld){for(var s=Qe.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}ld=!1}if(ki=0,wt=pt=Qe=null,ol=!1,Pl=0,Qp.current=null,n===null||n.return===null){gt=1,Ol=e,ut=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=Tt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=c,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=O0(o);if(v!==null){v.flags&=-257,M0(v,o,c,a,e),v.mode&1&&L0(a,d,e),e=v,u=d;var _=e.updateQueue;if(_===null){var R=new Set;R.add(u),e.updateQueue=R}else _.add(u);break e}else{if(!(e&1)){L0(a,d,e),eg();break e}u=Error(G(426))}}else if(Ke&&c.mode&1){var k=O0(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),M0(k,o,c,a,e),Dp($a(u,c));break e}}a=u=$a(u,c),gt!==4&&(gt=2),cl===null?cl=[a]:cl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=C_(a,u,e);S0(a,b);break e;case 1:c=u;var w=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Rr===null||!Rr.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e;var j=A_(a,c,e);S0(a,j);break e}}a=a.return}while(a!==null)}X_(n)}catch(C){e=C,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function G_(){var t=ud.current;return ud.current=cd,t===null?cd:t}function eg(){(gt===0||gt===3||gt===2)&&(gt=4),bt===null||!(Ti&268435455)&&!(Kd&268435455)||yr(bt,Tt)}function fd(t,e){var n=ke;ke|=2;var s=G_();(bt!==t||Tt!==e)&&(Ps=null,yi(t,e));do try{BE();break}catch(i){K_(t,i)}while(!0);if(Op(),ke=n,ud.current=s,ut!==null)throw Error(G(261));return bt=null,Tt=0,gt}function BE(){for(;ut!==null;)Q_(ut)}function zE(){for(;ut!==null&&!m2();)Q_(ut)}function Q_(t){var e=J_(t.alternate,t,hn);t.memoizedProps=t.pendingProps,e===null?X_(t):ut=e,Qp.current=null}function X_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OE(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,ut=null;return}}else if(n=LE(n,e,hn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);gt===0&&(gt=5)}function ui(t,e,n){var s=Ce,i=Dn.transition;try{Dn.transition=null,Ce=1,qE(t,e,n,s)}finally{Dn.transition=i,Ce=s}return null}function qE(t,e,n,s){do Aa();while(jr!==null);if(ke&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(j2(t,a),t===bt&&(ut=bt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||du||(du=!0,Z_(Gu,function(){return Aa(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Dn.transition,Dn.transition=null;var o=Ce;Ce=1;var c=ke;ke|=4,Qp.current=null,VE(t,n),q_(n,t),uE(om),Xu=!!am,om=am=null,t.current=n,FE(n),p2(),ke=c,Ce=o,Dn.transition=a}else t.current=n;if(du&&(du=!1,jr=t,hd=i),a=t.pendingLanes,a===0&&(Rr=null),y2(n.stateNode),sn(t,st()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(dd)throw dd=!1,t=Tm,Tm=null,t;return hd&1&&t.tag!==0&&Aa(),a=t.pendingLanes,a&1?t===Im?ul++:(ul=0,Im=t):ul=0,Kr(),null}function Aa(){if(jr!==null){var t=Cw(hd),e=Dn.transition,n=Ce;try{if(Dn.transition=null,Ce=16>t?16:t,jr===null)var s=!1;else{if(t=jr,jr=null,hd=0,ke&6)throw Error(G(331));var i=ke;for(ke|=4,ee=t.current;ee!==null;){var a=ee,o=a.child;if(ee.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(ee=d;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:ll(8,h,a)}var m=h.child;if(m!==null)m.return=h,ee=m;else for(;ee!==null;){h=ee;var p=h.sibling,v=h.return;if($_(h),h===d){ee=null;break}if(p!==null){p.return=v,ee=p;break}ee=v}}}var _=a.alternate;if(_!==null){var R=_.child;if(R!==null){_.child=null;do{var k=R.sibling;R.sibling=null,R=k}while(R!==null)}}ee=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ee=o;else e:for(;ee!==null;){if(a=ee,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ll(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,ee=b;break e}ee=a.return}}var w=t.current;for(ee=w;ee!==null;){o=ee;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ee=y;else e:for(o=w;ee!==null;){if(c=ee,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Wd(9,c)}}catch(C){et(c,c.return,C)}if(c===o){ee=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,ee=j;break e}ee=c.return}}if(ke=i,Kr(),ps&&typeof ps.onPostCommitFiberRoot=="function")try{ps.onPostCommitFiberRoot(Vd,t)}catch{}s=!0}return s}finally{Ce=n,Dn.transition=e}}return!1}function X0(t,e,n){e=$a(n,e),e=C_(t,e,1),t=Ar(t,e,1),e=Wt(),t!==null&&(ec(t,1,e),sn(t,e))}function et(t,e,n){if(t.tag===3)X0(t,t,n);else for(;e!==null;){if(e.tag===3){X0(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Rr===null||!Rr.has(s))){t=$a(n,t),t=A_(e,t,1),e=Ar(e,t,1),t=Wt(),e!==null&&(ec(e,1,t),sn(e,t));break}}e=e.return}}function HE(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Tt&n)===n&&(gt===4||gt===3&&(Tt&130023424)===Tt&&500>st()-Yp?yi(t,0):Xp|=n),sn(t,e)}function Y_(t,e){e===0&&(t.mode&1?(e=tu,tu<<=1,!(tu&130023424)&&(tu=4194304)):e=1);var n=Wt();t=Qs(t,e),t!==null&&(ec(t,e,n),sn(t,n))}function WE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Y_(t,n)}function KE(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(G(314))}s!==null&&s.delete(e),Y_(t,n)}var J_;J_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,DE(t,e,n);en=!!(t.flags&131072)}else en=!1,Ke&&e.flags&1048576&&n_(e,sd,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Au(t,e),t=e.pendingProps;var i=Ma(e,$t.current);Ca(e,n),i=qp(null,e,s,t,i,n);var a=Hp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(s)?(a=!0,td(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Fp(e),i.updater=Hd,e.stateNode=i,i._reactInternals=e,gm(e,s,t,n),e=vm(null,e,s,!0,a,n)):(e.tag=0,Ke&&a&&Rp(e),Ht(null,e,i,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Au(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=QE(s),t=Gn(s,t),i){case 0:e=ym(null,e,s,t,n);break e;case 1:e=U0(null,e,s,t,n);break e;case 11:e=V0(null,e,s,t,n);break e;case 14:e=F0(null,e,s,Gn(s.type,t),n);break e}throw Error(G(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Gn(s,i),ym(t,e,s,i,n);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Gn(s,i),U0(t,e,s,i,n);case 3:e:{if(L_(e),t===null)throw Error(G(387));s=e.pendingProps,a=e.memoizedState,i=a.element,l_(t,e),ad(e,s,null,n);var o=e.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=$a(Error(G(423)),e),e=$0(t,e,s,n,i);break e}else if(s!==i){i=$a(Error(G(424)),e),e=$0(t,e,s,n,i);break e}else for(gn=Cr(e.stateNode.containerInfo.firstChild),vn=e,Ke=!0,Xn=null,n=a_(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Va(),s===i){e=Xs(t,e,n);break e}Ht(t,e,s,n)}e=e.child}return e;case 5:return c_(e),t===null&&fm(e),s=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,lm(s,i)?o=null:a!==null&&lm(s,a)&&(e.flags|=32),D_(t,e),Ht(t,e,o,n),e.child;case 6:return t===null&&fm(e),null;case 13:return O_(t,e,n);case 4:return Up(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Fa(e,null,s,n):Ht(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Gn(s,i),V0(t,e,s,i,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Fe(rd,s._currentValue),s._currentValue=o,a!==null)if(rs(a.value,o)){if(a.children===i.children&&!tn.current){e=Xs(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===s){if(a.tag===1){u=Bs(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),mm(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(G(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),mm(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Ht(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Ca(e,n),i=Vn(i),s=s(i),e.flags|=1,Ht(t,e,s,n),e.child;case 14:return s=e.type,i=Gn(s,e.pendingProps),i=Gn(s.type,i),F0(t,e,s,i,n);case 15:return R_(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Gn(s,i),Au(t,e),e.tag=1,nn(s)?(t=!0,td(e)):t=!1,Ca(e,n),S_(e,s,i),gm(e,s,i,n),vm(null,e,s,!0,t,n);case 19:return M_(t,e,n);case 22:return P_(t,e,n)}throw Error(G(156,e.tag))};function Z_(t,e){return kw(t,e)}function GE(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,s){return new GE(t,e,n,s)}function tg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QE(t){if(typeof t=="function")return tg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wp)return 11;if(t===_p)return 14}return 2}function Dr(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Du(t,e,n,s,i,a){var o=2;if(s=t,typeof t=="function")tg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fa:return vi(n.children,i,a,e);case vp:o=8,i|=8;break;case Uf:return t=Pn(12,n,e,i|2),t.elementType=Uf,t.lanes=a,t;case $f:return t=Pn(13,n,e,i),t.elementType=$f,t.lanes=a,t;case Bf:return t=Pn(19,n,e,i),t.elementType=Bf,t.lanes=a,t;case cw:return Gd(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ow:o=10;break e;case lw:o=9;break e;case wp:o=11;break e;case _p:o=14;break e;case pr:o=16,s=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Pn(o,n,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function vi(t,e,n,s){return t=Pn(7,t,s,e),t.lanes=n,t}function Gd(t,e,n,s){return t=Pn(22,t,s,e),t.elementType=cw,t.lanes=n,t.stateNode={isHidden:!1},t}function uf(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function df(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XE(t,e,n,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qh(0),this.expirationTimes=qh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qh(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ng(t,e,n,s,i,a,o,c,u){return t=new XE(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Pn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fp(a),t}function YE(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ha,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function eb(t){if(!t)return Fr;t=t._reactInternals;e:{if(Fi(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(nn(n))return e_(t,n,e)}return e}function tb(t,e,n,s,i,a,o,c,u){return t=ng(n,s,!0,t,i,a,o,c,u),t.context=eb(null),n=t.current,s=Wt(),i=Pr(n),a=Bs(s,i),a.callback=e??null,Ar(n,a,i),t.current.lanes=i,ec(t,i,s),sn(t,s),t}function Qd(t,e,n,s){var i=e.current,a=Wt(),o=Pr(i);return n=eb(n),e.context===null?e.context=n:e.pendingContext=n,e=Bs(a,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Ar(i,e,o),t!==null&&(es(t,i,o,a),Iu(t,i,o)),o}function md(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Y0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sg(t,e){Y0(t,e),(t=t.alternate)&&Y0(t,e)}function JE(){return null}var nb=typeof reportError=="function"?reportError:function(t){console.error(t)};function rg(t){this._internalRoot=t}Xd.prototype.render=rg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Qd(t,e,null,null)};Xd.prototype.unmount=rg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ii(function(){Qd(null,t,null,null)}),e[Gs]=null}};function Xd(t){this._internalRoot=t}Xd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&Lw(t)}};function ig(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function J0(){}function ZE(t,e,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=md(o);a.call(d)}}var o=tb(e,s,t,0,null,!1,!1,"",J0);return t._reactRootContainer=o,t[Gs]=o.current,Il(t.nodeType===8?t.parentNode:t),Ii(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var c=s;s=function(){var d=md(u);c.call(d)}}var u=ng(t,0,!1,null,null,!1,!1,"",J0);return t._reactRootContainer=u,t[Gs]=u.current,Il(t.nodeType===8?t.parentNode:t),Ii(function(){Qd(e,u,n,s)}),u}function Jd(t,e,n,s,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var u=md(o);c.call(u)}}Qd(e,o,t,i)}else o=ZE(n,e,t,i,s);return md(o)}Aw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Go(e.pendingLanes);n!==0&&(jp(e,n|1),sn(e,st()),!(ke&6)&&(Ba=st()+500,Kr()))}break;case 13:Ii(function(){var s=Qs(t,1);if(s!==null){var i=Wt();es(s,t,1,i)}}),sg(t,1)}};Ep=function(t){if(t.tag===13){var e=Qs(t,134217728);if(e!==null){var n=Wt();es(e,t,134217728,n)}sg(t,134217728)}};Rw=function(t){if(t.tag===13){var e=Pr(t),n=Qs(t,e);if(n!==null){var s=Wt();es(n,t,e,s)}sg(t,e)}};Pw=function(){return Ce};Dw=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};Jf=function(t,e,n){switch(e){case"input":if(Hf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=Bd(s);if(!i)throw Error(G(90));dw(s),Hf(s,i)}}}break;case"textarea":fw(t,n);break;case"select":e=n.value,e!=null&&ka(t,!!n.multiple,e,!1)}};ww=Jp;_w=Ii;var ek={usingClientEntryPoint:!1,Events:[nc,xa,Bd,yw,vw,Jp]},Bo={findFiberByHostInstance:fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tk={bundleType:Bo.bundleType,version:Bo.version,rendererPackageName:Bo.rendererPackageName,rendererConfig:Bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jw(t),t===null?null:t.stateNode},findFiberByHostInstance:Bo.findFiberByHostInstance||JE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{Vd=hu.inject(tk),ps=hu}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ek;jn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ig(e))throw Error(G(200));return YE(t,e,null,n)};jn.createRoot=function(t,e){if(!ig(t))throw Error(G(299));var n=!1,s="",i=nb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ng(t,1,!1,null,null,n,!1,s,i),t[Gs]=e.current,Il(t.nodeType===8?t.parentNode:t),new rg(e)};jn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=jw(e),t=t===null?null:t.stateNode,t};jn.flushSync=function(t){return Ii(t)};jn.hydrate=function(t,e,n){if(!Yd(e))throw Error(G(200));return Jd(null,t,e,!0,n)};jn.hydrateRoot=function(t,e,n){if(!ig(t))throw Error(G(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",o=nb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tb(e,null,t,1,n??null,i,!1,a,o),t[Gs]=e.current,Il(t),s)for(t=0;t<s.length;t++)n=s[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xd(e)};jn.render=function(t,e,n){if(!Yd(e))throw Error(G(200));return Jd(null,t,e,!1,n)};jn.unmountComponentAtNode=function(t){if(!Yd(t))throw Error(G(40));return t._reactRootContainer?(Ii(function(){Jd(null,null,t,!1,function(){t._reactRootContainer=null,t[Gs]=null})}),!0):!1};jn.unstable_batchedUpdates=Jp;jn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Yd(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Jd(t,e,n,!1,s)};jn.version="18.3.1-next-f1338f8080-20240426";function sb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sb)}catch(t){console.error(t)}}sb(),sw.exports=jn;var nk=sw.exports,Z0=nk;Vf.createRoot=Z0.createRoot,Vf.hydrateRoot=Z0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ml(){return Ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ml.apply(this,arguments)}var Er;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Er||(Er={}));const ey="popstate";function sk(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:o,hash:c}=s.location;return Am("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:pd(i)}return ik(e,n,null,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rk(){return Math.random().toString(36).substr(2,8)}function ty(t,e){return{usr:t.state,key:t.key,idx:e}}function Am(t,e,n,s){return n===void 0&&(n=null),Ml({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?to(e):e,{state:n,key:e&&e.key||s||rk()})}function pd(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function to(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function ik(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,c=Er.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Ml({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){c=Er.Pop;let k=h(),b=k==null?null:k-d;d=k,u&&u({action:c,location:R.location,delta:b})}function p(k,b){c=Er.Push;let w=Am(R.location,k,b);d=h()+1;let y=ty(w,d),j=R.createHref(w);try{o.pushState(y,"",j)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(j)}a&&u&&u({action:c,location:R.location,delta:1})}function v(k,b){c=Er.Replace;let w=Am(R.location,k,b);d=h();let y=ty(w,d),j=R.createHref(w);o.replaceState(y,"",j),a&&u&&u({action:c,location:R.location,delta:0})}function _(k){let b=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof k=="string"?k:pd(k);return w=w.replace(/ $/,"%20"),rt(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let R={get action(){return c},get location(){return t(i,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ey,m),u=k,()=>{i.removeEventListener(ey,m),u=null}},createHref(k){return e(i,k)},createURL:_,encodeLocation(k){let b=_(k);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:v,go(k){return o.go(k)}};return R}var ny;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ny||(ny={}));function ak(t,e,n){return n===void 0&&(n="/"),ok(t,e,n)}function ok(t,e,n,s){let i=typeof e=="string"?to(e):e,a=ag(i.pathname||"/",n);if(a==null)return null;let o=ib(t);lk(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=wk(a);c=xk(o[u],d)}return c}function ib(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(rt(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=Lr([s,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(rt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ib(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:pk(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of ab(a.path))i(a,o,u)}),e}function ab(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=ab(s.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function lk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gk(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const ck=/^:[\w-]+$/,uk=3,dk=2,hk=1,fk=10,mk=-2,sy=t=>t==="*";function pk(t,e){let n=t.split("/"),s=n.length;return n.some(sy)&&(s+=mk),e&&(s+=dk),n.filter(i=>!sy(i)).reduce((i,a)=>i+(ck.test(a)?uk:a===""?hk:fk),s)}function gk(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function xk(t,e,n){let{routesMeta:s}=t,i={},a="/",o=[];for(let c=0;c<s.length;++c){let u=s[c],d=c===s.length-1,h=a==="/"?e:e.slice(a.length)||"/",m=yk({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Lr([a,m.pathname]),pathnameBase:jk(Lr([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=Lr([a,m.pathnameBase]))}return o}function yk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=vk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((d,h,m)=>{let{paramName:p,isOptional:v}=h;if(p==="*"){let R=c[m]||"";o=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const _=c[m];return v&&!_?d[p]=void 0:d[p]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function vk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function wk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ag(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function _k(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?to(t):t;return{pathname:n?n.startsWith("/")?n:bk(n,e):e,search:Ek(s),hash:kk(i)}}function bk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hf(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function og(t,e){let n=Nk(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function lg(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=to(t):(i=Ml({},t),rt(!i.pathname||!i.pathname.includes("?"),hf("?","pathname","search",i)),rt(!i.pathname||!i.pathname.includes("#"),hf("#","pathname","hash",i)),rt(!i.search||!i.search.includes("#"),hf("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}c=m>=0?e[m]:"/"}let u=_k(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Lr=t=>t.join("/").replace(/\/\/+/g,"/"),jk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ek=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Tk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ob=["post","put","patch","delete"];new Set(ob);const Ik=["get",...ob];new Set(Ik);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Vl.apply(this,arguments)}const cg=I.createContext(null),Sk=I.createContext(null),Gr=I.createContext(null),Zd=I.createContext(null),Qr=I.createContext({outlet:null,matches:[],isDataRoute:!1}),lb=I.createContext(null);function Ck(t,e){let{relative:n}=e===void 0?{}:e;no()||rt(!1);let{basename:s,navigator:i}=I.useContext(Gr),{hash:a,pathname:o,search:c}=ub(t,{relative:n}),u=o;return s!=="/"&&(u=o==="/"?s:Lr([s,o])),i.createHref({pathname:u,search:c,hash:a})}function no(){return I.useContext(Zd)!=null}function Xr(){return no()||rt(!1),I.useContext(Zd).location}function cb(t){I.useContext(Gr).static||I.useLayoutEffect(t)}function Xt(){let{isDataRoute:t}=I.useContext(Qr);return t?zk():Ak()}function Ak(){no()||rt(!1);let t=I.useContext(cg),{basename:e,future:n,navigator:s}=I.useContext(Gr),{matches:i}=I.useContext(Qr),{pathname:a}=Xr(),o=JSON.stringify(og(i,n.v7_relativeSplatPath)),c=I.useRef(!1);return cb(()=>{c.current=!0}),I.useCallback(function(d,h){if(h===void 0&&(h={}),!c.current)return;if(typeof d=="number"){s.go(d);return}let m=lg(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Lr([e,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[e,s,o,a,t])}function ub(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=I.useContext(Gr),{matches:i}=I.useContext(Qr),{pathname:a}=Xr(),o=JSON.stringify(og(i,s.v7_relativeSplatPath));return I.useMemo(()=>lg(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function Rk(t,e){return Pk(t,e)}function Pk(t,e,n,s){no()||rt(!1);let{navigator:i}=I.useContext(Gr),{matches:a}=I.useContext(Qr),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Xr(),h;if(e){var m;let k=typeof e=="string"?to(e):e;u==="/"||(m=k.pathname)!=null&&m.startsWith(u)||rt(!1),h=k}else h=d;let p=h.pathname||"/",v=p;if(u!=="/"){let k=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=ak(t,{pathname:v}),R=Vk(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:Lr([u,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:Lr([u,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,n,s);return e&&R?I.createElement(Zd.Provider,{value:{location:Vl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Er.Pop}},R):R}function Dk(){let t=Bk(),e=Tk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,null)}const Lk=I.createElement(Dk,null);class Ok extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(Qr.Provider,{value:this.props.routeContext},I.createElement(lb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mk(t){let{routeContext:e,match:n,children:s}=t,i=I.useContext(cg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Qr.Provider,{value:e},s)}function Vk(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let h=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);h>=0||rt(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:v}=n,_=m.route.loader&&p[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||_){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,p)=>{let v,_=!1,R=null,k=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,R=m.route.errorElement||Lk,u&&(d<0&&p===0?(qk("route-fallback"),_=!0,k=null):d===p&&(_=!0,k=m.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),w=()=>{let y;return v?y=R:_?y=k:m.route.Component?y=I.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=h,I.createElement(Mk,{match:m,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:y})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?I.createElement(Ok,{location:n.location,revalidation:n.revalidation,component:R,error:v,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var db=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(db||{}),hb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hb||{});function Fk(t){let e=I.useContext(cg);return e||rt(!1),e}function Uk(t){let e=I.useContext(Sk);return e||rt(!1),e}function $k(t){let e=I.useContext(Qr);return e||rt(!1),e}function fb(t){let e=$k(),n=e.matches[e.matches.length-1];return n.route.id||rt(!1),n.route.id}function Bk(){var t;let e=I.useContext(lb),n=Uk(),s=fb();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function zk(){let{router:t}=Fk(db.UseNavigateStable),e=fb(hb.UseNavigateStable),n=I.useRef(!1);return cb(()=>{n.current=!0}),I.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Vl({fromRouteId:e},a)))},[t,e])}const ry={};function qk(t,e,n){ry[t]||(ry[t]=!0)}function Hk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ug(t){let{to:e,replace:n,state:s,relative:i}=t;no()||rt(!1);let{future:a,static:o}=I.useContext(Gr),{matches:c}=I.useContext(Qr),{pathname:u}=Xr(),d=Xt(),h=lg(e,og(c,a.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(h);return I.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:i}),[d,m,i,n,s]),null}function Ee(t){rt(!1)}function Wk(t){let{basename:e="/",children:n=null,location:s,navigationType:i=Er.Pop,navigator:a,static:o=!1,future:c}=t;no()&&rt(!1);let u=e.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:u,navigator:a,static:o,future:Vl({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof s=="string"&&(s=to(s));let{pathname:h="/",search:m="",hash:p="",state:v=null,key:_="default"}=s,R=I.useMemo(()=>{let k=ag(h,u);return k==null?null:{location:{pathname:k,search:m,hash:p,state:v,key:_},navigationType:i}},[u,h,m,p,v,_,i]);return R==null?null:I.createElement(Gr.Provider,{value:d},I.createElement(Zd.Provider,{children:n,value:R}))}function Kk(t){let{children:e,location:n}=t;return Rk(Rm(e),n)}new Promise(()=>{});function Rm(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(s,i)=>{if(!I.isValidElement(s))return;let a=[...e,i];if(s.type===I.Fragment){n.push.apply(n,Rm(s.props.children,a));return}s.type!==Ee&&rt(!1),!s.props.index||!s.props.children||rt(!1);let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Rm(s.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pm(){return Pm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Pm.apply(this,arguments)}function Gk(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Qk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Xk(t,e){return t.button===0&&(!e||e==="_self")&&!Qk(t)}function Dm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function Yk(t,e){let n=Dm(t);return e&&e.forEach((s,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const Jk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Zk="6";try{window.__reactRouterVersion=Zk}catch{}const eT="startTransition",iy=H1[eT];function tT(t){let{basename:e,children:n,future:s,window:i}=t,a=I.useRef();a.current==null&&(a.current=sk({window:i,v5Compat:!0}));let o=a.current,[c,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},h=I.useCallback(m=>{d&&iy?iy(()=>u(m)):u(m)},[u,d]);return I.useLayoutEffect(()=>o.listen(h),[o,h]),I.useEffect(()=>Hk(s),[s]),I.createElement(Wk,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:s})}const nT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=I.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,p=Gk(e,Jk),{basename:v}=I.useContext(Gr),_,R=!1;if(typeof d=="string"&&sT.test(d)&&(_=d,nT))try{let y=new URL(window.location.href),j=d.startsWith("//")?new URL(y.protocol+d):new URL(d),C=ag(j.pathname,v);j.origin===y.origin&&C!=null?d=C+j.search+j.hash:R=!0}catch{}let k=Ck(d,{relative:i}),b=rT(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:m});function w(y){s&&s(y),y.defaultPrevented||b(y)}return I.createElement("a",Pm({},p,{href:_||k,onClick:R||a?s:w,ref:n,target:u}))});var ay;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ay||(ay={}));var oy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(oy||(oy={}));function rT(t,e){let{target:n,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=Xt(),d=Xr(),h=ub(t,{relative:o});return I.useCallback(m=>{if(Xk(m,n)){m.preventDefault();let p=s!==void 0?s:pd(d)===pd(h);u(t,{replace:p,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[d,u,h,s,i,n,t,a,o,c])}function mb(t){let e=I.useRef(Dm(t)),n=I.useRef(!1),s=Xr(),i=I.useMemo(()=>Yk(s.search,n.current?null:e.current),[s.search]),a=Xt(),o=I.useCallback((c,u)=>{const d=Dm(typeof c=="function"?c(i):c);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var ly={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iT=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[s++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},gb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,m=(a&3)<<4|c>>4;let p=(c&15)<<2|d>>6,v=d&63;u||(v=64,o||(p=64)),s.push(n[h],n[m],n[p],n[v])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||m==null)throw new aT;const p=a<<2|c>>4;if(s.push(p),d!==64){const v=c<<4&240|d>>2;if(s.push(v),m!==64){const _=d<<6&192|m;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oT=function(t){const e=pb(t);return gb.encodeByteArray(e,!0)},gd=function(t){return oT(t).replace(/\./g,"")},xb=function(t){try{return gb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=()=>lT().__FIREBASE_DEFAULTS__,uT=()=>{if(typeof process>"u"||typeof ly>"u")return;const t=ly.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xb(t[1]);return e&&JSON.parse(e)},eh=()=>{try{return cT()||uT()||dT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yb=t=>{var e,n;return(n=(e=eh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vb=t=>{const e=yb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},wb=()=>{var t;return(t=eh())===null||t===void 0?void 0:t.config},_b=t=>{var e;return(e=eh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gd(JSON.stringify(n)),gd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function mT(){var t;const e=(t=eh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yT(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vT(){return!mT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wT(){try{return typeof indexedDB=="object"}catch{return!1}}function _T(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="FirebaseError";class js extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=bT,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rc.prototype.create)}}class rc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?NT(a,s):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new js(i,c,s)}}function NT(t,e){return t.replace(jT,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const jT=/\{\$([^}]+)}/g;function ET(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xd(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const a=t[i],o=e[i];if(cy(a)&&cy(o)){if(!xd(a,o))return!1}else if(a!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function cy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,a]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Yo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kT(t,e){const n=new TT(t,e);return n.subscribe.bind(n)}class TT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");IT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=ff),i.error===void 0&&(i.error=ff),i.complete===void 0&&(i.complete=ff);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ff(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class Ur{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new hT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AT(e))try{this.getOrInitializeService({instanceIdentifier:di})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});s.resolve(a)}catch{}}}}clearInstance(e=di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=di){return this.instances.has(e)}getOptions(e=di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);s===c&&o.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:CT(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=di){return this.component?this.component.multipleInstances?e:di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CT(t){return t===di?void 0:t}function AT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ST(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const PT={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},DT=we.INFO,LT={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},OT=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=LT[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dg{constructor(e){this.name=e,this._logLevel=DT,this._logHandler=OT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const MT=(t,e)=>e.some(n=>t instanceof n);let uy,dy;function VT(){return uy||(uy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FT(){return dy||(dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nb=new WeakMap,Lm=new WeakMap,jb=new WeakMap,mf=new WeakMap,hg=new WeakMap;function UT(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Or(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Nb.set(n,t)}).catch(()=>{}),hg.set(e,t),e}function $T(t){if(Lm.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Lm.set(t,e)}let Om={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BT(t){Om=t(Om)}function zT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(pf(this),e,...n);return jb.set(s,e.sort?e.sort():[e]),Or(s)}:FT().includes(t)?function(...e){return t.apply(pf(this),e),Or(Nb.get(this))}:function(...e){return Or(t.apply(pf(this),e))}}function qT(t){return typeof t=="function"?zT(t):(t instanceof IDBTransaction&&$T(t),MT(t,VT())?new Proxy(t,Om):t)}function Or(t){if(t instanceof IDBRequest)return UT(t);if(mf.has(t))return mf.get(t);const e=qT(t);return e!==t&&(mf.set(t,e),hg.set(e,t)),e}const pf=t=>hg.get(t);function HT(t,e,{blocked:n,upgrade:s,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=Or(o);return s&&o.addEventListener("upgradeneeded",u=>{s(Or(o.result),u.oldVersion,u.newVersion,Or(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const WT=["get","getKey","getAll","getAllKeys","count"],KT=["put","add","delete","clear"],gf=new Map;function hy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=KT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||WT.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return s&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return gf.set(e,a),a}BT(t=>({...t,get:(e,n,s)=>hy(e,n)||t.get(e,n,s),has:(e,n)=>!!hy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function QT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mm="@firebase/app",fy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new dg("@firebase/app"),XT="@firebase/app-compat",YT="@firebase/analytics-compat",JT="@firebase/analytics",ZT="@firebase/app-check-compat",eI="@firebase/app-check",tI="@firebase/auth",nI="@firebase/auth-compat",sI="@firebase/database",rI="@firebase/data-connect",iI="@firebase/database-compat",aI="@firebase/functions",oI="@firebase/functions-compat",lI="@firebase/installations",cI="@firebase/installations-compat",uI="@firebase/messaging",dI="@firebase/messaging-compat",hI="@firebase/performance",fI="@firebase/performance-compat",mI="@firebase/remote-config",pI="@firebase/remote-config-compat",gI="@firebase/storage",xI="@firebase/storage-compat",yI="@firebase/firestore",vI="@firebase/vertexai-preview",wI="@firebase/firestore-compat",_I="firebase",bI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="[DEFAULT]",NI={[Mm]:"fire-core",[XT]:"fire-core-compat",[JT]:"fire-analytics",[YT]:"fire-analytics-compat",[eI]:"fire-app-check",[ZT]:"fire-app-check-compat",[tI]:"fire-auth",[nI]:"fire-auth-compat",[sI]:"fire-rtdb",[rI]:"fire-data-connect",[iI]:"fire-rtdb-compat",[aI]:"fire-fn",[oI]:"fire-fn-compat",[lI]:"fire-iid",[cI]:"fire-iid-compat",[uI]:"fire-fcm",[dI]:"fire-fcm-compat",[hI]:"fire-perf",[fI]:"fire-perf-compat",[mI]:"fire-rc",[pI]:"fire-rc-compat",[gI]:"fire-gcs",[xI]:"fire-gcs-compat",[yI]:"fire-fst",[wI]:"fire-fst-compat",[vI]:"fire-vertex","fire-js":"fire-js",[_I]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Map,jI=new Map,Fm=new Map;function my(t,e){try{t.container.addComponent(e)}catch(n){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Si(t){const e=t.name;if(Fm.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,t);for(const n of Fl.values())my(n,t);for(const n of jI.values())my(n,t);return!0}function th(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new rc("app","Firebase",EI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=bI;function Eb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Vm,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw Mr.create("bad-app-name",{appName:String(i)});if(n||(n=wb()),!n)throw Mr.create("no-options");const a=Fl.get(i);if(a){if(xd(n,a.options)&&xd(s,a.config))return a;throw Mr.create("duplicate-app",{appName:i})}const o=new RT(i);for(const u of Fm.values())o.addComponent(u);const c=new kI(n,s,o);return Fl.set(i,c),c}function nh(t=Vm){const e=Fl.get(t);if(!e&&t===Vm&&wb())return Eb();if(!e)throw Mr.create("no-app",{appName:t});return e}function kb(){return Array.from(Fl.values())}function xs(t,e,n){var s;let i=(s=NI[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(c.join(" "));return}Si(new Ur(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebase-heartbeat-database",II=1,Ul="firebase-heartbeat-store";let xf=null;function Tb(){return xf||(xf=HT(TI,II,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ul)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),xf}async function SI(t){try{const n=(await Tb()).transaction(Ul),s=await n.objectStore(Ul).get(Ib(t));return await n.done,s}catch(e){if(e instanceof js)Ys.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ys.warn(n.message)}}}async function py(t,e){try{const s=(await Tb()).transaction(Ul,"readwrite");await s.objectStore(Ul).put(e,Ib(t)),await s.done}catch(n){if(n instanceof js)Ys.warn(n.message);else{const s=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ys.warn(s.message)}}}function Ib(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=1024,AI=30*24*60*60*1e3;class RI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=gy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=AI}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Ys.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gy(),{heartbeatsToSend:s,unsentEntries:i}=PI(this._heartbeatsCache.heartbeats),a=gd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ys.warn(n),""}}}function gy(){return new Date().toISOString().substring(0,10)}function PI(t,e=CI){const n=[];let s=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),xy(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xy(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class DI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wT()?_T().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return py(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return py(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xy(t){return gd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){Si(new Ur("platform-logger",e=>new GT(e),"PRIVATE")),Si(new Ur("heartbeat",e=>new RI(e),"PRIVATE")),xs(Mm,fy,t),xs(Mm,fy,"esm2017"),xs("fire-js","")}LI("");function fg(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function Sb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OI=Sb,Cb=new rc("auth","Firebase",Sb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new dg("@firebase/auth");function MI(t,...e){yd.logLevel<=we.WARN&&yd.warn(`Auth (${Ui}): ${t}`,...e)}function Lu(t,...e){yd.logLevel<=we.ERROR&&yd.error(`Auth (${Ui}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,...e){throw mg(t,...e)}function wn(t,...e){return mg(t,...e)}function Ab(t,e,n){const s=Object.assign(Object.assign({},OI()),{[e]:n});return new rc("auth","Firebase",s).create(e,{appName:t.name})}function ys(t){return Ab(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mg(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Cb.create(t,...e)}function te(t,e,...n){if(!t)throw mg(e,...n)}function Fs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lu(e),new Error(e)}function Js(t,e){t||Fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Rb(){return yy()==="http:"||yy()==="https:"}function yy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Rb()||gT()||"connection"in navigator)?navigator.onLine:!0}function FI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.shortDelay=e,this.longDelay=n,Js(n>e,"Short delay should be less than long delay!"),this.isMobile=fT()||xT()}get(){return VI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t,e){Js(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=new ic(3e4,6e4);function an(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $n(t,e,n,s,i={}){return Db(t,i,async()=>{let a={},o={};s&&(e==="GET"?o=s:a={body:JSON.stringify(s)});const c=so(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return pT()||(d.referrerPolicy="no-referrer"),Pb.fetch()(Lb(t,t.config.apiHost,n,c),d)})}async function Db(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},UI),e);try{const i=new zI(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Jo(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jo(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Jo(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Jo(t,"user-disabled",o);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ab(t,h,d);is(t,h)}}catch(i){if(i instanceof js)throw i;is(t,"network-request-failed",{message:String(i)})}}async function Yr(t,e,n,s,i={}){const a=await $n(t,e,n,s,i);return"mfaPendingCredential"in a&&is(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Lb(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?pg(t.config,i):`${t.config.apiScheme}://${i}`}function BI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(wn(this.auth,"network-request-failed")),$I.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jo(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=wn(t,e,s);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t){return t!==void 0&&t.getResponse!==void 0}function wy(t){return t!==void 0&&t.enterprise!==void 0}class qI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HI(t){return(await $n(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function WI(t,e){return $n(t,"GET","/v2/recaptchaConfig",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(t,e){return $n(t,"POST","/v1/accounts:delete",e)}async function Ob(t,e){return $n(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GI(t,e=!1){const n=Ue(t),s=await n.getIdToken(e),i=gg(s);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:s,authTime:dl(yf(i.auth_time)),issuedAtTime:dl(yf(i.iat)),expirationTime:dl(yf(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function yf(t){return Number(t)*1e3}function gg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Lu("JWT malformed, contained fewer than 3 sections"),null;try{const i=xb(n);return i?JSON.parse(i):(Lu("Failed to decode base64 JWT payload"),null)}catch(i){return Lu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function _y(t){const e=gg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof js&&QI(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function QI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dl(this.lastLoginAt),this.creationTime=dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(t){var e;const n=t.auth,s=await t.getIdToken(),i=await $l(t,Ob(n,{idToken:s}));te(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Mb(a.providerUserInfo):[],c=JI(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),h=u?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new $m(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function YI(t){const e=Ue(t);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JI(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function Mb(t){return t.map(e=>{var{providerId:n}=e,s=fg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(t,e){const n=await Db(t,{},async()=>{const s=so({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=Lb(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Pb.fetch()(o,{method:"POST",headers:c,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eS(t,e){return $n(t,"POST","/v2/accounts:revokeToken",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_y(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=_y(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:a}=await ZI(e,n);this.updateTokensAndExpiration(s,i,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:a}=n,o=new Ra;return s&&(te(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(te(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ra,this.toJSON())}_performRefresh(){return Fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Us{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,a=fg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new $m(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await $l(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GI(this,e)}reload(){return YI(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Us(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await vd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await $l(this,KI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,a,o,c,u,d,h;const m=(s=n.displayName)!==null&&s!==void 0?s:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,v=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:y,emailVerified:j,isAnonymous:C,providerData:O,stsTokenManager:N}=n;te(y&&N,e,"internal-error");const x=Ra.fromJSON(this.name,N);te(typeof y=="string",e,"internal-error"),mr(m,e.name),mr(p,e.name),te(typeof j=="boolean",e,"internal-error"),te(typeof C=="boolean",e,"internal-error"),mr(v,e.name),mr(_,e.name),mr(R,e.name),mr(k,e.name),mr(b,e.name),mr(w,e.name);const E=new Us({uid:y,auth:e,email:p,emailVerified:j,displayName:m,isAnonymous:C,photoURL:_,phoneNumber:v,tenantId:R,stsTokenManager:x,createdAt:b,lastLoginAt:w});return O&&Array.isArray(O)&&(E.providerData=O.map(T=>Object.assign({},T))),k&&(E._redirectEventId=k),E}static async _fromIdTokenResponse(e,n,s=!1){const i=new Ra;i.updateFromServerResponse(n);const a=new Us({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await vd(a),a}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];te(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Mb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Ra;c.updateFromIdToken(s);const u=new Us({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $m(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=new Map;function $s(t){Js(t instanceof Function,"Expected a class definition");let e=by.get(t);return e?(Js(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,by.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Vb.type="NONE";const Ny=Vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t,e,n){return`firebase:${t}:${e}:${n}`}class Pa{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:a}=this.auth;this.fullUserKey=Ou(this.userKey,i.apiKey,a),this.fullPersistenceKey=Ou("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Us._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Pa($s(Ny),e,s);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||$s(Ny);const o=Ou(s,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){const m=Us._fromJSON(e,h);d!==a&&(c=m),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Pa(a,e,s):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Pa(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Bb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Fb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qb(e))return"Blackberry";if(Hb(e))return"Webos";if(Ub(e))return"Safari";if((e.includes("chrome/")||$b(e))&&!e.includes("edge/"))return"Chrome";if(zb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Fb(t=Bt()){return/firefox\//i.test(t)}function Ub(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $b(t=Bt()){return/crios\//i.test(t)}function Bb(t=Bt()){return/iemobile/i.test(t)}function zb(t=Bt()){return/android/i.test(t)}function qb(t=Bt()){return/blackberry/i.test(t)}function Hb(t=Bt()){return/webos/i.test(t)}function xg(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tS(t=Bt()){var e;return xg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nS(){return yT()&&document.documentMode===10}function Wb(t=Bt()){return xg(t)||zb(t)||Hb(t)||qb(t)||/windows phone/i.test(t)||Bb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t,e=[]){let n;switch(t){case"Browser":n=jy(Bt());break;case"Worker":n=`${jy(Bt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ui}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,e={}){return $n(t,"GET","/v2/passwordPolicy",an(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=6;class aS{constructor(e){var n,s,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:iS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,i,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ey(this),this.idTokenSubscription=new Ey(this),this.beforeStateQueue=new sS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$s(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await Pa.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ob(this,{idToken:e}),s=await Us._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(ys(this));const n=e?Ue(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rS(this),n=new aS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await eS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$s(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[$s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&MI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function sr(t){return Ue(t)}class Ey{constructor(e){this.auth=e,this.observer=null,this.addObserver=kT(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lS(t){ac=t}function yg(t){return ac.loadJS(t)}function cS(){return ac.recaptchaV2Script}function uS(){return ac.recaptchaEnterpriseScript}function dS(){return ac.gapiScript}function Gb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const hS="recaptcha-enterprise",fS="NO_RECAPTCHA";class mS{constructor(e){this.type=hS,this.auth=sr(e)}async verify(e="verify",n=!1){async function s(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{WI(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new qI(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;wy(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(fS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{s(this.auth).then(c=>{if(!n&&wy(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=uS();u.length!==0&&(u+=c),yg(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function ky(t,e,n,s=!1){const i=new mS(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o=Object.assign({},e);return s?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Bm(t,e,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ky(t,e,n,n==="getOobCode");return s(t,a)}else return s(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ky(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t,e){const n=th(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(xd(a,e??{}))return i;is(i,"already-initialized")}return n.initialize({options:e})}function pS(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map($s);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function gS(t,e,n){const s=sr(t);te(s._canInitEmulator,s,"emulator-config-failed"),te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,a=Xb(e),{host:o,port:c}=xS(e),u=c===null?"":`:${c}`;s.config.emulator={url:`${a}//${o}${u}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),yS()}function Xb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xS(t){const e=Xb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const a=i[1];return{host:a,port:Ty(s.substr(a.length+1))}}else{const[a,o]=s.split(":");return{host:a,port:Ty(o)}}}function Ty(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fs("not implemented")}_getIdTokenResponse(e){return Fs("not implemented")}_linkToIdToken(e,n){return Fs("not implemented")}_getReauthenticationResolver(e){return Fs("not implemented")}}async function vS(t,e){return $n(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(t,e){return Yr(t,"POST","/v1/accounts:signInWithPassword",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(t,e){return Yr(t,"POST","/v1/accounts:signInWithEmailLink",an(t,e))}async function bS(t,e){return Yr(t,"POST","/v1/accounts:signInWithEmailLink",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends sh{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Bl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Bl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,n,"signInWithPassword",wS);case"emailLink":return _S(e,{email:this._email,oobCode:this._password});default:is(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,s,"signUpPassword",vS);case"emailLink":return bS(e,{idToken:n,email:this._email,oobCode:this._password});default:is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e){return Yr(t,"POST","/v1/accounts:signInWithIdp",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="http://localhost";class Ci extends sh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ci(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=n,a=fg(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new Ci(s,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Da(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Da(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Da(e,n)}buildRequest(){const e={requestUri:NS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=so(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(t,e){return $n(t,"POST","/v1/accounts:sendVerificationCode",an(t,e))}async function ES(t,e){return Yr(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,e))}async function kS(t,e){const n=await Yr(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,e));if(n.temporaryProof)throw Jo(t,"account-exists-with-different-credential",n);return n}const TS={USER_NOT_FOUND:"user-not-found"};async function IS(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Yr(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,n),TS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends sh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new hl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new hl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return ES(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return kS(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return IS(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:s,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:s,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:s,phoneNumber:i,temporaryProof:a}=e;return!s&&!n&&!i&&!a?null:new hl({verificationId:n,verificationCode:s,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CS(t){const e=Xo(Yo(t)).link,n=e?Xo(Yo(e)).deep_link_id:null,s=Xo(Yo(t)).deep_link_id;return(s?Xo(Yo(s)).link:null)||s||n||e||t}class vg{constructor(e){var n,s,i,a,o,c;const u=Xo(Yo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(s=u.oobCode)!==null&&s!==void 0?s:null,m=SS((i=u.mode)!==null&&i!==void 0?i:null);te(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=CS(e);try{return new vg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.providerId=ro.PROVIDER_ID}static credential(e,n){return Bl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=vg.parseLink(n);return te(s,"argument-error"),Bl._fromEmailAndCode(e,s.code,s.tenantId)}}ro.PROVIDER_ID="password";ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends Yb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends oc{constructor(){super("facebook.com")}static credential(e){return Ci._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ci._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return wr.credential(n,s)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends oc{constructor(){super("github.com")}static credential(e){return Ci._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends oc{constructor(){super("twitter.com")}static credential(e,n){return Ci._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return br.credential(n,s)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(t,e){return Yr(t,"POST","/v1/accounts:signUp",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const a=await Us._fromIdTokenResponse(e,s,i),o=Iy(s);return new Ai({user:a,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=Iy(s);return new Ai({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function Iy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends js{constructor(e,n,s,i){var a;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,wd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new wd(e,n,s,i)}}function Jb(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?wd._fromErrorAndOperation(t,a,e,s):a})}async function RS(t,e,n=!1){const s=await $l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ai._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(t,e,n=!1){const{auth:s}=t;if(Yn(s.app))return Promise.reject(ys(s));const i="reauthenticate";try{const a=await $l(t,Jb(s,i,e,t),n);te(a.idToken,s,"internal-error");const o=gg(a.idToken);te(o,s,"internal-error");const{sub:c}=o;return te(t.uid===c,s,"user-mismatch"),Ai._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&is(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(t,e,n=!1){if(Yn(t.app))return Promise.reject(ys(t));const s="signIn",i=await Jb(t,s,e),a=await Ai._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(a.user),a}async function eN(t,e){return Zb(sr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t){const e=sr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fl(t,e,n){if(Yn(t.app))return Promise.reject(ys(t));const s=sr(t),o=await Bm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&tN(t),u}),c=await Ai._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(c.user),c}function DS(t,e,n){return Yn(t.app)?Promise.reject(ys(t)):eN(Ue(t),ro.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&tN(t),s})}function LS(t,e,n,s){return Ue(t).onIdTokenChanged(e,n,s)}function OS(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function MS(t,e,n,s){return Ue(t).onAuthStateChanged(e,n,s)}function VS(t){return Ue(t).signOut()}async function FS(t){return Ue(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){return $n(t,"POST","/v2/accounts/mfaEnrollment:start",an(t,e))}const _d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=1e3,BS=10;class sN extends nN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},a=this.storage.getItem(s);nS()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BS):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},$S)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sN.type="LOCAL";const rN=sN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN extends nN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iN.type="SESSION";const aN=iN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new rh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await zS(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=wg("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(){return window}function HS(t){ct().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(){return typeof ct().WorkerGlobalScope<"u"&&typeof ct().importScripts=="function"}async function WS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GS(){return _g()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="firebaseLocalStorageDb",QS=1,bd="firebaseLocalStorage",lN="fbase_key";class lc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ih(t,e){return t.transaction([bd],e?"readwrite":"readonly").objectStore(bd)}function XS(){const t=indexedDB.deleteDatabase(oN);return new lc(t).toPromise()}function zm(){const t=indexedDB.open(oN,QS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(bd,{keyPath:lN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(bd)?e(s):(s.close(),await XS(),e(await zm()))})})}async function Sy(t,e,n){const s=ih(t,!0).put({[lN]:e,value:n});return new lc(s).toPromise()}async function YS(t,e){const n=ih(t,!1).get(e),s=await new lc(n).toPromise();return s===void 0?null:s.value}function Cy(t,e){const n=ih(t,!0).delete(e);return new lc(n).toPromise()}const JS=800,ZS=3;class cN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ZS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _g()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rh._getInstance(GS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await WS(),!this.activeServiceWorker)return;this.sender=new qS(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zm();return await Sy(e,_d,"1"),await Cy(e,_d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Sy(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>YS(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ih(i,!1).getAll();return new lc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cN.type="LOCAL";const uN=cN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e){return $n(t,"POST","/v2/accounts/mfaSignIn:start",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=500,nC=6e4,fu=1e12;class sC{constructor(e){this.auth=e,this.counter=fu,this._widgets=new Map}render(e,n){const s=this.counter;return this._widgets.set(s,new rC(e,this.auth.name,n||{})),this.counter++,s}reset(e){var n;const s=e||fu;(n=this._widgets.get(s))===null||n===void 0||n.delete(),this._widgets.delete(s)}getResponse(e){var n;const s=e||fu;return((n=this._widgets.get(s))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const s=e||fu;return(n=this._widgets.get(s))===null||n===void 0||n.execute(),""}}class rC{constructor(e,n,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;te(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=iC(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},nC)},tC))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function iC(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<t;s++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=Gb("rcb"),aC=new ic(3e4,6e4);class oC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ct().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return te(lC(n),e,"argument-error"),this.shouldResolveImmediately(n)&&vy(ct().grecaptcha)?Promise.resolve(ct().grecaptcha):new Promise((s,i)=>{const a=ct().setTimeout(()=>{i(wn(e,"network-request-failed"))},aC.get());ct()[vf]=()=>{ct().clearTimeout(a),delete ct()[vf];const c=ct().grecaptcha;if(!c||!vy(c)){i(wn(e,"internal-error"));return}const u=c.render;c.render=(d,h)=>{const m=u(d,h);return this.counter++,m},this.hostLanguage=n,s(c)};const o=`${cS()}?${so({onload:vf,render:"explicit",hl:n})}`;yg(o).catch(()=>{clearTimeout(a),i(wn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ct().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function lC(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class cC{async load(e){return new sC(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="recaptcha",uC={theme:"light",type:"image"};class Ay{constructor(e,n,s=Object.assign({},uC)){this.parameters=s,this.type=dN,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=sr(e),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;te(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cC:new oC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),s=n.getResponse(e);return s||new Promise(i=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),i(o))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(s=>s(n)),typeof e=="function")e(n);else if(typeof e=="string"){const s=ct()[e];typeof s=="function"&&s(n)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(Rb()&&!_g(),this.auth,"internal-error"),await dC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await HI(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function dC(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=hl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function fC(t,e,n){if(Yn(t.app))return Promise.reject(ys(t));const s=sr(t),i=await mC(s,e,Ue(n));return new hC(i,a=>eN(s,a))}async function mC(t,e,n){var s;const i=await n.verify();try{te(typeof i=="string",t,"argument-error"),te(n.type===dN,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const o=a.session;if("phoneNumber"in a)return te(o.type==="enroll",t,"internal-error"),(await US(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{te(o.type==="signin",t,"internal-error");const c=((s=a.multiFactorHint)===null||s===void 0?void 0:s.uid)||a.multiFactorUid;return te(c,t,"missing-multi-factor-info"),(await eC(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await jS(t,{phoneNumber:a.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t,e){return e?$s(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends sh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gC(t){return Zb(t.auth,new bg(t),t.bypassAuthState)}function xC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),PS(n,new bg(t),t.bypassAuthState)}async function yC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),RS(n,new bg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,s,i,a=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gC;case"linkViaPopup":case"linkViaRedirect":return yC;case"reauthViaPopup":case"reauthViaRedirect":return xC;default:is(this.auth,"internal-error")}}resolve(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new ic(2e3,1e4);class ja extends hN{constructor(e,n,s,i,a){super(e,n,i,a),this.provider=s,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Js(this.filter.length===1,"Popup operations only handle one event");const e=wg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vC.get())};e()}}ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="pendingRedirect",Mu=new Map;class _C extends hN{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Mu.get(this.auth._key());if(!e){try{const s=await bC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Mu.set(this.auth._key(),e)}return this.bypassAuthState||Mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bC(t,e){const n=EC(e),s=jC(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function NC(t,e){Mu.set(t._key(),e)}function jC(t){return $s(t._redirectPersistence)}function EC(t){return Ou(wC,t.config.apiKey,t.name)}async function kC(t,e,n=!1){if(Yn(t.app))return Promise.reject(ys(t));const s=sr(t),i=pC(s,e),o=await new _C(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=10*60*1e3;class IC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!fN(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ry(e))}saveEventToCache(e){this.cachedEventUids.add(Ry(e)),this.lastProcessedEventTime=Date.now()}}function Ry(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(t,e={}){return $n(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RC=/^https?/;async function PC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CC(t);for(const n of e)try{if(DC(n))return}catch{}is(t,"unauthorized-domain")}function DC(t){const e=Um(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!RC.test(n))return!1;if(AC.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new ic(3e4,6e4);function Py(){const t=ct().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OC(t){return new Promise((e,n)=>{var s,i,a;function o(){Py(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Py(),n(wn(t,"network-request-failed"))},timeout:LC.get()})}if(!((i=(s=ct().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=ct().gapi)===null||a===void 0)&&a.load)o();else{const c=Gb("iframefcb");return ct()[c]=()=>{gapi.load?o():n(wn(t,"network-request-failed"))},yg(`${dS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Vu=null,e})}let Vu=null;function MC(t){return Vu=Vu||OC(t),Vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=new ic(5e3,15e3),FC="__/auth/iframe",UC="emulator/auth/iframe",$C={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zC(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pg(e,UC):`https://${t.config.authDomain}/${FC}`,s={apiKey:e.apiKey,appName:t.name,v:Ui},i=BC.get(t.config.apiHost);i&&(s.eid=i);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${so(s).slice(1)}`}async function qC(t){const e=await MC(t),n=ct().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:zC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$C,dontclear:!0},s=>new Promise(async(i,a)=>{await s.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),c=ct().setTimeout(()=>{a(o)},VC.get());function u(){ct().clearTimeout(c),i(s)}s.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WC=500,KC=600,GC="_blank",QC="http://localhost";class Dy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XC(t,e,n,s=WC,i=KC){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const u=Object.assign(Object.assign({},HC),{width:s.toString(),height:i.toString(),top:a,left:o}),d=Bt().toLowerCase();n&&(c=$b(d)?GC:n),Fb(d)&&(e=e||QC,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[v,_])=>`${p}${v}=${_},`,"");if(tS(d)&&c!=="_self")return YC(e||"",c),new Dy(null);const m=window.open(e||"",c,h);te(m,t,"popup-blocked");try{m.focus()}catch{}return new Dy(m)}function YC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="__/auth/handler",ZC="emulator/auth/handler",eA=encodeURIComponent("fac");async function Ly(t,e,n,s,i,a){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ui,eventId:i};if(e instanceof Yb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ET(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof oc){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${eA}=${encodeURIComponent(u)}`:"";return`${tA(t)}?${so(c).slice(1)}${d}`}function tA({config:t}){return t.emulator?pg(t,ZC):`https://${t.authDomain}/${JC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="webStorageSupport";class nA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aN,this._completeRedirectFn=kC,this._overrideRedirectResult=NC}async _openPopup(e,n,s,i){var a;Js((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Ly(e,n,s,Um(),i);return XC(e,o,wg())}async _openRedirect(e,n,s,i){await this._originValidation(e);const a=await Ly(e,n,s,Um(),i);return HS(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Js(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await qC(e),s=new IC(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wf,{type:wf},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[wf];o!==void 0&&n(!!o),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Wb()||Ub()||xg()}}const sA=nA;var Oy="@firebase/auth",My="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aA(t){Si(new Ur("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=s.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kb(t)},d=new oS(s,i,a,u);return pS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Si(new Ur("auth-internal",e=>{const n=sr(e.getProvider("auth").getImmediate());return(s=>new rA(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(Oy,My,iA(t)),xs(Oy,My,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=5*60,lA=_b("authIdTokenMaxAge")||oA;let Vy=null;const cA=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>lA)return;const i=n==null?void 0:n.token;Vy!==i&&(Vy=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uA(t=nh()){const e=th(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Qb(t,{popupRedirectResolver:sA,persistence:[uN,rN,aN]}),s=_b("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const o=cA(a.toString());OS(n,o,()=>o(n.currentUser)),LS(n,c=>o(c))}}const i=yb("auth");return i&&gS(n,`http://${i}`),n}function dA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lS({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const a=wn("internal-error");a.customData=i,n(a)},s.type="text/javascript",s.charset="UTF-8",dA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aA("Browser");var hA="firebase",fA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(hA,fA,"app");var Fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,mN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function E(){}E.prototype=x.prototype,N.D=x.prototype,N.prototype=new E,N.prototype.constructor=N,N.C=function(T,P,L){for(var D=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)D[ae-2]=arguments[ae];return x.prototype[P].apply(T,D)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,x,E){E||(E=0);var T=Array(16);if(typeof x=="string")for(var P=0;16>P;++P)T[P]=x.charCodeAt(E++)|x.charCodeAt(E++)<<8|x.charCodeAt(E++)<<16|x.charCodeAt(E++)<<24;else for(P=0;16>P;++P)T[P]=x[E++]|x[E++]<<8|x[E++]<<16|x[E++]<<24;x=N.g[0],E=N.g[1],P=N.g[2];var L=N.g[3],D=x+(L^E&(P^L))+T[0]+3614090360&4294967295;x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+T[1]+3905402710&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+T[2]+606105819&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+T[3]+3250441966&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(L^E&(P^L))+T[4]+4118548399&4294967295,x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+T[5]+1200080426&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+T[6]+2821735955&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+T[7]+4249261313&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(L^E&(P^L))+T[8]+1770035416&4294967295,x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+T[9]+2336552879&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+T[10]+4294925233&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+T[11]+2304563134&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(L^E&(P^L))+T[12]+1804603682&4294967295,x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+T[13]+4254626195&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+T[14]+2792965006&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+T[15]+1236535329&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(P^L&(E^P))+T[1]+4129170786&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+T[6]+3225465664&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+T[11]+643717713&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+T[0]+3921069994&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(E^P))+T[5]+3593408605&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+T[10]+38016083&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+T[15]+3634488961&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+T[4]+3889429448&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(E^P))+T[9]+568446438&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+T[14]+3275163606&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+T[3]+4107603335&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+T[8]+1163531501&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(E^P))+T[13]+2850285829&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+T[2]+4243563512&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+T[7]+1735328473&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+T[12]+2368359562&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(E^P^L)+T[5]+4294588738&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+T[8]+2272392833&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+T[11]+1839030562&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+T[14]+4259657740&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(E^P^L)+T[1]+2763975236&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+T[4]+1272893353&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+T[7]+4139469664&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+T[10]+3200236656&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(E^P^L)+T[13]+681279174&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+T[0]+3936430074&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+T[3]+3572445317&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+T[6]+76029189&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(E^P^L)+T[9]+3654602809&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+T[12]+3873151461&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+T[15]+530742520&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+T[2]+3299628645&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(P^(E|~L))+T[0]+4096336452&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+T[7]+1126891415&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+T[14]+2878612391&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+T[5]+4237533241&4294967295,E=P+(D<<21&4294967295|D>>>11),D=x+(P^(E|~L))+T[12]+1700485571&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+T[3]+2399980690&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+T[10]+4293915773&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+T[1]+2240044497&4294967295,E=P+(D<<21&4294967295|D>>>11),D=x+(P^(E|~L))+T[8]+1873313359&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+T[15]+4264355552&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+T[6]+2734768916&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+T[13]+1309151649&4294967295,E=P+(D<<21&4294967295|D>>>11),D=x+(P^(E|~L))+T[4]+4149444226&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+T[11]+3174756917&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+T[2]+718787259&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+T[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+P&4294967295,N.g[3]=N.g[3]+L&4294967295}s.prototype.u=function(N,x){x===void 0&&(x=N.length);for(var E=x-this.blockSize,T=this.B,P=this.h,L=0;L<x;){if(P==0)for(;L<=E;)i(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<x;)if(T[P++]=N.charCodeAt(L++),P==this.blockSize){i(this,T),P=0;break}}else for(;L<x;)if(T[P++]=N[L++],P==this.blockSize){i(this,T),P=0;break}}this.h=P,this.o+=x},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;var E=8*this.o;for(x=N.length-8;x<N.length;++x)N[x]=E&255,E/=256;for(this.u(N),N=Array(16),x=E=0;4>x;++x)for(var T=0;32>T;T+=8)N[E++]=this.g[x]>>>T&255;return N};function a(N,x){var E=c;return Object.prototype.hasOwnProperty.call(E,N)?E[N]:E[N]=x(N)}function o(N,x){this.h=x;for(var E=[],T=!0,P=N.length-1;0<=P;P--){var L=N[P]|0;T&&L==x||(E[P]=L,T=!1)}this.g=E}var c={};function u(N){return-128<=N&&128>N?a(N,function(x){return new o([x|0],0>x?-1:0)}):new o([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return k(d(-N));for(var x=[],E=1,T=0;N>=E;T++)x[T]=N/E|0,E*=4294967296;return new o(x,0)}function h(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return k(h(N.substring(1),x));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(x,8)),T=m,P=0;P<N.length;P+=8){var L=Math.min(8,N.length-P),D=parseInt(N.substring(P,P+L),x);8>L?(L=d(Math.pow(x,L)),T=T.j(L).add(d(D))):(T=T.j(E),T=T.add(d(D)))}return T}var m=u(0),p=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-k(this).m();for(var N=0,x=1,E=0;E<this.g.length;E++){var T=this.i(E);N+=(0<=T?T:4294967296+T)*x,x*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(_(this))return"0";if(R(this))return"-"+k(this).toString(N);for(var x=d(Math.pow(N,6)),E=this,T="";;){var P=j(E,x).g;E=b(E,P.j(x));var L=((0<E.g.length?E.g[0]:E.h)>>>0).toString(N);if(E=P,_(E))return L+T;for(;6>L.length;)L="0"+L;T=L+T}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function _(N){if(N.h!=0)return!1;for(var x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function R(N){return N.h==-1}t.l=function(N){return N=b(this,N),R(N)?-1:_(N)?0:1};function k(N){for(var x=N.g.length,E=[],T=0;T<x;T++)E[T]=~N.g[T];return new o(E,~N.h).add(p)}t.abs=function(){return R(this)?k(this):this},t.add=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],T=0,P=0;P<=x;P++){var L=T+(this.i(P)&65535)+(N.i(P)&65535),D=(L>>>16)+(this.i(P)>>>16)+(N.i(P)>>>16);T=D>>>16,L&=65535,D&=65535,E[P]=D<<16|L}return new o(E,E[E.length-1]&-2147483648?-1:0)};function b(N,x){return N.add(k(x))}t.j=function(N){if(_(this)||_(N))return m;if(R(this))return R(N)?k(this).j(k(N)):k(k(this).j(N));if(R(N))return k(this.j(k(N)));if(0>this.l(v)&&0>N.l(v))return d(this.m()*N.m());for(var x=this.g.length+N.g.length,E=[],T=0;T<2*x;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(var P=0;P<N.g.length;P++){var L=this.i(T)>>>16,D=this.i(T)&65535,ae=N.i(P)>>>16,V=N.i(P)&65535;E[2*T+2*P]+=D*V,w(E,2*T+2*P),E[2*T+2*P+1]+=L*V,w(E,2*T+2*P+1),E[2*T+2*P+1]+=D*ae,w(E,2*T+2*P+1),E[2*T+2*P+2]+=L*ae,w(E,2*T+2*P+2)}for(T=0;T<x;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=x;T<2*x;T++)E[T]=0;return new o(E,0)};function w(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function y(N,x){this.g=N,this.h=x}function j(N,x){if(_(x))throw Error("division by zero");if(_(N))return new y(m,m);if(R(N))return x=j(k(N),x),new y(k(x.g),k(x.h));if(R(x))return x=j(N,k(x)),new y(k(x.g),x.h);if(30<N.g.length){if(R(N)||R(x))throw Error("slowDivide_ only works with positive integers.");for(var E=p,T=x;0>=T.l(N);)E=C(E),T=C(T);var P=O(E,1),L=O(T,1);for(T=O(T,2),E=O(E,2);!_(T);){var D=L.add(T);0>=D.l(N)&&(P=P.add(E),L=D),T=O(T,1),E=O(E,1)}return x=b(N,P.j(x)),new y(P,x)}for(P=m;0<=N.l(x);){for(E=Math.max(1,Math.floor(N.m()/x.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),L=d(E),D=L.j(x);R(D)||0<D.l(N);)E-=T,L=d(E),D=L.j(x);_(L)&&(L=p),P=P.add(L),N=b(N,D)}return new y(P,N)}t.A=function(N){return j(this,N).h},t.and=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],T=0;T<x;T++)E[T]=this.i(T)&N.i(T);return new o(E,this.h&N.h)},t.or=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],T=0;T<x;T++)E[T]=this.i(T)|N.i(T);return new o(E,this.h|N.h)},t.xor=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],T=0;T<x;T++)E[T]=this.i(T)^N.i(T);return new o(E,this.h^N.h)};function C(N){for(var x=N.g.length+1,E=[],T=0;T<x;T++)E[T]=N.i(T)<<1|N.i(T-1)>>>31;return new o(E,N.h)}function O(N,x){var E=x>>5;x%=32;for(var T=N.g.length-E,P=[],L=0;L<T;L++)P[L]=0<x?N.i(L+E)>>>x|N.i(L+E+1)<<32-x:N.i(L+E);return new o(P,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,mN=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,wi=o}).apply(typeof Fy<"u"?Fy:typeof self<"u"?self:typeof window<"u"?window:{});var mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pN,Zo,gN,Fu,qm,xN,yN,vN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof mu=="object"&&mu];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function i(l,f){if(f)e:{var g=s;l=l.split(".");for(var S=0;S<l.length-1;S++){var M=l[S];if(!(M in g))break e;g=g[M]}l=l[l.length-1],S=g[l],f=f(S),f!=S&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function a(l,f){l instanceof String&&(l+="");var g=0,S=!1,M={next:function(){if(!S&&g<l.length){var U=g++;return{value:f(U,l[U]),done:!1}}return S=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(l){return l||function(){return a(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function m(l,f,g){if(!l)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,S),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function v(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function _(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(S,M,U){for(var Y=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)Y[Pe-2]=arguments[Pe];return f.prototype[M].apply(S,Y)}}function R(l){const f=l.length;if(0<f){const g=Array(f);for(let S=0;S<f;S++)g[S]=l[S];return g}return[]}function k(l,f){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(u(S)){const M=l.length||0,U=S.length||0;l.length=M+U;for(let Y=0;Y<U;Y++)l[M+Y]=S[Y]}else l.push(S)}}class b{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(l){return/^[\s\xa0]*$/.test(l)}function y(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var C=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function O(l,f,g){for(const S in l)f.call(g,l[S],S,l)}function N(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function x(l){const f={};for(const g in l)f[g]=l[g];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,f){let g,S;for(let M=1;M<arguments.length;M++){S=arguments[M];for(g in S)l[g]=S[g];for(let U=0;U<E.length;U++)g=E[U],Object.prototype.hasOwnProperty.call(S,g)&&(l[g]=S[g])}}function P(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function L(l){c.setTimeout(()=>{throw l},0)}function D(){var l=X;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ae{constructor(){this.h=this.g=null}add(f,g){const S=V.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var V=new b(()=>new $,l=>l.reset());class ${constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let B,F=!1,X=new ae,se=()=>{const l=c.Promise.resolve(void 0);B=()=>{l.then(be)}};var be=()=>{for(var l;l=D();){try{l.h.call(l.g)}catch(g){L(g)}var f=V;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}F=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Le(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Le.prototype.h=function(){this.defaultPrevented=!0};var At=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};c.addEventListener("test",g,f),c.removeEventListener("test",g,f)}catch{}return l}();function zn(l,f){if(Le.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(C){e:{try{j(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:on[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&zn.aa.h.call(this)}}_(zn,Le);var on={2:"touch",3:"pen",4:"mouse"};zn.prototype.h=function(){zn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ln="closure_listenable_"+(1e6*Math.random()|0),rr=0;function Ec(l,f,g,S,M){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=M,this.key=++rr,this.da=this.fa=!1}function ir(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Zr(l){this.src=l,this.g={},this.h=0}Zr.prototype.add=function(l,f,g,S,M){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var Y=zi(l,f,S,M);return-1<Y?(f=l[Y],g||(f.fa=!1)):(f=new Ec(f,this.src,U,!!S,M),f.fa=g,l.push(f)),f};function ks(l,f){var g=f.type;if(g in l.g){var S=l.g[g],M=Array.prototype.indexOf.call(S,f,void 0),U;(U=0<=M)&&Array.prototype.splice.call(S,M,1),U&&(ir(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function zi(l,f,g,S){for(var M=0;M<l.length;++M){var U=l[M];if(!U.da&&U.listener==f&&U.capture==!!g&&U.ha==S)return M}return-1}var qi="closure_lm_"+(1e6*Math.random()|0),Hi={};function ho(l,f,g,S,M){if(Array.isArray(f)){for(var U=0;U<f.length;U++)ho(l,f[U],g,S,M);return null}return g=xo(g),l&&l[ln]?l.K(f,g,d(S)?!!S.capture:!1,M):kc(l,f,g,!1,S,M)}function kc(l,f,g,S,M,U){if(!f)throw Error("Invalid event type");var Y=d(M)?!!M.capture:!!M,Pe=Wi(l);if(Pe||(l[qi]=Pe=new Zr(l)),g=Pe.add(f,g,S,Y,U),g.proxy)return g;if(S=fo(),g.proxy=S,S.src=l,S.listener=g,l.addEventListener)At||(M=Y),M===void 0&&(M=!1),l.addEventListener(f.toString(),S,M);else if(l.attachEvent)l.attachEvent(po(f.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function fo(){function l(g){return f.call(l.src,l.listener,g)}const f=go;return l}function mo(l,f,g,S,M){if(Array.isArray(f))for(var U=0;U<f.length;U++)mo(l,f[U],g,S,M);else S=d(S)?!!S.capture:!!S,g=xo(g),l&&l[ln]?(l=l.i,f=String(f).toString(),f in l.g&&(U=l.g[f],g=zi(U,g,S,M),-1<g&&(ir(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete l.g[f],l.h--)))):l&&(l=Wi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=zi(f,g,S,M)),(g=-1<l?f[l]:null)&&os(g))}function os(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[ln])ks(f.i,l);else{var g=l.type,S=l.proxy;f.removeEventListener?f.removeEventListener(g,S,l.capture):f.detachEvent?f.detachEvent(po(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=Wi(f))?(ks(g,l),g.h==0&&(g.src=null,f[qi]=null)):ir(l)}}}function po(l){return l in Hi?Hi[l]:Hi[l]="on"+l}function go(l,f){if(l.da)l=!0;else{f=new zn(f,this);var g=l.listener,S=l.ha||l.src;l.fa&&os(l),l=g.call(S,f)}return l}function Wi(l){return l=l[qi],l instanceof Zr?l:null}var Ts="__closure_events_fn_"+(1e9*Math.random()>>>0);function xo(l){return typeof l=="function"?l:(l[Ts]||(l[Ts]=function(f){return l.handleEvent(f)}),l[Ts])}function ot(){ye.call(this),this.i=new Zr(this),this.M=this,this.F=null}_(ot,ye),ot.prototype[ln]=!0,ot.prototype.removeEventListener=function(l,f,g,S){mo(this,l,f,g,S)};function xt(l,f){var g,S=l.F;if(S)for(g=[];S;S=S.F)g.push(S);if(l=l.M,S=f.type||f,typeof f=="string")f=new Le(f,l);else if(f instanceof Le)f.target=f.target||l;else{var M=f;f=new Le(S,l),T(f,M)}if(M=!0,g)for(var U=g.length-1;0<=U;U--){var Y=f.g=g[U];M=ei(Y,S,!0,f)&&M}if(Y=f.g=l,M=ei(Y,S,!0,f)&&M,M=ei(Y,S,!1,f)&&M,g)for(U=0;U<g.length;U++)Y=f.g=g[U],M=ei(Y,S,!1,f)&&M}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],S=0;S<g.length;S++)ir(g[S]);delete l.g[f],l.h--}}this.F=null},ot.prototype.K=function(l,f,g,S){return this.i.add(String(l),f,!1,g,S)},ot.prototype.L=function(l,f,g,S){return this.i.add(String(l),f,!0,g,S)};function ei(l,f,g,S){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,U=0;U<f.length;++U){var Y=f[U];if(Y&&!Y.da&&Y.capture==g){var Pe=Y.listener,jt=Y.ha||Y.src;Y.fa&&ks(l.i,Y),M=Pe.call(jt,S)!==!1&&M}}return M&&!S.defaultPrevented}function yo(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:c.setTimeout(l,f||0)}function Ki(l){l.g=yo(()=>{l.g=null,l.i&&(l.i=!1,Ki(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Tc extends ye{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ki(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tn(l){ye.call(this),this.h=l,this.g={}}_(Tn,ye);var vo=[];function Gi(l){O(l.g,function(f,g){this.g.hasOwnProperty(g)&&os(f)},l),l.g={}}Tn.prototype.N=function(){Tn.aa.N.call(this),Gi(this)},Tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qi=c.JSON.stringify,Ic=c.JSON.parse,Sc=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Xi(){}Xi.prototype.h=null;function wo(l){return l.h||(l.h=l.i())}function ls(){}var ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function or(){Le.call(this,"d")}_(or,Le);function Yi(){Le.call(this,"c")}_(Yi,Le);var cs={},_o=null;function qn(){return _o=_o||new ot}cs.La="serverreachability";function Cc(l){Le.call(this,cs.La,l)}_(Cc,Le);function ti(l){const f=qn();xt(f,new Cc(f))}cs.STAT_EVENT="statevent";function Ji(l,f){Le.call(this,cs.STAT_EVENT,l),this.stat=f}_(Ji,Le);function ft(l){const f=qn();xt(f,new Ji(f,l))}cs.Ma="timingevent";function Zi(l,f){Le.call(this,cs.Ma,l),this.size=f}_(Zi,Le);function lr(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},f)}function Is(){this.g=!0}Is.prototype.xa=function(){this.g=!1};function ea(l,f,g,S,M,U){l.info(function(){if(l.g)if(U)for(var Y="",Pe=U.split("&"),jt=0;jt<Pe.length;jt++){var Te=Pe[jt].split("=");if(1<Te.length){var Rt=Te[0];Te=Te[1];var Pt=Rt.split("_");Y=2<=Pt.length&&Pt[1]=="type"?Y+(Rt+"="+Te+"&"):Y+(Rt+"=redacted&")}}else Y=null;else Y=U;return"XMLHTTP REQ ("+S+") [attempt "+M+"]: "+f+`
`+g+`
`+Y})}function bo(l,f,g,S,M,U,Y){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+M+"]: "+f+`
`+g+`
`+U+" "+Y})}function Ss(l,f,g,S){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ac(l,g)+(S?" "+S:"")})}function No(l,f){l.info(function(){return"TIMEOUT: "+f})}Is.prototype.info=function(){};function Ac(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var S=g[l];if(!(2>S.length)){var M=S[1];if(Array.isArray(M)&&!(1>M.length)){var U=M[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Y=1;Y<M.length;Y++)M[Y]=""}}}}return Qi(g)}catch{return f}}var cr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ta;function Hn(){}_(Hn,Xi),Hn.prototype.g=function(){return new XMLHttpRequest},Hn.prototype.i=function(){return{}},ta=new Hn;function us(l,f,g,S){this.j=l,this.i=f,this.l=g,this.R=S||1,this.U=new Tn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ur}function ur(){this.i=null,this.g="",this.h=!1}var Rc={},Eo={};function ko(l,f,g){l.L=1,l.v=zt(Oe(f)),l.m=g,l.P=!0,Pc(l,null)}function Pc(l,f){l.F=Date.now(),ni(l),l.A=Oe(l.v);var g=l.A,S=l.R;Array.isArray(S)||(S=[String(S)]),Nx(g.i,"t",S),l.C=0,g=l.j.J,l.h=new ur,l.g=$x(l.j,g?f:null,!l.m),0<l.O&&(l.M=new Tc(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,S=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(vo[0]=M.toString()),M=vo);for(var U=0;U<M.length;U++){var Y=ho(g,M[U],S||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),ti(),ea(l.i,l.u,l.A,l.l,l.R,l.m)}us.prototype.ca=function(l){l=l.target;const f=this.M;f&&Rs(l)==3?f.j():this.Y(l)},us.prototype.Y=function(l){try{if(l==this.g)e:{const Pt=Rs(this.g);var f=this.g.Ba();const aa=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Cx(this.g)))){this.J||Pt!=4||f==7||(f==8||0>=aa?ti(3):ti(2)),To(this);var g=this.g.Z();this.X=g;t:if(Dc(this)){var S=Cx(this.g);l="";var M=S.length,U=Rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cs(this),si(this);var Y="";break t}this.h.i=new c.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(S[f],{stream:!(U&&f==M-1)});S.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,bo(this.i,this.u,this.A,this.l,this.R,Pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,jt=this.g;if((Pe=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Pe)){var Te=Pe;break t}}Te=null}if(g=Te)Ss(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Io(this,g);else{this.o=!1,this.s=3,ft(12),Cs(this),si(this);break e}}if(this.P){g=!0;let Wn;for(;!this.J&&this.C<Y.length;)if(Wn=mt(this,Y),Wn==Eo){Pt==4&&(this.s=4,ft(14),g=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==Rc){this.s=4,ft(15),Ss(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else Ss(this.i,this.l,Wn,null),Io(this,Wn);if(Dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||Y.length!=0||this.h.h||(this.s=1,ft(16),g=!1),this.o=this.o&&g,!g)Ss(this.i,this.l,Y,"[Invalid Chunked Response]"),Cs(this),si(this);else if(0<Y.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Mh(Rt),Rt.M=!0,ft(11))}}else Ss(this.i,this.l,Y,null),Io(this,Y);Pt==4&&Cs(this),this.o&&!this.J&&(Pt==4?Mx(this.j,this):(this.o=!1,ni(this)))}else k1(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Cs(this),si(this)}}}catch{}finally{}};function Dc(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function mt(l,f){var g=l.C,S=f.indexOf(`
`,g);return S==-1?Eo:(g=Number(f.substring(g,S)),isNaN(g)?Rc:(S+=1,S+g>f.length?Eo:(f=f.slice(S,S+g),l.C=S+g,f)))}us.prototype.cancel=function(){this.J=!0,Cs(this)};function ni(l){l.S=Date.now()+l.I,Lc(l,l.I)}function Lc(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=lr(p(l.ba,l),f)}function To(l){l.B&&(c.clearTimeout(l.B),l.B=null)}us.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(No(this.i,this.A),this.L!=2&&(ti(),ft(17)),Cs(this),this.s=2,si(this)):Lc(this,this.S-l)};function si(l){l.j.G==0||l.J||Mx(l.j,l)}function Cs(l){To(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Gi(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Io(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||na(g.h,l))){if(!l.K&&na(g.h,l)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var M=S;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Kc(g),Hc(g);else break e;Oh(g),ft(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=lr(p(g.Za,g),6e3));if(1>=Vc(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ai(g,11)}else if((l.K||g.g==l)&&Kc(g),!w(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let Te=M[f];if(g.T=Te[0],Te=Te[1],g.G==2)if(Te[0]=="c"){g.K=Te[1],g.ia=Te[2];const Rt=Te[3];Rt!=null&&(g.la=Rt,g.j.info("VER="+g.la));const Pt=Te[4];Pt!=null&&(g.Aa=Pt,g.j.info("SVER="+g.Aa));const aa=Te[5];aa!=null&&typeof aa=="number"&&0<aa&&(S=1.5*aa,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Wn=l.g;if(Wn){const Qc=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qc){var U=S.h;U.g||Qc.indexOf("spdy")==-1&&Qc.indexOf("quic")==-1&&Qc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(sa(U,U.h),U.h=null))}if(S.D){const Vh=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vh&&(S.ya=Vh,de(S.I,S.D,Vh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var Y=l;if(S.qa=Ux(S,S.J?S.ia:null,S.W),Y.K){So(S.h,Y);var Pe=Y,jt=S.L;jt&&(Pe.I=jt),Pe.B&&(To(Pe),ni(Pe)),S.g=Y}else Lx(S);0<g.i.length&&Wc(g)}else Te[0]!="stop"&&Te[0]!="close"||ai(g,7);else g.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?ai(g,7):Lh(g):Te[0]!="noop"&&g.l&&g.l.ta(Te),g.v=0)}}ti(4)}catch{}}var Ch=class{constructor(l,f){this.g=l,this.map=f}};function Oc(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mc(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Vc(l){return l.h?1:l.g?l.g.size:0}function na(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function sa(l,f){l.g?l.g.add(f):l.h=f}function So(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Oc.prototype.cancel=function(){if(this.i=Co(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Co(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return R(l.i)}function A(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,S=0;S<g;S++)f.push(l[S]);return f}f=[],g=0;for(S in l)f[g++]=l[S];return f}function H(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const S in l)f[g++]=S;return f}}}function W(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=H(l),S=A(l),M=S.length,U=0;U<M;U++)f.call(void 0,S[U],g&&g[U],l)}var re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ue(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var S=l[g].indexOf("="),M=null;if(0<=S){var U=l[g].substring(0,S);M=l[g].substring(S+1)}else U=l[g];f(U,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function ge(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ge){this.h=l.h,cn(this,l.j),this.o=l.o,this.g=l.g,pe(this,l.s),this.l=l.l;var f=l.i,g=new oe;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Re(this,g),this.m=l.m}else l&&(f=String(l).match(re))?(this.h=!1,cn(this,f[1]||"",!0),this.o=As(f[2]||""),this.g=As(f[3]||"",!0),pe(this,f[4]),this.l=As(f[5]||"",!0),Re(this,f[6]||"",!0),this.m=As(f[7]||"")):(this.h=!1,this.i=new oe(null,this.h))}ge.prototype.toString=function(){var l=[],f=this.j;f&&l.push(ri(f,Uc,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(ri(f,Uc,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(ri(g,g.charAt(0)=="/"?Rh:Ah,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",ri(g,$c)),l.join("")};function Oe(l){return new ge(l)}function cn(l,f,g){l.j=g?As(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function pe(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Re(l,f,g){f instanceof oe?(l.i=f,v1(l.i,l.h)):(g||(f=ri(f,Ph)),l.i=new oe(f,l.h))}function de(l,f,g){l.i.set(f,g)}function zt(l){return de(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function As(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ri(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,Fc),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Fc(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Uc=/[#\/\?@]/g,Ah=/[#\?:]/g,Rh=/[#\?]/g,Ph=/[#\?@]/g,$c=/#/g;function oe(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function un(l){l.g||(l.g=new Map,l.h=0,l.i&&ue(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=oe.prototype,t.add=function(l,f){un(this),this.i=null,l=ra(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function dr(l,f){un(l),f=ra(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function ii(l,f){return un(l),f=ra(l,f),l.g.has(f)}t.forEach=function(l,f){un(this),this.g.forEach(function(g,S){g.forEach(function(M){l.call(f,M,S,this)},this)},this)},t.na=function(){un(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){const M=l[S];for(let U=0;U<M.length;U++)g.push(f[S])}return g},t.V=function(l){un(this);let f=[];if(typeof l=="string")ii(this,l)&&(f=f.concat(this.g.get(ra(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return un(this),this.i=null,l=ra(this,l),ii(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Nx(l,f,g){dr(l,f),0<g.length&&(l.i=null,l.g.set(ra(l,f),R(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];const U=encodeURIComponent(String(S)),Y=this.V(S);for(S=0;S<Y.length;S++){var M=U;Y[S]!==""&&(M+="="+encodeURIComponent(String(Y[S]))),l.push(M)}}return this.i=l.join("&")};function ra(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function v1(l,f){f&&!l.j&&(un(l),l.i=null,l.g.forEach(function(g,S){var M=S.toLowerCase();S!=M&&(dr(this,S),Nx(this,M,g))},l)),l.j=f}function w1(l,f){const g=new Is;if(c.Image){const S=new Image;S.onload=v(hr,g,"TestLoadImage: loaded",!0,f,S),S.onerror=v(hr,g,"TestLoadImage: error",!1,f,S),S.onabort=v(hr,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=v(hr,g,"TestLoadImage: timeout",!1,f,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else f(!1)}function _1(l,f){const g=new Is,S=new AbortController,M=setTimeout(()=>{S.abort(),hr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:S.signal}).then(U=>{clearTimeout(M),U.ok?hr(g,"TestPingServer: ok",!0,f):hr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),hr(g,"TestPingServer: error",!1,f)})}function hr(l,f,g,S,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),S(g)}catch{}}function b1(){this.g=new Sc}function N1(l,f,g){const S=g||"";try{W(l,function(M,U){let Y=M;d(M)&&(Y=Qi(M)),f.push(S+U+"="+encodeURIComponent(Y))})}catch(M){throw f.push(S+"type="+encodeURIComponent("_badmap")),M}}function Bc(l){this.l=l.Ub||null,this.j=l.eb||!1}_(Bc,Xi),Bc.prototype.g=function(){return new zc(this.l,this.j)},Bc.prototype.i=function(l){return function(){return l}}({});function zc(l,f){ot.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(zc,ot),t=zc.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Ro(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||c).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ao(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ro(this)),this.g&&(this.readyState=3,Ro(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jx(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function jx(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Ao(this):Ro(this),this.readyState==3&&jx(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ao(this))},t.Qa=function(l){this.g&&(this.response=l,Ao(this))},t.ga=function(){this.g&&Ao(this)};function Ao(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ro(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Ro(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(zc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ex(l){let f="";return O(l,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function Dh(l,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Ex(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):de(l,f,g))}function Ze(l){ot.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ze,ot);var j1=/^https?$/i,E1=["POST","PUT"];t=Ze.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ta.g(),this.v=this.o?wo(this.o):wo(ta),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(U){kx(this,U);return}if(l=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var M in S)g.set(M,S[M]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const U of S.keys())g.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(E1,f,void 0))||S||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Y]of g)this.g.setRequestHeader(U,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sx(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){kx(this,U)}};function kx(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Tx(l),qc(l)}function Tx(l){l.A||(l.A=!0,xt(l,"complete"),xt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,xt(this,"complete"),xt(this,"abort"),qc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qc(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ix(this):this.bb())},t.bb=function(){Ix(this)};function Ix(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Rs(l)!=4||l.Z()!=2)){if(l.u&&Rs(l)==4)yo(l.Ea,0,l);else if(xt(l,"readystatechange"),Rs(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=Y===0){var M=String(l.D).match(re)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),S=!j1.test(M?M.toLowerCase():"")}g=S}if(g)xt(l,"complete"),xt(l,"success");else{l.m=6;try{var U=2<Rs(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Tx(l)}}finally{qc(l)}}}}function qc(l,f){if(l.g){Sx(l);const g=l.g,S=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||xt(l,"ready");try{g.onreadystatechange=S}catch{}}}function Sx(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Rs(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Rs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Ic(f)}};function Cx(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function k1(l){const f={};l=(l.g&&2<=Rs(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(w(l[S]))continue;var g=P(l[S]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=f[M]||[];f[M]=U,U.push(g)}N(f,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Ax(l){this.Aa=0,this.i=[],this.j=new Is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,l),this.cb=Po("retryDelaySeedMs",1e4,l),this.Wa=Po("forwardChannelMaxRetries",2,l),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Oc(l&&l.concurrentRequestLimit),this.Da=new b1,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ax.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,S){ft(0),this.W=l,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=Ux(this,null,this.W),Wc(this)};function Lh(l){if(Rx(l),l.G==3){var f=l.U++,g=Oe(l.I);if(de(g,"SID",l.K),de(g,"RID",f),de(g,"TYPE","terminate"),Do(l,g),f=new us(l,l.j,f),f.L=2,f.v=zt(Oe(g)),g=!1,c.navigator&&c.navigator.sendBeacon)try{g=c.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&c.Image&&(new Image().src=f.v,g=!0),g||(f.g=$x(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ni(f)}Fx(l)}function Hc(l){l.g&&(Mh(l),l.g.cancel(),l.g=null)}function Rx(l){Hc(l),l.u&&(c.clearTimeout(l.u),l.u=null),Kc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Wc(l){if(!Mc(l.h)&&!l.s){l.s=!0;var f=l.Ga;B||se(),F||(B(),F=!0),X.add(f,l),l.B=0}}function T1(l,f){return Vc(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=lr(p(l.Ga,l,f),Vx(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new us(this,this.j,l);let U=this.o;if(this.S&&(U?(U=x(U),T(U,this.S)):U=this.S),this.m!==null||this.O||(M.H=U,U=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Dx(this,M,f),g=Oe(this.I),de(g,"RID",l),de(g,"CVER",22),this.D&&de(g,"X-HTTP-Session-Id",this.D),Do(this,g),U&&(this.O?f="headers="+encodeURIComponent(String(Ex(U)))+"&"+f:this.m&&Dh(g,this.m,U)),sa(this.h,M),this.Ua&&de(g,"TYPE","init"),this.P?(de(g,"$req",f),de(g,"SID","null"),M.T=!0,ko(M,g,null)):ko(M,g,f),this.G=2}}else this.G==3&&(l?Px(this,l):this.i.length==0||Mc(this.h)||Px(this))};function Px(l,f){var g;f?g=f.l:g=l.U++;const S=Oe(l.I);de(S,"SID",l.K),de(S,"RID",g),de(S,"AID",l.T),Do(l,S),l.m&&l.o&&Dh(S,l.m,l.o),g=new us(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Dx(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),sa(l.h,g),ko(g,S,f)}function Do(l,f){l.H&&O(l.H,function(g,S){de(f,S,g)}),l.l&&W({},function(g,S){de(f,S,g)})}function Dx(l,f,g){g=Math.min(l.i.length,g);var S=l.l?p(l.l.Na,l.l,l):null;e:{var M=l.i;let U=-1;for(;;){const Y=["count="+g];U==-1?0<g?(U=M[0].g,Y.push("ofs="+U)):U=0:Y.push("ofs="+U);let Pe=!0;for(let jt=0;jt<g;jt++){let Te=M[jt].g;const Rt=M[jt].map;if(Te-=U,0>Te)U=Math.max(0,M[jt].g-100),Pe=!1;else try{N1(Rt,Y,"req"+Te+"_")}catch{S&&S(Rt)}}if(Pe){S=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,S}function Lx(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;B||se(),F||(B(),F=!0),X.add(f,l),l.v=0}}function Oh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=lr(p(l.Fa,l),Vx(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Ox(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=lr(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Hc(this),Ox(this))};function Mh(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Ox(l){l.g=new us(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Oe(l.qa);de(f,"RID","rpc"),de(f,"SID",l.K),de(f,"AID",l.T),de(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&de(f,"TO",l.ja),de(f,"TYPE","xmlhttp"),Do(l,f),l.m&&l.o&&Dh(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=zt(Oe(f)),g.m=null,g.P=!0,Pc(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Hc(this),Oh(this),ft(19))};function Kc(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Mx(l,f){var g=null;if(l.g==f){Kc(l),Mh(l),l.g=null;var S=2}else if(na(l.h,f))g=f.D,So(l.h,f),S=1;else return;if(l.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;S=qn(),xt(S,new Zi(S,g)),Wc(l)}else Lx(l);else if(M=f.s,M==3||M==0&&0<f.X||!(S==1&&T1(l,f)||S==2&&Oh(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),M){case 1:ai(l,5);break;case 4:ai(l,10);break;case 3:ai(l,6);break;default:ai(l,2)}}}function Vx(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function ai(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),S=l.Xa;const M=!S;S=new ge(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||cn(S,"https"),zt(S),M?w1(S.toString(),g):_1(S.toString(),g)}else ft(2);l.G=0,l.l&&l.l.sa(f),Fx(l),Rx(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Fx(l){if(l.G=0,l.ka=[],l.l){const f=Co(l.h);(f.length!=0||l.i.length!=0)&&(k(l.ka,f),k(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function Ux(l,f,g){var S=g instanceof ge?Oe(g):new ge(g);if(S.g!="")f&&(S.g=f+"."+S.g),pe(S,S.s);else{var M=c.location;S=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var U=new ge(null);S&&cn(U,S),f&&(U.g=f),M&&pe(U,M),g&&(U.l=g),S=U}return g=l.D,f=l.ya,g&&f&&de(S,g,f),de(S,"VER",l.la),Do(l,S),S}function $x(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ze(new Bc({eb:g})):new Ze(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bx(){}t=Bx.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Gc(){}Gc.prototype.g=function(l,f){return new dn(l,f)};function dn(l,f){ot.call(this),this.g=new Ax(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!w(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new ia(this)}_(dn,ot),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Lh(this.g)},dn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Qi(l),l=g);f.i.push(new Ch(f.Ya++,l)),f.G==3&&Wc(f)},dn.prototype.N=function(){this.g.l=null,delete this.j,Lh(this.g),delete this.g,dn.aa.N.call(this)};function zx(l){or.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}_(zx,or);function qx(){Yi.call(this),this.status=1}_(qx,Yi);function ia(l){this.g=l}_(ia,Bx),ia.prototype.ua=function(){xt(this.g,"a")},ia.prototype.ta=function(l){xt(this.g,new zx(l))},ia.prototype.sa=function(l){xt(this.g,new qx)},ia.prototype.ra=function(){xt(this.g,"b")},Gc.prototype.createWebChannel=Gc.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,vN=function(){return new Gc},yN=function(){return qn()},xN=cs,qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cr.NO_ERROR=0,cr.TIMEOUT=8,cr.HTTP_ERROR=6,Fu=cr,jo.COMPLETE="complete",gN=jo,ls.EventType=ar,ar.OPEN="a",ar.CLOSE="b",ar.ERROR="c",ar.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Zo=ls,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,pN=Ze}).apply(typeof mu<"u"?mu:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new dg("@firebase/firestore");function zo(){return Ri.logLevel}function ne(t,...e){if(Ri.logLevel<=we.DEBUG){const n=e.map(Ng);Ri.debug(`Firestore (${io}): ${t}`,...n)}}function Zs(t,...e){if(Ri.logLevel<=we.ERROR){const n=e.map(Ng);Ri.error(`Firestore (${io}): ${t}`,...n)}}function Pi(t,...e){if(Ri.logLevel<=we.WARN){const n=e.map(Ng);Ri.warn(`Firestore (${io}): ${t}`,...n)}}function Ng(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t="Unexpected state"){const e=`FIRESTORE (${io}) INTERNAL ASSERTION FAILED: `+t;throw Zs(e),new Error(e)}function Ae(t,e){t||ce()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends js{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _N{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class mA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pA{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0);let s=this.i;const i=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let a=new zs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new zs,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new zs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ae(typeof s.accessToken=="string"),new wN(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new Mt(e)}}class gA{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xA{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new gA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ae(this.o===void 0);const s=a=>{a.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>s(a))};const i=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new yA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const i=wA(40);for(let a=0;a<i.length;++a)s.length<20&&i[a]<n&&(s+=e.charAt(i[a]%e.length))}return s}}function Ie(t,e){return t<e?-1:t>e?1:0}function za(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new it(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new it(0,0))}static max(){return new fe(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n,s){n===void 0?n=0:n>e.length&&ce(),s===void 0?s=e.length-n:s>e.length-n&&ce(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return zl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zl?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ze extends zl{construct(e,n,s){return new ze(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Z(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const _A=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends zl{construct(e,n,s){return new _t(e,n,s)}static isValidIdentifier(e){return _A.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new _t(["__name__"])}static fromServerFormat(e){const n=[];let s="",i=0;const a=()=>{if(s.length===0)throw new Z(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Z(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(s+=c,i++):(a(),i++)}if(a(),o)throw new Z(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(ze.fromString(e))}static fromName(e){return new ie(ze.fromString(e).popFirst(5))}static empty(){return new ie(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new ze(e.slice()))}}function bA(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(s===1e9?new it(n+1,0):new it(n,s));return new $r(i,ie.empty(),e)}function NA(t){return new $r(t.readTime,t.key,-1)}class $r{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new $r(fe.min(),ie.empty(),-1)}static max(){return new $r(fe.max(),ie.empty(),-1)}}function jA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==EA)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((s,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,s)=>{n(e)})}static reject(e){return new K((n,s)=>{s(e)})}static waitFor(e){return new K((n,s)=>{let i=0,a=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++a,o&&a===i&&n()},u=>s(u))}),o=!0,a===i&&n()})}static or(e){let n=K.resolve(!1);for(const s of e)n=n.next(i=>i?K.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,a)=>{s.push(n.call(this,i,a))}),this.waitFor(s)}static mapArray(e,n){return new K((s,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++c,c===a&&s(o)},h=>i(h))}})}static doWhile(e,n){return new K((s,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):s()};a()})}}function TA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Eg.oe=-1;function ah(t){return t==null}function Nd(t){return t===0&&1/t==-1/0}function IA(t){return typeof t=="number"&&Number.isInteger(t)&&!Nd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $i(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pu(this.root,e,this.comparator,!0)}}class pu{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?s(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,s,i,a){this.key=e,this.value=n,this.color=s??kt.RED,this.left=i??kt.EMPTY,this.right=a??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,a){return new kt(e??this.key,n??this.value,s??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const a=s(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,s),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();const e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(e,n,s,i,a){return this}insert(e,n,s){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new By(this.data.getIterator())}getIteratorFrom(e){return new By(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=s.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class By{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new xn([])}unionWith(e){let n=new It(_t.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return za(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new NN("Invalid base64 string: "+a):a}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const SA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=SA.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Di(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tg(t){const e=t.mapValue.fields.__previous_value__;return kg(e)?Tg(e):e}function ql(t){const e=Br(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n,s,i,a,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class qa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new qa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu={mapValue:{}};function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kg(t)?4:RA(t)?9007199254740991:AA(t)?10:11:ce()}function _s(t,e){if(t===e)return!0;const n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ql(t).isEqual(ql(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Br(i.timestampValue),c=Br(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Di(i.bytesValue).isEqual(Di(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return nt(i.geoPointValue.latitude)===nt(a.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return nt(i.integerValue)===nt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=nt(i.doubleValue),c=nt(a.doubleValue);return o===c?Nd(o)===Nd(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return za(t.arrayValue.values||[],e.arrayValue.values||[],_s);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if($y(o)!==$y(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!_s(o[u],c[u])))return!1;return!0}(t,e);default:return ce()}}function Hl(t,e){return(t.values||[]).find(n=>_s(n,e))!==void 0}function Ha(t,e){if(t===e)return 0;const n=Li(t),s=Li(e);if(n!==s)return Ie(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=nt(a.integerValue||a.doubleValue),u=nt(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return zy(t.timestampValue,e.timestampValue);case 4:return zy(ql(t),ql(e));case 5:return Ie(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Di(a),u=Di(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=Ie(c[d],u[d]);if(h!==0)return h}return Ie(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=Ie(nt(a.latitude),nt(o.latitude));return c!==0?c:Ie(nt(a.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qy(t.arrayValue,e.arrayValue);case 10:return function(a,o){var c,u,d,h;const m=a.fields||{},p=o.fields||{},v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,_=(u=p.value)===null||u===void 0?void 0:u.arrayValue,R=Ie(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:qy(v,_)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===gu.mapValue&&o===gu.mapValue)return 0;if(a===gu.mapValue)return 1;if(o===gu.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=Ie(u[m],h[m]);if(p!==0)return p;const v=Ha(c[u[m]],d[h[m]]);if(v!==0)return v}return Ie(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ce()}}function zy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=Br(t),s=Br(e),i=Ie(n.seconds,s.seconds);return i!==0?i:Ie(n.nanos,s.nanos)}function qy(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const a=Ha(n[i],s[i]);if(a)return a}return Ie(n.length,s.length)}function Wa(t){return Hm(t)}function Hm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Br(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Di(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const a of n.values||[])i?i=!1:s+=",",s+=Hm(a);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of s)a?a=!1:i+=",",i+=`${o}:${Hm(n.fields[o])}`;return i+"}"}(t.mapValue):ce()}function Hy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wm(t){return!!t&&"integerValue"in t}function Ig(t){return!!t&&"arrayValue"in t}function Wy(t){return!!t&&"nullValue"in t}function Ky(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uu(t){return!!t&&"mapValue"in t}function AA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ml(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return $i(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ml(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ml(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ml(n)}setAll(e){let n=_t.emptyPath(),s={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,s,i),s={},i=[],n=c.popLast()}o?s[c.lastSegment()]=ml(o):i.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,s,i)}delete(e){const n=this.field(e.popLast());Uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _s(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Uu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){$i(n,(i,a)=>e[i]=a);for(const i of s)delete e[i]}clone(){return new Zt(ml(this.value))}}function jN(t){const e=[];return $i(t.fields,(n,s)=>{const i=new _t([n]);if(Uu(s)){const a=jN(s.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,s,i,a,o,c){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Ft(e,0,fe.min(),fe.min(),fe.min(),Zt.empty(),0)}static newFoundDocument(e,n,s,i){return new Ft(e,1,n,fe.min(),s,i,0)}static newNoDocument(e,n){return new Ft(e,2,n,fe.min(),fe.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,fe.min(),fe.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n){this.position=e,this.inclusive=n}}function Gy(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?s=ie.comparator(ie.fromName(o.referenceValue),n.key):s=Ha(o,n.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function Qy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_s(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n="asc"){this.field=e,this.dir=n}}function PA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{}class dt extends EN{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new LA(e,n,s):n==="array-contains"?new VA(e,s):n==="in"?new FA(e,s):n==="not-in"?new UA(e,s):n==="array-contains-any"?new $A(e,s):new dt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new OA(e,s):new MA(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ha(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(Ha(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends EN{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new as(e,n)}matches(e){return kN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function kN(t){return t.op==="and"}function TN(t){return DA(t)&&kN(t)}function DA(t){for(const e of t.filters)if(e instanceof as)return!1;return!0}function Km(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+Wa(t.value);if(TN(t))return t.filters.map(e=>Km(e)).join(",");{const e=t.filters.map(n=>Km(n)).join(",");return`${t.op}(${e})`}}function IN(t,e){return t instanceof dt?function(s,i){return i instanceof dt&&s.op===i.op&&s.field.isEqual(i.field)&&_s(s.value,i.value)}(t,e):t instanceof as?function(s,i){return i instanceof as&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((a,o,c)=>a&&IN(o,i.filters[c]),!0):!1}(t,e):void ce()}function SN(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Wa(n.value)}`}(t):t instanceof as?function(n){return n.op.toString()+" {"+n.getFilters().map(SN).join(" ,")+"}"}(t):"Filter"}class LA extends dt{constructor(e,n,s){super(e,n,s),this.key=ie.fromName(s.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class OA extends dt{constructor(e,n){super(e,"in",n),this.keys=CN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MA extends dt{constructor(e,n){super(e,"not-in",n),this.keys=CN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ie.fromName(s.referenceValue))}class VA extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ig(n)&&Hl(n.arrayValue,this.value)}}class FA extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hl(this.value.arrayValue,n)}}class UA extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hl(this.value.arrayValue,n)}}class $A extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ig(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Hl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n=null,s=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function Xy(t,e=null,n=[],s=[],i=null,a=null,o=null){return new BA(t,e,n,s,i,a,o)}function Sg(t){const e=me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Km(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Wa(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Wa(s)).join(",")),e.ue=n}return e.ue}function Cg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qy(t.startAt,e.startAt)&&Qy(t.endAt,e.endAt)}function Gm(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n=null,s=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zA(t,e,n,s,i,a,o,c){return new ao(t,e,n,s,i,a,o,c)}function oh(t){return new ao(t)}function Yy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AN(t){return t.collectionGroup!==null}function pl(t){const e=me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new It(_t.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Wl(a,s))}),n.has(_t.keyField().canonicalString())||e.ce.push(new Wl(_t.keyField(),s))}return e.ce}function vs(t){const e=me(t);return e.le||(e.le=qA(e,pl(t))),e.le}function qA(t,e){if(t.limitType==="F")return Xy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Wl(i.field,a)});const n=t.endAt?new jd(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new jd(t.startAt.position,t.startAt.inclusive):null;return Xy(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Qm(t,e){const n=t.filters.concat([e]);return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ed(t,e,n){return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lh(t,e){return Cg(vs(t),vs(e))&&t.limitType===e.limitType}function RN(t){return`${Sg(vs(t))}|lt:${t.limitType}`}function ca(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>SN(i)).join(", ")}]`),ah(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Wa(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Wa(i)).join(",")),`Target(${s})`}(vs(t))}; limitType=${t.limitType})`}function ch(t,e){return e.isFoundDocument()&&function(s,i){const a=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):ie.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(t,e)&&function(s,i){for(const a of pl(s))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const a of s.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,c,u){const d=Gy(o,c,u);return o.inclusive?d<=0:d<0}(s.startAt,pl(s),i)||s.endAt&&!function(o,c,u){const d=Gy(o,c,u);return o.inclusive?d>=0:d>0}(s.endAt,pl(s),i))}(t,e)}function HA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PN(t){return(e,n)=>{let s=!1;for(const i of pl(t)){const a=WA(i,e,n);if(a!==0)return a;s=s||i.field.isKeyField()}return 0}}function WA(t,e,n){const s=t.field.isKeyField()?ie.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?Ha(u,d):ce()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,a]of s)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$i(this.inner,(n,s)=>{for(const[i,a]of s)e(i,a)})}isEmpty(){return bN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new Ye(ie.comparator);function er(){return KA}const DN=new Ye(ie.comparator);function el(...t){let e=DN;for(const n of t)e=e.insert(n.key,n);return e}function LN(t){let e=DN;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function gi(){return gl()}function ON(){return gl()}function gl(){return new oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const GA=new Ye(ie.comparator),QA=new It(ie.comparator);function ve(...t){let e=QA;for(const n of t)e=e.add(n);return e}const XA=new It(Ie);function YA(){return XA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function MN(t){return{integerValue:""+t}}function VN(t,e){return IA(e)?MN(e):Ag(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this._=void 0}}function JA(t,e,n){return t instanceof Kl?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&kg(a)&&(a=Tg(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof Gl?UN(t,e):t instanceof Ql?$N(t,e):function(i,a){const o=FN(i,a),c=Jy(o)+Jy(i.Pe);return Wm(o)&&Wm(i.Pe)?MN(c):Ag(i.serializer,c)}(t,e)}function ZA(t,e,n){return t instanceof Gl?UN(t,e):t instanceof Ql?$N(t,e):n}function FN(t,e){return t instanceof Xl?function(s){return Wm(s)||function(a){return!!a&&"doubleValue"in a}(s)}(e)?e:{integerValue:0}:null}class Kl extends uh{}class Gl extends uh{constructor(e){super(),this.elements=e}}function UN(t,e){const n=BN(e);for(const s of t.elements)n.some(i=>_s(i,s))||n.push(s);return{arrayValue:{values:n}}}class Ql extends uh{constructor(e){super(),this.elements=e}}function $N(t,e){let n=BN(e);for(const s of t.elements)n=n.filter(i=>!_s(i,s));return{arrayValue:{values:n}}}class Xl extends uh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Jy(t){return nt(t.integerValue||t.doubleValue)}function BN(t){return Ig(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.field=e,this.transform=n}}function eR(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof Gl&&i instanceof Gl||s instanceof Ql&&i instanceof Ql?za(s.elements,i.elements,_s):s instanceof Xl&&i instanceof Xl?_s(s.Pe,i.Pe):s instanceof Kl&&i instanceof Kl}(t.transform,e.transform)}class tR{constructor(e,n){this.version=e,this.transformResults=n}}class Ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dh{}function qN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rg(t.key,Ln.none()):new dc(t.key,t.data,Ln.none());{const n=t.data,s=Zt.empty();let i=new It(_t.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?s.delete(a):s.set(a,o),i=i.add(a)}return new Jr(t.key,s,new xn(i.toArray()),Ln.none())}}function nR(t,e,n){t instanceof dc?function(i,a,o){const c=i.value.clone(),u=ev(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Jr?function(i,a,o){if(!$u(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=ev(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(HN(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xl(t,e,n,s){return t instanceof dc?function(a,o,c,u){if(!$u(a.precondition,o))return c;const d=a.value.clone(),h=tv(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Jr?function(a,o,c,u){if(!$u(a.precondition,o))return c;const d=tv(a.fieldTransforms,u,o),h=o.data;return h.setAll(HN(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(a,o,c){return $u(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function sR(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),a=FN(s.transform,i||null);a!=null&&(n===null&&(n=Zt.empty()),n.set(s.field,a))}return n||null}function Zy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&za(s,i,(a,o)=>eR(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dc extends dh{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jr extends dh{constructor(e,n,s,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function HN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function ev(t,e,n){const s=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);s.set(a.field,ZA(o,c,n[i]))}return s}function tv(t,e,n){const s=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);s.set(i.field,JA(a,o,e))}return s}class Rg extends dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rR extends dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&nR(a,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=xl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=xl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ON();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=qN(o,c);u!==null&&s.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(fe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&za(this.mutations,e.mutations,(n,s)=>Zy(n,s))&&za(this.baseMutations,e.baseMutations,(n,s)=>Zy(n,s))}}class Pg{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Ae(e.mutations.length===s.length);let i=function(){return GA}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,s[o].version);return new Pg(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Ne;function lR(t){switch(t){default:return ce();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function WN(t){if(t===void 0)return Zs("GRPC error has no .code"),q.UNKNOWN;switch(t){case lt.OK:return q.OK;case lt.CANCELLED:return q.CANCELLED;case lt.UNKNOWN:return q.UNKNOWN;case lt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case lt.INTERNAL:return q.INTERNAL;case lt.UNAVAILABLE:return q.UNAVAILABLE;case lt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case lt.NOT_FOUND:return q.NOT_FOUND;case lt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case lt.ABORTED:return q.ABORTED;case lt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case lt.DATA_LOSS:return q.DATA_LOSS;default:return ce()}}(Ne=lt||(lt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new wi([4294967295,4294967295],0);function nv(t){const e=cR().encode(t),n=new mN;return n.update(e),new Uint8Array(n.digest())}function sv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new wi([n,s],0),new wi([i,a],0)]}class Dg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new tl(`Invalid padding: ${n}`);if(s<0)throw new tl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new tl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new tl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wi.fromNumber(this.Ie)}Ee(e,n,s){let i=e.add(n.multiply(wi.fromNumber(s)));return i.compare(uR)===1&&(i=new wi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=nv(e),[s,i]=sv(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(s,i,a);if(!this.de(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Dg(a,i,n);return s.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=nv(e),[s,i]=sv(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(s,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,s,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,hc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new hh(fe.min(),i,new Ye(Ie),er(),ve())}}class hc{constructor(e,n,s,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new hc(s,n,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,s,i){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=i}}class KN{constructor(e,n){this.targetId=e,this.me=n}}class GN{constructor(e,n,s=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class rv{constructor(){this.fe=0,this.ge=av(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),n=ve(),s=ve();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:ce()}}),new hc(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=av()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dR{constructor(e){this.Le=e,this.Be=new Map,this.ke=er(),this.qe=iv(),this.Qe=new Ye(Ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const s=this.Ge(n);switch(e.state){case 0:this.ze(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),s.De(e.resumeToken));break;default:ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,s=e.me.count,i=this.Je(n);if(i){const a=i.target;if(Gm(a))if(s===0){const o=new ie(a.path);this.Ue(n,o,Ft.newNoDocument(o,fe.min()))}else Ae(s===1);else{const o=this.Ye(n);if(o!==s){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=Di(s).toUint8Array()}catch(u){if(u instanceof NN)return Pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Dg(o,i,a)}catch(u){return Pi(u instanceof tl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,s){return n.me.count===s-this.nt(e,n.targetId)?0:2}nt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let i=0;return s.forEach(a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const c=this.Je(o);if(c){if(a.current&&Gm(c.target)){const u=new ie(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ft.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let s=ve();this.qe.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new hh(e,n,this.Qe,this.ke,s);return this.ke=er(),this.qe=iv(),this.Qe=new Ye(Ie),i}$e(e,n){if(!this.ze(e))return;const s=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,s){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new rv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new It(Ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new rv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function iv(){return new Ye(ie.comparator)}function av(){return new Ye(ie.comparator)}const hR={asc:"ASCENDING",desc:"DESCENDING"},fR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mR={and:"AND",or:"OR"};class pR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xm(t,e){return t.useProto3Json||ah(e)?e:{value:e}}function kd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gR(t,e){return kd(t,e.toTimestamp())}function ws(t){return Ae(!!t),fe.fromTimestamp(function(n){const s=Br(n);return new it(s.seconds,s.nanos)}(t))}function Lg(t,e){return Ym(t,e).canonicalString()}function Ym(t,e){const n=function(i){return new ze(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function XN(t){const e=ze.fromString(t);return Ae(tj(e)),e}function Jm(t,e){return Lg(t.databaseId,e.path)}function _f(t,e){const n=XN(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(JN(n))}function YN(t,e){return Lg(t.databaseId,e)}function xR(t){const e=XN(t);return e.length===4?ze.emptyPath():JN(e)}function Zm(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JN(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ov(t,e,n){return{name:Jm(t,e),fields:n.value.mapValue.fields}}function yR(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Ae(h===void 0||typeof h=="string"),Nt.fromBase64String(h||"")):(Ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const h=d.code===void 0?q.UNKNOWN:WN(d.code);return new Z(h,d.message||"")}(o);n=new GN(s,i,a,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=_f(t,s.document.name),a=ws(s.document.updateTime),o=s.document.createTime?ws(s.document.createTime):fe.min(),c=new Zt({mapValue:{fields:s.document.fields}}),u=Ft.newFoundDocument(i,a,o,c),d=s.targetIds||[],h=s.removedTargetIds||[];n=new Bu(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=_f(t,s.document),a=s.readTime?ws(s.readTime):fe.min(),o=Ft.newNoDocument(i,a),c=s.removedTargetIds||[];n=new Bu([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=_f(t,s.document),a=s.removedTargetIds||[];n=new Bu([],a,i,null)}else{if(!("filter"in e))return ce();{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:a}=s,o=new oR(i,a),c=s.targetId;n=new KN(c,o)}}return n}function vR(t,e){let n;if(e instanceof dc)n={update:ov(t,e.key,e.value)};else if(e instanceof Rg)n={delete:Jm(t,e.key)};else if(e instanceof Jr)n={update:ov(t,e.key,e.data),updateMask:IR(e.fieldMask)};else{if(!(e instanceof rR))return ce();n={verify:Jm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(a,o){const c=o.transform;if(c instanceof Kl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Gl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ql)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xl)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw ce()}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:gR(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ce()}(t,e.precondition)),n}function wR(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(i,a){let o=i.updateTime?ws(i.updateTime):ws(a);return o.isEqual(fe.min())&&(o=ws(a)),new tR(o,i.transformResults||[])}(n,e))):[]}function _R(t,e){return{documents:[YN(t,e.path)]}}function bR(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=YN(t,i);const a=function(d){if(d.length!==0)return ej(as.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:ua(p.field),direction:ER(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Xm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function NR(t){let e=xR(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Ae(s===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(m){const p=ZN(m);return p instanceof as&&TN(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(_){return new Wl(da(_.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let c=null;n.limit&&(c=function(m){let p;return p=typeof m=="object"?m.value:m,ah(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,v=m.values||[];return new jd(v,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,v=m.values||[];return new jd(v,p)}(n.endAt)),zA(e,i,o,a,c,"F",u,d)}function jR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=da(n.unaryFilter.field);return dt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=da(n.unaryFilter.field);return dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=da(n.unaryFilter.field);return dt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=da(n.unaryFilter.field);return dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(t):t.fieldFilter!==void 0?function(n){return dt.create(da(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return as.create(n.compositeFilter.filters.map(s=>ZN(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ce()}}(n.compositeFilter.op))}(t):ce()}function ER(t){return hR[t]}function kR(t){return fR[t]}function TR(t){return mR[t]}function ua(t){return{fieldPath:t.canonicalString()}}function da(t){return _t.fromServerFormat(t.fieldPath)}function ej(t){return t instanceof dt?function(n){if(n.op==="=="){if(Ky(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NAN"}};if(Wy(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ky(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NOT_NAN"}};if(Wy(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(n.field),op:kR(n.op),value:n.value}}}(t):t instanceof as?function(n){const s=n.getFilters().map(i=>ej(i));return s.length===1?s[0]:{compositeFilter:{op:TR(n.op),filters:s}}}(t):ce()}function IR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,s,i,a=fe.min(),o=fe.min(),c=Nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.ct=e}}function CR(t){const e=NR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ed(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.un=new RR}addToCollectionParentIndex(e,n){return this.un.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve($r.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve($r.min())}updateCollectionGroup(e,n,s){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class RR{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new It(ze.comparator),a=!i.has(s);return this.index[n]=i.add(s),a}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new It(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ka(0)}static kn(){return new Ka(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.changes=new oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?K.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&xl(s.mutation,i,xn.empty(),it.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ve()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ve()){const i=gi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(a=>{let o=el();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=gi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ve()))}populateOverlays(e,n,s){const i=[];return s.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,s,i){let a=er();const o=gl(),c=function(){return gl()}();return n.forEach((u,d)=>{const h=s.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Jr)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),xl(h.mutation,d,h.mutation.getFieldMask(),it.now())):o.set(d.key,xn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var m;return c.set(d,new DR(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const s=gl();let i=new Ye((o,c)=>o-c),a=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=s.get(u)||xn.empty();h=c.applyToLocalView(d,h),s.set(u,h);const m=(i.get(c.batchId)||ve()).add(u);i=i.insert(c.batchId,m)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,m=ON();h.forEach(p=>{if(!a.has(p)){const v=qN(n.get(p),s.get(p));v!==null&&m.set(p,v),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return K.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-a.size):K.resolve(gi());let c=-1,u=a;return o.next(d=>K.forEach(d,(h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),a.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,ve())).next(h=>({batchId:c,changes:LN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(s=>{let i=el();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const a=n.collectionGroup;let o=el();return this.indexManager.getCollectionParents(e,a).next(c=>K.forEach(c,u=>{const d=function(m,p){return new ao(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,a,i))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ft.newInvalidDocument(h)))});let c=el();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&xl(h.mutation,d,xn.empty(),it.now()),ch(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return K.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ws(i.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:CR(i.bundledQuery),readTime:ws(i.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.overlays=new Ye(ie.comparator),this.Ir=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const s=gi();return K.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&s.set(i,a)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,a)=>{this.ht(e,n,a)}),K.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.Ir.get(s);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(s)),K.resolve()}getOverlaysForCollection(e,n,s){const i=gi(),a=n.length+1,o=new ie(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>s&&i.set(u.getKey(),u)}return K.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let a=new Ye((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=a.get(d.largestBatchId);h===null&&(h=gi(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=gi(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=i)););return K.resolve(c)}ht(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(s.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new aR(n,s));let a=this.Ir.get(n);a===void 0&&(a=ve(),this.Ir.set(n,a)),this.Ir.set(n,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.Tr=new It(vt.Er),this.dr=new It(vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const s=new vt(e,n);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Vr(new vt(e,n))}mr(e,n){e.forEach(s=>this.removeReference(s,n))}gr(e){const n=new ie(new ze([])),s=new vt(n,e),i=new vt(n,e+1),a=[];return this.dr.forEachInRange([s,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new ze([])),s=new vt(n,e),i=new vt(n,e+1);let a=ve();return this.dr.forEachInRange([s,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new vt(e,0),s=this.Tr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class vt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Ie(e.wr,n.wr)}static Ar(e,n){return Ie(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new It(vt.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new iR(a,n,s,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new vt(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.vr(s),a=i<0?0:i;return K.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new vt(n,0),i=new vt(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([s,i],o=>{const c=this.Dr(o.wr);a.push(c)}),K.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new It(Ie);return n.forEach(i=>{const a=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],c=>{s=s.add(c.wr)})}),K.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let a=s;ie.isDocumentKey(a)||(a=a.child(""));const o=new vt(new ie(a),0);let c=new It(Ie);return this.br.forEachWhile(u=>{const d=u.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),K.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(s=>{const i=this.Dr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return K.forEach(n.mutations,i=>{const a=new vt(i.key,n.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,n){const s=new vt(n,0),i=this.br.firstAfterOrEqual(s);return K.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.Mr=e,this.docs=function(){return new Ye(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return K.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let s=er();return n.forEach(i=>{const a=this.docs.get(i);s=s.insert(i,a?a.document.mutableCopy():Ft.newInvalidDocument(i))}),K.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let a=er();const o=n.path,c=new ie(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||jA(NA(h),s)<=0||(i.has(h.key)||ch(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return K.resolve(a)}getAllFromCollectionGroup(e,n,s,i){ce()}Or(e,n){return K.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new $R(this)}getSize(e){return K.resolve(this.size)}}class $R extends PR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(s)}),K.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.persistence=e,this.Nr=new oo(n=>Sg(n),Cg),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Og,this.targetCount=0,this.kr=Ka.Bn()}forEachTarget(e,n){return this.Nr.forEach((s,i)=>n(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Lr&&(this.Lr=n),K.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ka(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Kn(n),K.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,s){let i=0;const a=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&s.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),K.waitFor(a).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const s=this.Nr.get(n)||null;return K.resolve(s)}addMatchingKeys(e,n,s){return this.Br.Rr(n,s),K.resolve()}removeMatchingKeys(e,n,s){this.Br.mr(n,s);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),K.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Br.yr(n);return K.resolve(s)}containsKey(e,n){return K.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Eg(0),this.Kr=!1,this.Kr=!0,this.$r=new VR,this.referenceDelegate=e(this),this.Ur=new BR(this),this.indexManager=new AR,this.remoteDocumentCache=function(i){return new UR(i)}(s=>this.referenceDelegate.Wr(s)),this.serializer=new SR(n),this.Gr=new OR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.qr[e.toKey()];return s||(s=new FR(n,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,s){ne("MemoryPersistence","Starting transaction:",e);const i=new qR(this.Qr.next());return this.referenceDelegate.zr(),s(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return K.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,n)))}}class qR extends kA{constructor(e){super(),this.currentSequenceNumber=e}}class Mg{constructor(e){this.persistence=e,this.Jr=new Og,this.Yr=null}static Zr(e){return new Mg(e)}get Xr(){if(this.Yr)return this.Yr;throw ce()}addReference(e,n,s){return this.Jr.addReference(s,n),this.Xr.delete(s.toString()),K.resolve()}removeReference(e,n,s){return this.Jr.removeReference(s,n),this.Xr.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),K.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>s.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,s=>{const i=ie.fromPath(s);return this.ei(e,i).next(a=>{a||n.removeEntry(i,fe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(s=>{s?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return K.or([()=>K.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.$i=s,this.Ui=i}static Wi(e,n){let s=ve(),i=ve();for(const a of n.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Vg(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vT()?8:TA(Bt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,s,i){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,i,s).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new HR;return this.Xi(e,n,o).next(c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>a.result)}es(e,n,s,i){return s.documentReadCount<this.ji?(zo()<=we.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ca(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(zo()<=we.DEBUG&&ne("QueryEngine","Query:",ca(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.Hi*i?(zo()<=we.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ca(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(n))):K.resolve())}Yi(e,n){if(Yy(n))return K.resolve(null);let s=vs(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ed(n,null,"F"),s=vs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(a=>{const o=ve(...a);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,s).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,Ed(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,s,i){return Yy(n)||i.isEqual(fe.min())?K.resolve(null):this.Ji.getDocuments(e,s).next(a=>{const o=this.ts(n,a);return this.ns(n,o,s,i)?K.resolve(null):(zo()<=we.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ca(n)),this.rs(e,o,n,bA(i,-1)).next(c=>c))})}ts(e,n){let s=new It(PN(e));return n.forEach((i,a)=>{ch(e,a)&&(s=s.add(a))}),s}ns(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,s){return zo()<=we.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ca(n)),this.Ji.getDocumentsMatchingQuery(e,n,$r.min(),s)}rs(e,n,s,i){return this.Ji.getDocumentsMatchingQuery(e,s,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,s,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ye(Ie),this._s=new oo(a=>Sg(a),Cg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function GR(t,e,n,s){return new KR(t,e,n,s)}async function nj(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(s))).next(a=>{const o=[],c=[];let u=ve();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function QR(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,h){const m=d.batch,p=m.keys();let v=K.resolve();return p.forEach(_=>{v=v.next(()=>h.getEntry(u,_)).next(R=>{const k=d.docVersions.get(_);Ae(k!==null),R.version.compareTo(k)<0&&(m.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),h.addEntry(R)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,s,e,a).next(()=>a.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(c){let u=ve();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function sj(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function XR(t,e){const n=me(t),s=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((h,m)=>{const p=i.get(m);if(!p)return;c.push(n.Ur.removeMatchingKeys(a,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(a,h.addedDocuments,m)));let v=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(Nt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,s)),i=i.insert(m,v),function(R,k,b){return R.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,v,h)&&c.push(n.Ur.updateTargetData(a,v))});let u=er(),d=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),c.push(YR(a,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!s.isEqual(fe.min())){const h=n.Ur.getLastRemoteSnapshotVersion(a).next(m=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,s));c.push(h)}return K.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=i,a))}function YR(t,e,n){let s=ve(),i=ve();return n.forEach(a=>s=s.add(a)),e.getEntries(t,s).next(a=>{let o=er();return n.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(fe.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):ne("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function JR(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function ZR(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Ur.getTargetData(s,e).next(a=>a?(i=a,K.resolve(i)):n.Ur.allocateTargetId(s).next(o=>(i=new kr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ur.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.os.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(s.targetId,s),n._s.set(e,s.targetId)),s})}async function ep(t,e,n){const s=me(t),i=s.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",a,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!uc(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.os=s.os.remove(e),s._s.delete(i.target)}function lv(t,e,n){const s=me(t);let i=fe.min(),a=ve();return s.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=me(u),p=m._s.get(h);return p!==void 0?K.resolve(m.os.get(p)):m.Ur.getTargetData(d,h)}(s,o,vs(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>s.ss.getDocumentsMatchingQuery(o,e,n?i:fe.min(),n?a:ve())).next(c=>(e4(s,HA(e),c),{documents:c,Ts:a})))}function e4(t,e,n){let s=t.us.get(e)||fe.min();n.forEach((i,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),t.us.set(e,s)}class cv{constructor(){this.activeTargetIds=YA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t4{constructor(){this.so=new cv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,s){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new cv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu=null;function bf(){return xu===null?xu=function(){return 268435456+Math.round(2147483648*Math.random())}():xu++,"0x"+xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class i4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,s,i,a,o){const c=bf(),u=this.xo(n,s.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw Pi("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,s,i,a,o,c){return this.Mo(n,s,i,a,o)}Oo(n,s,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+io}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((a,o)=>n[o]=a),i&&i.headers.forEach((a,o)=>n[o]=a)}xo(n,s){const i=s4[n];return`${this.Do}/v1/${s}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,s,i){const a=bf();return new Promise((o,c)=>{const u=new pN;u.setWithCredentials(!0),u.listenOnce(gN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Fu.NO_ERROR:const h=u.getResponseJson();ne(Ot,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Fu.TIMEOUT:ne(Ot,`RPC '${e}' ${a} timed out`),c(new Z(q.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const m=u.getStatus();if(ne(Ot,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const _=function(k){const b=k.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(b)>=0?b:q.UNKNOWN}(v.status);c(new Z(_,v.message))}else c(new Z(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Z(q.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{ne(Ot,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);ne(Ot,`RPC '${e}' ${a} sending request:`,i),u.send(n,"POST",d,s,15)})}Bo(e,n,s){const i=bf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vN(),c=yN(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=a.join("");ne(Ot,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=o.createWebChannel(h,u);let p=!1,v=!1;const _=new r4({Io:k=>{v?ne(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(p||(ne(Ot,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),ne(Ot,`RPC '${e}' stream ${i} sending:`,k),m.send(k))},To:()=>m.close()}),R=(k,b,w)=>{k.listen(b,y=>{try{w(y)}catch(j){setTimeout(()=>{throw j},0)}})};return R(m,Zo.EventType.OPEN,()=>{v||(ne(Ot,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),R(m,Zo.EventType.CLOSE,()=>{v||(v=!0,ne(Ot,`RPC '${e}' stream ${i} transport closed`),_.So())}),R(m,Zo.EventType.ERROR,k=>{v||(v=!0,Pi(Ot,`RPC '${e}' stream ${i} transport errored:`,k),_.So(new Z(q.UNAVAILABLE,"The operation could not be completed")))}),R(m,Zo.EventType.MESSAGE,k=>{var b;if(!v){const w=k.data[0];Ae(!!w);const y=w,j=y.error||((b=y[0])===null||b===void 0?void 0:b.error);if(j){ne(Ot,`RPC '${e}' stream ${i} received error:`,j);const C=j.status;let O=function(E){const T=lt[E];if(T!==void 0)return WN(T)}(C),N=j.message;O===void 0&&(O=q.INTERNAL,N="Unknown error status: "+C+" with message "+j.message),v=!0,_.So(new Z(O,N)),m.close()}else ne(Ot,`RPC '${e}' stream ${i} received:`,w),_.bo(w)}}),R(c,xN.STAT_EVENT,k=>{k.stat===qm.PROXY?ne(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===qm.NOPROXY&&ne(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function Nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t){return new pR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n,s=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=s,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-s);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n,s,i,a,o,c,u){this.ui=e,this.Ho=s,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new rj(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Zs(n.toString()),Zs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Yo===n&&this.P_(s,i)},s=>{e(()=>{const i=new Z(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(i)})})}P_(e,n){const s=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{s(()=>this.I_(i))}),this.stream.onMessage(i=>{s(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a4 extends ij{constructor(e,n,s,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=yR(this.serializer,e),s=function(a){if(!("targetChange"in a))return fe.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?ws(o.readTime):fe.min()}(e);return this.listener.d_(n,s)}A_(e){const n={};n.database=Zm(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=Gm(u)?{documents:_R(a,u)}:{query:bR(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=QN(a,o.resumeToken);const d=Xm(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(fe.min())>0){c.readTime=kd(a,o.snapshotVersion.toTimestamp());const d=Xm(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const s=jR(this.serializer,e);s&&(n.labels=s),this.a_(n)}R_(e){const n={};n.database=Zm(this.serializer),n.removeTarget=e,this.a_(n)}}class o4 extends ij{constructor(e,n,s,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=wR(e.writeResults,e.commitTime),s=ws(e.commitTime);return this.listener.g_(s,n)}p_(){const e={};e.database=Zm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>vR(this.serializer,s))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4 extends class{}{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Z(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Ym(n,s),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(q.UNKNOWN,a.toString())})}Lo(e,n,s,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Ym(n,s),i,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class c4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zs(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,s,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{s.enqueueAndForget(async()=>{Bi(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=me(u);d.L_.add(4),await fc(d),d.q_.set("Unknown"),d.L_.delete(4),await mh(d)}(this))})}),this.q_=new c4(s,i)}}async function mh(t){if(Bi(t))for(const e of t.B_)await e(!0)}async function fc(t){for(const e of t.B_)await e(!1)}function aj(t,e){const n=me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Bg(n)?$g(n):lo(n).r_()&&Ug(n,e))}function Fg(t,e){const n=me(t),s=lo(n);n.N_.delete(e),s.r_()&&oj(n,e),n.N_.size===0&&(s.r_()?s.o_():Bi(n)&&n.q_.set("Unknown"))}function Ug(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lo(t).A_(e)}function oj(t,e){t.Q_.xe(e),lo(t).R_(e)}function $g(t){t.Q_=new dR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),lo(t).start(),t.q_.v_()}function Bg(t){return Bi(t)&&!lo(t).n_()&&t.N_.size>0}function Bi(t){return me(t).L_.size===0}function lj(t){t.Q_=void 0}async function d4(t){t.q_.set("Online")}async function h4(t){t.N_.forEach((e,n)=>{Ug(t,e)})}async function f4(t,e){lj(t),Bg(t)?(t.q_.M_(e),$g(t)):t.q_.set("Unknown")}async function m4(t,e,n){if(t.q_.set("Online"),e instanceof GN&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(s){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Td(t,s)}else if(e instanceof Bu?t.Q_.Ke(e):e instanceof KN?t.Q_.He(e):t.Q_.We(e),!n.isEqual(fe.min()))try{const s=await sj(t.localStore);n.compareTo(s)>=0&&await function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.N_.get(d);h&&a.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const h=a.N_.get(u);if(!h)return;a.N_.set(u,h.withResumeToken(Nt.EMPTY_BYTE_STRING,h.snapshotVersion)),oj(a,u);const m=new kr(h.target,u,d,h.sequenceNumber);Ug(a,m)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(s){ne("RemoteStore","Failed to raise snapshot:",s),await Td(t,s)}}async function Td(t,e,n){if(!uc(e))throw e;t.L_.add(1),await fc(t),t.q_.set("Offline"),n||(n=()=>sj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await mh(t)})}function cj(t,e){return e().catch(n=>Td(t,n,e))}async function ph(t){const e=me(t),n=zr(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;p4(e);)try{const i=await JR(e.localStore,s);if(i===null){e.O_.length===0&&n.o_();break}s=i.batchId,g4(e,i)}catch(i){await Td(e,i)}uj(e)&&dj(e)}function p4(t){return Bi(t)&&t.O_.length<10}function g4(t,e){t.O_.push(e);const n=zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function uj(t){return Bi(t)&&!zr(t).n_()&&t.O_.length>0}function dj(t){zr(t).start()}async function x4(t){zr(t).p_()}async function y4(t){const e=zr(t);for(const n of t.O_)e.m_(n.mutations)}async function v4(t,e,n){const s=t.O_.shift(),i=Pg.from(s,e,n);await cj(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ph(t)}async function w4(t,e){e&&zr(t).V_&&await async function(s,i){if(function(o){return lR(o)&&o!==q.ABORTED}(i.code)){const a=s.O_.shift();zr(s).s_(),await cj(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,i)),await ph(s)}}(t,e),uj(t)&&dj(t)}async function dv(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const s=Bi(n);n.L_.add(3),await fc(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await mh(n)}async function _4(t,e){const n=me(t);e?(n.L_.delete(2),await mh(n)):e||(n.L_.add(2),await fc(n),n.q_.set("Unknown"))}function lo(t){return t.K_||(t.K_=function(n,s,i){const a=me(n);return a.w_(),new a4(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:d4.bind(null,t),Ro:h4.bind(null,t),mo:f4.bind(null,t),d_:m4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Bg(t)?$g(t):t.q_.set("Unknown")):(await t.K_.stop(),lj(t))})),t.K_}function zr(t){return t.U_||(t.U_=function(n,s,i){const a=me(n);return a.w_(),new o4(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:x4.bind(null,t),mo:w4.bind(null,t),f_:y4.bind(null,t),g_:v4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ph(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n,s,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=a,this.deferred=new zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,a){const o=Date.now()+s,c=new zg(e,n,o,i,a);return c.start(s),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qg(t,e){if(Zs("AsyncQueue",`${e}: ${t}`),uc(t))return new Z(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.comparator=e?(n,s)=>e(n,s)||ie.comparator(n.key,s.key):(n,s)=>ie.comparator(n.key,s.key),this.keyedMap=el(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new La(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof La)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=s.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new La;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.W_=new Ye(ie.comparator)}track(e){const n=e.doc.key,s=this.W_.get(n);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(n,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(n):e.type===1&&s.type===2?this.W_=this.W_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ce():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ga{constructor(e,n,s,i,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,i,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Ga(e,n,La.emptySet(n),o,s,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class N4{constructor(){this.queries=fv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,s){const i=me(n),a=i.queries;i.queries=fv(),a.forEach((o,c)=>{for(const u of c.j_)u.onError(s)})})(this,new Z(q.ABORTED,"Firestore shutting down"))}}function fv(){return new oo(t=>RN(t),lh)}async function Hg(t,e){const n=me(t);let s=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(s=2):(a=new b4,s=e.J_()?0:1);try{switch(s){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=qg(o,`Initialization of query '${ca(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Kg(n)}async function Wg(t,e){const n=me(t),s=e.query;let i=3;const a=n.queries.get(s);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function j4(t,e){const n=me(t);let s=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(i)&&(s=!0);o.z_=i}}s&&Kg(n)}function E4(t,e,n){const s=me(t),i=s.queries.get(e);if(i)for(const a of i.j_)a.onError(n);s.queries.delete(e)}function Kg(t){t.Y_.forEach(e=>{e.next()})}var tp,mv;(mv=tp||(tp={})).ea="default",mv.Cache="cache";class Gg{constructor(e,n,s){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new Ga(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const s=n!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.key=e}}class fj{constructor(e){this.key=e}}class k4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=PN(e),this.Ra=new La(this.Aa)}get Va(){return this.Ta}ma(e,n){const s=n?n.fa:new hv,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const p=i.get(h),v=ch(this.query,m)?m:null,_=!!p&&this.mutatedKeys.has(p.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let k=!1;p&&v?p.data.isEqual(v.data)?_!==R&&(s.track({type:3,doc:v}),k=!0):this.ga(p,v)||(s.track({type:2,doc:v}),k=!0,(u&&this.Aa(v,u)>0||d&&this.Aa(v,d)<0)&&(c=!0)):!p&&v?(s.track({type:0,doc:v}),k=!0):p&&!v&&(s.track({type:1,doc:p}),k=!0,(u||d)&&(c=!0)),k&&(v?(o=o.add(v),a=R?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),s.track({type:1,doc:h})}return{Ra:o,fa:s,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(v,_){const R=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return R(v)-R(_)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(s),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Ga(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ve(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const n=[];return e.forEach(s=>{this.da.has(s)||n.push(new fj(s))}),this.da.forEach(s=>{e.has(s)||n.push(new hj(s))}),n}ba(e){this.Ta=e.Ts,this.da=ve();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ga.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class T4{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class I4{constructor(e){this.key=e,this.va=!1}}class S4{constructor(e,n,s,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new oo(c=>RN(c),lh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(ie.comparator),this.Na=new Map,this.La=new Og,this.Ba={},this.ka=new Map,this.qa=Ka.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function C4(t,e,n=!0){const s=vj(t);let i;const a=s.Fa.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await mj(s,e,n,!0),i}async function A4(t,e){const n=vj(t);await mj(n,e,!0,!1)}async function mj(t,e,n,s){const i=await ZR(t.localStore,vs(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return s&&(c=await R4(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&aj(t.remoteStore,i),c}async function R4(t,e,n,s,i){t.Ka=(m,p,v)=>async function(R,k,b,w){let y=k.view.ma(b);y.ns&&(y=await lv(R.localStore,k.query,!1).then(({documents:N})=>k.view.ma(N,y)));const j=w&&w.targetChanges.get(k.targetId),C=w&&w.targetMismatches.get(k.targetId)!=null,O=k.view.applyChanges(y,R.isPrimaryClient,j,C);return gv(R,k.targetId,O.wa),O.snapshot}(t,m,p,v);const a=await lv(t.localStore,e,!0),o=new k4(e,a.Ts),c=o.ma(a.documents),u=hc.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);gv(t,n,d.wa);const h=new T4(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function P4(t,e,n){const s=me(t),i=s.Fa.get(e),a=s.Ma.get(i.targetId);if(a.length>1)return s.Ma.set(i.targetId,a.filter(o=>!lh(o,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await ep(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&Fg(s.remoteStore,i.targetId),np(s,i.targetId)}).catch(cc)):(np(s,i.targetId),await ep(s.localStore,i.targetId,!0))}async function D4(t,e){const n=me(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Fg(n.remoteStore,s.targetId))}async function L4(t,e,n){const s=B4(t);try{const i=await function(o,c){const u=me(o),d=it.now(),h=c.reduce((v,_)=>v.add(_.key),ve());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let _=er(),R=ve();return u.cs.getEntries(v,h).next(k=>{_=k,_.forEach((b,w)=>{w.isValidDocument()||(R=R.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,_)).next(k=>{m=k;const b=[];for(const w of c){const y=sR(w,m.get(w.key).overlayedDocument);y!=null&&b.push(new Jr(w.key,y,jN(y.value.mapValue),Ln.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,b,c)}).next(k=>{p=k;const b=k.applyToLocalDocumentSet(m,R);return u.documentOverlayCache.saveOverlays(v,k.batchId,b)})}).then(()=>({batchId:p.batchId,changes:LN(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ye(Ie)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(s,i.batchId,n),await mc(s,i.changes),await ph(s.remoteStore)}catch(i){const a=qg(i,"Failed to persist write");n.reject(a)}}async function pj(t,e){const n=me(t);try{const s=await XR(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Na.get(a);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ae(o.va):i.removedDocuments.size>0&&(Ae(o.va),o.va=!1))}),await mc(n,s,e)}catch(s){await cc(s)}}function pv(t,e,n){const s=me(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Fa.forEach((a,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=me(o);u.onlineState=c;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.j_)p.Z_(c)&&(d=!0)}),d&&Kg(u)}(s.eventManager,e),i.length&&s.Ca.d_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function O4(t,e,n){const s=me(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Na.get(e),a=i&&i.key;if(a){let o=new Ye(ie.comparator);o=o.insert(a,Ft.newNoDocument(a,fe.min()));const c=ve().add(a),u=new hh(fe.min(),new Map,new Ye(Ie),o,c);await pj(s,u),s.Oa=s.Oa.remove(a),s.Na.delete(e),Qg(s)}else await ep(s.localStore,e,!1).then(()=>np(s,e,n)).catch(cc)}async function M4(t,e){const n=me(t),s=e.batch.batchId;try{const i=await QR(n.localStore,e);xj(n,s,null),gj(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await mc(n,i)}catch(i){await cc(i)}}async function V4(t,e,n){const s=me(t);try{const i=await function(o,c){const u=me(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Ae(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(s.localStore,e);xj(s,e,n),gj(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await mc(s,i)}catch(i){await cc(i)}}function gj(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function xj(t,e,n){const s=me(t);let i=s.Ba[s.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),s.Ba[s.currentUser.toKey()]=i}}function np(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Ma.get(e))t.Fa.delete(s),n&&t.Ca.$a(s,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(s=>{t.La.containsKey(s)||yj(t,s)})}function yj(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Fg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Qg(t))}function gv(t,e,n){for(const s of n)s instanceof hj?(t.La.addReference(s.key,e),F4(t,s)):s instanceof fj?(ne("SyncEngine","Document no longer in limbo: "+s.key),t.La.removeReference(s.key,e),t.La.containsKey(s.key)||yj(t,s.key)):ce()}function F4(t,e){const n=e.key,s=n.path.canonicalString();t.Oa.get(n)||t.xa.has(s)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(s),Qg(t))}function Qg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(ze.fromString(e)),s=t.qa.next();t.Na.set(s,new I4(n)),t.Oa=t.Oa.insert(n,s),aj(t.remoteStore,new kr(vs(oh(n.path)),s,"TargetPurposeLimboResolution",Eg.oe))}}async function mc(t,e,n){const s=me(t),i=[],a=[],o=[];s.Fa.isEmpty()||(s.Fa.forEach((c,u)=>{o.push(s.Ka(u,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Vg.Wi(u.targetId,d);a.push(m)}}))}),await Promise.all(o),s.Ca.d_(i),await async function(u,d){const h=me(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>K.forEach(d,p=>K.forEach(p.$i,v=>h.persistence.referenceDelegate.addReference(m,p.targetId,v)).next(()=>K.forEach(p.Ui,v=>h.persistence.referenceDelegate.removeReference(m,p.targetId,v)))))}catch(m){if(!uc(m))throw m;ne("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const v=h.os.get(p),_=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(p,R)}}}(s.localStore,a))}async function U4(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const s=await nj(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(c=>{c.forEach(u=>{u.reject(new Z(q.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await mc(n,s.hs)}}function $4(t,e){const n=me(t),s=n.Na.get(e);if(s&&s.va)return ve().add(s.key);{let i=ve();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function vj(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O4.bind(null,e),e.Ca.d_=j4.bind(null,e.eventManager),e.Ca.$a=E4.bind(null,e.eventManager),e}function B4(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V4.bind(null,e),e}class Id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return GR(this.persistence,new WR,e.initialUser,this.serializer)}Ga(e){return new zR(Mg.Zr,this.serializer)}Wa(e){return new t4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Id.provider={build:()=>new Id};class sp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>pv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=U4.bind(null,this.syncEngine),await _4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new N4}()}createDatastore(e){const n=fh(e.databaseInfo.databaseId),s=function(a){return new i4(a)}(e.databaseInfo);return function(a,o,c,u){return new l4(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,a,o,c){return new u4(s,i,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>pv(this.syncEngine,n,0),function(){return uv.D()?new uv:new n4}())}createSyncEngine(e,n){return function(i,a,o,c,u,d,h){const m=new S4(i,a,o,c,u,d);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=me(i);ne("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await fc(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sp.provider={build:()=>new sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Zs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n,s,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Mt.UNAUTHENTICATED,this.clientId=jg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async o=>{ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=qg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function jf(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await nj(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await q4(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>dv(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>dv(e.remoteStore,i)),t._onlineComponents=e}async function q4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await jf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Pi("Error using user provided cache. Falling back to memory cache: "+n),await jf(t,new Id)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await jf(t,new Id);return t._offlineComponents}async function wj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await xv(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await xv(t,new sp))),t._onlineComponents}function H4(t){return wj(t).then(e=>e.syncEngine)}async function Sd(t){const e=await wj(t),n=e.eventManager;return n.onListen=C4.bind(null,e.syncEngine),n.onUnlisten=P4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=A4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D4.bind(null,e.syncEngine),n}function W4(t,e,n={}){const s=new zs;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const h=new Xg({next:p=>{h.Za(),o.enqueueAndForget(()=>Wg(a,m));const v=p.docs.has(c);!v&&p.fromCache?d.reject(new Z(q.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&u&&u.source==="server"?d.reject(new Z(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Gg(oh(c.path),h,{includeMetadataChanges:!0,_a:!0});return Hg(a,m)}(await Sd(t),t.asyncQueue,e,n,s)),s.promise}function K4(t,e,n={}){const s=new zs;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const h=new Xg({next:p=>{h.Za(),o.enqueueAndForget(()=>Wg(a,m)),p.fromCache&&u.source==="server"?d.reject(new Z(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Gg(c,h,{includeMetadataChanges:!0,_a:!0});return Hg(a,m)}(await Sd(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t,e,n){if(!n)throw new Z(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Nj(t,e,n,s){if(e===!0&&s===!0)throw new Z(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vv(t){if(!ie.isDocumentKey(t))throw new Z(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wv(t){if(ie.isDocumentKey(t))throw new Z(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce()}function Kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gh(t);throw new Z(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function G4(t,e){if(e<=0)throw new Z(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_j((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xh{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _v({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _v(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new _N;switch(s.type){case"firstParty":return new xA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Z(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=yv.get(n);s&&(ne("ComponentProvider","Removing Datastore"),yv.delete(n),s.terminate())}(this),Promise.resolve()}}function jj(t,e,n,s={}){var i;const a=(t=Kt(t,xh))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),s.mockUserToken){let c,u;if(typeof s.mockUserToken=="string")c=s.mockUserToken,u=Mt.MOCK_USER;else{c=bb(s.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Z(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Mt(d)}t._authCredentials=new mA(new wN(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Es(this.firestore,e,this._query)}}class St{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}}class qs extends Es{constructor(e,n,s){super(e,n,oh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new ie(e))}withConverter(e){return new qs(this.firestore,e,this._path)}}function he(t,e,...n){if(t=Ue(t),bj("collection","path",e),t instanceof xh){const s=ze.fromString(e,...n);return wv(s),new qs(t,null,s)}{if(!(t instanceof St||t instanceof qs))throw new Z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ze.fromString(e,...n));return wv(s),new qs(t.firestore,null,s)}}function J(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=jg.newId()),bj("doc","path",e),t instanceof xh){const s=ze.fromString(e,...n);return vv(s),new St(t,null,new ie(s))}{if(!(t instanceof St||t instanceof qs))throw new Z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ze.fromString(e,...n));return vv(s),new St(t.firestore,t instanceof qs?t.converter:null,new ie(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new rj(this,"async_queue_retry"),this.Vu=()=>{const s=Nf();s&&ne("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const n=Nf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Nf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new zs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!uc(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(s=>{this.Eu=s,this.du=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(s);throw Zs("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.du=!1,s))));return this.mu=n,n}enqueueAfterDelay(e,n,s){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=zg.createAndSchedule(this,e,n,s,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Nv(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of s)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class bs extends xh{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new bv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bv(e),this._firestoreClient=void 0,await e}}}function Ej(t,e){const n=typeof t=="object"?t:nh(),s=typeof t=="string"?t:"(default)",i=th(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const a=vb("firestore");a&&jj(i,...a)}return i}function pc(t){if(t._terminated)throw new Z(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Q4(t),t._firestoreClient}function Q4(t){var e,n,s;const i=t._freezeSettings(),a=function(c,u,d,h){return new CA(c,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,_j(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new z4(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oi(Nt.fromBase64String(e))}catch(n){throw new Z(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Oi(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=/^__.*__$/;class Y4{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new dc(e,this.data,n,this.fieldTransforms)}}class kj{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Tj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}class Yg{constructor(e,n,s,i,a,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Yg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:s,xu:!1});return i.Ou(e),i}Nu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:s,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Tj(this.Cu)&&X4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class J4{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||fh(e)}Qu(e,n,s,i=!1){return new Yg({Cu:e,methodName:n,qu:s,path:_t.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wh(t){const e=t._freezeSettings(),n=fh(t._databaseId);return new J4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ij(t,e,n,s,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);ex("Data must be an object, but it was:",o,s);const c=Sj(s,o);let u,d;if(a.merge)u=new xn(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const p=rp(e,m,n);if(!o.contains(p))throw new Z(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Aj(h,p)||h.push(p)}u=new xn(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new Y4(new Zt(c),u,d)}class _h extends co{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _h}}class Jg extends co{_toFieldTransform(e){return new zN(e.path,new Kl)}isEqual(e){return e instanceof Jg}}class Zg extends co{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Xl(e.serializer,VN(e.serializer,this.$u));return new zN(e.path,n)}isEqual(e){return e instanceof Zg&&this.$u===e.$u}}function Z4(t,e,n,s){const i=t.Qu(1,e,n);ex("Data must be an object, but it was:",i,s);const a=[],o=Zt.empty();$i(s,(u,d)=>{const h=tx(e,u,n);d=Ue(d);const m=i.Nu(h);if(d instanceof _h)a.push(h);else{const p=xc(d,m);p!=null&&(a.push(h),o.set(h,p))}});const c=new xn(a);return new kj(o,c,i.fieldTransforms)}function e5(t,e,n,s,i,a){const o=t.Qu(1,e,n),c=[rp(e,s,n)],u=[i];if(a.length%2!=0)throw new Z(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)c.push(rp(e,a[p])),u.push(a[p+1]);const d=[],h=Zt.empty();for(let p=c.length-1;p>=0;--p)if(!Aj(d,c[p])){const v=c[p];let _=u[p];_=Ue(_);const R=o.Nu(v);if(_ instanceof _h)d.push(v);else{const k=xc(_,R);k!=null&&(d.push(v),h.set(v,k))}}const m=new xn(d);return new kj(h,m,o.fieldTransforms)}function t5(t,e,n,s=!1){return xc(n,t.Qu(s?4:3,e))}function xc(t,e){if(Cj(t=Ue(t)))return ex("Unsupported field value:",e,t),Sj(t,e);if(t instanceof co)return function(s,i){if(!Tj(i.Cu))throw i.Bu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(s,i){const a=[];let o=0;for(const c of s){let u=xc(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(s,i){if((s=Ue(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return VN(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=it.fromDate(s);return{timestampValue:kd(i.serializer,a)}}if(s instanceof it){const a=new it(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:kd(i.serializer,a)}}if(s instanceof yh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Oi)return{bytesValue:QN(i.serializer,s._byteString)};if(s instanceof St){const a=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Lg(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof vh)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Ag(c.serializer,u)})}}}}}}(s,i);throw i.Bu(`Unsupported field value: ${gh(s)}`)}(t,e)}function Sj(t,e){const n={};return bN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$i(t,(s,i)=>{const a=xc(i,e.Mu(s));a!=null&&(n[s]=a)}),{mapValue:{fields:n}}}function Cj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof yh||t instanceof Oi||t instanceof St||t instanceof co||t instanceof vh)}function ex(t,e,n){if(!Cj(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=gh(n);throw s==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+s)}}function rp(t,e,n){if((e=Ue(e))instanceof gc)return e._internalPath;if(typeof e=="string")return tx(t,e);throw Cd("Field path arguments must be of type string or ",t,!1,void 0,n)}const n5=new RegExp("[~\\*/\\[\\]]");function tx(t,e,n){if(e.search(n5)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gc(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cd(t,e,n,s,i){const a=s&&!s.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${s}`),o&&(u+=` in document ${i}`),u+=")"),new Z(q.INVALID_ARGUMENT,c+t+u)}function Aj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n,s,i,a){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new s5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class s5 extends Rj{data(){return super.data()}}function bh(t,e){return typeof e=="string"?tx(t,e):e instanceof gc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nx{}class Nh extends nx{}function at(t,e,...n){let s=[];e instanceof nx&&s.push(e),s=s.concat(n),function(a){const o=a.filter(u=>u instanceof jh).length,c=a.filter(u=>u instanceof yc).length;if(o>1||o>0&&c>0)throw new Z(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class yc extends Nh{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new yc(e,n,s)}_apply(e){const n=this._parse(e);return Dj(e._query,n),new Es(e.firestore,e.converter,Qm(e._query,n))}_parse(e){const n=wh(e.firestore);return function(a,o,c,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ev(m,h);const v=[];for(const _ of m)v.push(jv(u,a,_));p={arrayValue:{values:v}}}else p=jv(u,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ev(m,h),p=t5(c,o,m,h==="in"||h==="not-in");return dt.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ht(t,e,n){const s=e,i=bh("where",t);return yc._create(i,s,n)}class jh extends nx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:as.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)Dj(o,u),o=Qm(o,u)}(e._query,n),new Es(e.firestore,e.converter,Qm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Eh extends Nh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Eh(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new Z(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Z(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(a,o)}(e._query,this._field,this._direction);return new Es(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new ao(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Ns(t,e="asc"){const n=e,s=bh("orderBy",t);return Eh._create(s,n)}class kh extends Nh{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new kh(e,n,s)}_apply(e){return new Es(e.firestore,e.converter,Ed(e._query,this._limit,this._limitType))}}function sx(t){return G4("limit",t),kh._create("limit",t,"F")}function jv(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new Z(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AN(e)&&n.indexOf("/")!==-1)throw new Z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ze.fromString(n));if(!ie.isDocumentKey(s))throw new Z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Hy(t,new ie(s))}if(n instanceof St)return Hy(t,n._key);throw new Z(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gh(n)}.`)}function Ev(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dj(t,e){const n=function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Lj{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return $i(e,(i,a)=>{s[i]=this.convertValue(a,n)}),s}convertVectorValue(e){var n,s,i;const a=(i=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(o=>nt(o.doubleValue));return new vh(a)}convertGeoPoint(e){return new yh(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Tg(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const n=Br(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ze.fromString(e);Ae(tj(s));const i=new qa(s.get(1),s.get(3)),a=new ie(s.popFirst(5));return i.isEqual(n)||Zs(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rx extends Rj{constructor(e,n,s,i,a,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(bh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class yl extends rx{data(e={}){return super.data(e)}}class ix{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ea(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new yl(this._firestore,this._userDataWriter,s.key,s,new Ea(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new yl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ea(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new yl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ea(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:r5(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function r5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){t=Kt(t,St);const e=Kt(t.firestore,bs);return W4(pc(e),t._key).then(n=>Mj(e,t,n))}class ax extends Lj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}}function Ve(t){t=Kt(t,Es);const e=Kt(t.firestore,bs),n=pc(e),s=new ax(e);return Pj(t._query),K4(n,t._query).then(i=>new ix(e,s,t,i))}function fn(t,e,n){t=Kt(t,St);const s=Kt(t.firestore,bs),i=Oj(t.converter,e,n);return vc(s,[Ij(wh(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ln.none())])}function _e(t,e,n,...s){t=Kt(t,St);const i=Kt(t.firestore,bs),a=wh(i);let o;return o=typeof(e=Ue(e))=="string"||e instanceof gc?e5(a,"updateDoc",t._key,e,n,s):Z4(a,"updateDoc",t._key,e),vc(i,[o.toMutation(t._key,Ln.exists(!0))])}function Jn(t){return vc(Kt(t.firestore,bs),[new Rg(t._key,Ln.none())])}function ts(t,e){const n=Kt(t.firestore,bs),s=J(t),i=Oj(t.converter,e);return vc(n,[Ij(wh(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,Ln.exists(!1))]).then(()=>s)}function tr(t,...e){var n,s,i;t=Ue(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nv(e[o])||(a=e[o],o++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Nv(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(s=m.error)===null||s===void 0?void 0:s.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,d,h;if(t instanceof St)d=Kt(t.firestore,bs),h=oh(t._key.path),u={next:m=>{e[o]&&e[o](Mj(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Kt(t,Es);d=Kt(m.firestore,bs),h=m._query;const p=new ax(d);u={next:v=>{e[o]&&e[o](new ix(d,p,m,v))},error:e[o+1],complete:e[o+2]},Pj(t._query)}return function(p,v,_,R){const k=new Xg(R),b=new Gg(v,k,_);return p.asyncQueue.enqueueAndForget(async()=>Hg(await Sd(p),b)),()=>{k.Za(),p.asyncQueue.enqueueAndForget(async()=>Wg(await Sd(p),b))}}(pc(d),h,c,u)}function vc(t,e){return function(s,i){const a=new zs;return s.asyncQueue.enqueueAndForget(async()=>L4(await H4(s),i,a)),a.promise}(pc(t),e)}function Mj(t,e,n){const s=n.docs.get(e._key),i=new ax(t);return new rx(t,i,e._key,s,new Ea(n.hasPendingWrites,n.fromCache),e.converter)}function le(){return new Jg("serverTimestamp")}function Ls(t){return new Zg("increment",t)}(function(e,n=!0){(function(i){io=i})(Ui),Si(new Ur("firestore",(s,{instanceIdentifier:i,options:a})=>{const o=s.getProvider("app").getImmediate(),c=new bs(new pA(s.getProvider("auth-internal")),new vA(s.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(d.options.projectId,h)}(o,i),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),xs(Uy,"4.7.3",e),xs(Uy,"4.7.3","esm2017")})();const Ef=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Lj,Bytes:Oi,CollectionReference:qs,DocumentReference:St,DocumentSnapshot:rx,FieldPath:gc,FieldValue:co,Firestore:bs,FirestoreError:Z,GeoPoint:yh,Query:Es,QueryCompositeFilterConstraint:jh,QueryConstraint:Nh,QueryDocumentSnapshot:yl,QueryFieldFilterConstraint:yc,QueryLimitConstraint:kh,QueryOrderByConstraint:Eh,QuerySnapshot:ix,SnapshotMetadata:Ea,Timestamp:it,VectorValue:vh,_AutoId:jg,_ByteString:Nt,_DatabaseId:qa,_DocumentKey:ie,_EmptyAuthCredentialsProvider:_N,_FieldPath:_t,_cast:Kt,_logWarn:Pi,_validateIsNotUsedTogether:Nj,addDoc:ts,collection:he,connectFirestoreEmulator:jj,deleteDoc:Jn,doc:J,ensureFirestoreConfigured:pc,executeWrite:vc,getDoc:tt,getDocs:Ve,getFirestore:Ej,increment:Ls,limit:sx,onSnapshot:tr,orderBy:Ns,query:at,serverTimestamp:le,setDoc:fn,updateDoc:_e,where:ht},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="firebasestorage.googleapis.com",Fj="storageBucket",i5=2*60*1e3,a5=10*60*1e3,o5=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je extends js{constructor(e,n,s=0){super(kf(e),`Firebase Storage: ${n} (${kf(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return kf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var He;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(He||(He={}));function kf(t){return"storage/"+t}function ox(){const t="An unknown error occurred, please check the error payload for server response.";return new Je(He.UNKNOWN,t)}function l5(t){return new Je(He.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function c5(t){return new Je(He.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function u5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Je(He.UNAUTHENTICATED,t)}function d5(){return new Je(He.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function h5(t){return new Je(He.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Uj(){return new Je(He.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $j(){return new Je(He.CANCELED,"User canceled the upload/download.")}function f5(t){return new Je(He.INVALID_URL,"Invalid URL '"+t+"'.")}function m5(t){return new Je(He.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function p5(){return new Je(He.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fj+"' property when initializing the app?")}function Bj(){return new Je(He.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g5(){return new Je(He.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function x5(){return new Je(He.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function y5(t){return new Je(He.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ip(t){return new Je(He.INVALID_ARGUMENT,t)}function zj(){return new Je(He.APP_DELETED,"The Firebase app was deleted.")}function v5(t){return new Je(He.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vl(t,e){return new Je(He.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function qo(t){throw new Je(He.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=yn.makeFromUrl(e,n)}catch{return new yn(e,"")}if(s.path==="")return s;throw m5(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function a(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${h}/b/${i}/o${p}`,"i"),_={bucket:1,path:3},R=n===Vj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",b=new RegExp(`^https?://${R}/${i}/${k}`,"i"),y=[{regex:c,indices:u,postModify:a},{regex:v,indices:_,postModify:d},{regex:b,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<y.length;j++){const C=y[j],O=C.regex.exec(e);if(O){const N=O[C.indices.bucket];let x=O[C.indices.path];x||(x=""),s=new yn(N,x),C.postModify(s);break}}if(s==null)throw f5(e);return s}}class w5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e,n){let s=1,i=null,a=null,o=!1,c=0;function u(){return c===2}let d=!1;function h(...k){d||(d=!0,e.apply(null,k))}function m(k){i=setTimeout(()=>{i=null,t(v,u())},k)}function p(){a&&clearTimeout(a)}function v(k,...b){if(d){p();return}if(k){p(),h.call(null,k,...b);return}if(u()||o){p(),h.call(null,k,...b);return}s<64&&(s*=2);let y;c===1?(c=2,y=0):y=(s+Math.random())*1e3,m(y)}let _=!1;function R(k){_||(_=!0,p(),!d&&(i!==null?(k||(c=2),clearTimeout(i),m(0)):k||(c=1)))}return m(0),a=setTimeout(()=>{o=!0,R(!0)},n),R}function b5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(t){return t!==void 0}function j5(t){return typeof t=="function"}function E5(t){return typeof t=="object"&&!Array.isArray(t)}function Th(t){return typeof t=="string"||t instanceof String}function kv(t){return lx()&&t instanceof Blob}function lx(){return typeof Blob<"u"}function Tv(t,e,n,s){if(s<e)throw ip(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw ip(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function qj(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var _i;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(_i||(_i={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,n,s,i,a,o,c,u,d,h,m,p=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,_)=>{this.resolve_=v,this.reject_=_,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new yu(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===_i.NO_ERROR,u=a.getStatus();if(!c||Hj(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===_i.ABORT;s(!1,new yu(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;s(!0,new yu(d,a))})},n=(s,i)=>{const a=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());N5(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=ox();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?zj():$j();o(u)}else{const u=Uj();o(u)}};this.canceled_?n(!1,new yu(!1,null,!0)):this.backoffId_=_5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&b5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yu{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function T5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function I5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function S5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function C5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function A5(t,e,n,s,i,a,o=!0){const c=qj(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return S5(d,e),T5(d,n),I5(d,a),C5(d,s),new k5(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function P5(...t){const e=R5();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(lx())return new Blob(t);throw new Je(He.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function D5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(t){if(typeof atob>"u")throw y5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tf{constructor(e,n){this.data=e,this.contentType=n||null}}function O5(t,e){switch(t){case ms.RAW:return new Tf(Wj(e));case ms.BASE64:case ms.BASE64URL:return new Tf(Kj(t,e));case ms.DATA_URL:return new Tf(V5(e),F5(e))}throw ox()}function Wj(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=s,o=t.charCodeAt(++n);s=65536|(a&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function M5(t){let e;try{e=decodeURIComponent(t)}catch{throw vl(ms.DATA_URL,"Malformed data URL.")}return Wj(e)}function Kj(t,e){switch(t){case ms.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw vl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ms.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw vl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=L5(e)}catch(i){throw i.message.includes("polyfill")?i:vl(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}class Gj{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vl(ms.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=U5(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function V5(t){const e=new Gj(t);return e.base64?Kj(ms.BASE64,e.rest):M5(e.rest)}function F5(t){return new Gj(t).contentType}function U5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){let s=0,i="";kv(e)?(this.data_=e,s=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(kv(this.data_)){const s=this.data_,i=D5(s,e,n);return i===null?null:new Os(i)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Os(s,!0)}}static getBlob(...e){if(lx()){const n=e.map(s=>s instanceof Os?s.data_:s);return new Os(P5.apply(null,n))}else{const n=e.map(o=>Th(o)?O5(ms.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const i=new Uint8Array(s);let a=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[a++]=o[c]}),new Os(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){let e;try{e=JSON.parse(t)}catch{return null}return E5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function B5(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function Xj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t,e){return e}class qt{constructor(e,n,s,i){this.server=e,this.local=n||e,this.writable=!!s,this.xform=i||z5}}let vu=null;function q5(t){return!Th(t)||t.length<2?t:Xj(t)}function cx(){if(vu)return vu;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(a,o){return q5(o)}const n=new qt("name");n.xform=e,t.push(n);function s(a,o){return o!==void 0?Number(o):o}const i=new qt("size");return i.xform=s,t.push(i),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),vu=t,vu}function H5(t,e){function n(){const s=t.bucket,i=t.fullPath,a=new yn(s,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function W5(t,e,n){const s={};s.type="file";const i=n.length;for(let a=0;a<i;a++){const o=n[a];s[o.local]=o.xform(s,e[o.server])}return H5(s,t),s}function Yj(t,e,n){const s=Qj(e);return s===null?null:W5(t,s,n)}function K5(t,e,n,s){const i=Qj(e);if(i===null||!Th(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const h=t.bucket,m=t.fullPath,p="/b/"+o(h)+"/o/"+o(m),v=wc(p,n,s),_=qj({alt:"media",token:d});return v+_})[0]}function Jj(t,e){const n={},s=e.length;for(let i=0;i<s;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class uo{constructor(e,n,s,i){this.url=e,this.method=n,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t){if(!t)throw ox()}function ux(t,e){function n(s,i){const a=Yj(t,i,e);return Hs(a!==null),a}return n}function G5(t,e){function n(s,i){const a=Yj(t,i,e);return Hs(a!==null),K5(a,i,t.host,t._protocol)}return n}function _c(t){function e(n,s){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=d5():i=u5():n.getStatus()===402?i=c5(t.bucket):n.getStatus()===403?i=h5(t.path):i=s,i.status=n.getStatus(),i.serverResponse=s.serverResponse,i}return e}function Zj(t){const e=_c(t);function n(s,i){let a=e(s,i);return s.getStatus()===404&&(a=l5(t.path)),a.serverResponse=i.serverResponse,a}return n}function Q5(t,e,n){const s=e.fullServerUrl(),i=wc(s,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new uo(i,a,ux(t,n),o);return c.errorHandler=Zj(e),c}function X5(t,e,n){const s=e.fullServerUrl(),i=wc(s,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new uo(i,a,G5(t,n),o);return c.errorHandler=Zj(e),c}function Y5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function e1(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=Y5(null,e)),s}function t1(t,e,n,s,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let y="";for(let j=0;j<2;j++)y=y+Math.random().toString().slice(2);return y}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=e1(e,s,i),h=Jj(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",v=Os.getBlob(m,s,p);if(v===null)throw Bj();const _={name:d.fullPath},R=wc(a,t.host,t._protocol),k="POST",b=t.maxUploadRetryTime,w=new uo(R,k,ux(t,n),b);return w.urlParams=_,w.headers=o,w.body=v.uploadData(),w.errorHandler=_c(e),w}class Ad{constructor(e,n,s,i){this.current=e,this.total=n,this.finalized=!!s,this.metadata=i||null}}function dx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Hs(!1)}return Hs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function J5(t,e,n,s,i){const a=e.bucketOnlyServerUrl(),o=e1(e,s,i),c={name:o.fullPath},u=wc(a,t.host,t._protocol),d="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=Jj(o,n),p=t.maxUploadRetryTime;function v(R){dx(R);let k;try{k=R.getResponseHeader("X-Goog-Upload-URL")}catch{Hs(!1)}return Hs(Th(k)),k}const _=new uo(u,d,v,p);return _.urlParams=c,_.headers=h,_.body=m,_.errorHandler=_c(e),_}function Z5(t,e,n,s){const i={"X-Goog-Upload-Command":"query"};function a(d){const h=dx(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Hs(!1)}m||Hs(!1);const p=Number(m);return Hs(!isNaN(p)),new Ad(p,s.size(),h==="final")}const o="POST",c=t.maxUploadRetryTime,u=new uo(n,o,a,c);return u.headers=i,u.errorHandler=_c(e),u}const Iv=256*1024;function eP(t,e,n,s,i,a,o,c){const u=new Ad(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw g5();const d=u.total-u.current;let h=d;i>0&&(h=Math.min(h,i));const m=u.current,p=m+h;let v="";h===0?v="finalize":d===h?v="upload, finalize":v="upload";const _={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${u.current}`},R=s.slice(m,p);if(R===null)throw Bj();function k(j,C){const O=dx(j,["active","final"]),N=u.current+h,x=s.size();let E;return O==="final"?E=ux(e,a)(j,C):E=null,new Ad(N,x,O==="final",E)}const b="POST",w=e.maxUploadRetryTime,y=new uo(n,b,k,w);return y.headers=_,y.body=R.uploadData(),y.progressCallback=c||null,y.errorHandler=_c(t),y}const Yt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function If(t){switch(t){case"running":case"pausing":case"canceling":return Yt.RUNNING;case"paused":return Yt.PAUSED;case"success":return Yt.SUCCESS;case"canceled":return Yt.CANCELED;case"error":return Yt.ERROR;default:return Yt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,s){if(j5(e)||n!=null||s!=null)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class nP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_i.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_i.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_i.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,i){if(this.sent_)throw qo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sP extends nP{initXhr(){this.xhr_.responseType="text"}}function hi(){return new sP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=cx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(He.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(Hj(i.status,[]))if(a)i=Uj();else{this.sleepTime=Math.max(this.sleepTime*2,o5),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(He.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const s=J5(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,hi,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const i=Z5(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,hi,n,s);this._request=a,a.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Iv*this._chunkMultiplier,n=new Ad(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((i,a)=>{let o;try{o=eP(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(o,hi,i,a,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Iv*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=Q5(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(s,hi,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=t1(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,hi,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=$j(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=If(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,i){const a=new tP(n||void 0,s||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(If(this._state)){case Yt.SUCCESS:la(this._resolve.bind(null,this.snapshot))();break;case Yt.CANCELED:case Yt.ERROR:const n=this._reject;la(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(If(this._state)){case Yt.RUNNING:case Yt.PAUSED:e.next&&la(e.next.bind(e,this.snapshot))();break;case Yt.SUCCESS:e.complete&&la(e.complete.bind(e))();break;case Yt.CANCELED:case Yt.ERROR:e.error&&la(e.error.bind(e,this._error))();break;default:e.error&&la(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n){this._service=e,n instanceof yn?this._location=n:this._location=yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Mi(e,n)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xj(this._location.path)}get storage(){return this._service}get parent(){const e=$5(this._location.path);if(e===null)return null;const n=new yn(this._location.bucket,e);return new Mi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw v5(e)}}function iP(t,e,n){t._throwIfRoot("uploadBytes");const s=t1(t.storage,t._location,cx(),new Os(e,!0),n);return t.storage.makeRequestWithTokens(s,hi).then(i=>({metadata:i,ref:t}))}function aP(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new rP(t,new Os(e),n)}function oP(t){t._throwIfRoot("getDownloadURL");const e=X5(t.storage,t._location,cx());return t.storage.makeRequestWithTokens(e,hi).then(n=>{if(n===null)throw x5();return n})}function lP(t,e){const n=B5(t._location.path,e),s=new yn(t._location.bucket,n);return new Mi(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t){return/^[A-Za-z]+:\/\//.test(t)}function uP(t,e){return new Mi(t,e)}function n1(t,e){if(t instanceof hx){const n=t;if(n._bucket==null)throw p5();const s=new Mi(n,n._bucket);return e!=null?n1(s,e):s}else return e!==void 0?lP(t,e):t}function dP(t,e){if(e&&cP(e)){if(t instanceof hx)return uP(t,e);throw ip("To use ref(service, url), the first argument must be a Storage instance.")}else return n1(t,e)}function Sv(t,e){const n=e==null?void 0:e[Fj];return n==null?null:yn.makeFromBucketSpec(n,t)}function hP(t,e,n,s={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:bb(i,t.app.options.projectId))}class hx{constructor(e,n,s,i,a){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Vj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i5,this._maxUploadRetryTime=a5,this._requests=new Set,i!=null?this._bucket=yn.makeFromBucketSpec(i,this._host):this._bucket=Sv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=Sv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mi(this,e)}_makeRequest(e,n,s,i,a=!0){if(this._deleted)return new w5(zj());{const o=A5(e,this._appId,s,i,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const Cv="@firebase/storage",Av="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="storage";function ap(t,e,n){return t=Ue(t),iP(t,e,n)}function fx(t,e,n){return t=Ue(t),aP(t,e,n)}function Qa(t){return t=Ue(t),oP(t)}function Xa(t,e){return t=Ue(t),dP(t,e)}function Ih(t=nh(),e){t=Ue(t);const s=th(t,s1).getImmediate({identifier:e}),i=vb("storage");return i&&fP(s,...i),s}function fP(t,e,n,s={}){hP(t,e,n,s)}function mP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new hx(n,s,i,e,Ui)}function pP(){Si(new Ur(s1,mP,"PUBLIC").setMultipleInstances(!0)),xs(Cv,Av,""),xs(Cv,Av,"esm2017")}pP();const gP={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},mn=kb().length?nh():Eb(gP),On=kb().length>0?uA(mn):Qb(mn,{persistence:[uN,rN]}),z=Ej(mn),op=Ih(mn),wu="broast_session_location",r1=I.createContext({user:null,role:null,loading:!0,logout:async()=>{},userLocation:null,locationRequired:!1,refreshUserData:async()=>{}}),xP=({children:t})=>{const[e,n]=I.useState(null),[s,i]=I.useState(null),[a,o]=I.useState(!0),[c,u]=I.useState(null),[d,h]=I.useState(!1),m=async()=>{if(!e)return;const v=await tt(J(z,"users",e.uid));if(v.exists()){const _=v.data(),R=_==null?void 0:_.role,k=_==null?void 0:_.location,b=_==null?void 0:_.savedLocation;if(R==="customer"||R==="admin"){const w=b?{lat:b.lat,lng:b.lng}:k||null;u(w),w&&sessionStorage.setItem(wu,JSON.stringify(w))}else u(k||null),k&&sessionStorage.setItem(wu,JSON.stringify(k));h(!1)}};I.useEffect(()=>{const v=MS(On,async _=>{if(n(_),_){const R=await tt(J(z,"users",_.uid)),k=R.data(),b=R.exists()?k==null?void 0:k.role:null;i(b);const w=k==null?void 0:k.location,y=k==null?void 0:k.savedLocation,j=sessionStorage.getItem(wu),C=j?JSON.parse(j):null;let O=null;if(b==="customer"||b==="admin"?O=y?{lat:y.lat,lng:y.lng}:C||w||null:O=C||w||null,u(O),b==="customer"||b==="admin"?(h(!(!!y||!!C)),y&&!C&&sessionStorage.setItem(wu,JSON.stringify({lat:y.lat,lng:y.lng}))):h(b==="owner"||b==="courier"?!w:!1),b==="owner")try{const N=J(z,"restaurants",_.uid);(await tt(N)).exists()||await fn(N,{name:(k==null?void 0:k.restaurantName)||(k==null?void 0:k.name)||" ",ownerId:_.uid,email:(k==null?void 0:k.email)||_.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(N){console.warn("    ",N)}}else i(null),u(null),h(!1);o(!1)});return()=>v()},[]);const p=async()=>{await VS(On)};return r.jsx(r1.Provider,{value:{user:e,role:s,loading:a,logout:p,userLocation:c,locationRequired:d,refreshUserData:m},children:t})},We=()=>I.useContext(r1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),Rv=t=>{const e=vP(t);return e.charAt(0).toUpperCase()+e.slice(1)},i1=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),wP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _P={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...c},u)=>I.createElement("svg",{ref:u,..._P,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:i1("lucide",i),...!a&&!wP(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>I.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=(t,e)=>{const n=I.forwardRef(({className:s,...i},a)=>I.createElement(bP,{ref:a,iconNode:e,className:i1(`lucide-${yP(Rv(t))}`,`lucide-${t}`,s),...i}));return n.displayName=Rv(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],jP=Q("arrow-left",NP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],bc=Q("arrow-right",EP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],zu=Q("award",kP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Rd=Q("bell",TP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],SP=Q("briefcase",IP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],a1=Q("building-2",CP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],RP=Q("calendar",AP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Sf=Q("chart-column",PP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Pv=Q("check-check",DP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Mn=Q("check",LP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],mx=Q("chef-hat",OP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],o1=Q("chevron-down",MP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lp=Q("chevron-left",VP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],UP=Q("chevron-right",FP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],BP=Q("chevron-up",$P);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xi=Q("circle-alert",zP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Se=Q("circle-check-big",qP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],WP=Q("circle-check",HP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ws=Q("circle-x",KP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Pd=Q("clipboard-list",GP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ns=Q("clock",QP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],px=Q("code-xml",XP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],JP=Q("credit-card",YP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Sn=Q("crown",ZP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Dv=Q("dollar-sign",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],qu=Q("external-link",t6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],l1=Q("eye",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Lv=Q("file-check",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gx=Q("file-text",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],a6=Q("funnel",i6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Cf=Q("gift",o6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],c1=Q("heart",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Dd=Q("house",c6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],u1=Q("image",u6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ov=Q("info",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],f6=Q("key-round",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],p6=Q("key",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bi=Q("loader-circle",g6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xx=Q("lock",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],yx=Q("log-in",y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],vx=Q("mail",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Nn=Q("map-pin",w6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],b6=Q("map",_6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],cp=Q("medal",N6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Ni=Q("megaphone",j6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],k6=Q("menu",E6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Sh=Q("message-circle",T6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M5 12h14",key:"1ays0h"}]],S6=Q("minus",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Ya=Q("navigation",C6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],_n=Q("package",A6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ld=Q("pen-line",R6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],wx=Q("phone",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],d1=Q("play",D6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Nc=Q("plus",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pn=Q("refresh-cw",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],h1=Q("save",M6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],F6=Q("search",V6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$6=Q("send",U6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],z6=Q("server",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],f1=Q("settings",q6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],W6=Q("shield-check",H6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],jc=Q("shield",K6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Yl=Q("shopping-bag",G6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Od=Q("shopping-cart",Q6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Y6=Q("smartphone",X6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Z6=Q("smile",J6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Un=Q("sparkles",e3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mv=Q("square-check-big",t3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Vv=Q("square",n3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],m1=Q("star",s3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Ut=Q("store",r3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],a3=Q("target",i3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rn=Q("trash-2",o3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],c3=Q("trending-up",l3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],up=Q("triangle-alert",u3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ss=Q("truck",d3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],p1=Q("upload",h3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Af=Q("user-check",f3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],p3=Q("user-minus",m3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Jl=Q("user-plus",g3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Fv=Q("user-x",x3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Rn=Q("user",y3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],w3=Q("users",v3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],b3=Q("utensils",_3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],j3=Q("video",N3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],dp=Q("wallet",E3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qr=Q("x",k3),$e=({to:t,label:e,icon:n,onClick:s})=>{const{pathname:i}=Xr(),a=i===t;return r.jsxs(je,{to:t,onClick:s,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(a?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20 backdrop-blur-sm"),children:[n,r.jsx("span",{children:e})]})},T3=()=>{const{user:t,role:e,logout:n}=We(),[s,i]=I.useState(!1),[a,o]=I.useState(0),c=Xr(),u=Xt(),d=c.pathname==="/";return I.useEffect(()=>{i(!1)},[c.pathname]),I.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),I.useEffect(()=>{if(!t){o(0);return}const h=at(he(z,"notifications"),ht("recipientId","==",t.uid),ht("read","==",!1)),m=tr(h,p=>{o(p.size)},()=>o(0));return()=>m()},[t]),r.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30",children:[r.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[!d&&r.jsx("button",{onClick:()=>u(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"",children:r.jsx(bc,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[r.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),r.jsx("span",{className:"text-lg sm:text-2xl",children:" "})]})]}),r.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[r.jsx($e,{to:"/restaurants",label:"",icon:r.jsx(Ut,{className:"w-4 h-4"})}),e==="customer"&&r.jsxs(r.Fragment,{children:[r.jsx($e,{to:"/cart",label:" "}),r.jsx($e,{to:"/orders",label:""}),r.jsx($e,{to:"/profile",label:"",icon:r.jsx(Rn,{className:"w-4 h-4"})})]}),e==="owner"&&r.jsxs(r.Fragment,{children:[r.jsx($e,{to:"/owner",label:" "}),r.jsx($e,{to:"/owner/orders",label:" "}),r.jsx($e,{to:"/owner/courier-requests",label:""})]}),e==="courier"&&r.jsxs(r.Fragment,{children:[r.jsx($e,{to:"/courier",label:" "}),r.jsx($e,{to:"/courier/hiring",label:""})]}),e==="admin"&&r.jsx($e,{to:"/admin",label:" "}),e==="developer"&&r.jsx($e,{to:"/developer",label:" "}),t&&r.jsxs(je,{to:"/notifications",className:"relative p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"",children:[r.jsx(Rd,{className:"w-5 h-5"}),a>0&&r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold animate-pulse",children:a>9?"9+":a})]}),t?r.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:""}):r.jsx($e,{to:"/login",label:""})]}),r.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white/20 hover:bg-white/30 transition backdrop-blur-sm",onClick:()=>i(!s),children:s?r.jsx(qr,{className:"w-6 h-6 text-white"}):r.jsx(k6,{className:"w-6 h-6 text-white"})})]}),s&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>i(!1)}),r.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] bg-gradient-to-b from-sky-500 to-sky-700 
        z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${s?"translate-x-0":"translate-x-full"}
      `,children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[r.jsx("span",{className:"text-white font-bold text-lg",children:""}),r.jsx("button",{onClick:()=>i(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:r.jsx(qr,{className:"w-5 h-5 text-white"})})]}),r.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[r.jsx($e,{to:"/restaurants",label:"",icon:r.jsx(Ut,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e==="customer"&&r.jsxs(r.Fragment,{children:[r.jsx($e,{to:"/cart",label:"",icon:r.jsx(Od,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx($e,{to:"/orders",label:"",icon:r.jsx(_n,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx($e,{to:"/profile",label:"",icon:r.jsx(Rn,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),e==="owner"&&r.jsxs(r.Fragment,{children:[r.jsx($e,{to:"/owner",label:" ",icon:r.jsx(Dd,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx($e,{to:"/owner/orders",label:" ",icon:r.jsx(_n,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx($e,{to:"/owner/courier-requests",label:"",icon:r.jsx(ss,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),e==="courier"&&r.jsxs(r.Fragment,{children:[r.jsx($e,{to:"/courier",label:" ",icon:r.jsx(ss,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx($e,{to:"/courier/hiring",label:"",icon:r.jsx(_n,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),e==="admin"&&r.jsx($e,{to:"/admin",label:" ",icon:r.jsx(jc,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e==="developer"&&r.jsx($e,{to:"/developer",label:" ",icon:r.jsx(px,{className:"w-5 h-5"}),onClick:()=>i(!1)}),t&&r.jsx($e,{to:"/notifications",label:` ${a>0?`(${a})`:""}`,icon:r.jsx(Rd,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx("div",{className:"h-px bg-white/20 my-2"}),t?r.jsx("button",{onClick:()=>{n(),i(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"  "}):r.jsx($e,{to:"/login",label:" ",icon:r.jsx(Dd,{className:"w-5 h-5"}),onClick:()=>i(!1)})]})]})]})},g1=I.createContext(null),Bn=()=>{const t=I.useContext(g1);if(!t)throw new Error("useDialog must be used within DialogProvider");return t},I3=({children:t})=>{const[e,n]=I.useState({isOpen:!1,message:"",type:"confirm"}),s=I.useCallback(u=>new Promise(d=>{n({...u,isOpen:!0,resolve:d})}),[]),i=I.useCallback(u=>{e.resolve&&e.resolve(u),n(d=>({...d,isOpen:!1}))},[e.resolve]),a=I.useCallback(async()=>{e.onConfirm&&await e.onConfirm(),i(!0)},[e.onConfirm,i]),o=I.useCallback(()=>{e.onCancel&&e.onCancel(),i(!1)},[e.onCancel,i]),c=I.useMemo(()=>({confirm:(u,d={})=>s({message:u,type:"confirm",title:d.title||"",confirmText:d.confirmText||"",cancelText:d.cancelText||"",...d}),alert:(u,d={})=>s({message:u,type:"alert",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),success:(u,d={})=>s({message:u,type:"success",title:d.title||" ",confirmText:d.confirmText||"",...d}).then(()=>{}),error:(u,d={})=>s({message:u,type:"error",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),warning:(u,d={})=>s({message:u,type:"warning",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),info:(u,d={})=>s({message:u,type:"info",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{})}),[s]);return r.jsxs(g1.Provider,{value:c,children:[t,r.jsx(S3,{...e,onConfirm:a,onCancel:o})]})},S3=({isOpen:t,title:e,message:n,type:s="confirm",confirmText:i="",cancelText:a="",dangerous:o,onConfirm:c,onCancel:u})=>{if(!t)return null;const h={confirm:{icon:r.jsx(Ov,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:o?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:r.jsx(up,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:r.jsx(Se,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:r.jsx(Ws,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:r.jsx(up,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:r.jsx(Ov,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[s],m=s==="confirm";return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:u}),r.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:p=>p.stopPropagation(),children:[r.jsxs("div",{className:"relative p-6 pb-0",children:[r.jsx("button",{onClick:u,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:r.jsx(qr,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:`w-16 h-16 rounded-full ${h.iconBg} ${h.iconColor} flex items-center justify-center`,children:h.icon})}),r.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:e})]}),r.jsx("div",{className:"p-6 pt-3",children:r.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),r.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${m?"flex-row-reverse":"justify-center"}`,children:[r.jsx("button",{onClick:c,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${h.buttonColor}`,children:i}),m&&r.jsx("button",{onClick:u,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:a})]})]})}),r.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},C3=()=>{const{user:t}=We(),e=Xt(),n=Bn(),s=async()=>{if(!(!t||!await n.confirm("     .     .",{title:"  ",dangerous:!0,confirmText:"  ",cancelText:""})))try{await Jn(J(z,"users",t.uid)),await FS(On.currentUser),n.success("   "),e("/account-deleted")}catch(a){console.error("Error deleting account:",a),n.error("    .   .")}};return r.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:r.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),r.jsx("span",{className:"text-xl sm:text-2xl font-black",children:" "})]}),r.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["  ",r.jsx(c1,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"}),"    ",new Date().getFullYear()]}),r.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[r.jsxs(je,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[r.jsx(jc,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),r.jsxs(je,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[r.jsx(px,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),t&&r.jsxs("button",{onClick:s,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[r.jsx(rn,{className:"w-3 h-3 sm:w-4 sm:h-4"})," "]})]}),r.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),r.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"     "})]})})},A3=()=>r.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[r.jsx(Un,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),r.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"            ! "}),r.jsx(Un,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),R3=({onLocationSaved:t})=>{const{user:e,role:n}=We(),[s,i]=I.useState(null),[a,o]=I.useState(!1),[c,u]=I.useState(!1),[d,h]=I.useState(null),[m,p]=I.useState(!1),[v,_]=I.useState(!1),R={lat:24.7136,lng:46.6753},k=I.useCallback(()=>{if(!navigator.geolocation){h("    ");return}u(!0),h(null),navigator.geolocation.getCurrentPosition(y=>{const j={lat:y.coords.latitude,lng:y.coords.longitude};i(j),u(!1),window.locationRequiredMap&&(window.locationRequiredMap.setView([j.lat,j.lng],17),window.locationRequiredMarker&&window.locationRequiredMarker.setLatLng([j.lat,j.lng]))},y=>{u(!1),y.code===1?h("   .     "):y.code===2?h("  .    GPS"):h("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);I.useEffect(()=>{if(!document.getElementById("leaflet-css")){const y=document.createElement("link");y.id="leaflet-css",y.rel="stylesheet",y.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(y)}if(window.L)p(!0);else{const y=document.createElement("script");y.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",y.onload=()=>p(!0),document.body.appendChild(y)}},[]),I.useEffect(()=>{if(!m||!window.L)return;const y=window.L;if(!document.getElementById("location-required-map"))return;window.locationRequiredMap&&window.locationRequiredMap.remove();const C=s||R,O=y.map("location-required-map",{zoomControl:!0,attributionControl:!1}).setView([C.lat,C.lng],12);y.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(O);const N=y.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),x=y.marker([C.lat,C.lng],{icon:N,draggable:!0}).addTo(O);return x.on("dragend",()=>{const E=x.getLatLng();i({lat:E.lat,lng:E.lng})}),O.on("click",E=>{const{lat:T,lng:P}=E.latlng;i({lat:T,lng:P}),x.setLatLng([T,P])}),window.locationRequiredMap=O,window.locationRequiredMarker=x,()=>{window.locationRequiredMap&&(window.locationRequiredMap.remove(),window.locationRequiredMap=null,window.locationRequiredMarker=null)}},[m]);const b=async()=>{if(!(!s||!e)){_(!0);try{if(await _e(J(z,"users",e.uid),{location:s,locationUpdatedAt:new Date}),n==="owner")try{await _e(J(z,"restaurants",e.uid),{geoLocation:s,locationUpdatedAt:new Date})}catch(y){console.warn("   :",y)}t()}catch{h("   .   ")}finally{_(!1)}}},w=()=>{switch(n){case"owner":return"";case"courier":return" ";default:return""}};return r.jsx("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-sky-50 via-white to-sky-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 p-6 text-white text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Nn,{className:"w-10 h-10"})}),r.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["  ",w()]}),r.jsx("p",{className:"text-sky-100 text-sm",children:n==="owner"?"    ":"     (15 )"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[d&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 flex items-center gap-3 text-red-700",children:[r.jsx(up,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("p",{className:"text-sm",children:d})]}),r.jsx("button",{onClick:k,disabled:c,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:c?r.jsxs(r.Fragment,{children:[r.jsx(bi,{className:"w-5 h-5 animate-spin"}),"  ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ya,{className:"w-5 h-5"}),"   "]})}),r.jsxs("div",{className:"relative",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"      "}),r.jsx("div",{id:"location-required-map",className:"h-64 rounded-xl overflow-hidden border-2 border-gray-200",style:{background:"#f0f9ff"}}),!m&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:r.jsx(bi,{className:"w-8 h-8 animate-spin text-sky-500"})})]}),s&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 flex items-center gap-3 text-green-700",children:[r.jsx(Se,{className:"w-5 h-5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-semibold",children:"   "}),r.jsxs("p",{className:"text-xs text-green-600",children:[s.lat.toFixed(6),", ",s.lng.toFixed(6)]})]})]}),r.jsx("button",{onClick:b,disabled:!s||v,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:v?r.jsxs(r.Fragment,{children:[r.jsx(bi,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Se,{className:"w-5 h-5"}),"  "]})}),r.jsx("p",{className:"text-xs text-gray-400 text-center",children:"       "})]})]})})},Me=({to:t,icon:e,label:n,color:s,emoji:i})=>r.jsxs(je,{to:t,className:`flex flex-col items-center justify-center gap-2 p-4 sm:p-5 rounded-2xl bg-gradient-to-br ${s} text-white shadow-lg active:scale-95 transition-all duration-200`,children:[r.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-white/20 rounded-xl flex items-center justify-center",children:i?r.jsx("span",{className:"text-2xl sm:text-3xl",children:i}):e}),r.jsx("span",{className:"font-bold text-sm sm:text-base text-center leading-tight",children:n})]}),P3=()=>{var i;const{user:t,role:e,loading:n,logout:s}=We();return n?r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100",children:[r.jsx("div",{className:"w-20 h-20 mb-6 bg-gradient-to-br from-sky-500 to-sky-600 rounded-3xl flex items-center justify-center shadow-2xl animate-pulse",children:r.jsx("span",{className:"text-5xl",children:""})}),r.jsx(bi,{className:"w-8 h-8 text-sky-500 animate-spin mb-3"}),r.jsx("p",{className:"text-sky-600 font-semibold",children:" ..."})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 px-3 py-4 sm:px-4 sm:py-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-3 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl sm:rounded-3xl flex items-center justify-center shadow-xl",children:r.jsx("span",{className:"text-4xl sm:text-5xl",children:""})}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-sky-600 to-sky-500 mb-1",children:" "}),t&&r.jsxs("p",{className:"text-sky-600/80 text-sm",children:[" ",t.displayName||((i=t.email)==null?void 0:i.split("@")[0])," "]})]}),!t&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Me,{to:"/restaurants",emoji:"",icon:r.jsx(Ut,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Me,{to:"/customer-login",emoji:"",icon:r.jsx(wx,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),r.jsx(Me,{to:"/login",emoji:"",icon:r.jsx(yx,{className:"w-6 h-6"}),label:" ",color:"from-amber-500 to-orange-500"}),r.jsx(Me,{to:"/register",emoji:"",icon:r.jsx(Jl,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"})]}),r.jsx("p",{className:"text-center text-sky-600/70 text-xs",children:"      "})]}),e==="customer"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Me,{to:"/restaurants",emoji:"",icon:r.jsx(Ut,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Me,{to:"/cart",emoji:"",icon:r.jsx(Od,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Me,{to:"/orders",emoji:"",icon:r.jsx(_n,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Me,{to:"/profile",emoji:"",icon:r.jsx(Rn,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="owner"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Me,{to:"/owner",emoji:"",icon:r.jsx(mx,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Me,{to:"/owner/orders",emoji:"",icon:r.jsx(Pd,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Me,{to:"/owner/menu",emoji:"",icon:r.jsx(Ut,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Me,{to:"/owner/edit",emoji:"",icon:r.jsx(f1,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),r.jsx(Me,{to:"/owner/courier-requests",emoji:"",icon:r.jsx(ss,{className:"w-6 h-6"}),label:"",color:"from-cyan-500 to-cyan-600"}),r.jsx(Me,{to:"/profile",emoji:"",icon:r.jsx(Rn,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="courier"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Me,{to:"/courier",emoji:"",icon:r.jsx(ss,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Me,{to:"/courier/hiring",emoji:"",icon:r.jsx(Ut,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),r.jsx(Me,{to:"/profile",emoji:"",icon:r.jsx(Rn,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="admin"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Me,{to:"/admin",emoji:"",icon:r.jsx(jc,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Me,{to:"/admin/restaurants",emoji:"",icon:r.jsx(Ut,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Me,{to:"/admin/orders",emoji:"",icon:r.jsx(_n,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Me,{to:"/restaurants",emoji:"",icon:r.jsx(Od,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),r.jsx(Me,{to:"/profile",emoji:"",icon:r.jsx(Rn,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="developer"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Me,{to:"/developer",emoji:"",icon:r.jsx(px,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Me,{to:"/restaurants",emoji:"",icon:r.jsx(Ut,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Me,{to:"/admin/orders",emoji:"",icon:r.jsx(_n,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Me,{to:"/profile",emoji:"",icon:r.jsx(Rn,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]})]})},_x=["",""," "," ","","","","","","","","","",""," ","","","","",""," ","","","","","","","","","","","","","",""," ","","","",""];function D3(t,e){const s=_u(e.lat-t.lat),i=_u(e.lng-t.lng),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(_u(t.lat))*Math.cos(_u(e.lat))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function _u(t){return t*(Math.PI/180)}const Rf=15,L3=()=>{var _,R,k,b,w;const{userLocation:t,role:e}=We(),[n,s]=I.useState([]),[i,a]=I.useState([]),[o,c]=I.useState(0),[u,d]=I.useState(!0),[h,m]=I.useState("");I.useEffect(()=>{(async()=>{const j=(await Ve(he(z,"restaurants"))).docs.map(O=>({id:O.id,...O.data()}));try{const O=at(he(z,"promotions"),ht("isActive","==",!0)),N=await Ve(O),x=new Date,E=N.docs.map(T=>{var P,L;return{id:T.id,...T.data(),expiresAt:(L=(P=T.data().expiresAt)==null?void 0:P.toDate)==null?void 0:L.call(P)}}).filter(T=>!T.expiresAt||new Date(T.expiresAt)>x).map(T=>{const P=j.find(L=>L.id===T.ownerId);return{...T,restaurantName:P==null?void 0:P.name}});a(E)}catch(O){console.warn("Error loading promotions:",O)}let C=[];t?(C=j.map(O=>{if(O.geoLocation){const N=D3(t,O.geoLocation);return{...O,distance:N}}return{...O,distance:void 0}}),(e==="customer"||e==="courier")&&(C=C.filter(O=>!O.geoLocation||O.distance===void 0?!1:O.distance<=Rf)),C.sort((O,N)=>{const x=O.packageType==="premium"?1:0,E=N.packageType==="premium"?1:0;if(E!==x)return E-x;const T={gold:3,silver:2,bronze:1},P=T[O.sellerTier||"bronze"]||0,L=T[N.sellerTier||"bronze"]||0;if(L!==P)return L-P;const D=O.isVerified?1:0,ae=N.isVerified?1:0;return ae!==D?ae-D:(O.distance||999)-(N.distance||999)})):C=j.sort((O,N)=>{const x={gold:3,silver:2,bronze:1},E=x[O.sellerTier||"bronze"]||0,T=x[N.sellerTier||"bronze"]||0;if(T!==E)return T-E;const P=O.isVerified?1:0;return(N.isVerified?1:0)-P}),s(C),d(!1)})()},[t,e]);const p=I.useMemo(()=>{const y=new Set(n.map(j=>j.city).filter(Boolean));return _x.filter(j=>y.has(j))},[n]),v=I.useMemo(()=>h?n.filter(y=>y.city===h):n,[n,h]);return u?r.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."}):r.jsxs("div",{className:"py-10",children:[r.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-sky-600",children:"  "}),i.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[r.jsx(Ni,{className:"w-5 h-5 text-purple-500"}),r.jsx("span",{className:"font-bold text-purple-600",children:" "})]}),r.jsxs("div",{className:"relative",children:[r.jsxs(je,{to:`/menu?restaurant=${(_=i[o])==null?void 0:_.ownerId}`,onClick:async()=>{try{await _e(J(z,"promotions",i[o].id),{viewsCount:Ls(1)})}catch{}},className:"block bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden",children:[r.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(Ni,{className:"w-3 h-3"}),""]}),((R=i[o])==null?void 0:R.mediaUrl)&&r.jsx("div",{className:"relative h-48",children:i[o].type==="video"?r.jsxs(r.Fragment,{children:[r.jsx("video",{src:i[o].mediaUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,autoPlay:!0,playsInline:!0}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:r.jsx(d1,{className:"w-6 h-6 text-white fill-white"})})})]}):r.jsx("img",{src:i[o].mediaUrl,alt:i[o].title,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:((k=i[o])==null?void 0:k.restaurantName)&&r.jsx("span",{className:"text-xs bg-white/20 text-white px-2 py-1 rounded-full",children:i[o].restaurantName})}),((b=i[o])==null?void 0:b.title)&&r.jsx("h3",{className:"text-lg font-bold text-white",children:i[o].title}),((w=i[o])==null?void 0:w.description)&&r.jsx("p",{className:"text-purple-100 text-sm mt-1 line-clamp-2",children:i[o].description})]})]}),i.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:y=>{y.preventDefault(),c(j=>j===0?i.length-1:j-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:r.jsx(lp,{className:"w-5 h-5 text-gray-800"})}),r.jsx("button",{onClick:y=>{y.preventDefault(),c(j=>j===i.length-1?0:j+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:r.jsx(UP,{className:"w-5 h-5 text-gray-800"})})]}),i.length>1&&r.jsx("div",{className:"flex justify-center gap-2 mt-3",children:i.map((y,j)=>r.jsx("button",{onClick:()=>c(j),className:`w-2 h-2 rounded-full transition ${j===o?"bg-purple-500 w-4":"bg-gray-300"}`},j))})]})]}),p.length>0&&r.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[r.jsx(a6,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:":"})]}),r.jsx("button",{onClick:()=>m(""),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${h?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-sky-500 text-white shadow-lg"}`,children:""}),p.map(y=>r.jsxs("button",{onClick:()=>m(y),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1 ${h===y?"bg-sky-500 text-white shadow-lg":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:[r.jsx(Nn,{className:"w-4 h-4"}),y]},y)),h&&r.jsx("button",{onClick:()=>m(""),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:" ",children:r.jsx(qr,{className:"w-5 h-5"})})]}),v.length===0&&r.jsxs("div",{className:"text-center py-10",children:[r.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(xi,{className:"w-10 h-10 text-sky-500"})}),t?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:"     "}),r.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["   ",Rf,"  "]})]}):r.jsx(r.Fragment,{children:r.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:h?`     ${h}`:"    "})})]}),t&&v.length>0&&(e==="customer"||e==="courier")&&r.jsxs("div",{className:"mb-6 bg-sky-50 border border-sky-200 rounded-xl p-4 flex items-center gap-3",children:[r.jsx(Ya,{className:"w-6 h-6 text-sky-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sky-700 font-semibold",children:"    "}),r.jsxs("p",{className:"text-sky-600 text-sm",children:["  : ",Rf," "]})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(y=>r.jsxs(je,{to:`/menu?restaurant=${y.id}`,className:`bg-white border text-gray-800 rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center relative overflow-hidden ${y.sellerTier==="gold"?"border-amber-300 ring-2 ring-amber-200":"border-gray-200"}`,children:[r.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-1.5",children:[y.isVerified?r.jsxs("div",{className:"bg-green-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[r.jsx(Se,{className:"w-3 h-3"})," "]}):r.jsx("div",{className:"bg-gray-400 text-white text-xs font-medium px-2.5 py-1 rounded-full flex items-center gap-1 shadow-sm",children:" "}),y.sellerTier==="gold"&&r.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[r.jsx(Sn,{className:"w-3 h-3"}),"Gold"]}),y.sellerTier==="silver"&&r.jsxs("div",{className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[r.jsx(cp,{className:"w-3 h-3"}),"Silver"]}),y.packageType==="premium"&&r.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:" "})]}),y.distance!==void 0&&r.jsxs("div",{className:"absolute top-3 left-3 bg-sky-500 text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[r.jsx(Ya,{className:"w-3 h-3"}),y.distance<1?`${Math.round(y.distance*1e3)} `:`${y.distance.toFixed(1)} `]}),y.logoUrl?r.jsx("img",{src:y.logoUrl,alt:y.name,className:`w-28 h-28 object-cover rounded-full mb-4 ${y.sellerTier==="gold"?"border-4 border-amber-400 ring-4 ring-amber-100":y.sellerTier==="silver"?"border-4 border-gray-300":"border-4 border-sky-100"}`}):r.jsx("div",{className:`w-28 h-28 flex items-center justify-center rounded-full text-3xl mb-4 ${y.sellerTier==="gold"?"bg-amber-100 border-4 border-amber-400":y.sellerTier==="silver"?"bg-gray-100 border-4 border-gray-300":"bg-sky-100 border-4 border-sky-200"}`,children:""}),r.jsx("h3",{className:"font-bold text-xl text-gray-800",children:y.name}),y.city&&r.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center justify-center gap-1",children:[r.jsx(Nn,{className:"w-4 h-4"}),y.city]})]},y.id))})]})},Uv="broast_cart";function bx(){const[t,e]=I.useState(()=>{try{const c=localStorage.getItem(Uv);return c?JSON.parse(c):[]}catch{return[]}});I.useEffect(()=>{localStorage.setItem(Uv,JSON.stringify(t))},[t]);const n=(c,u=1)=>{e(d=>{const h=d.findIndex(m=>m.id===c.id);if(h>=0){const m=[...d];return m[h]={...m[h],qty:m[h].qty+u,ownerId:c.ownerId??m[h].ownerId},m}return[...d,{...c,qty:u}]})},s=c=>e(u=>u.filter(d=>d.id!==c)),i=(c,u)=>e(d=>d.map(h=>h.id===c?{...h,qty:u}:h)),a=()=>e([]),o=t.reduce((c,u)=>c+u.price*u.qty,0);return{items:t,add:n,remove:s,changeQty:i,clear:a,subtotal:o}}const x1=I.createContext(null),kn=()=>{const t=I.useContext(x1);if(!t)throw new Error("useToast must be used within ToastProvider");return t},O3=({children:t})=>{const[e,n]=I.useState([]),s=I.useCallback(o=>{n(c=>c.filter(u=>u.id!==o))},[]),i=I.useCallback((o,c,u)=>{const d=Math.random().toString(36).slice(2),h={id:d,message:o,type:c,title:u==null?void 0:u.title,duration:(u==null?void 0:u.duration)??3e3};n(m=>[...m,h]),h.duration&&h.duration>0&&setTimeout(()=>s(d),h.duration)},[s]),a=I.useMemo(()=>({show:(o,c)=>i(o,(c==null?void 0:c.type)??"info",c),success:(o,c)=>i(o,"success",c),error:(o,c)=>i(o,"error",c),info:(o,c)=>i(o,"info",c),warning:(o,c)=>i(o,"warning",c)}),[i]);return r.jsxs(x1.Provider,{value:a,children:[t,r.jsx(F3,{items:e,onClose:s})]})},M3={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},V3={success:"",error:"",info:"",warning:""},F3=({items:t,onClose:e})=>(I.useEffect(()=>{},[]),r.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[r.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:t.map(n=>r.jsx("div",{className:`pointer-events-auto ${M3[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-xl leading-none",children:V3[n.type]}),r.jsxs("div",{className:"flex-1",children:[n.title&&r.jsx("div",{className:"font-bold",children:n.title}),r.jsx("div",{className:"text-sm",children:n.message})]}),r.jsx("button",{onClick:()=>e(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:""})]})},n.id))}),r.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),U3=()=>{const[t,e]=I.useState([]),[n,s]=I.useState(!0),[i,a]=I.useState(null),[o,c]=I.useState(null),[u,d]=I.useState(!0),{add:h,subtotal:m,items:p}=bx(),{user:v,role:_}=We(),R=kn(),[k]=mb(),b=k.get("restaurant");I.useEffect(()=>{(async()=>{let C;if(b){C=at(he(z,"menuItems"),ht("available","==",!0),ht("ownerId","==",b));const E=await tt(J(z,"restaurants",b));E.exists()&&a(E.data().name);try{const T=at(he(z,"promotions"),ht("ownerId","==",b),ht("isActive","==",!0)),P=await Ve(T);if(!P.empty){const L=P.docs.map(V=>{var $,B;return{id:V.id,...V.data(),expiresAt:(B=($=V.data().expiresAt)==null?void 0:$.toDate)==null?void 0:B.call($)}}),D=new Date,ae=L.filter(V=>!V.expiresAt||new Date(V.expiresAt)>D);if(ae.length>0){const V=ae[0];c(V),await _e(J(z,"promotions",V.id),{viewsCount:Ls(1)})}}}catch(T){console.warn("Error loading promotion:",T)}}else C=at(he(z,"menuItems"),ht("available","==",!0));const N=(await Ve(C)).docs.map(E=>({id:E.id,...E.data()})),x=await Promise.all(N.map(async E=>{if(!E.ownerId)return E;const T=await tt(J(z,"restaurants",E.ownerId));return T.exists()?{...E,restaurant:T.data()}:E}));e(x),s(!1)})()},[b]);const w=1.75,y=C=>{var N;if(!C.ownerId){R.warning("    ",{title:""});return}const O=(N=p[0])==null?void 0:N.ownerId;if(O&&O!==C.ownerId){R.warning("           ",{title:""});return}h({id:C.id,name:C.name,price:C.price+w,ownerId:C.ownerId}),R.success("    ")};if(n)return r.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."});const j=v&&(_==="customer"||_==="admin"||_==="developer"||!_);return r.jsxs("div",{className:"py-10",children:[r.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:i?`  ${i}`:"  "}),b&&r.jsx("div",{className:"text-center mb-6",children:r.jsx(je,{to:"/restaurants",className:"text-sky-400 hover:text-sky-300 underline",children:"   "})}),o&&u&&r.jsxs("div",{className:"mb-8 bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden relative",children:[r.jsx("button",{onClick:()=>d(!1),className:"absolute top-3 left-3 z-10 p-2 bg-black/40 hover:bg-black/60 rounded-full text-white transition",children:r.jsx(qr,{className:"w-4 h-4"})}),r.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(Ni,{className:"w-3 h-3"}),""]}),r.jsxs("div",{className:"relative",children:[o.mediaUrl&&r.jsx("div",{className:"relative",children:o.type==="video"?r.jsxs("div",{className:"relative",children:[r.jsx("video",{src:o.mediaUrl,controls:!0,className:"w-full h-56 object-cover",poster:""}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:r.jsx(d1,{className:"w-8 h-8 text-white fill-white"})})})]}):r.jsx("img",{src:o.mediaUrl,alt:o.title,className:"w-full h-56 object-cover"})}),r.jsxs("div",{className:"p-5",children:[o.title&&r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:o.title}),o.description&&r.jsx("p",{className:"text-purple-100 text-sm leading-relaxed",children:o.description})]})]})]}),t.length===0&&r.jsx("div",{className:"text-center text-gray-400",children:"    "}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(C=>r.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[C.restaurant&&r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[C.restaurant.logoUrl?r.jsx("img",{src:C.restaurant.logoUrl,alt:C.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):r.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:""}),r.jsx("span",{className:"font-semibold",children:C.restaurant.name})]}),r.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:C.imageUrl?r.jsx("img",{src:C.imageUrl,alt:C.name,className:"w-full h-full object-cover rounded-xl"}):r.jsx("span",{className:"text-gray-400",children:" "})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg",children:C.name}),C.desc&&r.jsx("p",{className:"text-sm text-gray-300 mt-1",children:C.desc})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[r.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[(C.price+w).toFixed(2)," ."]}),j&&r.jsx("button",{onClick:()=>y(C),disabled:!C.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${C.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"  "})]})]},C.id))}),m>0&&j&&r.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-40",children:r.jsxs(je,{to:"/checkout",className:"block w-full sm:w-auto text-center px-6 py-4 rounded-2xl bg-sky-600 text-white shadow-xl font-bold hover:bg-sky-700 transition text-base sm:text-lg",children:["    ",m.toFixed(2)," ."]})})]})},$3=()=>{const{items:t,subtotal:e,remove:n,clear:s,changeQty:i}=bx();return t.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:r.jsx(Yl,{className:"w-12 h-12 text-gray-400"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-2",children:" "}),r.jsx("p",{className:"text-gray-500 mb-6",children:"   !"}),r.jsxs(je,{to:"/restaurants",className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-sky-600 transition",children:[r.jsx(jP,{className:"w-5 h-5"})," "]})]}):r.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[r.jsx(Yl,{className:"w-6 h-6 text-primary"})," ",r.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:t.length})]})}),r.jsx("div",{className:"space-y-3",children:t.map(a=>r.jsxs("div",{className:"flex items-center gap-3 bg-white text-gray-900 p-3 sm:p-4 rounded-xl shadow-sm border border-gray-100",children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-3xl",children:""})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:a.name}),r.jsxs("p",{className:"text-primary font-bold text-sm",children:[a.price.toFixed(2)," ."]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("button",{onClick:()=>a.qty>1?i(a.id,a.qty-1):n(a.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:r.jsx(S6,{className:"w-4 h-4"})}),r.jsx("span",{className:"font-bold text-lg w-8 text-center",children:a.qty}),r.jsx("button",{onClick:()=>i(a.id,a.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:r.jsx(Nc,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(a.price*a.qty).toFixed(2)," ."]}),r.jsx("button",{onClick:()=>n(a.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:r.jsx(rn,{className:"w-4 h-4"})})]})]},a.id))}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:" "}),r.jsxs("span",{className:"font-bold",children:[e.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:" "}),r.jsx("span",{className:"font-bold",children:"7.00 ."})]}),r.jsx("div",{className:"h-px bg-gray-200"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-bold text-lg",children:""}),r.jsxs("span",{className:"font-bold text-xl text-primary",children:[(e+7).toFixed(2)," ."]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[r.jsxs("button",{onClick:s,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:[r.jsx(rn,{className:"w-5 h-5"})," "]}),r.jsx(je,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition",children:"  "})]})]})},B3=()=>{const[t,e]=I.useState(""),[n,s]=I.useState(""),[i,a]=I.useState(!1),o=Xt(),c=Bn(),u=async d=>{d.preventDefault(),a(!0);try{const m=(await DS(On,t,n)).user.uid,p=await tt(J(z,"users",m));if(p.exists()){const v=p.data();console.log("  :",v),v.role==="owner"?o("/owner"):v.role==="admin"?o("/admin"):v.role==="developer"?o("/developer"):v.role==="courier"?o("/courier"):o("/")}else c.warning("   Auth       Firestore")}catch(h){c.error(h.message,{title:"   "})}finally{a(!1)}};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[r.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[r.jsxs("div",{className:"flex flex-col items-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:r.jsx("span",{className:"text-4xl",children:"  "})}),r.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),r.jsx("p",{className:"text-sky-500 mt-1",children:" "})]}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(vx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"email",placeholder:"",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:t,onChange:d=>e(d.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(xx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"password",placeholder:" ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:d=>s(d.target.value)})]}),r.jsx("button",{disabled:i,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50`,children:i?r.jsx(r.Fragment,{children:" ..."}):r.jsxs(r.Fragment,{children:[r.jsx(yx,{className:"w-5 h-5"}),""]})})]}),r.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["  "," ",r.jsx(je,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"  "})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[r.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"    "}),r.jsx(je,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"   "})]})]})]})},z3=()=>{const[t,e]=I.useState(""),[n,s]=I.useState(""),[i,a]=I.useState(""),[o,c]=I.useState(""),[u,d]=I.useState(""),[h,m]=I.useState(""),[p,v]=I.useState(!1),[_,R]=I.useState(!1),k=Xt(),b=h==="owner"||h==="courier",w=C=>{m(C),v(!1)},y=async C=>{if(C.preventDefault(),!h)return alert("  ");if(h==="owner"&&!o)return alert("  ");if(b&&!p)return alert("    ");R(!0);try{const O=await fl(On,t,n);await fn(J(z,"users",O.user.uid),{name:i,email:t,role:h,restaurantName:h==="owner"?o:null}),h==="owner"&&await fn(J(z,"restaurants",O.user.uid),{name:o||i||" ",ownerId:O.user.uid,email:t,phone:"",city:u||"",location:"",logoUrl:""},{merge:!0}),k("/")}catch(O){alert(O.message)}finally{R(!1)}},j=[{value:"customer",label:"",icon:w3,color:"sky"},{value:"courier",label:"",icon:ss,color:"emerald"},{value:"owner",label:" ",icon:mx,color:"orange"}];return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[r.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[r.jsxs("div",{className:"flex flex-col items-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:r.jsx(Jl,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"  "})]}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Rn,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",value:i,onChange:C=>a(C.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(vx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",type:"email",value:t,onChange:C=>e(C.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(xx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:" ",type:"password",value:n,onChange:C=>s(C.target.value)})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:j.map(C=>{const O=C.icon,N=h===C.value;return r.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${N?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[r.jsx("input",{type:"radio",name:"role",value:C.value,className:"hidden",onChange:()=>w(C.value)}),r.jsx(O,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm font-bold",children:C.label})]},C.value)})}),h==="owner"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ut,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:" ",value:o,onChange:C=>c(C.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Nn,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400 pointer-events-none"}),r.jsxs("select",{value:u,onChange:C=>d(C.target.value),className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all appearance-none cursor-pointer",children:[r.jsx("option",{value:"",children:" "}),_x.map(C=>r.jsx("option",{value:C,children:C},C))]})]}),r.jsxs("div",{onClick:()=>v(!p),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${p?"bg-green-50 border-green-400":"bg-orange-50 border-orange-200 hover:border-orange-300"}`,children:[p?r.jsx(Mv,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):r.jsx(Vv,{className:"w-6 h-6 text-orange-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm leading-relaxed",children:[r.jsxs("span",{className:p?"text-green-700":"text-orange-700",children:[" "," "]}),r.jsx(je,{to:"/terms",target:"_blank",onClick:C=>C.stopPropagation(),className:"text-sky-600 hover:text-sky-800 font-bold underline",children:" "}),r.jsxs("span",{className:p?"text-green-700":"text-orange-700",children:[" ",""," "]}),r.jsx(je,{to:"/privacy-policy",target:"_blank",onClick:C=>C.stopPropagation(),className:"text-sky-600 hover:text-sky-800 font-bold underline",children:" "}),r.jsxs("span",{className:p?"text-green-700":"text-orange-700",children:[" ","   "]})]})]})]}),h==="courier"&&r.jsxs("div",{onClick:()=>v(!p),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${p?"bg-green-50 border-green-400":"bg-emerald-50 border-emerald-200 hover:border-emerald-300"}`,children:[p?r.jsx(Mv,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):r.jsx(Vv,{className:"w-6 h-6 text-emerald-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm leading-relaxed",children:[r.jsxs("span",{className:p?"text-green-700":"text-emerald-700",children:[" "," "]}),r.jsx(je,{to:"/courier-terms",target:"_blank",onClick:C=>C.stopPropagation(),className:"text-emerald-600 hover:text-emerald-800 font-bold underline",children:"  "}),r.jsxs("span",{className:p?"text-green-700":"text-emerald-700",children:[" ","    "]})]})]}),r.jsx("button",{disabled:_||b&&!p,className:`w-full flex items-center justify-center gap-3 text-white font-bold p-4 rounded-2xl shadow-xl transition-all ${b&&!p?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 shadow-sky-300/50 hover:scale-[1.02]"}`,children:_?" ...":r.jsxs(r.Fragment,{children:[r.jsx(Jl,{className:"w-5 h-5"}),""]})}),b&&!p&&r.jsx("p",{className:`text-center text-sm p-3 rounded-xl ${h==="courier"?"text-emerald-600 bg-emerald-50":"text-orange-600 bg-orange-50"}`,children:"       "})]}),r.jsxs("p",{className:"mt-6 text-center text-sky-600",children:[" "," ",r.jsx(je,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"  "})]})]})]})},$v=t=>{let e=t.replace(/\D/g,"");return e.startsWith("0")&&(e=e.substring(1)),e.startsWith("966")||(e="966"+e),"+"+e},q3=()=>{const[t,e]=I.useState(""),[n,s]=I.useState(""),[i,a]=I.useState("phone"),[o,c]=I.useState(!1),[u,d]=I.useState(null),[h,m]=I.useState(0),p=I.useRef(null),v=I.useRef(null),_=Xt(),R=Bn();I.useEffect(()=>(p.current&&!v.current&&(v.current=new Ay(On,p.current,{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired"),v.current=null}})),()=>{v.current&&(v.current.clear(),v.current=null)}),[]),I.useEffect(()=>{if(h>0){const y=setTimeout(()=>m(h-1),1e3);return()=>clearTimeout(y)}},[h]);const k=async()=>{if(!t||t.length<9){R.warning("   ");return}const y=$v(t);console.log("Sending OTP to:",y),c(!0);try{!v.current&&p.current&&(v.current=new Ay(On,p.current,{size:"invisible"}));const j=await fC(On,y,v.current);d(j),a("otp"),m(60),R.success("     ")}catch(j){console.error("OTP Error:",j),v.current&&(v.current.clear(),v.current=null),j.code==="auth/invalid-phone-number"?R.error("   "):j.code==="auth/too-many-requests"?R.error("   "):j.code==="auth/quota-exceeded"?R.error("     "):R.error(j.message||"  ")}finally{c(!1)}},b=async()=>{if(!n||n.length!==6){R.warning("     6 ");return}if(!u){R.error("    "),a("phone");return}c(!0);try{const y=await u.confirm(n),j=y.user.uid,C=y.user.phoneNumber,O=await tt(J(z,"users",j));O.exists()?R.success(" ! "):(await fn(J(z,"users",j),{phone:C,role:"customer",name:"",createdAt:le()}),R.success("   ! "));const N=O.exists()?O.data():{role:"customer"};N.role==="owner"?_("/owner"):N.role==="admin"?_("/admin"):N.role==="developer"?_("/developer"):N.role==="courier"?_("/courier"):_("/")}catch(y){console.error("Verify Error:",y),y.code==="auth/invalid-verification-code"?R.error("   "):y.code==="auth/code-expired"?(R.error("    "),a("phone")):R.error(y.message||" ")}finally{c(!1)}},w=()=>{h>0||(a("phone"),s(""),d(null))};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[r.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),r.jsx("div",{ref:p,id:"recaptcha-container"}),r.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[r.jsxs("div",{className:"flex flex-col items-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:r.jsx("span",{className:"text-4xl",children:""})}),r.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),r.jsx("p",{className:"text-sky-500 mt-1",children:i==="phone"?" ":"  "})]}),i==="phone"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(wx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:t,onChange:y=>e(y.target.value.replace(/\D/g,"")),maxLength:10})]}),r.jsx("p",{className:"text-sm text-gray-500 text-center",children:"     SMS"}),r.jsx("button",{onClick:k,disabled:o||t.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(bc,{className:"w-5 h-5"}),"  "]})})]}),i==="otp"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("p",{className:"text-gray-600",children:"   "}),r.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:$v(t)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(f6,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:y=>s(y.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),r.jsx("button",{onClick:b,disabled:o||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(yx,{className:"w-5 h-5"})," "]})}),r.jsx("div",{className:"text-center",children:h>0?r.jsxs("p",{className:"text-gray-500 text-sm",children:["   ",r.jsx("span",{className:"font-bold text-sky-600",children:h})," "]}):r.jsx("button",{onClick:w,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"    "})}),r.jsx("button",{onClick:()=>{a("phone"),s("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"   "})]}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[r.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"   "}),r.jsx(je,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"   "})]})]})]})};function H3(){return r.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"  -   "}),r.jsxs("p",{className:"mb-4",children:["   ",r.jsx("strong",{children:" "}),"          ."]}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1.  "}),r.jsx("p",{className:"mb-4",children:"                   .            ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2.  "}),r.jsx("p",{className:"mb-4",children:"               ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3.  "}),r.jsx("p",{className:"mb-4",children:"              .                 ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4.  "}),r.jsx("p",{className:"mb-4",children:"       (    )         ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5.  "}),r.jsxs("p",{className:"mb-4",children:["              .         :",r.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6.   "}),r.jsx("p",{className:"mb-4",children:"                  ."}),r.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["      ",new Date().toLocaleDateString("ar-SA"),"."]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx(je,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"   "})})]})})}function W3(){return r.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-4 py-10 leading-relaxed",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:"  -   "}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"1. "}),r.jsx("p",{children:"                ."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"2. "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"      ."}),r.jsx("li",{children:"        ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"3.     "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"     ."}),r.jsxs("li",{children:["        "," ",r.jsx("strong",{className:"text-sky-600",children:"1.75 "}),"   ."]}),r.jsxs("li",{children:["     1   2   "," ",r.jsx("strong",{className:"text-sky-600",children:"0.25 "})," ."]}),r.jsx("li",{children:"          ."}),r.jsx("li",{children:"              ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"4.  "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"           ."}),r.jsxs("li",{children:["     :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:"      "})]})]}),r.jsx("li",{children:"               ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"5.   "}),r.jsx("p",{className:"mb-3",children:"     :"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"  "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"    "})]}),r.jsx("p",{className:"mt-3",children:"         ."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"6.  "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"       ."}),r.jsxs("li",{children:["     :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"     "})]})]}),r.jsx("li",{children:"           ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"7.   ()"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"         ."}),r.jsx("li",{children:"              ."}),r.jsx("li",{children:"            ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"8.   "}),r.jsx("p",{className:"mb-3",children:"     :"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[r.jsx("li",{children:"   "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"     "})]}),r.jsx("p",{className:"mt-3",children:"   :"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4 mt-2",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"    "})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"9. "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"          ."}),r.jsx("li",{children:"    ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"10. "}),r.jsx("p",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 text-gray-800",children:"           ."})]}),r.jsxs("div",{className:"border-t-2 border-gray-200 pt-6 mt-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:" "}),r.jsxs("ul",{className:"list-disc list-inside space-y-3 text-gray-700",children:[r.jsx("li",{children:"      ."}),r.jsxs("li",{children:["    :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"  "}),r.jsx("li",{children:"  "})]})]}),r.jsx("li",{children:"                  ."}),r.jsx("li",{children:"            ."})]})]}),r.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 mt-8 text-center",children:r.jsx("p",{className:"text-green-800 font-medium",children:"         "})}),r.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["      ",new Date().toLocaleDateString("ar-SA")]}),r.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx(je,{to:"/register",className:"text-white bg-sky-500 hover:bg-sky-600 px-6 py-3 rounded-lg inline-block transition-colors text-center font-bold",children:"  -  "}),r.jsx(je,{to:"/",className:"text-sky-600 bg-sky-100 hover:bg-sky-200 px-6 py-3 rounded-lg inline-block transition-colors text-center",children:"   "})]})]})})}function K3(){return r.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-4 py-10 leading-relaxed",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-emerald-600 mb-6 text-center",children:"  -   "}),r.jsx("p",{className:"text-center text-gray-600 mb-8",children:"  "}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"1. "}),r.jsx("p",{children:"                ."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"2.  "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsxs("li",{children:["        "," ",r.jsx("strong",{className:"text-emerald-600",children:"    "}),"."]}),r.jsxs("li",{children:["   :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:" "})]})]}),r.jsxs("li",{children:["  "," ",r.jsx("strong",{className:"text-emerald-600",children:""}),"    ."]})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"3. "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"     ."}),r.jsx("li",{children:"        ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"4.   "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"             ."}),r.jsxs("li",{children:[" :"," ",r.jsx("strong",{className:"text-emerald-600",children:"2  3 "}),"   ",r.jsx("br",{}),r.jsx("span",{className:"text-sm text-gray-500 mr-4",children:"(         )"})]}),r.jsx("li",{children:"       ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"5.  "}),r.jsx("p",{className:"mb-3",children:"    :"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[r.jsx("li",{children:"   "}),r.jsx("li",{children:"  "}),r.jsx("li",{children:"    "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"     "})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"6.   "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"      ."}),r.jsxs("li",{children:["     :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"  "}),r.jsx("li",{children:"     "}),r.jsx("li",{children:"    "})]})]}),r.jsx("li",{children:"          ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"7.  "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"       ."}),r.jsx("li",{children:"       ."}),r.jsx("li",{children:"            ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"8.  "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsxs("li",{children:["        :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"  "})]})]}),r.jsx("li",{children:"     ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"9. "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"          ."}),r.jsx("li",{children:"    ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"10. "}),r.jsx("p",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 text-gray-800",children:"               ."})]}),r.jsx("div",{className:"bg-emerald-50 border border-emerald-300 rounded-lg p-4 mt-8 text-center",children:r.jsx("p",{className:"text-emerald-800 font-medium",children:"         "})}),r.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["     "," ",new Date().toLocaleDateString("ar-SA")]}),r.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx(je,{to:"/register",className:"text-white bg-emerald-500 hover:bg-emerald-600 px-6 py-3 rounded-lg inline-block transition-colors text-center font-bold",children:"  -  "}),r.jsx(je,{to:"/",className:"text-emerald-600 bg-emerald-100 hover:bg-emerald-200 px-6 py-3 rounded-lg inline-block transition-colors text-center",children:"   "})]})]})})}function G3(){return r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"   "}),r.jsx("p",{className:"text-gray-600 mb-6",children:"          ."}),r.jsx(je,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"   "})]})}const Q3="modulepreload",X3=function(t){return"/"+t},Bv={},Pf=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=X3(u),u in Bv)return;Bv[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Q3,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((p,v)=>{m.addEventListener("load",p),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},De=({allow:t,children:e})=>{const{role:n,loading:s}=We();return s?r.jsx("div",{className:"p-8 text-center",children:" ..."}):!n||!t.includes(n)?r.jsx(ug,{to:"/",replace:!0}):r.jsx(r.Fragment,{children:e})},y1=({isOpen:t,onClose:e,onConfirm:n,initialLocation:s})=>{const[i,a]=I.useState(s||null),[o,c]=I.useState(""),[u,d]=I.useState(!1),[h,m]=I.useState(!1),[p,v]=I.useState(null),[_,R]=I.useState(!1),[k,b]=I.useState(""),[w,y]=I.useState([]),[j,C]=I.useState(!1),[O,N]=I.useState(!1),[x,E]=I.useState("map"),T={lat:24.7136,lng:46.6753},P=I.useCallback(async $=>{if(!$.trim()||$.length<2){y([]),N(!1);return}C(!0);try{const B=$.includes("")?$:`${$}, `,X=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(B)}&limit=5&accept-language=ar`,{headers:{Accept:"application/json"}})).json();y(X),N(X.length>0)}catch(B){console.error("  :",B),y([])}finally{C(!1)}},[]),L=I.useCallback($=>{const B={lat:parseFloat($.lat),lng:parseFloat($.lon)};a(B),b(""),y([]),N(!1),window.leafletMap&&(window.leafletMap.setView([B.lat,B.lng],16,{animate:!0,duration:.5}),window.leafletMarker&&window.leafletMarker.setLatLng([B.lat,B.lng]));const F=$.display_name.split(",").slice(0,3).join("");c(F)},[]),D=I.useCallback(()=>{if(!navigator.geolocation){v("    ");return}m(!0),v(null),navigator.geolocation.getCurrentPosition($=>{const B={lat:$.coords.latitude,lng:$.coords.longitude};a(B),m(!1),window.leafletMap&&(window.leafletMap.setView([B.lat,B.lng],17),window.leafletMarker&&window.leafletMarker.setLatLng([B.lat,B.lng]))},$=>{m(!1),$.code===1?v("   .     "):$.code===2?v("  .    GPS"):v("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);I.useEffect(()=>{if(t){if(!document.getElementById("leaflet-css")){const $=document.createElement("link");$.id="leaflet-css",$.rel="stylesheet",$.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild($)}if(window.L)R(!0);else{const $=document.createElement("script");$.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",$.onload=()=>R(!0),document.body.appendChild($)}}},[t]),I.useEffect(()=>{if(!t||!_||!window.L)return;const $=window.L;if(!document.getElementById("location-map"))return;window.leafletMap&&window.leafletMap.remove();const F=i||T,X=$.map("location-map",{zoomControl:!1,attributionControl:!1}).setView([F.lat,F.lng],i?17:12);$.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(X);const se=$.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),be=$.marker([F.lat,F.lng],{icon:se,draggable:!0}).addTo(X);return be.on("dragend",()=>{const ye=be.getLatLng();a({lat:ye.lat,lng:ye.lng})}),X.on("click",ye=>{const{lat:Le,lng:At}=ye.latlng;be.setLatLng([Le,At]),a({lat:Le,lng:At})}),window.leafletMap=X,window.leafletMarker=be,i&&a(i),()=>{window.leafletMap&&(window.leafletMap.remove(),window.leafletMap=null,window.leafletMarker=null)}},[t,_]);const ae=()=>{i&&window.leafletMap&&window.leafletMap.setView([i.lat,i.lng],17,{animate:!0,duration:.5})},V=()=>{if(x==="manual"){if(!o.trim()){v("  ");return}n({lat:24.7136,lng:46.6753},o);return}if(!i){v("  ");return}if(!o.trim()){v("  ");return}n(i,o)};return t?r.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),r.jsxs("div",{className:"relative w-full h-full sm:w-[95%] sm:h-[90%] sm:max-w-2xl sm:rounded-3xl overflow-hidden bg-white shadow-2xl flex flex-col",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(Nn,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-lg",children:"  "}),r.jsx("p",{className:"text-sm text-white/80",children:x==="map"?"   ":"  "})]})]}),r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition",children:r.jsx(qr,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsxs("button",{onClick:()=>E("map"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${x==="map"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[r.jsx(b6,{className:"w-4 h-4"}),""]}),r.jsxs("button",{onClick:()=>E("manual"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${x==="manual"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[r.jsx(Ld,{className:"w-4 h-4"})," "]})]}),x==="map"&&r.jsxs("div",{className:"relative",children:[r.jsx(F6,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:k,onChange:$=>{b($.target.value),P($.target.value)},onFocus:()=>w.length>0&&N(!0),placeholder:"     ...",className:"w-full bg-white/95 text-gray-800 rounded-xl p-3 pr-10 pl-10 focus:outline-none focus:ring-2 focus:ring-white/50 transition placeholder:text-gray-400"}),j&&r.jsx(bi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-500 animate-spin"}),O&&w.length>0&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl overflow-hidden z-[1001] max-h-60 overflow-y-auto",children:w.map(($,B)=>r.jsxs("button",{onClick:()=>L($),className:"w-full p-3 text-right hover:bg-sky-50 border-b border-gray-100 last:border-0 transition flex items-start gap-3",children:[r.jsx(Nn,{className:"w-5 h-5 text-sky-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-gray-700 text-sm leading-relaxed",children:$.display_name})]},B))})]})]}),x==="map"&&r.jsxs("div",{className:"flex-1 relative",children:[!_&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx(bi,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-sky-600 font-medium",children:"  ..."})]})}),r.jsx("div",{id:"location-map",className:"w-full h-full"}),r.jsxs("div",{className:"absolute left-4 top-4 flex flex-col gap-2 z-[1000]",children:[r.jsx("button",{onClick:D,disabled:h,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition disabled:opacity-50",title:" ",children:h?r.jsx(bi,{className:"w-5 h-5 text-sky-500 animate-spin"}):r.jsx(Ya,{className:"w-5 h-5 text-sky-500"})}),i&&r.jsx("button",{onClick:ae,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition",title:"",children:r.jsx(a3,{className:"w-5 h-5 text-gray-600"})})]}),i&&r.jsxs("div",{className:"absolute right-4 top-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 z-[1000] max-w-[200px]",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(Mn,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"  "})]}),r.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[i.lat.toFixed(6),", ",i.lng.toFixed(6)]})]})]}),x==="manual"&&r.jsx("div",{className:"flex-1 p-6 overflow-y-auto bg-gray-50",children:r.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Ld,{className:"w-10 h-10 text-sky-500"})}),r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"  "}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"     "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),r.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-xl p-3 bg-white focus:border-sky-400 focus:outline-none",onChange:$=>c(B=>{const F=B.split("").slice(1);return $.target.value+(F.length?""+F.join(""):"")}),children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",placeholder:":  ",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:$=>c(B=>(B.split("")[0]||"")+($.target.value?" "+$.target.value:""))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",placeholder:":   ",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:$=>c(B=>B.split("").slice(0,2).join("")+($.target.value?" "+$.target.value:""))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),r.jsx("textarea",{placeholder:"    ...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none resize-none",onChange:$=>c(B=>B.split("").slice(0,3).join("")+($.target.value?" "+$.target.value:""))})]}),o&&r.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[r.jsx(Mn,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:":"})]}),r.jsx("p",{className:"text-gray-700",children:o})]})]})}),r.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[p&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm flex items-center gap-2",children:[r.jsx(qr,{className:"w-4 h-4 flex-shrink-0"}),p]}),x==="map"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx(Y6,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:o,onChange:$=>c($.target.value),placeholder:"  (:       ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 pr-10 focus:border-sky-400 focus:outline-none transition text-gray-800"})]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"      "})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:e,className:"flex-1 py-3 px-4 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition",children:""}),r.jsxs("button",{onClick:V,disabled:x==="map"&&!i,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:[r.jsx(Mn,{className:"w-5 h-5"})," "]})]})]})]}),r.jsx("style",{children:`
        .custom-marker {
          background: transparent !important;
          border: none !important;
        }
        .leaflet-container {
          font-family: inherit;
        }
        .leaflet-control-zoom {
          display: none;
        }
        #location-map {
          background: #f0f9ff;
        }
      `})]}):null},Df=1,Ho=.75,Lf=!1,Y3=()=>{const{items:t,subtotal:e,clear:n}=bx(),{user:s}=We(),i=Xt(),a=Bn(),o=kn(),[c,u]=I.useState(""),[d,h]=I.useState(!1),[m,p]=I.useState(null),[v,_]=I.useState(null),[R,k]=I.useState(!1),[b,w]=I.useState("pickup"),y=b==="delivery"?7:0;t.reduce((N,x)=>N+x.qty,0);const j=e+y;I.useEffect(()=>{(async()=>{var P,L;if(t.length===0)return;let x=(P=t[0])==null?void 0:P.ownerId;if(!x&&((L=t[0])!=null&&L.id))try{const D=await tt(J(z,"menuItems",t[0].id)),ae=D.exists()?D.data():null;x=(ae==null?void 0:ae.ownerId)||null}catch(D){console.error("    :",D)}if(!x){p(null);return}const E=await tt(J(z,"restaurants",x)),T=E.exists()?E.data():null;p({id:x,name:(T==null?void 0:T.name)||"",referredBy:T==null?void 0:T.referredBy,referrerType:T==null?void 0:T.referrerType})})()},[t]);const C=(N,x)=>{_(N),u(x),k(!1),o.success("   ! ")},O=async()=>{var $;if(!s)return;if(t.length===0){a.warning(" ");return}let N=m==null?void 0:m.id;if(!N&&(($=t[0])!=null&&$.id)){const B=await tt(J(z,"menuItems",t[0].id)),F=B.exists()?B.data():null;N=(F==null?void 0:F.ownerId)||null}if(!N){a.error("   .    .");return}h(!0);const x=(m==null?void 0:m.referrerType)==="admin"&&(m==null?void 0:m.referredBy),E=t.reduce((B,F)=>B+F.qty,0),T=Df+Ho,L=e-T*E,D=Df*E,ae=x?Ho*E:0,V=D+(x?0:Ho*E);await ts(he(z,"orders"),{customerId:s.uid,restaurantId:N,restaurantName:(m==null?void 0:m.name)||"",items:t.map(B=>({id:B.id,name:B.name,price:B.price,qty:B.qty,ownerId:B.ownerId??N})),subtotal:e,deliveryFee:y,total:j,status:"pending",deliveryType:b,address:b==="pickup"?"  ":c,location:b==="pickup"?null:v,createdAt:le(),updatedAt:le(),paymentMethod:"cod",restaurantEarnings:L,platformFee:D,platformFeePerItem:Df,adminCommission:ae,adminCommissionPerItem:Ho,appEarnings:V,totalItemsCount:E,referredBy:(m==null?void 0:m.referredBy)||null});try{const B=J(z,"wallets",N);if((await tt(B)).exists())await _e(B,{balance:Ls(L),totalEarnings:Ls(L),updatedAt:le()});else{const{setDoc:X}=await Pf(async()=>{const{setDoc:se}=await Promise.resolve().then(()=>Ef);return{setDoc:se}},void 0);await X(B,{balance:L,totalEarnings:L,totalWithdrawn:0,transactions:[],updatedAt:le()})}console.log(`   ${L}    ${N}`)}catch(B){console.error("    :",B)}if(x&&(m!=null&&m.referredBy)&&ae>0)try{const B=J(z,"wallets",m.referredBy);if((await tt(B)).exists())await _e(B,{balance:Ls(ae),totalEarnings:Ls(ae),updatedAt:le()});else{const{setDoc:X}=await Pf(async()=>{const{setDoc:se}=await Promise.resolve().then(()=>Ef);return{setDoc:se}},void 0);await X(B,{balance:ae,totalEarnings:ae,totalWithdrawn:0,transactions:[],updatedAt:le()})}console.log(`   ${ae}    ${m.referredBy} (${E}   ${Ho} .)`)}catch(B){console.error("    :",B)}try{const B=J(z,"wallets","app_earnings");if((await tt(B)).exists())await _e(B,{balance:Ls(V),totalEarnings:Ls(V),updatedAt:le()});else{const{setDoc:X}=await Pf(async()=>{const{setDoc:se}=await Promise.resolve().then(()=>Ef);return{setDoc:se}},void 0);await X(B,{balance:V,totalEarnings:V,totalWithdrawn:0,transactions:[],updatedAt:le()})}console.log(`   ${V}   `)}catch(B){console.error("    :",B)}n(),h(!1),i("/orders")};return r.jsx(De,{allow:["customer","admin"],children:r.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[r.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 text-white shadow-lg",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(Yl,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold",children:" "}),r.jsx("p",{className:"text-sm text-white/80",children:(m==null?void 0:m.name)||" ..."})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[r.jsx(Yl,{className:"w-5 h-5 text-sky-500"}),r.jsx("span",{className:"font-bold text-gray-800",children:" "}),r.jsxs("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full mr-auto",children:[t.length," "]})]}),r.jsx("div",{className:"p-4 space-y-2",children:t.map(N=>r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center text-sm",children:[N.qty,""]}),r.jsx("span",{className:"text-gray-800 font-medium",children:N.name})]}),r.jsxs("span",{className:"font-bold text-sky-600",children:[(N.price*N.qty).toFixed(2)," ."]})]},N.id))})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[r.jsx(ss,{className:"w-5 h-5 text-sky-500"}),r.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsxs("button",{onClick:()=>w("pickup"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${b==="pickup"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${b==="pickup"?"bg-green-500":"bg-gray-100"}`,children:r.jsx(Ut,{className:`w-6 h-6 ${b==="pickup"?"text-white":"text-gray-500"}`})}),r.jsxs("div",{className:"flex-1 text-right",children:[r.jsx("p",{className:`font-bold ${b==="pickup"?"text-green-700":"text-gray-800"}`,children:"  "}),r.jsx("p",{className:"text-sm text-gray-500",children:" -   "})]}),b==="pickup"&&r.jsx(Mn,{className:"w-6 h-6 text-green-500"})]}),r.jsxs("div",{className:"w-full p-4 rounded-xl border-2 border-gray-200 bg-gray-50 flex items-center gap-4 opacity-60 cursor-not-allowed",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-gray-200",children:r.jsx(ss,{className:"w-6 h-6 text-gray-400"})}),r.jsxs("div",{className:"flex-1 text-right",children:[r.jsx("p",{className:"font-bold text-gray-500",children:" "}),r.jsx("p",{className:"text-sm text-gray-400",children:" : 7 ."})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:[r.jsx(Ws,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-semibold",children:" "})]})]})]})]}),Lf,r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[r.jsx(JP,{className:"w-5 h-5 text-amber-500"}),r.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[r.jsx("span",{children:" "}),r.jsxs("span",{className:"font-semibold",children:[e.toFixed(2)," ."]})]}),b==="delivery"&&r.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ss,{className:"w-4 h-4"}),r.jsx("span",{children:" "})]}),r.jsxs("span",{className:"font-semibold",children:[y.toFixed(2)," ."]})]}),b==="pickup"&&r.jsxs("div",{className:"flex items-center justify-between text-green-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ut,{className:"w-4 h-4"}),r.jsx("span",{children:"  "})]}),r.jsx("span",{className:"font-semibold",children:""})]}),r.jsx("div",{className:"h-px bg-gray-200 my-2"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-bold text-lg text-gray-800",children:""}),r.jsxs("span",{className:"font-black text-xl text-sky-600",children:[j.toFixed(2)," ."]})]})]})]}),r.jsx("button",{disabled:d||b==="delivery"&&Lf,onClick:O,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-3",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"  ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Mn,{className:"w-6 h-6"}),b==="pickup"?"  (  )":"  (  )"]})}),b==="delivery"&&Lf,r.jsx(y1,{isOpen:R,onClose:()=>k(!1),onConfirm:C,initialLocation:v})]})})},J3=()=>{const{user:t}=We(),e=Xt(),[n,s]=I.useState(null),[i,a]=I.useState([]),[o,c]=I.useState(null);I.useEffect(()=>{if(!t)return;s(null),c(null);const m=at(he(z,"orders"),ht("customerId","==",t.uid),Ns("createdAt","desc")),p=tr(m,v=>{a(v.docs.map(_=>({id:_.id,..._.data()}))),s(null)},async v=>{console.error("TrackOrders onSnapshot error:",v),s("   Composite Index  customerId + createdAt.     .");const _=at(he(z,"orders"),ht("customerId","==",t.uid)),k=(await Ve(_)).docs.map(y=>({id:y.id,...y.data()})),b=at(he(z,"orders"),Ns("createdAt","desc"),sx(5));let w=[];try{w=(await Ve(b)).docs.map(j=>{var O,N,x,E;const C=j.data();return{id:j.id,customerId:C.customerId,restaurantId:C.restaurantId,createdAt:((E=(x=(N=(O=C.createdAt)==null?void 0:O.toDate)==null?void 0:N.call(O))==null?void 0:x.toISOString)==null?void 0:E.call(x))??null}})}catch{}c({uid:t.uid,fallbackCount:k.length,sample:w}),a(k)});return()=>p()},[t]);const u=m=>({pending:{text:" ",emoji:"",color:"bg-yellow-500",icon:ns},accepted:{text:" ",emoji:"",color:"bg-blue-500",icon:Se},preparing:{text:" ",emoji:"",color:"bg-orange-500",icon:mx},ready:{text:" ",emoji:"",color:"bg-purple-500",icon:_n},out_for_delivery:{text:" ",emoji:"",color:"bg-sky-500",icon:ss},delivered:{text:" ",emoji:"",color:"bg-green-500",icon:Se},cancelled:{text:"",emoji:"",color:"bg-red-500",icon:Ws}})[m]||{text:m,emoji:"",color:"bg-gray-500",icon:_n},d=m=>m.courierId&&m.status==="out_for_delivery",h=m=>{const p=["pending","accepted","preparing","ready"];return!m.courierId&&m.restaurantId&&p.includes(m.status)};return r.jsxs("div",{className:"space-y-3",children:[r.jsx("h1",{className:"text-xl font-bold",children:""}),n&&r.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[n,o&&r.jsxs("div",{className:"mt-1",children:[r.jsxs("div",{children:["UID: ",r.jsx("b",{children:o.uid})]}),r.jsxs("div",{children:["  : ",r.jsx("b",{children:o.fallbackCount})]}),Array.isArray(o.sample)&&o.sample.length>0&&r.jsxs("div",{className:"mt-1",children:[r.jsx("div",{className:"font-semibold",children:" ( 5):"}),o.sample.map(m=>r.jsxs("div",{className:"truncate",children:["#",m.id,"  customerId: ",String(m.customerId),"  restaurantId: ",String(m.restaurantId),"  createdAt: ",m.createdAt||""]},m.id))]})]})]}),i.map(m=>{var p,v,_,R,k,b,w;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:`${u(m.status).color} px-4 py-3 flex items-center justify-between`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-white",children:[r.jsx("span",{className:"text-xl",children:u(m.status).emoji}),r.jsx("span",{className:"font-bold",children:u(m.status).text})]}),r.jsxs("div",{className:"text-white/80 text-sm font-medium",children:["#",m.id.slice(-6)]})]}),r.jsxs("div",{className:"p-4",children:[m.restaurantName&&r.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold mb-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:String(m.restaurantName)})]}),r.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 rounded-xl p-3 mb-3",children:(p=m.items)==null?void 0:p.map(y=>`${y.name}${y.qty}`).join("  ")}),r.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:m.deliveryType==="pickup"?r.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-medium bg-green-50 rounded-xl p-3",children:[r.jsx(Nn,{className:"w-4 h-4"}),r.jsx("span",{children:"  "})]}):r.jsxs("div",{className:"space-y-1 bg-gray-50 rounded-xl p-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" :"}),r.jsxs("span",{children:[((_=(v=m.subtotal)==null?void 0:v.toFixed)==null?void 0:_.call(v,2))||""," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" :"}),m.deliveryFee!==void 0&&m.deliveryFee>0?r.jsxs("span",{className:"font-medium",children:[(k=(R=m.deliveryFee)==null?void 0:R.toFixed)==null?void 0:k.call(R,2)," ."]}):r.jsx("span",{className:"text-amber-600",children:"  "})]})]})}),r.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[r.jsxs("div",{className:"font-bold text-lg text-primary",children:[": ",(w=(b=m.total)==null?void 0:b.toFixed)==null?void 0:w.call(b,2)," ."]}),d(m)&&r.jsxs("button",{onClick:()=>e(`/chat?orderId=${m.id}`),className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-primary to-accent 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200 animate-pulse`,children:[r.jsx(Sh,{className:"w-5 h-5"}),r.jsx("span",{children:"   "})]}),h(m)&&r.jsxs("button",{onClick:()=>e(`/chat?orderId=${m.id}`),className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200`,children:[r.jsx(Ut,{className:"w-5 h-5"}),r.jsx("span",{children:"   "})]})]})]})]},m.id)}),i.length===0&&!n&&r.jsx("div",{className:"text-gray-600",children:"    ."})]})},Z3=()=>{const{user:t,role:e}=We(),n=Bn(),s=kn(),[i,a]=I.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[o,c]=I.useState([]),[u,d]=I.useState(0),[h,m]=I.useState(!1),[p,v]=I.useState(null),[_,R]=I.useState(""),[k,b]=I.useState(!0),[w,y]=I.useState(!1);I.useEffect(()=>{if(!t)return;(async()=>{const P=await tt(J(z,"users",t.uid));if(P.exists()){const L=P.data();a({name:L.name||"",phone:L.phone||t.phoneNumber||"",city:L.city||"",address:L.address||"",restaurantName:L.restaurantName||""}),L.savedLocations&&Array.isArray(L.savedLocations)?(c(L.savedLocations),d(L.defaultLocationIndex||0)):L.savedLocation&&(c([{...L.savedLocation,label:""}]),d(0))}b(!1)})()},[t]);const j=async T=>{if(T.preventDefault(),!!t){y(!0);try{const P=o[u]||null;await _e(J(z,"users",t.uid),{name:i.name,phone:i.phone,city:i.city,address:i.address,savedLocation:P,savedLocations:o,defaultLocationIndex:u,...e==="owner"&&{restaurantName:i.restaurantName}}),n.success("   ! ")}catch{n.error("   ")}finally{y(!1)}}},C=(T,P)=>{const L={lat:T.lat,lng:T.lng,address:P,label:_||` ${o.length+1}`};c([...o,L]),R(""),m(!1),s.success("  !    ")},O=(T,P)=>{if(p===null)return;const L=[...o];L[p]={...L[p],lat:T.lat,lng:T.lng,address:P},c(L),v(null),m(!1),s.success("  !    ")},N=async T=>{if(!await n.confirm("    "))return;const L=o.filter((D,ae)=>ae!==T);c(L),u>=L.length?d(Math.max(0,L.length-1)):u>T&&d(u-1),s.info("  ")},x=T=>{d(T),s.success("   ")};if(k)return r.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[r.jsx(pn,{className:"w-6 h-6 animate-spin ml-2"}),"  ..."]});const E=()=>e==="owner"?"  ":e==="courier"?"  ":e==="admin"?"  ":" ";return r.jsxs("div",{className:"max-w-md mx-auto py-8 px-4",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center",children:r.jsx(Rn,{className:"w-6 h-6 text-sky-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-800",children:E()}),r.jsx("p",{className:"text-sm text-gray-500",children:(t==null?void 0:t.email)||(t==null?void 0:t.phoneNumber)})]})]}),r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(Rn,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:i.name,onChange:T=>a({...i,name:T.target.value})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(wx,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:i.phone,onChange:T=>a({...i,phone:T.target.value}),dir:"ltr"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(a1,{className:"w-4 h-4 inline ml-1"}),""]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:": ",value:i.city,onChange:T=>a({...i,city:T.target.value})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(Nn,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"     ...",value:i.address,onChange:T=>a({...i,address:T.target.value})})]}),(e==="customer"||e==="admin")&&r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:[r.jsx(Ya,{className:"w-4 h-4"}),"  "]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[o.length,"/5"]})]}),o.length>0&&r.jsx("div",{className:"space-y-3 mb-4",children:o.map((T,P)=>r.jsxs("div",{className:`rounded-xl p-3 border-2 transition ${P===u?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${P===u?"bg-green-500":"bg-gray-400"}`,children:r.jsx(Nn,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("p",{className:"font-bold text-gray-800",children:T.label||` ${P+1}`}),P===u&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-500 text-white text-xs font-bold rounded-full",children:[r.jsx(m1,{className:"w-3 h-3"})," "]})]}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:T.address})]})]}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[P!==u&&r.jsxs("button",{type:"button",onClick:()=>x(P),className:"flex-1 py-2 px-3 rounded-lg border border-green-200 text-green-600 text-xs font-medium hover:bg-green-50 transition flex items-center justify-center gap-1",children:[r.jsx(Mn,{className:"w-3 h-3"}),"  "]}),r.jsx("button",{type:"button",onClick:()=>{v(P),m(!0)},className:"flex-1 py-2 px-3 rounded-lg border border-sky-200 text-sky-600 text-xs font-medium hover:bg-sky-50 transition",children:""}),r.jsx("button",{type:"button",onClick:()=>N(P),className:"py-2 px-3 rounded-lg border border-red-200 text-red-500 hover:bg-red-50 transition",children:r.jsx(rn,{className:"w-4 h-4"})})]})]},P))}),o.length<5&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",value:_,onChange:T=>R(T.target.value),placeholder:"  (:  ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 text-sm focus:border-sky-400 focus:outline-none"}),r.jsxs("button",{type:"button",onClick:()=>{v(null),m(!0)},className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-100 to-sky-50 border-2 border-dashed border-sky-300 text-sky-600 font-semibold hover:border-sky-400 transition flex items-center justify-center gap-3",children:[r.jsx(Nc,{className:"w-5 h-5"}),r.jsx("span",{children:"  "})]})]}),o.length===0&&r.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"     "})]}),e==="owner"&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(Dd,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:i.restaurantName,onChange:T=>a({...i,restaurantName:T.target.value})})]}),r.jsx("button",{type:"submit",disabled:w,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:w?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(h1,{className:"w-5 h-5"})," "]})})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[r.jsx("p",{children:"      "}),(e==="customer"||e==="admin")&&r.jsx("p",{className:"mt-1",children:"    5  "})]})]}),r.jsx(y1,{isOpen:h,onClose:()=>{m(!1),v(null)},onConfirm:(T,P)=>{p!==null?O(T,P):C(T,P)},initialLocation:p!==null&&o[p]?{lat:o[p].lat,lng:o[p].lng}:null})]})},eD=()=>{const t=[{to:"/owner/packages",title:"  ",desc:"      .",icon:r.jsx(Sn,{className:"w-8 h-8 text-amber-500"}),color:"from-amber-50 via-yellow-50 to-orange-50",featured:!0},{to:"/owner/promotion",title:" ",desc:"   ()      -  !",icon:r.jsx(Ni,{className:"w-8 h-8 text-purple-500"}),color:"from-purple-50 to-pink-50"},{to:"/owner/menu",title:" ",desc:"     .",icon:r.jsx(b3,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:" ",desc:"     .",icon:r.jsx(Pd,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"  ",desc:"     .",icon:r.jsx(f1,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>r.jsxs(je,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col relative overflow-hidden ${e.featured?"ring-2 ring-amber-300 sm:col-span-2":""}`,children:[e.featured&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 py-1.5 text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-white text-sm font-bold",children:[r.jsx(Un,{className:"w-4 h-4"}),r.jsx("span",{children:" "}),r.jsx(Un,{className:"w-4 h-4"})]})}),r.jsx("div",{className:"h-8"})]}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,r.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),r.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},tD=({kind:t,message:e,onClose:n})=>{const s=t==="success"?"bg-green-600":t==="error"?"bg-rose-600":t==="warning"?"bg-amber-500":"bg-slate-800";return I.useEffect(()=>{const i=setTimeout(n,2500);return()=>clearTimeout(i)},[n]),r.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${s}`,children:e})},zv=()=>({name:"",desc:"",price:0,available:!0,file:null});async function nD(t,e=900,n=.8){try{const s=await createImageBitmap(t),i=Math.min(1,e/s.width),a=Math.round(s.width*i),o=Math.round(s.height*i),c=document.createElement("canvas");c.width=a,c.height=o,c.getContext("2d").drawImage(s,0,0,a,o);const d=t.type.includes("png")?"image/png":"image/jpeg";return await new Promise(m=>c.toBlob(p=>m(p),d,n))}catch{return t}}const sD=()=>{const{user:t}=We(),e=Bn(),[n,s]=I.useState([]),[i,a]=I.useState(!0),[o,c]=I.useState(zv()),[u,d]=I.useState(!1),[h,m]=I.useState(null),p=(y,j)=>m({kind:y,message:j}),v=Ih(mn),_=I.useRef(null),R=async()=>{if(!t)return;a(!0);const y=at(he(z,"menuItems"),ht("ownerId","==",t.uid)),j=await Ve(y);s(j.docs.map(C=>({id:C.id,...C.data()}))),a(!1)};I.useEffect(()=>{R()},[t]);const k=async y=>{if(y.preventDefault(),!t){p("warning","    ");return}const j=Number(o.price||0);if(!o.name.trim()){p("warning","   ");return}if(!Number.isFinite(j)||j<=0){p("warning","   ");return}d(!0);const C="temp_"+Date.now(),O=o.file?URL.createObjectURL(o.file):void 0,N={_tempId:C,_optimistic:!0,_progress:o.file?1:100,name:o.name,desc:o.desc||"",price:j,imageUrl:O,available:o.available??!0,ownerId:t.uid};s(x=>[N,...x]);try{let x;if(o.file){const P=await nD(o.file),L=o.file.name.replace(/\s+/g,"_").slice(-60),D=`menuImages/${t.uid}_${Date.now()}_${L}`,ae=Xa(v,D),V=fx(ae,P,{contentType:o.file.type||"image/jpeg"});await new Promise(($,B)=>{V.on("state_changed",F=>{const X=Math.round(F.bytesTransferred/F.totalBytes*100);s(se=>se.map(be=>be._tempId===C?{...be,_progress:X}:be))},B,async()=>{const F=await Qa(V.snapshot.ref);x=`${F}${F.includes("?")?"&":"?"}v=${Date.now()}`,$()})})}const E={name:N.name,desc:N.desc,price:j,imageUrl:x||"",available:N.available,ownerId:t.uid,...N.categoryId?{categoryId:N.categoryId}:{}},T=await ts(he(z,"menuItems"),E);s(P=>P.map(L=>L._tempId===C?{...L,id:T.id,imageUrl:x||L.imageUrl,_optimistic:!1,_progress:100}:L)),p("success","    ")}catch(x){s(E=>E.filter(T=>T._tempId!==C)),p("error",`   : ${(x==null?void 0:x.message)||x}`)}finally{d(!1),c(zv()),_.current&&(_.current.value=""),O&&URL.revokeObjectURL(O)}},b=async(y,j)=>{if(y){s(C=>C.map(O=>O.id===y?{...O,available:!j}:O));try{await _e(J(z,"menuItems",y),{available:!j}),p("success","  ")}catch{s(C=>C.map(O=>O.id===y?{...O,available:!!j}:O)),p("error","  .  .")}}},w=async y=>{if(!y||!await e.confirm("       ",{dangerous:!0,title:" "}))return;const C=n;s(O=>O.filter(N=>N.id!==y));try{await Jn(J(z,"menuItems",y)),p("success"," ")}catch{s(C),p("error","  .  .")}};return i?r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[r.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(y=>r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},y))})]}):r.jsxs(r.Fragment,{children:[h&&r.jsx(tD,{kind:h.kind,message:h.message,onClose:()=>m(null)}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("form",{onSubmit:k,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[r.jsx("h2",{className:"text-lg font-bold",children:" "}),r.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:o.name,onChange:y=>c({...o,name:y.target.value})}),r.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:o.desc,onChange:y=>c({...o,desc:y.target.value})}),r.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(o.price)?o.price:0,onChange:y=>c({...o,price:Number(y.target.value)})}),r.jsx("input",{ref:_,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:y=>{var j;return c({...o,file:((j=y.target.files)==null?void 0:j[0])||null})}}),r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:o.available,onChange:y=>c({...o,available:y.target.checked})}),""]}),r.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:u,children:u?" ":""})]}),r.jsxs("div",{className:"space-y-3",children:[n.map(y=>{var j,C;return r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:y.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:O=>{O.currentTarget.style.display="none"}}),y._optimistic&&r.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:r.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:r.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${y._progress||1}%`}})})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-bold",children:y.name}),y.desc&&r.jsx("div",{className:"text-sm text-gray-600",children:y.desc}),r.jsxs("div",{className:"font-semibold mt-1",children:[(C=(j=y.price)==null?void 0:j.toFixed)==null?void 0:C.call(j,2)," ."]}),y._optimistic&&r.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" "})]}),r.jsx("button",{onClick:()=>b(y.id,y.available),disabled:!!y._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:y.available?"":""}),r.jsx("button",{onClick:()=>w(y.id),disabled:!!y._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:""})]},y.id||y._tempId)}),n.length===0&&r.jsx("div",{className:"text-gray-600",children:"   ."})]})]})]})},qv=t=>({pending:"  ",accepted:"  ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "})[t]||t,rD=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},iD=()=>{const{user:t}=We(),e=Xt(),[n,s]=I.useState([]),[i,a]=I.useState(null),[o,c]=I.useState({}),u=I.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);I.useEffect(()=>{if(!u)return;a(null);const h=tr(he(z,"orders"),m=>{const v=m.docs.map(_=>({id:_.id,..._.data()})).filter(_=>{var b,w;const R=_.restaurantId===u,k=((w=(b=_==null?void 0:_.items)==null?void 0:b[0])==null?void 0:w.ownerId)===u;return R||k});v.sort((_,R)=>{var w,y,j,C;const k=((y=(w=_.createdAt)==null?void 0:w.toMillis)==null?void 0:y.call(w))??0;return(((C=(j=R.createdAt)==null?void 0:j.toMillis)==null?void 0:C.call(j))??0)-k}),s(v),a(null)},m=>{console.error("Firestore error:",m),a("    .")});return()=>h()},[u]);const d=async(h,m,p)=>{const v={status:m,updatedAt:le()};if(m==="accepted"&&(p==null?void 0:p.deliveryType)==="delivery"){const _=o[h]||0;v.deliveryFee=_,v.total=(p.subtotal||0)+_}await _e(J(z,"orders",h),v)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"  "}),i&&r.jsx("div",{className:"text-red-500 text-sm mb-2",children:i}),n.map(h=>{var m,p,v,_,R;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[r.jsxs("div",{className:"font-bold text-lg",children:[" #",h.id.slice(-6),r.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(m=h.items)==null?void 0:m.map(k=>`${k.name}${k.qty}`).join("  ")})]}),r.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(v=(p=h.total)==null?void 0:p.toFixed)==null?void 0:v.call(p,2)," ."]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-semibold",children:":"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${rD(h.status)}`,children:qv(h.status||"pending")})]}),r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:":"})," ",h.address]}),h.location&&r.jsxs("div",{className:"mt-3",children:[r.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"  :"}),r.jsx("iframe",{title:`map-${h.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${h.location.lat},${h.location.lng}&hl=ar&z=15&output=embed`})]}),h.status==="pending"&&h.deliveryType==="delivery"&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[r.jsx("label",{className:"block text-sm font-bold text-amber-800 mb-2",children:"     :"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:": 10",value:o[h.id]||"",onChange:k=>c(b=>({...b,[h.id]:parseFloat(k.target.value)||0})),className:"flex-1 px-4 py-3 border-2 border-amber-300 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-lg font-bold text-center"}),r.jsx("span",{className:"text-amber-700 font-bold",children:"."})]}),r.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"     "})]}),h.deliveryFee!==void 0&&h.deliveryFee>0&&r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:" :"})," ",(R=(_=h.deliveryFee)==null?void 0:_.toFixed)==null?void 0:R.call(_,2)," ."]}),r.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:[!h.courierId&&["pending","accepted","preparing","ready"].includes(h.status)&&r.jsxs("button",{onClick:()=>e(`/chat?orderId=${h.id}`),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gradient-to-r from-orange-500 to-amber-500 text-white hover:shadow-lg transition flex items-center gap-2",children:[r.jsx(Sh,{className:"w-4 h-4"}),"  "]}),["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(k=>{const b=k==="accepted"&&h.status==="pending"&&h.deliveryType==="delivery",w=o[h.id]!==void 0&&o[h.id]>=0,y=b&&!w;return r.jsx("button",{onClick:()=>d(h.id,k,h),disabled:y,className:`px-4 py-2 rounded-xl text-sm font-semibold transition ${y?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:y?"   ":"",children:qv(k)},k)})]})]},h.id)}),n.length===0&&!i&&r.jsx("div",{className:"text-gray-400 text-center text-lg",children:"    ."})]})},aD=()=>{const{user:t}=We(),e=kn(),[n,s]=I.useState({name:"",phone:"",city:"",location:"",logoUrl:"",allowPickup:!1,commercialLicenseUrl:"",licenseStatus:void 0,licenseNotes:""}),[i,a]=I.useState(null),[o,c]=I.useState(""),[u,d]=I.useState(null),[h,m]=I.useState(!0),[p,v]=I.useState(!1),_=I.useMemo(()=>!p&&!!t,[p,t]);I.useEffect(()=>{t&&(async()=>{try{const j=await tt(J(z,"restaurants",t.uid));if(j.exists()){const C=j.data();s({name:C.name??"",phone:C.phone??"",city:C.city??"",location:C.location??"",logoUrl:C.logoUrl??"",allowPickup:C.allowPickup??!1,commercialLicenseUrl:C.commercialLicenseUrl??"",licenseStatus:C.licenseStatus,licenseNotes:C.licenseNotes??""})}}catch{e.error("   ")}finally{m(!1)}})()},[t,e]),I.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]);const R=j=>{const{name:C,value:O}=j.target;s(N=>({...N,[C]:O}))},k=j=>{var O;const C=((O=j.target.files)==null?void 0:O[0])||null;if(a(C),C){const N=URL.createObjectURL(C);c(N)}else c("")},b=async()=>{if(!t||!i)return;if(!/^image\//.test(i.type)){e.warning("   ");return}const C=3*1024*1024;if(i.size>C){e.warning("        3MB");return}const O=i.name.replace(/\s+/g,"_"),N=`restaurants/${t.uid}/logo_${Date.now()}_${O}`,x=Xa(op,N),E={contentType:i.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await ap(x,i,E);const T=await Qa(x);return`${T}${T.includes("?")?"&":"?"}v=${Date.now()}`},w=async(j,C)=>{if(!t||!j)return;if(!/^(image\/|application\/pdf)/.test(j.type)){e.warning("      PDF");return}const N=5*1024*1024;if(j.size>N){e.warning("        5MB");return}const x=j.name.replace(/\s+/g,"_"),E=`restaurants/${t.uid}/licenses/${C}_${Date.now()}_${x}`,T=Xa(op,E),P={contentType:j.type,cacheControl:"public,max-age=31536000,immutable"};return await ap(T,j,P),await Qa(T)},y=async j=>{if(j.preventDefault(),!t){e.warning("    ");return}if(!n.name.trim()){e.warning("  ");return}v(!0);try{let C=n.logoUrl,O=n.commercialLicenseUrl,N=n.licenseStatus;if(i){e.info("    ");const x=await b();x&&(C=x)}if(u){e.info("     ");const x=await w(u,"commercial");x&&(O=x,N="pending")}await fn(J(z,"restaurants",t.uid),{...n,logoUrl:C,commercialLicenseUrl:O,licenseStatus:N},{merge:!0}),o&&URL.revokeObjectURL(o),c(""),a(null),d(null),e.success("    ",{title:" "})}catch(C){e.error(` : ${(C==null?void 0:C.message)||"  "}`)}finally{v(!1)}};return h?r.jsx("div",{className:"p-6 text-center",children:" "}):r.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[r.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"  "}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block font-semibold",children:" "}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:o||n.logoUrl?r.jsx("img",{src:o||n.logoUrl,className:"w-full h-full object-cover",onError:j=>j.currentTarget.style.display="none",alt:"logo"}):null}),r.jsx("input",{type:"file",accept:"image/*",onChange:k})]}),i&&r.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",r.jsx("span",{className:"font-semibold",children:i.name})]})]}),r.jsx("input",{name:"name",placeholder:" ",value:n.name,onChange:R,className:"w-full border p-3 rounded-xl"}),r.jsx("input",{name:"phone",placeholder:" ",value:n.phone,onChange:R,className:"w-full border p-3 rounded-xl"}),r.jsxs("div",{className:"relative",children:[r.jsx(Nn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400 pointer-events-none"}),r.jsxs("select",{name:"city",value:n.city,onChange:j=>s(C=>({...C,city:j.target.value})),className:"w-full border p-3 pr-10 rounded-xl bg-white appearance-none cursor-pointer focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[r.jsx("option",{value:"",children:" "}),_x.map(j=>r.jsx("option",{value:j,children:j},j))]})]}),r.jsx("input",{name:"location",placeholder:"",value:n.location,onChange:R,className:"w-full border p-3 rounded-xl"}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(Ut,{className:"w-5 h-5 text-green-500"})," "]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:r.jsx(Ut,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800",children:"  "}),r.jsx("p",{className:"text-sm text-gray-500",children:"      "})]})]}),r.jsx("button",{type:"button",onClick:()=>s(j=>({...j,allowPickup:!j.allowPickup})),className:`relative w-14 h-8 rounded-full transition-colors ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:r.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.allowPickup?"right-1":"left-1"}`})})]}),n.allowPickup&&r.jsx("p",{className:"mt-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:"         (  )"})]}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(gx,{className:"w-5 h-5 text-sky-500"})," "]}),n.licenseStatus&&r.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 ${n.licenseStatus==="approved"?"bg-green-50 text-green-700":n.licenseStatus==="rejected"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[n.licenseStatus==="approved"&&r.jsx(Se,{className:"w-5 h-5"}),n.licenseStatus==="rejected"&&r.jsx(xi,{className:"w-5 h-5"}),n.licenseStatus==="pending"&&r.jsx(ns,{className:"w-5 h-5"}),r.jsxs("span",{className:"font-semibold",children:[n.licenseStatus==="approved"&&"   ",n.licenseStatus==="rejected"&&" ",n.licenseStatus==="pending"&&"  ..."]})]}),n.licenseNotes&&n.licenseStatus==="rejected"&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl text-red-600 text-sm",children:[r.jsx("strong",{children:":"})," ",n.licenseNotes]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[r.jsx(W6,{className:"w-4 h-4 text-orange-500"})," "]}),r.jsxs("div",{className:"flex items-center gap-3",children:[n.commercialLicenseUrl&&r.jsx("a",{href:n.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:text-sky-700 text-sm underline",children:"  "}),r.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:j=>{var C;return d(((C=j.target.files)==null?void 0:C[0])||null)},className:"text-sm"})]}),u&&r.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",r.jsx("span",{className:"font-semibold",children:u.name})]})]})]}),r.jsx("button",{type:"submit",disabled:!_,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:p?" ":""})]})]})},oD=()=>{const{user:t}=We(),e=Bn(),n=kn(),[s,i]=I.useState([]),[a,o]=I.useState(!0);I.useEffect(()=>{t&&(async()=>{const k=at(he(z,"hiringRequests"),ht("restaurantId","==",t.uid)),b=await Ve(k);i(b.docs.map(w=>({id:w.id,...w.data()}))),o(!1)})()},[t]);const c=async(k,b)=>{await _e(J(z,"hiringRequests",k),{status:b}),i(w=>w.map(y=>y.id===k?{...y,status:b}:y)),n.success(b==="accepted"?"   ":"  ")},u=async k=>{await e.confirm(`    "${k.courierName}"`,{title:" ",confirmText:" ",cancelText:"",dangerous:!0})&&(await _e(J(z,"hiringRequests",k.id),{status:"terminated"}),i(w=>w.map(y=>y.id===k.id?{...y,status:"terminated"}:y)),n.success("  "))},d=async k=>{await e.confirm(`    "${k.courierName}" `,{title:" ",confirmText:" ",cancelText:"",dangerous:!0})&&(await Jn(J(z,"hiringRequests",k.id)),i(w=>w.filter(y=>y.id!==k.id)),n.success("  "))},h=async k=>{await _e(J(z,"hiringRequests",k.id),{status:"accepted"}),i(b=>b.map(w=>w.id===k.id?{...w,status:"accepted"}:w)),n.success("    ")},m=k=>{switch(k){case"pending":return{text:" ",color:"bg-yellow-100 text-yellow-700",icon:ns};case"accepted":return{text:" ",color:"bg-green-100 text-green-700",icon:Se};case"rejected":return{text:"",color:"bg-red-100 text-red-700",icon:Ws};case"terminated":return{text:"",color:"bg-gray-100 text-gray-700",icon:Fv};default:return{text:k,color:"bg-gray-100 text-gray-700",icon:ns}}};if(a)return r.jsx("div",{className:"text-center py-10",children:"  ..."});const p=s.filter(k=>k.status==="accepted"),v=s.filter(k=>k.status==="pending"),_=s.filter(k=>k.status==="terminated"),R=s.filter(k=>k.status==="rejected");return r.jsxs("div",{className:"py-6 space-y-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-6",children:"  "}),s.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-500 text-lg",children:"   "}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"     "})]}):r.jsxs(r.Fragment,{children:[p.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-green-600 mb-3 flex items-center gap-2",children:[r.jsx(Af,{className:"w-5 h-5"}),"  (",p.length,")"]}),r.jsx("div",{className:"space-y-3",children:p.map(k=>{const b=m(k.status);return r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-green-500",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-800",children:k.courierName}),r.jsxs("div",{className:`text-xs px-2 py-1 rounded-full inline-flex items-center gap-1 ${b.color}`,children:[r.jsx(b.icon,{className:"w-3 h-3"}),b.text]})]})]}),r.jsxs("button",{onClick:()=>u(k),className:`flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-xl 
                                     hover:bg-red-100 transition-all font-medium`,children:[r.jsx(p3,{className:"w-4 h-4"}),""]})]})},k.id)})})]}),v.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-yellow-600 mb-3 flex items-center gap-2",children:[r.jsx(ns,{className:"w-5 h-5"}),"  (",v.length,")"]}),r.jsx("div",{className:"space-y-3",children:v.map(k=>r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-yellow-500",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-800",children:k.courierName}),r.jsx("div",{className:"text-xs text-yellow-600",children:"  "})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>c(k.id,"accepted"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-green-500 text-white hover:bg-green-600 transition-all font-medium",children:[r.jsx(Af,{className:"w-4 h-4"}),""]}),r.jsxs("button",{onClick:()=>c(k.id,"rejected"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-red-500 text-white hover:bg-red-600 transition-all font-medium",children:[r.jsx(Ws,{className:"w-4 h-4"}),""]})]})]})},k.id))})]}),_.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-gray-500 mb-3 flex items-center gap-2",children:[r.jsx(Fv,{className:"w-5 h-5"})," (",_.length,")"]}),r.jsx("div",{className:"space-y-3",children:_.map(k=>r.jsx("div",{className:"bg-gray-50 rounded-2xl shadow p-4 border-r-4 border-gray-400 opacity-75",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-600",children:k.courierName}),r.jsx("div",{className:"text-xs text-gray-500",children:""})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>h(k),className:`flex items-center gap-1 px-3 py-2 bg-green-100 text-green-600 rounded-xl 
                                     hover:bg-green-200 transition-all text-sm font-medium`,children:[r.jsx(Af,{className:"w-4 h-4"})," "]}),r.jsxs("button",{onClick:()=>d(k),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                     hover:bg-red-200 transition-all text-sm font-medium`,children:[r.jsx(rn,{className:"w-4 h-4"}),""]})]})]})},k.id))})]}),R.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-red-500 mb-3 flex items-center gap-2",children:[r.jsx(Ws,{className:"w-5 h-5"})," (",R.length,")"]}),r.jsx("div",{className:"space-y-3",children:R.map(k=>r.jsx("div",{className:"bg-red-50 rounded-2xl shadow p-4 border-r-4 border-red-400 opacity-75",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-600",children:k.courierName}),r.jsx("div",{className:"text-xs text-red-500",children:""})]})]}),r.jsxs("button",{onClick:()=>d(k),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                   hover:bg-red-200 transition-all text-sm font-medium`,children:[r.jsx(rn,{className:"w-4 h-4"}),""]})]})},k.id))})]})]})]})},lD=()=>{const{user:t}=We(),e=kn(),n=Bn(),[s,i]=I.useState("free"),[a,o]=I.useState(!0),[c,u]=I.useState(!1),[d,h]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t)try{const _=await tt(J(z,"restaurants",t.uid));if(_.exists()){const R=_.data();i((R==null?void 0:R.packageType)||"free")}}catch(_){console.error("   :",_)}finally{o(!1)}})()},[t]);const m=async()=>{if(!t)return;if(s==="free"){e.info("     ");return}if(await n.confirm("         .",{title:"   ",confirmText:"  ",cancelText:""})){h(!0);try{await _e(J(z,"restaurants",t.uid),{packageType:"free",packageRequest:null,updatedAt:le()}),i("free"),e.success("   ")}catch(_){console.error(":",_),e.error("    ")}finally{h(!1)}}},p=async()=>{if(!(!t||!await n.confirm("        .   ",{title:"    ",confirmText:"  ",cancelText:""}))){u(!0);try{await _e(J(z,"restaurants",t.uid),{packageRequest:"premium",packageRequestedAt:le(),updatedAt:le()}),e.success("   !    ")}catch(_){console.error("   :",_),e.error("    ")}finally{u(!1)}}};return a?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:" ..."})]})}):r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-amber-100 to-yellow-100 px-5 py-2.5 rounded-full mb-4 shadow-sm",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsx("span",{className:"text-amber-700 font-bold text-lg",children:"  "})]}),r.jsx("h1",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-3",children:"   "}),r.jsx("p",{className:"text-gray-600 max-w-lg mx-auto",children:"              "})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${s==="free"?"ring-4 ring-green-400 shadow-2xl":"shadow-lg hover:shadow-xl"}`,children:[s==="free"&&r.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[r.jsx(Mn,{className:"w-4 h-4"})," "]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-6 md:p-8 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(Cf,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-black text-gray-900",children:" "}),r.jsx("p",{className:"text-green-600 font-semibold",children:"   "})]})]}),r.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center",children:[r.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[r.jsx("span",{className:"text-5xl font-black text-gray-900",children:"0"}),r.jsx("span",{className:"text-xl text-gray-600",children:"."})]}),r.jsx("p",{className:"text-green-600 font-medium mt-1",children:" "})]}),r.jsxs("div",{className:"space-y-4 flex-1",children:[r.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(m1,{className:"w-5 h-5 text-amber-500"})," :"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(oi,{icon:r.jsx(l1,{className:"w-5 h-5"}),title:"  ",desc:"     ",included:!0}),r.jsx(oi,{icon:r.jsx(Yl,{className:"w-5 h-5"}),title:" ",desc:"    ",included:!0}),r.jsx(oi,{icon:r.jsx(gx,{className:"w-5 h-5"}),title:"  ",desc:"    ",included:!0})]})]}),r.jsx("div",{className:"mt-6",children:s==="free"?r.jsxs("div",{className:"bg-green-100 text-green-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[r.jsx(Mn,{className:"w-5 h-5"}),"    "]}):r.jsx("button",{onClick:m,disabled:d,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Cf,{className:"w-6 h-6"}),"  ",r.jsx(lp,{className:"w-5 h-5"})]})})})]})]}),r.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${s==="premium"?"ring-4 ring-amber-400 shadow-2xl":"shadow-lg hover:shadow-xl hover:scale-[1.01]"}`,children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-amber-500 py-2 text-center z-10",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-white font-bold",children:[r.jsx(Sn,{className:"w-5 h-5"}),r.jsx("span",{children:" "}),r.jsx(Sn,{className:"w-5 h-5"})]})}),s==="premium"&&r.jsxs("div",{className:"absolute top-12 right-4 bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[r.jsx(Sn,{className:"w-4 h-4"})," "]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-6 md:p-8 pt-14 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 via-yellow-400 to-orange-400 rounded-2xl flex items-center justify-center shadow-lg relative",children:[r.jsx(Sn,{className:"w-8 h-8 text-white"}),r.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow",children:r.jsx(Un,{className:"w-4 h-4 text-amber-500"})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-black text-gray-900",children:" "}),r.jsx("p",{className:"text-amber-600 font-semibold",children:"  "})]})]}),r.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-400/10 via-yellow-400/10 to-orange-400/10"}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[r.jsx("span",{className:"text-5xl font-black bg-gradient-to-r from-amber-600 to-orange-500 bg-clip-text text-transparent",children:"45"}),r.jsx("span",{className:"text-xl text-gray-600",children:"."})]}),r.jsx("p",{className:"text-amber-600 font-medium mt-1",children:" "})]})]}),r.jsxs("div",{className:"space-y-4 flex-1",children:[r.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(Sn,{className:"w-5 h-5 text-amber-500"}),"     :"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(oi,{icon:r.jsx(c3,{className:"w-5 h-5"}),title:"   ",desc:"      ",included:!0,premium:!0}),r.jsx(oi,{icon:r.jsx(zu,{className:"w-5 h-5"}),title:"  ",desc:"    ",included:!0,premium:!0}),r.jsx(oi,{icon:r.jsx(Dd,{className:"w-5 h-5"}),title:"   ",desc:"     ",included:!0,premium:!0}),r.jsx(oi,{icon:r.jsx(RP,{className:"w-5 h-5"}),title:" ",desc:"     ",included:!0,premium:!0})]})]}),r.jsx("div",{className:"mt-6",children:s==="premium"?r.jsxs("div",{className:"bg-amber-100 text-amber-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[r.jsx(Sn,{className:"w-5 h-5"}),"    "]}):r.jsxs("button",{onClick:p,disabled:c,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 text-white font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 relative overflow-hidden group",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Sn,{className:"w-6 h-6"}),"   ",r.jsx(lp,{className:"w-5 h-5"})]})]})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 px-6 py-4",children:r.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[r.jsx(Un,{className:"w-5 h-5 text-amber-400"}),"   "]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),r.jsx("th",{className:"px-6 py-4 text-center font-bold text-green-600",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Cf,{className:"w-5 h-5"}),""]})}),r.jsx("th",{className:"px-6 py-4 text-center font-bold text-amber-600",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Sn,{className:"w-5 h-5"}),""]})})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100",children:[r.jsx(li,{label:"  ",free:!0,premium:!0}),r.jsx(li,{label:" ",free:!0,premium:!0}),r.jsx(li,{label:"  ",free:!0,premium:!0}),r.jsx(li,{label:"   ",premium:!0}),r.jsx(li,{label:"  ",premium:!0}),r.jsx(li,{label:"   ",premium:!0}),r.jsx(li,{label:" ",premium:!0})]})]})})]}),r.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 text-center",children:r.jsxs("p",{className:"text-gray-600",children:[r.jsx("span",{className:"font-bold text-sky-600",children:" :"})," ","       .     ."]})})]})},oi=({icon:t,title:e,desc:n,included:s,premium:i})=>r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-xl transition ${s?i?"bg-gradient-to-r from-amber-100/50 to-yellow-100/50":"bg-white/50":"opacity-50"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${s?i?"bg-gradient-to-br from-amber-400 to-orange-400 text-white":"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:t}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:`font-bold ${s?"text-gray-800":"text-gray-400"}`,children:e}),i&&r.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-400 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:""})]}),r.jsx("p",{className:`text-sm ${s?"text-gray-500":"text-gray-400"}`,children:n})]}),s&&r.jsx(Mn,{className:`w-5 h-5 flex-shrink-0 ${i?"text-amber-500":"text-green-500"}`})]}),li=({label:t,free:e,premium:n})=>r.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[r.jsx("td",{className:"px-6 py-4 text-gray-700 font-medium",children:t}),r.jsx("td",{className:"px-6 py-4 text-center",children:e?r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-green-100 rounded-full",children:r.jsx(Mn,{className:"w-5 h-5 text-green-600"})}):r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:r.jsx("span",{className:"text-gray-400",children:""})})}),r.jsx("td",{className:"px-6 py-4 text-center",children:n?r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-amber-100 rounded-full",children:r.jsx(Mn,{className:"w-5 h-5 text-amber-600"})}):r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:r.jsx("span",{className:"text-gray-400",children:""})})})]}),Of=5,bu=24,cD=()=>{const{user:t}=We(),e=kn(),n=Bn(),[s,i]=I.useState([]),[a,o]=I.useState(!0),[c,u]=I.useState(!1),[d,h]=I.useState(!1),[m,p]=I.useState(0),v=I.useRef(null),[_,R]=I.useState({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""});I.useEffect(()=>{t&&k()},[t]);const k=async()=>{if(t)try{const C=at(he(z,"promotions"),ht("ownerId","==",t.uid)),N=(await Ve(C)).docs.map(x=>{var E,T,P,L;return{id:x.id,...x.data(),expiresAt:(T=(E=x.data().expiresAt)==null?void 0:E.toDate)==null?void 0:T.call(E),createdAt:(L=(P=x.data().createdAt)==null?void 0:P.toDate)==null?void 0:L.call(P)}});N.sort((x,E)=>{var T,P;return(((T=E.createdAt)==null?void 0:T.getTime())||0)-(((P=x.createdAt)==null?void 0:P.getTime())||0)}),i(N)}catch(C){e.error("   "),console.error(C)}finally{o(!1)}},b=C=>C.expiresAt?new Date>new Date(C.expiresAt):!1,w=C=>{var T;const O=(T=C.target.files)==null?void 0:T[0];if(!O)return;const N=O.type.startsWith("image/"),x=O.type.startsWith("video/");if(!N&&!x){e.warning("    ");return}const E=x?50*1024*1024:10*1024*1024;if(O.size>E){e.warning(x?"       50 ":"       10 ");return}R({..._,type:x?"video":"image",mediaFile:O,mediaPreview:URL.createObjectURL(O)})},y=async C=>{if(C.preventDefault(),!!t){if(_.type!=="text"&&!_.mediaFile){e.warning("    ");return}if(!_.title.trim()&&!_.description.trim()&&!_.mediaFile){e.warning("   ");return}try{h(!0);let O="";if(_.mediaFile){const x=_.mediaFile.name.replace(/\s+/g,"_").slice(-60),E=`promotions/${t.uid}_${Date.now()}_${x}`,T=Xa(op,E),P=fx(T,_.mediaFile);await new Promise((L,D)=>{P.on("state_changed",ae=>{const V=Math.round(ae.bytesTransferred/ae.totalBytes*100);p(V)},D,async()=>{O=await Qa(P.snapshot.ref),L()})})}const N=new Date;N.setHours(N.getHours()+bu),await ts(he(z,"promotions"),{ownerId:t.uid,restaurantId:t.uid,type:_.type,title:_.title.trim(),description:_.description.trim(),mediaUrl:O,isActive:!0,isPaid:!0,price:Of,duration:bu,viewsCount:0,expiresAt:it.fromDate(N),createdAt:le(),updatedAt:le()}),e.success(`  !    ${bu} `),R({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""}),u(!1),p(0),k()}catch(O){e.error("    "),console.error(O)}finally{h(!1)}}},j=async C=>{if(await n.confirm("    ",{dangerous:!0}))try{await Jn(J(z,"promotions",C)),e.success("  "),k()}catch{e.error(" ")}};return a?r.jsxs("div",{className:"flex items-center justify-center h-96",children:[r.jsx(pn,{className:"w-6 h-6 animate-spin ml-2"})," ..."]}):r.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4 space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:r.jsx(Ni,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" "}),r.jsx("p",{className:"text-gray-500 mt-2",children:"      "})]}),r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-4 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3",children:[r.jsx(Un,{className:"w-5 h-5 text-purple-500"}),r.jsxs("span",{className:"text-lg font-bold text-purple-700",children:[Of," .   ",bu," "]}),r.jsx(Un,{className:"w-5 h-5 text-purple-500"})]}),r.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"       "})]}),!c&&r.jsxs("button",{onClick:()=>u(!0),className:"w-full py-4 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[r.jsx(Nc,{className:"w-6 h-6"}),"  "]}),c&&r.jsxs("form",{onSubmit:y,className:"bg-white rounded-2xl shadow-xl p-6 space-y-4",children:[r.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:"  "}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>R({..._,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${_.type==="text"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[r.jsx(gx,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>{var C;R({..._,type:"image"}),(C=v.current)==null||C.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${_.type==="image"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[r.jsx(u1,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>{var C;R({..._,type:"video"}),(C=v.current)==null||C.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${_.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[r.jsx(j3,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:""})]})]})]}),r.jsx("input",{type:"file",ref:v,accept:"image/*,video/*",onChange:w,className:"hidden"}),_.mediaPreview&&r.jsxs("div",{className:"relative",children:[_.type==="video"?r.jsx("video",{src:_.mediaPreview,controls:!0,className:"w-full h-48 object-cover rounded-xl"}):r.jsx("img",{src:_.mediaPreview,alt:"",className:"w-full h-48 object-cover rounded-xl"}),r.jsx("button",{type:"button",onClick:()=>R({..._,mediaFile:null,mediaPreview:"",type:"text"}),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full",children:r.jsx(Ws,{className:"w-4 h-4"})})]}),_.type!=="text"&&!_.mediaPreview&&r.jsxs("button",{type:"button",onClick:()=>{var C;return(C=v.current)==null?void 0:C.click()},className:"w-full py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-purple-400 transition flex items-center justify-center gap-2",children:[r.jsx(p1,{className:"w-5 h-5"})," ",_.type==="video"?"":""]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),r.jsx("input",{type:"text",value:_.title,onChange:C=>R({..._,title:C.target.value}),placeholder:":   !",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"  "}),r.jsx("textarea",{value:_.description,onChange:C=>R({..._,description:C.target.value}),placeholder:"   ...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),d&&m>0&&r.jsx("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"bg-purple-500 h-full transition-all",style:{width:`${m}%`}})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",disabled:d,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:d?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ni,{className:"w-5 h-5"}),"  (",Of," .)"]})}),r.jsx("button",{type:"button",onClick:()=>{u(!1),R({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""})},className:"px-4 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-medium",children:""})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"font-bold text-lg text-gray-800",children:""}),s.length===0?r.jsxs("div",{className:"text-center py-10 text-gray-400",children:[r.jsx(Ni,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"    "})]}):s.map(C=>r.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden ${b(C)?"opacity-60":""}`,children:[C.mediaUrl&&(C.type==="video"?r.jsx("video",{src:C.mediaUrl,controls:!0,className:"w-full h-48 object-cover"}):r.jsx("img",{src:C.mediaUrl,alt:C.title,className:"w-full h-48 object-cover"})),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b(C)?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-500 text-xs font-medium rounded-full",children:[r.jsx(Ws,{className:"w-3 h-3"})," "]}):C.isActive?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-600 text-xs font-medium rounded-full",children:[r.jsx(Se,{className:"w-3 h-3"})," "]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-600 text-xs font-medium rounded-full",children:[r.jsx(ns,{className:"w-3 h-3"}),"  "]}),r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-600 text-xs font-medium rounded-full",children:[r.jsx(l1,{className:"w-3 h-3"})," ",C.viewsCount," "]})]}),C.title&&r.jsx("h3",{className:"font-bold text-gray-800",children:C.title}),C.description&&r.jsx("p",{className:"text-gray-600 text-sm mt-1",children:C.description}),r.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[r.jsxs("span",{className:"text-xs text-gray-400",children:[C.expiresAt&&!b(C)&&r.jsxs(r.Fragment,{children:[": ",new Date(C.expiresAt).toLocaleString("ar-SA")]}),b(C)&&"  "]}),r.jsx("button",{onClick:()=>j(C.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",children:r.jsx(rn,{className:"w-4 h-4"})})]})]})]},C.id))]}),r.jsxs(je,{to:"/owner",className:"flex items-center justify-center gap-2 text-sky-600 hover:text-sky-700 py-4",children:[r.jsx(bc,{className:"w-5 h-5"}),"  "]})]})},uD=()=>{const{user:t}=We(),e=Xt(),[n,s]=I.useState([]),[i,a]=I.useState([]);I.useEffect(()=>{const u=at(he(z,"orders"),ht("status","in",["ready"]),Ns("createdAt","desc")),d=tr(u,p=>s(p.docs.map(v=>({id:v.id,...v.data()})))),h=at(he(z,"orders"),ht("courierId","==",(t==null?void 0:t.uid)||""),Ns("createdAt","desc")),m=tr(h,p=>a(p.docs.map(v=>({id:v.id,...v.data()}))));return()=>{d(),m()}},[t==null?void 0:t.uid]);const o=async u=>{t&&await _e(J(z,"orders",u),{courierId:t.uid,status:"out_for_delivery",updatedAt:le()})},c=async u=>{await _e(J(z,"orders",u),{status:"delivered",updatedAt:le()})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-2xl p-4 text-white shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(_n,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm opacity-90",children:" "})]}),r.jsx("div",{className:"text-3xl font-bold",children:n.length})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ss,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm opacity-90",children:" "})]}),r.jsx("div",{className:"text-3xl font-bold",children:i.filter(u=>u.status!=="delivered").length})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:r.jsx(_n,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h2",{className:"font-bold text-lg",children:"   "})]}),r.jsxs("div",{className:"space-y-3",children:[n.map(u=>{var d,h;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 flex items-center justify-between",children:[r.jsxs("span",{className:"text-white font-bold",children:["#",u.id.slice(-6)]}),r.jsx("span",{className:"text-white/90 text-sm",children:u.restaurantName||""})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[r.jsx(Nn,{className:"w-4 h-4"}),r.jsx("span",{className:"truncate",children:u.address})]}),r.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[r.jsx(Dv,{className:"w-5 h-5"}),r.jsxs("span",{children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]}),r.jsxs("button",{onClick:()=>o(u.id),className:`w-full py-3 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 
                               text-white font-bold flex items-center justify-center gap-2
                               hover:from-gray-900 hover:to-black transition-all shadow-lg hover:shadow-xl`,children:[r.jsx(ss,{className:"w-5 h-5"}),r.jsx("span",{children:"  "})]})]})]},u.id)}),n.length===0&&r.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl",children:[r.jsx("div",{className:"text-5xl mb-3",children:""}),r.jsx("p",{className:"text-gray-500",children:"    "}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"    "})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:r.jsx(Ya,{className:"w-5 h-5 text-green-600"})}),r.jsx("h2",{className:"font-bold text-lg",children:" "})]}),r.jsxs("div",{className:"space-y-3",children:[i.filter(u=>u.status!=="delivered").map(u=>{var d,h;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-blue-500 px-4 py-2 flex items-center justify-between",children:[r.jsxs("span",{className:"text-white font-bold",children:["#",u.id.slice(-6)]}),r.jsxs("div",{className:"flex items-center gap-1 text-white/90 text-sm",children:[r.jsx(ns,{className:"w-3 h-3"}),r.jsx("span",{children:" "})]})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[r.jsx(Nn,{className:"w-4 h-4"}),r.jsx("span",{className:"truncate",children:u.address})]}),r.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[r.jsx(Dv,{className:"w-5 h-5"}),r.jsxs("span",{children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>e(`/chat?orderId=${u.id}`),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-primary to-accent 
                                 text-white font-bold flex items-center justify-center gap-2
                                 hover:shadow-lg transition-all`,children:[r.jsx(Sh,{className:"w-5 h-5"}),r.jsx("span",{children:" "})]}),r.jsxs("button",{onClick:()=>c(u.id),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 
                                 text-white font-bold flex items-center justify-center gap-2
                                 hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg hover:shadow-xl`,children:[r.jsx(Se,{className:"w-5 h-5"}),r.jsx("span",{children:"  "})]})]})]})]},u.id)}),i.filter(u=>u.status!=="delivered").length===0&&r.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl",children:[r.jsx("div",{className:"text-5xl mb-3",children:""}),r.jsx("p",{className:"text-gray-500",children:"    "}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"    "})]})]})]})]}),i.filter(u=>u.status==="delivered").length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Un,{className:"w-5 h-5 text-yellow-500"}),r.jsx("h3",{className:"font-bold text-gray-700",children:"  "})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3",children:i.filter(u=>u.status==="delivered").slice(0,6).map(u=>{var d,h;return r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"font-bold text-green-700",children:["#",u.id.slice(-6)]}),r.jsxs("span",{className:"text-green-600 font-bold",children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]})},u.id)})})]})]})},dD=()=>{const{user:t}=We(),e=Bn(),[n,s]=I.useState([]),[i,a]=I.useState({}),[o,c]=I.useState(!0),[u,d]=I.useState(null);I.useEffect(()=>{if(!t)return;(async()=>{const v=(await Ve(he(z,"restaurants"))).docs.map(b=>({id:b.id,...b.data()}));s(v);const _=at(he(z,"hiringRequests"),ht("courierId","==",t.uid)),R=await Ve(_),k={};R.docs.forEach(b=>{const w=b.data();k[w.restaurantId]={restaurantId:w.restaurantId,status:w.status}}),a(k),c(!1)})()},[t]);const h=async m=>{if(!t){e.warning("  ");return}d(m.id),await ts(he(z,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"",restaurantId:m.id,restaurantName:m.name,status:"pending",createdAt:le()}),a(p=>({...p,[m.id]:{restaurantId:m.id,status:"pending"}})),d(null)};return o?r.jsx("div",{className:"text-center py-10 text-gray-300",children:"  ..."}):r.jsxs("div",{className:"py-8",children:[r.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[r.jsx(SP,{className:"w-7 h-7 text-yellow-400"})," "]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(m=>{const p=i[m.id];return r.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[m.logoUrl?r.jsx("img",{src:m.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):r.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:""}),r.jsx("h3",{className:"font-bold text-lg mb-2",children:m.name}),p?r.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${p.status==="pending"?"bg-gray-500 text-white":p.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[p.status==="pending"&&r.jsx(ns,{className:"w-4 h-4"}),p.status==="accepted"&&r.jsx(WP,{className:"w-4 h-4"}),p.status==="rejected"&&r.jsx(Ws,{className:"w-4 h-4"}),p.status==="pending"?" ":p.status==="accepted"?"  ":" "]}):r.jsx("button",{disabled:u===m.id,onClick:()=>h(m),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:u===m.id?"  ...":"  "})]},m.id)})})]})},hD=[{text:"  ",emoji:""},{text:" ! ",emoji:""},{text:"  ",emoji:""},{text:"  ",emoji:""},{text:" ",emoji:""},{text:"! ",emoji:""}],fD=[{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:"    ",emoji:""},{text:"! ",emoji:""},{text:" ",emoji:""}],mD=[{text:"  ! ",emoji:""},{text:"! ",emoji:""},{text:"  ",emoji:""},{text:"   ",emoji:""},{text:"  ",emoji:""},{text:" ! ",emoji:""}],pD=[{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:"   ",emoji:""}],gD=["","","","","","","","","","","",""],xD=()=>{const[t]=mb(),e=t.get("orderId"),n=Xt(),{user:s,role:i}=We(),a=kn(),[o,c]=I.useState(null),[u,d]=I.useState([]),[h,m]=I.useState(""),[p,v]=I.useState(!1),[_,R]=I.useState(!1),[k,b]=I.useState(""),w=I.useRef(null),y=i==="courier",j=i==="owner",C=i==="customer"||i==="admin",O=o&&!o.courierId&&o.restaurantId,x=y?mD:j?pD:C&&O?fD:hD;I.useEffect(()=>{if(!e)return;const $=tr(J(z,"orders",e),B=>{if(B.exists()){const F=B.data();c({id:B.id,status:F.status,address:F.address,total:F.total,customerId:F.customerId,courierId:F.courierId,restaurantId:F.restaurantId,restaurantName:F.restaurantName})}});return()=>$()},[e]),I.useEffect(()=>{if(!o)return;let $,B="customer";if(y||j?($=o.customerId,B="customer"):C&&(o.courierId?($=o.courierId,B="courier"):o.restaurantId&&($=o.restaurantId,B="restaurant")),!$){b(O?o.restaurantName||"":" ");return}B==="restaurant"?tt(J(z,"restaurants",$)).then(F=>{var X;F.exists()?b(((X=F.data())==null?void 0:X.name)||""):b(o.restaurantName||"")}):tt(J(z,"users",$)).then(F=>{var X;if(F.exists()){const se=B==="courier"?"":"";b(((X=F.data())==null?void 0:X.name)||se)}})},[o,y,j,C,O]),I.useEffect(()=>{if(!e)return;const $=at(he(z,"orders",e,"messages"),Ns("createdAt","asc")),B=tr($,F=>{d(F.docs.map(X=>({id:X.id,...X.data()})))});return()=>B()},[e]),I.useEffect(()=>{var $;($=w.current)==null||$.scrollIntoView({behavior:"smooth"})},[u]);const E=async $=>{if(!(!$.trim()||!s||!e)){v(!0);try{let B="customer";y?B="courier":j&&(B="owner"),await ts(he(z,"orders",e,"messages"),{text:$.trim(),senderId:s.uid,senderRole:B,createdAt:le()}),m(""),R(!1)}catch{a.error("  ")}v(!1)}},T=$=>{m(B=>B+$)},P=$=>$?$.toDate().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"",L=$=>({pending:{text:" ",color:"bg-yellow-500",emoji:""},accepted:{text:" ",color:"bg-blue-500",emoji:""},preparing:{text:" ",color:"bg-orange-500",emoji:""},ready:{text:"",color:"bg-purple-500",emoji:""},out_for_delivery:{text:" ",color:"bg-sky-500",emoji:""},delivered:{text:" ",color:"bg-green-500",emoji:""}})[$]||{text:$,color:"bg-gray-500",emoji:""},D=()=>y||j?"":O?"":"";if(!e)return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Sh,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"   "})]})});if(!o)return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:" ..."})]})});if(!((s==null?void 0:s.uid)===o.customerId||(s==null?void 0:s.uid)===o.courierId||(s==null?void 0:s.uid)===o.restaurantId))return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-500",children:"     "})]})});const V=L(o.status);return r.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] max-w-2xl mx-auto",children:[r.jsxs("div",{className:`bg-gradient-to-r ${O?"from-orange-500 via-amber-500 to-yellow-500":"from-primary via-sky-500 to-accent"} rounded-t-3xl p-4 shadow-luxury`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>n(-1),className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center hover:bg-white/30 transition-all",children:r.jsx(bc,{className:"w-5 h-5 text-white"})}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:D()})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-white text-lg",children:k||(O?"":y||j?"":"")}),r.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-sm",children:[r.jsx("span",{className:`w-2 h-2 rounded-full ${o.status==="delivered"?"bg-green-400":"bg-yellow-400 animate-pulse"}`}),r.jsxs("span",{children:[V.emoji," ",V.text]})]})]})]})}),O?r.jsx(Ut,{className:"w-6 h-6 text-white animate-pulse"}):r.jsx(Un,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]}),r.jsxs("div",{className:"mt-3 flex items-center gap-4 text-white/90 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(_n,{className:"w-4 h-4"}),r.jsxs("span",{children:["#",o.id.slice(-6)]})]}),o.restaurantName&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ut,{className:"w-4 h-4"}),r.jsx("span",{children:o.restaurantName})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Nn,{className:"w-4 h-4"}),r.jsx("span",{className:"truncate max-w-[150px]",children:o.address})]})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-sky-50 to-white p-4 space-y-3",children:[u.length===0&&r.jsxs("div",{className:"text-center py-10",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-500",children:"  !"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"  "})]}),u.map(($,B)=>{const F=$.senderId===(s==null?void 0:s.uid);return r.jsx("div",{className:`flex ${F?"justify-start":"justify-end"}`,children:r.jsxs("div",{className:`
                  max-w-[80%] rounded-2xl px-4 py-3 shadow-md
                  ${F?"bg-gradient-to-br from-primary to-sky-600 text-white rounded-br-sm":"bg-white text-gray-800 rounded-bl-sm border border-gray-100"}
                  transform transition-all duration-300 hover:scale-[1.02]
                `,children:[r.jsx("p",{className:"text-base leading-relaxed",children:$.text}),r.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${F?"text-white/70":"text-gray-400"}`,children:[r.jsx(ns,{className:"w-3 h-3"}),r.jsx("span",{children:P($.createdAt)}),F&&r.jsx(Pv,{className:"w-3 h-3 mr-1"})]})]})},$.id)}),r.jsx("div",{ref:w})]}),r.jsx("div",{className:"bg-white border-t border-gray-100 px-3 py-2",children:r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:x.map(($,B)=>r.jsx("button",{onClick:()=>E($.text),className:`flex-shrink-0 px-4 py-2 bg-gradient-to-r from-sky-50 to-blue-50 
                         rounded-full text-sm text-primary font-medium border border-sky-100
                         hover:from-sky-100 hover:to-blue-100 hover:shadow-md 
                         transition-all duration-200 active:scale-95`,children:$.text},B))})}),_&&r.jsx("div",{className:"bg-white border-t border-gray-100 px-4 py-3",children:r.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:gD.map(($,B)=>r.jsx("button",{onClick:()=>T($),className:`w-10 h-10 text-2xl hover:bg-gray-100 rounded-full 
                           transition-all duration-200 hover:scale-125 active:scale-95`,children:$},B))})}),r.jsx("div",{className:"bg-white border-t border-gray-200 p-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>R(!_),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all
                       ${_?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:r.jsx(Z6,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex-1 relative",children:r.jsx("input",{type:"text",value:h,onChange:$=>m($.target.value),onKeyPress:$=>$.key==="Enter"&&E(h),placeholder:" ...",className:`w-full px-5 py-3 bg-gray-100 rounded-full text-gray-800 
                         placeholder-gray-400 focus:outline-none focus:ring-2 
                         focus:ring-primary/50 focus:bg-white transition-all`})}),r.jsx("button",{onClick:()=>E(h),disabled:!h.trim()||p,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all
                       ${h.trim()?"bg-gradient-to-r from-primary to-accent text-white shadow-lg hover:shadow-xl hover:scale-105":"bg-gray-200 text-gray-400"}
                       disabled:opacity-50 active:scale-95`,children:r.jsx($6,{className:"w-5 h-5"})})]})}),o.status==="delivered"&&r.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-4 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[r.jsx(Pv,{className:"w-6 h-6"}),r.jsx("span",{className:"font-bold",children:"   ! "}),r.jsx(c1,{className:"w-5 h-5 text-red-300 animate-pulse"})]}),r.jsx("p",{className:"text-white/80 text-sm mt-1",children:"   "})]})]})},yD=()=>{const{user:t}=We(),e=kn(),n=Xt(),[s,i]=I.useState([]),[a,o]=I.useState(!0);I.useEffect(()=>{if(!t)return;const p=at(he(z,"notifications"),ht("recipientId","==",t.uid),Ns("createdAt","desc")),v=tr(p,_=>{const R=_.docs.map(k=>({id:k.id,...k.data()}));i(R),o(!1)},_=>{console.error("Error fetching notifications:",_),o(!1)});return()=>v()},[t]);const c=async p=>{try{await _e(J(z,"notifications",p),{read:!0})}catch(v){console.error("Error marking as read:",v)}},u=async()=>{const p=s.filter(v=>!v.read);try{await Promise.all(p.map(v=>_e(J(z,"notifications",v.id),{read:!0}))),e.success("   ")}catch{e.error("  ")}},d=async p=>{try{await Jn(J(z,"notifications",p)),e.success("  ")}catch{e.error("  ")}},h=p=>{if(!p)return"";const v=p.toDate(),R=new Date().getTime()-v.getTime(),k=Math.floor(R/6e4),b=Math.floor(R/36e5),w=Math.floor(R/864e5);return k<1?"":k<60?` ${k} `:b<24?` ${b} `:w<7?` ${w} `:v.toLocaleDateString("ar-SA")},m=s.filter(p=>!p.read).length;return a?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx(pn,{className:"w-8 h-8 animate-spin text-sky-500"})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[r.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:r.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[r.jsx(bc,{className:"w-5 h-5"}),""]}),r.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(Rd,{className:"w-6 h-6 text-sky-500"}),"",m>0&&r.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:m})]}),m>0&&r.jsx("button",{onClick:u,className:"text-sm text-sky-600 hover:text-sky-800",children:" "})]})})}),r.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:s.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx(Rd,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("p",{className:"text-gray-500",children:"  "})]}):r.jsx("div",{className:"space-y-3",children:s.map(p=>r.jsx("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition hover:shadow-md ${p.read?"border-gray-100":"border-sky-200 bg-sky-50/50"}`,onClick:()=>!p.read&&c(p.id),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-xl ${p.type==="license_reminder"?"bg-orange-100 text-orange-600":"bg-sky-100 text-sky-600"}`,children:r.jsx(xi,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:p.title}),r.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:h(p.createdAt)})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.message}),!p.read&&r.jsx("span",{className:"inline-block mt-2 text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded-full",children:""})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[!p.read&&r.jsx("button",{onClick:v=>{v.stopPropagation(),c(p.id)},className:"p-1.5 text-gray-400 hover:text-green-500 transition",title:" ",children:r.jsx(Mn,{className:"w-4 h-4"})}),r.jsx("button",{onClick:v=>{v.stopPropagation(),d(p.id)},className:"p-1.5 text-gray-400 hover:text-red-500 transition",title:"",children:r.jsx(rn,{className:"w-4 h-4"})})]})]})},p.id))})})]})},vD=()=>{var w,y;const{user:t,role:e}=We(),n=kn(),[s,i]=I.useState("dashboard"),[a,o]=I.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[c,u]=I.useState(0),[d,h]=I.useState(!0),[m,p]=I.useState(null),[v,_]=I.useState([]),[R,k]=I.useState("all");I.useEffect(()=>{t&&(async()=>{try{const C=(await Ve(he(z,"restaurants"))).size,N=(await Ve(he(z,"orders"))).docs.map(P=>({id:P.id,...P.data()})),x=N.length,E=N.filter(P=>P.status==="pending").length,T=N.reduce((P,L)=>P+(L.deliveryFee||0),0);try{const L=(await tt(J(z,"wallets",t.uid))).data();u((L==null?void 0:L.balance)||0)}catch{u(0)}try{const P=at(he(z,"tasks"),ht("assignedTo","==",t.uid)),D=(await Ve(P)).docs.map(ae=>({id:ae.id,...ae.data()}));_(D.sort((ae,V)=>{var $,B;return((($=V.createdAt)==null?void 0:$.seconds)||0)-(((B=ae.createdAt)==null?void 0:B.seconds)||0)}))}catch(P){console.error("   :",P)}o({totalRestaurants:C,totalOrders:x,totalEarnings:T,pendingOrders:E})}catch(j){console.error("   :",j)}finally{h(!1)}})()},[t]);const b=async(j,C)=>{try{const O={status:C,updatedAt:le()};C==="completed"&&(O.completedAt=le()),await _e(J(z,"tasks",j),O),_(N=>N.map(x=>x.id===j?{...x,status:C}:x)),n.success(C==="in_progress"?"  ":C==="completed"?"   ! ":"  ")}catch{n.error("   ")}};return I.useEffect(()=>{t&&(async()=>{try{const j=await tt(J(z,"users",t.uid));j.exists()&&p({uid:j.id,...j.data()})}catch(j){console.error("    :",j)}})()},[t]),d?r.jsx(De,{allow:["admin"],children:r.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:" ..."})}):r.jsx(De,{allow:["admin"],children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"  "}),r.jsx("p",{className:"text-gray-600 mt-2",children:"   ! "})]}),r.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[r.jsxs("button",{onClick:()=>i("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${s==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Sf,{className:"w-5 h-5"})," "]}),r.jsxs("button",{onClick:()=>i("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${s==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Rn,{className:"w-5 h-5"}),""]}),r.jsxs("button",{onClick:()=>i("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${s==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Pd,{className:"w-5 h-5"}),"",v.filter(j=>j.status==="pending"||j.status==="in_progress").length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:v.filter(j=>j.status==="pending"||j.status==="in_progress").length})]})]}),s==="profile"&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[r.jsx(Rn,{className:"w-6 h-6"}),""]}),m?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((w=m.name)==null?void 0:w.charAt(0))||((y=m.email)==null?void 0:y.charAt(0))||""}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m.name||" "}),r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:" "})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:m.email})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),r.jsx("p",{className:"font-semibold text-gray-900",children:e==="admin"?"":e})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:m.uid})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[c.toFixed(2)," ."]})]})]})]}),r.jsx(je,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"   "})]}):r.jsx("div",{className:"text-center py-8 text-gray-600",children:" ..."})]}),s==="tasks"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[r.jsx(Pd,{className:"w-6 h-6"})," "]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(j=>r.jsxs("button",{onClick:()=>k(j),className:`px-4 py-2 rounded-xl font-semibold transition ${R===j?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[j==="all"&&" ",j==="pending"&&"  ",j==="in_progress"&&"  ",j==="completed"&&" "]},j))}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.filter(j=>j.status==="pending").length}),r.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.filter(j=>j.status==="in_progress").length}),r.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),r.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.filter(j=>j.status==="completed").length}),r.jsx("p",{className:"text-sm text-green-700",children:""})]})]}),v.filter(j=>R==="all"||j.status===R).length===0?r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx("p",{className:"text-5xl mb-4",children:""}),r.jsxs("p",{className:"text-lg",children:["   ",R!=="all"&&"  "]}),r.jsx("p",{className:"text-sm mt-2",children:"      "})]}):r.jsx("div",{className:"space-y-4",children:v.filter(j=>R==="all"||j.status===R).map(j=>{var C,O,N;return r.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${j.status==="completed"?"bg-green-50 border-green-200":j.status==="in_progress"?"bg-blue-50 border-blue-200":j.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${j.priority==="high"?"bg-red-100 text-red-700":j.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:j.priority==="high"?" ":j.priority==="medium"?" ":" "}),r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${j.status==="pending"?"bg-yellow-100 text-yellow-700":j.status==="in_progress"?"bg-blue-100 text-blue-700":j.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[j.status==="pending"&&"  ",j.status==="in_progress"&&"  ",j.status==="completed"&&" ",j.status==="cancelled"&&" "]})]}),r.jsx("h3",{className:"font-bold text-lg text-gray-800",children:j.title}),j.description&&r.jsx("p",{className:"text-gray-600 mt-1",children:j.description}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[j.dueDate&&r.jsxs("span",{className:new Date(j.dueDate)<new Date&&j.status!=="completed"?"text-red-600 font-semibold":"",children:[" ",new Date(j.dueDate).toLocaleDateString("ar-SA"),new Date(j.dueDate)<new Date&&j.status!=="completed"&&" (!)"]}),r.jsxs("span",{children:[" ",((N=(O=(C=j.createdAt)==null?void 0:C.toDate)==null?void 0:O.call(C))==null?void 0:N.toLocaleDateString("ar-SA"))||" "]})]}),j.notes&&r.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:[" ",j.notes]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[j.status==="pending"&&r.jsx("button",{onClick:()=>b(j.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:" "}),j.status==="in_progress"&&r.jsxs("button",{onClick:()=>b(j.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[r.jsx(Se,{className:"w-4 h-4"}),""]}),j.status==="completed"&&r.jsx("span",{className:"text-green-600 font-semibold text-center",children:"  "})]})]})},j.id)})})]})}),s==="dashboard"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-90",children:" "}),r.jsxs("h2",{className:"text-3xl font-bold",children:[c.toFixed(2)," ."]}),r.jsx("p",{className:"text-sm opacity-75 mt-2",children:"   50       "})]}),r.jsx(dp,{className:"w-16 h-16 opacity-80"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:a.totalRestaurants})]}),r.jsx(a1,{className:"w-12 h-12 text-primary opacity-30"})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:a.totalOrders})]}),r.jsx(Od,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:a.pendingOrders})]}),r.jsx(Sf,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:a.totalEarnings.toFixed(2)})]}),r.jsx(Sf,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"   "}),r.jsx(je,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"     "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),r.jsx(je,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:""}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"       "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),r.jsx(je,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:" "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:[" : ",c.toFixed(2)," ."]}),r.jsx(je,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]})]}),r.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 p-6 rounded-lg",children:[r.jsx("h4",{className:"font-bold text-sky-900 mb-2",children:"  :"}),r.jsxs("ul",{className:"text-sky-800 text-sm space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"50 "}),"         "]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"1 "}),"     (     )"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"1.5 "}),"       "]}),r.jsx("li",{children:"        "})]})]})]})]})})},wD=()=>{const{user:t,role:e}=We(),n=kn(),s=Bn(),[i,a]=I.useState([]),[o,c]=I.useState(!0),[u,d]=I.useState(!1),[h,m]=I.useState(!1),[p,v]=I.useState(0),_=I.useRef(null),R=Ih(mn),[k,b]=I.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});I.useEffect(()=>{w()},[]);const w=async()=>{try{const E=(await Ve(he(z,"restaurants"))).docs.map(T=>({id:T.id,...T.data()}));a(E)}catch(x){n.error("   "),console.error(x)}finally{c(!1)}},y=async x=>{if(x.preventDefault(),!k.name.trim()){n.warning("  ");return}try{m(!0);let E="";if(k.logoFile){const L=k.logoFile.name.replace(/\s+/g,"_").slice(-60),D=`uploads/restaurant_${Date.now()}_${L}`,ae=Xa(R,D),V=fx(ae,k.logoFile,{contentType:k.logoFile.type||"image/jpeg"});await new Promise(($,B)=>{V.on("state_changed",F=>{const X=Math.round(F.bytesTransferred/F.totalBytes*100);v(X)},B,async()=>{E=await Qa(V.snapshot.ref),$()})})}const T=e==="admin",P=e==="developer";await ts(he(z,"restaurants"),{name:k.name,phone:k.phone,city:k.city,location:k.location,ownerId:"admin_"+Date.now(),email:(t==null?void 0:t.email)||"",logoUrl:E,createdAt:new Date,referredBy:T?t==null?void 0:t.uid:null,referrerType:T?"admin":P?"developer":null}),n.success("    "),T&&n.info("   75        "),b({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),d(!1),v(0),w()}catch(E){n.error("   "),console.error(E)}finally{m(!1)}},j=async x=>{if(await s.confirm("      ",{dangerous:!0,title:" "}))try{await Jn(J(z,"restaurants",x)),n.success("   "),w()}catch(T){n.error("   "),console.error(T)}},C=async x=>{const E=!x.isVerified;if(await s.confirm(E?`    "${x.name}"`:`     "${x.name}"`,{title:E?"  ":"  ",confirmText:E?" ":"  "}))try{await _e(J(z,"restaurants",x.id),{isVerified:E,verifiedAt:E?le():null,updatedAt:le()}),n.success(E?"   ":"  "),w()}catch(P){n.error(" "),console.error(P)}},O=async(x,E)=>{try{await _e(J(z,"restaurants",x.id),{sellerTier:E,tierUpdatedAt:le(),updatedAt:le()});const T={bronze:"",silver:"",gold:""};n.success(`    ${T[E]} `),w()}catch(T){n.error(" "),console.error(T)}},N=({tier:x})=>{switch(x){case"gold":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(Sn,{className:"w-3 h-3"})," Gold"]});case"silver":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold rounded-full shadow",children:[r.jsx(cp,{className:"w-3 h-3"})," Silver"]});default:return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-600 to-orange-600 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(zu,{className:"w-3 h-3"})," Bronze"]})}};return o?r.jsx(De,{allow:["admin","developer"],children:r.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):r.jsx(De,{allow:["admin","developer"],children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),r.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[r.jsx(Nc,{className:"w-5 h-5"}),"  "]})]}),u&&r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block font-semibold text-gray-700",children:" "}),r.jsxs("div",{className:"flex items-center gap-4",children:[k.logoPreview?r.jsx("img",{src:k.logoPreview,alt:" ",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):r.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:r.jsx(u1,{className:"w-8 h-8 text-gray-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("input",{ref:_,type:"file",accept:"image/*",className:"hidden",onChange:x=>{var T;const E=(T=x.target.files)==null?void 0:T[0];E&&b({...k,logoFile:E,logoPreview:URL.createObjectURL(E)})}}),r.jsxs("button",{type:"button",onClick:()=>{var x;return(x=_.current)==null?void 0:x.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[r.jsx(p1,{className:"w-4 h-4"}),k.logoFile?" ":" "]}),k.logoFile&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:k.logoFile.name})]})]}),h&&p>0&&r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${p}%`}})})]}),r.jsx("input",{type:"text",placeholder:" ",value:k.name,onChange:x=>b({...k,name:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsx("input",{type:"text",placeholder:" ",value:k.phone,onChange:x=>b({...k,phone:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsx("input",{type:"text",placeholder:"",value:k.city,onChange:x=>b({...k,city:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsx("textarea",{placeholder:" / ",value:k.location,onChange:x=>b({...k,location:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",disabled:h,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:h?` ... ${p}%`:" "}),r.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:" "})]})]})]}),r.jsx("div",{className:"grid gap-4",children:i.length===0?r.jsx("div",{className:"text-center text-gray-500 py-12",children:"    "}):i.map(x=>r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex gap-4",children:[x.logoUrl?r.jsx("img",{src:x.logoUrl,alt:x.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):r.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h3",{className:"text-xl font-bold text-primary",children:x.name}),x.isVerified&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[r.jsx(Se,{className:"w-3 h-3"})," "]}),r.jsx(N,{tier:x.sellerTier})]}),x.city&&r.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.city]}),x.phone&&r.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.phone]}),x.location&&r.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.location]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>C(x),className:`p-2.5 rounded-xl transition flex items-center gap-1 text-sm font-semibold ${x.isVerified?"bg-green-100 hover:bg-green-200 text-green-700":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:x.isVerified?" ":" ",children:[r.jsx(jc,{className:"w-4 h-4"}),x.isVerified?"":""]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{className:"p-2.5 rounded-xl bg-amber-100 hover:bg-amber-200 text-amber-700 transition flex items-center gap-1 text-sm font-semibold",children:[r.jsx(zu,{className:"w-4 h-4"}),"",r.jsx(o1,{className:"w-3 h-3"})]}),r.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white rounded-xl shadow-xl border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 min-w-[140px]",children:[r.jsxs("button",{onClick:()=>O(x,"bronze"),className:`w-full px-4 py-2.5 text-right hover:bg-amber-50 transition flex items-center gap-2 first:rounded-t-xl ${x.sellerTier==="bronze"||!x.sellerTier?"bg-amber-50":""}`,children:[r.jsx(zu,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"font-semibold",children:"Bronze"})]}),r.jsxs("button",{onClick:()=>O(x,"silver"),className:`w-full px-4 py-2.5 text-right hover:bg-gray-50 transition flex items-center gap-2 ${x.sellerTier==="silver"?"bg-gray-100":""}`,children:[r.jsx(cp,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"font-semibold",children:"Silver"})]}),r.jsxs("button",{onClick:()=>O(x,"gold"),className:`w-full px-4 py-2.5 text-right hover:bg-yellow-50 transition flex items-center gap-2 last:rounded-b-xl ${x.sellerTier==="gold"?"bg-yellow-50":""}`,children:[r.jsx(Sn,{className:"w-4 h-4 text-amber-500"}),r.jsx("span",{className:"font-semibold",children:"Gold"})]})]})]}),r.jsx("button",{onClick:()=>j(x.id),className:"p-2.5 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:" ",children:r.jsx(rn,{className:"w-4 h-4"})})]})]})},x.id))})]})})},Mf={pending:"  ",accepted:" ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "},_D=()=>{const t=kn(),[e,n]=I.useState([]),[s,i]=I.useState(!0),[a,o]=I.useState("all");I.useEffect(()=>{c()},[a]);const c=async()=>{try{let u;a==="all"?u=at(he(z,"orders"),Ns("createdAt","desc")):u=at(he(z,"orders"),ht("status","==",a),Ns("createdAt","desc"));const h=(await Ve(u)).docs.map(m=>({id:m.id,...m.data()}));n(h)}catch(u){t.error("   "),console.error(u)}finally{i(!1)}};return s?r.jsx(De,{allow:["admin","developer"],children:r.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):r.jsx(De,{allow:["admin","developer"],children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),r.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[r.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${a==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[" (",e.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(u=>{const d=e.filter(h=>h.status===u).length;return r.jsxs("button",{onClick:()=>o(u),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${a===u?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[Mf[u]," (",d,")"]},u)})]}),r.jsx("div",{className:"space-y-4",children:e.length===0?r.jsxs("div",{className:"text-center text-gray-500 py-12",children:["   ",a!=="all"&&` "${Mf[a]}"`]}):e.map(u=>{var d,h;return r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold",children:[" #",u.id.slice(-8)]}),r.jsx("p",{className:"text-gray-600 text-sm",children:u.createdAt?new Date(u.createdAt).toLocaleDateString("ar-SA"):""})]}),r.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${u.status==="pending"?"bg-yellow-500":u.status==="delivered"?"bg-green-600":u.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:Mf[u.status]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" ID"}),r.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[u.customerId.slice(0,12),"..."]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:""}),r.jsx("p",{className:"font-semibold text-gray-800",children:u.restaurantName||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:""}),r.jsx("p",{className:"text-sm text-gray-800",children:u.address})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:""}),r.jsxs("p",{className:"text-lg font-bold text-primary",children:[((d=u.total)==null?void 0:d.toFixed(2))||0," ."]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[r.jsx("p",{className:"font-semibold mb-2",children:":"}),r.jsx("div",{className:"space-y-1",children:(h=u.items)==null?void 0:h.map((m,p)=>r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsxs("span",{children:[m.name,"  ",m.qty]}),r.jsxs("span",{children:[(m.price*m.qty).toFixed(2)," ."]})]},p))})]})]},u.id)})})]})})},In={projectId:mn.options.projectId,authDomain:mn.options.authDomain,storageBucket:mn.options.storageBucket,messagingSenderId:mn.options.messagingSenderId,appId:mn.options.appId},bD=()=>{var na,sa,So,Co;const{user:t}=We(),e=kn(),n=Bn(),s=Ih(mn),[i,a]=I.useState("overview"),[o,c]=I.useState(!0),[u,d]=I.useState(!1),[h,m]=I.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[p,v]=I.useState({}),[_,R]=I.useState([]),[k,b]=I.useState([]),[w,y]=I.useState([]),[j,C]=I.useState([]),[O,N]=I.useState(!1),[x,E]=I.useState({}),[T,P]=I.useState(null),[L,D]=I.useState({}),[ae,V]=I.useState(!1),[$,B]=I.useState(null),[F,X]=I.useState({}),[se,be]=I.useState("all"),[ye,Le]=I.useState("all"),[At,zn]=I.useState(null),[on,ln]=I.useState(!1),[rr,Ec]=I.useState(""),[ir,Zr]=I.useState(""),[ks,zi]=I.useState(""),[qi,Hi]=I.useState(""),[ho,kc]=I.useState(!1),[fo,mo]=I.useState(!1),[os,po]=I.useState(""),[go,Wi]=I.useState(""),[Ts,xo]=I.useState(""),[ot,xt]=I.useState(""),[ei,yo]=I.useState(!1),[Ki,Tc]=I.useState(!1),[Tn,vo]=I.useState(""),[Gi,Qi]=I.useState(""),[Ic,Sc]=I.useState(""),[Xi,wo]=I.useState(""),[ls,ar]=I.useState(""),[or,Yi]=I.useState(""),[cs,_o]=I.useState(!1),[qn,Cc]=I.useState([]),[ti,Ji]=I.useState(!1),[ft,Zi]=I.useState(""),[lr,Is]=I.useState(""),[ea,bo]=I.useState(""),[Ss,No]=I.useState("medium"),[Ac,cr]=I.useState(""),[jo,ta]=I.useState(!1),[Hn,us]=I.useState("all"),[ur,Rc]=I.useState([]);t!=null&&t.email;const Eo=async()=>{if(!rr.trim()||!ks.trim()){e.warning("    ");return}if(ks.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${rr}
 ${ir||" "}

:         .`,{title:"  "})){kc(!0);try{const W=(await fl(On,rr.trim(),ks)).user.uid;await fn(J(z,"users",W),{email:rr.trim(),name:ir.trim()||" ",phone:qi.trim()||"",role:"admin",createdAt:le()}),await fn(J(z,"wallets",W),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:le()}),e.success("     "),e.info("        "),Ec(""),Zr(""),zi(""),Hi(""),ln(!1)}catch(H){console.error("   :",H),H.code==="auth/email-already-in-use"?e.error("   "):H.code==="auth/invalid-email"?e.error("   "):H.code==="auth/weak-password"?e.error("   "):e.error("  : "+(H.message||"  "))}finally{kc(!1)}}},ko=async()=>{if(!os.trim()||!Ts.trim()){e.warning("    ");return}if(Ts.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${os}
 ${go||" "}
 ${ot||" "}`,{title:"  "})){yo(!0);try{const W=(await fl(On,os.trim(),Ts)).user.uid;await fn(J(z,"users",W),{email:os.trim(),name:go.trim()||" ",phone:ot.trim()||"",role:"courier",createdAt:le()}),e.success("     "),e.info("        "),po(""),Wi(""),xo(""),xt(""),mo(!1)}catch(H){console.error("   :",H),H.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(H.message||"  "))}finally{yo(!1)}}},Pc=async()=>{if(!Tn.trim()){e.warning("  ");return}if(!ls.trim()||!or.trim()){e.warning("   ");return}if(await n.confirm(`   :

 ${Tn}
 ${Gi||" "}
  : ${ls}`,{title:"  "})){_o(!0);try{const W=(await fl(On,ls.trim(),or)).user.uid;await fn(J(z,"users",W),{email:ls.trim(),name:Tn.trim()+" - ",role:"owner",createdAt:le()}),await fn(J(z,"restaurants",W),{name:Tn.trim(),ownerId:W,email:Xi.trim()||ls.trim(),phone:Ic.trim()||"",city:Gi.trim()||"",referredBy:t==null?void 0:t.uid,referrerType:"developer",createdAt:le()}),e.success("      "),e.info("        "),vo(""),Qi(""),Sc(""),wo(""),ar(""),Yi(""),Tc(!1)}catch(H){console.error("   :",H),H.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(H.message||"  "))}finally{_o(!1)}}},Dc=()=>{const A=new Date,H=new Date(A.getFullYear(),A.getMonth(),A.getDate()),W=new Date(H.getTime()-7*24*60*60*1e3),re=new Date(H.getTime()-30*24*60*60*1e3),ue=w.filter(pe=>{var de,zt;return(((zt=(de=pe.createdAt)==null?void 0:de.toDate)==null?void 0:zt.call(de))||new Date(0))>=H&&pe.status!=="cancelled"}),ge=w.filter(pe=>{var de,zt;return(((zt=(de=pe.createdAt)==null?void 0:de.toDate)==null?void 0:zt.call(de))||new Date(0))>=W&&pe.status!=="cancelled"}),Oe=w.filter(pe=>{var de,zt;return(((zt=(de=pe.createdAt)==null?void 0:de.toDate)==null?void 0:zt.call(de))||new Date(0))>=re&&pe.status!=="cancelled"}),cn=w.filter(pe=>pe.status==="delivered");return{todayRevenue:ue.reduce((pe,Re)=>pe+(Re.total||0),0),todayOrders:ue.length,todayPlatformFee:ue.reduce((pe,Re)=>pe+(Re.platformFee||0),0),weekRevenue:ge.reduce((pe,Re)=>pe+(Re.total||0),0),weekOrders:ge.length,weekPlatformFee:ge.reduce((pe,Re)=>pe+(Re.platformFee||0),0),monthRevenue:Oe.reduce((pe,Re)=>pe+(Re.total||0),0),monthOrders:Oe.length,monthPlatformFee:Oe.reduce((pe,Re)=>pe+(Re.platformFee||0),0),totalRevenue:cn.reduce((pe,Re)=>pe+(Re.total||0),0),totalPlatformFee:cn.reduce((pe,Re)=>pe+(Re.platformFee||0),0),totalAdminCommission:cn.reduce((pe,Re)=>pe+(Re.adminCommission||0),0)}},mt=async()=>{try{const[A,H,W,re,ue]=await Promise.all([Ve(he(z,"users")),Ve(he(z,"restaurants")),Ve(he(z,"menuItems")),Ve(he(z,"orders")),Ve(he(z,"wallets"))]);let ge={docs:[]};try{ge=await Ve(he(z,"tasks"))}catch{console.log("   ")}let Oe={docs:[]};try{Oe=await Ve(he(z,"promotions"))}catch{console.log("   ")}const cn=Oe.docs.map(oe=>({id:oe.id,...oe.data()}));Rc(cn);const pe=A.docs.map(oe=>({uid:oe.id,...oe.data()}));R(pe);const Re=H.docs.map(oe=>({id:oe.id,...oe.data()}));b(Re);const de=re.docs.map(oe=>({id:oe.id,...oe.data()}));y(de);const zt=ge.docs.map(oe=>({id:oe.id,...oe.data()}));Cc(zt.sort((oe,un)=>{var dr,ii;return(((dr=un.createdAt)==null?void 0:dr.seconds)||0)-(((ii=oe.createdAt)==null?void 0:ii.seconds)||0)}));const As={};ue.docs.forEach(oe=>{As[oe.id]=oe.data()});const ri=As.app_earnings||{balance:0,totalEarnings:0},Fc=pe.filter(oe=>oe.role==="admin"),Uc=pe.filter(oe=>oe.role==="courier"),Ah=pe.filter(oe=>oe.role==="customer"),Rh=pe.filter(oe=>oe.role==="owner"),Ph=Fc.map(oe=>{const un=Re.filter(ii=>ii.referredBy===oe.uid),dr=As[oe.uid]||{balance:0,totalEarnings:0};return{uid:oe.uid,email:oe.email,name:oe.name,walletBalance:dr.balance||0,totalEarnings:dr.totalEarnings||0,restaurantsCount:un.length,restaurants:un}});C(Ph),m({users:pe.length,restaurants:Re.length,menuItems:W.size,orders:de.length,pendingOrders:de.filter(oe=>oe.status==="pending").length,deliveredOrders:de.filter(oe=>oe.status==="delivered").length,admins:Fc.length,couriers:Uc.length,customers:Ah.length,owners:Rh.length,totalAppEarnings:ri.totalEarnings||0});const $c=await tt(J(z,"settings","general"));if($c.exists()){const oe=$c.data();v(oe),E(oe)}else{const oe={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};v(oe),E(oe)}}catch(A){console.error("   :",A),e.error("  ")}finally{c(!1),d(!1)}};I.useEffect(()=>{mt()},[]);const ni=()=>{d(!0),mt(),e.info("  ...")},Lc=async()=>{try{await fn(J(z,"settings","general"),x,{merge:!0}),v(x),N(!1),e.success("    ")}catch(A){console.error("   :",A),e.error("  ")}},To=async A=>{try{await _e(J(z,"restaurants",A),{...L,updatedAt:le()}),P(null),e.success("    "),mt()}catch(H){console.error("   :",H),e.error("  ")}},si=async(A,H)=>{try{if(!H.type.startsWith("image/")){e.warning("   ");return}if(H.size>5*1024*1024){e.warning("        5MB");return}V(!0);const W=H.name.replace(/\s+/g,"_"),re=`restaurants/${A}/logo_${Date.now()}_${W}`,ue=Xa(s,re),ge={contentType:H.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await ap(ue,H,ge);const Oe=await Qa(ue);await _e(J(z,"restaurants",A),{logoUrl:Oe,updatedAt:le()}),e.success("    "),mt()}catch(W){console.error("   :",W),e.error("  ")}finally{V(!1)}},Cs=async A=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await Jn(J(z,"restaurants",A)),e.success("   "),mt()}catch(W){console.error("   :",W),e.error("  ")}},Io=async A=>{try{await _e(J(z,"users",A),{...F,updatedAt:le()}),B(null),e.success("    "),mt()}catch(H){console.error("   :",H),e.error("  ")}},Ch=async A=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await Jn(J(z,"users",A)),e.success("     "),e.warning(":      Firebase Auth"),mt()}catch(W){console.error("   :",W),e.error("  ")}},Oc=async(A,H)=>{try{await _e(J(z,"orders",A),{status:H,updatedAt:le()}),e.success("    "),mt()}catch(W){console.error("   :",W),e.error("  ")}},Mc=A=>{switch(A){case"customer":return" ";case"owner":return"  ";case"courier":return" ";case"admin":return" ";case"developer":return" ";default:return A}},Vc=A=>{switch(A){case"pending":return"  ";case"accepted":return" ";case"preparing":return"  ";case"ready":return" ";case"out_for_delivery":return"  ";case"delivered":return"  ";case"cancelled":return" ";default:return A}};return o?r.jsx(De,{allow:["developer"],children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx(pn,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-gray-600",children:"   ..."})]})})}):r.jsx(De,{allow:["developer"],children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-extrabold text-primary",children:"   "}),r.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),r.jsxs("button",{onClick:ni,disabled:u,className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(pn,{className:`w-5 h-5 ${u?"animate-spin":""}`}),""]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[{id:"overview",label:"  "},{id:"finance",label:" "},{id:"restaurants",label:" "},{id:"licenses",label:" "},{id:"orders",label:" "},{id:"users",label:" "},{id:"couriers",label:" "},{id:"admins",label:" "},{id:"tasks",label:" "},{id:"settings",label:" "},{id:"tools",label:" "}].map(A=>r.jsx("button",{onClick:()=>a(A.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition ${i===A.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:A.label},A.id))}),i==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.users}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.restaurants}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.orders}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.admins}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.couriers}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.totalAppEarnings.toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(z6,{className:"w-6 h-6 text-orange-500"}),r.jsx("h2",{className:"text-xl font-bold",children:" Firebase"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),r.jsx("p",{className:"font-mono text-sm",children:In.projectId})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),r.jsx("p",{className:"font-mono text-sm",children:In.storageBucket})]})]}),r.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[r.jsx("a",{href:`https://console.firebase.google.com/project/${In.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:" Console"}),r.jsx("a",{href:`https://console.firebase.google.com/project/${In.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:" Firestore"}),r.jsx("a",{href:`https://console.firebase.google.com/project/${In.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:" Auth"}),r.jsx("a",{href:`https://console.firebase.google.com/project/${In.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:" Storage"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.customers}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.owners}),r.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:h.couriers}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.admins}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"   "}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-sky-600 mb-3",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold text-purple-600",children:"developer:"}),"     "]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold text-amber-600",children:"admin:"}),"   ( )  "]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold text-orange-600",children:"owner:"}),"      "]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold text-emerald-600",children:"courier:"}),"      "]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold text-blue-600",children:"customer:"}),"   "]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-green-600 mb-3",children:"  Firestore"}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-2 text-sm",children:[r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" users/","{uid}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" restaurants/","{ownerId}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" menuItems/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" orders/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" orders/","{id}","/messages"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" wallets/","{adminId}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" hiringRequests/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" notifications/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" promotions/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" tasks/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" settings/","{doc}"]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-amber-600 mb-3",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"bg-amber-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold",children:"  (platformFee):"})," 1.75    (0.25  2 )"]}),r.jsxs("div",{className:"bg-amber-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold",children:"  (adminCommission):"})," 0.5  (     admin)"]}),r.jsxs("div",{className:"bg-amber-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold",children:" :"})," 2-3   "]}),r.jsxs("div",{className:"bg-amber-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold",children:" :"})," wallets/","{adminId}","  "]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-blue-600 mb-3",children:"  "}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-center text-sm",children:[r.jsx("span",{className:"bg-gray-200 px-3 py-1 rounded-full",children:"pending"}),r.jsx("span",{children:""}),r.jsx("span",{className:"bg-yellow-200 px-3 py-1 rounded-full",children:"accepted"}),r.jsx("span",{children:""}),r.jsx("span",{className:"bg-orange-200 px-3 py-1 rounded-full",children:"preparing"}),r.jsx("span",{children:""}),r.jsx("span",{className:"bg-cyan-200 px-3 py-1 rounded-full",children:"ready"}),r.jsx("span",{children:""}),r.jsx("span",{className:"bg-purple-200 px-3 py-1 rounded-full",children:"out_for_delivery"}),r.jsx("span",{children:""}),r.jsx("span",{className:"bg-green-200 px-3 py-1 rounded-full",children:"delivered"})]}),r.jsx("p",{className:"text-center text-gray-500 mt-2 text-xs",children:" cancelled "})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-purple-600 mb-3",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[r.jsxs("a",{href:"/terms",target:"_blank",className:"bg-purple-50 rounded-xl p-3 hover:bg-purple-100 transition-colors flex items-center gap-2",children:[r.jsx(qu,{className:"w-4 h-4"}),"  "]}),r.jsxs("a",{href:"/courier-terms",target:"_blank",className:"bg-purple-50 rounded-xl p-3 hover:bg-purple-100 transition-colors flex items-center gap-2",children:[r.jsx(qu,{className:"w-4 h-4"})," "]}),r.jsxs("a",{href:"/privacy-policy",target:"_blank",className:"bg-purple-50 rounded-xl p-3 hover:bg-purple-100 transition-colors flex items-center gap-2",children:[r.jsx(qu,{className:"w-4 h-4"})," "]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-rose-600 mb-3",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"       "]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"      "]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"   (localStorage)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"     "]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"    "]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"   (hiringRequests)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"   (promotions)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"  "]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"   (free/premium)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"   (bronze/silver/gold)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"   (tasks)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Se,{className:"w-4 h-4 text-green-500"}),"    GPS"]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-purple-600 mb-3",children:"  "}),(()=>{const A=k.filter(re=>!re.packageType||re.packageType==="free"),H=k.filter(re=>re.packageType==="premium"),W=k.filter(re=>re.packageRequest==="premium");return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center bg-gray-50 rounded-xl p-3",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(_n,{className:"w-5 h-5 text-gray-500"}),"  (Free)"]}),r.jsx("span",{className:"font-bold text-2xl text-gray-600",children:A.length})]}),r.jsxs("div",{className:"flex justify-between items-center bg-gradient-to-r from-amber-50 to-yellow-50 rounded-xl p-3 border border-amber-200",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(_n,{className:"w-5 h-5 text-amber-500"}),"  (Premium)"]}),r.jsx("span",{className:"font-bold text-2xl text-amber-600",children:H.length})]}),W.length>0&&r.jsxs("div",{className:"flex justify-between items-center bg-blue-50 rounded-xl p-3 border border-blue-200",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(ns,{className:"w-5 h-5 text-blue-500"}),"  "]}),r.jsx("span",{className:"font-bold text-2xl text-blue-600",children:W.length})]}),H.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-sm font-semibold text-amber-700 mb-2",children:"   :"}),r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:H.map(re=>r.jsxs("div",{className:"text-sm bg-amber-50 rounded-lg p-2 flex justify-between",children:[r.jsx("span",{children:re.name}),r.jsx("span",{className:"text-gray-500",children:re.city||"-"})]},re.id))})]})]})})()]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-pink-600 mb-3",children:"  "}),(()=>{const A=ur.filter(ue=>ue.isActive),H=ur.filter(ue=>ue.isPaid),W=ur.reduce((ue,ge)=>ue+(ge.isPaid&&ge.price||0),0),re=ur.reduce((ue,ge)=>ue+(ge.viewsCount||0),0);return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{children:" "}),r.jsx("span",{className:"font-bold text-2xl",children:ur.length})]}),r.jsxs("div",{className:"flex justify-between items-center bg-green-50 rounded-xl p-3 border border-green-200",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Se,{className:"w-5 h-5 text-green-500"})," "]}),r.jsx("span",{className:"font-bold text-2xl text-green-600",children:A.length})]}),r.jsxs("div",{className:"flex justify-between items-center bg-emerald-50 rounded-xl p-3 border border-emerald-200",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(dp,{className:"w-5 h-5 text-emerald-500"})," "]}),r.jsx("span",{className:"font-bold text-2xl text-emerald-600",children:H.length})]}),r.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl p-4 text-white",children:[r.jsx("p",{className:"text-sm opacity-90",children:"  "}),r.jsxs("p",{className:"text-3xl font-bold",children:[W.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between items-center bg-purple-50 rounded-xl p-3",children:[r.jsx("span",{children:"  "}),r.jsx("span",{className:"font-bold text-xl text-purple-600",children:re})]}),A.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-sm font-semibold text-pink-700 mb-2",children:" :"}),r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:A.map(ue=>r.jsxs("div",{className:"text-sm bg-pink-50 rounded-lg p-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:ue.title||""}),r.jsxs("span",{className:"text-green-600",children:[ue.price||0," ."]})]}),r.jsxs("div",{className:"text-xs text-gray-500 flex justify-between mt-1",children:[r.jsxs("span",{children:[" ",ue.viewsCount||0," "]}),r.jsx("span",{children:ue.isPaid?" ":"  "})]})]},ue.id))})]})]})})()]})]})]})]}),i==="finance"&&r.jsx("div",{className:"space-y-6",children:(()=>{const A=Dc();return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:A.totalRevenue.toFixed(0)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:A.totalPlatformFee.toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:A.totalAdminCommission.toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:(A.totalPlatformFee+A.totalAdminCommission).toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]})]})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:" "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold",children:A.todayOrders})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsxs("span",{className:"font-bold",children:[A.todayRevenue.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[A.todayPlatformFee.toFixed(2)," ."]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"  7 "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold",children:A.weekOrders})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsxs("span",{className:"font-bold",children:[A.weekRevenue.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[A.weekPlatformFee.toFixed(2)," ."]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"  30 "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold",children:A.monthOrders})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsxs("span",{className:"font-bold",children:[A.monthRevenue.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[A.monthPlatformFee.toFixed(2)," ."]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"   "}),r.jsx("div",{className:"space-y-3",children:k.map(H=>({...H,ordersCount:w.filter(W=>W.restaurantId===H.id&&W.status==="delivered").length,revenue:w.filter(W=>W.restaurantId===H.id&&W.status==="delivered").reduce((W,re)=>W+(re.total||0),0)})).sort((H,W)=>W.revenue-H.revenue).slice(0,5).map((H,W)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:W===0?"":W===1?"":W===2?"":`#${W+1}`}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:H.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[H.ordersCount," "]})]})]}),r.jsxs("p",{className:"font-bold text-green-600",children:[H.revenue.toFixed(2)," ."]})]},H.id))})]})]})})()}),i==="restaurants"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",k.length,")"]}),r.jsx("button",{onClick:()=>Tc(!Ki),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold",children:Ki?" ":"  "})]}),Ki&&r.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[r.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"text",placeholder:":  ",value:Tn,onChange:A=>vo(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),r.jsx("input",{type:"text",placeholder:": ",value:Gi,onChange:A=>Qi(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Ic,onChange:A=>Sc(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:Xi,onChange:A=>wo(A.target.value),className:"w-full border rounded-xl p-3"})]})]}),r.jsxs("div",{className:"border-t mt-4 pt-4",children:[r.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"    ( )"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   *"}),r.jsx("input",{type:"email",placeholder:"owner@example.com",value:ls,onChange:A=>ar(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"password",placeholder:"6   ",value:or,onChange:A=>Yi(A.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),r.jsx("button",{onClick:Pc,disabled:cs||!Tn.trim()||!ls.trim()||!or.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:cs?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):"  "})]}),r.jsx("div",{className:"space-y-4",children:k.map(A=>{var H;return r.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:T===A.id?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"text",value:L.name||"",onChange:W=>D({...L,name:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"text",value:L.phone||"",onChange:W=>D({...L,phone:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"email",value:L.email||"",onChange:W=>D({...L,email:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:""}),r.jsx("input",{type:"text",value:L.city||"",onChange:W=>D({...L,city:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-sm text-gray-600",children:""}),r.jsx("input",{type:"text",value:L.location||"",onChange:W=>D({...L,location:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-sm text-gray-600",children:"  ()"}),r.jsxs("select",{value:L.referredBy||"",onChange:W=>D({...L,referredBy:W.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[r.jsx("option",{value:"",children:"--   ( ) --"}),_.filter(W=>W.role==="admin").map(W=>r.jsxs("option",{value:W.uid,children:[" ",W.name||W.email]},W.uid))]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"file",accept:"image/*",onChange:W=>{var ue;const re=(ue=W.target.files)==null?void 0:ue[0];re&&si(A.id,re)},className:"w-full border rounded-xl p-2 mt-1",disabled:ae}),ae&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" ..."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>To(A.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[r.jsx(h1,{className:"w-4 h-4"})," "]}),r.jsxs("button",{onClick:()=>P(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[r.jsx(qr,{className:"w-4 h-4"})," "]})]})]}):r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:A.logoUrl?r.jsx("img",{src:A.logoUrl,alt:A.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg",children:A.name}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[A.phone&&r.jsxs("p",{children:[" ",A.phone]}),A.email&&r.jsxs("p",{children:[" ",A.email]}),A.city&&r.jsxs("p",{children:[" ",A.city]}),A.referredBy&&r.jsxs("p",{className:"text-purple-600",children:["  : ",((H=j.find(W=>W.uid===A.referredBy))==null?void 0:H.name)||A.referredBy.slice(0,8)]})]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{P(A.id),D(A)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"",children:r.jsx(Ld,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>Cs(A.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"",children:r.jsx(rn,{className:"w-5 h-5"})})]}),r.jsxs("select",{value:A.referredBy||"",onChange:async W=>{const re=W.target.value;try{await _e(J(z,"restaurants",A.id),{referredBy:re||null,updatedAt:le()}),e.success(re?"   ":"   "),mt()}catch{e.error("   ")}},className:"text-xs border rounded-lg p-1",title:" ",children:[r.jsx("option",{value:"",children:"  "}),_.filter(W=>W.role==="admin").map(W=>r.jsxs("option",{value:W.uid,children:[" ",W.name||W.email]},W.uid))]})]})]})},A.id)})})]}),i==="orders"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",w.length,")"]}),r.jsxs("select",{value:se,onChange:A=>be(A.target.value),className:"border rounded-xl p-2",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"accepted",children:""}),r.jsx("option",{value:"preparing",children:" "}),r.jsx("option",{value:"ready",children:""}),r.jsx("option",{value:"out_for_delivery",children:" "}),r.jsx("option",{value:"delivered",children:" "}),r.jsx("option",{value:"cancelled",children:""})]})]}),r.jsx("div",{className:"space-y-3",children:w.filter(A=>se==="all"||A.status===se).sort((A,H)=>{var W,re;return(((W=H.createdAt)==null?void 0:W.seconds)||0)-(((re=A.createdAt)==null?void 0:re.seconds)||0)}).map(A=>{var H,W;return r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[r.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-bold",children:[" #",A.id.slice(-8)]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",A.restaurantName||""]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",A.address]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",(H=A.total)==null?void 0:H.toFixed(2)," ."]}),A.platformFee&&r.jsxs("p",{className:"text-xs text-green-600",children:[" : ",A.platformFee," .",A.adminCommission?` |  : ${A.adminCommission} .`:""]})]}),r.jsxs("div",{className:"text-left",children:[r.jsx("span",{className:`inline-block px-3 py-1 rounded-xl text-sm font-semibold ${A.status==="delivered"?"bg-green-100 text-green-700":A.status==="cancelled"?"bg-red-100 text-red-700":A.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:Vc(A.status)}),r.jsxs("select",{value:A.status,onChange:re=>Oc(A.id,re.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"accepted",children:""}),r.jsx("option",{value:"preparing",children:" "}),r.jsx("option",{value:"ready",children:""}),r.jsx("option",{value:"out_for_delivery",children:" "}),r.jsx("option",{value:"delivered",children:" "}),r.jsx("option",{value:"cancelled",children:""})]})]})]}),r.jsxs("div",{className:"mt-3 pt-3 border-t",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(W=A.items)==null?void 0:W.map((re,ue)=>r.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[re.name,"  ",re.qty]},ue))})]})]},A.id)})})]}),i==="users"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",_.length,")"]}),r.jsxs("select",{value:ye,onChange:A=>Le(A.target.value),className:"border rounded-xl p-2",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"customer",children:""}),r.jsx("option",{value:"owner",children:" "}),r.jsx("option",{value:"courier",children:""}),r.jsx("option",{value:"admin",children:""}),r.jsx("option",{value:"developer",children:""})]})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.filter(A=>ye==="all"||A.role===ye).map(A=>r.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:$===A.uid?r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"",value:F.name||"",onChange:H=>X({...F,name:H.target.value}),className:"w-full border rounded-xl p-2"}),r.jsx("input",{type:"text",placeholder:"",value:F.phone||"",onChange:H=>X({...F,phone:H.target.value}),className:"w-full border rounded-xl p-2"}),r.jsxs("select",{value:F.role||"customer",onChange:H=>X({...F,role:H.target.value}),className:"w-full border rounded-xl p-2",children:[r.jsx("option",{value:"customer",children:""}),r.jsx("option",{value:"owner",children:" "}),r.jsx("option",{value:"courier",children:""}),r.jsx("option",{value:"admin",children:""}),r.jsx("option",{value:"developer",children:""})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Io(A.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:""}),r.jsx("button",{onClick:()=>B(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:""})]})]}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:A.name||" "}),r.jsx("p",{className:"text-sm text-gray-600",children:A.email}),r.jsx("p",{className:"text-xs mt-1",children:Mc(A.role)})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>{B(A.uid),X(A)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:r.jsx(Ld,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Ch(A.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:r.jsx(rn,{className:"w-4 h-4"})})]})]})})},A.uid))})]}),i==="couriers"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["  (",h.couriers,")"]}),r.jsx("button",{onClick:()=>mo(!fo),className:"flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-xl font-semibold",children:fo?" ":"  "})]}),fo&&r.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[r.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"email",placeholder:"courier@example.com",value:os,onChange:A=>po(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"password",placeholder:"6   ",value:Ts,onChange:A=>xo(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),r.jsx("input",{type:"text",placeholder:" ",value:go,onChange:A=>Wi(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:ot,onChange:A=>xt(A.target.value),className:"w-full border rounded-xl p-3"})]})]}),r.jsx("button",{onClick:ko,disabled:ei||!os.trim()||!Ts.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:ei?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):"   "})]}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[_.filter(A=>A.role==="courier").map(A=>r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:A.name||" "}),r.jsx("p",{className:"text-sm text-gray-600",children:A.email}),A.phone&&r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",A.phone]})]})]}),r.jsx("div",{className:"mt-4 pt-3 border-t",children:r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-lg font-bold text-green-600",children:w.filter(H=>H.courierId===A.uid&&H.status==="delivered").length}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-lg font-bold text-blue-600",children:w.filter(H=>H.courierId===A.uid&&H.status==="out_for_delivery").length}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]})]})})]},A.uid)),h.couriers===0&&r.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"   "})]})]}),i==="admins"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",j.length,")"]}),r.jsxs("button",{onClick:()=>ln(!on),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[r.jsx(Jl,{className:"w-5 h-5"}),on?"":" "]})]}),on&&r.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[r.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"    "}),r.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"           "}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"  :"}),r.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[_.filter(A=>A.role==="customer").slice(0,10).map(A=>r.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:A.name||" "}),r.jsx("p",{className:"text-sm text-gray-500",children:A.email})]}),r.jsx("button",{onClick:async()=>{if(await n.confirm(`   ${A.name||A.email}  `,{title:"  "}))try{await _e(J(z,"users",A.uid),{role:"admin"}),e.success("     "),ln(!1),mt()}catch{e.error("  ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:" "})]},A.uid)),_.filter(A=>A.role==="customer").length===0&&r.jsx("p",{className:"text-gray-500 text-center py-4",children:"    "})]})]}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"     :"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"email",placeholder:"admin@example.com",value:rr,onChange:A=>Ec(A.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"password",placeholder:"  (6   )",value:ks,onChange:A=>zi(A.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),r.jsx("input",{type:"text",placeholder:" ",value:ir,onChange:A=>Zr(A.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:qi,onChange:A=>Hi(A.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),r.jsx("button",{onClick:Eo,disabled:ho||!rr.trim()||!ks.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:ho?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Jl,{className:"w-5 h-5"}),"  "]})}),r.jsx("p",{className:"text-xs text-orange-600 mt-2",children:" :        .     ."})]}),r.jsx("div",{className:"border-t pt-4 mt-4",children:r.jsx("p",{className:"text-xs text-gray-500",children:'         ""'})})]}),r.jsxs("div",{className:"space-y-4",children:[j.map(A=>r.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[r.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>zn(At===A.uid?null:A.uid),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:A.name||" "}),r.jsx("p",{className:"text-sm text-gray-600",children:A.email})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-left",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dp,{className:"w-4 h-4 text-green-600"}),r.jsxs("span",{className:"font-bold text-green-600",children:[A.walletBalance.toFixed(2)," ."]})]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[": ",A.totalEarnings.toFixed(2)," . | ",A.restaurantsCount," "]})]}),At===A.uid?r.jsx(BP,{className:"w-5 h-5 text-gray-400"}):r.jsx(o1,{className:"w-5 h-5 text-gray-400"})]})]})}),At===A.uid&&r.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[r.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["      (",A.restaurants.length,"):"]}),A.restaurants.length>0?r.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:A.restaurants.map(H=>r.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:H.logoUrl?r.jsx("img",{src:H.logoUrl,alt:H.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-sm",children:H.name}),r.jsx("p",{className:"text-xs text-gray-500",children:H.city||" "})]})]},H.id))}):r.jsx("p",{className:"text-gray-500 text-sm",children:"    "}),r.jsx("div",{className:"mt-4 pt-3 border-t",children:r.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[r.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-green-700",children:A.walletBalance.toFixed(2)}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-blue-700",children:A.totalEarnings.toFixed(2)}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-purple-700",children:w.filter(H=>H.referredBy===A.uid).length}),r.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})})]})]},A.uid)),j.length===0&&r.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"   "})]})]}),i==="settings"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold",children:"  "}),O?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{N(!1),E(p)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:""}),r.jsx("button",{onClick:Lc,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:" "})]}):r.jsx("button",{onClick:()=>N(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:" "})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),O?r.jsx("input",{type:"number",value:x.deliveryFee||0,onChange:A=>E({...x,deliveryFee:Number(A.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[p.deliveryFee||7," ."]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),O?r.jsx("input",{type:"number",step:"0.1",value:x.platformFee||1,onChange:A=>E({...x,platformFee:Number(A.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[p.platformFee||1," ./"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),O?r.jsx("input",{type:"number",step:"0.05",value:x.adminCommissionRate||.75,onChange:A=>E({...x,adminCommissionRate:Number(A.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[p.adminCommissionRate||.75," ./"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   "}),O?r.jsx("input",{type:"number",value:x.minOrderAmount||0,onChange:A=>E({...x,minOrderAmount:Number(A.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[p.minOrderAmount||20," ."]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),O?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"time",value:((na=x.workingHours)==null?void 0:na.open)||"09:00",onChange:A=>E({...x,workingHours:{...x.workingHours,open:A.target.value}}),className:"flex-1 border rounded-xl p-3"}),r.jsx("input",{type:"time",value:((sa=x.workingHours)==null?void 0:sa.close)||"23:00",onChange:A=>E({...x,workingHours:{...x.workingHours,close:A.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):r.jsxs("p",{className:"text-2xl font-bold",children:[((So=p.workingHours)==null?void 0:So.open)||"09:00"," - ",((Co=p.workingHours)==null?void 0:Co.close)||"23:00"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),O?r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:x.maintenanceMode||!1,onChange:A=>E({...x,maintenanceMode:A.target.checked}),className:"w-6 h-6"}),r.jsx("span",{className:"text-lg",children:x.maintenanceMode?"":""})]}):r.jsx("p",{className:`text-2xl font-bold ${p.maintenanceMode?"text-red-600":"text-green-600"}`,children:p.maintenanceMode?" ":" "})]})]})}),r.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[r.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"   (  = 1.75 .):"}),r.jsxs("div",{className:"text-sky-800 space-y-2",children:[r.jsxs("p",{children:[" ",r.jsx("strong",{children:" :"})," ",p.platformFee||1," .   "]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:" :"})," ",p.adminCommissionRate||.75," .   "]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[r.jsx("p",{className:"font-bold mb-2",children:" :   5 "}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"    :"})]}),r.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[r.jsxs("li",{children:["  : 5  ",p.adminCommissionRate||.75," = ",r.jsxs("strong",{children:[(5*(p.adminCommissionRate||.75)).toFixed(2)," ."]})]}),r.jsxs("li",{children:["  : 5  ",p.platformFee||1," = ",r.jsxs("strong",{children:[(5*(p.platformFee||1)).toFixed(2)," ."]})]}),r.jsxs("li",{className:"text-green-700",children:[": ",r.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})]}),r.jsxs("p",{className:"mt-2",children:[" ",r.jsx("strong",{children:"    :"})]}),r.jsx("ul",{className:"mr-6 list-disc text-sm",children:r.jsxs("li",{children:["    : 5  1.75 = ",r.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})})]})]})]})]}),i==="tasks"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold",children:"   "}),r.jsxs("button",{onClick:()=>Ji(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[r.jsx(Nc,{className:"w-5 h-5"})," "]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(A=>r.jsxs("button",{onClick:()=>us(A),className:`px-4 py-2 rounded-xl font-semibold transition ${Hn===A?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[A==="all"&&" ",A==="pending"&&"  ",A==="in_progress"&&"  ",A==="completed"&&" ",A==="cancelled"&&" "]},A))}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:qn.filter(A=>A.status==="pending").length}),r.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:qn.filter(A=>A.status==="in_progress").length}),r.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),r.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:qn.filter(A=>A.status==="completed").length}),r.jsx("p",{className:"text-sm text-green-700",children:""})]}),r.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:qn.filter(A=>A.status==="cancelled").length}),r.jsx("p",{className:"text-sm text-red-700",children:""})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:qn.filter(A=>Hn==="all"||A.status===Hn).length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("p",{className:"text-4xl mb-2",children:""}),r.jsxs("p",{children:["   ",Hn!=="all"&&"  "]})]}):r.jsx("div",{className:"divide-y",children:qn.filter(A=>Hn==="all"||A.status===Hn).map(A=>{var W,re,ue;const H=_.find(ge=>ge.uid===A.assignedTo);return r.jsx("div",{className:"p-4 hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${A.priority==="high"?"bg-red-100 text-red-700":A.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:A.priority==="high"?" ":A.priority==="medium"?" ":" "}),r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${A.status==="pending"?"bg-yellow-100 text-yellow-700":A.status==="in_progress"?"bg-blue-100 text-blue-700":A.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[A.status==="pending"&&"  ",A.status==="in_progress"&&"  ",A.status==="completed"&&" ",A.status==="cancelled"&&" "]})]}),r.jsx("h3",{className:"font-bold text-gray-800",children:A.title}),A.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.description}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[r.jsxs("span",{children:[" ",(H==null?void 0:H.name)||A.assignedToName||" "]}),A.dueDate&&r.jsxs("span",{children:[" ",new Date(A.dueDate).toLocaleDateString("ar-SA")]}),r.jsxs("span",{children:[" ",((ue=(re=(W=A.createdAt)==null?void 0:W.toDate)==null?void 0:re.call(W))==null?void 0:ue.toLocaleDateString("ar-SA"))||" "]})]}),A.notes&&r.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:[" ",A.notes]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[A.status==="pending"&&r.jsx("button",{onClick:async()=>{try{await _e(J(z,"tasks",A.id),{status:"in_progress",updatedAt:le()}),e.success("  "),mt()}catch{e.error("   ")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:" ",children:""}),(A.status==="pending"||A.status==="in_progress")&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:async()=>{try{await _e(J(z,"tasks",A.id),{status:"completed",completedAt:le(),updatedAt:le()}),e.success("  "),mt()}catch{e.error("   ")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:" ",children:""}),r.jsx("button",{onClick:async()=>{if(await n.confirm("    ",{dangerous:!0}))try{await _e(J(z,"tasks",A.id),{status:"cancelled",updatedAt:le()}),e.success("  "),mt()}catch{e.error("   ")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]}),r.jsx("button",{onClick:async()=>{if(await n.confirm("     ",{dangerous:!0}))try{await Jn(J(z,"tasks",A.id)),e.success("  "),mt()}catch{e.error("   ")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]})]})},A.id)})})}),ti&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"   "}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),r.jsx("input",{type:"text",value:ft,onChange:A=>Zi(A.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:":    "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),r.jsx("textarea",{value:lr,onChange:A=>Is(A.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:" ..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),r.jsxs("select",{value:ea,onChange:A=>bo(A.target.value),className:"w-full border rounded-xl px-4 py-2",children:[r.jsx("option",{value:"",children:"--   --"}),_.filter(A=>A.role==="admin").map(A=>r.jsx("option",{value:A.uid,children:A.name||A.email},A.uid))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),r.jsxs("select",{value:Ss,onChange:A=>No(A.target.value),className:"w-full border rounded-xl px-4 py-2",children:[r.jsx("option",{value:"low",children:" "}),r.jsx("option",{value:"medium",children:" "}),r.jsx("option",{value:"high",children:" "})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:" "}),r.jsx("input",{type:"date",value:Ac,onChange:A=>cr(A.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>{Ji(!1),Zi(""),Is(""),bo(""),No("medium"),cr("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:""}),r.jsx("button",{onClick:async()=>{if(!ft.trim()||!ea){e.error("   ");return}ta(!0);try{const A=_.find(H=>H.uid===ea);await ts(he(z,"tasks"),{title:ft.trim(),description:lr.trim(),assignedTo:ea,assignedToName:(A==null?void 0:A.name)||(A==null?void 0:A.email)||"",status:"pending",priority:Ss,dueDate:Ac||null,createdBy:t==null?void 0:t.uid,createdAt:le(),updatedAt:le(),completedAt:null,notes:""}),e.success("   "),Ji(!1),Zi(""),Is(""),bo(""),No("medium"),cr(""),mt()}catch(A){console.error(A),e.error("   ")}finally{ta(!1)}},disabled:jo,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:jo?" ...":" "})]})]})})]}),i==="tools"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"  "}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("button",{onClick:()=>{const A={exportDate:new Date().toISOString(),users:_.length,restaurants:k.length,orders:w.length,admins:j.length,stats:h,settings:p},H=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),W=URL.createObjectURL(H),re=document.createElement("a");re.href=W,re.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,re.click(),e.success("   ")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:" "}),r.jsx("p",{className:"text-xs opacity-75",children:"  JSON"})]})]}),r.jsxs("button",{onClick:()=>{const A=[[" ","","","",""].join(","),...w.map(ue=>{var ge,Oe,cn;return[ue.id.slice(-8),ue.restaurantName||" ",ue.total,ue.status,((cn=(Oe=(ge=ue.createdAt)==null?void 0:ge.toDate)==null?void 0:Oe.call(ge))==null?void 0:cn.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),H=new Blob(["\uFEFF"+A],{type:"text/csv;charset=utf-8"}),W=URL.createObjectURL(H),re=document.createElement("a");re.href=W,re.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,re.click(),e.success("   ")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:" "}),r.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]}),r.jsxs("button",{onClick:()=>{const A=[["","","",""].join(","),..._.map(ue=>[ue.name||" ",ue.email,ue.role,ue.phone||""].join(","))].join(`
`),H=new Blob(["\uFEFF"+A],{type:"text/csv;charset=utf-8"}),W=URL.createObjectURL(H),re=document.createElement("a");re.href=W,re.download=`users-${new Date().toISOString().split("T")[0]}.csv`,re.click(),e.success("   ")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:" "}),r.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:async()=>{const A=w.filter(W=>W.status==="pending");if(A.length===0){e.info("   ");return}if(await n.confirm(`  ${A.length}  .   `,{title:"  ",dangerous:!0}))try{await Promise.all(A.map(W=>_e(J(z,"orders",W.id),{status:"cancelled",updatedAt:le()}))),e.success(`  ${A.length} `),mt()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:"  "}),r.jsxs("p",{className:"text-xs opacity-75",children:[w.filter(A=>A.status==="pending").length,"  "]})]})]}),r.jsxs("button",{onClick:async()=>{const A=new Date;A.setMonth(A.getMonth()-3);const H=w.filter(re=>{var ge,Oe;return(((Oe=(ge=re.createdAt)==null?void 0:ge.toDate)==null?void 0:Oe.call(ge))||new Date)<A&&(re.status==="delivered"||re.status==="cancelled")});if(H.length===0){e.info("   ");return}if(await n.confirm(`  ${H.length}   (  3 ).   `,{title:"  ",dangerous:!0}))try{await Promise.all(H.map(re=>Jn(J(z,"orders",re.id)))),e.success(`  ${H.length}  `),mt()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:"  "}),r.jsx("p",{className:"text-xs opacity-75",children:"   3 "})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("a",{href:`https://console.firebase.google.com/project/${In.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Firestore"})]}),r.jsxs("a",{href:`https://console.firebase.google.com/project/${In.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Authentication"})]}),r.jsxs("a",{href:`https://console.firebase.google.com/project/${In.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Storage"})]}),r.jsxs("a",{href:`https://console.firebase.google.com/project/${In.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Project ID"}),r.jsx("p",{className:"font-mono",children:In.projectId})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),r.jsx("p",{className:"font-mono",children:In.storageBucket})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:" "}),r.jsx("p",{className:"font-bold",children:p.appVersion||"1.0.0"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:" "}),r.jsx("p",{className:`font-bold ${p.maintenanceMode?"text-red-600":"text-green-600"}`,children:p.maintenanceMode?" ":" "})]})]})]})]}),i==="licenses"&&r.jsx(ND,{restaurants:k,onUpdate:ni,toast:e,dialog:n}),r.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:r.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[r.jsxs("span",{children:[" ",t==null?void 0:t.email]}),r.jsxs("span",{children:[" ",t==null?void 0:t.uid.slice(0,12),"..."]}),r.jsxs("span",{children:[" ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},ND=({restaurants:t,onUpdate:e,toast:n,dialog:s})=>{const[i,a]=I.useState("pending"),[o,c]=I.useState({}),[u,d]=I.useState(null),[h,m]=I.useState(""),[p,v]=I.useState(null),[_,R]=I.useState(new Set),[k,b]=I.useState(""),[w,y]=I.useState(!1),j=t.filter(V=>V.commercialLicenseUrl),C=t.filter(V=>!V.commercialLicenseUrl),O=j.filter(V=>i==="all"?!0:i==="missing"?!1:V.licenseStatus===i||!V.licenseStatus&&i==="pending"),N={all:j.length,pending:j.filter(V=>!V.licenseStatus||V.licenseStatus==="pending").length,approved:j.filter(V=>V.licenseStatus==="approved").length,rejected:j.filter(V=>V.licenseStatus==="rejected").length,missing:C.length},x=async(V,$)=>{if(!$.trim()){n.warning("  ");return}v(V.id);try{await ts(he(z,"notifications"),{type:"license_reminder",recipientId:V.ownerId,recipientType:"owner",restaurantId:V.id,restaurantName:V.name,title:" :   ",message:$,read:!1,createdAt:le()}),n.success(`    ${V.name}`),m("")}catch(B){n.error("  : "+(B.message||"  "))}finally{v(null)}},E=async()=>{if(!k.trim()){n.warning("  ");return}const V=_.size>0?C.filter(B=>_.has(B.id)):C;if(V.length===0){n.warning("    ");return}if(await s.confirm(`       ${V.length} `,{title:"  "})){y(!0);try{const B=V.map(F=>ts(he(z,"notifications"),{type:"license_reminder",recipientId:F.ownerId,recipientType:"owner",restaurantId:F.id,restaurantName:F.name,title:" :   ",message:k,read:!1,createdAt:le()}));await Promise.all(B),n.success(`    ${V.length}   `),b(""),R(new Set)}catch(B){n.error("   : "+(B.message||"  "))}finally{y(!1)}}},T=()=>{_.size===C.length?R(new Set):R(new Set(C.map(V=>V.id)))},P=V=>{const $=new Set(_);$.has(V)?$.delete(V):$.add(V),R($)},L=async(V,$)=>{const B=o[V]||"";if($==="rejected"&&!B.trim()){n.warning("   ");return}const F=$==="approved"?" ":"";if(await s.confirm(`    ${F}   `,{title:`${F} `})){d(V);try{await _e(J(z,"restaurants",V),{licenseStatus:$,licenseNotes:$==="rejected"?B:"",updatedAt:le()}),n.success($==="approved"?"    ":"  "),c(se=>({...se,[V]:""})),e()}catch(se){n.error(" : "+(se.message||"  "))}finally{d(null)}}},D=async(V,$)=>{const B=" ";if(await s.confirm(`     ${B}  "${V.name}"
      .`,{title:`  ${B}`})){d(V.id);try{const X={licenseStatus:null,licenseNotes:"",updatedAt:le(),commercialLicenseUrl:null};await _e(J(z,"restaurants",V.id),X),await ts(he(z,"notifications"),{type:"license_deleted",recipientId:V.ownerId,recipientType:"owner",restaurantId:V.id,restaurantName:V.name,title:`   ${B}`,message:`  ${B}  .         .`,read:!1,createdAt:le()}),n.success(`  ${B}    `),e()}catch(X){n.error("  : "+(X.message||"  "))}finally{d(null)}}},ae=V=>{switch(V){case"approved":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[r.jsx(Se,{className:"w-3 h-3"})," "]});case"rejected":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:[r.jsx(xi,{className:"w-3 h-3"})," "]});default:return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[r.jsx(ns,{className:"w-3 h-3"}),"  "]})}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(Lv,{className:"w-6 h-6 text-sky-500"})," "]}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:["pending","approved","rejected","all","missing"].map(V=>r.jsxs("button",{onClick:()=>a(V),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${i===V?V==="missing"?"bg-orange-500 text-white":"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[V==="all"&&` (${N.all})`,V==="pending"&&`  (${N.pending})`,V==="approved"&&` (${N.approved})`,V==="rejected"&&` (${N.rejected})`,V==="missing"&&`   (${N.missing})`]},V))})]}),i==="missing"&&r.jsx("div",{className:"space-y-4",children:C.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx(Se,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),r.jsx("p",{className:"text-green-600 font-semibold",children:"    "})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-2xl p-5",children:[r.jsx("h3",{className:"font-bold text-orange-800 mb-3 flex items-center gap-2",children:"   "}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:_.size===C.length,onChange:T,className:"w-5 h-5 rounded border-orange-300 text-orange-500 focus:ring-orange-500"}),r.jsxs("span",{className:"text-sm text-orange-700",children:["  (",C.length,")"]})]}),_.size>0&&r.jsxs("span",{className:"text-sm bg-orange-200 text-orange-800 px-2 py-1 rounded-full",children:[": ",_.size]})]}),r.jsx("textarea",{placeholder:"      (    )...",value:k,onChange:V=>b(V.target.value),className:"w-full border border-orange-200 rounded-xl p-3 text-sm resize-none h-24 focus:ring-2 focus:ring-orange-400 focus:border-transparent"}),r.jsx("button",{onClick:E,disabled:w||!k.trim(),className:"mt-3 w-full flex items-center justify-center gap-2 bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:w?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:["   ",_.size>0?_.size:C.length," "]})})]}),r.jsx("div",{className:"grid gap-3",children:C.map(V=>r.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow-sm hover:shadow-md transition",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",checked:_.has(V.id),onChange:()=>P(V.id),className:"w-5 h-5 mt-1 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-800",children:V.name}),r.jsx("p",{className:"text-sm text-gray-500",children:V.city||" "})]}),r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-semibold",children:[r.jsx(xi,{className:"w-3 h-3"}),"  "]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[V.email&&r.jsxs("span",{children:[" ",V.email]}),V.phone&&r.jsxs("span",{children:[" ",V.phone]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:" ...",value:p===V.id?h:"",onChange:$=>{v(V.id),m($.target.value)},onFocus:()=>v(V.id),className:"flex-1 border rounded-lg px-3 py-2 text-sm"}),r.jsx("button",{onClick:()=>x(V,h),disabled:p===V.id&&!h.trim(),className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg text-sm font-medium transition disabled:opacity-50",children:""})]})]})]})},V.id))})]})}),i!=="missing"&&O.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx(Lv,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["   ",i==="pending"?" ":i==="approved"?" ":i==="rejected"?"":""]})]}):i!=="missing"&&r.jsx("div",{className:"grid gap-4",children:O.map(V=>r.jsxs("div",{className:"bg-white border rounded-2xl p-5 shadow-sm",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:V.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[V.city||" ","  ",V.email||" "]})]}),ae(V.licenseStatus)]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:V.commercialLicenseUrl&&r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"  "}),r.jsx("button",{onClick:()=>D(V),disabled:u===V.id,className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"  ",children:r.jsx(rn,{className:"w-4 h-4"})})]}),r.jsxs("a",{href:V.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[r.jsx(qu,{className:"w-4 h-4"})," "]})]})}),V.commercialLicenseUrl&&r.jsxs("button",{onClick:()=>D(V),disabled:u===V.id,className:"w-full flex items-center justify-center gap-2 mb-4 py-2 px-4 border-2 border-dashed border-red-200 text-red-500 hover:bg-red-50 hover:border-red-300 rounded-xl text-sm font-medium transition",children:[r.jsx(rn,{className:"w-4 h-4"}),"    "]}),V.licenseStatus==="rejected"&&V.licenseNotes&&r.jsxs("div",{className:"bg-red-50 text-red-700 rounded-xl p-3 mb-4 text-sm",children:[r.jsx("strong",{children:" :"})," ",V.licenseNotes]}),V.licenseStatus!=="approved"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{placeholder:" ( )...",value:o[V.id]||"",onChange:$=>c(B=>({...B,[V.id]:$.target.value})),className:"w-full border rounded-xl p-3 text-sm resize-none h-20"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>L(V.id,"approved"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(Se,{className:"w-5 h-5"}),""]}),r.jsxs("button",{onClick:()=>L(V.id,"rejected"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(xi,{className:"w-5 h-5"}),""]})]})]}),V.licenseStatus==="approved"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{placeholder:"  ...",value:o[V.id]||"",onChange:$=>c(B=>({...B,[V.id]:$.target.value})),className:"w-full border border-yellow-200 rounded-xl p-3 text-sm resize-none h-20 focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>L(V.id,"rejected"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(xi,{className:"w-5 h-5"})," "]}),r.jsxs("button",{onClick:()=>D(V),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(rn,{className:"w-5 h-5"}),"  "]})]})]})]},V.id))})]})},jD="afrtalbyt2026@gmail.com",ED=()=>{const t=Xt(),[e,n]=I.useState(""),[s,i]=I.useState(""),[a,o]=I.useState(!1),[c,u]=I.useState(""),[d,h]=I.useState(!1),m=async p=>{if(p.preventDefault(),u(""),e.trim().toLowerCase()!==jD){u("        ");return}if(s.length<6){u("     6   ");return}o(!0);try{const _=(await fl(On,e.trim(),s)).user.uid;await fn(J(z,"users",_),{email:e.trim(),name:" ",role:"developer",createdAt:le()}),h(!0),setTimeout(()=>{t("/developer")},2e3)}catch(v){console.error("Setup error:",v),v.code==="auth/email-already-in-use"?u("      "):v.code==="auth/invalid-email"?u("   "):v.code==="auth/weak-password"?u("   "):u(" : "+(v.message||" "))}finally{o(!1)}};return d?r.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:r.jsxs("div",{className:"text-center bg-gradient-to-br from-green-500 to-emerald-600 text-white p-10 rounded-3xl shadow-2xl",children:[r.jsx(Se,{className:"w-20 h-20 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"    !"}),r.jsx("p",{children:"   ..."})]})}):r.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 p-6 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(jc,{className:"w-10 h-10 text-white"})}),r.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2",children:[r.jsx(Un,{className:"w-6 h-6"}),"  ",r.jsx(Un,{className:"w-6 h-6"})]}),r.jsx("p",{className:"text-white/80 text-sm mt-2",children:"   "})]}),r.jsxs("form",{onSubmit:m,className:"p-6 space-y-5",children:[c&&r.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 rounded-xl p-3 text-sm text-center",children:c}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[r.jsx(vx,{className:"w-4 h-4"})," "]}),r.jsx("input",{type:"email",value:e,onChange:p=>n(p.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[r.jsx(p6,{className:"w-4 h-4"})," "]}),r.jsx("input",{type:"password",value:s,onChange:p=>i(p.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),r.jsx("button",{type:"submit",disabled:a,className:"w-full py-4 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white font-bold rounded-xl hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(xx,{className:"w-5 h-5"}),"  "]})}),r.jsx("p",{className:"text-gray-500 text-xs text-center",children:"      "})]})]})})})},yt=({children:t})=>{const{user:e,loading:n}=We();return n?r.jsx("div",{className:"p-8 text-center",children:" ..."}):e?r.jsx(r.Fragment,{children:t}):r.jsx(ug,{to:"/login",replace:!0})},kD=()=>{var c;const[t,e]=I.useState([]),[n,s]=I.useState(!0),[i,a]=I.useState(null);I.useEffect(()=>{(async()=>{try{a(null);const u=at(he(z,"orders"),Ns("createdAt","desc"),sx(10)),h=(await Ve(u)).docs.map(m=>{var v,_,R,k,b,w;const p=m.data();return{id:m.id,restaurantId:p.restaurantId??null,firstItemOwnerId:((_=(v=p==null?void 0:p.items)==null?void 0:v[0])==null?void 0:_.ownerId)??null,customerId:p.customerId??null,createdAtISO:((w=(b=(k=(R=p.createdAt)==null?void 0:R.toDate)==null?void 0:k.call(R))==null?void 0:b.toISOString)==null?void 0:w.call(b))??null}});e(h)}catch(u){if(String((u==null?void 0:u.message)||"").includes("index"))try{const h=(await Ve(he(z,"orders"))).docs.map(m=>{var v,_,R,k,b,w;const p=m.data();return{id:m.id,restaurantId:p.restaurantId??null,firstItemOwnerId:((_=(v=p==null?void 0:p.items)==null?void 0:v[0])==null?void 0:_.ownerId)??null,customerId:p.customerId??null,createdAtISO:((w=(b=(k=(R=p.createdAt)==null?void 0:R.toDate)==null?void 0:k.call(R))==null?void 0:b.toISOString)==null?void 0:w.call(b))??null}});e(h),a("     createdAt     .")}catch(d){a("     : "+((d==null?void 0:d.message)||d))}else a("  : "+((u==null?void 0:u.message)||u))}finally{s(!1)}})()},[]);const o=(c=mn.options)==null?void 0:c.projectId;return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),r.jsxs("div",{className:"text-sm",children:["ProjectId: ",r.jsx("b",{children:String(o)})]}),i&&r.jsx("div",{className:"text-red-600 text-sm",children:i}),n&&r.jsx("div",{children:" Loading"}),!n&&t.length===0&&r.jsxs("div",{className:"text-gray-600",children:["     collection: ",r.jsx("code",{children:"orders"}),"   ."]}),t.map(u=>r.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[r.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",u.id]}),r.jsxs("div",{children:["restaurantId: ",r.jsx("b",{children:String(u.restaurantId)})]}),r.jsxs("div",{children:["items[0].ownerId: ",r.jsx("b",{children:String(u.firstItemOwnerId)})]}),r.jsxs("div",{children:["customerId: ",r.jsx("b",{children:String(u.customerId)})]}),r.jsxs("div",{children:["createdAt: ",r.jsx("b",{children:u.createdAtISO||""})]})]},u.id))]})};function TD(){const{locationRequired:t,refreshUserData:e,loading:n}=We();return!n&&t?r.jsx(R3,{onLocationSaved:e}):r.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[r.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[r.jsx(A3,{}),r.jsx(T3,{})]}),r.jsx("div",{className:"h-[100px] sm:h-[120px]"}),r.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:r.jsxs(Kk,{children:[r.jsx(Ee,{path:"/",element:r.jsx(P3,{})}),r.jsx(Ee,{path:"/restaurants",element:r.jsx(L3,{})}),r.jsx(Ee,{path:"/menu",element:r.jsx(U3,{})}),r.jsx(Ee,{path:"/cart",element:r.jsx($3,{})}),r.jsx(Ee,{path:"/login",element:r.jsx(B3,{})}),r.jsx(Ee,{path:"/customer-login",element:r.jsx(q3,{})}),r.jsx(Ee,{path:"/register",element:r.jsx(z3,{})}),r.jsx(Ee,{path:"/privacy-policy",element:r.jsx(H3,{})}),r.jsx(Ee,{path:"/terms",element:r.jsx(W3,{})}),r.jsx(Ee,{path:"/courier-terms",element:r.jsx(K3,{})}),r.jsx(Ee,{path:"/account-deleted",element:r.jsx(G3,{})}),r.jsx(Ee,{path:"/setup-dev",element:r.jsx(ED,{})}),r.jsx(Ee,{path:"/chat",element:r.jsx(yt,{children:r.jsx(De,{allow:["customer","courier","owner","admin"],children:r.jsx(xD,{})})})}),r.jsx(Ee,{path:"/notifications",element:r.jsx(yt,{children:r.jsx(De,{allow:["customer","courier","owner","admin","developer"],children:r.jsx(yD,{})})})}),r.jsx(Ee,{path:"/checkout",element:r.jsx(yt,{children:r.jsx(De,{allow:["customer","admin"],children:r.jsx(Y3,{})})})}),r.jsx(Ee,{path:"/orders",element:r.jsx(yt,{children:r.jsx(De,{allow:["customer","admin"],children:r.jsx(J3,{})})})}),r.jsx(Ee,{path:"/profile",element:r.jsx(yt,{children:r.jsx(De,{allow:["customer","courier","owner","admin","developer"],children:r.jsx(Z3,{})})})}),r.jsx(Ee,{path:"/owner",element:r.jsx(yt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(eD,{})})})}),r.jsx(Ee,{path:"/owner/menu",element:r.jsx(yt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(sD,{})})})}),r.jsx(Ee,{path:"/owner/orders",element:r.jsx(yt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(iD,{})})})}),r.jsx(Ee,{path:"/owner/edit",element:r.jsx(yt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(aD,{})})})}),r.jsx(Ee,{path:"/owner/courier-requests",element:r.jsx(yt,{children:r.jsx(De,{allow:["owner","developer"],children:r.jsx(oD,{})})})}),r.jsx(Ee,{path:"/owner/packages",element:r.jsx(yt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(lD,{})})})}),r.jsx(Ee,{path:"/owner/promotion",element:r.jsx(yt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(cD,{})})})}),r.jsx(Ee,{path:"/courier",element:r.jsx(yt,{children:r.jsx(De,{allow:["courier","developer"],children:r.jsx(uD,{})})})}),r.jsx(Ee,{path:"/courier/hiring",element:r.jsx(yt,{children:r.jsx(De,{allow:["courier","developer"],children:r.jsx(dD,{})})})}),r.jsx(Ee,{path:"/admin",element:r.jsx(yt,{children:r.jsx(De,{allow:["admin","developer"],children:r.jsx(vD,{})})})}),r.jsx(Ee,{path:"/admin/restaurants",element:r.jsx(yt,{children:r.jsx(De,{allow:["admin","developer"],children:r.jsx(wD,{})})})}),r.jsx(Ee,{path:"/admin/orders",element:r.jsx(yt,{children:r.jsx(De,{allow:["admin","developer"],children:r.jsx(_D,{})})})}),r.jsx(Ee,{path:"/developer",element:r.jsx(yt,{children:r.jsx(De,{allow:["developer","admin"],children:r.jsx(bD,{})})})}),r.jsx(Ee,{path:"/__debug_orders",element:r.jsx(kD,{})}),r.jsx(Ee,{path:"*",element:r.jsx(ug,{to:"/",replace:!0})})]})}),r.jsx(C3,{})]})}I.createContext(void 0);const ID=({children:t})=>r.jsx(r.Fragment,{children:t});Vf.createRoot(document.getElementById("root")).render(r.jsx(tw.StrictMode,{children:r.jsx(tT,{children:r.jsx(O3,{children:r.jsx(I3,{children:r.jsx(xP,{children:r.jsxs(ID,{children:["   ",r.jsx(TD,{})]})})})})})}));
