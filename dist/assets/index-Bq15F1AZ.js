const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/refundService-DmZcahjw.js","assets/vendor-firebase-DPNhE71o.js","assets/vendor-react-COcEUdcw.js","assets/vendor-icons-D6Ng0IbK.js","assets/vendor-paypal-DO3GBzXH.js"])))=>i.map(i=>d[i]);
import{r as a,a as fn,u as gl,b as gs,L as re,c as la,N as _a,d as jn,e as Pe,R as yn,B as Nn}from"./vendor-react-COcEUdcw.js";import{g as pl,a as wn,i as vn,b as kn,c as Sn,d as Cn,e as na,f as An,h as In,o as Dn,j as Ce,k as X,u as xe,s as Ze,l as Rn,q as pe,w as be,m as te,n as As,p as Ss,r as Pn,t as ue,v as pr,x as Xe,y as Fe,z as J,A as Tn,T as ia,B as as,C as ks,D as $n,E as bl,F as $t,R as qr,G as Fn,H as js,I as ot,J as ys,K as kt,L as En}from"./vendor-firebase-DPNhE71o.js";import{A as Is,S as Ve,U as os,B as dt,H as Et,X as _e,M as _n,a as fl,P as Oe,b as Da,T as Ue,c as ms,C as br,I as ir,d as ws,e as Ys,f as De,g as Zt,h as fs,i as ds,F as zr,j as es,L as ts,N as Qs,k as Ra,G as Es,l as ls,m as _t,n as Ws,V as On,o as Ln,p as cr,q as Mn,r as Ut,s as st,t as us,u as fr,v as Gs,w as Un,x as jr,y as Bt,z as Ks,D as Kt,E as Cs,J as ss,K as Ye,O as or,Q as Ct,R as ps,W as dr,Y as vs,Z as xt,_ as jl,$ as Ft,a0 as yl,a1 as yr,a2 as it,a3 as Pa,a4 as nt,a5 as mt,a6 as Hr,a7 as Qr,a8 as Nl,a9 as hs,aa as Bn,ab as Nr,ac as qe,ad as Vn,ae as ea,af as Ta,ag as Ms,ah as cs,ai as ca,aj as wl,ak as ht,al as ut,am as vt,an as Wr,ao as qn,ap as wr,aq as $a,ar as sa,as as ct,at as Ls,au as Ot,av as zn,aw as ta,ax as Hn,ay as Za,az as Qn,aA as Gr,aB as aa,aC as Jt,aD as St,aE as vl,aF as Wn,aG as Gn,aH as Yn,aI as Kn,aJ as xr,aK as Jn,aL as Xn,aM as ra,aN as Zn,aO as ei,aP as Yr,aQ as si,aR as mr,aS as vr,aT as Oa,aU as ti,aV as Kr,aW as ai,aX as kl,aY as hr,aZ as ri,a_ as li,a$ as kr,b0 as Sl,b1 as ur,b2 as ni,b3 as Jr,b4 as Cl,b5 as ii,b6 as ci,b7 as Sr,b8 as oi}from"./vendor-icons-D6Ng0IbK.js";import{P as Al,a as Il}from"./vendor-paypal-DO3GBzXH.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const y of c)if(y.type==="childList")for(const r of y.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(c){const y={};return c.integrity&&(y.integrity=c.integrity),c.referrerPolicy&&(y.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?y.credentials="include":c.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function i(c){if(c.ep)return;c.ep=!0;const y=n(c);fetch(c.href,y)}})();var Dl={exports:{}},La={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var di=a,xi=Symbol.for("react.element"),mi=Symbol.for("react.fragment"),hi=Object.prototype.hasOwnProperty,ui=di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gi={key:!0,ref:!0,__self:!0,__source:!0};function Rl(s,t,n){var i,c={},y=null,r=null;n!==void 0&&(y=""+n),t.key!==void 0&&(y=""+t.key),t.ref!==void 0&&(r=t.ref);for(i in t)hi.call(t,i)&&!gi.hasOwnProperty(i)&&(c[i]=t[i]);if(s&&s.defaultProps)for(i in t=s.defaultProps,t)c[i]===void 0&&(c[i]=t[i]);return{$$typeof:xi,type:s,key:y,ref:r,props:c,_owner:ui.current}}La.Fragment=mi;La.jsx=Rl;La.jsxs=Rl;Dl.exports=La;var e=Dl.exports,gr={},Xr=fn;gr.createRoot=Xr.createRoot,gr.hydrateRoot=Xr.hydrateRoot;const pi={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},Ns=pl().length?wn():vn(pi),bs=pl().length>0?kn(Ns):Sn(Ns,{persistence:[An,In]}),S=Cn(Ns),gt=na(Ns);let Fa=null,Sa="default";async function bi(){try{return"serviceWorker"in navigator?"Notification"in window?(Fa=await navigator.serviceWorker.register("/sw.js"),console.log("‚úÖ Service Worker registered:",Fa),Sa=await Notification.requestPermission(),Sa==="granted"?(console.log("‚úÖ ÿ™ŸÖ ŸÖŸÜÿ≠ ÿ•ÿ∞ŸÜ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"),!0):(console.warn("‚ö†Ô∏è ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ•ÿ∞ŸÜ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™:",Sa),!1)):(console.warn("‚ö†Ô∏è ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÑÿß ŸäÿØÿπŸÖ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"),!1):(console.warn("‚ö†Ô∏è ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÑÿß ŸäÿØÿπŸÖ Service Worker"),!1)}catch(s){return console.error("‚ùå ŸÅÿ¥ŸÑ ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™:",s),!1}}async function fi(){if(!("Notification"in window))return"denied";if(Notification.permission==="granted")return"granted";const s=await Notification.requestPermission();return Sa=s,s}async function ji(s,t,n){try{if(Notification.permission!=="granted"&&(console.warn("‚ö†Ô∏è ŸÑÿß ŸäŸàÿ¨ÿØ ÿ•ÿ∞ŸÜ ŸÑŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"),await fi()!=="granted"))return!1;if(Fa)return await Fa.showNotification(s,{body:t,icon:(n==null?void 0:n.icon)||"/icon-192.png",badge:"/icon-192.png",tag:(n==null?void 0:n.tag)||"notification-"+Date.now(),data:{url:(n==null?void 0:n.url)||"/"},requireInteraction:!0,dir:"rtl",lang:"ar"}),!0;const i=new Notification(s,{body:t,icon:(n==null?void 0:n.icon)||"/icon-192.png",tag:(n==null?void 0:n.tag)||"notification-"+Date.now(),dir:"rtl",lang:"ar",requireInteraction:!0});return i.onclick=()=>{window.focus(),n!=null&&n.url&&(window.location.href=n.url),i.close()},!0}catch(i){return console.error("‚ùå ŸÅÿ¥ŸÑ ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±:",i),!1}}const Wt="broast_session_location",Pl=a.createContext({user:null,role:null,loading:!0,logout:async()=>{},userLocation:null,locationRequired:!1,refreshUserData:async()=>{}}),yi=({children:s})=>{const[t,n]=a.useState(null),[i,c]=a.useState(null),[y,r]=a.useState(!0),[k,$]=a.useState(null),[M,I]=a.useState(!1),N=async()=>{if(!t)return;const p=await Ce(X(S,"users",t.uid));if(p.exists()){const f=p.data(),_=f==null?void 0:f.role,m=f==null?void 0:f.location,j=f==null?void 0:f.savedLocation;if(_==="customer"||_==="admin"){const L=j?{lat:j.lat,lng:j.lng}:m||null;$(L),L&&sessionStorage.setItem(Wt,JSON.stringify(L))}else $(m||null),m&&sessionStorage.setItem(Wt,JSON.stringify(m));I(!1)}};a.useEffect(()=>{const p=Dn(bs,async f=>{if(n(f),f){const _=await Ce(X(S,"users",f.uid)),m=_.data(),j=_.exists()?m==null?void 0:m.role:null;c(j);const L=m==null?void 0:m.location,g=m==null?void 0:m.savedLocation,d=sessionStorage.getItem(Wt),h=d?JSON.parse(d):null;let F=null;if(j==="customer"||j==="admin"?F=g?{lat:g.lat,lng:g.lng}:h||L||null:F=h||L||null,$(F),j==="customer"||j==="admin"){const D=!!g||!!h;!D&&navigator.geolocation?navigator.geolocation.getCurrentPosition(async b=>{const E={lat:b.coords.latitude,lng:b.coords.longitude,address:"ŸÖŸàŸÇÿπŸä ÿßŸÑÿ≠ÿßŸÑŸä (ÿ™ŸÑŸÇÿßÿ¶Ÿä)"};try{await xe(X(S,"users",f.uid),{savedLocation:E,location:{lat:E.lat,lng:E.lng}}),$({lat:E.lat,lng:E.lng}),sessionStorage.setItem(Wt,JSON.stringify({lat:E.lat,lng:E.lng})),I(!1)}catch(o){console.warn("ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä:",o)}},b=>{console.warn("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã:",b),I(!0)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):I(!D),g&&!h&&sessionStorage.setItem(Wt,JSON.stringify({lat:g.lat,lng:g.lng}))}else I(j==="owner"||j==="courier"?!L:!1);if(j==="owner")try{const D=X(S,"restaurants",f.uid);(await Ce(D)).exists()||await Ze(D,{name:(m==null?void 0:m.restaurantName)||(m==null?void 0:m.name)||"ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ",ownerId:f.uid,email:(m==null?void 0:m.email)||f.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(D){console.warn("ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ≥ÿ™ŸÜÿØ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÑŸÑŸÖÿßŸÑŸÉ",D)}try{await bi(),console.log("‚úÖ ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™")}catch(D){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™:",D)}}else c(null),$(null),I(!1);r(!1)});return()=>p()},[]);const A=async()=>{await Rn(bs)};return e.jsx(Pl.Provider,{value:{user:t,role:i,loading:y,logout:A,userLocation:k,locationRequired:M,refreshUserData:N},children:s})},$e=()=>a.useContext(Pl),Je=({to:s,label:t,icon:n,onClick:i})=>{const{pathname:c}=gl(),y=c===s;return e.jsxs(re,{to:s,onClick:i,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(y?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20"),children:[n,e.jsx("span",{children:t})]})},Ni=()=>{const{user:s,role:t,logout:n}=$e(),[i,c]=a.useState(!1),[y,r]=a.useState(0),k=gl(),$=gs(),M=k.pathname==="/";return a.useEffect(()=>{c(!1)},[k.pathname]),a.useEffect(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[i]),a.useEffect(()=>{if(!(s!=null&&s.uid)){r(0);return}const I=pe(te(S,"notifications"),be("recipientId","==",s.uid),be("read","==",!1)),N=As(I,A=>{r(A.size)},A=>{console.warn("Notifications listener error:",A),r(0)});return()=>N()},[s==null?void 0:s.uid]),e.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30 relative z-30",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[!M&&e.jsx("button",{onClick:()=>$(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"ÿ±ÿ¨Ÿàÿπ",children:e.jsx(Is,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-xl sm:text-2xl",children:"üçó"})}),e.jsx("span",{className:"text-lg sm:text-2xl",children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]})]}),e.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[e.jsx(Je,{to:"/restaurants",label:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ",icon:e.jsx(Ve,{className:"w-4 h-4"})}),t==="customer"&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{to:"/cart",label:"üõí ÿßŸÑÿ≥ŸÑÿ©"}),e.jsx(Je,{to:"/orders",label:"ÿ∑ŸÑÿ®ÿßÿ™Ÿä"}),e.jsx(Je,{to:"/profile",label:"ÿ®ŸäÿßŸÜÿßÿ™Ÿä",icon:e.jsx(os,{className:"w-4 h-4"})})]}),t==="owner"&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{to:"/owner",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx(Je,{to:"/owner/orders",label:"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx(Je,{to:"/owner/courier-requests",label:"ÿßŸÑŸÖŸÜÿØŸàÿ®ŸäŸÜ"})]}),t==="courier"&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{to:"/courier",label:"Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖŸÜÿØŸàÿ®"}),e.jsx(Je,{to:"/courier/hiring",label:"ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ"})]}),t==="admin"&&e.jsx(Je,{to:"/admin",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©"}),t==="developer"&&e.jsx(Je,{to:"/developer",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±"}),s&&e.jsxs(re,{to:"/notifications",className:"relative p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™",children:[e.jsx(dt,{className:"w-5 h-5"}),y>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold animate-pulse",children:y>9?"9+":y})]}),s&&e.jsx(re,{to:"/support",className:"p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä / ÿ¥ŸÉŸàŸâ",children:e.jsx(Et,{className:"w-5 h-5"})}),s?e.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:"ÿÆÿ±Ÿàÿ¨"}):e.jsx(Je,{to:"/login",label:"ÿØÿÆŸàŸÑ"})]}),e.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white text-sky-600 shadow-lg hover:shadow-xl transition",onClick:()=>c(!i),children:i?e.jsx(_e,{className:"w-6 h-6"}):e.jsx(_n,{className:"w-6 h-6"})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>c(!1)}),e.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${i?"translate-x-0":"translate-x-full"}
      `,style:{background:"linear-gradient(to bottom, #0ea5e9, #0369a1)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[e.jsx("span",{className:"text-white font-bold text-lg",children:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"}),e.jsx("button",{onClick:()=>c(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:e.jsx(_e,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[e.jsx(Je,{to:"/restaurants",label:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ",icon:e.jsx(Ve,{className:"w-5 h-5"}),onClick:()=>c(!1)}),t==="customer"&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{to:"/cart",label:"ÿßŸÑÿ≥ŸÑÿ©",icon:e.jsx(fl,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx(Je,{to:"/orders",label:"ÿ∑ŸÑÿ®ÿßÿ™Ÿä",icon:e.jsx(Oe,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx(Je,{to:"/profile",label:"ÿ®ŸäÿßŸÜÿßÿ™Ÿä",icon:e.jsx(os,{className:"w-5 h-5"}),onClick:()=>c(!1)})]}),t==="owner"&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{to:"/owner",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑ÿπŸÖ",icon:e.jsx(Da,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx(Je,{to:"/owner/orders",label:"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ",icon:e.jsx(Oe,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx(Je,{to:"/owner/courier-requests",label:"ÿßŸÑŸÖŸÜÿØŸàÿ®ŸäŸÜ",icon:e.jsx(Ue,{className:"w-5 h-5"}),onClick:()=>c(!1)})]}),t==="courier"&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{to:"/courier",label:"Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖŸÜÿØŸàÿ®",icon:e.jsx(Ue,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx(Je,{to:"/courier/hiring",label:"ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ",icon:e.jsx(Oe,{className:"w-5 h-5"}),onClick:()=>c(!1)})]}),t==="admin"&&e.jsx(Je,{to:"/admin",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©",icon:e.jsx(ms,{className:"w-5 h-5"}),onClick:()=>c(!1)}),t==="developer"&&e.jsx(Je,{to:"/developer",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±",icon:e.jsx(br,{className:"w-5 h-5"}),onClick:()=>c(!1)}),s&&e.jsx(Je,{to:"/notifications",label:`ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ${y>0?`(${y})`:""}`,icon:e.jsx(dt,{className:"w-5 h-5"}),onClick:()=>c(!1)}),s&&e.jsx(Je,{to:"/support",label:"ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä / ÿ¥ŸÉŸàŸâ",icon:e.jsx(Et,{className:"w-5 h-5"}),onClick:()=>c(!1)}),e.jsx("div",{className:"h-px bg-white/20 my-2"}),s?e.jsx("button",{onClick:()=>{n(),c(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨"}):e.jsx(Je,{to:"/login",label:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",icon:e.jsx(Da,{className:"w-5 h-5"}),onClick:()=>c(!1)})]})]})]})},Tl=a.createContext(null),Ds=()=>{const s=a.useContext(Tl);if(!s)throw new Error("useDialog must be used within DialogProvider");return s},wi=({children:s})=>{const[t,n]=a.useState({isOpen:!1,message:"",type:"confirm"}),i=a.useCallback($=>new Promise(M=>{n({...$,isOpen:!0,resolve:M})}),[]),c=a.useCallback($=>{t.resolve&&t.resolve($),n(M=>({...M,isOpen:!1}))},[t.resolve]),y=a.useCallback(async()=>{t.onConfirm&&await t.onConfirm(),c(!0)},[t.onConfirm,c]),r=a.useCallback(()=>{t.onCancel&&t.onCancel(),c(!1)},[t.onCancel,c]),k=a.useMemo(()=>({confirm:($,M={})=>i({message:$,type:"confirm",title:M.title||"ÿ™ÿ£ŸÉŸäÿØ",confirmText:M.confirmText||"ÿ™ÿ£ŸÉŸäÿØ",cancelText:M.cancelText||"ÿ•ŸÑÿ∫ÿßÿ°",...M}),alert:($,M={})=>i({message:$,type:"alert",title:M.title||"ÿ™ŸÜÿ®ŸäŸá",confirmText:M.confirmText||"ÿ≠ÿ≥ŸÜÿßŸã",...M}).then(()=>{}),success:($,M={})=>i({message:$,type:"success",title:M.title||"ÿ™ŸÖ ÿ®ŸÜÿ¨ÿßÿ≠",confirmText:M.confirmText||"ÿ≠ÿ≥ŸÜÿßŸã",...M}).then(()=>{}),error:($,M={})=>i({message:$,type:"error",title:M.title||"ÿÆÿ∑ÿ£",confirmText:M.confirmText||"ÿ≠ÿ≥ŸÜÿßŸã",...M}).then(()=>{}),warning:($,M={})=>i({message:$,type:"warning",title:M.title||"ÿ™ÿ≠ÿ∞Ÿäÿ±",confirmText:M.confirmText||"ÿ≠ÿ≥ŸÜÿßŸã",...M}).then(()=>{}),info:($,M={})=>i({message:$,type:"info",title:M.title||"ŸÖÿπŸÑŸàŸÖÿ©",confirmText:M.confirmText||"ÿ≠ÿ≥ŸÜÿßŸã",...M}).then(()=>{})}),[i]);return e.jsxs(Tl.Provider,{value:k,children:[s,e.jsx(vi,{...t,onConfirm:y,onCancel:r})]})},vi=({isOpen:s,title:t,message:n,type:i="confirm",confirmText:c="ÿ™ÿ£ŸÉŸäÿØ",cancelText:y="ÿ•ŸÑÿ∫ÿßÿ°",dangerous:r,onConfirm:k,onCancel:$})=>{if(!s)return null;const I={confirm:{icon:e.jsx(ir,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:r?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:e.jsx(ws,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:e.jsx(De,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:e.jsx(Ys,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:e.jsx(ws,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:e.jsx(ir,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[i],N=i==="confirm";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:$}),e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{className:"relative p-6 pb-0",children:[e.jsx("button",{onClick:$,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`w-16 h-16 rounded-full ${I.iconBg} ${I.iconColor} flex items-center justify-center`,children:I.icon})}),e.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:t})]}),e.jsx("div",{className:"p-6 pt-3",children:e.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),e.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${N?"flex-row-reverse":"justify-center"}`,children:[e.jsx("button",{onClick:k,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${I.buttonColor}`,children:c}),N&&e.jsx("button",{onClick:$,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:y})]})]})}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},ki=()=>{const{user:s}=$e(),t=gs(),n=Ds(),i=async()=>{if(!(!s||!await n.confirm("Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ° ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜŸá. ÿ≥Ÿäÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ŸÜŸáÿßÿ¶ŸäŸãÿß.",{title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÜŸáÿßÿ¶ŸäŸãÿßÿü",dangerous:!0,confirmText:"ŸÜÿπŸÖÿå ÿßÿ≠ÿ∞ŸÅ ÿ≠ÿ≥ÿßÿ®Ÿä",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°"})))try{await Ss(X(S,"users",s.uid)),await Pn(bs.currentUser),n.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠"),t("/account-deleted")}catch(y){console.error("Error deleting account:",y),n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ®. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÑÿßÿ≠ŸÇŸãÿß.")}};return e.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl sm:text-3xl",children:"üçó"})}),e.jsx("span",{className:"text-xl sm:text-2xl font-black",children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]}),e.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["ÿµŸÜÿπ ÿ®ŸÄ ",e.jsx(Zt,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"})," ŸÅŸä ÿßŸÑÿ≥ÿπŸàÿØŸäÿ© ¬© ",new Date().getFullYear()]}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[e.jsxs(re,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(ms,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"ÿßŸÑÿÆÿµŸàÿµŸäÿ©"]}),s&&e.jsxs(re,{to:"/report-problem",className:"flex items-center gap-1.5 sm:gap-2 bg-amber-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-amber-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(ws,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"ÿ•ÿ®ŸÑÿßÿ∫ ÿπŸÜ ŸÖÿ¥ŸÉŸÑÿ©"]}),e.jsxs(re,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(br,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"ÿßŸÑŸÖÿ∑Ÿàÿ±"]}),s&&e.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(fs,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"ÿ≠ÿ∞ŸÅ ÿ≠ÿ≥ÿßÿ®Ÿä"]})]}),e.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ© ŸÑŸÄ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]})})},Si=()=>e.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[e.jsx(ds,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),e.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"‚ú® ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ‚Äî ÿ£ÿ¥ŸáŸâ ÿßŸÑÿ£ŸÉŸÑÿßÿ™ ÿ™ŸàÿµŸÑŸÉ ŸÑŸäŸÜ ÿ®ÿßÿ® ÿ®Ÿäÿ™ŸÉ! üöóüí®"}),e.jsx(ds,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),Ci=()=>e.jsx("div",{className:"w-full bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500 text-white py-1.5 overflow-hidden",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(zr,{className:"w-4 h-4 text-white animate-pulse flex-shrink-0"}),e.jsx("div",{className:"beta-marquee whitespace-nowrap font-bold text-xs tracking-wide",children:"üß™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÅŸä ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ© (Beta) ‚Äî ŸÜÿπŸÖŸÑ ÿπŸÑŸâ ÿ™ÿ≠ÿ≥ŸäŸÜŸá ÿ®ÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±! üöÄ"}),e.jsx(zr,{className:"w-4 h-4 text-white animate-pulse flex-shrink-0"})]})}),Ai=({onLocationSaved:s})=>{const{user:t,role:n}=$e(),[i,c]=a.useState(null),[y,r]=a.useState(!1),[k,$]=a.useState(!1),[M,I]=a.useState(null),[N,A]=a.useState(!1),[p,f]=a.useState(!1),_={lat:24.7136,lng:46.6753},m=a.useCallback(()=>{if(!navigator.geolocation){I("ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÑÿß ŸäÿØÿπŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ");return}$(!0),I(null),navigator.geolocation.getCurrentPosition(g=>{const d={lat:g.coords.latitude,lng:g.coords.longitude};c(d),$(!1),window.locationRequiredMap&&(window.locationRequiredMap.setView([d.lat,d.lng],17),window.locationRequiredMarker&&window.locationRequiredMarker.setLatLng([d.lat,d.lng]))},g=>{$(!1),g.code===1?I("ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ•ÿ∞ŸÜ ÿßŸÑŸÖŸàŸÇÿπ. ŸÅÿπŸëŸÑ ÿßŸÑŸÖŸàŸÇÿπ ŸÖŸÜ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ™ÿµŸÅÿ≠"):g.code===2?I("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ŸÅÿπŸäŸÑ GPS"):I("ÿßŸÜÿ™Ÿáÿ™ ŸÖŸáŸÑÿ© ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);a.useEffect(()=>{if(!document.getElementById("leaflet-css")){const g=document.createElement("link");g.id="leaflet-css",g.rel="stylesheet",g.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(g)}if(window.L)A(!0);else{const g=document.createElement("script");g.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",g.onload=()=>A(!0),document.body.appendChild(g)}},[]),a.useEffect(()=>{if(!N||!window.L)return;const g=window.L;if(!document.getElementById("location-required-map"))return;window.locationRequiredMap&&window.locationRequiredMap.remove();const h=i||_,F=g.map("location-required-map",{zoomControl:!0,attributionControl:!1}).setView([h.lat,h.lng],12);g.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(F);const D=g.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;">üìç</div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),b=g.marker([h.lat,h.lng],{icon:D,draggable:!0}).addTo(F);return b.on("dragend",()=>{const E=b.getLatLng();c({lat:E.lat,lng:E.lng})}),F.on("click",E=>{const{lat:o,lng:w}=E.latlng;c({lat:o,lng:w}),b.setLatLng([o,w])}),window.locationRequiredMap=F,window.locationRequiredMarker=b,()=>{window.locationRequiredMap&&(window.locationRequiredMap.remove(),window.locationRequiredMap=null,window.locationRequiredMarker=null)}},[N]);const j=async()=>{if(!(!i||!t)){f(!0);try{if(await xe(X(S,"users",t.uid),{location:i,locationUpdatedAt:new Date}),n==="owner")try{await xe(X(S,"restaurants",t.uid),{geoLocation:i,locationUpdatedAt:new Date})}catch(g){console.warn("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ŸÖŸàŸÇÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ:",g)}s()}catch{I("ŸÅÿ¥ŸÑ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑŸÖŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{f(!1)}}},L=()=>{switch(n){case"owner":return"ŸÖÿ∑ÿπŸÖŸÉ";case"courier":return"ŸÖŸàŸÇÿπŸÉ ÿßŸÑÿ≠ÿßŸÑŸä";default:return"ŸÖŸàŸÇÿπŸÉ"}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-sky-50 via-white to-sky-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 p-6 text-white text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(es,{className:"w-10 h-10"})}),e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["ÿ≠ÿØÿØ ŸÖŸàŸÇÿπ ",L()]}),e.jsx("p",{className:"text-sky-100 text-sm",children:n==="owner"?"ŸÑÿπÿ±ÿ∂ ŸÖÿ∑ÿπŸÖŸÉ ŸÑŸÑÿπŸÖŸÑÿßÿ° ÿßŸÑŸÇÿ±Ÿäÿ®ŸäŸÜ ŸÖŸÜŸÉ":"ŸÑŸÜÿπÿ±ÿ∂ ŸÑŸÉ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜŸÉ (15 ŸÉŸÖ)"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[M&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 flex items-center gap-3 text-red-700",children:[e.jsx(ws,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:M})]}),e.jsx("button",{onClick:m,disabled:k,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:k?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπŸÉ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qs,{className:"w-5 h-5"}),"üìç ÿ≠ÿØÿØ ŸÖŸàŸÇÿπŸä ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã"]})}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"ÿ£Ÿà ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ© ŸÑÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ŸäÿØŸàŸäÿßŸã"}),e.jsx("div",{id:"location-required-map",className:"h-64 rounded-xl overflow-hidden border-2 border-gray-200",style:{background:"#f0f9ff"}}),!N&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:e.jsx(ts,{className:"w-8 h-8 animate-spin text-sky-500"})})]}),i&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 flex items-center gap-3 text-green-700",children:[e.jsx(De,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold",children:"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ‚úì"}),e.jsxs("p",{className:"text-xs text-green-600",children:[i.lat.toFixed(6),", ",i.lng.toFixed(6)]})]})]}),e.jsx("button",{onClick:j,disabled:!i||p,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:p?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏..."]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"w-5 h-5"}),"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ŸàÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©"]})}),e.jsx("p",{className:"text-xs text-gray-400 text-center",children:"üí° ŸäŸÖŸÉŸÜŸÉ ÿ™ÿ∫ŸäŸäÿ± ŸÖŸàŸÇÿπŸÉ ŸÑÿßÿ≠ŸÇÿßŸã ŸÖŸÜ ÿµŸÅÿ≠ÿ© ÿßŸÑÿ®ÿ±ŸàŸÅÿßŸäŸÑ"})]})]})})};function $l(s,t){const i=ha(t.lat-s.lat),c=ha(t.lng-s.lng),y=Math.sin(i/2)*Math.sin(i/2)+Math.cos(ha(s.lat))*Math.cos(ha(t.lat))*Math.sin(c/2)*Math.sin(c/2);return 6371*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))}function ha(s){return s*(Math.PI/180)}const Ca=15,Ii=()=>{var p;const{user:s,role:t,loading:n,logout:i,userLocation:c}=$e();gs();const[y,r]=a.useState([]),[k,$]=a.useState([]),[M,I]=a.useState([]),[N,A]=a.useState(!0);return a.useEffect(()=>{if(n)return;(async()=>{try{const m=(await ue(te(S,"restaurants"))).docs.map(o=>({id:o.id,...o.data()})),L=(await ue(te(S,"menuItems"))).docs.map(o=>({id:o.id,...o.data()})),g=new Map;L.forEach(o=>{o.available!==!1&&g.set(o.ownerId,(g.get(o.ownerId)||0)+1)});let d=m.filter(o=>!!o.logoUrl&&!!o.geoLocation&&(g.get(o.id)||0)>0);c&&(d=d.map(o=>({...o,distance:o.geoLocation?$l(c,o.geoLocation):void 0})).filter(o=>o.distance!==void 0&&o.distance<=Ca).sort((o,w)=>o.packageType==="premium"&&w.packageType!=="premium"?-1:w.packageType==="premium"&&o.packageType!=="premium"?1:(o.distance||999)-(w.distance||999))),$(d.slice(0,6));const h=pe(te(S,"offers"),be("isActive","==",!0)),F=await ue(h),D=new Date,b=F.docs.map(o=>{var w,U;return{id:o.id,...o.data(),expiresAt:(U=(w=o.data().expiresAt)==null?void 0:w.toDate)==null?void 0:U.call(w)}}).filter(o=>!o.expiresAt||new Date(o.expiresAt)>D).slice(0,4);r(b);const E=L.filter(o=>o.available!==!1&&(o.orderCount||0)>0).sort((o,w)=>(w.orderCount||0)-(o.orderCount||0)).slice(0,4).map(o=>{const w=m.find(U=>U.id===o.ownerId);return{...o,restaurantName:w==null?void 0:w.name}});I(E)}catch(_){console.error("Error loading data:",_)}finally{A(!1)}})()},[n,c]),n?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-20 h-20 mb-4 bg-gradient-to-br from-sky-400 to-sky-600 rounded-3xl flex items-center justify-center shadow-xl shadow-sky-500/30 animate-pulse",children:e.jsx("span",{className:"text-4xl",children:"üçΩÔ∏è"})})}),e.jsx(ts,{className:"w-6 h-6 text-sky-500 animate-spin mb-2"}),e.jsx("p",{className:"text-sky-600 font-semibold",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 pb-24",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-sky-200/30 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative px-4 py-6 max-w-lg mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-3 bg-gradient-to-br from-sky-400 to-sky-600 rounded-3xl flex items-center justify-center shadow-xl shadow-sky-500/30",children:e.jsx("span",{className:"text-4xl",children:"üçΩÔ∏è"})}),e.jsx("h1",{className:"text-2xl font-black text-sky-700",children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}),e.jsx("p",{className:"text-sky-600/70 text-sm",children:"ÿ£ÿ¥ŸáŸâ ÿßŸÑÿ£ŸÉŸÑÿßÿ™ ÿßŸÑÿ®Ÿäÿ™Ÿäÿ© ÿ™ŸàÿµŸÑŸÉ üöó"}),s&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-white/80 px-4 py-2 rounded-full shadow-sm",children:[e.jsx("span",{className:"text-sky-600",children:"ÿ£ŸáŸÑÿßŸã"}),e.jsx("span",{className:"font-bold text-gray-800",children:s.displayName||((p=s.email)==null?void 0:p.split("@")[0])}),e.jsx("span",{children:"üëã"})]})]}),!s&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(re,{to:"/restaurants",className:"block bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 shadow-xl shadow-sky-500/30 active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"üè™"})}),e.jsxs("div",{className:"text-white text-right",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ÿ™ÿµŸÅÿ≠ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿßŸÉÿ™ÿ¥ŸÅ ÿ£ÿ¥ŸáŸâ ÿßŸÑÿ£ŸÉŸÑÿßÿ™"})]})]}),e.jsx(Ra,{className:"w-6 h-6 text-white/80"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(re,{to:"/login",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üîë"}),e.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"ÿØÿÆŸàŸÑ"})]}),e.jsxs(re,{to:"/register",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"‚ú®"}),e.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ¨ÿØŸäÿØ"})]})]})]}),t==="customer"&&e.jsxs("div",{className:"space-y-5",children:[e.jsx(re,{to:"/restaurants",className:"block bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 shadow-xl shadow-emerald-500/30 active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-5xl block mb-2",children:"üç¥"}),e.jsx("h2",{className:"text-2xl font-black text-white",children:"ÿßÿ∑ŸÑÿ® ÿßŸÑÿ¢ŸÜ!"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ŸÖŸÜ ÿ£ÿ¥ŸáŸâ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ÿßŸÑŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜŸÉ"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(re,{to:"/cart",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üõí"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"ÿßŸÑÿ≥ŸÑÿ©"})]}),e.jsxs(re,{to:"/orders",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üì¶"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"ÿ∑ŸÑÿ®ÿßÿ™Ÿä"})]}),e.jsxs(re,{to:"/profile",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üë§"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"ÿ≠ÿ≥ÿßÿ®Ÿä"})]})]})]}),y.length>0&&(!s||t==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5 text-pink-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"üéÅ ÿπÿ±Ÿàÿ∂ ÿßŸÑÿ£ÿ≥ÿ±"})]}),e.jsx(re,{to:"/restaurants",className:"text-sky-500 text-sm font-semibold",children:"ÿßŸÑŸÖÿ≤ŸäÿØ ‚Üê"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.map(f=>{const _=f.offerType==="percent_discount"?"from-amber-400 to-orange-500":f.offerType==="fixed_discount"?"from-green-400 to-emerald-500":f.offerType==="bundle_meal"?"from-purple-400 to-violet-500":"from-pink-400 to-rose-500";return e.jsxs(re,{to:`/menu?restaurant=${f.ownerId}`,className:"bg-white rounded-xl shadow-md overflow-hidden active:scale-95 transition-all",children:[e.jsxs("div",{className:`bg-gradient-to-r ${_} p-3 text-white`,children:[e.jsx("p",{className:"font-bold text-sm line-clamp-1",children:f.title}),e.jsxs("p",{className:"text-xl font-black",children:[f.offerType==="percent_discount"&&`${f.discountPercent}% ÿÆÿµŸÖ`,f.offerType==="fixed_discount"&&`ŸàŸÅŸëÿ± ${f.discountAmount} ÿ±.ÿ≥`,f.offerType==="bundle_meal"&&`${f.bundlePrice} ÿ±.ÿ≥`,f.offerType==="buy_x_get_y"&&`${f.buyQuantity}+${f.getQuantity} ŸÖÿ¨ÿßŸÜÿßŸã`]})]}),e.jsxs("div",{className:"p-2 flex items-center gap-2",children:[f.restaurantLogo?e.jsx("img",{src:f.restaurantLogo,alt:"",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-sky-100 flex items-center justify-center",children:e.jsx(Ve,{className:"w-4 h-4 text-sky-500"})}),e.jsx("span",{className:"text-xs font-semibold text-gray-700 truncate",children:f.restaurantName||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©"})]})]},f.id)})})]}),k.length>0&&(!s||t==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-sky-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"üè† ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜŸÉ"})]}),e.jsx(re,{to:"/restaurants",className:"text-sky-500 text-sm font-semibold",children:"ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ ‚Üê"})]}),e.jsx("div",{className:"space-y-3",children:k.map(f=>e.jsxs(re,{to:`/menu?restaurant=${f.id}`,className:"flex items-center gap-3 bg-white rounded-xl p-3 shadow-md active:scale-[0.98] transition-all",children:[f.logoUrl?e.jsx("img",{src:f.logoUrl,alt:f.name,className:"w-14 h-14 rounded-xl object-cover"}):e.jsx("div",{className:"w-14 h-14 rounded-xl bg-sky-100 flex items-center justify-center",children:e.jsx(Ve,{className:"w-7 h-7 text-sky-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 truncate",children:f.name}),f.packageType==="premium"&&e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded",children:"‚≠ê"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1",children:[f.distance!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qs,{className:"w-3 h-3"}),f.distance.toFixed(1)," ŸÉŸÖ"]}),f.averageRating&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ls,{className:"w-3 h-3 fill-amber-400 text-amber-400"}),f.averageRating.toFixed(1)]}),f.city&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(es,{className:"w-3 h-3"}),f.city]})]})]}),e.jsx(Ra,{className:"w-5 h-5 text-gray-400"})]},f.id))})]}),M.length>0&&(!s||t==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_t,{className:"w-5 h-5 text-orange-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"üî• ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ∑ŸÑÿ®ÿßŸã"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:M.map(f=>e.jsxs(re,{to:`/menu?restaurant=${f.ownerId}`,className:"bg-white rounded-xl shadow-md overflow-hidden active:scale-95 transition-all",children:[e.jsxs("div",{className:"relative aspect-square bg-sky-50",children:[f.imageUrl?e.jsx("img",{src:f.imageUrl,alt:f.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ws,{className:"w-10 h-10 text-sky-300"})}),e.jsxs("span",{className:"absolute top-2 right-2 bg-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(_t,{className:"w-3 h-3"}),f.orderCount,"+"]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-bold text-sm text-gray-800 line-clamp-1",children:f.name}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:f.restaurantName}),e.jsxs("p",{className:"font-bold text-sky-600 text-sm mt-1",children:[f.price," ÿ±.ÿ≥"]})]})]},f.id))})]}),t==="owner"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(re,{to:"/owner",className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üìä"}),e.jsx("h3",{className:"font-bold text-sm",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ"})]}),e.jsxs(re,{to:"/owner/orders",className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üìã"}),e.jsx("h3",{className:"font-bold text-sm",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsxs(re,{to:"/owner/menu",className:"bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üçΩÔ∏è"}),e.jsx("h3",{className:"font-bold text-sm",children:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"})]}),e.jsxs(re,{to:"/owner/edit",className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"‚öôÔ∏è"}),e.jsx("h3",{className:"font-bold text-sm",children:"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™"})]})]}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨"})]}),t==="courier"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(re,{to:"/courier",className:"block bg-gradient-to-r from-sky-500 to-blue-600 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-4xl",children:"üöó"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿßÿ≥ÿ™ŸÑŸÖ ŸàÿßŸàÿµŸÑ ÿ∑ŸÑÿ®ÿßÿ™"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(re,{to:"/courier/wallet",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üí∞"}),e.jsx("span",{className:"font-bold text-gray-700 text-sm",children:"ŸÖÿ≠ŸÅÿ∏ÿ™Ÿä"})]}),e.jsxs(re,{to:"/profile",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üë§"}),e.jsx("span",{className:"font-bold text-gray-700 text-sm",children:"ÿ≠ÿ≥ÿßÿ®Ÿä"})]})]}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨"})]}),t==="admin"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(re,{to:"/admin",className:"block bg-gradient-to-r from-violet-500 to-purple-600 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ms,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"})]})]})}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨"})]}),t==="developer"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(re,{to:"/developer",className:"block bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(br,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±"}),e.jsx("p",{className:"text-white/60 text-sm",children:"ÿ™ÿ≠ŸÉŸÖ ŸÉÿßŸÖŸÑ"})]})]})}),e.jsx("button",{onClick:i,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-sky-500/50 text-xs",children:"ÿµŸèŸÜÿπ ÿ®ŸÄ ‚ù§Ô∏è ŸÅŸä ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©"})})]})]})},Ma=["ÿßŸÑÿ±Ÿäÿßÿ∂","ÿ¨ÿØÿ©","ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©","ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©","ÿßŸÑÿØŸÖÿßŸÖ","ÿßŸÑÿÆÿ®ÿ±","ÿßŸÑÿ∏Ÿáÿ±ÿßŸÜ","ÿßŸÑÿ£ÿ≠ÿ≥ÿßÿ°","ÿßŸÑŸÇÿ∑ŸäŸÅ","ÿßŸÑÿ∑ÿßÿ¶ŸÅ","ÿ™ÿ®ŸàŸÉ","ÿ®ÿ±ŸäÿØÿ©","ÿπŸÜŸäÿ≤ÿ©","ÿ≠ÿßÿ¶ŸÑ","ÿÆŸÖŸäÿ≥ ŸÖÿ¥Ÿäÿ∑","ÿ£ÿ®Ÿáÿß","ŸÜÿ¨ÿ±ÿßŸÜ","ÿ¨ÿßÿ≤ÿßŸÜ","ŸäŸÜÿ®ÿπ","ÿßŸÑÿ¨ÿ®ŸäŸÑ","ÿ≠ŸÅÿ± ÿßŸÑÿ®ÿßÿ∑ŸÜ","ÿßŸÑÿÆÿ±ÿ¨","ÿ£ŸÖŸÑÿ¨","ÿßŸÑÿπŸÑÿß","ÿ±ÿßÿ®ÿ∫","ÿßŸÑŸÇŸÜŸÅÿ∞ÿ©","ÿ®Ÿäÿ¥ÿ©","ÿµÿ®Ÿäÿß","ÿßŸÑÿ®ÿßÿ≠ÿ©","ÿπÿ±ÿπÿ±","ÿ≥ŸÉÿßŸÉÿß","ÿßŸÑÿØŸàÿßÿØŸÖŸä","ÿßŸÑŸÖÿ¨ŸÖÿπÿ©","ÿßŸÑÿ≤ŸÑŸÅŸä","ÿ¥ŸÇÿ±ÿßÿ°","ŸàÿßÿØŸä ÿßŸÑÿØŸàÿßÿ≥ÿ±","ÿ±ŸÅÿ≠ÿßÿ°","ÿ∑ÿ±ŸäŸÅ","ÿßŸÑŸÇÿ±Ÿäÿßÿ™","ÿ£ÿÆÿ±Ÿâ"],Di=({storyGroups:s,initialGroupIndex:t,currentUserId:n,onClose:i})=>{var F;const[c,y]=a.useState(t),[r,k]=a.useState(0),[$,M]=a.useState(0),[I,N]=a.useState(!1),[A,p]=a.useState(!0),f=a.useRef(null),_=a.useRef(null),m=s[c],j=m==null?void 0:m.stories[r],L=(j==null?void 0:j.type)==="video"?15e3:5e3,g=a.useCallback(async D=>{var b;if(!(!n||!D.id)&&!((b=D.viewedBy)!=null&&b.includes(n)))try{await xe(X(S,"stories",D.id),{viewsCount:Xe(1),viewedBy:pr(n)})}catch(E){console.warn("Error recording view:",E)}},[n]),d=a.useCallback(()=>{r<m.stories.length-1?(k(D=>D+1),M(0)):c<s.length-1?(y(D=>D+1),k(0),M(0)):i()},[r,c,m,s.length,i]),h=a.useCallback(()=>{if(r>0)k(D=>D-1),M(0);else if(c>0){y(b=>b-1);const D=s[c-1];k(D.stories.length-1),M(0)}},[r,c,s]);return a.useEffect(()=>{if(!j||I)return;g(j);const D=Date.now(),b=setInterval(()=>{const o=(Date.now()-D)/L*100;o>=100?(clearInterval(b),d()):M(o)},50);return _.current=b,()=>clearInterval(b)},[j,I,L,d,g]),a.useEffect(()=>{f.current&&(I?f.current.pause():f.current.play().catch(()=>{}))},[I,j]),a.useEffect(()=>{const D=b=>{b.key==="Escape"&&i(),b.key==="ArrowRight"&&d(),b.key==="ArrowLeft"&&h(),b.key===" "&&N(E=>!E)};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[i,d,h]),j?e.jsxs("div",{className:"fixed inset-0 z-[100] bg-black flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900 to-black"}),e.jsxs("div",{className:"relative w-full max-w-md h-full max-h-[100vh] flex flex-col",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 z-20 flex gap-1 p-2",children:m.stories.map((D,b)=>e.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white transition-all duration-100",style:{width:b<r?"100%":b===r?`${$}%`:"0%"}})},b))}),e.jsxs("div",{className:"absolute top-6 left-0 right-0 z-20 flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[m.restaurantLogo?e.jsx("img",{src:m.restaurantLogo,alt:"",className:"w-10 h-10 rounded-full border-2 border-white object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold",children:((F=m.restaurantName)==null?void 0:F.charAt(0))||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold text-sm",children:m.restaurantName}),e.jsx("p",{className:"text-white/60 text-xs",children:new Date(j.createdAt||Date.now()).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j.type==="video"&&e.jsx("button",{onClick:()=>p(!A),className:"p-2 text-white/80 hover:text-white",children:A?e.jsx(On,{className:"w-5 h-5"}):e.jsx(Ln,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>N(!I),className:"p-2 text-white/80 hover:text-white",children:I?e.jsx(cr,{className:"w-5 h-5"}):e.jsx(Mn,{className:"w-5 h-5"})}),e.jsx("button",{onClick:i,className:"p-2 text-white/80 hover:text-white",children:e.jsx(_e,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center relative",onClick:D=>{const b=D.currentTarget.getBoundingClientRect(),E=D.clientX-b.left;E<b.width/3?h():E>b.width*2/3?d():N(o=>!o)},children:[j.type==="text"?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-8",style:{backgroundColor:j.backgroundColor},children:e.jsx("p",{className:"text-center text-2xl font-bold leading-relaxed",style:{color:j.textColor},children:j.caption})}):j.type==="video"?e.jsx("video",{ref:f,src:j.mediaUrl,className:"w-full h-full object-contain",autoPlay:!0,playsInline:!0,muted:A,loop:!1}):e.jsx("img",{src:j.mediaUrl,alt:"",className:"w-full h-full object-contain"}),j.caption&&j.type!=="text"&&e.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4",children:e.jsx("div",{className:"bg-black/50 backdrop-blur-sm rounded-xl p-3",children:e.jsx("p",{className:"text-white text-sm",children:j.caption})})})]}),c>0&&e.jsx("button",{onClick:h,className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/20 rounded-full hover:bg-white/30 transition z-30",children:e.jsx(Ut,{className:"w-6 h-6 text-white"})}),c<s.length-1&&e.jsx("button",{onClick:d,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/20 rounded-full hover:bg-white/30 transition z-30",children:e.jsx(st,{className:"w-6 h-6 text-white"})}),j.menuItemId&&e.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-20",children:e.jsxs("a",{href:`/menu?restaurant=${j.ownerId}`,className:"flex items-center justify-center gap-2 w-full py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-bold shadow-lg",onClick:D=>{D.stopPropagation(),i()},children:[e.jsx(us,{className:"w-5 h-5"}),"ÿßÿ∑ŸÑÿ® ",j.menuItemName]})})]}),e.jsx("div",{className:"hidden lg:flex absolute left-4 top-1/2 -translate-y-1/2 flex-col gap-2",children:s.slice(Math.max(0,c-2),c).map((D,b)=>{var E;return e.jsx("button",{onClick:()=>{y(c-(c-b)),k(0),M(0)},className:"w-16 h-16 rounded-xl overflow-hidden border-2 border-white/30 hover:border-white transition opacity-50 hover:opacity-100",children:D.restaurantLogo?e.jsx("img",{src:D.restaurantLogo,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold text-xl",children:(E=D.restaurantName)==null?void 0:E.charAt(0)})},D.ownerId)})}),e.jsx("div",{className:"hidden lg:flex absolute right-4 top-1/2 -translate-y-1/2 flex-col gap-2",children:s.slice(c+1,c+3).map((D,b)=>{var E;return e.jsx("button",{onClick:()=>{y(c+b+1),k(0),M(0)},className:"w-16 h-16 rounded-xl overflow-hidden border-2 border-white/30 hover:border-white transition opacity-50 hover:opacity-100",children:D.restaurantLogo?e.jsx("img",{src:D.restaurantLogo,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold text-xl",children:(E=D.restaurantName)==null?void 0:E.charAt(0)})},D.ownerId)})})]}):null},Ea={startDate:new Date("2026-02-17T00:00:00"),endDate:new Date("2026-03-15T23:59:59"),iftarTimes:{ÿßŸÑÿ±Ÿäÿßÿ∂:{hour:18,minute:5},ÿ¨ÿØÿ©:{hour:18,minute:25},"ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©":{hour:18,minute:25},"ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©":{hour:18,minute:15},ÿßŸÑÿØŸÖÿßŸÖ:{hour:17,minute:50},ÿßŸÑÿÆÿ®ÿ±:{hour:17,minute:50},ÿßŸÑÿ∑ÿßÿ¶ŸÅ:{hour:18,minute:20},ÿ™ÿ®ŸàŸÉ:{hour:18,minute:25},ÿ®ÿ±ŸäÿØÿ©:{hour:18,minute:5},ÿ≠ÿßÿ¶ŸÑ:{hour:18,minute:10},ÿ£ÿ®Ÿáÿß:{hour:18,minute:15},ŸÜÿ¨ÿ±ÿßŸÜ:{hour:18,minute:10},ÿ¨ÿßÿ≤ÿßŸÜ:{hour:18,minute:20},ÿßŸÑÿ£ÿ≠ÿ≥ÿßÿ°:{hour:17,minute:55},default:{hour:18,minute:10}}},Lt=()=>{const s=new Date;return s>=Ea.startDate&&s<=Ea.endDate},Ri=(s="default")=>Ea.iftarTimes[s]||Ea.iftarTimes.default,Zr=(s="default")=>{const t=new Date,n=Ri(s),i=new Date(t);return i.setHours(n.hour,n.minute,0,0),t>i?0:Math.floor((i.getTime()-t.getTime())/1e3)},Pi=s=>{const t=Math.floor(s/3600),n=Math.floor(s%3600/60),i=s%60;return{hours:t.toString().padStart(2,"0"),minutes:n.toString().padStart(2,"0"),seconds:i.toString().padStart(2,"0")}},Ti={discount:{label:"ÿÆÿµŸÖ ÿÆÿßÿµ",emoji:"üè∑Ô∏è",color:"from-rose-500 to-pink-600"},iftar_package:{label:"ÿ®ÿßŸÇÿ© ÿ•ŸÅÿ∑ÿßÿ±",emoji:"üçΩÔ∏è",color:"from-amber-500 to-orange-600"},suhoor_package:{label:"ÿ®ÿßŸÇÿ© ÿ≥ÿ≠Ÿàÿ±",emoji:"üåô",color:"from-indigo-500 to-purple-600"},family_bundle:{label:"ÿπÿ±ÿ∂ ÿπÿßÿ¶ŸÑŸä",emoji:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶",color:"from-emerald-500 to-teal-600"}},$i=({onClose:s})=>{const[t,n]=a.useState(!0);if(!Lt()||!t)return null;const i=()=>{n(!1),s==null||s()};return e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-800 via-purple-700 to-emerald-800 rounded-2xl p-5 mb-6 shadow-xl shadow-purple-900/30",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-2 right-4",children:"üåô"}),e.jsx("div",{className:"absolute top-3 left-8",children:"‚ú®"}),e.jsx("div",{className:"absolute bottom-2 right-12",children:"‚≠ê"}),e.jsx("div",{className:"absolute bottom-3 left-4",children:"üèÆ"})]}),e.jsx("button",{onClick:i,className:"absolute top-2 left-2 p-1.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(_e,{className:"w-4 h-4 text-white/80"})}),e.jsxs("div",{className:"relative text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-3xl",children:"üåô"}),e.jsx("h2",{className:"text-2xl font-black text-amber-300",children:"ÿπÿ±Ÿàÿ∂ ÿ±ŸÖÿ∂ÿßŸÜ"}),e.jsx("span",{className:"text-3xl",children:"‚ú®"})]}),e.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:"ÿßÿ≥ÿ™ŸÖÿ™ÿπ ÿ®ÿ£ÿ¥ŸáŸâ ÿ£ÿ∑ÿ®ÿßŸÇ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ÿ®ÿπÿ±Ÿàÿ∂ ÿÆÿßÿµÿ©"}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-white/10 backdrop-blur px-4 py-1.5 rounded-full",children:[e.jsx(fr,{className:"w-4 h-4 text-amber-300"}),e.jsx("span",{className:"text-amber-200 text-sm font-medium",children:"ÿ®ÿßŸÇÿßÿ™ ÿ•ŸÅÿ∑ÿßÿ± Ÿàÿ≥ÿ≠Ÿàÿ±"})]})]})]})},Fi=({city:s="ÿßŸÑÿ±Ÿäÿßÿ∂"})=>{const[t,n]=a.useState(Zr(s));if(a.useEffect(()=>{if(!Lt())return;const r=setInterval(()=>{const k=Zr(s);n(k)},1e3);return()=>clearInterval(r)},[s]),!Lt()||t<=0)return null;const{hours:i,minutes:c,seconds:y}=Pi(t);return e.jsx("div",{className:"bg-gradient-to-r from-amber-600 via-orange-600 to-amber-600 rounded-2xl p-4 mb-4 shadow-lg shadow-amber-500/30",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"üïå"}),e.jsx("span",{className:"text-white/90 text-sm font-medium",children:"ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä ŸÑŸÑÿ•ŸÅÿ∑ÿßÿ±"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl px-4 py-2 min-w-[70px]",children:[e.jsx("div",{className:"text-3xl font-black text-white",children:i}),e.jsx("div",{className:"text-white/70 text-xs",children:"ÿ≥ÿßÿπÿ©"})]}),e.jsx("span",{className:"text-2xl text-white/80 font-bold",children:":"}),e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl px-4 py-2 min-w-[70px]",children:[e.jsx("div",{className:"text-3xl font-black text-white",children:c}),e.jsx("div",{className:"text-white/70 text-xs",children:"ÿØŸÇŸäŸÇÿ©"})]}),e.jsx("span",{className:"text-2xl text-white/80 font-bold",children:":"}),e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl px-4 py-2 min-w-[70px]",children:[e.jsx("div",{className:"text-3xl font-black text-white animate-pulse",children:y}),e.jsx("div",{className:"text-white/70 text-xs",children:"ÿ´ÿßŸÜŸäÿ©"})]})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-2",children:["üìç ",s]})]})})},Ei=[{value:"",label:"ÿßŸÑŸÉŸÑ"},{value:"traditional",label:"üçö ÿ£ŸÉŸÑÿßÿ™ ÿ¥ÿπÿ®Ÿäÿ©"},{value:"sweets",label:"üç∞ ÿ≠ŸÑŸàŸäÿßÿ™"},{value:"pastries",label:"ü•ß ŸÖÿπÿ¨ŸÜÿßÿ™"},{value:"grills",label:"üçñ ŸÖÿ¥ŸàŸäÿßÿ™"},{value:"healthy",label:"ü•ó ÿ£ŸÉŸÑ ÿµÿ≠Ÿä"},{value:"international",label:"üåç ÿ£ŸÉŸÑÿßÿ™ ÿπÿßŸÑŸÖŸäÿ©"}],el=async(s,t,n)=>{try{await Fe(te(S,"visitLogs"),{restaurantId:s,visitorId:t||null,visitorType:t?"customer":"anonymous",source:n||"direct",page:"menu",createdAt:J()});const i=X(S,"restaurantStats",s),c=await Ce(i),y=new Date().toISOString().split("T")[0];if(c.exists()){const k=c.data().dailyViews||{};k[y]=(k[y]||0)+1,await xe(i,{totalProfileViews:Xe(1),dailyViews:k,updatedAt:J()})}else await Ze(i,{totalProfileViews:1,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:0,appDownloads:0,dailyViews:{[y]:1},updatedAt:J()})}catch(i){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ©:",i)}},_i=()=>{var Y,ce,ie,je,ge;const{userLocation:s,role:t,user:n}=$e(),[i]=la(),c=i.get("ref"),[y,r]=a.useState([]),[k,$]=a.useState([]),[M,I]=a.useState([]),[N,A]=a.useState([]),[p,f]=a.useState([]),[_,m]=a.useState(!1),[j,L]=a.useState(0),[g,d]=a.useState(0),[h,F]=a.useState(!0),[D,b]=a.useState(""),[E,o]=a.useState("grid"),[w,U]=a.useState(""),[B,Q]=a.useState(""),[O,C]=a.useState(0),[P,x]=a.useState(!1),[z,R]=a.useState("distance");a.useEffect(()=>{(async()=>{const se=(await ue(te(S,"restaurants"))).docs.map(oe=>({id:oe.id,...oe.data()})),Z=(await ue(te(S,"menuItems"))).docs.map(oe=>({id:oe.id,...oe.data()})),G=new Map;Z.forEach(oe=>{if(oe.available!==!1){const Ne=G.get(oe.ownerId)||0;G.set(oe.ownerId,Ne+1)}});const K=se.filter(oe=>{if(t==="developer"||t==="admin"||t==="owner")return!0;const Ne=!!oe.logoUrl,W=!!oe.geoLocation,ee=(G.get(oe.id)||0)>0;return Ne&&W&&ee});try{const oe=Z.filter(Ne=>Ne.available!==!1&&(Ne.orderCount||0)>0).sort((Ne,W)=>(W.orderCount||0)-(Ne.orderCount||0)).slice(0,6).map(Ne=>{const W=K.find(ee=>ee.id===Ne.ownerId);return{...Ne,restaurantName:W==null?void 0:W.name,restaurantLogo:W==null?void 0:W.logoUrl}});I(oe)}catch(oe){console.warn("Error loading top items:",oe)}try{const oe=pe(te(S,"promotions"),be("isActive","==",!0)),Ne=await ue(oe),W=new Date,ee=Ne.docs.map(ne=>{var le,he;return{id:ne.id,...ne.data(),expiresAt:(he=(le=ne.data().expiresAt)==null?void 0:le.toDate)==null?void 0:he.call(le)}}).filter(ne=>!ne.expiresAt||new Date(ne.expiresAt)>W).map(ne=>{const le=K.find(he=>he.id===ne.ownerId);return{...ne,restaurantName:le==null?void 0:le.name}});$(ee)}catch(oe){console.warn("Error loading promotions:",oe)}try{const oe=pe(te(S,"offers"),be("isActive","==",!0)),Ne=await ue(oe),W=new Date,ee=Ne.docs.map(ne=>{var le,he;return{id:ne.id,...ne.data(),expiresAt:(he=(le=ne.data().expiresAt)==null?void 0:le.toDate)==null?void 0:he.call(le)}}).filter(ne=>!ne.expiresAt||new Date(ne.expiresAt)>W).slice(0,8);A(ee)}catch(oe){console.warn("Error loading special offers:",oe)}try{const oe=await ue(te(S,"stories")),Ne=new Date,W=oe.docs.map(le=>{var he,ve,Ae,Me;return{id:le.id,...le.data(),expiresAt:(ve=(he=le.data().expiresAt)==null?void 0:he.toDate)==null?void 0:ve.call(he),createdAt:(Me=(Ae=le.data().createdAt)==null?void 0:Ae.toDate)==null?void 0:Me.call(Ae)}}).filter(le=>le.expiresAt&&new Date(le.expiresAt)>Ne).sort((le,he)=>{var ve,Ae;return(((ve=he.createdAt)==null?void 0:ve.getTime())||0)-(((Ae=le.createdAt)==null?void 0:Ae.getTime())||0)}),ee=new Map;W.forEach(le=>{var Me;const he=ee.get(le.ownerId),ve=K.find(Te=>Te.id===le.ownerId),Ae=!(n!=null&&n.uid)||!((Me=le.viewedBy)!=null&&Me.includes(n.uid));he?(he.stories.push(le),Ae&&(he.hasUnviewed=!0)):ee.set(le.ownerId,{ownerId:le.ownerId,restaurantName:le.restaurantName||(ve==null?void 0:ve.name),restaurantLogo:le.restaurantLogo||(ve==null?void 0:ve.logoUrl),stories:[le],hasUnviewed:Ae})});const ne=Array.from(ee.values()).sort((le,he)=>(he.hasUnviewed?1:0)-(le.hasUnviewed?1:0));f(ne)}catch(oe){console.warn("Error loading stories:",oe)}let me=[];s?(me=K.map(oe=>{if(oe.geoLocation){const Ne=$l(s,oe.geoLocation);return{...oe,distance:Ne}}return{...oe,distance:void 0}}),(t==="customer"||t==="courier")&&(me=me.filter(oe=>!oe.geoLocation||oe.distance===void 0?!1:oe.distance<=Ca)),me.sort((oe,Ne)=>{const W=oe.packageType==="premium"?1:0,ee=Ne.packageType==="premium"?1:0;if(ee!==W)return ee-W;const ne={gold:3,silver:2,bronze:1},le=ne[oe.sellerTier||"bronze"]||0,he=ne[Ne.sellerTier||"bronze"]||0;if(he!==le)return he-le;const ve=oe.isVerified?1:0,Ae=Ne.isVerified?1:0;return Ae!==ve?Ae-ve:(oe.distance||999)-(Ne.distance||999)})):me=K.sort((oe,Ne)=>{const W={gold:3,silver:2,bronze:1},ee=W[oe.sellerTier||"bronze"]||0,ne=W[Ne.sellerTier||"bronze"]||0;if(ne!==ee)return ne-ee;const le=oe.isVerified?1:0;return(Ne.isVerified?1:0)-le}),r(me),F(!1)})()},[s,t]);const u=a.useMemo(()=>{const T=new Set(y.map(se=>se.city).filter(Boolean));return Ma.filter(se=>T.has(se))},[y]),v=a.useMemo(()=>{let T=y;if(D&&(T=T.filter(se=>se.city===D)),w.trim()){const se=w.trim().toLowerCase();T=T.filter(ye=>{var Z;return ye.name.toLowerCase().includes(se)||((Z=ye.city)==null?void 0:Z.toLowerCase().includes(se))})}return B&&(T=T.filter(se=>se.cuisineType===B)),O>0&&(T=T.filter(se=>(se.averageRating||0)>=O)),z==="rating"?T=[...T].sort((se,ye)=>(ye.averageRating||0)-(se.averageRating||0)):z==="orders"&&(T=[...T].sort((se,ye)=>(ye.totalOrders||0)-(se.totalOrders||0))),T},[y,D,w,B,O,z]),H=[D,w,B,O>0].filter(Boolean).length;return h?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-sky-200 border-t-sky-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-sky-600 font-semibold",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©..."})]}):e.jsxs("div",{className:"pb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-6 text-sky-700",children:"üç¥ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),p.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2",children:[e.jsx(cr,{className:"w-5 h-5 text-pink-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"üì∏ ÿ≥ÿ™Ÿàÿ±Ÿä ÿßŸÑÿ£ÿ≥ÿ±"})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 px-2 scrollbar-hide",children:p.map((T,se)=>e.jsxs("button",{onClick:()=>{L(se),m(!0)},className:"flex-shrink-0 flex flex-col items-center gap-1 group",children:[e.jsxs("div",{className:`relative p-[3px] rounded-full ${T.hasUnviewed?"bg-gradient-to-tr from-amber-400 via-pink-500 to-purple-600":"bg-gray-300"}`,children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white p-[2px]",children:T.restaurantLogo?e.jsx("img",{src:T.restaurantLogo,alt:T.restaurantName||"Restaurant",className:"w-full h-full rounded-full object-cover"}):e.jsx("div",{className:"w-full h-full rounded-full bg-sky-100 flex items-center justify-center",children:e.jsx(Ve,{className:"w-7 h-7 text-sky-400"})})}),T.stories.length>1&&e.jsx("span",{className:"absolute -bottom-1 -left-1 w-5 h-5 bg-pink-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border-2 border-white",children:T.stories.length})]}),e.jsx("span",{className:"text-[11px] text-gray-600 font-medium text-center line-clamp-1 max-w-[70px]",children:T.restaurantName||"ÿ£ÿ≥ÿ±ÿ©"})]},T.ownerId))})]}),_&&p.length>0&&e.jsx(Di,{storyGroups:p,initialGroupIndex:j,currentUserId:n==null?void 0:n.uid,onClose:()=>m(!1)}),e.jsxs("div",{className:"mb-5 px-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ£ÿ≥ÿ±ÿ© ÿ£Ÿà ŸÖŸÜÿ∑ŸÇÿ©...",value:w,onChange:T=>U(T.target.value),className:"w-full bg-white border-2 border-sky-200 rounded-xl py-3 pr-10 pl-12 text-gray-800 placeholder:text-gray-400 focus:border-sky-500 focus:outline-none shadow-sm transition"}),e.jsxs("button",{onClick:()=>x(!P),className:`absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-lg transition ${P||H>0?"bg-sky-500 text-white":"bg-sky-100 text-sky-600 hover:bg-sky-200"}`,children:[e.jsx(Un,{className:"w-4 h-4"}),H>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:H})]})]}),P&&e.jsxs("div",{className:"mt-3 bg-white rounded-xl p-4 border border-sky-100 shadow-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"ÿ™ÿ±ÿ™Ÿäÿ® ÿ≠ÿ≥ÿ®"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>R("distance"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${z==="distance"?"bg-sky-500 text-white":"bg-sky-50 text-sky-700"}`,children:[e.jsx(Qs,{className:"w-3 h-3 inline ml-1"}),"ÿßŸÑÿ£ŸÇÿ±ÿ®"]}),e.jsxs("button",{onClick:()=>R("rating"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${z==="rating"?"bg-sky-500 text-white":"bg-sky-50 text-sky-700"}`,children:[e.jsx(ls,{className:"w-3 h-3 inline ml-1"}),"ÿßŸÑÿ£ÿπŸÑŸâ ÿ™ŸÇŸäŸäŸÖÿßŸã"]}),e.jsxs("button",{onClick:()=>R("orders"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${z==="orders"?"bg-sky-500 text-white":"bg-sky-50 text-sky-700"}`,children:[e.jsx(us,{className:"w-3 h-3 inline ml-1"}),"ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ∑ŸÑÿ®ÿßŸã"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"ŸÜŸàÿπ ÿßŸÑŸÖÿ∑ÿ®ÿÆ"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Ei.map(T=>e.jsx("button",{onClick:()=>Q(T.value),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${B===T.value?"bg-amber-500 text-white":"bg-amber-50 text-amber-700"}`,children:T.label},T.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:["ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ™ŸÇŸäŸäŸÖ: ",O>0?`${O}+ ‚≠ê`:"ÿßŸÑŸÉŸÑ"]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[0,3,3.5,4,4.5].map(T=>e.jsx("button",{onClick:()=>C(T),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition flex items-center gap-1 ${O===T?"bg-yellow-500 text-white":"bg-yellow-50 text-yellow-700"}`,children:T===0?"ÿßŸÑŸÉŸÑ":e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"w-3 h-3 fill-current"}),T,"+"]})},T))})]}),H>0&&e.jsxs("button",{onClick:()=>{U(""),b(""),Q(""),C(0),R("distance")},className:"w-full py-2 bg-red-50 text-red-500 rounded-lg font-medium hover:bg-red-100 transition flex items-center justify-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ (",H,")"]})]})]}),Lt()&&e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx($i,{})}),e.jsx("div",{className:"mb-6",children:e.jsx(Fi,{city:"ÿßŸÑÿ±Ÿäÿßÿ∂"})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-900 via-purple-800 to-emerald-900 rounded-3xl p-6 mb-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-4 text-4xl opacity-30 animate-pulse",children:"üåô"}),e.jsx("div",{className:"absolute bottom-2 left-4 text-3xl opacity-20",children:"‚ú®"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 text-2xl opacity-20",children:"üèÆ"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-4xl",children:"üèùÔ∏è"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white",children:"ÿπÿ±Ÿàÿ∂ ÿ±ŸÖÿ∂ÿßŸÜ"}),e.jsx("p",{className:"text-purple-200 text-sm",children:"ÿ®ÿßŸÇÿßÿ™ ÿ•ŸÅÿ∑ÿßÿ± Ÿàÿ≥ÿ≠Ÿàÿ± ŸÖŸÖŸäÿ≤ÿ©"})]})]}),e.jsx("div",{className:"bg-amber-400 text-purple-900 text-xs font-bold px-3 py-1.5 rounded-full",children:"üåô ÿπÿ±Ÿàÿ∂ ÿ≠ÿµÿ±Ÿäÿ©"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:["iftar_package","suhoor_package","family_bundle","discount"].map(T=>{const se=Ti[T];return e.jsxs(re,{to:`/restaurants?offer_type=${T}`,className:"bg-white/10 backdrop-blur rounded-xl p-4 text-center hover:bg-white/20 transition-all group",children:[e.jsx("span",{className:"text-3xl block mb-2 group-hover:scale-110 transition-transform",children:se.emoji}),e.jsx("span",{className:"text-white font-bold text-sm",children:se.label})]},T)})}),e.jsxs("div",{className:"mt-4 bg-amber-400/20 rounded-xl p-3 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üë®‚Äçüç≥"}),e.jsx("p",{className:"text-amber-200 text-sm flex-1",children:"ŸáŸÑ ÿ£ŸÜÿ™ ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©ÿü ÿ£ÿ∂ŸÅ ÿπÿ±Ÿàÿ∂ŸÉ ÿßŸÑÿ±ŸÖÿ∂ÿßŸÜŸäÿ© Ÿàÿßÿ≥ÿ™ŸÇÿ®ŸÑ ÿ∑ŸÑÿ®ÿßÿ™ ÿ£ŸÉÿ´ÿ±!"}),e.jsx(re,{to:"/owner/offers?type=ramadan",className:"bg-amber-400 text-purple-900 px-4 py-2 rounded-xl font-bold text-sm whitespace-nowrap hover:bg-amber-300 transition",children:"ÿ£ÿ∂ŸÅ ÿπÿ±ÿ∂ŸÉ"})]})]})]})]}),M.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-6 h-6 text-orange-500"}),e.jsx("h2",{className:"text-xl font-bold text-sky-700",children:"üî• ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ∑ŸÑÿ®Ÿãÿß ÿßŸÑŸäŸàŸÖ"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[M.length," ÿ£ÿµŸÜÿßŸÅ"]})]}),e.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:M.map(T=>e.jsxs(re,{to:`/menu?restaurant=${T.ownerId}`,className:"group bg-white border border-sky-100 rounded-2xl shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 overflow-hidden",children:[e.jsxs("div",{className:"relative aspect-square bg-sky-50",children:[T.imageUrl?e.jsx("img",{src:T.imageUrl,alt:T.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ws,{className:"w-10 h-10 text-sky-300"})}),e.jsxs("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-orange-500 to-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow flex items-center gap-1",children:[e.jsx(_t,{className:"w-3 h-3"}),T.orderCount,"+ ÿ∑ŸÑÿ®"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-bold text-sm text-gray-800 line-clamp-1",children:T.name}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mt-0.5",children:T.restaurantName}),e.jsx("div",{className:"flex items-center justify-between mt-2",children:e.jsxs("span",{className:"font-bold text-sky-600 text-sm",children:[T.price," ÿ±.ÿ≥"]})})]})]},T.id))})]}),N.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-6 h-6 text-pink-500"}),e.jsx("h2",{className:"text-xl font-bold text-sky-700",children:"üéÅ ÿπÿ±Ÿàÿ∂ ÿßŸÑÿ£ÿ≥ÿ±"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[N.length," ÿπÿ±ÿ∂"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:N.map(T=>{const se=T.offerType==="percent_discount"?jr:T.offerType==="fixed_discount"?Bt:T.offerType==="bundle_meal"?Oe:Es,ye=T.offerType==="percent_discount"?"from-amber-500 to-orange-500":T.offerType==="fixed_discount"?"from-green-500 to-emerald-500":T.offerType==="bundle_meal"?"from-purple-500 to-violet-500":"from-pink-500 to-rose-500";return e.jsxs(re,{to:`/menu?restaurant=${T.ownerId}`,onClick:async()=>{try{await xe(X(S,"offers",T.id),{viewsCount:Xe(1)})}catch{}},className:"group bg-white rounded-2xl shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:`bg-gradient-to-r ${ye} p-4 text-white relative`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(se,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-xs font-medium opacity-90",children:[T.offerType==="percent_discount"&&"ÿÆÿµŸÖ ŸÜÿ≥ÿ®ÿ©",T.offerType==="fixed_discount"&&"ÿÆÿµŸÖ ŸÖÿ®ŸÑÿ∫",T.offerType==="bundle_meal"&&"Ÿàÿ¨ÿ®ÿ© ÿÆÿßÿµÿ©",T.offerType==="buy_x_get_y"&&"ÿßÿ¥ÿ™ÿ±Ÿê Ÿàÿßÿ≠ÿµŸÑ"]})]}),e.jsx("h3",{className:"font-bold text-lg leading-tight line-clamp-1",children:T.title}),e.jsxs("div",{className:"mt-2 text-sm font-bold",children:[T.offerType==="percent_discount"&&e.jsxs("span",{className:"text-2xl",children:[T.discountPercent,"% ÿÆÿµŸÖ"]}),T.offerType==="fixed_discount"&&e.jsxs("span",{className:"text-2xl",children:["ŸàŸÅŸëÿ± ",T.discountAmount," ÿ±.ÿ≥"]}),T.offerType==="bundle_meal"&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-2xl",children:[T.bundlePrice," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"text-sm opacity-75 line-through mr-2",children:[T.bundleOriginalPrice," ÿ±.ÿ≥"]})]}),T.offerType==="buy_x_get_y"&&e.jsxs("span",{className:"text-xl",children:["ÿßÿ¥ÿ™ÿ±Ÿê ",T.buyQuantity," Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ",T.getQuantity," ŸÖÿ¨ÿßŸÜÿßŸã"]})]})]}),e.jsxs("div",{className:"p-3 flex items-center gap-3",children:[T.restaurantLogo?e.jsx("img",{src:T.restaurantLogo,alt:"",className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-sky-100 flex items-center justify-center",children:e.jsx(Ve,{className:"w-5 h-5 text-sky-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-800 text-sm truncate",children:T.restaurantName||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©"}),T.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:T.description})]})]})]},T.id)})})]}),k.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx(Ks,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"font-bold text-purple-600",children:"ÿ•ÿπŸÑÿßŸÜÿßÿ™ ŸÖŸÖŸäÿ≤ÿ©"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(re,{to:`/menu?restaurant=${(Y=k[g])==null?void 0:Y.ownerId}`,onClick:async()=>{try{await xe(X(S,"promotions",k[g].id),{viewsCount:Xe(1)})}catch{}},className:"block bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[e.jsx(Ks,{className:"w-3 h-3"}),"ÿ•ÿπŸÑÿßŸÜ"]}),((ce=k[g])==null?void 0:ce.mediaUrl)&&e.jsx("div",{className:"relative h-48",children:k[g].type==="video"?e.jsxs(e.Fragment,{children:[e.jsx("video",{src:k[g].mediaUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,autoPlay:!0,playsInline:!0}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx(cr,{className:"w-6 h-6 text-white fill-white"})})})]}):e.jsx("img",{src:k[g].mediaUrl,alt:k[g].title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:((ie=k[g])==null?void 0:ie.restaurantName)&&e.jsx("span",{className:"text-xs bg-white/20 text-white px-2 py-1 rounded-full",children:k[g].restaurantName})}),((je=k[g])==null?void 0:je.title)&&e.jsx("h3",{className:"text-lg font-bold text-white",children:k[g].title}),((ge=k[g])==null?void 0:ge.description)&&e.jsx("p",{className:"text-purple-100 text-sm mt-1 line-clamp-2",children:k[g].description})]})]}),k.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:T=>{T.preventDefault(),d(se=>se===0?k.length-1:se-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:e.jsx(st,{className:"w-5 h-5 text-gray-800"})}),e.jsx("button",{onClick:T=>{T.preventDefault(),d(se=>se===k.length-1?0:se+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:e.jsx(Ut,{className:"w-5 h-5 text-gray-800"})})]}),k.length>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-3",children:k.map((T,se)=>e.jsx("button",{onClick:()=>d(se),className:`w-2 h-2 rounded-full transition ${se===g?"bg-purple-500 w-4":"bg-gray-300"}`},se))})]})]}),u.length>0&&e.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[e.jsx(Kt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©:"})]}),e.jsx("button",{onClick:()=>b(""),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${D?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-sky-500 text-white shadow-lg"}`,children:"ÿßŸÑŸÉŸÑ"}),u.map(T=>e.jsxs("button",{onClick:()=>b(T),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1 ${D===T?"bg-sky-500 text-white shadow-lg":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:[e.jsx(es,{className:"w-4 h-4"}),T]},T)),D&&e.jsx("button",{onClick:()=>b(""),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑŸÅŸÑÿ™ÿ±",children:e.jsx(_e,{className:"w-5 h-5"})})]}),v.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Cs,{className:"w-10 h-10 text-sky-500"})}),s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:"üòî ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜŸÉ"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["ŸÜÿπÿ±ÿ∂ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿ∂ŸÖŸÜ ",Ca," ŸÉŸÖ ŸÅŸÇÿ∑"]})]}):e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:D?`üòî ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ŸÅŸä ${D}`:"üòî ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ÿ≠ÿßŸÑŸäÿßŸã"})})]}),s&&v.length>0&&(t==="customer"||t==="courier")&&e.jsxs("div",{className:"mb-6 bg-sky-50 border border-sky-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(Qs,{className:"w-6 h-6 text-sky-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sky-700 font-semibold",children:"ŸÜÿπÿ±ÿ∂ ŸÑŸÉ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÇÿ±Ÿäÿ®ÿ© ŸÅŸÇÿ∑"}),e.jsxs("p",{className:"text-sky-600 text-sm",children:["ÿßŸÑŸÖÿ≥ÿßŸÅÿ© ÿßŸÑŸÇÿµŸàŸâ ŸÑŸÑÿ™ŸàÿµŸäŸÑ: ",Ca," ŸÉŸÖ"]})]})]}),v.filter(T=>T.packageType==="premium").length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-6 h-6 text-amber-500"}),e.jsx("h2",{className:"text-xl font-bold text-amber-400",children:"‚≠ê ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÖŸäÿ≤ÿ©"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[v.filter(T=>T.packageType==="premium").length," ÿ£ÿ≥ÿ±ÿ©"]})]}),e.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:v.filter(T=>T.packageType==="premium").map(T=>e.jsxs(re,{to:`/menu?restaurant=${T.id}${c?`&ref=${c}`:""}`,onClick:()=>el(T.id,n==null?void 0:n.uid,c||"direct"),className:"group bg-[#1E293B] border border-amber-500/30 rounded-[16px] shadow-lg shadow-amber-500/10 hover:shadow-xl hover:shadow-amber-500/20 hover:-translate-y-2 transform transition-all duration-300 p-3 sm:p-4 flex flex-col items-center text-center relative overflow-hidden active:scale-[0.98]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow flex items-center gap-1",children:[e.jsx(ss,{className:"w-3 h-3"}),"ŸÖŸÖŸäÿ≤ÿ©"]})}),T.distance!==void 0&&e.jsxs("div",{className:"absolute top-2 left-2 bg-sky-500/90 backdrop-blur text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-0.5",children:[e.jsx(Qs,{className:"w-2.5 h-2.5"}),T.distance<1?`${Math.round(T.distance*1e3)}ŸÖ`:`${T.distance.toFixed(1)}ŸÉŸÖ`]}),e.jsxs("div",{className:"relative mt-6 mb-3",children:[T.logoUrl?e.jsx("img",{src:T.logoUrl,alt:T.name,className:"w-20 h-20 object-cover rounded-full border-4 border-amber-400 shadow-lg group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-20 h-20 flex items-center justify-center rounded-full bg-slate-700 border-4 border-amber-400 shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(Ws,{className:"w-8 h-8 text-amber-400"})}),(T.isVerified||T.licenseStatus==="approved")&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-sky-500 rounded-full flex items-center justify-center border-2 border-white shadow-lg",children:e.jsx(De,{className:"w-4 h-4 text-white"})})]}),e.jsx("h3",{className:"font-bold text-sm text-white line-clamp-1",children:T.name}),T.city&&e.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-0.5 mt-1 mb-2",children:[e.jsx(es,{className:"w-3 h-3"}),T.city]}),T.isVerified||T.licenseStatus==="approved"?e.jsxs("div",{className:"bg-sky-500/20 border border-sky-500/50 text-sky-400 text-[11px] font-bold px-3 py-1 rounded-full flex items-center gap-1 mb-2",children:[e.jsx(De,{className:"w-3 h-3"}),"‚úî ŸÖŸàÿ´ŸÇÿ©"]}):T.licenseStatus==="pending"?e.jsxs("div",{className:"bg-amber-500/20 border border-amber-500/50 text-amber-400 text-[11px] font-bold px-3 py-1 rounded-full flex items-center gap-1 mb-2",children:[e.jsx(Ye,{className:"w-3 h-3"}),"‚è≥ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"]}):null,e.jsxs("div",{className:"flex items-center justify-center gap-3 text-[10px] text-gray-400",children:[T.averageRating!==void 0&&T.averageRating>0&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(ls,{className:"w-3 h-3 text-amber-400 fill-amber-400"}),T.averageRating.toFixed(1)]}),T.totalOrders!==void 0&&T.totalOrders>0&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(us,{className:"w-3 h-3"}),T.totalOrders]})]}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[T.sellerTier==="gold"&&e.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full",children:"üëë Gold"}),T.sellerTier==="silver"&&e.jsx("span",{className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full",children:"ü•à Silver"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1.5 justify-center",children:[T.allowDelivery!==!1&&e.jsxs("span",{className:"inline-flex items-center gap-0.5 bg-sky-500/20 text-sky-400 text-[9px] font-medium px-1.5 py-0.5 rounded-full",children:[e.jsx(Ue,{className:"w-2.5 h-2.5"}),"ÿ™ŸàÿµŸäŸÑ"]}),T.allowPickup&&e.jsxs("span",{className:"inline-flex items-center gap-0.5 bg-green-500/20 text-green-400 text-[9px] font-medium px-1.5 py-0.5 rounded-full",children:[e.jsx(Ve,{className:"w-2.5 h-2.5"}),"ÿßÿ≥ÿ™ŸÑÿßŸÖ"]})]})]},T.id))})]}),v.filter(T=>T.packageType!=="premium").length>0&&e.jsxs("div",{children:[v.filter(T=>T.packageType==="premium").length>0&&e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ws,{className:"w-5 h-5 text-gray-400"}),e.jsx("h2",{className:"text-lg font-bold text-gray-300",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿ≥ÿ±"})]}),e.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6",children:v.filter(T=>T.packageType!=="premium").map(T=>e.jsxs(re,{to:`/menu?restaurant=${T.id}${c?`&ref=${c}`:""}`,onClick:()=>el(T.id,n==null?void 0:n.uid,c||"direct"),className:"group bg-[#1E293B] rounded-[16px] shadow-lg shadow-black/20 hover:shadow-xl hover:shadow-black/30 hover:-translate-y-1 transform transition-all duration-300 p-4 sm:p-6 flex flex-col items-center text-center relative overflow-hidden active:scale-[0.98]",children:[T.distance!==void 0&&e.jsxs("div",{className:"absolute top-3 left-3 bg-sky-500/90 backdrop-blur-sm text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[e.jsx(Qs,{className:"w-3 h-3"}),T.distance<1?`${Math.round(T.distance*1e3)} ŸÖ`:`${T.distance.toFixed(1)} ŸÉŸÖ`]}),e.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-1.5",children:[T.sellerTier==="gold"&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-yellow-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow-lg",children:[e.jsx(ss,{className:"w-3 h-3"}),"Gold"]}),T.sellerTier==="silver"&&e.jsxs("div",{className:"bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow-lg",children:[e.jsx(or,{className:"w-3 h-3"}),"Silver"]})]}),e.jsxs("div",{className:"relative mt-2 mb-4",children:[T.logoUrl?e.jsx("img",{src:T.logoUrl,alt:T.name,className:`w-24 h-24 object-cover rounded-full border-4 shadow-lg group-hover:scale-105 transition-transform duration-300 ${T.sellerTier==="gold"?"border-amber-400 ring-4 ring-amber-400/30":T.sellerTier==="silver"?"border-gray-300 ring-4 ring-gray-300/30":"border-slate-500"}`}):e.jsx("div",{className:`w-24 h-24 flex items-center justify-center rounded-full text-4xl border-4 shadow-lg group-hover:scale-105 transition-transform duration-300 ${T.sellerTier==="gold"?"bg-amber-900/50 border-amber-400":T.sellerTier==="silver"?"bg-gray-700 border-gray-300":"bg-slate-700 border-slate-500"}`,children:"üç¥"}),(T.isVerified||T.licenseStatus==="approved")&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-sky-500 rounded-full flex items-center justify-center border-2 border-white shadow-lg",children:e.jsx(De,{className:"w-5 h-5 text-white"})})]}),e.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:T.name}),T.city&&e.jsxs("p",{className:"text-sm text-gray-400 flex items-center justify-center gap-1 mb-3",children:[e.jsx(es,{className:"w-4 h-4"}),T.city]}),T.isVerified||T.licenseStatus==="approved"?e.jsxs("div",{className:"bg-sky-500/20 border border-sky-500/50 text-sky-400 text-sm font-bold px-4 py-1.5 rounded-full flex items-center gap-2 mb-3",children:[e.jsx(De,{className:"w-4 h-4"}),"‚úî ŸÖŸàÿ´ŸÇÿ©"]}):T.licenseStatus==="pending"?e.jsxs("div",{className:"bg-amber-500/20 border border-amber-500/50 text-amber-400 text-sm font-bold px-4 py-1.5 rounded-full flex items-center gap-2 mb-3",children:[e.jsx(Ye,{className:"w-4 h-4"}),"‚è≥ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"]}):null,e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(T.allowDelivery===void 0||T.allowDelivery===!0)&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-sky-500/20 text-sky-400 text-xs font-semibold rounded-full",children:[e.jsx(Ue,{className:"w-3 h-3"}),"ÿ™ŸàÿµŸäŸÑ"]}),T.allowPickup&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-500/20 text-green-400 text-xs font-semibold rounded-full",children:[e.jsx(Ve,{className:"w-3 h-3"}),"ÿßÿ≥ÿ™ŸÑÿßŸÖ"]})]})]},T.id))})]})]})},Oi="modulepreload",Li=function(s){return"/"+s},sl={},et=function(t,n,i){let c=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),k=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));c=Promise.allSettled(n.map($=>{if($=Li($),$ in sl)return;sl[$]=!0;const M=$.endsWith(".css"),I=M?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${$}"]${I}`))return;const N=document.createElement("link");if(N.rel=M?"stylesheet":Oi,M||(N.as="script"),N.crossOrigin="",N.href=$,k&&N.setAttribute("nonce",k),document.head.appendChild(N),M)return new Promise((A,p)=>{N.addEventListener("load",A),N.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${$}`)))})}))}function y(r){const k=new Event("vite:preloadError",{cancelable:!0});if(k.payload=r,window.dispatchEvent(k),!k.defaultPrevented)throw r}return c.then(r=>{for(const k of r||[])k.status==="rejected"&&y(k.reason);return t().catch(y)})},tl="broast_cart";function oa(){const[s,t]=a.useState(()=>{try{const k=localStorage.getItem(tl);return k?JSON.parse(k):[]}catch{return[]}});a.useEffect(()=>{localStorage.setItem(tl,JSON.stringify(s))},[s]);const n=a.useCallback((k,$=1)=>{t(M=>{const I=M.findIndex(N=>N.id===k.id);if(I>=0){const N=[...M];return N[I]={...N[I],qty:N[I].qty+$,ownerId:k.ownerId??N[I].ownerId},N}return[...M,{...k,qty:$}]})},[]),i=a.useCallback(k=>t($=>$.filter(M=>M.id!==k)),[]),c=a.useCallback((k,$)=>{const M=Math.max(1,$);t(I=>I.map(N=>N.id===k?{...N,qty:M}:N))},[]),y=a.useCallback(()=>t([]),[]),r=a.useMemo(()=>s.reduce((k,$)=>k+$.price*$.qty,0),[s]);return{items:s,add:n,remove:i,changeQty:c,clear:y,subtotal:r}}const Fl=a.createContext(null),Qe=()=>{const s=a.useContext(Fl);if(!s)throw new Error("useToast must be used within ToastProvider");return s},Mi=({children:s})=>{const[t,n]=a.useState([]),i=a.useCallback(r=>{n(k=>k.filter($=>$.id!==r))},[]),c=a.useCallback((r,k,$)=>{const M=Math.random().toString(36).slice(2),I={id:M,message:r,type:k,title:$==null?void 0:$.title,duration:($==null?void 0:$.duration)??3e3};n(N=>[...N,I]),I.duration&&I.duration>0&&setTimeout(()=>i(M),I.duration)},[i]),y=a.useMemo(()=>({show:(r,k)=>c(r,(k==null?void 0:k.type)??"info",k),success:(r,k)=>c(r,"success",k),error:(r,k)=>c(r,"error",k),info:(r,k)=>c(r,"info",k),warning:(r,k)=>c(r,"warning",k)}),[c]);return e.jsxs(Fl.Provider,{value:y,children:[s,e.jsx(Vi,{items:t,onClose:i})]})},Ui={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},Bi={success:"‚úî",error:"‚úñ",info:"‚Ñπ",warning:"‚ö†"},Vi=({items:s,onClose:t})=>(a.useEffect(()=>{},[]),e.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[e.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:s.map(n=>e.jsx("div",{className:`pointer-events-auto ${Ui[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-xl leading-none",children:Bi[n.type]}),e.jsxs("div",{className:"flex-1",children:[n.title&&e.jsx("div",{className:"font-bold",children:n.title}),e.jsx("div",{className:"text-sm",children:n.message})]}),e.jsx("button",{onClick:()=>t(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:"√ó"})]})},n.id))}),e.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),qi=(s,t)=>{const n=[];for(let i=0;i<s.length;i+=t)n.push(s.slice(i,i+t));return n},zi=()=>{var Z;const[s,t]=a.useState([]),[n,i]=a.useState(!0),[c,y]=a.useState(null),[r,k]=a.useState(null),[$,M]=a.useState(!0),[I,N]=a.useState(!1),[A,p]=a.useState(null),[f,_]=a.useState(0),[m,j]=a.useState(""),[L,g]=a.useState("all"),[d,h]=a.useState("all"),F=a.useRef(null),{add:D,subtotal:b,items:E,changeQty:o}=oa(),{user:w,role:U}=$e(),B=Qe(),[Q]=la(),O=Q.get("restaurant"),C=1.75,P=a.useMemo(()=>{const G=new Set;return s.forEach(K=>{K.category&&G.add(K.category)}),["all",...Array.from(G)]},[s]),x=a.useMemo(()=>{let G=[...s];if(L!=="all"&&(G=G.filter(K=>K.category===L)),m.trim()){const K=m.toLowerCase();G=G.filter(me=>{var oe,Ne;return me.name.toLowerCase().includes(K)||((oe=me.description)==null?void 0:oe.toLowerCase().includes(K))||((Ne=me.category)==null?void 0:Ne.toLowerCase().includes(K))})}switch(d){case"popular":G.sort((K,me)=>(me.orderCount||0)-(K.orderCount||0));break;case"price_low":G.sort((K,me)=>K.price-me.price);break;case"price_high":G.sort((K,me)=>me.price-K.price);break;case"new":G.sort((K,me)=>{var W,ee,ne,le,he,ve;const oe=((ne=(ee=(W=K.createdAt)==null?void 0:W.toDate)==null?void 0:ee.call(W))==null?void 0:ne.getTime())||0;return(((ve=(he=(le=me.createdAt)==null?void 0:le.toDate)==null?void 0:he.call(le))==null?void 0:ve.getTime())||0)-oe});break;case"available":G=G.filter(K=>K.available!==!1);break}return G},[s,L,m,d]),z=G=>{navigator.clipboard.writeText(G),B.success("ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ! üìã")},R=()=>{navigator.share?navigator.share({title:(c==null?void 0:c.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",text:`ÿ™ŸÅÿ∂ŸÑ ÿ®ÿ≤Ÿäÿßÿ±ÿ© ${c==null?void 0:c.name} ÿπŸÑŸâ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™`,url:window.location.href}):z(window.location.href)};a.useEffect(()=>{if(!O)return;(async()=>{try{const K=pe(te(S,"storeFollowers"),be("restaurantId","==",O)),me=await ue(K);if(_(me.size),w){const oe=pe(te(S,"storeFollowers"),be("restaurantId","==",O),be("followerId","==",w.uid)),Ne=await ue(oe);Ne.empty||(N(!0),p(Ne.docs[0].id))}}catch(K){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©:",K)}})()},[O,w]);const u=async()=>{var G;if(!w){B.warning("ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑŸÉ ÿ£ŸàŸÑÿßŸã ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©");return}if(O)try{if(I&&A){await Ss(X(S,"storeFollowers",A)),N(!1),p(null),_(me=>Math.max(0,me-1));const K=X(S,"restaurantStats",O);await xe(K,{followersCount:Xe(-1)}).catch(()=>{}),B.info("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©")}else{const K=await Fe(te(S,"storeFollowers"),{followerId:w.uid,followerName:w.displayName||((G=w.email)==null?void 0:G.split("@")[0])||"ÿπŸÖŸäŸÑ",restaurantId:O,createdAt:J()});N(!0),p(K.id),_(Ne=>Ne+1);const me=X(S,"restaurantStats",O);if((await Ce(me)).exists())await xe(me,{followersCount:Xe(1)});else{const{setDoc:Ne}=await et(async()=>{const{setDoc:W}=await import("./vendor-firebase-DPNhE71o.js").then(ee=>ee.M);return{setDoc:W}},[]);await Ne(X(S,"restaurantStats",O),{restaurantId:O,totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:0,appDownloads:0,followersCount:1,dailyViews:{},updatedAt:J()})}B.success("ÿ£ŸÜÿ™ ÿßŸÑÿ¢ŸÜ ÿ™ÿ™ÿßÿ®ÿπ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ™ÿ¨ÿ±! üíú")}}catch(K){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©:",K),B.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}};a.useEffect(()=>{(async()=>{let G;if(O){(w==null?void 0:w.uid)===O?G=pe(te(S,"menuItems"),be("ownerId","==",O)):G=pe(te(S,"menuItems"),be("available","==",!0),be("ownerId","==",O));const ne=await Ce(X(S,"restaurants",O));ne.exists()&&y({id:ne.id,...ne.data()});try{const le=pe(te(S,"promotions"),be("ownerId","==",O),be("isActive","==",!0)),he=await ue(le);if(!he.empty){const ve=he.docs.map(Te=>{var Ke,ze;return{id:Te.id,...Te.data(),expiresAt:(ze=(Ke=Te.data().expiresAt)==null?void 0:Ke.toDate)==null?void 0:ze.call(Ke)}}),Ae=new Date,Me=ve.filter(Te=>!Te.expiresAt||new Date(Te.expiresAt)>Ae);if(Me.length>0){const Te=Me[0];k(Te),await xe(X(S,"promotions",Te.id),{viewsCount:Xe(1)})}}}catch{}}else G=pe(te(S,"menuItems"),be("available","==",!0));const me=(await ue(G)).docs.map(ee=>({id:ee.id,...ee.data()})),oe=[...new Set(me.map(ee=>ee.ownerId).filter(Boolean))],Ne=new Map;if(oe.length>0){const ee=qi(oe,30);for(const ne of ee){const le=pe(te(S,"restaurants"),be(Tn(),"in",ne));(await ue(le)).docs.forEach(ve=>Ne.set(ve.id,{id:ve.id,...ve.data()}))}}const W=me.map(ee=>({...ee,restaurant:ee.ownerId?Ne.get(ee.ownerId):void 0}));t(W),i(!1)})()},[O]);const v=G=>E.find(K=>K.id===G),H=G=>{var ne,le,he;if(!G.ownerId){B.warning("‚ö†Ô∏è ÿßŸÑÿµŸÜŸÅ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÖÿ∑ÿπŸÖ");return}const K=(ne=E[0])==null?void 0:ne.ownerId;if(K&&K!==G.ownerId){B.warning("‚ö†Ô∏è ŸÑÿß ŸäŸÖŸÉŸÜ ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖŸÜ ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ŸÖÿ∑ÿπŸÖ ŸÅŸä ŸÜŸÅÿ≥ ÿßŸÑÿ∑ŸÑÿ®");return}const me=G.discountPercent&&G.discountPercent>0,oe=((he=(le=G.discountExpiresAt)==null?void 0:le.toDate)==null?void 0:he.call(le))||(G.discountExpiresAt?new Date(G.discountExpiresAt):null),Ne=me&&(!oe||oe>new Date),W=G.price+C,ee=Ne?W-W*((G.discountPercent||0)/100):W;D({id:G.id,name:G.name,price:ee,ownerId:G.ownerId}),B.success("ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ‚úÖ")},Y=G=>{F.current&&F.current.scrollBy({left:G==="left"?-200:200,behavior:"smooth"})};if(n)return e.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-sky-50 to-white gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-sky-200 rounded-full"}),e.jsx("div",{className:"w-20 h-20 border-4 border-sky-500 border-t-transparent rounded-full animate-spin absolute inset-0"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sky-600 text-lg font-bold mb-1",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÜŸäŸà"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ŸÑÿ≠ÿ∏ÿßÿ™..."})]})]});const ce=!w||U==="customer"||U==="admin"||U==="developer"||!U,ie=(c==null?void 0:c.isOpen)!==!1,je=w&&O===w.uid,ge=E.reduce((G,K)=>G+K.qty,0),se=(G=>{switch(G){case"gold":return{label:"ÿ∞Ÿáÿ®Ÿä",bg:"from-yellow-400 to-amber-500",icon:"üëë"};case"silver":return{label:"ŸÅÿ∂Ÿä",bg:"from-gray-300 to-gray-400",icon:"ü•à"};default:return{label:"ÿ®ÿ±ŸàŸÜÿ≤Ÿä",bg:"from-orange-400 to-orange-500",icon:"ü•â"}}})(c==null?void 0:c.sellerTier),ye=[{value:"all",label:"ÿßŸÑŸÉŸÑ",icon:e.jsx(Ws,{className:"w-4 h-4"})},{value:"popular",label:"ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ∑ŸÑÿ®Ÿãÿß",icon:e.jsx(_t,{className:"w-4 h-4"})},{value:"price_low",label:"ÿßŸÑÿ£ÿ±ÿÆÿµ",icon:e.jsx(xt,{className:"w-4 h-4 rotate-180"})},{value:"price_high",label:"ÿßŸÑÿ£ÿ∫ŸÑŸâ",icon:e.jsx(xt,{className:"w-4 h-4"})},{value:"new",label:"ÿ¨ÿØŸäÿØ",icon:e.jsx(ds,{className:"w-4 h-4"})},{value:"available",label:"ŸÖÿ™ŸàŸÅÿ± ÿßŸÑÿ¢ŸÜ",icon:e.jsx(De,{className:"w-4 h-4"})}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-sky-50 via-white to-sky-50 pb-32 -mx-4 -mt-4",children:[!ie&&!je&&e.jsxs("div",{className:"bg-gradient-to-l from-red-500 to-rose-600 text-white p-4 flex items-center justify-center gap-3 shadow-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Ct,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-lg block",children:"ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖÿ∫ŸÑŸÇ ÿ≠ÿßŸÑŸäÿßŸã"}),e.jsx("span",{className:"text-white/80 text-sm",children:"ŸÑÿß ŸäŸÖŸÉŸÜ ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]})]}),je&&e.jsxs("div",{className:"bg-gradient-to-l from-emerald-500 to-teal-600 text-white p-4 shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(ps,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold block",children:"Ÿáÿ∞ÿß ŸÖÿ™ÿ¨ÿ±ŸÉ!"}),e.jsxs("span",{className:"text-white/80 text-sm",children:["ÿ£ŸÜÿ™ ÿ™ÿ±Ÿâ ",s.length," ÿµŸÜŸÅ (",s.filter(G=>G.available!==!1).length," ŸÖÿ™ÿßÿ≠)"]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(re,{to:"/owner/menu",className:"flex-1 bg-white text-emerald-600 px-4 py-2.5 rounded-xl font-bold hover:bg-gray-100 transition flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(Ws,{className:"w-4 h-4"}),"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÜŸäŸà"]}),e.jsx(re,{to:"/owner/edit",className:"flex-1 bg-white/20 text-white px-4 py-2.5 rounded-xl font-bold hover:bg-white/30 transition flex items-center justify-center gap-2",children:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ™ÿ¨ÿ±"}),e.jsxs(re,{to:"/",className:"flex-1 bg-white/20 text-white px-4 py-2.5 rounded-xl font-bold hover:bg-white/30 transition flex items-center justify-center gap-2",children:["ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ",e.jsx(Is,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-56 sm:h-72 relative overflow-hidden",children:[c!=null&&c.coverUrl?e.jsx("img",{src:c.coverUrl,alt:"ÿ∫ŸÑÿßŸÅ",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-sky-400 via-sky-500 to-sky-600"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-56 h-56 bg-sky-300/10 rounded-full translate-y-1/2 -translate-x-1/2 blur-2xl"}),e.jsxs(re,{to:"/restaurants",className:"absolute top-4 right-4 flex items-center gap-2 bg-white/90 backdrop-blur-sm text-gray-700 px-4 py-2.5 rounded-xl text-sm font-bold hover:bg-white transition shadow-lg",children:[e.jsx(Is,{className:"w-4 h-4"}),"ÿ±ÿ¨Ÿàÿπ"]}),e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[!je&&e.jsxs("button",{onClick:u,className:`flex items-center gap-2 px-4 py-2.5 backdrop-blur-sm rounded-xl font-bold transition shadow-lg ${I?"bg-pink-500 text-white hover:bg-pink-600":"bg-white/90 text-gray-700 hover:bg-white"}`,children:[e.jsx(Zt,{className:`w-5 h-5 ${I?"fill-white":""}`}),e.jsx("span",{className:"text-sm",children:I?"ŸÖÿ™ÿßÿ®Ÿéÿπ":"ŸÖÿ™ÿßÿ®ÿπÿ©"})]}),e.jsx("button",{onClick:R,className:"p-3 bg-white/90 backdrop-blur-sm rounded-xl text-gray-700 hover:bg-white transition shadow-lg",children:e.jsx(dr,{className:"w-5 h-5"})})]}),c&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-2xl bg-white p-1 shadow-2xl",children:c.logoUrl?e.jsx("img",{src:c.logoUrl,alt:c.name,className:"w-full h-full rounded-xl object-cover"}):e.jsx("div",{className:"w-full h-full rounded-xl bg-gradient-to-br from-sky-100 to-sky-200 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"üçΩÔ∏è"})})}),(c.isVerified||c.licenseStatus==="approved")&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center border-3 border-white shadow-lg",children:e.jsx(De,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"flex-1 pb-1",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-white mb-1 drop-shadow-lg",children:c.name}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[ie?e.jsxs("span",{className:"bg-emerald-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"ŸÖÿ™ÿßÿ≠ ÿßŸÑÿ¢ŸÜ"]}):e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow",children:"ŸÖÿ∫ŸÑŸÇ"}),e.jsxs("span",{className:"bg-white/90 backdrop-blur-sm text-gray-700 text-xs font-bold px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx(ls,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),((Z=c.averageRating)==null?void 0:Z.toFixed(1))||"0.0"]}),e.jsxs("span",{className:`bg-gradient-to-r ${se.bg} text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow`,children:[se.icon," ",se.label]}),c.city&&e.jsxs("span",{className:"bg-white/90 backdrop-blur-sm text-gray-600 text-xs font-medium px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx(es,{className:"w-3 h-3"}),c.city]})]})]})]})})]}),c&&e.jsx("div",{className:"mx-4 -mt-4 relative z-10",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-4",children:e.jsxs("div",{className:"grid grid-cols-4 divide-x divide-gray-100 divide-x-reverse",children:[e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-pink-50 rounded-xl flex items-center justify-center",children:e.jsx(Zt,{className:"w-5 h-5 text-pink-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:f}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ŸÖÿ™ÿßÿ®ÿπ"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-amber-50 rounded-xl flex items-center justify-center",children:e.jsx(Ws,{className:"w-5 h-5 text-amber-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:s.length}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ÿµŸÜŸÅ"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-emerald-50 rounded-xl flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:c.totalOrders||0}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ÿ∑ŸÑÿ®"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-sky-50 rounded-xl flex items-center justify-center",children:e.jsx(Ye,{className:"w-5 h-5 text-sky-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:c.onTimeDeliveryRate?`${Math.round(c.onTimeDeliveryRate)}%`:"‚Äî"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ÿßŸÑÿ™ÿ≤ÿßŸÖ"})]})]})})})]}),(c==null?void 0:c.announcement)&&e.jsx("div",{className:"mx-4 mt-4",children:e.jsxs("div",{className:"bg-gradient-to-l from-sky-50 to-sky-100 border border-sky-200 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Ks,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sky-900 font-medium leading-relaxed",children:c.announcement})})]})}),r&&$&&e.jsxs("div",{className:"mx-4 mt-6 bg-gradient-to-r from-violet-500 via-purple-500 to-pink-500 rounded-2xl shadow-xl overflow-hidden relative",children:[e.jsx("button",{onClick:()=>M(!1),className:"absolute top-3 left-3 z-10 p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1.5 px-3 py-1.5 bg-white text-purple-600 text-xs font-bold rounded-full shadow",children:[e.jsx(Ks,{className:"w-3.5 h-3.5"}),"ÿ•ÿπŸÑÿßŸÜ"]}),r.mediaUrl&&e.jsx("img",{src:r.mediaUrl,alt:"",className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-4",children:[r.title&&e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:r.title}),r.description&&e.jsx("p",{className:"text-white/80 text-sm",children:r.description})]})]}),e.jsxs("div",{className:"px-4 mt-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿµŸÜŸÅ...",value:m,onChange:G=>j(G.target.value),className:"w-full pr-12 pl-12 py-4 bg-white rounded-2xl border-2 border-gray-100 focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-lg shadow-sm"}),m&&e.jsx("button",{onClick:()=>j(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide",children:ye.map(G=>e.jsxs("button",{onClick:()=>h(G.value),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${d===G.value?"bg-sky-500 text-white shadow-lg shadow-sky-200":"bg-white text-gray-600 border border-gray-200 hover:border-sky-300"}`,children:[G.icon,G.label]},G.value))}),P.length>1&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>Y("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 bg-gradient-to-l from-sky-50 via-sky-50 to-transparent flex items-center justify-start",children:e.jsx(Ut,{className:"w-5 h-5 text-gray-500"})}),e.jsx("div",{ref:F,className:"flex items-center gap-2 overflow-x-auto px-8 py-2 scrollbar-hide scroll-smooth",children:P.map(G=>e.jsx("button",{onClick:()=>g(G),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${L===G?"bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-200":"bg-white text-gray-600 border border-gray-200 hover:border-sky-300 hover:bg-sky-50"}`,children:G==="all"?"üçΩÔ∏è ÿßŸÑŸÉŸÑ":G},G))}),e.jsx("button",{onClick:()=>Y("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 bg-gradient-to-r from-sky-50 via-sky-50 to-transparent flex items-center justify-end",children:e.jsx(st,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-sky-100 to-blue-100 rounded-2xl flex items-center justify-center shadow-sm",children:e.jsx(Ws,{className:"w-6 h-6 text-sky-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ÿµŸÜÿßŸÅ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.length," ÿµŸÜŸÅ",je&&` ‚Ä¢ ${s.filter(G=>G.available===!1).length} ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠`]})]})]}),je&&e.jsxs(re,{to:"/owner/menu",className:"flex items-center gap-2 px-4 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition",children:[e.jsx(vs,{className:"w-4 h-4"}),"ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÜŸÅ"]})]}),x.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-3xl border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Gs,{className:"w-10 h-10 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 text-lg font-bold mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿµŸÜÿßŸÅ"}),e.jsx("p",{className:"text-gray-400",children:"ÿ¨ÿ±ÿ® ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÅŸÑÿ™ÿ± ÿ£Ÿà ÿßŸÑÿ®ÿ≠ÿ´"}),e.jsx("button",{onClick:()=>{j(""),g("all"),h("all")},className:"mt-4 px-6 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition",children:"ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿπŸäŸäŸÜ"})]}):L==="all"&&!m?e.jsxs("div",{className:"space-y-8",children:[P.filter(G=>G!=="all").map(G=>{const K=x.filter(me=>me.category===G);return K.length===0?null:e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 px-5 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-xl",children:"üçΩÔ∏è"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:G}),e.jsxs("p",{className:"text-sm text-gray-500",children:[K.length," ÿµŸÜŸÅ"]})]})]}),je&&e.jsxs("span",{className:"text-xs text-gray-400",children:[K.filter(me=>me.available===!1).length," ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠"]})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:K.map(me=>e.jsx(er,{item:me,isOwnStore:je,canOrder:ce,isStoreOpen:ie,getItemInCart:v,handleAdd:H,changeQty:o,SERVICE_FEE_PER_ITEM:C},me.id))})})]},G)}),(()=>{const G=x.filter(K=>!K.category);return G.length===0?null:e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 px-5 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-xl",children:"üì¶"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"ÿ£ÿµŸÜÿßŸÅ ÿ£ÿÆÿ±Ÿâ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[G.length," ÿµŸÜŸÅ"]})]})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:G.map(K=>e.jsx(er,{item:K,isOwnStore:je,canOrder:ce,isStoreOpen:ie,getItemInCart:v,handleAdd:H,changeQty:o,SERVICE_FEE_PER_ITEM:C},K.id))})})]})})()]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:x.map(G=>e.jsx(er,{item:G,isOwnStore:je,canOrder:ce,isStoreOpen:ie,getItemInCart:v,handleAdd:H,changeQty:o,SERVICE_FEE_PER_ITEM:C},G.id))})]}),ge>0&&ce&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 pb-6 bg-gradient-to-t from-white via-white/95 to-transparent",children:e.jsxs(re,{to:"/checkout",className:"flex items-center justify-between w-full max-w-lg mx-auto px-6 py-4 rounded-2xl bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-2xl shadow-sky-300/50 font-bold hover:from-sky-600 hover:to-blue-700 transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(us,{className:"w-6 h-6"})}),e.jsx("span",{className:"absolute -top-2 -right-2 w-6 h-6 bg-amber-400 text-sky-900 text-sm font-black rounded-full flex items-center justify-center shadow-lg",children:ge})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-lg font-bold",children:"ÿπÿ±ÿ∂ ÿßŸÑÿ≥ŸÑÿ©"}),e.jsxs("span",{className:"block text-sky-100 text-sm",children:[ge," ŸÖŸÜÿ™ÿ¨"]})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"block text-2xl font-black",children:b.toFixed(2)}),e.jsx("span",{className:"block text-sky-100 text-sm",children:"ÿ±.ÿ≥"})]})]})})]})},er=({item:s,isOwnStore:t,canOrder:n,isStoreOpen:i,getItemInCart:c,handleAdd:y,changeQty:r,SERVICE_FEE_PER_ITEM:k})=>{var f,_;const $=c(s.id),M=s.discountPercent&&s.discountPercent>0,I=((_=(f=s.discountExpiresAt)==null?void 0:f.toDate)==null?void 0:_.call(f))||(s.discountExpiresAt?new Date(s.discountExpiresAt):null),N=M&&(!I||I>new Date),A=s.price+k,p=N?A-A*((s.discountPercent||0)/100):A;return e.jsxs("div",{className:`bg-white rounded-2xl overflow-hidden border shadow-sm hover:shadow-xl transition-all duration-300 group ${s.available===!1?"border-red-200 opacity-75":"border-gray-100 hover:border-sky-200"}`,children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.name,className:`w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 ${s.available===!1?"grayscale":""}`}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:e.jsx("span",{className:"text-5xl opacity-30",children:"üçΩÔ∏è"})}),s.available===!1&&t&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-lg",children:"üö´ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠"})}),N&&s.available!==!1&&e.jsxs("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2.5 py-1 rounded-lg shadow-lg",children:["ÿÆÿµŸÖ ",s.discountPercent,"%"]}),(s.orderCount||0)>10&&s.available!==!1&&e.jsxs("div",{className:"absolute top-2 left-2 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-lg shadow flex items-center gap-1",children:[e.jsx(_t,{className:"w-3 h-3"}),"ÿ¥ÿßÿ¶ÿπ"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-1 line-clamp-1",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:`text-lg font-black ${s.available===!1?"text-gray-400":"text-sky-600"}`,children:[p.toFixed(0)," ÿ±.ÿ≥"]}),N&&e.jsx("span",{className:"text-sm text-gray-400 line-through",children:A.toFixed(0)})]}),n&&i&&s.available!==!1&&e.jsx(e.Fragment,{children:$?e.jsxs("div",{className:"flex items-center justify-between bg-sky-50 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>r(s.id,$.qty-1),className:"w-9 h-9 bg-white rounded-lg flex items-center justify-center text-sky-600 shadow-sm hover:bg-sky-100 transition",children:e.jsx(jl,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-lg font-black text-sky-600",children:$.qty}),e.jsx("button",{onClick:()=>y(s),className:"w-9 h-9 bg-sky-500 rounded-lg flex items-center justify-center text-white shadow-lg hover:bg-sky-600 transition",children:e.jsx(vs,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>y(s),className:"w-full py-2.5 rounded-xl font-bold text-sm bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-200 hover:shadow-xl hover:from-sky-600 hover:to-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4"}),"ÿ£ÿ∂ŸÅ"]})}),n&&!i&&e.jsxs("div",{className:"w-full py-2.5 rounded-xl font-bold text-sm bg-gray-100 text-gray-400 text-center flex items-center justify-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"ŸÖÿ∫ŸÑŸÇ"]})]})]})},Hi=.0157,Qi=5,Wi=()=>{const{items:s,subtotal:t,remove:n,clear:i,changeQty:c}=oa(),y=a.useMemo(()=>s.reduce((k,$)=>$.price>=Qi?k+Hi*$.qty:k,0),[s]),r=t+y;return s.length===0?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 flex flex-col items-center justify-center py-20 px-4",children:[e.jsx("div",{className:"w-24 h-24 bg-white/80 backdrop-blur rounded-full flex items-center justify-center mb-6 shadow-lg",children:e.jsx(us,{className:"w-12 h-12 text-sky-400"})}),e.jsx("h2",{className:"text-xl font-bold text-sky-800 mb-2",children:"ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ©"}),e.jsx("p",{className:"text-sky-600/70 mb-6",children:"ÿ£ÿ∂ŸÅ ÿ®ÿπÿ∂ ÿßŸÑÿ£ÿµŸÜÿßŸÅ ÿßŸÑŸÑÿ∞Ÿäÿ∞ÿ©!"}),e.jsxs(re,{to:"/restaurants",className:"flex items-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-sky-200/50 hover:shadow-xl transition",children:[e.jsx(Ra,{className:"w-5 h-5"}),"ÿ™ÿµŸÅÿ≠ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"]})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 py-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[e.jsx(us,{className:"w-6 h-6 text-primary"}),"ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™",e.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:s.length})]})}),e.jsx("div",{className:"space-y-3",children:s.map(k=>e.jsxs("div",{className:"flex items-center gap-3 glass-card p-3 sm:p-4 rounded-xl",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-3xl",children:"üçü"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:k.name}),e.jsxs("p",{className:"text-primary font-bold text-sm",children:[k.price.toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>k.qty>1?c(k.id,k.qty-1):n(k.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:e.jsx(jl,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-lg w-8 text-center",children:k.qty}),e.jsx("button",{onClick:()=>c(k.id,k.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:e.jsx(vs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(k.price*k.qty).toFixed(2)," ÿ±.ÿ≥"]}),e.jsx("button",{onClick:()=>n(k.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:e.jsx(fs,{className:"w-4 h-4"})})]})]},k.id))}),e.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sky-700",children:[e.jsx("span",{children:"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä"}),e.jsxs("span",{className:"font-bold",children:[t.toFixed(2)," ÿ±.ÿ≥"]})]}),y>0&&e.jsxs("div",{className:"flex justify-between text-gray-500",children:[e.jsx("span",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsxs("span",{className:"font-semibold",children:[y.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex justify-between text-amber-600",children:[e.jsx("span",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("span",{className:"font-semibold text-sm",children:"ÿ™Ÿèÿ≠ÿØÿØ ÿπŸÜÿØ ŸÇÿ®ŸàŸÑ ÿßŸÑÿ∑ŸÑÿ®"})]}),e.jsx("div",{className:"h-px bg-sky-200/50"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-lg text-sky-900",children:"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä"}),e.jsxs("span",{className:"font-bold text-xl text-sky-600",children:[r.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"üí° ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿäÿ≠ÿØÿØŸáÿß ÿßŸÑŸÖŸÜÿØŸàÿ® ÿ£Ÿà ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿ≠ÿ≥ÿ® ŸÖŸàŸÇÿπŸÉ"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[e.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl glass-light text-sky-700 font-semibold hover:bg-white/70 transition",children:[e.jsx(fs,{className:"w-5 h-5"}),"ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿ≥ŸÑÿ©"]}),e.jsx(re,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg shadow-green-200/50 hover:shadow-xl hover:scale-[1.02] transition",children:"‚úÖ ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®"})]})]})})},Aa=5,Gi=15*60*1e3,Yi=10*60*1e3,al=async s=>{try{await Fe(te(S,"loginAttempts"),{...s,timestamp:J(),createdAt:new Date().toISOString()})}catch(t){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿØÿÆŸàŸÑ:",t)}},El=async s=>{try{const t=new Date(Date.now()-Yi),n=pe(te(S,"loginAttempts"),be("email","==",s.toLowerCase()),be("status","==","failed"),be("timestamp",">=",ia.fromDate(t)));return(await ue(n)).size}catch(t){return console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ:",t),0}},Ki=async(s,t=10)=>{try{const n=pe(te(S,"loginAttempts"),be("userId","==",s),as("timestamp","desc"),ks(t));return(await ue(n)).docs.map(c=>{var y,r;return{id:c.id,...c.data(),timestamp:((r=(y=c.data().timestamp)==null?void 0:y.toDate)==null?void 0:r.call(y))||new Date(c.data().createdAt)}})}catch(n){return console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ≥ÿ¨ŸÑ ÿßŸÑÿØÿÆŸàŸÑ:",n),[]}},sr=async s=>{try{const t=pe(te(S,"users"),be("email","==",s.toLowerCase())),n=await ue(t);if(!n.empty){const r=n.docs[0].data().security;if(r!=null&&r.isDeactivated)return{isBlocked:!0,remainingAttempts:0,message:"Ÿáÿ∞ÿß ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖŸàŸÇŸàŸÅ. ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ©."};if(r!=null&&r.lockedUntil){const k=r.lockedUntil instanceof ia?r.lockedUntil.toDate():new Date(r.lockedUntil);if(k>new Date){const $=Math.ceil((k.getTime()-Date.now())/6e4);return{isBlocked:!0,remainingAttempts:0,blockedUntil:k,message:`ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ≠ÿ∏Ÿàÿ± ŸÖÿ§ŸÇÿ™ÿßŸã. ÿ≠ÿßŸàŸÑ ÿ®ÿπÿØ ${$} ÿØŸÇŸäŸÇÿ©.`}}}}const i=await El(s),c=Math.max(0,Aa-i);return i>=Aa?{isBlocked:!0,remainingAttempts:0,message:"ÿ™ŸÖ ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ. ÿ≠ÿßŸàŸÑ ŸÑÿßÿ≠ŸÇÿßŸã."}:{isBlocked:!1,remainingAttempts:c}}catch(t){return console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿßŸÑÿ© Rate Limit:",t),{isBlocked:!1,remainingAttempts:Aa}}},Ji=async s=>{try{const t=pe(te(S,"users"),be("email","==",s.toLowerCase())),n=await ue(t);if(!n.empty){const i=n.docs[0];await El(s)+1>=Aa?await xe(X(S,"users",i.id),{"security.failedAttempts":Xe(1),"security.lastFailedAttempt":J(),"security.lockedUntil":ia.fromDate(new Date(Date.now()+Gi))}):await xe(X(S,"users",i.id),{"security.failedAttempts":Xe(1),"security.lastFailedAttempt":J()})}}catch(t){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑŸÅÿßÿ¥ŸÑÿ©:",t)}},Xi=async s=>{try{await xe(X(S,"users",s),{"security.failedAttempts":0,"security.lockedUntil":null,"security.lastLogin":J()})}catch(t){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™:",t)}},_l=async s=>{try{await Fe(te(S,"auditLogs"),{...s,timestamp:J(),createdAt:new Date().toISOString()})}catch(t){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ∂ÿßŸÅÿ© ÿ≥ÿ¨ŸÑ Audit:",t)}},Zi=()=>{const[s,t]=a.useState(""),[n,i]=a.useState(""),[c,y]=a.useState(!1),[r,k]=a.useState(!1),[$,M]=a.useState(""),[I,N]=a.useState(!1),[A,p]=a.useState(!1),[f,_]=a.useState(""),[m,j]=a.useState(5),L=gs(),g=Ds(),d=Qe();a.useEffect(()=>{const b=setTimeout(async()=>{if(s&&s.includes("@")){const E=await sr(s);p(E.isBlocked),_(E.message||""),j(E.remainingAttempts)}},500);return()=>clearTimeout(b)},[s]);const h=async D=>{var E;D.preventDefault();const b=await sr(s);if(b.isBlocked){g.error(b.message||"ÿ™ŸÖ ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ",{title:"ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ≠ÿ∏Ÿàÿ± ŸÖÿ§ŸÇÿ™ÿßŸã"}),p(!0),_(b.message||"");return}y(!0);try{const w=(await $n(bs,s,n)).user.uid;await al({email:s.toLowerCase(),status:"success",userId:w,userAgent:navigator.userAgent}),await Xi(w),await _l({action:"login_success",performedBy:w,performedByName:s,details:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ŸÜÿßÿ¨ÿ≠"});const U=await Ce(X(S,"users",w));if(U.exists()){const B=U.data();if((E=B.security)!=null&&E.isDeactivated){d.error("Ÿáÿ∞ÿß ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖŸàŸÇŸàŸÅ. ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ©."),await bs.signOut();return}B.role==="owner"?L("/owner"):B.role==="admin"?L("/admin"):B.role==="developer"?L("/developer"):B.role==="courier"?L("/courier"):L("/")}else g.warning("ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖŸàÿ¨ŸàÿØ ŸÅŸä Auth ŸÑŸÉŸÜ ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÑŸá ÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä Firestore")}catch(o){await al({email:s.toLowerCase(),status:"failed",errorCode:o.code,errorMessage:o.message,userAgent:navigator.userAgent}),await Ji(s);let w=o.message;o.code==="auth/user-not-found"?w="ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≠ÿ≥ÿßÿ® ŸÖÿ≥ÿ¨ŸÑ ÿ®Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä":o.code==="auth/wrong-password"?w="ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©":o.code==="auth/invalid-email"?w="ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠":o.code==="auth/too-many-requests"?w="ÿ™ŸÖ ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ. ÿ≠ÿßŸàŸÑ ŸÑÿßÿ≠ŸÇÿßŸã.":o.code==="auth/invalid-credential"&&(w="ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©. ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ®ÿ±ŸäÿØ ŸàŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±.");const U=await sr(s);j(U.remainingAttempts),U.isBlocked&&(p(!0),_(U.message||"")),g.error(w,{title:"ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",...U.remainingAttempts>0&&U.remainingAttempts<3&&{description:`ÿ™ÿ®ŸÇŸâ ${U.remainingAttempts} ŸÖÿ≠ÿßŸàŸÑÿ© ŸÇÿ®ŸÑ ÿ≠ÿ∏ÿ± ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ§ŸÇÿ™ÿßŸã`}})}finally{y(!1)}},F=async D=>{if(D.preventDefault(),!$.trim()){d.warning("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä");return}N(!0);try{await bl(bs,$.trim().toLowerCase()),d.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±! ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ®ÿ±ŸäÿØŸÉ üìß"),setTimeout(()=>{g.info("ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™ÿ¨ÿØ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©ÿå ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÖÿ¨ŸÑÿØ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ±ÿ∫Ÿàÿ®ÿ© (Spam)",{title:"üí° ŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸÖŸáŸÖÿ©"})},1e3),k(!1),M("")}catch(b){console.error("Reset password error:",b),b.code==="auth/user-not-found"?d.error("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≠ÿ≥ÿßÿ® ŸÖÿ≥ÿ¨ŸÑ ÿ®Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"):b.code==="auth/invalid-email"?d.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠"):b.code==="auth/too-many-requests"?d.error("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ÿßÿ™ ŸÉÿ´Ÿäÿ±ÿ©ÿå ÿßŸÜÿ™ÿ∏ÿ± ŸÇŸÑŸäŸÑÿßŸã ÿ´ŸÖ ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"):d.error(`ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: ${b.message}`)}finally{N(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:e.jsx("span",{className:"text-4xl",children:"  üçù"})}),e.jsx("h1",{className:"text-3xl font-black text-sky-600",children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}),e.jsx("p",{className:"text-sky-500 mt-1",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[A&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx(ms,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 font-semibold text-sm",children:"ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ≠ÿ∏Ÿàÿ± ŸÖÿ§ŸÇÿ™ÿßŸã"}),e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f})]})]}),!A&&m<3&&m>0&&e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx(ws,{className:"w-5 h-5 text-amber-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-700 font-semibold text-sm",children:"ÿ™ŸÜÿ®ŸäŸá ÿ£ŸÖŸÜŸä"}),e.jsxs("p",{className:"text-amber-600 text-xs mt-1",children:["ÿ™ÿ®ŸÇŸâ ",m," ŸÖÿ≠ÿßŸàŸÑÿ© ŸÅŸÇÿ∑ ŸÇÿ®ŸÑ ÿ≠ÿ∏ÿ± ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ§ŸÇÿ™ÿßŸã"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"email",placeholder:"ÿßŸÑÿ•ŸäŸÖŸäŸÑ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:s,onChange:D=>t(D.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ct,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"password",placeholder:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:D=>i(D.target.value)})]}),e.jsx("div",{className:"text-left",children:e.jsx("button",{type:"button",onClick:()=>{k(!0),M(s)},className:"text-sm text-sky-500 hover:text-sky-700 font-medium hover:underline",children:"üîë ŸÜÿ≥Ÿäÿ™ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±ÿü"})}),e.jsx("button",{disabled:c||A,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100`,children:c?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿØÿÆŸàŸÑ..."]}):A?e.jsxs(e.Fragment,{children:[e.jsx(ms,{className:"w-5 h-5"}),"ŸÖÿ≠ÿ∏Ÿàÿ± ŸÖÿ§ŸÇÿ™ÿßŸã"]}):e.jsxs(e.Fragment,{children:[e.jsx(yl,{className:"w-5 h-5"}),"ÿØÿÆŸàŸÑ"]})})]}),e.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿ≠ÿ≥ÿßÿ®ÿü"," ",e.jsx(re,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"ÿ≥ÿ¨ŸëŸÑ ÿßŸÑÿ¢ŸÜ ‚ú®"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[e.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"ÿπŸÖŸäŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑÿü"}),e.jsx(re,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"üì± ÿßŸÑÿØÿÆŸàŸÑ ÿ®ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ"})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 relative",children:[e.jsx("button",{onClick:()=>k(!1),className:"absolute top-4 left-4 p-2 hover:bg-gray-100 rounded-full transition",children:e.jsx(Is,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(yr,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"ŸÜÿ≥Ÿäÿ™ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±ÿü"}),e.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:"ÿ£ÿØÿÆŸÑ ÿ®ÿ±ŸäÿØŸÉ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä Ÿàÿ≥ŸÜÿ±ÿ≥ŸÑ ŸÑŸÉ ÿ±ÿßÿ®ÿ∑ ŸÑÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±"})]}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-amber-500"}),e.jsx("input",{type:"email",placeholder:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",className:`w-full rounded-2xl p-4 pr-12 bg-amber-50 text-gray-900 border-2 border-amber-100 
                             focus:outline-none focus:border-amber-400 focus:ring-4 focus:ring-amber-100 transition-all`,value:$,onChange:D=>M(D.target.value),autoFocus:!0})]}),e.jsx("button",{type:"submit",disabled:I,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold p-4 rounded-2xl 
                           shadow-xl shadow-amber-300/50 transition-all hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{className:"w-5 h-5"}),"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿπŸäŸäŸÜ"]})})]}),e.jsx("button",{onClick:()=>k(!1),className:"w-full mt-4 text-center text-gray-500 hover:text-gray-700 font-medium",children:"ÿßŸÑÿπŸàÿØÿ© ŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"})]})})]})},ec=()=>{const[s]=la(),t=s.get("ref_restaurant"),n=s.get("type"),[i,c]=a.useState(""),[y,r]=a.useState(""),[k,$]=a.useState(""),[M,I]=a.useState(""),[N,A]=a.useState(""),[p,f]=a.useState(""),[_,m]=a.useState(!1),[j,L]=a.useState(!1),g=gs(),[d,h]=a.useState(!1),[F,D]=a.useState(!1),[b,E]=a.useState(!1);a.useEffect(()=>{(n==="customer"||n==="courier"||n==="owner")&&f(n)},[n]),a.useEffect(()=>{t&&f("customer")},[t]);const o=p==="owner"||p==="courier",w=Q=>{f(Q),m(!1)},U=async Q=>{if(Q.preventDefault(),!p)return alert("ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑÿ≠ÿ≥ÿßÿ®");if(p==="owner"&&!M)return alert("ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ");if(o&&!_)return alert("Ÿäÿ¨ÿ® ÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ");L(!0);try{const O=await $t(bs,i,y);if(await Ze(X(S,"users",O.user.uid),{name:k,email:i,role:p,restaurantName:p==="owner"?M:null,referredBy:t||null,createdAt:J()}),p==="owner"&&await Ze(X(S,"restaurants",O.user.uid),{name:M||k||"ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ",ownerId:O.user.uid,email:i,phone:"",city:N||"",location:"",logoUrl:""},{merge:!0}),t&&p==="customer")try{await Fe(te(S,"customerRegistrations"),{customerId:O.user.uid,customerName:k,customerEmail:i,restaurantId:t,registrationType:"website",createdAt:J()});const C=X(S,"restaurantStats",t);(await Ce(C)).exists()?await xe(C,{registeredCustomers:Xe(1),updatedAt:J()}):await Ze(C,{totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:1,appDownloads:0,dailyViews:{},updatedAt:J()}),await Fe(te(S,"notifications"),{recipientId:t,title:"üéâ ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ ÿ≥ÿ¨ŸÑ ÿπÿ®ÿ± ÿ±ÿßÿ®ÿ∑ŸÉ!",message:`ÿßŸÑÿπŸÖŸäŸÑ "${k}" ÿ≥ÿ¨ŸÑ ŸÅŸä ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿπÿ®ÿ± ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ© ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ`,type:"new_customer_registration",read:!1,createdAt:J()})}catch(C){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ©:",C)}g("/")}catch(O){alert(O.message)}finally{L(!1)}},B=[{value:"customer",label:"ÿπŸÖŸäŸÑ",icon:nt,color:"sky"},{value:"courier",label:"ŸÖŸÜÿØŸàÿ®",icon:Ue,color:"emerald"},{value:"owner",label:"ÿµÿßÿ≠ÿ® ŸÖÿ∑ÿπŸÖ",icon:mt,color:"orange"}];return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-sky-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[e.jsx(it,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-bold text-lg",children:"ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ"})]}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-sky-100 rounded-full",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 text-sm leading-relaxed space-y-4",children:[e.jsx("h3",{className:"font-bold text-sky-600",children:"1. ÿßŸÑÿ™ÿπÿ±ŸäŸÅ"}),e.jsx("p",{children:"ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸáŸä ŸÖŸÜÿµÿ© ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿ© ÿ™ŸáÿØŸÅ ÿ•ŸÑŸâ ÿπÿ±ÿ∂ Ÿàÿ™ÿ≥ŸàŸäŸÇ ŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© Ÿàÿ±ÿ®ÿ∑Ÿáÿß ÿ®ÿßŸÑÿπŸÖŸÑÿßÿ° ÿπÿ®ÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ."}),e.jsx("h3",{className:"font-bold text-sky-600",children:"2. ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÅŸä ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸÖÿ¨ÿßŸÜŸä ÿ®ÿßŸÑŸÉÿßŸÖŸÑ."}),e.jsx("li",{children:"ŸÑÿß Ÿäÿ™ŸÖ ŸÅÿ±ÿ∂ ÿ£Ÿä ÿ±ÿ≥ŸàŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©."})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"3. ÿ™ÿ≥ÿπŸäÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ Ÿàÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ™ŸÇŸàŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿ®ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨."}),e.jsxs("li",{children:["ÿ™ŸàÿßŸÅŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿπŸÑŸâ ŸÇŸäÿßŸÖ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ŸÇÿØÿ±Ÿáÿß ",e.jsx("strong",{className:"text-sky-600",children:"1.75 ÿ±ŸäÿßŸÑ"})," ÿπŸÑŸâ ŸÉŸÑ ŸÖŸÜÿ™ÿ¨."]}),e.jsxs("li",{children:["ŸÑŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ®ÿ≥ÿπÿ± 1 ÿ£Ÿà 2 ÿ±ŸäÿßŸÑÿå Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ",e.jsx("strong",{className:"text-sky-600",children:"0.25 ÿ±ŸäÿßŸÑ"})," ŸÅŸÇÿ∑."]}),e.jsx("li",{children:"Ÿäÿ∏Ÿáÿ± ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿπŸÖŸäŸÑ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿπŸÑŸâ ÿ£ŸÜŸá ÿ≥ÿπÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨."}),e.jsx("li",{children:"ŸÑÿß Ÿäÿ™ŸÖ ÿÆÿµŸÖ ÿ£Ÿä ŸÖÿ®ÿßŸÑÿ∫ ŸÖŸÜ ÿØÿÆŸÑ ÿßŸÑÿ£ÿ≥ÿ±ÿ©ÿå Ÿàÿ¨ŸÖŸäÿπ ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ© ÿ™Ÿèÿ≠ŸÖŸëŸÑ ÿπŸÑŸâ ÿßŸÑÿπŸÖŸäŸÑ."})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"4. ÿßŸÑÿ∑ŸÑÿ® ŸàÿßŸÑÿØŸÅÿπ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ÿäÿ™ŸÖ ÿπÿ±ÿ∂ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ®ÿπÿØ ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ©."}),e.jsx("li",{children:"ŸÇÿØ Ÿäÿ™ŸÖ ÿßÿ≠ÿ™ÿ≥ÿßÿ® ÿ±ÿ≥ŸàŸÖ ÿ£ÿÆÿ±Ÿâ ŸÖÿ´ŸÑ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿàÿ∂ÿ±Ÿäÿ®ÿ© ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿ∂ÿßŸÅÿ©."}),e.jsx("li",{children:"ÿ™ÿ≠ÿ™ŸÅÿ∏ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ≠ŸÇ ÿ™ÿ≠ÿØŸäÿ´ ÿ£Ÿà ÿ•ÿ∂ÿßŸÅÿ© ÿÆÿØŸÖÿßÿ™ ÿ£Ÿà ÿ±ÿ≥ŸàŸÖ ŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ© ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ©."})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"5. ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),e.jsx("p",{children:"ÿ™ÿ™ÿ≠ŸÖŸÑ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ŸÉÿßŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿπŸÜ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ¨ŸàÿØÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ Ÿàÿ≥ŸÑÿßŸÖÿ© ÿßŸÑÿ£ÿµŸÜÿßŸÅ"}),e.jsx("li",{children:"ŸÜÿ∏ÿßŸÅÿ© Ÿàÿ™ÿ≠ÿ∂Ÿäÿ± ÿßŸÑÿ∑ÿπÿßŸÖ ŸàÿßŸÑÿ™ÿ∫ŸÑŸäŸÅ"}),e.jsx("li",{children:"ÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßÿ∑ÿßÿ™ ÿßŸÑÿµÿ≠Ÿäÿ© ÿßŸÑŸÖÿπŸÖŸàŸÑ ÿ®Ÿáÿß"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"6. ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ™ŸàŸÅŸäÿ± ŸÖŸÜÿµÿ© ÿ™ŸÇŸÜŸäÿ© ŸÑŸÑÿ™ŸàÿßÿµŸÑ ÿ®ŸäŸÜ ÿßŸÑÿ£ÿ≥ÿ± ŸàÿßŸÑÿπŸÖŸÑÿßÿ°"}),e.jsx("li",{children:"ÿßŸÑŸÖŸÜÿµÿ© ŸÑŸäÿ≥ÿ™ ÿ∑ÿ±ŸÅÿßŸã ŸÅŸä ÿ£Ÿä ÿπŸÇÿØ ÿ®ŸäŸÜ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ŸàÿßŸÑÿπŸÖŸäŸÑ"}),e.jsx("li",{children:"ÿßŸÑŸÖŸÜÿµÿ© ÿ∫Ÿäÿ± ŸÖÿ≥ÿ§ŸàŸÑÿ© ÿπŸÜ ÿ¨ŸàÿØÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ£Ÿà ŸÖŸàÿ´ŸàŸÇŸäÿ™Ÿáÿß"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"7. ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®"}),e.jsx("p",{children:"ÿ™ÿ≠ÿ™ŸÅÿ∏ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ≠ŸÇ ÿ™ÿπŸÑŸäŸÇ ÿ£Ÿà ÿ•ŸÜŸáÿßÿ° ÿ£Ÿä ÿ≠ÿ≥ÿßÿ® ŸäÿÆÿßŸÑŸÅ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ÿ£Ÿà Ÿäÿ∂ÿ± ÿ®ÿ≥ŸÖÿπÿ© ÿßŸÑŸÖŸÜÿµÿ© ÿ£Ÿà ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿßŸÑÿ¢ÿÆÿ±ŸäŸÜ."})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsx("button",{onClick:()=>h(!1),className:"w-full py-3 bg-sky-500 text-white font-bold rounded-xl hover:bg-sky-600 transition",children:"ŸÅŸáŸÖÿ™ ‚úì"})})]})}),F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-sky-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[e.jsx(ms,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-bold text-lg",children:"ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©"})]}),e.jsx("button",{onClick:()=>D(!1),className:"p-2 hover:bg-sky-100 rounded-full",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 text-sm leading-relaxed space-y-4",children:[e.jsx("h3",{className:"font-bold text-sky-600",children:"1. ÿ¨ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsx("p",{children:"ŸÜÿ¨ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ© ŸÑÿ™ŸÇÿØŸäŸÖ ÿÆÿØŸÖÿßÿ™ŸÜÿß:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿßŸÑÿßÿ≥ŸÖ ŸàÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä Ÿàÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ"}),e.jsx("li",{children:"ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ¨ÿ∫ÿ±ÿßŸÅŸä (ÿπŸÜÿØ ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©)"}),e.jsx("li",{children:"ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸàÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"2. ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿÆÿØŸÖÿßÿ™ Ÿàÿ™ŸÜŸÅŸäÿ∞ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("li",{children:"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ÿ®ÿ¥ÿ£ŸÜ ÿ∑ŸÑÿ®ÿßÿ™ŸÉ"}),e.jsx("li",{children:"ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ"}),e.jsx("li",{children:"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖŸáŸÖÿ©"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"3. ÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsx("p",{children:"ŸÜÿ≥ÿ™ÿÆÿØŸÖ ÿ™ŸÇŸÜŸäÿßÿ™ ÿ£ŸÖÿßŸÜ ŸÖÿ™ŸÇÿØŸÖÿ© ŸÑÿ≠ŸÖÿßŸäÿ© ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ© ŸàŸÑÿß ŸÜÿ¥ÿßÿ±ŸÉŸáÿß ŸÖÿπ ÿ£ÿ∑ÿ±ÿßŸÅ ÿ´ÿßŸÑÿ´ÿ© ÿ•ŸÑÿß ÿπŸÜÿØ ÿßŸÑÿ∂ÿ±Ÿàÿ±ÿ© ŸÑÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿÆÿØŸÖÿ©."}),e.jsx("h3",{className:"font-bold text-sky-600",children:"4. ÿ≠ŸÇŸàŸÇŸÉ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ≠ŸÇ ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ"}),e.jsx("li",{children:"ÿ≠ŸÇ ÿ™ÿµÿ≠Ÿäÿ≠ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑÿØŸÇŸäŸÇÿ©"}),e.jsx("li",{children:"ÿ≠ŸÇ ÿ∑ŸÑÿ® ÿ≠ÿ∞ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ Ÿàÿ®ŸäÿßŸÜÿßÿ™ŸÉ"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"5. ÿßŸÑÿ™ŸàÿßÿµŸÑ"}),e.jsx("p",{children:"ŸÑŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™ ÿ≠ŸàŸÑ ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©ÿå ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿπÿ®ÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ£Ÿà ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä."})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsx("button",{onClick:()=>D(!1),className:"w-full py-3 bg-sky-500 text-white font-bold rounded-xl hover:bg-sky-600 transition",children:"ŸÅŸáŸÖÿ™ ‚úì"})})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-emerald-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-bold text-lg",children:"ÿ¥ÿ±Ÿàÿ∑ Ÿàÿ£ÿ≠ŸÉÿßŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®"})]}),e.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-emerald-100 rounded-full",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 text-sm leading-relaxed space-y-4",children:[e.jsx("h3",{className:"font-bold text-emerald-600",children:"1. ÿµŸÅÿ© ÿßŸÑŸÖŸÜÿØŸàÿ®"}),e.jsx("p",{children:"ŸäÿπŸÖŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ® ŸÉŸÖŸÇÿßŸàŸÑ ŸÖÿ≥ÿ™ŸÇŸÑ ŸàŸÑŸäÿ≥ ŸÖŸàÿ∏ŸÅÿßŸã ŸÑÿØŸâ ÿßŸÑŸÖŸÜÿµÿ©. Ÿäÿ™ÿ≠ŸÖŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ® ŸÉÿßŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ© ÿπŸÜ ÿ™ÿµÿ±ŸÅÿßÿ™Ÿá."}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"2. ÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿßŸÑÿπŸÖÿ± 18 ÿ≥ŸÜÿ© ŸÅŸÖÿß ŸÅŸàŸÇ"}),e.jsx("li",{children:"ÿ±ÿÆÿµÿ© ŸÇŸäÿßÿØÿ© ÿ≥ÿßÿ±Ÿäÿ© ÿßŸÑŸÖŸÅÿπŸàŸÑ"}),e.jsx("li",{children:"ŸÖÿ±ŸÉÿ®ÿ© ŸÖŸÜÿßÿ≥ÿ®ÿ© ŸÑŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("li",{children:"Ÿáÿßÿ™ŸÅ ÿ∞ŸÉŸä ŸÖÿπ ÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"3. ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿßÿ™"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ™ŸàÿµŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ≠ÿØÿØ"}),e.jsx("li",{children:"ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿ≥ŸÑÿßŸÖÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("li",{children:"ÿßŸÑÿ™ÿπÿßŸÖŸÑ ÿ®ŸÑÿ∑ŸÅ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ° ŸàÿßŸÑÿ£ÿ≥ÿ±"}),e.jsx("li",{children:"ÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ŸÇŸàÿßŸÜŸäŸÜ ÿßŸÑŸÖÿ±Ÿàÿ±"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"4. ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠ ŸàÿßŸÑÿ±ÿ≥ŸàŸÖ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿäÿ≠ÿØÿØŸáÿß ÿßŸÑŸÖŸÜÿØŸàÿ® ÿ£Ÿà ÿßŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsxs("li",{children:["ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©: ",e.jsx("strong",{children:"3.75 ÿ±ŸäÿßŸÑ"})," ŸÑŸÉŸÑ ÿ∑ŸÑÿ® ÿ™ŸàÿµŸäŸÑ"]}),e.jsx("li",{children:"ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠ ÿ™Ÿèÿ∂ÿßŸÅ ŸÑŸÑŸÖÿ≠ŸÅÿ∏ÿ© ŸÅŸàÿ±ÿßŸã ÿ®ÿπÿØ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"5. ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÜŸÇÿßÿ∑"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ÿäÿ®ÿØÿ£ ÿßŸÑŸÖŸÜÿØŸàÿ® ÿ®ŸÄ 100 ŸÜŸÇÿ∑ÿ©"}),e.jsx("li",{children:"ÿ™ŸèÿÆÿµŸÖ ŸÜŸÇÿßÿ∑ ÿπŸÜÿØ ÿßŸÑÿ¥ŸÉÿßŸàŸâ ÿ£Ÿà ÿßŸÑÿ™ÿ£ÿÆŸäÿ±"}),e.jsx("li",{children:"ŸäŸèŸàŸÇŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿπŸÜÿØ ŸàÿµŸàŸÑ ÿßŸÑŸÜŸÇÿßÿ∑ ŸÑŸÄ 30 ÿ£Ÿà ÿ£ŸÇŸÑ"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"6. ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®"}),e.jsx("p",{children:"Ÿäÿ≠ŸÇ ŸÑŸÑŸÖŸÜÿµÿ© ÿ•ŸäŸÇÿßŸÅ ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÜÿØŸàÿ® ŸÅŸä ÿ≠ÿßŸÑÿßÿ™ ŸÖÿÆÿßŸÑŸÅÿ© ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ÿ£Ÿà ÿ™ŸÑŸÇŸä ÿ¥ŸÉÿßŸàŸâ ŸÖÿ™ŸÉÿ±ÿ±ÿ© ÿ£Ÿà ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™."})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsx("button",{onClick:()=>E(!1),className:"w-full py-3 bg-emerald-500 text-white font-bold rounded-xl hover:bg-emerald-600 transition",children:"ŸÅŸáŸÖÿ™ ‚úì"})})]})}),e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:e.jsx(Pa,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ"})]}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(os,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"ÿßŸÑÿßÿ≥ŸÖ",value:k,onChange:Q=>$(Q.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"ÿßŸÑÿ•ŸäŸÖŸäŸÑ",type:"email",value:i,onChange:Q=>c(Q.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ct,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",type:"password",value:y,onChange:Q=>r(Q.target.value)})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:B.map(Q=>{const O=Q.icon,C=p===Q.value;return e.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${C?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[e.jsx("input",{type:"radio",name:"role",value:Q.value,className:"hidden",onChange:()=>w(Q.value)}),e.jsx(O,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-bold",children:Q.label})]},Q.value)})}),p==="owner"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ",value:M,onChange:Q=>I(Q.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(es,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400 pointer-events-none"}),e.jsxs("select",{value:N,onChange:Q=>A(Q.target.value),className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿØŸäŸÜÿ©"}),Ma.map(Q=>e.jsx("option",{value:Q,children:Q},Q))]})]}),e.jsxs("div",{onClick:()=>m(!_),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${_?"bg-green-50 border-green-400":"bg-orange-50 border-orange-200 hover:border-orange-300"}`,children:[_?e.jsx(Hr,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(Qr,{className:"w-6 h-6 text-orange-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm leading-relaxed",children:[e.jsxs("span",{className:_?"text-green-700":"text-orange-700",children:["ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ"," "]}),e.jsx("button",{type:"button",onClick:Q=>{Q.stopPropagation(),h(!0)},className:"text-sky-600 hover:text-sky-800 font-bold underline",children:"ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ"}),e.jsxs("span",{className:_?"text-green-700":"text-orange-700",children:[" ","Ÿà"," "]}),e.jsx("button",{type:"button",onClick:Q=>{Q.stopPropagation(),D(!0)},className:"text-sky-600 hover:text-sky-800 font-bold underline",children:"ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©"}),e.jsxs("span",{className:_?"text-green-700":"text-orange-700",children:[" ","ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"]})]})]})]}),p==="courier"&&e.jsxs("div",{onClick:()=>m(!_),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${_?"bg-green-50 border-green-400":"bg-emerald-50 border-emerald-200 hover:border-emerald-300"}`,children:[_?e.jsx(Hr,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(Qr,{className:"w-6 h-6 text-emerald-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm leading-relaxed",children:[e.jsxs("span",{className:_?"text-green-700":"text-emerald-700",children:["ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ"," "]}),e.jsx("button",{type:"button",onClick:Q=>{Q.stopPropagation(),E(!0)},className:"text-emerald-600 hover:text-emerald-800 font-bold underline",children:"ÿ¥ÿ±Ÿàÿ∑ Ÿàÿ£ÿ≠ŸÉÿßŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®"}),e.jsxs("span",{className:_?"text-green-700":"text-emerald-700",children:[" ","Ÿàÿ£ÿ™ÿ≠ŸÖŸÑ ŸÉÿßŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ŸÉŸÖŸÜÿØŸàÿ® ŸÖÿ≥ÿ™ŸÇŸÑ"]})]})]}),e.jsx("button",{disabled:j||o&&!_,className:`w-full flex items-center justify-center gap-3 text-white font-bold p-4 rounded-2xl shadow-xl transition-all ${o&&!_?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 shadow-sky-300/50 hover:scale-[1.02]"}`,children:j?"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ...":e.jsxs(e.Fragment,{children:[e.jsx(Pa,{className:"w-5 h-5"}),"ÿ™ÿ≥ÿ¨ŸäŸÑ"]})}),o&&!_&&e.jsx("p",{className:`text-center text-sm p-3 rounded-xl ${p==="courier"?"text-emerald-600 bg-emerald-50":"text-orange-600 bg-orange-50"}`,children:"‚ö†Ô∏è Ÿäÿ¨ÿ® ÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ ŸÑÿ•ŸÉŸÖÿßŸÑ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ"})]}),e.jsxs("p",{className:"mt-6 text-center text-sky-600",children:["ÿπŸÜÿØŸÉ ÿ≠ÿ≥ÿßÿ®ÿü"," ",e.jsx(re,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑ ‚ú®"})]})]})]})},sc=[{id:"customer",title:"ÿπŸÖŸäŸÑ",subtitle:"ÿ£ÿ®ÿ∫Ÿâ ÿ£ÿ∑ŸÑÿ® ÿ£ŸÉŸÑ",emoji:"üõí",icon:e.jsx(us,{className:"w-8 h-8"}),color:"from-green-500 to-emerald-600",shadowColor:"shadow-green-500/30",href:"/register/form?type=customer",features:["ÿ™ÿµŸÅÿ≠ ÿßŸÑŸÖÿ™ÿßÿ¨ÿ±","ÿßÿ∑ŸÑÿ® ÿ£ŸÉŸÑ ÿ®Ÿäÿ™Ÿä","ÿ™ÿßÿ®ÿπ ÿ∑ŸÑÿ®ÿßÿ™ŸÉ"]},{id:"courier",title:"ŸÖŸÜÿØŸàÿ® ÿ™ŸàÿµŸäŸÑ",subtitle:"ÿ£ÿ®ÿ∫Ÿâ ÿ£ŸàÿµŸÑ ÿ∑ŸÑÿ®ÿßÿ™",emoji:"üöó",icon:e.jsx(Ue,{className:"w-8 h-8"}),color:"from-sky-500 to-blue-600",shadowColor:"shadow-sky-500/30",href:"/register/form?type=courier",features:["ÿßÿ≥ÿ™ŸÑŸÖ ÿ∑ŸÑÿ®ÿßÿ™","ÿßŸÉÿ≥ÿ® ŸÅŸÑŸàÿ≥","ÿßÿ¥ÿ™ÿ∫ŸÑ ÿ®ŸàŸÇÿ™ŸÉ"]},{id:"owner",title:"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",subtitle:"ÿπŸÜÿØŸä ÿ£ŸÉŸÑ ÿ®Ÿäÿ™Ÿä ÿ£ÿ®ŸäÿπŸá",emoji:"üë©‚Äçüç≥",icon:e.jsx(mt,{className:"w-8 h-8"}),color:"from-amber-500 to-orange-600",shadowColor:"shadow-orange-500/30",href:"/register-owner",features:["ÿ≥ÿ¨ŸëŸÑ ŸÖÿ™ÿ¨ÿ±ŸÉ","ÿ£ÿ∂ŸÅ ÿ£ÿµŸÜÿßŸÅŸÉ","ÿßÿ≥ÿ™ŸÇÿ®ŸÑ ÿ∑ŸÑÿ®ÿßÿ™"]},{id:"restaurant",title:"ŸÖÿ∑ÿπŸÖ",subtitle:"ÿπŸÜÿØŸä ŸÖÿ∑ÿπŸÖ Ÿàÿ£ÿ®ÿ∫Ÿâ ÿ£ŸàÿµŸÑ ŸÑŸÑÿπŸÖŸÑÿßÿ°",emoji:"üçΩÔ∏è",icon:e.jsx(mt,{className:"w-8 h-8"}),color:"from-rose-500 to-red-600",shadowColor:"shadow-rose-500/30",href:"/register-owner?type=restaurant",features:["ÿ≥ÿ¨ŸëŸÑ ŸÖÿ∑ÿπŸÖŸÉ","ŸÇÿßÿ¶ŸÖÿ© ÿ∑ÿπÿßŸÖ ŸÉÿßŸÖŸÑÿ©","ÿ™ŸàÿµŸäŸÑ ÿ≥ÿ±Ÿäÿπ"]}],tc=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-sky-50 px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-purple-500 to-pink-500 
            rounded-3xl flex items-center justify-center shadow-2xl shadow-purple-500/30`,children:e.jsx("span",{className:"text-4xl",children:"‚ú®"})}),e.jsx("h1",{className:"text-3xl font-black text-gray-800 mb-2",children:"ÿ≥ÿ¨ŸëŸÑ ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ"}),e.jsx("p",{className:"text-gray-500",children:"ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿ≠ÿ≥ÿßÿ®ŸÉ"})]}),e.jsx(re,{to:"/customer-login",className:`block bg-gradient-to-r from-emerald-500 to-green-600 text-white 
            rounded-2xl p-5 mb-6 shadow-xl shadow-emerald-500/30
            active:scale-[0.98] transition-all duration-200 border-2 border-emerald-300`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-16 h-16 bg-white/20 backdrop-blur rounded-2xl 
              flex items-center justify-center flex-shrink-0`,children:e.jsx(Nl,{className:"w-8 h-8"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold",children:"üì± ÿØÿÆŸàŸÑ ÿ≥ÿ±Ÿäÿπ ÿ®ÿßŸÑÿ¨ŸàÿßŸÑ"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿ≥ÿ¨ŸëŸÑ ÿ£Ÿà ÿßÿØÿÆŸÑ ÿ®ÿ±ŸÇŸÖ ÿ¨ŸàÿßŸÑŸÉ ŸÅŸÇÿ∑"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"ÿ®ÿØŸàŸÜ ÿ•ŸäŸÖŸäŸÑ"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"ÿ®ÿØŸàŸÜ ŸÉŸÑŸÖÿ© ŸÖÿ±Ÿàÿ±"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"ÿ≥ÿ±Ÿäÿπ Ÿàÿ¢ŸÖŸÜ"})]})]}),e.jsx(Is,{className:"w-6 h-6 flex-shrink-0"})]})}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"ÿ£Ÿà ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿ≠ÿ≥ÿßÿ®ŸÉ"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),e.jsx("div",{className:"space-y-4",children:sc.map(s=>e.jsx(re,{to:s.href,className:`block bg-gradient-to-r ${s.color} text-white 
                rounded-2xl p-5 shadow-xl ${s.shadowColor}
                active:scale-[0.98] transition-all duration-200`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-16 h-16 bg-white/20 backdrop-blur rounded-2xl 
                  flex items-center justify-center flex-shrink-0`,children:e.jsx("span",{className:"text-4xl",children:s.emoji})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold",children:s.title}),e.jsx("p",{className:"text-white/80 text-sm",children:s.subtitle}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.features.map((t,n)=>e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:t},n))})]}),e.jsx(Is,{className:"w-6 h-6 flex-shrink-0"})]})},s.id))}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("p",{className:"text-gray-500",children:["ÿπŸÜÿØŸÉ ÿ≠ÿ≥ÿßÿ®ÿü"," ",e.jsx(re,{to:"/login",className:"text-purple-600 font-bold hover:underline",children:"ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑ"})]})}),e.jsx(re,{to:"/",className:"block text-center mt-4 text-gray-400 text-sm hover:text-gray-600",children:"‚Üê ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"})]})}),ac=()=>{const s=gs(),[t,n]=a.useState(1),[i,c]=a.useState(!1),[y,r]=a.useState(""),[k,$]=a.useState(""),[M,I]=a.useState(""),[N,A]=a.useState(""),[p,f]=a.useState(""),[_,m]=a.useState(!1),j=()=>{switch(t){case 1:return k.trim().length>=2&&M!=="";case 2:return N.includes("@")&&N.length>=5&&p.length>=6;case 3:return _;default:return!1}},L=()=>{j()&&t<3&&(n(t+1),r(""))},g=()=>{t>1&&(n(t-1),r(""))},d=async()=>{if(j()){c(!0),r("");try{const h=await $t(bs,N,p);await Ze(X(S,"users",h.user.uid),{name:k,email:N,role:"owner",city:M,createdAt:J()}),await Ze(X(S,"restaurants",h.user.uid),{name:k,ownerId:h.user.uid,email:N,city:M,isOpen:!0,packageType:"free",licenseStatus:"pending",createdAt:J()}),s("/owner")}catch(h){console.error("Registration error:",h),h.code==="auth/email-already-in-use"?r("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ¨ŸÑ ŸÖÿ≥ÿ®ŸÇÿßŸã. ÿ¨ÿ±ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"):h.code==="auth/weak-password"?r("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∂ÿπŸäŸÅÿ©. ÿßÿ≥ÿ™ÿÆÿØŸÖ 6 ÿ£ÿ≠ÿ±ŸÅ ÿ£Ÿà ÿ£ŸÉÿ´ÿ±"):r("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{c(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-white to-orange-50 px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-amber-500 to-orange-500 
            rounded-3xl flex items-center justify-center shadow-2xl shadow-orange-500/30`,children:e.jsx(mt,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-black text-gray-800 mb-2",children:"ÿ≥ÿ¨ŸëŸÑ ÿ£ÿ≥ÿ±ÿ™ŸÉ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),e.jsx("p",{className:"text-gray-500",children:"ÿßÿ®ÿØÿ£ ÿßŸÑÿ®Ÿäÿπ ŸÅŸä ÿØŸÇÿßÿ¶ŸÇ! üöÄ"})]}),e.jsx("div",{className:"flex items-center justify-center gap-3 mb-8",children:[1,2,3].map(h=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg
                transition-all duration-300 ${t>h?"bg-green-500 text-white":t===h?"bg-amber-500 text-white shadow-lg scale-110":"bg-gray-200 text-gray-400"}`,children:t>h?e.jsx(hs,{className:"w-5 h-5"}):h}),h<3&&e.jsx("div",{className:`w-8 h-1 mx-1 rounded transition-all duration-300 ${t>h?"bg-green-500":"bg-gray-200"}`})]},h))}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mb-6",children:[t===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("span",{className:"text-5xl",children:"üè†"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-2",children:"ÿπÿ±ŸëŸÅŸÜÿß ÿ®ÿ£ÿ≥ÿ±ÿ™ŸÉ"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"ÿßŸäÿ¥ ÿßÿ≥ŸÖ ŸÖÿ∑ÿ®ÿÆŸÉÿü"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"ÿßÿ≥ŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500"}),e.jsx("input",{type:"text",value:k,onChange:h=>$(h.target.value),placeholder:"ŸÖÿ´ÿßŸÑ: ŸÖÿ∑ÿ®ÿÆ ÿ£ŸÖ ÿ≥ÿßÿ±ÿ©",className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      placeholder:text-gray-400`})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"üí° ÿßÿÆÿ™ÿ± ÿßÿ≥ŸÖ Ÿäÿπÿ®ÿ± ÿπŸÜ ŸáŸàŸäÿ™ŸÉ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsxs("div",{className:"relative",children:[e.jsx(es,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500 pointer-events-none"}),e.jsxs("select",{value:M,onChange:h=>I(h.target.value),className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      appearance-none cursor-pointer bg-white`,children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ŸÖÿØŸäŸÜÿ™ŸÉ"}),Ma.map(h=>e.jsx("option",{value:h,children:h},h))]})]})]})]}),t===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("span",{className:"text-5xl",children:"üìß"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-2",children:"ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"ŸÑÿ™ŸÇÿØÿ± ÿ™ÿØÿÆŸÑ ÿ≠ÿ≥ÿßÿ®ŸÉ ŸÑÿßÿ≠ŸÇÿßŸã"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500"}),e.jsx("input",{type:"email",value:N,onChange:h=>A(h.target.value),placeholder:"example@email.com",className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      placeholder:text-gray-400 text-left`,dir:"ltr"})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"üìß ŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ Ÿàÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ct,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500"}),e.jsx("input",{type:"password",value:p,onChange:h=>f(h.target.value),placeholder:"6 ÿ£ÿ≠ÿ±ŸÅ ÿ£Ÿà ÿ£ŸÉÿ´ÿ±",className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      placeholder:text-gray-400`})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"üîí ÿßÿ≠ŸÅÿ∏Ÿáÿß ŸÅŸä ŸÖŸÉÿßŸÜ ÿ¢ŸÖŸÜ"})]})]}),t===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("span",{className:"text-5xl",children:"‚ú®"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-2",children:"ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßŸÜÿ∑ŸÑÿßŸÇ!"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"ÿÆÿ∑Ÿàÿ© ÿ£ÿÆŸäÿ±ÿ© ŸÅŸÇÿ∑"})]}),e.jsxs("div",{className:"bg-amber-50 rounded-2xl p-4 space-y-3",children:[e.jsx("h3",{className:"font-bold text-amber-800 mb-3",children:"üìã ŸÖŸÑÿÆÿµ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ:"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßÿ≥ŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ©:"}),e.jsx("span",{className:"font-bold text-gray-800",children:k})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©:"}),e.jsx("span",{className:"font-bold text-gray-800",children:M})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:"}),e.jsx("span",{className:"font-bold text-gray-800",dir:"ltr",children:N})]})]}),e.jsxs("button",{onClick:()=>m(!_),className:`w-full p-4 rounded-2xl border-2 flex items-center gap-4 transition-all ${_?"bg-green-50 border-green-500":"bg-white border-gray-200 hover:border-amber-300"}`,children:[_?e.jsx(De,{className:"w-8 h-8 text-green-500 flex-shrink-0"}):e.jsx(Bn,{className:"w-8 h-8 text-gray-300 flex-shrink-0"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`font-bold ${_?"text-green-700":"text-gray-700"}`,children:"ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.jsx(re,{to:"/terms",target:"_blank",className:"text-amber-600 underline",children:"ÿßŸÇÿ±ÿ£ ÿßŸÑÿ¥ÿ±Ÿàÿ∑"})})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-amber-100 to-orange-100 rounded-2xl p-4 text-center",children:e.jsx("p",{className:"text-amber-800 font-bold",children:"üéâ ŸÖÿ®ÿ±ŸàŸÉ! ÿ®ÿπÿØ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿ™ŸÇÿØÿ± ÿ™ÿ∂ŸäŸÅ ÿ£ÿµŸÜÿßŸÅŸÉ Ÿàÿ™ÿ®ÿØÿ£ ÿ™ÿ≥ÿ™ŸÇÿ®ŸÑ ÿ∑ŸÑÿ®ÿßÿ™"})})]}),y&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border-2 border-red-200 rounded-2xl text-red-700 text-center",children:["‚ö†Ô∏è ",y]})]}),e.jsxs("div",{className:"flex gap-3",children:[t>1&&e.jsxs("button",{onClick:g,className:`flex-1 py-4 px-6 rounded-2xl bg-white border-2 border-gray-200 
                text-gray-600 font-bold text-lg flex items-center justify-center gap-2
                active:scale-95 transition-all`,children:[e.jsx(Is,{className:"w-5 h-5"}),"ÿ±ÿ¨Ÿàÿπ"]}),e.jsx("button",{onClick:t===3?d:L,disabled:!j()||i,className:`flex-1 py-4 px-6 rounded-2xl font-bold text-lg 
              flex items-center justify-center gap-2 transition-all
              ${j()&&!i?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-xl shadow-orange-500/30 active:scale-95":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ..."]}):t===3?e.jsxs(e.Fragment,{children:[e.jsx(ds,{className:"w-5 h-5"}),"ÿßÿ®ÿØÿ£ ÿßŸÑÿ¢ŸÜ!"]}):e.jsxs(e.Fragment,{children:["ÿßŸÑÿ™ÿßŸÑŸä",e.jsx(Ra,{className:"w-5 h-5"})]})})]}),e.jsxs("p",{className:"text-center text-gray-500 mt-6",children:["ÿπŸÜÿØŸÉ ÿ≠ÿ≥ÿßÿ®ÿü"," ",e.jsx(re,{to:"/login",className:"text-amber-600 font-bold hover:underline",children:"ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑ"})]})]})})},rl=s=>{let t=s.replace(/\D/g,"");return t.startsWith("0")&&(t=t.substring(1)),t.startsWith("966")||(t="966"+t),"+"+t},rc=()=>{const[s,t]=a.useState(""),[n,i]=a.useState(""),[c,y]=a.useState("phone"),[r,k]=a.useState(!1),[$,M]=a.useState(null),[I,N]=a.useState(0),A=a.useRef(null),p=a.useRef(null),f=gs(),_=Ds();a.useEffect(()=>(A.current&&!p.current&&(p.current=new qr(bs,A.current,{size:"invisible",callback:()=>{},"expired-callback":()=>{p.current=null}})),()=>{p.current&&(p.current.clear(),p.current=null)}),[]),a.useEffect(()=>{if(I>0){const g=setTimeout(()=>N(I-1),1e3);return()=>clearTimeout(g)}},[I]);const m=async()=>{if(!s||s.length<9){_.warning("ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿ¨ŸàÿßŸÑ ÿµÿ≠Ÿäÿ≠");return}const g=rl(s);k(!0);try{!p.current&&A.current&&(p.current=new qr(bs,A.current,{size:"invisible"}));const d=await Fn(bs,g,p.current);M(d),y("otp"),N(60),_.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ŸÑŸâ ÿ¨ŸàÿßŸÑŸÉ")}catch(d){console.error("OTP Error:",d),p.current&&(p.current.clear(),p.current=null),d.code==="auth/invalid-phone-number"?_.error("ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠"):d.code==="auth/too-many-requests"?_.error("ŸÖÿ≠ÿßŸàŸÑÿßÿ™ ŸÉÿ´Ÿäÿ±ÿ©ÿå ÿ≠ÿßŸàŸÑ ŸÑÿßÿ≠ŸÇÿßŸã"):d.code==="auth/quota-exceeded"?_.error("ÿ™ŸÖ ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑÿ≠ÿØ ÿßŸÑŸäŸàŸÖŸäÿå ÿ≠ÿßŸàŸÑ ÿ∫ÿØÿßŸã"):_.error(d.message||"ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ŸÖÿ≤")}finally{k(!1)}},j=async()=>{if(!n||n.length!==6){_.warning("ÿ£ÿØÿÆŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿßŸÑŸÖŸÉŸàŸÜ ŸÖŸÜ 6 ÿ£ÿ±ŸÇÿßŸÖ");return}if(!$){_.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ£ÿπÿØ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ŸÖÿ≤"),y("phone");return}k(!0);try{const g=await $.confirm(n),d=g.user.uid,h=g.user.phoneNumber,F=await Ce(X(S,"users",d));let D=!1;F.exists()?_.success("ÿ£ŸáŸÑÿßŸã ÿ®ÿπŸàÿØÿ™ŸÉ! üëã"):(D=!0,await Ze(X(S,"users",d),{phone:h,role:"customer",name:"",createdAt:J()}),_.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! üéâ"));const b=F.exists()?F.data():{role:"customer"};if(!((b==null?void 0:b.savedLocation)||(b==null?void 0:b.location))&&(b.role==="customer"||D))try{navigator.geolocation&&navigator.geolocation.getCurrentPosition(async o=>{const w={lat:o.coords.latitude,lng:o.coords.longitude,address:"ŸÖŸàŸÇÿπŸä ÿßŸÑÿ≠ÿßŸÑŸä"};await xe(X(S,"users",d),{savedLocation:w,location:{lat:w.lat,lng:w.lng}}),sessionStorage.setItem("broast_session_location",JSON.stringify({lat:w.lat,lng:w.lng}))},o=>{console.warn("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã:",o)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}catch(o){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ:",o)}b.role==="owner"?f("/owner"):b.role==="admin"?f("/admin"):b.role==="developer"?f("/developer"):b.role==="courier"?f("/courier"):f("/")}catch(g){console.error("Verify Error:",g),g.code==="auth/invalid-verification-code"?_.error("ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠"):g.code==="auth/code-expired"?(_.error("ÿßŸÜÿ™Ÿáÿ™ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑÿ±ŸÖÿ≤ÿå ÿ£ÿπÿØ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ"),y("phone")):_.error(g.message||"ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ŸÇŸÇ")}finally{k(!1)}},L=()=>{I>0||(y("phone"),i(""),M(null))};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),e.jsx("div",{ref:A,id:"recaptcha-container"}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:e.jsx("span",{className:"text-4xl",children:"üçù"})}),e.jsx("h1",{className:"text-3xl font-black text-sky-600",children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}),e.jsx("p",{className:"text-sky-500 mt-1",children:c==="phone"?"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ":"ÿ£ÿØÿÆŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ"})]}),c==="phone"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Nr,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:s,onChange:g=>t(g.target.value.replace(/\D/g,"")),maxLength:10})]}),e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"ÿ≥ŸÜÿ±ÿ≥ŸÑ ŸÑŸÉ ÿ±ŸÖÿ≤ ÿ™ÿ≠ŸÇŸÇ ÿπÿ®ÿ± SMS"}),e.jsx("button",{onClick:m,disabled:r||s.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"w-5 h-5"}),"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ"]})})]}),c==="otp"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("p",{className:"text-gray-600",children:"ÿ£ÿ±ÿ≥ŸÑŸÜÿß ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ŸÑŸâ"}),e.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:rl(s)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(yr,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:g=>i(g.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),e.jsx("button",{onClick:j,disabled:r||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÇŸÇ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yl,{className:"w-5 h-5"}),"ÿ™ÿ£ŸÉŸäÿØ ŸàÿØÿÆŸàŸÑ"]})}),e.jsx("div",{className:"text-center",children:I>0?e.jsxs("p",{className:"text-gray-500 text-sm",children:["ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ÿπÿØ ",e.jsx("span",{className:"font-bold text-sky-600",children:I})," ÿ´ÿßŸÜŸäÿ©"]}):e.jsx("button",{onClick:L,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"ŸÑŸÖ ŸäÿµŸÑŸÉ ÿßŸÑÿ±ŸÖÿ≤ÿü ÿ£ÿπÿØ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ"})}),e.jsx("button",{onClick:()=>{y("phone"),i("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"‚Üê ÿ™ÿ∫ŸäŸäÿ± ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[e.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"ÿµÿßÿ≠ÿ® ŸÖÿ∑ÿπŸÖ ÿ£Ÿà ŸÖŸÜÿØŸàÿ®ÿü"}),e.jsx(re,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿ®ÿßŸÑÿ•ŸäŸÖŸäŸÑ ‚Üí"})]})]})]})};function lc(){return e.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-4 py-10 leading-relaxed",children:e.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-4 text-center",children:"ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ© Ÿàÿ•ÿÆŸÑÿßÿ° ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ©"}),e.jsx("p",{className:"text-center text-gray-600 mb-8",children:"üè† ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}),e.jsx("section",{className:"mb-6",children:e.jsxs("p",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 text-gray-800",children:["ŸÜÿ≠ŸÜ ŸÅŸä ÿ™ÿ∑ÿ®ŸäŸÇ ",e.jsx("strong",{children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})," ŸÜÿ≠ÿ™ÿ±ŸÖ ÿÆÿµŸàÿµŸäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ŸàŸÜÿ≥ÿπŸâ ŸÑÿ™ŸÇÿØŸäŸÖ ŸÖŸÜÿµÿ© ÿ¢ŸÖŸÜÿ© Ÿàÿ≥ŸáŸÑÿ© ÿ™ÿ±ÿ®ÿ∑ ÿ®ŸäŸÜ ŸÖŸÇÿØŸÖŸä ÿßŸÑÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ŸàÿßŸÑÿπŸÖŸÑÿßÿ°."]})}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"1. ÿ∑ÿ®Ÿäÿπÿ© ÿØŸàÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsxs("li",{children:["ÿ™ÿ∑ÿ®ŸäŸÇ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸäÿπŸÖŸÑ ŸÉŸÄ",e.jsx("strong",{className:"text-sky-600",children:"ŸÖŸÜÿµÿ© Ÿàÿ≥Ÿäÿ∑ÿ© ŸÅŸÇÿ∑"})," ŸÑÿ±ÿ®ÿ∑ ÿßŸÑÿπŸÖŸÑÿßÿ° ÿ®ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ŸàÿßŸÑŸÖÿ∑ÿßÿπŸÖ ŸàŸÖŸÇÿØŸÖŸä ÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ™ŸàÿµŸäŸÑ."]}),e.jsxs("li",{children:["ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ",e.jsx("strong",{className:"text-red-600",children:"ŸÑÿß ŸäŸÇŸàŸÖ"})," ÿ®ÿ•ÿπÿØÿßÿØ ÿßŸÑÿ∑ÿπÿßŸÖÿå ŸàŸÑÿß ÿ®ÿ™ÿ∫ŸÑŸäŸÅŸáÿå ŸàŸÑÿß ÿ®ÿ™ÿÆÿ≤ŸäŸÜŸáÿå ŸàŸÑÿß ÿ®ÿ™ŸàÿµŸäŸÑŸá ÿ®ÿ¥ŸÉŸÑ ŸÖÿ®ÿßÿ¥ÿ±."]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-red-500 pr-3",children:"2. ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿπŸÜ ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿπÿßŸÖ"}),e.jsxs("p",{className:"mb-3 text-gray-700",children:["ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿ∑ÿπŸÖÿ© ŸàÿßŸÑŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™ ÿßŸÑŸÖÿπÿ±Ÿàÿ∂ÿ© ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ Ÿäÿ™ŸÖ ÿ•ÿπÿØÿßÿØŸáÿß Ÿàÿ™ÿ¨ŸáŸäÿ≤Ÿáÿß ŸÖŸÜ ŸÇÿ®ŸÑ ",e.jsx("strong",{children:"ŸÖŸÇÿØŸÖŸä ÿßŸÑÿÆÿØŸÖÿ© ÿ£ŸÜŸÅÿ≥ŸáŸÖ"}),". ŸàÿπŸÑŸäŸá:"]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"font-bold text-red-700 mb-3",children:"ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ∫Ÿäÿ± ŸÖÿ≥ÿ§ŸàŸÑ ÿπŸÜ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-red-700 mr-4",children:[e.jsx("li",{children:"ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿπÿßŸÖ"}),e.jsx("li",{children:"ÿ≥ŸÑÿßŸÖÿ© ÿßŸÑŸÖŸÉŸàŸÜÿßÿ™"}),e.jsx("li",{children:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ"}),e.jsx("li",{children:"ÿßŸÑÿ™ÿ≥ŸÖŸÖ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿä"}),e.jsx("li",{children:"ÿ£Ÿä ÿ£ÿ∂ÿ±ÿßÿ± ÿµÿ≠Ÿäÿ© ÿ£Ÿà ÿ≠ÿ≥ÿßÿ≥Ÿäÿ© ÿ∫ÿ∞ÿßÿ¶Ÿäÿ©"}),e.jsx("li",{children:"ÿßŸÑŸÜÿ∏ÿßŸÅÿ© ÿ£Ÿà ÿßŸÑÿ™ÿ∫ŸÑŸäŸÅ"})]}),e.jsx("p",{className:"mt-4 font-bold text-gray-800 bg-amber-100 p-2 rounded",children:"‚ö†Ô∏è ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑŸÉÿßŸÖŸÑÿ© ÿ™ŸÇÿπ ÿπŸÑŸâ ŸÖŸÇÿØŸÖ ÿßŸÑÿÆÿØŸÖÿ© (ÿßŸÑÿ£ÿ≥ÿ±ÿ© / ÿßŸÑŸÖÿ∑ÿπŸÖ)"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-amber-500 pr-3",children:"3. ÿßŸÑÿ≠ÿ≥ÿßÿ≥Ÿäÿ© ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ŸàÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsxs("li",{children:["Ÿäÿ™ÿ≠ŸÖŸÑ ",e.jsx("strong",{children:"ÿßŸÑÿπŸÖŸäŸÑ"})," ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖŸÉŸàŸÜÿßÿ™ ŸÇÿ®ŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿå ÿÆÿßÿµÿ© ŸÅŸä ÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ≥Ÿäÿ© ÿ£Ÿà ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ÿßŸÑÿÆÿßÿµÿ©."]}),e.jsxs("li",{children:["ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ",e.jsx("strong",{className:"text-red-600",children:"ŸÑÿß Ÿäÿ∂ŸÖŸÜ"})," ÿØŸÇÿ© ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ÿßŸÑŸÖŸÇÿØŸÖÿ© ŸÖŸÜ ŸÖŸÇÿØŸÖŸä ÿßŸÑÿÆÿØŸÖÿ©."]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"4. ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsxs("p",{className:"mb-3 text-gray-700",children:["ÿÆÿØŸÖÿ© ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿäÿ™ŸÖ ÿ™ŸÜŸÅŸäÿ∞Ÿáÿß ÿ®Ÿàÿßÿ≥ÿ∑ÿ© ",e.jsx("strong",{children:"ÿ∑ÿ±ŸÅ ÿ´ÿßŸÑÿ´ ŸÖÿ≥ÿ™ŸÇŸÑ"}),"."]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"font-bold text-gray-700 mb-2",children:"ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ∫Ÿäÿ± ŸÖÿ≥ÿ§ŸàŸÑ ÿπŸÜ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600 mr-4",children:[e.jsx("li",{children:"ÿ™ÿ£ÿÆŸäÿ± ÿßŸÑÿ∑ŸÑÿ®"}),e.jsx("li",{children:"ÿ™ŸÑŸÅ ÿßŸÑÿ∑ŸÑÿ® ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÜŸÇŸÑ"}),e.jsx("li",{children:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖŸÜ ÿßŸÑŸÖŸÜÿØŸàÿ®"})]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"5. ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsx("p",{className:"mb-3 text-gray-700",children:"ŸÇÿØ ŸÜŸÇŸàŸÖ ÿ®ÿ¨ŸÖÿπ ÿ®ŸäÿßŸÜÿßÿ™ ÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÖÿ´ŸÑ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-700 mr-4 mb-3",children:[e.jsx("li",{children:"ÿßŸÑÿßÿ≥ŸÖ"}),e.jsx("li",{children:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("li",{children:"ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ¨ÿ∫ÿ±ÿßŸÅŸä"}),e.jsx("li",{children:"ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®"})]}),e.jsxs("div",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-gray-700",children:["Ÿàÿ∞ŸÑŸÉ ",e.jsx("strong",{children:"ŸÅŸÇÿ∑"})," ŸÑÿ∫ÿ±ÿ∂ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿÆÿØŸÖÿ© Ÿàÿ™ÿ≠ÿ≥ŸäŸÜ ÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ."]}),e.jsx("p",{className:"text-sky-700 font-bold mt-2",children:"‚úÖ ŸÑÿß Ÿäÿ™ŸÖ ÿ®Ÿäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÑÿ£Ÿä ÿ∑ÿ±ŸÅ ÿÆÿßÿ±ÿ¨Ÿä"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-purple-500 pr-3",children:"6. ÿßŸÑŸÜÿ≤ÿßÿπÿßÿ™"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsxs("li",{children:["ÿ£Ÿä ŸÜÿ≤ÿßÿπ Ÿäÿ™ÿπŸÑŸÇ ÿ®ÿßŸÑÿ∑ÿπÿßŸÖ ÿ£Ÿà ÿßŸÑÿÆÿØŸÖÿ© Ÿäÿ™ŸÖ ÿ≠ŸÑŸá ",e.jsx("strong",{children:"ŸÖÿ®ÿßÿ¥ÿ±ÿ©"})," ÿ®ŸäŸÜ ÿßŸÑÿπŸÖŸäŸÑ ŸàŸÖŸÇÿØŸÖ ÿßŸÑÿÆÿØŸÖÿ©."]}),e.jsxs("li",{children:["ÿØŸàÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸäŸÇÿ™ÿµÿ± ÿπŸÑŸâ ",e.jsx("strong",{className:"text-sky-600",children:"ÿßŸÑŸàÿ≥ÿßÿ∑ÿ© ÿßŸÑÿ™ŸÇŸÜŸäÿ© ŸÅŸÇÿ∑"}),"."]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-green-500 pr-3",children:"7. ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©"}),e.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4",children:e.jsxs("p",{className:"text-green-800",children:["ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿå ŸÅÿ•ŸÜŸÉ ",e.jsx("strong",{children:"ÿ™ŸàÿßŸÅŸÇ"})," ÿπŸÑŸâ Ÿáÿ∞Ÿá ÿßŸÑÿ¥ÿ±Ÿàÿ∑ Ÿàÿ™ŸÇÿ± ÿ®ÿ£ŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ",e.jsx("strong",{children:"Ÿàÿ≥Ÿäÿ∑ ÿ™ŸÇŸÜŸä ŸÅŸÇÿ∑"})," ŸàŸÑÿß Ÿäÿ™ÿ≠ŸÖŸÑ ÿ£Ÿä ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿπŸÜ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑŸÖÿπÿ±Ÿàÿ∂ÿ©."]})})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"8. ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß"}),e.jsxs("div",{className:"bg-sky-50 rounded-lg p-4",children:[e.jsxs("p",{className:"mb-2",children:["üìß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä: ",e.jsx("strong",{children:"afrtalbyt2026@gmail.com"})]}),e.jsxs("p",{className:"mb-2",children:["üìû ÿßŸÑÿ¨ŸàÿßŸÑ: ",e.jsx("strong",{dir:"ltr",children:"0535534208"})]}),e.jsx("p",{children:"üì± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ: ŸÇÿ≥ŸÖ ÿßŸÑÿØÿπŸÖ ŸàÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©"})]})]}),e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-400 rounded-lg p-4 mt-8 text-center",children:[e.jsx("p",{className:"text-amber-800 font-bold text-lg",children:"‚ö†Ô∏è ÿ•ŸÇÿ±ÿßÿ± ŸÖŸáŸÖ"}),e.jsx("p",{className:"text-amber-700 mt-2",children:'ÿ®ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ "ŸÖŸàÿßŸÅŸÇ" ÿ£Ÿà ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿå ÿ£ŸÜÿ™ ÿ™ŸÇÿ± ÿ®ÿ£ŸÜŸÉ ŸÇÿ±ÿ£ÿ™ ŸàŸÅŸáŸÖÿ™ ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ© Ÿàÿ•ÿÆŸÑÿßÿ° ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© Ÿàÿ™ŸàÿßŸÅŸÇ ÿπŸÑŸäŸáÿß ÿ®ÿßŸÑŸÉÿßŸÖŸÑ.'})]}),e.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["ÿ™ŸÖ ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´ ŸÑŸáÿ∞Ÿá ÿßŸÑÿ≥Ÿäÿßÿ≥ÿ© ÿ®ÿ™ÿßÿ±ŸäÿÆ ",new Date().toLocaleDateString("ar-SA")]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(re,{to:"/terms",className:"text-white bg-sky-500 hover:bg-sky-600 px-6 py-3 rounded-lg inline-block transition-colors text-center font-bold",children:"üìã ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ"}),e.jsx(re,{to:"/",className:"text-sky-600 bg-sky-100 hover:bg-sky-200 px-6 py-3 rounded-lg inline-block transition-colors text-center",children:"ÿßŸÑÿ±ÿ¨Ÿàÿπ ÿ•ŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"})]})]})})}function nc(){return e.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-4 py-10 leading-relaxed",children:e.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:"ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ - üè† ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"1. ÿßŸÑÿ™ÿπÿ±ŸäŸÅ"}),e.jsx("p",{children:"ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸáŸä ŸÖŸÜÿµÿ© ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿ© ÿ™ŸáÿØŸÅ ÿ•ŸÑŸâ ÿπÿ±ÿ∂ Ÿàÿ™ÿ≥ŸàŸäŸÇ ŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© Ÿàÿ±ÿ®ÿ∑Ÿáÿß ÿ®ÿßŸÑÿπŸÖŸÑÿßÿ° ÿπÿ®ÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ."})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"2. ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÅŸä ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸÖÿ¨ÿßŸÜŸä ÿ®ÿßŸÑŸÉÿßŸÖŸÑ."}),e.jsx("li",{children:"ŸÑÿß Ÿäÿ™ŸÖ ŸÅÿ±ÿ∂ ÿ£Ÿä ÿ±ÿ≥ŸàŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"3. ÿ™ÿ≥ÿπŸäÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ Ÿàÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ÿ™ŸÇŸàŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿ®ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨."}),e.jsxs("li",{children:["ÿ™ŸàÿßŸÅŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿπŸÑŸâ ŸÇŸäÿßŸÖ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ŸÇÿØÿ±Ÿáÿß"," ",e.jsx("strong",{className:"text-sky-600",children:"1.75 ÿ±ŸäÿßŸÑ"})," ÿπŸÑŸâ ŸÉŸÑ ŸÖŸÜÿ™ÿ¨."]}),e.jsxs("li",{children:["ÿ®ÿßŸÑŸÜÿ≥ÿ®ÿ© ŸÑŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ™Ÿä ŸäŸÉŸàŸÜ ÿ≥ÿπÿ±Ÿáÿß 1 ÿ±ŸäÿßŸÑ ÿ£Ÿà 2 ÿ±ŸäÿßŸÑÿå Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ©"," ",e.jsx("strong",{className:"text-sky-600",children:"0.25 ÿ±ŸäÿßŸÑ"})," ŸÅŸÇÿ∑."]}),e.jsx("li",{children:"Ÿäÿ∏Ÿáÿ± ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿπŸÖŸäŸÑ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿπŸÑŸâ ÿ£ŸÜŸá ÿ≥ÿπÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨."}),e.jsx("li",{children:"ŸÑÿß Ÿäÿ™ŸÖ ÿÆÿµŸÖ ÿ£Ÿä ŸÖÿ®ÿßŸÑÿ∫ ŸÖŸÜ ÿØÿÆŸÑ ÿßŸÑÿ£ÿ≥ÿ±ÿ©ÿå Ÿàÿ¨ŸÖŸäÿπ ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ© ÿ™Ÿèÿ≠ŸÖŸëŸÑ ÿπŸÑŸâ ÿßŸÑÿπŸÖŸäŸÑ."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"4. ÿßŸÑÿ∑ŸÑÿ® ŸàÿßŸÑÿØŸÅÿπ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"Ÿäÿ™ŸÖ ÿπÿ±ÿ∂ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ®ÿπÿØ ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ©."}),e.jsxs("li",{children:["ŸÇÿØ Ÿäÿ™ŸÖ ÿßÿ≠ÿ™ÿ≥ÿßÿ® ÿ±ÿ≥ŸàŸÖ ÿ£ÿÆÿ±Ÿâ ŸÖÿ´ŸÑ:",e.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[e.jsx("li",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("li",{children:"ÿ∂ÿ±Ÿäÿ®ÿ© ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿ∂ÿßŸÅÿ© ÿ≠ÿ≥ÿ® ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑŸÖÿπŸÖŸàŸÑ ÿ®Ÿáÿß"})]})]}),e.jsx("li",{children:"ÿ™ÿ≠ÿ™ŸÅÿ∏ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ≠ŸÇ ÿ™ÿ≠ÿØŸäÿ´ ÿ£Ÿà ÿ•ÿ∂ÿßŸÅÿ© ÿÆÿØŸÖÿßÿ™ ÿ£Ÿà ÿ±ÿ≥ŸàŸÖ ŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ© ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ©ÿå ŸÖÿπ ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿ®ÿ∞ŸÑŸÉ."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"5. ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),e.jsx("p",{className:"mb-3",children:"ÿ™ÿ™ÿ≠ŸÖŸÑ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ŸÉÿßŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿπŸÜ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[e.jsx("li",{children:"ÿ¨ŸàÿØÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™"}),e.jsx("li",{children:"ÿ≥ŸÑÿßŸÖÿ© ÿßŸÑÿ£ÿµŸÜÿßŸÅ"}),e.jsx("li",{children:"ŸÜÿ∏ÿßŸÅÿ© Ÿàÿ™ÿ≠ÿ∂Ÿäÿ± ÿßŸÑÿ∑ÿπÿßŸÖ"}),e.jsx("li",{children:"ÿßŸÑÿ™ÿ∫ŸÑŸäŸÅ ŸàÿßŸÑÿ™ÿπÿ®ÿ¶ÿ©"}),e.jsx("li",{children:"ÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßÿ∑ÿßÿ™ ÿßŸÑÿµÿ≠Ÿäÿ© ÿßŸÑŸÖÿπŸÖŸàŸÑ ÿ®Ÿáÿß"})]}),e.jsx("p",{className:"mt-3",children:"ÿ™ŸÑÿ™ÿ≤ŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿ®ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿ®ÿßŸÑÿ≠ÿßŸÑÿ© ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© ŸàÿßŸÑŸÖÿ™ŸÅŸÇ ÿπŸÑŸäŸáÿß ŸÖÿπ ÿßŸÑÿπŸÖŸäŸÑ."})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"6. ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸàÿßŸÑŸÖŸÜÿØŸàÿ®ŸäŸÜ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ÿ™ÿπŸÖŸÑ ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸÉŸàÿ≥Ÿäÿ∑ ÿ™ŸÇŸÜŸä ŸÑÿ±ÿ®ÿ∑ ÿßŸÑÿ£ÿ∑ÿ±ÿßŸÅ."}),e.jsxs("li",{children:["ŸÑÿß ÿ™ÿ™ÿ≠ŸÖŸÑ ÿßŸÑŸÖŸÜÿµÿ© ÿ£Ÿä ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿπŸÜ:",e.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[e.jsx("li",{children:"ÿ™ÿµÿ±ŸÅÿßÿ™ ÿßŸÑŸÖŸÜÿØŸàÿ®"}),e.jsx("li",{children:"ÿ™ÿ£ÿÆŸäÿ± ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("li",{children:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿπÿßŸÖŸÑ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ"}),e.jsx("li",{children:"ÿ™ŸÑŸÅ ÿßŸÑÿ∑ŸÑÿ® ÿ®ÿπÿØ ÿÆÿ±Ÿàÿ¨Ÿá ŸÖŸÜ ÿßŸÑÿ£ÿ≥ÿ±ÿ©"})]})]}),e.jsx("li",{children:"ÿ£Ÿä ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ŸÖÿ™ÿπŸÑŸÇÿ© ÿ®ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿäÿ™ŸÖ ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπŸáÿß ÿ≠ÿ≥ÿ® ÿ≥Ÿäÿßÿ≥ÿ© ŸÖÿ≤ŸàÿØ ÿßŸÑÿ™ŸàÿµŸäŸÑ ÿßŸÑŸÖÿπÿ™ŸÖÿØ."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"7. ÿßŸÑÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ•ÿπŸÑÿßŸÜŸäÿ© (ÿßÿÆÿ™Ÿäÿßÿ±Ÿäÿ©)"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ÿ™ÿ™Ÿäÿ≠ ÿßŸÑŸÖŸÜÿµÿ© ÿÆÿØŸÖÿßÿ™ ÿ•ÿπŸÑÿßŸÜŸäÿ© ÿ£Ÿà ÿ™ÿ±ŸàŸäÿ¨Ÿäÿ© ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÖŸÇÿßÿ®ŸÑ ÿ±ÿ≥ŸàŸÖ."}),e.jsx("li",{children:"Ÿáÿ∞Ÿá ÿßŸÑÿÆÿØŸÖÿßÿ™ ÿßÿÆÿ™Ÿäÿßÿ±Ÿäÿ© ÿ®ÿßŸÑŸÉÿßŸÖŸÑ ŸàŸÑÿß ÿ™ÿ§ÿ´ÿ± ÿπŸÑŸâ ÿßÿ≥ÿ™ŸÖÿ±ÿßÿ± ÿπÿ±ÿ∂ ŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ŸÅŸä ÿ≠ÿßŸÑ ÿπÿØŸÖ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ."}),e.jsx("li",{children:"ÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™ ÿ™ŸáÿØŸÅ ÿ•ŸÑŸâ ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ∏ŸáŸàÿ± ŸàŸÑÿß ÿ™ÿ∂ŸÖŸÜ ÿπÿØÿØŸãÿß ŸÖÿπŸäŸÜŸãÿß ŸÖŸÜ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿ£Ÿà ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"8. ÿ≠ÿØŸàÿØ ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsx("p",{className:"mb-3",children:"ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ÿ∫Ÿäÿ± ŸÖÿ≥ÿ§ŸàŸÑÿ© ÿπŸÜ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[e.jsx("li",{children:"ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ£Ÿà ÿµŸàÿ±Ÿáÿß"}),e.jsx("li",{children:"ÿßÿÆÿ™ŸÑÿßŸÅ ÿßŸÑÿ™ŸàŸÇÿπÿßÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ© ŸÑŸÑÿπŸÖŸäŸÑ"}),e.jsx("li",{children:"ÿ£Ÿä ÿ£ÿ∂ÿ±ÿßÿ± ŸÜÿßÿ™ÿ¨ÿ© ÿπŸÜ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨"})]}),e.jsx("p",{className:"mt-3",children:"ŸäŸÇÿ™ÿµÿ± ÿØŸàÿ± ÿßŸÑŸÖŸÜÿµÿ© ÿπŸÑŸâ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4 mt-2",children:[e.jsx("li",{children:"ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™"}),e.jsx("li",{children:"ÿ™ÿ≥ŸáŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsx("li",{children:"ÿ±ÿ®ÿ∑ ÿßŸÑÿ£ÿ∑ÿ±ÿßŸÅ ÿπÿ®ÿ± ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸÇŸÜŸä"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"9. ÿßŸÑÿ™ÿπÿØŸäŸÑ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"Ÿäÿ≠ŸÇ ŸÑŸÑŸÖŸÜÿµÿ© ÿ™ÿπÿØŸäŸÑ Ÿáÿ∞Ÿá ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿ®ŸÖÿß Ÿäÿ™ŸàÿßŸÅŸÇ ŸÖÿπ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ©."}),e.jsx("li",{children:"Ÿäÿ™ŸÖ ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿ®ÿ£Ÿä ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"10. ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©"}),e.jsx("p",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 text-gray-800",children:"ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸÉ ŸÑŸÑÿ™ÿ∑ÿ®ŸäŸÇÿå ŸÅÿ•ŸÜŸÉ ÿ™ŸÇÿ± ÿ®ŸÇÿ±ÿßÿ°ÿ© ŸàŸÅŸáŸÖ ŸàÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ ÿ£ÿπŸÑÿßŸá."})]}),e.jsxs("div",{className:"border-t-2 border-gray-200 pt-6 mt-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:"ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-3 text-gray-700",children:[e.jsx("li",{children:"ÿ™ÿ≠ÿ™ÿ±ŸÖ ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ÿÆÿµŸàÿµŸäÿ© ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ."}),e.jsxs("li",{children:["Ÿäÿ™ŸÖ ÿ¨ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸÇÿ∑ ŸÑÿ∫ÿ±ÿ∂:",e.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[e.jsx("li",{children:"ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsx("li",{children:"ÿ™ŸÜŸÅŸäÿ∞ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("li",{children:"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),e.jsx("li",{children:"ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ¨ŸàÿØÿ© ÿßŸÑÿÆÿØŸÖÿ©"})]})]}),e.jsx("li",{children:"ŸÑÿß Ÿäÿ™ŸÖ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ŸÖÿπ ÿ£Ÿä ÿ∑ÿ±ŸÅ ÿ´ÿßŸÑÿ´ ÿ•ŸÑÿß ÿπŸÜÿØ ÿßŸÑÿ∂ÿ±Ÿàÿ±ÿ© ŸÑÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿÆÿØŸÖÿ© ÿ£Ÿà ŸàŸÅŸÇ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑŸÖÿπŸÖŸàŸÑ ÿ®Ÿáÿß."}),e.jsx("li",{children:"ÿ™ÿ≠ÿ™ŸÅÿ∏ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ≠ŸÇ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ¥ÿßŸáÿØÿßÿ™ ŸàÿßŸÑÿ™ŸÅÿßÿπŸÑ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿ™ÿ¥ÿ∫ŸäŸÑŸäÿ© Ÿàÿ™ÿ≠ŸÑŸäŸÑŸäÿ© Ÿàÿ™ÿ≠ÿ≥ŸäŸÜŸäÿ©."})]})]}),e.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 mt-8 text-center",children:e.jsx("p",{className:"text-green-800 font-medium",children:"‚òëÔ∏è ÿ®ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©ÿå ÿ£ŸÜÿ™ ÿ™ŸÇÿ± ÿ®ŸÇÿ±ÿßÿ°ÿ© ŸàŸÅŸáŸÖ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ Ÿàÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©"})}),e.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["ÿ™ŸÖ ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´ ŸÑŸáÿ∞Ÿá ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ÿ®ÿ™ÿßÿ±ŸäÿÆ ",new Date().toLocaleDateString("ar-SA")]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(re,{to:"/register",className:"text-white bg-sky-500 hover:bg-sky-600 px-6 py-3 rounded-lg inline-block transition-colors text-center font-bold",children:"‚úÖ ŸÖŸàÿßŸÅŸÇ - ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ™ÿ≥ÿ¨ŸäŸÑ"}),e.jsx(re,{to:"/",className:"text-sky-600 bg-sky-100 hover:bg-sky-200 px-6 py-3 rounded-lg inline-block transition-colors text-center",children:"ÿßŸÑÿ±ÿ¨Ÿàÿπ ÿ•ŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"})]})]})})}function ic(){return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ŸÜÿ£ÿ≥ŸÅ ŸÑŸÖÿ∫ÿßÿØÿ±ÿ™ŸÉ üçó ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿπŸàÿØÿ© ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™ Ÿàÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ."}),e.jsx(re,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"ÿßŸÑÿ±ÿ¨Ÿàÿπ ÿ•ŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"})]})}const Ee=({allow:s,children:t})=>{const{role:n,loading:i}=$e();return i?e.jsx("div",{className:"p-8 text-center",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."}):!n||!s.includes(n)?e.jsx(_a,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:t})},Ol=({isOpen:s,onClose:t,onConfirm:n,initialLocation:i})=>{const[c,y]=a.useState(i||null),[r,k]=a.useState(""),[$,M]=a.useState(!1),[I,N]=a.useState(!1),[A,p]=a.useState(null),[f,_]=a.useState(!1),[m,j]=a.useState(""),[L,g]=a.useState([]),[d,h]=a.useState(!1),[F,D]=a.useState(!1),[b,E]=a.useState("map"),o={lat:24.7136,lng:46.6753},w=a.useCallback(async P=>{if(!P.trim()||P.length<2){g([]),D(!1);return}h(!0);try{const x=P.includes("ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©")?P:`${P}, ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©`,R=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(x)}&limit=5&accept-language=ar`,{headers:{Accept:"application/json"}})).json();g(R),D(R.length>0)}catch(x){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ®ÿ≠ÿ´:",x),g([])}finally{h(!1)}},[]),U=a.useCallback(P=>{const x={lat:parseFloat(P.lat),lng:parseFloat(P.lon)};y(x),j(""),g([]),D(!1),window.leafletMap&&(window.leafletMap.setView([x.lat,x.lng],16,{animate:!0,duration:.5}),window.leafletMarker&&window.leafletMarker.setLatLng([x.lat,x.lng]));const z=P.display_name.split(",").slice(0,3).join("ÿå");k(z)},[]),B=a.useCallback(()=>{if(!navigator.geolocation){p("ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÑÿß ŸäÿØÿπŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ");return}N(!0),p(null),navigator.geolocation.getCurrentPosition(P=>{const x={lat:P.coords.latitude,lng:P.coords.longitude};y(x),N(!1),window.leafletMap&&(window.leafletMap.setView([x.lat,x.lng],17),window.leafletMarker&&window.leafletMarker.setLatLng([x.lat,x.lng]))},P=>{N(!1),P.code===1?p("ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ•ÿ∞ŸÜ ÿßŸÑŸÖŸàŸÇÿπ. ŸÅÿπŸëŸÑ ÿßŸÑŸÖŸàŸÇÿπ ŸÖŸÜ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ™ÿµŸÅÿ≠"):P.code===2?p("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ŸÅÿπŸäŸÑ GPS"):p("ÿßŸÜÿ™Ÿáÿ™ ŸÖŸáŸÑÿ© ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);a.useEffect(()=>{if(s){if(!document.getElementById("leaflet-css")){const P=document.createElement("link");P.id="leaflet-css",P.rel="stylesheet",P.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(P)}if(window.L)_(!0);else{const P=document.createElement("script");P.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",P.onload=()=>_(!0),document.body.appendChild(P)}}},[s]),a.useEffect(()=>{if(!s||!f||!window.L)return;const P=window.L;if(!document.getElementById("location-map"))return;window.leafletMap&&window.leafletMap.remove();const z=c||o,R=P.map("location-map",{zoomControl:!1,attributionControl:!1}).setView([z.lat,z.lng],c?17:12);P.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(R);const u=P.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;">üìç</div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),v=P.marker([z.lat,z.lng],{icon:u,draggable:!0}).addTo(R);return v.on("dragend",()=>{const H=v.getLatLng();y({lat:H.lat,lng:H.lng})}),R.on("click",H=>{const{lat:Y,lng:ce}=H.latlng;v.setLatLng([Y,ce]),y({lat:Y,lng:ce})}),window.leafletMap=R,window.leafletMarker=v,c&&y(c),()=>{window.leafletMap&&(window.leafletMap.remove(),window.leafletMap=null,window.leafletMarker=null)}},[s,f]);const Q=()=>{c&&window.leafletMap&&window.leafletMap.setView([c.lat,c.lng],17,{animate:!0,duration:.5})},O={ÿßŸÑÿ±Ÿäÿßÿ∂:{lat:24.7136,lng:46.6753},ÿ¨ÿØÿ©:{lat:21.4858,lng:39.1925},"ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©":{lat:21.3891,lng:39.8579},"ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©":{lat:24.5247,lng:39.5692},ÿßŸÑÿØŸÖÿßŸÖ:{lat:26.4207,lng:50.0888},ÿßŸÑÿÆÿ®ÿ±:{lat:26.2172,lng:50.1971},ÿßŸÑÿ£ÿ≠ÿ≥ÿßÿ°:{lat:25.3548,lng:49.5886},ÿßŸÑÿ∑ÿßÿ¶ŸÅ:{lat:21.2703,lng:40.4158},ÿ™ÿ®ŸàŸÉ:{lat:28.3838,lng:36.555},ÿ®ÿ±ŸäÿØÿ©:{lat:26.326,lng:43.975},"ÿÆŸÖŸäÿ≥ ŸÖÿ¥Ÿäÿ∑":{lat:18.3066,lng:42.7283},ÿ£ÿ®Ÿáÿß:{lat:18.2164,lng:42.5053},ÿßŸÑŸÇÿ∑ŸäŸÅ:{lat:26.5196,lng:50.0115},ŸÜÿ¨ÿ±ÿßŸÜ:{lat:17.4924,lng:44.1277},ÿ¨ÿßÿ≤ÿßŸÜ:{lat:16.8892,lng:42.5611},ŸäŸÜÿ®ÿπ:{lat:24.0895,lng:38.0618},ÿ≠ÿßÿ¶ŸÑ:{lat:27.5114,lng:41.7208}},C=()=>{var P;if(b==="manual"){if(!r.trim()){p("ÿ£ÿØÿÆŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä");return}const x=(P=r.split("ÿå")[0])==null?void 0:P.trim(),z=O[x]||{lat:24.7136,lng:46.6753};n(z,r);return}if(!c){p("ÿ≠ÿØÿØ ŸÖŸàŸÇÿπŸÉ ÿ£ŸàŸÑÿßŸã");return}if(!r.trim()){p("ÿ£ÿØÿÆŸÑ ŸàÿµŸÅ ÿßŸÑÿπŸÜŸàÿßŸÜ");return}n(c,r)};return s?e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),e.jsxs("div",{className:"relative w-full h-full sm:w-[95%] sm:h-[90%] sm:max-w-2xl sm:rounded-3xl overflow-hidden bg-white shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(es,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:"ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("p",{className:"text-sm text-white/80",children:b==="map"?"ÿßÿ®ÿ≠ÿ´ ÿ£Ÿà ÿßÿ≥ÿ≠ÿ® ÿßŸÑÿØÿ®Ÿàÿ≥":"ÿßŸÉÿ™ÿ® ÿπŸÜŸàÿßŸÜŸÉ ŸäÿØŸàŸäÿßŸã"})]})]}),e.jsx("button",{onClick:t,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:()=>E("map"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${b==="map"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[e.jsx(Vn,{className:"w-4 h-4"}),"ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©"]}),e.jsxs("button",{onClick:()=>E("manual"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${b==="manual"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[e.jsx(ea,{className:"w-4 h-4"}),"ÿ•ÿØÿÆÿßŸÑ ŸäÿØŸàŸä"]})]}),b==="map"&&e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:m,onChange:P=>{j(P.target.value),w(P.target.value)},onFocus:()=>L.length>0&&D(!0),placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ≠Ÿäÿå ÿ¥ÿßÿ±ÿπÿå ÿ£Ÿà ŸÖŸÉÿßŸÜ...",className:"w-full bg-white/95 text-gray-800 rounded-xl p-3 pr-10 pl-10 focus:outline-none focus:ring-2 focus:ring-white/50 transition placeholder:text-gray-400"}),d&&e.jsx(ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-500 animate-spin"}),F&&L.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl overflow-hidden z-[1001] max-h-60 overflow-y-auto",children:L.map((P,x)=>e.jsxs("button",{onClick:()=>U(P),className:"w-full p-3 text-right hover:bg-sky-50 border-b border-gray-100 last:border-0 transition flex items-start gap-3",children:[e.jsx(es,{className:"w-5 h-5 text-sky-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm leading-relaxed",children:P.display_name})]},x))})]})]}),b==="map"&&e.jsxs("div",{className:"flex-1 relative",children:[!f&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ts,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600 font-medium",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©..."})]})}),e.jsx("div",{id:"location-map",className:"w-full h-full"}),e.jsxs("div",{className:"absolute left-4 top-4 flex flex-col gap-2 z-[1000]",children:[e.jsx("button",{onClick:B,disabled:I,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition disabled:opacity-50",title:"ŸÖŸàŸÇÿπŸä ÿßŸÑÿ≠ÿßŸÑŸä",children:I?e.jsx(ts,{className:"w-5 h-5 text-sky-500 animate-spin"}):e.jsx(Qs,{className:"w-5 h-5 text-sky-500"})}),c&&e.jsx("button",{onClick:Q,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition",title:"ÿ™ŸÖÿ±ŸÉÿ≤",children:e.jsx(Ta,{className:"w-5 h-5 text-gray-600"})})]}),c&&e.jsxs("div",{className:"absolute right-4 top-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 z-[1000] max-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ"})]}),e.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[c.lat.toFixed(6),", ",c.lng.toFixed(6)]})]})]}),b==="manual"&&e.jsx("div",{className:"flex-1 p-6 overflow-y-auto bg-gray-50",children:e.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(ea,{className:"w-10 h-10 text-sky-500"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"ÿ£ÿØÿÆŸÑ ÿπŸÜŸàÿßŸÜŸÉ ŸäÿØŸàŸäÿßŸã"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ÿßŸÉÿ™ÿ® ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ ÿ®ÿØŸÇÿ© ŸÑŸäÿµŸÑŸÉ ÿßŸÑÿ∑ŸÑÿ®"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-xl p-3 bg-white focus:border-sky-400 focus:outline-none",onChange:P=>k(x=>{const z=x.split("ÿå").slice(1);return P.target.value+(z.length?"ÿå"+z.join("ÿå"):"")}),children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsx("option",{value:"ÿßŸÑÿ±Ÿäÿßÿ∂",children:"ÿßŸÑÿ±Ÿäÿßÿ∂"}),e.jsx("option",{value:"ÿ¨ÿØÿ©",children:"ÿ¨ÿØÿ©"}),e.jsx("option",{value:"ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©",children:"ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©"}),e.jsx("option",{value:"ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©",children:"ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©"}),e.jsx("option",{value:"ÿßŸÑÿØŸÖÿßŸÖ",children:"ÿßŸÑÿØŸÖÿßŸÖ"}),e.jsx("option",{value:"ÿßŸÑÿÆÿ®ÿ±",children:"ÿßŸÑÿÆÿ®ÿ±"}),e.jsx("option",{value:"ÿßŸÑÿ£ÿ≠ÿ≥ÿßÿ°",children:"ÿßŸÑÿ£ÿ≠ÿ≥ÿßÿ°"}),e.jsx("option",{value:"ÿßŸÑÿ∑ÿßÿ¶ŸÅ",children:"ÿßŸÑÿ∑ÿßÿ¶ŸÅ"}),e.jsx("option",{value:"ÿ™ÿ®ŸàŸÉ",children:"ÿ™ÿ®ŸàŸÉ"}),e.jsx("option",{value:"ÿ®ÿ±ŸäÿØÿ©",children:"ÿ®ÿ±ŸäÿØÿ©"}),e.jsx("option",{value:"ÿÆŸÖŸäÿ≥ ŸÖÿ¥Ÿäÿ∑",children:"ÿÆŸÖŸäÿ≥ ŸÖÿ¥Ÿäÿ∑"}),e.jsx("option",{value:"ÿ£ÿ®Ÿáÿß",children:"ÿ£ÿ®Ÿáÿß"}),e.jsx("option",{value:"ÿßŸÑŸÇÿ∑ŸäŸÅ",children:"ÿßŸÑŸÇÿ∑ŸäŸÅ"}),e.jsx("option",{value:"ŸÜÿ¨ÿ±ÿßŸÜ",children:"ŸÜÿ¨ÿ±ÿßŸÜ"}),e.jsx("option",{value:"ÿ¨ÿßÿ≤ÿßŸÜ",children:"ÿ¨ÿßÿ≤ÿßŸÜ"}),e.jsx("option",{value:"ŸäŸÜÿ®ÿπ",children:"ŸäŸÜÿ®ÿπ"}),e.jsx("option",{value:"ÿ≠ÿßÿ¶ŸÑ",children:"ÿ≠ÿßÿ¶ŸÑ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ÿßŸÑÿ≠Ÿä"}),e.jsx("input",{type:"text",placeholder:"ŸÖÿ´ÿßŸÑ: ÿ≠Ÿä ÿßŸÑŸÜÿ±ÿ¨ÿ≥",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:P=>k(x=>(x.split("ÿå")[0]||"")+(P.target.value?"ÿå "+P.target.value:""))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ÿßŸÑÿ¥ÿßÿ±ÿπ"}),e.jsx("input",{type:"text",placeholder:"ŸÖÿ´ÿßŸÑ: ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÖŸÑŸÉ ÿπÿ®ÿØÿßŸÑÿπÿ≤Ÿäÿ≤",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:P=>k(x=>x.split("ÿå").slice(0,2).join("ÿå")+(P.target.value?"ÿå "+P.target.value:""))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ÿ™ŸÅÿßÿµŸäŸÑ ÿ•ÿ∂ÿßŸÅŸäÿ©"}),e.jsx("textarea",{placeholder:"ÿ±ŸÇŸÖ ÿßŸÑŸÖÿ®ŸÜŸâÿå ÿßŸÑÿØŸàÿ±ÿå ÿπŸÑÿßŸÖÿ© ŸÖŸÖŸäÿ≤ÿ©...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none resize-none",onChange:P=>k(x=>x.split("ÿå").slice(0,3).join("ÿå")+(P.target.value?"ÿå "+P.target.value:""))})]}),r&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[e.jsx(hs,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ:"})]}),e.jsx("p",{className:"text-gray-700",children:r})]})]})}),e.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[A&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4 flex-shrink-0"}),A]}),b==="map"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(Nl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:r,onChange:P=>k(P.target.value),placeholder:"ŸàÿµŸÅ ÿßŸÑÿπŸÜŸàÿßŸÜ (ŸÖÿ´ÿßŸÑ: ÿ≠Ÿä ÿßŸÑŸÜÿ±ÿ¨ÿ≥ÿå ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÖŸÑŸÉ ÿπÿ®ÿØÿßŸÑÿπÿ≤Ÿäÿ≤ÿå ÿ®ÿ¨ÿßŸÜÿ® ŸÖÿ≥ÿ¨ÿØ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 pr-10 focus:border-sky-400 focus:outline-none transition text-gray-800"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"üí° ÿ£ÿ∂ŸÅ ÿ™ŸÅÿßÿµŸäŸÑ Ÿàÿßÿ∂ÿ≠ÿ© ŸÑŸäÿµŸÑŸÉ ÿßŸÑÿ∑ŸÑÿ® ÿ®ÿ≥ÿ±ÿπÿ©"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:t,className:"flex-1 py-3 px-4 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsxs("button",{onClick:C,disabled:b==="map"&&!c,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:[e.jsx(hs,{className:"w-5 h-5"}),"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ"]})]})]})]}),e.jsx("style",{children:`
        .custom-marker {
          background: transparent !important;
          border: none !important;
        }
        .leaflet-container {
          font-family: inherit;
        }
        .leaflet-control-zoom {
          display: none;
        }
        #location-map {
          background: #f0f9ff;
        }
      `})]}):null},ll=.27,Mt={clientId:"AR7QZ7sgXORp99wUPIY75Wl9m4YLtLtVzaStB5g-q7eUT9jOLIKEeGGlxT8jlC9n1sDTcpCpD1peRxR5",currency:"USD",environment:"live",minRecharge:10,maxRecharge:1e3,sarToUsd:s=>Math.round(s*ll*100)/100,usdToSar:s=>Math.round(s/ll*100)/100,calculateFee:s=>Math.round((s*.029+.3)*100)/100},Ll=()=>({clientId:Mt.clientId,currency:Mt.currency,intent:"capture",components:"buttons"}),Rt=1,lt=.75,nl=3.75,cc=.0157,oc=5,Gt=!0,dc=()=>{const{items:s,subtotal:t,clear:n}=oa(),{user:i}=$e(),c=gs(),y=Ds(),r=Qe(),[k,$]=a.useState(""),[M,I]=a.useState(!1),[N,A]=a.useState(null),[p,f]=a.useState(null),[_,m]=a.useState(!1),[j,L]=a.useState("pickup"),[g,d]=a.useState("cod"),[h,F]=a.useState(0),[D,b]=a.useState(!1),[E,o]=a.useState([]),[w,U]=a.useState(null),[B,Q]=a.useState(!1);s.reduce((u,v)=>u+v.qty,0);const O=a.useMemo(()=>s.reduce((u,v)=>v.price>=oc?u+cc*v.qty:u,0),[s]),C=a.useMemo(()=>{if(!w)return 0;switch(w.offerType){case"percent_discount":const u=t*(w.discountPercent||0)/100;return Math.min(u,t);case"fixed_discount":return Math.min(w.discountAmount||0,t);case"bundle_meal":return w.bundleOriginalPrice&&w.bundlePrice?w.bundleOriginalPrice-w.bundlePrice:0;case"buy_x_get_y":return 0;default:return 0}},[w,t]),P=t+O-C;a.useEffect(()=>{(async()=>{var ce,ie,je;if(!i)return;try{const ge=await Ce(X(S,"wallets",i.uid));ge.exists()&&F(((ce=ge.data())==null?void 0:ce.balance)||0)}catch(ge){console.warn("Error loading wallet:",ge)}if(s.length===0)return;let v=(ie=s[0])==null?void 0:ie.ownerId;if(!v&&((je=s[0])!=null&&je.id))try{const ge=await Ce(X(S,"menuItems",s[0].id)),T=ge.exists()?ge.data():null;v=(T==null?void 0:T.ownerId)||null}catch(ge){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿµŸÜŸÅ:",ge)}if(!v){A(null);return}const H=await Ce(X(S,"restaurants",v)),Y=H.exists()?H.data():null;A({id:v,name:(Y==null?void 0:Y.name)||"ŸÖÿ∑ÿπŸÖ",referredBy:Y==null?void 0:Y.referredBy,referrerType:Y==null?void 0:Y.referrerType})})()},[s,i]),a.useEffect(()=>{(async()=>{if(!(N!=null&&N.id)){o([]);return}Q(!0);try{const v=pe(te(S,"offers"),be("ownerId","==",N.id),be("isActive","==",!0)),H=await ue(v),Y=new Date,ce=H.docs.map(ie=>{var je,ge,T,se;return{id:ie.id,...ie.data(),expiresAt:(ge=(je=ie.data().expiresAt)==null?void 0:je.toDate)==null?void 0:ge.call(je),startsAt:(se=(T=ie.data().startsAt)==null?void 0:T.toDate)==null?void 0:se.call(T)}}).filter(ie=>!(ie.expiresAt&&new Date(ie.expiresAt)<Y||ie.startsAt&&new Date(ie.startsAt)>Y||ie.minOrderAmount&&t<ie.minOrderAmount));o(ce),ce.length===1&&U(ce[0])}catch(v){console.warn("Error loading offers:",v),o([])}finally{Q(!1)}})()},[N==null?void 0:N.id,t]);const x=(u,v)=>{f(u),$(v),m(!1),r.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! üìç")},z=async()=>{var v;if(!i)return;if(s.length===0){y.warning("ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ©");return}if(j==="delivery"&&Gt){if(!k){y.warning("ÿ£ÿØÿÆŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ");return}if(!p){y.warning("ÿ≠ÿØŸëÿØ ŸÖŸàŸÇÿπŸÉ ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©");return}}let u=N==null?void 0:N.id;if(!u&&((v=s[0])!=null&&v.id)){const H=await Ce(X(S,"menuItems",s[0].id)),Y=H.exists()?H.data():null;u=(Y==null?void 0:Y.ownerId)||null}if(!u){y.error("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÑŸÑÿ∑ŸÑÿ®. ÿ£ÿπÿØ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©.");return}I(!0);try{const H=(N==null?void 0:N.referrerType)==="admin"&&(N==null?void 0:N.referredBy),Y=s.reduce((Z,G)=>Z+G.qty,0),ce=Rt+lt,je=t-ce*Y,ge=Rt*Y,T=H?lt*Y:0,se=ge+(H?0:lt*Y),ye=await Fe(te(S,"orders"),{customerId:i.uid,restaurantId:u,restaurantName:(N==null?void 0:N.name)||"ŸÖÿ∑ÿπŸÖ",items:s.map(Z=>({id:Z.id,name:Z.name,price:Z.price,qty:Z.qty,ownerId:Z.ownerId??u})),subtotal:t,deliveryFee:0,deliveryFeeSetBy:null,deliveryFeeSetAt:null,total:P,status:"pending",deliveryType:j,address:j==="pickup"?"ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ":k,location:j==="pickup"?null:p,createdAt:J(),updatedAt:J(),paymentMethod:"cod",appliedOffer:w?{id:w.id,title:w.title,offerType:w.offerType,discountPercent:w.discountPercent||null,discountAmount:w.discountAmount||null}:null,discountAmount:C,restaurantEarnings:je,platformFee:ge,platformFeePerItem:Rt,adminCommission:T,adminCommissionPerItem:lt,appEarnings:se,totalItemsCount:Y,referredBy:(N==null?void 0:N.referredBy)||null,courierPlatformFee:j==="delivery"?nl:0});try{const Z=X(S,"wallets",u);(await Ce(Z)).exists()?await xe(Z,{pendingBalance:Xe(je),updatedAt:J()}):await Ze(Z,{balance:0,pendingBalance:je,totalSales:0,totalWithdrawn:0,ownerType:"restaurant",updatedAt:J()})}catch(Z){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑŸÖÿ∑ÿπŸÖ:",Z)}if(H&&(N!=null&&N.referredBy)&&T>0)try{const Z=X(S,"wallets",N.referredBy);(await Ce(Z)).exists()?await xe(Z,{balance:Xe(T),totalEarnings:Xe(T),updatedAt:J()}):await Ze(Z,{balance:T,totalEarnings:T,totalWithdrawn:0,transactions:[],updatedAt:J()})}catch(Z){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅ:",Z)}try{const Z=X(S,"wallets","app_earnings");(await Ce(Z)).exists()?await xe(Z,{balance:Xe(se),totalEarnings:Xe(se),updatedAt:J()}):await Ze(Z,{balance:se,totalEarnings:se,totalWithdrawn:0,transactions:[],updatedAt:J()})}catch(Z){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:",Z)}if(w)try{await xe(X(S,"offers",w.id),{usedCount:Xe(1),updatedAt:J()})}catch(Z){console.warn("Error updating offer usage count:",Z)}n(),c("/orders")}catch(H){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®:",H),y.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.")}finally{I(!1)}},R=async(u,v)=>{var Z;if(!i)return;if(s.length===0){y.warning("ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ©");return}if(j==="delivery"&&Gt){if(!k){y.warning("ÿ£ÿØÿÆŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ");return}if(!p){y.warning("ÿ≠ÿØŸëÿØ ŸÖŸàŸÇÿπŸÉ ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©");return}}if(u==="wallet"&&h<P){y.warning("ÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ÿ∫Ÿäÿ± ŸÉÿßŸÅŸä");return}let H=N==null?void 0:N.id;if(!H&&((Z=s[0])!=null&&Z.id)){const G=await Ce(X(S,"menuItems",s[0].id)),K=G.exists()?G.data():null;H=(K==null?void 0:K.ownerId)||null}if(!H){y.error("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÑŸÑÿ∑ŸÑÿ®. ÿ£ÿπÿØ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©.");return}I(!0);const Y=(N==null?void 0:N.referrerType)==="admin"&&(N==null?void 0:N.referredBy),ce=s.reduce((G,K)=>G+K.qty,0),ie=Rt+lt,ge=t-ie*ce,T=Rt*ce,se=Y?lt*ce:0,ye=T+(Y?0:lt*ce);try{if(u==="wallet"){const K=X(S,"wallets",i.uid),me={id:`order_${Date.now()}`,type:"debit",amount:P,description:`ÿØŸÅÿπ ÿ∑ŸÑÿ® ŸÖŸÜ ${N==null?void 0:N.name}`,createdAt:new Date};await xe(K,{balance:Xe(-P),transactions:pr(me),updatedAt:J()}),F(oe=>oe-P)}const G=await Fe(te(S,"orders"),{customerId:i.uid,restaurantId:H,restaurantName:(N==null?void 0:N.name)||"ŸÖÿ∑ÿπŸÖ",items:s.map(K=>({id:K.id,name:K.name,price:K.price,qty:K.qty,ownerId:K.ownerId??H})),subtotal:t,deliveryFee:0,deliveryFeeSetBy:null,deliveryFeeSetAt:null,total:P,status:"pending",deliveryType:j,address:j==="pickup"?"ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ":k,location:j==="pickup"?null:p,createdAt:J(),updatedAt:J(),paymentMethod:u,paymentStatus:"paid",paypalOrderId:v||null,paidAt:J(),appliedOffer:w?{id:w.id,title:w.title,offerType:w.offerType,discountPercent:w.discountPercent||null,discountAmount:w.discountAmount||null}:null,discountAmount:C,restaurantEarnings:ge,platformFee:T,platformFeePerItem:Rt,adminCommission:se,adminCommissionPerItem:lt,appEarnings:ye,totalItemsCount:ce,referredBy:(N==null?void 0:N.referredBy)||null,courierPlatformFee:j==="delivery"?nl:0});try{const K=X(S,"wallets",H);(await Ce(K)).exists()?await xe(K,{pendingBalance:Xe(ge),totalEarnings:Xe(ge),updatedAt:J()}):await Ze(K,{pendingBalance:ge,totalEarnings:ge,balance:0,totalWithdrawn:0,transactions:[],updatedAt:J()})}catch(K){console.warn("Error updating restaurant wallet:",K)}if(Y&&(N!=null&&N.referredBy)&&se>0)try{const K=X(S,"wallets",N.referredBy);(await Ce(K)).exists()?await xe(K,{balance:Xe(se),totalEarnings:Xe(se),updatedAt:J()}):await Ze(K,{balance:se,totalEarnings:se,totalWithdrawn:0,transactions:[],updatedAt:J()})}catch(K){console.warn("Error updating admin wallet:",K)}if(w)try{await xe(X(S,"offers",w.id),{usedCount:Xe(1),updatedAt:J()})}catch(K){console.warn("Error updating offer usage count:",K)}n(),y.success(u==="paypal"?`ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ
ÿ™ŸÖ ÿßŸÑÿØŸÅÿπ ÿπÿ®ÿ± PayPal`:`ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ
ÿ™ŸÖ ÿßŸÑÿÆÿµŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©`),c("/orders")}catch(G){console.error("Error placing order:",G),y.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®")}finally{I(!1)}};return e.jsx(Ee,{allow:["customer","admin","developer"],children:e.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(us,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsx("p",{className:"text-sm text-white/80",children:(N==null?void 0:N.name)||"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5 text-sky-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsxs("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full mr-auto",children:[s.length," ÿµŸÜŸÅ"]})]}),e.jsx("div",{className:"p-4 space-y-2",children:s.map(u=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center text-sm",children:[u.qty,"√ó"]}),e.jsx("span",{className:"text-gray-800 font-medium",children:u.name})]}),e.jsxs("span",{className:"font-bold text-sky-600",children:[(u.price*u.qty).toFixed(2)," ÿ±.ÿ≥"]})]},u.id))})]}),(E.length>0||B)&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©"}),E.length>0&&e.jsxs("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full mr-auto",children:[E.length," ÿπÿ±ÿ∂"]})]}),e.jsx("div",{className:"p-4 space-y-3",children:B?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-orange-300 border-t-orange-600 rounded-full animate-spin"}),e.jsx("span",{className:"mr-2 text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿπÿ±Ÿàÿ∂..."})]}):e.jsxs(e.Fragment,{children:[E.map(u=>{const v=(w==null?void 0:w.id)===u.id,H=u.offerType==="percent_discount"?e.jsx(jr,{className:"w-5 h-5"}):u.offerType==="fixed_discount"?e.jsx(Bt,{className:"w-5 h-5"}):e.jsx(Es,{className:"w-5 h-5"}),Y=u.offerType==="percent_discount"?`${u.discountPercent}%`:u.offerType==="fixed_discount"?`${u.discountAmount} ÿ±.ÿ≥`:u.offerType==="bundle_meal"&&u.bundlePrice?`${u.bundlePrice} ÿ±.ÿ≥`:"";return e.jsxs("button",{onClick:()=>U(v?null:u),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${v?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-300"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${v?"bg-orange-500 text-white":"bg-orange-100 text-orange-600"}`,children:H}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:`font-bold ${v?"text-orange-700":"text-gray-800"}`,children:u.title}),e.jsx("p",{className:"text-sm text-gray-500",children:u.description||(u.offerType==="percent_discount"?`ÿÆÿµŸÖ ${u.discountPercent}% ÿπŸÑŸâ ÿ∑ŸÑÿ®ŸÉ`:u.offerType==="fixed_discount"?`ÿÆÿµŸÖ ${u.discountAmount} ÿ±.ÿ≥ ŸÖŸÜ ÿ∑ŸÑÿ®ŸÉ`:u.offerType==="bundle_meal"?`Ÿàÿ¨ÿ®ÿ© ŸÖÿ¨ŸÖŸëÿπÿ© ÿ®ÿ≥ÿπÿ± ${u.bundlePrice} ÿ±.ÿ≥`:u.offerType==="buy_x_get_y"?`ÿßÿ¥ÿ™ÿ±Ÿê ${u.buyQuantity} Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ${u.getQuantity} ŸÖÿ¨ÿßŸÜÿßŸã`:"ÿπÿ±ÿ∂ ÿÆÿßÿµ")}),u.minOrderAmount&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ∑ŸÑÿ®: ",u.minOrderAmount," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[Y&&e.jsx("span",{className:`text-lg font-black ${v?"text-orange-600":"text-gray-700"}`,children:Y}),v&&e.jsx(hs,{className:"w-5 h-5 text-orange-500 mt-1"})]})]},u.id)}),w&&e.jsx("button",{onClick:()=>U(null),className:"w-full text-center text-sm text-gray-500 hover:text-red-500 py-2",children:"ÿ•ŸÑÿ∫ÿßÿ° ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿπÿ±ÿ∂"})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-sky-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ"})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("button",{onClick:()=>L("pickup"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${j==="pickup"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${j==="pickup"?"bg-green-500":"bg-gray-100"}`,children:e.jsx(Ve,{className:`w-6 h-6 ${j==="pickup"?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:`font-bold ${j==="pickup"?"text-green-700":"text-gray-800"}`,children:"ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ŸÖÿ¨ÿßŸÜÿßŸã - ÿ®ÿØŸàŸÜ ÿ±ÿ≥ŸàŸÖ ÿ™ŸàÿµŸäŸÑ"})]}),j==="pickup"&&e.jsx(hs,{className:"w-6 h-6 text-green-500"})]}),e.jsxs("button",{onClick:()=>L("delivery"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${j==="delivery"?"border-sky-500 bg-sky-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${j==="delivery"?"bg-sky-500":"bg-gray-100"}`,children:e.jsx(Ue,{className:`w-6 h-6 ${j==="delivery"?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:`font-bold ${j==="delivery"?"text-sky-700":"text-gray-800"}`,children:"ÿ™ŸàÿµŸäŸÑ ŸÑŸÑŸÖŸÜÿ≤ŸÑ"}),e.jsx("p",{className:"text-sm text-amber-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿäÿ≠ÿØÿØŸáÿß ÿßŸÑŸÖŸÜÿØŸàÿ®/ÿßŸÑÿ£ÿ≥ÿ±ÿ©"})]}),j==="delivery"&&e.jsx(hs,{className:"w-6 h-6 text-sky-500"})]})]})]}),j==="delivery"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(es,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ŸÖŸàŸÇÿπ ÿßŸÑÿ™ŸàÿµŸäŸÑ"})]}),e.jsx("div",{className:"p-4",children:p?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(hs,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-green-700 mb-1",children:"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ‚úì"}),e.jsx("p",{className:"text-sm text-gray-600 break-words",children:k}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 font-mono",children:[p.lat.toFixed(5),", ",p.lng.toFixed(5)]})]})]})}),e.jsxs("button",{onClick:()=>m(!0),className:"w-full py-3 px-4 rounded-xl border-2 border-sky-200 text-sky-600 font-semibold hover:bg-sky-50 transition flex items-center justify-center gap-2",children:[e.jsx(es,{className:"w-5 h-5"}),"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÖŸàŸÇÿπ"]})]}):e.jsxs("button",{onClick:()=>m(!0),className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-500 to-sky-600 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[e.jsx(es,{className:"w-6 h-6"}),e.jsx("span",{children:"ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx(st,{className:"w-5 h-5"})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ŸÖŸÑÿÆÿµ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©"})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[e.jsx("span",{children:"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä"}),e.jsxs("span",{className:"font-semibold",children:[t.toFixed(2)," ÿ±.ÿ≥"]})]}),O>0&&e.jsxs("div",{className:"flex items-center justify-between text-gray-500",children:[e.jsx("span",{className:"text-sm",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsxs("span",{className:"font-semibold text-sm",children:[O.toFixed(2)," ÿ±.ÿ≥"]})]}),w&&C>0&&e.jsxs("div",{className:"flex items-center justify-between text-green-600 bg-green-50 -mx-4 px-4 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["ÿÆÿµŸÖ: ",w.title]})]}),e.jsxs("span",{className:"font-bold",children:["- ",C.toFixed(2)," ÿ±.ÿ≥"]})]}),j==="delivery"&&e.jsxs("div",{className:"flex items-center justify-between text-amber-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"})]}),e.jsx("span",{className:"font-semibold text-sm",children:"ÿ™Ÿèÿ≠ÿØÿØ ŸÑÿßÿ≠ŸÇÿßŸã"})]}),j==="pickup"&&e.jsxs("div",{className:"flex items-center justify-between text-green-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]}),e.jsx("span",{className:"font-semibold",children:"ŸÖÿ¨ÿßŸÜÿßŸã"})]}),e.jsx("div",{className:"h-px bg-gray-200 my-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-lg text-gray-800",children:"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä"}),e.jsxs("div",{className:"text-left",children:[C>0&&e.jsx("span",{className:"text-sm text-gray-400 line-through ml-2",children:t.toFixed(2)}),e.jsxs("span",{className:"font-black text-xl text-sky-600",children:[P.toFixed(2)," ÿ±.ÿ≥"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ"})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("button",{onClick:()=>d("cod"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${g==="cod"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${g==="cod"?"border-green-500":"border-gray-300"}`,children:g==="cod"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"üíµ ÿßŸÑÿØŸÅÿπ ÿπŸÜÿØ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßÿØŸÅÿπ ŸÜŸÇÿØÿßŸã ÿπŸÜÿØ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ŸÉ"})]})]}),e.jsxs("button",{onClick:()=>d("paypal"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${g==="paypal"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${g==="paypal"?"border-blue-500":"border-gray-300"}`,children:g==="paypal"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"üí≥ PayPal"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßÿØŸÅÿπ ÿ®ŸÄ Visa/Mastercard ÿ£Ÿà ÿ≠ÿ≥ÿßÿ® PayPal"})]})]}),e.jsxs("button",{onClick:()=>d("wallet"),disabled:h<P,className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${g==="wallet"?"border-sky-500 bg-sky-50":h<P?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${g==="wallet"?"border-sky-500":"border-gray-300"}`,children:g==="wallet"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-sky-500"})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsxs("p",{className:"font-bold text-gray-800",children:[e.jsx(cs,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©",e.jsxs("span",{className:`text-sm mr-2 ${h>=P?"text-green-600":"text-red-500"}`,children:["(",h.toFixed(2)," ÿ±.ÿ≥)"]})]}),h<P?e.jsxs("p",{className:"text-xs text-red-500",children:["ÿ±ÿµŸäÿØ ÿ∫Ÿäÿ± ŸÉÿßŸÅŸä - ÿ™ÿ≠ÿ™ÿßÿ¨ ",(P-h).toFixed(2)," ÿ±.ÿ≥"]}):e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßÿØŸÅÿπ ŸÖŸÜ ÿ±ÿµŸäÿØ ŸÖÿ≠ŸÅÿ∏ÿ™ŸÉ"})]})]})]})]}),g==="paypal"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿ≤ÿ± PayPal ŸÑÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ ÿ®ŸÖÿ®ŸÑÿ∫ ",e.jsxs("span",{className:"font-bold text-sky-600",children:[P.toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"text-gray-400 text-xs mr-1",children:["(‚âà $",Mt.sarToUsd(P),")"]})]}),e.jsx(Al,{options:Ll(),children:e.jsx(Il,{style:{layout:"vertical",shape:"pill",color:"blue",label:"pay",height:50},disabled:M||D||j==="delivery"&&Gt&&!p,createOrder:(u,v)=>{const H=Mt.sarToUsd(P);return v.order.create({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:H.toString()},description:`ÿ∑ŸÑÿ® ŸÖŸÜ ${(N==null?void 0:N.name)||"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}`}]})},onApprove:async(u,v)=>{if(v.order){b(!0);try{const H=await v.order.capture();await R("paypal",H.id)}catch(H){console.error("PayPal capture error:",H),r.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ")}finally{b(!1)}}},onError:u=>{console.error("PayPal Error:",u),r.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ")},onCancel:()=>{r.info("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ")}})}),D&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sky-600",children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"ÿ¨ÿßÿ±Ÿê ŸÖÿπÿßŸÑÿ¨ÿ© ÿ∑ŸÑÿ®ŸÉ..."})]})]}):e.jsx("button",{disabled:M||j==="delivery"&&Gt&&!p||g==="wallet"&&h<P,onClick:()=>{g==="wallet"?R("wallet"):z()},className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-3",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{className:"w-6 h-6"}),g==="wallet"?`ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® (ÿÆÿµŸÖ ${P.toFixed(2)} ŸÖŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©)`:j==="pickup"?"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® (ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ)":"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® (ÿØŸÅÿπ ÿπŸÜÿØ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ)"]})}),j==="delivery"&&Gt&&!p&&e.jsx("p",{className:"text-center text-sm text-amber-600 bg-amber-50 rounded-xl p-3",children:"‚ö†Ô∏è Ÿäÿ¨ÿ® ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÇÿ®ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsx(Ol,{isOpen:_,onClose:()=>m(!1),onConfirm:x,initialLocation:p})]})})},xc={restaurant:{title:"ŸÇŸäŸëŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©",icon:Ve,color:"amber",placeholder:"ŸÉŸäŸÅ ŸÉÿßŸÜÿ™ ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿπÿßŸÖ ŸàÿßŸÑÿÆÿØŸÖÿ©ÿü",headerClass:"from-amber-500 to-amber-600",btnClass:"from-amber-500 to-amber-600",btnHoverClass:"hover:from-amber-600 hover:to-amber-700"},courier:{title:"ŸÇŸäŸëŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®",icon:Ue,color:"emerald",placeholder:"ŸÉŸäŸÅ ŸÉÿßŸÜ ÿ£ÿØÿßÿ° ÿßŸÑŸÖŸÜÿØŸàÿ®ÿü",headerClass:"from-emerald-500 to-emerald-600",btnClass:"from-emerald-500 to-emerald-600",btnHoverClass:"hover:from-emerald-600 hover:to-emerald-700"},customer:{title:"ŸÇŸäŸëŸÖ ÿßŸÑÿπŸÖŸäŸÑ",icon:os,color:"sky",placeholder:"ŸÉŸäŸÅ ŸÉÿßŸÜ ÿ™ÿπÿßŸÖŸÑ ÿßŸÑÿπŸÖŸäŸÑÿü",headerClass:"from-sky-500 to-sky-600",btnClass:"from-sky-500 to-sky-600",btnHoverClass:"hover:from-sky-600 hover:to-sky-700"}},Cr=({isOpen:s,onClose:t,onSubmit:n,type:i,targetName:c,orderId:y})=>{const[r,k]=a.useState(0),[$,M]=a.useState(0),[I,N]=a.useState(""),[A,p]=a.useState(!1),[f,_]=a.useState(""),m=xc[i],j=m.icon,L=async()=>{if(r===0){_("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿπÿØÿØ ÿßŸÑŸÜÿ¨ŸàŸÖ");return}p(!0),_("");try{await n({stars:r,comment:I.trim()}),k(0),N(""),t()}catch{_("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{p(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-200",children:[e.jsx("div",{className:`bg-gradient-to-r ${m.headerClass} p-6 text-white`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx(j,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:m.title}),c&&e.jsx("p",{className:"text-white/80 text-sm",children:c})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-xl transition",children:e.jsx(_e,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"ŸÉŸÖ ÿ™ŸÇŸäŸäŸÖŸÉÿü"}),e.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(g=>e.jsx("button",{type:"button",onClick:()=>k(g),onMouseEnter:()=>M(g),onMouseLeave:()=>M(0),className:"p-1 transition-transform hover:scale-110",children:e.jsx(ls,{className:`w-10 h-10 transition-colors ${g<=($||r)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},g))}),r>0&&e.jsxs("p",{className:"mt-2 text-lg font-bold text-gray-800",children:[r===1&&"ÿ≥Ÿäÿ° üòû",r===2&&"ŸÖŸÇÿ®ŸàŸÑ üòê",r===3&&"ÿ¨ŸäÿØ üôÇ",r===4&&"ÿ¨ŸäÿØ ÿ¨ÿØÿßŸã üòä",r===5&&"ŸÖŸÖÿ™ÿßÿ≤! üåü"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ÿ™ÿπŸÑŸäŸÇ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("textarea",{value:I,onChange:g=>N(g.target.value),placeholder:m.placeholder,rows:3,className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sky-500 resize-none"})]}),f&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm text-center",children:f}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{onClick:L,disabled:A||r===0,className:`flex-1 flex items-center justify-center gap-2 py-3 px-6 
                         bg-gradient-to-r ${m.btnClass} 
                         ${m.btnHoverClass}
                         text-white rounded-xl font-bold transition-all disabled:opacity-50`,children:A?e.jsx(ts,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(ca,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇŸäŸäŸÖ"})]})})})]})]})}):null},xs={STARTING_POINTS:100,SUSPENSION_THRESHOLD:30,WARNING_THRESHOLD:50},Ia={PREPARATION_TIME:30,COURIER_PICKUP_TIME:15,DELIVERY_TIME:30,WARNING_THRESHOLD:.75},mc=(s,t)=>{var $;if(!s)return{elapsed:0,remaining:t,percentage:0};const n=($=s==null?void 0:s.toDate)!=null&&$.call(s)?s.toDate():s instanceof Date?s:new Date(s);if(isNaN(n.getTime()))return{elapsed:0,remaining:t,percentage:0};const c=new Date().getTime()-n.getTime(),y=Math.floor(c/6e4),r=t-y,k=Math.min(y/t*100,100);return{elapsed:y,remaining:r,percentage:k}},hc=s=>s>=100?"exceeded":s>=Ia.WARNING_THRESHOLD*100?"warning":"normal",Yt=s=>{const t=Math.abs(s);if(t<60)return`${t} ÿØŸÇŸäŸÇÿ©`;const n=Math.floor(t/60),i=t%60;return`${n}ÿ≥ ${i}ÿØ`},il=s=>{switch(s){case"preparation":return"ÿßŸÑÿ™ÿ¨ŸáŸäÿ≤";case"pickup":return"ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ";case"delivery":return"ÿßŸÑÿ™ŸàÿµŸäŸÑ"}},uc=s=>{switch(s){case"preparation":return Ia.PREPARATION_TIME;case"pickup":return Ia.COURIER_PICKUP_TIME;case"delivery":return Ia.DELIVERY_TIME}},gc=(s,t)=>{if(s.timestamps)switch(t){case"preparation":return s.timestamps.acceptedAt;case"pickup":return s.timestamps.readyAt;case"delivery":return s.timestamps.pickedUpAt}},pc=(s,t)=>{switch(t){case"preparation":return s.status==="ready"||s.status==="out_for_delivery"||s.status==="delivered";case"pickup":return s.status==="out_for_delivery"||s.status==="delivered";case"delivery":return s.status==="delivered"}},bc=(s,t)=>{switch(t){case"preparation":return s.status==="accepted"||s.status==="preparing";case"pickup":return s.status==="ready";case"delivery":return s.status==="out_for_delivery"}},Xt=({order:s,type:t,showLabel:n=!0,compact:i=!1})=>{const[c,y]=a.useState({elapsed:0,remaining:0,percentage:0}),[r,k]=a.useState("normal"),$=uc(t),M=gc(s,t),I=pc(s,t),N=bc(s,t);if(a.useEffect(()=>{if(!N||I||!M)return;const f=()=>{const m=mc(M,$);y(m),k(hc(m.percentage))};f();const _=setInterval(f,1e4);return()=>clearInterval(_)},[M,$,N,I]),!M&&!I)return null;if(I)return i?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"‚úì"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-3 py-1.5 rounded-lg",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:[il(t)," ‚úì"]})]});if(!N)return null;const p={normal:{bg:"bg-sky-50",border:"border-sky-200",text:"text-sky-700",bar:"bg-sky-500",icon:"text-sky-500"},warning:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",bar:"bg-amber-500",icon:"text-amber-500"},exceeded:{bg:"bg-red-50",border:"border-red-300",text:"text-red-700",bar:"bg-red-500",icon:"text-red-500"}}[r];return i?e.jsxs("div",{className:`flex items-center gap-1 ${p.text}`,children:[r==="exceeded"?e.jsx(ws,{className:"w-4 h-4 animate-pulse"}):e.jsx(Ye,{className:`w-4 h-4 ${p.icon}`}),e.jsx("span",{className:"text-xs font-bold",children:c.remaining>0?Yt(c.remaining):`+${Yt(Math.abs(c.remaining))}`})]}):e.jsxs("div",{className:`${p.bg} ${p.border} border rounded-xl p-3 space-y-2`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r==="exceeded"?e.jsx(ws,{className:`w-5 h-5 ${p.icon} animate-pulse`}):e.jsx(Ye,{className:`w-5 h-5 ${p.icon}`}),n&&e.jsx("span",{className:`text-sm font-bold ${p.text}`,children:il(t)})]}),e.jsx("div",{className:`text-lg font-bold ${p.text}`,children:c.remaining>0?e.jsx("span",{children:Yt(c.remaining)}):e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:["+",Yt(Math.abs(c.remaining))]}),e.jsx("span",{className:"text-xs",children:"‚ö†Ô∏è"})]})})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${p.bar} transition-all duration-500`,style:{width:`${Math.min(c.percentage,100)}%`}})}),r==="exceeded"&&e.jsx("div",{className:"text-xs text-red-600 font-medium animate-pulse",children:"‚ö†Ô∏è ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ≠ÿØÿØ! Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ•ÿ≥ÿ±ÿßÿπ."}),r==="warning"&&e.jsxs("div",{className:"text-xs text-amber-600 font-medium",children:["‚è∞ ÿßŸÑŸàŸÇÿ™ ŸäŸÜŸÅÿØ! ÿ®ÿßŸÇŸä ",Yt(c.remaining)," ŸÅŸÇÿ∑."]})]})},fc=()=>{var C,P;const{user:s}=$e(),t=gs(),n=Qe(),{clear:i,add:c}=oa(),[y,r]=a.useState(null),[k,$]=a.useState([]),[M,I]=a.useState(null),[N,A]=a.useState(null),[p,f]=a.useState(null),[_,m]=a.useState(!1),[j,L]=a.useState(null),g=async(x,z)=>{m(!0),A(z);try{const R=await Ce(X(S,"restaurants",x,"private","bankInfo"));if(R.exists()){const u=R.data();f({bankName:u.bankName||"",bankAccountName:u.bankAccountName||"",bankAccountNumber:u.bankAccountNumber||""})}else{const u=await Ce(X(S,"restaurants",x));if(u.exists()){const v=u.data();f({bankName:v.bankName||"",bankAccountName:v.bankAccountName||"",bankAccountNumber:v.bankAccountNumber||""})}else f(null)}}catch{n.error("ÿ™ÿπÿ∞ÿ± ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØŸÅÿπ"),f(null)}finally{m(!1)}},d=x=>{navigator.clipboard.writeText(x),n.success("ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿ≥ÿßÿ®! üìã")};a.useEffect(()=>{if(!s)return;r(null),I(null);const x=pe(te(S,"orders"),be("customerId","==",s.uid),as("createdAt","desc")),z=As(x,R=>{$(R.docs.map(u=>({id:u.id,...u.data()}))),r(null)},async R=>{console.error("TrackOrders onSnapshot error:",R),r("‚ö†Ô∏è ÿßÿ≠ÿ™ŸÖÿßŸÑ ÿ™ÿ≠ÿ™ÿßÿ¨ Composite Index ŸÑŸÄ customerId + createdAt. ÿ®ŸÜÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿØŸàŸÜ ÿ™ÿ±ÿ™Ÿäÿ® ŸÖÿ§ŸÇÿ™Ÿãÿß.");const u=pe(te(S,"orders"),be("customerId","==",s.uid)),H=(await ue(u)).docs.map(ie=>({id:ie.id,...ie.data()})),Y=pe(te(S,"orders"),as("createdAt","desc"),ks(5));let ce=[];try{ce=(await ue(Y)).docs.map(je=>{var T,se,ye,Z;const ge=je.data();return{id:je.id,customerId:ge.customerId,restaurantId:ge.restaurantId,createdAt:((Z=(ye=(se=(T=ge.createdAt)==null?void 0:T.toDate)==null?void 0:se.call(T))==null?void 0:ye.toISOString)==null?void 0:Z.call(ye))??null}})}catch{}I({uid:s.uid,fallbackCount:H.length,sample:ce}),$(H)});return()=>z()},[s]);const h=x=>{var z;i(),(z=x.items)==null||z.forEach(R=>{c({id:R.id,name:R.name,price:R.price,ownerId:R.ownerId||x.restaurantId},R.qty)}),n.success("ÿ™ŸÖÿ™ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÜÿßÿµÿ± ŸÑŸÑÿ≥ŸÑÿ©! üõí"),x.restaurantId?t(`/menu?restaurant=${x.restaurantId}`):t("/cart")},[F,D]=a.useState(null),b=async x=>{if(x.status!=="pending"){n.error("ŸÑÿß ŸäŸÖŸÉŸÜ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ® ÿ®ÿπÿØ ŸÇÿ®ŸàŸÑŸá");return}if(window.confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®ÿü")){D(x.id);try{await xe(X(S,"orders",x.id),{status:"cancelled",cancelledAt:J(),cancelledBy:"customer",updatedAt:J()});const{processOrderRefund:R,notifyRefundParties:u}=await et(async()=>{const{processOrderRefund:H,notifyRefundParties:Y}=await import("./refundService-DmZcahjw.js");return{processOrderRefund:H,notifyRefundParties:Y}},__vite__mapDeps([0,1,2,3,4])),v=await R({id:x.id,customerId:x.customerId,restaurantId:x.restaurantId||"",subtotal:x.subtotal,total:x.total,restaurantEarnings:x.restaurantEarnings,platformFee:x.platformFee,adminCommission:x.adminCommission,appEarnings:x.appEarnings,referredBy:x.referredBy,paymentMethod:x.paymentMethod});await u({id:x.id,customerId:x.customerId,restaurantId:x.restaurantId||"",subtotal:x.subtotal,total:x.total},v,"customer"),v.details.customerRefunded>0?n.success(`ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ® Ÿàÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ${v.details.customerRefunded.toFixed(2)} ÿ±.ÿ≥ ŸÑŸÖÿ≠ŸÅÿ∏ÿ™ŸÉ ‚úÖ`):n.success("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ")}catch(R){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®:",R),n.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®")}finally{D(null)}}},E=x=>({pending:{text:"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",emoji:"‚è≥",color:"bg-yellow-500",icon:Ye},accepted:{text:"ÿ™ŸÖ ÿßŸÑŸÇÿ®ŸàŸÑ",emoji:"‚úÖ",color:"bg-blue-500",icon:De},preparing:{text:"ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",emoji:"üë®‚Äçüç≥",color:"bg-orange-500",icon:mt},ready:{text:"ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿ™ÿ≥ŸÑŸäŸÖ",emoji:"üì¶",color:"bg-purple-500",icon:Oe},out_for_delivery:{text:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",emoji:"üöó",color:"bg-sky-500",icon:Ue},delivered:{text:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",emoji:"üéâ",color:"bg-green-500",icon:De},cancelled:{text:"ŸÖŸÑÿ∫Ÿä",emoji:"‚ùå",color:"bg-red-500",icon:Ys}})[x]||{text:x,emoji:"üì¶",color:"bg-gray-500",icon:Oe},o=x=>x.courierId&&x.status==="out_for_delivery",w=x=>{const z=["pending","accepted","preparing","ready"];return!x.courierId&&x.restaurantId&&z.includes(x.status)},U=x=>["pending","accepted"].includes(x.status),B=x=>{var u,v,H,Y;if(x.status!=="delivered")return!1;const z=(v=(u=x.ratings)==null?void 0:u.customerToRestaurant)==null?void 0:v.stars,R=(Y=(H=x.ratings)==null?void 0:H.customerToCourier)==null?void 0:Y.stars;return x.courierId?!z||!R:!z},Q=async(x,z,R)=>{var ge,T;const u=k.find(se=>se.id===x);if(!u)return;const v={stars:R.stars,comment:R.comment||void 0,createdAt:new Date},Y={[z==="restaurant"?"ratings.customerToRestaurant":"ratings.customerToCourier"]:v,updatedAt:J()},ce=u.ratings||{};z==="restaurant"?ce.customerToRestaurant=v:ce.customerToCourier=v;const ie=(ge=ce.customerToRestaurant)==null?void 0:ge.stars,je=(T=ce.customerToCourier)==null?void 0:T.stars;u.courierId?ie&&je&&(Y.ratingCompleted=!0):ie&&(Y.ratingCompleted=!0),await xe(X(S,"orders",x),Y),z==="restaurant"&&u.restaurantId&&await O(u.restaurantId,R.stars),n.success("ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™ŸÇŸäŸäŸÖŸÉ! ‚≠ê")},O=async(x,z)=>{try{const R=await Ce(X(S,"restaurants",x));if(R.exists()){const u=R.data(),v=u.averageRating||0,H=u.totalRatings||0,Y=H>0?(v*H+z)/(H+1):z;await xe(X(S,"restaurants",x),{averageRating:Math.round(Y*10)/10,totalRatings:H+1,updatedAt:J()})}}catch(R){console.error("Error updating restaurant rating:",R)}};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:"ÿ∑ŸÑÿ®ÿßÿ™Ÿä"}),j&&e.jsx(Cr,{isOpen:j.isOpen,onClose:()=>L(null),onSubmit:async x=>{await Q(j.orderId,j.type,x),L(null)},type:j.type,targetName:j.targetName,orderId:j.orderId}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>A(null),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",onClick:x=>x.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ms,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ"})]}),e.jsx("button",{onClick:()=>A(null),className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-5",children:_?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-10 h-10 border-3 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]}):p&&p.bankName&&p.bankAccountNumber?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 bg-amber-50 p-3 rounded-xl",children:"üí∞ ÿ≠ŸàŸëŸÑ ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿπŸÑŸâ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä ÿßŸÑÿ™ÿßŸÑŸä ÿ´ŸÖ ÿ£ÿ®ŸÑÿ∫ ÿµÿßÿ≠ÿ® ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ps,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßŸÑÿ®ŸÜŸÉ"}),e.jsx("p",{className:"font-bold text-gray-800",children:p.bankName})]})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßÿ≥ŸÖ ÿµÿßÿ≠ÿ® ÿßŸÑÿ≠ÿ≥ÿßÿ®"}),e.jsx("p",{className:"font-bold text-gray-800",children:p.bankAccountName})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿ±ŸÇŸÖ ÿßŸÑÿ¢Ÿäÿ®ÿßŸÜ / ÿßŸÑÿ≠ÿ≥ÿßÿ®"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-mono font-bold text-gray-800 flex-1 text-left",dir:"ltr",children:p.bankAccountNumber}),e.jsx("button",{onClick:()=>d(p.bankAccountNumber||""),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition",children:e.jsx(wl,{className:"w-4 h-4"})})]})]})]}),k.find(x=>x.id===N)&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-sm text-green-600 mb-1",children:"ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿ∑ŸÑŸàÿ® ÿ™ÿ≠ŸàŸäŸÑŸá"}),e.jsxs("p",{className:"text-3xl font-black text-green-700",children:[(P=(C=k.find(x=>x.id===N))==null?void 0:C.total)==null?void 0:P.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"‚ö†Ô∏è ÿ®ÿπÿØ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑÿå ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿØŸÅÿπ"})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ps,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"ŸÑŸÖ Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÑŸÖÿπÿ±ŸÅÿ© ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ"})]})})]})}),y&&e.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[y,M&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{children:["UID: ",e.jsx("b",{children:M.uid})]}),e.jsxs("div",{children:["ÿπÿØÿØ ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑŸÅŸàŸÑÿ®ŸëÿßŸÉ: ",e.jsx("b",{children:M.fallbackCount})]}),Array.isArray(M.sample)&&M.sample.length>0&&e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"font-semibold",children:"ÿπŸäŸÜÿ© (ÿ£ÿ≠ÿØÿ´ 5):"}),M.sample.map(x=>e.jsxs("div",{className:"truncate",children:["#",x.id," ‚Ä¢ customerId: ",String(x.customerId)," ‚Ä¢ restaurantId: ",String(x.restaurantId)," ‚Ä¢ createdAt: ",x.createdAt||"‚Äî"]},x.id))]})]})]}),k.map(x=>{var z,R,u,v,H,Y,ce,ie,je,ge,T,se,ye,Z,G,K,me,oe,Ne;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:`${E(x.status).color} px-4 py-3 flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("span",{className:"text-xl",children:E(x.status).emoji}),e.jsx("span",{className:"font-bold",children:E(x.status).text})]}),e.jsxs("div",{className:"text-white/80 text-sm font-medium",children:["#",x.id.slice(-6)]})]}),e.jsxs("div",{className:"p-4",children:[x.restaurantName&&e.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold mb-2",children:[e.jsx("span",{children:"üçΩÔ∏è"}),e.jsx("span",{children:String(x.restaurantName)})]}),(x.status==="accepted"||x.status==="preparing")&&e.jsx("div",{className:"mb-3",children:e.jsx(Xt,{order:x,type:"preparation"})}),x.status==="ready"&&x.deliveryType==="delivery"&&e.jsx("div",{className:"mb-3",children:e.jsx(Xt,{order:x,type:"pickup"})}),x.status==="out_for_delivery"&&e.jsx("div",{className:"mb-3",children:e.jsx(Xt,{order:x,type:"delivery"})}),e.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 rounded-xl p-3 mb-3",children:(z=x.items)==null?void 0:z.map(W=>`${W.name}√ó${W.qty}`).join(" ‚Ä¢ ")}),e.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:x.deliveryType==="pickup"?e.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-medium bg-green-50 rounded-xl p-3",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:"ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]}):e.jsxs("div",{className:"space-y-1 bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä:"}),e.jsxs("span",{children:[((u=(R=x.subtotal)==null?void 0:R.toFixed)==null?void 0:u.call(R,2))||"‚Äî"," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ:"}),x.deliveryFee!==void 0&&x.deliveryFee>0?e.jsxs("span",{className:"font-medium",children:[(H=(v=x.deliveryFee)==null?void 0:v.toFixed)==null?void 0:H.call(v,2)," ÿ±.ÿ≥"]}):e.jsx("span",{className:"text-amber-600",children:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"font-bold text-lg text-primary",children:["ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: ",(ce=(Y=x.total)==null?void 0:Y.toFixed)==null?void 0:ce.call(Y,2)," ÿ±.ÿ≥"]})}),U(x)&&x.restaurantId&&e.jsxs("button",{onClick:()=>g(x.restaurantId,x.id),className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-500 to-green-600 
                             text-white rounded-xl font-bold shadow-lg hover:shadow-xl 
                             hover:scale-[1.02] transition-all duration-200`,children:[e.jsx(Ms,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ üí≥"})]}),x.status==="pending"&&e.jsx("button",{onClick:()=>b(x),disabled:F===x.id,className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 
                             text-white rounded-xl font-bold shadow-lg hover:shadow-xl 
                             hover:scale-[1.02] transition-all duration-200 disabled:opacity-50`,children:F===x.id?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ys,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ® ‚ùå"})]})}),B(x)&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border-2 border-amber-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ls,{className:"w-5 h-5 text-amber-500 fill-amber-500"}),e.jsx("span",{className:"font-bold text-amber-800",children:"ŸÇŸäŸëŸÖ ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ ‚≠ê"})]}),e.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"ÿ≥ÿßÿπÿØŸÜÿß ŸÅŸä ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿÆÿØŸÖÿ© ÿ®ÿ™ŸÇŸäŸäŸÖŸÉ"}),e.jsxs("div",{className:"space-y-2",children:[!((je=(ie=x.ratings)==null?void 0:ie.customerToRestaurant)!=null&&je.stars)&&e.jsxs("button",{onClick:()=>L({isOpen:!0,orderId:x.id,type:"restaurant",targetName:x.restaurantName||"ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-amber-300 
                                   rounded-xl hover:bg-amber-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"ŸÇŸäŸëŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(W=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-amber-400 transition"},W))})]}),x.courierId&&!((T=(ge=x.ratings)==null?void 0:ge.customerToCourier)!=null&&T.stars)&&e.jsxs("button",{onClick:()=>L({isOpen:!0,orderId:x.id,type:"courier",targetName:"ÿßŸÑŸÖŸÜÿØŸàÿ®"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-emerald-300 
                                   rounded-xl hover:bg-emerald-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"ŸÇŸäŸëŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(W=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-emerald-400 transition"},W))})]})]}),(((ye=(se=x.ratings)==null?void 0:se.customerToRestaurant)==null?void 0:ye.stars)||((G=(Z=x.ratings)==null?void 0:Z.customerToCourier)==null?void 0:G.stars))&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-amber-200 space-y-2",children:[((me=(K=x.ratings)==null?void 0:K.customerToRestaurant)==null?void 0:me.stars)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ©:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(W=>e.jsx(ls,{className:`w-4 h-4 ${W<=x.ratings.customerToRestaurant.stars?"text-amber-400 fill-amber-400":"text-gray-300"}`},W))})]}),((Ne=(oe=x.ratings)==null?void 0:oe.customerToCourier)==null?void 0:Ne.stars)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ™ŸÇŸäŸäŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(W=>e.jsx(ls,{className:`w-4 h-4 ${W<=x.ratings.customerToCourier.stars?"text-emerald-400 fill-emerald-400":"text-gray-300"}`},W))})]})]})]}),x.status==="delivered"&&x.ratingCompleted&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(De,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"ÿ™ŸÖ ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ‚úÖ"})]})}),(x.status==="delivered"||x.status==="cancelled")&&x.items&&x.items.length>0&&e.jsxs("button",{onClick:()=>h(x),className:`w-full flex items-center justify-center gap-2 px-4 py-3 
                             bg-gradient-to-r from-sky-500 to-sky-600 
                             text-white rounded-xl font-bold shadow-lg 
                             hover:shadow-xl hover:scale-[1.02] 
                             transition-all duration-200`,children:[e.jsx(qe,{className:"w-5 h-5"}),e.jsx("span",{children:"üîÑ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ®"})]}),e.jsxs("div",{className:"flex gap-2",children:[o(x)&&e.jsxs("button",{onClick:()=>t(`/chat?orderId=${x.id}`),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-primary to-accent 
                               text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                               hover:scale-105 transition-all duration-200 animate-pulse`,children:[e.jsx(ht,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖŸÜÿØŸàÿ® üöó"})]}),w(x)&&e.jsxs("button",{onClick:()=>t(`/chat?orderId=${x.id}`),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 
                               text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                               hover:scale-105 transition-all duration-200`,children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ üçΩÔ∏è"})]}),e.jsxs("button",{onClick:()=>t(`/support?orderId=${x.id}`),className:`flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200`,title:"ÿ™ŸÇÿØŸäŸÖ ÿ¥ŸÉŸàŸâ ÿ£Ÿà ÿ∑ŸÑÿ® ÿØÿπŸÖ",children:[e.jsx(Et,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ¥ŸÉŸàŸâ"})]})]})]})]})]},x.id)}),k.length===0&&!y&&e.jsx("div",{className:"text-gray-600",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ≠ÿ™Ÿâ ÿßŸÑÿ¢ŸÜ."})]})},jc=()=>{const{user:s,role:t}=$e(),n=Ds(),i=Qe(),c=a.useRef(null),[y,r]=a.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[k,$]=a.useState(null),[M,I]=a.useState(!1),[N,A]=a.useState({totalOrders:0,favoriteRestaurants:0,pendingOrders:0}),[p,f]=a.useState(0),[_,m]=a.useState([]),[j,L]=a.useState(!1),[g,d]=a.useState(""),[h,F]=a.useState(!1),[D,b]=a.useState(!1),[E,o]=a.useState([]),[w,U]=a.useState(0),[B,Q]=a.useState(!1),[O,C]=a.useState(null),[P,x]=a.useState(""),[z,R]=a.useState(!0),[u,v]=a.useState(!1);a.useEffect(()=>{if(!s)return;(async()=>{const G=await Ce(X(S,"users",s.uid));if(G.exists()){const K=G.data();r({name:K.name||"",phone:K.phone||s.phoneNumber||"",city:K.city||"",address:K.address||"",restaurantName:K.restaurantName||""}),$(K.photoUrl||null),K.savedLocations&&Array.isArray(K.savedLocations)?(o(K.savedLocations),U(K.defaultLocationIndex||0)):K.savedLocation&&(o([{...K.savedLocation,label:"ÿßŸÑŸÖŸÜÿ≤ŸÑ"}]),U(0))}if(t==="customer")try{const K=await Ce(X(S,"wallets",s.uid));if(K.exists()){const me=K.data();f((me==null?void 0:me.balance)||0),m((me==null?void 0:me.transactions)||[])}}catch(K){console.warn("Error loading wallet:",K)}if(t==="customer")try{const{collection:K,query:me,where:oe,getDocs:Ne}=await et(async()=>{const{collection:ve,query:Ae,where:Me,getDocs:Te}=await import("./vendor-firebase-DPNhE71o.js").then(Ke=>Ke.M);return{collection:ve,query:Ae,where:Me,getDocs:Te}},[]),W=me(K(S,"orders"),oe("customerId","==",s.uid)),ee=await Ne(W),ne=ee.docs.filter(ve=>["pending","accepted","preparing","ready","out_for_delivery"].includes(ve.data().status)).length,le=me(K(S,"storeFollowers"),oe("followerId","==",s.uid)),he=await Ne(le);A({totalOrders:ee.size,favoriteRestaurants:he.size,pendingOrders:ne})}catch(K){console.warn("Error loading stats:",K)}R(!1)})()},[s,t]);const H=async Z=>{if(Z.preventDefault(),!!s){v(!0);try{const G=E[w]||null;await xe(X(S,"users",s.uid),{name:y.name,phone:y.phone,city:y.city,address:y.address,photoUrl:k,savedLocation:G,savedLocations:E,defaultLocationIndex:w,...t==="owner"&&{restaurantName:y.restaurantName}}),n.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ")}catch{n.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{v(!1)}}},Y=async Z=>{var K;const G=(K=Z.target.files)==null?void 0:K[0];if(!(!G||!s)){if(!G.type.startsWith("image/")){i.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿµÿßŸÑÿ≠ÿ©");return}if(G.size>5*1024*1024){i.error("ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 5 ŸÖŸäÿ¨ÿßÿ®ÿßŸäÿ™");return}I(!0);try{const me=js(gt,`users/${s.uid}/profile.${G.name.split(".").pop()}`);await ot(me,G);const oe=await ys(me);$(oe),i.success("ÿ™ŸÖ ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©! ÿßÿ∂ÿ∫ÿ∑ ÿ≠ŸÅÿ∏ ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™")}catch(me){console.error("Error uploading photo:",me),i.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©")}finally{I(!1)}}},ce=()=>{$(null),i.info("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿµŸàÿ±ÿ©! ÿßÿ∂ÿ∫ÿ∑ ÿ≠ŸÅÿ∏ ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™")},ie=async Z=>{var K,me,oe;if(!s)return;const G=parseFloat(g);F(!0);try{const{collection:Ne,addDoc:W}=await et(async()=>{const{collection:he,addDoc:ve}=await import("./vendor-firebase-DPNhE71o.js").then(Ae=>Ae.M);return{collection:he,addDoc:ve}},[]);await W(Ne(S,"rechargeRequests"),{userId:s.uid,userName:y.name||s.email,userPhone:y.phone,amount:G,paymentMethod:"paypal",paypalOrderId:Z.id,paypalPayerId:(K=Z.payer)==null?void 0:K.payer_id,paypalEmail:(me=Z.payer)==null?void 0:me.email_address,status:"approved",createdAt:J(),updatedAt:J()});const ee=X(S,"wallets",s.uid),ne=await Ce(ee),le={id:Z.id,type:"credit",amount:G,description:"ÿ¥ÿ≠ŸÜ ÿπÿ®ÿ± PayPal",paypalOrderId:Z.id,createdAt:new Date};if(ne.exists()){const he=((oe=ne.data())==null?void 0:oe.balance)||0;await xe(ee,{balance:he+G,transactions:pr(le),updatedAt:J()}),f(he+G)}else await Ze(ee,{id:s.uid,balance:G,totalEarnings:G,totalWithdrawn:0,transactions:[le],createdAt:J(),updatedAt:J()}),f(G);m(he=>[le,...he]),n.success(`ÿ™ŸÖ ÿ¥ÿ≠ŸÜ ${G} ÿ±ŸäÿßŸÑ ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ`),d(""),L(!1)}catch(Ne){console.error("Error processing PayPal payment:",Ne),n.error("ŸÅÿ¥ŸÑ ŸÅŸä ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿØŸÅÿπ")}finally{F(!1)}},je=(Z,G)=>{const K={lat:Z.lat,lng:Z.lng,address:G,label:P||`ÿπŸÜŸàÿßŸÜ ${E.length+1}`};o([...E,K]),x(""),Q(!1),i.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÜŸàÿßŸÜ! ÿßÿ∂ÿ∫ÿ∑ ÿ≠ŸÅÿ∏ ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™")},ge=(Z,G)=>{if(O===null)return;const K=[...E];K[O]={...K[O],lat:Z.lat,lng:Z.lng,address:G},o(K),C(null),Q(!1),i.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπŸÜŸàÿßŸÜ! ÿßÿ∂ÿ∫ÿ∑ ÿ≠ŸÅÿ∏ ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™")},T=async Z=>{if(!await n.confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿπŸÜŸàÿßŸÜÿü"))return;const K=E.filter((me,oe)=>oe!==Z);o(K),w>=K.length?U(Math.max(0,K.length-1)):w>Z&&U(w-1),i.info("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿπŸÜŸàÿßŸÜ")},se=Z=>{U(Z),i.success("ÿ™ŸÖ ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿπŸÜŸàÿßŸÜ ŸÉÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä")};if(z)return e.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[e.jsx(qe,{className:"w-6 h-6 animate-spin ml-2"}),"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."]});const ye=()=>t==="owner"?"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ":t==="courier"?"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÜÿØŸàÿ®":t==="admin"?"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅ":"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™Ÿä";return e.jsxs("div",{className:"max-w-md mx-auto py-8 px-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-sky-100 border-4 border-sky-200 shadow-lg",children:k?e.jsx("img",{src:k,alt:"ÿµŸàÿ±ÿ™Ÿä",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(os,{className:"w-12 h-12 text-sky-400"})})}),e.jsx("button",{type:"button",onClick:()=>{var Z;return(Z=c.current)==null?void 0:Z.click()},disabled:M,className:"absolute bottom-0 right-0 w-8 h-8 bg-sky-500 hover:bg-sky-600 text-white rounded-full shadow-lg flex items-center justify-center transition disabled:opacity-50",children:M?e.jsx(qe,{className:"w-4 h-4 animate-spin"}):e.jsx(ut,{className:"w-4 h-4"})}),k&&e.jsx("button",{type:"button",onClick:ce,className:"absolute top-0 right-0 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg flex items-center justify-center transition opacity-0 group-hover:opacity-100",children:e.jsx(_e,{className:"w-3 h-3"})}),e.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:Y,className:"hidden"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:ye()}),e.jsx("p",{className:"text-sm text-gray-500",children:(s==null?void 0:s.email)||(s==null?void 0:s.phoneNumber)})]})]}),t==="customer"&&e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs(re,{to:"/orders",className:"bg-sky-50 rounded-xl p-3 text-center hover:bg-sky-100 transition",children:[e.jsx(us,{className:"w-6 h-6 text-sky-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-sky-600",children:N.totalOrders}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿ∑ŸÑÿ®ÿßÿ™Ÿä"})]}),e.jsxs("div",{className:"bg-pink-50 rounded-xl p-3 text-center",children:[e.jsx(Zt,{className:"w-6 h-6 text-pink-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-pink-600",children:N.favoriteRestaurants}),e.jsx("p",{className:"text-xs text-gray-500",children:"ŸÖÿ™ÿßÿ®Ÿéÿπ"})]}),e.jsxs(re,{to:"/orders",className:"bg-amber-50 rounded-xl p-3 text-center hover:bg-amber-100 transition",children:[e.jsx(vt,{className:"w-6 h-6 text-amber-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-amber-600",children:N.pendingOrders}),e.jsx("p",{className:"text-xs text-gray-500",children:"ŸÇŸäÿØ ÿßŸÑÿ™ŸÜŸÅŸäÿ∞"})]})]}),t==="customer"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 via-sky-600 to-sky-700 rounded-2xl p-5 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(cs,{className:"w-6 h-6"})}),e.jsx("span",{className:"font-bold",children:"ŸÖÿ≠ŸÅÿ∏ÿ™Ÿä"})]}),e.jsxs("button",{type:"button",onClick:()=>L(!0),className:"px-4 py-2 bg-white text-sky-600 rounded-xl font-bold text-sm hover:bg-sky-50 transition flex items-center gap-1",children:[e.jsx(Wr,{className:"w-4 h-4"}),"ÿ¥ÿ≠ŸÜ"]})]}),e.jsxs("div",{className:"text-center py-3",children:[e.jsx("p",{className:"text-sky-100 text-sm mb-1",children:"ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑÿ≠ÿßŸÑŸä"}),e.jsxs("p",{className:"text-4xl font-black",children:[p.toFixed(2)," ",e.jsx("span",{className:"text-lg",children:"ÿ±.ÿ≥"})]})]}),_.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20",children:[e.jsx("p",{className:"text-xs text-sky-100 mb-2",children:"ÿ¢ÿÆÿ± ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:_.slice(-3).reverse().map((Z,G)=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-white/10 rounded-lg p-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[Z.type==="credit"?e.jsx(Wr,{className:"w-4 h-4 text-green-300"}):e.jsx(qn,{className:"w-4 h-4 text-red-300"}),e.jsx("span",{className:"text-xs",children:Z.description||(Z.type==="credit"?"ÿ¥ÿ≠ŸÜ":"ÿÆÿµŸÖ")})]}),e.jsxs("span",{className:Z.type==="credit"?"text-green-300 font-bold":"text-red-300 font-bold",children:[Z.type==="credit"?"+":"-",Z.amount," ÿ±.ÿ≥"]})]},G))})]})]})}),t==="customer"&&e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs(re,{to:"/notifications",className:"flex-1 flex items-center justify-center gap-2 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition text-gray-700 font-medium",children:[e.jsx(dt,{className:"w-5 h-5"}),"ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"]}),e.jsxs(re,{to:"/orders",className:"flex-1 flex items-center justify-center gap-2 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition text-gray-700 font-medium",children:[e.jsx(us,{className:"w-5 h-5"}),"ÿ∑ŸÑÿ®ÿßÿ™Ÿä"]})]}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(os,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ",value:y.name,onChange:Z=>r({...y,name:Z.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Nr,{className:"w-4 h-4 inline ml-1"}),"ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:y.phone,onChange:Z=>r({...y,phone:Z.target.value}),dir:"ltr"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(ps,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑŸÖÿØŸäŸÜÿ©"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"ŸÖÿ´ÿßŸÑ: ÿßŸÑÿ±Ÿäÿßÿ∂",value:y.city,onChange:Z=>r({...y,city:Z.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(es,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä"]}),e.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"ÿßŸÑÿ≠Ÿäÿå ÿßŸÑÿ¥ÿßÿ±ÿπÿå ÿ±ŸÇŸÖ ÿßŸÑŸÖÿ®ŸÜŸâÿå ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©...",value:y.address,onChange:Z=>r({...y,address:Z.target.value})})]}),(t==="customer"||t==="admin")&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:[e.jsx(Qs,{className:"w-4 h-4"}),"ÿπŸÜÿßŸàŸäŸÜ ÿßŸÑÿ™ŸàÿµŸäŸÑ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[E.length,"/5"]})]}),E.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:E.map((Z,G)=>e.jsxs("div",{className:`rounded-xl p-3 border-2 transition ${G===w?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${G===w?"bg-green-500":"bg-gray-400"}`,children:e.jsx(es,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-bold text-gray-800",children:Z.label||`ÿπŸÜŸàÿßŸÜ ${G+1}`}),G===w&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-500 text-white text-xs font-bold rounded-full",children:[e.jsx(ls,{className:"w-3 h-3"})," ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä"]})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:Z.address})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[G!==w&&e.jsxs("button",{type:"button",onClick:()=>se(G),className:"flex-1 py-2 px-3 rounded-lg border border-green-200 text-green-600 text-xs font-medium hover:bg-green-50 transition flex items-center justify-center gap-1",children:[e.jsx(hs,{className:"w-3 h-3"})," ÿ™ÿπŸäŸäŸÜ ŸÉÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä"]}),e.jsx("button",{type:"button",onClick:()=>{C(G),Q(!0)},className:"flex-1 py-2 px-3 rounded-lg border border-sky-200 text-sky-600 text-xs font-medium hover:bg-sky-50 transition",children:"ÿ™ÿπÿØŸäŸÑ"}),e.jsx("button",{type:"button",onClick:()=>T(G),className:"py-2 px-3 rounded-lg border border-red-200 text-red-500 hover:bg-red-50 transition",children:e.jsx(fs,{className:"w-4 h-4"})})]})]},G))}),E.length<5&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:P,onChange:Z=>x(Z.target.value),placeholder:"ÿßÿ≥ŸÖ ÿßŸÑÿπŸÜŸàÿßŸÜ (ŸÖÿ´ÿßŸÑ: ÿßŸÑŸÖŸÜÿ≤ŸÑÿå ÿßŸÑÿπŸÖŸÑ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 text-sm focus:border-sky-400 focus:outline-none"}),e.jsxs("button",{type:"button",onClick:()=>{C(null),Q(!0)},className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-100 to-sky-50 border-2 border-dashed border-sky-300 text-sky-600 font-semibold hover:border-sky-400 transition flex items-center justify-center gap-3",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÜŸàÿßŸÜ ÿ¨ÿØŸäÿØ"})]})]}),E.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"üí° ÿ£ÿ∂ŸÅ ÿπŸÜÿßŸàŸäŸÜŸÉ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ŸÑÿ™ÿ≥ŸáŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®"})]}),t==="owner"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Da,{className:"w-4 h-4 inline ml-1"}),"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ",value:y.restaurantName,onChange:Z=>r({...y,restaurantName:Z.target.value})})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:u?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wr,{className:"w-5 h-5"}),"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[e.jsx("p",{children:"üí° ŸäŸÖŸÉŸÜŸÉ ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™"}),(t==="customer"||t==="admin")&&e.jsx("p",{className:"mt-1",children:"üìç ŸäŸÖŸÉŸÜŸÉ ÿ≠ŸÅÿ∏ ÿ≠ÿ™Ÿâ 5 ÿπŸÜÿßŸàŸäŸÜ ŸÖÿÆÿ™ŸÑŸÅÿ©"})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl w-full max-w-md shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(cs,{className:"w-5 h-5 text-sky-500"}),"ÿ¥ÿ≠ŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©"]}),e.jsx("button",{onClick:()=>L(!1),className:"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-sky-600 rounded-xl p-4 text-center text-white",children:[e.jsx("p",{className:"text-sm text-sky-100 mb-1",children:"ÿ±ÿµŸäÿØŸÉ ÿßŸÑÿ≠ÿßŸÑŸä"}),e.jsxs("p",{className:"text-3xl font-black",children:[p.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ÿßÿÆÿ™ÿ± ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ¥ÿ≠ŸÜ (ÿ±ŸäÿßŸÑ)"}),e.jsx("input",{type:"number",value:g,onChange:Z=>d(Z.target.value),placeholder:"ÿ£ÿØÿÆŸÑ ÿßŸÑŸÖÿ®ŸÑÿ∫ (10 - 1000)",className:"w-full border-2 border-gray-200 rounded-xl p-4 text-lg font-bold text-center focus:border-sky-400 focus:outline-none",min:"10",max:"1000",dir:"ltr"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[20,50,100,200].map(Z=>e.jsxs("button",{type:"button",onClick:()=>d(Z.toString()),className:`py-3 rounded-xl font-bold text-sm transition ${g===Z.toString()?"bg-sky-500 text-white shadow-lg scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[Z," ÿ±.ÿ≥"]},Z))}),g&&parseFloat(g)>=10&&parseFloat(g)<=1e3&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("p",{className:"text-sm text-center text-gray-600 mb-3",children:["üí≥ ÿßÿØŸÅÿπ ",e.jsxs("span",{className:"font-bold text-sky-600",children:[g," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"text-gray-400 text-xs mr-1",children:["(‚âà $",Mt.sarToUsd(parseFloat(g)),")"]}),"ÿπÿ®ÿ± PayPal"]}),e.jsx(Al,{options:Ll(),children:e.jsx(Il,{style:{layout:"vertical",shape:"pill",color:"blue",label:"pay",height:50},disabled:h,createOrder:(Z,G)=>{const K=Mt.sarToUsd(parseFloat(g));return G.order.create({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:K.toString()},description:`ÿ¥ÿ≠ŸÜ ŸÖÿ≠ŸÅÿ∏ÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ - ${g} ÿ±.ÿ≥`}]})},onApprove:async(Z,G)=>{if(G.order){const K=await G.order.capture();ie(K)}},onError:Z=>{console.error("PayPal Error:",Z),i.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ")},onCancel:()=>{i.info("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ")}})}),h&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 text-sky-600",children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"ÿ¨ÿßÿ±Ÿê ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿØŸÅÿπ..."})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ms,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-blue-800",children:"ÿßŸÑÿØŸÅÿπ ÿßŸÑÿ¢ŸÖŸÜ ÿπÿ®ÿ± PayPal"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ±ÿµŸäÿØ ŸÅŸàÿ±ÿßŸã ÿ®ÿπÿØ ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ. ŸäŸÖŸÉŸÜŸÉ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ®ÿ∑ÿßŸÇÿ© Visa/Mastercard ÿ£Ÿà ÿ≠ÿ≥ÿßÿ® PayPal."})]})]})}),e.jsx("p",{className:"text-xs text-center text-gray-400",children:"üîí ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ŸÖÿ¥ŸÅÿ±ÿ© Ÿàÿ¢ŸÖŸÜÿ©"})]})]})}),e.jsx(Ol,{isOpen:B,onClose:()=>{Q(!1),C(null)},onConfirm:(Z,G)=>{O!==null?ge(Z,G):je(Z,G)},initialLocation:O!==null&&E[O]?{lat:E[O].lat,lng:E[O].lng}:null})]})},yc=()=>{var H,Y,ce,ie,je,ge;const{user:s}=$e(),t=Qe(),[n,i]=a.useState(!0),[c,y]=a.useState(!1),[r,k]=a.useState(null),[$,M]=a.useState("overview"),[I,N]=a.useState({todayOrders:0,todayRevenue:0,weekOrders:0,weekRevenue:0,monthOrders:0,monthRevenue:0,totalOrders:0,totalRevenue:0,pendingOrders:0,preparingOrders:0,deliveredOrders:0,cancelledOrders:0,menuItems:0,availableItems:0,averageRating:0,deliveryRate:0,activePromotions:0,totalViews:0,uniqueCustomers:0,profileViews:0,menuViews:0,itemViews:0,shareClicks:0,whatsappShares:0,registeredViaLink:0,todayViews:0,followersCount:0}),[A,p]=a.useState(!1),[f,_]=a.useState(null),m=T=>{const se=`${window.location.origin}/menu?restaurant=${s==null?void 0:s.uid}`;return T?`${se}&ref=${T}`:se},j=async T=>{if(s!=null&&s.uid)try{const se=X(S,"restaurantStats",s.uid),ye={totalShareClicks:Xe(1),updatedAt:J()};T==="whatsapp"&&(ye.whatsappShareCount=Xe(1)),await xe(se,ye).catch(async()=>{await Ze(se,{totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:1,whatsappShareCount:T==="whatsapp"?1:0,registeredCustomers:0,appDownloads:0,dailyViews:{},updatedAt:J()})})}catch(se){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ©:",se)}},L=async()=>{const T=m("copy");await navigator.clipboard.writeText(T),p(!0),setTimeout(()=>p(!1),2e3),t.success("ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑! üìã"),j("copy")},g=()=>{const T=m("whatsapp"),se=encodeURIComponent(`üçΩÔ∏è ÿ™ŸÅÿ∂ŸÑ ÿ®ÿ≤Ÿäÿßÿ±ÿ© ŸÖÿ™ÿ¨ÿ± ${(r==null?void 0:r.name)||"ŸÖÿ™ÿ¨ÿ±Ÿä"} ÿπŸÑŸâ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™!

${T}`);window.open(`https://wa.me/?text=${se}`,"_blank"),t.success("ÿ¨ÿßÿ±Ÿä ŸÅÿ™ÿ≠ ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ®... üì±"),j("whatsapp")},d=async()=>{const T=m("social");if(navigator.share)try{await navigator.share({title:(r==null?void 0:r.name)||"ŸÖÿ™ÿ¨ÿ±Ÿä",text:`ÿ™ŸÅÿ∂ŸÑ ÿ®ÿ≤Ÿäÿßÿ±ÿ© ${r==null?void 0:r.name} ÿπŸÑŸâ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™`,url:T}),j("social")}catch{L()}else L()},[h,F]=a.useState([]),[D,b]=a.useState([]),[E,o]=a.useState([]),w=async()=>{var T,se,ye;if(s!=null&&s.uid)try{const Z=await Ce(X(S,"restaurants",s.uid));Z.exists()&&k(Z.data());const G=pe(te(S,"menuItems"),be("ownerId","==",s.uid)),me=(await ue(G)).docs.map(we=>({id:we.id,...we.data()})),oe=pe(te(S,"orders"),be("ownerId","==",s.uid),as("createdAt","desc")),W=(await ue(oe)).docs.map(we=>({id:we.id,...we.data()}));let ee=0,ne=0;try{const we=pe(te(S,"promotions"),be("ownerId","==",s.uid));(await ue(we)).docs.forEach(We=>{const He=We.data();He.isActive&&ee++,ne+=He.viewsCount||0})}catch{}const le=new Date,he=new Date(le.getFullYear(),le.getMonth(),le.getDate()),ve=new Date(he.getTime()-7*24*60*60*1e3),Ae=new Date(he.getTime()-30*24*60*60*1e3),Me=W.filter(we=>{var We,He;return(((He=(We=we.createdAt)==null?void 0:We.toDate)==null?void 0:He.call(We))||new Date(0))>=he&&we.status!=="cancelled"}),Te=W.filter(we=>{var We,He;return(((He=(We=we.createdAt)==null?void 0:We.toDate)==null?void 0:He.call(We))||new Date(0))>=ve&&we.status!=="cancelled"}),Ke=W.filter(we=>{var We,He;return(((He=(We=we.createdAt)==null?void 0:We.toDate)==null?void 0:He.call(We))||new Date(0))>=Ae&&we.status!=="cancelled"}),ze=W.filter(we=>we.status==="delivered"),Rs=W.filter(we=>we.status==="pending"),Ps=W.filter(we=>["accepted","preparing"].includes(we.status)),Js=W.filter(we=>we.status==="cancelled"),Xs=new Set(W.map(we=>we.customerId).filter(Boolean)),ns={};ze.forEach(we=>{var Le;(Le=we.items)==null||Le.forEach(We=>{const He=We.name||"ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ";ns[He]=(ns[He]||0)+(We.qty||1)})});const tt=Object.entries(ns).sort((we,Le)=>Le[1]-we[1]).slice(0,5).map(([we,Le])=>({name:we,count:Le}));b(tt),F(W.slice(0,5));let Us=0,Ts=0,Bs=0,Vs=0,Vt=0,At=0,qt=0,qs=0;try{const we=await Ce(X(S,"restaurantStats",s.uid));if(we.exists()){const Le=we.data();_(Le),Us=Le.totalProfileViews||0,Ts=Le.totalMenuViews||0,Bs=Le.totalItemViews||0,Vs=Le.totalShareClicks||0,Vt=Le.whatsappShareCount||0,At=Le.registeredCustomers||0,qs=Le.followersCount||0;const We=new Date().toISOString().split("T")[0];qt=((T=Le.dailyViews)==null?void 0:T[We])||0}}catch(we){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿßÿ™:",we)}try{const we=pe(te(S,"customerRegistrations"),be("restaurantId","==",s.uid));At=(await ue(we)).size}catch{}try{const we=pe(te(S,"storeFollowers"),be("restaurantId","==",s.uid));qs=(await ue(we)).size}catch{}try{const we=pe(te(S,"stories"),be("ownerId","==",s.uid)),We=(await ue(we)).docs.map(He=>{var zs,at,_s,bt;return{id:He.id,...He.data(),expiresAt:(at=(zs=He.data().expiresAt)==null?void 0:zs.toDate)==null?void 0:at.call(zs),createdAt:(bt=(_s=He.data().createdAt)==null?void 0:_s.toDate)==null?void 0:bt.call(_s)}}).filter(He=>He.expiresAt&&new Date(He.expiresAt)>le).sort((He,zs)=>{var at,_s;return(((at=zs.createdAt)==null?void 0:at.getTime())||0)-(((_s=He.createdAt)==null?void 0:_s.getTime())||0)});o(We)}catch(we){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä:",we)}N({todayOrders:Me.length,todayRevenue:Me.reduce((we,Le)=>we+(Le.subtotal||0),0),weekOrders:Te.length,weekRevenue:Te.reduce((we,Le)=>we+(Le.subtotal||0),0),monthOrders:Ke.length,monthRevenue:Ke.reduce((we,Le)=>we+(Le.subtotal||0),0),totalOrders:W.filter(we=>we.status!=="cancelled").length,totalRevenue:ze.reduce((we,Le)=>we+(Le.subtotal||0),0),pendingOrders:Rs.length,preparingOrders:Ps.length,deliveredOrders:ze.length,cancelledOrders:Js.length,menuItems:me.length,availableItems:me.filter(we=>we.available).length,averageRating:((se=Z.data())==null?void 0:se.rating)||0,deliveryRate:((ye=Z.data())==null?void 0:ye.deliveryRate)||0,activePromotions:ee,totalViews:ne,uniqueCustomers:Xs.size,profileViews:Us,menuViews:Ts,itemViews:Bs,shareClicks:Vs,whatsappShares:Vt,registeredViaLink:At,todayViews:qt,followersCount:qs})}catch(Z){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:",Z)}finally{i(!1),y(!1)}};a.useEffect(()=>{w()},[s==null?void 0:s.uid]);const U=()=>{y(!0),w()},B=T=>({pending:{label:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ",color:"bg-yellow-100 text-yellow-700",icon:Ye},accepted:{label:"ŸÖŸÇÿ®ŸàŸÑ",color:"bg-blue-100 text-blue-700",icon:De},preparing:{label:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",color:"bg-orange-100 text-orange-700",icon:mt},ready:{label:"ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿ™ŸàÿµŸäŸÑ",color:"bg-purple-100 text-purple-700",icon:Oe},out_for_delivery:{label:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",color:"bg-indigo-100 text-indigo-700",icon:Ue},delivered:{label:"ÿ™ŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ",color:"bg-green-100 text-green-700",icon:De},cancelled:{label:"ŸÖŸÑÿ∫Ÿä",color:"bg-red-100 text-red-700",icon:Cs}})[T]||{label:T,color:"bg-gray-100 text-gray-700",icon:Ye},Q=T=>{switch(T){case"gold":return{label:"ÿ∞Ÿáÿ®Ÿä",color:"from-yellow-400 to-amber-500",icon:"üëë"};case"silver":return{label:"ŸÅÿ∂Ÿä",color:"from-gray-300 to-gray-400",icon:"ü•à"};default:return{label:"ÿ®ÿ±ŸàŸÜÿ≤Ÿä",color:"from-orange-500 to-orange-600",icon:"ü•â"}}};if(n)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})});const O=(r==null?void 0:r.packageType)==="premium",C=Q(r==null?void 0:r.sellerTier),x=(()=>{var Z,G;if(!(r!=null&&r.packageExpiresAt))return null;const T=((G=(Z=r.packageExpiresAt)==null?void 0:Z.toDate)==null?void 0:G.call(Z))||new Date(r.packageExpiresAt),se=new Date,ye=T.getTime()-se.getTime();return Math.ceil(ye/(1e3*60*60*24))})(),z=x!==null&&x<=7&&x>0,R=x!==null&&x<=0,v=(()=>{const T=I.totalRevenue,se=I.deliveredOrders*3.75;return T-se})();return O?e.jsxs("div",{className:"space-y-6 pb-24 -mx-4 -mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-40 sm:h-48 bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-amber-500/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-500/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsx("button",{onClick:U,disabled:c,className:"absolute top-4 left-4 p-2 bg-white/10 hover:bg-white/20 rounded-xl transition z-10",children:e.jsx(qe,{className:`w-5 h-5 text-white ${c?"animate-spin":""}`})}),e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 px-4 py-1.5 rounded-full flex items-center gap-2 shadow-lg",children:[e.jsx(ss,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-white font-bold text-sm",children:"ÿ®ÿßŸÇÿ© ŸÖŸÖŸäÿ≤ÿ©"})]})})]}),e.jsx("div",{className:"relative px-4 -mt-16",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-5",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative -mt-12",children:[e.jsx("div",{className:"w-24 h-24 rounded-2xl bg-white shadow-xl overflow-hidden border-4 border-white",children:r!=null&&r.logoUrl?e.jsx("img",{src:r.logoUrl,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center",children:e.jsx(Ve,{className:"w-10 h-10 text-amber-500"})})}),(r==null?void 0:r.isVerified)&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white",children:e.jsx(De,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex-1 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:(r==null?void 0:r.name)||"ŸÖÿ™ÿ¨ÿ±Ÿä"}),e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold text-white bg-gradient-to-r ${C.color}`,children:[C.icon," ",C.label]})]}),(r==null?void 0:r.city)&&e.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-1 mt-1",children:[e.jsx(es,{className:"w-3 h-3"}),r.city]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ls,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),e.jsx("span",{className:"font-bold",children:I.averageRating.toFixed(1)})]}),e.jsx("div",{className:"text-gray-300",children:"|"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-bold text-gray-900",children:I.totalOrders})," ÿ∑ŸÑÿ®"]}),e.jsx("div",{className:"text-gray-300",children:"|"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-bold text-gray-900",children:I.menuItems})," ÿµŸÜŸÅ"]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 -mx-2 px-2",children:[e.jsxs(re,{to:`/menu?restaurant=${s==null?void 0:s.uid}`,className:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[e.jsx(Ls,{className:"w-4 h-4"}),"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑŸÖÿ™ÿ¨ÿ±"]}),e.jsxs(re,{to:"/owner/edit",className:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[e.jsx(ea,{className:"w-4 h-4"}),"ÿ™ÿπÿØŸäŸÑ"]}),e.jsxs(re,{to:"/owner/promotion",className:"flex items-center gap-2 bg-purple-100 hover:bg-purple-200 text-purple-700 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[e.jsx(Ks,{className:"w-4 h-4"}),"ÿ•ÿπŸÑÿßŸÜ ÿ¨ÿØŸäÿØ"]})]})]})})]}),e.jsxs("div",{className:"px-4 space-y-3",children:[(R||z)&&e.jsx(re,{to:"/owner/packages",className:`block rounded-2xl p-4 shadow-lg ${R?"bg-gradient-to-r from-red-600 to-red-500 text-white":"bg-gradient-to-r from-amber-500 to-orange-500 text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ss,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1",children:R?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-lg",children:"‚ö†Ô∏è ÿßŸÜÿ™Ÿáÿ™ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ!"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿ¨ÿØŸëÿØ ÿßŸÑÿ¢ŸÜ ŸÑŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑŸÖÿ≤ÿßŸäÿß"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-bold text-lg",children:["‚è∞ ÿ®ÿßŸÇŸä ",x," ŸäŸàŸÖ ÿπŸÑŸâ ÿßŸÜÿ™Ÿáÿßÿ° ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ"]}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿ¨ÿØŸëÿØ ŸÖÿ®ŸÉÿ±ÿßŸã Ÿàÿßÿ≥ÿ™ŸÖÿ™ÿπ ÿ®ÿßŸÑŸÖÿ≤ÿßŸäÿß"})]})}),e.jsx(Is,{className:"w-6 h-6"})]})}),(r==null?void 0:r.commercialLicenseUrl)&&r.licenseStatus!=="approved"&&e.jsx("div",{className:`rounded-2xl p-4 ${r.licenseStatus==="rejected"?"bg-red-50 border border-red-200":"bg-yellow-50 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r.licenseStatus==="rejected"?"bg-red-500":"bg-yellow-500"}`,children:e.jsx(ms,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:r.licenseStatus==="rejected"?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-red-700",children:"‚ùå ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ"}),e.jsx("p",{className:"text-sm text-red-600",children:r.licenseNotes||"Ÿäÿ±ÿ¨Ÿâ ÿ±ŸÅÿπ ÿ™ÿ±ÿÆŸäÿµ ÿµÿßŸÑÿ≠"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-yellow-700",children:"‚è≥ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ¥ÿπÿßÿ±ŸÉ ÿ®ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ŸÇÿ±Ÿäÿ®ÿßŸã"})]})}),r.licenseStatus==="rejected"&&e.jsx(re,{to:"/owner/edit",className:"text-red-600 text-sm font-bold underline",children:"ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ±ŸÅÿπ"})]})}),I.pendingOrders>0&&e.jsx(re,{to:"/owner/orders",className:"block bg-gradient-to-r from-red-500 to-orange-500 rounded-2xl p-4 text-white shadow-lg animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(dt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-lg",children:["üîî ",I.pendingOrders," ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ!"]}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿßÿ∂ÿ∫ÿ∑ ŸÑŸÑŸÇÿ®ŸàŸÑ ÿßŸÑÿ¢ŸÜ"})]}),e.jsx(Is,{className:"w-6 h-6"})]})}),!(r!=null&&r.bankName)&&e.jsx(re,{to:"/owner/edit#bank",className:"block bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center",children:e.jsx(ps,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-amber-700",children:"ÿ£ÿ∂ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä"}),e.jsx("p",{className:"text-sm text-amber-600",children:"ŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑÿßÿ™ ŸÖŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ°"})]})]})})]}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 via-pink-600 to-rose-500 rounded-2xl p-5 text-white shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white rounded-full translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(dr,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"üì¢ ÿßŸÜÿ¥ÿ±Ÿä ŸÖÿ™ÿ¨ÿ±ŸÉ!"})]}),e.jsx("p",{className:"text-white/80 text-sm mb-4",children:"ÿ¥ÿßÿ±ŸÉŸä ÿ±ÿßÿ®ÿ∑ ŸÖÿ™ÿ¨ÿ±ŸÉ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ° ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®ÿå ÿ™ŸàŸäÿ™ÿ±ÿå ÿßŸÜÿ≥ÿ™ŸÇÿ±ÿßŸÖ ÿ£Ÿà ÿ£Ÿä ŸÖŸÜÿµÿ©!"}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 mb-4",children:[e.jsx("p",{className:"text-white/60 text-xs mb-1",children:"ÿ±ÿßÿ®ÿ∑ ŸÖÿ™ÿ¨ÿ±ŸÉ ÿßŸÑÿÆÿßÿµ:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 bg-white/10 rounded-lg p-2 text-sm font-mono truncate",dir:"ltr",children:[window.location.origin,"/menu?restaurant=",s==null?void 0:s.uid]}),e.jsx("button",{onClick:L,className:`p-2 rounded-lg transition ${A?"bg-green-500":"bg-white/20 hover:bg-white/30"}`,children:A?e.jsx(De,{className:"w-5 h-5"}):e.jsx(wl,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:g,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl transition",children:[e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Ÿàÿßÿ™ÿ≥ÿßÿ®"]}),e.jsxs("button",{onClick:d,className:"flex-1 flex items-center justify-center gap-2 bg-white text-purple-600 font-bold py-3 rounded-xl hover:bg-purple-50 transition",children:[e.jsx(dr,{className:"w-5 h-5"}),"ŸÖÿ¥ÿßÿ±ŸÉÿ©"]}),e.jsxs(re,{to:`/menu?restaurant=${s==null?void 0:s.uid}`,className:"flex items-center justify-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-3 rounded-xl transition",children:[e.jsx(Ls,{className:"w-5 h-5"}),"ŸÖÿπÿßŸäŸÜÿ©"]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-2 mt-4 pt-4 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:I.followersCount}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ŸÖÿ™ÿßÿ®ÿπ üíú"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:I.todayViews}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ÿ≤Ÿäÿßÿ±ÿßÿ™ ÿßŸÑŸäŸàŸÖ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:I.profileViews}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ŸÖÿ¥ÿßŸáÿØÿ© ÿµŸÅÿ≠ÿ©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:I.whatsappShares}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ŸÖÿ¥ÿßÿ±ŸÉÿ© Ÿàÿßÿ™ÿ≥"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:I.registeredViaLink}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿπÿ®ÿ±ŸÉ"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 pt-2 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:I.uniqueCustomers}),e.jsx("p",{className:"text-white/70 text-xs",children:"ÿπŸÖŸäŸÑ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:I.totalViews}),e.jsx("p",{className:"text-white/70 text-xs",children:"ŸÖÿ¥ÿßŸáÿØÿ©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:I.totalOrders}),e.jsx("p",{className:"text-white/70 text-xs",children:"ÿ∑ŸÑÿ®"})]})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 via-fuchsia-600 to-pink-600 rounded-2xl p-5 text-white shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white rounded-full translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"üì∏ ÿ≥ÿ™Ÿàÿ±Ÿä ÿßŸÑÿ£ÿ≥ÿ±ÿ©"})]}),e.jsx(re,{to:"/owner/stories",className:"bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-lg text-sm font-bold transition",children:"+ ÿ£ÿ∂ŸÅ ÿ≥ÿ™Ÿàÿ±Ÿä"})]}),e.jsx("p",{className:"text-white/80 text-sm mb-4",children:"ÿ¥ÿßÿ±ŸÉŸä ŸÇÿµÿ™ŸÉ ŸÖÿπ ÿπŸÖŸÑÿßÿ¶ŸÉ! ÿµŸàÿ± ÿ£ŸÉŸÑÿßÿ™ŸÉÿå ŸÖÿ∑ÿ®ÿÆŸÉÿå Ÿàÿ£ÿ¨Ÿàÿßÿ° ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ± üç≥"}),E.length===0?e.jsxs(re,{to:"/owner/stories",className:"block bg-white/10 backdrop-blur rounded-xl p-6 text-center hover:bg-white/20 transition",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(vs,{className:"w-8 h-8"})}),e.jsx("p",{className:"font-bold",children:"ÿ£ÿ∂ŸäŸÅŸä ÿ£ŸàŸÑ ÿ≥ÿ™Ÿàÿ±Ÿä!"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"ÿßÿ¨ÿ∞ÿ®Ÿä ÿπŸÖŸÑÿßÿ° ÿ¨ÿØÿØ ÿ®ÿµŸàÿ± ŸÑÿ∞Ÿäÿ∞ÿ©"})]}):e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-2 px-2",children:[e.jsxs(re,{to:"/owner/stories",className:"flex-shrink-0 w-20 h-28 bg-white/20 rounded-xl flex flex-col items-center justify-center hover:bg-white/30 transition",children:[e.jsx("div",{className:"w-10 h-10 bg-white/30 rounded-full flex items-center justify-center mb-1",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs",children:"ÿ¨ÿØŸäÿØ"})]}),E.slice(0,4).map(T=>e.jsxs(re,{to:"/owner/stories",className:"flex-shrink-0 w-20 h-28 rounded-xl overflow-hidden relative group",children:[T.type==="text"?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",style:{backgroundColor:T.backgroundColor||"#0ea5e9"},children:e.jsx("p",{className:"text-[10px] text-center line-clamp-3",style:{color:T.textColor||"#fff"},children:T.caption})}):e.jsx("img",{src:T.mediaUrl,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute bottom-1 left-1 right-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx(Ls,{className:"w-3 h-3"}),T.viewsCount||0]})})]},T.id)),E.length>4&&e.jsxs(re,{to:"/owner/stories",className:"flex-shrink-0 w-20 h-28 bg-white/20 rounded-xl flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["+",E.length-4]}),e.jsx("span",{className:"text-xs",children:"ÿßŸÑŸÖÿ≤ŸäÿØ"})]})]}),E.length>0&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-4 pt-3 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:E.length}),e.jsx("p",{className:"text-white/70 text-xs",children:"ÿ≥ÿ™Ÿàÿ±Ÿä ŸÜÿ¥ÿ∑ÿ©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:E.reduce((T,se)=>T+(se.viewsCount||0),0)}),e.jsx("p",{className:"text-white/70 text-xs",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ¥ÿßŸáÿØÿßÿ™"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:"24 ÿ≥"}),e.jsx("p",{className:"text-white/70 text-xs",children:"ŸÖÿØÿ© ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä"})]})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-emerald-700 rounded-2xl p-5 text-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"üí∞ ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™"})]}),e.jsx(re,{to:"/owner/orders",className:"text-white/80 text-sm hover:text-white",children:"ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ‚Üê"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑŸäŸàŸÖ"}),e.jsxs("p",{className:"text-2xl font-bold",children:[I.todayRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[I.todayOrders," ÿ∑ŸÑÿ®"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ"}),e.jsxs("p",{className:"text-2xl font-bold",children:[I.weekRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[I.weekOrders," ÿ∑ŸÑÿ®"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ¥Ÿáÿ±"}),e.jsxs("p",{className:"text-2xl font-bold",children:[I.monthRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[I.monthOrders," ÿ∑ŸÑÿ®"]})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl p-4 ring-2 ring-white/30",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä"}),e.jsxs("p",{className:"text-2xl font-bold",children:[I.totalRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[I.deliveredOrders," ŸÖŸÉÿ™ŸÖŸÑ"]})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(xt,{className:"w-6 h-6 text-green-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"üìä ÿ™ŸÇÿ±Ÿäÿ± ÿµÿßŸÅŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[I.totalRevenue.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["(",I.deliveredOrders," ÿ∑ŸÑÿ® √ó 3.75 ÿ±.ÿ≥)"]})]}),e.jsxs("span",{className:"font-bold text-red-600",children:["- ",(I.deliveredOrders*3.75).toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl px-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx(cs,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-bold text-green-800",children:"ÿµÿßŸÅŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[v.toFixed(2)," ÿ±.ÿ≥"]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"ŸÜÿ≥ÿ®ÿ© ÿµÿßŸÅŸä ÿßŸÑÿ±ÿ®ÿ≠"}),e.jsxs("span",{className:`font-bold ${v>=0?"text-green-600":"text-red-600"}`,children:[I.totalRevenue>0?(v/I.totalRevenue*100).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full transition-all duration-500",style:{width:`${I.totalRevenue>0?Math.max(0,v/I.totalRevenue*100):0}%`}})})]})]})}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"‚ö° ÿ™ÿ≠ŸÉŸÖ ÿ≥ÿ±Ÿäÿπ"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(re,{to:"/owner/orders",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mb-3",children:e.jsx($a,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[I.pendingOrders," ÿ¨ÿØŸäÿØ"]}),e.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[I.preparingOrders," ÿ™ÿ≠ÿ∂Ÿäÿ±"]})]})]}),e.jsxs(re,{to:"/owner/menu",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center mb-3",children:e.jsx(Ws,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[I.availableItems," ŸÖÿ™ÿßÿ≠"]}),e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[I.menuItems," ÿ•ÿ¨ŸÖÿßŸÑŸä"]})]})]}),e.jsxs(re,{to:"/owner/promotion",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center mb-3",children:e.jsx(Ks,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"ÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[I.activePromotions," ŸÜÿ¥ÿ∑"]}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(Ls,{className:"w-3 h-3"}),I.totalViews]})]})]}),e.jsxs(re,{to:"/owner/edit",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-600 to-gray-700 rounded-xl flex items-center justify-center mb-3",children:e.jsx(sa,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™"}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ™ÿ¨ÿ±"})]})]})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"üìä ÿ≠ÿßŸÑÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs(re,{to:"/owner/orders?status=pending",className:"text-center p-3 bg-yellow-50 rounded-xl hover:bg-yellow-100 transition",children:[e.jsx(Ye,{className:"w-6 h-6 text-yellow-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-yellow-700",children:I.pendingOrders}),e.jsx("p",{className:"text-xs text-yellow-600",children:"ÿ¨ÿØŸäÿØ"})]}),e.jsxs(re,{to:"/owner/orders?status=preparing",className:"text-center p-3 bg-orange-50 rounded-xl hover:bg-orange-100 transition",children:[e.jsx(mt,{className:"w-6 h-6 text-orange-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-orange-700",children:I.preparingOrders}),e.jsx("p",{className:"text-xs text-orange-600",children:"ÿ™ÿ≠ÿ∂Ÿäÿ±"})]}),e.jsxs(re,{to:"/owner/orders?status=delivered",className:"text-center p-3 bg-green-50 rounded-xl hover:bg-green-100 transition",children:[e.jsx(De,{className:"w-6 h-6 text-green-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-green-700",children:I.deliveredOrders}),e.jsx("p",{className:"text-xs text-green-600",children:"ŸÖŸÉÿ™ŸÖŸÑ"})]}),e.jsxs(re,{to:"/owner/orders?status=cancelled",className:"text-center p-3 bg-red-50 rounded-xl hover:bg-red-100 transition",children:[e.jsx(Cs,{className:"w-6 h-6 text-red-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-red-700",children:I.cancelledOrders}),e.jsx("p",{className:"text-xs text-red-600",children:"ŸÖŸÑÿ∫Ÿä"})]})]})})]}),D.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"üèÜ ÿßŸÑÿ£ŸÉÿ´ÿ± ŸÖÿ®ŸäÿπÿßŸã"}),e.jsx(re,{to:"/owner/menu",className:"text-amber-600 text-sm font-semibold",children:"ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ ‚Üê"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:D.map((T,se)=>e.jsxs("div",{className:`flex items-center gap-3 p-4 ${se!==D.length-1?"border-b":""}`,children:[e.jsx("span",{className:"text-2xl w-8",children:se===0?"ü•á":se===1?"ü•à":se===2?"ü•â":`#${se+1}`}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-semibold text-gray-900",children:T.name})}),e.jsxs("div",{className:"bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-sm font-bold",children:[T.count," ŸÖÿ®Ÿäÿπÿßÿ™"]})]},se))})]}),h.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"üì¶ ÿ¢ÿÆÿ± ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx(re,{to:"/owner/orders",className:"text-blue-600 text-sm font-semibold",children:"ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ ‚Üê"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:h.map((T,se)=>{var G,K,me,oe;const ye=B(T.status),Z=ye.icon;return e.jsxs(re,{to:"/owner/orders",className:`flex items-center gap-3 p-4 hover:bg-gray-50 transition ${se!==h.length-1?"border-b":""}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${ye.color}`,children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[((G=T.items)==null?void 0:G.length)||0," ÿ£ÿµŸÜÿßŸÅ"]}),e.jsx("p",{className:"text-xs text-gray-500",children:((me=(K=T.createdAt)==null?void 0:K.toDate)==null?void 0:me.call(K).toLocaleDateString("ar-SA"))||""})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-green-600",children:[(oe=T.subtotal)==null?void 0:oe.toFixed(0)," ÿ±.ÿ≥"]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${ye.color}`,children:ye.label})]})]},T.id)})})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"üõ†Ô∏è ÿ£ÿØŸàÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs(re,{to:"/owner/edit#hiring",className:`flex items-center gap-3 bg-white rounded-2xl shadow p-4 border ${r!=null&&r.isHiring?"border-purple-300 bg-purple-50":"border-gray-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r!=null&&r.isHiring?"bg-purple-500":"bg-gray-200"}`,children:e.jsx(Ot,{className:`w-5 h-5 ${r!=null&&r.isHiring?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"ÿ™Ÿàÿ∏ŸäŸÅ ÿπÿßŸÖŸÑÿßÿ™"}),e.jsx("p",{className:"text-xs text-gray-500",children:r!=null&&r.isHiring?"‚úì ÿ•ÿπŸÑÿßŸÜ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ ŸÖŸÅÿπŸëŸÑ":"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿ∑ÿ®ÿÆ"})]})]}),e.jsxs(re,{to:"/owner/edit#bank",className:`flex items-center gap-3 bg-white rounded-2xl shadow p-4 border ${r!=null&&r.bankName?"border-green-300 bg-green-50":"border-gray-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r!=null&&r.bankName?"bg-green-500":"bg-gray-200"}`,children:e.jsx(ps,{className:`w-5 h-5 ${r!=null&&r.bankName?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"}),e.jsx("p",{className:"text-xs text-gray-500",children:r!=null&&r.bankName?`‚úì ${r.bankName}`:"ÿ£ÿ∂ŸÅ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ®"})]})]}),e.jsxs(re,{to:"/owner/packages",className:"flex items-center gap-3 bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl shadow p-4 border border-amber-200",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center",children:e.jsx(ss,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-amber-700",children:"ÿ®ÿßŸÇÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-amber-600",children:"üëë ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÖŸäÿ≤ÿ©"}),x!==null&&e.jsx("span",{className:`px-2 py-0.5 rounded-full ${R?"bg-red-100 text-red-600":z?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:R?"ŸÖŸÜÿ™ŸáŸäÿ©":`${x} ŸäŸàŸÖ`})]})]})]}),e.jsxs(re,{to:`/menu?restaurant=${s==null?void 0:s.uid}`,className:"flex items-center gap-3 bg-white rounded-2xl shadow p-4 border border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-500 rounded-xl flex items-center justify-center",children:e.jsx(zn,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑŸÖÿ™ÿ¨ÿ±"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿ¥ÿßŸáÿØ ŸÖÿ™ÿ¨ÿ±ŸÉ ŸÉŸÖÿß Ÿäÿ±ÿßŸá ÿßŸÑÿπŸÖŸÑÿßÿ°"})]})]})]})]}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Oe,{className:"w-5 h-5 text-amber-600"}),e.jsx("h3",{className:"font-bold text-amber-800",children:"üìã ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ŸÜŸàÿπ ÿßŸÑÿ®ÿßŸÇÿ©"}),e.jsxs("span",{className:"bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1",children:[e.jsx(ss,{className:"w-4 h-4"}),"ŸÖŸÖŸäÿ≤ÿ©"]})]}),(r==null?void 0:r.packageSubscribedAt)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ"}),e.jsx("span",{className:"text-gray-900 font-medium",children:((ce=(Y=(H=r.packageSubscribedAt)==null?void 0:H.toDate)==null?void 0:Y.call(H))==null?void 0:ce.toLocaleDateString("ar-SA"))||"-"})]}),(r==null?void 0:r.packageExpiresAt)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ°"}),e.jsx("span",{className:`font-medium ${R?"text-red-600":z?"text-yellow-600":"text-gray-900"}`,children:((ge=(je=(ie=r.packageExpiresAt)==null?void 0:ie.toDate)==null?void 0:je.call(ie))==null?void 0:ge.toLocaleDateString("ar-SA"))||"-"})]}),x!==null&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑÿ£ŸäÿßŸÖ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©"}),e.jsx("span",{className:`text-lg font-bold ${R?"text-red-600":z?"text-yellow-600":"text-green-600"}`,children:R?"ŸÖŸÜÿ™ŸáŸäÿ©":`${x} ŸäŸàŸÖ`})]})]}),(R||z)&&e.jsx(re,{to:"/owner/packages",className:"mt-4 block w-full text-center bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold py-3 rounded-xl hover:from-amber-600 hover:to-orange-600 transition",children:"üîÑ ÿ™ÿ¨ÿØŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿßŸÑÿ¢ŸÜ"})]})}),(r==null?void 0:r.bankName)&&e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ps,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-bold text-green-800",children:"‚úÖ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä ŸÖŸÅÿπŸëŸÑ"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"ÿßŸÑÿ®ŸÜŸÉ:"})," ",r.bankName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"ÿßÿ≥ŸÖ ÿßŸÑÿ≠ÿ≥ÿßÿ®:"})," ",r.bankAccountName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"ÿ±ŸÇŸÖ ÿßŸÑÿ¢Ÿäÿ®ÿßŸÜ:"})," ",r.bankAccountNumber]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"üí° Ÿäÿ∏Ÿáÿ± ŸÑŸÑÿπŸÖŸÑÿßÿ° ÿπŸÜÿØ ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ®ŸÜŸÉŸä"})]})})]}):e.jsxs("div",{className:"space-y-6 pb-20",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-50 rounded-2xl p-4 border-2 border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-xl flex items-center justify-center",children:e.jsx(Oe,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-700",children:"üì¶ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©"})]})]}),e.jsx(re,{to:"/owner/packages",className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-2 rounded-xl text-sm font-bold hover:shadow-lg transition",children:"ÿ™ÿ±ŸÇŸäÿ© ‚ú®"})]})}),r!=null&&r.commercialLicenseUrl?e.jsx("div",{className:`rounded-2xl p-4 border-2 ${r.licenseStatus==="approved"?"bg-green-50 border-green-200":r.licenseStatus==="rejected"?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${r.licenseStatus==="approved"?"bg-green-500":r.licenseStatus==="rejected"?"bg-red-500":"bg-yellow-500"}`,children:e.jsx(ms,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:`font-bold ${r.licenseStatus==="approved"?"text-green-700":r.licenseStatus==="rejected"?"text-red-700":"text-yellow-700"}`,children:[r.licenseStatus==="approved"&&"‚úÖ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ŸÖŸèÿπÿ™ŸÖÿØ",r.licenseStatus==="rejected"&&"‚ùå ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ŸÖÿ±ŸÅŸàÿ∂",(!r.licenseStatus||r.licenseStatus==="pending")&&"‚è≥ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"]}),r.licenseStatus==="rejected"&&r.licenseNotes&&e.jsx("p",{className:"text-sm text-red-600",children:r.licenseNotes})]}),r.licenseStatus==="rejected"&&e.jsx(re,{to:"/owner/edit",className:"text-red-600 text-sm font-bold underline",children:"ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ±ŸÅÿπ"})]})}):e.jsx(re,{to:"/owner/edit",className:"block bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200 rounded-2xl p-4 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ms,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-orange-700",children:"üìÑ ÿßÿ±ŸÅÿπ ÿ™ÿ±ÿÆŸäÿµŸÉ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä"}),e.jsx("p",{className:"text-sm text-orange-600",children:"ŸÑÿ™ŸÅÿπŸäŸÑ ŸÖÿ™ÿ¨ÿ±ŸÉ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ"})]})]})}),(r==null?void 0:r.points)&&e.jsxs("div",{className:`rounded-2xl p-4 border-2 ${r.points.isSuspended?"bg-red-50 border-red-300":r.points.currentPoints<xs.WARNING_THRESHOLD?"bg-amber-50 border-amber-300":"bg-sky-50 border-sky-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r.points.isSuspended?"bg-red-500":r.points.currentPoints<xs.WARNING_THRESHOLD?"bg-amber-500":"bg-sky-500"}`,children:e.jsx(ms,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:`font-bold ${r.points.isSuspended?"text-red-700":r.points.currentPoints<xs.WARNING_THRESHOLD?"text-amber-700":"text-sky-700"}`,children:r.points.isSuspended?"‚õî ÿ≠ÿ≥ÿßÿ®ŸÉ ŸÖŸàŸÇŸàŸÅ!":"üõ°Ô∏è ÿ±ÿµŸäÿØ ÿßŸÑŸÜŸÇÿßÿ∑"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`text-3xl font-bold ${r.points.isSuspended?"text-red-600":r.points.currentPoints<xs.WARNING_THRESHOLD?"text-amber-600":"text-sky-600"}`,children:r.points.currentPoints}),e.jsxs("div",{className:"text-sm text-gray-500",children:["/ ",xs.STARTING_POINTS," ŸÜŸÇÿ∑ÿ©"]})]}),e.jsx("div",{className:"flex-1 max-w-[150px] mr-4",children:e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${r.points.isSuspended?"bg-red-500":r.points.currentPoints<xs.WARNING_THRESHOLD?"bg-amber-500":"bg-sky-500"}`,style:{width:`${Math.min(100,r.points.currentPoints)}%`}})})})]}),r.points.isSuspended&&e.jsxs("div",{className:"mt-3 bg-red-100 rounded-xl p-3",children:[e.jsx("p",{className:"text-sm text-red-700",children:"‚õî ÿ≠ÿ≥ÿßÿ®ŸÉ ŸÖŸàŸÇŸàŸÅ ÿ®ÿ≥ÿ®ÿ® ÿßŸÜÿÆŸÅÿßÿ∂ ÿßŸÑŸÜŸÇÿßÿ∑. ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä ŸÑÿ•ÿπÿßÿØÿ© ÿ™ŸÅÿπŸäŸÑŸá."}),e.jsx(re,{to:"/support",className:"inline-block mt-2 text-red-600 font-bold underline text-sm",children:"ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ‚Üê"})]}),!r.points.isSuspended&&r.points.currentPoints<xs.WARNING_THRESHOLD&&e.jsx("div",{className:"mt-3 bg-amber-100 rounded-xl p-3",children:e.jsx("p",{className:"text-sm text-amber-700",children:"‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá: ŸÜŸÇÿßÿ∑ŸÉ ŸÖŸÜÿÆŸÅÿ∂ÿ©! ÿ≠ÿßŸÅÿ∏ ÿπŸÑŸâ ÿ¨ŸàÿØÿ© ÿßŸÑÿÆÿØŸÖÿ© ŸÑÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ•ŸäŸÇÿßŸÅ."})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-4 border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx(cs,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"font-bold text-green-700",children:"üí∞ ŸÖŸÑÿÆÿµ ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:I.totalRevenue.toFixed(0)}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™ (ÿ±.ÿ≥)"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:v.toFixed(0)}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿµÿßŸÅŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠ (ÿ±.ÿ≥)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"* ÿ®ÿπÿØ ÿÆÿµŸÖ ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ© (3.75 ÿ±.ÿ≥ ŸÑŸÉŸÑ ÿ∑ŸÑÿ®)"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 rounded-3xl shadow-2xl p-6 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white rounded-full -translate-y-1/2 translate-x-1/2"})}),e.jsxs("div",{className:"relative z-10 text-center py-6",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ss,{className:"w-10 h-10 text-yellow-300"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"üåü ÿßÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÖŸäÿ≤ÿ©"}),e.jsx("p",{className:"text-white/80 mb-4",children:"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ŸÖÿπ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÖŸÅÿµŸëŸÑÿ© ŸàŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ©!"}),e.jsxs(re,{to:"/owner/packages",className:"inline-flex items-center gap-2 bg-white text-amber-600 font-bold px-6 py-3 rounded-xl hover:bg-yellow-50 transition shadow-lg",children:[e.jsx(ds,{className:"w-5 h-5"}),"ÿßŸÉÿ™ÿ¥ŸÅ ÿßŸÑÿ®ÿßŸÇÿßÿ™ ÿßŸÑÿ¢ŸÜ"]})]})]}),!(r!=null&&r.bankName)&&e.jsx(re,{to:"/owner/edit#bank",className:"block bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-2xl p-4 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ps,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-red-700",children:"‚ö†Ô∏è ÿ£ÿ∂ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä!"}),e.jsx("p",{className:"text-sm text-red-600",children:"ŸÑÿ™ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑÿßÿ™ ŸÖŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ°"})]})]})}),I.pendingOrders>0&&e.jsx(re,{to:"/owner/orders",className:"block bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-2xl p-4 hover:shadow-lg transition animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(us,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-yellow-700",children:["üîî ŸÑÿØŸäŸÉ ",I.pendingOrders," ÿ∑ŸÑÿ® ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ!"]}),e.jsx("p",{className:"text-sm text-yellow-600",children:"ÿßÿ∂ÿ∫ÿ∑ ŸÑŸÑÿ∞Ÿáÿßÿ® ÿ•ŸÑŸâ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(re,{to:"/owner/packages",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-5 ring-2 ring-amber-300 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 py-1.5 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white text-sm font-bold",children:[e.jsx(ds,{className:"w-4 h-4"}),e.jsx("span",{children:"ÿßŸÉÿ™ÿ¥ŸÅ ÿßŸÑÿ®ÿßŸÇÿßÿ™"}),e.jsx(ds,{className:"w-4 h-4"})]})}),e.jsx("div",{className:"h-6"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ss,{className:"w-8 h-8 text-amber-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿ®ÿßŸÇÿßÿ™ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ©!"})]}),e.jsxs(re,{to:"/owner/menu",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-yellow-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ws,{className:"w-8 h-8 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ•ÿ∂ÿßŸÅÿ© Ÿàÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ£ÿµŸÜÿßŸÅ ŸàÿßŸÑŸàÿ¨ÿ®ÿßÿ™."})]}),e.jsxs(re,{to:"/owner/orders",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-green-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx($a,{className:"w-8 h-8 text-green-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ŸÇÿ®ŸàŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ Ÿàÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÖŸÜÿØŸàÿ®."}),I.pendingOrders>0&&e.jsxs("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold mt-2 inline-block",children:[I.pendingOrders," ÿ¨ÿØŸäÿØ!"]})]}),e.jsxs(re,{to:"/owner/edit",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-blue-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(sa,{className:"w-8 h-8 text-blue-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ™ÿ¨ÿ±."})]}),e.jsxs(re,{to:"/owner/wallet",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-emerald-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(cs,{className:"w-8 h-8 text-emerald-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ŸÖÿ≠ŸÅÿ∏ÿ™Ÿä"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™ ŸàÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠."})]}),e.jsxs(re,{to:"/owner/offers",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-pink-50 to-white p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -left-1 bg-gradient-to-r from-pink-500 to-red-500 text-white text-xs font-bold px-3 py-1 rounded-br-xl",children:"ÿ¨ÿØŸäÿØ ‚ú®"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Es,{className:"w-8 h-8 text-pink-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑÿÆÿßÿµÿ©"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ£ÿ∂ŸÅ ÿÆÿµŸàŸÖÿßÿ™ Ÿàÿπÿ±Ÿàÿ∂ ŸÑÿ¨ÿ∞ÿ® ÿßŸÑÿπŸÖŸÑÿßÿ°."})]}),Lt()&&e.jsxs(re,{to:"/owner/offers?type=ramadan",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-purple-900 via-purple-800 to-emerald-900 p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -left-1 bg-gradient-to-r from-amber-400 to-amber-500 text-purple-900 text-xs font-bold px-3 py-1 rounded-br-xl",children:"üåô ÿ±ŸÖÿ∂ÿßŸÜ"}),e.jsx("div",{className:"absolute top-2 right-2 text-2xl animate-pulse",children:"üåô"}),e.jsx("div",{className:"absolute bottom-2 left-2 text-xl opacity-50",children:"‚ú®"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:"üèòÔ∏è"}),e.jsx("h3",{className:"text-lg font-extrabold text-white",children:"ÿπÿ±Ÿàÿ∂ ÿ±ŸÖÿ∂ÿßŸÜ"})]}),e.jsx("p",{className:"text-sm text-purple-200",children:"ÿ£ÿ∂ŸÅ ÿ®ÿßŸÇÿßÿ™ ÿ•ŸÅÿ∑ÿßÿ± Ÿàÿ≥ÿ≠Ÿàÿ± Ÿàÿπÿ±Ÿàÿ∂ ÿÆÿßÿµÿ©"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("span",{className:"bg-amber-400/20 text-amber-300 text-xs px-2 py-1 rounded-full",children:"ÿ®ÿßŸÇÿ© ÿ•ŸÅÿ∑ÿßÿ±"}),e.jsx("span",{className:"bg-purple-400/20 text-purple-300 text-xs px-2 py-1 rounded-full",children:"ÿ®ÿßŸÇÿ© ÿ≥ÿ≠Ÿàÿ±"}),e.jsx("span",{className:"bg-emerald-400/20 text-emerald-300 text-xs px-2 py-1 rounded-full",children:"ÿπÿ±ÿ∂ ÿπÿßÿ¶ŸÑŸä"})]})]}),e.jsxs(re,{to:"/owner/stories",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-purple-50 to-white p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -left-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-3 py-1 rounded-br-xl",children:"ÿ¨ÿØŸäÿØ ‚ú®"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ut,{className:"w-8 h-8 text-purple-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿ≥ÿ™Ÿàÿ±Ÿä ÿßŸÑÿ£ÿ≥ÿ±ÿ©"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ¥ÿßÿ±ŸÉ ÿ∑ÿ®ÿÆ ÿßŸÑŸäŸàŸÖ Ÿàÿπÿ±Ÿàÿ∂ŸÉ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ°."})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ss,{className:"w-6 h-6 text-amber-400"}),e.jsx("h3",{className:"text-lg font-bold",children:"üöÄ ŸÖÿ≤ÿßŸäÿß ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÖŸäÿ≤ÿ©"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(ct,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÖÿßŸÑŸäÿ© ŸÖŸÅÿµŸëŸÑÿ©"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(ls,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{children:"ÿ£ŸÉÿ´ÿ± ÿßŸÑÿ£ÿµŸÜÿßŸÅ ŸÖÿ®ŸäÿπÿßŸã"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(Ks,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{children:"ÿ•ÿπŸÑÿßŸÜÿßÿ™ ŸÖŸÖŸàŸÑÿ© ŸÖÿ¨ÿßŸÜŸäÿ©"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(ms,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{children:"ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©"})]})]}),e.jsx(re,{to:"/owner/packages",className:"block w-full text-center bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold py-3 rounded-xl hover:from-amber-600 hover:to-orange-600 transition",children:"üöÄ ÿßÿ¥ÿ™ÿ±ŸÉ ÿßŸÑÿ¢ŸÜ"})]})]})},Nc=({kind:s,message:t,onClose:n})=>{const i=s==="success"?"bg-green-600":s==="error"?"bg-rose-600":s==="warning"?"bg-amber-500":"bg-slate-800";return a.useEffect(()=>{const c=setTimeout(n,2500);return()=>clearTimeout(c)},[n]),e.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${i}`,children:t})},ua=()=>({name:"",desc:"",price:0,available:!0,file:null,discountPercent:0,discountExpiresAt:""});async function cl(s,t=900,n=.8){try{const i=await createImageBitmap(s),c=Math.min(1,t/i.width),y=Math.round(i.width*c),r=Math.round(i.height*c),k=document.createElement("canvas");k.width=y,k.height=r,k.getContext("2d").drawImage(i,0,0,y,r);const M=s.type.includes("png")?"image/png":"image/jpeg";return await new Promise(N=>k.toBlob(A=>N(A),M,n))}catch{return s}}const wc=()=>{const{user:s}=$e(),t=Ds(),[n,i]=a.useState([]),[c,y]=a.useState(!0),[r,k]=a.useState(ua()),[$,M]=a.useState(!1),[I,N]=a.useState(null),[A,p]=a.useState(ua()),[f,_]=a.useState(!1),m=a.useRef(null),[j,L]=a.useState(null),g=(B,Q)=>L({kind:B,message:Q}),d=na(Ns),h=a.useRef(null),F=async()=>{if(!s)return;y(!0);const B=pe(te(S,"menuItems"),be("ownerId","==",s.uid)),Q=await ue(B);i(Q.docs.map(O=>({id:O.id,...O.data()}))),y(!1)};a.useEffect(()=>{F()},[s]);const D=async B=>{if(B.preventDefault(),!s){g("warning","‚ö†Ô∏è ŸÑÿßÿ≤ŸÖ ÿ™ÿ≥ÿ¨ŸÑ ÿØÿÆŸàŸÑ ÿ£ŸàŸÑ");return}const Q=Number(r.price||0);if(!r.name.trim()){g("warning","‚ö†Ô∏è ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖ ÿßŸÑÿµŸÜŸÅ");return}if(!Number.isFinite(Q)||Q<=0){g("warning","‚ö†Ô∏è ÿ£ÿØÿÆŸÑ ÿ≥ÿπÿ± ÿµÿßŸÑÿ≠");return}M(!0);const O="temp_"+Date.now(),C=r.file?URL.createObjectURL(r.file):void 0,P={_tempId:O,_optimistic:!0,_progress:r.file?1:100,name:r.name,desc:r.desc||"",price:Q,imageUrl:C,available:r.available??!0,ownerId:s.uid};i(x=>[P,...x]);try{let x;if(r.file){const u=await cl(r.file),v=r.file.name.replace(/\s+/g,"_").slice(-60),H=`menuImages/${s.uid}_${Date.now()}_${v}`,Y=js(d,H),ce=kt(Y,u,{contentType:r.file.type||"image/jpeg"});await new Promise((ie,je)=>{ce.on("state_changed",ge=>{const T=Math.round(ge.bytesTransferred/ge.totalBytes*100);i(se=>se.map(ye=>ye._tempId===O?{...ye,_progress:T}:ye))},je,async()=>{const ge=await ys(ce.snapshot.ref);x=`${ge}${ge.includes("?")?"&":"?"}v=${Date.now()}`,ie()})})}const z={name:P.name,desc:P.desc,price:Q,imageUrl:x||"",available:P.available,ownerId:s.uid,...P.categoryId?{categoryId:P.categoryId}:{},...r.discountPercent&&r.discountPercent>0?{discountPercent:r.discountPercent}:{},...r.discountExpiresAt?{discountExpiresAt:new Date(r.discountExpiresAt)}:{}},R=await Fe(te(S,"menuItems"),z);i(u=>u.map(v=>v._tempId===O?{...v,id:R.id,imageUrl:x||v.imageUrl,_optimistic:!1,_progress:100}:v)),g("success","‚úÖ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿµŸÜŸÅ ÿ®ŸÜÿ¨ÿßÿ≠")}catch(x){i(z=>z.filter(R=>R._tempId!==O)),g("error",`‚ùå ŸÅÿ¥ŸÑ ÿ≠ŸÅÿ∏ ÿßŸÑÿµŸÜŸÅ: ${(x==null?void 0:x.message)||x}`)}finally{M(!1),k(ua()),h.current&&(h.current.value=""),C&&URL.revokeObjectURL(C)}},b=async(B,Q)=>{if(B){i(O=>O.map(C=>C.id===B?{...C,available:!Q}:C));try{await xe(X(S,"menuItems",B),{available:!Q}),g("success","ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿßŸÑÿ©")}catch{i(O=>O.map(C=>C.id===B?{...C,available:!!Q}:C)),g("error","ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±. ÿ£ÿπÿØ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©.")}}},E=async B=>{if(!B||!await t.confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿµŸÜŸÅ ŸÜŸáÿßÿ¶ŸäŸãÿßÿü",{dangerous:!0,title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿµŸÜŸÅ"}))return;const O=n;i(C=>C.filter(P=>P.id!==B));try{await Ss(X(S,"menuItems",B)),g("success","ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ")}catch{i(O),g("error","ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ. ÿ£ÿπÿØ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©.")}},o=B=>{N(B.id||null),p({...B,file:null})},w=()=>{N(null),p(ua()),m.current&&(m.current.value="")},U=async B=>{if(B.preventDefault(),!s||!I)return;const Q=Number(A.price||0);if(!A.name.trim()){g("warning","‚ö†Ô∏è ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖ ÿßŸÑÿµŸÜŸÅ");return}if(!Number.isFinite(Q)||Q<=0){g("warning","‚ö†Ô∏è ÿ£ÿØÿÆŸÑ ÿ≥ÿπÿ± ÿµÿßŸÑÿ≠");return}_(!0);const O=n;i(C=>C.map(P=>P.id===I?{...P,name:A.name,desc:A.desc,price:Q,available:A.available}:P));try{let C=A.imageUrl;if(A.file){const P=await cl(A.file),x=A.file.name.replace(/\s+/g,"_").slice(-60),z=`menuImages/${s.uid}_${Date.now()}_${x}`,R=js(d,z),u=kt(R,P,{contentType:A.file.type||"image/jpeg"});await new Promise((v,H)=>{u.on("state_changed",null,H,async()=>{const Y=await ys(u.snapshot.ref);C=`${Y}${Y.includes("?")?"&":"?"}v=${Date.now()}`,v()})})}await xe(X(S,"menuItems",I),{name:A.name,desc:A.desc||"",price:Q,available:A.available,...C?{imageUrl:C}:{},discountPercent:A.discountPercent||0,...A.discountExpiresAt?{discountExpiresAt:new Date(A.discountExpiresAt)}:{discountExpiresAt:null}}),C&&i(P=>P.map(x=>x.id===I?{...x,imageUrl:C}:x)),g("success","‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿµŸÜŸÅ ÿ®ŸÜÿ¨ÿßÿ≠"),w()}catch(C){i(O),g("error",`‚ùå ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´: ${(C==null?void 0:C.message)||C}`)}finally{_(!1)}};return c?e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[e.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(B=>e.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},B))})]}):e.jsxs(e.Fragment,{children:[j&&e.jsx(Nc,{kind:j.kind,message:j.message,onClose:()=>L(null)}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("form",{onSubmit:D,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[e.jsx("h2",{className:"text-lg font-bold",children:"ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÜŸÅ"}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑÿµŸÜŸÅ",value:r.name,onChange:B=>k({...r,name:B.target.value})}),e.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:"ÿßŸÑŸàÿµŸÅ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)",value:r.desc,onChange:B=>k({...r,desc:B.target.value})}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ÿßŸÑÿ≥ÿπÿ±",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(r.price)?r.price:0,onChange:B=>k({...r,price:Number(B.target.value)})}),e.jsxs("div",{className:"border border-dashed border-amber-300 rounded-xl p-4 bg-amber-50/50 space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold text-amber-700 flex items-center gap-2",children:"üè∑Ô∏è ÿ•ÿ∂ÿßŸÅÿ© ÿÆÿµŸÖ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿÆÿµŸÖ %"}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ŸÖÿ´ÿßŸÑ: 20",type:"number",min:0,max:100,value:r.discountPercent||"",onChange:B=>k({...r,discountPercent:Number(B.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"ŸäŸÜÿ™ŸáŸä ŸÅŸä"}),e.jsx("input",{className:"w-full border rounded-xl p-3",type:"date",value:r.discountExpiresAt?typeof r.discountExpiresAt=="string"?r.discountExpiresAt:new Date(r.discountExpiresAt).toISOString().split("T")[0]:"",onChange:B=>k({...r,discountExpiresAt:B.target.value})})]})]}),r.discountPercent&&r.discountPercent>0&&e.jsxs("div",{className:"text-sm bg-green-100 text-green-700 p-2 rounded-lg",children:["ÿßŸÑÿ≥ÿπÿ± ÿ®ÿπÿØ ÿßŸÑÿÆÿµŸÖ: ",e.jsxs("strong",{children:[(r.price-r.price*(r.discountPercent/100)).toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"line-through text-gray-400 mr-2",children:[r.price.toFixed(2)," ÿ±.ÿ≥"]})]})]}),e.jsx("input",{ref:h,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:B=>{var Q;return k({...r,file:((Q=B.target.files)==null?void 0:Q[0])||null})}}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:r.available,onChange:B=>k({...r,available:B.target.checked})}),"ŸÖÿ™ÿßÿ≠"]}),e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:$,children:$?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏‚Ä¶":"ÿ≠ŸÅÿ∏"})]}),e.jsxs("div",{className:"space-y-3",children:[n.map(B=>e.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:I===B.id?e.jsxs("form",{onSubmit:U,className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("img",{src:A.file?URL.createObjectURL(A.file):A.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:Q=>{Q.currentTarget.style.display="none"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸàÿ±ÿ©"}),e.jsx("input",{ref:m,type:"file",accept:"image/*",className:"w-full text-sm border rounded-lg p-2",onChange:Q=>{var O;return p({...A,file:((O=Q.target.files)==null?void 0:O[0])||null})}})]})]}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑÿµŸÜŸÅ",value:A.name,onChange:Q=>p({...A,name:Q.target.value})}),e.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:"ÿßŸÑŸàÿµŸÅ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)",value:A.desc||"",onChange:Q=>p({...A,desc:Q.target.value})}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ÿßŸÑÿ≥ÿπÿ±",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(A.price)?A.price:0,onChange:Q=>p({...A,price:Number(Q.target.value)})}),e.jsxs("div",{className:"border border-dashed border-amber-300 rounded-xl p-4 bg-amber-50/50 space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold text-amber-700 flex items-center gap-2",children:"üè∑Ô∏è ÿßŸÑÿÆÿµŸÖ"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿÆÿµŸÖ %"}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ŸÖÿ´ÿßŸÑ: 20",type:"number",min:0,max:100,value:A.discountPercent||"",onChange:Q=>p({...A,discountPercent:Number(Q.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"ŸäŸÜÿ™ŸáŸä ŸÅŸä"}),e.jsx("input",{className:"w-full border rounded-xl p-3",type:"date",value:A.discountExpiresAt?typeof A.discountExpiresAt=="string"?A.discountExpiresAt:new Date(A.discountExpiresAt).toISOString().split("T")[0]:"",onChange:Q=>p({...A,discountExpiresAt:Q.target.value})})]})]}),A.discountPercent&&A.discountPercent>0&&e.jsxs("div",{className:"text-sm bg-green-100 text-green-700 p-2 rounded-lg",children:["ÿßŸÑÿ≥ÿπÿ± ÿ®ÿπÿØ ÿßŸÑÿÆÿµŸÖ: ",e.jsxs("strong",{children:[(A.price-A.price*(A.discountPercent/100)).toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"line-through text-gray-400 mr-2",children:[A.price.toFixed(2)," ÿ±.ÿ≥"]})]}),A.discountPercent&&A.discountPercent>0&&e.jsx("button",{type:"button",onClick:()=>p({...A,discountPercent:0,discountExpiresAt:""}),className:"text-xs text-red-500 hover:text-red-700",children:"‚ùå ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿÆÿµŸÖ"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:A.available,onChange:Q=>p({...A,available:Q.target.checked})}),"ŸÖÿ™ÿßÿ≠"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-2 rounded-xl bg-green-600 text-white disabled:opacity-60",children:f?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏‚Ä¶":"üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™"}),e.jsx("button",{type:"button",onClick:w,disabled:f,className:"px-4 py-2 rounded-xl bg-gray-400 text-white disabled:opacity-60",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}):e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:B.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:Q=>{Q.currentTarget.style.display="none"}}),B._optimistic&&e.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:e.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${B._progress||1}%`}})})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold",children:B.name}),B.desc&&e.jsx("div",{className:"text-sm text-gray-600",children:B.desc}),(()=>{var P,x,z,R,u,v;const Q=B.discountPercent&&B.discountPercent>0,O=((x=(P=B.discountExpiresAt)==null?void 0:P.toDate)==null?void 0:x.call(P))||(B.discountExpiresAt?new Date(B.discountExpiresAt):null),C=!O||O>new Date;return Q&&C?e.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"font-bold text-green-600",children:[(B.price-B.price*((B.discountPercent||0)/100)).toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"text-sm text-gray-400 line-through",children:[(R=(z=B.price)==null?void 0:z.toFixed)==null?void 0:R.call(z,2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:["ÿÆÿµŸÖ ",B.discountPercent,"%"]})]}):e.jsxs("div",{className:"font-semibold mt-1",children:[(v=(u=B.price)==null?void 0:u.toFixed)==null?void 0:v.call(u,2)," ÿ±.ÿ≥"]})})(),B._optimistic&&e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"Ÿäÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏‚Ä¶"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{onClick:()=>o(B),disabled:!!B._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-amber-500 text-white disabled:opacity-50",children:"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ"}),e.jsx("button",{onClick:()=>b(B.id,B.available),disabled:!!B._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:B.available?"ÿ™ÿπÿ∑ŸäŸÑ":"ÿ™ŸÅÿπŸäŸÑ"}),e.jsx("button",{onClick:()=>E(B.id),disabled:!!B._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:"ÿ≠ÿ∞ŸÅ"})]})]})},B.id||B._tempId)),n.length===0&&e.jsx("div",{className:"text-gray-600",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿµŸÜÿßŸÅ ÿ®ÿπÿØ."})]})]})]})},ol=s=>({pending:"‚è≥ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",accepted:"‚úÖ ÿ™ŸÖ ÿßŸÑŸÇÿ®ŸàŸÑ",preparing:"üë®‚Äçüç≥ ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",ready:"üì¶ ÿ¨ÿßŸáÿ≤",out_for_delivery:"üöö ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",delivered:"üéâ ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",cancelled:"‚ùå ŸÖŸÑÿ∫Ÿä"})[s]||s,vc=s=>{switch(s){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},kc=()=>{const{user:s}=$e(),t=gs(),n=Qe(),[i,c]=a.useState([]),[y,r]=a.useState(null),[k,$]=a.useState({}),[M,I]=a.useState(null),[N,A]=a.useState(null);a.useRef(null);const p=a.useMemo(()=>(s==null?void 0:s.uid)??null,[s]);a.useEffect(()=>{if(!p)return;r(null);const g=As(te(S,"orders"),d=>{const F=d.docs.map(D=>({id:D.id,...D.data()})).filter(D=>{var o,w;const b=D.restaurantId===p,E=((w=(o=D==null?void 0:D.items)==null?void 0:o[0])==null?void 0:w.ownerId)===p;return b||E});F.sort((D,b)=>{var w,U,B,Q;const E=((U=(w=D.createdAt)==null?void 0:w.toMillis)==null?void 0:U.call(w))??0;return(((Q=(B=b.createdAt)==null?void 0:B.toMillis)==null?void 0:Q.call(B))??0)-E}),c(F),r(null)},d=>{console.error("Firestore error:",d),r("ÿ≠ÿØÿ´ÿ™ ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™.")});return()=>g()},[p]);const f=async(g,d,h)=>{const F={status:d,updatedAt:J()};if(d==="accepted"&&(h==null?void 0:h.deliveryType)==="delivery"){const D=k[g]||0;F.deliveryFee=D,F.total=(h.subtotal||0)+D}if(d==="cancelled"&&(F.cancelledAt=J(),F.cancelledBy="owner"),await xe(X(S,"orders",g),F),d==="cancelled"&&h){try{const{processOrderRefund:D,notifyRefundParties:b}=await et(async()=>{const{processOrderRefund:o,notifyRefundParties:w}=await import("./refundService-DmZcahjw.js");return{processOrderRefund:o,notifyRefundParties:w}},__vite__mapDeps([0,1,2,3,4])),E=await D({id:h.id||g,customerId:h.customerId,restaurantId:h.restaurantId||p||"",subtotal:h.subtotal,total:h.total,restaurantEarnings:h.restaurantEarnings,platformFee:h.platformFee,adminCommission:h.adminCommission,appEarnings:h.appEarnings,referredBy:h.referredBy,paymentMethod:h.paymentMethod});await b({id:h.id||g,customerId:h.customerId,restaurantId:h.restaurantId||p||"",subtotal:h.subtotal,total:h.total},E,"owner"),E.success&&n.success("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ® Ÿàÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ‚úÖ")}catch(D){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä:",D),n.warning("ÿ™ŸÖ ÿßŸÑÿ•ŸÑÿ∫ÿßÿ° ŸÑŸÉŸÜ ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä")}return}try{const{notifyOrderAccepted:D,notifyOrderPreparing:b,notifyOrderReady:E,notifyCourierOrderReady:o}=await et(async()=>{const{notifyOrderAccepted:B,notifyOrderPreparing:Q,notifyOrderReady:O,notifyCourierOrderReady:C}=await Promise.resolve().then(()=>ql);return{notifyOrderAccepted:B,notifyOrderPreparing:Q,notifyOrderReady:O,notifyCourierOrderReady:C}},void 0),w=h==null?void 0:h.customerId,U=(h==null?void 0:h.restaurantName)||"ÿßŸÑŸÖÿ∑ÿπŸÖ";if(w){if(d==="accepted")await D(w,g,U);else if(d==="preparing")await b(w,g,U);else if(d==="ready"&&(await E(w,g,U,(h==null?void 0:h.deliveryType)||"delivery"),(h==null?void 0:h.deliveryType)==="delivery"&&p)){const{collection:B,query:Q,where:O,getDocs:C}=await et(async()=>{const{collection:R,query:u,where:v,getDocs:H}=await import("./vendor-firebase-DPNhE71o.js").then(Y=>Y.M);return{collection:R,query:u,where:v,getDocs:H}},[]),P=Q(B(S,"hiringRequests"),O("restaurantId","==",p),O("status","==","accepted")),x=await C(P),z=(h==null?void 0:h.address)||"ÿßŸÑÿπŸÖŸäŸÑ";for(const R of x.docs){const u=R.data().courierId;u&&await o(u,g,U,z)}}}}catch(D){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±:",D)}},_=async(g,d)=>{const h={stars:d.stars,comment:d.comment||void 0,createdAt:new Date};await xe(X(S,"orders",g),{"ratings.restaurantToCustomer":h,updatedAt:J()}),n.success("ÿ™ŸÖ ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿπŸÖŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠! ‚≠ê")},m=g=>{var d,h;return g.status==="delivered"&&!((h=(d=g.ratings)==null?void 0:d.restaurantToCustomer)!=null&&h.stars)},j=async(g,d)=>{if(d){A(g);try{const h=js(gt,`orders/${g}/ready_${Date.now()}.jpg`);await ot(h,d);const F=await ys(h);await xe(X(S,"orders",g),{readyPhotoUrl:F,readyPhotoAt:J(),updatedAt:J()}),n.success("ÿ™ŸÖ ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠! üì∏")}catch(h){console.error("Error uploading photo:",h),n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©")}finally{A(null)}}},L=(g,d)=>{var F;const h=(F=d.target.files)==null?void 0:F[0];h&&j(g,h)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"üìã ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),M&&e.jsx(Cr,{isOpen:M.isOpen,onClose:()=>I(null),onSubmit:async g=>{await _(M.orderId,g),I(null)},type:"customer",targetName:M.customerName,orderId:M.orderId}),y&&e.jsx("div",{className:"text-red-500 text-sm mb-2",children:y}),i.map(g=>{var d,h,F,D,b,E,o;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"font-bold text-lg",children:["ÿ∑ŸÑÿ® #",g.id.slice(-6),e.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(d=g.items)==null?void 0:d.map(w=>`${w.name}√ó${w.qty}`).join(" ‚Ä¢ ")})]}),e.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(F=(h=g.total)==null?void 0:h.toFixed)==null?void 0:F.call(h,2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"ÿßŸÑÿ≠ÿßŸÑÿ©:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${vc(g.status)}`,children:ol(g.status||"pending")})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ:"})," ",g.address]}),g.location&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"üìç ŸÖŸàŸÇÿπ ÿßŸÑÿπŸÖŸäŸÑ:"}),e.jsx("iframe",{title:`map-${g.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${g.location.lat},${g.location.lng}&hl=ar&z=15&output=embed`})]}),g.status==="pending"&&g.deliveryType==="delivery"&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-800 mb-2",children:"üíµ ÿ≠ÿØÿØ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÇÿ®ŸÑ ÿßŸÑŸÇÿ®ŸàŸÑ:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:"ŸÖÿ´ÿßŸÑ: 10",value:k[g.id]||"",onChange:w=>$(U=>({...U,[g.id]:parseFloat(w.target.value)||0})),className:"flex-1 px-4 py-3 border-2 border-amber-300 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-lg font-bold text-center"}),e.jsx("span",{className:"text-amber-700 font-bold",children:"ÿ±.ÿ≥"})]}),e.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ™Ÿáÿß ŸÑŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ÿπŸÜÿØ ŸÇÿ®ŸàŸÑ ÿßŸÑÿ∑ŸÑÿ®"})]}),g.deliveryFee!==void 0&&g.deliveryFee>0&&e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ:"})," ",(b=(D=g.deliveryFee)==null?void 0:D.toFixed)==null?void 0:b.call(D,2)," ÿ±.ÿ≥"]}),["preparing","ready"].includes(g.status)&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ut,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-bold text-purple-800",children:"üì∏ ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ¨ÿßŸáÿ≤"})]}),g.readyPhotoUrl?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:g.readyPhotoUrl,alt:"ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®",className:"w-full h-48 object-cover rounded-xl border-2 border-purple-300"}),e.jsxs("div",{className:"absolute top-2 left-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"}),"ÿ™ŸÖ ÿßŸÑÿ±ŸÅÿπ"]})]}),e.jsx("p",{className:"text-xs text-purple-600 text-center",children:"‚úÖ ÿ™ŸÖ ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ® - ŸäŸÖŸÉŸÜ ŸÑŸÑŸÖŸÜÿØŸàÿ® ÿßÿ≥ÿ™ŸÑÿßŸÖŸá ÿßŸÑÿ¢ŸÜ"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-purple-700",children:"‚ö†Ô∏è ŸäŸèÿ±ÿ¨Ÿâ ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ® ŸÇÿ®ŸÑ ÿ™ÿ≥ŸÑŸäŸÖŸá ŸÑŸÑŸÖŸÜÿØŸàÿ®"}),e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:w=>L(g.id,w),className:"hidden",id:`photo-${g.id}`}),e.jsx("label",{htmlFor:`photo-${g.id}`,className:`flex items-center justify-center gap-3 w-full py-4 rounded-xl cursor-pointer transition-all ${N===g.id?"bg-purple-200 cursor-wait":"bg-purple-500 hover:bg-purple-600 text-white"}`,children:N===g.id?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ±ŸÅÿπ..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold",children:"üì∏ ÿßŸÑÿ™ŸÇÿ∑ ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®"})]})})]})]}),g.readyPhotoUrl&&!["preparing","ready"].includes(g.status)&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ta,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®:"})]}),e.jsx("img",{src:g.readyPhotoUrl,alt:"ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®",className:"w-full h-32 object-cover rounded-lg"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:[!g.courierId&&["pending","accepted","preparing","ready"].includes(g.status)&&e.jsxs("button",{onClick:()=>t(`/chat?orderId=${g.id}`),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gradient-to-r from-orange-500 to-amber-500 text-white hover:shadow-lg transition flex items-center gap-2",children:[e.jsx(ht,{className:"w-4 h-4"}),"ŸÖÿ≠ÿßÿØÿ´ÿ© ÿßŸÑÿπŸÖŸäŸÑ üí¨"]}),["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(w=>{const U=w==="accepted"&&g.status==="pending"&&g.deliveryType==="delivery",B=k[g.id]!==void 0&&k[g.id]>=0,Q=U&&!B;return e.jsx("button",{onClick:()=>f(g.id,w,g),disabled:Q,className:`px-4 py-2 rounded-xl text-sm font-semibold transition ${Q?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:Q?"ÿ≠ÿØÿØ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ ÿ£ŸàŸÑÿßŸã":"",children:ol(w)},w)})]}),m(g)&&e.jsxs("div",{className:"mt-4 bg-gradient-to-r from-sky-50 to-blue-50 border-2 border-sky-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ls,{className:"w-5 h-5 text-sky-500 fill-sky-500"}),e.jsx("span",{className:"font-bold text-sky-800",children:"ŸÇŸäŸëŸÖ ÿßŸÑÿπŸÖŸäŸÑ ‚≠ê"})]}),e.jsxs("button",{onClick:()=>I({isOpen:!0,orderId:g.id,customerName:"ÿßŸÑÿπŸÖŸäŸÑ"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-sky-300 
                           rounded-xl hover:bg-sky-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(os,{className:"w-5 h-5 text-sky-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"ŸÇŸäŸëŸÖ ÿ™ÿπÿßŸÖŸÑ ÿßŸÑÿπŸÖŸäŸÑ"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(w=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-sky-400 transition"},w))})]})]}),((o=(E=g.ratings)==null?void 0:E.restaurantToCustomer)==null?void 0:o.stars)&&e.jsx("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"ÿ™ŸÇŸäŸäŸÖŸÉ ŸÑŸÑÿπŸÖŸäŸÑ:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(w=>e.jsx(ls,{className:`w-4 h-4 ${w<=g.ratings.restaurantToCustomer.stars?"text-sky-400 fill-sky-400":"text-gray-300"}`},w))})]})})]},g.id)}),i.length===0&&!y&&e.jsx("div",{className:"text-gray-400 text-center text-lg",children:"üö´ ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ≠ÿßŸÑŸäÿßŸã."})]})},Sc=[{value:"",label:"ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑŸÖÿ∑ÿ®ÿÆ"},{value:"traditional",label:"üçö ÿ£ŸÉŸÑÿßÿ™ ÿ¥ÿπÿ®Ÿäÿ©"},{value:"sweets",label:"üç∞ ÿ≠ŸÑŸàŸäÿßÿ™"},{value:"pastries",label:"ü•ß ŸÖÿπÿ¨ŸÜÿßÿ™"},{value:"grills",label:"üçñ ŸÖÿ¥ŸàŸäÿßÿ™"},{value:"healthy",label:"ü•ó ÿ£ŸÉŸÑ ÿµÿ≠Ÿä"},{value:"international",label:"üåç ÿ£ŸÉŸÑÿßÿ™ ÿπÿßŸÑŸÖŸäÿ©"}],Cc=()=>{var d;const{user:s}=$e(),t=Qe(),[n,i]=a.useState({name:"",phone:"",city:"",location:"",logoUrl:"",isOpen:!0,allowDelivery:!0,allowPickup:!1,cuisineType:"",announcement:"",commercialLicenseUrl:"",licenseStatus:void 0,licenseNotes:"",bankName:"",bankAccountName:"",bankAccountNumber:"",isHiring:!1,hiringDescription:"",hiringContact:""}),[c,y]=a.useState(null),[r,k]=a.useState(""),[$,M]=a.useState(null),[I,N]=a.useState(!0),[A,p]=a.useState(!1),f=a.useMemo(()=>!A&&!!s,[A,s]);a.useEffect(()=>{s&&(async()=>{try{const h=await Ce(X(S,"restaurants",s.uid));if(h.exists()){const F=h.data();let D={bankName:"",bankAccountName:"",bankAccountNumber:""};try{const b=await Ce(X(S,"restaurants",s.uid,"private","bankInfo"));if(b.exists()){const E=b.data();D={bankName:E.bankName??"",bankAccountName:E.bankAccountName??"",bankAccountNumber:E.bankAccountNumber??""}}}catch{}i({name:F.name??"",phone:F.phone??"",city:F.city??"",location:F.location??"",logoUrl:F.logoUrl??"",isOpen:F.isOpen??!0,allowDelivery:F.allowDelivery??!0,allowPickup:F.allowPickup??!1,cuisineType:F.cuisineType??"",announcement:F.announcement??"",commercialLicenseUrl:F.commercialLicenseUrl??"",licenseStatus:F.licenseStatus,licenseNotes:F.licenseNotes??"",bankName:D.bankName,bankAccountName:D.bankAccountName,bankAccountNumber:D.bankAccountNumber,isHiring:F.isHiring??!1,hiringDescription:F.hiringDescription??"",hiringContact:F.hiringContact??""})}}catch{t.error("ÿ™ÿπÿ∞Ÿëÿ±ÿ™ ŸÇÿ±ÿßÿ°ÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ")}finally{N(!1)}})()},[s,t]),a.useEffect(()=>()=>{r&&URL.revokeObjectURL(r)},[r]);const _=h=>{const{name:F,value:D}=h.target;i(b=>({...b,[F]:D}))},m=h=>{var D;const F=((D=h.target.files)==null?void 0:D[0])||null;if(y(F),F){const b=URL.createObjectURL(F);k(b)}else k("")},j=async()=>{if(!s||!c)return;if(!/^image\//.test(c.type)){t.warning("ÿßŸÑŸÖŸÑŸÅ ÿßŸÑŸÖÿÆÿ™ÿßÿ± ŸÑŸäÿ≥ ÿµŸàÿ±ÿ©");return}const F=3*1024*1024;if(c.size>F){t.warning("ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© ŸÉÿ®Ÿäÿ±ÿå Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£ŸÇŸÑ ŸÖŸÜ 3MB");return}const D=c.name.replace(/\s+/g,"_"),b=`restaurants/${s.uid}/logo_${Date.now()}_${D}`,E=js(gt,b),o={contentType:c.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await ot(E,c,o);const w=await ys(E);return`${w}${w.includes("?")?"&":"?"}v=${Date.now()}`},L=async(h,F)=>{if(!s||!h)return;if(!/^(image\/|application\/pdf)/.test(h.type)){t.warning("ÿßŸÑŸÖŸÑŸÅ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿµŸàÿ±ÿ© ÿ£Ÿà PDF");return}const b=5*1024*1024;if(h.size>b){t.warning("ÿ≠ÿ¨ŸÖ ÿßŸÑŸÖŸÑŸÅ ŸÉÿ®Ÿäÿ±ÿå Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÑŸÅ ÿ£ŸÇŸÑ ŸÖŸÜ 5MB");return}const E=h.name.replace(/\s+/g,"_"),o=`restaurants/${s.uid}/licenses/${F}_${Date.now()}_${E}`,w=js(gt,o),U={contentType:h.type,cacheControl:"public,max-age=31536000,immutable"};return await ot(w,h,U),await ys(w)},g=async h=>{if(h.preventDefault(),!s){t.warning("‚ö†Ô∏è Ÿäÿ¨ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã");return}if(!n.name.trim()){t.warning("ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ");return}p(!0);try{let F=n.logoUrl,D=n.commercialLicenseUrl,b=n.licenseStatus;if(c){t.info("‚è≥ ÿ¨ÿßÿ±Ÿä ÿ±ŸÅÿπ ÿßŸÑÿ¥ÿπÿßÿ± ‚Ä¶");const U=await j();U&&(F=U)}if($){t.info("‚è≥ ÿ¨ÿßÿ±Ÿä ÿ±ŸÅÿπ ÿßŸÑÿ±ÿÆÿµÿ© ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ© ‚Ä¶");const U=await L($,"commercial");U&&(D=U,b="pending")}const{bankAccountName:E,bankAccountNumber:o,...w}=n;await Ze(X(S,"restaurants",s.uid),{...w,logoUrl:F,commercialLicenseUrl:D,licenseStatus:b},{merge:!0}),(n.bankName||E||o)&&await Ze(X(S,"restaurants",s.uid,"private","bankInfo"),{bankName:n.bankName||"",bankAccountName:E||"",bankAccountNumber:o||""},{merge:!0}),r&&URL.revokeObjectURL(r),k(""),y(null),M(null),t.success("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠ üéâ",{title:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ∑ÿπŸÖ"})}catch(F){t.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ≠ŸÅÿ∏: ${(F==null?void 0:F.message)||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"}`)}finally{p(!1)}};return I?e.jsx("div",{className:"p-6 text-center",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ‚Ä¶"}):e.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-semibold",children:"ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:r||n.logoUrl?e.jsx("img",{src:r||n.logoUrl,className:"w-full h-full object-cover",onError:h=>h.currentTarget.style.display="none",alt:"logo"}):null}),e.jsx("input",{type:"file",accept:"image/*",onChange:m})]}),c&&e.jsxs("div",{className:"text-xs text-gray-600",children:["ÿ≥Ÿäÿ™ŸÖ ÿ±ŸÅÿπ: ",e.jsx("span",{className:"font-semibold",children:c.name})]})]}),e.jsx("input",{name:"name",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ",value:n.name,onChange:_,className:"w-full border p-3 rounded-xl"}),e.jsx("input",{name:"phone",placeholder:"ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ",value:n.phone,onChange:_,className:"w-full border p-3 rounded-xl"}),e.jsxs("div",{className:"relative",children:[e.jsx(es,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400 pointer-events-none"}),e.jsxs("select",{name:"city",value:n.city,onChange:h=>i(F=>({...F,city:h.target.value})),className:"w-full border p-3 pr-10 rounded-xl bg-white appearance-none cursor-pointer focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿØŸäŸÜÿ©"}),Ma.map(h=>e.jsx("option",{value:h,children:h},h))]})]}),e.jsx("input",{name:"location",placeholder:"ÿßŸÑŸÖŸàŸÇÿπ",value:n.location,onChange:_,className:"w-full border p-3 rounded-xl"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{name:"cuisineType",value:n.cuisineType||"",onChange:h=>i(F=>({...F,cuisineType:h.target.value})),className:"w-full border p-3 rounded-xl bg-white appearance-none cursor-pointer focus:border-amber-400 focus:ring-2 focus:ring-amber-100",children:Sc.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}),e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none",children:"ŸÜŸàÿπ ÿßŸÑŸÖÿ∑ÿ®ÿÆ"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5 text-sky-500"}),"ŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸÇÿµŸäÿ±ÿ© ŸÑŸÑÿπŸÖŸÑÿßÿ°"]}),e.jsx("textarea",{name:"announcement",placeholder:"ÿßŸÉÿ™ÿ® ŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸÇÿµŸäÿ±ÿ© ÿ™ÿ∏Ÿáÿ± ŸÑŸÑÿπŸÖŸÑÿßÿ° ÿπŸÜÿØ ÿ≤Ÿäÿßÿ±ÿ© ŸÖÿ™ÿ¨ÿ±ŸÉ... ŸÖÿ´ŸÑÿßŸã: ŸÜÿ≥ÿ™ŸÇÿ®ŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸÖŸÜ ÿßŸÑÿ≥ÿßÿπÿ© 4 ÿπÿµÿ±ÿßŸã",value:n.announcement||"",onChange:_,maxLength:150,rows:2,className:"w-full border p-3 rounded-xl resize-none focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsxs("span",{children:[((d=n.announcement)==null?void 0:d.length)||0,"/150"]}),"ÿ≠ÿ±ŸÅ"]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-green-500"}),"ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿ∑ŸÑÿ®"]}),e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl mb-3 ${n.isOpen?"bg-green-50 border-2 border-green-200":"bg-red-50 border-2 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.isOpen?"bg-green-500":"bg-red-500"}`,children:n.isOpen?e.jsx(Ve,{className:"w-5 h-5 text-white"}):e.jsx(Ct,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${n.isOpen?"text-green-800":"text-red-800"}`,children:n.isOpen?"‚úì ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖÿ™ÿßÿ≠":"‚úï ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖÿ∫ŸÑŸÇ"}),e.jsx("p",{className:"text-sm text-gray-500",children:n.isOpen?"ÿßŸÑÿπŸÖŸÑÿßÿ° ŸäŸÖŸÉŸÜŸáŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ¢ŸÜ":"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿπÿ∑ŸÑÿ© ŸÖÿ§ŸÇÿ™ÿßŸã"})]})]}),e.jsx("button",{type:"button",onClick:()=>i(h=>({...h,isOpen:!h.isOpen})),className:`relative w-14 h-8 rounded-full transition-colors ${n.isOpen?"bg-green-500":"bg-red-400"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.isOpen?"right-1":"left-1"}`})})]}),!n.isOpen&&e.jsx("p",{className:"mb-3 text-sm text-red-600 bg-red-50 p-2 rounded-lg",children:"‚ö†Ô∏è ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖÿ∫ŸÑŸÇ - ÿßŸÑÿπŸÖŸÑÿßÿ° ŸÑŸÜ Ÿäÿ™ŸÖŸÉŸÜŸàÿß ŸÖŸÜ ÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿµŸÜÿßŸÅ ŸÑŸÑÿ≥ŸÑÿ©"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.allowDelivery?"bg-sky-500":"bg-gray-300"}`,children:e.jsx(es,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÑŸÑÿπŸÖŸÑÿßÿ°"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÿ™ŸàÿµŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸÑŸÖŸàŸÇÿπ ÿßŸÑÿπŸÖŸäŸÑ"})]})]}),e.jsx("button",{type:"button",onClick:()=>i(h=>({...h,allowDelivery:!h.allowDelivery})),className:`relative w-14 h-8 rounded-full transition-colors ${n.allowDelivery?"bg-sky-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.allowDelivery?"right-1":"left-1"}`})})]}),n.allowDelivery&&e.jsx("p",{className:"mb-3 text-sm text-sky-600 bg-sky-50 p-2 rounded-lg",children:'üöó ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÖŸÅÿπŸëŸÑ - ÿ≥ÿ™ÿ∏Ÿáÿ± ÿπŸÑÿßŸÖÿ© "ÿ™ŸàÿµŸäŸÑ" ÿ®ÿ¨ÿßŸÜÿ® ŸÖÿ∑ÿπŸÖŸÉ ŸÑŸÑÿπŸÖŸÑÿßÿ°'}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:e.jsx(Ve,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÿßŸÑÿ≥ŸÖÿßÿ≠ ŸÑŸÑÿπŸÖŸÑÿßÿ° ÿ®ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ÿßÿ™ŸáŸÖ ŸÖŸÜ ŸÖŸàŸÇÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]})]}),e.jsx("button",{type:"button",onClick:()=>i(h=>({...h,allowPickup:!h.allowPickup})),className:`relative w-14 h-8 rounded-full transition-colors ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.allowPickup?"right-1":"left-1"}`})})]}),n.allowPickup&&e.jsx("p",{className:"mt-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:"‚úì ÿßŸÑÿπŸÖŸÑÿßÿ° ŸäŸÖŸÉŸÜŸáŸÖ ÿßÿÆÿ™Ÿäÿßÿ± ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ÿßÿ™ŸáŸÖ ŸÖŸÜ ŸÖŸàŸÇÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ (ÿ®ÿØŸàŸÜ ÿ±ÿ≥ŸàŸÖ ÿ™ŸàÿµŸäŸÑ)"})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5 text-sky-500"}),"ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ ŸàÿßŸÑÿ¥ŸáÿßÿØÿßÿ™"]}),n.licenseStatus&&e.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 ${n.licenseStatus==="approved"?"bg-green-50 text-green-700":n.licenseStatus==="rejected"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[n.licenseStatus==="approved"&&e.jsx(De,{className:"w-5 h-5"}),n.licenseStatus==="rejected"&&e.jsx(Cs,{className:"w-5 h-5"}),n.licenseStatus==="pending"&&e.jsx(Ye,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:[n.licenseStatus==="approved"&&"ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ ŸÖŸàÿßŸÅŸÇ ÿπŸÑŸäŸáÿß ‚úì",n.licenseStatus==="rejected"&&"ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ ŸÖÿ±ŸÅŸàÿ∂ÿ©",n.licenseStatus==="pending"&&"ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©..."]})]}),n.licenseNotes&&n.licenseStatus==="rejected"&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl text-red-600 text-sm",children:[e.jsx("strong",{children:"ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™:"})," ",n.licenseNotes]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Hn,{className:"w-4 h-4 text-orange-500"}),"ÿßŸÑÿ±ÿÆÿµÿ© ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n.commercialLicenseUrl&&e.jsx("a",{href:n.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:text-sky-700 text-sm underline",children:"ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ≠ÿßŸÑŸä"}),e.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:h=>{var F;return M(((F=h.target.files)==null?void 0:F[0])||null)},className:"text-sm"})]}),$&&e.jsxs("div",{className:"text-xs text-gray-600",children:["ÿ≥Ÿäÿ™ŸÖ ÿ±ŸÅÿπ: ",e.jsx("span",{className:"font-semibold",children:$.name})]})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5 text-green-500"}),"ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 bg-green-50 p-3 rounded-xl",children:"üí∞ ÿ£ÿØÿÆŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä ŸÑŸäÿ™ŸÖŸÉŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ° ŸÖŸÜ ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ∑ŸÑÿ® ŸÖÿ®ÿßÿ¥ÿ±ÿ©"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative",children:e.jsxs("select",{name:"bankName",value:n.bankName||"",onChange:h=>i(F=>({...F,bankName:h.target.value})),className:"w-full border p-3 rounded-xl bg-white appearance-none cursor-pointer focus:border-green-400 focus:ring-2 focus:ring-green-100",children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ŸÜŸÉ"}),e.jsx("option",{value:"ÿßŸÑÿ±ÿßÿ¨ÿ≠Ÿä",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ±ÿßÿ¨ÿ≠Ÿä"}),e.jsx("option",{value:"ÿßŸÑÿ£ŸáŸÑŸä",children:"ÿßŸÑÿ®ŸÜŸÉ ÿßŸÑÿ£ŸáŸÑŸä ÿßŸÑÿ≥ÿπŸàÿØŸä"}),e.jsx("option",{value:"ÿßŸÑÿ•ŸÜŸÖÿßÿ°",children:"ŸÖÿµÿ±ŸÅ ÿßŸÑÿ•ŸÜŸÖÿßÿ°"}),e.jsx("option",{value:"ÿßŸÑÿ±Ÿäÿßÿ∂",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ±Ÿäÿßÿ∂"}),e.jsx("option",{value:"ÿßŸÑÿ®ŸÑÿßÿØ",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ®ŸÑÿßÿØ"}),e.jsx("option",{value:"ÿßŸÑÿ¨ÿ≤Ÿäÿ±ÿ©",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ¨ÿ≤Ÿäÿ±ÿ©"}),e.jsx("option",{value:"ÿßŸÑÿπÿ±ÿ®Ÿä",children:"ÿßŸÑÿ®ŸÜŸÉ ÿßŸÑÿπÿ±ÿ®Ÿä ÿßŸÑŸàÿ∑ŸÜŸä"}),e.jsx("option",{value:"ÿßŸÑÿ≥ÿπŸàÿØŸä ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿä",children:"ÿßŸÑÿ®ŸÜŸÉ ÿßŸÑÿ≥ÿπŸàÿØŸä ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿä"}),e.jsx("option",{value:"ÿ≥ÿßÿ®",children:"ÿ®ŸÜŸÉ ÿ≥ÿßÿ®"}),e.jsx("option",{value:"stc pay",children:"STC Pay"}),e.jsx("option",{value:"ÿ£ÿÆÿ±Ÿâ",children:"ÿ£ÿÆÿ±Ÿâ"})]})}),e.jsx("input",{name:"bankAccountName",placeholder:"ÿßÿ≥ŸÖ ÿµÿßÿ≠ÿ® ÿßŸÑÿ≠ÿ≥ÿßÿ®",value:n.bankAccountName||"",onChange:_,className:"w-full border p-3 rounded-xl focus:border-green-400 focus:ring-2 focus:ring-green-100"}),e.jsx("input",{name:"bankAccountNumber",placeholder:"ÿ±ŸÇŸÖ ÿßŸÑÿ¢Ÿäÿ®ÿßŸÜ ÿ£Ÿà ÿßŸÑÿ≠ÿ≥ÿßÿ®",value:n.bankAccountNumber||"",onChange:_,className:"w-full border p-3 rounded-xl focus:border-green-400 focus:ring-2 focus:ring-green-100 font-mono text-left",dir:"ltr"}),n.bankName&&n.bankAccountName&&n.bankAccountNumber&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 text-green-700 text-sm",children:"‚úÖ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ®ŸÜŸÉ ŸÖŸÉÿ™ŸÖŸÑÿ© - ÿ≥Ÿäÿ™ŸÖŸÉŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ° ŸÖŸÜ ÿ±ÿ§Ÿäÿ™Ÿáÿß ÿπŸÜÿØ ÿßŸÑÿ∑ŸÑÿ®"})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5 text-purple-500"}),"ÿ™Ÿàÿ∏ŸäŸÅ ÿπÿßŸÖŸÑÿßÿ™ ŸÑŸÑÿ∑ÿ®ÿÆ"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 bg-purple-50 p-3 rounded-xl",children:"üë©‚Äçüç≥ ŸÅÿπŸëŸÑ Ÿáÿ∞ÿß ÿßŸÑÿÆŸäÿßÿ± ÿ•ÿ∞ÿß ŸÉŸÜÿ™ ÿ™ÿ®ÿ≠ÿ´ ÿπŸÜ ÿπÿßŸÖŸÑÿßÿ™ ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿ∑ÿ®ÿÆ"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.isHiring?"bg-purple-500":"bg-gray-300"}`,children:e.jsx(Ot,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖŸàÿ∏ŸÅÿßÿ™"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÿπÿ±ÿ∂ ÿ•ÿπŸÑÿßŸÜ ÿ™Ÿàÿ∏ŸäŸÅ ŸÅŸä ÿµŸÅÿ≠ÿ™ŸÉ"})]})]}),e.jsx("button",{type:"button",onClick:()=>i(h=>({...h,isHiring:!h.isHiring})),className:`relative w-14 h-8 rounded-full transition-colors ${n.isHiring?"bg-purple-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.isHiring?"right-1":"left-1"}`})})]}),n.isHiring&&e.jsxs("div",{className:"space-y-3 bg-purple-50 p-4 rounded-xl",children:[e.jsx("textarea",{name:"hiringDescription",placeholder:"ŸàÿµŸÅ ÿßŸÑŸàÿ∏ŸäŸÅÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© (ŸÖÿ´ÿßŸÑ: ŸÜÿ®ÿ≠ÿ´ ÿπŸÜ ÿ∑ÿ®ÿßÿÆÿ© ŸÖÿßŸáÿ±ÿ© ŸÑŸÑÿπŸÖŸÑ ÿ®ÿØŸàÿßŸÖ ÿ¨ÿ≤ÿ¶Ÿä...)",value:n.hiringDescription||"",onChange:h=>i(F=>({...F,hiringDescription:h.target.value})),className:"w-full border p-3 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-100 min-h-[100px]",rows:3}),e.jsx("input",{name:"hiringContact",placeholder:"ÿ±ŸÇŸÖ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÑŸÑÿ™Ÿàÿ∏ŸäŸÅ (Ÿàÿßÿ™ÿ≥ÿßÿ®)",value:n.hiringContact||"",onChange:_,className:"w-full border p-3 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-100"}),n.hiringDescription&&n.hiringContact&&e.jsx("div",{className:"bg-purple-100 border border-purple-200 rounded-xl p-3 text-purple-700 text-sm",children:"‚úÖ ÿ•ÿπŸÑÿßŸÜ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿπÿ±ÿ∂ ŸÅŸä ÿµŸÅÿ≠ÿ™ŸÉ"})]})]}),e.jsx("button",{type:"submit",disabled:!f,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:A?"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ≠ŸÅÿ∏‚Ä¶":"ÿ≠ŸÅÿ∏"})]})]})},Ac=()=>{const{user:s}=$e(),t=Ds(),n=Qe(),[i,c]=a.useState([]),[y,r]=a.useState(!0);a.useEffect(()=>{s&&(async()=>{const m=pe(te(S,"hiringRequests"),be("restaurantId","==",s.uid)),j=await ue(m);c(j.docs.map(L=>({id:L.id,...L.data()}))),r(!1)})()},[s]);const k=async(m,j)=>{await xe(X(S,"hiringRequests",m),{status:j}),c(L=>L.map(g=>g.id===m?{...g,status:j}:g)),n.success(j==="accepted"?"ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ® ‚úÖ":"ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®")},$=async m=>{await t.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÅÿµŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ® "${m.courierName}"ÿü`,{title:"ŸÅÿµŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ®",confirmText:"ŸÜÿπŸÖÿå ŸÅÿµŸÑ",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°",dangerous:!0})&&(await xe(X(S,"hiringRequests",m.id),{status:"terminated"}),c(L=>L.map(g=>g.id===m.id?{...g,status:"terminated"}:g)),n.success("ÿ™ŸÖ ŸÅÿµŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ®"))},M=async m=>{await t.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ ÿ∑ŸÑÿ® "${m.courierName}" ŸÜŸáÿßÿ¶ŸäÿßŸãÿü`,{title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ∑ŸÑÿ®",confirmText:"ŸÜÿπŸÖÿå ÿ≠ÿ∞ŸÅ",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°",dangerous:!0})&&(await Ss(X(S,"hiringRequests",m.id)),c(L=>L.filter(g=>g.id!==m.id)),n.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ∑ŸÑÿ®"))},I=async m=>{await xe(X(S,"hiringRequests",m.id),{status:"accepted"}),c(j=>j.map(L=>L.id===m.id?{...L,status:"accepted"}:L)),n.success("ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ® ‚úÖ")},N=m=>{switch(m){case"pending":return{text:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ±ÿØ",color:"bg-yellow-100 text-yellow-700",icon:Ye};case"accepted":return{text:"ŸÖŸÇÿ®ŸàŸÑ ‚úÖ",color:"bg-green-100 text-green-700",icon:De};case"rejected":return{text:"ŸÖÿ±ŸÅŸàÿ∂",color:"bg-red-100 text-red-700",icon:Ys};case"terminated":return{text:"ŸÖŸÅÿµŸàŸÑ",color:"bg-gray-100 text-gray-700",icon:Gr};default:return{text:m,color:"bg-gray-100 text-gray-700",icon:Ye}}};if(y)return e.jsx("div",{className:"text-center py-10",children:"‚è≥ ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."});const A=i.filter(m=>m.status==="accepted"),p=i.filter(m=>m.status==="pending"),f=i.filter(m=>m.status==="terminated"),_=i.filter(m=>m.status==="rejected");return e.jsxs("div",{className:"py-6 space-y-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-6",children:"üë• ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÜÿßÿØŸäÿ®"}),i.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üë•"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ™Ÿàÿ∏ŸäŸÅ"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ÿ≥Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿßÿØŸäÿ® ŸÑŸÑÿßŸÜÿ∂ŸÖÿßŸÖ ŸÑŸÖÿ∑ÿπŸÖŸÉ"})]}):e.jsxs(e.Fragment,{children:[A.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-green-600 mb-3 flex items-center gap-2",children:[e.jsx(Za,{className:"w-5 h-5"}),"ÿßŸÑŸÖŸÜÿßÿØŸäÿ® ÿßŸÑŸÜÿ¥ÿ∑ŸäŸÜ (",A.length,")"]}),e.jsx("div",{className:"space-y-3",children:A.map(m=>{const j=N(m.status);return e.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl",children:"üöó"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800",children:m.courierName}),e.jsxs("div",{className:`text-xs px-2 py-1 rounded-full inline-flex items-center gap-1 ${j.color}`,children:[e.jsx(j.icon,{className:"w-3 h-3"}),j.text]})]})]}),e.jsxs("button",{onClick:()=>$(m),className:`flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-xl 
                                     hover:bg-red-100 transition-all font-medium`,children:[e.jsx(Qn,{className:"w-4 h-4"}),"ŸÅÿµŸÑ"]})]})},m.id)})})]}),p.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-yellow-600 mb-3 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),"ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ© (",p.length,")"]}),e.jsx("div",{className:"space-y-3",children:p.map(m=>e.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-2xl",children:"üë§"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800",children:m.courierName}),e.jsx("div",{className:"text-xs text-yellow-600",children:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ±ÿØ ‚è≥"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>k(m.id,"accepted"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-green-500 text-white hover:bg-green-600 transition-all font-medium",children:[e.jsx(Za,{className:"w-4 h-4"}),"ŸÇÿ®ŸàŸÑ"]}),e.jsxs("button",{onClick:()=>k(m.id,"rejected"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-red-500 text-white hover:bg-red-600 transition-all font-medium",children:[e.jsx(Ys,{className:"w-4 h-4"}),"ÿ±ŸÅÿ∂"]})]})]})},m.id))})]}),f.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-500 mb-3 flex items-center gap-2",children:[e.jsx(Gr,{className:"w-5 h-5"}),"ÿßŸÑŸÖŸÅÿµŸàŸÑŸäŸÜ (",f.length,")"]}),e.jsx("div",{className:"space-y-3",children:f.map(m=>e.jsx("div",{className:"bg-gray-50 rounded-2xl shadow p-4 border-r-4 border-gray-400 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-2xl",children:"üë§"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-600",children:m.courierName}),e.jsx("div",{className:"text-xs text-gray-500",children:"ŸÖŸÅÿµŸàŸÑ"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>I(m),className:`flex items-center gap-1 px-3 py-2 bg-green-100 text-green-600 rounded-xl 
                                     hover:bg-green-200 transition-all text-sm font-medium`,children:[e.jsx(Za,{className:"w-4 h-4"}),"ÿ•ÿπÿßÿØÿ© ÿ™ŸÅÿπŸäŸÑ"]}),e.jsxs("button",{onClick:()=>M(m),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                     hover:bg-red-200 transition-all text-sm font-medium`,children:[e.jsx(fs,{className:"w-4 h-4"}),"ÿ≠ÿ∞ŸÅ"]})]})]})},m.id))})]}),_.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-red-500 mb-3 flex items-center gap-2",children:[e.jsx(Ys,{className:"w-5 h-5"}),"ŸÖÿ±ŸÅŸàÿ∂ŸäŸÜ (",_.length,")"]}),e.jsx("div",{className:"space-y-3",children:_.map(m=>e.jsx("div",{className:"bg-red-50 rounded-2xl shadow p-4 border-r-4 border-red-400 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-2xl",children:"üë§"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-600",children:m.courierName}),e.jsx("div",{className:"text-xs text-red-500",children:"ŸÖÿ±ŸÅŸàÿ∂"})]})]}),e.jsxs("button",{onClick:()=>M(m),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                   hover:bg-red-200 transition-all text-sm font-medium`,children:[e.jsx(fs,{className:"w-4 h-4"}),"ÿ≠ÿ∞ŸÅ"]})]})},m.id))})]})]})]})},ga={premium:{displayName:"ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",description:"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ© Ÿàÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ©",isEnabled:!0,originalPrice:99,currentPrice:99,durationDays:30},free:{displayName:"ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©",description:"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÖÿ¨ÿßŸÜÿßŸã",isEnabled:!0,originalPrice:0,currentPrice:0,durationDays:0},defaultPackage:"free"},Ml=s=>{var c,y,r,k;if(!(s!=null&&s.isActive))return!1;const t=new Date,n=((y=(c=s.startDate)==null?void 0:c.toDate)==null?void 0:y.call(c))||(s.startDate?new Date(s.startDate):null),i=((k=(r=s.endDate)==null?void 0:r.toDate)==null?void 0:k.call(r))||(s.endDate?new Date(s.endDate):null);return!(n&&t<n||i&&t>i)},Ic=s=>{if(!Ml(s.discount))return s.originalPrice;const t=s.discount;return t.type==="percentage"?s.originalPrice-s.originalPrice*t.value/100:Math.max(0,s.originalPrice-t.value)},Dc=()=>{var E;const{user:s}=$e(),t=Qe(),n=Ds(),[i,c]=a.useState("free"),[y,r]=a.useState(!0),[k,$]=a.useState(!1),[M,I]=a.useState(!1),[N,A]=a.useState(ga),[p,f]=a.useState(null),[_,m]=a.useState(!1),[j,L]=a.useState(null),g=a.useRef(null),d=Ic(N.premium),h=Ml(N.premium.discount);a.useEffect(()=>{console.log("üí∞ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ®ÿßŸÇÿ©:",{pkgSettings:N.premium,discount:N.premium.discount,hasDiscount:h,premiumPrice:d,originalPrice:N.premium.originalPrice})},[N,h,d]),a.useEffect(()=>{if(!s)return;(async()=>{var B;try{const Q=await Ce(X(S,"settings","packages"));if(Q.exists()){const x=Q.data();console.log("üì¶ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™ ŸÖŸÜ Firestore:",x),A({...ga,...x,premium:{...ga.premium,...x.premium,discount:(B=x.premium)!=null&&B.discount?{...x.premium.discount,isActive:x.premium.discount.isActive??!1}:void 0},free:{...ga.free,...x.free}})}else console.log("‚ö†Ô∏è ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿ®ÿßŸÇÿßÿ™ ŸÅŸä Firestoreÿå Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä");const O=await Ce(X(S,"restaurants",s.uid));if(O.exists()){const x=O.data();c((x==null?void 0:x.packageType)||"free")}const C=pe(te(S,"packageRequests"),be("restaurantId","==",s.uid)),P=await ue(C);if(!P.empty){const z=P.docs.map(R=>({id:R.id,...R.data()})).find(R=>!["approved","rejected","expired"].includes(R.status));z&&f(z)}}catch(Q){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:",Q)}finally{r(!1)}})();const w=pe(te(S,"packageRequests"),be("restaurantId","==",s.uid)),U=As(w,B=>{if(!B.empty){const Q=B.docs.map(P=>({id:P.id,...P.data()})),O=Q.find(P=>!["approved","rejected","expired"].includes(P.status));f(O||null),Q.find(P=>P.status==="approved")&&c("premium")}});return()=>U()},[s]);const F=async()=>{if(!s)return;if(i==="free"){t.info("ÿ£ŸÜÿ™ ÿ®ÿßŸÑŸÅÿπŸÑ ŸÖÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©");return}if(await n.confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©ÿü ÿ≥ÿ™ŸÅŸÇÿØ ŸÖŸÖŸäÿ≤ÿßÿ™ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤.",{title:"üì¶ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ŸÑŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©",confirmText:"ŸÜÿπŸÖÿå ÿ≠ŸàŸëŸÑ ŸÑŸÑŸÖÿ¨ÿßŸÜŸäÿ©",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°"})){I(!0);try{await xe(X(S,"restaurants",s.uid),{packageType:"free",packageRequest:null,updatedAt:J()}),c("free"),t.success("ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ŸÑŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©")}catch(w){console.error("ÿÆÿ∑ÿ£:",w),t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{I(!1)}}},D=async()=>{if(!s)return;if(p){t.info("ŸÑÿØŸäŸÉ ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÇŸäÿØ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©");return}if(d===0){if(!await n.confirm("ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÖÿ™ÿßÿ≠ÿ© ŸÖÿ¨ÿßŸÜÿßŸã ÿ≠ÿßŸÑŸäÿßŸã! ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ŸÅÿπŸäŸÑŸáÿß ÿßŸÑÿ¢ŸÜÿü",{title:"üéÅ ÿπÿ±ÿ∂ ÿÆÿßÿµ - ÿ®ÿßŸÇÿ© ŸÖÿ¨ÿßŸÜŸäÿ©!",confirmText:"ŸÜÿπŸÖÿå ŸÅÿπŸëŸÑ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ¢ŸÜ",cancelText:"ŸÑÿßÿ≠ŸÇÿßŸã"}))return;$(!0);try{const U=new Date;U.setDate(U.getDate()+(N.premium.durationDays||30)),await xe(X(S,"restaurants",s.uid),{packageType:"premium",packageSubscribedAt:J(),packageExpiresAt:U,packageRequest:null,updatedAt:J()}),c("premium"),t.success("üéâ ŸÖÿ®ÿ±ŸàŸÉ! ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÖÿ¨ÿßŸÜÿßŸã!")}catch(U){console.error("ÿÆÿ∑ÿ£:",U),t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{$(!1)}return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ŸÉ ŸÑŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ÿ®ŸÖÿ®ŸÑÿ∫ ${d.toFixed(0)} ÿ±ŸäÿßŸÑ. ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©ÿü`,{title:"‚ú® ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",confirmText:"ŸÜÿπŸÖÿå ÿ£ÿ±ŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ",cancelText:"ŸÑÿßÿ≠ŸÇÿßŸã"})){$(!0);try{const U=(await Ce(X(S,"restaurants",s.uid))).data(),B=await Fe(te(S,"packageRequests"),{restaurantId:s.uid,restaurantName:(U==null?void 0:U.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",ownerName:(U==null?void 0:U.ownerName)||"",ownerPhone:(U==null?void 0:U.phone)||"",status:"pending",subscriptionAmount:d,subscriptionDuration:N.premium.durationDays,requestedAt:J(),createdAt:J(),updatedAt:J()});await xe(X(S,"restaurants",s.uid),{packageRequest:"premium",packageRequestedAt:J(),updatedAt:J()});try{const Q=pe(te(S,"users"),be("role","==","developer")),O=await ue(Q);if(O.empty){const C=pe(te(S,"users"),be("role","==","admin")),P=await ue(C);for(const x of P.docs)await Fe(te(S,"notifications"),{recipientId:x.id,title:"üì¶ ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿ¨ÿØŸäÿØ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",message:`${(U==null?void 0:U.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©"} ÿ∑ŸÑÿ®ÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤`,type:"package_request",read:!1,data:{requestId:B.id,restaurantId:s.uid},createdAt:J()})}else for(const C of O.docs)await Fe(te(S,"notifications"),{recipientId:C.id,title:"üì¶ ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿ¨ÿØŸäÿØ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",message:`${(U==null?void 0:U.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©"} ÿ∑ŸÑÿ®ÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤`,type:"package_request",read:!1,data:{requestId:B.id,restaurantId:s.uid},createdAt:J()})}catch(Q){console.warn("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±:",Q)}t.success("ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ∑ŸÑÿ®ŸÉ! Ÿäÿ±ÿ¨Ÿâ ÿ±ŸÅÿπ ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ£ÿØŸÜÿßŸá üí≥")}catch(w){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®:",w),t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{$(!1)}}},b=async()=>{var o;if(!s||!p||!j){t.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ");return}m(!0);try{const w=`paymentProofs/${s.uid}_${Date.now()}_${j.name}`,U=js(gt,w);await ot(U,j);const B=await ys(U);await xe(X(S,"packageRequests",p.id),{status:"payment_sent",paymentProofImageUrl:B,paymentSentAt:J(),updatedAt:J()});try{const O=((o=(await Ce(X(S,"restaurants",s.uid))).data())==null?void 0:o.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",C=pe(te(S,"users"),be("role","==","developer")),P=await ue(C);if(P.empty){const x=pe(te(S,"users"),be("role","==","admin")),z=await ue(x);for(const R of z.docs)await Fe(te(S,"notifications"),{recipientId:R.id,title:"üí≥ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿ™ÿ≠ŸàŸäŸÑ",message:`${O} ÿ£ÿ±ÿ≥ŸÑÿ™ ÿ•ÿ´ÿ®ÿßÿ™ ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ`,type:"payment_proof_sent",read:!1,data:{requestId:p.id,restaurantId:s.uid},createdAt:J()})}else for(const x of P.docs)await Fe(te(S,"notifications"),{recipientId:x.id,title:"üí≥ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿ™ÿ≠ŸàŸäŸÑ",message:`${O} ÿ£ÿ±ÿ≥ŸÑÿ™ ÿ•ÿ´ÿ®ÿßÿ™ ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ`,type:"payment_proof_sent",read:!1,data:{requestId:p.id,restaurantId:s.uid},createdAt:J()})}catch(Q){console.warn("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±:",Q)}t.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠! ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ™Ÿá Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ© ‚ú®"),L(null),g.current&&(g.current.value="")}catch(w){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ±ŸÅÿπ ÿßŸÑÿ•ÿ´ÿ®ÿßÿ™:",w),t.error(`ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: ${w.message}`)}finally{m(!1)}};return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-amber-100 to-yellow-100 px-5 py-2.5 rounded-full mb-4 shadow-sm",children:[e.jsx("span",{className:"text-xl",children:"üíº"}),e.jsx("span",{className:"text-amber-700 font-bold text-lg",children:"ÿ®ÿßŸÇÿßÿ™ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-3",children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© ŸÑÿ£ÿ≥ÿ±ÿ™ŸÉ"}),e.jsx("p",{className:"text-gray-600 max-w-lg mx-auto",children:"ÿßÿ®ÿØÿ£ ŸÖÿ¨ÿßŸÜÿßŸã Ÿàÿßÿ≥ÿ™ŸÖÿ™ÿπ ÿ®ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©ÿå ÿ£Ÿà ÿßÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ©"})]}),p&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl p-6 border-2 border-amber-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center",children:e.jsx(Ms,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800",children:"ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÇŸäÿØ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©"}),e.jsxs("p",{className:"text-amber-600 text-sm",children:[p.status==="pending"&&"‚è≥ Ÿäÿ±ÿ¨Ÿâ ÿ±ŸÅÿπ ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ",p.status==="payment_sent"&&"üí≥ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ - ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ£ŸÉŸäÿØ"]})]})]}),p.status==="pending"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsxs("p",{className:"text-green-600 font-bold text-lg mb-2",children:["üí∞ ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®: ",p.subscriptionAmount||d," ÿ±ŸäÿßŸÑ"]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿ£ÿπŸÑÿßŸá ÿ´ŸÖ ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"üì§ ÿßÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ:"}),e.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:o=>{var w;return L(((w=o.target.files)==null?void 0:w[0])||null)},className:"w-full border-2 border-dashed border-amber-300 rounded-xl p-4 bg-amber-50"}),j&&e.jsxs("p",{className:"text-sm text-green-600",children:["‚úÖ ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ",j.name]}),e.jsx("button",{onClick:b,disabled:_||!j,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 transition flex items-center justify-center gap-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ±ŸÅÿπ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(aa,{className:"w-5 h-5"}),"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"]})})]})]}),p.status==="payment_sent"&&e.jsxs("div",{className:"bg-purple-100 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(Ye,{className:"w-8 h-8 text-purple-600 animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-purple-800",children:"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"}),e.jsx("p",{className:"text-purple-600 text-sm",children:"ÿ¨ÿßÿ±Ÿê ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑÿ•ŸäÿµÿßŸÑ Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ©... ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ¥ÿπÿßÿ±ŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${i==="free"?"ring-4 ring-green-400 shadow-2xl":"shadow-lg hover:shadow-xl"}`,children:[i==="free"&&e.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[e.jsx(hs,{className:"w-4 h-4"}),"ÿ®ÿßŸÇÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©"]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-6 md:p-8 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(Es,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©"}),e.jsx("p",{className:"text-green-600 font-semibold",children:"ŸÑŸÑÿ¨ŸÖŸäÿπ ‚Ä¢ ŸÖÿØŸâ ÿßŸÑÿ≠Ÿäÿßÿ©"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center",children:[e.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[e.jsx("span",{className:"text-5xl font-black text-gray-900",children:"0"}),e.jsx("span",{className:"text-xl text-gray-600",children:"ÿ±.ÿ≥"})]}),e.jsx("p",{className:"text-green-600 font-medium mt-1",children:"ŸÖÿ¨ÿßŸÜÿßŸã ŸÑŸÑÿ£ÿ®ÿØ"})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5 text-amber-500"}),"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©:"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(yt,{icon:e.jsx(Ls,{className:"w-5 h-5"}),title:"ÿßŸÑÿ∏ŸáŸàÿ± ŸÅŸä ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ",desc:"ÿ£ÿ≥ÿ±ÿ™ŸÉ ÿ™ÿ∏Ÿáÿ± ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿπŸÖŸÑÿßÿ° ŸÅŸä ŸÖŸÜÿ∑ŸÇÿ™ŸÉ",included:!0}),e.jsx(yt,{icon:e.jsx(us,{className:"w-5 h-5"}),title:"ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",desc:"ÿßÿ≥ÿ™ŸÇÿ®ŸÑ ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿπŸÖŸÑÿßÿ° ÿ®ÿØŸàŸÜ ÿ≠ÿØŸàÿØ",included:!0}),e.jsx(yt,{icon:e.jsx(it,{className:"w-5 h-5"}),title:"ÿµŸÅÿ≠ÿ© ÿÆÿßÿµÿ© ŸÑÿ£ÿ≥ÿ±ÿ™ŸÉ",desc:"ÿµŸÅÿ≠ÿ© ŸÖÿÆÿµÿµÿ© ÿ™ÿπÿ±ÿ∂ ŸÇÿßÿ¶ŸÖÿ™ŸÉ ŸàŸÖŸÜÿ™ÿ¨ÿßÿ™ŸÉ",included:!0})]})]}),e.jsx("div",{className:"mt-6",children:i==="free"?e.jsxs("div",{className:"bg-green-100 text-green-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[e.jsx(hs,{className:"w-5 h-5"}),"ÿ£ŸÜÿ™ ŸÖÿ¥ÿ™ÿ±ŸÉ ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑÿ®ÿßŸÇÿ©"]}):e.jsx("button",{onClick:F,disabled:M,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"w-6 h-6"}),"ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©",e.jsx(st,{className:"w-5 h-5"})]})})})]})]}),e.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${i==="premium"?"ring-4 ring-amber-400 shadow-2xl":"shadow-lg hover:shadow-xl hover:scale-[1.01]"}`,children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-amber-500 py-2 text-center z-10",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white font-bold",children:[e.jsx(ss,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ¥ÿπÿ®Ÿäÿ©"}),e.jsx(ss,{className:"w-5 h-5"})]})}),i==="premium"&&e.jsxs("div",{className:"absolute top-12 right-4 bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[e.jsx(ss,{className:"w-4 h-4"}),"ÿ®ÿßŸÇÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©"]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-6 md:p-8 pt-14 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 via-yellow-400 to-orange-400 rounded-2xl flex items-center justify-center shadow-lg relative",children:[e.jsx(ss,{className:"w-8 h-8 text-white"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow",children:e.jsx(ds,{className:"w-4 h-4 text-amber-500"})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäŸëÿ≤"}),e.jsx("p",{className:"text-amber-600 font-semibold",children:"ŸÑŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÖŸäÿ≤ÿ© ‚ú®"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-400/10 via-yellow-400/10 to-orange-400/10"}),e.jsxs("div",{className:"relative",children:[h&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"bg-red-500 text-white text-sm px-3 py-1 rounded-full font-bold",children:((E=N.premium.discount)==null?void 0:E.label)||"ÿÆÿµŸÖ ÿÆÿßÿµ!"}),N.premium.originalPrice>d&&e.jsxs("p",{className:"text-gray-400 line-through text-lg mt-1",children:[N.premium.originalPrice.toFixed(0)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[e.jsx("span",{className:"text-5xl font-black bg-gradient-to-r from-amber-600 to-orange-500 bg-clip-text text-transparent",children:d===0?"ŸÖÿ¨ÿßŸÜÿßŸã":d.toFixed(0)}),d>0&&e.jsx("span",{className:"text-xl text-gray-600",children:"ÿ±.ÿ≥"})]}),e.jsx("p",{className:"text-amber-600 font-medium mt-1",children:d===0?"ÿπÿ±ÿ∂ ÿÆÿßÿµ!":`ŸÑŸÖÿØÿ© ${N.premium.durationDays} ŸäŸàŸÖ`})]})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5 text-amber-500"}),"ÿ¨ŸÖŸäÿπ ŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©ÿå ÿ®ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ:"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(yt,{icon:e.jsx(xt,{className:"w-5 h-5"}),title:"ÿßŸÑÿ∏ŸáŸàÿ± ÿ£ÿπŸÑŸâ ŸÅŸä ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨",desc:"ÿ£ÿ≥ÿ±ÿ™ŸÉ ÿ™ÿ∏Ÿáÿ± ŸÅŸä ÿ£ÿπŸÑŸâ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ®ÿ≠ÿ´ ÿØÿßÿ¶ŸÖÿßŸã",included:!0,premium:!0}),e.jsx(yt,{icon:e.jsx(Jt,{className:"w-5 h-5"}),title:"ÿπŸÑÿßŸÖÿ© ÿ£ÿ≥ÿ±ÿ© ŸÖŸÖŸäÿ≤ÿ©",desc:"ÿ¥ÿßÿ±ÿ© ÿ∞Ÿáÿ®Ÿäÿ© ÿ™ŸÖŸäÿ≤ŸÉ ÿπŸÜ ÿßŸÑÿ¢ÿÆÿ±ŸäŸÜ",included:!0,premium:!0}),e.jsx(yt,{icon:e.jsx(Da,{className:"w-5 h-5"}),title:"ÿßŸÇÿ™ÿ±ÿßÿ≠ŸÉ ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",desc:"ÿ∏ŸáŸàÿ± ÿ£ÿ≥ÿ±ÿ™ŸÉ ŸÅŸä ŸÇÿ≥ŸÖ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÖŸäÿ≤ÿ©",included:!0,premium:!0}),e.jsx(yt,{icon:e.jsx(St,{className:"w-5 h-5"}),title:"ÿßŸÑÿ≠ŸÖŸÑÿßÿ™ ÿßŸÑŸÖŸàÿ≥ŸÖŸäÿ©",desc:"ÿØÿÆŸàŸÑ ŸÖÿ¨ÿßŸÜŸä ŸÅŸä ÿ≠ŸÖŸÑÿßÿ™ ÿ±ŸÖÿ∂ÿßŸÜ ŸàÿßŸÑÿ£ÿπŸäÿßÿØ",included:!0,premium:!0})]})]}),e.jsx("div",{className:"mt-6 space-y-3",children:i==="premium"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-amber-100 text-amber-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),"ÿ£ŸÜÿ™ ŸÖÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"]}),e.jsx("button",{onClick:F,disabled:M,className:"w-full py-3 px-6 rounded-xl bg-red-50 hover:bg-red-100 text-red-600 font-semibold text-sm border border-red-200 transition-all duration-300 flex items-center justify-center gap-2",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-red-300 border-t-red-600 rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-4 h-4"}),"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ"]})})]}):e.jsxs("button",{onClick:D,disabled:k,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 text-white font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"w-6 h-6"}),"ÿßÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäŸëÿ≤",e.jsx(st,{className:"w-5 h-5"})]})]})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 px-6 py-4",children:e.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[e.jsx(ds,{className:"w-5 h-5 text-amber-400"}),"ŸÖŸÇÿßÿ±ŸÜÿ© ÿ≥ÿ±Ÿäÿπÿ© ÿ®ŸäŸÜ ÿßŸÑÿ®ÿßŸÇÿßÿ™"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:"ÿßŸÑŸÖŸäÿ≤ÿ©"}),e.jsx("th",{className:"px-6 py-4 text-center font-bold text-green-600",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5"}),"ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©"]})}),e.jsx("th",{className:"px-6 py-4 text-center font-bold text-amber-600",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),"ÿßŸÑÿ™ŸÖŸäŸëÿ≤"]})})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.jsx(Nt,{label:"ÿßŸÑÿ∏ŸáŸàÿ± ŸÅŸä ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ",free:!0,premium:!0}),e.jsx(Nt,{label:"ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",free:!0,premium:!0}),e.jsx(Nt,{label:"ÿµŸÅÿ≠ÿ© ÿÆÿßÿµÿ© ŸÑÿ£ÿ≥ÿ±ÿ™ŸÉ",free:!0,premium:!0}),e.jsx(Nt,{label:"ÿßŸÑÿ∏ŸáŸàÿ± ÿ£ÿπŸÑŸâ ŸÅŸä ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨",premium:!0}),e.jsx(Nt,{label:"ÿπŸÑÿßŸÖÿ© ÿ£ÿ≥ÿ±ÿ© ŸÖŸÖŸäÿ≤ÿ©",premium:!0}),e.jsx(Nt,{label:"ÿßŸÇÿ™ÿ±ÿßÿ≠ŸÉ ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",premium:!0}),e.jsx(Nt,{label:"ÿßŸÑÿ≠ŸÖŸÑÿßÿ™ ÿßŸÑŸÖŸàÿ≥ŸÖŸäÿ©",premium:!0})]})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-bold text-sky-600",children:"üí° ŸÖŸÑÿßÿ≠ÿ∏ÿ©:"})," ","ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ™ÿ±ŸÇŸäÿ© ÿ£Ÿà ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™. ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿßŸÑÿ™ÿ≤ÿßŸÖÿßÿ™ ÿ∑ŸàŸäŸÑÿ© ÿßŸÑŸÖÿØŸâ."]})})]})},yt=({icon:s,title:t,desc:n,included:i,premium:c})=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-xl transition ${i?c?"bg-gradient-to-r from-amber-100/50 to-yellow-100/50":"bg-white/50":"opacity-50"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${i?c?"bg-gradient-to-br from-amber-400 to-orange-400 text-white":"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:s}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:`font-bold ${i?"text-gray-800":"text-gray-400"}`,children:t}),c&&e.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-400 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:"ÿ≠ÿµÿ±Ÿä"})]}),e.jsx("p",{className:`text-sm ${i?"text-gray-500":"text-gray-400"}`,children:n})]}),i&&e.jsx(hs,{className:`w-5 h-5 flex-shrink-0 ${c?"text-amber-500":"text-green-500"}`})]}),Nt=({label:s,free:t,premium:n})=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4 text-gray-700 font-medium",children:s}),e.jsx("td",{className:"px-6 py-4 text-center",children:t?e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-green-100 rounded-full",children:e.jsx(hs,{className:"w-5 h-5 text-green-600"})}):e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:e.jsx("span",{className:"text-gray-400",children:"‚Äî"})})}),e.jsx("td",{className:"px-6 py-4 text-center",children:n?e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-amber-100 rounded-full",children:e.jsx(hs,{className:"w-5 h-5 text-amber-600"})}):e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:e.jsx("span",{className:"text-gray-400",children:"‚Äî"})})})]}),tr=5,pa=24,Rc=()=>{const{user:s}=$e(),t=Qe(),n=Ds(),[i,c]=a.useState([]),[y,r]=a.useState(!0),[k,$]=a.useState(!1),[M,I]=a.useState(!1),[N,A]=a.useState(0),p=a.useRef(null),[f,_]=a.useState({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""});a.useEffect(()=>{s&&m()},[s]);const m=async()=>{if(s)try{const h=pe(te(S,"promotions"),be("ownerId","==",s.uid)),D=(await ue(h)).docs.map(b=>{var E,o,w,U;return{id:b.id,...b.data(),expiresAt:(o=(E=b.data().expiresAt)==null?void 0:E.toDate)==null?void 0:o.call(E),createdAt:(U=(w=b.data().createdAt)==null?void 0:w.toDate)==null?void 0:U.call(w)}});D.sort((b,E)=>{var o,w;return(((o=E.createdAt)==null?void 0:o.getTime())||0)-(((w=b.createdAt)==null?void 0:w.getTime())||0)}),c(D)}catch(h){t.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™"),console.error(h)}finally{r(!1)}},j=h=>h.expiresAt?new Date>new Date(h.expiresAt):!1,L=h=>{var o;const F=(o=h.target.files)==null?void 0:o[0];if(!F)return;const D=F.type.startsWith("image/"),b=F.type.startsWith("video/");if(!D&&!b){t.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà");return}const E=b?50*1024*1024:10*1024*1024;if(F.size>E){t.warning(b?"ÿ≠ÿ¨ŸÖ ÿßŸÑŸÅŸäÿØŸäŸà Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 50 ŸÖŸäÿ¨ÿß":"ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 10 ŸÖŸäÿ¨ÿß");return}_({...f,type:b?"video":"image",mediaFile:F,mediaPreview:URL.createObjectURL(F)})},g=async h=>{if(h.preventDefault(),!!s){if(f.type!=="text"&&!f.mediaFile){t.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà");return}if(!f.title.trim()&&!f.description.trim()&&!f.mediaFile){t.warning("Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≠ÿ™ŸàŸâ ŸÑŸÑÿ•ÿπŸÑÿßŸÜ");return}try{I(!0);let F="";if(f.mediaFile){const b=f.mediaFile.name.replace(/\s+/g,"_").slice(-60),E=`promotions/${s.uid}_${Date.now()}_${b}`,o=js(gt,E),w=kt(o,f.mediaFile);await new Promise((U,B)=>{w.on("state_changed",Q=>{const O=Math.round(Q.bytesTransferred/Q.totalBytes*100);A(O)},B,async()=>{F=await ys(w.snapshot.ref),U()})})}const D=new Date;D.setHours(D.getHours()+pa),await Fe(te(S,"promotions"),{ownerId:s.uid,restaurantId:s.uid,type:f.type,title:f.title.trim(),description:f.description.trim(),mediaUrl:F,isActive:!0,isPaid:!0,price:tr,duration:pa,viewsCount:0,expiresAt:ia.fromDate(D),createdAt:J(),updatedAt:J()}),t.success(`ÿ™ŸÖ ŸÜÿ¥ÿ± ÿ•ÿπŸÑÿßŸÜŸÉ! ‚ú® ÿ≥Ÿäÿ∏Ÿáÿ± ŸÑŸÖÿØÿ© ${pa} ÿ≥ÿßÿπÿ©`),_({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""}),$(!1),A(0),m()}catch(F){t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ŸÜÿ¥ÿ± ÿßŸÑÿ•ÿπŸÑÿßŸÜ"),console.error(F)}finally{I(!1)}}},d=async h=>{if(await n.confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ•ÿπŸÑÿßŸÜÿü",{dangerous:!0}))try{await Ss(X(S,"promotions",h)),t.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ•ÿπŸÑÿßŸÜ"),m()}catch{t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}};return y?e.jsxs("div",{className:"flex items-center justify-center h-96",children:[e.jsx(qe,{className:"w-6 h-6 animate-spin ml-2"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."]}):e.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(Ks,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"ÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÖŸàŸÑÿ©"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"ÿ£ŸÜÿ¥ÿ¶ ÿ•ÿπŸÑÿßŸÜŸÉ Ÿàÿ≥Ÿäÿ∏Ÿáÿ± ŸÑŸÑÿπŸÖŸÑÿßÿ° ŸÅŸä ÿµŸÅÿ≠ÿ© ÿ£ÿ≥ÿ±ÿ™ŸÉ"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(ds,{className:"w-5 h-5 text-purple-500"}),e.jsxs("span",{className:"text-lg font-bold text-purple-700",children:[tr," ÿ±.ÿ≥ ŸÅŸÇÿ∑ ŸÑŸÖÿØÿ© ",pa," ÿ≥ÿßÿπÿ©"]}),e.jsx(ds,{className:"w-5 h-5 text-purple-500"})]}),e.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"ÿ£ÿ∂ŸÅ ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà ÿ£Ÿà ŸÜÿµ ÿ™ÿ±ŸàŸäÿ¨Ÿä ŸÑÿ£ÿ≥ÿ±ÿ™ŸÉ"})]}),!k&&e.jsxs("button",{onClick:()=>$(!0),className:"w-full py-4 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[e.jsx(vs,{className:"w-6 h-6"}),"ÿ•ŸÜÿ¥ÿßÿ° ÿ•ÿπŸÑÿßŸÜ ÿ¨ÿØŸäÿØ"]}),k&&e.jsxs("form",{onSubmit:g,className:"bg-white rounded-2xl shadow-xl p-6 space-y-4",children:[e.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:"ÿ•ŸÜÿ¥ÿßÿ° ÿ•ÿπŸÑÿßŸÜ ÿ¨ÿØŸäÿØ"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ŸÜŸàÿπ ÿßŸÑÿ•ÿπŸÑÿßŸÜ"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>_({...f,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${f.type==="text"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(it,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"ŸÜÿµ"})]}),e.jsxs("button",{type:"button",onClick:()=>{var h;_({...f,type:"image"}),(h=p.current)==null||h.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${f.type==="image"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(ta,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"ÿµŸàÿ±ÿ©"})]}),e.jsxs("button",{type:"button",onClick:()=>{var h;_({...f,type:"video"}),(h=p.current)==null||h.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${f.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(vl,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"ŸÅŸäÿØŸäŸà"})]})]})]}),e.jsx("input",{type:"file",ref:p,accept:"image/*,video/*",onChange:L,className:"hidden"}),f.mediaPreview&&e.jsxs("div",{className:"relative",children:[f.type==="video"?e.jsx("video",{src:f.mediaPreview,controls:!0,className:"w-full h-48 object-cover rounded-xl"}):e.jsx("img",{src:f.mediaPreview,alt:"ŸÖÿπÿßŸäŸÜÿ©",className:"w-full h-48 object-cover rounded-xl"}),e.jsx("button",{type:"button",onClick:()=>_({...f,mediaFile:null,mediaPreview:"",type:"text"}),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full",children:e.jsx(Ys,{className:"w-4 h-4"})})]}),f.type!=="text"&&!f.mediaPreview&&e.jsxs("button",{type:"button",onClick:()=>{var h;return(h=p.current)==null?void 0:h.click()},className:"w-full py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-purple-400 transition flex items-center justify-center gap-2",children:[e.jsx(aa,{className:"w-5 h-5"}),"ÿßÿÆÿ™ÿ± ",f.type==="video"?"ŸÅŸäÿØŸäŸà":"ÿµŸàÿ±ÿ©"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"text",value:f.title,onChange:h=>_({...f,title:h.target.value}),placeholder:"ŸÖÿ´ÿßŸÑ: ÿπÿ±ÿ∂ ÿÆÿßÿµ ÿßŸÑŸäŸàŸÖ!",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ÿßŸÑÿ¥ÿ±ÿ≠ ÿ£Ÿà ÿßŸÑŸàÿµŸÅ"}),e.jsx("textarea",{value:f.description,onChange:h=>_({...f,description:h.target.value}),placeholder:"ÿßŸÉÿ™ÿ® ÿ™ŸÅÿßÿµŸäŸÑ ÿ•ÿπŸÑÿßŸÜŸÉ ŸáŸÜÿß...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),M&&N>0&&e.jsx("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-full transition-all",style:{width:`${N}%`}})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:M,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:M?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑŸÜÿ¥ÿ±..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ks,{className:"w-5 h-5"}),"ŸÜÿ¥ÿ± ÿßŸÑÿ•ÿπŸÑÿßŸÜ (",tr," ÿ±.ÿ≥)"]})}),e.jsx("button",{type:"button",onClick:()=>{$(!1),_({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""})},className:"px-4 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-medium",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"font-bold text-lg text-gray-800",children:"ÿ•ÿπŸÑÿßŸÜÿßÿ™ŸÉ"}),i.length===0?e.jsxs("div",{className:"text-center py-10 text-gray-400",children:[e.jsx(Ks,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"ŸÑŸÖ ÿ™ŸÜÿ¥ÿ¶ ÿ£Ÿä ÿ•ÿπŸÑÿßŸÜÿßÿ™ ÿ®ÿπÿØ"})]}):i.map(h=>e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden ${j(h)?"opacity-60":""}`,children:[h.mediaUrl&&(h.type==="video"?e.jsx("video",{src:h.mediaUrl,controls:!0,className:"w-full h-48 object-cover"}):e.jsx("img",{src:h.mediaUrl,alt:h.title,className:"w-full h-48 object-cover"})),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[j(h)?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-500 text-xs font-medium rounded-full",children:[e.jsx(Ys,{className:"w-3 h-3"})," ŸÖŸÜÿ™ŸáŸä"]}):h.isActive?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-600 text-xs font-medium rounded-full",children:[e.jsx(De,{className:"w-3 h-3"})," ŸÜÿ¥ÿ∑"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-600 text-xs font-medium rounded-full",children:[e.jsx(Ye,{className:"w-3 h-3"})," ŸÅŸä ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±"]}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-600 text-xs font-medium rounded-full",children:[e.jsx(Ls,{className:"w-3 h-3"})," ",h.viewsCount," ŸÖÿ¥ÿßŸáÿØÿ©"]})]}),h.title&&e.jsx("h3",{className:"font-bold text-gray-800",children:h.title}),h.description&&e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:h.description}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:[h.expiresAt&&!j(h)&&e.jsxs(e.Fragment,{children:["ŸäŸÜÿ™ŸáŸä: ",new Date(h.expiresAt).toLocaleString("ar-SA")]}),j(h)&&"ÿßŸÜÿ™Ÿáÿ™ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑÿ•ÿπŸÑÿßŸÜ"]}),e.jsx("button",{onClick:()=>d(h.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",children:e.jsx(fs,{className:"w-4 h-4"})})]})]})]},h.id))]}),e.jsxs(re,{to:"/owner",className:"flex items-center justify-center gap-2 text-sky-600 hover:text-sky-700 py-4",children:[e.jsx(Is,{className:"w-5 h-5"}),"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ"]})]})},Ul=[{value:"percent_discount",label:"ÿÆÿµŸÖ ŸÜÿ≥ÿ®ÿ© %",icon:jr,desc:"ÿÆÿµŸÖ ŸÜÿ≥ÿ®ÿ© ŸÖÿ¶ŸàŸäÿ© ÿπŸÑŸâ ÿßŸÑÿ∑ŸÑÿ®"},{value:"fixed_discount",label:"ÿÆÿµŸÖ ŸÖÿ®ŸÑÿ∫ ÿ´ÿßÿ®ÿ™",icon:Bt,desc:"ÿÆÿµŸÖ ŸÖÿ®ŸÑÿ∫ ŸÖÿ≠ÿØÿØ ŸÖŸÜ ÿßŸÑÿ∑ŸÑÿ®"},{value:"bundle_meal",label:"Ÿàÿ¨ÿ®ÿ© ŸÖÿ¨ŸÖŸëÿπÿ©",icon:Oe,desc:"ŸÖÿ¨ŸÖŸàÿπÿ© ÿ£ÿµŸÜÿßŸÅ ÿ®ÿ≥ÿπÿ± ÿÆÿßÿµ"},{value:"buy_x_get_y",label:"ÿßÿ¥ÿ™ÿ±Ÿê Ÿàÿßÿ≠ÿµŸÑ",icon:Es,desc:"ÿßÿ¥ÿ™ÿ±Ÿê 2 Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ 1 ŸÖÿ¨ÿßŸÜÿßŸã"}],Pc=[{value:"iftar_package",label:"ÿ®ÿßŸÇÿ© ÿ•ŸÅÿ∑ÿßÿ±",icon:Wn,desc:"Ÿàÿ¨ÿ®ÿ© ÿ•ŸÅÿ∑ÿßÿ± ŸÖÿ™ŸÉÿßŸÖŸÑÿ©",color:"from-amber-500 to-orange-600"},{value:"suhoor_package",label:"ÿ®ÿßŸÇÿ© ÿ≥ÿ≠Ÿàÿ±",icon:fr,desc:"Ÿàÿ¨ÿ®ÿ© ÿ≥ÿ≠Ÿàÿ± ŸÖŸÖŸäÿ≤ÿ©",color:"from-indigo-500 to-purple-600"},{value:"family_bundle",label:"ÿπÿ±ÿ∂ ÿπÿßÿ¶ŸÑŸä",icon:nt,desc:"ÿ®ÿßŸÇÿ© ŸÑŸÑÿπÿßÿ¶ŸÑÿ© ÿ®ÿ≥ÿπÿ± ÿÆÿßÿµ",color:"from-emerald-500 to-teal-600"},{value:"discount",label:"ÿÆÿµŸÖ ÿ±ŸÖÿ∂ÿßŸÜŸä",icon:Bt,desc:"ÿÆÿµŸÖ ÿÆÿßÿµ ÿ®ŸÖŸÜÿßÿ≥ÿ®ÿ© ÿ±ŸÖÿ∂ÿßŸÜ",color:"from-rose-500 to-pink-600"}],Tc=Ul,ar={offerType:"percent_discount",title:"",description:"",discountPercent:10,discountAmount:5,minOrderAmount:0,bundleItems:[],bundlePrice:0,buyQuantity:2,getQuantity:1,applicableItemIds:[],expiresAt:"",imageUrl:"",originalPrice:0,offerPrice:0,servesCount:4},$c=()=>{const{user:s}=$e(),t=Qe(),[n]=la(),i=n.get("type")==="ramadan"&&Lt(),[c,y]=a.useState([]),[r,k]=a.useState([]),[$,M]=a.useState(!0),[I,N]=a.useState(!1),[A,p]=a.useState(!1),[f,_]=a.useState(null),[m,j]=a.useState({...ar,offerType:i?"iftar_package":"percent_discount"}),[L,g]=a.useState(null),[d,h]=a.useState(!1),[F,D]=a.useState(0),[b,E]=a.useState(null),o=a.useRef(null);a.useEffect(()=>{if(!s)return;(async()=>{try{const v=await Ce(X(S,"restaurants",s.uid));v.exists()&&g(v.data());const H=pe(te(S,"offers"),be("ownerId","==",s.uid)),ce=(await ue(H)).docs.map(ye=>({id:ye.id,...ye.data()})),ie=pe(te(S,"ramadanOffers"),be("ownerId","==",s.uid)),ge=(await ue(ie)).docs.map(ye=>({id:ye.id,...ye.data(),isRamadanOffer:!0}));y(i?ge:ce);const T=pe(te(S,"menuItems"),be("ownerId","==",s.uid)),se=await ue(T);k(se.docs.map(ye=>({id:ye.id,...ye.data()})))}catch(v){console.error("Error fetching data:",v),t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{M(!1)}})()},[s,i]);const w=async u=>{if(s){h(!0),D(0);try{const v=na(Ns),H=`ramadan_offers/${s.uid}/${Date.now()}_${u.name}`,Y=js(v,H),ce=kt(Y,u);ce.on("state_changed",ie=>{const je=ie.bytesTransferred/ie.totalBytes*100;D(je)},ie=>{console.error("Upload error:",ie),t.error("ŸÅÿ¥ŸÑ ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©"),h(!1)},async()=>{const ie=await ys(ce.snapshot.ref);j(je=>({...je,imageUrl:ie})),E(ie),h(!1),t.success("ÿ™ŸÖ ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ© ‚úÖ")})}catch(v){console.error("Error uploading image:",v),t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©"),h(!1)}}},U=u=>{var H;const v=(H=u.target.files)==null?void 0:H[0];if(v){if(v.size>5*1024*1024){t.error("ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 5MB");return}const Y=new FileReader;Y.onload=ce=>{var ie;E((ie=ce.target)==null?void 0:ie.result)},Y.readAsDataURL(v),w(v)}},B=u=>["iftar_package","suhoor_package","family_bundle","discount"].includes(u),Q=async()=>{if(s){if(!m.title.trim()){t.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿπŸÜŸàÿßŸÜ ÿßŸÑÿπÿ±ÿ∂");return}if(i&&B(m.offerType)&&m.offerType!=="discount"&&(!m.offerPrice||m.offerPrice<=0)){t.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ≥ÿπÿ± ÿßŸÑÿπÿ±ÿ∂");return}N(!0);try{const u=i?"ramadanOffers":"offers",v={ownerId:s.uid,restaurantId:s.uid,restaurantName:L==null?void 0:L.name,restaurantLogo:L==null?void 0:L.logoUrl,offerType:m.offerType,title:m.title.trim(),description:m.description.trim(),isActive:!0,viewsCount:0,usedCount:0,updatedAt:J()};if(i&&B(m.offerType)?(v.imageUrl=m.imageUrl||"",v.originalPrice=m.originalPrice||0,v.offerPrice=m.offerPrice||0,v.servesCount=m.servesCount||4,v.isRamadanOffer=!0,m.originalPrice>0&&m.offerPrice>0&&(v.discountPercent=Math.round((m.originalPrice-m.offerPrice)/m.originalPrice*100))):m.offerType==="percent_discount"?(v.discountPercent=m.discountPercent,v.minOrderAmount=m.minOrderAmount):m.offerType==="fixed_discount"?(v.discountAmount=m.discountAmount,v.minOrderAmount=m.minOrderAmount):m.offerType==="bundle_meal"?(v.bundleItems=m.bundleItems,v.bundlePrice=m.bundlePrice,v.bundleOriginalPrice=m.bundleItems.reduce((H,Y)=>H+Y.originalPrice*Y.quantity,0)):m.offerType==="buy_x_get_y"&&(v.buyQuantity=m.buyQuantity,v.getQuantity=m.getQuantity,v.applicableItemIds=m.applicableItemIds,v.applicableItemNames=r.filter(H=>m.applicableItemIds.includes(H.id)).map(H=>H.name)),m.expiresAt&&(v.expiresAt=new Date(m.expiresAt)),f)await xe(X(S,u,f),v),y(H=>H.map(Y=>Y.id===f?{...Y,...v}:Y)),t.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿ±ÿ∂ ‚úÖ");else{v.createdAt=J();const H=await Fe(te(S,u),v);y(Y=>[{id:H.id,...v},...Y]),t.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπÿ±ÿ∂ ‚úÖ")}p(!1),_(null),j({...ar,offerType:i?"iftar_package":"percent_discount"}),E(null)}catch(u){console.error("Error saving offer:",u),t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿπÿ±ÿ∂")}finally{N(!1)}}},O=async u=>{const v=u.isRamadanOffer?"ramadanOffers":"offers";try{await xe(X(S,v,u.id),{isActive:!u.isActive,updatedAt:J()}),y(H=>H.map(Y=>Y.id===u.id?{...Y,isActive:!Y.isActive}:Y)),t.success(u.isActive?"ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿπÿ±ÿ∂":"ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿπÿ±ÿ∂")}catch{t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}},C=async(u,v)=>{if(!confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿπÿ±ÿ∂ÿü"))return;const H=i?"ramadanOffers":"offers";try{await Ss(X(S,H,u)),y(Y=>Y.filter(ce=>ce.id!==u)),t.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿπÿ±ÿ∂")}catch{t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}},P=u=>{_(u.id),j({offerType:u.offerType,title:u.title,description:u.description||"",discountPercent:u.discountPercent||10,discountAmount:u.discountAmount||5,minOrderAmount:u.minOrderAmount||0,bundleItems:u.bundleItems||[],bundlePrice:u.bundlePrice||0,buyQuantity:u.buyQuantity||2,getQuantity:u.getQuantity||1,applicableItemIds:u.applicableItemIds||[],expiresAt:u.expiresAt?new Date(u.expiresAt).toISOString().slice(0,16):"",imageUrl:u.imageUrl||"",originalPrice:u.originalPrice||0,offerPrice:u.offerPrice||0,servesCount:u.servesCount||4}),E(u.imageUrl||null),p(!0)},x=u=>{const v=m.bundleItems.find(H=>H.itemId===u.id);j(v?{...m,bundleItems:m.bundleItems.map(H=>H.itemId===u.id?{...H,quantity:H.quantity+1}:H)}:{...m,bundleItems:[...m.bundleItems,{itemId:u.id,itemName:u.name,quantity:1,originalPrice:u.price}]})},z=u=>{j({...m,bundleItems:m.bundleItems.filter(v=>v.itemId!==u)})},R=m.bundleItems.reduce((u,v)=>u+v.originalPrice*v.quantity,0);return $?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ts,{className:"w-8 h-8 text-sky-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`flex items-center justify-between ${i?"bg-gradient-to-r from-purple-900 to-emerald-900 -mx-4 -mt-4 p-4 rounded-b-2xl":""}`,children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${i?"text-amber-300":"text-sky-700"}`,children:i?"üåô ÿπÿ±Ÿàÿ∂ ÿ±ŸÖÿ∂ÿßŸÜ":"üéÅ ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑÿÆÿßÿµÿ©"}),e.jsx("p",{className:`text-sm mt-1 ${i?"text-purple-200":"text-gray-500"}`,children:i?"ÿ£ÿ∂ŸÅ ÿ®ÿßŸÇÿßÿ™ ÿ•ŸÅÿ∑ÿßÿ± Ÿàÿ≥ÿ≠Ÿàÿ± Ÿàÿπÿ±Ÿàÿ∂ ÿ±ŸÖÿ∂ÿßŸÜŸäÿ© ŸÖŸÖŸäÿ≤ÿ©":"ÿ£ÿ∂ŸÅ ÿπÿ±Ÿàÿ∂ ÿ™ÿ¨ÿ∞ÿ® ÿßŸÑÿπŸÖŸÑÿßÿ° Ÿàÿ™ÿ≤ŸäÿØ ŸÖÿ®Ÿäÿπÿßÿ™ŸÉ"})]}),e.jsxs("button",{onClick:()=>{p(!0),_(null),j({...ar,offerType:i?"iftar_package":"percent_discount"}),E(null)},className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold shadow-lg hover:scale-105 transition ${i?"bg-gradient-to-r from-amber-400 to-amber-500 text-purple-900":"bg-gradient-to-r from-sky-500 to-sky-600 text-white"}`,children:[e.jsx(vs,{className:"w-5 h-5"}),i?"ÿπÿ±ÿ∂ ÿ±ŸÖÿ∂ÿßŸÜŸä":"ÿπÿ±ÿ∂ ÿ¨ÿØŸäÿØ"]})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:`p-4 text-white sticky top-0 z-10 ${i?"bg-gradient-to-r from-purple-900 to-emerald-900":"bg-gradient-to-r from-sky-500 to-sky-600"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold",children:f?i?"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ ÿπÿ±ÿ∂ ÿ±ŸÖÿ∂ÿßŸÜ":"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿπÿ±ÿ∂":i?"üåô ÿ•ÿ∂ÿßŸÅÿ© ÿπÿ±ÿ∂ ÿ±ŸÖÿ∂ÿßŸÜŸä":"‚ûï ÿ•ÿ∂ÿßŸÅÿ© ÿπÿ±ÿ∂ ÿ¨ÿØŸäÿØ"}),e.jsx("button",{onClick:()=>{p(!1),E(null)},className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜŸàÿπ ÿßŸÑÿπÿ±ÿ∂"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(i?Pc:Ul).map(u=>e.jsxs("button",{onClick:()=>j({...m,offerType:u.value}),className:`p-3 rounded-xl border-2 text-right transition ${m.offerType===u.value?i?"border-purple-500 bg-purple-50":"border-sky-500 bg-sky-50":"border-gray-200 hover:border-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(u.icon,{className:`w-5 h-5 ${m.offerType===u.value?i?"text-purple-600":"text-sky-600":"text-gray-400"}`}),e.jsx("span",{className:"font-bold text-sm",children:u.label})]}),e.jsx("p",{className:"text-xs text-gray-500",children:u.desc})]},u.value))})]}),i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿµŸàÿ±ÿ© ÿßŸÑÿπÿ±ÿ∂"}),e.jsxs("div",{className:"border-2 border-dashed border-purple-300 rounded-xl p-4 text-center bg-purple-50/50",children:[b?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:b,alt:"ŸÖÿπÿßŸäŸÜÿ©",className:"w-full h-48 object-cover rounded-xl"}),e.jsx("button",{onClick:()=>{E(null),j({...m,imageUrl:""})},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:e.jsx(_e,{className:"w-4 h-4"})})]}):e.jsx("div",{onClick:()=>{var u;return(u=o.current)==null?void 0:u.click()},className:"cursor-pointer py-8",children:d?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ts,{className:"w-10 h-10 text-purple-500 animate-spin mx-auto"}),e.jsxs("p",{className:"text-purple-600 font-bold",children:[Math.round(F),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-12 h-12 text-purple-400 mx-auto mb-2"}),e.jsx("p",{className:"text-purple-600 font-semibold",children:"ÿßÿ∂ÿ∫ÿ∑ ŸÑÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿßŸÑÿπÿ±ÿ∂"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG ÿ≠ÿ™Ÿâ 5MB"})]})}),e.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:U,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿπŸÜŸàÿßŸÜ ÿßŸÑÿπÿ±ÿ∂ *"}),e.jsx("input",{type:"text",value:m.title,onChange:u=>j({...m,title:u.target.value}),placeholder:"ŸÖÿ´ÿßŸÑ: ÿπÿ±ÿ∂ ŸÜŸáÿßŸäÿ© ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸàÿµŸÅ ÿßŸÑÿπÿ±ÿ∂"}),e.jsx("textarea",{value:m.description,onChange:u=>j({...m,description:u.target.value}),placeholder:i?"ŸàÿµŸÅ ŸÖÿ≠ÿ™ŸàŸäÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿ©...":"ŸàÿµŸÅ ŸÖÿÆÿ™ÿµÿ± ŸÑŸÑÿπÿ±ÿ∂...",rows:2,className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none resize-none"})]}),i&&B(m.offerType)&&m.offerType!=="discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-gradient-to-br from-purple-50 to-amber-50 rounded-xl border-2 border-purple-200",children:[e.jsxs("h4",{className:"font-bold text-purple-800 flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ©"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿ™ŸÉŸÅŸä ŸÉŸÖ ÿ¥ÿÆÿµÿü"}),e.jsx("div",{className:"flex gap-2",children:[2,4,6,8,10].map(u=>e.jsx("button",{type:"button",onClick:()=>j({...m,servesCount:u}),className:`px-4 py-2 rounded-lg font-bold transition ${m.servesCount===u?"bg-purple-600 text-white":"bg-white border border-purple-200 text-purple-600 hover:bg-purple-50"}`,children:u},u))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿµŸÑŸä (ÿ±.ÿ≥)"}),e.jsx("input",{type:"number",value:m.originalPrice||"",onChange:u=>j({...m,originalPrice:Number(u.target.value)||0}),placeholder:"150",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿ≥ÿπÿ± ÿßŸÑÿπÿ±ÿ∂ (ÿ±.ÿ≥) *"}),e.jsx("input",{type:"number",value:m.offerPrice||"",onChange:u=>j({...m,offerPrice:Number(u.target.value)||0}),placeholder:"99",className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]})]}),m.originalPrice>0&&m.offerPrice>0&&m.originalPrice>m.offerPrice&&e.jsxs("div",{className:"bg-green-100 text-green-700 p-3 rounded-xl text-center font-bold",children:["ÿ™ŸàŸÅŸäÿ± ",Math.round((m.originalPrice-m.offerPrice)/m.originalPrice*100),"% üéâ"]})]}),i&&m.offerType==="discount"&&e.jsx("div",{className:"space-y-4 p-4 bg-rose-50 rounded-xl",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿÆÿµŸÖ %"}),e.jsx("input",{type:"number",value:m.discountPercent,onChange:u=>j({...m,discountPercent:Number(u.target.value)}),min:1,max:90,className:"w-full border-2 border-rose-200 rounded-xl px-4 py-3 focus:border-rose-500 focus:outline-none"})]})}),!i&&m.offerType==="percent_discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-amber-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿÆÿµŸÖ %"}),e.jsx("input",{type:"number",value:m.discountPercent,onChange:u=>j({...m,discountPercent:Number(u.target.value)}),min:1,max:90,className:"w-full border-2 border-amber-200 rounded-xl px-4 py-3 focus:border-amber-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ∑ŸÑÿ® (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"number",value:m.minOrderAmount||"",onChange:u=>j({...m,minOrderAmount:Number(u.target.value)||0}),placeholder:"0 = ÿ®ÿØŸàŸÜ ÿ≠ÿØ ÿ£ÿØŸÜŸâ",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]})]}),!i&&m.offerType==="fixed_discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-green-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿÆÿµŸÖ (ÿ±.ÿ≥)"}),e.jsx("input",{type:"number",value:m.discountAmount,onChange:u=>j({...m,discountAmount:Number(u.target.value)}),min:1,className:"w-full border-2 border-green-200 rounded-xl px-4 py-3 focus:border-green-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ∑ŸÑÿ® (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"number",value:m.minOrderAmount||"",onChange:u=>j({...m,minOrderAmount:Number(u.target.value)||0}),placeholder:"0 = ÿ®ÿØŸàŸÜ ÿ≠ÿØ ÿ£ÿØŸÜŸâ",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]})]}),!i&&m.offerType==="bundle_meal"&&e.jsxs("div",{className:"space-y-4 p-4 bg-purple-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿ£ÿµŸÜÿßŸÅ ÿßŸÑŸàÿ¨ÿ®ÿ©"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:m.bundleItems.map(u=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white rounded-full text-sm border",children:[u.itemName," √ó ",u.quantity,e.jsx("button",{onClick:()=>z(u.itemId),className:"text-red-500 hover:text-red-700",children:e.jsx(_e,{className:"w-4 h-4"})})]},u.itemId))}),e.jsxs("select",{onChange:u=>{const v=r.find(H=>H.id===u.target.value);v&&x(v),u.target.value=""},className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"+ ÿ£ÿ∂ŸÅ ÿµŸÜŸÅ ŸÑŸÑŸàÿ¨ÿ®ÿ©"}),r.filter(u=>u.available!==!1).map(u=>e.jsxs("option",{value:u.id,children:[u.name," - ",u.price," ÿ±.ÿ≥"]},u.id))]})]}),R>0&&e.jsxs("div",{className:"bg-white p-3 rounded-xl",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿµŸÑŸä: ",e.jsxs("span",{className:"line-through",children:[R," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"ÿ≥ÿπÿ± ÿßŸÑÿπÿ±ÿ∂"}),e.jsx("input",{type:"number",value:m.bundlePrice||"",onChange:u=>j({...m,bundlePrice:Number(u.target.value)}),placeholder:`ÿßŸÇÿ™ÿ±ÿ≠: ${(R*.8).toFixed(0)} ÿ±.ÿ≥`,className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]})]})]}),!i&&m.offerType==="buy_x_get_y"&&e.jsxs("div",{className:"space-y-4 p-4 bg-pink-50 rounded-xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿßÿ¥ÿ™ÿ±Ÿê"}),e.jsx("input",{type:"number",value:m.buyQuantity,onChange:u=>j({...m,buyQuantity:Number(u.target.value)}),min:1,className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ"}),e.jsx("input",{type:"number",value:m.getQuantity,onChange:u=>j({...m,getQuantity:Number(u.target.value)}),min:1,className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿßŸÑÿ£ÿµŸÜÿßŸÅ ÿßŸÑŸÖÿ¥ŸÖŸàŸÑÿ©"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:m.applicableItemIds.map(u=>{const v=r.find(H=>H.id===u);return v?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white rounded-full text-sm border",children:[v.name,e.jsx("button",{onClick:()=>j({...m,applicableItemIds:m.applicableItemIds.filter(H=>H!==u)}),className:"text-red-500",children:e.jsx(_e,{className:"w-4 h-4"})})]},u):null})}),e.jsxs("select",{onChange:u=>{u.target.value&&!m.applicableItemIds.includes(u.target.value)&&j({...m,applicableItemIds:[...m.applicableItemIds,u.target.value]}),u.target.value=""},className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"+ ÿ£ÿ∂ŸÅ ÿµŸÜŸÅ"}),r.filter(u=>u.available!==!1&&!m.applicableItemIds.includes(u.id)).map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿπÿ±ÿ∂ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"datetime-local",value:m.expiresAt,onChange:u=>j({...m,expiresAt:u.target.value}),className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{onClick:Q,disabled:I,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-sky-500 to-sky-600 text-white rounded-xl font-bold shadow-lg hover:scale-[1.02] transition disabled:opacity-50",children:[I?e.jsx(ts,{className:"w-5 h-5 animate-spin"}):e.jsx(wr,{className:"w-5 h-5"}),f?"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™":"ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπÿ±ÿ∂"]}),e.jsx("button",{onClick:()=>p(!1),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]})}),c.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Es,{className:"w-10 h-10 text-sky-500"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿπÿ±Ÿàÿ∂ ÿ≠ÿßŸÑŸäÿßŸã"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ÿ£ÿ∂ŸÅ ÿπÿ±Ÿàÿ∂ ŸÑÿ¨ÿ∞ÿ® ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ°"})]}):e.jsx("div",{className:"grid gap-4",children:c.map(u=>{var ce;const v=Tc.find(ie=>ie.value===u.offerType),H=(v==null?void 0:v.icon)||Bt,Y=u.expiresAt&&new Date(u.expiresAt)<new Date;return e.jsx("div",{className:`bg-white rounded-2xl shadow-md overflow-hidden border-2 transition ${!u.isActive||Y?"border-gray-200 opacity-60":"border-sky-100"}`,children:e.jsxs("div",{className:"flex items-stretch",children:[e.jsx("div",{className:`w-24 flex-shrink-0 flex items-center justify-center ${u.offerType==="percent_discount"?"bg-amber-100":u.offerType==="fixed_discount"?"bg-green-100":u.offerType==="bundle_meal"?"bg-purple-100":"bg-pink-100"}`,children:e.jsx(H,{className:`w-10 h-10 ${u.offerType==="percent_discount"?"text-amber-600":u.offerType==="fixed_discount"?"text-green-600":u.offerType==="bundle_meal"?"text-purple-600":"text-pink-600"}`})}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:u.title}),e.jsx("p",{className:"text-sm text-gray-500",children:v==null?void 0:v.label})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>O(u),className:`p-2 rounded-lg transition ${u.isActive?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:u.isActive?"ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿπÿ±ÿ∂":"ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿπÿ±ÿ∂",children:u.isActive?e.jsx(Ls,{className:"w-4 h-4"}):e.jsx(Gn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>P(u),className:"p-2 rounded-lg bg-sky-100 text-sky-600 hover:bg-sky-200 transition",children:e.jsx(Yn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(u.id),className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition",children:e.jsx(fs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[u.offerType==="percent_discount"&&e.jsxs("p",{className:"text-amber-600 font-bold",children:["ÿÆÿµŸÖ ",u.discountPercent,"%"]}),u.offerType==="fixed_discount"&&e.jsxs("p",{className:"text-green-600 font-bold",children:["ÿÆÿµŸÖ ",u.discountAmount," ÿ±.ÿ≥"]}),u.offerType==="bundle_meal"&&e.jsxs("p",{className:"text-purple-600 font-bold",children:[(ce=u.bundleItems)==null?void 0:ce.length," ÿ£ÿµŸÜÿßŸÅ ÿ®ŸÄ ",u.bundlePrice," ÿ±.ÿ≥",e.jsxs("span",{className:"text-gray-400 line-through mr-2",children:[u.bundleOriginalPrice," ÿ±.ÿ≥"]})]}),u.offerType==="buy_x_get_y"&&e.jsxs("p",{className:"text-pink-600 font-bold",children:["ÿßÿ¥ÿ™ÿ±Ÿê ",u.buyQuantity," Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ",u.getQuantity," ŸÖÿ¨ÿßŸÜÿßŸã"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ls,{className:"w-3 h-3"})," ",u.viewsCount||0," ŸÖÿ¥ÿßŸáÿØÿ©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(us,{className:"w-3 h-3"})," ",u.usedCount||0," ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ"]}),Y&&e.jsxs("span",{className:"text-red-500 flex items-center gap-1",children:[e.jsx(Ye,{className:"w-3 h-3"})," ŸÖŸÜÿ™ŸáŸä"]})]})]})]})},u.id)})})]})},Fc=24,Ec=()=>{const{user:s}=$e(),t=Qe(),[n,i]=a.useState([]),[c,y]=a.useState([]),[r,k]=a.useState(!0),[$,M]=a.useState(!1),[I,N]=a.useState(!1),[A,p]=a.useState(0),[f,_]=a.useState(null),m=a.useRef(null),[j,L]=a.useState({type:"image",mediaFile:null,mediaPreview:"",caption:"",backgroundColor:"#0ea5e9",textColor:"#ffffff",menuItemId:""});a.useEffect(()=>{s&&g()},[s]);const g=async()=>{if(s)try{const o=await Ce(X(S,"restaurants",s.uid));o.exists()&&_(o.data());const w=pe(te(S,"stories"),be("ownerId","==",s.uid)),U=await ue(w),B=new Date,Q=U.docs.map(P=>{var x,z,R,u;return{id:P.id,...P.data(),expiresAt:(z=(x=P.data().expiresAt)==null?void 0:x.toDate)==null?void 0:z.call(x),createdAt:(u=(R=P.data().createdAt)==null?void 0:R.toDate)==null?void 0:u.call(R)}}).filter(P=>P.expiresAt&&new Date(P.expiresAt)>B).sort((P,x)=>{var z,R;return(((z=x.createdAt)==null?void 0:z.getTime())||0)-(((R=P.createdAt)==null?void 0:R.getTime())||0)});i(Q);const O=pe(te(S,"menuItems"),be("ownerId","==",s.uid)),C=await ue(O);y(C.docs.map(P=>({id:P.id,...P.data()})))}catch(o){console.error("Error loading data:",o),t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{k(!1)}},d=o=>{var O;const w=(O=o.target.files)==null?void 0:O[0];if(!w)return;const U=w.type.startsWith("image/"),B=w.type.startsWith("video/");if(!U&&!B){t.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà");return}const Q=B?30*1024*1024:10*1024*1024;if(w.size>Q){t.warning(B?"ÿ≠ÿ¨ŸÖ ÿßŸÑŸÅŸäÿØŸäŸà Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 30 ŸÖŸäÿ¨ÿß":"ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 10 ŸÖŸäÿ¨ÿß");return}L({...j,type:B?"video":"image",mediaFile:w,mediaPreview:URL.createObjectURL(w)})},h=async()=>{if(s){if(j.type!=="text"&&!j.mediaFile){t.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà");return}if(j.type==="text"&&!j.caption.trim()){t.warning("Ÿäÿ±ÿ¨Ÿâ ŸÉÿ™ÿßÿ®ÿ© ŸÜÿµ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä");return}N(!0);try{let o="";if(j.mediaFile){const O=j.mediaFile.name.split(".").pop(),C=`stories/${s.uid}/${Date.now()}.${O}`,P=js(gt,C),x=kt(P,j.mediaFile);await new Promise((z,R)=>{x.on("state_changed",u=>{const v=u.bytesTransferred/u.totalBytes*100;p(v)},R,async()=>{o=await ys(x.snapshot.ref),z()})})}const w=new Date;w.setHours(w.getHours()+Fc);const U=c.find(O=>O.id===j.menuItemId),B={ownerId:s.uid,restaurantId:s.uid,restaurantName:f==null?void 0:f.name,restaurantLogo:f==null?void 0:f.logoUrl,type:j.type,mediaUrl:o||void 0,caption:j.caption.trim()||void 0,backgroundColor:j.type==="text"?j.backgroundColor:void 0,textColor:j.type==="text"?j.textColor:void 0,menuItemId:j.menuItemId||void 0,menuItemName:U==null?void 0:U.name,viewsCount:0,viewedBy:[],expiresAt:ia.fromDate(w),createdAt:J()},Q=await Fe(te(S,"stories"),B);console.log("‚úÖ Story created successfully:",Q.id),i(O=>[{id:Q.id,...B,expiresAt:w,createdAt:new Date},...O]),t.success("ÿ™ŸÖ ŸÜÿ¥ÿ± ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä! üéâ"),M(!1),D()}catch(o){console.error("‚ùå Error uploading story:",o),console.error("Error code:",o==null?void 0:o.code),console.error("Error message:",o==null?void 0:o.message),t.error(`ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: ${(o==null?void 0:o.message)||"ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"}`)}finally{N(!1),p(0)}}},F=async o=>{if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿäÿü"))try{await Ss(X(S,"stories",o)),i(w=>w.filter(U=>U.id!==o)),t.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä")}catch{t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}},D=()=>{L({type:"image",mediaFile:null,mediaPreview:"",caption:"",backgroundColor:"#0ea5e9",textColor:"#ffffff",menuItemId:""}),m.current&&(m.current.value="")},b=o=>{const w=new Date,U=new Date(o).getTime()-w.getTime(),B=Math.floor(U/(1e3*60*60)),Q=Math.floor(U%(1e3*60*60)/(1e3*60));return B>0?`${B} ÿ≥ÿßÿπÿ©`:`${Q} ÿØŸÇŸäŸÇÿ©`},E=["#0ea5e9","#8b5cf6","#ec4899","#f97316","#22c55e","#1f2937","#dc2626","#0891b2"];return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ts,{className:"w-8 h-8 text-sky-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-700",children:"üì∏ ÿ≥ÿ™Ÿàÿ±Ÿä ÿßŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"ÿ¥ÿßÿ±ŸÉ ÿ∑ÿ®ÿÆ ÿßŸÑŸäŸàŸÖ Ÿàÿπÿ±Ÿàÿ∂ŸÉ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ°"})]}),e.jsxs("button",{onClick:()=>{M(!0),D()},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-bold shadow-lg hover:scale-105 transition",children:[e.jsx(vs,{className:"w-5 h-5"}),"ÿ≥ÿ™Ÿàÿ±Ÿä ÿ¨ÿØŸäÿØ"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-4 border border-pink-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-pink-700",children:[e.jsx(ds,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold",children:"ÿ≥ÿ™Ÿàÿ±Ÿä ŸÖÿ¨ÿßŸÜŸä!"})]}),e.jsx("p",{className:"text-sm text-pink-600 mt-1",children:"ÿ¥ÿßÿ±ŸÉ ÿµŸàÿ± ÿßŸÑÿ∑ÿ®ÿÆ ŸàÿßŸÑÿπÿ±Ÿàÿ∂ ŸÖÿπ ÿπŸÖŸÑÿßÿ¶ŸÉ. ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä Ÿäÿ∏Ÿáÿ± ŸÑŸÄ 24 ÿ≥ÿßÿπÿ© ÿ´ŸÖ ŸäÿÆÿ™ŸÅŸä ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã."})]}),$&&e.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 p-4 text-white sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold",children:"üì∏ ÿ≥ÿ™Ÿàÿ±Ÿä ÿ¨ÿØŸäÿØ"}),e.jsx("button",{onClick:()=>M(!1),className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜŸàÿπ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>L({...j,type:"image",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition ${j.type==="image"?"border-pink-500 bg-pink-50":"border-gray-200"}`,children:[e.jsx(ta,{className:`w-6 h-6 ${j.type==="image"?"text-pink-600":"text-gray-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:"ÿµŸàÿ±ÿ©"})]}),e.jsxs("button",{onClick:()=>L({...j,type:"video",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition ${j.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(vl,{className:`w-6 h-6 ${j.type==="video"?"text-purple-600":"text-gray-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:"ŸÅŸäÿØŸäŸà"})]}),e.jsxs("button",{onClick:()=>L({...j,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition ${j.type==="text"?"border-sky-500 bg-sky-50":"border-gray-200"}`,children:[e.jsx(Kn,{className:`w-6 h-6 ${j.type==="text"?"text-sky-600":"text-gray-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:"ŸÜÿµ"})]})]})]}),(j.type==="image"||j.type==="video")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:j.type==="image"?"üì∑ ÿßÿÆÿ™ÿ± ÿµŸàÿ±ÿ©":"üé¨ ÿßÿÆÿ™ÿ± ŸÅŸäÿØŸäŸà"}),e.jsx("input",{ref:m,type:"file",accept:j.type==="video"?"video/*":"image/*",onChange:d,className:"hidden"}),j.mediaPreview?e.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-black aspect-[9/16] max-h-[300px]",children:[j.type==="video"?e.jsx("video",{src:j.mediaPreview,className:"w-full h-full object-contain",controls:!0}):e.jsx("img",{src:j.mediaPreview,alt:"Preview",className:"w-full h-full object-contain"}),e.jsx("button",{onClick:()=>{L({...j,mediaFile:null,mediaPreview:""}),m.current&&(m.current.value="")},className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full",children:e.jsx(_e,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>{var o;return(o=m.current)==null?void 0:o.click()},className:"w-full aspect-[9/16] max-h-[200px] border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-pink-400 hover:bg-pink-50 transition",children:[e.jsx(aa,{className:"w-10 h-10 text-gray-400"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"ÿßÿ∂ÿ∫ÿ∑ ŸÑŸÑÿ±ŸÅÿπ"}),e.jsx("span",{className:"text-xs text-gray-400",children:j.type==="video"?"ÿ≠ÿØ 30 ŸÖŸäÿ¨ÿß":"ÿ≠ÿØ 10 ŸÖŸäÿ¨ÿß"})]})]}),j.type==="text"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-[9/16] max-h-[250px] rounded-xl flex items-center justify-center p-6",style:{backgroundColor:j.backgroundColor},children:e.jsx("p",{className:"text-center text-xl font-bold leading-relaxed",style:{color:j.textColor},children:j.caption||"ÿßŸÉÿ™ÿ® ŸÜÿµ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä..."})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÑŸàŸÜ ÿßŸÑÿÆŸÑŸÅŸäÿ©"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:E.map(o=>e.jsx("button",{onClick:()=>L({...j,backgroundColor:o}),className:`w-10 h-10 rounded-full transition-transform ${j.backgroundColor===o?"ring-4 ring-pink-300 scale-110":""}`,style:{backgroundColor:o}},o))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:j.type==="text"?"ŸÜÿµ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä *":"ŸÜÿµ ŸÖÿµÿßÿ≠ÿ® (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("textarea",{value:j.caption,onChange:o=>L({...j,caption:o.target.value}),placeholder:j.type==="text"?"ÿßŸÉÿ™ÿ® ŸÜÿµ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä...":"ŸÖÿ´ÿßŸÑ: ÿ∑ÿ®ÿÆ ÿßŸÑŸäŸàŸÖ üçö",rows:3,className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none resize-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[e.jsx(us,{className:"w-4 h-4 inline ml-1"}),"ÿ±ÿ®ÿ∑ ÿ®ÿµŸÜŸÅ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"]}),e.jsxs("select",{value:j.menuItemId,onChange:o=>L({...j,menuItemId:o.target.value}),className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"ÿ®ÿØŸàŸÜ ÿ±ÿ®ÿ∑"}),c.filter(o=>o.available!==!1).map(o=>e.jsxs("option",{value:o.id,children:[o.name," - ",o.price," ÿ±.ÿ≥"]},o.id))]})]}),I&&e.jsxs("div",{className:"bg-pink-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ts,{className:"w-5 h-5 text-pink-500 animate-spin"}),e.jsx("span",{className:"text-pink-700 font-medium",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ±ŸÅÿπ..."})]}),e.jsx("div",{className:"h-2 bg-pink-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-300",style:{width:`${A}%`}})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{onClick:h,disabled:I,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-bold shadow-lg hover:scale-[1.02] transition disabled:opacity-50",children:[e.jsx(ut,{className:"w-5 h-5"}),"ŸÜÿ¥ÿ± ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä"]}),e.jsx("button",{onClick:()=>M(!1),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]})}),n.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ut,{className:"w-10 h-10 text-pink-500"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≥ÿ™Ÿàÿ±Ÿäÿßÿ™"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ÿ¥ÿßÿ±ŸÉ ÿ∑ÿ®ÿÆ ÿßŸÑŸäŸàŸÖ ŸÖÿπ ÿπŸÖŸÑÿßÿ¶ŸÉ!"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map(o=>e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"aspect-[9/16] rounded-2xl overflow-hidden shadow-lg",children:[o.type==="text"?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:o.backgroundColor},children:e.jsx("p",{className:"text-center text-sm font-bold leading-relaxed line-clamp-6",style:{color:o.textColor},children:o.caption})}):o.type==="video"?e.jsx("video",{src:o.mediaUrl,className:"w-full h-full object-cover"}):e.jsx("img",{src:o.mediaUrl,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),e.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 bg-black/50 text-white text-xs font-medium px-2 py-1 rounded-full",children:[e.jsx(Ye,{className:"w-3 h-3"}),b(o.expiresAt)]}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-1 bg-black/50 text-white text-xs font-medium px-2 py-1 rounded-full",children:[e.jsx(Ls,{className:"w-3 h-3"}),o.viewsCount]}),e.jsx("button",{onClick:()=>F(o.id),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition",children:e.jsx(fs,{className:"w-4 h-4"})}),o.menuItemName&&e.jsxs("div",{className:"absolute bottom-2 left-2 flex items-center gap-1 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:[e.jsx(mt,{className:"w-3 h-3"}),o.menuItemName]})]}),o.caption&&o.type!=="text"&&e.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:o.caption})]},o.id))})]})};async function pt(s){try{const t={...s,read:!1,createdAt:J()},n=await Fe(te(S,"notifications"),t);console.log("üîî ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ•ÿ¥ÿπÿßÿ±:",s.type,"‚Üí",s.recipientId);try{await ji(s.title,s.message,{icon:"/icon-192.png",tag:s.type+"-"+(s.orderId||Date.now()),url:s.actionUrl||"/"}),console.log("üì± ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ Push Notification")}catch(i){console.warn("‚ö†Ô∏è Push Notification ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠:",i)}return n.id}catch(t){return console.error("‚ùå ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±:",t),null}}async function _c(s,t,n){await pt({type:"order_accepted",recipientId:s,recipientType:"customer",title:"ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿ∑ŸÑÿ®ŸÉ ‚úÖ",message:`${n} ÿ®ÿØÿ£ÿ™ ÿ®ÿ™ÿ¨ŸáŸäÿ≤ ÿ∑ŸÑÿ®ŸÉ`,orderId:t,restaurantName:n,actionType:"order",actionUrl:"/track-orders",priority:"high"})}async function Oc(s,t,n,i){const c=i==="pickup"?`ÿ∑ŸÑÿ®ŸÉ ŸÖŸÜ ${n} ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ! ÿ™ÿπÿßŸÑ ÿßÿ≥ÿ™ŸÑŸÖŸá üèÉ`:`ÿ∑ŸÑÿ®ŸÉ ŸÖŸÜ ${n} ÿ¨ÿßŸáÿ≤ÿå ÿßŸÑŸÖŸÜÿØŸàÿ® ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ ÿ•ŸÑŸäŸÉ üöó`;await pt({type:"order_ready",recipientId:s,recipientType:"customer",title:"ÿ∑ŸÑÿ®ŸÉ ÿ¨ÿßŸáÿ≤! üéâ",message:c,orderId:t,restaurantName:n,actionType:"order",actionUrl:"/track-orders",priority:"high"})}async function Bl(s,t,n){await pt({type:"courier_assigned",recipientId:s,recipientType:"customer",title:"ŸÖŸÜÿØŸàÿ® ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ üöó",message:`${n} ÿßÿ≥ÿ™ŸÑŸÖ ÿ∑ŸÑÿ®ŸÉ ŸàŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ ÿ•ŸÑŸäŸÉ`,orderId:t,actionType:"order",actionUrl:"/track-orders",priority:"normal"})}async function Vl(s,t,n){await pt({type:"order_delivered",recipientId:s,recipientType:"customer",title:"ŸàÿµŸÑ ÿ∑ŸÑÿ®ŸÉ! üì¶",message:`ÿ™ŸÖ ÿ™ŸàÿµŸäŸÑ ÿ∑ŸÑÿ®ŸÉ ŸÖŸÜ ${n}. ÿ®ÿßŸÑÿπÿßŸÅŸäÿ©! üçΩÔ∏è`,orderId:t,restaurantName:n,actionType:"order",actionUrl:"/track-orders",priority:"normal"})}async function Lc(s,t,n,i){await pt({type:"order_ready",recipientId:s,recipientType:"courier",title:"ÿ∑ŸÑÿ® ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿ™ŸàÿµŸäŸÑ üì¶",message:`ŸÖŸÜ ${n} ÿ•ŸÑŸâ ${i}`,orderId:t,restaurantName:n,actionType:"order",actionUrl:"/courier",priority:"high"})}async function Mc(s,t,n,i,c){try{const y=pe(te(S,"users"),be("role","in",["developer","admin"])),r=await ue(y);for(const k of r.docs)await pt({type:"admin_new_order",recipientId:k.id,recipientType:"admin",title:"üí∞ ÿ∑ŸÑÿ® ŸÜÿßÿ¨ÿ≠!",message:`${t} ‚Üí ${n} | ${i.toFixed(2)} ÿ±.ÿ≥ (ÿ±ÿ≥ŸàŸÖ: ${c.toFixed(2)})`,orderId:s,restaurantName:t,actionType:"order",actionUrl:"/admin/orders",priority:"normal"});console.log("üìä ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑÿ•ÿØÿßÿ±ÿ© ÿπŸÜ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑŸÜÿßÿ¨ÿ≠")}catch(y){console.error("‚ùå ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑÿ•ÿØÿßÿ±ÿ©:",y)}}async function Uc(s,t,n){await pt({type:"order_preparing",recipientId:s,recipientType:"customer",title:"ÿ¨ÿßÿ±Ÿä ÿ™ÿ¨ŸáŸäÿ≤ ÿ∑ŸÑÿ®ŸÉ üë®‚Äçüç≥",message:`${n} ÿ®ÿØÿ£ÿ™ ÿ®ÿ™ÿ¨ŸáŸäÿ≤ ÿ∑ŸÑÿ®ŸÉ`,orderId:t,restaurantName:n,actionType:"order",actionUrl:"/orders",priority:"normal"})}const ql=Object.freeze(Object.defineProperty({__proto__:null,notifyAdminSuccessfulOrder:Mc,notifyCourierAssigned:Bl,notifyCourierOrderReady:Lc,notifyOrderAccepted:_c,notifyOrderDelivered:Vl,notifyOrderPreparing:Uc,notifyOrderReady:Oc,sendSmartNotification:pt},Symbol.toStringTag,{value:"Module"})),wt=3.75,rr=3,Bc=()=>{const{user:s}=$e(),t=gs(),n=Qe(),i=Ds(),[c,y]=a.useState("dashboard"),[r,k]=a.useState([]),[$,M]=a.useState([]),[I,N]=a.useState([]),[A,p]=a.useState({}),[f,_]=a.useState(null),[m,j]=a.useState(!1),[L,g]=a.useState([]),[d,h]=a.useState(null),[F,D]=a.useState(!0),[b,E]=a.useState(!1),[o,w]=a.useState({todayDeliveries:0,todayEarnings:0,weekDeliveries:0,weekEarnings:0,monthDeliveries:0,monthEarnings:0,totalDeliveries:0,totalEarnings:0,totalPlatformFees:0,netEarnings:0,pendingOrders:0,activeOrders:0}),[U,B]=a.useState(null),[Q,O]=a.useState(!1),[C,P]=a.useState({}),[x,z]=a.useState({isOpen:!1,orderId:""});a.useEffect(()=>{if(!(s!=null&&s.uid))return;const W=async()=>{const ne=X(S,"couriers",s.uid),le=await Ce(ne);if(le.exists())h(le.data());else{const he={name:s.displayName||"",phone:"",city:"",isAvailable:!0,totalDeliveries:0,rating:5,joinedAt:J()};await Ze(ne,he),h(he)}D(!1)},ee=async()=>{const{getDocs:ne}=await et(async()=>{const{getDocs:Ae}=await import("./vendor-firebase-DPNhE71o.js").then(Me=>Me.M);return{getDocs:Ae}},[]),le=pe(te(S,"hiringRequests"),be("courierId","==",s.uid),be("status","==","accepted")),ve=(await ne(le)).docs.map(Ae=>Ae.data().restaurantId);g(ve)};W(),ee()},[s==null?void 0:s.uid]),a.useEffect(()=>{if(!(s!=null&&s.uid))return;const W=pe(te(S,"orders"),be("status","in",["ready"]),as("createdAt","desc"),ks(50)),ee=As(W,he=>{const ve=he.docs.map(Ae=>({id:Ae.id,...Ae.data()}));if(L.length>0){const Ae=ve.filter(Me=>{var Ke,ze;const Te=Me.restaurantId||((ze=(Ke=Me.items)==null?void 0:Ke[0])==null?void 0:ze.ownerId)||"";return L.includes(Te)});k(Ae)}else k([])}),ne=pe(te(S,"orders"),be("courierId","==",s.uid),as("createdAt","desc"),ks(50)),le=As(ne,he=>{const ve=he.docs.map(Ae=>({id:Ae.id,...Ae.data()}));M(ve),N(ve),R(ve)});return()=>{ee(),le()}},[s==null?void 0:s.uid,L]);const R=W=>{const ee=new Date,ne=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),le=new Date(ne);le.setDate(le.getDate()-7);const he=new Date(ee.getFullYear(),ee.getMonth(),1);let ve=0,Ae=0,Me=0,Te=0,Ke=0,ze=0,Rs=0,Ps=0,Js=0,Xs=0;W.forEach(ns=>{var Bs,Vs;const tt=((Vs=(Bs=ns.createdAt)==null?void 0:Bs.toDate)==null?void 0:Vs.call(Bs))||new Date(ns.createdAt),Us=ns.deliveryFee||0,Ts=ns.courierPlatformFee||wt;ns.status==="out_for_delivery"&&Xs++,ns.status==="delivered"&&(Rs++,Ps+=Us,Js+=Ts,tt>=ne&&(ve++,Ae+=Us),tt>=le&&(Me++,Te+=Us),tt>=he&&(Ke++,ze+=Us))}),w({todayDeliveries:ve,todayEarnings:Ae,weekDeliveries:Me,weekEarnings:Te,monthDeliveries:Ke,monthEarnings:ze,totalDeliveries:Rs,totalEarnings:Ps,totalPlatformFees:Js,netEarnings:Ps-Js,pendingOrders:r.length,activeOrders:Xs})},u=async()=>{if(s!=null&&s.uid){j(!0);try{const W=await Ce(X(S,"couriers",s.uid));W.exists()&&h(W.data());const ee=pe(te(S,"hiringRequests"),be("courierId","==",s.uid),be("status","==","accepted")),le=(await ue(ee)).docs.map(he=>he.data().restaurantId);g(le),n.success("ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´")}catch{n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´")}finally{j(!1)}}},v=async()=>{if(!(s!=null&&s.uid)||!d)return;const W=!d.isAvailable;await xe(X(S,"couriers",s.uid),{isAvailable:W,updatedAt:J()}),h({...d,isAvailable:W}),n.success(W?"üü¢ ÿ£ŸÜÿ™ ÿßŸÑÿ¢ŸÜ ŸÖÿ™ÿßÿ≠ ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™":"üî¥ ÿ£ŸÜÿ™ ÿßŸÑÿ¢ŸÜ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠")},H=async(W,ee)=>{if(!s)return;if(!(d!=null&&d.isAvailable)){n.error("ŸÅÿπŸëŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ŸàŸÅÿ± ÿ£ŸàŸÑÿßŸã");return}const ne=(d==null?void 0:d.maxActiveOrders)||rr,le=$.filter(Te=>Te.status==="out_for_delivery"||Te.status==="accepted").length;if(le>=ne){i.warning(`ŸÑÿØŸäŸÉ ${le} ÿ∑ŸÑÿ® ŸÜÿ¥ÿ∑ ÿ≠ÿßŸÑŸäÿßŸã. ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸáŸà ${ne} ÿ∑ŸÑÿ®ÿßÿ™.

ÿ£ŸÉŸÖŸÑ ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ© ŸÇÿ®ŸÑ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ©.`,{title:"‚ö†Ô∏è ÿ™ÿ¨ÿßŸàÿ≤ÿ™ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™"});return}const he=A[W],ve=ee.deliveryFeeSetBy?ee.deliveryFee||0:parseFloat(he);if(!ee.deliveryFeeSetBy&&(isNaN(ve)||ve<0)){n.error("ÿ≠ÿØÿØ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ ÿ£ŸàŸÑÿßŸã");return}if(!(!await i.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßÿ≥ÿ™ŸÑÿßŸÖ Ÿáÿ∞ÿß ÿßŸÑÿ∑ŸÑÿ®ÿü

üìç ${ee.address}
üí∞ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ: ${ee.deliveryFeeSetBy?ee.deliveryFee:ve} ÿ±.ÿ≥`,{title:"üöó ÿ™ÿ£ŸÉŸäÿØ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®",confirmText:"ŸÜÿπŸÖÿå ŸÖÿ™ÿßÿ®ÿπÿ©",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°"})||!await i.confirm(`‚ö†Ô∏è ÿ™ÿ£ŸÉŸäÿØ ŸÜŸáÿßÿ¶Ÿä:

ÿ®ÿßÿ≥ÿ™ŸÑÿßŸÖŸÉ ŸÑŸáÿ∞ÿß ÿßŸÑÿ∑ŸÑÿ®ÿå ÿ£ŸÜÿ™ ŸÖŸÑÿ™ÿ≤ŸÖ ÿ®ÿ™ŸàÿµŸäŸÑŸá ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ≠ÿØÿØ.

‚Ä¢ ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©: ${wt} ÿ±.ÿ≥ ÿ≥ÿ™ŸèÿÆÿµŸÖ ŸÖŸÜ ÿ£ÿ±ÿ®ÿßÿ≠ŸÉ
‚Ä¢ ŸÑÿØŸäŸÉ ÿ≠ÿßŸÑŸäÿßŸã ${le+1} ŸÖŸÜ ${ne} ÿ∑ŸÑÿ®ÿßÿ™ ŸÜÿ¥ÿ∑ÿ©`,{title:"‚ö° ÿßŸÑÿ™ÿ≤ÿßŸÖ ŸÜŸáÿßÿ¶Ÿä",confirmText:"‚úì ÿ£ÿ≥ÿ™ŸÑŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ¢ŸÜ",cancelText:"ÿ™ÿ±ÿßÿ¨ÿπ",dangerous:!1}))){_(W);try{await En(S,async Ke=>{const ze=X(S,"orders",W),Rs=await Ke.get(ze);if(!Rs.exists())throw new Error("ÿßŸÑÿ∑ŸÑÿ® ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ");const Ps=Rs.data();if(Ps.courierId)throw new Error("ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ Ÿáÿ∞ÿß ÿßŸÑÿ∑ŸÑÿ® ŸÖŸÜ ŸÇÿ®ŸÑ ŸÖŸÜÿØŸàÿ® ÿ¢ÿÆÿ±");if(Ps.status!=="ready")throw new Error("Ÿáÿ∞ÿß ÿßŸÑÿ∑ŸÑÿ® ŸÑŸÖ ŸäÿπÿØ ŸÖÿ™ÿßÿ≠ÿßŸã ŸÑŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ");const Xs=(ee.total||ee.subtotal)+ve,ns={courierId:s.uid,status:"out_for_delivery",courierPlatformFee:wt,"timestamps.pickedUpAt":J(),updatedAt:J()};ee.deliveryFeeSetBy||(ns.deliveryFee=ve,ns.deliveryFeeSetBy="courier",ns.deliveryFeeSetAt=J(),ns.total=Xs),Ke.update(ze,ns)});const Te=I.find(Ke=>Ke.id===W)||r.find(Ke=>Ke.id===W);Te&&Bl(Te.customerId,W,(d==null?void 0:d.name)||"ÿßŸÑŸÖŸÜÿØŸàÿ®"),n.success(ee.deliveryFeeSetBy?"ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®!":`ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®! ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ: ${ve} ÿ±.ÿ≥`)}catch(Te){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®:",Te),n.error(Te.message||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®")}finally{_(null)}}},Y=async W=>{if(!await i.confirm("ŸáŸÑ ÿ™ŸÖ ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠ÿü",{title:"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",confirmText:"ŸÜÿπŸÖÿå ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°"}))return;const ne=$.find(le=>le.id===W);if(await xe(X(S,"orders",W),{status:"delivered",deliveredAt:J(),"timestamps.deliveredAt":J(),updatedAt:J()}),ne){Vl(ne.customerId,W,ne.restaurantName||"ÿßŸÑŸÖÿ∑ÿπŸÖ");try{const{notifyAdminSuccessfulOrder:le}=await et(async()=>{const{notifyAdminSuccessfulOrder:he}=await Promise.resolve().then(()=>ql);return{notifyAdminSuccessfulOrder:he}},void 0);await le(W,ne.restaurantName||"ÿßŸÑŸÖÿ∑ÿπŸÖ","ÿßŸÑÿπŸÖŸäŸÑ",ne.total||0,ne.platformFee||0)}catch(le){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑÿ•ÿØÿßÿ±ÿ©:",le)}}n.success("ÿ™ŸÖ ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ")},ce=W=>{var ee,ne;return W.status!=="delivered"?!1:!((ne=(ee=W.ratings)==null?void 0:ee.courierToCustomer)!=null&&ne.stars)},ie=async(W,ee)=>{var ne,le,he,ve;try{const Ae=X(S,"orders",W),Me=await Ce(Ae);if(!Me.exists())return;const ze={...Me.data().ratings||{},courierToCustomer:ee},Rs=((ne=ze.customerToRestaurant)==null?void 0:ne.stars)&&((le=ze.customerToCourier)==null?void 0:le.stars)&&((he=ze.restaurantToCustomer)==null?void 0:he.stars)&&((ve=ze.courierToCustomer)==null?void 0:ve.stars);await xe(Ae,{ratings:ze,ratingCompleted:Rs,updatedAt:J()}),n.success("ÿ¥ŸÉÿ±ÿßŸã ÿπŸÑŸâ ÿ™ŸÇŸäŸäŸÖŸÉ! ‚≠ê"),z({isOpen:!1,orderId:""})}catch{n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇŸäŸäŸÖ")}},je=async W=>{if(s!=null&&s.uid){E(!0);try{await xe(X(S,"couriers",s.uid),{...W,updatedAt:J()}),h(ee=>ee?{...ee,...W}:null),n.success("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}catch{n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}E(!1)}},ge=async(W,ee)=>{if(s!=null&&s.uid){B(W);try{const ne=js(gt,`couriers/${s.uid}/${W}_${Date.now()}`);await ot(ne,ee);const le=await ys(ne),ve={[`${W}Url`]:le,documentsStatus:"pending"};await je(ve),n.success("ÿ™ŸÖ ÿ±ŸÅÿπ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØ ÿ®ŸÜÿ¨ÿßÿ≠")}catch{n.error("ŸÅÿ¥ŸÑ ÿ±ŸÅÿπ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØ")}B(null)}},T=()=>{P({name:(d==null?void 0:d.name)||"",phone:(d==null?void 0:d.phone)||"",city:(d==null?void 0:d.city)||"",bankName:(d==null?void 0:d.bankName)||"",bankAccountName:(d==null?void 0:d.bankAccountName)||"",bankAccountNumber:(d==null?void 0:d.bankAccountNumber)||"",maxActiveOrders:(d==null?void 0:d.maxActiveOrders)||rr}),O(!0)};if(F)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-sky-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})});const se=[{id:"dashboard",label:"ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",icon:Ta},{id:"orders",label:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",icon:Oe},{id:"history",label:"ÿßŸÑÿ≥ÿ¨ŸÑ",icon:vt},{id:"earnings",label:"ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠",icon:cs},{id:"profile",label:"ÿ≠ÿ≥ÿßÿ®Ÿä",icon:os}],ye=W=>{var ee,ne;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all border border-gray-100",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-white font-bold",children:["#",W.id.slice(-6)]}),e.jsx("span",{className:"text-white/90 text-sm",children:W.restaurantName||"ŸÖÿ∑ÿπŸÖ"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(Xt,{order:W,type:"pickup",compact:!0})}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:W.address})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 mb-3 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ≥ÿπÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™"}),e.jsxs("span",{className:"font-semibold",children:[(ee=W.subtotal)==null?void 0:ee.toFixed(2)," ÿ±.ÿ≥"]})]}),W.deliveryFeeSetBy?e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[(ne=W.deliveryFee)==null?void 0:ne.toFixed(2)," ÿ±.ÿ≥"]})]}):e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("span",{className:"text-amber-600 text-xs",children:"ÿ™ÿ≠ÿØÿØŸáÿß ÿ£ŸÜÿ™"})]})]}),!W.deliveryFeeSetBy&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Cs,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-semibold text-amber-800 text-sm",children:"ÿ≠ÿØÿØ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:"ŸÖÿ´ÿßŸÑ: 10",value:A[W.id]||"",onChange:le=>p(he=>({...he,[W.id]:le.target.value})),className:"flex-1 px-3 py-2 rounded-lg border border-amber-200 focus:border-amber-400 focus:outline-none text-sm"}),e.jsx("span",{className:"flex items-center text-gray-500 text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-xs text-amber-700 mt-2",children:["‚ö†Ô∏è ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©: ",wt," ÿ±.ÿ≥ ŸÑŸÉŸÑ ÿ∑ŸÑÿ®"]})]}),e.jsx("button",{onClick:()=>H(W.id,W),disabled:f===W.id||!(d!=null&&d.isAvailable),className:`w-full py-3 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 
                     text-white font-bold flex items-center justify-center gap-2
                     hover:from-gray-900 hover:to-black transition-all shadow-lg disabled:opacity-50`,children:f===W.id?e.jsx("span",{children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏..."}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ® üöó"})]})})]})]},W.id)},Z=W=>{var ee,ne;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden border-2 border-sky-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-blue-500 px-4 py-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-white font-bold",children:["#",W.id.slice(-6)]}),e.jsxs("div",{className:"flex items-center gap-1 text-white/90 text-sm",children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsx("span",{children:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(Xt,{order:W,type:"delivery"})}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:W.address})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[e.jsx(ra,{className:"w-5 h-5"}),e.jsxs("span",{children:[(ne=(ee=W.total)==null?void 0:ee.toFixed)==null?void 0:ne.call(ee,2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>t(`/chat?orderId=${W.id}`),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-primary to-accent 
                       text-white font-bold flex items-center justify-center gap-2`,children:[e.jsx(ht,{className:"w-5 h-5"}),e.jsx("span",{children:"ŸÖÿ≠ÿßÿØÿ´ÿ© üí¨"})]}),e.jsxs("button",{onClick:()=>Y(W.id),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 
                       text-white font-bold flex items-center justify-center gap-2`,children:[e.jsx(De,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ ‚úÖ"})]})]})]})]},W.id)},G=()=>{var W;return e.jsxs("div",{className:"space-y-6",children:[((W=d==null?void 0:d.points)==null?void 0:W.isSuspended)&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-300 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center",children:e.jsx(xr,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-red-700",children:"‚õî ÿ≠ÿ≥ÿßÿ®ŸÉ ŸÖŸàŸÇŸàŸÅ!"}),e.jsx("p",{className:"text-sm text-red-600",children:"ŸÑŸÜ ÿ™ÿ≥ÿ™ÿ∑Ÿäÿπ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ©. ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä."})]})]}),e.jsx("button",{onClick:()=>t("/support"),className:"w-full mt-3 py-2 bg-red-500 text-white rounded-xl font-bold",children:"ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ‚Üê"})]}),(d==null?void 0:d.points)&&!d.points.isSuspended&&e.jsxs("div",{className:`rounded-2xl p-4 border-2 ${d.points.currentPoints<xs.WARNING_THRESHOLD?"bg-amber-50 border-amber-300":"bg-sky-50 border-sky-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ms,{className:`w-6 h-6 ${d.points.currentPoints<xs.WARNING_THRESHOLD?"text-amber-500":"text-sky-500"}`}),e.jsx("span",{className:"font-bold text-gray-700",children:"ÿ±ÿµŸäÿØ ÿßŸÑŸÜŸÇÿßÿ∑"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-2xl font-bold ${d.points.currentPoints<xs.WARNING_THRESHOLD?"text-amber-600":"text-sky-600"}`,children:d.points.currentPoints}),e.jsxs("span",{className:"text-gray-400",children:["/ ",xs.STARTING_POINTS]})]})]}),d.points.currentPoints<xs.WARNING_THRESHOLD&&e.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"‚ö†Ô∏è ŸÜŸÇÿßÿ∑ŸÉ ŸÖŸÜÿÆŸÅÿ∂ÿ©! ÿ≠ÿßŸÅÿ∏ ÿπŸÑŸâ ÿ¨ŸàÿØÿ© ÿßŸÑÿÆÿØŸÖÿ©."})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-sky-50 border border-blue-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Ot,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-800",children:"üöó ÿ£ŸÜÿ™ ŸÖŸÜÿØŸàÿ® ŸÖÿ≥ÿ™ŸÇŸÑ (ÿπŸÖŸÑ ÿ≠ÿ±)"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"ÿ™ÿπŸÖŸÑ ÿ®ÿ≠ÿ±Ÿäÿ© ŸÉÿßŸÖŸÑÿ© ÿ®ÿØŸàŸÜ ÿØŸàÿßŸÖ ÿ£Ÿà ÿßŸÑÿ™ÿ≤ÿßŸÖÿßÿ™ Ÿàÿ∏ŸäŸÅŸäÿ©. ÿßÿ≥ÿ™ŸÑŸÖ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ŸÜÿßÿ≥ÿ®ŸÉ Ÿàÿßÿ≠ÿ™ŸÅÿ∏ ÿ®ÿ£ÿ±ÿ®ÿßÿ≠ŸÉ."})]})]})}),e.jsx("button",{onClick:v,className:`w-full py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 transition-all shadow-lg ${d!=null&&d.isAvailable?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700":"bg-gradient-to-r from-gray-400 to-gray-500 text-white hover:from-gray-500 hover:to-gray-600"}`,children:d!=null&&d.isAvailable?e.jsxs(e.Fragment,{children:[e.jsx(Jn,{className:"w-6 h-6"}),e.jsx("span",{children:"üü¢ ŸÖÿ™ÿßÿ≠ ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xn,{className:"w-6 h-6"}),e.jsx("span",{children:"üî¥ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Oe,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ©"})]}),e.jsx("div",{className:"text-3xl font-bold",children:r.length})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"ŸÇŸäÿØ ÿßŸÑÿ™ŸàÿµŸäŸÑ"})]}),e.jsx("div",{className:"text-3xl font-bold",children:o.activeOrders})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ra,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"ÿ£ÿ±ÿ®ÿßÿ≠ ÿßŸÑŸäŸàŸÖ"})]}),e.jsxs("div",{className:"text-3xl font-bold",children:[o.todayEarnings.toFixed(0),e.jsx("span",{className:"text-lg",children:" ÿ±.ÿ≥"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(De,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"ÿ™ÿ≥ŸÑŸäŸÖÿßÿ™ ÿßŸÑŸäŸàŸÖ"})]}),e.jsx("div",{className:"text-3xl font-bold",children:o.todayDeliveries})]})]}),(d==null?void 0:d.documentsStatus)!=="approved"&&e.jsx("div",{className:`rounded-2xl p-4 ${(d==null?void 0:d.documentsStatus)==="rejected"?"bg-red-50 border border-red-200":"bg-amber-50 border border-amber-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${(d==null?void 0:d.documentsStatus)==="rejected"?"bg-red-500":"bg-amber-500"}`,children:e.jsx(it,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:(d==null?void 0:d.documentsStatus)==="rejected"?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-red-700",children:"‚ùå ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™"}),e.jsx("p",{className:"text-sm text-red-600",children:d.documentsNotes||"Ÿäÿ±ÿ¨Ÿâ ÿ±ŸÅÿπ ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ÿµÿßŸÑÿ≠ÿ©"})]}):(d==null?void 0:d.documentsStatus)==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-amber-700",children:"‚è≥ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"}),e.jsx("p",{className:"text-sm text-amber-600",children:"ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ¥ÿπÿßÿ±ŸÉ ÿ®ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ŸÇÿ±Ÿäÿ®ÿßŸã"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-amber-700",children:"üìÑ ÿßÿ±ŸÅÿπ ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ŸÉ"}),e.jsx("p",{className:"text-sm text-amber-600",children:"ŸÑÿ™Ÿàÿ´ŸäŸÇ ÿ≠ÿ≥ÿßÿ®ŸÉ Ÿàÿ≤ŸäÿßÿØÿ© ÿßŸÑŸÖŸàÿ´ŸàŸÇŸäÿ©"})]})}),e.jsx("button",{onClick:()=>y("profile"),className:"text-sm font-bold text-amber-700 underline",children:"ÿ±ŸÅÿπ"})]})}),$.filter(ee=>ee.status==="out_for_delivery").length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Qs,{className:"w-5 h-5 text-sky-500"}),"ÿ∑ŸÑÿ®ÿßÿ™Ÿä ÿßŸÑŸÜÿ¥ÿ∑ÿ©"]}),e.jsx("div",{className:"space-y-3",children:$.filter(ee=>ee.status==="out_for_delivery").map(Z)})]}),(d==null?void 0:d.isAvailable)&&r.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-purple-500"}),"ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ© ŸÑŸÑÿ™ŸàÿµŸäŸÑ (",r.length,")"]}),e.jsxs("div",{className:"space-y-3",children:[r.slice(0,3).map(ye),r.length>3&&e.jsxs("button",{onClick:()=>y("orders"),className:"w-full py-3 bg-gray-100 rounded-xl text-gray-600 font-semibold hover:bg-gray-200 transition",children:["ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ (",r.length,") ‚Üê"]})]})]})]})},K=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Qs,{className:"w-5 h-5 text-sky-500"}),"ÿ∑ŸÑÿ®ÿßÿ™Ÿä ÿßŸÑŸÜÿ¥ÿ∑ÿ© (",$.filter(W=>W.status==="out_for_delivery").length,")"]}),$.filter(W=>W.status==="out_for_delivery").length>0?e.jsx("div",{className:"space-y-3",children:$.filter(W=>W.status==="out_for_delivery").map(Z)}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-2xl",children:[e.jsx(Ue,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ŸÜÿ¥ÿ∑ÿ©"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-purple-500"}),"ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ© ŸÑŸÑÿ™ŸàÿµŸäŸÑ (",r.length,")"]}),r.length>0?e.jsx("div",{className:"space-y-3",children:r.map(ye)}):L.length===0?e.jsxs("div",{className:"text-center py-8 bg-amber-50 rounded-2xl border border-amber-200",children:[e.jsx(Ot,{className:"w-12 h-12 text-amber-400 mx-auto mb-2"}),e.jsx("p",{className:"text-amber-700 font-medium",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿ≥ÿ± ŸÖŸÜÿ™ÿ¨ÿ© ŸÇÿ®ŸÑÿ™ ÿ∑ŸÑÿ® ÿ™Ÿàÿ∏ŸäŸÅŸÉ"}),e.jsx("p",{className:"text-amber-600 text-sm mt-1",children:'ÿ™ŸÇÿØŸÖ ŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿ™Ÿàÿ∏ŸäŸÅ ŸÖŸÜ ÿµŸÅÿ≠ÿ© "ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ"'})]}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-2xl",children:[e.jsx(Oe,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ© ÿ≠ÿßŸÑŸäÿßŸã"})]})]})]}),me=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5 text-gray-500"}),"ÿ≥ÿ¨ŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[I.filter(W=>W.status==="delivered").length," ÿ∑ŸÑÿ®"]})]}),I.filter(W=>W.status==="delivered").length>0?e.jsx("div",{className:"space-y-3",children:I.filter(W=>W.status==="delivered").map(W=>{var ee,ne,le,he,ve;return e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-bold text-gray-800",children:["#",W.id.slice(-6)]}),e.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs font-bold",children:"‚úÖ ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:W.address})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsx("div",{className:"text-sm text-gray-500",children:((ne=(ee=W.createdAt)==null?void 0:ee.toDate)==null?void 0:ne.call(ee).toLocaleDateString("ar-SA"))||""}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-green-600 font-bold",children:[(le=W.deliveryFee)==null?void 0:le.toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"text-red-500 text-sm",children:["-",wt," ÿ±ÿ≥ŸàŸÖ"]})]})]}),ce(W)&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("button",{onClick:()=>z({isOpen:!0,orderId:W.id}),className:`w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-sky-50 to-blue-50 
                               border-2 border-sky-200 rounded-xl hover:shadow-md transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(os,{className:"w-5 h-5 text-sky-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"ŸÇŸäŸëŸÖ ÿßŸÑÿπŸÖŸäŸÑ ‚≠ê"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(Ae=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-sky-400 transition"},Ae))})]})}),((ve=(he=W.ratings)==null?void 0:he.courierToCustomer)==null?void 0:ve.stars)&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 bg-green-50 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"ÿ™ŸÇŸäŸäŸÖŸÉ ŸÑŸÑÿπŸÖŸäŸÑ:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(Ae=>{var Me,Te;return e.jsx(ls,{className:`w-4 h-4 ${Ae<=(((Te=(Me=W.ratings)==null?void 0:Me.courierToCustomer)==null?void 0:Te.stars)||0)?"text-sky-400 fill-sky-400":"text-gray-300"}`},Ae)})})]})})]},W.id)})}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx(vt,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ≥ÿßÿ®ŸÇÿ©"})]})]}),oe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-emerald-700 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(cs,{className:"w-6 h-6"}),e.jsx("h3",{className:"font-bold text-lg",children:"üí∞ ŸÖŸÑÿÆÿµ ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑŸäŸàŸÖ"}),e.jsxs("p",{className:"text-2xl font-bold",children:[o.todayEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[o.todayDeliveries," ÿ™ŸàÿµŸäŸÑ"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ"}),e.jsxs("p",{className:"text-2xl font-bold",children:[o.weekEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[o.weekDeliveries," ÿ™ŸàÿµŸäŸÑ"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ¥Ÿáÿ±"}),e.jsxs("p",{className:"text-2xl font-bold",children:[o.monthEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[o.monthDeliveries," ÿ™ŸàÿµŸäŸÑ"]})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 ring-2 ring-white/30",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä"}),e.jsxs("p",{className:"text-2xl font-bold",children:[o.totalEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[o.totalDeliveries," ÿ™ŸàÿµŸäŸÑ"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ct,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-bold text-gray-800",children:"üìä ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[o.totalEarnings.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["(",o.totalDeliveries," ÿ∑ŸÑÿ® √ó ",wt," ÿ±.ÿ≥)"]})]}),e.jsxs("span",{className:"font-bold text-red-600",children:["- ",o.totalPlatformFees.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 bg-green-50 rounded-xl px-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx(cs,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-bold text-green-800",children:"ÿµÿßŸÅŸä ÿ£ÿ±ÿ®ÿßÿ≠ŸÉ"})]}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[o.netEarnings.toFixed(2)," ÿ±.ÿ≥"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-sky-50 border border-blue-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ps,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-bold text-blue-800",children:"üè¶ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä"})]}),d!=null&&d.bankName?e.jsxs("div",{className:"bg-white rounded-xl p-3 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"ÿßŸÑÿ®ŸÜŸÉ:"})," ",e.jsx("span",{className:"font-semibold",children:d.bankName})]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"ÿßŸÑÿßÿ≥ŸÖ:"})," ",e.jsx("span",{className:"font-semibold",children:d.bankAccountName})]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"ÿßŸÑÿ¢Ÿäÿ®ÿßŸÜ:"})," ",e.jsx("span",{className:"font-semibold",children:d.bankAccountNumber})]})]}):e.jsx("button",{onClick:()=>y("profile"),className:"w-full py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition",children:"ÿ£ÿ∂ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä"}),e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"üí° Ÿäÿ™ŸÖ ÿ™ÿ≠ŸàŸäŸÑ ÿ£ÿ±ÿ®ÿßÿ≠ŸÉ ÿ£ÿ≥ÿ®ŸàÿπŸäÿßŸã ÿ•ŸÑŸâ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä"})]}),e.jsxs("button",{onClick:()=>t("/courier/wallet"),className:"w-full py-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-2xl font-bold hover:from-orange-600 hover:to-orange-700 transition flex items-center justify-center gap-2",children:[e.jsx(cs,{className:"w-5 h-5"}),"ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑÿ™ŸÅÿµŸäŸÑŸäÿ©"]})]}),Ne=()=>{var W;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-5 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-sky-500 rounded-full -translate-y-1/2 translate-x-1/2"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-white/20 flex items-center justify-center overflow-hidden",children:d!=null&&d.photoUrl?e.jsx("img",{src:d.photoUrl,alt:"",className:"w-full h-full object-cover"}):e.jsx(os,{className:"w-10 h-10 text-white/60"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:(d==null?void 0:d.name)||"ŸÖŸÜÿØŸàÿ®"}),e.jsx("p",{className:"text-white/70 text-sm",children:(d==null?void 0:d.phone)||"ŸÑŸÖ ŸäŸèÿ≠ÿØÿØ"}),e.jsx("p",{className:"text-white/50 text-sm",children:(d==null?void 0:d.city)||"ÿßŸÑŸÖÿØŸäŸÜÿ©"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-4 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:o.totalDeliveries}),e.jsx("p",{className:"text-white/60 text-xs",children:"ÿ™ŸàÿµŸäŸÑ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold flex items-center justify-center gap-1",children:[e.jsx(ls,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),((W=d==null?void 0:d.rating)==null?void 0:W.toFixed(1))||"5.0"]}),e.jsx("p",{className:"text-white/60 text-xs",children:"ÿ™ŸÇŸäŸäŸÖ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:o.netEarnings.toFixed(0)}),e.jsx("p",{className:"text-white/60 text-xs",children:"ÿ±.ÿ≥ ÿ£ÿ±ÿ®ÿßÿ≠"})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-4 ${(d==null?void 0:d.documentsStatus)==="approved"?"bg-green-50 border border-green-200":(d==null?void 0:d.documentsStatus)==="rejected"?"bg-red-50 border border-red-200":"bg-amber-50 border border-amber-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${(d==null?void 0:d.documentsStatus)==="approved"?"bg-green-500":(d==null?void 0:d.documentsStatus)==="rejected"?"bg-red-500":"bg-amber-500"}`,children:e.jsx(ms,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:`font-bold ${(d==null?void 0:d.documentsStatus)==="approved"?"text-green-700":(d==null?void 0:d.documentsStatus)==="rejected"?"text-red-700":"text-amber-700"}`,children:[(d==null?void 0:d.documentsStatus)==="approved"&&"‚úÖ ÿ≠ÿ≥ÿßÿ® ŸÖŸàÿ´ŸÇ",(d==null?void 0:d.documentsStatus)==="rejected"&&"‚ùå ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ŸÖÿ±ŸÅŸàÿ∂ÿ©",(!(d!=null&&d.documentsStatus)||(d==null?void 0:d.documentsStatus)==="pending")&&"‚è≥ ŸÇŸäÿØ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"]}),(d==null?void 0:d.documentsStatus)==="rejected"&&d.documentsNotes&&e.jsx("p",{className:"text-sm text-red-600",children:d.documentsNotes})]})]})}),Q?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-gray-100",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ÿßŸÑÿßÿ≥ŸÖ"}),e.jsx("input",{type:"text",value:C.name||"",onChange:ee=>P({...C,name:ee.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ"}),e.jsx("input",{type:"tel",value:C.phone||"",onChange:ee=>P({...C,phone:ee.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400 focus:ring-2 focus:ring-sky-100",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsx("input",{type:"text",value:C.city||"",onChange:ee=>P({...C,city:ee.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-orange-500"}),"ÿßŸÑÿ∑ÿßŸÇÿ© ÿßŸÑÿßÿ≥ÿ™Ÿäÿπÿßÿ®Ÿäÿ©"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÜÿ¥ÿ∑ÿ©"}),e.jsxs("select",{value:C.maxActiveOrders||rr,onChange:ee=>P({...C,maxActiveOrders:parseInt(ee.target.value)}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400",children:[e.jsx("option",{value:1,children:"ÿ∑ŸÑÿ® Ÿàÿßÿ≠ÿØ"}),e.jsx("option",{value:2,children:"ÿ∑ŸÑÿ®ÿßŸÜ"}),e.jsx("option",{value:3,children:"3 ÿ∑ŸÑÿ®ÿßÿ™ (ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä)"}),e.jsx("option",{value:4,children:"4 ÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("option",{value:5,children:"5 ÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"ŸÑŸÜ ÿ™ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ© ÿ≠ÿ™Ÿâ ÿ™ŸÜŸáŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÜÿ¥ÿ∑ÿ©"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(ps,{className:"w-4 h-4 text-green-500"}),"ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("select",{value:C.bankName||"",onChange:ee=>P({...C,bankName:ee.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400",children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ŸÜŸÉ"}),e.jsx("option",{value:"ÿßŸÑÿ±ÿßÿ¨ÿ≠Ÿä",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ±ÿßÿ¨ÿ≠Ÿä"}),e.jsx("option",{value:"ÿßŸÑÿ£ŸáŸÑŸä",children:"ÿßŸÑÿ®ŸÜŸÉ ÿßŸÑÿ£ŸáŸÑŸä"}),e.jsx("option",{value:"ÿßŸÑÿ•ŸÜŸÖÿßÿ°",children:"ŸÖÿµÿ±ŸÅ ÿßŸÑÿ•ŸÜŸÖÿßÿ°"}),e.jsx("option",{value:"ÿßŸÑÿ±Ÿäÿßÿ∂",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ±Ÿäÿßÿ∂"}),e.jsx("option",{value:"ÿßŸÑÿ®ŸÑÿßÿØ",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ®ŸÑÿßÿØ"})]}),e.jsx("input",{type:"text",placeholder:"ÿßÿ≥ŸÖ ÿµÿßÿ≠ÿ® ÿßŸÑÿ≠ÿ≥ÿßÿ®",value:C.bankAccountName||"",onChange:ee=>P({...C,bankAccountName:ee.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200"}),e.jsx("input",{type:"text",placeholder:"ÿ±ŸÇŸÖ ÿßŸÑÿ¢Ÿäÿ®ÿßŸÜ (IBAN)",value:C.bankAccountNumber||"",onChange:ee=>P({...C,bankAccountNumber:ee.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200",dir:"ltr"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{je(C),O(!1)},disabled:b,className:"flex-1 py-3 bg-sky-500 text-white rounded-xl font-bold hover:bg-sky-600 transition disabled:opacity-50",children:b?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏...":"ÿ≠ŸÅÿ∏"}),e.jsx("button",{onClick:()=>O(!1),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-300 transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]}):e.jsxs("button",{onClick:T,className:"w-full py-3 bg-sky-500 text-white rounded-xl font-bold hover:bg-sky-600 transition flex items-center justify-center gap-2",children:[e.jsx(sa,{className:"w-5 h-5"}),"ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5 text-gray-500"}),"ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ms,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"ÿµŸàÿ±ÿ© ÿßŸÑŸáŸàŸäÿ©"})]}),d!=null&&d.idCardUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:d.idCardUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 text-sm",children:"ÿπÿ±ÿ∂"}),e.jsx(De,{className:"w-5 h-5 text-green-500"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ee=>{var ne;return((ne=ee.target.files)==null?void 0:ne[0])&&ge("idCard",ee.target.files[0])}}),e.jsx("span",{className:"text-sky-600 text-sm font-bold",children:U==="idCard"?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ±ŸÅÿπ...":"ÿ±ŸÅÿπ"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zn,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"ÿ±ÿÆÿµÿ© ÿßŸÑŸÇŸäÿßÿØÿ©"})]}),d!=null&&d.driverLicenseUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:d.driverLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 text-sm",children:"ÿπÿ±ÿ∂"}),e.jsx(De,{className:"w-5 h-5 text-green-500"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ee=>{var ne;return((ne=ee.target.files)==null?void 0:ne[0])&&ge("driverLicense",ee.target.files[0])}}),e.jsx("span",{className:"text-sky-600 text-sm font-bold",children:U==="driverLicense"?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ±ŸÅÿπ...":"ÿ±ŸÅÿπ"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(it,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿ≥Ÿäÿßÿ±ÿ©"})]}),d!=null&&d.vehicleRegistrationUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:d.vehicleRegistrationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 text-sm",children:"ÿπÿ±ÿ∂"}),e.jsx(De,{className:"w-5 h-5 text-green-500"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ee=>{var ne;return((ne=ee.target.files)==null?void 0:ne[0])&&ge("vehicleRegistration",ee.target.files[0])}}),e.jsx("span",{className:"text-sky-600 text-sm font-bold",children:U==="vehicleRegistration"?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ±ŸÅÿπ...":"ÿ±ŸÅÿπ"})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-50 border border-gray-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ir,{className:"w-5 h-5 text-gray-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"üìã ÿ®ŸäÿßŸÜ ÿßŸÑÿπŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ™ŸÇŸÑ:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-500",children:[e.jsx("li",{children:"ÿ£ŸÜÿ™ ÿ™ÿπŸÖŸÑ ŸÉŸÖŸÜÿØŸàÿ® ŸÖÿ≥ÿ™ŸÇŸÑ (Freelancer) ŸàŸÑŸäÿ≥ ŸÖŸàÿ∏ŸÅÿßŸã"}),e.jsx("li",{children:"ŸÑÿß ŸäŸàÿ¨ÿØ ÿØŸàÿßŸÖ ÿ´ÿßÿ®ÿ™ ÿ£Ÿà ÿ≥ÿßÿπÿßÿ™ ÿπŸÖŸÑ ŸÖÿ≠ÿØÿØÿ©"}),e.jsx("li",{children:"ÿ≠ÿ±Ÿäÿ© ŸÉÿßŸÖŸÑÿ© ŸÅŸä ŸÇÿ®ŸàŸÑ ÿ£Ÿà ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsxs("li",{children:["ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©: ",wt," ÿ±.ÿ≥ ŸÑŸÉŸÑ ÿ∑ŸÑÿ®"]}),e.jsx("li",{children:"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ° Ÿäÿ™ŸÖ ÿπÿ®ÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÅŸÇÿ∑"})]})]})]})})]})};return e.jsxs("div",{className:"space-y-4 pb-24",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-6 h-6 text-sky-500"}),"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÜÿØŸàÿ®"]}),e.jsx("button",{onClick:u,disabled:m,className:"p-2 bg-gray-100 rounded-xl hover:bg-gray-200 transition",children:e.jsx(qe,{className:`w-5 h-5 text-gray-600 ${m?"animate-spin":""}`})})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-4 px-4",children:se.map(W=>{const ee=W.icon;return e.jsxs("button",{onClick:()=>y(W.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold whitespace-nowrap transition ${c===W.id?"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(ee,{className:"w-4 h-4"}),W.label]},W.id)})}),c==="dashboard"&&G(),c==="orders"&&K(),c==="history"&&me(),c==="earnings"&&oe(),c==="profile"&&Ne(),e.jsx(Cr,{isOpen:x.isOpen,onClose:()=>z({isOpen:!1,orderId:""}),onSubmit:W=>ie(x.orderId,W),type:"customer",orderId:x.orderId})]})},Vc=()=>{const{user:s}=$e(),t=Ds(),[n,i]=a.useState([]),[c,y]=a.useState({}),[r,k]=a.useState(!0),[$,M]=a.useState(null);a.useEffect(()=>{if(!s)return;(async()=>{const p=(await ue(te(S,"restaurants"))).docs.map(j=>({id:j.id,...j.data()}));i(p);const f=pe(te(S,"hiringRequests"),be("courierId","==",s.uid)),_=await ue(f),m={};_.docs.forEach(j=>{const L=j.data();m[L.restaurantId]={restaurantId:L.restaurantId,status:L.status}}),y(m),k(!1)})()},[s]);const I=async N=>{if(!s){t.warning("ÿ≥ÿ¨ŸÑ ÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã");return}M(N.id),await Fe(te(S,"hiringRequests"),{courierId:s.uid,courierName:s.displayName||"ŸÖŸÜÿØŸàÿ®",restaurantId:N.id,restaurantName:N.name,status:"pending",createdAt:J()}),y(A=>({...A,[N.id]:{restaurantId:N.id,status:"pending"}})),M(null)};return r?e.jsx("div",{className:"text-center py-10 text-sky-600",children:"‚è≥ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ..."}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 py-8 px-4",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold text-sky-600 text-center mb-8 flex items-center justify-center gap-2",children:[e.jsx(Ot,{className:"w-7 h-7 text-sky-500"}),"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ"]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto",children:n.map(N=>{const A=c[N.id];return e.jsxs("div",{className:"glass-card rounded-2xl p-6 hover:shadow-xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[N.logoUrl?e.jsx("img",{src:N.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-sky-300 shadow"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-sky-100 flex items-center justify-center text-3xl mb-4",children:"üç¥"}),e.jsx("h3",{className:"font-bold text-lg mb-2 text-sky-900",children:N.name}),A?e.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${A.status==="pending"?"bg-amber-100 text-amber-700 border border-amber-200":A.status==="accepted"?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:[A.status==="pending"&&e.jsx(Ye,{className:"w-4 h-4"}),A.status==="accepted"&&e.jsx(ei,{className:"w-4 h-4"}),A.status==="rejected"&&e.jsx(Ys,{className:"w-4 h-4"}),A.status==="pending"?"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©":A.status==="accepted"?"‚úÖ ÿ™ŸÖ ÿßŸÑŸÇÿ®ŸàŸÑ":"‚ùå ŸÖÿ±ŸÅŸàÿ∂"]}):e.jsx("button",{disabled:$===N.id,onClick:()=>I(N),className:"mt-4 w-full px-4 py-2 rounded-xl bg-gradient-to-r from-sky-500 to-sky-600 text-white font-bold shadow-lg shadow-sky-200/50 hover:shadow-xl hover:scale-105 transition disabled:opacity-50",children:$===N.id?"‚è≥ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...":"üì© ÿ∑ŸÑÿ® ÿ™Ÿàÿ∏ŸäŸÅ"})]},N.id)})})]})},qc=[{text:"ÿ£ŸäŸÜ ŸàÿµŸÑÿ™ÿü üìç",emoji:"üìç"},{text:"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ! üíô",emoji:"üíô"},{text:"ÿÆÿ∞ ÿ±ÿßÿ≠ÿ™ŸÉ üòä",emoji:"üòä"},{text:"ÿ£ŸÜÿß ÿ®ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± ‚è≥",emoji:"‚è≥"},{text:"ÿ™ŸÖÿßŸÖ üëç",emoji:"üëç"},{text:"ŸÖŸÖÿ™ÿßÿ≤! ‚≠ê",emoji:"‚≠ê"}],zc=[{text:"ŸÉŸÖ ÿßŸÑŸÖÿØÿ© ÿßŸÑŸÖÿ™ŸàŸÇÿπÿ©ÿü ‚è±Ô∏è",emoji:"‚è±Ô∏è"},{text:"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉŸÖ! üíô",emoji:"üíô"},{text:"ŸáŸÑ ÿßŸÑÿ∑ŸÑÿ® ÿ¨ÿßŸáÿ≤ÿü üì¶",emoji:"üì¶"},{text:"ÿ£ÿ≠ÿ™ÿßÿ¨ ÿ™ÿπÿØŸäŸÑ ÿπŸÑŸâ ÿßŸÑÿ∑ŸÑÿ® üìù",emoji:"üìù"},{text:"ŸÖŸÖÿ™ÿßÿ≤! ‚≠ê",emoji:"‚≠ê"},{text:"ÿ™ŸÖÿßŸÖ üëç",emoji:"üëç"}],Hc=[{text:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ ÿ•ŸÑŸäŸÉ! üöó",emoji:"üöó"},{text:"ŸàÿµŸÑÿ™! üìç",emoji:"üìç"},{text:"ÿØŸÇÿßÿ¶ŸÇ Ÿàÿ£ŸàÿµŸÑ ‚è±Ô∏è",emoji:"‚è±Ô∏è"},{text:"ÿ£ÿ≠ÿ™ÿßÿ¨ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ üìå",emoji:"üìå"},{text:"ÿßÿ™ÿµŸÑ ÿ®Ÿä üìû",emoji:"üìû"},{text:"ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ∑ŸÑÿ®ŸÉ! üôè",emoji:"üôè"}],Qc=[{text:"ÿ∑ŸÑÿ®ŸÉ ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ± üë®‚Äçüç≥",emoji:"üë®‚Äçüç≥"},{text:"ÿßŸÑÿ∑ŸÑÿ® ÿ¨ÿßŸáÿ≤! üì¶",emoji:"üì¶"},{text:"ÿßŸÑŸÖŸÜÿØŸàÿ® ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ üöó",emoji:"üöó"},{text:"ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ∑ŸÑÿ®ŸÉ! üôè",emoji:"üôè"},{text:"ŸÜÿπÿ™ÿ∞ÿ± ÿπŸÜ ÿßŸÑÿ™ÿ£ÿÆŸäÿ± ‚è≥",emoji:"‚è≥"},{text:"ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ® ‚úÖ",emoji:"‚úÖ"}],Wc=["üòä","üëç","‚ù§Ô∏è","üî•","‚≠ê","üôè","üí™","üéâ","‚òï","üçï","üöó","üìç"],Gc=()=>{const[s]=la(),t=s.get("orderId"),n=gs(),{user:i,role:c}=$e(),y=Qe(),[r,k]=a.useState(null),[$,M]=a.useState([]),[I,N]=a.useState(""),[A,p]=a.useState(!1),[f,_]=a.useState(!1),[m,j]=a.useState(""),L=a.useRef(null),g=c==="courier",d=c==="owner",h=c==="customer"||c==="admin",F=r&&!r.courierId&&r.restaurantId,b=g?Hc:d?Qc:h&&F?zc:qc;a.useEffect(()=>{if(!t)return;const C=As(X(S,"orders",t),P=>{if(P.exists()){const x=P.data();k({id:P.id,status:x.status,address:x.address,total:x.total,customerId:x.customerId,courierId:x.courierId,restaurantId:x.restaurantId,restaurantName:x.restaurantName})}});return()=>C()},[t]),a.useEffect(()=>{if(!r)return;let C,P="customer";if(g||d?(C=r.customerId,P="customer"):h&&(r.courierId?(C=r.courierId,P="courier"):r.restaurantId&&(C=r.restaurantId,P="restaurant")),!C){j(F?r.restaurantName||"ÿßŸÑŸÖÿ∑ÿπŸÖ":"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ");return}P==="restaurant"?Ce(X(S,"restaurants",C)).then(x=>{var z;x.exists()?j(((z=x.data())==null?void 0:z.name)||"ÿßŸÑŸÖÿ∑ÿπŸÖ"):j(r.restaurantName||"ÿßŸÑŸÖÿ∑ÿπŸÖ")}):Ce(X(S,"users",C)).then(x=>{var z;if(x.exists()){const R=P==="courier"?"ÿßŸÑŸÖŸÜÿØŸàÿ®":"ÿßŸÑÿπŸÖŸäŸÑ";j(((z=x.data())==null?void 0:z.name)||R)}})},[r,g,d,h,F]),a.useEffect(()=>{if(!t)return;const C=pe(te(S,"orders",t,"messages"),as("createdAt","asc")),P=As(C,x=>{M(x.docs.map(z=>({id:z.id,...z.data()})))});return()=>P()},[t]),a.useEffect(()=>{var C;(C=L.current)==null||C.scrollIntoView({behavior:"smooth"})},[$]);const E=async C=>{if(!(!C.trim()||!i||!t)){p(!0);try{let P="customer";g?P="courier":d&&(P="owner"),await Fe(te(S,"orders",t,"messages"),{text:C.trim(),senderId:i.uid,senderRole:P,createdAt:J()}),N(""),_(!1)}catch{y.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©")}p(!1)}},o=C=>{N(P=>P+C)},w=C=>C?C.toDate().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"",U=C=>({pending:{text:"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",color:"bg-yellow-500",emoji:"‚è≥"},accepted:{text:"ÿ™ŸÖ ÿßŸÑŸÇÿ®ŸàŸÑ",color:"bg-blue-500",emoji:"‚úÖ"},preparing:{text:"ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",color:"bg-orange-500",emoji:"üë®‚Äçüç≥"},ready:{text:"ÿ¨ÿßŸáÿ≤",color:"bg-purple-500",emoji:"üì¶"},out_for_delivery:{text:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",color:"bg-sky-500",emoji:"üöó"},delivered:{text:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",color:"bg-green-500",emoji:"‚úÖ"}})[C]||{text:C,color:"bg-gray-500",emoji:"üì¶"},B=()=>g||d?"üë§":F?"üçΩÔ∏è":"üöó";if(!t)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ht,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ∑ŸÑÿ®"})]})});if(!r)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})});if(!((i==null?void 0:i.uid)===r.customerId||(i==null?void 0:i.uid)===r.courierId||(i==null?void 0:i.uid)===r.restaurantId))return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üîí"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸàÿµŸàŸÑ ŸÑŸáÿ∞Ÿá ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©"})]})});const O=U(r.status);return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] max-w-2xl mx-auto",children:[e.jsxs("div",{className:`bg-gradient-to-r ${F?"from-orange-500 via-amber-500 to-yellow-500":"from-primary via-sky-500 to-accent"} rounded-t-3xl p-4 shadow-luxury`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>n(-1),className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center hover:bg-white/30 transition-all",children:e.jsx(Is,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:B()})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-white text-lg",children:m||(F?"ÿßŸÑŸÖÿ∑ÿπŸÖ":g||d?"ÿßŸÑÿπŸÖŸäŸÑ":"ÿßŸÑŸÖŸÜÿØŸàÿ®")}),e.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-sm",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${r.status==="delivered"?"bg-green-400":"bg-yellow-400 animate-pulse"}`}),e.jsxs("span",{children:[O.emoji," ",O.text]})]})]})]})}),F?e.jsx(Ve,{className:"w-6 h-6 text-white animate-pulse"}):e.jsx(ds,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-white/90 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsxs("span",{children:["#",r.id.slice(-6)]})]}),r.restaurantName&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:r.restaurantName})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[150px]",children:r.address})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-sky-50 to-white p-4 space-y-3",children:[$.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üí¨"}),e.jsx("p",{className:"text-gray-500",children:"ÿßÿ®ÿØÿ£ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ© ÿßŸÑÿ¢ŸÜ!"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"ÿ£ÿ±ÿ≥ŸÑ ÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÑÿ™ŸàÿßÿµŸÑ"})]}),$.map((C,P)=>{const x=C.senderId===(i==null?void 0:i.uid);return e.jsx("div",{className:`flex ${x?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`
                  max-w-[80%] rounded-2xl px-4 py-3 shadow-md
                  ${x?"bg-gradient-to-br from-primary to-sky-600 text-white rounded-bl-sm":"bg-white text-gray-800 rounded-br-sm border border-gray-100"}
                  transform transition-all duration-300 hover:scale-[1.02]
                `,children:[e.jsx("p",{className:"text-base leading-relaxed",children:C.text}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${x?"text-white/70":"text-gray-400"}`,children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsx("span",{children:w(C.createdAt)}),x&&e.jsx(Yr,{className:"w-3 h-3 mr-1"})]})]})},C.id)}),e.jsx("div",{ref:L})]}),e.jsx("div",{className:"bg-white border-t border-gray-100 px-3 py-2",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:b.map((C,P)=>e.jsx("button",{onClick:()=>E(C.text),className:`flex-shrink-0 px-4 py-2 bg-gradient-to-r from-sky-50 to-blue-50 
                         rounded-full text-sm text-primary font-medium border border-sky-100
                         hover:from-sky-100 hover:to-blue-100 hover:shadow-md 
                         transition-all duration-200 active:scale-95`,children:C.text},P))})}),f&&e.jsx("div",{className:"bg-white border-t border-gray-100 px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Wc.map((C,P)=>e.jsx("button",{onClick:()=>o(C),className:`w-10 h-10 text-2xl hover:bg-gray-100 rounded-full 
                           transition-all duration-200 hover:scale-125 active:scale-95`,children:C},P))})}),e.jsx("div",{className:"bg-white border-t border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(!f),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all
                       ${f?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(si,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{type:"text",value:I,onChange:C=>N(C.target.value),onKeyPress:C=>C.key==="Enter"&&E(I),placeholder:"ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ...",className:`w-full px-5 py-3 bg-gray-100 rounded-full text-gray-800 
                         placeholder-gray-400 focus:outline-none focus:ring-2 
                         focus:ring-primary/50 focus:bg-white transition-all`})}),e.jsx("button",{onClick:()=>E(I),disabled:!I.trim()||A,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all
                       ${I.trim()?"bg-gradient-to-r from-primary to-accent text-white shadow-lg hover:shadow-xl hover:scale-105":"bg-gray-200 text-gray-400"}
                       disabled:opacity-50 active:scale-95`,children:e.jsx(ca,{className:"w-5 h-5"})})]})}),r.status==="delivered"&&e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[e.jsx(Yr,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"ÿ™ŸÖ ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠! üéâ"}),e.jsx(Zt,{className:"w-5 h-5 text-red-300 animate-pulse"})]}),e.jsx("p",{className:"text-white/80 text-sm mt-1",children:"ÿ¥ŸÉÿ±ÿßŸã ŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸÉ ÿ™ÿ∑ÿ®ŸäŸÇŸÜÿß ‚≠ê"})]})]})},dl={order_ready:{icon:e.jsx(Oe,{className:"w-5 h-5"}),bgColor:"bg-green-100",textColor:"text-green-600"},order_delivered:{icon:e.jsx(De,{className:"w-5 h-5"}),bgColor:"bg-emerald-100",textColor:"text-emerald-600"},order_accepted:{icon:e.jsx(hs,{className:"w-5 h-5"}),bgColor:"bg-blue-100",textColor:"text-blue-600"},courier_assigned:{icon:e.jsx(Ue,{className:"w-5 h-5"}),bgColor:"bg-sky-100",textColor:"text-sky-600"},nearby_offer:{icon:e.jsx(es,{className:"w-5 h-5"}),bgColor:"bg-purple-100",textColor:"text-purple-600"},discount:{icon:e.jsx(Bt,{className:"w-5 h-5"}),bgColor:"bg-rose-100",textColor:"text-rose-600"},new_menu_item:{icon:e.jsx(ds,{className:"w-5 h-5"}),bgColor:"bg-amber-100",textColor:"text-amber-600"},default:{icon:e.jsx(dt,{className:"w-5 h-5"}),bgColor:"bg-gray-100",textColor:"text-gray-600"}},Yc=()=>{const{user:s}=$e(),t=Qe(),n=gs(),[i,c]=a.useState([]),[y,r]=a.useState(!0);a.useEffect(()=>{if(!s)return;const A=pe(te(S,"notifications"),be("recipientId","==",s.uid),as("createdAt","desc")),p=As(A,f=>{const _=f.docs.map(m=>({id:m.id,...m.data()}));c(_),r(!1)},f=>{console.error("Error fetching notifications:",f),r(!1)});return()=>p()},[s]);const k=async A=>{try{await xe(X(S,"notifications",A),{read:!0})}catch(p){console.error("Error marking as read:",p)}},$=async()=>{const A=i.filter(p=>!p.read);try{await Promise.all(A.map(p=>xe(X(S,"notifications",p.id),{read:!0}))),t.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÉŸÑ ŸÉŸÖŸÇÿ±Ÿàÿ°")}catch{t.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™")}},M=async A=>{try{await Ss(X(S,"notifications",A)),t.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±")}catch{t.error("ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±")}},I=A=>{if(!A)return"";const p=A.toDate(),_=new Date().getTime()-p.getTime(),m=Math.floor(_/6e4),j=Math.floor(_/36e5),L=Math.floor(_/864e5);return m<1?"ÿßŸÑÿ¢ŸÜ":m<60?`ŸÖŸÜÿ∞ ${m} ÿØŸÇŸäŸÇÿ©`:j<24?`ŸÖŸÜÿ∞ ${j} ÿ≥ÿßÿπÿ©`:L<7?`ŸÖŸÜÿ∞ ${L} ŸäŸàŸÖ`:p.toLocaleDateString("ar-SA")},N=i.filter(A=>!A.read).length;return y?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(qe,{className:"w-8 h-8 animate-spin text-sky-500"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[e.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[e.jsx(Is,{className:"w-5 h-5"}),"ÿ±ÿ¨Ÿàÿπ"]}),e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(dt,{className:"w-6 h-6 text-sky-500"}),"ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™",N>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:N})]}),N>0&&e.jsx("button",{onClick:$,className:"text-sm text-sky-600 hover:text-sky-800",children:"ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑŸÉŸÑ"})]})})}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:i.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(dt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"})]}):e.jsx("div",{className:"space-y-3",children:i.map(A=>{const p=dl[A.type]||dl.default;return e.jsx("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition hover:shadow-md cursor-pointer ${A.read?"border-gray-100":"border-sky-200 bg-sky-50/50"}`,onClick:()=>{A.read||k(A.id),A.actionUrl&&n(A.actionUrl)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${p.bgColor} ${p.textColor}`,children:p.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:A.message}),!A.read&&e.jsx("span",{className:"text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded-full",children:"ÿ¨ÿØŸäÿØ"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:I(A.createdAt)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[!A.read&&e.jsx("button",{onClick:f=>{f.stopPropagation(),k(A.id)},className:"p-1.5 text-gray-400 hover:text-green-500 transition",title:"ÿ™ÿ≠ÿØŸäÿØ ŸÉŸÖŸÇÿ±Ÿàÿ°",children:e.jsx(hs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:f=>{f.stopPropagation(),M(A.id)},className:"p-1.5 text-gray-400 hover:text-red-500 transition",title:"ÿ≠ÿ∞ŸÅ",children:e.jsx(fs,{className:"w-4 h-4"})})]})]})},A.id)})})})]})},Kc=[{keywords:["ŸÖÿ±ÿ≠ÿ®ÿß","ÿßŸÑÿ≥ŸÑÿßŸÖ","ŸáŸÑÿß","ÿßŸáŸÑÿß"],reply:"ÿ£ŸáŸÑÿßŸã Ÿàÿ≥ŸáŸÑÿßŸã! üëã ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü"},{keywords:["ÿ∑ŸÑÿ®","ŸÖÿ™ÿ£ÿÆÿ±","ÿ™ÿ£ÿÆÿ±","ŸàŸäŸÜ ÿßŸÑÿ∑ŸÑÿ®"],reply:"ŸÜÿπÿ™ÿ∞ÿ± ÿπŸÜ ÿßŸÑÿ™ÿ£ÿÆŸäÿ±! ŸáŸÑ ŸäŸÖŸÉŸÜŸÉ ÿ•ÿÆÿ®ÿßÿ±Ÿä ÿ®ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ® ŸÑŸÖÿ™ÿßÿ®ÿπÿ™Ÿáÿü"},{keywords:["ÿßŸÑÿ∫ÿßÿ°","ÿßŸÑÿ∫Ÿä","ÿ£ŸÑÿ∫Ÿä","ÿ±ÿ¨ÿπ ŸÅŸÑŸàÿ≥Ÿä"],reply:"ÿ≥ÿ£ÿ≥ÿßÿπÿØŸÉ ŸÅŸä ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®. ŸÖÿß ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®ÿü ŸàŸÖÿß ÿ≥ÿ®ÿ® ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°ÿü"},{keywords:["ÿ¥ŸÉÿ±ÿß","ŸÖÿ¥ŸÉŸàÿ±","ÿ™ÿ≥ŸÑŸÖ"],reply:"ÿßŸÑÿπŸÅŸà! ÿ≥ÿπŸäÿØŸäŸÜ ÿ®ÿÆÿØŸÖÿ™ŸÉ üåü ŸáŸÑ ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ£Ÿä ŸÖÿ≥ÿßÿπÿØÿ© ÿ£ÿÆÿ±Ÿâÿü"}],Jc=[{q:"ŸÉŸäŸÅ ÿ£ŸÑÿ∫Ÿä ÿ∑ŸÑÿ®Ÿäÿü",icon:"‚ùå"},{q:"ÿ£ŸäŸÜ ÿ∑ŸÑÿ®Ÿä ÿßŸÑÿ¢ŸÜÿü",icon:"üìç"},{q:"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿØŸÅÿπ",icon:"üí≥"},{q:"ÿ¥ŸÉŸàŸâ ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ±ÿ©",icon:"üè†"},{q:"ÿ¥ŸÉŸàŸâ ÿπŸÑŸâ ÿßŸÑŸÖŸÜÿØŸàÿ®",icon:"üöó"},{q:"ÿ£ÿÆÿ±Ÿâ",icon:"üí¨"}],Xc=()=>{gs();const{user:s,role:t}=$e(),n=Qe(),i=a.useRef(null),c=a.useRef(null),[y,r]=a.useState(null),[k,$]=a.useState([]),[M,I]=a.useState(!0),[N,A]=a.useState(!1),[p,f]=a.useState(""),[_,m]=a.useState(!0),[j,L]=a.useState(!1);a.useEffect(()=>{if(!(s!=null&&s.uid))return;(async()=>{const D=pe(te(S,"supportChats"),be("userId","==",s.uid),be("status","in",["active","waiting"]),ks(1)),b=await ue(D);if(!b.empty){const E={id:b.docs[0].id,...b.docs[0].data()};r(E),m(!1)}I(!1)})()},[s==null?void 0:s.uid]),a.useEffect(()=>{if(!(y!=null&&y.id))return;const F=pe(te(S,"supportChats",y.id,"messages"),as("createdAt","asc")),D=As(F,b=>{const E=b.docs.map(o=>({id:o.id,...o.data()}));$(E),E.some(o=>!o.read&&o.senderRole==="support")&&xe(X(S,"supportChats",y.id),{unreadByUser:0})});return()=>D()},[y==null?void 0:y.id]),a.useEffect(()=>{var F;(F=i.current)==null||F.scrollIntoView({behavior:"smooth"})},[k,j]);const g=async F=>{if(s!=null&&s.uid)try{const D={userId:s.uid,userName:s.displayName||"ŸÖÿ≥ÿ™ÿÆÿØŸÖ",userRole:t||"customer",status:"waiting",subject:F||"ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ± ÿπÿßŸÖ",priority:"medium",createdAt:J(),updatedAt:J(),unreadByUser:0,unreadBySupport:1},b=await Fe(te(S,"supportChats"),D),E={id:b.id,...D};r(E),m(!1),await Fe(te(S,"supportChats",b.id,"messages"),{chatId:b.id,senderId:"bot",senderName:"ŸÖÿ≥ÿßÿπÿØ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™",senderRole:"bot",message:`ŸÖÿ±ÿ≠ÿ®ÿßŸã ${s.displayName||"ÿπÿ≤Ÿäÿ≤Ÿä ÿßŸÑÿπŸÖŸäŸÑ"}! üëã

ÿ£ŸÜÿß ŸÖÿ≥ÿßÿπÿØŸÉ ÿßŸÑÿ¢ŸÑŸä. ÿ£ÿÆÿ®ÿ±ŸÜŸä ÿ®ŸÖÿ¥ŸÉŸÑÿ™ŸÉ Ÿàÿ≥ÿ£ÿ≠ÿßŸàŸÑ ŸÖÿ≥ÿßÿπÿØÿ™ŸÉÿå ÿ£Ÿà ÿ≥Ÿäÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ ÿÆŸÑÿßŸÑ ÿØŸÇÿßÿ¶ŸÇ.

${F?`ŸÖŸàÿ∂Ÿàÿπ ÿßŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±: ${F}`:""}`,type:"bot",createdAt:J(),read:!1}),setTimeout(()=>{var o;return(o=c.current)==null?void 0:o.focus()},100)}catch(D){console.error("Error starting chat:",D),n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}},d=async F=>{const D=F||p.trim();if(!(!D||!(y!=null&&y.id)||N)){A(!0),f("");try{await Fe(te(S,"supportChats",y.id,"messages"),{chatId:y.id,senderId:s==null?void 0:s.uid,senderName:(s==null?void 0:s.displayName)||"ŸÖÿ≥ÿ™ÿÆÿØŸÖ",senderRole:"user",message:D,type:"user",createdAt:J(),read:!1}),await xe(X(S,"supportChats",y.id),{lastMessage:D,lastMessageAt:J(),updatedAt:J(),unreadBySupport:Xe(1)}),setTimeout(async()=>{L(!0);const b=Kc.find(E=>E.keywords.some(o=>D.toLowerCase().includes(o)));await new Promise(E=>setTimeout(E,1500)),b&&await Fe(te(S,"supportChats",y.id,"messages"),{chatId:y.id,senderId:"bot",senderName:"ŸÖÿ≥ÿßÿπÿØ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™",senderRole:"bot",message:b.reply,type:"bot",createdAt:J(),read:!1}),L(!1)},500)}catch(b){console.error("Error sending message:",b),n.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©")}finally{A(!1)}}},h=async()=>{y!=null&&y.id&&(await xe(X(S,"supportChats",y.id),{status:"closed",updatedAt:J()}),r(null),$([]),m(!0),n.success("ÿ™ŸÖ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©"))};return M?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ts,{className:"w-10 h-10 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto h-[calc(100vh-120px)] flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-blue-500 rounded-t-2xl p-4 text-white flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Et,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä"}),e.jsx("p",{className:"text-sky-100 text-sm flex items-center gap-1",children:(y==null?void 0:y.status)==="active"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"ŸÖÿ™ÿµŸÑ ÿßŸÑÿ¢ŸÜ"]}):(y==null?void 0:y.status)==="waiting"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse"}),"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿØÿπŸÖ"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"ŸÖÿ™ÿßÿ≠ ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ©"]})})]})]}),y&&e.jsx("button",{onClick:h,className:"p-2 hover:bg-white/20 rounded-full transition",title:"ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"flex-1 bg-gradient-to-b from-gray-50 to-white overflow-y-auto p-4 space-y-4",children:[_&&!y&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg",children:e.jsx(ds,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜÿß ŸÖÿ≥ÿßÿπÿØÿ™ŸÉÿü"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"ÿßÿÆÿ™ÿ± ŸÖŸàÿ∂ŸàÿπÿßŸã ÿ£Ÿà ÿßÿ®ÿØÿ£ ŸÖÿ≠ÿßÿØÿ´ÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ©"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Jc.map((F,D)=>e.jsxs("button",{onClick:()=>g(F.q),className:`flex items-center gap-3 p-4 bg-white rounded-xl border-2 border-gray-100 
                             hover:border-sky-300 hover:shadow-md transition-all text-right`,children:[e.jsx("span",{className:"text-2xl",children:F.icon}),e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:F.q})]},D))}),e.jsxs("button",{onClick:()=>g(),className:`w-full flex items-center justify-center gap-3 py-4 px-6 
                         bg-gradient-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700
                         text-white rounded-2xl font-bold shadow-lg transition-all`,children:[e.jsx(ht,{className:"w-6 h-6"}),e.jsx("span",{children:"ÿßÿ®ÿØÿ£ ŸÖÿ≠ÿßÿØÿ´ÿ© ŸÖÿπ ÿßŸÑÿØÿπŸÖ"})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-amber-800 text-sm",children:"‚è∞ ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ ŸÖÿ™ÿßÿ≠ ÿπŸÑŸâ ŸÖÿØÿßÿ± ÿßŸÑÿ≥ÿßÿπÿ©"}),e.jsx("p",{className:"text-amber-600 text-xs mt-1",children:"ŸÖÿ™Ÿàÿ≥ÿ∑ ŸàŸÇÿ™ ÿßŸÑÿ±ÿØ: ÿ£ŸÇŸÑ ŸÖŸÜ 5 ÿØŸÇÿßÿ¶ŸÇ"})]})]}),k.map(F=>{var D,b;return e.jsx("div",{className:`flex ${F.senderRole==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] ${F.senderRole==="user"?"order-1":"order-2"}`,children:[F.senderRole!=="user"&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${F.senderRole==="bot"?"bg-purple-100":"bg-sky-100"}`,children:F.senderRole==="bot"?e.jsx(mr,{className:"w-4 h-4 text-purple-600"}):e.jsx(Et,{className:"w-4 h-4 text-sky-600"})}),e.jsx("span",{className:"text-xs text-gray-500",children:F.senderName})]}),e.jsx("div",{className:`rounded-2xl px-4 py-3 ${F.senderRole==="user"?"bg-gradient-to-r from-sky-500 to-blue-500 text-white rounded-br-md":F.senderRole==="bot"?"bg-purple-50 text-gray-800 border border-purple-100 rounded-bl-md":"bg-white text-gray-800 border border-gray-200 shadow-sm rounded-bl-md"}`,children:e.jsx("p",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:F.message})}),e.jsx("p",{className:`text-xs text-gray-400 mt-1 ${F.senderRole==="user"?"text-left":"text-right"}`,children:((b=(D=F.createdAt)==null?void 0:D.toDate)==null?void 0:b.call(D).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}))||""})]})},F.id)}),j&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(mr,{className:"w-4 h-4 text-purple-600"})}),e.jsx("div",{className:"bg-gray-100 rounded-2xl px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),e.jsx("div",{ref:i})]}),y&&e.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 rounded-b-2xl flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{ref:c,type:"text",value:p,onChange:F=>f(F.target.value),onKeyPress:F=>F.key==="Enter"&&d(),placeholder:"ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ŸáŸÜÿß...",className:`flex-1 px-4 py-3 bg-gray-100 rounded-xl border-2 border-transparent 
                       focus:border-sky-300 focus:bg-white focus:outline-none transition`,disabled:N}),e.jsx("button",{onClick:()=>d(),disabled:!p.trim()||N,className:`w-12 h-12 bg-gradient-to-r from-sky-500 to-blue-500 hover:from-sky-600 hover:to-blue-700
                       text-white rounded-xl flex items-center justify-center transition-all
                       disabled:opacity-50 disabled:cursor-not-allowed`,children:N?e.jsx(ts,{className:"w-5 h-5 animate-spin"}):e.jsx(ca,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-1",children:["ÿ£ŸäŸÜ ÿ∑ŸÑÿ®Ÿäÿü","ÿ£ÿ±ŸäÿØ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®","ÿ™ÿ≠ÿØÿ´ ŸÖÿπ ŸÖŸàÿ∏ŸÅ"].map((F,D)=>e.jsx("button",{onClick:()=>d(F),disabled:N,className:`flex-shrink-0 px-3 py-1.5 bg-gray-100 hover:bg-sky-100 
                         text-gray-600 hover:text-sky-700 rounded-full text-sm transition`,children:F},D))})]})]})},Zc=()=>{var F,D;const{user:s,role:t}=$e(),n=Qe(),[i,c]=a.useState("dashboard"),[y,r]=a.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[k,$]=a.useState(0),[M,I]=a.useState(!0),[N,A]=a.useState(null),[p,f]=a.useState([]),[_,m]=a.useState("all"),[j,L]=a.useState([]),[g,d]=a.useState(null);a.useEffect(()=>{s&&(async()=>{try{const b=pe(te(S,"restaurants"),be("referredBy","==",s.uid)),o=(await ue(b)).docs.map(C=>({id:C.id,...C.data()}));L(o);const w=o.length,U=o.map(C=>C.id);let B=0,Q=0,O=0;if(U.length>0){const C=pe(te(S,"orders"),be("status","==","pending"),ks(100));B=(await ue(C)).docs.filter(R=>U.includes(R.data().restaurantId)).length;const z=(await ue(te(S,"orders"))).docs.filter(R=>U.includes(R.data().restaurantId));Q=z.length,O=z.reduce((R,u)=>R+(u.data().deliveryFee||0),0)}try{const P=(await Ce(X(S,"wallets",s.uid))).data();$((P==null?void 0:P.balance)||0)}catch{$(0)}try{const C=pe(te(S,"tasks"),be("assignedTo","==",s.uid)),x=(await ue(C)).docs.map(z=>({id:z.id,...z.data()}));f(x.sort((z,R)=>{var u,v;return(((u=R.createdAt)==null?void 0:u.seconds)||0)-(((v=z.createdAt)==null?void 0:v.seconds)||0)}))}catch(C){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸáÿßŸÖ:",C)}r({totalRestaurants:w,totalOrders:Q,totalEarnings:O,pendingOrders:B})}catch(b){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™:",b)}finally{I(!1)}})()},[s]);const h=async(b,E)=>{try{const o={status:E,updatedAt:J()};E==="completed"&&(o.completedAt=J()),await xe(X(S,"tasks",b),o),f(w=>w.map(U=>U.id===b?{...U,status:E}:U)),n.success(E==="in_progress"?"ÿ™ŸÖ ÿ®ÿØÿ° ÿßŸÑŸÖŸáŸÖÿ©":E==="completed"?"ÿ™ŸÖ ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑŸÖŸáŸÖÿ© ÿ®ŸÜÿ¨ÿßÿ≠! üéâ":"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸáŸÖÿ©")}catch{n.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸáŸÖÿ©")}};return a.useEffect(()=>{s&&(async()=>{try{const b=await Ce(X(S,"users",s.uid));b.exists()&&A({uid:b.id,...b.data()})}catch(b){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅ:",b)}})()},[s]),M?e.jsx(Ee,{allow:["admin"],children:e.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})}):e.jsx(Ee,{allow:["admin"],children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ•ÿØÿßÿ±ÿ©"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"ÿ£ŸáŸÑÿßŸã ÿ®ŸÉ Ÿäÿß ŸÖÿ¥ÿ±ŸÅ! üëã"})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6 flex-wrap",children:[e.jsxs("button",{onClick:()=>c("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${i==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(ct,{className:"w-5 h-5"}),"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ"]}),e.jsxs("button",{onClick:()=>c("myRestaurants"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${i==="myRestaurants"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Ve,{className:"w-5 h-5"}),"ŸÖÿ∑ÿßÿπŸÖŸä",e.jsx("span",{className:"bg-white/20 text-xs px-2 py-0.5 rounded-full",children:j.length})]}),e.jsxs("button",{onClick:()=>c("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${i==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(os,{className:"w-5 h-5"}),"ÿ®ŸäÿßŸÜÿßÿ™Ÿä"]}),e.jsxs("button",{onClick:()=>c("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${i==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx($a,{className:"w-5 h-5"}),"ŸÖŸáÿßŸÖŸä",p.filter(b=>b.status==="pending"||b.status==="in_progress").length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:p.filter(b=>b.status==="pending"||b.status==="in_progress").length})]})]}),i==="myRestaurants"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ŸÖÿ∑ÿßÿπŸÖŸä ÿßŸÑŸÖÿ≥ÿ¨ŸÑÿ©"}),e.jsx("h2",{className:"text-4xl font-bold",children:j.length}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"üí∞ ÿ≥ÿ™ÿ≠ÿµŸÑŸäŸÜ ÿπŸÑŸâ ÿπŸÖŸàŸÑÿ© ŸÖŸÜ ŸÉŸÑ ÿ∑ŸÑÿ® ŸÑŸáÿ∞Ÿá ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"})]}),e.jsx(Ve,{className:"w-16 h-16 opacity-80"})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-6 h-6"}),"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ≥ÿ¨ŸÑÿ© ÿ®Ÿàÿßÿ≥ÿ∑ÿ™Ÿä"]}),j.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-5xl mb-4",children:"üè™"}),e.jsx("p",{className:"text-lg font-semibold",children:"ŸÑŸÖ ÿ™ŸÇŸàŸÖŸä ÿ®ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ£Ÿä ŸÖÿ∑ÿπŸÖ ÿ®ÿπÿØ"}),e.jsx("p",{className:"text-sm mt-2",children:'ÿßÿ∂ÿ∫ÿ∑Ÿä ÿπŸÑŸâ "ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ" ŸÑÿ®ÿØÿ° ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ'}),e.jsx(re,{to:"/admin/add-restaurant",className:"inline-block mt-4 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:"‚ûï ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"})]}):e.jsx("div",{className:"space-y-4",children:j.map(b=>{var E,o,w;return e.jsxs("div",{className:"border-2 rounded-2xl overflow-hidden hover:border-primary transition",children:[e.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50 flex items-center justify-between",onClick:()=>d(g===b.id?null:b.id),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:b.logoUrl?e.jsx("img",{src:b.logoUrl,alt:b.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:"üçΩÔ∏è"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:b.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[b.city||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"," ‚Ä¢ ",b.phone||"ÿ®ÿØŸàŸÜ ÿ±ŸÇŸÖ"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[b.isVerified?e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:"‚úÖ ŸÖŸàÿ´ŸÇ"}):e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-semibold rounded-full",children:"‚è≥ ÿ∫Ÿäÿ± ŸÖŸàÿ´ŸÇ"}),b.packageType==="premium"&&e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 text-xs font-semibold rounded-full",children:"‚≠ê ŸÖŸÖŸäÿ≤"})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:g===b.id?e.jsx(vr,{className:"w-5 h-5 text-gray-400"}):e.jsx(Oa,{className:"w-5 h-5 text-gray-400"})})]}),g===b.id&&e.jsx("div",{className:"border-t bg-gray-50 p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßŸÑŸÖÿπÿ±ŸëŸÅ"}),e.jsx("p",{className:"font-mono text-xs text-gray-700 truncate",children:b.id})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßŸÑÿ®ÿ±ŸäÿØ"}),e.jsx("p",{className:"text-sm text-gray-700 truncate",children:b.email||"-"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßŸÑŸÖŸàŸÇÿπ"}),e.jsx("p",{className:"text-sm text-gray-700 truncate",children:b.location||"-"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ"}),e.jsx("p",{className:"text-sm text-gray-700",children:((w=(o=(E=b.createdAt)==null?void 0:E.toDate)==null?void 0:o.call(E))==null?void 0:w.toLocaleDateString("ar-SA"))||(b.createdAt instanceof Date?b.createdAt.toLocaleDateString("ar-SA"):"-")})]})]})})]},b.id)})}),j.length>0&&e.jsx(re,{to:"/admin/add-restaurant",className:"block mt-6 w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"‚ûï ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"})]})]}),i==="profile"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(os,{className:"w-6 h-6"}),"ÿ®ŸäÿßŸÜÿßÿ™Ÿä"]}),N?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((F=N.name)==null?void 0:F.charAt(0))||((D=N.email)==null?void 0:D.charAt(0))||"ÿü"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:N.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:"üëî ŸÖÿ¥ÿ±ŸÅ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"}),e.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:N.email})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ÿßŸÑÿØŸàÿ±"}),e.jsx("p",{className:"font-semibold text-gray-900",children:t==="admin"?"ŸÖÿ¥ÿ±ŸÅ":t})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ŸÖÿπÿ±ŸëŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ"}),e.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:N.uid})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©"}),e.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[k.toFixed(2)," ÿ±.ÿ≥"]})]})]})]}),e.jsx(re,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä"})]}):e.jsx("div",{className:"text-center py-8 text-gray-600",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]}),i==="tasks"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx($a,{className:"w-6 h-6"}),"ŸÖŸáÿßŸÖŸä ÿßŸÑŸäŸàŸÖŸäÿ©"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(b=>e.jsxs("button",{onClick:()=>m(b),className:`px-4 py-2 rounded-xl font-semibold transition ${_===b?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[b==="all"&&"üìã ÿßŸÑŸÉŸÑ",b==="pending"&&"‚è≥ ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±",b==="in_progress"&&"üîÑ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞",b==="completed"&&"‚úÖ ŸÖŸÉÿ™ŸÖŸÑÿ©"]},b))}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:p.filter(b=>b.status==="pending").length}),e.jsx("p",{className:"text-sm text-yellow-700",children:"ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:p.filter(b=>b.status==="in_progress").length}),e.jsx("p",{className:"text-sm text-blue-700",children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:p.filter(b=>b.status==="completed").length}),e.jsx("p",{className:"text-sm text-green-700",children:"ŸÖŸÉÿ™ŸÖŸÑÿ©"})]})]}),p.filter(b=>_==="all"||b.status===_).length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-5xl mb-4",children:"üìã"}),e.jsxs("p",{className:"text-lg",children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸáÿßŸÖ ",_!=="all"&&"ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸÅÿ¶ÿ©"]}),e.jsx("p",{className:"text-sm mt-2",children:"ÿ≥ÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß ÿßŸÑŸÖŸáÿßŸÖ ÿßŸÑÿ™Ÿä Ÿäÿ≥ŸÜÿØŸáÿß ŸÑŸÉ ÿßŸÑŸÖÿ∑Ÿàÿ±"})]}):e.jsx("div",{className:"space-y-4",children:p.filter(b=>_==="all"||b.status===_).map(b=>{var E,o,w;return e.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${b.status==="completed"?"bg-green-50 border-green-200":b.status==="in_progress"?"bg-blue-50 border-blue-200":b.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${b.priority==="high"?"bg-red-100 text-red-700":b.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:b.priority==="high"?"üî¥ ÿπÿßŸÑŸäÿ©":b.priority==="medium"?"üü° ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©":"‚ö™ ŸÖŸÜÿÆŸÅÿ∂ÿ©"}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${b.status==="pending"?"bg-yellow-100 text-yellow-700":b.status==="in_progress"?"bg-blue-100 text-blue-700":b.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[b.status==="pending"&&"‚è≥ ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±",b.status==="in_progress"&&"üîÑ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞",b.status==="completed"&&"‚úÖ ŸÖŸÉÿ™ŸÖŸÑÿ©",b.status==="cancelled"&&"‚ùå ŸÖŸÑÿ∫ÿßÿ©"]})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:b.title}),b.description&&e.jsx("p",{className:"text-gray-600 mt-1",children:b.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[b.dueDate&&e.jsxs("span",{className:new Date(b.dueDate)<new Date&&b.status!=="completed"?"text-red-600 font-semibold":"",children:["üìÖ ",new Date(b.dueDate).toLocaleDateString("ar-SA"),new Date(b.dueDate)<new Date&&b.status!=="completed"&&" (ŸÖÿ™ÿ£ÿÆÿ±ÿ©!)"]}),e.jsxs("span",{children:["üïê ",((w=(o=(E=b.createdAt)==null?void 0:E.toDate)==null?void 0:o.call(E))==null?void 0:w.toLocaleDateString("ar-SA"))||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"]})]}),b.notes&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:["üí¨ ",b.notes]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[b.status==="pending"&&e.jsx("button",{onClick:()=>h(b.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:"‚ñ∂Ô∏è ÿ®ÿØÿ°"}),b.status==="in_progress"&&e.jsxs("button",{onClick:()=>h(b.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[e.jsx(De,{className:"w-4 h-4"}),"ÿ•ŸÉŸÖÿßŸÑ"]}),b.status==="completed"&&e.jsx("span",{className:"text-green-600 font-semibold text-center",children:"‚úÖ ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¨ÿßÿ≤"})]})]})},b.id)})})]})}),i==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"ÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©"}),e.jsxs("h2",{className:"text-3xl font-bold",children:[k.toFixed(2)," ÿ±.ÿ≥"]}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"üí∞ ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ 50 ŸáŸÑŸÑÿ© ŸÖŸÜ ŸÉŸÑ ÿ∑ŸÑÿ® ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑÿ™Ÿä ÿ£ÿ∂ŸÅÿ™Ÿáÿß"})]}),e.jsx(cs,{className:"w-16 h-16 opacity-80"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ∂ÿßŸÅÿ©"}),e.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:y.totalRestaurants})]}),e.jsx(ps,{className:"w-12 h-12 text-primary opacity-30"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:y.totalOrders})]}),e.jsx(fl,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿπŸÑŸÇÿ©"}),e.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:y.pendingOrders})]}),e.jsx(ct,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"}),e.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:y.totalEarnings.toFixed(2)})]}),e.jsx(ct,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"ÿ£ÿ∂ŸÅ ŸÖÿ∑ÿßÿπŸÖ ÿ¨ÿØŸäÿØÿ© Ÿàÿ£ÿØÿ± ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ≥ÿ¨ŸÑÿ©"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"‚ûï ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"}),e.jsx(re,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"üìã ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"ÿ±ÿßŸÇÿ® ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ∂ÿßŸÅÿ© Ÿàÿ™ÿßÿ®ÿπ ÿ≠ÿßŸÑÿ™Ÿáÿß"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"üìä ÿ¨ŸÖŸäÿπ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx(re,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"‚è≥ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿπŸÑŸÇÿ©"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"ŸÉÿπŸÖŸäŸÑ"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"ÿßÿ≥ÿ™ÿπÿ±ÿ∂ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© Ÿàÿ£ŸÜÿ¥ÿ¶ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ© ŸÖÿ´ŸÑ ÿ£Ÿä ÿπŸÖŸäŸÑ"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"üçó ÿßÿ≥ÿ™ÿπÿ±ÿ∂ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"}),e.jsx(re,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"üì¶ ÿ∑ŸÑÿ®ÿßÿ™Ÿä"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ŸàÿßŸÑŸÖŸÉÿßŸÅÿ¢ÿ™"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"ÿßÿπÿ±ÿ∂ ÿ±ÿµŸäÿØŸÉ ŸàÿßŸÑÿπŸÖŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ™ÿ≠ÿµŸÑÿ© ŸÖŸÜ ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿ∑ÿßÿπŸÖŸÉ"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:["üí∞ ÿ±ÿµŸäÿØŸÉ: ",k.toFixed(2)," ÿ±.ÿ≥"]}),e.jsx(re,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"üìã ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©"})]})]})]})]})]})})},eo=()=>{const{user:s,role:t}=$e(),n=Qe(),i=Ds(),[c,y]=a.useState([]),[r,k]=a.useState(!0),[$,M]=a.useState(!1),[I,N]=a.useState(!1),[A,p]=a.useState(0),f=a.useRef(null),_=a.useRef(null),m=na(Ns),[j,L]=a.useState(null),[g,d]=a.useState({name:"",phone:"",city:"",location:"",isOpen:!0,allowDelivery:!0,allowPickup:!1,logoFile:null,logoPreview:""}),[h,F]=a.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});a.useEffect(()=>{s&&D()},[s]);const D=async()=>{if(s)try{let C=[];if(t==="developer")C=(await ue(te(S,"restaurants"))).docs.map(x=>({id:x.id,...x.data()}));else{const P=pe(te(S,"restaurants"),be("referredBy","==",s.uid));C=(await ue(P)).docs.map(z=>({id:z.id,...z.data()}))}y(C)}catch(C){n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"),console.error(C)}finally{k(!1)}},b=async C=>{if(C.preventDefault(),!h.name.trim()){n.warning("ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ");return}try{N(!0);let P="";if(h.logoFile){const R=h.logoFile.name.replace(/\s+/g,"_").slice(-60),u=`uploads/restaurant_${Date.now()}_${R}`,v=js(m,u),H=kt(v,h.logoFile,{contentType:h.logoFile.type||"image/jpeg"});await new Promise((Y,ce)=>{H.on("state_changed",ie=>{const je=Math.round(ie.bytesTransferred/ie.totalBytes*100);p(je)},ce,async()=>{P=await ys(H.snapshot.ref),Y()})})}const x=t==="admin",z=t==="developer";await Fe(te(S,"restaurants"),{name:h.name,phone:h.phone,city:h.city,location:h.location,ownerId:"admin_"+Date.now(),email:(s==null?void 0:s.email)||"",logoUrl:P,createdAt:new Date,referredBy:x?s==null?void 0:s.uid:null,referrerType:x?"admin":z?"developer":null}),n.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),x&&n.info("üí∞ ÿ≥ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ 75 ŸáŸÑŸÑÿ© ŸÖŸÜ ŸÉŸÑ ŸÖŸÜÿ™ÿ¨ ŸäŸèÿ∑ŸÑÿ® ŸÖŸÜ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖ"),F({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),M(!1),p(0),D()}catch(P){n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ∑ÿπŸÖ"),console.error(P)}finally{N(!1)}},E=C=>{L(C),d({name:C.name||"",phone:C.phone||"",city:C.city||"",location:C.location||"",isOpen:C.isOpen!==!1,allowDelivery:C.allowDelivery!==!1,allowPickup:C.allowPickup===!0,logoFile:null,logoPreview:C.logoUrl||""})},o=()=>{L(null),d({name:"",phone:"",city:"",location:"",isOpen:!0,allowDelivery:!0,allowPickup:!1,logoFile:null,logoPreview:""})},w=async C=>{if(C.preventDefault(),!!j){if(!g.name.trim()){n.warning("ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ");return}try{N(!0);let P=g.logoPreview;if(g.logoFile){const x=g.logoFile.name.replace(/\s+/g,"_").slice(-60),z=`uploads/restaurant_${Date.now()}_${x}`,R=js(m,z),u=kt(R,g.logoFile,{contentType:g.logoFile.type||"image/jpeg"});await new Promise((v,H)=>{u.on("state_changed",Y=>{const ce=Math.round(Y.bytesTransferred/Y.totalBytes*100);p(ce)},H,async()=>{P=await ys(u.snapshot.ref),v()})})}await xe(X(S,"restaurants",j.id),{name:g.name,phone:g.phone,city:g.city,location:g.location,isOpen:g.isOpen,allowDelivery:g.allowDelivery,allowPickup:g.allowPickup,logoUrl:P,updatedAt:J()}),n.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),o(),p(0),D()}catch(P){n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ÿπŸÖ"),console.error(P)}finally{N(!1)}}},U=async C=>{if(await i.confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖÿü",{dangerous:!0,title:"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ"}))try{await Ss(X(S,"restaurants",C)),n.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠"),D()}catch(x){n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ"),console.error(x)}},B=async C=>{const P=!C.isVerified;if(await i.confirm(P?`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™Ÿàÿ´ŸäŸÇ ÿ£ÿ≥ÿ±ÿ© "${C.name}"ÿü`:`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ŸÑÿ∫ÿßÿ° ÿ™Ÿàÿ´ŸäŸÇ ÿ£ÿ≥ÿ±ÿ© "${C.name}"ÿü`,{title:P?"‚úÖ ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ©":"‚ùå ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ",confirmText:P?"ŸÜÿπŸÖÿå Ÿàÿ´ŸëŸÇ":"ŸÜÿπŸÖÿå ÿ£ŸÑÿ∫Ÿê ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"}))try{await xe(X(S,"restaurants",C.id),{isVerified:P,verifiedAt:P?J():null,updatedAt:J()}),n.success(P?"ÿ™ŸÖ ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ‚úÖ":"ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"),D()}catch(z){n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£"),console.error(z)}},Q=async(C,P)=>{try{await xe(X(S,"restaurants",C.id),{sellerTier:P,tierUpdatedAt:J(),updatedAt:J()});const x={bronze:"ÿ®ÿ±ŸàŸÜÿ≤Ÿä",silver:"ŸÅÿ∂Ÿä",gold:"ÿ∞Ÿáÿ®Ÿä"};n.success(`ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿµŸÜŸäŸÅ ÿ•ŸÑŸâ ${x[P]} üèÜ`),D()}catch(x){n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£"),console.error(x)}},O=({tier:C})=>{switch(C){case"gold":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold rounded-full shadow",children:[e.jsx(ss,{className:"w-3 h-3"})," Gold"]});case"silver":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold rounded-full shadow",children:[e.jsx(or,{className:"w-3 h-3"})," Silver"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-600 to-orange-600 text-white text-xs font-bold rounded-full shadow",children:[e.jsx(Jt,{className:"w-3 h-3"})," Bronze"]})}};return r?e.jsx(Ee,{allow:["admin","developer"],children:e.jsx("div",{className:"flex items-center justify-center h-96",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})}):e.jsx(Ee,{allow:["admin","developer"],children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ∂ÿßŸÅÿ©"}),e.jsxs("button",{onClick:()=>M(!$),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[e.jsx(vs,{className:"w-5 h-5"})," ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"]})]}),$&&e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsxs("div",{className:"flex items-center gap-4",children:[h.logoPreview?e.jsx("img",{src:h.logoPreview,alt:"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿ¥ÿπÿßÿ±",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsx(ta,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:f,type:"file",accept:"image/*",className:"hidden",onChange:C=>{var x;const P=(x=C.target.files)==null?void 0:x[0];P&&F({...h,logoFile:P,logoPreview:URL.createObjectURL(P)})}}),e.jsxs("button",{type:"button",onClick:()=>{var C;return(C=f.current)==null?void 0:C.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[e.jsx(aa,{className:"w-4 h-4"}),h.logoFile?"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸàÿ±ÿ©":"ÿ±ŸÅÿπ ÿ¥ÿπÿßÿ±"]}),h.logoFile&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.logoFile.name})]})]}),I&&A>0&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${A}%`}})})]}),e.jsx("input",{type:"text",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ",value:h.name,onChange:C=>F({...h,name:C.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsx("input",{type:"text",placeholder:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ",value:h.phone,onChange:C=>F({...h,phone:C.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsx("input",{type:"text",placeholder:"ÿßŸÑŸÖÿØŸäŸÜÿ©",value:h.city,onChange:C=>F({...h,city:C.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsx("textarea",{placeholder:"ÿßŸÑŸÖŸàŸÇÿπ / ÿßŸÑÿπŸÜŸàÿßŸÜ",value:h.location,onChange:C=>F({...h,location:C.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:I,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:I?`ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ±ŸÅÿπ... ${A}%`:"‚úÖ ÿ≠ŸÅÿ∏"}),e.jsx("button",{type:"button",onClick:()=>M(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:"‚ùå ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-xl transition",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsxs("div",{className:"flex items-center gap-4",children:[g.logoPreview?e.jsx("img",{src:g.logoPreview,alt:"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿ¥ÿπÿßÿ±",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsx(ta,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:_,type:"file",accept:"image/*",className:"hidden",onChange:C=>{var x;const P=(x=C.target.files)==null?void 0:x[0];P&&d({...g,logoFile:P,logoPreview:URL.createObjectURL(P)})}}),e.jsxs("button",{type:"button",onClick:()=>{var C;return(C=_.current)==null?void 0:C.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[e.jsx(aa,{className:"w-4 h-4"}),g.logoFile?"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸàÿ±ÿ©":"ÿ±ŸÅÿπ ÿ¥ÿπÿßÿ± ÿ¨ÿØŸäÿØ"]})]})]}),I&&A>0&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${A}%`}})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Ve,{className:"w-4 h-4 inline ml-1"}),"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ"]}),e.jsx("input",{type:"text",value:g.name,onChange:C=>d({...g,name:C.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Nr,{className:"w-4 h-4 inline ml-1"}),"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"]}),e.jsx("input",{type:"text",value:g.phone,onChange:C=>d({...g,phone:C.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"05xxxxxxxx"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(ps,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑŸÖÿØŸäŸÜÿ©"]}),e.jsx("input",{type:"text",value:g.city,onChange:C=>d({...g,city:C.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"ÿßŸÑŸÖÿØŸäŸÜÿ©"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(es,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑŸÖŸàŸÇÿπ / ÿßŸÑÿπŸÜŸàÿßŸÜ"]}),e.jsx("textarea",{value:g.location,onChange:C=>d({...g,location:C.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä",rows:2})]}),e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ™ÿ¨ÿ±"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.isOpen,onChange:C=>d({...g,isOpen:C.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"text-gray-700",children:"ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖŸÅÿ™Ÿàÿ≠ ŸàŸäÿ≥ÿ™ŸÇÿ®ŸÑ ÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.allowDelivery,onChange:C=>d({...g,allowDelivery:C.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"text-gray-700",children:"ŸäÿØÿπŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.allowPickup,onChange:C=>d({...g,allowPickup:C.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"text-gray-700",children:"ŸäÿØÿπŸÖ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:I,className:"flex-1 bg-sky-600 hover:bg-sky-700 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:I?`ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ±ŸÅÿπ... ${A}%`:"‚úÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™"}),e.jsx("button",{type:"button",onClick:o,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:"‚ùå ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]})}),e.jsx("div",{className:"grid gap-4",children:c.length===0?e.jsx("div",{className:"text-center text-gray-500 py-12",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ŸÖÿ≥ÿ¨ŸÑÿ© ÿ≠ÿßŸÑŸäÿßŸã"}):c.map(C=>e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[C.logoUrl?e.jsx("img",{src:C.logoUrl,alt:C.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):e.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"üçΩÔ∏è"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"text-xl font-bold text-primary",children:C.name}),C.isVerified&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[e.jsx(De,{className:"w-3 h-3"})," ŸÖŸàÿ´ŸÇÿ©"]}),e.jsx(O,{tier:C.sellerTier})]}),C.city&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["üìç ",C.city]}),C.phone&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["üìû ",C.phone]}),C.location&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["üè¢ ",C.location]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>B(C),className:`p-2.5 rounded-xl transition flex items-center gap-1 text-sm font-semibold ${C.isVerified?"bg-green-100 hover:bg-green-200 text-green-700":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:C.isVerified?"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ":"ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ©",children:[e.jsx(ms,{className:"w-4 h-4"}),C.isVerified?"ŸÖŸàÿ´ŸÇÿ©":"ÿ™Ÿàÿ´ŸäŸÇ"]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"p-2.5 rounded-xl bg-amber-100 hover:bg-amber-200 text-amber-700 transition flex items-center gap-1 text-sm font-semibold",children:[e.jsx(Jt,{className:"w-4 h-4"}),"ÿßŸÑÿ™ÿµŸÜŸäŸÅ",e.jsx(Oa,{className:"w-3 h-3"})]}),e.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white rounded-xl shadow-xl border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 min-w-[140px]",children:[e.jsxs("button",{onClick:()=>Q(C,"bronze"),className:`w-full px-4 py-2.5 text-right hover:bg-amber-50 transition flex items-center gap-2 first:rounded-t-xl ${C.sellerTier==="bronze"||!C.sellerTier?"bg-amber-50":""}`,children:[e.jsx(Jt,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-semibold",children:"Bronze"})]}),e.jsxs("button",{onClick:()=>Q(C,"silver"),className:`w-full px-4 py-2.5 text-right hover:bg-gray-50 transition flex items-center gap-2 ${C.sellerTier==="silver"?"bg-gray-100":""}`,children:[e.jsx(or,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Silver"})]}),e.jsxs("button",{onClick:()=>Q(C,"gold"),className:`w-full px-4 py-2.5 text-right hover:bg-yellow-50 transition flex items-center gap-2 last:rounded-b-xl ${C.sellerTier==="gold"?"bg-yellow-50":""}`,children:[e.jsx(ss,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"font-semibold",children:"Gold"})]})]})]}),e.jsx("button",{onClick:()=>E(C),className:"p-2.5 bg-sky-100 hover:bg-sky-200 text-sky-600 rounded-xl transition",title:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ∑ÿπŸÖ",children:e.jsx(ti,{className:"w-4 h-4"})}),t==="developer"&&e.jsx("button",{onClick:()=>U(C.id),className:"p-2.5 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ",children:e.jsx(fs,{className:"w-4 h-4"})})]})]})},C.id))})]})})},lr={pending:"‚è≥ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",accepted:"‚úÖ ŸÖŸÇÿ®ŸàŸÑ",preparing:"üë®‚Äçüç≥ ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",ready:"üì¶ ÿ¨ÿßŸáÿ≤",out_for_delivery:"üöó ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",delivered:"‚úîÔ∏è ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",cancelled:"‚ùå ŸÖŸÑÿ∫Ÿä"},so=()=>{const{user:s,role:t}=$e(),n=Qe(),[i,c]=a.useState([]),[y,r]=a.useState([]),[k,$]=a.useState(!0),[M,I]=a.useState("all"),[N,A]=a.useState([]);a.useEffect(()=>{if(!s)return;(async()=>{if(t==="developer")A([]);else{const _=pe(te(S,"restaurants"),be("referredBy","==",s.uid)),j=(await ue(_)).docs.map(L=>L.id);A(j)}})()},[s,t]),a.useEffect(()=>{s&&p()},[M,s,t,N]);const p=async()=>{try{let f;M==="all"?f=pe(te(S,"orders"),as("createdAt","desc")):f=pe(te(S,"orders"),be("status","==",M),as("createdAt","desc"));let m=(await ue(f)).docs.map(j=>({id:j.id,...j.data()}));t!=="developer"&&N.length>0?m=m.filter(j=>N.includes(j.restaurantId||"")):t!=="developer"&&N.length===0&&(m=[]),r(m),c(m)}catch(f){n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"),console.error(f)}finally{$(!1)}};return k?e.jsx(Ee,{allow:["admin","developer"],children:e.jsx("div",{className:"flex items-center justify-center h-96",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})}):e.jsx(Ee,{allow:["admin","developer"],children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsxs("button",{onClick:()=>I("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${M==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:["ÿßŸÑŸÉŸÑ (",i.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(f=>{const _=i.filter(m=>m.status===f).length;return e.jsxs("button",{onClick:()=>I(f),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${M===f?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[lr[f]," (",_,")"]},f)})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-12",children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ",M!=="all"&&`ÿ®ÿ≠ÿßŸÑÿ© "${lr[M]}"`]}):i.map(f=>{var _,m;return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold",children:["ÿ∑ŸÑÿ® #",f.id.slice(-8)]}),e.jsx("p",{className:"text-gray-600 text-sm",children:f.createdAt?new Date(f.createdAt).toLocaleDateString("ar-SA"):"‚Äî"})]}),e.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${f.status==="pending"?"bg-yellow-500":f.status==="delivered"?"bg-green-600":f.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:lr[f.status]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑÿπŸÖŸäŸÑ ID"}),e.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[f.customerId.slice(0,12),"..."]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("p",{className:"font-semibold text-gray-800",children:f.restaurantName||"‚Äî"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ"}),e.jsx("p",{className:"text-sm text-gray-800",children:f.address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ"}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:[((_=f.total)==null?void 0:_.toFixed(2))||0," ÿ±.ÿ≥"]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:"ÿßŸÑÿ£ÿµŸÜÿßŸÅ:"}),e.jsx("div",{className:"space-y-1",children:(m=f.items)==null?void 0:m.map((j,L)=>e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsxs("span",{children:[j.name," √ó ",j.qty]}),e.jsxs("span",{children:[(j.price*j.qty).toFixed(2)," ÿ±.ÿ≥"]})]},L))})]})]},f.id)})})]})})},Fs={projectId:Ns.options.projectId,authDomain:Ns.options.authDomain,storageBucket:Ns.options.storageBucket,messagingSenderId:Ns.options.messagingSenderId,appId:Ns.options.appId},to=()=>{var Or,Lr,Mr,Ur;const{user:s}=$e(),t=Qe(),n=Ds(),i=na(Ns),[c,y]=a.useState("overview"),[r,k]=a.useState(!0),[$,M]=a.useState(!1),[I,N]=a.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[A,p]=a.useState({}),[f,_]=a.useState([]),[m,j]=a.useState([]),[L,g]=a.useState([]),[d,h]=a.useState([]),[F,D]=a.useState(!1),[b,E]=a.useState({}),[o,w]=a.useState(null),[U,B]=a.useState({}),[Q,O]=a.useState(!1),[C,P]=a.useState(null),[x,z]=a.useState({}),[R,u]=a.useState(null),[v,H]=a.useState(!1),[Y,ce]=a.useState(""),[ie,je]=a.useState(""),[ge,T]=a.useState(""),[se,ye]=a.useState(""),[Z,G]=a.useState(!1),[K,me]=a.useState(!1),[oe,Ne]=a.useState(""),[W,ee]=a.useState(""),[ne,le]=a.useState(""),[he,ve]=a.useState(""),[Ae,Me]=a.useState(!1),[Te,Ke]=a.useState(!1),[ze,Rs]=a.useState(""),[Ps,Js]=a.useState(""),[Xs,ns]=a.useState(""),[tt,Us]=a.useState(""),[Ts,Bs]=a.useState(""),[Vs,Vt]=a.useState(""),[At,qt]=a.useState(!1),[qs,we]=a.useState([]),[Le,We]=a.useState(!1),[He,zs]=a.useState(""),[at,_s]=a.useState(""),[bt,Ua]=a.useState(""),[Ar,Ba]=a.useState("medium"),[Ir,Va]=a.useState(""),[Dr,Rr]=a.useState(!1),[It,zl]=a.useState("all"),[ft,Hl]=a.useState([]),[Io,Do]=a.useState("all"),[Ro,Po]=a.useState(null),[To,$o]=a.useState(null),[Fo,Eo]=a.useState(99),[_o,Oo]=a.useState(30),[qa,Ql]=a.useState([]),[za,Pr]=a.useState(!1),[Ha,Wl]=a.useState("all"),[$s,Zs]=a.useState(""),[zt,Tr]=a.useState("all"),[da,$r]=a.useState("all"),[Qa,Fr]=a.useState("all"),[Os,Wa]=a.useState("newest"),[Ht,Er]=a.useState("all");s!=null&&s.email;const Ga=()=>{let l=[...m];if($s){const V=$s.toLowerCase();l=l.filter(q=>{var ae,de,fe,ke;return((ae=q.name)==null?void 0:ae.toLowerCase().includes(V))||((de=q.email)==null?void 0:de.toLowerCase().includes(V))||((fe=q.phone)==null?void 0:fe.includes(V))||((ke=q.city)==null?void 0:ke.toLowerCase().includes(V))})}return zt==="premium"?l=l.filter(V=>V.packageType==="premium"):zt==="free"?l=l.filter(V=>!V.packageType||V.packageType==="free"):zt==="verified"?l=l.filter(V=>V.isVerified):zt==="unverified"&&(l=l.filter(V=>!V.isVerified)),Os==="newest"?l.sort((V,q)=>{var ae,de,fe,ke,Re,Se;return(((fe=(de=(ae=q.createdAt)==null?void 0:ae.toDate)==null?void 0:de.call(ae))==null?void 0:fe.getTime())||0)-(((Se=(Re=(ke=V.createdAt)==null?void 0:ke.toDate)==null?void 0:Re.call(ke))==null?void 0:Se.getTime())||0)}):Os==="oldest"?l.sort((V,q)=>{var ae,de,fe,ke,Re,Se;return(((fe=(de=(ae=V.createdAt)==null?void 0:ae.toDate)==null?void 0:de.call(ae))==null?void 0:fe.getTime())||0)-(((Se=(Re=(ke=q.createdAt)==null?void 0:ke.toDate)==null?void 0:Re.call(ke))==null?void 0:Se.getTime())||0)}):Os==="name"&&l.sort((V,q)=>(V.name||"").localeCompare(q.name||"","ar")),l},Ya=()=>{let l=[...L];if($s){const V=$s.toLowerCase();l=l.filter(q=>{var ae,de,fe;return((ae=q.id)==null?void 0:ae.toLowerCase().includes(V))||((de=q.restaurantName)==null?void 0:de.toLowerCase().includes(V))||((fe=q.address)==null?void 0:fe.toLowerCase().includes(V))})}if(da==="pending"?l=l.filter(V=>["pending","accepted","preparing","ready"].includes(V.status)):da==="delivered"?l=l.filter(V=>V.status==="delivered"):da==="cancelled"&&(l=l.filter(V=>V.status==="cancelled")),Ht!=="all"){const V=new Date,q=new Date;Ht==="today"?q.setHours(0,0,0,0):Ht==="week"?q.setDate(V.getDate()-7):Ht==="month"&&q.setMonth(V.getMonth()-1),l=l.filter(ae=>{var fe,ke;return(((ke=(fe=ae.createdAt)==null?void 0:fe.toDate)==null?void 0:ke.call(fe))||new Date(ae.createdAt))>=q})}return Os==="newest"?l.sort((V,q)=>{var ae,de,fe,ke,Re,Se;return(((fe=(de=(ae=q.createdAt)==null?void 0:ae.toDate)==null?void 0:de.call(ae))==null?void 0:fe.getTime())||0)-(((Se=(Re=(ke=V.createdAt)==null?void 0:ke.toDate)==null?void 0:Re.call(ke))==null?void 0:Se.getTime())||0)}):Os==="oldest"&&l.sort((V,q)=>{var ae,de,fe,ke,Re,Se;return(((fe=(de=(ae=V.createdAt)==null?void 0:ae.toDate)==null?void 0:de.call(ae))==null?void 0:fe.getTime())||0)-(((Se=(Re=(ke=q.createdAt)==null?void 0:ke.toDate)==null?void 0:Re.call(ke))==null?void 0:Se.getTime())||0)}),l},Ka=()=>{let l=[...f];if($s){const V=$s.toLowerCase();l=l.filter(q=>{var ae,de,fe;return((ae=q.name)==null?void 0:ae.toLowerCase().includes(V))||((de=q.email)==null?void 0:de.toLowerCase().includes(V))||((fe=q.phone)==null?void 0:fe.includes(V))})}return Qa!=="all"&&(l=l.filter(V=>V.role===Qa)),Os==="newest"?l.sort((V,q)=>{var ae,de,fe,ke,Re,Se;return(((fe=(de=(ae=q.createdAt)==null?void 0:ae.toDate)==null?void 0:de.call(ae))==null?void 0:fe.getTime())||0)-(((Se=(Re=(ke=V.createdAt)==null?void 0:ke.toDate)==null?void 0:Re.call(ke))==null?void 0:Se.getTime())||0)}):Os==="oldest"?l.sort((V,q)=>{var ae,de,fe,ke,Re,Se;return(((fe=(de=(ae=V.createdAt)==null?void 0:ae.toDate)==null?void 0:de.call(ae))==null?void 0:fe.getTime())||0)-(((Se=(Re=(ke=q.createdAt)==null?void 0:ke.toDate)==null?void 0:Re.call(ke))==null?void 0:Se.getTime())||0)}):Os==="name"&&l.sort((V,q)=>(V.name||"").localeCompare(q.name||"","ar")),l},xa=async(l,V,q,ae,de,fe,ke)=>{try{await Fe(te(S,"activityLogs"),{action:l,targetType:V,targetId:q,targetName:ae,performedBy:(s==null?void 0:s.uid)||"",performedByName:(s==null?void 0:s.email)||"ŸÖÿ∑Ÿàÿ±",details:de,oldValue:fe,newValue:ke,createdAt:J()})}catch(Re){console.warn("ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿπŸÖŸÑŸäÿ©:",Re)}},Gl=async(l,V)=>{const q=V?"ÿ™ÿπŸÑŸäŸÇ":"ÿ™ŸÅÿπŸäŸÑ";if(await n.confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ${q} ÿ≠ÿ≥ÿßÿ® "${l.name||l.email}"ÿü`,{title:`${q} ÿßŸÑÿ≠ÿ≥ÿßÿ®`,dangerous:!V}))try{await xe(X(S,"users",l.uid),{isActive:!V,updatedAt:J()}),await xa(V?"deactivate":"activate","user",l.uid,l.name||l.email,`ÿ™ŸÖ ${q} ÿßŸÑÿ≠ÿ≥ÿßÿ®`),t.success(`ÿ™ŸÖ ${q} ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ`),rs()}catch(de){console.error("ÿÆÿ∑ÿ£:",de),t.error(`ŸÅÿ¥ŸÑ ${q} ÿßŸÑÿ≠ÿ≥ÿßÿ®`)}},Yl=async l=>{if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ•ŸÑŸâ: ${l.email}`,{title:"üîë ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±"}))try{await bl(bs,l.email),await _l({action:"password_reset_requested",performedBy:(s==null?void 0:s.uid)||"",performedByName:(s==null?void 0:s.email)||"ŸÖÿ∑Ÿàÿ±",targetUserId:l.uid,targetUserName:l.name||l.email,details:"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ŸÖŸÜ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±"}),await xa("update","user",l.uid,l.name||l.email,"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±"),t.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ®ŸÜÿ¨ÿßÿ≠ üìß")}catch(q){console.error("ÿÆÿ∑ÿ£:",q),q.code==="auth/user-not-found"?t.error("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≠ÿ≥ÿßÿ® ÿ®Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"):t.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿπŸäŸäŸÜ")}},[Qt,ma]=a.useState({isOpen:!1,userId:"",userName:"",history:[],loading:!1}),Kl=async l=>{ma({isOpen:!0,userId:l.uid,userName:l.name||l.email,history:[],loading:!0});try{const V=await Ki(l.uid,20);ma(q=>({...q,history:V,loading:!1}))}catch(V){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ≥ÿ¨ŸÑ ÿßŸÑÿØÿÆŸàŸÑ:",V),ma(q=>({...q,loading:!1})),t.error("ŸÅÿ¥ŸÑ ÿ¨ŸÑÿ® ÿ≥ÿ¨ŸÑ ÿßŸÑÿØÿÆŸàŸÑ")}},Jl=async(l,V=30)=>{if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÄ "${l.name}" ŸÑŸÖÿØÿ© ${V} ŸäŸàŸÖ`,{title:"‚ú® ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"}))try{const ae=new Date;ae.setDate(ae.getDate()+V),await xe(X(S,"restaurants",l.id),{packageType:"premium",packageSubscribedAt:J(),packageExpiresAt:ae,packageRequest:null,updatedAt:J()}),await xa("package_activate","restaurant",l.id,l.name,`ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÖÿØÿ© ${V} ŸäŸàŸÖ`),t.success(`ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÄ ${l.name} ‚ú®`),rs()}catch(ae){console.error("ÿÆÿ∑ÿ£:",ae),t.error("ŸÅÿ¥ŸÑ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ©")}},Xl=async l=>{if(await n.confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÄ "${l.name}"ÿü`,{title:"‚ö†Ô∏è ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",dangerous:!0}))try{await xe(X(S,"restaurants",l.id),{packageType:"free",packageExpiresAt:null,updatedAt:J()}),await xa("package_cancel","restaurant",l.id,l.name,"ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"),t.success(`ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÄ ${l.name}`),rs()}catch(q){console.error("ÿÆÿ∑ÿ£:",q),t.error("ŸÅÿ¥ŸÑ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ®ÿßŸÇÿ©")}},_r=async()=>{Pr(!0);try{const l=pe(te(S,"activityLogs"),as("createdAt","desc"),ks(100)),q=(await ue(l)).docs.map(ae=>{var de,fe;return{id:ae.id,...ae.data(),createdAt:((fe=(de=ae.data().createdAt)==null?void 0:de.toDate)==null?void 0:fe.call(de))||null}});Ql(q)}catch(l){console.warn("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿ≥ÿ¨ŸÑ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™:",l)}finally{Pr(!1)}},Zl=async()=>{if(!Y.trim()||!ge.trim()){t.warning("ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸàŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±");return}if(ge.length<6){t.warning("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ");return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖÿ¥ÿ±ŸÅ ÿ¨ÿØŸäÿØ:

üìß ${Y}
üë§ ${ie||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}

ŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ŸÖÿ§ŸÇÿ™ÿßŸãÿå ŸÇŸÖ ÿ®ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.`,{title:"ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ¥ÿ±ŸÅ ÿ¨ÿØŸäÿØ"})){G(!0);try{const q=(await $t(bs,Y.trim(),ge)).user.uid;await Ze(X(S,"users",q),{email:Y.trim(),name:ie.trim()||"ŸÖÿ¥ÿ±ŸÅ ÿ¨ÿØŸäÿØ",phone:se.trim()||"",role:"admin",createdAt:J()}),await Ze(X(S,"wallets",q),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:J()}),t.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿ¥ÿ±ŸÅ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),t.info("‚ö†Ô∏è ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉÿå Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"),ce(""),je(""),T(""),ye(""),H(!1)}catch(V){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ¥ÿ±ŸÅ:",V),V.code==="auth/email-already-in-use"?t.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖÿ≥ÿ®ŸÇÿßŸã"):V.code==="auth/invalid-email"?t.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠"):V.code==="auth/weak-password"?t.error("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∂ÿπŸäŸÅÿ© ÿ¨ÿØÿßŸã"):t.error("ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ¥ÿ±ŸÅ: "+(V.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{G(!1)}}},en=async()=>{if(!oe.trim()||!ne.trim()){t.warning("ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸàŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±");return}if(ne.length<6){t.warning("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ");return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖŸÜÿØŸàÿ® ÿ¨ÿØŸäÿØ:

üìß ${oe}
üë§ ${W||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}
üì± ${he||"ÿ®ÿØŸàŸÜ ÿ±ŸÇŸÖ"}`,{title:"ÿ•ŸÜÿ¥ÿßÿ° ŸÖŸÜÿØŸàÿ® ÿ¨ÿØŸäÿØ"})){Me(!0);try{const q=(await $t(bs,oe.trim(),ne)).user.uid;await Ze(X(S,"users",q),{email:oe.trim(),name:W.trim()||"ŸÖŸÜÿØŸàÿ® ÿ¨ÿØŸäÿØ",phone:he.trim()||"",role:"courier",createdAt:J()}),t.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÜÿØŸàÿ® ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),t.info("‚ö†Ô∏è ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉÿå Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"),Ne(""),ee(""),le(""),ve(""),me(!1)}catch(V){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸÜÿØŸàÿ®:",V),V.code==="auth/email-already-in-use"?t.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖÿ≥ÿ®ŸÇÿßŸã"):t.error("ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸÜÿØŸàÿ®: "+(V.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{Me(!1)}}},sn=async()=>{if(!ze.trim()){t.warning("ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ");return}if(!Ts.trim()||!Vs.trim()){t.warning("ÿ£ÿØÿÆŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿµÿßÿ≠ÿ® ÿßŸÑŸÖÿ∑ÿπŸÖ");return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ:

üè™ ${ze}
üìç ${Ps||"ÿ®ÿØŸàŸÜ ŸÖÿØŸäŸÜÿ©"}
üë§ ÿµÿßÿ≠ÿ® ÿßŸÑŸÖÿ∑ÿπŸÖ: ${Ts}`,{title:"ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"})){qt(!0);try{const q=(await $t(bs,Ts.trim(),Vs)).user.uid;await Ze(X(S,"users",q),{email:Ts.trim(),name:ze.trim()+" - ŸÖÿßŸÑŸÉ",role:"owner",createdAt:J()}),await Ze(X(S,"restaurants",q),{name:ze.trim(),ownerId:q,email:tt.trim()||Ts.trim(),phone:Xs.trim()||"",city:Ps.trim()||"",referredBy:s==null?void 0:s.uid,referrerType:"developer",createdAt:J()}),t.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ∑ÿπŸÖ Ÿàÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿßŸÑŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),t.info("‚ö†Ô∏è ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉÿå Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"),Rs(""),Js(""),ns(""),Us(""),Bs(""),Vt(""),Ke(!1)}catch(V){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ∑ÿπŸÖ:",V),V.code==="auth/email-already-in-use"?t.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖÿ≥ÿ®ŸÇÿßŸã"):t.error("ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ∑ÿπŸÖ: "+(V.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{qt(!1)}}},tn=()=>{const l=new Date,V=new Date(l.getFullYear(),l.getMonth(),l.getDate()),q=new Date(V.getTime()-7*24*60*60*1e3),ae=new Date(V.getTime()-30*24*60*60*1e3),de=L.filter(Se=>{var is,Hs;return(((Hs=(is=Se.createdAt)==null?void 0:is.toDate)==null?void 0:Hs.call(is))||new Date(0))>=V&&Se.status!=="cancelled"}),fe=L.filter(Se=>{var is,Hs;return(((Hs=(is=Se.createdAt)==null?void 0:is.toDate)==null?void 0:Hs.call(is))||new Date(0))>=q&&Se.status!=="cancelled"}),ke=L.filter(Se=>{var is,Hs;return(((Hs=(is=Se.createdAt)==null?void 0:is.toDate)==null?void 0:Hs.call(is))||new Date(0))>=ae&&Se.status!=="cancelled"}),Re=L.filter(Se=>Se.status==="delivered");return{todayRevenue:de.reduce((Se,Be)=>Se+(Be.total||0),0),todayOrders:de.length,todayPlatformFee:de.reduce((Se,Be)=>Se+(Be.platformFee||0),0),weekRevenue:fe.reduce((Se,Be)=>Se+(Be.total||0),0),weekOrders:fe.length,weekPlatformFee:fe.reduce((Se,Be)=>Se+(Be.platformFee||0),0),monthRevenue:ke.reduce((Se,Be)=>Se+(Be.total||0),0),monthOrders:ke.length,monthPlatformFee:ke.reduce((Se,Be)=>Se+(Be.platformFee||0),0),totalRevenue:Re.reduce((Se,Be)=>Se+(Be.total||0),0),totalPlatformFee:Re.reduce((Se,Be)=>Se+(Be.platformFee||0),0),totalAdminCommission:Re.reduce((Se,Be)=>Se+(Be.adminCommission||0),0)}},rs=async()=>{try{const[l,V,q,ae,de]=await Promise.all([ue(te(S,"users")),ue(te(S,"restaurants")),ue(te(S,"menuItems")),ue(te(S,"orders")),ue(te(S,"wallets"))]);let fe={docs:[]};try{fe=await ue(te(S,"tasks"))}catch{}let ke={docs:[]};try{ke=await ue(te(S,"packageRequests"))}catch{}const Re=l.docs.map(Ie=>({uid:Ie.id,...Ie.data()}));_(Re);const Se=V.docs.map(Ie=>({id:Ie.id,...Ie.data()}));j(Se);const Be=ae.docs.map(Ie=>({id:Ie.id,...Ie.data()}));g(Be);const is=fe.docs.map(Ie=>({id:Ie.id,...Ie.data()}));we(is.sort((Ie,Dt)=>{var rt,jt;return(((rt=Dt.createdAt)==null?void 0:rt.seconds)||0)-(((jt=Ie.createdAt)==null?void 0:jt.seconds)||0)}));const Hs=ke.docs.map(Ie=>({id:Ie.id,...Ie.data()}));Hl(Hs.sort((Ie,Dt)=>{var rt,jt;return(((rt=Dt.createdAt)==null?void 0:rt.seconds)||0)-(((jt=Ie.createdAt)==null?void 0:jt.seconds)||0)}));const Xa={};de.docs.forEach(Ie=>{Xa[Ie.id]=Ie.data()});const hn=Xa.app_earnings||{balance:0,totalEarnings:0},Br=Re.filter(Ie=>Ie.role==="admin"),un=Re.filter(Ie=>Ie.role==="courier"),gn=Re.filter(Ie=>Ie.role==="customer"),pn=Re.filter(Ie=>Ie.role==="owner"),bn=Br.map(Ie=>{const Dt=Se.filter(jt=>jt.referredBy===Ie.uid),rt=Xa[Ie.uid]||{balance:0,totalEarnings:0};return{uid:Ie.uid,email:Ie.email,name:Ie.name,walletBalance:rt.balance||0,totalEarnings:rt.totalEarnings||0,restaurantsCount:Dt.length,restaurants:Dt}});h(bn),N({users:Re.length,restaurants:Se.length,menuItems:q.size,orders:Be.length,pendingOrders:Be.filter(Ie=>Ie.status==="pending").length,deliveredOrders:Be.filter(Ie=>Ie.status==="delivered").length,admins:Br.length,couriers:un.length,customers:gn.length,owners:pn.length,totalAppEarnings:hn.totalEarnings||0});const Vr=await Ce(X(S,"settings","general"));if(Vr.exists()){const Ie=Vr.data();p(Ie),E(Ie)}else{const Ie={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};p(Ie),E(Ie)}}catch(l){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:",l),t.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{k(!1),M(!1)}};a.useEffect(()=>{rs()},[]);const Ja=()=>{M(!0),rs(),t.info("ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...")},an=async()=>{try{await Ze(X(S,"settings","general"),b,{merge:!0}),p(b),D(!1),t.success("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ")}catch(l){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™:",l),t.error("ŸÅÿ¥ŸÑ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™")}},rn=async l=>{try{await xe(X(S,"restaurants",l),{...U,updatedAt:J()}),w(null),t.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),rs()}catch(V){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ÿπŸÖ:",V),t.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ÿπŸÖ")}},ln=async(l,V)=>{try{if(!V.type.startsWith("image/")){t.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ŸÅŸÇÿ∑");return}if(V.size>5*1024*1024){t.warning("ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© ŸÉÿ®Ÿäÿ±ÿå Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£ŸÇŸÑ ŸÖŸÜ 5MB");return}O(!0);const q=V.name.replace(/\s+/g,"_"),ae=`restaurants/${l}/logo_${Date.now()}_${q}`,de=js(i,ae),fe={contentType:V.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await ot(de,V,fe);const ke=await ys(de);await xe(X(S,"restaurants",l),{logoUrl:ke,updatedAt:J()}),t.success("ÿ™ŸÖ ÿ±ŸÅÿπ ÿßŸÑÿ¥ÿπÿßÿ± ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),rs()}catch(q){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ±ŸÅÿπ ÿßŸÑÿ¥ÿπÿßÿ±:",q),t.error("ŸÅÿ¥ŸÑ ÿ±ŸÅÿπ ÿßŸÑÿ¥ÿπÿßÿ±")}finally{O(!1)}},nn=async l=>{if(await n.confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖÿü ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ!",{title:"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ",dangerous:!0}))try{await Ss(X(S,"restaurants",l)),t.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠"),rs()}catch(q){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ:",q),t.error("ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ")}},cn=async l=>{try{await xe(X(S,"users",l),{...x,updatedAt:J()}),P(null),t.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),rs()}catch(V){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:",V),t.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ")}},on=async l=>{if(await n.confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖÿü ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ!",{title:"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ",dangerous:!0}))try{await Ss(X(S,"users",l)),t.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸÜ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"),t.warning("ŸÖŸÑÿßÿ≠ÿ∏ÿ©: Ÿäÿ¨ÿ® ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸäÿØŸàŸäÿßŸã ŸÖŸÜ Firebase Auth"),rs()}catch(q){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:",q),t.error("ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ")}},dn=async(l,V)=>{try{await xe(X(S,"orders",l),{status:V,updatedAt:J()}),t.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ∑ŸÑÿ® ‚úÖ"),rs()}catch(q){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ∑ŸÑÿ®:",q),t.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ∑ŸÑÿ®")}},xn=l=>{switch(l){case"customer":return"üë§ ÿπŸÖŸäŸÑ";case"owner":return"üè™ ÿµÿßÿ≠ÿ® ŸÖÿ∑ÿπŸÖ";case"courier":return"üöó ŸÖŸÜÿØŸàÿ®";case"admin":return"üëë ŸÖÿ¥ÿ±ŸÅ";case"developer":return"üë®‚Äçüíª ŸÖÿ∑Ÿàÿ±";default:return l}},mn=l=>{switch(l){case"pending":return"‚è≥ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©";case"accepted":return"‚úÖ ŸÖŸÇÿ®ŸàŸÑ";case"preparing":return"üë®‚Äçüç≥ ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±";case"ready":return"üì¶ ÿ¨ÿßŸáÿ≤";case"out_for_delivery":return"üöó ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ";case"delivered":return"‚úîÔ∏è ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ";case"cancelled":return"‚ùå ŸÖŸÑÿ∫Ÿä";default:return l}};return r?e.jsx(Ee,{allow:["developer"],children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(qe,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±..."})]})})}):e.jsx(Ee,{allow:["developer"],children:e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-3xl p-8 text-white shadow-2xl",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-sky-500/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-sky-400 to-sky-600 rounded-2xl flex items-center justify-center shadow-lg shadow-sky-500/30",children:e.jsx(Kr,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black tracking-tight",children:"ŸÖÿ±ŸÉÿ≤ ÿßŸÑÿ™ÿ≠ŸÉŸÖ"}),e.jsx("p",{className:"text-sky-300/80 text-sm",children:"Developer Console ‚Ä¢ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]})]}),e.jsx("p",{className:"text-slate-400 mt-3 max-w-xl",children:"ÿ•ÿØÿßÿ±ÿ© ÿ¥ÿßŸÖŸÑÿ© ŸÑÿ¨ŸÖŸäÿπ ÿπŸÖŸÑŸäÿßÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿå ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜÿå ÿßŸÑŸÖÿ∑ÿßÿπŸÖÿå ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸàÿßŸÑŸÖÿßŸÑŸäÿ©"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("button",{onClick:Ja,disabled:$,className:"flex items-center gap-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm px-5 py-3 rounded-xl font-semibold transition border border-white/10 disabled:opacity-50",children:[e.jsx(qe,{className:`w-5 h-5 ${$?"animate-spin":""}`}),"ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"]}),e.jsxs("a",{href:"/accounting",className:"flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 px-5 py-3 rounded-xl font-semibold transition shadow-lg shadow-emerald-500/30",children:[e.jsx(ct,{className:"w-5 h-5"}),"ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©"]})]})]}),e.jsxs("div",{className:"relative z-10 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mt-8",children:[e.jsx(Pt,{icon:e.jsx(nt,{className:"w-5 h-5"}),value:I.users,label:"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ",color:"sky"}),e.jsx(Pt,{icon:e.jsx(ps,{className:"w-5 h-5"}),value:I.restaurants,label:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ",color:"emerald"}),e.jsx(Pt,{icon:e.jsx(Oe,{className:"w-5 h-5"}),value:I.orders,label:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",color:"purple"}),e.jsx(Pt,{icon:e.jsx(Ue,{className:"w-5 h-5"}),value:I.couriers,label:"ÿßŸÑŸÖŸÜÿßÿØŸäÿ®",color:"orange"}),e.jsx(Pt,{icon:e.jsx(ss,{className:"w-5 h-5"}),value:I.admins,label:"ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ",color:"amber"}),e.jsx(Pt,{icon:e.jsx(cs,{className:"w-5 h-5"}),value:`${I.totalAppEarnings.toFixed(0)} ÿ±.ÿ≥`,label:"ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠",color:"green"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-100 p-2",children:e.jsx("div",{className:"flex flex-wrap gap-1.5",children:[{id:"overview",label:"ŸÜÿ∏ÿ±ÿ© ÿπÿßŸÖÿ©",icon:e.jsx(ai,{className:"w-4 h-4"})},{id:"finance",label:"ÿßŸÑŸÖÿßŸÑŸäÿ©",icon:e.jsx(cs,{className:"w-4 h-4"})},{id:"restaurants",label:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ",icon:e.jsx(ps,{className:"w-4 h-4"})},{id:"storeAnalytics",label:"ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™",icon:e.jsx(kl,{className:"w-4 h-4"})},{id:"packages",label:"ÿßŸÑÿ®ÿßŸÇÿßÿ™",icon:e.jsx(ss,{className:"w-4 h-4"}),badge:ft.filter(l=>["pending","payment_sent"].includes(l.status)).length},{id:"packageSettings",label:"ÿ£ÿ≥ÿπÿßÿ± ÿßŸÑÿ®ÿßŸÇÿßÿ™",icon:e.jsx(ds,{className:"w-4 h-4"})},{id:"licenses",label:"ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ",icon:e.jsx(hr,{className:"w-4 h-4"})},{id:"orders",label:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",icon:e.jsx(Oe,{className:"w-4 h-4"})},{id:"users",label:"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ",icon:e.jsx(nt,{className:"w-4 h-4"})},{id:"couriers",label:"ÿßŸÑŸÖŸÜÿßÿØŸäÿ®",icon:e.jsx(Ue,{className:"w-4 h-4"})},{id:"admins",label:"ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ",icon:e.jsx(ss,{className:"w-4 h-4"})},{id:"tasks",label:"ÿßŸÑŸÖŸáÿßŸÖ",icon:e.jsx(Ta,{className:"w-4 h-4"})},{id:"activityLog",label:"ÿßŸÑÿ≥ÿ¨ŸÑ",icon:e.jsx(Ye,{className:"w-4 h-4"})},{id:"settings",label:"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™",icon:e.jsx(sa,{className:"w-4 h-4"})},{id:"tools",label:"ÿßŸÑÿ£ÿØŸàÿßÿ™",icon:e.jsx(Kr,{className:"w-4 h-4"})}].map(l=>e.jsxs("button",{onClick:()=>{y(l.id),l.id==="activityLog"&&_r()},className:`relative flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 ${c===l.id?"bg-gradient-to-r from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-500/30":"text-slate-600 hover:bg-slate-100"}`,children:[l.icon,e.jsx("span",{className:"hidden sm:inline",children:l.label}),l.badge&&l.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center animate-pulse",children:l.badge})]},l.id))})}),c==="overview"&&e.jsxs("div",{className:"space-y-6",children:[ft.filter(l=>["pending","payment_sent"].includes(l.status)).length>0&&e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:e.jsx(dt,{className:"w-7 h-7 animate-bounce"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"ÿ∑ŸÑÿ®ÿßÿ™ ÿ™ÿ≠ÿ™ÿßÿ¨ ÿßŸÜÿ™ÿ®ÿßŸáŸÉ!"}),e.jsxs("p",{className:"text-white/80",children:[ft.filter(l=>l.status==="pending").length>0&&e.jsxs("span",{className:"mr-3",children:["‚è≥ ",ft.filter(l=>l.status==="pending").length," ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ"]}),ft.filter(l=>l.status==="payment_sent").length>0&&e.jsxs("span",{children:["üí≥ ",ft.filter(l=>l.status==="payment_sent").length," ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ£ŸÉŸäÿØ"]})]})]})]}),e.jsx("button",{onClick:()=>y("packages"),className:"bg-white text-orange-600 px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transition transform hover:scale-105",children:"ÿπÿ±ÿ∂ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ‚Üê"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fa,{title:"ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™ ÿßŸÑŸäŸàŸÖ",value:`${L.filter(l=>{var ae,de;const V=((de=(ae=l.createdAt)==null?void 0:ae.toDate)==null?void 0:de.call(ae))||new Date(l.createdAt),q=new Date;return V.toDateString()===q.toDateString()&&l.status==="delivered"}).reduce((l,V)=>l+(V.total||0),0).toFixed(0)} ÿ±.ÿ≥`,change:12.5,icon:e.jsx(xt,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(fa,{title:"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸäŸàŸÖ",value:L.filter(l=>{var ae,de;const V=((de=(ae=l.createdAt)==null?void 0:ae.toDate)==null?void 0:de.call(ae))||new Date(l.createdAt),q=new Date;return V.toDateString()===q.toDateString()}).length.toString(),change:8.3,icon:e.jsx(Oe,{className:"w-5 h-5"}),color:"sky"}),e.jsx(fa,{title:"ŸÖÿ¥ÿ™ÿ±ŸÉŸäŸÜ ÿßŸÑÿ™ŸÖŸäÿ≤",value:m.filter(l=>l.packageType==="premium").length.toString(),subtitle:`ŸÖŸÜ ${m.length} ŸÖÿ∑ÿπŸÖ`,icon:e.jsx(ss,{className:"w-5 h-5"}),color:"amber"}),e.jsx(fa,{title:"ŸÖÿπÿØŸÑ ÿßŸÑÿ™ŸàÿµŸäŸÑ",value:`${I.orders>0?(I.deliveredOrders/I.orders*100).toFixed(0):0}%`,subtitle:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ•ÿ™ŸÖÿßŸÖ",icon:e.jsx(Ta,{className:"w-5 h-5"}),color:"purple"})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(ja,{icon:e.jsx(De,{className:"w-5 h-5 text-emerald-500"}),value:f.filter(l=>l.isActive!==!1).length,label:"ÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸÜÿ¥ÿ∑ÿ©",bgColor:"bg-emerald-50"}),e.jsx(ja,{icon:e.jsx(Cs,{className:"w-5 h-5 text-red-500"}),value:f.filter(l=>l.isActive===!1).length,label:"ÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸÖŸàŸÇŸàŸÅÿ©",bgColor:"bg-red-50"}),e.jsx(ja,{icon:e.jsx(ds,{className:"w-5 h-5 text-amber-500"}),value:m.filter(l=>l.packageType==="premium").length,label:"ÿ®ÿßŸÇÿ© ÿ™ŸÖŸäÿ≤",bgColor:"bg-amber-50"}),e.jsx(ja,{icon:e.jsx(Oe,{className:"w-5 h-5 text-slate-500"}),value:m.filter(l=>!l.packageType||l.packageType==="free").length,label:"ÿ®ÿßŸÇÿ© ŸÖÿ¨ÿßŸÜŸäÿ©",bgColor:"bg-slate-50"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ri,{className:"w-6 h-6 text-orange-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"ÿ•ÿπÿØÿßÿØÿßÿ™ Firebase"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),e.jsx("p",{className:"font-mono text-sm",children:Fs.projectId})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),e.jsx("p",{className:"font-mono text-sm",children:Fs.storageBucket})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("a",{href:`https://console.firebase.google.com/project/${Fs.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:"üî• Console"}),e.jsx("a",{href:`https://console.firebase.google.com/project/${Fs.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:"üìä Firestore"}),e.jsx("a",{href:`https://console.firebase.google.com/project/${Fs.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:"üîê Auth"}),e.jsx("a",{href:`https://console.firebase.google.com/project/${Fs.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:"üìÅ Storage"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"üìä ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:I.customers}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿπŸÖŸÑÿßÿ°"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:I.owners}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ£ÿµÿ≠ÿßÿ® ŸÖÿ∑ÿßÿπŸÖ"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:I.couriers}),e.jsx("p",{className:"text-sm text-gray-600",children:"ŸÖŸÜÿßÿØŸäÿ®"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:I.admins}),e.jsx("p",{className:"text-sm text-gray-600",children:"ŸÖÿ¥ÿ±ŸÅŸäŸÜ"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ŸÖÿ∑Ÿàÿ±"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"üîó ÿ±Ÿàÿßÿ®ÿ∑ ÿ≥ÿ±Ÿäÿπÿ©"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(re,{to:"/reports-admin",className:"flex items-center gap-3 bg-amber-50 hover:bg-amber-100 text-amber-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™"}),e.jsx("p",{className:"text-xs opacity-75",children:"ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"})]})]}),e.jsxs(re,{to:"/accounting",className:"flex items-center gap-3 bg-emerald-50 hover:bg-emerald-100 text-emerald-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üí∞"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©"}),e.jsx("p",{className:"text-xs opacity-75",children:"ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸÖÿßŸÑŸäÿ©"})]})]}),e.jsxs(re,{to:"/support-admin",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üéß"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿØÿπŸÖ"}),e.jsx("p",{className:"text-xs opacity-75",children:"ÿ™ÿ∞ÿßŸÉÿ± ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä"})]})]}),e.jsxs(re,{to:"/problems-admin",className:"flex items-center gap-3 bg-red-50 hover:bg-red-100 text-red-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üö®"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ"}),e.jsx("p",{className:"text-xs opacity-75",children:"ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-orange-500"}),"ÿ£ŸàŸÇÿßÿ™ ÿßŸÑÿ∞ÿ±Ÿàÿ©"]}),e.jsx("div",{className:"grid grid-cols-6 md:grid-cols-12 gap-2",children:Array.from({length:24},(l,V)=>{const q=L.filter(fe=>{var Re,Se;return(((Se=(Re=fe.createdAt)==null?void 0:Re.toDate)==null?void 0:Se.call(Re))||new Date(fe.createdAt)).getHours()===V}).length,ae=Math.max(...Array.from({length:24},(fe,ke)=>L.filter(Re=>{var Be,is;return(((is=(Be=Re.createdAt)==null?void 0:Be.toDate)==null?void 0:is.call(Be))||new Date(Re.createdAt)).getHours()===ke}).length),1),de=q/ae;return e.jsxs("div",{className:"text-center",title:`${V}:00 - ${q} ÿ∑ŸÑÿ®`,children:[e.jsx("div",{className:`h-16 rounded-lg mb-1 ${de>.8?"bg-red-500":de>.6?"bg-orange-500":de>.4?"bg-yellow-500":de>.2?"bg-green-400":de>0?"bg-green-200":"bg-gray-100"}`,style:{opacity:Math.max(.3,de)}}),e.jsx("span",{className:"text-xs text-gray-500",children:V})]},V)})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"})," ÿ∞ÿ±Ÿàÿ© ÿπÿßŸÑŸäÿ©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"})," ŸÜÿ¥ÿßÿ∑ ŸÖÿ±ÿ™ŸÅÿπ"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"})," ŸÖÿ™Ÿàÿ≥ÿ∑"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-green-400 rounded"})," ŸÖŸÜÿÆŸÅÿ∂"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5 text-amber-500"}),"ÿ£ŸÅÿ∂ŸÑ 5 ŸÖÿ∑ÿßÿπŸÖ (ÿ≠ÿ≥ÿ® ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™)"]}),e.jsxs("div",{className:"space-y-3",children:[m.map(l=>({...l,orderCount:L.filter(V=>V.restaurantId===l.id&&V.status==="delivered").length,revenue:L.filter(V=>V.restaurantId===l.id&&V.status==="delivered").reduce((V,q)=>V+(q.subtotal||0),0)})).sort((l,V)=>V.orderCount-l.orderCount).slice(0,5).map((l,V)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${V===0?"bg-amber-500":V===1?"bg-gray-400":V===2?"bg-amber-700":"bg-gray-300"}`,children:V+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500",children:l.city||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-emerald-600",children:[l.orderCount," ÿ∑ŸÑÿ®"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[l.revenue.toFixed(0)," ÿ±.ÿ≥"]})]})]},l.id)),m.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÉÿßŸÅŸäÿ©"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-cyan-500"}),"ÿ£ŸÅÿ∂ŸÑ 5 ŸÖŸÜÿßÿØŸäÿ® (ÿ≠ÿ≥ÿ® ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™)"]}),e.jsx("div",{className:"space-y-3",children:(()=>{const l=L.filter(q=>q.courierId&&q.status==="delivered").reduce((q,ae)=>(q[ae.courierId]||(q[ae.courierId]={deliveries:0,earnings:0}),q[ae.courierId].deliveries++,q[ae.courierId].earnings+=(ae.deliveryFee||0)-(ae.courierPlatformFee||0),q),{}),V=f.filter(q=>q.role==="courier"&&l[q.uid]).map(q=>({...q,...l[q.uid]})).sort((q,ae)=>ae.deliveries-q.deliveries).slice(0,5);return V.length===0?e.jsx("p",{className:"text-center text-gray-500 py-4",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÉÿßŸÅŸäÿ©"}):V.map((q,ae)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${ae===0?"bg-cyan-500":ae===1?"bg-gray-400":ae===2?"bg-cyan-700":"bg-gray-300"}`,children:ae+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:q.name||"ŸÖŸÜÿØŸàÿ®"}),e.jsx("p",{className:"text-sm text-gray-500",children:q.phone||q.email})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-cyan-600",children:[q.deliveries," ÿ™ŸàÿµŸäŸÑÿ©"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[q.earnings.toFixed(0)," ÿ±.ÿ≥"]})]})]},q.uid))})()})]})]}),c==="finance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl p-6 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:"üìä ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿ™ŸÅÿµŸäŸÑŸäÿ©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿπÿ±ÿ∂ ÿ™ŸÇÿßÿ±Ÿäÿ± ŸÖŸÅÿµŸÑÿ©ÿå ŸÖÿ≠ÿßŸÅÿ∏ ÿßŸÑÿ£ÿ≥ÿ± ŸàÿßŸÑŸÖŸÜÿßÿØŸäÿ®ÿå ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©"})]}),e.jsxs("a",{href:"/accounting",className:"bg-white text-emerald-600 px-6 py-3 rounded-xl font-bold hover:bg-emerald-50 transition flex items-center gap-2",children:[e.jsx(cs,{className:"w-5 h-5"}),"ŸÅÿ™ÿ≠ ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©"]})]}),(()=>{const l=tn();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"üí∞ ÿßŸÑŸÖŸÑÿÆÿµ ÿßŸÑŸÖÿßŸÑŸä"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:l.totalRevenue.toFixed(0)}),e.jsx("p",{className:"text-sm opacity-90",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™ (ÿ±.ÿ≥)"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:l.totalPlatformFee.toFixed(2)}),e.jsx("p",{className:"text-sm opacity-90",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ (ÿ±.ÿ≥)"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:l.totalAdminCommission.toFixed(2)}),e.jsx("p",{className:"text-sm opacity-90",children:"ÿπŸÖŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ (ÿ±.ÿ≥)"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:(l.totalPlatformFee+l.totalAdminCommission).toFixed(2)}),e.jsx("p",{className:"text-sm opacity-90",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠ (ÿ±.ÿ≥)"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:"üìÖ ÿßŸÑŸäŸàŸÖ"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™:"}),e.jsx("span",{className:"font-bold",children:l.todayOrders})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™:"}),e.jsxs("span",{className:"font-bold",children:[l.todayRevenue.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[l.todayPlatformFee.toFixed(2)," ÿ±.ÿ≥"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"üìÖ ÿ¢ÿÆÿ± 7 ÿ£ŸäÿßŸÖ"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™:"}),e.jsx("span",{className:"font-bold",children:l.weekOrders})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™:"}),e.jsxs("span",{className:"font-bold",children:[l.weekRevenue.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[l.weekPlatformFee.toFixed(2)," ÿ±.ÿ≥"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"üìÖ ÿ¢ÿÆÿ± 30 ŸäŸàŸÖ"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™:"}),e.jsx("span",{className:"font-bold",children:l.monthOrders})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™:"}),e.jsxs("span",{className:"font-bold",children:[l.monthRevenue.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[l.monthPlatformFee.toFixed(2)," ÿ±.ÿ≥"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"üèÜ ÿ£ÿπŸÑŸâ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿ£ÿØÿßÿ°Ÿã"}),e.jsx("div",{className:"space-y-3",children:m.map(V=>({...V,ordersCount:L.filter(q=>q.restaurantId===V.id&&q.status==="delivered").length,revenue:L.filter(q=>q.restaurantId===V.id&&q.status==="delivered").reduce((q,ae)=>q+(ae.total||0),0)})).sort((V,q)=>q.revenue-V.revenue).slice(0,5).map((V,q)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:q===0?"ü•á":q===1?"ü•à":q===2?"ü•â":`#${q+1}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:V.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[V.ordersCount," ÿ∑ŸÑÿ®"]})]})]}),e.jsxs("p",{className:"font-bold text-green-600",children:[V.revenue.toFixed(2)," ÿ±.ÿ≥"]})]},V.id))})]})]})})()]}),c==="restaurants"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white via-sky-50/30 to-emerald-50/30 rounded-3xl p-6 border border-sky-100 shadow-lg shadow-sky-100/50",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-200",children:e.jsx(Ve,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Ga().length," ŸÖŸÜ ",m.length," ŸÖÿ∑ÿπŸÖ"]})]})]}),e.jsx("button",{onClick:()=>Ke(!Te),className:"group flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white px-5 py-3 rounded-2xl font-bold shadow-lg shadow-emerald-200 transition-all duration-300 hover:scale-105",children:Te?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-5 h-5"}),"ÿ•ŸÑÿ∫ÿßÿ°"]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),"ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"]})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Gs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖÿå ÿßŸÑÿ•ŸäŸÖŸäŸÑÿå ÿßŸÑŸáÿßÿ™ŸÅÿå ÿ£Ÿà ÿßŸÑŸÖÿØŸäŸÜÿ©...",value:$s,onChange:l=>Zs(l.target.value),className:"w-full pr-12 pl-4 py-4 border-2 border-sky-100 rounded-2xl focus:border-emerald-400 focus:ring-4 focus:ring-emerald-100 transition-all bg-white/80 backdrop-blur text-lg"}),$s&&e.jsx("button",{onClick:()=>Zs(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Kt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ŸÅŸÑÿ™ÿ±:"})]}),[{value:"all",label:"ÿßŸÑŸÉŸÑ",icon:"üè™"},{value:"premium",label:"ÿ®ÿ±ŸäŸÖŸäŸàŸÖ",icon:"üëë"},{value:"free",label:"ŸÖÿ¨ÿßŸÜŸä",icon:"üÜì"},{value:"verified",label:"ŸÖŸàÿ´ŸÇ",icon:"‚úÖ"},{value:"unverified",label:"ÿ∫Ÿäÿ± ŸÖŸàÿ´ŸÇ",icon:"‚è≥"}].map(l=>e.jsxs("button",{onClick:()=>Tr(l.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${zt===l.value?"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg shadow-emerald-200":"bg-white border border-gray-200 text-gray-600 hover:border-emerald-300 hover:bg-emerald-50"}`,children:[l.icon," ",l.label]},l.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(li,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ÿ™ÿ±ÿ™Ÿäÿ®:"})]}),e.jsxs("select",{value:Os,onChange:l=>Wa(l.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",children:[e.jsx("option",{value:"newest",children:"ÿßŸÑÿ£ÿ≠ÿØÿ´ ÿ£ŸàŸÑÿßŸã"}),e.jsx("option",{value:"oldest",children:"ÿßŸÑÿ£ŸÇÿØŸÖ ÿ£ŸàŸÑÿßŸã"}),e.jsx("option",{value:"name",children:"ÿßŸÑÿßÿ≥ŸÖ (ÿ£-Ÿä)"})]})]})]}),Te&&e.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[e.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"üè™ ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ *"}),e.jsx("input",{type:"text",placeholder:"ŸÖÿ´ÿßŸÑ: ŸÖÿ∑ÿπŸÖ ÿßŸÑÿ¥ÿßŸÖ",value:ze,onChange:l=>Rs(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsx("input",{type:"text",placeholder:"ŸÖÿ´ÿßŸÑ: ÿßŸÑÿ±Ÿäÿßÿ∂",value:Ps,onChange:l=>Js(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ÿáÿßÿ™ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Xs,onChange:l=>ns(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿ•ŸäŸÖŸäŸÑ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:tt,onChange:l=>Us(l.target.value),className:"w-full border rounded-xl p-3"})]})]}),e.jsxs("div",{className:"border-t mt-4 pt-4",children:[e.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"üë§ ÿ®ŸäÿßŸÜÿßÿ™ ÿµÿßÿ≠ÿ® ÿßŸÑŸÖÿ∑ÿπŸÖ (ŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ)"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿ•ŸäŸÖŸäŸÑ ÿµÿßÿ≠ÿ® ÿßŸÑŸÖÿ∑ÿπŸÖ *"}),e.jsx("input",{type:"email",placeholder:"owner@example.com",value:Ts,onChange:l=>Bs(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± *"}),e.jsx("input",{type:"password",placeholder:"6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ",value:Vs,onChange:l=>Vt(l.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),e.jsx("button",{onClick:sn,disabled:At||!ze.trim()||!Ts.trim()||!Vs.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:At?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):"üè™ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ∑ÿπŸÖ"})]}),e.jsx("div",{className:"space-y-4",children:Ga().length===0?e.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Gs,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿ±ÿ® ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑÿ®ÿ≠ÿ´"}),e.jsx("button",{onClick:()=>{Zs(""),Tr("all")},className:"mt-4 px-6 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition-colors",children:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÅŸÑÿßÿ™ÿ±"})]}):Ga().map(l=>{var V;return e.jsx("div",{className:"bg-white rounded-2xl shadow-lg shadow-gray-100 border border-gray-100 p-5 hover:shadow-xl transition-all duration-300",children:o===l.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("input",{type:"text",value:U.name||"",onChange:q=>B({...U,name:q.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("input",{type:"text",value:U.phone||"",onChange:q=>B({...U,phone:q.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"}),e.jsx("input",{type:"email",value:U.email||"",onChange:q=>B({...U,email:q.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsx("input",{type:"text",value:U.city||"",onChange:q=>B({...U,city:q.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ"}),e.jsx("input",{type:"text",value:U.location||"",onChange:q=>B({...U,location:q.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿ±ÿ®ÿ∑ ÿ®ŸÖÿ¥ÿ±ŸÅ (ŸÑŸÑÿπŸÖŸàŸÑÿ©)"}),e.jsxs("select",{value:U.referredBy||"",onChange:q=>B({...U,referredBy:q.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[e.jsx("option",{value:"",children:"-- ÿ®ÿØŸàŸÜ ŸÖÿ¥ÿ±ŸÅ (ÿßŸÑŸÖÿ∑Ÿàÿ± ŸÅŸÇÿ∑) --"}),f.filter(q=>q.role==="admin").map(q=>e.jsxs("option",{value:q.uid,children:["üëë ",q.name||q.email]},q.uid))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ÿßŸÑŸÖÿ¥ÿ±ŸÅ ÿßŸÑŸÖÿ±ÿ™ÿ®ÿ∑ Ÿäÿ≠ÿµŸÑ ÿπŸÑŸâ ÿπŸÖŸàŸÑÿ© ŸÖŸÜ ÿ∑ŸÑÿ®ÿßÿ™ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("input",{type:"file",accept:"image/*",onChange:q=>{var de;const ae=(de=q.target.files)==null?void 0:de[0];ae&&ln(l.id,ae)},className:"w-full border rounded-xl p-2 mt-1",disabled:Q}),Q&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ±ŸÅÿπ..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>rn(l.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[e.jsx(wr,{className:"w-4 h-4"})," ÿ≠ŸÅÿ∏"]}),e.jsxs("button",{onClick:()=>w(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[e.jsx(_e,{className:"w-4 h-4"})," ÿ•ŸÑÿ∫ÿßÿ°"]})]})]}):e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:l.logoUrl?e.jsx("img",{src:l.logoUrl,alt:l.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:"üè™"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-lg",children:l.name}),l.isVerified&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[e.jsx(De,{className:"w-3 h-3"})," ŸÖŸàÿ´ŸÇÿ©"]})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[l.phone&&e.jsxs("p",{children:["üì± ",l.phone]}),l.email&&e.jsxs("p",{children:["üìß ",l.email]}),l.city&&e.jsxs("p",{children:["üìç ",l.city]}),l.referredBy&&e.jsxs("p",{className:"text-purple-600",children:["üëë ŸÖÿ∂ÿßŸÅ ŸÖŸÜ: ",((V=d.find(q=>q.uid===l.referredBy))==null?void 0:V.name)||l.referredBy.slice(0,8)]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{const q=!l.isVerified;if(await n.confirm(q?`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™Ÿàÿ´ŸäŸÇ ÿ£ÿ≥ÿ±ÿ© "${l.name}"ÿü ÿ≥ÿ™ÿ∏Ÿáÿ± ÿπŸÑÿßŸÖÿ© ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ ŸÑŸÑÿπŸÖŸÑÿßÿ°.`:`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ŸÑÿ∫ÿßÿ° ÿ™Ÿàÿ´ŸäŸÇ ÿ£ÿ≥ÿ±ÿ© "${l.name}"ÿü`,{title:q?"‚úÖ ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ©":"‚ùå ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ",confirmText:q?"ŸÜÿπŸÖÿå Ÿàÿ´ŸëŸÇ":"ŸÜÿπŸÖÿå ÿ£ŸÑÿ∫Ÿê ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"}))try{await xe(X(S,"restaurants",l.id),{isVerified:q,verifiedAt:q?J():null,updatedAt:J()}),t.success(q?"ÿ™ŸÖ ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ‚úÖ":"ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"),rs()}catch(de){t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£"),console.error(de)}},className:`p-2 rounded-xl ${l.isVerified?"bg-green-100 hover:bg-green-200 text-green-600":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:l.isVerified?"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ":"ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ©",children:e.jsx(De,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{w(l.id),B(l)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"ÿ™ÿ≠ÿ±Ÿäÿ±",children:e.jsx(ea,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>nn(l.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"ÿ≠ÿ∞ŸÅ",children:e.jsx(fs,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex gap-2 items-center",children:l.packageType==="premium"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded-full flex items-center gap-1",children:"‚ú® ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"}),e.jsx("button",{onClick:()=>Xl(l),className:"text-xs bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1 rounded-lg",children:"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ®ÿßŸÇÿ©"})]}):e.jsx("button",{onClick:()=>Jl(l),className:"text-xs bg-amber-50 hover:bg-amber-100 text-amber-700 px-3 py-1 rounded-lg flex items-center gap-1",children:"‚ú® ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"})}),e.jsxs("select",{value:l.referredBy||"",onChange:async q=>{const ae=q.target.value;try{await xe(X(S,"restaurants",l.id),{referredBy:ae||null,updatedAt:J()}),t.success(ae?"ÿ™ŸÖ ÿ±ÿ®ÿ∑ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ÿßŸÑŸÖÿ¥ÿ±ŸÅ":"ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿ±ÿ®ÿ∑ ÿßŸÑŸÖÿ¥ÿ±ŸÅ"),rs()}catch{t.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ±ÿ®ÿ∑")}},className:"text-xs border rounded-lg p-1",title:"ÿ±ÿ®ÿ∑ ÿ®ŸÖÿ¥ÿ±ŸÅ",children:[e.jsx("option",{value:"",children:"üë§ ÿ®ÿØŸàŸÜ ŸÖÿ¥ÿ±ŸÅ"}),f.filter(q=>q.role==="admin").map(q=>e.jsxs("option",{value:q.uid,children:["üëë ",q.name||q.email]},q.uid))]})]})]})},l.id)})})]}),c==="orders"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white via-amber-50/30 to-orange-50/30 rounded-3xl p-6 border border-amber-100 shadow-lg shadow-amber-100/50",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg shadow-amber-200",children:e.jsx(Oe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Ya().length," ŸÖŸÜ ",L.length," ÿ∑ŸÑÿ®"]})]})]})}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Gs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿ®ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®ÿå ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖÿå ÿ£Ÿà ÿßŸÑÿπŸÜŸàÿßŸÜ...",value:$s,onChange:l=>Zs(l.target.value),className:"w-full pr-12 pl-4 py-4 border-2 border-amber-100 rounded-2xl focus:border-amber-400 focus:ring-4 focus:ring-amber-100 transition-all bg-white/80 backdrop-blur text-lg"}),$s&&e.jsx("button",{onClick:()=>Zs(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Kt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ÿßŸÑÿ≠ÿßŸÑÿ©:"})]}),[{value:"all",label:"ÿßŸÑŸÉŸÑ",icon:"üì¶"},{value:"pending",label:"ÿ¨ÿßÿ±Ÿä",icon:"‚è≥"},{value:"delivered",label:"ŸÖŸÉÿ™ŸÖŸÑ",icon:"‚úÖ"},{value:"cancelled",label:"ŸÖŸÑÿ∫Ÿä",icon:"‚ùå"}].map(l=>e.jsxs("button",{onClick:()=>$r(l.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${da===l.value?"bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-lg shadow-amber-200":"bg-white border border-gray-200 text-gray-600 hover:border-amber-300 hover:bg-amber-50"}`,children:[l.icon," ",l.label]},l.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(St,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ÿßŸÑŸÅÿ™ÿ±ÿ©:"})]}),[{value:"all",label:"ÿßŸÑŸÉŸÑ"},{value:"today",label:"ÿßŸÑŸäŸàŸÖ"},{value:"week",label:"ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ"},{value:"month",label:"ÿßŸÑÿ¥Ÿáÿ±"}].map(l=>e.jsx("button",{onClick:()=>Er(l.value),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${Ht===l.value?"bg-amber-100 text-amber-700":"text-gray-500 hover:bg-gray-100"}`,children:l.label},l.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("select",{value:Os,onChange:l=>Wa(l.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium focus:border-amber-400 focus:ring-2 focus:ring-amber-100",children:[e.jsx("option",{value:"newest",children:"ÿßŸÑÿ£ÿ≠ÿØÿ´ ÿ£ŸàŸÑÿßŸã"}),e.jsx("option",{value:"oldest",children:"ÿßŸÑÿ£ŸÇÿØŸÖ ÿ£ŸàŸÑÿßŸã"})]})]})]}),e.jsx("div",{className:"space-y-4",children:Ya().length===0?e.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Oe,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿ±ÿ® ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿ£Ÿà ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑÿ≤ŸÖŸÜŸäÿ©"}),e.jsx("button",{onClick:()=>{Zs(""),$r("all"),Er("all")},className:"mt-4 px-6 py-2 bg-amber-100 text-amber-600 rounded-xl font-medium hover:bg-amber-200 transition-colors",children:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÅŸÑÿßÿ™ÿ±"})]}):Ya().map(l=>{var V,q;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg shadow-gray-100 border border-gray-100 p-5 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg",children:["ÿ∑ŸÑÿ® #",l.id.slice(-8)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["üè™ ",l.restaurantName||"ŸÖÿ∑ÿπŸÖ"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["üìç ",l.address]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["üí∞ ",(V=l.total)==null?void 0:V.toFixed(2)," ÿ±.ÿ≥"]}),l.platformFee&&e.jsxs("p",{className:"text-xs text-green-600",children:["ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ: ",l.platformFee," ÿ±.ÿ≥",l.adminCommission?` | ÿπŸÖŸàŸÑÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅ: ${l.adminCommission} ÿ±.ÿ≥`:""]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:`inline-block px-3 py-1.5 rounded-xl text-sm font-bold ${l.status==="delivered"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700":l.status==="cancelled"?"bg-gradient-to-r from-red-100 to-pink-100 text-red-700":l.status==="pending"?"bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-700":"bg-gradient-to-r from-blue-100 to-sky-100 text-blue-700"}`,children:mn(l.status)}),e.jsxs("select",{value:l.status,onChange:ae=>dn(l.id,ae.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[e.jsx("option",{value:"pending",children:"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"}),e.jsx("option",{value:"accepted",children:"ŸÖŸÇÿ®ŸàŸÑ"}),e.jsx("option",{value:"preparing",children:"ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±"}),e.jsx("option",{value:"ready",children:"ÿ¨ÿßŸáÿ≤"}),e.jsx("option",{value:"out_for_delivery",children:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ"}),e.jsx("option",{value:"delivered",children:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ"}),e.jsx("option",{value:"cancelled",children:"ŸÖŸÑÿ∫Ÿä"})]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ÿßŸÑÿ£ÿµŸÜÿßŸÅ:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(q=l.items)==null?void 0:q.map((ae,de)=>e.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-lg",children:[ae.name," √ó ",ae.qty]},de))})]})]},l.id)})})]}),c==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white via-violet-50/30 to-purple-50/30 rounded-3xl p-6 border border-violet-100 shadow-lg shadow-violet-100/50",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-violet-200",children:e.jsx(nt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Ka().length," ŸÖŸÜ ",f.length," ŸÖÿ≥ÿ™ÿÆÿØŸÖ"]})]})]})}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Gs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖÿå ÿßŸÑÿ•ŸäŸÖŸäŸÑÿå ÿ£Ÿà ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ...",value:$s,onChange:l=>Zs(l.target.value),className:"w-full pr-12 pl-4 py-4 border-2 border-violet-100 rounded-2xl focus:border-violet-400 focus:ring-4 focus:ring-violet-100 transition-all bg-white/80 backdrop-blur text-lg"}),$s&&e.jsx("button",{onClick:()=>Zs(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Kt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ÿßŸÑÿØŸàÿ±:"})]}),[{value:"all",label:"ÿßŸÑŸÉŸÑ",icon:"üë•",color:"violet"},{value:"customer",label:"ÿπŸÖŸäŸÑ",icon:"üõí"},{value:"owner",label:"ŸÖÿ∑ÿπŸÖ",icon:"üè™"},{value:"courier",label:"ŸÖŸÜÿØŸàÿ®",icon:"üöó"},{value:"admin",label:"ŸÖÿ¥ÿ±ŸÅ",icon:"üëë"}].map(l=>e.jsxs("button",{onClick:()=>Fr(l.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${Qa===l.value?"bg-gradient-to-r from-violet-500 to-purple-600 text-white shadow-lg shadow-violet-200":"bg-white border border-gray-200 text-gray-600 hover:border-violet-300 hover:bg-violet-50"}`,children:[l.icon," ",l.label]},l.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("select",{value:Os,onChange:l=>Wa(l.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium focus:border-violet-400 focus:ring-2 focus:ring-violet-100",children:[e.jsx("option",{value:"newest",children:"ÿßŸÑÿ£ÿ≠ÿØÿ´ ÿ£ŸàŸÑÿßŸã"}),e.jsx("option",{value:"oldest",children:"ÿßŸÑÿ£ŸÇÿØŸÖ ÿ£ŸàŸÑÿßŸã"}),e.jsx("option",{value:"name",children:"ÿßŸÑÿßÿ≥ŸÖ (ÿ£-Ÿä)"})]})]})]}),Ka().length===0?e.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(nt,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿ±ÿ® ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑÿ®ÿ≠ÿ´"}),e.jsx("button",{onClick:()=>{Zs(""),Fr("all")},className:"mt-4 px-6 py-2 bg-violet-100 text-violet-600 rounded-xl font-medium hover:bg-violet-200 transition-colors",children:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÅŸÑÿßÿ™ÿ±"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ka().map(l=>{var V,q,ae,de,fe,ke,Re;return e.jsx("div",{className:"bg-white rounded-2xl shadow-lg shadow-gray-100 border border-gray-100 p-5 hover:shadow-xl transition-all duration-300",children:C===l.uid?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"ÿßŸÑÿßÿ≥ŸÖ",value:x.name||"",onChange:Se=>z({...x,name:Se.target.value}),className:"w-full border rounded-xl p-2"}),e.jsx("input",{type:"text",placeholder:"ÿßŸÑŸáÿßÿ™ŸÅ",value:x.phone||"",onChange:Se=>z({...x,phone:Se.target.value}),className:"w-full border rounded-xl p-2"}),e.jsxs("select",{value:x.role||"customer",onChange:Se=>z({...x,role:Se.target.value}),className:"w-full border rounded-xl p-2",children:[e.jsx("option",{value:"customer",children:"ÿπŸÖŸäŸÑ"}),e.jsx("option",{value:"owner",children:"ÿµÿßÿ≠ÿ® ŸÖÿ∑ÿπŸÖ"}),e.jsx("option",{value:"courier",children:"ŸÖŸÜÿØŸàÿ®"}),e.jsx("option",{value:"admin",children:"ŸÖÿ¥ÿ±ŸÅ"}),e.jsx("option",{value:"developer",children:"ŸÖÿ∑Ÿàÿ±"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>cn(l.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:"ÿ≠ŸÅÿ∏"}),e.jsx("button",{onClick:()=>P(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-bold",children:l.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),l.isActive===!1&&e.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:"ŸÖŸàŸÇŸàŸÅ"}),((V=l.security)==null?void 0:V.isDeactivated)&&e.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:"üîí ŸÖÿ≠ÿ∏Ÿàÿ±"}),((q=l.security)==null?void 0:q.lockedUntil)&&new Date(((de=(ae=l.security.lockedUntil).toDate)==null?void 0:de.call(ae))||l.security.lockedUntil)>new Date&&e.jsx("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full",children:"‚è±Ô∏è ŸÖŸÇŸÅŸÑ ŸÖÿ§ŸÇÿ™ÿßŸã"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:l.email}),l.phone&&e.jsxs("p",{className:"text-xs text-gray-500",children:["üì± ",l.phone]}),e.jsx("p",{className:"text-xs mt-1",children:xn(l.role)}),((fe=l.security)==null?void 0:fe.lastLogin)&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["üïê ÿ¢ÿÆÿ± ÿØÿÆŸàŸÑ: ",new Date(((Re=(ke=l.security.lastLogin).toDate)==null?void 0:Re.call(ke))||l.security.lastLogin).toLocaleString("ar-SA")]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Gl(l,l.isActive!==!1),className:`p-1.5 rounded-lg ${l.isActive===!1?"bg-green-100 text-green-600":"bg-orange-100 text-orange-600"}`,title:l.isActive===!1?"ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®":"ÿ™ÿπŸÑŸäŸÇ ÿßŸÑÿ≠ÿ≥ÿßÿ®",children:l.isActive===!1?e.jsx(De,{className:"w-4 h-4"}):e.jsx(Cs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{P(l.uid),z(l)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",title:"ÿ™ÿπÿØŸäŸÑ",children:e.jsx(ea,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>on(l.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"ÿ≠ÿ∞ŸÅ",children:e.jsx(fs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Yl(l),className:"p-1.5 bg-amber-100 text-amber-600 rounded-lg hover:bg-amber-200 transition-colors",title:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",children:e.jsx(yr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Kl(l),className:"p-1.5 bg-violet-100 text-violet-600 rounded-lg hover:bg-violet-200 transition-colors",title:"ÿ≥ÿ¨ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",children:e.jsx(vt,{className:"w-4 h-4"})})]})]})]})})},l.uid)})}),Qt.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 bg-gradient-to-r from-violet-500 to-purple-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vt,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ÿ≥ÿ¨ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"}),e.jsx("p",{className:"text-sm text-violet-100",children:Qt.userName})]})]}),e.jsx("button",{onClick:()=>ma(l=>({...l,isOpen:!1})),className:"p-2 hover:bg-white/20 rounded-xl transition",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:Qt.loading?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qe,{className:"w-8 h-8 animate-spin mx-auto text-violet-500 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]}):Qt.history.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(vt,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≥ÿ¨ŸÑÿßÿ™ ÿØÿÆŸàŸÑ"})]}):e.jsx("div",{className:"space-y-3",children:Qt.history.map((l,V)=>e.jsxs("div",{className:`p-4 rounded-2xl border ${l.status==="success"?"bg-green-50 border-green-200":l.status==="blocked"?"bg-red-50 border-red-200":"bg-orange-50 border-orange-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l.status==="success"?e.jsx(De,{className:"w-5 h-5 text-green-600"}):l.status==="blocked"?e.jsx(ms,{className:"w-5 h-5 text-red-600"}):e.jsx(Cs,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:`font-medium ${l.status==="success"?"text-green-700":l.status==="blocked"?"text-red-700":"text-orange-700"}`,children:l.status==="success"?"ÿØÿÆŸàŸÑ ŸÜÿßÿ¨ÿ≠":l.status==="blocked"?"ŸÖÿ≠ÿ∏Ÿàÿ±":"ŸÖÿ≠ÿßŸàŸÑÿ© ŸÅÿßÿ¥ŸÑÿ©"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:l.timestamp?new Date(l.timestamp).toLocaleString("ar-SA"):"-"})]}),l.errorMessage&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:l.errorMessage})]},l.id||V))})})]})})]}),c==="couriers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-white via-cyan-50/30 to-teal-50/30 rounded-3xl p-6 border border-cyan-100 shadow-lg shadow-cyan-100/50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-teal-600 rounded-2xl flex items-center justify-center shadow-lg shadow-cyan-200",children:e.jsx(Ue,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-600 to-teal-600 bg-clip-text text-transparent",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÜÿßÿØŸäÿ®"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[I.couriers," ŸÖŸÜÿØŸàÿ® ŸÖÿ≥ÿ¨ŸÑ"]})]})]}),e.jsx("button",{onClick:()=>me(!K),className:"group flex items-center gap-2 bg-gradient-to-r from-cyan-500 to-teal-600 hover:from-cyan-600 hover:to-teal-700 text-white px-5 py-3 rounded-2xl font-bold shadow-lg shadow-cyan-200 transition-all duration-300 hover:scale-105",children:K?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-5 h-5"}),"ÿ•ŸÑÿ∫ÿßÿ°"]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),"ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿØŸàÿ® ÿ¨ÿØŸäÿØ"]})})]})}),K&&e.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[e.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"üöó ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿØŸàÿ® ÿ¨ÿØŸäÿØ"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä *"}),e.jsx("input",{type:"email",placeholder:"courier@example.com",value:oe,onChange:l=>Ne(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± *"}),e.jsx("input",{type:"password",placeholder:"6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ",value:ne,onChange:l=>le(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßŸÑÿßÿ≥ŸÖ"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®",value:W,onChange:l=>ee(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:he,onChange:l=>ve(l.target.value),className:"w-full border rounded-xl p-3"})]})]}),e.jsx("button",{onClick:en,disabled:Ae||!oe.trim()||!ne.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Ae?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):"üöó ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÜÿØŸàÿ®"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.filter(l=>l.role==="courier").map(l=>e.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:"üöó"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:l.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),e.jsx("p",{className:"text-sm text-gray-600",children:l.email}),l.phone&&e.jsxs("p",{className:"text-sm text-gray-600",children:["üì± ",l.phone]})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[e.jsx("p",{className:"text-lg font-bold text-green-600",children:L.filter(V=>V.courierId===l.uid&&V.status==="delivered").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿ≥ŸÑŸÖÿ©"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[e.jsx("p",{className:"text-lg font-bold text-blue-600",children:L.filter(V=>V.courierId===l.uid&&V.status==="out_for_delivery").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ"})]})]})})]},l.uid)),I.couriers===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖŸÜÿßÿØŸäÿ® ŸÖÿ≥ÿ¨ŸÑŸäŸÜ"})]})]}),c==="admins"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["üëë ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ ŸàÿπŸÖŸàŸÑÿßÿ™ŸáŸÖ (",d.length,")"]}),e.jsxs("button",{onClick:()=>H(!v),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[e.jsx(Pa,{className:"w-5 h-5"}),v?"ÿ•ŸÑÿ∫ÿßÿ°":"ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ¥ÿ±ŸÅ"]})]}),v&&e.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"üëë ÿ™ÿ±ŸÇŸäÿ© ŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ŸÖÿ¥ÿ±ŸÅ"}),e.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"ÿßÿÆÿ™ÿ± ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸàÿ¨ŸàÿØ ŸÑÿ™ÿ±ŸÇŸäÿ™Ÿá ÿ•ŸÑŸâ ÿØŸàÿ± ÿßŸÑŸÖÿ¥ÿ±ŸÅÿå ÿ£Ÿà ÿ£ÿØÿÆŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ¨ÿØŸäÿØ"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"ÿ™ÿ±ŸÇŸäÿ© ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸàÿ¨ŸàÿØ:"}),e.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[f.filter(l=>l.role==="customer").slice(0,10).map(l=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:l.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),e.jsx("p",{className:"text-sm text-gray-500",children:l.email})]}),e.jsx("button",{onClick:async()=>{if(await n.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ±ŸÇŸäÿ© ${l.name||l.email} ÿ•ŸÑŸâ ŸÖÿ¥ÿ±ŸÅÿü`,{title:"ÿ™ÿ±ŸÇŸäÿ© ÿ•ŸÑŸâ ŸÖÿ¥ÿ±ŸÅ"}))try{await xe(X(S,"users",l.uid),{role:"admin"}),t.success("ÿ™ŸÖ ÿ™ÿ±ŸÇŸäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ŸÖÿ¥ÿ±ŸÅ ‚úÖ"),H(!1),rs()}catch{t.error("ŸÅÿ¥ŸÑ ÿ™ÿ±ŸÇŸäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:"ÿ™ÿ±ŸÇŸäÿ© üëë"})]},l.uid)),f.filter(l=>l.role==="customer").length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ÿπŸÖŸÑÿßÿ° ŸäŸÖŸÉŸÜ ÿ™ÿ±ŸÇŸäÿ™ŸáŸÖ"})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"‚ú® ÿ£Ÿà ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖÿ¥ÿ±ŸÅ ÿ¨ÿØŸäÿØ:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä *"}),e.jsx("input",{type:"email",placeholder:"admin@example.com",value:Y,onChange:l=>ce(l.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± *"}),e.jsx("input",{type:"password",placeholder:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± (6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ)",value:ge,onChange:l=>T(l.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßŸÑÿßÿ≥ŸÖ"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ¥ÿ±ŸÅ",value:ie,onChange:l=>je(l.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:se,onChange:l=>ye(l.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),e.jsx("button",{onClick:Zl,disabled:Z||!Y.trim()||!ge.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:Z?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pa,{className:"w-5 h-5"}),"ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿ¥ÿ±ŸÅ"]})}),e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá: ÿ®ÿπÿØ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ¥ÿ±ŸÅ ÿßŸÑÿ¨ÿØŸäÿØÿå ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã. Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ."})]}),e.jsx("div",{className:"border-t pt-4 mt-4",children:e.jsx("p",{className:"text-xs text-gray-500",children:'üí° ŸäŸÖŸÉŸÜŸÉ ÿ£Ÿäÿ∂ÿßŸã ÿ™ÿ∫ŸäŸäÿ± ÿØŸàÿ± ÿ£Ÿä ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸÜ ÿ™ÿ®ŸàŸäÿ® "ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"'})})]}),e.jsxs("div",{className:"space-y-4",children:[d.map(l=>e.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>u(R===l.uid?null:l.uid),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:"üëë"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:l.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),e.jsx("p",{className:"text-sm text-gray-600",children:l.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"font-bold text-green-600",children:[l.walletBalance.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ÿ•ÿ¨ŸÖÿßŸÑŸä: ",l.totalEarnings.toFixed(2)," ÿ±.ÿ≥ | ",l.restaurantsCount," ŸÖÿ∑ÿπŸÖ"]})]}),R===l.uid?e.jsx(vr,{className:"w-5 h-5 text-gray-400"}):e.jsx(Oa,{className:"w-5 h-5 text-gray-400"})]})]})}),R===l.uid&&e.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[e.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["üè™ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ∂ÿßŸÅÿ© ÿ®Ÿàÿßÿ≥ÿ∑ÿ© Ÿáÿ∞ÿß ÿßŸÑŸÖÿ¥ÿ±ŸÅ (",l.restaurants.length,"):"]}),l.restaurants.length>0?e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:l.restaurants.map(V=>e.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:V.logoUrl?e.jsx("img",{src:V.logoUrl,alt:V.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"üè™"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:V.name}),e.jsx("p",{className:"text-xs text-gray-500",children:V.city||"ÿ®ÿØŸàŸÜ ŸÖÿØŸäŸÜÿ©"})]})]},V.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"ŸÑŸÖ Ÿäÿ∂ŸÅ ÿ£Ÿä ŸÖÿ∑ÿßÿπŸÖ ÿ®ÿπÿØ"}),e.jsx("div",{className:"mt-4 pt-3 border-t",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-green-700",children:l.walletBalance.toFixed(2)}),e.jsx("p",{className:"text-xs text-gray-600",children:"ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑÿ≠ÿßŸÑŸä"})]}),e.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-blue-700",children:l.totalEarnings.toFixed(2)}),e.jsx("p",{className:"text-xs text-gray-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-purple-700",children:L.filter(V=>V.referredBy===l.uid).length}),e.jsx("p",{className:"text-xs text-gray-600",children:"ÿ∑ŸÑÿ®ÿßÿ™ ŸÖŸÜ ŸÖÿ∑ÿßÿπŸÖŸá"})]})]})})]})]},l.uid)),d.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖÿ¥ÿ±ŸÅŸäŸÜ ŸÖÿ≥ÿ¨ŸÑŸäŸÜ"})]})]}),c==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"‚öôÔ∏è ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),F?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{D(!1),E(A)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx("button",{onClick:an,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:"üíæ ÿ≠ŸÅÿ∏"})]}):e.jsx("button",{onClick:()=>D(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üí∞ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ (ÿ±.ÿ≥)"}),F?e.jsx("input",{type:"number",value:b.deliveryFee||0,onChange:l=>E({...b,deliveryFee:Number(l.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[A.deliveryFee||7," ÿ±.ÿ≥"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üíµ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ / ŸÖŸÜÿ™ÿ¨ (ÿ±.ÿ≥)"}),F?e.jsx("input",{type:"number",step:"0.1",value:b.platformFee||1,onChange:l=>E({...b,platformFee:Number(l.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[A.platformFee||1," ÿ±.ÿ≥/ŸÖŸÜÿ™ÿ¨"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üëë ÿπŸÖŸàŸÑÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅ / ŸÖŸÜÿ™ÿ¨ (ÿ±.ÿ≥)"}),F?e.jsx("input",{type:"number",step:"0.05",value:b.adminCommissionRate||.75,onChange:l=>E({...b,adminCommissionRate:Number(l.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[A.adminCommissionRate||.75," ÿ±.ÿ≥/ŸÖŸÜÿ™ÿ¨"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üõí ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ∑ŸÑÿ®"}),F?e.jsx("input",{type:"number",value:b.minOrderAmount||0,onChange:l=>E({...b,minOrderAmount:Number(l.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[A.minOrderAmount||20," ÿ±.ÿ≥"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üïê ÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿπŸÖŸÑ"}),F?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"time",value:((Or=b.workingHours)==null?void 0:Or.open)||"09:00",onChange:l=>E({...b,workingHours:{...b.workingHours,open:l.target.value}}),className:"flex-1 border rounded-xl p-3"}),e.jsx("input",{type:"time",value:((Lr=b.workingHours)==null?void 0:Lr.close)||"23:00",onChange:l=>E({...b,workingHours:{...b.workingHours,close:l.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):e.jsxs("p",{className:"text-2xl font-bold",children:[((Mr=A.workingHours)==null?void 0:Mr.open)||"09:00"," - ",((Ur=A.workingHours)==null?void 0:Ur.close)||"23:00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üîß Ÿàÿ∂ÿπ ÿßŸÑÿµŸäÿßŸÜÿ©"}),F?e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.maintenanceMode||!1,onChange:l=>E({...b,maintenanceMode:l.target.checked}),className:"w-6 h-6"}),e.jsx("span",{className:"text-lg",children:b.maintenanceMode?"ŸÖŸÅÿπŸëŸÑ":"ŸÖÿπÿ∑ŸëŸÑ"})]}):e.jsx("p",{className:`text-2xl font-bold ${A.maintenanceMode?"text-red-600":"text-green-600"}`,children:A.maintenanceMode?"üî¥ ŸÖŸÅÿπŸëŸÑ":"üü¢ ŸÖÿπÿ∑ŸëŸÑ"})]})]})}),e.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[e.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"üí∞ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿπŸÖŸàŸÑÿßÿ™ (ŸÑŸÉŸÑ ŸÖŸÜÿ™ÿ¨ = 1.75 ÿ±.ÿ≥):"}),e.jsxs("div",{className:"text-sky-800 space-y-2",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:"})," ",A.platformFee||1," ÿ±.ÿ≥ √ó ÿπÿØÿØ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"ÿπŸÖŸàŸÑÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅ:"})," ",A.adminCommissionRate||.75," ÿ±.ÿ≥ √ó ÿπÿØÿØ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™"]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[e.jsx("p",{className:"font-bold mb-2",children:"üìù ŸÖÿ´ÿßŸÑ: ÿ∑ŸÑÿ® ŸÅŸäŸá 5 ŸÖŸÜÿ™ÿ¨ÿßÿ™"}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"ÿ•ÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÖÿ∂ÿßŸÅ ŸÖŸÜ ŸÖÿ¥ÿ±ŸÅ:"})]}),e.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[e.jsxs("li",{children:["ÿßŸÑŸÖÿ¥ÿ±ŸÅ Ÿäÿ≠ÿµŸÑ ÿπŸÑŸâ: 5 √ó ",A.adminCommissionRate||.75," = ",e.jsxs("strong",{children:[(5*(A.adminCommissionRate||.75)).toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("li",{children:["ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ Ÿäÿ≠ÿµŸÑ ÿπŸÑŸâ: 5 √ó ",A.platformFee||1," = ",e.jsxs("strong",{children:[(5*(A.platformFee||1)).toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("li",{className:"text-green-700",children:["ÿßŸÑŸÖÿ¨ŸÖŸàÿπ: ",e.jsxs("strong",{children:[(5*1.75).toFixed(2)," ÿ±.ÿ≥"]})]})]}),e.jsxs("p",{className:"mt-2",children:["‚Ä¢ ",e.jsx("strong",{children:"ÿ•ÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÖÿ∂ÿßŸÅ ŸÖŸÜ ÿßŸÑŸÖÿ∑Ÿàÿ±:"})]}),e.jsx("ul",{className:"mr-6 list-disc text-sm",children:e.jsxs("li",{children:["ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ Ÿäÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÉŸÑ ÿ¥Ÿäÿ°: 5 √ó 1.75 = ",e.jsxs("strong",{children:[(5*1.75).toFixed(2)," ÿ±.ÿ≥"]})]})})]})]})]})]}),c==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"üìã ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸáÿßŸÖ ÿßŸÑŸäŸàŸÖŸäÿ©"}),e.jsxs("button",{onClick:()=>We(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[e.jsx(vs,{className:"w-5 h-5"}),"ŸÖŸáŸÖÿ© ÿ¨ÿØŸäÿØÿ©"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(l=>e.jsxs("button",{onClick:()=>zl(l),className:`px-4 py-2 rounded-xl font-semibold transition ${It===l?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[l==="all"&&"üìã ÿßŸÑŸÉŸÑ",l==="pending"&&"‚è≥ ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±",l==="in_progress"&&"üîÑ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞",l==="completed"&&"‚úÖ ŸÖŸÉÿ™ŸÖŸÑÿ©",l==="cancelled"&&"‚ùå ŸÖŸÑÿ∫ÿßÿ©"]},l))}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:qs.filter(l=>l.status==="pending").length}),e.jsx("p",{className:"text-sm text-yellow-700",children:"ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:qs.filter(l=>l.status==="in_progress").length}),e.jsx("p",{className:"text-sm text-blue-700",children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:qs.filter(l=>l.status==="completed").length}),e.jsx("p",{className:"text-sm text-green-700",children:"ŸÖŸÉÿ™ŸÖŸÑÿ©"})]}),e.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:qs.filter(l=>l.status==="cancelled").length}),e.jsx("p",{className:"text-sm text-red-700",children:"ŸÖŸÑÿ∫ÿßÿ©"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:qs.filter(l=>It==="all"||l.status===It).length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{className:"text-4xl mb-2",children:"üìã"}),e.jsxs("p",{children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸáÿßŸÖ ",It!=="all"&&"ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸÅÿ¶ÿ©"]})]}):e.jsx("div",{className:"divide-y",children:qs.filter(l=>It==="all"||l.status===It).map(l=>{var q,ae,de;const V=f.find(fe=>fe.uid===l.assignedTo);return e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${l.priority==="high"?"bg-red-100 text-red-700":l.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:l.priority==="high"?"üî¥ ÿπÿßŸÑŸäÿ©":l.priority==="medium"?"üü° ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©":"‚ö™ ŸÖŸÜÿÆŸÅÿ∂ÿ©"}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${l.status==="pending"?"bg-yellow-100 text-yellow-700":l.status==="in_progress"?"bg-blue-100 text-blue-700":l.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.status==="pending"&&"‚è≥ ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±",l.status==="in_progress"&&"üîÑ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞",l.status==="completed"&&"‚úÖ ŸÖŸÉÿ™ŸÖŸÑÿ©",l.status==="cancelled"&&"‚ùå ŸÖŸÑÿ∫ÿßÿ©"]})]}),e.jsx("h3",{className:"font-bold text-gray-800",children:l.title}),l.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["üë§ ",(V==null?void 0:V.name)||l.assignedToName||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"]}),l.dueDate&&e.jsxs("span",{children:["üìÖ ",new Date(l.dueDate).toLocaleDateString("ar-SA")]}),e.jsxs("span",{children:["üïê ",((de=(ae=(q=l.createdAt)==null?void 0:q.toDate)==null?void 0:ae.call(q))==null?void 0:de.toLocaleDateString("ar-SA"))||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"]})]}),l.notes&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:["üí¨ ",l.notes]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[l.status==="pending"&&e.jsx("button",{onClick:async()=>{try{await xe(X(S,"tasks",l.id),{status:"in_progress",updatedAt:J()}),t.success("ÿ™ŸÖ ÿ®ÿØÿ° ÿßŸÑŸÖŸáŸÖÿ©"),rs()}catch{t.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸáŸÖÿ©")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:"ÿ®ÿØÿ° ÿßŸÑŸÖŸáŸÖÿ©",children:"‚ñ∂Ô∏è"}),(l.status==="pending"||l.status==="in_progress")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:async()=>{try{await xe(X(S,"tasks",l.id),{status:"completed",completedAt:J(),updatedAt:J()}),t.success("ÿ™ŸÖ ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑŸÖŸáŸÖÿ©"),rs()}catch{t.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸáŸÖÿ©")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:"ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑŸÖŸáŸÖÿ©",children:"‚úÖ"}),e.jsx("button",{onClick:async()=>{if(await n.confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ŸÑÿ∫ÿßÿ° Ÿáÿ∞Ÿá ÿßŸÑŸÖŸáŸÖÿ©ÿü",{dangerous:!0}))try{await xe(X(S,"tasks",l.id),{status:"cancelled",updatedAt:J()}),t.success("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ©"),rs()}catch{t.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ©")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ©",children:"‚ùå"})]}),e.jsx("button",{onClick:async()=>{if(await n.confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑŸÖŸáŸÖÿ© ŸÜŸáÿßÿ¶ŸäÿßŸãÿü",{dangerous:!0}))try{await Ss(X(S,"tasks",l.id)),t.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸáŸÖÿ©"),rs()}catch{t.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸáŸÖÿ©")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸáŸÖÿ©",children:"üóëÔ∏è"})]})]})},l.id)})})}),Le&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"üìã ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸáŸÖÿ© ÿ¨ÿØŸäÿØÿ©"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖŸáŸÖÿ© *"}),e.jsx("input",{type:"text",value:He,onChange:l=>zs(l.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:"ŸÖÿ´ÿßŸÑ: ŸÖÿ™ÿßÿ®ÿπÿ© ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿßŸÑÿ¨ÿØŸäÿØ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿßŸÑŸàÿµŸÅ"}),e.jsx("textarea",{value:at,onChange:l=>_s(l.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:"ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖŸáŸÖÿ©..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿ™ÿπŸäŸäŸÜ ÿ•ŸÑŸâ *"}),e.jsxs("select",{value:bt,onChange:l=>Ua(l.target.value),className:"w-full border rounded-xl px-4 py-2",children:[e.jsx("option",{value:"",children:"-- ÿßÿÆÿ™ÿ± ŸÖÿ¥ÿ±ŸÅ --"}),f.filter(l=>l.role==="admin").map(l=>e.jsx("option",{value:l.uid,children:l.name||l.email},l.uid))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿßŸÑÿ£ŸàŸÑŸàŸäÿ©"}),e.jsxs("select",{value:Ar,onChange:l=>Ba(l.target.value),className:"w-full border rounded-xl px-4 py-2",children:[e.jsx("option",{value:"low",children:"‚ö™ ŸÖŸÜÿÆŸÅÿ∂ÿ©"}),e.jsx("option",{value:"medium",children:"üü° ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©"}),e.jsx("option",{value:"high",children:"üî¥ ÿπÿßŸÑŸäÿ©"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßÿ≥ÿ™ÿ≠ŸÇÿßŸÇ"}),e.jsx("input",{type:"date",value:Ir,onChange:l=>Va(l.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{We(!1),zs(""),_s(""),Ua(""),Ba("medium"),Va("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx("button",{onClick:async()=>{if(!He.trim()||!bt){t.error("Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿßŸÑÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©");return}Rr(!0);try{const l=f.find(V=>V.uid===bt);await Fe(te(S,"tasks"),{title:He.trim(),description:at.trim(),assignedTo:bt,assignedToName:(l==null?void 0:l.name)||(l==null?void 0:l.email)||"",status:"pending",priority:Ar,dueDate:Ir||null,createdBy:s==null?void 0:s.uid,createdAt:J(),updatedAt:J(),completedAt:null,notes:""}),t.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ© ÿ®ŸÜÿ¨ÿßÿ≠"),We(!1),zs(""),_s(""),Ua(""),Ba("medium"),Va(""),rs()}catch(l){console.error(l),t.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ©")}finally{Rr(!1)}},disabled:Dr,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:Dr?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°...":"ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ©"})]})]})})]}),c==="tools"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"üõ†Ô∏è ÿ£ÿØŸàÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"üìä ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>{const l={exportDate:new Date().toISOString(),users:f.length,restaurants:m.length,orders:L.length,admins:d.length,stats:I,settings:A},V=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),q=URL.createObjectURL(V),ae=document.createElement("a");ae.href=q,ae.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,ae.click(),t.success("ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üì•"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsx("p",{className:"text-xs opacity-75",children:"ÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸÑÿÆÿµ JSON"})]})]}),e.jsxs("button",{onClick:()=>{const l=[["ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®","ÿßŸÑŸÖÿ∑ÿπŸÖ","ÿßŸÑŸÖÿ®ŸÑÿ∫","ÿßŸÑÿ≠ÿßŸÑÿ©","ÿßŸÑÿ™ÿßÿ±ŸäÿÆ"].join(","),...L.map(de=>{var fe,ke,Re;return[de.id.slice(-8),de.restaurantName||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ",de.total,de.status,((Re=(ke=(fe=de.createdAt)==null?void 0:fe.toDate)==null?void 0:ke.call(fe))==null?void 0:Re.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),V=new Blob(["\uFEFF"+l],{type:"text/csv;charset=utf-8"}),q=URL.createObjectURL(V),ae=document.createElement("a");ae.href=q,ae.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,ae.click(),t.success("ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üìã"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("p",{className:"text-xs opacity-75",children:"ŸÖŸÑŸÅ CSV ŸÑŸÑÿ•ŸÉÿ≥ŸÑ"})]})]}),e.jsxs("button",{onClick:()=>{const l=[["ÿßŸÑÿßÿ≥ŸÖ","ÿßŸÑÿ•ŸäŸÖŸäŸÑ","ÿßŸÑÿØŸàÿ±","ÿßŸÑŸáÿßÿ™ŸÅ"].join(","),...f.map(de=>[de.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ",de.email,de.role,de.phone||""].join(","))].join(`
`),V=new Blob(["\uFEFF"+l],{type:"text/csv;charset=utf-8"}),q=URL.createObjectURL(V),ae=document.createElement("a");ae.href=q,ae.download=`users-${new Date().toISOString().split("T")[0]}.csv`,ae.click(),t.success("ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿ®ŸÜÿ¨ÿßÿ≠")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üë•"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ™ÿµÿØŸäÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),e.jsx("p",{className:"text-xs opacity-75",children:"ŸÖŸÑŸÅ CSV ŸÑŸÑÿ•ŸÉÿ≥ŸÑ"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"üîß ÿ£ÿØŸàÿßÿ™ ÿßŸÑÿµŸäÿßŸÜÿ©"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:async()=>{const l=L.filter(q=>q.status==="pending");if(l.length===0){t.info("ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿπŸÑŸÇÿ©");return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ${l.length} ÿ∑ŸÑÿ® ŸÖÿπŸÑŸÇ. ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØÿü`,{title:"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿπŸÑŸÇÿ©",dangerous:!0}))try{await Promise.all(l.map(q=>xe(X(S,"orders",q.id),{status:"cancelled",updatedAt:J()}))),t.success(`ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ${l.length} ÿ∑ŸÑÿ®`),rs()}catch{t.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"‚è≥"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿπŸÑŸÇÿ©"}),e.jsxs("p",{className:"text-xs opacity-75",children:[L.filter(l=>l.status==="pending").length," ÿ∑ŸÑÿ® ŸÖÿπŸÑŸÇ"]})]})]}),e.jsxs("button",{onClick:async()=>{const l=new Date;l.setMonth(l.getMonth()-3);const V=L.filter(ae=>{var fe,ke;return(((ke=(fe=ae.createdAt)==null?void 0:fe.toDate)==null?void 0:ke.call(fe))||new Date)<l&&(ae.status==="delivered"||ae.status==="cancelled")});if(V.length===0){t.info("ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ŸÇÿØŸäŸÖÿ©");return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ≠ÿ∞ŸÅ ${V.length} ÿ∑ŸÑÿ® ŸÇÿØŸäŸÖ (ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 3 ÿ£ÿ¥Ÿáÿ±). ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØÿü`,{title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÇÿØŸäŸÖÿ©",dangerous:!0}))try{await Promise.all(V.map(ae=>Ss(X(S,"orders",ae.id)))),t.success(`ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ${V.length} ÿ∑ŸÑÿ® ŸÇÿØŸäŸÖ`),rs()}catch{t.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üóëÔ∏è"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÇÿØŸäŸÖÿ©"}),e.jsx("p",{className:"text-xs opacity-75",children:"ÿ≠ÿ∞ŸÅ ÿ£ŸÇÿØŸÖ ŸÖŸÜ 3 ÿ£ÿ¥Ÿáÿ±"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"üîó ÿ±Ÿàÿßÿ®ÿ∑ ÿ≥ÿ±Ÿäÿπÿ©"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("a",{href:`https://console.firebase.google.com/project/${Fs.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üìä"}),e.jsx("span",{className:"font-semibold",children:"Firestore"})]}),e.jsxs("a",{href:`https://console.firebase.google.com/project/${Fs.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üîê"}),e.jsx("span",{className:"font-semibold",children:"Authentication"})]}),e.jsxs("a",{href:`https://console.firebase.google.com/project/${Fs.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üìÅ"}),e.jsx("span",{className:"font-semibold",children:"Storage"})]}),e.jsxs("a",{href:`https://console.firebase.google.com/project/${Fs.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üåê"}),e.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"‚ÑπÔ∏è ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Project ID"}),e.jsx("p",{className:"font-mono",children:Fs.projectId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),e.jsx("p",{className:"font-mono",children:Fs.storageBucket})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ÿ•ÿµÿØÿßÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsx("p",{className:"font-bold",children:A.appVersion||"1.0.0"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Ÿàÿ∂ÿπ ÿßŸÑÿµŸäÿßŸÜÿ©"}),e.jsx("p",{className:`font-bold ${A.maintenanceMode?"text-red-600":"text-green-600"}`,children:A.maintenanceMode?"üî¥ ŸÖŸÅÿπŸëŸÑ":"üü¢ ŸÖÿπÿ∑ŸëŸÑ"})]})]})]})]}),c==="licenses"&&e.jsx(ao,{restaurants:m,onUpdate:Ja,toast:t,dialog:n}),c==="packages"&&e.jsx(lo,{packageRequests:ft,onUpdate:Ja,toast:t,dialog:n,storage:i}),c==="packageSettings"&&e.jsx(no,{toast:t,dialog:n}),c==="storeAnalytics"&&e.jsx(ro,{restaurants:m,orders:L,toast:t}),c==="activityLog"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:["üìú ÿ≥ÿ¨ŸÑ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™",e.jsxs("span",{className:"text-sm bg-gray-200 px-3 py-1 rounded-full",children:[qa.length," ÿπŸÖŸÑŸäÿ©"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:Ha,onChange:l=>Wl(l.target.value),className:"border rounded-xl px-4 py-2",children:[e.jsx("option",{value:"all",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™"}),e.jsx("option",{value:"activate",children:"ÿ™ŸÅÿπŸäŸÑ"}),e.jsx("option",{value:"deactivate",children:"ÿ•ŸäŸÇÿßŸÅ"}),e.jsx("option",{value:"create",children:"ÿ•ŸÜÿ¥ÿßÿ°"}),e.jsx("option",{value:"update",children:"ÿ™ÿ≠ÿØŸäÿ´"}),e.jsx("option",{value:"delete",children:"ÿ≠ÿ∞ŸÅ"}),e.jsx("option",{value:"package_activate",children:"ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ©"}),e.jsx("option",{value:"package_cancel",children:"ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ©"}),e.jsx("option",{value:"role_change",children:"ÿ™ÿ∫ŸäŸäÿ± ÿØŸàÿ±"})]}),e.jsxs("button",{onClick:_r,disabled:za,className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:[za?"‚è≥":"üîÑ"," ÿ™ÿ≠ÿØŸäÿ´"]})]})]}),za?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-sky-200 border-t-sky-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ≥ÿ¨ŸÑ..."})]}):qa.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"üì≠ ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿπŸÖŸÑŸäÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ© ÿ®ÿπÿØ"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ¨ŸÖŸäÿπ ÿπŸÖŸÑŸäÿßÿ™ ÿßŸÑÿ™ŸÅÿπŸäŸÑ ŸàÿßŸÑÿ•ŸäŸÇÿßŸÅ ŸàÿßŸÑÿ™ÿπÿØŸäŸÑ ŸáŸÜÿß"})]}):e.jsx("div",{className:"space-y-3",children:qa.filter(l=>Ha==="all"||l.action===Ha).map(l=>e.jsx("div",{className:`bg-white rounded-xl shadow p-4 border-r-4 ${l.action==="activate"||l.action==="package_activate"?"border-green-500":l.action==="deactivate"||l.action==="package_cancel"||l.action==="delete"?"border-red-500":l.action==="create"?"border-blue-500":"border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${l.action==="activate"?"bg-green-100 text-green-700":l.action==="deactivate"?"bg-red-100 text-red-700":l.action==="create"?"bg-blue-100 text-blue-700":l.action==="update"?"bg-yellow-100 text-yellow-700":l.action==="delete"?"bg-red-100 text-red-700":l.action==="package_activate"?"bg-amber-100 text-amber-700":l.action==="package_cancel"?"bg-orange-100 text-orange-700":l.action==="role_change"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:[l.action==="activate"&&"‚úÖ ÿ™ŸÅÿπŸäŸÑ",l.action==="deactivate"&&"‚è∏Ô∏è ÿ•ŸäŸÇÿßŸÅ",l.action==="create"&&"‚ûï ÿ•ŸÜÿ¥ÿßÿ°",l.action==="update"&&"‚úèÔ∏è ÿ™ÿ≠ÿØŸäÿ´",l.action==="delete"&&"üóëÔ∏è ÿ≠ÿ∞ŸÅ",l.action==="package_activate"&&"‚ú® ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ©",l.action==="package_cancel"&&"üì¶ ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ©",l.action==="role_change"&&"üîÑ ÿ™ÿ∫ŸäŸäÿ± ÿØŸàÿ±"]}),e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:[l.targetType==="user"&&"üë§ ŸÖÿ≥ÿ™ÿÆÿØŸÖ",l.targetType==="restaurant"&&"üè™ ŸÖÿ∑ÿπŸÖ",l.targetType==="order"&&"üì¶ ÿ∑ŸÑÿ®",l.targetType==="package"&&"üíé ÿ®ÿßŸÇÿ©",l.targetType==="settings"&&"‚öôÔ∏è ÿ•ÿπÿØÿßÿØÿßÿ™"]})]}),e.jsx("p",{className:"font-bold text-gray-800",children:l.targetName||l.targetId}),l.details&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.details}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["ÿ®Ÿàÿßÿ≥ÿ∑ÿ©: ",l.performedByName||"ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"]})]}),e.jsx("div",{className:"text-left text-xs text-gray-400 whitespace-nowrap",children:l.createdAt?new Date(l.createdAt).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]})},l.id))})]}),e.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[e.jsxs("span",{children:["üìß ",s==null?void 0:s.email]}),e.jsxs("span",{children:["üÜî ",s==null?void 0:s.uid.slice(0,12),"..."]}),e.jsxs("span",{children:["üìÖ ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},ao=({restaurants:s,onUpdate:t,toast:n,dialog:i})=>{const[c,y]=a.useState("pending"),[r,k]=a.useState({}),[$,M]=a.useState(null),[I,N]=a.useState(""),[A,p]=a.useState(null),[f,_]=a.useState(new Set),[m,j]=a.useState(""),[L,g]=a.useState([]),[d,h]=a.useState(!1),[F,D]=a.useState(!1);a.useEffect(()=>{c==="sent_messages"&&L.length===0&&b()},[c]);const b=async()=>{h(!0);try{const R=pe(te(S,"notifications"),be("type","==","license_reminder"),as("createdAt","desc"),ks(100)),v=(await ue(R)).docs.map(H=>{var Y,ce;return{id:H.id,...H.data(),createdAt:((ce=(Y=H.data().createdAt)==null?void 0:Y.toDate)==null?void 0:ce.call(Y))||null}});g(v)}catch(R){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ:",R),n.warning("ÿ™ÿ≠ÿ™ÿßÿ¨ ŸÑÿ•ŸÜÿ¥ÿßÿ° ŸÅŸáÿ±ÿ≥ ŸÖÿ±ŸÉÿ® ŸÑŸÄ notifications (type + createdAt)")}finally{h(!1)}},E=s.filter(R=>R.commercialLicenseUrl),o=s.filter(R=>!R.commercialLicenseUrl),w=E.filter(R=>c==="all"?!0:c==="missing"||c==="sent_messages"?!1:R.licenseStatus===c||!R.licenseStatus&&c==="pending"),U={all:E.length,pending:E.filter(R=>!R.licenseStatus||R.licenseStatus==="pending").length,approved:E.filter(R=>R.licenseStatus==="approved").length,rejected:E.filter(R=>R.licenseStatus==="rejected").length,missing:o.length,sent_messages:L.length},B=async(R,u)=>{if(!u.trim()){n.warning("Ÿäÿ±ÿ¨Ÿâ ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");return}p(R.id);try{await Fe(te(S,"notifications"),{type:"license_reminder",recipientId:R.ownerId,recipientType:"owner",restaurantId:R.id,restaurantName:R.name,title:"‚ö†Ô∏è ÿ™ÿ∞ŸÉŸäÿ±: ÿ±ŸÅÿπ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä",message:u,read:!1,createdAt:J()}),n.success(`ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÄ ${R.name}`),N("")}catch(v){n.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©: "+(v.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{p(null)}},Q=async()=>{if(!m.trim()){n.warning("Ÿäÿ±ÿ¨Ÿâ ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");return}const R=f.size>0?o.filter(v=>f.has(v.id)):o;if(R.length===0){n.warning("ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");return}if(await i.confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÄ ${R.length} ŸÖÿ∑ÿπŸÖÿü`,{title:"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ÿ¨ŸÖÿßÿπŸäÿ©"})){D(!0);try{const v=R.map(H=>Fe(te(S,"notifications"),{type:"license_reminder",recipientId:H.ownerId,recipientType:"owner",restaurantId:H.id,restaurantName:H.name,title:"‚ö†Ô∏è ÿ™ÿ∞ŸÉŸäÿ±: ÿ±ŸÅÿπ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä",message:m,read:!1,createdAt:J()}));await Promise.all(v),n.success(`ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÄ ${R.length} ŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úì`),j(""),_(new Set)}catch(v){n.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ÿπÿ∂ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ: "+(v.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{D(!1)}}},O=()=>{f.size===o.length?_(new Set):_(new Set(o.map(R=>R.id)))},C=R=>{const u=new Set(f);u.has(R)?u.delete(R):u.add(R),_(u)},P=async(R,u)=>{const v=r[R]||"";if(u==="rejected"&&!v.trim()){n.warning("Ÿäÿ±ÿ¨Ÿâ ŸÉÿ™ÿßÿ®ÿ© ÿ≥ÿ®ÿ® ÿßŸÑÿ±ŸÅÿ∂");return}const H=u==="approved"?"ÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ":"ÿ±ŸÅÿ∂";if(await i.confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ${H} ÿ™ÿ±ÿßÿÆŸäÿµ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖÿü`,{title:`${H} ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ`})){M(R);try{await xe(X(S,"restaurants",R),{licenseStatus:u,licenseNotes:u==="rejected"?v:"",updatedAt:J()}),n.success(u==="approved"?"ÿ™ŸÖÿ™ ÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ ‚úì":"ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ"),k(ce=>({...ce,[R]:""})),t()}catch(ce){n.error("ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´: "+(ce.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{M(null)}}},x=async(R,u)=>{const v="ÿßŸÑÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä";if(await i.confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ ${v} ŸÑŸÄ "${R.name}"ÿü
ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑŸÖÿ∑ÿπŸÖ ŸÑÿ•ÿπÿßÿØÿ© ÿ±ŸÅÿπ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ.`,{title:`üóëÔ∏è ÿ≠ÿ∞ŸÅ ${v}`})){M(R.id);try{const Y={licenseStatus:null,licenseNotes:"",updatedAt:J(),commercialLicenseUrl:null};await xe(X(S,"restaurants",R.id),Y),await Fe(te(S,"notifications"),{type:"license_deleted",recipientId:R.ownerId,recipientType:"owner",restaurantId:R.id,restaurantName:R.name,title:`‚ö†Ô∏è ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ${v}`,message:`ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ${v} ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÖÿ∑ÿπŸÖŸÉ. Ÿäÿ±ÿ¨Ÿâ ÿ•ÿπÿßÿØÿ© ÿ±ŸÅÿπ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ÿßŸÑÿµÿ≠Ÿäÿ≠ ŸÖŸÜ ÿµŸÅÿ≠ÿ© ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ.`,read:!1,createdAt:J()}),n.success(`ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ${v} Ÿàÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑŸÖÿ∑ÿπŸÖ ‚úì`),t()}catch(Y){n.error("ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ: "+(Y.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{M(null)}}},z=R=>{switch(R){case"approved":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[e.jsx(De,{className:"w-3 h-3"})," ŸÖŸàÿßŸÅŸÇ"]});case"rejected":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:[e.jsx(Cs,{className:"w-3 h-3"})," ŸÖÿ±ŸÅŸàÿ∂"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[e.jsx(Ye,{className:"w-3 h-3"})," ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"]})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(hr,{className:"w-6 h-6 text-sky-500"}),"ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ"]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["pending","approved","rejected","all","missing","sent_messages"].map(R=>e.jsxs("button",{onClick:()=>y(R),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${c===R?R==="missing"?"bg-orange-500 text-white":R==="sent_messages"?"bg-purple-500 text-white":"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[R==="all"&&`ÿßŸÑŸÉŸÑ (${U.all})`,R==="pending"&&`ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© (${U.pending})`,R==="approved"&&`ŸÖŸàÿßŸÅŸÇ (${U.approved})`,R==="rejected"&&`ŸÖÿ±ŸÅŸàÿ∂ (${U.rejected})`,R==="missing"&&`‚ö†Ô∏è ŸÑŸÖ Ÿäÿ±ŸÅÿπ (${U.missing})`,R==="sent_messages"&&"üì® ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ©"]},R))})]}),c==="sent_messages"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-purple-700 flex items-center gap-2",children:"üì® ÿ≥ÿ¨ŸÑ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ© ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ"}),e.jsx("button",{onClick:b,disabled:d,className:"px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-xl font-medium transition disabled:opacity-50",children:d?"‚è≥ ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...":"üîÑ ÿ™ÿ≠ÿØŸäÿ´"})]}),d?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-purple-200 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ..."})]}):L.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ±ÿ≥ÿßÿ¶ŸÑ ŸÖÿ±ÿ≥ŸÑÿ© ÿ®ÿπÿØ"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ™Ÿä ÿ™ÿ±ÿ≥ŸÑŸáÿß ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ ÿ≥ÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß"})]}):e.jsx("div",{className:"space-y-3",children:L.map(R=>e.jsx("div",{className:"bg-white rounded-xl shadow p-4 border-r-4 border-purple-500",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold text-gray-800",children:R.restaurantName||"ŸÖÿ∑ÿπŸÖ"}),R.read?e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"‚úì ŸÖŸÇÿ±Ÿàÿ°ÿ©"}):e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full",children:"‚è≥ ŸÑŸÖ ÿ™ŸèŸÇÿ±ÿ£"})]}),e.jsx("p",{className:"text-sm text-gray-600 font-semibold mb-1",children:R.title}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 p-3 rounded-lg",children:R.message})]}),e.jsx("div",{className:"text-left text-xs text-gray-400 whitespace-nowrap",children:R.createdAt?new Date(R.createdAt).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]})},R.id))})]}),c==="missing"&&e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(De,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),e.jsx("p",{className:"text-green-600 font-semibold",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿ±ŸÅÿπÿ™ ÿ™ÿ±ÿßÿÆŸäÿµŸáÿß ‚úì"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-2xl p-5",children:[e.jsx("h3",{className:"font-bold text-orange-800 mb-3 flex items-center gap-2",children:"üì¢ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ÿ¨ŸÖÿßÿπŸäÿ©"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.size===o.length,onChange:O,className:"w-5 h-5 rounded border-orange-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("span",{className:"text-sm text-orange-700",children:["ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÉŸÑ (",o.length,")"]})]}),f.size>0&&e.jsxs("span",{className:"text-sm bg-orange-200 text-orange-800 px-2 py-1 rounded-full",children:["ŸÖÿ≠ÿØÿØ: ",f.size]})]}),e.jsx("textarea",{placeholder:"ÿßŸÉÿ™ÿ® ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ™Ÿä ÿ≥ÿ™ÿ±ÿ≥ŸÑ ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ≠ÿØÿØÿ© (ÿ£Ÿà ÿ¨ŸÖŸäÿπŸáÿß ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™ÿ≠ÿØÿØ)...",value:m,onChange:R=>j(R.target.value),className:"w-full border border-orange-200 rounded-xl p-3 text-sm resize-none h-24 focus:ring-2 focus:ring-orange-400 focus:border-transparent"}),e.jsx("button",{onClick:Q,disabled:F||!m.trim(),className:"mt-3 w-full flex items-center justify-center gap-2 bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:F?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ..."]}):e.jsxs(e.Fragment,{children:["üì§ ÿ•ÿ±ÿ≥ÿßŸÑ ŸÑŸÄ ",f.size>0?f.size:o.length," ŸÖÿ∑ÿπŸÖ"]})})]}),e.jsx("div",{className:"grid gap-3",children:o.map(R=>e.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow-sm hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:f.has(R.id),onChange:()=>C(R.id),className:"w-5 h-5 mt-1 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:R.name}),e.jsx("p",{className:"text-sm text-gray-500",children:R.city||"ÿ®ÿØŸàŸÜ ŸÖÿØŸäŸÜÿ©"})]}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-semibold",children:[e.jsx(Cs,{className:"w-3 h-3"}),"ŸÑŸÖ Ÿäÿ±ŸÅÿπ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[R.email&&e.jsxs("span",{children:["üìß ",R.email]}),R.phone&&e.jsxs("span",{children:["üì± ",R.phone]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"ÿ±ÿ≥ÿßŸÑÿ© ÿ≥ÿ±Ÿäÿπÿ©...",value:A===R.id?I:"",onChange:u=>{p(R.id),N(u.target.value)},onFocus:()=>p(R.id),className:"flex-1 border rounded-lg px-3 py-2 text-sm"}),e.jsx("button",{onClick:()=>B(R,I),disabled:A===R.id&&!I.trim(),className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg text-sm font-medium transition disabled:opacity-50",children:"ÿ•ÿ±ÿ≥ÿßŸÑ"})]})]})]})},R.id))})]})}),c!=="missing"&&w.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(hr,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsxs("p",{children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿ±ÿßÿÆŸäÿµ ",c==="pending"?"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©":c==="approved"?"ŸÖŸàÿßŸÅŸÇ ÿπŸÑŸäŸáÿß":c==="rejected"?"ŸÖÿ±ŸÅŸàÿ∂ÿ©":""]})]}):c!=="missing"&&e.jsx("div",{className:"grid gap-4",children:w.map(R=>e.jsxs("div",{className:"bg-white border rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:R.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[R.city||"ÿ®ÿØŸàŸÜ ŸÖÿØŸäŸÜÿ©"," ‚Ä¢ ",R.email||"ÿ®ÿØŸàŸÜ ÿ®ÿ±ŸäÿØ"]})]}),z(R.licenseStatus)]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:R.commercialLicenseUrl&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"üìú ÿßŸÑÿ±ÿÆÿµÿ© ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©"}),e.jsx("button",{onClick:()=>x(R),disabled:$===R.id,className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ±ÿÆÿµÿ© ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©",children:e.jsx(fs,{className:"w-4 h-4"})})]}),e.jsxs("a",{href:R.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[e.jsx(ur,{className:"w-4 h-4"}),"ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÑŸÅ"]})]})}),R.commercialLicenseUrl&&e.jsxs("button",{onClick:()=>x(R),disabled:$===R.id,className:"w-full flex items-center justify-center gap-2 mb-4 py-2 px-4 border-2 border-dashed border-red-200 text-red-500 hover:bg-red-50 hover:border-red-300 rounded-xl text-sm font-medium transition",children:[e.jsx(fs,{className:"w-4 h-4"}),"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä Ÿàÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ®"]}),R.licenseStatus==="rejected"&&R.licenseNotes&&e.jsxs("div",{className:"bg-red-50 text-red-700 rounded-xl p-3 mb-4 text-sm",children:[e.jsx("strong",{children:"ÿ≥ÿ®ÿ® ÿßŸÑÿ±ŸÅÿ∂:"})," ",R.licenseNotes]}),R.licenseStatus!=="approved"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{placeholder:"ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ (ŸÖÿ∑ŸÑŸàÿ®ÿ© ŸÑŸÑÿ±ŸÅÿ∂)...",value:r[R.id]||"",onChange:u=>k(v=>({...v,[R.id]:u.target.value})),className:"w-full border rounded-xl p-3 text-sm resize-none h-20"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>P(R.id,"approved"),disabled:$===R.id,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(De,{className:"w-5 h-5"}),"ŸÖŸàÿßŸÅŸÇÿ©"]}),e.jsxs("button",{onClick:()=>P(R.id,"rejected"),disabled:$===R.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(Cs,{className:"w-5 h-5"}),"ÿ±ŸÅÿ∂"]})]})]}),R.licenseStatus==="approved"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{placeholder:"ÿ≥ÿ®ÿ® ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©...",value:r[R.id]||"",onChange:u=>k(v=>({...v,[R.id]:u.target.value})),className:"w-full border border-yellow-200 rounded-xl p-3 text-sm resize-none h-20 focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>P(R.id,"rejected"),disabled:$===R.id,className:"flex-1 flex items-center justify-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(Cs,{className:"w-5 h-5"}),"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©"]}),e.jsxs("button",{onClick:()=>x(R),disabled:$===R.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(fs,{className:"w-5 h-5"}),"ÿ≠ÿ∞ŸÅ Ÿàÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ®"]})]})]})]},R.id))})]})},ro=({restaurants:s,orders:t,toast:n})=>{var N,A,p,f;const[i,c]=a.useState(null),[y,r]=a.useState({}),[k,$]=a.useState(!1),M=async _=>{var m;$(!0);try{const j=await Ce(X(S,"restaurantStats",_)),L=j.exists()?j.data():null,g=t.filter(w=>w.restaurantId===_),d=g.filter(w=>w.status==="delivered"),h=pe(te(S,"menuItems"),be("ownerId","==",_)),F=await ue(h);let D=0;try{const w=pe(te(S,"customerRegistrations"),be("restaurantId","==",_));D=(await ue(w)).size}catch{}const b=d.reduce((w,U)=>w+(U.total||0),0),E=new Date().toISOString().split("T")[0],o=((m=L==null?void 0:L.dailyViews)==null?void 0:m[E])||0;r(w=>({...w,[_]:{totalOrders:g.length,deliveredOrders:d.length,totalRevenue:b,menuItemsCount:F.size,profileViews:(L==null?void 0:L.totalProfileViews)||0,menuViews:(L==null?void 0:L.totalMenuViews)||0,itemViews:(L==null?void 0:L.totalItemViews)||0,shareClicks:(L==null?void 0:L.totalShareClicks)||0,whatsappShares:(L==null?void 0:L.whatsappShareCount)||0,registeredCustomers:D,todayViews:o,dailyViews:(L==null?void 0:L.dailyViews)||{}}}))}catch(j){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿ™ÿ¨ÿ±:",j),n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{$(!1)}},I=_=>{c(_),y[_]||M(_)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"üìà ŸÖÿ±ÿßŸÇÿ®ÿ© ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ¨ÿ±"}),e.jsxs("span",{className:"text-gray-500",children:[s.length," ŸÖÿ™ÿ¨ÿ±"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(_=>{const m=y[_.id];return e.jsxs("div",{onClick:()=>I(_.id),className:`bg-white rounded-2xl shadow p-4 cursor-pointer transition hover:shadow-lg ${i===_.id?"ring-2 ring-sky-500":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[_.logoUrl?e.jsx("img",{src:_.logoUrl,alt:_.name,className:"w-12 h-12 rounded-xl object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center",children:"üè™"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:_.name}),e.jsx("p",{className:"text-xs text-gray-500",children:_.city||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"})]})]}),m&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-blue-700",children:m.profileViews}),e.jsx("p",{className:"text-blue-600",children:"ÿ≤Ÿäÿßÿ±ÿ©"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-green-700",children:m.deliveredOrders}),e.jsx("p",{className:"text-green-600",children:"ÿ∑ŸÑÿ®"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-purple-700",children:m.whatsappShares}),e.jsx("p",{className:"text-purple-600",children:"ŸÖÿ¥ÿßÿ±ŸÉÿ©"})]})]})]},_.id)})}),i&&e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:k?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qe,{className:"w-8 h-8 animate-spin mx-auto text-sky-500"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."})]}):y[i]?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(N=s.find(_=>_.id===i))!=null&&N.logoUrl?e.jsx("img",{src:(A=s.find(_=>_.id===i))==null?void 0:A.logoUrl,alt:"",className:"w-16 h-16 rounded-xl object-cover"}):e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-xl flex items-center justify-center text-2xl",children:"üè™"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:(p=s.find(_=>_.id===i))==null?void 0:p.name}),e.jsx("p",{className:"text-gray-500",children:(f=s.find(_=>_.id===i))==null?void 0:f.city})]})]}),e.jsx("button",{onClick:()=>M(i),className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-xl",children:e.jsx(qe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-700",children:y[i].profileViews}),e.jsx("p",{className:"text-sm text-blue-600",children:"ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿµŸÅÿ≠ÿ©"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-green-700",children:y[i].todayViews}),e.jsx("p",{className:"text-sm text-green-600",children:"ÿ≤Ÿäÿßÿ±ÿßÿ™ ÿßŸÑŸäŸàŸÖ"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-700",children:y[i].whatsappShares}),e.jsx("p",{className:"text-sm text-purple-600",children:"ŸÖÿ¥ÿßÿ±ŸÉÿ© Ÿàÿßÿ™ÿ≥ÿßÿ®"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-amber-700",children:y[i].shareClicks}),e.jsx("p",{className:"text-sm text-amber-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿßÿ™"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:y[i].totalOrders}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:y[i].deliveredOrders}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ∑ŸÑÿ®ÿßÿ™ ŸÖŸÉÿ™ŸÖŸÑÿ©"})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:y[i].totalRevenue.toFixed(0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ (ÿ±.ÿ≥)"})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:y[i].menuItemsCount}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿπÿØÿØ ÿßŸÑÿ£ÿµŸÜÿßŸÅ"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-indigo-800 mb-2",children:"üë• ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑÿßÿ™ ÿπÿ®ÿ± ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:y[i].registeredCustomers}),e.jsx("p",{className:"text-xs text-indigo-500",children:"ÿπŸÖŸäŸÑ ÿ≥ÿ¨ŸÑ ÿπÿ®ÿ± ÿßŸÑÿ±ÿßÿ®ÿ∑"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:y[i].itemViews}),e.jsx("p",{className:"text-xs text-purple-500",children:"ŸÖÿ¥ÿßŸáÿØÿßÿ™ ÿßŸÑÿ£ÿµŸÜÿßŸÅ"})]})]})]}),Object.keys(y[i].dailyViews||{}).length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"üìä ÿßŸÑÿ≤Ÿäÿßÿ±ÿßÿ™ ÿßŸÑŸäŸàŸÖŸäÿ© (ÿ¢ÿÆÿ± 7 ÿ£ŸäÿßŸÖ)"}),e.jsx("div",{className:"flex items-end gap-2 h-32",children:(()=>{const _=y[i].dailyViews||{},m=[];for(let L=6;L>=0;L--){const g=new Date;g.setDate(g.getDate()-L);const d=g.toISOString().split("T")[0];m.push({date:d,views:_[d]||0})}const j=Math.max(...m.map(L=>L.views),1);return m.map((L,g)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full bg-sky-500 rounded-t",style:{height:`${L.views/j*100}%`,minHeight:L.views>0?"4px":"0"}}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(L.date).toLocaleDateString("ar-SA",{weekday:"short"})}),e.jsx("span",{className:"text-xs font-bold",children:L.views})]},L.date))})()})]})]}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ŸÖÿ™ÿ¨ÿ± ŸÑÿπÿ±ÿ∂ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™Ÿá"})})]})},lo=({packageRequests:s,onUpdate:t,toast:n,dialog:i,storage:c})=>{const[y,r]=a.useState("all"),[k,$]=a.useState(null),[M,I]=a.useState(null),[N,A]=a.useState(99),[p,f]=a.useState(null),[_,m]=a.useState(null),[j,L]=a.useState(""),[g,d]=a.useState(null),h=async(O,C)=>{if(!C.trim()){n.warning("Ÿäÿ±ÿ¨Ÿâ ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");return}m(O.id);try{await Fe(te(S,"notifications"),{recipientId:O.restaurantId,title:"üì¨ ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸÜ ÿßŸÑÿ•ÿØÿßÿ±ÿ©",message:C.trim(),type:"admin_message",read:!1,data:{requestId:O.id},createdAt:J()}),n.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ÿ®ŸÜÿ¨ÿßÿ≠! üì¨"),d(null),L("")}catch(P){n.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ: ${P.message}`)}finally{m(null)}},F=s.filter(O=>y==="all"?!0:O.status===y),D=s.filter(O=>O.status==="pending").length,b=s.filter(O=>O.status==="bank_sent").length,E=s.filter(O=>O.status==="payment_sent").length,o=s.filter(O=>O.status==="approved").length,w=O=>{switch(O){case"pending":return{label:"ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ",color:"bg-yellow-100 text-yellow-700",icon:"‚è≥"};case"bank_sent":return{label:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ",color:"bg-blue-100 text-blue-700",icon:"üè¶"};case"payment_sent":return{label:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ£ŸÉŸäÿØ",color:"bg-purple-100 text-purple-700",icon:"üí≥"};case"approved":return{label:"ŸÖŸÅÿπŸëŸÑ",color:"bg-green-100 text-green-700",icon:"‚úÖ"};case"rejected":return{label:"ŸÖÿ±ŸÅŸàÿ∂",color:"bg-red-100 text-red-700",icon:"‚ùå"};case"expired":return{label:"ŸÖŸÜÿ™ŸáŸä",color:"bg-gray-100 text-gray-700",icon:"‚è∞"};default:return{label:O,color:"bg-gray-100",icon:"üì¶"}}},U=async O=>{if(!M){n.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä");return}$(O);try{const C=`bankAccounts/${Date.now()}_${M.name}`,P=js(c,C);await ot(P,M);const x=await ys(P);await xe(X(S,"packageRequests",O),{status:"bank_sent",bankAccountImageUrl:x,subscriptionAmount:N,bankSentAt:J(),updatedAt:J()});const z=s.find(R=>R.id===O);z&&await Fe(te(S,"notifications"),{recipientId:z.restaurantId,title:"üè¶ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä",message:`Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿ®ŸÑÿ∫ ${N} ÿ±ŸäÿßŸÑ ÿ´ŸÖ ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ`,type:"package_bank_sent",read:!1,data:{requestId:O,amount:N},createdAt:J()}),n.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä ÿ®ŸÜÿ¨ÿßÿ≠"),I(null),f(null),t()}catch(C){n.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ: ${C.message}`)}finally{$(null)}},B=async O=>{if(await i.confirm(`ŸáŸÑ ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖÿ®ŸÑÿ∫ ${O.subscriptionAmount} ÿ±ŸäÿßŸÑ Ÿàÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÄ "${O.restaurantName}"ÿü`,{title:"‚úÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿØŸÅÿπ Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ©",confirmText:"ŸÜÿπŸÖÿå ŸÅÿπŸëŸÑ ÿßŸÑÿ®ÿßŸÇÿ©"})){$(O.id);try{const P=new Date;P.setDate(P.getDate()+(O.subscriptionDuration||30)),await xe(X(S,"packageRequests",O.id),{status:"approved",approvedAt:J(),expiresAt:P,updatedAt:J()}),await xe(X(S,"restaurants",O.restaurantId),{packageType:"premium",packageSubscribedAt:J(),packageExpiresAt:P,packageRequest:null,updatedAt:J()}),await Fe(te(S,"notifications"),{recipientId:O.restaurantId,title:"üéâ ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤!",message:`ŸÖÿ®ÿ±ŸàŸÉ! ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ÿ≠ÿ™Ÿâ ${P.toLocaleDateString("ar-SA")}`,type:"package_approved",read:!1,data:{requestId:O.id},createdAt:J()}),n.success("ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ© ÿ®ŸÜÿ¨ÿßÿ≠! üéâ"),t()}catch(P){n.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ™ŸÅÿπŸäŸÑ: ${P.message}`)}finally{$(null)}}},Q=async O=>{if(await i.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ±ŸÅÿ∂ ÿ∑ŸÑÿ® "${O.restaurantName}"ÿü`,{title:"‚ùå ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®",confirmText:"ŸÜÿπŸÖÿå ÿßÿ±ŸÅÿ∂",dangerous:!0})){$(O.id);try{await xe(X(S,"packageRequests",O.id),{status:"rejected",rejectedAt:J(),updatedAt:J()}),await Fe(te(S,"notifications"),{recipientId:O.restaurantId,title:"‚ùå ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ∑ŸÑÿ® ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ",message:"ŸÑŸÑÿ£ÿ≥ŸÅ ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤. ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ŸÑŸÖÿπÿ±ŸÅÿ© ÿßŸÑÿ≥ÿ®ÿ®.",type:"package_rejected",read:!1,createdAt:J()}),n.success("ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®"),t()}catch(P){n.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ±ŸÅÿ∂: ${P.message}`)}finally{$(null)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-8 h-8 text-amber-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿßŸÑÿ®ÿßŸÇÿßÿ™"}),e.jsx("p",{className:"text-gray-600",children:"ÿ•ÿØÿßÿ±ÿ© ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ŸÑŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center border border-yellow-200",children:[e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:D}),e.jsx("p",{className:"text-sm text-yellow-700",children:"‚è≥ ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center border border-blue-200",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:b}),e.jsx("p",{className:"text-sm text-blue-700",children:"üè¶ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 text-center border border-purple-200",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:E}),e.jsx("p",{className:"text-sm text-purple-700",children:"üí≥ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ£ŸÉŸäÿØ"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center border border-green-200",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:o}),e.jsx("p",{className:"text-sm text-green-700",children:"‚úÖ ŸÖŸÅÿπŸëŸÑ"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"all",label:"ÿßŸÑŸÉŸÑ"},{id:"pending",label:"‚è≥ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ©"},{id:"bank_sent",label:"üè¶ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"},{id:"payment_sent",label:"üí≥ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ£ŸÉŸäÿØ"},{id:"approved",label:"‚úÖ ŸÖŸÅÿπŸëŸÑÿ©"},{id:"rejected",label:"‚ùå ŸÖÿ±ŸÅŸàÿ∂ÿ©"}].map(O=>e.jsx("button",{onClick:()=>r(O.id),className:`px-4 py-2 rounded-xl font-semibold transition ${y===O.id?"bg-amber-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:O.label},O.id))}),F.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-2xl",children:[e.jsx(Oe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-500 text-lg",children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ",y!=="all"&&"ÿ®Ÿáÿ∞Ÿá ÿßŸÑÿ≠ÿßŸÑÿ©"]})]}):e.jsx("div",{className:"space-y-4",children:F.map(O=>{var P,x,z,R,u,v,H,Y,ce,ie,je,ge;const C=w(O.status);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center text-2xl",children:"üë®‚Äçüç≥"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:O.restaurantName}),e.jsxs("p",{className:"text-white/80 text-sm",children:[O.ownerName||"ÿµÿßÿ≠ÿ® ÿßŸÑÿ£ÿ≥ÿ±ÿ©"," ‚Ä¢ ",O.ownerPhone||"ÿ®ÿØŸàŸÜ ÿ±ŸÇŸÖ"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[O.ownerPhone&&e.jsx("a",{href:`https://wa.me/${O.ownerPhone.replace(/[^0-9]/g,"").replace(/^0/,"966")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-xl text-sm font-semibold transition",children:"üì± Ÿàÿßÿ™ÿ≥ÿßÿ®"}),e.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${C.color}`,children:[C.icon," ",C.label]})]})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsx("p",{className:"font-semibold",children:((z=(x=(P=O.requestedAt)==null?void 0:P.toDate)==null?void 0:x.call(P))==null?void 0:z.toLocaleDateString("ar-SA"))||((v=(u=(R=O.createdAt)==null?void 0:R.toDate)==null?void 0:u.call(R))==null?void 0:v.toLocaleDateString("ar-SA"))||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ÿßŸÑŸÖÿ®ŸÑÿ∫"}),e.jsxs("p",{className:"font-semibold text-green-600",children:[O.subscriptionAmount||99," ÿ±.ÿ≥"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ÿßŸÑŸÖÿØÿ©"}),e.jsxs("p",{className:"font-semibold",children:[O.subscriptionDuration||30," ŸäŸàŸÖ"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ŸÖÿπÿ±ŸÅ ÿßŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsxs("p",{className:"font-mono text-xs",children:[O.restaurantId.slice(0,12),"..."]})]})]}),e.jsx("div",{className:"border-t pt-4",children:g===O.id?e.jsxs("div",{className:"space-y-3 bg-sky-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-sky-600",children:"üì¨ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsx("textarea",{value:j,onChange:T=>L(T.target.value),placeholder:"ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ŸáŸÜÿß...",className:"w-full border rounded-lg p-3 resize-none",rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(O,j),disabled:_===O.id||!j.trim(),className:"flex-1 bg-sky-500 hover:bg-sky-600 text-white py-2 rounded-xl font-semibold disabled:opacity-50",children:_===O.id?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...":"üì¨ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©"}),e.jsx("button",{onClick:()=>{d(null),L("")},className:"px-4 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}):e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>d(O.id),className:"flex items-center gap-2 bg-sky-100 hover:bg-sky-200 text-sky-700 px-4 py-2 rounded-xl font-semibold transition",children:"üì¨ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ©"}),O.ownerPhone&&e.jsx("a",{href:`https://wa.me/${O.ownerPhone.replace(/[^0-9]/g,"").replace(/^0/,"966")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-xl font-semibold transition",children:"üì± Ÿàÿßÿ™ÿ≥ÿßÿ®"}),!O.ownerPhone&&e.jsx("span",{className:"text-gray-400 text-sm self-center",children:"‚ö†Ô∏è ŸÑÿß ŸäŸàÿ¨ÿØ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ"})]})}),O.status==="pending"&&e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsx("h4",{className:"font-bold text-amber-600",children:"üì§ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"}),p===O.id?e.jsxs("div",{className:"space-y-3 bg-amber-50 p-4 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿµŸàÿ±ÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä (IBAN)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:T=>{var se;return I(((se=T.target.files)==null?void 0:se[0])||null)},className:"w-full border rounded-lg p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ (ÿ±ŸäÿßŸÑ)"}),e.jsx("input",{type:"number",value:N,onChange:T=>A(Number(T.target.value)),className:"w-full border rounded-lg p-2",min:1})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>U(O.id),disabled:k===O.id||!M,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white py-2 rounded-xl font-semibold disabled:opacity-50",children:k===O.id?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...":"üì§ ÿ•ÿ±ÿ≥ÿßŸÑ ŸÑŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsx("button",{onClick:()=>{f(null),I(null)},className:"px-4 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(O.id),className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white py-3 rounded-xl font-semibold",children:"üè¶ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ®ŸÜŸÉ"}),e.jsx("button",{onClick:()=>Q(O),disabled:k===O.id,className:"px-6 bg-red-100 hover:bg-red-200 text-red-700 rounded-xl font-semibold",children:"‚ùå ÿ±ŸÅÿ∂"})]})]}),O.status==="bank_sent"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-blue-700 font-semibold mb-2",children:"üè¶ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"}),e.jsxs("p",{className:"text-blue-600 text-sm",children:["ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿ®ŸÑÿ∫ ",O.subscriptionAmount," ÿ±ŸäÿßŸÑ ŸÖŸÜ ÿßŸÑÿ£ÿ≥ÿ±ÿ©"]}),O.bankAccountImageUrl&&e.jsxs("a",{href:O.bankAccountImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline mt-2 text-sm",children:[e.jsx(ur,{className:"w-4 h-4"}),"ÿπÿ±ÿ∂ ÿµŸàÿ±ÿ© ÿßŸÑÿ®ŸÜŸÉ ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ©"]})]})}),O.status==="payment_sent"&&e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-purple-700 font-semibold mb-2",children:"üí≥ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿ£ÿ±ÿ≥ŸÑÿ™ ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"}),O.paymentProofImageUrl&&e.jsxs("a",{href:O.paymentProofImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg text-purple-600 hover:bg-purple-100 transition",children:[e.jsx(ur,{className:"w-5 h-5"}),"ÿπÿ±ÿ∂ ÿµŸàÿ±ÿ© ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>B(O),disabled:k===O.id,className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-bold disabled:opacity-50",children:k===O.id?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ŸÅÿπŸäŸÑ...":"‚úÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿØŸÅÿπ Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ©"}),e.jsx("button",{onClick:()=>Q(O),disabled:k===O.id,className:"px-6 bg-red-100 hover:bg-red-200 text-red-700 rounded-xl font-semibold",children:"‚ùå ÿ±ŸÅÿ∂"})]})]}),O.status==="approved"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl flex items-center gap-3",children:[e.jsx(De,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 font-semibold",children:"‚úÖ ÿßŸÑÿ®ÿßŸÇÿ© ŸÖŸÅÿπŸëŸÑÿ©"}),e.jsxs("p",{className:"text-green-600 text-sm",children:["ÿ™ŸÜÿ™ŸáŸä ŸÅŸä: ",((ce=(Y=(H=O.expiresAt)==null?void 0:H.toDate)==null?void 0:Y.call(H))==null?void 0:ce.toLocaleDateString("ar-SA"))||"-"]})]})]})}),O.status==="rejected"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-red-700 font-semibold",children:"‚ùå ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsxs("p",{className:"text-red-600 text-sm",children:["ÿ®ÿ™ÿßÿ±ŸäÿÆ: ",((ge=(je=(ie=O.rejectedAt)==null?void 0:ie.toDate)==null?void 0:je.call(ie))==null?void 0:ge.toLocaleDateString("ar-SA"))||"-"]})]})})]})]},O.id)})})]})},ba={premium:{displayName:"ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",description:"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ© Ÿàÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ©",isEnabled:!0,originalPrice:99,currentPrice:99,durationDays:30,discount:{isActive:!1,type:"percentage",value:0}},free:{displayName:"ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©",description:"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÖÿ¨ÿßŸÜÿßŸã",isEnabled:!0,originalPrice:0,currentPrice:0,durationDays:0,discount:{isActive:!1,type:"percentage",value:0}},defaultPackage:"free"},no=({toast:s,dialog:t})=>{var j,L,g,d,h,F,D,b,E,o,w,U,B,Q,O,C,P;const[n,i]=a.useState(!0),[c,y]=a.useState(!1),[r,k]=a.useState(ba),[$,M]=a.useState(null);a.useEffect(()=>{I()},[]);const I=async()=>{i(!0);try{const x=await Ce(X(S,"settings","packages"));if(x.exists()){const z=x.data();k({...ba,...z,premium:{...ba.premium,...z.premium},free:{...ba.free,...z.free}})}}catch(x){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™:",x),s.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™")}finally{i(!1)}},N=async()=>{var x;y(!0);try{const z={...r};if((x=z.premium.discount)!=null&&x.isActive&&z.premium.discount.value>0){const R=z.premium.discount;R.type==="percentage"?z.premium.currentPrice=z.premium.originalPrice-z.premium.originalPrice*R.value/100:z.premium.currentPrice=Math.max(0,z.premium.originalPrice-R.value)}else z.premium.currentPrice=z.premium.originalPrice;await Ze(X(S,"settings","packages"),{...z,updatedAt:J()}),k(z),s.success("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ")}catch(z){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™:",z),s.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ≠ŸÅÿ∏: ${z.message}`)}finally{y(!1)}},A=(x,z,R)=>{k(u=>({...u,[x]:{...u[x],[z]:R}}))},p=(x,z,R)=>{k(u=>({...u,[x]:{...u[x],discount:{...u[x].discount,[z]:R}}}))},f=async()=>{await t.confirm("ÿ≥Ÿäÿ™ŸÖ ÿ¨ÿπŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÖÿ¨ÿßŸÜŸäÿ© (0 ÿ±ŸäÿßŸÑ). ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØÿü",{title:"üéÅ ÿ¨ÿπŸÑ ÿßŸÑÿ®ÿßŸÇÿ© ŸÖÿ¨ÿßŸÜŸäÿ©"})&&(k(z=>({...z,premium:{...z.premium,originalPrice:0,currentPrice:0,discount:{isActive:!1,type:"percentage",value:0}}})),s.success("ÿ™ŸÖ ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ≥ÿπÿ± ÿπŸÑŸâ 0 ÿ±ŸäÿßŸÑ. ÿßÿ∂ÿ∫ÿ∑ ÿ≠ŸÅÿ∏ ŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™."))},_=x=>{var v,H,Y,ce;if(!(x!=null&&x.isActive))return!1;const z=new Date,R=((H=(v=x.startDate)==null?void 0:v.toDate)==null?void 0:H.call(v))||(x.startDate?new Date(x.startDate):null),u=((ce=(Y=x.endDate)==null?void 0:Y.toDate)==null?void 0:ce.call(Y))||(x.endDate?new Date(x.endDate):null);return!(R&&z<R||u&&z>u)},m=x=>{if(!_(x.discount))return x.originalPrice;const z=x.discount;return z.type==="percentage"?x.originalPrice-x.originalPrice*z.value/100:Math.max(0,x.originalPrice-z.value)};return n?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl flex items-center justify-center",children:e.jsx(sa,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"ÿ•ÿπÿØÿßÿØÿßÿ™ ÿ£ÿ≥ÿπÿßÿ± ÿßŸÑÿ®ÿßŸÇÿßÿ™"}),e.jsx("p",{className:"text-gray-600",children:"ÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿ£ÿ≥ÿπÿßÿ± ÿßŸÑÿ®ÿßŸÇÿßÿ™ ŸàÿßŸÑÿÆÿµŸàŸÖÿßÿ™ ŸÖŸÜ ŸáŸÜÿß"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:f,className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-5 py-3 rounded-xl font-bold shadow-lg transition flex items-center gap-2",children:"üéÅ ÿ¨ÿπŸÑŸáÿß ŸÖÿ¨ÿßŸÜŸäÿ©"}),e.jsx("button",{onClick:N,disabled:c,className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg transition disabled:opacity-50 flex items-center gap-2",children:c?"‚è≥ ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏...":"üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500 p-5 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"üëë ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ (Premium)"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿØŸÅŸàÿπÿ© ŸÖÿπ ŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ©"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-xl cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.premium.isEnabled,onChange:x=>A("premium","isEnabled",x.target.checked),className:"w-5 h-5 rounded"}),e.jsx("span",{className:"font-semibold",children:r.premium.isEnabled?"‚úÖ ŸÖŸÅÿπŸëŸÑÿ©":"‚ùå ŸÖŸàŸÇŸàŸÅÿ©"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üí∞ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿµŸÑŸä (ÿ±ŸäÿßŸÑ)"}),e.jsx("input",{type:"number",min:"0",step:"1",value:r.premium.originalPrice,onChange:x=>A("premium","originalPrice",Number(x.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-xl font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üìÖ ŸÖÿØÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ (ŸäŸàŸÖ)"}),e.jsx("input",{type:"number",min:"1",value:r.premium.durationDays,onChange:x=>A("premium","durationDays",Number(x.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-xl font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üíµ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ≠ÿßŸÑŸä"}),e.jsxs("div",{className:"w-full px-4 py-3 bg-green-50 border-2 border-green-300 rounded-xl text-xl font-bold text-center text-green-700",children:[m(r.premium).toFixed(0)," ÿ±ŸäÿßŸÑ",_(r.premium.discount)&&e.jsx("span",{className:"text-sm text-green-600 block",children:"ÿ®ÿπÿØ ÿßŸÑÿÆÿµŸÖ"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üìù ŸàÿµŸÅ ÿßŸÑÿ®ÿßŸÇÿ©"}),e.jsx("textarea",{value:r.premium.description||"",onChange:x=>A("premium","description",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200",rows:2,placeholder:"ŸàÿµŸÅ ŸÇÿµŸäÿ± ŸÑŸÑÿ®ÿßŸÇÿ©..."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üè∑Ô∏è"}),e.jsx("h4",{className:"text-lg font-bold text-red-700",children:"ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿÆÿµŸÖ"})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-xl cursor-pointer shadow",children:[e.jsx("input",{type:"checkbox",checked:((j=r.premium.discount)==null?void 0:j.isActive)||!1,onChange:x=>p("premium","isActive",x.target.checked),className:"w-5 h-5 rounded accent-red-500"}),e.jsx("span",{className:"font-semibold text-red-700",children:(L=r.premium.discount)!=null&&L.isActive?"‚úÖ ÿßŸÑÿÆÿµŸÖ ŸÖŸÅÿπŸëŸÑ":"‚è∏Ô∏è ÿßŸÑÿÆÿµŸÖ ŸÖŸàŸÇŸàŸÅ"})]})]}),((g=r.premium.discount)==null?void 0:g.isActive)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜŸàÿπ ÿßŸÑÿÆÿµŸÖ"}),e.jsxs("select",{value:((d=r.premium.discount)==null?void 0:d.type)||"percentage",onChange:x=>p("premium","type",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500",children:[e.jsx("option",{value:"percentage",children:"ŸÜÿ≥ÿ®ÿ© ŸÖÿ¶ŸàŸäÿ© (%)"}),e.jsx("option",{value:"fixed",children:"ŸÖÿ®ŸÑÿ∫ ÿ´ÿßÿ®ÿ™ (ÿ±ŸäÿßŸÑ)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["ŸÇŸäŸÖÿ© ÿßŸÑÿÆÿµŸÖ ",((h=r.premium.discount)==null?void 0:h.type)==="percentage"?"(%)":"(ÿ±ŸäÿßŸÑ)"]}),e.jsx("input",{type:"number",min:"0",max:((F=r.premium.discount)==null?void 0:F.type)==="percentage"?100:r.premium.originalPrice,value:((D=r.premium.discount)==null?void 0:D.value)||0,onChange:x=>p("premium","value",Number(x.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 text-lg font-bold text-center"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üìÖ ÿ™ÿßÿ±ŸäÿÆ ÿ®ÿØÿßŸäÿ© ÿßŸÑÿÆÿµŸÖ"}),e.jsx("input",{type:"date",value:(b=r.premium.discount)!=null&&b.startDate?typeof r.premium.discount.startDate=="string"?r.premium.discount.startDate:((w=(o=(E=r.premium.discount.startDate).toDate)==null?void 0:o.call(E))==null?void 0:w.toISOString().split("T")[0])||"":"",onChange:x=>p("premium","startDate",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üìÖ ÿ™ÿßÿ±ŸäÿÆ ŸÜŸáÿßŸäÿ© ÿßŸÑÿÆÿµŸÖ"}),e.jsx("input",{type:"date",value:(U=r.premium.discount)!=null&&U.endDate?typeof r.premium.discount.endDate=="string"?r.premium.discount.endDate:((O=(Q=(B=r.premium.discount.endDate).toDate)==null?void 0:Q.call(B))==null?void 0:O.toISOString().split("T")[0])||"":"",onChange:x=>p("premium","endDate",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üè∑Ô∏è Ÿàÿ≥ŸÖ/ÿ≥ÿ®ÿ® ÿßŸÑÿÆÿµŸÖ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"text",value:((C=r.premium.discount)==null?void 0:C.label)||"",onChange:x=>p("premium","label",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500",placeholder:"ŸÖÿ´ÿßŸÑ: ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ∑ŸÑÿßŸÇÿå ÿÆÿµŸÖ ÿ±ŸÖÿ∂ÿßŸÜ..."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-dashed border-red-300",children:[e.jsxs("p",{className:"text-center text-lg",children:[e.jsxs("span",{className:"text-gray-500 line-through",children:[r.premium.originalPrice," ÿ±ŸäÿßŸÑ"]}),e.jsx("span",{className:"mx-3",children:"‚Üí"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[m(r.premium).toFixed(0)," ÿ±ŸäÿßŸÑ"]}),((P=r.premium.discount)==null?void 0:P.label)&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full mr-2",children:r.premium.discount.label})]}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:_(r.premium.discount)?"‚úÖ ÿßŸÑÿÆÿµŸÖ ŸÜÿ¥ÿ∑ ÿ≠ÿßŸÑŸäÿßŸã":"‚è∏Ô∏è ÿßŸÑÿÆÿµŸÖ ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑ (ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™Ÿàÿßÿ±ŸäÿÆ)"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 p-5 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"üì¶ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ© (Free)"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ÿ®ÿØŸàŸÜ ÿ±ÿ≥ŸàŸÖ"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-xl cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.free.isEnabled,onChange:x=>A("free","isEnabled",x.target.checked),className:"w-5 h-5 rounded"}),e.jsx("span",{className:"font-semibold",children:r.free.isEnabled?"‚úÖ ŸÖŸÅÿπŸëŸÑÿ©":"‚ùå ŸÖŸàŸÇŸàŸÅÿ©"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-green-700 font-bold text-lg",children:"‚úÖ Ÿáÿ∞Ÿá ÿßŸÑÿ®ÿßŸÇÿ© ŸÖÿ¨ÿßŸÜŸäÿ© ÿØÿßÿ¶ŸÖÿßŸã"}),e.jsx("p",{className:"text-green-600 text-sm",children:"ŸÑÿß Ÿäÿ™ÿ∑ŸÑÿ® ÿØŸÅÿπ ÿ£Ÿä ÿ±ÿ≥ŸàŸÖ"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 border-2 border-sky-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-sky-800 mb-4 flex items-center gap-2",children:[e.jsx(ms,{className:"w-5 h-5"}),"ŸÖŸÑÿÆÿµ ÿßŸÑÿ£ÿ≥ÿπÿßÿ± ÿßŸÑÿ≠ÿßŸÑŸäÿ©"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"üëë ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${r.premium.isEnabled?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r.premium.isEnabled?"ŸÖŸÅÿπŸëŸÑÿ©":"ŸÖŸàŸÇŸàŸÅÿ©"})]}),e.jsxs("p",{className:"text-3xl font-bold text-amber-600 mt-2",children:[m(r.premium).toFixed(0)," ÿ±ŸäÿßŸÑ",_(r.premium.discount)&&e.jsx("span",{className:"text-sm text-red-500 mr-2 bg-red-50 px-2 py-1 rounded-full",children:"ÿÆÿµŸÖ!"})]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["ŸÑŸÖÿØÿ© ",r.premium.durationDays," ŸäŸàŸÖ"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"üì¶ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${r.free.isEnabled?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r.free.isEnabled?"ŸÖŸÅÿπŸëŸÑÿ©":"ŸÖŸàŸÇŸàŸÅÿ©"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:"ŸÖÿ¨ÿßŸÜÿßŸã"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"ÿ®ÿØŸàŸÜ ÿ±ÿ≥ŸàŸÖ"})]})]})]})]})},Pt=({icon:s,value:t,label:n,color:i})=>{const c={sky:"bg-sky-500/20 text-sky-300",emerald:"bg-emerald-500/20 text-emerald-300",purple:"bg-purple-500/20 text-purple-300",orange:"bg-orange-500/20 text-orange-300",amber:"bg-amber-500/20 text-amber-300",green:"bg-green-500/20 text-green-300"};return e.jsxs("div",{className:`${c[i]} rounded-xl p-3 backdrop-blur-sm`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s,e.jsx("span",{className:"text-xl font-bold text-white",children:t})]}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:n})]})},fa=({title:s,value:t,change:n,subtitle:i,icon:c,color:y})=>{const r={emerald:"from-emerald-500 to-teal-600",sky:"from-sky-500 to-blue-600",amber:"from-amber-500 to-orange-600",purple:"from-purple-500 to-indigo-600",red:"from-red-500 to-rose-600"};return e.jsxs("div",{className:`relative overflow-hidden bg-gradient-to-br ${r[y]} rounded-2xl p-5 text-white shadow-lg`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:c}),n!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${n>=0?"text-green-200":"text-red-200"}`,children:[n>=0?e.jsx(kr,{className:"w-4 h-4"}):e.jsx(Sl,{className:"w-4 h-4"}),Math.abs(n),"%"]})]}),e.jsx("p",{className:"text-2xl font-bold",children:t}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:i||s})]})]})},ja=({icon:s,value:t,label:n,bgColor:i})=>e.jsxs("div",{className:`${i} rounded-xl p-4 flex items-center gap-3`,children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t}),e.jsx("p",{className:"text-sm text-slate-500",children:n})]})]}),io="afrtalbyt2026@gmail.com",co=()=>{const s=gs(),[t,n]=a.useState(""),[i,c]=a.useState(""),[y,r]=a.useState(!1),[k,$]=a.useState(""),[M,I]=a.useState(!1),N=async A=>{if(A.preventDefault(),$(""),t.trim().toLowerCase()!==io){$("‚ùå Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸäÿØ ÿ∫Ÿäÿ± ŸÖÿ≥ŸÖŸàÿ≠ ŸÑŸá ÿ®ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖÿ∑Ÿàÿ±");return}if(i.length<6){$("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ");return}r(!0);try{const f=(await $t(bs,t.trim(),i)).user.uid;await Ze(X(S,"users",f),{email:t.trim(),name:"ÿßŸÑŸÖÿ∑Ÿàÿ± ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä",role:"developer",createdAt:J()}),I(!0),setTimeout(()=>{s("/developer")},2e3)}catch(p){console.error("Setup error:",p),p.code==="auth/email-already-in-use"?$("Ÿáÿ∞ÿß ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖŸàÿ¨ŸàÿØ ŸÖÿ≥ÿ®ŸÇÿßŸãÿå ÿ¨ÿ±ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"):p.code==="auth/invalid-email"?$("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠"):p.code==="auth/weak-password"?$("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∂ÿπŸäŸÅÿ© ÿ¨ÿØÿßŸã"):$("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: "+(p.message||"ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{r(!1)}};return M?e.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-gradient-to-br from-green-500 to-emerald-600 text-white p-10 rounded-3xl shadow-2xl",children:[e.jsx(De,{className:"w-20 h-20 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"üéâ ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠!"}),e.jsx("p",{children:"ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸàŸäŸÑŸÉ ŸÑŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±..."})]})}):e.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 p-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ms,{className:"w-10 h-10 text-white"})}),e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2",children:[e.jsx(ds,{className:"w-6 h-6"}),"ÿ•ÿπÿØÿßÿØ ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿ∑Ÿàÿ±",e.jsx(ds,{className:"w-6 h-6"})]}),e.jsx("p",{className:"text-white/80 text-sm mt-2",children:"üîê ŸÑŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖÿ≠ÿØŸàÿØ ŸÅŸÇÿ∑"})]}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-5",children:[k&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 rounded-xl p-3 text-sm text-center",children:k}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[e.jsx(Ft,{className:"w-4 h-4"}),"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"]}),e.jsx("input",{type:"email",value:t,onChange:A=>n(A.target.value),placeholder:"ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑŸÖÿÆÿµÿµ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[e.jsx(ni,{className:"w-4 h-4"}),"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±"]}),e.jsx("input",{type:"password",value:i,onChange:A=>c(A.target.value),placeholder:"ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full py-4 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white font-bold rounded-xl hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ct,{className:"w-5 h-5"}),"ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿ∑Ÿàÿ±"]})}),e.jsx("p",{className:"text-gray-500 text-xs text-center",children:"‚ö†Ô∏è Ÿáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ© ŸÖÿ≠ÿØŸàÿØÿ© ŸÑŸÑÿ®ÿ±ŸäÿØ ÿßŸÑŸÖÿ≠ÿØÿØ ŸÅŸÇÿ∑"})]})]})})})};async function oo(s,t,n,i,c){var g,d,h,F;const r=X(S,t==="restaurant"?"restaurants":"couriers",s),k=await Ce(r);if(!k.exists())return{success:!1,newPoints:0,isSuspended:!1,isWarning:!1,message:"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ"};const $=k.data(),M=((g=$.points)==null?void 0:g.currentPoints)??xs.STARTING_POINTS,I=((d=$.points)==null?void 0:d.totalDeductions)??0,N=((h=$.points)==null?void 0:h.warningCount)??0,A=((F=$.points)==null?void 0:F.pointsHistory)??[],p=Math.max(0,M-n),f={id:`deduct_${Date.now()}`,type:"deduction",amount:-n,reason:i,orderId:c==null?void 0:c.orderId,ticketId:c==null?void 0:c.ticketId,adminId:c==null?void 0:c.adminId,createdAt:new Date},_=p<xs.SUSPENSION_THRESHOLD,m=!_&&p<xs.WARNING_THRESHOLD,j={"points.currentPoints":p,"points.totalDeductions":I+n,"points.pointsHistory":[...A,f],updatedAt:J()};_&&(j["points.isSuspended"]=!0,j["points.suspendedAt"]=J(),j["points.suspendedReason"]=`ÿ•ŸäŸÇÿßŸÅ ÿ™ŸÑŸÇÿßÿ¶Ÿä - ÿßŸÑŸÜŸÇÿßÿ∑ ÿ£ŸÇŸÑ ŸÖŸÜ ${xs.SUSPENSION_THRESHOLD}`,j.isOpen=!1,j.isAvailable=!1),m&&(j["points.warningCount"]=N+1,j["points.lastWarningAt"]=J()),await xe(r,j);let L=`ÿ™ŸÖ ÿÆÿµŸÖ ${n} ŸÜŸÇÿ∑ÿ©. ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑÿ≠ÿßŸÑŸäÿ©: ${p}`;return _?L=`‚õî ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã! ÿßŸÑŸÜŸÇÿßÿ∑ ŸàÿµŸÑÿ™ ÿ•ŸÑŸâ ${p}`:m&&(L=`‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá! ÿßŸÑŸÜŸÇÿßÿ∑ ŸÖŸÜÿÆŸÅÿ∂ÿ©: ${p}. ŸÇÿØ Ÿäÿ™ŸÖ ÿßŸÑÿ•ŸäŸÇÿßŸÅ ÿπŸÜÿØ ${xs.SUSPENSION_THRESHOLD}`),{success:!0,newPoints:p,isSuspended:_,isWarning:m,message:L}}const xo={waiting:{label:"ÿ¨ÿØŸäÿØÿ©",color:"amber",icon:Ye},active:{label:"ŸÜÿ¥ÿ∑ÿ©",color:"green",icon:ht},resolved:{label:"ŸÖÿ≠ŸÑŸàŸÑÿ©",color:"blue",icon:De},closed:{label:"ŸÖÿ∫ŸÑŸÇÿ©",color:"gray",icon:Ys}},mo=()=>{const{user:s}=$e(),t=Qe(),n=a.useRef(null),i=a.useRef(null),[c,y]=a.useState([]),[r,k]=a.useState(null),[$,M]=a.useState([]),[I,N]=a.useState(!0),[A,p]=a.useState(!1),[f,_]=a.useState(""),[m,j]=a.useState("all"),[L,g]=a.useState("");a.useEffect(()=>{const v=pe(te(S,"supportChats"),as("lastMessageAt","desc")),H=As(v,Y=>{const ce=Y.docs.map(ie=>({id:ie.id,...ie.data()}));y(ce),N(!1)});return()=>H()},[]),a.useEffect(()=>{if(!(r!=null&&r.id))return;const v=pe(te(S,"supportChats",r.id,"messages"),as("createdAt","asc")),H=As(v,Y=>{const ce=Y.docs.map(ie=>({id:ie.id,...ie.data()}));M(ce),r.unreadBySupport&&r.unreadBySupport>0&&xe(X(S,"supportChats",r.id),{unreadBySupport:0})});return setTimeout(()=>{var Y;return(Y=i.current)==null?void 0:Y.focus()},100),()=>H()},[r==null?void 0:r.id]),a.useEffect(()=>{var v;(v=n.current)==null||v.scrollIntoView({behavior:"smooth"})},[$]);const d=async()=>{if(!(!f.trim()||!(r!=null&&r.id)||A)){p(!0);try{await Fe(te(S,"supportChats",r.id,"messages"),{chatId:r.id,senderId:s==null?void 0:s.uid,senderName:"ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ",senderRole:"support",message:f.trim(),createdAt:J()}),await xe(X(S,"supportChats",r.id),{status:"active",lastMessage:f.trim(),lastMessageAt:J(),updatedAt:J(),unreadByUser:Xe(1)}),_(""),t.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿØ")}catch{t.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿØ")}finally{p(!1)}}},h=async v=>{r!=null&&r.id&&(await xe(X(S,"supportChats",r.id),{status:v,updatedAt:J()}),k({...r,status:v}),t.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿßŸÑÿ©"))},[F,D]=a.useState(!1),[b,E]=a.useState("restaurant"),[o,w]=a.useState(""),[U,B]=a.useState(""),[Q,O]=a.useState(10),[C,P]=a.useState(""),[x,z]=a.useState(!1),R=async()=>{if(!o||!C||Q<=0){t.error("Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™");return}z(!0);try{const v=await oo(o,b,Q,C,{ticketId:r==null?void 0:r.id,adminId:s==null?void 0:s.uid});v.success?(r!=null&&r.id&&await Fe(te(S,"supportChats",r.id,"messages"),{chatId:r.id,senderId:"system",senderName:"ÿßŸÑŸÜÿ∏ÿßŸÖ",senderRole:"bot",message:`‚úÖ ÿ™ŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ¥ŸÉŸàŸâ ŸàÿÆÿµŸÖ ${Q} ŸÜŸÇÿ∑ÿ© ŸÖŸÜ ${b==="restaurant"?"ÿßŸÑÿ£ÿ≥ÿ±ÿ©":"ÿßŸÑŸÖŸÜÿØŸàÿ®"}.

${v.isSuspended?"‚õî ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã!":v.isWarning?"‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá: ÿßŸÑŸÜŸÇÿßÿ∑ ŸÖŸÜÿÆŸÅÿ∂ÿ©!":""}`,createdAt:J()}),t.success(v.message),v.isSuspended&&t.error("‚õî ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã!"),D(!1),P(""),O(10)):t.error(v.message)}catch{t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿÆÿµŸÖ ÿßŸÑŸÜŸÇÿßÿ∑")}finally{z(!1)}},u=c.filter(v=>{var H;return!(m==="waiting"&&v.status!=="waiting"||m==="active"&&v.status!=="active"||L&&!v.userName.includes(L)&&!((H=v.subject)!=null&&H.includes(L)))});return I?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(ts,{className:"w-8 h-8 animate-spin text-sky-500"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[e.jsx(Et,{className:"w-8 h-8 text-sky-500"}),"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",value:L,onChange:v=>g(v.target.value),placeholder:"ÿ®ÿ≠ÿ´...",className:"w-full pr-10 pl-4 py-2 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-300"})]}),e.jsx("div",{className:"flex gap-2",children:["all","waiting","active"].map(v=>e.jsxs("button",{onClick:()=>j(v),className:`px-3 py-1 rounded-lg text-sm font-medium transition ${m===v?"bg-sky-100 text-sky-700":"text-gray-500 hover:bg-gray-100"}`,children:[v==="all"?"ÿßŸÑŸÉŸÑ":v==="waiting"?"ÿ¨ÿØŸäÿØÿ©":"ŸÜÿ¥ÿ∑ÿ©",v==="waiting"&&e.jsx("span",{className:"mr-1 px-1.5 py-0.5 bg-amber-500 text-white rounded-full text-xs",children:c.filter(H=>H.status==="waiting").length})]},v))})]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto divide-y divide-gray-100",children:u.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(ht,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ≠ÿßÿØÿ´ÿßÿ™"})]}):u.map(v=>{var ce,ie;const H=xo[v.status],Y=H.icon;return e.jsxs("button",{onClick:()=>k(v),className:`w-full p-4 text-right hover:bg-gray-50 transition ${(r==null?void 0:r.id)===v.id?"bg-sky-50":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-bold text-gray-800",children:v.userName})]}),v.unreadBySupport?e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:v.unreadBySupport}):null]}),e.jsx("p",{className:"text-sm text-gray-500 truncate mb-2",children:v.lastMessage||v.subject}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full
                        ${H.color==="amber"?"bg-amber-100 text-amber-700":""}
                        ${H.color==="green"?"bg-green-100 text-green-700":""}
                        ${H.color==="blue"?"bg-blue-100 text-blue-700":""}
                        ${H.color==="gray"?"bg-gray-100 text-gray-700":""}
                      `,children:[e.jsx(Y,{className:"w-3 h-3"}),H.label]}),e.jsx("span",{className:"text-gray-400",children:((ie=(ce=v.lastMessageAt)==null?void 0:ce.toDate)==null?void 0:ie.call(ce).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}))||""})]})]},v.id)})})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col",style:{minHeight:"600px"},children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5"}),r.userName]}),e.jsx("p",{className:"text-sm text-gray-500",children:r.subject})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h("resolved"),className:"px-3 py-1.5 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition",children:"‚úÖ ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ"}),e.jsx("button",{onClick:()=>h("closed"),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition",children:"ÿ•ÿ∫ŸÑÿßŸÇ"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>{E("restaurant"),B("ÿßŸÑÿ£ÿ≥ÿ±ÿ©"),D(!0)},className:"flex items-center gap-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition",children:[e.jsx(Ve,{className:"w-4 h-4"}),"ÿÆÿµŸÖ ŸÖŸÜ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ‚õî"]}),e.jsxs("button",{onClick:()=>{E("courier"),B("ÿßŸÑŸÖŸÜÿØŸàÿ®"),D(!0)},className:"flex items-center gap-2 px-3 py-2 bg-orange-100 text-orange-700 rounded-lg text-sm font-medium hover:bg-orange-200 transition",children:[e.jsx(Ue,{className:"w-4 h-4"}),"ÿÆÿµŸÖ ŸÖŸÜ ÿßŸÑŸÖŸÜÿØŸàÿ® ‚õî"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[$.map(v=>{var H,Y;return e.jsx("div",{className:`flex ${v.senderRole==="support"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:"max-w-[80%]",children:[v.senderRole!=="support"&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${v.senderRole==="bot"?"bg-purple-100":"bg-gray-200"}`,children:v.senderRole==="bot"?e.jsx(mr,{className:"w-4 h-4 text-purple-600"}):e.jsx(os,{className:"w-4 h-4 text-gray-600"})}),e.jsx("span",{className:"text-xs text-gray-500",children:v.senderName})]}),e.jsx("div",{className:`rounded-2xl px-4 py-3 ${v.senderRole==="support"?"bg-sky-500 text-white rounded-bl-md":v.senderRole==="bot"?"bg-purple-50 text-gray-800 border border-purple-100 rounded-br-md":"bg-white text-gray-800 border border-gray-200 rounded-br-md"}`,children:e.jsx("p",{className:"whitespace-pre-wrap text-sm",children:v.message})}),e.jsx("p",{className:`text-xs text-gray-400 mt-1 ${v.senderRole==="support"?"text-left":"text-right"}`,children:((Y=(H=v.createdAt)==null?void 0:H.toDate)==null?void 0:Y.call(H).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}))||""})]})},v.id)}),e.jsx("div",{ref:n})]}),e.jsxs("div",{className:"p-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{ref:i,type:"text",value:f,onChange:v=>_(v.target.value),onKeyPress:v=>v.key==="Enter"&&d(),placeholder:"ÿßŸÉÿ™ÿ® ÿ±ÿØŸÉ ŸáŸÜÿß...",className:"flex-1 px-4 py-3 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-300",disabled:A}),e.jsx("button",{onClick:d,disabled:!f.trim()||A,className:"px-6 py-3 bg-sky-500 hover:bg-sky-600 text-white rounded-xl font-medium transition disabled:opacity-50",children:A?e.jsx(ts,{className:"w-5 h-5 animate-spin"}):e.jsx(ca,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:["ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™ŸàÿßÿµŸÑŸÉ ŸÖÿπŸÜÿß","ÿ≥ŸÜÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖŸàÿ∂Ÿàÿπ","ÿ™ŸÖ ÿ≠ŸÑ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©","Ÿäÿ±ÿ¨Ÿâ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ"].map((v,H)=>e.jsx("button",{onClick:()=>_(v),className:"px-3 py-1.5 bg-gray-100 hover:bg-sky-100 text-gray-600 hover:text-sky-700 rounded-full text-sm transition",children:v},H))})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ht,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("p",{children:"ÿßÿÆÿ™ÿ± ŸÖÿ≠ÿßÿØÿ´ÿ© ŸÑŸÑÿ±ÿØ ÿπŸÑŸäŸáÿß"})]})})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-amber-600",children:c.filter(v=>v.status==="waiting").length}),e.jsx("p",{className:"text-sm text-amber-700",children:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ±ÿØ"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:c.filter(v=>v.status==="active").length}),e.jsx("p",{className:"text-sm text-green-700",children:"ŸÜÿ¥ÿ∑ÿ©"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:c.filter(v=>v.status==="resolved").length}),e.jsx("p",{className:"text-sm text-blue-700",children:"ŸÖÿ≠ŸÑŸàŸÑÿ©"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-600",children:c.length}),e.jsx("p",{className:"text-sm text-gray-700",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä"})]})]}),F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(xr,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ¥ŸÉŸàŸâ ŸàÿÆÿµŸÖ ÿßŸÑŸÜŸÇÿßÿ∑"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ÿÆÿµŸÖ ŸÜŸÇÿßÿ∑ ŸÖŸÜ ",U]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ŸÖÿπÿ±ŸÅ ",U," (UID)"]}),e.jsx("input",{type:"text",value:o,onChange:v=>w(v.target.value),placeholder:"ÿ£ÿØÿÆŸÑ UID...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ÿπÿØÿØ ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑŸÖÿÆÿµŸàŸÖÿ©"}),e.jsx("div",{className:"flex gap-2",children:[5,10,15,20].map(v=>e.jsxs("button",{onClick:()=>O(v),className:`flex-1 py-2 rounded-lg font-bold transition ${Q===v?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["-",v]},v))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ÿ≥ÿ®ÿ® ÿßŸÑÿÆÿµŸÖ"}),e.jsxs("select",{value:C,onChange:v=>P(v.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-400 focus:outline-none",children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ≥ÿ®ÿ®..."}),e.jsx("option",{value:"ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿπÿßŸÖ ÿ≥Ÿäÿ¶ÿ©",children:"ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿπÿßŸÖ ÿ≥Ÿäÿ¶ÿ©"}),e.jsx("option",{value:"ÿ™ÿ£ÿÆŸäÿ± ŸÅŸä ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",children:"ÿ™ÿ£ÿÆŸäÿ± ŸÅŸä ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ"}),e.jsx("option",{value:"ÿ≥Ÿàÿ° ÿßŸÑÿÆÿØŸÖÿ©",children:"ÿ≥Ÿàÿ° ÿßŸÑÿÆÿØŸÖÿ©"}),e.jsx("option",{value:"ÿ∑ŸÑÿ® ÿÆÿßÿ∑ÿ¶",children:"ÿ∑ŸÑÿ® ÿÆÿßÿ∑ÿ¶"}),e.jsx("option",{value:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿ∫ŸÑŸäŸÅ",children:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿ∫ŸÑŸäŸÅ"}),e.jsx("option",{value:"ŸÖÿ¥ŸÉŸÑÿ© ŸÜÿ∏ÿßŸÅÿ©",children:"ŸÖÿ¥ŸÉŸÑÿ© ŸÜÿ∏ÿßŸÅÿ©"}),e.jsx("option",{value:"ÿπÿØŸÖ ÿßŸÑÿ≠ÿ∂Ÿàÿ±",children:"ÿπÿØŸÖ ÿßŸÑÿ≠ÿ∂Ÿàÿ±"}),e.jsx("option",{value:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿπÿßŸÖŸÑ",children:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿπÿßŸÖŸÑ"}),e.jsx("option",{value:"ÿ¥ŸÉŸàŸâ ÿ£ÿÆÿ±Ÿâ",children:"ÿ¥ŸÉŸàŸâ ÿ£ÿÆÿ±Ÿâ"})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:e.jsxs("p",{className:"text-sm text-amber-800",children:["‚ö†Ô∏è ",e.jsx("strong",{children:"ÿ™ŸÜÿ®ŸäŸá:"})," ÿ•ÿ∞ÿß ŸàÿµŸÑÿ™ ÿßŸÑŸÜŸÇÿßÿ∑ ÿ£ŸÇŸÑ ŸÖŸÜ ",xs.SUSPENSION_THRESHOLD," ÿ≥Ÿäÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã!"]})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:R,disabled:x||!o||!C,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?e.jsx(ts,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(xr,{className:"w-5 h-5"}),"ÿ™ÿ£ŸÉŸäÿØ ŸàÿÆÿµŸÖ ÿßŸÑŸÜŸÇÿßÿ∑"]})}),e.jsx("button",{onClick:()=>D(!1),className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]})})]})},ho=()=>{const[s,t]=a.useState(!0),[n,i]=a.useState([]),[c,y]=a.useState([]),[r,k]=a.useState([]),[$,M]=a.useState("restaurants"),[I,N]=a.useState("month");a.useEffect(()=>{A()},[I]);const A=async()=>{t(!0);try{const f=(await ue(te(S,"orders"))).docs.map(E=>({id:E.id,...E.data()})),_=new Date,m=f.filter(E=>{var U,B;if(I==="all")return!0;const o=((B=(U=E.createdAt)==null?void 0:U.toDate)==null?void 0:B.call(U))||new Date(0),w=(_.getTime()-o.getTime())/(1e3*60*60*24);return I==="week"?w<=7:I==="month"?w<=30:!0}),j=new Map;m.forEach(E=>{var B,Q;const o=E.restaurantId;if(!o)return;j.has(o)||j.set(o,{id:o,name:E.restaurantName||"ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ",totalOrders:0,complaintsCount:0,avgRating:0,lowRatings:0});const w=j.get(o);w.totalOrders++;const U=(Q=(B=E.ratings)==null?void 0:B.customerToRestaurant)==null?void 0:Q.stars;U&&U<=2&&w.lowRatings++});const g=(await ue(te(S,"supportChats"))).docs.map(E=>E.data());g.forEach(E=>{});const d=Array.from(j.values()).sort((E,o)=>o.lowRatings-E.lowRatings);i(d);const h=new Map;m.forEach(E=>{var B,Q;const o=E.courierId;if(!o)return;h.has(o)||h.set(o,{id:o,name:E.courierName||"ŸÖŸÜÿØŸàÿ®",totalDeliveries:0,complaintsCount:0,avgRating:0,lowRatings:0});const w=h.get(o);w.totalDeliveries++;const U=(Q=(B=E.ratings)==null?void 0:B.customerToCourier)==null?void 0:Q.stars;U&&U<=2&&w.lowRatings++});const F=Array.from(h.values()).sort((E,o)=>o.lowRatings-E.lowRatings);y(F);const D=new Map;m.forEach(E=>{const o=E.customerId;if(!o)return;D.has(o)||D.set(o,{id:o,name:E.customerName||"ÿπŸÖŸäŸÑ",totalOrders:0,complaintsFiledCount:0,avgRatingGiven:0});const w=D.get(o);w.totalOrders++}),g.forEach(E=>{const o=E.userId;D.has(o)&&D.get(o).complaintsFiledCount++});const b=Array.from(D.values()).sort((E,o)=>o.complaintsFiledCount-E.complaintsFiledCount);k(b)}catch(p){console.error("Error loading stats:",p)}finally{t(!1)}};return s?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(ts,{className:"w-8 h-8 animate-spin text-sky-500"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx(ct,{className:"w-8 h-8 text-red-500"}),"ŸÖÿ±ŸÉÿ≤ ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ"]}),e.jsx("button",{onClick:A,className:"p-2 bg-gray-100 rounded-xl hover:bg-gray-200 transition",children:e.jsx(qe,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-orange-500 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ve,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"ÿ£ÿ≥ÿ± ÿ®ŸÖÿ¥ÿßŸÉŸÑ"})]}),e.jsx("p",{className:"text-3xl font-bold",children:n.filter(p=>p.lowRatings>0).length}),e.jsxs("p",{className:"text-white/70 text-sm",children:["ŸÖŸÜ ÿ£ÿµŸÑ ",n.length," ÿ£ÿ≥ÿ±ÿ©"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-yellow-500 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ue,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"ŸÖŸÜÿØŸàÿ®ŸäŸÜ ÿ®ŸÖÿ¥ÿßŸÉŸÑ"})]}),e.jsx("p",{className:"text-3xl font-bold",children:c.filter(p=>p.lowRatings>0).length}),e.jsxs("p",{className:"text-white/70 text-sm",children:["ŸÖŸÜ ÿ£ÿµŸÑ ",c.length," ŸÖŸÜÿØŸàÿ®"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(os,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"ÿπŸÖŸÑÿßÿ° ŸÉÿ´Ÿäÿ±Ÿä ÿßŸÑÿ¥ŸÉÿßŸàŸâ"})]}),e.jsx("p",{className:"text-3xl font-bold",children:r.filter(p=>p.complaintsFiledCount>2).length}),e.jsx("p",{className:"text-white/70 text-sm",children:"ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ÿ¥ŸÉŸàŸäÿ™ŸäŸÜ"})]})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:["week","month","all"].map(p=>e.jsx("button",{onClick:()=>N(p),className:`px-4 py-2 rounded-xl font-medium transition ${I===p?"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:p==="week"?"ÿ¢ÿÆÿ± ÿ£ÿ≥ÿ®Ÿàÿπ":p==="month"?"ÿ¢ÿÆÿ± ÿ¥Ÿáÿ±":"ÿßŸÑŸÉŸÑ"},p))}),e.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>M("restaurants"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition ${$==="restaurants"?"bg-red-500 text-white":"bg-gray-100 text-gray-600"}`,children:[e.jsx(Ve,{className:"w-4 h-4"}),"ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"]}),e.jsxs("button",{onClick:()=>M("couriers"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition ${$==="couriers"?"bg-amber-500 text-white":"bg-gray-100 text-gray-600"}`,children:[e.jsx(Ue,{className:"w-4 h-4"}),"ÿßŸÑŸÖŸÜÿØŸàÿ®ŸäŸÜ"]}),e.jsxs("button",{onClick:()=>M("customers"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition ${$==="customers"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"}`,children:[e.jsx(os,{className:"w-4 h-4"}),"ÿßŸÑÿπŸÖŸÑÿßÿ°"]})]}),$==="restaurants"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-red-50 border-b border-red-100",children:e.jsxs("h2",{className:"font-bold text-red-800 flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5"}),"ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑÿ£ŸÉÿ´ÿ± ŸÖÿ¥ÿßŸÉŸÑ (ÿ™ŸÇŸäŸäŸÖÿßÿ™ ŸÖŸÜÿÆŸÅÿ∂ÿ©)"]})}),n.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™"}):e.jsx("div",{className:"divide-y divide-gray-100",children:n.slice(0,20).map((p,f)=>e.jsxs("div",{className:`p-4 flex items-center justify-between ${p.lowRatings>0?"bg-red-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${p.lowRatings>2?"bg-red-500 text-white":p.lowRatings>0?"bg-amber-500 text-white":"bg-gray-200 text-gray-600"}`,children:f+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:p.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[p.totalOrders," ÿ∑ŸÑÿ®"]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:p.lowRatings>0&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(Jr,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold",children:p.lowRatings}),e.jsx("span",{className:"text-xs",children:"ÿ™ŸÇŸäŸäŸÖ ÿ≥Ÿäÿ°"})]})})]},p.id))})]}),$==="couriers"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-amber-50 border-b border-amber-100",children:e.jsxs("h2",{className:"font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5"}),"ÿßŸÑŸÖŸÜÿØŸàÿ®ŸäŸÜ ÿßŸÑÿ£ŸÉÿ´ÿ± ŸÖÿ¥ÿßŸÉŸÑ"]})}),c.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™"}):e.jsx("div",{className:"divide-y divide-gray-100",children:c.slice(0,20).map((p,f)=>e.jsxs("div",{className:`p-4 flex items-center justify-between ${p.lowRatings>0?"bg-amber-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${p.lowRatings>2?"bg-red-500 text-white":p.lowRatings>0?"bg-amber-500 text-white":"bg-gray-200 text-gray-600"}`,children:f+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:p.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[p.totalDeliveries," ÿ™ŸàÿµŸäŸÑ"]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:p.lowRatings>0&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-600",children:[e.jsx(Jr,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold",children:p.lowRatings}),e.jsx("span",{className:"text-xs",children:"ÿ™ŸÇŸäŸäŸÖ ÿ≥Ÿäÿ°"})]})})]},p.id))})]}),$==="customers"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-purple-50 border-b border-purple-100",children:e.jsxs("h2",{className:"font-bold text-purple-800 flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5"}),"ÿßŸÑÿπŸÖŸÑÿßÿ° ŸÉÿ´Ÿäÿ±Ÿä ÿßŸÑÿ¥ŸÉÿßŸàŸâ"]})}),r.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™"}):e.jsx("div",{className:"divide-y divide-gray-100",children:r.filter(p=>p.complaintsFiledCount>0).slice(0,20).map((p,f)=>e.jsxs("div",{className:`p-4 flex items-center justify-between ${p.complaintsFiledCount>2?"bg-purple-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${p.complaintsFiledCount>3?"bg-red-500 text-white":p.complaintsFiledCount>1?"bg-amber-500 text-white":"bg-gray-200 text-gray-600"}`,children:f+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:p.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[p.totalOrders," ÿ∑ŸÑÿ®"]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-purple-600",children:[e.jsx(ws,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold",children:p.complaintsFiledCount}),e.jsx("span",{className:"text-xs",children:"ÿ¥ŸÉŸàŸâ"})]})})]},p.id))})]}),e.jsx("div",{className:"mt-6 bg-amber-50 border border-amber-200 rounded-xl p-4 text-center",children:e.jsxs("p",{className:"text-amber-800",children:["üí° ",e.jsx("strong",{children:"ŸÜÿµŸäÿ≠ÿ©:"})," ÿ±ÿßŸÇÿ® Ÿáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ© ÿ®ÿ¥ŸÉŸÑ ÿØŸàÿ±Ÿä ŸÑÿßŸÉÿ™ÿ¥ÿßŸÅ ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ ŸÖÿ®ŸÉÿ±ÿßŸã"]})})]})},uo=[{value:"orders",label:"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",icon:Oe,color:"blue"},{value:"delivery",label:"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ™ŸàÿµŸäŸÑ",icon:Ue,color:"orange"},{value:"payment",label:"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿØŸÅÿπ",icon:Ms,color:"green"},{value:"account",label:"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ≠ÿ≥ÿßÿ®",icon:os,color:"purple"},{value:"suggestion",label:"ÿßŸÇÿ™ÿ±ÿßÿ≠ ŸÑŸÑÿ™ÿ≠ÿ≥ŸäŸÜ",icon:Cl,color:"amber"}],go=()=>{const s=gs(),{user:t,role:n}=$e(),i=Qe(),[c,y]=a.useState(null),[r,k]=a.useState(""),[$,M]=a.useState(!1),[I,N]=a.useState(!1),A=async p=>{if(p.preventDefault(),!c){i.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ŸÜŸàÿπ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©");return}if(!r.trim()){i.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ŸÉÿ™ÿßÿ®ÿ© ŸàÿµŸÅ ŸÑŸÑŸÖÿ¥ŸÉŸÑÿ©");return}if(r.trim().length<10){i.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ŸÉÿ™ÿßÿ®ÿ© ŸàÿµŸÅ ÿ£ŸÉÿ´ÿ± ÿ™ŸÅÿµŸäŸÑÿßŸã (10 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ)");return}if(!(t!=null&&t.uid)){i.error("Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã");return}M(!0);try{await Fe(te(S,"problemReports"),{userId:t.uid,userName:t.displayName||"",userEmail:t.email||"",userRole:n,problemType:c,description:r.trim(),status:"pending",createdAt:J()}),N(!0),i.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫ ÿ®ŸÜÿ¨ÿßÿ≠"),y(null),k("")}catch(f){console.error("Error submitting report:",f),i.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫")}finally{M(!1)}};return I?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(De,{className:"w-10 h-10 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-sky-900 mb-3",children:"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫"}),e.jsx("p",{className:"text-sky-600 mb-6",children:"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ! ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ®ŸÑÿßÿ∫ŸÉ ŸÖŸÜ ŸÇÿ®ŸÑ ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-6 py-3 bg-sky-100 text-sky-700 rounded-xl font-medium hover:bg-sky-200 transition-colors",children:"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸÑÿßÿ∫ ÿ¢ÿÆÿ±"}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-sky-600 text-white rounded-xl font-medium hover:bg-sky-700 transition-colors",children:"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"})]})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-sky-100 rounded-2xl flex items-center justify-center",children:e.jsx(ws,{className:"w-8 h-8 text-sky-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-sky-900 mb-2",children:"ÿßŸÑÿ•ÿ®ŸÑÿßÿ∫ ÿπŸÜ ŸÖÿ¥ŸÉŸÑÿ©"}),e.jsx("p",{className:"text-sky-600",children:"ÿ£ÿÆÿ®ÿ±ŸÜÿß ÿπŸÜ ÿ£Ÿä ŸÖÿ¥ŸÉŸÑÿ© ÿ™Ÿàÿßÿ¨ŸáŸÉ ÿ£Ÿà ÿ¥ÿßÿ±ŸÉŸÜÿß ÿßŸÇÿ™ÿ±ÿßÿ≠ÿßÿ™ŸÉ ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-sky-600 text-white rounded-full flex items-center justify-center text-sm",children:"1"}),"ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:uo.map(p=>{const f=p.icon,_=c===p.value;return e.jsxs("button",{type:"button",onClick:()=>y(p.value),className:`p-4 rounded-xl border-2 transition-all text-right flex items-center gap-3 ${_?"border-sky-500 bg-sky-50":"border-gray-200 hover:border-sky-300 hover:bg-sky-50/50"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${_?"bg-sky-500 text-white":"bg-gray-100 text-gray-500"}`,children:e.jsx(f,{className:"w-5 h-5"})}),e.jsx("span",{className:`font-medium ${_?"text-sky-700":"text-gray-700"}`,children:p.label})]},p.value)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-sky-600 text-white rounded-full flex items-center justify-center text-sm",children:"2"}),"ÿßÿ¥ÿ±ÿ≠ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©"]}),e.jsx("textarea",{value:r,onChange:p=>k(p.target.value),placeholder:"ÿßŸÉÿ™ÿ® ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ© ÿ£Ÿà ÿßŸÑÿßŸÇÿ™ÿ±ÿßÿ≠ ŸáŸÜÿß...",rows:5,maxLength:500,className:"w-full p-4 border-2 border-gray-200 rounded-xl resize-none focus:outline-none focus:border-sky-500 transition-colors",disabled:$}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[r.length,"/500 ÿ≠ÿ±ŸÅ"]})]}),e.jsx("button",{type:"submit",disabled:$||!c||!r.trim(),className:`w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ${$||!c||!r.trim()?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-sky-600 text-white hover:bg-sky-700 shadow-lg hover:shadow-xl"}`,children:$?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ca,{className:"w-5 h-5"}),"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫"]})}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ®ŸÑÿßÿ∫ŸÉ ŸÖŸÜ ŸÇÿ®ŸÑ ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ"})]})]})},xl={orders:{label:"ÿ∑ŸÑÿ®ÿßÿ™",icon:Oe,color:"blue",bgClass:"bg-blue-100",textClass:"text-blue-600"},delivery:{label:"ÿ™ŸàÿµŸäŸÑ",icon:Ue,color:"orange",bgClass:"bg-orange-100",textClass:"text-orange-600"},payment:{label:"ÿØŸÅÿπ",icon:Ms,color:"green",bgClass:"bg-green-100",textClass:"text-green-600"},account:{label:"ÿ≠ÿ≥ÿßÿ®",icon:os,color:"purple",bgClass:"bg-purple-100",textClass:"text-purple-600"},suggestion:{label:"ÿßŸÇÿ™ÿ±ÿßÿ≠",icon:Cl,color:"amber",bgClass:"bg-amber-100",textClass:"text-amber-600"}},ml={customer:{label:"ÿπŸÖŸäŸÑ",color:"blue",bgClass:"bg-blue-50",textClass:"text-blue-700"},owner:{label:"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",color:"green",bgClass:"bg-green-50",textClass:"text-green-700"},courier:{label:"ŸÖŸÜÿØŸàÿ®",color:"orange",bgClass:"bg-orange-50",textClass:"text-orange-700"}},nr={pending:{label:"ÿ¨ÿØŸäÿØ",color:"yellow",icon:Ye,bgClass:"bg-yellow-100",textClass:"text-yellow-700"},reviewed:{label:"ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",color:"blue",icon:Ls,bgClass:"bg-blue-100",textClass:"text-blue-700"},resolved:{label:"ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ",color:"green",icon:De,bgClass:"bg-green-100",textClass:"text-green-700"}},po=()=>{const{user:s}=$e(),t=Qe(),[n,i]=a.useState([]),[c,y]=a.useState(!0),[r,k]=a.useState(null),[$,M]=a.useState("all"),[I,N]=a.useState("all"),[A,p]=a.useState("all"),[f,_]=a.useState("");a.useEffect(()=>{const d=pe(te(S,"problemReports"),as("createdAt","desc")),h=As(d,F=>{const D=F.docs.map(b=>{var E,o;return{id:b.id,...b.data(),createdAt:((o=(E=b.data().createdAt)==null?void 0:E.toDate)==null?void 0:o.call(E))||new Date}});i(D),y(!1)},F=>{console.error("Error fetching reports:",F),t.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™"),y(!1)});return()=>h()},[]);const m=async(d,h)=>{try{await xe(X(S,"problemReports",d),{status:h,adminId:s==null?void 0:s.uid,reviewedAt:J()}),t.success(`ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ≠ÿßŸÑÿ© ÿ•ŸÑŸâ: ${nr[h].label}`)}catch(F){console.error("Error updating status:",F),t.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿßŸÑÿ©")}},j=n.filter(d=>{var h,F;if($!=="all"&&d.problemType!==$||I!=="all"&&d.status!==I||A!=="all"&&d.userRole!==A)return!1;if(f){const D=f.toLowerCase();return d.description.toLowerCase().includes(D)||((h=d.userName)==null?void 0:h.toLowerCase().includes(D))||((F=d.userEmail)==null?void 0:F.toLowerCase().includes(D))}return!0}),L={total:n.length,pending:n.filter(d=>d.status==="pending").length,reviewed:n.filter(d=>d.status==="reviewed").length,resolved:n.filter(d=>d.status==="resolved").length},g=d=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(d);return c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(ts,{className:"w-8 h-8 text-sky-600 animate-spin"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-3",children:[e.jsx(ws,{className:"w-8 h-8 text-sky-600"}),"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:"ŸÖÿ±ÿßÿ¨ÿπÿ© ŸàŸÖÿ™ÿßÿ®ÿπÿ© ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"text-3xl font-bold text-sky-900",children:L.total}),e.jsx("div",{className:"text-sm text-gray-500",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 shadow-sm border border-yellow-100",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-700",children:L.pending}),e.jsx("div",{className:"text-sm text-yellow-600",children:"ÿ¨ÿØŸäÿØ"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 shadow-sm border border-blue-100",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-700",children:L.reviewed}),e.jsx("div",{className:"text-sm text-blue-600",children:"ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 shadow-sm border border-green-100",children:[e.jsx("div",{className:"text-3xl font-bold text-green-700",children:L.resolved}),e.jsx("div",{className:"text-sm text-green-600",children:"ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sky-700",children:[e.jsx(Kt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"ÿ™ÿµŸÅŸäÿ© ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"w-4 h-4 absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿ®ÿ≠ÿ´...",value:f,onChange:d=>_(d.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("select",{value:$,onChange:d=>M(d.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"all",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜŸàÿßÿπ"}),Object.entries(xl).map(([d,{label:h}])=>e.jsx("option",{value:d,children:h},d))]}),e.jsxs("select",{value:I,onChange:d=>N(d.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"all",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ÿßŸÑÿßÿ™"}),Object.entries(nr).map(([d,{label:h}])=>e.jsx("option",{value:d,children:h},d))]}),e.jsxs("select",{value:A,onChange:d=>p(d.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"all",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),Object.entries(ml).map(([d,{label:h}])=>e.jsx("option",{value:d,children:h},d))]})]})]}),j.length===0?e.jsxs("div",{className:"bg-white rounded-xl p-12 text-center shadow-sm",children:[e.jsx(ws,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸÑÿßÿ∫ÿßÿ™"})]}):e.jsx("div",{className:"space-y-4",children:j.map(d=>{const h=xl[d.problemType],F=ml[d.userRole],D=nr[d.status],b=h.icon;D.icon;const E=r===d.id;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>k(E?null:d.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${h.bgClass}`,children:e.jsx(b,{className:`w-5 h-5 ${h.textClass}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sky-900",children:h.label}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${D.bgClass} ${D.textClass}`,children:D.label})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[e.jsx("span",{className:`px-2 py-0.5 rounded ${F.bgClass} ${F.textClass}`,children:F.label}),d.userName&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ii,{className:"w-4 h-4"}),d.userName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(St,{className:"w-4 h-4"}),g(d.createdAt)]})]})]})]}),e.jsx("div",{className:"text-gray-400",children:E?e.jsx(vr,{className:"w-5 h-5"}):e.jsx(Oa,{className:"w-5 h-5"})})]})}),E&&e.jsxs("div",{className:"border-t border-gray-100 p-4 bg-gray-50",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-medium text-sky-900 mb-2",children:"ŸàÿµŸÅ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©:"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:d.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[d.userEmail&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"ÿßŸÑÿ®ÿ±ŸäÿØ:"}),e.jsx("span",{className:"mr-2 text-sky-700",children:d.userEmail})]}),d.userPhone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"ÿßŸÑŸáÿßÿ™ŸÅ:"}),e.jsx("span",{className:"mr-2 text-sky-700",children:d.userPhone})]})]}),d.status!=="resolved"&&e.jsxs("div",{className:"flex gap-2",children:[d.status==="pending"&&e.jsxs("button",{onClick:()=>m(d.id,"reviewed"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ls,{className:"w-4 h-4"}),"ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"]}),e.jsxs("button",{onClick:()=>m(d.id,"resolved"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),"ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ"]})]})]})]},d.id)})})]})},hl=3.75,bo=()=>{const{role:s}=$e(),t=Qe(),[n,i]=a.useState(new Date().getFullYear()),[c,y]=a.useState(new Date().getMonth()+1),[r,k]=a.useState(!0),[$,M]=a.useState({totalOrders:0,totalOrdersValue:0,totalDeliveries:0,totalDeliveryFees:0,platformFees:0,adminCommissions:0,subscriptions:0,promotions:0,grossRevenue:0,netRevenue:0}),[I,N]=a.useState([]),[A,p]=a.useState({restaurants:{count:0,totalBalance:0,totalSales:0},couriers:{count:0,totalBalance:0,totalEarnings:0,totalFees:0},admins:{count:0,totalBalance:0,totalCommissions:0},app:{balance:0,totalEarnings:0}}),[f,_]=a.useState([]);if(a.useEffect(()=>{s==="developer"&&m()},[n,c,s]),s!=="developer")return e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-500",children:"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸàÿµŸàŸÑ ŸÑŸáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ©"})});const m=async()=>{k(!0);try{const F=`${n}-${String(c).padStart(2,"0")}`,D=new Date(n,c-1,1),b=new Date(n,c,0,23,59,59),E=pe(te(S,"orders"),be("createdAt",">=",D),be("createdAt","<=",b),as("createdAt","desc")),w=(await ue(E)).docs.map(Y=>({id:Y.id,...Y.data()}));let U=0,B=0,Q=0,O=0,C=0,P=0;const x={};w.forEach(Y=>{var je,ge;U++,B+=Y.total||0,Y.status==="delivered"&&(Q++,O+=Y.deliveryFee||0,C+=Y.courierPlatformFee||hl,Y.adminCommission&&(P+=Y.adminCommission));const ie=(((ge=(je=Y.createdAt)==null?void 0:je.toDate)==null?void 0:ge.call(je))||new Date(Y.createdAt)).toISOString().split("T")[0];x[ie]||(x[ie]={date:ie,orders:0,ordersValue:0,deliveries:0,deliveryFees:0,platformFees:0,adminCommissions:0}),x[ie].orders++,x[ie].ordersValue+=Y.total||0,Y.status==="delivered"&&(x[ie].deliveries++,x[ie].deliveryFees+=Y.deliveryFee||0,x[ie].platformFees+=Y.courierPlatformFee||hl,x[ie].adminCommissions+=Y.adminCommission||0)});const z=0,R=0,u=C+P+z+R;M({totalOrders:U,totalOrdersValue:B,totalDeliveries:Q,totalDeliveryFees:O,platformFees:C,adminCommissions:P,subscriptions:z,promotions:R,grossRevenue:u,netRevenue:u});const H=Object.values(x).sort((Y,ce)=>new Date(ce.date).getTime()-new Date(Y.date).getTime());N(H),await j(),await L()}catch(F){console.error("Error loading accounting data:",F),t.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{k(!1)}},j=async()=>{try{const F=await ue(te(S,"wallets"));let D={count:0,totalBalance:0,totalSales:0},b={count:0,totalBalance:0,totalEarnings:0,totalFees:0},E={count:0,totalBalance:0,totalCommissions:0},o={balance:0,totalEarnings:0};F.docs.forEach(w=>{const U=w.data();w.id==="app_earnings"?o={balance:U.balance||0,totalEarnings:U.totalEarnings||0}:U.ownerType==="restaurant"?(D.count++,D.totalBalance+=U.balance||0,D.totalSales+=U.totalSales||0):U.ownerType==="courier"?(b.count++,b.totalBalance+=U.balance||0,b.totalEarnings+=U.totalEarnings||0,b.totalFees+=U.totalPlatformFees||0):(E.count++,E.totalBalance+=U.balance||0,E.totalCommissions+=U.totalEarnings||0)}),p({restaurants:D,couriers:b,admins:E,app:o})}catch(F){console.error("Error loading wallet summary:",F)}},L=async()=>{try{const F=pe(te(S,"transactions"),as("createdAt","desc"),ks(20)),D=await ue(F);_(D.docs.map(b=>({id:b.id,...b.data()})))}catch{_([])}},g=F=>{let D=c+F,b=n;D>12?(D=1,b++):D<1&&(D=12,b--),y(D),i(b)},d=F=>["ŸäŸÜÿßŸäÿ±","ŸÅÿ®ÿ±ÿßŸäÿ±","ŸÖÿßÿ±ÿ≥","ÿ£ÿ®ÿ±ŸäŸÑ","ŸÖÿßŸäŸà","ŸäŸàŸÜŸäŸà","ŸäŸàŸÑŸäŸà","ÿ£ÿ∫ÿ≥ÿ∑ÿ≥","ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±","ÿ£ŸÉÿ™Ÿàÿ®ÿ±","ŸÜŸàŸÅŸÖÿ®ÿ±","ÿØŸäÿ≥ŸÖÿ®ÿ±"][F-1],h=F=>`${F.toFixed(2)} ÿ±.ÿ≥`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-2",children:[e.jsx(ct,{className:"w-7 h-7"}),"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:"ÿ•ÿØÿßÿ±ÿ© ŸàŸÖÿ±ÿßŸÇÿ®ÿ© ÿ•Ÿäÿ±ÿßÿØÿßÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl p-2 shadow-sm border border-sky-100",children:[e.jsx("button",{onClick:()=>g(-1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(Ut,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold text-sky-900 min-w-[140px] text-center",children:[d(c)," ",n]}),e.jsx("button",{onClick:()=>g(1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(st,{className:"w-5 h-5 text-sky-600"})}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-sky-50 rounded-lg transition mr-2",title:"ÿ™ÿ≠ÿØŸäÿ´",children:e.jsx(qe,{className:`w-5 h-5 text-sky-600 ${r?"animate-spin":""}`})})]})]}),r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qe,{className:"w-8 h-8 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ya,{title:"ÿµÿßŸÅŸä ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™",value:h($.netRevenue),icon:e.jsx(cs,{className:"w-6 h-6"}),color:"emerald",subtitle:"Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±"}),e.jsx(ya,{title:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©",value:h($.platformFees),icon:e.jsx(ci,{className:"w-6 h-6"}),color:"sky",subtitle:`ŸÖŸÜ ${$.totalDeliveries} ÿ™ŸàÿµŸäŸÑÿ©`}),e.jsx(ya,{title:"ÿπŸÖŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ",value:h($.adminCommissions),icon:e.jsx(nt,{className:"w-6 h-6"}),color:"purple",subtitle:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿπŸÖŸàŸÑÿßÿ™"}),e.jsx(ya,{title:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",value:$.totalOrders.toString(),icon:e.jsx(Oe,{className:"w-6 h-6"}),color:"amber",subtitle:h($.totalOrdersValue)})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Sr,{className:"w-5 h-5"}),"ŸÖŸÑÿÆÿµ ÿßŸÑŸÖÿ≠ÿßŸÅÿ∏"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Na,{title:"ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ",balance:A.app.balance,total:A.app.totalEarnings,icon:e.jsx(ra,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(Na,{title:"ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©",balance:A.restaurants.totalBalance,total:A.restaurants.totalSales,count:A.restaurants.count,icon:e.jsx(ps,{className:"w-5 h-5"}),color:"sky"}),e.jsx(Na,{title:"ÿßŸÑŸÖŸÜÿßÿØŸäÿ®",balance:A.couriers.totalBalance,total:A.couriers.totalEarnings,count:A.couriers.count,icon:e.jsx(Ue,{className:"w-5 h-5"}),color:"orange"}),e.jsx(Na,{title:"ÿßŸÑŸÖÿ¥ÿ±ŸÅŸàŸÜ",balance:A.admins.totalBalance,total:A.admins.totalCommissions,count:A.admins.count,icon:e.jsx(nt,{className:"w-5 h-5"}),color:"purple"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(St,{className:"w-5 h-5"}),"ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸäŸàŸÖŸäÿ©"]}),I.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-sky-100",children:[e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ŸÇŸäŸÖÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ÿπŸÖŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ"})]})}),e.jsx("tbody",{children:I.map(F=>e.jsxs("tr",{className:"border-b border-sky-50 hover:bg-sky-25",children:[e.jsx("td",{className:"py-3 px-2 font-medium",children:F.date}),e.jsx("td",{className:"py-3 px-2",children:F.orders}),e.jsx("td",{className:"py-3 px-2",children:h(F.ordersValue)}),e.jsx("td",{className:"py-3 px-2",children:F.deliveries}),e.jsx("td",{className:"py-3 px-2 text-emerald-600",children:h(F.platformFees)}),e.jsx("td",{className:"py-3 px-2 text-purple-600",children:h(F.adminCommissions)})]},F.date))})]})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÑŸáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5"}),"ŸÖÿµÿßÿØÿ± ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(wa,{label:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ© (ŸÖŸÜ ÿßŸÑŸÖŸÜÿßÿØŸäÿ®)",value:$.platformFees,percentage:$.platformFees/($.grossRevenue||1)*100,color:"sky"}),e.jsx(wa,{label:"ÿπŸÖŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ",value:$.adminCommissions,percentage:$.adminCommissions/($.grossRevenue||1)*100,color:"purple"}),e.jsx(wa,{label:"ÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™",value:$.subscriptions,percentage:$.subscriptions/($.grossRevenue||1)*100,color:"amber"}),e.jsx(wa,{label:"ÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÖŸàŸÑÿ©",value:$.promotions,percentage:$.promotions/($.grossRevenue||1)*100,color:"emerald"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(kl,{className:"w-5 h-5"}),"ŸÖŸÑÿÆÿµ ÿßŸÑÿ¥Ÿáÿ±"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Tt,{label:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",value:$.totalOrders.toString()}),e.jsx(Tt,{label:"ŸÇŸäŸÖÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",value:h($.totalOrdersValue)}),e.jsx(Tt,{label:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©",value:$.totalDeliveries.toString()}),e.jsx(Tt,{label:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ",value:h($.totalDeliveryFees)}),e.jsxs("div",{className:"border-t border-sky-100 pt-4 mt-4",children:[e.jsx(Tt,{label:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™",value:h($.grossRevenue),highlight:!0}),e.jsx(Tt,{label:"ÿµÿßŸÅŸä ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™",value:h($.netRevenue),highlight:!0,color:"emerald"})]})]})]})]})]})]})},ya=({title:s,value:t,icon:n,color:i,subtitle:c})=>{const y={sky:"bg-sky-50 text-sky-600",emerald:"bg-emerald-50 text-emerald-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600",orange:"bg-orange-50 text-orange-600"};return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-sky-100",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl ${y[i]} flex items-center justify-center mb-3`,children:n}),e.jsx("p",{className:"text-sm text-sky-600 mb-1",children:s}),e.jsx("p",{className:"text-xl font-bold text-sky-900",children:t}),c&&e.jsx("p",{className:"text-xs text-sky-500 mt-1",children:c})]})},Na=({title:s,balance:t,total:n,count:i,icon:c,color:y})=>{const r={sky:"border-sky-200 bg-sky-50",emerald:"border-emerald-200 bg-emerald-50",purple:"border-purple-200 bg-purple-50",orange:"border-orange-200 bg-orange-50"},k={sky:"text-sky-600",emerald:"text-emerald-600",purple:"text-purple-600",orange:"text-orange-600"};return e.jsxs("div",{className:`rounded-xl p-4 border ${r[y]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:k[y],children:c}),e.jsx("span",{className:"font-semibold text-sky-900 text-sm",children:s}),i!==void 0&&e.jsx("span",{className:"text-xs bg-white px-2 py-0.5 rounded-full text-sky-600",children:i})]}),e.jsxs("p",{className:`text-lg font-bold ${k[y]}`,children:[t.toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("p",{className:"text-xs text-sky-500 mt-1",children:["ÿ•ÿ¨ŸÖÿßŸÑŸä: ",n.toFixed(2)," ÿ±.ÿ≥"]})]})},wa=({label:s,value:t,percentage:n,color:i})=>{const c={sky:"bg-sky-500",emerald:"bg-emerald-500",purple:"bg-purple-500",amber:"bg-amber-500"};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-sky-700",children:s}),e.jsxs("span",{className:"font-semibold text-sky-900",children:[t.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsx("div",{className:"h-2 bg-sky-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${c[i]} rounded-full transition-all duration-500`,style:{width:`${Math.min(n,100)}%`}})})]})},Tt=({label:s,value:t,highlight:n,color:i="sky"})=>e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:n?"font-semibold text-sky-900":"text-sky-600",children:s}),e.jsx("span",{className:`font-bold ${i==="emerald"?"text-emerald-600":"text-sky-900"}`,children:t})]}),fo=()=>{const{user:s,role:t}=$e(),n=Qe(),[i,c]=a.useState(new Date().getFullYear()),[y,r]=a.useState(new Date().getMonth()+1),[k,$]=a.useState(!0),[M,I]=a.useState(null),[N,A]=a.useState({todaySales:0,todayOrders:0,weekSales:0,weekOrders:0,monthSales:0,monthOrders:0,totalSales:0,totalOrders:0,pendingAmount:0,availableBalance:0}),[p,f]=a.useState([]),[_,m]=a.useState([]),[j,L]=a.useState("");if(a.useEffect(()=>{s!=null&&s.uid&&(t==="owner"||t==="developer")&&g()},[s==null?void 0:s.uid,i,y,t]),t!=="owner"&&t!=="developer")return e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-500",children:"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸàÿµŸàŸÑ ŸÑŸáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ©"})});const g=async()=>{if(s!=null&&s.uid){$(!0);try{const o=await Ce(X(S,"restaurants",s.uid));o.exists()&&L(o.data().name||"ÿ£ÿ≥ÿ±ÿ™Ÿä");const w=await Ce(X(S,"wallets",s.uid));if(w.exists()){const se=w.data();I(se)}else I({id:s.uid,ownerType:"restaurant",balance:0,totalSales:0,totalWithdrawn:0,pendingBalance:0});const U=pe(te(S,"orders"),be("restaurantId","==",s.uid),as("createdAt","desc"),ks(200)),Q=(await ue(U)).docs.map(se=>({id:se.id,...se.data()})),O=new Date,C=new Date(O.getFullYear(),O.getMonth(),O.getDate()),P=new Date(C);P.setDate(P.getDate()-7);const x=new Date(i,y-1,1),z=new Date(i,y,0,23,59,59);let R=0,u=0,v=0,H=0,Y=0,ce=0,ie=0,je=0,ge=0;const T=[];Q.forEach(se=>{var G,K;const ye=((K=(G=se.createdAt)==null?void 0:G.toDate)==null?void 0:K.call(G))||new Date(se.createdAt),Z=se.subtotal||0;T.length<20&&T.push({id:se.id,total:se.total,subtotal:se.subtotal,status:se.status,createdAt:se.createdAt}),["delivered","cancelled"].includes(se.status)||(ge+=Z),se.status==="delivered"&&(je++,ie+=Z,ye>=C&&(u++,R+=Z),ye>=P&&(H++,v+=Z),ye>=x&&ye<=z&&(ce++,Y+=Z))}),A({todaySales:R,todayOrders:u,weekSales:v,weekOrders:H,monthSales:Y,monthOrders:ce,totalSales:ie,totalOrders:je,pendingAmount:ge,availableBalance:(M==null?void 0:M.balance)||0}),f(T),await d()}catch(o){console.error("Error loading wallet data:",o),n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{$(!1)}}},d=async()=>{if(s!=null&&s.uid)try{const o=pe(te(S,"wallets",s.uid,"transactions"),as("createdAt","desc"),ks(50)),w=await ue(o);m(w.docs.map(U=>({id:U.id,...U.data()})))}catch{m([])}},h=o=>{let w=y+o,U=i;w>12?(w=1,U++):w<1&&(w=12,U--),r(w),c(U)},F=o=>["ŸäŸÜÿßŸäÿ±","ŸÅÿ®ÿ±ÿßŸäÿ±","ŸÖÿßÿ±ÿ≥","ÿ£ÿ®ÿ±ŸäŸÑ","ŸÖÿßŸäŸà","ŸäŸàŸÜŸäŸà","ŸäŸàŸÑŸäŸà","ÿ£ÿ∫ÿ≥ÿ∑ÿ≥","ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±","ÿ£ŸÉÿ™Ÿàÿ®ÿ±","ŸÜŸàŸÅŸÖÿ®ÿ±","ÿØŸäÿ≥ŸÖÿ®ÿ±"][o-1],D=o=>`${o.toFixed(2)} ÿ±.ÿ≥`,b=o=>({pending:{text:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ",color:"text-amber-600 bg-amber-50"},accepted:{text:"ŸÖŸÇÿ®ŸàŸÑ",color:"text-blue-600 bg-blue-50"},preparing:{text:"ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",color:"text-purple-600 bg-purple-50"},ready:{text:"ÿ¨ÿßŸáÿ≤",color:"text-sky-600 bg-sky-50"},out_for_delivery:{text:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",color:"text-orange-600 bg-orange-50"},delivered:{text:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",color:"text-emerald-600 bg-emerald-50"},cancelled:{text:"ŸÖŸÑÿ∫Ÿä",color:"text-red-600 bg-red-50"}})[o]||{text:o,color:"text-gray-600 bg-gray-50"},E=o=>{var U;return o?(((U=o==null?void 0:o.toDate)==null?void 0:U.call(o))||new Date(o)).toLocaleDateString("ar-SA",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"-"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-2",children:[e.jsx(cs,{className:"w-7 h-7"}),"ŸÖÿ≠ŸÅÿ∏ÿ™Ÿä"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:j})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl p-2 shadow-sm border border-sky-100",children:[e.jsx("button",{onClick:()=>h(-1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(Ut,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold text-sky-900 min-w-[140px] text-center",children:[F(y)," ",i]}),e.jsx("button",{onClick:()=>h(1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(st,{className:"w-5 h-5 text-sky-600"})}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-sky-50 rounded-lg transition mr-2",title:"ÿ™ÿ≠ÿØŸäÿ´",children:e.jsx(qe,{className:`w-5 h-5 text-sky-600 ${k?"animate-spin":""}`})})]})]}),k?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qe,{className:"w-8 h-8 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sky-100 flex items-center gap-2",children:[e.jsx(Sr,{className:"w-5 h-5"}),"ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ≠"]}),e.jsx("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm",children:"ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑÿ£ÿ≥ÿ±ÿ©"})]}),e.jsx("p",{className:"text-4xl font-bold mb-2",children:D(N.availableBalance)}),e.jsxs("div",{className:"flex gap-6 mt-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sky-200",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™"}),e.jsx("p",{className:"font-semibold",children:D(N.totalSales)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sky-200",children:"ŸÖÿπŸÑŸÇ"}),e.jsx("p",{className:"font-semibold",children:D(N.pendingAmount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sky-200",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("p",{className:"font-semibold",children:N.totalOrders})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(va,{title:"ŸÖÿ®Ÿäÿπÿßÿ™ ÿßŸÑŸäŸàŸÖ",value:D(N.todaySales),subtitle:`${N.todayOrders} ÿ∑ŸÑÿ®`,icon:e.jsx(us,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(va,{title:"ŸÖÿ®Ÿäÿπÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ",value:D(N.weekSales),subtitle:`${N.weekOrders} ÿ∑ŸÑÿ®`,icon:e.jsx(xt,{className:"w-5 h-5"}),color:"sky"}),e.jsx(va,{title:"ŸÖÿ®Ÿäÿπÿßÿ™ ÿßŸÑÿ¥Ÿáÿ±",value:D(N.monthSales),subtitle:`${N.monthOrders} ÿ∑ŸÑÿ®`,icon:e.jsx(St,{className:"w-5 h-5"}),color:"purple"}),e.jsx(va,{title:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™",value:D(N.totalSales),subtitle:`${N.totalOrders} ÿ∑ŸÑÿ®`,icon:e.jsx(ra,{className:"w-5 h-5"}),color:"amber"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"ÿ¢ÿÆÿ± ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"]}),p.length>0?e.jsx("div",{className:"space-y-3",children:p.slice(0,10).map(o=>{const w=b(o.status);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-sky-50/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-100 rounded-full flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sky-900 text-sm",children:["ÿ∑ŸÑÿ® #",o.id.slice(-6)]}),e.jsx("p",{className:"text-xs text-sky-500",children:E(o.createdAt)})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-sky-900",children:D(o.subtotal)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${w.color}`,children:w.text})]})]},o.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ®ÿπÿØ"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™"]}),_.length>0?e.jsx("div",{className:"space-y-3",children:_.map(o=>{var w,U,B;return e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-sky-50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${o.type==="credit"?"bg-emerald-100":"bg-red-100"}`,children:o.type==="credit"?e.jsx(kr,{className:"w-5 h-5 text-emerald-600"}):e.jsx(oi,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sky-900 text-sm",children:o.description}),e.jsx("p",{className:"text-xs text-sky-500",children:((B=(U=(w=o.createdAt)==null?void 0:w.toDate)==null?void 0:U.call(w))==null?void 0:B.toLocaleDateString("ar-SA"))||(o.createdAt instanceof Date?o.createdAt.toLocaleDateString("ar-SA"):"-")})]})]}),e.jsxs("span",{className:`font-bold ${o.type==="credit"?"text-emerald-600":"text-red-600"}`,children:[o.type==="credit"?"+":"-",D(o.amount)]})]},o.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿπÿßŸÖŸÑÿßÿ™ ÿ®ÿπÿØ"})]}),e.jsx("div",{className:"bg-sky-50 rounded-xl p-4 border border-sky-100",children:e.jsx("p",{className:"text-sm text-sky-700 text-center",children:"üí° Ÿäÿ™ŸÖ ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ ÿßŸÑŸÖÿ≥ÿ™ÿ≠ŸÇÿ© ÿ•ŸÑŸâ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä ÿÆŸÑÿßŸÑ 3-5 ÿ£ŸäÿßŸÖ ÿπŸÖŸÑ ÿ®ÿπÿØ ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®"})})]})]})},va=({title:s,value:t,subtitle:n,icon:i,color:c})=>{const y={sky:"bg-sky-50 text-sky-600",emerald:"bg-emerald-50 text-emerald-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600"};return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-sky-100",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${y[c]} flex items-center justify-center mb-3`,children:i}),e.jsx("p",{className:"text-sm text-sky-600 mb-1",children:s}),e.jsx("p",{className:"text-xl font-bold text-sky-900",children:t}),e.jsx("p",{className:"text-xs text-sky-500 mt-1",children:n})]})},ul=3.75,jo=()=>{const{user:s,role:t}=$e(),n=Qe(),[i,c]=a.useState(new Date().getFullYear()),[y,r]=a.useState(new Date().getMonth()+1),[k,$]=a.useState(!0),[M,I]=a.useState(null),[N,A]=a.useState({todayDeliveries:0,todayEarnings:0,todayFees:0,weekDeliveries:0,weekEarnings:0,weekFees:0,monthDeliveries:0,monthEarnings:0,monthFees:0,totalDeliveries:0,totalEarnings:0,totalFees:0,netEarnings:0,availableBalance:0}),[p,f]=a.useState([]),[_,m]=a.useState([]),[j,L]=a.useState("");if(a.useEffect(()=>{s!=null&&s.uid&&(t==="courier"||t==="developer")&&g()},[s==null?void 0:s.uid,i,y,t]),t!=="courier"&&t!=="developer")return e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-500",children:"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸàÿµŸàŸÑ ŸÑŸáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ©"})});const g=async()=>{if(s!=null&&s.uid){$(!0);try{const o=await Ce(X(S,"couriers",s.uid));o.exists()&&L(o.data().name||"ÿßŸÑŸÖŸÜÿØŸàÿ®");const w=await Ce(X(S,"wallets",s.uid));if(w.exists()){const K=w.data();I(K)}else I({id:s.uid,ownerType:"courier",balance:0,totalEarnings:0,totalPlatformFees:0,netEarnings:0,totalWithdrawn:0});const U=pe(te(S,"orders"),be("courierId","==",s.uid),as("createdAt","desc"),ks(200)),Q=(await ue(U)).docs.map(K=>({id:K.id,...K.data()})),O=new Date,C=new Date(O.getFullYear(),O.getMonth(),O.getDate()),P=new Date(C);P.setDate(P.getDate()-7);const x=new Date(i,y-1,1),z=new Date(i,y,0,23,59,59);let R=0,u=0,v=0,H=0,Y=0,ce=0,ie=0,je=0,ge=0,T=0,se=0,ye=0;const Z=[];Q.forEach(K=>{var W,ee;const me=((ee=(W=K.createdAt)==null?void 0:W.toDate)==null?void 0:ee.call(W))||new Date(K.createdAt),oe=K.deliveryFee||0,Ne=K.courierPlatformFee||ul;Z.length<20&&Z.push({id:K.id,deliveryFee:oe,platformFee:Ne,status:K.status,createdAt:K.createdAt,restaurantName:K.restaurantName}),K.status==="delivered"&&(T++,se+=oe,ye+=Ne,me>=C&&(R++,u+=oe,v+=Ne),me>=P&&(H++,Y+=oe,ce+=Ne),me>=x&&me<=z&&(ie++,je+=oe,ge+=Ne))});const G=se-ye;A({todayDeliveries:R,todayEarnings:u,todayFees:v,weekDeliveries:H,weekEarnings:Y,weekFees:ce,monthDeliveries:ie,monthEarnings:je,monthFees:ge,totalDeliveries:T,totalEarnings:se,totalFees:ye,netEarnings:G,availableBalance:(M==null?void 0:M.balance)||G}),f(Z),await d()}catch(o){console.error("Error loading wallet data:",o),n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{$(!1)}}},d=async()=>{if(s!=null&&s.uid)try{const o=pe(te(S,"wallets",s.uid,"transactions"),as("createdAt","desc"),ks(50)),w=await ue(o);m(w.docs.map(U=>({id:U.id,...U.data()})))}catch{m([])}},h=o=>{let w=y+o,U=i;w>12?(w=1,U++):w<1&&(w=12,U--),r(w),c(U)},F=o=>["ŸäŸÜÿßŸäÿ±","ŸÅÿ®ÿ±ÿßŸäÿ±","ŸÖÿßÿ±ÿ≥","ÿ£ÿ®ÿ±ŸäŸÑ","ŸÖÿßŸäŸà","ŸäŸàŸÜŸäŸà","ŸäŸàŸÑŸäŸà","ÿ£ÿ∫ÿ≥ÿ∑ÿ≥","ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±","ÿ£ŸÉÿ™Ÿàÿ®ÿ±","ŸÜŸàŸÅŸÖÿ®ÿ±","ÿØŸäÿ≥ŸÖÿ®ÿ±"][o-1],D=o=>`${o.toFixed(2)} ÿ±.ÿ≥`,b=o=>({ready:{text:"ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ",color:"text-sky-600 bg-sky-50"},out_for_delivery:{text:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",color:"text-orange-600 bg-orange-50"},delivered:{text:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",color:"text-emerald-600 bg-emerald-50"},cancelled:{text:"ŸÖŸÑÿ∫Ÿä",color:"text-red-600 bg-red-50"}})[o]||{text:o,color:"text-gray-600 bg-gray-50"},E=o=>{var U;return o?(((U=o==null?void 0:o.toDate)==null?void 0:U.call(o))||new Date(o)).toLocaleDateString("ar-SA",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"-"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-2",children:[e.jsx(cs,{className:"w-7 h-7"}),"ŸÖÿ≠ŸÅÿ∏ÿ™Ÿä"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:j})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl p-2 shadow-sm border border-sky-100",children:[e.jsx("button",{onClick:()=>h(-1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(Ut,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold text-sky-900 min-w-[140px] text-center",children:[F(y)," ",i]}),e.jsx("button",{onClick:()=>h(1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(st,{className:"w-5 h-5 text-sky-600"})}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-sky-50 rounded-lg transition mr-2",title:"ÿ™ÿ≠ÿØŸäÿ´",children:e.jsx(qe,{className:`w-5 h-5 text-sky-600 ${k?"animate-spin":""}`})})]})]}),k?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qe,{className:"w-8 h-8 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-orange-100 flex items-center gap-2",children:[e.jsx(Sr,{className:"w-5 h-5"}),"ÿµÿßŸÅŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"]}),e.jsx("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm",children:"ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑŸÖŸÜÿØŸàÿ®"})]}),e.jsx("p",{className:"text-4xl font-bold mb-2",children:D(N.netEarnings)}),e.jsxs("div",{className:"flex gap-6 mt-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-200",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"}),e.jsx("p",{className:"font-semibold",children:D(N.totalEarnings)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-200",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("p",{className:"font-semibold text-orange-200",children:["-",D(N.totalFees)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-200",children:"ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™"}),e.jsx("p",{className:"font-semibold",children:N.totalDeliveries})]})]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200 flex items-start gap-3",children:[e.jsx(Cs,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["Ÿäÿ™ŸÖ ÿÆÿµŸÖ ",D(ul)," ŸÖŸÜ ŸÉŸÑ ÿ∑ŸÑÿ® ÿ™ŸàÿµŸäŸÑ ŸÉÿ±ÿ≥ŸàŸÖ ŸÑŸÑŸÖŸÜÿµÿ©"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ka,{title:"ÿ£ÿ±ÿ®ÿßÿ≠ ÿßŸÑŸäŸàŸÖ",value:D(N.todayEarnings-N.todayFees),subtitle:`${N.todayDeliveries} ÿ™ŸàÿµŸäŸÑÿ©`,icon:e.jsx(Ue,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(ka,{title:"ÿ£ÿ±ÿ®ÿßÿ≠ ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ",value:D(N.weekEarnings-N.weekFees),subtitle:`${N.weekDeliveries} ÿ™ŸàÿµŸäŸÑÿ©`,icon:e.jsx(xt,{className:"w-5 h-5"}),color:"sky"}),e.jsx(ka,{title:"ÿ£ÿ±ÿ®ÿßÿ≠ ÿßŸÑÿ¥Ÿáÿ±",value:D(N.monthEarnings-N.monthFees),subtitle:`${N.monthDeliveries} ÿ™ŸàÿµŸäŸÑÿ©`,icon:e.jsx(St,{className:"w-5 h-5"}),color:"purple"}),e.jsx(ka,{title:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠",value:D(N.totalEarnings),subtitle:`${N.totalDeliveries} ÿ™ŸàÿµŸäŸÑÿ©`,icon:e.jsx(ra,{className:"w-5 h-5"}),color:"amber"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(St,{className:"w-5 h-5"}),"ÿ™ŸÅÿßÿµŸäŸÑ ",F(y)]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-sky-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-sky-900",children:N.monthDeliveries}),e.jsx("p",{className:"text-sm text-sky-600",children:"ÿ™ŸàÿµŸäŸÑÿ©"})]}),e.jsxs("div",{className:"text-center p-4 bg-emerald-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:D(N.monthEarnings)}),e.jsx("p",{className:"text-sm text-emerald-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["-",D(N.monthFees)]}),e.jsx("p",{className:"text-sm text-red-600",children:"ÿ±ÿ≥ŸàŸÖ"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),"ÿ¢ÿÆÿ± ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™"]}),p.length>0?e.jsx("div",{className:"space-y-3",children:p.slice(0,10).map(o=>{const w=b(o.status);return o.deliveryFee-(o.status==="delivered"?o.platformFee:0),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-sky-50/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(es,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sky-900 text-sm",children:o.restaurantName||`ÿ∑ŸÑÿ® #${o.id.slice(-6)}`}),e.jsx("p",{className:"text-xs text-sky-500",children:E(o.createdAt)})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-sky-900",children:[D(o.deliveryFee),o.status==="delivered"&&e.jsxs("span",{className:"text-xs text-red-500 mr-1",children:["(-",D(o.platformFee),")"]})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${w.color}`,children:w.text})]})]},o.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ŸàÿµŸäŸÑÿßÿ™ ÿ®ÿπÿØ"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™"]}),_.length>0?e.jsx("div",{className:"space-y-3",children:_.map(o=>{var w,U,B;return e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-sky-50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${o.type==="credit"?"bg-emerald-100":"bg-red-100"}`,children:o.type==="credit"?e.jsx(kr,{className:"w-5 h-5 text-emerald-600"}):e.jsx(Sl,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sky-900 text-sm",children:o.description}),e.jsx("p",{className:"text-xs text-sky-500",children:((B=(U=(w=o.createdAt)==null?void 0:w.toDate)==null?void 0:U.call(w))==null?void 0:B.toLocaleDateString("ar-SA"))||(o.createdAt instanceof Date?o.createdAt.toLocaleDateString("ar-SA"):"-")})]})]}),e.jsxs("span",{className:`font-bold ${o.type==="credit"?"text-emerald-600":"text-red-600"}`,children:[o.type==="credit"?"+":"-",D(o.amount)]})]},o.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿπÿßŸÖŸÑÿßÿ™ ÿ®ÿπÿØ"})]}),e.jsx("div",{className:"bg-sky-50 rounded-xl p-4 border border-sky-100",children:e.jsx("p",{className:"text-sm text-sky-700 text-center",children:"üí° Ÿäÿ™ŸÖ ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ ÿßŸÑŸÖÿ≥ÿ™ÿ≠ŸÇÿ© ÿ•ŸÑŸâ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä ÿÆŸÑÿßŸÑ 3-5 ÿ£ŸäÿßŸÖ ÿπŸÖŸÑ"})})]})]})},ka=({title:s,value:t,subtitle:n,icon:i,color:c})=>{const y={sky:"bg-sky-50 text-sky-600",emerald:"bg-emerald-50 text-emerald-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600"};return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-sky-100",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${y[c]} flex items-center justify-center mb-3`,children:i}),e.jsx("p",{className:"text-sm text-sky-600 mb-1",children:s}),e.jsx("p",{className:"text-xl font-bold text-sky-900",children:t}),e.jsx("p",{className:"text-xs text-sky-500 mt-1",children:n})]})},Ge=({children:s})=>{const{user:t,loading:n}=$e();return n?e.jsx("div",{className:"p-8 text-center",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."}):t?e.jsx(e.Fragment,{children:s}):e.jsx(_a,{to:"/login",replace:!0})},yo=()=>{var M;const{role:s,loading:t}=$e(),[n,i]=a.useState([]),[c,y]=a.useState(!0),[r,k]=a.useState(null);if(a.useEffect(()=>{t||s!=="developer"||(async()=>{try{k(null);const I=pe(te(S,"orders"),as("createdAt","desc"),ks(10)),A=(await ue(I)).docs.map(p=>{var _,m,j,L,g,d;const f=p.data();return{id:p.id,restaurantId:f.restaurantId??null,firstItemOwnerId:((m=(_=f==null?void 0:f.items)==null?void 0:_[0])==null?void 0:m.ownerId)??null,customerId:f.customerId??null,createdAtISO:((d=(g=(L=(j=f.createdAt)==null?void 0:j.toDate)==null?void 0:L.call(j))==null?void 0:g.toISOString)==null?void 0:d.call(g))??null}});i(A)}catch(I){if(String((I==null?void 0:I.message)||"").includes("index"))try{const A=(await ue(te(S,"orders"))).docs.map(p=>{var _,m,j,L,g,d;const f=p.data();return{id:p.id,restaurantId:f.restaurantId??null,firstItemOwnerId:((m=(_=f==null?void 0:f.items)==null?void 0:_[0])==null?void 0:m.ownerId)??null,customerId:f.customerId??null,createdAtISO:((d=(g=(L=(j=f.createdAt)==null?void 0:j.toDate)==null?void 0:L.call(j))==null?void 0:g.toISOString)==null?void 0:d.call(g))??null}});i(A),k("‚ö†Ô∏è ŸÖÿß ŸÅŸäŸá ŸÅŸáÿ±ÿ≥ ŸÑŸÄ createdAt ‚Äî ÿπÿ±ÿ∂ŸÜÿß ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿØŸàŸÜ ÿ™ÿ±ÿ™Ÿäÿ®.")}catch(N){k("‚ùå ŸÅÿ¥ŸÑ ÿßŸÑÿ¨ŸÑÿ® ÿ≠ÿ™Ÿâ ÿ®ÿØŸàŸÜ ÿ™ÿ±ÿ™Ÿäÿ®: "+((N==null?void 0:N.message)||N))}else k("‚ùå ÿÆÿ∑ÿ£ ÿßŸÑÿ¨ŸÑÿ®: "+((I==null?void 0:I.message)||I))}finally{y(!1)}})()},[t,s]),t)return e.jsx("div",{className:"p-8 text-center",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."});if(s!=="developer")return e.jsx(_a,{to:"/",replace:!0});const $=(M=Ns.options)==null?void 0:M.projectId;return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:"üîß DEBUG: Orders Snapshot (ŸÑŸÑŸÖÿ∑Ÿàÿ± ŸÅŸÇÿ∑)"}),e.jsxs("div",{className:"text-sm",children:["ProjectId: ",e.jsx("b",{children:String($)})]}),r&&e.jsx("div",{className:"text-red-600 text-sm",children:r}),c&&e.jsx("div",{children:"‚è≥ Loading‚Ä¶"}),!c&&n.length===0&&e.jsxs("div",{className:"text-gray-600",children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£Ÿä ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ŸÅŸä collection: ",e.jsx("code",{children:"orders"})," ŸÅŸä Ÿáÿ∞ÿß ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ."]}),n.map(I=>e.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[e.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",I.id]}),e.jsxs("div",{children:["restaurantId: ",e.jsx("b",{children:String(I.restaurantId)})]}),e.jsxs("div",{children:["items[0].ownerId: ",e.jsx("b",{children:String(I.firstItemOwnerId)})]}),e.jsxs("div",{children:["customerId: ",e.jsx("b",{children:String(I.customerId)})]}),e.jsxs("div",{children:["createdAt: ",e.jsx("b",{children:I.createdAtISO||"‚Äî"})]})]},I.id))]})},No=30*60*1e3,wo=60*60*1e3,vo=5*60*1e3,ko=(s={})=>{const{user:t,role:n,logout:i}=$e(),c=Qe(),y=a.useRef(null),r=a.useRef(null),k=a.useRef(!1),$=a.useCallback(()=>n==="developer"||n==="admin"?wo:No,[n]),M=a.useCallback(()=>{k.current||(k.current=!0,c.warning("ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿÆŸÑÿßŸÑ 5 ÿØŸÇÿßÿ¶ŸÇ ÿ®ÿ≥ÿ®ÿ® ÿπÿØŸÖ ÿßŸÑŸÜÿ¥ÿßÿ∑. ÿ≠ÿ±ŸëŸÉ ÿßŸÑŸÅÿ£ÿ±ÿ© ŸÑŸÑÿ®ŸÇÿßÿ° ŸÖÿ™ÿµŸÑÿßŸã.",{duration:1e4}))},[c]),I=a.useCallback(()=>{if(!t||s.disabled)return;k.current=!1,y.current&&clearTimeout(y.current),r.current&&clearTimeout(r.current);const A=$();r.current=setTimeout(()=>{M()},A-vo),y.current=setTimeout(async()=>{c.info("ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿ®ÿ≥ÿ®ÿ® ÿπÿØŸÖ ÿßŸÑŸÜÿ¥ÿßÿ∑ üëã"),await i()},A),localStorage.setItem("broast_last_activity",Date.now().toString())},[t,s.disabled,$,M,c,i]),N=a.useCallback(()=>{const A=localStorage.getItem("broast_last_activity");if(A){const p=Date.now()-parseInt(A,10),f=$();if(p>f)return c.info("ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿ®ÿ≥ÿ®ÿ® ÿπÿØŸÖ ÿßŸÑŸÜÿ¥ÿßÿ∑"),i(),!1}return!0},[$,c,i]);return a.useEffect(()=>{if(!t||s.disabled||!N())return;const A=["mousedown","mousemove","keydown","scroll","touchstart","click","focus"];return A.forEach(p=>{document.addEventListener(p,I,{passive:!0})}),I(),()=>{A.forEach(p=>{document.removeEventListener(p,I)}),y.current&&clearTimeout(y.current),r.current&&clearTimeout(r.current)}},[t,s.disabled,I,N]),{resetTimer:I,isActive:!!t&&!s.disabled}},So=()=>{const{items:s,subtotal:t}=oa(),n=gs();if(s.length===0)return null;const i=s.reduce((c,y)=>c+y.qty,0);return e.jsxs("button",{onClick:()=>n("/cart"),className:`fixed bottom-20 left-4 right-4 mx-auto max-w-md z-50 
        bg-gradient-to-r from-green-500 to-green-600 text-white 
        rounded-2xl shadow-2xl shadow-green-500/30
        px-6 py-4 flex items-center justify-between
        active:scale-95 transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(us,{className:"w-8 h-8"}),e.jsx("span",{className:`absolute -top-2 -right-2 bg-white text-green-600 
            w-6 h-6 rounded-full text-sm font-bold flex items-center justify-center`,children:i})]}),e.jsx("span",{className:"text-lg font-bold",children:"ÿπÿ±ÿ∂ ÿßŸÑÿ≥ŸÑÿ©"})]}),e.jsxs("span",{className:"text-xl font-bold",children:[t.toFixed(0)," ÿ±.ÿ≥"]})]})};function Co(){const{locationRequired:s,refreshUserData:t,loading:n,user:i}=$e();return ko({disabled:!i}),!n&&s?e.jsx(Ai,{onLocationSaved:t}):e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[e.jsx(Ci,{}),e.jsx(Si,{}),e.jsx(Ni,{})]}),e.jsx("div",{className:"h-[130px] sm:h-[150px]"}),e.jsx(So,{}),e.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:e.jsxs(jn,{children:[e.jsx(Pe,{path:"/",element:e.jsx(Ii,{})}),e.jsx(Pe,{path:"/restaurants",element:e.jsx(_i,{})}),e.jsx(Pe,{path:"/menu",element:e.jsx(zi,{})}),e.jsx(Pe,{path:"/cart",element:e.jsx(Wi,{})}),e.jsx(Pe,{path:"/login",element:e.jsx(Zi,{})}),e.jsx(Pe,{path:"/customer-login",element:e.jsx(rc,{})}),e.jsx(Pe,{path:"/register",element:e.jsx(tc,{})}),e.jsx(Pe,{path:"/register/form",element:e.jsx(ec,{})}),e.jsx(Pe,{path:"/register-owner",element:e.jsx(ac,{})}),e.jsx(Pe,{path:"/privacy-policy",element:e.jsx(lc,{})}),e.jsx(Pe,{path:"/terms",element:e.jsx(nc,{})}),e.jsx(Pe,{path:"/account-deleted",element:e.jsx(ic,{})}),e.jsx(Pe,{path:"/setup-dev",element:e.jsx(co,{})}),e.jsx(Pe,{path:"/chat",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(Gc,{})})})}),e.jsx(Pe,{path:"/notifications",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(Yc,{})})})}),e.jsx(Pe,{path:"/support",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(Xc,{})})})}),e.jsx(Pe,{path:"/report-problem",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["customer","courier","owner","developer"],children:e.jsx(go,{})})})}),e.jsx(Pe,{path:"/checkout",element:e.jsx(dc,{})}),e.jsx(Pe,{path:"/orders",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["customer","admin","developer"],children:e.jsx(fc,{})})})}),e.jsx(Pe,{path:"/profile",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(jc,{})})})}),e.jsx(Pe,{path:"/owner",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["owner","developer"],children:e.jsx(yc,{})})})}),e.jsx(Pe,{path:"/owner/menu",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["owner","developer"],children:e.jsx(wc,{})})})}),e.jsx(Pe,{path:"/owner/orders",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["owner","developer"],children:e.jsx(kc,{})})})}),e.jsx(Pe,{path:"/owner/edit",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["owner","developer"],children:e.jsx(Cc,{})})})}),e.jsx(Pe,{path:"/owner/courier-requests",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["owner","developer"],children:e.jsx(Ac,{})})})}),e.jsx(Pe,{path:"/owner/packages",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["owner","developer"],children:e.jsx(Dc,{})})})}),e.jsx(Pe,{path:"/owner/offers",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["owner","developer"],children:e.jsx($c,{})})})}),e.jsx(Pe,{path:"/owner/stories",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["owner","developer"],children:e.jsx(Ec,{})})})}),e.jsx(Pe,{path:"/owner/promotion",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["owner","developer"],children:e.jsx(Rc,{})})})}),e.jsx(Pe,{path:"/courier",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["courier","developer"],children:e.jsx(Bc,{})})})}),e.jsx(Pe,{path:"/courier/hiring",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["courier","developer"],children:e.jsx(Vc,{})})})}),e.jsx(Pe,{path:"/admin",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["admin","developer"],children:e.jsx(Zc,{})})})}),e.jsx(Pe,{path:"/admin/restaurants",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["admin","developer"],children:e.jsx(eo,{})})})}),e.jsx(Pe,{path:"/admin/orders",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["admin","developer"],children:e.jsx(so,{})})})}),e.jsx(Pe,{path:"/developer",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["developer","admin"],children:e.jsx(to,{})})})}),e.jsx(Pe,{path:"/support-admin",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["developer"],children:e.jsx(mo,{})})})}),e.jsx(Pe,{path:"/problems-admin",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["developer"],children:e.jsx(ho,{})})})}),e.jsx(Pe,{path:"/accounting",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["developer"],children:e.jsx(bo,{})})})}),e.jsx(Pe,{path:"/reports-admin",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["admin","developer"],children:e.jsx(po,{})})})}),e.jsx(Pe,{path:"/owner/wallet",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["owner","developer"],children:e.jsx(fo,{})})})}),e.jsx(Pe,{path:"/courier/wallet",element:e.jsx(Ge,{children:e.jsx(Ee,{allow:["courier","developer"],children:e.jsx(jo,{})})})}),e.jsx(Pe,{path:"/__debug_orders",element:e.jsx(yo,{})}),e.jsx(Pe,{path:"*",element:e.jsx(_a,{to:"/",replace:!0})})]})}),e.jsx(ki,{})]})}a.createContext(void 0);const Ao=({children:s})=>e.jsx(e.Fragment,{children:s});gr.createRoot(document.getElementById("root")).render(e.jsx(yn.StrictMode,{children:e.jsx(Nn,{children:e.jsx(Mi,{children:e.jsx(wi,{children:e.jsx(yi,{children:e.jsxs(Ao,{children:["   ",e.jsx(Co,{})]})})})})})}));export{et as _,S as d,ql as n};
