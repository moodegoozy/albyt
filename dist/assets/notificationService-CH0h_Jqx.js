import{z as y,y as l,m as s,q as f,w as u,t as m}from"./vendor-firebase-Co4MdP0H.js";import{d as a,g}from"./index-FuU3jBZc.js";import"./vendor-react-C_wfuX_s.js";import"./vendor-icons-Dyg7S3Xx.js";async function t(e){try{const i={...e,read:!1,createdAt:y()},r=await l(s(a,"notifications"),i);console.log("ğŸ”” ØªÙ… Ø­ÙØ¸ Ø¥Ø´Ø¹Ø§Ø±:",e.type,"â†’",e.recipientId);try{await g(e.title,e.message,{icon:"/icon-192.png",tag:e.type+"-"+(e.orderId||Date.now()),url:e.actionUrl||"/"}),console.log("ğŸ“± ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Push Notification")}catch(o){console.warn("âš ï¸ Push Notification ØºÙŠØ± Ù…ØªØ§Ø­:",o)}return r.id}catch(i){return console.error("âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:",i),null}}async function I(e,i,r){await t({type:"order_accepted",recipientId:e,recipientType:"customer",title:"ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø·Ù„Ø¨Ùƒ âœ…",message:`${r} Ø¨Ø¯Ø£Øª Ø¨ØªØ¬Ù‡ÙŠØ² Ø·Ù„Ø¨Ùƒ`,orderId:i,restaurantName:r,actionType:"order",actionUrl:"/track-orders",priority:"high"})}async function U(e,i,r,o){const n=o==="pickup"?`Ø·Ù„Ø¨Ùƒ Ù…Ù† ${r} Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…! ØªØ¹Ø§Ù„ Ø§Ø³ØªÙ„Ù…Ù‡ ğŸƒ`:`Ø·Ù„Ø¨Ùƒ Ù…Ù† ${r} Ø¬Ø§Ù‡Ø²ØŒ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø¥Ù„ÙŠÙƒ ğŸš—`;await t({type:"order_ready",recipientId:e,recipientType:"customer",title:"Ø·Ù„Ø¨Ùƒ Ø¬Ø§Ù‡Ø²! ğŸ‰",message:n,orderId:i,restaurantName:r,actionType:"order",actionUrl:"/track-orders",priority:"high"})}async function _(e,i,r){await t({type:"courier_assigned",recipientId:e,recipientType:"customer",title:"Ù…Ù†Ø¯ÙˆØ¨ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ ğŸš—",message:`${r} Ø§Ø³ØªÙ„Ù… Ø·Ù„Ø¨Ùƒ ÙˆÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø¥Ù„ÙŠÙƒ`,orderId:i,actionType:"order",actionUrl:"/track-orders",priority:"normal"})}async function O(e,i,r){await t({type:"order_delivered",recipientId:e,recipientType:"customer",title:"ÙˆØµÙ„ Ø·Ù„Ø¨Ùƒ! ğŸ“¦",message:`ØªÙ… ØªÙˆØµÙŠÙ„ Ø·Ù„Ø¨Ùƒ Ù…Ù† ${r}. Ø¨Ø§Ù„Ø¹Ø§ÙÙŠØ©! ğŸ½ï¸`,orderId:i,restaurantName:r,actionType:"order",actionUrl:"/track-orders",priority:"normal"})}async function k(e,i,r,o){await t({type:"order_ready",recipientId:e,recipientType:"courier",title:"Ø·Ù„Ø¨ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙˆØµÙŠÙ„ ğŸ“¦",message:`Ù…Ù† ${r} Ø¥Ù„Ù‰ ${o}`,orderId:i,restaurantName:r,actionType:"order",actionUrl:"/courier",priority:"high"})}async function D(e,i,r,o,n){try{const c=f(s(a,"users"),u("role","in",["developer","admin"])),p=await m(c);for(const d of p.docs)await t({type:"admin_new_order",recipientId:d.id,recipientType:"admin",title:"ğŸ’° Ø·Ù„Ø¨ Ù†Ø§Ø¬Ø­!",message:`${i} â†’ ${r} | ${o.toFixed(2)} Ø±.Ø³ (Ø±Ø³ÙˆÙ…: ${n.toFixed(2)})`,orderId:e,restaurantName:i,actionType:"order",actionUrl:"/admin/orders",priority:"normal"});console.log("ğŸ“Š ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù†Ø§Ø¬Ø­")}catch(c){console.error("âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:",c)}}async function v(e,i,r){await t({type:"order_preparing",recipientId:e,recipientType:"customer",title:"Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø·Ù„Ø¨Ùƒ ğŸ‘¨â€ğŸ³",message:`${r} Ø¨Ø¯Ø£Øª Ø¨ØªØ¬Ù‡ÙŠØ² Ø·Ù„Ø¨Ùƒ`,orderId:i,restaurantName:r,actionType:"order",actionUrl:"/orders",priority:"normal"})}export{D as notifyAdminSuccessfulOrder,_ as notifyCourierAssigned,k as notifyCourierOrderReady,I as notifyOrderAccepted,O as notifyOrderDelivered,v as notifyOrderPreparing,U as notifyOrderReady,t as sendSmartNotification};
