import{u as U,j as e,d as j}from"./index-FuU3jBZc.js";import{b as M,r as i,L as a}from"./vendor-react-C_wfuX_s.js";import{t as u,m as g,q,w as F}from"./vendor-firebase-Co4MdP0H.js";import{c as P,M as Q}from"./distance-B2TXkT8a.js";import{L as G,l as L,G as O,S as N,N as X,m as B,j as V,n as S,o as Y,c as z,C as H}from"./vendor-icons-Dyg7S3Xx.js";const ae=()=>{var y;const{user:c,role:n,loading:x,logout:r,userLocation:m}=U();M();const[b,T]=i.useState([]),[f,C]=i.useState([]),[w,I]=i.useState([]),[J,_]=i.useState(!0);return i.useEffect(()=>{if(x)return;(async()=>{try{const v=(await u(g(j,"restaurants"))).docs.map(t=>({id:t.id,...t.data()})),k=(await u(g(j,"menuItems"))).docs.map(t=>({id:t.id,...t.data()})),h=new Map;k.forEach(t=>{t.available!==!1&&h.set(t.ownerId,(h.get(t.ownerId)||0)+1)});let p=v.filter(t=>!!t.logoUrl&&!!t.geoLocation&&(h.get(t.id)||0)>0);m&&(p=p.map(t=>({...t,distance:t.geoLocation?P(m,t.geoLocation):void 0})).filter(t=>t.distance!==void 0&&t.distance<=Q).sort((t,l)=>t.packageType==="premium"&&l.packageType!=="premium"?-1:l.packageType==="premium"&&t.packageType!=="premium"?1:(t.distance||999)-(l.distance||999))),C(p.slice(0,6));const A=q(g(j,"offers"),F("isActive","==",!0)),D=await u(A),$=new Date,E=D.docs.map(t=>{var l,o;return{id:t.id,...t.data(),expiresAt:(o=(l=t.data().expiresAt)==null?void 0:l.toDate)==null?void 0:o.call(l)}}).filter(t=>!t.expiresAt||new Date(t.expiresAt)>$).slice(0,4);T(E);const R=k.filter(t=>t.available!==!1&&(t.orderCount||0)>0).sort((t,l)=>(l.orderCount||0)-(t.orderCount||0)).slice(0,4).map(t=>{const l=v.find(o=>o.id===t.ownerId);return{...t,restaurantName:l==null?void 0:l.name}});I(R)}catch(d){console.error("Error loading data:",d)}finally{_(!1)}})()},[x,m]),x?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-20 h-20 mb-4 bg-gradient-to-br from-sky-400 to-sky-600 rounded-3xl flex items-center justify-center shadow-xl shadow-sky-500/30 animate-pulse",children:e.jsx("span",{className:"text-4xl",children:"ğŸ½ï¸"})})}),e.jsx(G,{className:"w-6 h-6 text-sky-500 animate-spin mb-2"}),e.jsx("p",{className:"text-sky-600 font-semibold",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 pb-24",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-sky-200/30 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative px-4 py-6 max-w-lg mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-3 bg-gradient-to-br from-sky-400 to-sky-600 rounded-3xl flex items-center justify-center shadow-xl shadow-sky-500/30",children:e.jsx("span",{className:"text-4xl",children:"ğŸ½ï¸"})}),e.jsx("h1",{className:"text-2xl font-black text-sky-700",children:"Ø³ÙØ±Ø© Ø§Ù„Ø¨ÙŠØª"}),e.jsx("p",{className:"text-sky-600/70 text-sm",children:"Ø£Ø´Ù‡Ù‰ Ø§Ù„Ø£ÙƒÙ„Ø§Øª Ø§Ù„Ø¨ÙŠØªÙŠØ© ØªÙˆØµÙ„Ùƒ ğŸš—"}),c&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-white/80 px-4 py-2 rounded-full shadow-sm",children:[e.jsx("span",{className:"text-sky-600",children:"Ø£Ù‡Ù„Ø§Ù‹"}),e.jsx("span",{className:"font-bold text-gray-800",children:c.displayName||((y=c.email)==null?void 0:y.split("@")[0])}),e.jsx("span",{children:"ğŸ‘‹"})]})]}),!c&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{to:"/restaurants",className:"block bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 shadow-xl shadow-sky-500/30 active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ğŸª"})}),e.jsxs("div",{className:"text-white text-right",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ØªØµÙØ­ Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø§ÙƒØªØ´Ù Ø£Ø´Ù‡Ù‰ Ø§Ù„Ø£ÙƒÙ„Ø§Øª"})]})]}),e.jsx(L,{className:"w-6 h-6 text-white/80"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(a,{to:"/login",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"ğŸ”‘"}),e.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"Ø¯Ø®ÙˆÙ„"})]}),e.jsxs(a,{to:"/register",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"âœ¨"}),e.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯"})]})]})]}),n==="customer"&&e.jsxs("div",{className:"space-y-5",children:[e.jsx(a,{to:"/restaurants",className:"block bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 shadow-xl shadow-emerald-500/30 active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-5xl block mb-2",children:"ğŸ´"}),e.jsx("h2",{className:"text-2xl font-black text-white",children:"Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†!"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ù…Ù† Ø£Ø´Ù‡Ù‰ Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø© Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© Ù…Ù†Ùƒ"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(a,{to:"/cart",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"ğŸ›’"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Ø§Ù„Ø³Ù„Ø©"})]}),e.jsxs(a,{to:"/orders",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"ğŸ“¦"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Ø·Ù„Ø¨Ø§ØªÙŠ"})]}),e.jsxs(a,{to:"/profile",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"ğŸ‘¤"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Ø­Ø³Ø§Ø¨ÙŠ"})]})]})]}),b.length>0&&(!c||n==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-pink-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"ğŸ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø£Ø³Ø±"})]}),e.jsx(a,{to:"/restaurants",className:"text-sky-500 text-sm font-semibold",children:"Ø§Ù„Ù…Ø²ÙŠØ¯ â†"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(s=>{const d=s.offerType==="percent_discount"?"from-amber-400 to-orange-500":s.offerType==="fixed_discount"?"from-green-400 to-emerald-500":s.offerType==="bundle_meal"?"from-purple-400 to-violet-500":"from-pink-400 to-rose-500";return e.jsxs(a,{to:`/menu?restaurant=${s.ownerId}`,className:"bg-white rounded-xl shadow-md overflow-hidden active:scale-95 transition-all",children:[e.jsxs("div",{className:`bg-gradient-to-r ${d} p-3 text-white`,children:[e.jsx("p",{className:"font-bold text-sm line-clamp-1",children:s.title}),e.jsxs("p",{className:"text-xl font-black",children:[s.offerType==="percent_discount"&&`${s.discountPercent}% Ø®ØµÙ…`,s.offerType==="fixed_discount"&&`ÙˆÙÙ‘Ø± ${s.discountAmount} Ø±.Ø³`,s.offerType==="bundle_meal"&&`${s.bundlePrice} Ø±.Ø³`,s.offerType==="buy_x_get_y"&&`${s.buyQuantity}+${s.getQuantity} Ù…Ø¬Ø§Ù†Ø§Ù‹`]})]}),e.jsxs("div",{className:"p-2 flex items-center gap-2",children:[s.restaurantLogo?e.jsx("img",{src:s.restaurantLogo,alt:"",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-sky-100 flex items-center justify-center",children:e.jsx(N,{className:"w-4 h-4 text-sky-500"})}),e.jsx("span",{className:"text-xs font-semibold text-gray-700 truncate",children:s.restaurantName||"Ø£Ø³Ø±Ø© Ù…Ù†ØªØ¬Ø©"})]})]},s.id)})})]}),f.length>0&&(!c||n==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-sky-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"ğŸ  Ø§Ù„Ø£Ø³Ø± Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© Ù…Ù†Ùƒ"})]}),e.jsx(a,{to:"/restaurants",className:"text-sky-500 text-sm font-semibold",children:"Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ â†"})]}),e.jsx("div",{className:"space-y-3",children:f.map(s=>e.jsxs(a,{to:`/menu?restaurant=${s.id}`,className:"flex items-center gap-3 bg-white rounded-xl p-3 shadow-md active:scale-[0.98] transition-all",children:[s.logoUrl?e.jsx("img",{src:s.logoUrl,alt:s.name,className:"w-14 h-14 rounded-xl object-cover"}):e.jsx("div",{className:"w-14 h-14 rounded-xl bg-sky-100 flex items-center justify-center",children:e.jsx(N,{className:"w-7 h-7 text-sky-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 truncate",children:s.name}),s.packageType==="premium"&&e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded",children:"â­"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1",children:[s.distance!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"w-3 h-3"}),s.distance.toFixed(1)," ÙƒÙ…"]}),s.averageRating&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3 fill-amber-400 text-amber-400"}),s.averageRating.toFixed(1)]}),s.city&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"w-3 h-3"}),s.city]})]})]}),e.jsx(L,{className:"w-5 h-5 text-gray-400"})]},s.id))})]}),w.length>0&&(!c||n==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(S,{className:"w-5 h-5 text-orange-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map(s=>e.jsxs(a,{to:`/menu?restaurant=${s.ownerId}`,className:"bg-white rounded-xl shadow-md overflow-hidden active:scale-95 transition-all",children:[e.jsxs("div",{className:"relative aspect-square bg-sky-50",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Y,{className:"w-10 h-10 text-sky-300"})}),e.jsxs("span",{className:"absolute top-2 right-2 bg-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),s.orderCount,"+"]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-bold text-sm text-gray-800 line-clamp-1",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:s.restaurantName}),e.jsxs("p",{className:"font-bold text-sky-600 text-sm mt-1",children:[s.price," Ø±.Ø³"]})]})]},s.id))})]}),n==="owner"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(a,{to:"/owner",className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"ğŸ“Š"}),e.jsx("h3",{className:"font-bold text-sm",children:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"})]}),e.jsxs(a,{to:"/owner/orders",className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"ğŸ“‹"}),e.jsx("h3",{className:"font-bold text-sm",children:"Ø§Ù„Ø·Ù„Ø¨Ø§Øª"})]}),e.jsxs(a,{to:"/owner/menu",className:"bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"ğŸ½ï¸"}),e.jsx("h3",{className:"font-bold text-sm",children:"Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©"})]}),e.jsxs(a,{to:"/owner/edit",className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"âš™ï¸"}),e.jsx("h3",{className:"font-bold text-sm",children:"Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"})]})]}),e.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),n==="courier"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(a,{to:"/courier",className:"block bg-gradient-to-r from-sky-500 to-blue-600 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-4xl",children:"ğŸš—"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø§Ø³ØªÙ„Ù… ÙˆØ§ÙˆØµÙ„ Ø·Ù„Ø¨Ø§Øª"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(a,{to:"/courier/wallet",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"ğŸ’°"}),e.jsx("span",{className:"font-bold text-gray-700 text-sm",children:"Ù…Ø­ÙØ¸ØªÙŠ"})]}),e.jsxs(a,{to:"/profile",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"ğŸ‘¤"}),e.jsx("span",{className:"font-bold text-gray-700 text-sm",children:"Ø­Ø³Ø§Ø¨ÙŠ"})]})]}),e.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),n==="admin"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(a,{to:"/admin",className:"block bg-gradient-to-r from-violet-500 to-purple-600 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"})]})]})}),e.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),n==="developer"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(a,{to:"/developer",className:"block bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ±"}),e.jsx("p",{className:"text-white/60 text-sm",children:"ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„"})]})]})}),e.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-sky-500/50 text-xs",children:"ØµÙÙ†Ø¹ Ø¨Ù€ â¤ï¸ ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©"})})]})]})};export{ae as Landing,ae as default};
