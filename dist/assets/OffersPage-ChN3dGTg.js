import{u as me,b as pe,j as e,d as x,f as xe}from"./index-FuU3jBZc.js";import{e as be,r as d}from"./vendor-react-C_wfuX_s.js";import{j as ge,k as w,q as T,m as k,w as C,t as O,z as S,u as L,y as fe,p as he,e as ye,H as je,K as ve,J as Ne}from"./vendor-firebase-Co4MdP0H.js";import{i as we}from"./ramadanConfig-1vuKGRGR.js";import{L as R,Y as ke,X as P,aE as Pe,u as G,a4 as Ie,y as E,x as _e,P as Ae,G as z,ah as Te,al as Ce,as as B,aF as Oe,aG as Se,h as Re,k as Qe,K as Ee}from"./vendor-icons-Dyg7S3Xx.js";const Y=[{value:"percent_discount",label:"Ø®ØµÙ… Ù†Ø³Ø¨Ø© %",icon:_e,desc:"Ø®ØµÙ… Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨"},{value:"fixed_discount",label:"Ø®ØµÙ… Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª",icon:E,desc:"Ø®ØµÙ… Ù…Ø¨Ù„Øº Ù…Ø­Ø¯Ø¯ Ù…Ù† Ø§Ù„Ø·Ù„Ø¨"},{value:"bundle_meal",label:"ÙˆØ¬Ø¨Ø© Ù…Ø¬Ù…Ù‘Ø¹Ø©",icon:Ae,desc:"Ù…Ø¬Ù…ÙˆØ¹Ø© Ø£ØµÙ†Ø§Ù Ø¨Ø³Ø¹Ø± Ø®Ø§Øµ"},{value:"buy_x_get_y",label:"Ø§Ø´ØªØ±Ù ÙˆØ§Ø­ØµÙ„",icon:z,desc:"Ø§Ø´ØªØ±Ù 2 ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ 1 Ù…Ø¬Ø§Ù†Ø§Ù‹"}],Ue=[{value:"iftar_package",label:"Ø¨Ø§Ù‚Ø© Ø¥ÙØ·Ø§Ø±",icon:Pe,desc:"ÙˆØ¬Ø¨Ø© Ø¥ÙØ·Ø§Ø± Ù…ØªÙƒØ§Ù…Ù„Ø©",color:"from-amber-500 to-orange-600"},{value:"suhoor_package",label:"Ø¨Ø§Ù‚Ø© Ø³Ø­ÙˆØ±",icon:G,desc:"ÙˆØ¬Ø¨Ø© Ø³Ø­ÙˆØ± Ù…Ù…ÙŠØ²Ø©",color:"from-indigo-500 to-purple-600"},{value:"family_bundle",label:"Ø¹Ø±Ø¶ Ø¹Ø§Ø¦Ù„ÙŠ",icon:Ie,desc:"Ø¨Ø§Ù‚Ø© Ù„Ù„Ø¹Ø§Ø¦Ù„Ø© Ø¨Ø³Ø¹Ø± Ø®Ø§Øµ",color:"from-emerald-500 to-teal-600"},{value:"discount",label:"Ø®ØµÙ… Ø±Ù…Ø¶Ø§Ù†ÙŠ",icon:E,desc:"Ø®ØµÙ… Ø®Ø§Øµ Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø±Ù…Ø¶Ø§Ù†",color:"from-rose-500 to-pink-600"}],De=Y,Q={offerType:"percent_discount",title:"",description:"",discountPercent:10,discountAmount:5,minOrderAmount:0,bundleItems:[],bundlePrice:0,buyQuantity:2,getQuantity:1,applicableItemIds:[],expiresAt:"",imageUrl:"",originalPrice:0,offerPrice:0,servesCount:4},Be=()=>{const{user:u}=me(),o=pe(),[J]=be(),l=J.get("type")==="ramadan"&&we(),[U,g]=d.useState([]),[h,K]=d.useState([]),[H,X]=d.useState(!0),[D,$]=d.useState(!1),[V,y]=d.useState(!1),[j,I]=d.useState(null),[t,n]=d.useState({...Q,offerType:l?"iftar_package":"percent_discount"}),[f,W]=d.useState(null),[Z,v]=d.useState(!1),[ee,F]=d.useState(0),[M,b]=d.useState(null),q=d.useRef(null);d.useEffect(()=>{if(!u)return;(async()=>{try{const a=await ge(w(x,"restaurants",u.uid));a.exists()&&W(a.data());const r=T(k(x,"offers"),C("ownerId","==",u.uid)),m=(await O(r)).docs.map(p=>({id:p.id,...p.data()})),c=T(k(x,"ramadanOffers"),C("ownerId","==",u.uid)),ce=(await O(c)).docs.map(p=>({id:p.id,...p.data(),isRamadanOffer:!0}));g(l?ce:m);const de=T(k(x,"menuItems"),C("ownerId","==",u.uid)),ue=await O(de);K(ue.docs.map(p=>({id:p.id,...p.data()})))}catch(a){console.error("Error fetching data:",a),o.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{X(!1)}})()},[u,l]);const se=async s=>{if(u){v(!0),F(0);try{const a=ye(xe),r=`ramadan_offers/${u.uid}/${Date.now()}_${s.name}`,i=je(a,r),m=ve(i,s);m.on("state_changed",c=>{const N=c.bytesTransferred/c.totalBytes*100;F(N)},c=>{console.error("Upload error:",c),o.error("ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©"),v(!1)},async()=>{const c=await Ne(m.snapshot.ref);n(N=>({...N,imageUrl:c})),b(c),v(!1),o.success("ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© âœ…")})}catch(a){console.error("Error uploading image:",a),o.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©"),v(!1)}}},te=s=>{var r;const a=(r=s.target.files)==null?void 0:r[0];if(a){if(a.size>5*1024*1024){o.error("Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚Ù„ Ù…Ù† 5MB");return}const i=new FileReader;i.onload=m=>{var c;b((c=m.target)==null?void 0:c.result)},i.readAsDataURL(a),se(a)}},_=s=>["iftar_package","suhoor_package","family_bundle","discount"].includes(s),ae=async()=>{if(u){if(!t.title.trim()){o.error("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø±Ø¶");return}if(l&&_(t.offerType)&&t.offerType!=="discount"&&(!t.offerPrice||t.offerPrice<=0)){o.error("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± Ø§Ù„Ø¹Ø±Ø¶");return}$(!0);try{const s=l?"ramadanOffers":"offers",a={ownerId:u.uid,restaurantId:u.uid,restaurantName:f==null?void 0:f.name,restaurantLogo:f==null?void 0:f.logoUrl,offerType:t.offerType,title:t.title.trim(),description:t.description.trim(),isActive:!0,viewsCount:0,usedCount:0,updatedAt:S()};if(l&&_(t.offerType)?(a.imageUrl=t.imageUrl||"",a.originalPrice=t.originalPrice||0,a.offerPrice=t.offerPrice||0,a.servesCount=t.servesCount||4,a.isRamadanOffer=!0,t.originalPrice>0&&t.offerPrice>0&&(a.discountPercent=Math.round((t.originalPrice-t.offerPrice)/t.originalPrice*100))):t.offerType==="percent_discount"?(a.discountPercent=t.discountPercent,a.minOrderAmount=t.minOrderAmount):t.offerType==="fixed_discount"?(a.discountAmount=t.discountAmount,a.minOrderAmount=t.minOrderAmount):t.offerType==="bundle_meal"?(a.bundleItems=t.bundleItems,a.bundlePrice=t.bundlePrice,a.bundleOriginalPrice=t.bundleItems.reduce((r,i)=>r+i.originalPrice*i.quantity,0)):t.offerType==="buy_x_get_y"&&(a.buyQuantity=t.buyQuantity,a.getQuantity=t.getQuantity,a.applicableItemIds=t.applicableItemIds,a.applicableItemNames=h.filter(r=>t.applicableItemIds.includes(r.id)).map(r=>r.name)),t.expiresAt&&(a.expiresAt=new Date(t.expiresAt)),j)await L(w(x,s,j),a),g(r=>r.map(i=>i.id===j?{...i,...a}:i)),o.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶ âœ…");else{a.createdAt=S();const r=await fe(k(x,s),a);g(i=>[{id:r.id,...a},...i]),o.success("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¶ âœ…")}y(!1),I(null),n({...Q,offerType:l?"iftar_package":"percent_discount"}),b(null)}catch(s){console.error("Error saving offer:",s),o.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¹Ø±Ø¶")}finally{$(!1)}}},re=async s=>{const a=s.isRamadanOffer?"ramadanOffers":"offers";try{await L(w(x,a,s.id),{isActive:!s.isActive,updatedAt:S()}),g(r=>r.map(i=>i.id===s.id?{...i,isActive:!i.isActive}:i)),o.success(s.isActive?"ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ø±Ø¶":"ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶")}catch{o.error("Ø­Ø¯Ø« Ø®Ø·Ø£")}},le=async(s,a)=>{if(!confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø±Ø¶ØŸ"))return;const r=l?"ramadanOffers":"offers";try{await he(w(x,r,s)),g(i=>i.filter(m=>m.id!==s)),o.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ø±Ø¶")}catch{o.error("Ø­Ø¯Ø« Ø®Ø·Ø£")}},ne=s=>{I(s.id),n({offerType:s.offerType,title:s.title,description:s.description||"",discountPercent:s.discountPercent||10,discountAmount:s.discountAmount||5,minOrderAmount:s.minOrderAmount||0,bundleItems:s.bundleItems||[],bundlePrice:s.bundlePrice||0,buyQuantity:s.buyQuantity||2,getQuantity:s.getQuantity||1,applicableItemIds:s.applicableItemIds||[],expiresAt:s.expiresAt?new Date(s.expiresAt).toISOString().slice(0,16):"",imageUrl:s.imageUrl||"",originalPrice:s.originalPrice||0,offerPrice:s.offerPrice||0,servesCount:s.servesCount||4}),b(s.imageUrl||null),y(!0)},ie=s=>{const a=t.bundleItems.find(r=>r.itemId===s.id);n(a?{...t,bundleItems:t.bundleItems.map(r=>r.itemId===s.id?{...r,quantity:r.quantity+1}:r)}:{...t,bundleItems:[...t.bundleItems,{itemId:s.id,itemName:s.name,quantity:1,originalPrice:s.price}]})},oe=s=>{n({...t,bundleItems:t.bundleItems.filter(a=>a.itemId!==s)})},A=t.bundleItems.reduce((s,a)=>s+a.originalPrice*a.quantity,0);return H?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(R,{className:"w-8 h-8 text-sky-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`flex items-center justify-between ${l?"bg-gradient-to-r from-purple-900 to-emerald-900 -mx-4 -mt-4 p-4 rounded-b-2xl":""}`,children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${l?"text-amber-300":"text-sky-700"}`,children:l?"ğŸŒ™ Ø¹Ø±ÙˆØ¶ Ø±Ù…Ø¶Ø§Ù†":"ğŸ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§ØµØ©"}),e.jsx("p",{className:`text-sm mt-1 ${l?"text-purple-200":"text-gray-500"}`,children:l?"Ø£Ø¶Ù Ø¨Ø§Ù‚Ø§Øª Ø¥ÙØ·Ø§Ø± ÙˆØ³Ø­ÙˆØ± ÙˆØ¹Ø±ÙˆØ¶ Ø±Ù…Ø¶Ø§Ù†ÙŠØ© Ù…Ù…ÙŠØ²Ø©":"Ø£Ø¶Ù Ø¹Ø±ÙˆØ¶ ØªØ¬Ø°Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØªØ²ÙŠØ¯ Ù…Ø¨ÙŠØ¹Ø§ØªÙƒ"})]}),e.jsxs("button",{onClick:()=>{y(!0),I(null),n({...Q,offerType:l?"iftar_package":"percent_discount"}),b(null)},className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold shadow-lg hover:scale-105 transition ${l?"bg-gradient-to-r from-amber-400 to-amber-500 text-purple-900":"bg-gradient-to-r from-sky-500 to-sky-600 text-white"}`,children:[e.jsx(ke,{className:"w-5 h-5"}),l?"Ø¹Ø±Ø¶ Ø±Ù…Ø¶Ø§Ù†ÙŠ":"Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯"]})]}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:`p-4 text-white sticky top-0 z-10 ${l?"bg-gradient-to-r from-purple-900 to-emerald-900":"bg-gradient-to-r from-sky-500 to-sky-600"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold",children:j?l?"âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø¹Ø±Ø¶ Ø±Ù…Ø¶Ø§Ù†":"âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶":l?"ğŸŒ™ Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø±Ù…Ø¶Ø§Ù†ÙŠ":"â• Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯"}),e.jsx("button",{onClick:()=>{y(!1),b(null)},className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(P,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø±Ø¶"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(l?Ue:Y).map(s=>e.jsxs("button",{onClick:()=>n({...t,offerType:s.value}),className:`p-3 rounded-xl border-2 text-right transition ${t.offerType===s.value?l?"border-purple-500 bg-purple-50":"border-sky-500 bg-sky-50":"border-gray-200 hover:border-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(s.icon,{className:`w-5 h-5 ${t.offerType===s.value?l?"text-purple-600":"text-sky-600":"text-gray-400"}`}),e.jsx("span",{className:"font-bold text-sm",children:s.label})]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.desc})]},s.value))})]}),l&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ØµÙˆØ±Ø© Ø§Ù„Ø¹Ø±Ø¶"}),e.jsxs("div",{className:"border-2 border-dashed border-purple-300 rounded-xl p-4 text-center bg-purple-50/50",children:[M?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:M,alt:"Ù…Ø¹Ø§ÙŠÙ†Ø©",className:"w-full h-48 object-cover rounded-xl"}),e.jsx("button",{onClick:()=>{b(null),n({...t,imageUrl:""})},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:e.jsx(P,{className:"w-4 h-4"})})]}):e.jsx("div",{onClick:()=>{var s;return(s=q.current)==null?void 0:s.click()},className:"cursor-pointer py-8",children:Z?e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{className:"w-10 h-10 text-purple-500 animate-spin mx-auto"}),e.jsxs("p",{className:"text-purple-600 font-bold",children:[Math.round(ee),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-12 h-12 text-purple-400 mx-auto mb-2"}),e.jsx("p",{className:"text-purple-600 font-semibold",children:"Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¹Ø±Ø¶"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG Ø­ØªÙ‰ 5MB"})]})}),e.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:te,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø±Ø¶ *"}),e.jsx("input",{type:"text",value:t.title,onChange:s=>n({...t,title:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ø¹Ø±Ø¶ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÙˆØµÙ Ø§Ù„Ø¹Ø±Ø¶"}),e.jsx("textarea",{value:t.description,onChange:s=>n({...t,description:s.target.value}),placeholder:l?"ÙˆØµÙ Ù…Ø­ØªÙˆÙŠØ§Øª Ø§Ù„Ø¨Ø§Ù‚Ø©...":"ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„Ø¹Ø±Ø¶...",rows:2,className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none resize-none"})]}),l&&_(t.offerType)&&t.offerType!=="discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-gradient-to-br from-purple-50 to-amber-50 rounded-xl border-2 border-purple-200",children:[e.jsxs("h4",{className:"font-bold text-purple-800 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø©"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ØªÙƒÙÙŠ ÙƒÙ… Ø´Ø®ØµØŸ"}),e.jsx("div",{className:"flex gap-2",children:[2,4,6,8,10].map(s=>e.jsx("button",{type:"button",onClick:()=>n({...t,servesCount:s}),className:`px-4 py-2 rounded-lg font-bold transition ${t.servesCount===s?"bg-purple-600 text-white":"bg-white border border-purple-200 text-purple-600 hover:bg-purple-50"}`,children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ (Ø±.Ø³)"}),e.jsx("input",{type:"number",value:t.originalPrice||"",onChange:s=>n({...t,originalPrice:Number(s.target.value)||0}),placeholder:"150",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø³Ø¹Ø± Ø§Ù„Ø¹Ø±Ø¶ (Ø±.Ø³) *"}),e.jsx("input",{type:"number",value:t.offerPrice||"",onChange:s=>n({...t,offerPrice:Number(s.target.value)||0}),placeholder:"99",className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]})]}),t.originalPrice>0&&t.offerPrice>0&&t.originalPrice>t.offerPrice&&e.jsxs("div",{className:"bg-green-100 text-green-700 p-3 rounded-xl text-center font-bold",children:["ØªÙˆÙÙŠØ± ",Math.round((t.originalPrice-t.offerPrice)/t.originalPrice*100),"% ğŸ‰"]})]}),l&&t.offerType==="discount"&&e.jsx("div",{className:"space-y-4 p-4 bg-rose-50 rounded-xl",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… %"}),e.jsx("input",{type:"number",value:t.discountPercent,onChange:s=>n({...t,discountPercent:Number(s.target.value)}),min:1,max:90,className:"w-full border-2 border-rose-200 rounded-xl px-4 py-3 focus:border-rose-500 focus:outline-none"})]})}),!l&&t.offerType==="percent_discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-amber-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… %"}),e.jsx("input",{type:"number",value:t.discountPercent,onChange:s=>n({...t,discountPercent:Number(s.target.value)}),min:1,max:90,className:"w-full border-2 border-amber-200 rounded-xl px-4 py-3 focus:border-amber-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø·Ù„Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"number",value:t.minOrderAmount||"",onChange:s=>n({...t,minOrderAmount:Number(s.target.value)||0}),placeholder:"0 = Ø¨Ø¯ÙˆÙ† Ø­Ø¯ Ø£Ø¯Ù†Ù‰",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]})]}),!l&&t.offerType==="fixed_discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-green-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ù…Ø¨Ù„Øº Ø§Ù„Ø®ØµÙ… (Ø±.Ø³)"}),e.jsx("input",{type:"number",value:t.discountAmount,onChange:s=>n({...t,discountAmount:Number(s.target.value)}),min:1,className:"w-full border-2 border-green-200 rounded-xl px-4 py-3 focus:border-green-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø·Ù„Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"number",value:t.minOrderAmount||"",onChange:s=>n({...t,minOrderAmount:Number(s.target.value)||0}),placeholder:"0 = Ø¨Ø¯ÙˆÙ† Ø­Ø¯ Ø£Ø¯Ù†Ù‰",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]})]}),!l&&t.offerType==="bundle_meal"&&e.jsxs("div",{className:"space-y-4 p-4 bg-purple-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø£ØµÙ†Ø§Ù Ø§Ù„ÙˆØ¬Ø¨Ø©"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:t.bundleItems.map(s=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white rounded-full text-sm border",children:[s.itemName," Ã— ",s.quantity,e.jsx("button",{onClick:()=>oe(s.itemId),className:"text-red-500 hover:text-red-700",children:e.jsx(P,{className:"w-4 h-4"})})]},s.itemId))}),e.jsxs("select",{onChange:s=>{const a=h.find(r=>r.id===s.target.value);a&&ie(a),s.target.value=""},className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"+ Ø£Ø¶Ù ØµÙ†Ù Ù„Ù„ÙˆØ¬Ø¨Ø©"}),h.filter(s=>s.available!==!1).map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",s.price," Ø±.Ø³"]},s.id))]})]}),A>0&&e.jsxs("div",{className:"bg-white p-3 rounded-xl",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ: ",e.jsxs("span",{className:"line-through",children:[A," Ø±.Ø³"]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Ø³Ø¹Ø± Ø§Ù„Ø¹Ø±Ø¶"}),e.jsx("input",{type:"number",value:t.bundlePrice||"",onChange:s=>n({...t,bundlePrice:Number(s.target.value)}),placeholder:`Ø§Ù‚ØªØ±Ø­: ${(A*.8).toFixed(0)} Ø±.Ø³`,className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]})]})]}),!l&&t.offerType==="buy_x_get_y"&&e.jsxs("div",{className:"space-y-4 p-4 bg-pink-50 rounded-xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ø´ØªØ±Ù"}),e.jsx("input",{type:"number",value:t.buyQuantity,onChange:s=>n({...t,buyQuantity:Number(s.target.value)}),min:1,className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰"}),e.jsx("input",{type:"number",value:t.getQuantity,onChange:s=>n({...t,getQuantity:Number(s.target.value)}),min:1,className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø´Ù…ÙˆÙ„Ø©"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:t.applicableItemIds.map(s=>{const a=h.find(r=>r.id===s);return a?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white rounded-full text-sm border",children:[a.name,e.jsx("button",{onClick:()=>n({...t,applicableItemIds:t.applicableItemIds.filter(r=>r!==s)}),className:"text-red-500",children:e.jsx(P,{className:"w-4 h-4"})})]},s):null})}),e.jsxs("select",{onChange:s=>{s.target.value&&!t.applicableItemIds.includes(s.target.value)&&n({...t,applicableItemIds:[...t.applicableItemIds,s.target.value]}),s.target.value=""},className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"+ Ø£Ø¶Ù ØµÙ†Ù"}),h.filter(s=>s.available!==!1&&!t.applicableItemIds.includes(s.id)).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¹Ø±Ø¶ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx("input",{type:"datetime-local",value:t.expiresAt,onChange:s=>n({...t,expiresAt:s.target.value}),className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{onClick:ae,disabled:D,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-sky-500 to-sky-600 text-white rounded-xl font-bold shadow-lg hover:scale-[1.02] transition disabled:opacity-50",children:[D?e.jsx(R,{className:"w-5 h-5 animate-spin"}):e.jsx(Ce,{className:"w-5 h-5"}),j?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¶"]}),e.jsx("button",{onClick:()=>y(!1),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})}),U.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(z,{className:"w-10 h-10 text-sky-500"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø±ÙˆØ¶ Ø­Ø§Ù„ÙŠØ§Ù‹"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Ø£Ø¶Ù Ø¹Ø±ÙˆØ¶ Ù„Ø¬Ø°Ø¨ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"})]}):e.jsx("div",{className:"grid gap-4",children:U.map(s=>{var m;const a=De.find(c=>c.value===s.offerType),r=(a==null?void 0:a.icon)||E,i=s.expiresAt&&new Date(s.expiresAt)<new Date;return e.jsx("div",{className:`bg-white rounded-2xl shadow-md overflow-hidden border-2 transition ${!s.isActive||i?"border-gray-200 opacity-60":"border-sky-100"}`,children:e.jsxs("div",{className:"flex items-stretch",children:[e.jsx("div",{className:`w-24 flex-shrink-0 flex items-center justify-center ${s.offerType==="percent_discount"?"bg-amber-100":s.offerType==="fixed_discount"?"bg-green-100":s.offerType==="bundle_meal"?"bg-purple-100":"bg-pink-100"}`,children:e.jsx(r,{className:`w-10 h-10 ${s.offerType==="percent_discount"?"text-amber-600":s.offerType==="fixed_discount"?"text-green-600":s.offerType==="bundle_meal"?"text-purple-600":"text-pink-600"}`})}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500",children:a==null?void 0:a.label})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>re(s),className:`p-2 rounded-lg transition ${s.isActive?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:s.isActive?"Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ø±Ø¶":"ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶",children:s.isActive?e.jsx(B,{className:"w-4 h-4"}):e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ne(s),className:"p-2 rounded-lg bg-sky-100 text-sky-600 hover:bg-sky-200 transition",children:e.jsx(Se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>le(s.id),className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition",children:e.jsx(Re,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[s.offerType==="percent_discount"&&e.jsxs("p",{className:"text-amber-600 font-bold",children:["Ø®ØµÙ… ",s.discountPercent,"%"]}),s.offerType==="fixed_discount"&&e.jsxs("p",{className:"text-green-600 font-bold",children:["Ø®ØµÙ… ",s.discountAmount," Ø±.Ø³"]}),s.offerType==="bundle_meal"&&e.jsxs("p",{className:"text-purple-600 font-bold",children:[(m=s.bundleItems)==null?void 0:m.length," Ø£ØµÙ†Ø§Ù Ø¨Ù€ ",s.bundlePrice," Ø±.Ø³",e.jsxs("span",{className:"text-gray-400 line-through mr-2",children:[s.bundleOriginalPrice," Ø±.Ø³"]})]}),s.offerType==="buy_x_get_y"&&e.jsxs("p",{className:"text-pink-600 font-bold",children:["Ø§Ø´ØªØ±Ù ",s.buyQuantity," ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ ",s.getQuantity," Ù…Ø¬Ø§Ù†Ø§Ù‹"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"})," ",s.viewsCount||0," Ù…Ø´Ø§Ù‡Ø¯Ø©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3"})," ",s.usedCount||0," Ø§Ø³ØªØ®Ø¯Ø§Ù…"]}),i&&e.jsxs("span",{className:"text-red-500 flex items-center gap-1",children:[e.jsx(Ee,{className:"w-3 h-3"})," Ù…Ù†ØªÙ‡ÙŠ"]})]})]})]})},s.id)})})]})};export{Be as OffersPage,Be as default};
