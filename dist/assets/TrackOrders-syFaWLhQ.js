const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/refundService-Ck6lnjyu.js","assets/index-FuU3jBZc.js","assets/vendor-react-C_wfuX_s.js","assets/vendor-firebase-Co4MdP0H.js","assets/vendor-icons-Dyg7S3Xx.js","assets/index-KBblhOUv.css"])))=>i.map(i=>d[i]);
import{u as we,b as ke,a as Ce,j as e,d as x,_ as Ie}from"./index-FuU3jBZc.js";import{b as Re,r as h}from"./vendor-react-C_wfuX_s.js";import{q as D,F as ee,w as se,m as B,n as Ae,t as te,G as Te,u as M,z as S,k as v,j as $}from"./vendor-firebase-Co4MdP0H.js";import{R as Se}from"./RatingModal-D3FyVkKF.js";import{O as q}from"./OrderTimer-D2lI9vxz.js";import{ad as ae,X as Oe,R as re,af as _e,j as Fe,K as ne,e as ie,m as R,S as le,T as ce,f as H,ac as Pe,ag as Ee,H as De,P as de,a5 as Be}from"./vendor-icons-Dyg7S3Xx.js";import"./index-D6ulfRl4.js";const Xe=()=>{var K,U;const{user:w}=we(),k=Re(),p=ke(),{clear:oe,add:me}=Ce(),[O,_]=h.useState(null),[C,z]=h.useState([]),[y,L]=h.useState(null),[F,P]=h.useState(null),[g,A]=h.useState(null),[ue,W]=h.useState(!1),[j,T]=h.useState(null),xe=async(s,r)=>{W(!0),P(r);try{const t=await $(v(x,"restaurants",s,"private","bankInfo"));if(t.exists()){const a=t.data();A({bankName:a.bankName||"",bankAccountName:a.bankAccountName||"",bankAccountNumber:a.bankAccountNumber||""})}else{const a=await $(v(x,"restaurants",s));if(a.exists()){const n=a.data();A({bankName:n.bankName||"",bankAccountName:n.bankAccountName||"",bankAccountNumber:n.bankAccountNumber||""})}else A(null)}}catch{p.error("ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙØ¹"),A(null)}finally{W(!1)}},he=s=>{navigator.clipboard.writeText(s),p.success("ØªÙ… Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨! ðŸ“‹")};h.useEffect(()=>{if(!w)return;_(null),L(null);const s=D(B(x,"orders"),se("customerId","==",w.uid),ee("createdAt","desc")),r=Ae(s,t=>{z(t.docs.map(a=>({id:a.id,...a.data()}))),_(null)},async t=>{console.error("TrackOrders onSnapshot error:",t),_("âš ï¸ Ø§Ø­ØªÙ…Ø§Ù„ ØªØ­ØªØ§Ø¬ Composite Index Ù„Ù€ customerId + createdAt. Ø¨Ù†Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯ÙˆÙ† ØªØ±ØªÙŠØ¨ Ù…Ø¤Ù‚ØªÙ‹Ø§.");const a=D(B(x,"orders"),se("customerId","==",w.uid)),l=(await te(a)).docs.map(m=>({id:m.id,...m.data()})),i=D(B(x,"orders"),ee("createdAt","desc"),Te(5));let d=[];try{d=(await te(i)).docs.map(f=>{var o,b,N,I;const u=f.data();return{id:f.id,customerId:u.customerId,restaurantId:u.restaurantId,createdAt:((I=(N=(b=(o=u.createdAt)==null?void 0:o.toDate)==null?void 0:b.call(o))==null?void 0:N.toISOString)==null?void 0:I.call(N))??null}})}catch{}L({uid:w.uid,fallbackCount:l.length,sample:d}),z(l)});return()=>r()},[w]);const pe=s=>{var r;oe(),(r=s.items)==null||r.forEach(t=>{me({id:t.id,name:t.name,price:t.price,ownerId:t.ownerId||s.restaurantId},t.qty)}),p.success("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù„Ù„Ø³Ù„Ø©! ðŸ›’"),s.restaurantId?k(`/menu?restaurant=${s.restaurantId}`):k("/cart")},[X,G]=h.useState(null),ge=async s=>{if(s.status!=="pending"){p.error("Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø¹Ø¯ Ù‚Ø¨ÙˆÙ„Ù‡");return}if(window.confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ØŸ")){G(s.id);try{await M(v(x,"orders",s.id),{status:"cancelled",cancelledAt:S(),cancelledBy:"customer",updatedAt:S()});const{processOrderRefund:t,notifyRefundParties:a}=await Ie(async()=>{const{processOrderRefund:l,notifyRefundParties:i}=await import("./refundService-Ck6lnjyu.js");return{processOrderRefund:l,notifyRefundParties:i}},__vite__mapDeps([0,1,2,3,4,5])),n=await t({id:s.id,customerId:s.customerId,restaurantId:s.restaurantId||"",subtotal:s.subtotal,total:s.total,restaurantEarnings:s.restaurantEarnings,platformFee:s.platformFee,adminCommission:s.adminCommission,appEarnings:s.appEarnings,referredBy:s.referredBy,paymentMethod:s.paymentMethod});await a({id:s.id,customerId:s.customerId,restaurantId:s.restaurantId||"",subtotal:s.subtotal,total:s.total},n,"customer"),n.details.customerRefunded>0?p.success(`ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ø³ØªØ±Ø¯Ø§Ø¯ ${n.details.customerRefunded.toFixed(2)} Ø±.Ø³ Ù„Ù…Ø­ÙØ¸ØªÙƒ âœ…`):p.success("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­ âœ…")}catch(t){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨:",t),p.error("ÙØ´Ù„ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨")}finally{G(null)}}},E=s=>({pending:{text:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",emoji:"â³",color:"bg-yellow-500",icon:ne},accepted:{text:"ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„",emoji:"âœ…",color:"bg-blue-500",icon:H},preparing:{text:"Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±",emoji:"ðŸ‘¨â€ðŸ³",color:"bg-orange-500",icon:Be},ready:{text:"Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ³Ù„ÙŠÙ…",emoji:"ðŸ“¦",color:"bg-purple-500",icon:de},out_for_delivery:{text:"ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚",emoji:"ðŸš—",color:"bg-sky-500",icon:ce},delivered:{text:"ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…",emoji:"ðŸŽ‰",color:"bg-green-500",icon:H},cancelled:{text:"Ù…Ù„ØºÙŠ",emoji:"âŒ",color:"bg-red-500",icon:ie}})[s]||{text:s,emoji:"ðŸ“¦",color:"bg-gray-500",icon:de},je=s=>s.courierId&&s.status==="out_for_delivery",fe=s=>{const r=["pending","accepted","preparing","ready"];return!s.courierId&&s.restaurantId&&r.includes(s.status)},be=s=>["pending","accepted"].includes(s.status),Ne=s=>{var a,n,l,i;if(s.status!=="delivered")return!1;const r=(n=(a=s.ratings)==null?void 0:a.customerToRestaurant)==null?void 0:n.stars,t=(i=(l=s.ratings)==null?void 0:l.customerToCourier)==null?void 0:i.stars;return s.courierId?!r||!t:!r},ye=async(s,r,t)=>{var u,o;const a=C.find(b=>b.id===s);if(!a)return;const n={stars:t.stars,comment:t.comment||void 0,createdAt:new Date},i={[r==="restaurant"?"ratings.customerToRestaurant":"ratings.customerToCourier"]:n,updatedAt:S()},d=a.ratings||{};r==="restaurant"?d.customerToRestaurant=n:d.customerToCourier=n;const m=(u=d.customerToRestaurant)==null?void 0:u.stars,f=(o=d.customerToCourier)==null?void 0:o.stars;a.courierId?m&&f&&(i.ratingCompleted=!0):m&&(i.ratingCompleted=!0),await M(v(x,"orders",s),i),r==="restaurant"&&a.restaurantId&&await ve(a.restaurantId,t.stars),p.success("Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙ‚ÙŠÙŠÙ…Ùƒ! â­")},ve=async(s,r)=>{try{const t=await $(v(x,"restaurants",s));if(t.exists()){const a=t.data(),n=a.averageRating||0,l=a.totalRatings||0,i=l>0?(n*l+r)/(l+1):r;await M(v(x,"restaurants",s),{averageRating:Math.round(i*10)/10,totalRatings:l+1,updatedAt:S()})}}catch(t){console.error("Error updating restaurant rating:",t)}};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Ø·Ù„Ø¨Ø§ØªÙŠ"}),j&&e.jsx(Se,{isOpen:j.isOpen,onClose:()=>T(null),onSubmit:async s=>{await ye(j.orderId,j.type,s),T(null)},type:j.type,targetName:j.targetName,orderId:j.orderId}),F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>P(null),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹"})]}),e.jsx("button",{onClick:()=>P(null),className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(Oe,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-5",children:ue?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-10 h-10 border-3 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]}):g&&g.bankName&&g.bankAccountNumber?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 bg-amber-50 p-3 rounded-xl",children:"ðŸ’° Ø­ÙˆÙ‘Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ Ø§Ù„ØªØ§Ù„ÙŠ Ø«Ù… Ø£Ø¨Ù„Øº ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø·Ø¹Ù…"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ø§Ù„Ø¨Ù†Ùƒ"}),e.jsx("p",{className:"font-bold text-gray-800",children:g.bankName})]})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsx("p",{className:"font-bold text-gray-800",children:g.bankAccountName})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù† / Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-mono font-bold text-gray-800 flex-1 text-left",dir:"ltr",children:g.bankAccountNumber}),e.jsx("button",{onClick:()=>he(g.bankAccountNumber||""),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition",children:e.jsx(_e,{className:"w-4 h-4"})})]})]})]}),C.find(s=>s.id===F)&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-sm text-green-600 mb-1",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ­ÙˆÙŠÙ„Ù‡"}),e.jsxs("p",{className:"text-3xl font-black text-green-700",children:[(U=(K=C.find(s=>s.id===F))==null?void 0:K.total)==null?void 0:U.toFixed(2)," Ø±.Ø³"]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"âš ï¸ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù… Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹"})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(re,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù… Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù…Ø¹Ø±ÙØ© Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"})]})})]})}),O&&e.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[O,y&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{children:["UID: ",e.jsx("b",{children:y.uid})]}),e.jsxs("div",{children:["Ø¹Ø¯Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙÙˆÙ„Ø¨Ù‘Ø§Ùƒ: ",e.jsx("b",{children:y.fallbackCount})]}),Array.isArray(y.sample)&&y.sample.length>0&&e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"font-semibold",children:"Ø¹ÙŠÙ†Ø© (Ø£Ø­Ø¯Ø« 5):"}),y.sample.map(s=>e.jsxs("div",{className:"truncate",children:["#",s.id," â€¢ customerId: ",String(s.customerId)," â€¢ restaurantId: ",String(s.restaurantId)," â€¢ createdAt: ",s.createdAt||"â€”"]},s.id))]})]})]}),C.map(s=>{var r,t,a,n,l,i,d,m,f,u,o,b,N,I,V,J,Q,Y,Z;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:`${E(s.status).color} px-4 py-3 flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("span",{className:"text-xl",children:E(s.status).emoji}),e.jsx("span",{className:"font-bold",children:E(s.status).text})]}),e.jsxs("div",{className:"text-white/80 text-sm font-medium",children:["#",s.id.slice(-6)]})]}),e.jsxs("div",{className:"p-4",children:[s.restaurantName&&e.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold mb-2",children:[e.jsx("span",{children:"ðŸ½ï¸"}),e.jsx("span",{children:String(s.restaurantName)})]}),(s.status==="accepted"||s.status==="preparing")&&e.jsx("div",{className:"mb-3",children:e.jsx(q,{order:s,type:"preparation"})}),s.status==="ready"&&s.deliveryType==="delivery"&&e.jsx("div",{className:"mb-3",children:e.jsx(q,{order:s,type:"pickup"})}),s.status==="out_for_delivery"&&e.jsx("div",{className:"mb-3",children:e.jsx(q,{order:s,type:"delivery"})}),e.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 rounded-xl p-3 mb-3",children:(r=s.items)==null?void 0:r.map(c=>`${c.name}Ã—${c.qty}`).join(" â€¢ ")}),e.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:s.deliveryType==="pickup"?e.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-medium bg-green-50 rounded-xl p-3",children:[e.jsx(Fe,{className:"w-4 h-4"}),e.jsx("span",{children:"Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…"})]}):e.jsxs("div",{className:"space-y-1 bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:"}),e.jsxs("span",{children:[((a=(t=s.subtotal)==null?void 0:t.toFixed)==null?void 0:a.call(t,2))||"â€”"," Ø±.Ø³"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„:"}),s.deliveryFee!==void 0&&s.deliveryFee>0?e.jsxs("span",{className:"font-medium",children:[(l=(n=s.deliveryFee)==null?void 0:n.toFixed)==null?void 0:l.call(n,2)," Ø±.Ø³"]}):e.jsx("span",{className:"text-amber-600",children:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø·Ø¹Ù…"})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"font-bold text-lg text-primary",children:["Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ",(d=(i=s.total)==null?void 0:i.toFixed)==null?void 0:d.call(i,2)," Ø±.Ø³"]})}),be(s)&&s.restaurantId&&e.jsxs("button",{onClick:()=>xe(s.restaurantId,s.id),className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-500 to-green-600 
                             text-white rounded-xl font-bold shadow-lg hover:shadow-xl 
                             hover:scale-[1.02] transition-all duration-200`,children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹ ðŸ’³"})]}),s.status==="pending"&&e.jsx("button",{onClick:()=>ge(s),disabled:X===s.id,className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 
                             text-white rounded-xl font-bold shadow-lg hover:shadow-xl 
                             hover:scale-[1.02] transition-all duration-200 disabled:opacity-50`,children:X===s.id?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù„ØºØ§Ø¡..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ âŒ"})]})}),Ne(s)&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border-2 border-amber-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(R,{className:"w-5 h-5 text-amber-500 fill-amber-500"}),e.jsx("span",{className:"font-bold text-amber-800",children:"Ù‚ÙŠÙ‘Ù… ØªØ¬Ø±Ø¨ØªÙƒ â­"})]}),e.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"Ø³Ø§Ø¹Ø¯Ù†Ø§ ÙÙŠ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø®Ø¯Ù…Ø© Ø¨ØªÙ‚ÙŠÙŠÙ…Ùƒ"}),e.jsxs("div",{className:"space-y-2",children:[!((f=(m=s.ratings)==null?void 0:m.customerToRestaurant)!=null&&f.stars)&&e.jsxs("button",{onClick:()=>T({isOpen:!0,orderId:s.id,type:"restaurant",targetName:s.restaurantName||"Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø©"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-amber-300 
                                   rounded-xl hover:bg-amber-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Ù‚ÙŠÙ‘Ù… Ø§Ù„Ø£Ø³Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø©"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(c=>e.jsx(R,{className:"w-4 h-4 text-gray-300 group-hover:text-amber-400 transition"},c))})]}),s.courierId&&!((o=(u=s.ratings)==null?void 0:u.customerToCourier)!=null&&o.stars)&&e.jsxs("button",{onClick:()=>T({isOpen:!0,orderId:s.id,type:"courier",targetName:"Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-emerald-300 
                                   rounded-xl hover:bg-emerald-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Ù‚ÙŠÙ‘Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(c=>e.jsx(R,{className:"w-4 h-4 text-gray-300 group-hover:text-emerald-400 transition"},c))})]})]}),(((N=(b=s.ratings)==null?void 0:b.customerToRestaurant)==null?void 0:N.stars)||((V=(I=s.ratings)==null?void 0:I.customerToCourier)==null?void 0:V.stars))&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-amber-200 space-y-2",children:[((Q=(J=s.ratings)==null?void 0:J.customerToRestaurant)==null?void 0:Q.stars)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ø±Ø©:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(c=>e.jsx(R,{className:`w-4 h-4 ${c<=s.ratings.customerToRestaurant.stars?"text-amber-400 fill-amber-400":"text-gray-300"}`},c))})]}),((Z=(Y=s.ratings)==null?void 0:Y.customerToCourier)==null?void 0:Z.stars)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(c=>e.jsx(R,{className:`w-4 h-4 ${c<=s.ratings.customerToCourier.stars?"text-emerald-400 fill-emerald-400":"text-gray-300"}`},c))})]})]})]}),s.status==="delivered"&&s.ratingCompleted&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(H,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"ØªÙ… ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø·Ù„Ø¨ âœ…"})]})}),(s.status==="delivered"||s.status==="cancelled")&&s.items&&s.items.length>0&&e.jsxs("button",{onClick:()=>pe(s),className:`w-full flex items-center justify-center gap-2 px-4 py-3 
                             bg-gradient-to-r from-sky-500 to-sky-600 
                             text-white rounded-xl font-bold shadow-lg 
                             hover:shadow-xl hover:scale-[1.02] 
                             transition-all duration-200`,children:[e.jsx(Pe,{className:"w-5 h-5"}),e.jsx("span",{children:"ðŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø·Ù„Ø¨"})]}),e.jsxs("div",{className:"flex gap-2",children:[je(s)&&e.jsxs("button",{onClick:()=>k(`/chat?orderId=${s.id}`),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-primary to-accent 
                               text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                               hover:scale-105 transition-all duration-200 animate-pulse`,children:[e.jsx(Ee,{className:"w-5 h-5"}),e.jsx("span",{children:"ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ðŸš—"})]}),fe(s)&&e.jsxs("button",{onClick:()=>k(`/chat?orderId=${s.id}`),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 
                               text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                               hover:scale-105 transition-all duration-200`,children:[e.jsx(le,{className:"w-5 h-5"}),e.jsx("span",{children:"ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·Ø¹Ù… ðŸ½ï¸"})]}),e.jsxs("button",{onClick:()=>k(`/support?orderId=${s.id}`),className:`flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200`,title:"ØªÙ‚Ø¯ÙŠÙ… Ø´ÙƒÙˆÙ‰ Ø£Ùˆ Ø·Ù„Ø¨ Ø¯Ø¹Ù…",children:[e.jsx(De,{className:"w-5 h-5"}),e.jsx("span",{children:"Ø´ÙƒÙˆÙ‰"})]})]})]})]})]},s.id)}),C.length===0&&!O&&e.jsx("div",{className:"text-gray-600",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†."})]})};export{Xe as TrackOrders};
