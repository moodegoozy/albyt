const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/refundService-CHXob5M2.js","assets/vendor-firebase-DPNhE71o.js","assets/vendor-react-COcEUdcw.js","assets/vendor-icons-n_moP-x8.js","assets/vendor-paypal-DO3GBzXH.js"])))=>i.map(i=>d[i]);
import{r as t,a as Wn,u as Mr,b as fs,L as le,c as pa,N as Ya,d as Gn,e as Re,R as Yn,B as Kn}from"./vendor-react-COcEUdcw.js";import{g as Ur,a as Jn,i as Xn,b as Zn,c as ei,d as si,e as ba,f as ti,h as ai,o as li,j as Ce,k as J,u as xe,s as Qe,l as ri,q as be,w as je,m as se,n as xs,p as As,r as ni,t as pe,v as Tl,x as Ze,y as Te,z as X,A as ii,T as fa,B as ss,C as bs,D as ci,E as Br,F as Dt,R as ur,G as di,H as ks,I as bt,J as Ss,K as Tt,L as oi}from"./vendor-firebase-DPNhE71o.js";import{A as Rs,S as Le,U as ms,B as ft,H as Bt,X as _e,M as xi,a as Vr,P as Oe,b as Va,T as Be,c as us,C as El,I as wl,d as Is,e as lt,f as Ie,g as ot,h as Ns,i as is,F as gr,j as es,L as as,N as tt,k as qa,G as Os,l as ls,m as Vt,n as at,o as zs,p as Ls,V as mi,q as hi,r as vl,s as ui,t as Gt,u as xt,v as cs,w as $l,x as Hs,y as gi,z as Fl,D as Yt,E as oa,J as Ds,K as ts,O as Ye,Q as kl,R as Et,W as js,Y as za,Z as vs,_ as Ms,$ as qr,a0 as Rt,a1 as zr,a2 as _l,a3 as ys,a4 as ct,a5 as jt,a6 as pr,a7 as br,a8 as Hr,a9 as gs,aa as pi,ab as Ol,ac as qe,ad as bi,ae as Ut,af as dt,ag as Ws,ah as ns,ai as Kt,aj as Qr,ak as Qs,al as Nt,am as Pt,an as fr,ao as fi,ap as Ll,aq as Ha,ar as ha,as as Us,at as ws,au as qt,av as ji,aw as zt,ax as Ni,ay as ul,az as yi,aA as jr,aB as ua,aC as xa,aD as mt,aE as Qa,aF as wi,aG as vi,aH as ki,aI as Si,aJ as Sl,aK as Ci,aL as Ai,aM as Ht,aN as Ii,aO as Di,aP as Nr,aQ as Ri,aR as Cl,aS as ja,aT as Jt,aU as Wr,aV as Al,aW as Pi,aX as Gr,aY as Il,aZ as Ti,a_ as Ei,a$ as Ml,b0 as Yr,b1 as Dl,b2 as $i,b3 as yr,b4 as Kr,b5 as Fi,b6 as _i,b7 as Ul,b8 as Oi,b9 as Rl,ba as Li,bb as Mi,bc as Ui}from"./vendor-icons-n_moP-x8.js";import{P as Jr,a as Xr}from"./vendor-paypal-DO3GBzXH.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))d(i);new MutationObserver(i=>{for(const y of i)if(y.type==="childList")for(const r of y.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&d(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const y={};return i.integrity&&(y.integrity=i.integrity),i.referrerPolicy&&(y.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?y.credentials="include":i.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function d(i){if(i.ep)return;i.ep=!0;const y=n(i);fetch(i.href,y)}})();var Zr={exports:{}},Ka={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=t,Vi=Symbol.for("react.element"),qi=Symbol.for("react.fragment"),zi=Object.prototype.hasOwnProperty,Hi=Bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qi={key:!0,ref:!0,__self:!0,__source:!0};function en(s,a,n){var d,i={},y=null,r=null;n!==void 0&&(y=""+n),a.key!==void 0&&(y=""+a.key),a.ref!==void 0&&(r=a.ref);for(d in a)zi.call(a,d)&&!Qi.hasOwnProperty(d)&&(i[d]=a[d]);if(s&&s.defaultProps)for(d in a=s.defaultProps,a)i[d]===void 0&&(i[d]=a[d]);return{$$typeof:Vi,type:s,key:y,ref:r,props:i,_owner:Hi.current}}Ka.Fragment=qi;Ka.jsx=en;Ka.jsxs=en;Zr.exports=Ka;var e=Zr.exports,Pl={},wr=Wn;Pl.createRoot=wr.createRoot,Pl.hydrateRoot=wr.hydrateRoot;const Wi={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},Cs=Ur().length?Jn():Xn(Wi),ps=Ur().length>0?Zn(Cs):ei(Cs,{persistence:[ti,ai]}),S=si(Cs),yt=ba(Cs);let Wa=null,La="default";async function Gi(){try{return"serviceWorker"in navigator?"Notification"in window?(Wa=await navigator.serviceWorker.register("/sw.js"),console.log("‚úÖ Service Worker registered:",Wa),La=await Notification.requestPermission(),La==="granted"?(console.log("‚úÖ ÿ™ŸÖ ŸÖŸÜÿ≠ ÿ•ÿ∞ŸÜ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"),!0):(console.warn("‚ö†Ô∏è ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ•ÿ∞ŸÜ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™:",La),!1)):(console.warn("‚ö†Ô∏è ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÑÿß ŸäÿØÿπŸÖ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"),!1):(console.warn("‚ö†Ô∏è ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÑÿß ŸäÿØÿπŸÖ Service Worker"),!1)}catch(s){return console.error("‚ùå ŸÅÿ¥ŸÑ ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™:",s),!1}}async function Yi(){if(!("Notification"in window))return"denied";if(Notification.permission==="granted")return"granted";const s=await Notification.requestPermission();return La=s,s}async function Ki(s,a,n){try{if(Notification.permission!=="granted"&&(console.warn("‚ö†Ô∏è ŸÑÿß ŸäŸàÿ¨ÿØ ÿ•ÿ∞ŸÜ ŸÑŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"),await Yi()!=="granted"))return!1;if(Wa)return await Wa.showNotification(s,{body:a,icon:(n==null?void 0:n.icon)||"/icon-192.png",badge:"/icon-192.png",tag:(n==null?void 0:n.tag)||"notification-"+Date.now(),data:{url:(n==null?void 0:n.url)||"/"},requireInteraction:!0,dir:"rtl",lang:"ar"}),!0;const d=new Notification(s,{body:a,icon:(n==null?void 0:n.icon)||"/icon-192.png",tag:(n==null?void 0:n.tag)||"notification-"+Date.now(),dir:"rtl",lang:"ar",requireInteraction:!0});return d.onclick=()=>{window.focus(),n!=null&&n.url&&(window.location.href=n.url),d.close()},!0}catch(d){return console.error("‚ùå ŸÅÿ¥ŸÑ ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±:",d),!1}}const ia="broast_session_location",sn=t.createContext({user:null,role:null,loading:!0,logout:async()=>{},userLocation:null,locationRequired:!1,refreshUserData:async()=>{}}),Ji=({children:s})=>{const[a,n]=t.useState(null),[d,i]=t.useState(null),[y,r]=t.useState(!0),[D,E]=t.useState(null),[B,P]=t.useState(!1),N=async()=>{if(!a)return;const j=await Ce(J(S,"users",a.uid));if(j.exists()){const f=j.data(),U=f==null?void 0:f.role,g=f==null?void 0:f.location,w=f==null?void 0:f.savedLocation;if(U==="customer"||U==="admin"){const M=w?{lat:w.lat,lng:w.lng}:g||null;E(M),M&&sessionStorage.setItem(ia,JSON.stringify(M))}else E(g||null),g&&sessionStorage.setItem(ia,JSON.stringify(g));P(!1)}};t.useEffect(()=>{const j=li(ps,async f=>{if(n(f),f){const U=await Ce(J(S,"users",f.uid)),g=U.data(),w=U.exists()?g==null?void 0:g.role:null;i(w);const M=g==null?void 0:g.location,b=g==null?void 0:g.savedLocation,h=sessionStorage.getItem(ia),k=h?JSON.parse(h):null;let L=null;if(w==="customer"||w==="admin"?L=b?{lat:b.lat,lng:b.lng}:k||M||null:L=k||M||null,E(L),w==="customer"||w==="admin"){const $=!!b||!!k;!$&&navigator.geolocation?navigator.geolocation.getCurrentPosition(async v=>{const R={lat:v.coords.latitude,lng:v.coords.longitude,address:"ŸÖŸàŸÇÿπŸä ÿßŸÑÿ≠ÿßŸÑŸä (ÿ™ŸÑŸÇÿßÿ¶Ÿä)"};try{await xe(J(S,"users",f.uid),{savedLocation:R,location:{lat:R.lat,lng:R.lng}}),E({lat:R.lat,lng:R.lng}),sessionStorage.setItem(ia,JSON.stringify({lat:R.lat,lng:R.lng})),P(!1)}catch(c){console.warn("ÿ™ÿπÿ∞ÿ± ÿ≠ŸÅÿ∏ ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä:",c)}},v=>{console.warn("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã:",v),P(!0)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):P(!$),b&&!k&&sessionStorage.setItem(ia,JSON.stringify({lat:b.lat,lng:b.lng}))}else P(w==="owner"||w==="courier"?!M:!1);if(w==="owner")try{const $=J(S,"restaurants",f.uid);(await Ce($)).exists()||await Qe($,{name:(g==null?void 0:g.restaurantName)||(g==null?void 0:g.name)||"ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ",ownerId:f.uid,email:(g==null?void 0:g.email)||f.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch($){console.warn("ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ≥ÿ™ŸÜÿØ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÑŸÑŸÖÿßŸÑŸÉ",$)}try{await Gi(),console.log("‚úÖ ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™")}catch($){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™:",$)}}else i(null),E(null),P(!1);r(!1)});return()=>j()},[]);const T=async()=>{await ri(ps)};return e.jsx(sn.Provider,{value:{user:a,role:d,loading:y,logout:T,userLocation:D,locationRequired:B,refreshUserData:N},children:s})},Ee=()=>t.useContext(sn),Xe=({to:s,label:a,icon:n,onClick:d})=>{const{pathname:i}=Mr(),y=i===s;return e.jsxs(le,{to:s,onClick:d,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(y?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20"),children:[n,e.jsx("span",{children:a})]})},Xi=()=>{const{user:s,role:a,logout:n}=Ee(),[d,i]=t.useState(!1),[y,r]=t.useState(0),D=Mr(),E=fs(),B=D.pathname==="/";return t.useEffect(()=>{i(!1)},[D.pathname]),t.useEffect(()=>(d?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[d]),t.useEffect(()=>{if(!(s!=null&&s.uid)){r(0);return}const P=be(se(S,"notifications"),je("recipientId","==",s.uid),je("read","==",!1)),N=xs(P,T=>{r(T.size)},T=>{console.warn("Notifications listener error:",T),r(0)});return()=>N()},[s==null?void 0:s.uid]),e.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30 relative z-30",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[!B&&e.jsx("button",{onClick:()=>E(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"ÿ±ÿ¨Ÿàÿπ",children:e.jsx(Rs,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-xl sm:text-2xl",children:"üçó"})}),e.jsx("span",{className:"text-lg sm:text-2xl",children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]})]}),e.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[e.jsx(Xe,{to:"/restaurants",label:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ",icon:e.jsx(Le,{className:"w-4 h-4"})}),a==="customer"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/cart",label:"üõí ÿßŸÑÿ≥ŸÑÿ©"}),e.jsx(Xe,{to:"/orders",label:"ÿ∑ŸÑÿ®ÿßÿ™Ÿä"}),e.jsx(Xe,{to:"/profile",label:"ÿ®ŸäÿßŸÜÿßÿ™Ÿä",icon:e.jsx(ms,{className:"w-4 h-4"})})]}),a==="owner"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/owner",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx(Xe,{to:"/owner/orders",label:"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx(Xe,{to:"/owner/courier-requests",label:"ÿßŸÑŸÖŸÜÿØŸàÿ®ŸäŸÜ"})]}),a==="courier"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/courier",label:"Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖŸÜÿØŸàÿ®"}),e.jsx(Xe,{to:"/courier/hiring",label:"ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ"})]}),a==="admin"&&e.jsx(Xe,{to:"/admin",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©"}),a==="developer"&&e.jsx(Xe,{to:"/developer",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±"}),s&&e.jsxs(le,{to:"/notifications",className:"relative p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™",children:[e.jsx(ft,{className:"w-5 h-5"}),y>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold animate-pulse",children:y>9?"9+":y})]}),s&&e.jsx(le,{to:"/support",className:"p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä / ÿ¥ŸÉŸàŸâ",children:e.jsx(Bt,{className:"w-5 h-5"})}),s?e.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:"ÿÆÿ±Ÿàÿ¨"}):e.jsx(Xe,{to:"/login",label:"ÿØÿÆŸàŸÑ"})]}),e.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white text-sky-600 shadow-lg hover:shadow-xl transition",onClick:()=>i(!d),children:d?e.jsx(_e,{className:"w-6 h-6"}):e.jsx(xi,{className:"w-6 h-6"})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>i(!1)}),e.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${d?"translate-x-0":"translate-x-full"}
      `,style:{background:"linear-gradient(to bottom, #0ea5e9, #0369a1)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[e.jsx("span",{className:"text-white font-bold text-lg",children:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"}),e.jsx("button",{onClick:()=>i(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:e.jsx(_e,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[e.jsx(Xe,{to:"/restaurants",label:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ",icon:e.jsx(Le,{className:"w-5 h-5"}),onClick:()=>i(!1)}),a==="customer"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/cart",label:"ÿßŸÑÿ≥ŸÑÿ©",icon:e.jsx(Vr,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e.jsx(Xe,{to:"/orders",label:"ÿ∑ŸÑÿ®ÿßÿ™Ÿä",icon:e.jsx(Oe,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e.jsx(Xe,{to:"/profile",label:"ÿ®ŸäÿßŸÜÿßÿ™Ÿä",icon:e.jsx(ms,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),a==="owner"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/owner",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑ÿπŸÖ",icon:e.jsx(Va,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e.jsx(Xe,{to:"/owner/orders",label:"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ",icon:e.jsx(Oe,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e.jsx(Xe,{to:"/owner/courier-requests",label:"ÿßŸÑŸÖŸÜÿØŸàÿ®ŸäŸÜ",icon:e.jsx(Be,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),a==="courier"&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{to:"/courier",label:"Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖŸÜÿØŸàÿ®",icon:e.jsx(Be,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e.jsx(Xe,{to:"/courier/hiring",label:"ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ",icon:e.jsx(Oe,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),a==="admin"&&e.jsx(Xe,{to:"/admin",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©",icon:e.jsx(us,{className:"w-5 h-5"}),onClick:()=>i(!1)}),a==="developer"&&e.jsx(Xe,{to:"/developer",label:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±",icon:e.jsx(El,{className:"w-5 h-5"}),onClick:()=>i(!1)}),s&&e.jsx(Xe,{to:"/notifications",label:`ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ${y>0?`(${y})`:""}`,icon:e.jsx(ft,{className:"w-5 h-5"}),onClick:()=>i(!1)}),s&&e.jsx(Xe,{to:"/support",label:"ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä / ÿ¥ŸÉŸàŸâ",icon:e.jsx(Bt,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e.jsx("div",{className:"h-px bg-white/20 my-2"}),s?e.jsx("button",{onClick:()=>{n(),i(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨"}):e.jsx(Xe,{to:"/login",label:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",icon:e.jsx(Va,{className:"w-5 h-5"}),onClick:()=>i(!1)})]})]})]})},tn=t.createContext(null),Ps=()=>{const s=t.useContext(tn);if(!s)throw new Error("useDialog must be used within DialogProvider");return s},Zi=({children:s})=>{const[a,n]=t.useState({isOpen:!1,message:"",type:"confirm"}),d=t.useCallback(E=>new Promise(B=>{n({...E,isOpen:!0,resolve:B})}),[]),i=t.useCallback(E=>{a.resolve&&a.resolve(E),n(B=>({...B,isOpen:!1}))},[a.resolve]),y=t.useCallback(async()=>{a.onConfirm&&await a.onConfirm(),i(!0)},[a.onConfirm,i]),r=t.useCallback(()=>{a.onCancel&&a.onCancel(),i(!1)},[a.onCancel,i]),D=t.useMemo(()=>({confirm:(E,B={})=>d({message:E,type:"confirm",title:B.title||"ÿ™ÿ£ŸÉŸäÿØ",confirmText:B.confirmText||"ÿ™ÿ£ŸÉŸäÿØ",cancelText:B.cancelText||"ÿ•ŸÑÿ∫ÿßÿ°",...B}),alert:(E,B={})=>d({message:E,type:"alert",title:B.title||"ÿ™ŸÜÿ®ŸäŸá",confirmText:B.confirmText||"ÿ≠ÿ≥ŸÜÿßŸã",...B}).then(()=>{}),success:(E,B={})=>d({message:E,type:"success",title:B.title||"ÿ™ŸÖ ÿ®ŸÜÿ¨ÿßÿ≠",confirmText:B.confirmText||"ÿ≠ÿ≥ŸÜÿßŸã",...B}).then(()=>{}),error:(E,B={})=>d({message:E,type:"error",title:B.title||"ÿÆÿ∑ÿ£",confirmText:B.confirmText||"ÿ≠ÿ≥ŸÜÿßŸã",...B}).then(()=>{}),warning:(E,B={})=>d({message:E,type:"warning",title:B.title||"ÿ™ÿ≠ÿ∞Ÿäÿ±",confirmText:B.confirmText||"ÿ≠ÿ≥ŸÜÿßŸã",...B}).then(()=>{}),info:(E,B={})=>d({message:E,type:"info",title:B.title||"ŸÖÿπŸÑŸàŸÖÿ©",confirmText:B.confirmText||"ÿ≠ÿ≥ŸÜÿßŸã",...B}).then(()=>{})}),[d]);return e.jsxs(tn.Provider,{value:D,children:[s,e.jsx(ec,{...a,onConfirm:y,onCancel:r})]})},ec=({isOpen:s,title:a,message:n,type:d="confirm",confirmText:i="ÿ™ÿ£ŸÉŸäÿØ",cancelText:y="ÿ•ŸÑÿ∫ÿßÿ°",dangerous:r,onConfirm:D,onCancel:E})=>{if(!s)return null;const P={confirm:{icon:e.jsx(wl,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:r?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:e.jsx(Is,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:e.jsx(Ie,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:e.jsx(lt,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:e.jsx(Is,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:e.jsx(wl,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[d],N=d==="confirm";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:E}),e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:T=>T.stopPropagation(),children:[e.jsxs("div",{className:"relative p-6 pb-0",children:[e.jsx("button",{onClick:E,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`w-16 h-16 rounded-full ${P.iconBg} ${P.iconColor} flex items-center justify-center`,children:P.icon})}),e.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:a})]}),e.jsx("div",{className:"p-6 pt-3",children:e.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),e.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${N?"flex-row-reverse":"justify-center"}`,children:[e.jsx("button",{onClick:D,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${P.buttonColor}`,children:i}),N&&e.jsx("button",{onClick:E,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:y})]})]})}),e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},sc=()=>{const{user:s}=Ee(),a=fs(),n=Ps(),d=async()=>{if(!(!s||!await n.confirm("Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ° ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜŸá. ÿ≥Ÿäÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ŸÜŸáÿßÿ¶ŸäŸãÿß.",{title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÜŸáÿßÿ¶ŸäŸãÿßÿü",dangerous:!0,confirmText:"ŸÜÿπŸÖÿå ÿßÿ≠ÿ∞ŸÅ ÿ≠ÿ≥ÿßÿ®Ÿä",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°"})))try{await As(J(S,"users",s.uid)),await ni(ps.currentUser),n.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠"),a("/account-deleted")}catch(y){console.error("Error deleting account:",y),n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ®. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÑÿßÿ≠ŸÇŸãÿß.")}};return e.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl sm:text-3xl",children:"üçó"})}),e.jsx("span",{className:"text-xl sm:text-2xl font-black",children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]}),e.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["ÿµŸÜÿπ ÿ®ŸÄ ",e.jsx(ot,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"})," ŸÅŸä ÿßŸÑÿ≥ÿπŸàÿØŸäÿ© ¬© ",new Date().getFullYear()]}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[e.jsxs(le,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(us,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"ÿßŸÑÿÆÿµŸàÿµŸäÿ©"]}),s&&e.jsxs(le,{to:"/report-problem",className:"flex items-center gap-1.5 sm:gap-2 bg-amber-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-amber-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(Is,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"ÿ•ÿ®ŸÑÿßÿ∫ ÿπŸÜ ŸÖÿ¥ŸÉŸÑÿ©"]}),e.jsxs(le,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(El,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"ÿßŸÑŸÖÿ∑Ÿàÿ±"]}),s&&e.jsxs("button",{onClick:d,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[e.jsx(Ns,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"ÿ≠ÿ∞ŸÅ ÿ≠ÿ≥ÿßÿ®Ÿä"]})]}),e.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ© ŸÑŸÄ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]})})},tc=()=>e.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[e.jsx(is,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),e.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"‚ú® ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ‚Äî ÿ£ÿ¥ŸáŸâ ÿßŸÑÿ£ŸÉŸÑÿßÿ™ ÿ™ŸàÿµŸÑŸÉ ŸÑŸäŸÜ ÿ®ÿßÿ® ÿ®Ÿäÿ™ŸÉ! üöóüí®"}),e.jsx(is,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),ac=()=>e.jsx("div",{className:"w-full bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500 text-white py-1.5 overflow-hidden",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(gr,{className:"w-4 h-4 text-white animate-pulse flex-shrink-0"}),e.jsx("div",{className:"beta-marquee whitespace-nowrap font-bold text-xs tracking-wide",children:"üß™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÅŸä ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ© (Beta) ‚Äî ŸÜÿπŸÖŸÑ ÿπŸÑŸâ ÿ™ÿ≠ÿ≥ŸäŸÜŸá ÿ®ÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±! üöÄ"}),e.jsx(gr,{className:"w-4 h-4 text-white animate-pulse flex-shrink-0"})]})}),lc=({onLocationSaved:s})=>{const{user:a,role:n}=Ee(),[d,i]=t.useState(null),[y,r]=t.useState(!1),[D,E]=t.useState(!1),[B,P]=t.useState(null),[N,T]=t.useState(!1),[j,f]=t.useState(!1),U={lat:24.7136,lng:46.6753},g=t.useCallback(()=>{if(!navigator.geolocation){P("ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÑÿß ŸäÿØÿπŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ");return}E(!0),P(null),navigator.geolocation.getCurrentPosition(b=>{const h={lat:b.coords.latitude,lng:b.coords.longitude};i(h),E(!1),window.locationRequiredMap&&(window.locationRequiredMap.setView([h.lat,h.lng],17),window.locationRequiredMarker&&window.locationRequiredMarker.setLatLng([h.lat,h.lng]))},b=>{E(!1),b.code===1?P("ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ•ÿ∞ŸÜ ÿßŸÑŸÖŸàŸÇÿπ. ŸÅÿπŸëŸÑ ÿßŸÑŸÖŸàŸÇÿπ ŸÖŸÜ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ™ÿµŸÅÿ≠"):b.code===2?P("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ŸÅÿπŸäŸÑ GPS"):P("ÿßŸÜÿ™Ÿáÿ™ ŸÖŸáŸÑÿ© ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);t.useEffect(()=>{if(!document.getElementById("leaflet-css")){const b=document.createElement("link");b.id="leaflet-css",b.rel="stylesheet",b.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(b)}if(window.L)T(!0);else{const b=document.createElement("script");b.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",b.onload=()=>T(!0),document.body.appendChild(b)}},[]),t.useEffect(()=>{if(!N||!window.L)return;const b=window.L;if(!document.getElementById("location-required-map"))return;window.locationRequiredMap&&window.locationRequiredMap.remove();const k=d||U,L=b.map("location-required-map",{zoomControl:!0,attributionControl:!1}).setView([k.lat,k.lng],12);b.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(L);const $=b.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;">üìç</div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),v=b.marker([k.lat,k.lng],{icon:$,draggable:!0}).addTo(L);return v.on("dragend",()=>{const R=v.getLatLng();i({lat:R.lat,lng:R.lng})}),L.on("click",R=>{const{lat:c,lng:o}=R.latlng;i({lat:c,lng:o}),v.setLatLng([c,o])}),window.locationRequiredMap=L,window.locationRequiredMarker=v,()=>{window.locationRequiredMap&&(window.locationRequiredMap.remove(),window.locationRequiredMap=null,window.locationRequiredMarker=null)}},[N]);const w=async()=>{if(!(!d||!a)){f(!0);try{if(await xe(J(S,"users",a.uid),{location:d,locationUpdatedAt:new Date}),n==="owner")try{await xe(J(S,"restaurants",a.uid),{geoLocation:d,locationUpdatedAt:new Date})}catch(b){console.warn("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ŸÖŸàŸÇÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ:",b)}s()}catch{P("ŸÅÿ¥ŸÑ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑŸÖŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{f(!1)}}},M=()=>{switch(n){case"owner":return"ŸÖÿ∑ÿπŸÖŸÉ";case"courier":return"ŸÖŸàŸÇÿπŸÉ ÿßŸÑÿ≠ÿßŸÑŸä";default:return"ŸÖŸàŸÇÿπŸÉ"}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-sky-50 via-white to-sky-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 p-6 text-white text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(es,{className:"w-10 h-10"})}),e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["ÿ≠ÿØÿØ ŸÖŸàŸÇÿπ ",M()]}),e.jsx("p",{className:"text-sky-100 text-sm",children:n==="owner"?"ŸÑÿπÿ±ÿ∂ ŸÖÿ∑ÿπŸÖŸÉ ŸÑŸÑÿπŸÖŸÑÿßÿ° ÿßŸÑŸÇÿ±Ÿäÿ®ŸäŸÜ ŸÖŸÜŸÉ":"ŸÑŸÜÿπÿ±ÿ∂ ŸÑŸÉ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜŸÉ (15 ŸÉŸÖ)"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[B&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 flex items-center gap-3 text-red-700",children:[e.jsx(Is,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:B})]}),e.jsx("button",{onClick:g,disabled:D,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:D?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπŸÉ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"w-5 h-5"}),"üìç ÿ≠ÿØÿØ ŸÖŸàŸÇÿπŸä ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã"]})}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"ÿ£Ÿà ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ© ŸÑÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ŸäÿØŸàŸäÿßŸã"}),e.jsx("div",{id:"location-required-map",className:"h-64 rounded-xl overflow-hidden border-2 border-gray-200",style:{background:"#f0f9ff"}}),!N&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:e.jsx(as,{className:"w-8 h-8 animate-spin text-sky-500"})})]}),d&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 flex items-center gap-3 text-green-700",children:[e.jsx(Ie,{className:"w-5 h-5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold",children:"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ‚úì"}),e.jsxs("p",{className:"text-xs text-green-600",children:[d.lat.toFixed(6),", ",d.lng.toFixed(6)]})]})]}),e.jsx("button",{onClick:w,disabled:!d||j,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:j?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5"}),"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ŸàÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©"]})}),e.jsx("p",{className:"text-xs text-gray-400 text-center",children:"üí° ŸäŸÖŸÉŸÜŸÉ ÿ™ÿ∫ŸäŸäÿ± ŸÖŸàŸÇÿπŸÉ ŸÑÿßÿ≠ŸÇÿßŸã ŸÖŸÜ ÿµŸÅÿ≠ÿ© ÿßŸÑÿ®ÿ±ŸàŸÅÿßŸäŸÑ"})]})]})})};function an(s,a){const d=Ca(a.lat-s.lat),i=Ca(a.lng-s.lng),y=Math.sin(d/2)*Math.sin(d/2)+Math.cos(Ca(s.lat))*Math.cos(Ca(a.lat))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))}function Ca(s){return s*(Math.PI/180)}const Ma=15,rc=()=>{var j;const{user:s,role:a,loading:n,logout:d,userLocation:i}=Ee();fs();const[y,r]=t.useState([]),[D,E]=t.useState([]),[B,P]=t.useState([]),[N,T]=t.useState(!0);return t.useEffect(()=>{if(n)return;(async()=>{try{const g=(await pe(se(S,"restaurants"))).docs.map(c=>({id:c.id,...c.data()})),M=(await pe(se(S,"menuItems"))).docs.map(c=>({id:c.id,...c.data()})),b=new Map;M.forEach(c=>{c.available!==!1&&b.set(c.ownerId,(b.get(c.ownerId)||0)+1)});let h=g.filter(c=>!!c.logoUrl&&!!c.geoLocation&&(b.get(c.id)||0)>0);i&&(h=h.map(c=>({...c,distance:c.geoLocation?an(i,c.geoLocation):void 0})).filter(c=>c.distance!==void 0&&c.distance<=Ma).sort((c,o)=>c.packageType==="premium"&&o.packageType!=="premium"?-1:o.packageType==="premium"&&c.packageType!=="premium"?1:(c.distance||999)-(o.distance||999))),E(h.slice(0,6));const k=be(se(S,"offers"),je("isActive","==",!0)),L=await pe(k),$=new Date,v=L.docs.map(c=>{var o,_;return{id:c.id,...c.data(),expiresAt:(_=(o=c.data().expiresAt)==null?void 0:o.toDate)==null?void 0:_.call(o)}}).filter(c=>!c.expiresAt||new Date(c.expiresAt)>$).slice(0,4);r(v);const R=M.filter(c=>c.available!==!1&&(c.orderCount||0)>0).sort((c,o)=>(o.orderCount||0)-(c.orderCount||0)).slice(0,4).map(c=>{const o=g.find(_=>_.id===c.ownerId);return{...c,restaurantName:o==null?void 0:o.name}});P(R)}catch(U){console.error("Error loading data:",U)}finally{T(!1)}})()},[n,i]),n?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-20 h-20 mb-4 bg-gradient-to-br from-sky-400 to-sky-600 rounded-3xl flex items-center justify-center shadow-xl shadow-sky-500/30 animate-pulse",children:e.jsx("span",{className:"text-4xl",children:"üçΩÔ∏è"})})}),e.jsx(as,{className:"w-6 h-6 text-sky-500 animate-spin mb-2"}),e.jsx("p",{className:"text-sky-600 font-semibold",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 pb-24",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-sky-200/30 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative px-4 py-6 max-w-lg mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-3 bg-gradient-to-br from-sky-400 to-sky-600 rounded-3xl flex items-center justify-center shadow-xl shadow-sky-500/30",children:e.jsx("span",{className:"text-4xl",children:"üçΩÔ∏è"})}),e.jsx("h1",{className:"text-2xl font-black text-sky-700",children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}),e.jsx("p",{className:"text-sky-600/70 text-sm",children:"ÿ£ÿ¥ŸáŸâ ÿßŸÑÿ£ŸÉŸÑÿßÿ™ ÿßŸÑÿ®Ÿäÿ™Ÿäÿ© ÿ™ŸàÿµŸÑŸÉ üöó"}),s&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-white/80 px-4 py-2 rounded-full shadow-sm",children:[e.jsx("span",{className:"text-sky-600",children:"ÿ£ŸáŸÑÿßŸã"}),e.jsx("span",{className:"font-bold text-gray-800",children:s.displayName||((j=s.email)==null?void 0:j.split("@")[0])}),e.jsx("span",{children:"üëã"})]})]}),!s&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(le,{to:"/restaurants",className:"block bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 shadow-xl shadow-sky-500/30 active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"üè™"})}),e.jsxs("div",{className:"text-white text-right",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ÿ™ÿµŸÅÿ≠ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿßŸÉÿ™ÿ¥ŸÅ ÿ£ÿ¥ŸáŸâ ÿßŸÑÿ£ŸÉŸÑÿßÿ™"})]})]}),e.jsx(qa,{className:"w-6 h-6 text-white/80"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(le,{to:"/login",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üîë"}),e.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"ÿØÿÆŸàŸÑ"})]}),e.jsxs(le,{to:"/register",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"‚ú®"}),e.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ¨ÿØŸäÿØ"})]})]})]}),a==="customer"&&e.jsxs("div",{className:"space-y-5",children:[e.jsx(le,{to:"/restaurants",className:"block bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 shadow-xl shadow-emerald-500/30 active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-5xl block mb-2",children:"üç¥"}),e.jsx("h2",{className:"text-2xl font-black text-white",children:"ÿßÿ∑ŸÑÿ® ÿßŸÑÿ¢ŸÜ!"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ŸÖŸÜ ÿ£ÿ¥ŸáŸâ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ÿßŸÑŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜŸÉ"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(le,{to:"/cart",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üõí"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"ÿßŸÑÿ≥ŸÑÿ©"})]}),e.jsxs(le,{to:"/orders",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üì¶"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"ÿ∑ŸÑÿ®ÿßÿ™Ÿä"})]}),e.jsxs(le,{to:"/profile",className:"bg-white rounded-xl p-3 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üë§"}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"ÿ≠ÿ≥ÿßÿ®Ÿä"})]})]})]}),y.length>0&&(!s||a==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"w-5 h-5 text-pink-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"üéÅ ÿπÿ±Ÿàÿ∂ ÿßŸÑÿ£ÿ≥ÿ±"})]}),e.jsx(le,{to:"/restaurants",className:"text-sky-500 text-sm font-semibold",children:"ÿßŸÑŸÖÿ≤ŸäÿØ ‚Üê"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.map(f=>{const U=f.offerType==="percent_discount"?"from-amber-400 to-orange-500":f.offerType==="fixed_discount"?"from-green-400 to-emerald-500":f.offerType==="bundle_meal"?"from-purple-400 to-violet-500":"from-pink-400 to-rose-500";return e.jsxs(le,{to:`/menu?restaurant=${f.ownerId}`,className:"bg-white rounded-xl shadow-md overflow-hidden active:scale-95 transition-all",children:[e.jsxs("div",{className:`bg-gradient-to-r ${U} p-3 text-white`,children:[e.jsx("p",{className:"font-bold text-sm line-clamp-1",children:f.title}),e.jsxs("p",{className:"text-xl font-black",children:[f.offerType==="percent_discount"&&`${f.discountPercent}% ÿÆÿµŸÖ`,f.offerType==="fixed_discount"&&`ŸàŸÅŸëÿ± ${f.discountAmount} ÿ±.ÿ≥`,f.offerType==="bundle_meal"&&`${f.bundlePrice} ÿ±.ÿ≥`,f.offerType==="buy_x_get_y"&&`${f.buyQuantity}+${f.getQuantity} ŸÖÿ¨ÿßŸÜÿßŸã`]})]}),e.jsxs("div",{className:"p-2 flex items-center gap-2",children:[f.restaurantLogo?e.jsx("img",{src:f.restaurantLogo,alt:"",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-sky-100 flex items-center justify-center",children:e.jsx(Le,{className:"w-4 h-4 text-sky-500"})}),e.jsx("span",{className:"text-xs font-semibold text-gray-700 truncate",children:f.restaurantName||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©"})]})]},f.id)})})]}),D.length>0&&(!s||a==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-sky-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"üè† ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜŸÉ"})]}),e.jsx(le,{to:"/restaurants",className:"text-sky-500 text-sm font-semibold",children:"ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ ‚Üê"})]}),e.jsx("div",{className:"space-y-3",children:D.map(f=>e.jsxs(le,{to:`/menu?restaurant=${f.id}`,className:"flex items-center gap-3 bg-white rounded-xl p-3 shadow-md active:scale-[0.98] transition-all",children:[f.logoUrl?e.jsx("img",{src:f.logoUrl,alt:f.name,className:"w-14 h-14 rounded-xl object-cover"}):e.jsx("div",{className:"w-14 h-14 rounded-xl bg-sky-100 flex items-center justify-center",children:e.jsx(Le,{className:"w-7 h-7 text-sky-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-800 truncate",children:f.name}),f.packageType==="premium"&&e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded",children:"‚≠ê"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mt-1",children:[f.distance!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"w-3 h-3"}),f.distance.toFixed(1)," ŸÉŸÖ"]}),f.averageRating&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ls,{className:"w-3 h-3 fill-amber-400 text-amber-400"}),f.averageRating.toFixed(1)]}),f.city&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(es,{className:"w-3 h-3"}),f.city]})]})]}),e.jsx(qa,{className:"w-5 h-5 text-gray-400"})]},f.id))})]}),B.length>0&&(!s||a==="customer")&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Vt,{className:"w-5 h-5 text-orange-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"üî• ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ∑ŸÑÿ®ÿßŸã"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:B.map(f=>e.jsxs(le,{to:`/menu?restaurant=${f.ownerId}`,className:"bg-white rounded-xl shadow-md overflow-hidden active:scale-95 transition-all",children:[e.jsxs("div",{className:"relative aspect-square bg-sky-50",children:[f.imageUrl?e.jsx("img",{src:f.imageUrl,alt:f.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(at,{className:"w-10 h-10 text-sky-300"})}),e.jsxs("span",{className:"absolute top-2 right-2 bg-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(Vt,{className:"w-3 h-3"}),f.orderCount,"+"]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-bold text-sm text-gray-800 line-clamp-1",children:f.name}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:f.restaurantName}),e.jsxs("p",{className:"font-bold text-sky-600 text-sm mt-1",children:[f.price," ÿ±.ÿ≥"]})]})]},f.id))})]}),a==="owner"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(le,{to:"/owner",className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üìä"}),e.jsx("h3",{className:"font-bold text-sm",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ"})]}),e.jsxs(le,{to:"/owner/orders",className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üìã"}),e.jsx("h3",{className:"font-bold text-sm",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsxs(le,{to:"/owner/menu",className:"bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üçΩÔ∏è"}),e.jsx("h3",{className:"font-bold text-sm",children:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"})]}),e.jsxs(le,{to:"/owner/edit",className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-xl p-4 shadow-lg text-white active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"‚öôÔ∏è"}),e.jsx("h3",{className:"font-bold text-sm",children:"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™"})]})]}),e.jsx("button",{onClick:d,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨"})]}),a==="courier"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(le,{to:"/courier",className:"block bg-gradient-to-r from-sky-500 to-blue-600 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-4xl",children:"üöó"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿßÿ≥ÿ™ŸÑŸÖ ŸàÿßŸàÿµŸÑ ÿ∑ŸÑÿ®ÿßÿ™"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(le,{to:"/courier/wallet",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üí∞"}),e.jsx("span",{className:"font-bold text-gray-700 text-sm",children:"ŸÖÿ≠ŸÅÿ∏ÿ™Ÿä"})]}),e.jsxs(le,{to:"/profile",className:"bg-white rounded-xl p-4 shadow-md text-center active:scale-95 transition-all",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üë§"}),e.jsx("span",{className:"font-bold text-gray-700 text-sm",children:"ÿ≠ÿ≥ÿßÿ®Ÿä"})]})]}),e.jsx("button",{onClick:d,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨"})]}),a==="admin"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(le,{to:"/admin",className:"block bg-gradient-to-r from-violet-500 to-purple-600 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(us,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"})]})]})}),e.jsx("button",{onClick:d,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨"})]}),a==="developer"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(le,{to:"/developer",className:"block bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(El,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±"}),e.jsx("p",{className:"text-white/60 text-sm",children:"ÿ™ÿ≠ŸÉŸÖ ŸÉÿßŸÖŸÑ"})]})]})}),e.jsx("button",{onClick:d,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨"})]}),a==="supervisor"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(le,{to:"/supervisor",className:"block bg-gradient-to-r from-amber-500 to-amber-700 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(zs,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅÿ©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ŸàÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]})]})}),e.jsx("button",{onClick:d,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨"})]}),a==="social_media"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(le,{to:"/social-media",className:"block bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-5 shadow-lg text-white active:scale-[0.98] transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ls,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ≥Ÿàÿ¥ŸäÿßŸÑ ŸÖŸäÿØŸäÿß"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ŸàÿßŸÑÿ™ÿ≥ŸàŸäŸÇ"})]})]})}),e.jsx("button",{onClick:d,className:"w-full py-3 rounded-xl bg-white/70 text-gray-600 font-medium active:scale-[0.98] transition-all",children:"üö™ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-sky-500/50 text-xs",children:"ÿµŸèŸÜÿπ ÿ®ŸÄ ‚ù§Ô∏è ŸÅŸä ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©"})})]})]})},Ja=["ÿßŸÑÿ±Ÿäÿßÿ∂","ÿ¨ÿØÿ©","ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©","ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©","ÿßŸÑÿØŸÖÿßŸÖ","ÿßŸÑÿÆÿ®ÿ±","ÿßŸÑÿ∏Ÿáÿ±ÿßŸÜ","ÿßŸÑÿ£ÿ≠ÿ≥ÿßÿ°","ÿßŸÑŸÇÿ∑ŸäŸÅ","ÿßŸÑÿ∑ÿßÿ¶ŸÅ","ÿ™ÿ®ŸàŸÉ","ÿ®ÿ±ŸäÿØÿ©","ÿπŸÜŸäÿ≤ÿ©","ÿ≠ÿßÿ¶ŸÑ","ÿÆŸÖŸäÿ≥ ŸÖÿ¥Ÿäÿ∑","ÿ£ÿ®Ÿáÿß","ŸÜÿ¨ÿ±ÿßŸÜ","ÿ¨ÿßÿ≤ÿßŸÜ","ŸäŸÜÿ®ÿπ","ÿßŸÑÿ¨ÿ®ŸäŸÑ","ÿ≠ŸÅÿ± ÿßŸÑÿ®ÿßÿ∑ŸÜ","ÿßŸÑÿÆÿ±ÿ¨","ÿ£ŸÖŸÑÿ¨","ÿßŸÑÿπŸÑÿß","ÿ±ÿßÿ®ÿ∫","ÿßŸÑŸÇŸÜŸÅÿ∞ÿ©","ÿ®Ÿäÿ¥ÿ©","ÿµÿ®Ÿäÿß","ÿßŸÑÿ®ÿßÿ≠ÿ©","ÿπÿ±ÿπÿ±","ÿ≥ŸÉÿßŸÉÿß","ÿßŸÑÿØŸàÿßÿØŸÖŸä","ÿßŸÑŸÖÿ¨ŸÖÿπÿ©","ÿßŸÑÿ≤ŸÑŸÅŸä","ÿ¥ŸÇÿ±ÿßÿ°","ŸàÿßÿØŸä ÿßŸÑÿØŸàÿßÿ≥ÿ±","ÿ±ŸÅÿ≠ÿßÿ°","ÿ∑ÿ±ŸäŸÅ","ÿßŸÑŸÇÿ±Ÿäÿßÿ™","ÿ£ÿÆÿ±Ÿâ"],nc=({storyGroups:s,initialGroupIndex:a,currentUserId:n,onClose:d})=>{var L;const[i,y]=t.useState(a),[r,D]=t.useState(0),[E,B]=t.useState(0),[P,N]=t.useState(!1),[T,j]=t.useState(!0),f=t.useRef(null),U=t.useRef(null),g=s[i],w=g==null?void 0:g.stories[r],M=(w==null?void 0:w.type)==="video"?15e3:5e3,b=t.useCallback(async $=>{var v;if(!(!n||!$.id)&&!((v=$.viewedBy)!=null&&v.includes(n)))try{await xe(J(S,"stories",$.id),{viewsCount:Ze(1),viewedBy:Tl(n)})}catch(R){console.warn("Error recording view:",R)}},[n]),h=t.useCallback(()=>{r<g.stories.length-1?(D($=>$+1),B(0)):i<s.length-1?(y($=>$+1),D(0),B(0)):d()},[r,i,g,s.length,d]),k=t.useCallback(()=>{if(r>0)D($=>$-1),B(0);else if(i>0){y(v=>v-1);const $=s[i-1];D($.stories.length-1),B(0)}},[r,i,s]);return t.useEffect(()=>{if(!w||P)return;b(w);const $=Date.now(),v=setInterval(()=>{const c=(Date.now()-$)/M*100;c>=100?(clearInterval(v),h()):B(c)},50);return U.current=v,()=>clearInterval(v)},[w,P,M,h,b]),t.useEffect(()=>{f.current&&(P?f.current.pause():f.current.play().catch(()=>{}))},[P,w]),t.useEffect(()=>{const $=v=>{v.key==="Escape"&&d(),v.key==="ArrowRight"&&h(),v.key==="ArrowLeft"&&k(),v.key===" "&&N(R=>!R)};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[d,h,k]),w?e.jsxs("div",{className:"fixed inset-0 z-[100] bg-black flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900 to-black"}),e.jsxs("div",{className:"relative w-full max-w-md h-full max-h-[100vh] flex flex-col",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 z-20 flex gap-1 p-2",children:g.stories.map(($,v)=>e.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white transition-all duration-100",style:{width:v<r?"100%":v===r?`${E}%`:"0%"}})},v))}),e.jsxs("div",{className:"absolute top-6 left-0 right-0 z-20 flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[g.restaurantLogo?e.jsx("img",{src:g.restaurantLogo,alt:"",className:"w-10 h-10 rounded-full border-2 border-white object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold",children:((L=g.restaurantName)==null?void 0:L.charAt(0))||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold text-sm",children:g.restaurantName}),e.jsx("p",{className:"text-white/60 text-xs",children:new Date(w.createdAt||Date.now()).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[w.type==="video"&&e.jsx("button",{onClick:()=>j(!T),className:"p-2 text-white/80 hover:text-white",children:T?e.jsx(mi,{className:"w-5 h-5"}):e.jsx(hi,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>N(!P),className:"p-2 text-white/80 hover:text-white",children:P?e.jsx(vl,{className:"w-5 h-5"}):e.jsx(ui,{className:"w-5 h-5"})}),e.jsx("button",{onClick:d,className:"p-2 text-white/80 hover:text-white",children:e.jsx(_e,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center relative",onClick:$=>{const v=$.currentTarget.getBoundingClientRect(),R=$.clientX-v.left;R<v.width/3?k():R>v.width*2/3?h():N(c=>!c)},children:[w.type==="text"?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-8",style:{backgroundColor:w.backgroundColor},children:e.jsx("p",{className:"text-center text-2xl font-bold leading-relaxed",style:{color:w.textColor},children:w.caption})}):w.type==="video"?e.jsx("video",{ref:f,src:w.mediaUrl,className:"w-full h-full object-contain",autoPlay:!0,playsInline:!0,muted:T,loop:!1}):e.jsx("img",{src:w.mediaUrl,alt:"",className:"w-full h-full object-contain"}),w.caption&&w.type!=="text"&&e.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4",children:e.jsx("div",{className:"bg-black/50 backdrop-blur-sm rounded-xl p-3",children:e.jsx("p",{className:"text-white text-sm",children:w.caption})})})]}),i>0&&e.jsx("button",{onClick:k,className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/20 rounded-full hover:bg-white/30 transition z-30",children:e.jsx(Gt,{className:"w-6 h-6 text-white"})}),i<s.length-1&&e.jsx("button",{onClick:h,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/20 rounded-full hover:bg-white/30 transition z-30",children:e.jsx(xt,{className:"w-6 h-6 text-white"})}),w.menuItemId&&e.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-20",children:e.jsxs("a",{href:`/menu?restaurant=${w.ownerId}`,className:"flex items-center justify-center gap-2 w-full py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-bold shadow-lg",onClick:$=>{$.stopPropagation(),d()},children:[e.jsx(cs,{className:"w-5 h-5"}),"ÿßÿ∑ŸÑÿ® ",w.menuItemName]})})]}),e.jsx("div",{className:"hidden lg:flex absolute left-4 top-1/2 -translate-y-1/2 flex-col gap-2",children:s.slice(Math.max(0,i-2),i).map(($,v)=>{var R;return e.jsx("button",{onClick:()=>{y(i-(i-v)),D(0),B(0)},className:"w-16 h-16 rounded-xl overflow-hidden border-2 border-white/30 hover:border-white transition opacity-50 hover:opacity-100",children:$.restaurantLogo?e.jsx("img",{src:$.restaurantLogo,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold text-xl",children:(R=$.restaurantName)==null?void 0:R.charAt(0)})},$.ownerId)})}),e.jsx("div",{className:"hidden lg:flex absolute right-4 top-1/2 -translate-y-1/2 flex-col gap-2",children:s.slice(i+1,i+3).map(($,v)=>{var R;return e.jsx("button",{onClick:()=>{y(i+v+1),D(0),B(0)},className:"w-16 h-16 rounded-xl overflow-hidden border-2 border-white/30 hover:border-white transition opacity-50 hover:opacity-100",children:$.restaurantLogo?e.jsx("img",{src:$.restaurantLogo,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold text-xl",children:(R=$.restaurantName)==null?void 0:R.charAt(0)})},$.ownerId)})})]}):null},Ga={startDate:new Date("2026-02-17T00:00:00"),endDate:new Date("2026-03-15T23:59:59"),iftarTimes:{ÿßŸÑÿ±Ÿäÿßÿ∂:{hour:18,minute:5},ÿ¨ÿØÿ©:{hour:18,minute:25},"ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©":{hour:18,minute:25},"ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©":{hour:18,minute:15},ÿßŸÑÿØŸÖÿßŸÖ:{hour:17,minute:50},ÿßŸÑÿÆÿ®ÿ±:{hour:17,minute:50},ÿßŸÑÿ∑ÿßÿ¶ŸÅ:{hour:18,minute:20},ÿ™ÿ®ŸàŸÉ:{hour:18,minute:25},ÿ®ÿ±ŸäÿØÿ©:{hour:18,minute:5},ÿ≠ÿßÿ¶ŸÑ:{hour:18,minute:10},ÿ£ÿ®Ÿáÿß:{hour:18,minute:15},ŸÜÿ¨ÿ±ÿßŸÜ:{hour:18,minute:10},ÿ¨ÿßÿ≤ÿßŸÜ:{hour:18,minute:20},ÿßŸÑÿ£ÿ≠ÿ≥ÿßÿ°:{hour:17,minute:55},default:{hour:18,minute:10}}},Qt=()=>{const s=new Date;return s>=Ga.startDate&&s<=Ga.endDate},ic=(s="default")=>Ga.iftarTimes[s]||Ga.iftarTimes.default,vr=(s="default")=>{const a=new Date,n=ic(s),d=new Date(a);return d.setHours(n.hour,n.minute,0,0),a>d?0:Math.floor((d.getTime()-a.getTime())/1e3)},cc=s=>{const a=Math.floor(s/3600),n=Math.floor(s%3600/60),d=s%60;return{hours:a.toString().padStart(2,"0"),minutes:n.toString().padStart(2,"0"),seconds:d.toString().padStart(2,"0")}},dc={discount:{label:"ÿÆÿµŸÖ ÿÆÿßÿµ",emoji:"üè∑Ô∏è",color:"from-rose-500 to-pink-600"},iftar_package:{label:"ÿ®ÿßŸÇÿ© ÿ•ŸÅÿ∑ÿßÿ±",emoji:"üçΩÔ∏è",color:"from-amber-500 to-orange-600"},suhoor_package:{label:"ÿ®ÿßŸÇÿ© ÿ≥ÿ≠Ÿàÿ±",emoji:"üåô",color:"from-indigo-500 to-purple-600"},family_bundle:{label:"ÿπÿ±ÿ∂ ÿπÿßÿ¶ŸÑŸä",emoji:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶",color:"from-emerald-500 to-teal-600"}},oc=({onClose:s})=>{const[a,n]=t.useState(!0);if(!Qt()||!a)return null;const d=()=>{n(!1),s==null||s()};return e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-800 via-purple-700 to-emerald-800 rounded-2xl p-5 mb-6 shadow-xl shadow-purple-900/30",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-2 right-4",children:"üåô"}),e.jsx("div",{className:"absolute top-3 left-8",children:"‚ú®"}),e.jsx("div",{className:"absolute bottom-2 right-12",children:"‚≠ê"}),e.jsx("div",{className:"absolute bottom-3 left-4",children:"üèÆ"})]}),e.jsx("button",{onClick:d,className:"absolute top-2 left-2 p-1.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(_e,{className:"w-4 h-4 text-white/80"})}),e.jsxs("div",{className:"relative text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-3xl",children:"üåô"}),e.jsx("h2",{className:"text-2xl font-black text-amber-300",children:"ÿπÿ±Ÿàÿ∂ ÿ±ŸÖÿ∂ÿßŸÜ"}),e.jsx("span",{className:"text-3xl",children:"‚ú®"})]}),e.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:"ÿßÿ≥ÿ™ŸÖÿ™ÿπ ÿ®ÿ£ÿ¥ŸáŸâ ÿ£ÿ∑ÿ®ÿßŸÇ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ÿ®ÿπÿ±Ÿàÿ∂ ÿÆÿßÿµÿ©"}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-white/10 backdrop-blur px-4 py-1.5 rounded-full",children:[e.jsx($l,{className:"w-4 h-4 text-amber-300"}),e.jsx("span",{className:"text-amber-200 text-sm font-medium",children:"ÿ®ÿßŸÇÿßÿ™ ÿ•ŸÅÿ∑ÿßÿ± Ÿàÿ≥ÿ≠Ÿàÿ±"})]})]})]})},xc=({city:s="ÿßŸÑÿ±Ÿäÿßÿ∂"})=>{const[a,n]=t.useState(vr(s));if(t.useEffect(()=>{if(!Qt())return;const r=setInterval(()=>{const D=vr(s);n(D)},1e3);return()=>clearInterval(r)},[s]),!Qt()||a<=0)return null;const{hours:d,minutes:i,seconds:y}=cc(a);return e.jsx("div",{className:"bg-gradient-to-r from-amber-600 via-orange-600 to-amber-600 rounded-2xl p-4 mb-4 shadow-lg shadow-amber-500/30",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"üïå"}),e.jsx("span",{className:"text-white/90 text-sm font-medium",children:"ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä ŸÑŸÑÿ•ŸÅÿ∑ÿßÿ±"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl px-4 py-2 min-w-[70px]",children:[e.jsx("div",{className:"text-3xl font-black text-white",children:d}),e.jsx("div",{className:"text-white/70 text-xs",children:"ÿ≥ÿßÿπÿ©"})]}),e.jsx("span",{className:"text-2xl text-white/80 font-bold",children:":"}),e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl px-4 py-2 min-w-[70px]",children:[e.jsx("div",{className:"text-3xl font-black text-white",children:i}),e.jsx("div",{className:"text-white/70 text-xs",children:"ÿØŸÇŸäŸÇÿ©"})]}),e.jsx("span",{className:"text-2xl text-white/80 font-bold",children:":"}),e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl px-4 py-2 min-w-[70px]",children:[e.jsx("div",{className:"text-3xl font-black text-white animate-pulse",children:y}),e.jsx("div",{className:"text-white/70 text-xs",children:"ÿ´ÿßŸÜŸäÿ©"})]})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-2",children:["üìç ",s]})]})})},mc=[{value:"",label:"ÿßŸÑŸÉŸÑ"},{value:"traditional",label:"üçö ÿ£ŸÉŸÑÿßÿ™ ÿ¥ÿπÿ®Ÿäÿ©"},{value:"sweets",label:"üç∞ ÿ≠ŸÑŸàŸäÿßÿ™"},{value:"pastries",label:"ü•ß ŸÖÿπÿ¨ŸÜÿßÿ™"},{value:"grills",label:"üçñ ŸÖÿ¥ŸàŸäÿßÿ™"},{value:"healthy",label:"ü•ó ÿ£ŸÉŸÑ ÿµÿ≠Ÿä"},{value:"international",label:"üåç ÿ£ŸÉŸÑÿßÿ™ ÿπÿßŸÑŸÖŸäÿ©"}],kr=async(s,a,n)=>{try{await Te(se(S,"visitLogs"),{restaurantId:s,visitorId:a||null,visitorType:a?"customer":"anonymous",source:n||"direct",page:"menu",createdAt:X()});const d=J(S,"restaurantStats",s),i=await Ce(d),y=new Date().toISOString().split("T")[0];if(i.exists()){const D=i.data().dailyViews||{};D[y]=(D[y]||0)+1,await xe(d,{totalProfileViews:Ze(1),dailyViews:D,updatedAt:X()})}else await Qe(d,{totalProfileViews:1,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:0,appDownloads:0,dailyViews:{[y]:1},updatedAt:X()})}catch(d){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ≤Ÿäÿßÿ±ÿ©:",d)}},hc=()=>{var W,ne,re,fe,he;const{userLocation:s,role:a,user:n}=Ee(),[d]=pa(),i=d.get("ref"),[y,r]=t.useState([]),[D,E]=t.useState([]),[B,P]=t.useState([]),[N,T]=t.useState([]),[j,f]=t.useState([]),[U,g]=t.useState(!1),[w,M]=t.useState(0),[b,h]=t.useState(0),[k,L]=t.useState(!0),[$,v]=t.useState(""),[R,c]=t.useState("grid"),[o,_]=t.useState(""),[O,q]=t.useState(""),[m,p]=t.useState(0),[I,x]=t.useState(!1),[Q,A]=t.useState("distance");t.useEffect(()=>{(async()=>{const te=(await pe(se(S,"restaurants"))).docs.map(de=>({id:de.id,...de.data()})),ee=(await pe(se(S,"menuItems"))).docs.map(de=>({id:de.id,...de.data()})),Y=new Map;ee.forEach(de=>{if(de.available!==!1){const ye=Y.get(de.ownerId)||0;Y.set(de.ownerId,ye+1)}});const K=te.filter(de=>{if(!((Y.get(de.id)||0)>0))return!1;if(a==="developer"||a==="admin"||a==="owner")return!0;const G=!!de.logoUrl,ae=!!de.geoLocation;return G&&ae});try{const de=ee.filter(ye=>ye.available!==!1&&(ye.orderCount||0)>0).sort((ye,G)=>(G.orderCount||0)-(ye.orderCount||0)).slice(0,6).map(ye=>{const G=K.find(ae=>ae.id===ye.ownerId);return{...ye,restaurantName:G==null?void 0:G.name,restaurantLogo:G==null?void 0:G.logoUrl}});P(de)}catch(de){console.warn("Error loading top items:",de)}try{const de=be(se(S,"promotions"),je("isActive","==",!0)),ye=await pe(de),G=new Date,ae=ye.docs.map(ce=>{var ie,ge;return{id:ce.id,...ce.data(),expiresAt:(ge=(ie=ce.data().expiresAt)==null?void 0:ie.toDate)==null?void 0:ge.call(ie)}}).filter(ce=>!ce.expiresAt||new Date(ce.expiresAt)>G).map(ce=>{const ie=K.find(ge=>ge.id===ce.ownerId);return{...ce,restaurantName:ie==null?void 0:ie.name}});E(ae)}catch(de){console.warn("Error loading promotions:",de)}try{const de=be(se(S,"offers"),je("isActive","==",!0)),ye=await pe(de),G=new Date,ae=ye.docs.map(ce=>{var ie,ge;return{id:ce.id,...ce.data(),expiresAt:(ge=(ie=ce.data().expiresAt)==null?void 0:ie.toDate)==null?void 0:ge.call(ie)}}).filter(ce=>!ce.expiresAt||new Date(ce.expiresAt)>G).slice(0,8);T(ae)}catch(de){console.warn("Error loading special offers:",de)}try{const de=await pe(se(S,"stories")),ye=new Date,G=de.docs.map(ie=>{var ge,ke,Ae,Ue;return{id:ie.id,...ie.data(),expiresAt:(ke=(ge=ie.data().expiresAt)==null?void 0:ge.toDate)==null?void 0:ke.call(ge),createdAt:(Ue=(Ae=ie.data().createdAt)==null?void 0:Ae.toDate)==null?void 0:Ue.call(Ae)}}).filter(ie=>ie.expiresAt&&new Date(ie.expiresAt)>ye).sort((ie,ge)=>{var ke,Ae;return(((ke=ge.createdAt)==null?void 0:ke.getTime())||0)-(((Ae=ie.createdAt)==null?void 0:Ae.getTime())||0)}),ae=new Map;G.forEach(ie=>{var Ue;const ge=ae.get(ie.ownerId),ke=K.find($e=>$e.id===ie.ownerId),Ae=!(n!=null&&n.uid)||!((Ue=ie.viewedBy)!=null&&Ue.includes(n.uid));ge?(ge.stories.push(ie),Ae&&(ge.hasUnviewed=!0)):ae.set(ie.ownerId,{ownerId:ie.ownerId,restaurantName:ie.restaurantName||(ke==null?void 0:ke.name),restaurantLogo:ie.restaurantLogo||(ke==null?void 0:ke.logoUrl),stories:[ie],hasUnviewed:Ae})});const ce=Array.from(ae.values()).sort((ie,ge)=>(ge.hasUnviewed?1:0)-(ie.hasUnviewed?1:0));f(ce)}catch(de){console.warn("Error loading stories:",de)}let me=[];s?(me=K.map(de=>{if(de.geoLocation){const ye=an(s,de.geoLocation);return{...de,distance:ye}}return{...de,distance:void 0}}),(a==="customer"||a==="courier")&&(me=me.filter(de=>!de.geoLocation||de.distance===void 0?!1:de.distance<=Ma)),me.sort((de,ye)=>{const G=de.packageType==="premium"?1:0,ae=ye.packageType==="premium"?1:0;if(ae!==G)return ae-G;const ce={gold:3,silver:2,bronze:1},ie=ce[de.sellerTier||"bronze"]||0,ge=ce[ye.sellerTier||"bronze"]||0;if(ge!==ie)return ge-ie;const ke=de.isVerified?1:0,Ae=ye.isVerified?1:0;return Ae!==ke?Ae-ke:(de.distance||999)-(ye.distance||999)})):me=K.sort((de,ye)=>{const G={gold:3,silver:2,bronze:1},ae=G[de.sellerTier||"bronze"]||0,ce=G[ye.sellerTier||"bronze"]||0;if(ce!==ae)return ce-ae;const ie=de.isVerified?1:0;return(ye.isVerified?1:0)-ie}),r(me),L(!1)})()},[s,a]);const u=t.useMemo(()=>{const F=new Set(y.map(te=>te.city).filter(Boolean));return Ja.filter(te=>F.has(te))},[y]),C=t.useMemo(()=>{let F=y;if($&&(F=F.filter(te=>te.city===$)),o.trim()){const te=o.trim().toLowerCase();F=F.filter(Ne=>{var ee;return Ne.name.toLowerCase().includes(te)||((ee=Ne.city)==null?void 0:ee.toLowerCase().includes(te))})}return O&&(F=F.filter(te=>te.cuisineType===O)),m>0&&(F=F.filter(te=>(te.averageRating||0)>=m)),Q==="rating"?F=[...F].sort((te,Ne)=>(Ne.averageRating||0)-(te.averageRating||0)):Q==="orders"&&(F=[...F].sort((te,Ne)=>(Ne.totalOrders||0)-(te.totalOrders||0))),F},[y,$,o,O,m,Q]),V=[$,o,O,m>0].filter(Boolean).length;return k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-sky-200 border-t-sky-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-sky-600 font-semibold",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©..."})]}):e.jsxs("div",{className:"pb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-6 text-sky-700",children:"üç¥ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),j.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2",children:[e.jsx(vl,{className:"w-5 h-5 text-pink-500"}),e.jsx("h2",{className:"text-lg font-bold text-sky-700",children:"üì∏ ÿ≥ÿ™Ÿàÿ±Ÿä ÿßŸÑÿ£ÿ≥ÿ±"})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 px-2 scrollbar-hide",children:j.map((F,te)=>e.jsxs("button",{onClick:()=>{M(te),g(!0)},className:"flex-shrink-0 flex flex-col items-center gap-1 group",children:[e.jsxs("div",{className:`relative p-[3px] rounded-full ${F.hasUnviewed?"bg-gradient-to-tr from-amber-400 via-pink-500 to-purple-600":"bg-gray-300"}`,children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-white p-[2px]",children:F.restaurantLogo?e.jsx("img",{src:F.restaurantLogo,alt:F.restaurantName||"Restaurant",className:"w-full h-full rounded-full object-cover"}):e.jsx("div",{className:"w-full h-full rounded-full bg-sky-100 flex items-center justify-center",children:e.jsx(Le,{className:"w-7 h-7 text-sky-400"})})}),F.stories.length>1&&e.jsx("span",{className:"absolute -bottom-1 -left-1 w-5 h-5 bg-pink-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border-2 border-white",children:F.stories.length})]}),e.jsx("span",{className:"text-[11px] text-gray-600 font-medium text-center line-clamp-1 max-w-[70px]",children:F.restaurantName||"ÿ£ÿ≥ÿ±ÿ©"})]},F.ownerId))})]}),U&&j.length>0&&e.jsx(nc,{storyGroups:j,initialGroupIndex:w,currentUserId:n==null?void 0:n.uid,onClose:()=>g(!1)}),e.jsxs("div",{className:"mb-5 px-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ£ÿ≥ÿ±ÿ© ÿ£Ÿà ŸÖŸÜÿ∑ŸÇÿ©...",value:o,onChange:F=>_(F.target.value),className:"w-full bg-white border-2 border-sky-200 rounded-xl py-3 pr-10 pl-12 text-gray-800 placeholder:text-gray-400 focus:border-sky-500 focus:outline-none shadow-sm transition"}),e.jsxs("button",{onClick:()=>x(!I),className:`absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-lg transition ${I||V>0?"bg-sky-500 text-white":"bg-sky-100 text-sky-600 hover:bg-sky-200"}`,children:[e.jsx(gi,{className:"w-4 h-4"}),V>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:V})]})]}),I&&e.jsxs("div",{className:"mt-3 bg-white rounded-xl p-4 border border-sky-100 shadow-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"ÿ™ÿ±ÿ™Ÿäÿ® ÿ≠ÿ≥ÿ®"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>A("distance"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${Q==="distance"?"bg-sky-500 text-white":"bg-sky-50 text-sky-700"}`,children:[e.jsx(tt,{className:"w-3 h-3 inline ml-1"}),"ÿßŸÑÿ£ŸÇÿ±ÿ®"]}),e.jsxs("button",{onClick:()=>A("rating"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${Q==="rating"?"bg-sky-500 text-white":"bg-sky-50 text-sky-700"}`,children:[e.jsx(ls,{className:"w-3 h-3 inline ml-1"}),"ÿßŸÑÿ£ÿπŸÑŸâ ÿ™ŸÇŸäŸäŸÖÿßŸã"]}),e.jsxs("button",{onClick:()=>A("orders"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${Q==="orders"?"bg-sky-500 text-white":"bg-sky-50 text-sky-700"}`,children:[e.jsx(cs,{className:"w-3 h-3 inline ml-1"}),"ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ∑ŸÑÿ®ÿßŸã"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"ŸÜŸàÿπ ÿßŸÑŸÖÿ∑ÿ®ÿÆ"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:mc.map(F=>e.jsx("button",{onClick:()=>q(F.value),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${O===F.value?"bg-amber-500 text-white":"bg-amber-50 text-amber-700"}`,children:F.label},F.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:["ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ™ŸÇŸäŸäŸÖ: ",m>0?`${m}+ ‚≠ê`:"ÿßŸÑŸÉŸÑ"]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[0,3,3.5,4,4.5].map(F=>e.jsx("button",{onClick:()=>p(F),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition flex items-center gap-1 ${m===F?"bg-yellow-500 text-white":"bg-yellow-50 text-yellow-700"}`,children:F===0?"ÿßŸÑŸÉŸÑ":e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"w-3 h-3 fill-current"}),F,"+"]})},F))})]}),V>0&&e.jsxs("button",{onClick:()=>{_(""),v(""),q(""),p(0),A("distance")},className:"w-full py-2 bg-red-50 text-red-500 rounded-lg font-medium hover:bg-red-100 transition flex items-center justify-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ (",V,")"]})]})]}),Qt()&&e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(oc,{})}),e.jsx("div",{className:"mb-6",children:e.jsx(xc,{city:"ÿßŸÑÿ±Ÿäÿßÿ∂"})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-900 via-purple-800 to-emerald-900 rounded-3xl p-6 mb-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-4 text-4xl opacity-30 animate-pulse",children:"üåô"}),e.jsx("div",{className:"absolute bottom-2 left-4 text-3xl opacity-20",children:"‚ú®"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 text-2xl opacity-20",children:"üèÆ"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-4xl",children:"üèùÔ∏è"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white",children:"ÿπÿ±Ÿàÿ∂ ÿ±ŸÖÿ∂ÿßŸÜ"}),e.jsx("p",{className:"text-purple-200 text-sm",children:"ÿ®ÿßŸÇÿßÿ™ ÿ•ŸÅÿ∑ÿßÿ± Ÿàÿ≥ÿ≠Ÿàÿ± ŸÖŸÖŸäÿ≤ÿ©"})]})]}),e.jsx("div",{className:"bg-amber-400 text-purple-900 text-xs font-bold px-3 py-1.5 rounded-full",children:"üåô ÿπÿ±Ÿàÿ∂ ÿ≠ÿµÿ±Ÿäÿ©"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:["iftar_package","suhoor_package","family_bundle","discount"].map(F=>{const te=dc[F];return e.jsxs(le,{to:`/restaurants?offer_type=${F}`,className:"bg-white/10 backdrop-blur rounded-xl p-4 text-center hover:bg-white/20 transition-all group",children:[e.jsx("span",{className:"text-3xl block mb-2 group-hover:scale-110 transition-transform",children:te.emoji}),e.jsx("span",{className:"text-white font-bold text-sm",children:te.label})]},F)})}),e.jsxs("div",{className:"mt-4 bg-amber-400/20 rounded-xl p-3 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üë®‚Äçüç≥"}),e.jsx("p",{className:"text-amber-200 text-sm flex-1",children:"ŸáŸÑ ÿ£ŸÜÿ™ ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©ÿü ÿ£ÿ∂ŸÅ ÿπÿ±Ÿàÿ∂ŸÉ ÿßŸÑÿ±ŸÖÿ∂ÿßŸÜŸäÿ© Ÿàÿßÿ≥ÿ™ŸÇÿ®ŸÑ ÿ∑ŸÑÿ®ÿßÿ™ ÿ£ŸÉÿ´ÿ±!"}),e.jsx(le,{to:"/owner/offers?type=ramadan",className:"bg-amber-400 text-purple-900 px-4 py-2 rounded-xl font-bold text-sm whitespace-nowrap hover:bg-amber-300 transition",children:"ÿ£ÿ∂ŸÅ ÿπÿ±ÿ∂ŸÉ"})]})]})]})]}),B.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-6 h-6 text-orange-500"}),e.jsx("h2",{className:"text-xl font-bold text-sky-700",children:"üî• ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ∑ŸÑÿ®Ÿãÿß ÿßŸÑŸäŸàŸÖ"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[B.length," ÿ£ÿµŸÜÿßŸÅ"]})]}),e.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-3 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:B.map(F=>e.jsxs(le,{to:`/menu?restaurant=${F.ownerId}`,className:"group bg-white border border-sky-100 rounded-2xl shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 overflow-hidden",children:[e.jsxs("div",{className:"relative aspect-square bg-sky-50",children:[F.imageUrl?e.jsx("img",{src:F.imageUrl,alt:F.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(at,{className:"w-10 h-10 text-sky-300"})}),e.jsxs("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-orange-500 to-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow flex items-center gap-1",children:[e.jsx(Vt,{className:"w-3 h-3"}),F.orderCount,"+ ÿ∑ŸÑÿ®"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-bold text-sm text-gray-800 line-clamp-1",children:F.name}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mt-0.5",children:F.restaurantName}),e.jsx("div",{className:"flex items-center justify-between mt-2",children:e.jsxs("span",{className:"font-bold text-sky-600 text-sm",children:[F.price," ÿ±.ÿ≥"]})})]})]},F.id))})]}),N.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"w-6 h-6 text-pink-500"}),e.jsx("h2",{className:"text-xl font-bold text-sky-700",children:"üéÅ ÿπÿ±Ÿàÿ∂ ÿßŸÑÿ£ÿ≥ÿ±"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[N.length," ÿπÿ±ÿ∂"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:N.map(F=>{const te=F.offerType==="percent_discount"?Fl:F.offerType==="fixed_discount"?Yt:F.offerType==="bundle_meal"?Oe:Os,Ne=F.offerType==="percent_discount"?"from-amber-500 to-orange-500":F.offerType==="fixed_discount"?"from-green-500 to-emerald-500":F.offerType==="bundle_meal"?"from-purple-500 to-violet-500":"from-pink-500 to-rose-500";return e.jsxs(le,{to:`/menu?restaurant=${F.ownerId}`,onClick:async()=>{try{await xe(J(S,"offers",F.id),{viewsCount:Ze(1)})}catch{}},className:"group bg-white rounded-2xl shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-300 overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:`bg-gradient-to-r ${Ne} p-4 text-white relative`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-xs font-medium opacity-90",children:[F.offerType==="percent_discount"&&"ÿÆÿµŸÖ ŸÜÿ≥ÿ®ÿ©",F.offerType==="fixed_discount"&&"ÿÆÿµŸÖ ŸÖÿ®ŸÑÿ∫",F.offerType==="bundle_meal"&&"Ÿàÿ¨ÿ®ÿ© ÿÆÿßÿµÿ©",F.offerType==="buy_x_get_y"&&"ÿßÿ¥ÿ™ÿ±Ÿê Ÿàÿßÿ≠ÿµŸÑ"]})]}),e.jsx("h3",{className:"font-bold text-lg leading-tight line-clamp-1",children:F.title}),e.jsxs("div",{className:"mt-2 text-sm font-bold",children:[F.offerType==="percent_discount"&&e.jsxs("span",{className:"text-2xl",children:[F.discountPercent,"% ÿÆÿµŸÖ"]}),F.offerType==="fixed_discount"&&e.jsxs("span",{className:"text-2xl",children:["ŸàŸÅŸëÿ± ",F.discountAmount," ÿ±.ÿ≥"]}),F.offerType==="bundle_meal"&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-2xl",children:[F.bundlePrice," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"text-sm opacity-75 line-through mr-2",children:[F.bundleOriginalPrice," ÿ±.ÿ≥"]})]}),F.offerType==="buy_x_get_y"&&e.jsxs("span",{className:"text-xl",children:["ÿßÿ¥ÿ™ÿ±Ÿê ",F.buyQuantity," Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ",F.getQuantity," ŸÖÿ¨ÿßŸÜÿßŸã"]})]})]}),e.jsxs("div",{className:"p-3 flex items-center gap-3",children:[F.restaurantLogo?e.jsx("img",{src:F.restaurantLogo,alt:"",className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-sky-100 flex items-center justify-center",children:e.jsx(Le,{className:"w-5 h-5 text-sky-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-800 text-sm truncate",children:F.restaurantName||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©"}),F.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:F.description})]})]})]},F.id)})})]}),D.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx(Ls,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"font-bold text-purple-600",children:"ÿ•ÿπŸÑÿßŸÜÿßÿ™ ŸÖŸÖŸäÿ≤ÿ©"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(le,{to:`/menu?restaurant=${(W=D[b])==null?void 0:W.ownerId}`,onClick:async()=>{try{await xe(J(S,"promotions",D[b].id),{viewsCount:Ze(1)})}catch{}},className:"block bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[e.jsx(Ls,{className:"w-3 h-3"}),"ÿ•ÿπŸÑÿßŸÜ"]}),((ne=D[b])==null?void 0:ne.mediaUrl)&&e.jsx("div",{className:"relative h-48",children:D[b].type==="video"?e.jsxs(e.Fragment,{children:[e.jsx("video",{src:D[b].mediaUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,autoPlay:!0,playsInline:!0}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx(vl,{className:"w-6 h-6 text-white fill-white"})})})]}):e.jsx("img",{src:D[b].mediaUrl,alt:D[b].title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:((re=D[b])==null?void 0:re.restaurantName)&&e.jsx("span",{className:"text-xs bg-white/20 text-white px-2 py-1 rounded-full",children:D[b].restaurantName})}),((fe=D[b])==null?void 0:fe.title)&&e.jsx("h3",{className:"text-lg font-bold text-white",children:D[b].title}),((he=D[b])==null?void 0:he.description)&&e.jsx("p",{className:"text-purple-100 text-sm mt-1 line-clamp-2",children:D[b].description})]})]}),D.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:F=>{F.preventDefault(),h(te=>te===0?D.length-1:te-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:e.jsx(xt,{className:"w-5 h-5 text-gray-800"})}),e.jsx("button",{onClick:F=>{F.preventDefault(),h(te=>te===D.length-1?0:te+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:e.jsx(Gt,{className:"w-5 h-5 text-gray-800"})})]}),D.length>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-3",children:D.map((F,te)=>e.jsx("button",{onClick:()=>h(te),className:`w-2 h-2 rounded-full transition ${te===b?"bg-purple-500 w-4":"bg-gray-300"}`},te))})]})]}),u.length>0&&e.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[e.jsx(oa,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©:"})]}),e.jsx("button",{onClick:()=>v(""),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${$?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-sky-500 text-white shadow-lg"}`,children:"ÿßŸÑŸÉŸÑ"}),u.map(F=>e.jsxs("button",{onClick:()=>v(F),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1 ${$===F?"bg-sky-500 text-white shadow-lg":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:[e.jsx(es,{className:"w-4 h-4"}),F]},F)),$&&e.jsx("button",{onClick:()=>v(""),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑŸÅŸÑÿ™ÿ±",children:e.jsx(_e,{className:"w-5 h-5"})})]}),C.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ds,{className:"w-10 h-10 text-sky-500"})}),s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:"üòî ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜŸÉ"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["ŸÜÿπÿ±ÿ∂ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿ∂ŸÖŸÜ ",Ma," ŸÉŸÖ ŸÅŸÇÿ∑"]})]}):e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:$?`üòî ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ŸÅŸä ${$}`:"üòî ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ÿ≠ÿßŸÑŸäÿßŸã"})})]}),s&&C.length>0&&(a==="customer"||a==="courier")&&e.jsxs("div",{className:"mb-6 bg-sky-50 border border-sky-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(tt,{className:"w-6 h-6 text-sky-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sky-700 font-semibold",children:"ŸÜÿπÿ±ÿ∂ ŸÑŸÉ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÇÿ±Ÿäÿ®ÿ© ŸÅŸÇÿ∑"}),e.jsxs("p",{className:"text-sky-600 text-sm",children:["ÿßŸÑŸÖÿ≥ÿßŸÅÿ© ÿßŸÑŸÇÿµŸàŸâ ŸÑŸÑÿ™ŸàÿµŸäŸÑ: ",Ma," ŸÉŸÖ"]})]})]}),C.filter(F=>F.packageType==="premium").length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-6 h-6 text-amber-500"}),e.jsx("h2",{className:"text-xl font-bold text-amber-400",children:"‚≠ê ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÖŸäÿ≤ÿ©"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[C.filter(F=>F.packageType==="premium").length," ÿ£ÿ≥ÿ±ÿ©"]})]}),e.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:C.filter(F=>F.packageType==="premium").map(F=>e.jsxs(le,{to:`/menu?restaurant=${F.id}${i?`&ref=${i}`:""}`,onClick:()=>kr(F.id,n==null?void 0:n.uid,i||"direct"),className:"group bg-[#1E293B] border border-amber-500/30 rounded-[16px] shadow-lg shadow-amber-500/10 hover:shadow-xl hover:shadow-amber-500/20 hover:-translate-y-2 transform transition-all duration-300 p-3 sm:p-4 flex flex-col items-center text-center relative overflow-hidden active:scale-[0.98]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow flex items-center gap-1",children:[e.jsx(ts,{className:"w-3 h-3"}),"ŸÖŸÖŸäÿ≤ÿ©"]})}),F.distance!==void 0&&e.jsxs("div",{className:"absolute top-2 left-2 bg-sky-500/90 backdrop-blur text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-0.5",children:[e.jsx(tt,{className:"w-2.5 h-2.5"}),F.distance<1?`${Math.round(F.distance*1e3)}ŸÖ`:`${F.distance.toFixed(1)}ŸÉŸÖ`]}),e.jsxs("div",{className:"relative mt-6 mb-3",children:[F.logoUrl?e.jsx("img",{src:F.logoUrl,alt:F.name,className:"w-20 h-20 object-cover rounded-full border-4 border-amber-400 shadow-lg group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-20 h-20 flex items-center justify-center rounded-full bg-slate-700 border-4 border-amber-400 shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(at,{className:"w-8 h-8 text-amber-400"})}),(F.isVerified||F.licenseStatus==="approved")&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-sky-500 rounded-full flex items-center justify-center border-2 border-white shadow-lg",children:e.jsx(Ie,{className:"w-4 h-4 text-white"})})]}),e.jsx("h3",{className:"font-bold text-sm text-white line-clamp-1",children:F.name}),F.city&&e.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-0.5 mt-1 mb-2",children:[e.jsx(es,{className:"w-3 h-3"}),F.city]}),F.isVerified||F.licenseStatus==="approved"?e.jsxs("div",{className:"bg-sky-500/20 border border-sky-500/50 text-sky-400 text-[11px] font-bold px-3 py-1 rounded-full flex items-center gap-1 mb-2",children:[e.jsx(Ie,{className:"w-3 h-3"}),"‚úî ŸÖŸàÿ´ŸÇÿ©"]}):F.licenseStatus==="pending"?e.jsxs("div",{className:"bg-amber-500/20 border border-amber-500/50 text-amber-400 text-[11px] font-bold px-3 py-1 rounded-full flex items-center gap-1 mb-2",children:[e.jsx(Ye,{className:"w-3 h-3"}),"‚è≥ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"]}):null,e.jsxs("div",{className:"flex items-center justify-center gap-3 text-[10px] text-gray-400",children:[F.averageRating!==void 0&&F.averageRating>0&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(ls,{className:"w-3 h-3 text-amber-400 fill-amber-400"}),F.averageRating.toFixed(1)]}),F.totalOrders!==void 0&&F.totalOrders>0&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(cs,{className:"w-3 h-3"}),F.totalOrders]})]}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[F.sellerTier==="gold"&&e.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full",children:"üëë Gold"}),F.sellerTier==="silver"&&e.jsx("span",{className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full",children:"ü•à Silver"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1.5 justify-center",children:[F.allowDelivery!==!1&&e.jsxs("span",{className:"inline-flex items-center gap-0.5 bg-sky-500/20 text-sky-400 text-[9px] font-medium px-1.5 py-0.5 rounded-full",children:[e.jsx(Be,{className:"w-2.5 h-2.5"}),"ÿ™ŸàÿµŸäŸÑ"]}),F.allowPickup&&e.jsxs("span",{className:"inline-flex items-center gap-0.5 bg-green-500/20 text-green-400 text-[9px] font-medium px-1.5 py-0.5 rounded-full",children:[e.jsx(Le,{className:"w-2.5 h-2.5"}),"ÿßÿ≥ÿ™ŸÑÿßŸÖ"]})]})]},F.id))})]}),C.filter(F=>F.packageType!=="premium").length>0&&e.jsxs("div",{children:[C.filter(F=>F.packageType==="premium").length>0&&e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(at,{className:"w-5 h-5 text-gray-400"}),e.jsx("h2",{className:"text-lg font-bold text-gray-300",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿ≥ÿ±"})]}),e.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6",children:C.filter(F=>F.packageType!=="premium").map(F=>e.jsxs(le,{to:`/menu?restaurant=${F.id}${i?`&ref=${i}`:""}`,onClick:()=>kr(F.id,n==null?void 0:n.uid,i||"direct"),className:"group bg-[#1E293B] rounded-[16px] shadow-lg shadow-black/20 hover:shadow-xl hover:shadow-black/30 hover:-translate-y-1 transform transition-all duration-300 p-4 sm:p-6 flex flex-col items-center text-center relative overflow-hidden active:scale-[0.98]",children:[F.distance!==void 0&&e.jsxs("div",{className:"absolute top-3 left-3 bg-sky-500/90 backdrop-blur-sm text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[e.jsx(tt,{className:"w-3 h-3"}),F.distance<1?`${Math.round(F.distance*1e3)} ŸÖ`:`${F.distance.toFixed(1)} ŸÉŸÖ`]}),e.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-1.5",children:[F.sellerTier==="gold"&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-yellow-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow-lg",children:[e.jsx(ts,{className:"w-3 h-3"}),"Gold"]}),F.sellerTier==="silver"&&e.jsxs("div",{className:"bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow-lg",children:[e.jsx(kl,{className:"w-3 h-3"}),"Silver"]})]}),e.jsxs("div",{className:"relative mt-2 mb-4",children:[F.logoUrl?e.jsx("img",{src:F.logoUrl,alt:F.name,className:`w-24 h-24 object-cover rounded-full border-4 shadow-lg group-hover:scale-105 transition-transform duration-300 ${F.sellerTier==="gold"?"border-amber-400 ring-4 ring-amber-400/30":F.sellerTier==="silver"?"border-gray-300 ring-4 ring-gray-300/30":"border-slate-500"}`}):e.jsx("div",{className:`w-24 h-24 flex items-center justify-center rounded-full text-4xl border-4 shadow-lg group-hover:scale-105 transition-transform duration-300 ${F.sellerTier==="gold"?"bg-amber-900/50 border-amber-400":F.sellerTier==="silver"?"bg-gray-700 border-gray-300":"bg-slate-700 border-slate-500"}`,children:"üç¥"}),(F.isVerified||F.licenseStatus==="approved")&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-sky-500 rounded-full flex items-center justify-center border-2 border-white shadow-lg",children:e.jsx(Ie,{className:"w-5 h-5 text-white"})})]}),e.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:F.name}),F.city&&e.jsxs("p",{className:"text-sm text-gray-400 flex items-center justify-center gap-1 mb-3",children:[e.jsx(es,{className:"w-4 h-4"}),F.city]}),F.isVerified||F.licenseStatus==="approved"?e.jsxs("div",{className:"bg-sky-500/20 border border-sky-500/50 text-sky-400 text-sm font-bold px-4 py-1.5 rounded-full flex items-center gap-2 mb-3",children:[e.jsx(Ie,{className:"w-4 h-4"}),"‚úî ŸÖŸàÿ´ŸÇÿ©"]}):F.licenseStatus==="pending"?e.jsxs("div",{className:"bg-amber-500/20 border border-amber-500/50 text-amber-400 text-sm font-bold px-4 py-1.5 rounded-full flex items-center gap-2 mb-3",children:[e.jsx(Ye,{className:"w-4 h-4"}),"‚è≥ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"]}):null,e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(F.allowDelivery===void 0||F.allowDelivery===!0)&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-sky-500/20 text-sky-400 text-xs font-semibold rounded-full",children:[e.jsx(Be,{className:"w-3 h-3"}),"ÿ™ŸàÿµŸäŸÑ"]}),F.allowPickup&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-500/20 text-green-400 text-xs font-semibold rounded-full",children:[e.jsx(Le,{className:"w-3 h-3"}),"ÿßÿ≥ÿ™ŸÑÿßŸÖ"]})]})]},F.id))})]})]})},uc="modulepreload",gc=function(s){return"/"+s},Sr={},Bs=function(a,n,d){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),D=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(n.map(E=>{if(E=gc(E),E in Sr)return;Sr[E]=!0;const B=E.endsWith(".css"),P=B?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${P}`))return;const N=document.createElement("link");if(N.rel=B?"stylesheet":uc,B||(N.as="script"),N.crossOrigin="",N.href=E,D&&N.setAttribute("nonce",D),document.head.appendChild(N),B)return new Promise((T,j)=>{N.addEventListener("load",T),N.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${E}`)))})}))}function y(r){const D=new Event("vite:preloadError",{cancelable:!0});if(D.payload=r,window.dispatchEvent(D),!D.defaultPrevented)throw r}return i.then(r=>{for(const D of r||[])D.status==="rejected"&&y(D.reason);return a().catch(y)})},Cr="broast_cart";function Na(){const[s,a]=t.useState(()=>{try{const D=localStorage.getItem(Cr);return D?JSON.parse(D):[]}catch{return[]}});t.useEffect(()=>{localStorage.setItem(Cr,JSON.stringify(s))},[s]);const n=t.useCallback((D,E=1)=>{a(B=>{const P=B.findIndex(N=>N.id===D.id);if(P>=0){const N=[...B];return N[P]={...N[P],qty:N[P].qty+E,ownerId:D.ownerId??N[P].ownerId},N}return[...B,{...D,qty:E}]})},[]),d=t.useCallback(D=>a(E=>E.filter(B=>B.id!==D)),[]),i=t.useCallback((D,E)=>{const B=Math.max(1,E);a(P=>P.map(N=>N.id===D?{...N,qty:B}:N))},[]),y=t.useCallback(()=>a([]),[]),r=t.useMemo(()=>s.reduce((D,E)=>D+E.price*E.qty,0),[s]);return{items:s,add:n,remove:d,changeQty:i,clear:y,subtotal:r}}const ln=t.createContext(null),ze=()=>{const s=t.useContext(ln);if(!s)throw new Error("useToast must be used within ToastProvider");return s},pc=({children:s})=>{const[a,n]=t.useState([]),d=t.useCallback(r=>{n(D=>D.filter(E=>E.id!==r))},[]),i=t.useCallback((r,D,E)=>{const B=Math.random().toString(36).slice(2),P={id:B,message:r,type:D,title:E==null?void 0:E.title,duration:(E==null?void 0:E.duration)??3e3};n(N=>[...N,P]),P.duration&&P.duration>0&&setTimeout(()=>d(B),P.duration)},[d]),y=t.useMemo(()=>({show:(r,D)=>i(r,(D==null?void 0:D.type)??"info",D),success:(r,D)=>i(r,"success",D),error:(r,D)=>i(r,"error",D),info:(r,D)=>i(r,"info",D),warning:(r,D)=>i(r,"warning",D)}),[i]);return e.jsxs(ln.Provider,{value:y,children:[s,e.jsx(jc,{items:a,onClose:d})]})},bc={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},fc={success:"‚úî",error:"‚úñ",info:"‚Ñπ",warning:"‚ö†"},jc=({items:s,onClose:a})=>(t.useEffect(()=>{},[]),e.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[e.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:s.map(n=>e.jsx("div",{className:`pointer-events-auto ${bc[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-xl leading-none",children:fc[n.type]}),e.jsxs("div",{className:"flex-1",children:[n.title&&e.jsx("div",{className:"font-bold",children:n.title}),e.jsx("div",{className:"text-sm",children:n.message})]}),e.jsx("button",{onClick:()=>a(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:"√ó"})]})},n.id))}),e.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),Nc=(s,a)=>{const n=[];for(let d=0;d<s.length;d+=a)n.push(s.slice(d,d+a));return n},yc=()=>{var ee;const[s,a]=t.useState([]),[n,d]=t.useState(!0),[i,y]=t.useState(null),[r,D]=t.useState(null),[E,B]=t.useState(!0),[P,N]=t.useState(!1),[T,j]=t.useState(null),[f,U]=t.useState(0),[g,w]=t.useState(""),[M,b]=t.useState("all"),[h,k]=t.useState("all"),L=t.useRef(null),{add:$,subtotal:v,items:R,changeQty:c}=Na(),{user:o,role:_}=Ee(),O=ze(),[q]=pa(),m=q.get("restaurant"),p=1.75,I=t.useMemo(()=>{const Y=new Set;return s.forEach(K=>{K.category&&Y.add(K.category)}),["all",...Array.from(Y)]},[s]),x=t.useMemo(()=>{let Y=[...s];if(M!=="all"&&(Y=Y.filter(K=>K.category===M)),g.trim()){const K=g.toLowerCase();Y=Y.filter(me=>{var de,ye;return me.name.toLowerCase().includes(K)||((de=me.description)==null?void 0:de.toLowerCase().includes(K))||((ye=me.category)==null?void 0:ye.toLowerCase().includes(K))})}switch(h){case"popular":Y.sort((K,me)=>(me.orderCount||0)-(K.orderCount||0));break;case"price_low":Y.sort((K,me)=>K.price-me.price);break;case"price_high":Y.sort((K,me)=>me.price-K.price);break;case"new":Y.sort((K,me)=>{var G,ae,ce,ie,ge,ke;const de=((ce=(ae=(G=K.createdAt)==null?void 0:G.toDate)==null?void 0:ae.call(G))==null?void 0:ce.getTime())||0;return(((ke=(ge=(ie=me.createdAt)==null?void 0:ie.toDate)==null?void 0:ge.call(ie))==null?void 0:ke.getTime())||0)-de});break;case"available":Y=Y.filter(K=>K.available!==!1);break}return Y},[s,M,g,h]),Q=Y=>{navigator.clipboard.writeText(Y),O.success("ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ! üìã")},A=()=>{navigator.share?navigator.share({title:(i==null?void 0:i.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",text:`ÿ™ŸÅÿ∂ŸÑ ÿ®ÿ≤Ÿäÿßÿ±ÿ© ${i==null?void 0:i.name} ÿπŸÑŸâ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™`,url:window.location.href}):Q(window.location.href)};t.useEffect(()=>{if(!m)return;(async()=>{try{const K=be(se(S,"storeFollowers"),je("restaurantId","==",m)),me=await pe(K);if(U(me.size),o){const de=be(se(S,"storeFollowers"),je("restaurantId","==",m),je("followerId","==",o.uid)),ye=await pe(de);ye.empty||(N(!0),j(ye.docs[0].id))}}catch(K){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©:",K)}})()},[m,o]);const u=async()=>{var Y;if(!o){O.warning("ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑŸÉ ÿ£ŸàŸÑÿßŸã ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©");return}if(m)try{if(P&&T){await As(J(S,"storeFollowers",T)),N(!1),j(null),U(me=>Math.max(0,me-1));const K=J(S,"restaurantStats",m);await xe(K,{followersCount:Ze(-1)}).catch(()=>{}),O.info("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©")}else{const K=await Te(se(S,"storeFollowers"),{followerId:o.uid,followerName:o.displayName||((Y=o.email)==null?void 0:Y.split("@")[0])||"ÿπŸÖŸäŸÑ",restaurantId:m,createdAt:X()});N(!0),j(K.id),U(ye=>ye+1);const me=J(S,"restaurantStats",m);if((await Ce(me)).exists())await xe(me,{followersCount:Ze(1)});else{const{setDoc:ye}=await Bs(async()=>{const{setDoc:G}=await import("./vendor-firebase-DPNhE71o.js").then(ae=>ae.M);return{setDoc:G}},[]);await ye(J(S,"restaurantStats",m),{restaurantId:m,totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:0,appDownloads:0,followersCount:1,dailyViews:{},updatedAt:X()})}O.success("ÿ£ŸÜÿ™ ÿßŸÑÿ¢ŸÜ ÿ™ÿ™ÿßÿ®ÿπ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ™ÿ¨ÿ±! üíú")}}catch(K){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©:",K),O.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}};t.useEffect(()=>{(async()=>{let Y;if(m){(o==null?void 0:o.uid)===m?Y=be(se(S,"menuItems"),je("ownerId","==",m)):Y=be(se(S,"menuItems"),je("available","==",!0),je("ownerId","==",m));const ce=await Ce(J(S,"restaurants",m));ce.exists()&&y({id:ce.id,...ce.data()});try{const ie=be(se(S,"promotions"),je("ownerId","==",m),je("isActive","==",!0)),ge=await pe(ie);if(!ge.empty){const ke=ge.docs.map($e=>{var Je,We;return{id:$e.id,...$e.data(),expiresAt:(We=(Je=$e.data().expiresAt)==null?void 0:Je.toDate)==null?void 0:We.call(Je)}}),Ae=new Date,Ue=ke.filter($e=>!$e.expiresAt||new Date($e.expiresAt)>Ae);if(Ue.length>0){const $e=Ue[0];D($e),await xe(J(S,"promotions",$e.id),{viewsCount:Ze(1)})}}}catch{}}else Y=be(se(S,"menuItems"),je("available","==",!0));const me=(await pe(Y)).docs.map(ae=>({id:ae.id,...ae.data()})),de=[...new Set(me.map(ae=>ae.ownerId).filter(Boolean))],ye=new Map;if(de.length>0){const ae=Nc(de,30);for(const ce of ae){const ie=be(se(S,"restaurants"),je(ii(),"in",ce));(await pe(ie)).docs.forEach(ke=>ye.set(ke.id,{id:ke.id,...ke.data()}))}}const G=me.map(ae=>({...ae,restaurant:ae.ownerId?ye.get(ae.ownerId):void 0}));a(G),d(!1)})()},[m]);const C=Y=>R.find(K=>K.id===Y),V=Y=>{var ce,ie,ge;if(!Y.ownerId){O.warning("‚ö†Ô∏è ÿßŸÑÿµŸÜŸÅ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÖÿ∑ÿπŸÖ");return}const K=(ce=R[0])==null?void 0:ce.ownerId;if(K&&K!==Y.ownerId){O.warning("‚ö†Ô∏è ŸÑÿß ŸäŸÖŸÉŸÜ ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖŸÜ ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ŸÖÿ∑ÿπŸÖ ŸÅŸä ŸÜŸÅÿ≥ ÿßŸÑÿ∑ŸÑÿ®");return}const me=Y.discountPercent&&Y.discountPercent>0,de=((ge=(ie=Y.discountExpiresAt)==null?void 0:ie.toDate)==null?void 0:ge.call(ie))||(Y.discountExpiresAt?new Date(Y.discountExpiresAt):null),ye=me&&(!de||de>new Date),G=Y.price+p,ae=ye?G-G*((Y.discountPercent||0)/100):G;$({id:Y.id,name:Y.name,price:ae,ownerId:Y.ownerId}),O.success("ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ‚úÖ")},W=Y=>{L.current&&L.current.scrollBy({left:Y==="left"?-200:200,behavior:"smooth"})};if(n)return e.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-sky-50 to-white gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-sky-200 rounded-full"}),e.jsx("div",{className:"w-20 h-20 border-4 border-sky-500 border-t-transparent rounded-full animate-spin absolute inset-0"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sky-600 text-lg font-bold mb-1",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÜŸäŸà"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ŸÑÿ≠ÿ∏ÿßÿ™..."})]})]});const ne=!o||_==="customer"||_==="admin"||_==="developer"||!_,re=(i==null?void 0:i.isOpen)!==!1,fe=o&&m===o.uid,he=R.reduce((Y,K)=>Y+K.qty,0),te=(Y=>{switch(Y){case"gold":return{label:"ÿ∞Ÿáÿ®Ÿä",bg:"from-yellow-400 to-amber-500",icon:"üëë"};case"silver":return{label:"ŸÅÿ∂Ÿä",bg:"from-gray-300 to-gray-400",icon:"ü•à"};default:return{label:"ÿ®ÿ±ŸàŸÜÿ≤Ÿä",bg:"from-orange-400 to-orange-500",icon:"ü•â"}}})(i==null?void 0:i.sellerTier),Ne=[{value:"all",label:"ÿßŸÑŸÉŸÑ",icon:e.jsx(at,{className:"w-4 h-4"})},{value:"popular",label:"ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ∑ŸÑÿ®Ÿãÿß",icon:e.jsx(Vt,{className:"w-4 h-4"})},{value:"price_low",label:"ÿßŸÑÿ£ÿ±ÿÆÿµ",icon:e.jsx(Ms,{className:"w-4 h-4 rotate-180"})},{value:"price_high",label:"ÿßŸÑÿ£ÿ∫ŸÑŸâ",icon:e.jsx(Ms,{className:"w-4 h-4"})},{value:"new",label:"ÿ¨ÿØŸäÿØ",icon:e.jsx(is,{className:"w-4 h-4"})},{value:"available",label:"ŸÖÿ™ŸàŸÅÿ± ÿßŸÑÿ¢ŸÜ",icon:e.jsx(Ie,{className:"w-4 h-4"})}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-200 via-slate-100 to-slate-200 pb-32 -mx-4 -mt-4",children:[!re&&!fe&&e.jsxs("div",{className:"bg-gradient-to-l from-red-500 to-rose-600 text-white p-4 flex items-center justify-center gap-3 shadow-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Et,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-lg block",children:"ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖÿ∫ŸÑŸÇ ÿ≠ÿßŸÑŸäÿßŸã"}),e.jsx("span",{className:"text-white/80 text-sm",children:"ŸÑÿß ŸäŸÖŸÉŸÜ ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]})]}),fe&&e.jsxs("div",{className:"bg-gradient-to-l from-emerald-500 to-teal-600 text-white p-4 shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(js,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold block",children:"Ÿáÿ∞ÿß ŸÖÿ™ÿ¨ÿ±ŸÉ!"}),e.jsxs("span",{className:"text-white/80 text-sm",children:["ÿ£ŸÜÿ™ ÿ™ÿ±Ÿâ ",s.length," ÿµŸÜŸÅ (",s.filter(Y=>Y.available!==!1).length," ŸÖÿ™ÿßÿ≠)"]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(le,{to:"/owner/menu",className:"flex-1 bg-white text-emerald-600 px-4 py-2.5 rounded-xl font-bold hover:bg-gray-100 transition flex items-center justify-center gap-2 shadow-lg",children:[e.jsx(at,{className:"w-4 h-4"}),"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÜŸäŸà"]}),e.jsx(le,{to:"/owner/edit",className:"flex-1 bg-white/20 text-white px-4 py-2.5 rounded-xl font-bold hover:bg-white/30 transition flex items-center justify-center gap-2",children:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ™ÿ¨ÿ±"}),e.jsxs(le,{to:"/",className:"flex-1 bg-white/20 text-white px-4 py-2.5 rounded-xl font-bold hover:bg-white/30 transition flex items-center justify-center gap-2",children:["ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ",e.jsx(Rs,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-56 sm:h-72 relative overflow-hidden",children:[i!=null&&i.coverUrl?e.jsx("img",{src:i.coverUrl,alt:"ÿ∫ŸÑÿßŸÅ",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-sky-400 via-sky-500 to-sky-600"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-56 h-56 bg-sky-300/10 rounded-full translate-y-1/2 -translate-x-1/2 blur-2xl"}),e.jsxs(le,{to:"/restaurants",className:"absolute top-4 right-4 flex items-center gap-2 bg-white/90 backdrop-blur-sm text-gray-700 px-4 py-2.5 rounded-xl text-sm font-bold hover:bg-white transition shadow-lg",children:[e.jsx(Rs,{className:"w-4 h-4"}),"ÿ±ÿ¨Ÿàÿπ"]}),e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[!fe&&e.jsxs("button",{onClick:u,className:`flex items-center gap-2 px-4 py-2.5 backdrop-blur-sm rounded-xl font-bold transition shadow-lg ${P?"bg-pink-500 text-white hover:bg-pink-600":"bg-white/90 text-gray-700 hover:bg-white"}`,children:[e.jsx(ot,{className:`w-5 h-5 ${P?"fill-white":""}`}),e.jsx("span",{className:"text-sm",children:P?"ŸÖÿ™ÿßÿ®Ÿéÿπ":"ŸÖÿ™ÿßÿ®ÿπÿ©"})]}),e.jsx("button",{onClick:A,className:"p-3 bg-white/90 backdrop-blur-sm rounded-xl text-gray-700 hover:bg-white transition shadow-lg",children:e.jsx(za,{className:"w-5 h-5"})})]}),i&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-2xl bg-white p-1 shadow-2xl",children:i.logoUrl?e.jsx("img",{src:i.logoUrl,alt:i.name,className:"w-full h-full rounded-xl object-cover"}):e.jsx("div",{className:"w-full h-full rounded-xl bg-gradient-to-br from-sky-100 to-sky-200 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"üçΩÔ∏è"})})}),(i.isVerified||i.licenseStatus==="approved")&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center border-3 border-white shadow-lg",children:e.jsx(Ie,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"flex-1 pb-1",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-white mb-1 drop-shadow-lg",children:i.name}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[re?e.jsxs("span",{className:"bg-emerald-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"ŸÖÿ™ÿßÿ≠ ÿßŸÑÿ¢ŸÜ"]}):e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow",children:"ŸÖÿ∫ŸÑŸÇ"}),e.jsxs("span",{className:"bg-white/90 backdrop-blur-sm text-gray-700 text-xs font-bold px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx(ls,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),((ee=i.averageRating)==null?void 0:ee.toFixed(1))||"0.0"]}),e.jsxs("span",{className:`bg-gradient-to-r ${te.bg} text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow`,children:[te.icon," ",te.label]}),i.city&&e.jsxs("span",{className:"bg-white/90 backdrop-blur-sm text-gray-600 text-xs font-medium px-3 py-1.5 rounded-lg flex items-center gap-1 shadow",children:[e.jsx(es,{className:"w-3 h-3"}),i.city]})]})]})]})})]}),i&&e.jsx("div",{className:"mx-4 -mt-4 relative z-10",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-4",children:e.jsxs("div",{className:"grid grid-cols-4 divide-x divide-gray-100 divide-x-reverse",children:[e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-pink-50 rounded-xl flex items-center justify-center",children:e.jsx(ot,{className:"w-5 h-5 text-pink-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:f}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ŸÖÿ™ÿßÿ®ÿπ"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-amber-50 rounded-xl flex items-center justify-center",children:e.jsx(at,{className:"w-5 h-5 text-amber-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:s.length}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ÿµŸÜŸÅ"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-emerald-50 rounded-xl flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:i.totalOrders||0}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ÿ∑ŸÑÿ®"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-1 bg-sky-50 rounded-xl flex items-center justify-center",children:e.jsx(Ye,{className:"w-5 h-5 text-sky-500"})}),e.jsx("p",{className:"text-lg font-black text-gray-800",children:i.onTimeDeliveryRate?`${Math.round(i.onTimeDeliveryRate)}%`:"‚Äî"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"ÿßŸÑÿ™ÿ≤ÿßŸÖ"})]})]})})})]}),(i==null?void 0:i.announcement)&&e.jsx("div",{className:"mx-4 mt-4",children:e.jsxs("div",{className:"bg-gradient-to-l from-sky-50 to-sky-100 border border-sky-200 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Ls,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sky-900 font-medium leading-relaxed",children:i.announcement})})]})}),r&&E&&e.jsxs("div",{className:"mx-4 mt-6 bg-gradient-to-r from-violet-500 via-purple-500 to-pink-500 rounded-2xl shadow-xl overflow-hidden relative",children:[e.jsx("button",{onClick:()=>B(!1),className:"absolute top-3 left-3 z-10 p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1.5 px-3 py-1.5 bg-white text-purple-600 text-xs font-bold rounded-full shadow",children:[e.jsx(Ls,{className:"w-3.5 h-3.5"}),"ÿ•ÿπŸÑÿßŸÜ"]}),r.mediaUrl&&e.jsx("img",{src:r.mediaUrl,alt:"",className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-4",children:[r.title&&e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:r.title}),r.description&&e.jsx("p",{className:"text-white/80 text-sm",children:r.description})]})]}),e.jsxs("div",{className:"px-4 mt-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿµŸÜŸÅ...",value:g,onChange:Y=>w(Y.target.value),className:"w-full pr-12 pl-12 py-4 bg-white rounded-2xl border-2 border-gray-100 focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-lg shadow-sm"}),g&&e.jsx("button",{onClick:()=>w(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide",children:Ne.map(Y=>e.jsxs("button",{onClick:()=>k(Y.value),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${h===Y.value?"bg-sky-500 text-white shadow-lg shadow-sky-200":"bg-white text-gray-600 border border-gray-200 hover:border-sky-300"}`,children:[Y.icon,Y.label]},Y.value))}),I.length>1&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>W("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 bg-gradient-to-l from-sky-50 via-sky-50 to-transparent flex items-center justify-start",children:e.jsx(Gt,{className:"w-5 h-5 text-gray-500"})}),e.jsx("div",{ref:L,className:"flex items-center gap-2 overflow-x-auto px-8 py-2 scrollbar-hide scroll-smooth",children:I.map(Y=>e.jsx("button",{onClick:()=>b(Y),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${M===Y?"bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-200":"bg-white text-gray-600 border border-gray-200 hover:border-sky-300 hover:bg-sky-50"}`,children:Y==="all"?"üçΩÔ∏è ÿßŸÑŸÉŸÑ":Y},Y))}),e.jsx("button",{onClick:()=>W("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 w-10 h-10 bg-gradient-to-r from-sky-50 via-sky-50 to-transparent flex items-center justify-end",children:e.jsx(xt,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-sky-100 to-blue-100 rounded-2xl flex items-center justify-center shadow-sm",children:e.jsx(at,{className:"w-6 h-6 text-sky-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ÿµŸÜÿßŸÅ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.length," ÿµŸÜŸÅ",fe&&` ‚Ä¢ ${s.filter(Y=>Y.available===!1).length} ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠`]})]})]}),fe&&e.jsxs(le,{to:"/owner/menu",className:"flex items-center gap-2 px-4 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition",children:[e.jsx(vs,{className:"w-4 h-4"}),"ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÜŸÅ"]})]}),x.length===0?e.jsxs("div",{className:"text-center py-16 bg-white rounded-3xl border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Hs,{className:"w-10 h-10 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 text-lg font-bold mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿµŸÜÿßŸÅ"}),e.jsx("p",{className:"text-gray-400",children:"ÿ¨ÿ±ÿ® ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÅŸÑÿ™ÿ± ÿ£Ÿà ÿßŸÑÿ®ÿ≠ÿ´"}),e.jsx("button",{onClick:()=>{w(""),b("all"),k("all")},className:"mt-4 px-6 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition",children:"ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿπŸäŸäŸÜ"})]}):M==="all"&&!g?e.jsxs("div",{className:"space-y-8",children:[I.filter(Y=>Y!=="all").map(Y=>{const K=x.filter(me=>me.category===Y);return K.length===0?null:e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 px-5 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-xl",children:"üçΩÔ∏è"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:Y}),e.jsxs("p",{className:"text-sm text-gray-500",children:[K.length," ÿµŸÜŸÅ"]})]})]}),fe&&e.jsxs("span",{className:"text-xs text-gray-400",children:[K.filter(me=>me.available===!1).length," ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠"]})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:K.map(me=>e.jsx(gl,{item:me,isOwnStore:fe,canOrder:ne,isStoreOpen:re,getItemInCart:C,handleAdd:V,changeQty:c,SERVICE_FEE_PER_ITEM:p},me.id))})})]},Y)}),(()=>{const Y=x.filter(K=>!K.category);return Y.length===0?null:e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 px-5 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-xl",children:"üì¶"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"ÿ£ÿµŸÜÿßŸÅ ÿ£ÿÆÿ±Ÿâ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[Y.length," ÿµŸÜŸÅ"]})]})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:Y.map(K=>e.jsx(gl,{item:K,isOwnStore:fe,canOrder:ne,isStoreOpen:re,getItemInCart:C,handleAdd:V,changeQty:c,SERVICE_FEE_PER_ITEM:p},K.id))})})]})})()]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:x.map(Y=>e.jsx(gl,{item:Y,isOwnStore:fe,canOrder:ne,isStoreOpen:re,getItemInCart:C,handleAdd:V,changeQty:c,SERVICE_FEE_PER_ITEM:p},Y.id))})]}),he>0&&ne&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 pb-6 bg-gradient-to-t from-white via-white/95 to-transparent",children:e.jsxs(le,{to:"/checkout",className:"flex items-center justify-between w-full max-w-lg mx-auto px-6 py-4 rounded-2xl bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-2xl shadow-sky-300/50 font-bold hover:from-sky-600 hover:to-blue-700 transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(cs,{className:"w-6 h-6"})}),e.jsx("span",{className:"absolute -top-2 -right-2 w-6 h-6 bg-amber-400 text-sky-900 text-sm font-black rounded-full flex items-center justify-center shadow-lg",children:he})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-lg font-bold",children:"ÿπÿ±ÿ∂ ÿßŸÑÿ≥ŸÑÿ©"}),e.jsxs("span",{className:"block text-sky-100 text-sm",children:[he," ŸÖŸÜÿ™ÿ¨"]})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"block text-2xl font-black",children:v.toFixed(2)}),e.jsx("span",{className:"block text-sky-100 text-sm",children:"ÿ±.ÿ≥"})]})]})})]})},gl=({item:s,isOwnStore:a,canOrder:n,isStoreOpen:d,getItemInCart:i,handleAdd:y,changeQty:r,SERVICE_FEE_PER_ITEM:D})=>{var f,U;const E=i(s.id),B=s.discountPercent&&s.discountPercent>0,P=((U=(f=s.discountExpiresAt)==null?void 0:f.toDate)==null?void 0:U.call(f))||(s.discountExpiresAt?new Date(s.discountExpiresAt):null),N=B&&(!P||P>new Date),T=s.price+D,j=N?T-T*((s.discountPercent||0)/100):T;return e.jsxs("div",{className:`bg-white rounded-2xl overflow-hidden border shadow-sm hover:shadow-xl transition-all duration-300 group ${s.available===!1?"border-red-200 opacity-75":"border-gray-100 hover:border-sky-200"}`,children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.name,className:`w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 ${s.available===!1?"grayscale":""}`}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:e.jsx("span",{className:"text-5xl opacity-30",children:"üçΩÔ∏è"})}),s.available===!1&&a&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-lg",children:"üö´ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠"})}),N&&s.available!==!1&&e.jsxs("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2.5 py-1 rounded-lg shadow-lg",children:["ÿÆÿµŸÖ ",s.discountPercent,"%"]}),(s.orderCount||0)>10&&s.available!==!1&&e.jsxs("div",{className:"absolute top-2 left-2 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-lg shadow flex items-center gap-1",children:[e.jsx(Vt,{className:"w-3 h-3"}),"ÿ¥ÿßÿ¶ÿπ"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-1 line-clamp-1",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:`text-lg font-black ${s.available===!1?"text-gray-400":"text-sky-600"}`,children:[j.toFixed(0)," ÿ±.ÿ≥"]}),N&&e.jsx("span",{className:"text-sm text-gray-400 line-through",children:T.toFixed(0)})]}),n&&d&&s.available!==!1&&e.jsx(e.Fragment,{children:E?e.jsxs("div",{className:"flex items-center justify-between bg-sky-50 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>r(s.id,E.qty-1),className:"w-9 h-9 bg-white rounded-lg flex items-center justify-center text-sky-600 shadow-sm hover:bg-sky-100 transition",children:e.jsx(qr,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-lg font-black text-sky-600",children:E.qty}),e.jsx("button",{onClick:()=>y(s),className:"w-9 h-9 bg-sky-500 rounded-lg flex items-center justify-center text-white shadow-lg hover:bg-sky-600 transition",children:e.jsx(vs,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>y(s),className:"w-full py-2.5 rounded-xl font-bold text-sm bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-200 hover:shadow-xl hover:from-sky-600 hover:to-blue-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4"}),"ÿ£ÿ∂ŸÅ"]})}),n&&!d&&e.jsxs("div",{className:"w-full py-2.5 rounded-xl font-bold text-sm bg-gray-100 text-gray-400 text-center flex items-center justify-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4"}),"ŸÖÿ∫ŸÑŸÇ"]})]})]})},wc=.0157,vc=5,kc=()=>{const{items:s,subtotal:a,remove:n,clear:d,changeQty:i}=Na(),y=t.useMemo(()=>s.reduce((D,E)=>E.price>=vc?D+wc*E.qty:D,0),[s]),r=a+y;return s.length===0?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 flex flex-col items-center justify-center py-20 px-4",children:[e.jsx("div",{className:"w-24 h-24 bg-white/80 backdrop-blur rounded-full flex items-center justify-center mb-6 shadow-lg",children:e.jsx(cs,{className:"w-12 h-12 text-sky-400"})}),e.jsx("h2",{className:"text-xl font-bold text-sky-800 mb-2",children:"ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ©"}),e.jsx("p",{className:"text-sky-600/70 mb-6",children:"ÿ£ÿ∂ŸÅ ÿ®ÿπÿ∂ ÿßŸÑÿ£ÿµŸÜÿßŸÅ ÿßŸÑŸÑÿ∞Ÿäÿ∞ÿ©!"}),e.jsxs(le,{to:"/restaurants",className:"flex items-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-sky-200/50 hover:shadow-xl transition",children:[e.jsx(qa,{className:"w-5 h-5"}),"ÿ™ÿµŸÅÿ≠ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"]})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 py-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[e.jsx(cs,{className:"w-6 h-6 text-primary"}),"ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™",e.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:s.length})]})}),e.jsx("div",{className:"space-y-3",children:s.map(D=>e.jsxs("div",{className:"flex items-center gap-3 glass-card p-3 sm:p-4 rounded-xl",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-3xl",children:"üçü"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:D.name}),e.jsxs("p",{className:"text-primary font-bold text-sm",children:[D.price.toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>D.qty>1?i(D.id,D.qty-1):n(D.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:e.jsx(qr,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-lg w-8 text-center",children:D.qty}),e.jsx("button",{onClick:()=>i(D.id,D.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:e.jsx(vs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(D.price*D.qty).toFixed(2)," ÿ±.ÿ≥"]}),e.jsx("button",{onClick:()=>n(D.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:e.jsx(Ns,{className:"w-4 h-4"})})]})]},D.id))}),e.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sky-700",children:[e.jsx("span",{children:"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä"}),e.jsxs("span",{className:"font-bold",children:[a.toFixed(2)," ÿ±.ÿ≥"]})]}),y>0&&e.jsxs("div",{className:"flex justify-between text-gray-500",children:[e.jsx("span",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsxs("span",{className:"font-semibold",children:[y.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex justify-between text-amber-600",children:[e.jsx("span",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("span",{className:"font-semibold text-sm",children:"ÿ™Ÿèÿ≠ÿØÿØ ÿπŸÜÿØ ŸÇÿ®ŸàŸÑ ÿßŸÑÿ∑ŸÑÿ®"})]}),e.jsx("div",{className:"h-px bg-sky-200/50"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-lg text-sky-900",children:"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä"}),e.jsxs("span",{className:"font-bold text-xl text-sky-600",children:[r.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"üí° ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿäÿ≠ÿØÿØŸáÿß ÿßŸÑŸÖŸÜÿØŸàÿ® ÿ£Ÿà ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿ≠ÿ≥ÿ® ŸÖŸàŸÇÿπŸÉ"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[e.jsxs("button",{onClick:d,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl glass-light text-sky-700 font-semibold hover:bg-white/70 transition",children:[e.jsx(Ns,{className:"w-5 h-5"}),"ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑÿ≥ŸÑÿ©"]}),e.jsx(le,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg shadow-green-200/50 hover:shadow-xl hover:scale-[1.02] transition",children:"‚úÖ ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®"})]})]})})},Ua=5,Sc=15*60*1e3,Cc=10*60*1e3,Ar=async s=>{try{await Te(se(S,"loginAttempts"),{...s,timestamp:X(),createdAt:new Date().toISOString()})}catch(a){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿØÿÆŸàŸÑ:",a)}},rn=async s=>{try{const a=new Date(Date.now()-Cc),n=be(se(S,"loginAttempts"),je("email","==",s.toLowerCase()),je("status","==","failed"),je("timestamp",">=",fa.fromDate(a)));return(await pe(n)).size}catch(a){return console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ:",a),0}},Ac=async(s,a=10)=>{try{const n=be(se(S,"loginAttempts"),je("userId","==",s),ss("timestamp","desc"),bs(a));return(await pe(n)).docs.map(i=>{var y,r;return{id:i.id,...i.data(),timestamp:((r=(y=i.data().timestamp)==null?void 0:y.toDate)==null?void 0:r.call(y))||new Date(i.data().createdAt)}})}catch(n){return console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ≥ÿ¨ŸÑ ÿßŸÑÿØÿÆŸàŸÑ:",n),[]}},pl=async s=>{try{const a=be(se(S,"users"),je("email","==",s.toLowerCase())),n=await pe(a);if(!n.empty){const r=n.docs[0].data().security;if(r!=null&&r.isDeactivated)return{isBlocked:!0,remainingAttempts:0,message:"Ÿáÿ∞ÿß ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖŸàŸÇŸàŸÅ. ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ©."};if(r!=null&&r.lockedUntil){const D=r.lockedUntil instanceof fa?r.lockedUntil.toDate():new Date(r.lockedUntil);if(D>new Date){const E=Math.ceil((D.getTime()-Date.now())/6e4);return{isBlocked:!0,remainingAttempts:0,blockedUntil:D,message:`ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ≠ÿ∏Ÿàÿ± ŸÖÿ§ŸÇÿ™ÿßŸã. ÿ≠ÿßŸàŸÑ ÿ®ÿπÿØ ${E} ÿØŸÇŸäŸÇÿ©.`}}}}const d=await rn(s),i=Math.max(0,Ua-d);return d>=Ua?{isBlocked:!0,remainingAttempts:0,message:"ÿ™ŸÖ ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ. ÿ≠ÿßŸàŸÑ ŸÑÿßÿ≠ŸÇÿßŸã."}:{isBlocked:!1,remainingAttempts:i}}catch(a){return console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿßŸÑÿ© Rate Limit:",a),{isBlocked:!1,remainingAttempts:Ua}}},Ic=async s=>{try{const a=be(se(S,"users"),je("email","==",s.toLowerCase())),n=await pe(a);if(!n.empty){const d=n.docs[0];await rn(s)+1>=Ua?await xe(J(S,"users",d.id),{"security.failedAttempts":Ze(1),"security.lastFailedAttempt":X(),"security.lockedUntil":fa.fromDate(new Date(Date.now()+Sc))}):await xe(J(S,"users",d.id),{"security.failedAttempts":Ze(1),"security.lastFailedAttempt":X()})}}catch(a){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑŸÅÿßÿ¥ŸÑÿ©:",a)}},Dc=async s=>{try{await xe(J(S,"users",s),{"security.failedAttempts":0,"security.lockedUntil":null,"security.lastLogin":X()})}catch(a){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™:",a)}},nn=async s=>{try{await Te(se(S,"auditLogs"),{...s,timestamp:X(),createdAt:new Date().toISOString()})}catch(a){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ∂ÿßŸÅÿ© ÿ≥ÿ¨ŸÑ Audit:",a)}},Rc=()=>{const[s,a]=t.useState(""),[n,d]=t.useState(""),[i,y]=t.useState(!1),[r,D]=t.useState(!1),[E,B]=t.useState(""),[P,N]=t.useState(!1),[T,j]=t.useState(!1),[f,U]=t.useState(""),[g,w]=t.useState(5),M=fs(),b=Ps(),h=ze();t.useEffect(()=>{const v=setTimeout(async()=>{if(s&&s.includes("@")){const R=await pl(s);j(R.isBlocked),U(R.message||""),w(R.remainingAttempts)}},500);return()=>clearTimeout(v)},[s]);const k=async $=>{var R;$.preventDefault();const v=await pl(s);if(v.isBlocked){b.error(v.message||"ÿ™ŸÖ ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ",{title:"ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ≠ÿ∏Ÿàÿ± ŸÖÿ§ŸÇÿ™ÿßŸã"}),j(!0),U(v.message||"");return}y(!0);try{const o=(await ci(ps,s,n)).user.uid;await Ar({email:s.toLowerCase(),status:"success",userId:o,userAgent:navigator.userAgent}),await Dc(o),await nn({action:"login_success",performedBy:o,performedByName:s,details:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ŸÜÿßÿ¨ÿ≠"});const _=await Ce(J(S,"users",o));if(_.exists()){const O=_.data();if((R=O.security)!=null&&R.isDeactivated){h.error("Ÿáÿ∞ÿß ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖŸàŸÇŸàŸÅ. ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ©."),await ps.signOut();return}O.role==="owner"?M("/owner"):O.role==="admin"?M("/admin"):O.role==="developer"?M("/developer"):O.role==="courier"?M("/courier"):O.role==="supervisor"?M("/supervisor"):O.role==="social_media"?M("/social-media"):O.role==="support"?M("/support"):O.role==="accountant"?M("/accounting"):M("/")}else b.warning("ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖŸàÿ¨ŸàÿØ ŸÅŸä Auth ŸÑŸÉŸÜ ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÑŸá ÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä Firestore")}catch(c){await Ar({email:s.toLowerCase(),status:"failed",errorCode:c.code,errorMessage:c.message,userAgent:navigator.userAgent}),await Ic(s);let o=c.message;c.code==="auth/user-not-found"?o="ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≠ÿ≥ÿßÿ® ŸÖÿ≥ÿ¨ŸÑ ÿ®Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä":c.code==="auth/wrong-password"?o="ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©":c.code==="auth/invalid-email"?o="ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠":c.code==="auth/too-many-requests"?o="ÿ™ŸÖ ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ. ÿ≠ÿßŸàŸÑ ŸÑÿßÿ≠ŸÇÿßŸã.":c.code==="auth/invalid-credential"&&(o="ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©. ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ®ÿ±ŸäÿØ ŸàŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±.");const _=await pl(s);w(_.remainingAttempts),_.isBlocked&&(j(!0),U(_.message||"")),b.error(o,{title:"ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",..._.remainingAttempts>0&&_.remainingAttempts<3&&{description:`ÿ™ÿ®ŸÇŸâ ${_.remainingAttempts} ŸÖÿ≠ÿßŸàŸÑÿ© ŸÇÿ®ŸÑ ÿ≠ÿ∏ÿ± ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ§ŸÇÿ™ÿßŸã`}})}finally{y(!1)}},L=async $=>{if($.preventDefault(),!E.trim()){h.warning("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä");return}N(!0);try{await Br(ps,E.trim().toLowerCase()),h.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±! ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ®ÿ±ŸäÿØŸÉ üìß"),setTimeout(()=>{b.info("ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™ÿ¨ÿØ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©ÿå ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÖÿ¨ŸÑÿØ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ±ÿ∫Ÿàÿ®ÿ© (Spam)",{title:"üí° ŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸÖŸáŸÖÿ©"})},1e3),D(!1),B("")}catch(v){console.error("Reset password error:",v),v.code==="auth/user-not-found"?h.error("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≠ÿ≥ÿßÿ® ŸÖÿ≥ÿ¨ŸÑ ÿ®Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"):v.code==="auth/invalid-email"?h.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠"):v.code==="auth/too-many-requests"?h.error("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ÿßÿ™ ŸÉÿ´Ÿäÿ±ÿ©ÿå ÿßŸÜÿ™ÿ∏ÿ± ŸÇŸÑŸäŸÑÿßŸã ÿ´ŸÖ ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"):h.error(`ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: ${v.message}`)}finally{N(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 px-4",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:e.jsx("span",{className:"text-4xl",children:"  üçù"})}),e.jsx("h1",{className:"text-3xl font-black text-sky-600",children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}),e.jsx("p",{className:"text-sky-500 mt-1",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[T&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx(us,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 font-semibold text-sm",children:"ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ≠ÿ∏Ÿàÿ± ŸÖÿ§ŸÇÿ™ÿßŸã"}),e.jsx("p",{className:"text-red-600 text-xs mt-1",children:f})]})]}),!T&&g<3&&g>0&&e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx(Is,{className:"w-5 h-5 text-amber-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-700 font-semibold text-sm",children:"ÿ™ŸÜÿ®ŸäŸá ÿ£ŸÖŸÜŸä"}),e.jsxs("p",{className:"text-amber-600 text-xs mt-1",children:["ÿ™ÿ®ŸÇŸâ ",g," ŸÖÿ≠ÿßŸàŸÑÿ© ŸÅŸÇÿ∑ ŸÇÿ®ŸÑ ÿ≠ÿ∏ÿ± ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿ§ŸÇÿ™ÿßŸã"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Rt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"email",placeholder:"ÿßŸÑÿ•ŸäŸÖŸäŸÑ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:s,onChange:$=>a($.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Et,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"password",placeholder:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:$=>d($.target.value)})]}),e.jsx("div",{className:"text-left",children:e.jsx("button",{type:"button",onClick:()=>{D(!0),B(s)},className:"text-sm text-sky-500 hover:text-sky-700 font-medium hover:underline",children:"üîë ŸÜÿ≥Ÿäÿ™ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±ÿü"})}),e.jsx("button",{disabled:i||T,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100`,children:i?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿØÿÆŸàŸÑ..."]}):T?e.jsxs(e.Fragment,{children:[e.jsx(us,{className:"w-5 h-5"}),"ŸÖÿ≠ÿ∏Ÿàÿ± ŸÖÿ§ŸÇÿ™ÿßŸã"]}):e.jsxs(e.Fragment,{children:[e.jsx(zr,{className:"w-5 h-5"}),"ÿØÿÆŸàŸÑ"]})})]}),e.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿ≠ÿ≥ÿßÿ®ÿü"," ",e.jsx(le,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"ÿ≥ÿ¨ŸëŸÑ ÿßŸÑÿ¢ŸÜ ‚ú®"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[e.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"ÿπŸÖŸäŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑÿü"}),e.jsx(le,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"üì± ÿßŸÑÿØÿÆŸàŸÑ ÿ®ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ"})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md p-8 relative",children:[e.jsx("button",{onClick:()=>D(!1),className:"absolute top-4 left-4 p-2 hover:bg-gray-100 rounded-full transition",children:e.jsx(Rs,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(_l,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"ŸÜÿ≥Ÿäÿ™ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±ÿü"}),e.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:"ÿ£ÿØÿÆŸÑ ÿ®ÿ±ŸäÿØŸÉ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä Ÿàÿ≥ŸÜÿ±ÿ≥ŸÑ ŸÑŸÉ ÿ±ÿßÿ®ÿ∑ ŸÑÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Rt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-amber-500"}),e.jsx("input",{type:"email",placeholder:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",className:`w-full rounded-2xl p-4 pr-12 bg-amber-50 text-gray-900 border-2 border-amber-100 
                             focus:outline-none focus:border-amber-400 focus:ring-4 focus:ring-amber-100 transition-all`,value:E,onChange:$=>B($.target.value),autoFocus:!0})]}),e.jsx("button",{type:"submit",disabled:P,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold p-4 rounded-2xl 
                           shadow-xl shadow-amber-300/50 transition-all hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed`,children:P?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Rt,{className:"w-5 h-5"}),"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿπŸäŸäŸÜ"]})})]}),e.jsx("button",{onClick:()=>D(!1),className:"w-full mt-4 text-center text-gray-500 hover:text-gray-700 font-medium",children:"ÿßŸÑÿπŸàÿØÿ© ŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"})]})})]})},Pc=()=>{const[s]=pa(),a=s.get("ref_restaurant"),n=s.get("type"),[d,i]=t.useState(""),[y,r]=t.useState(""),[D,E]=t.useState(""),[B,P]=t.useState(""),[N,T]=t.useState(""),[j,f]=t.useState(""),[U,g]=t.useState(!1),[w,M]=t.useState(!1),b=fs(),[h,k]=t.useState(!1),[L,$]=t.useState(!1),[v,R]=t.useState(!1);t.useEffect(()=>{(n==="customer"||n==="courier"||n==="owner")&&f(n)},[n]),t.useEffect(()=>{a&&f("customer")},[a]);const c=j==="owner"||j==="courier",o=q=>{f(q),g(!1)},_=async q=>{if(q.preventDefault(),!j)return alert("ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑÿ≠ÿ≥ÿßÿ®");if(j==="owner"&&!B)return alert("ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ");if(c&&!U)return alert("Ÿäÿ¨ÿ® ÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ");M(!0);try{const m=await Dt(ps,d,y);if(await Qe(J(S,"users",m.user.uid),{name:D,email:d,role:j,restaurantName:j==="owner"?B:null,referredBy:a||null,createdAt:X()}),j==="owner"&&await Qe(J(S,"restaurants",m.user.uid),{name:B||D||"ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ",ownerId:m.user.uid,email:d,phone:"",city:N||"",location:"",logoUrl:""},{merge:!0}),a&&j==="customer")try{await Te(se(S,"customerRegistrations"),{customerId:m.user.uid,customerName:D,customerEmail:d,restaurantId:a,registrationType:"website",createdAt:X()});const p=J(S,"restaurantStats",a);(await Ce(p)).exists()?await xe(p,{registeredCustomers:Ze(1),updatedAt:X()}):await Qe(p,{totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:1,appDownloads:0,dailyViews:{},updatedAt:X()}),await Te(se(S,"notifications"),{recipientId:a,title:"üéâ ÿπŸÖŸäŸÑ ÿ¨ÿØŸäÿØ ÿ≥ÿ¨ŸÑ ÿπÿ®ÿ± ÿ±ÿßÿ®ÿ∑ŸÉ!",message:`ÿßŸÑÿπŸÖŸäŸÑ "${D}" ÿ≥ÿ¨ŸÑ ŸÅŸä ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿπÿ®ÿ± ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ© ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ`,type:"new_customer_registration",read:!1,createdAt:X()})}catch(p){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ©:",p)}b("/")}catch(m){alert(m.message)}finally{M(!1)}},O=[{value:"customer",label:"ÿπŸÖŸäŸÑ",icon:zs,color:"sky"},{value:"courier",label:"ŸÖŸÜÿØŸàÿ®",icon:Be,color:"emerald"},{value:"owner",label:"ÿµÿßÿ≠ÿ® ŸÖÿ∑ÿπŸÖ",icon:jt,color:"orange"}];return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 px-4 py-8",children:[h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-sky-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[e.jsx(ys,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-bold text-lg",children:"ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ"})]}),e.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-sky-100 rounded-full",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 text-sm leading-relaxed space-y-4",children:[e.jsx("h3",{className:"font-bold text-sky-600",children:"1. ÿßŸÑÿ™ÿπÿ±ŸäŸÅ"}),e.jsx("p",{children:"ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸáŸä ŸÖŸÜÿµÿ© ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿ© ÿ™ŸáÿØŸÅ ÿ•ŸÑŸâ ÿπÿ±ÿ∂ Ÿàÿ™ÿ≥ŸàŸäŸÇ ŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© Ÿàÿ±ÿ®ÿ∑Ÿáÿß ÿ®ÿßŸÑÿπŸÖŸÑÿßÿ° ÿπÿ®ÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ."}),e.jsx("h3",{className:"font-bold text-sky-600",children:"2. ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÅŸä ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸÖÿ¨ÿßŸÜŸä ÿ®ÿßŸÑŸÉÿßŸÖŸÑ."}),e.jsx("li",{children:"ŸÑÿß Ÿäÿ™ŸÖ ŸÅÿ±ÿ∂ ÿ£Ÿä ÿ±ÿ≥ŸàŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©."})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"3. ÿ™ÿ≥ÿπŸäÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ Ÿàÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ™ŸÇŸàŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿ®ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨."}),e.jsxs("li",{children:["ÿ™ŸàÿßŸÅŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿπŸÑŸâ ŸÇŸäÿßŸÖ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ŸÇÿØÿ±Ÿáÿß ",e.jsx("strong",{className:"text-sky-600",children:"1.75 ÿ±ŸäÿßŸÑ"})," ÿπŸÑŸâ ŸÉŸÑ ŸÖŸÜÿ™ÿ¨."]}),e.jsxs("li",{children:["ŸÑŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ®ÿ≥ÿπÿ± 1 ÿ£Ÿà 2 ÿ±ŸäÿßŸÑÿå Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ",e.jsx("strong",{className:"text-sky-600",children:"0.25 ÿ±ŸäÿßŸÑ"})," ŸÅŸÇÿ∑."]}),e.jsx("li",{children:"Ÿäÿ∏Ÿáÿ± ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿπŸÖŸäŸÑ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿπŸÑŸâ ÿ£ŸÜŸá ÿ≥ÿπÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨."}),e.jsx("li",{children:"ŸÑÿß Ÿäÿ™ŸÖ ÿÆÿµŸÖ ÿ£Ÿä ŸÖÿ®ÿßŸÑÿ∫ ŸÖŸÜ ÿØÿÆŸÑ ÿßŸÑÿ£ÿ≥ÿ±ÿ©ÿå Ÿàÿ¨ŸÖŸäÿπ ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ© ÿ™Ÿèÿ≠ŸÖŸëŸÑ ÿπŸÑŸâ ÿßŸÑÿπŸÖŸäŸÑ."})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"4. ÿßŸÑÿ∑ŸÑÿ® ŸàÿßŸÑÿØŸÅÿπ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ÿäÿ™ŸÖ ÿπÿ±ÿ∂ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ®ÿπÿØ ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ©."}),e.jsx("li",{children:"ŸÇÿØ Ÿäÿ™ŸÖ ÿßÿ≠ÿ™ÿ≥ÿßÿ® ÿ±ÿ≥ŸàŸÖ ÿ£ÿÆÿ±Ÿâ ŸÖÿ´ŸÑ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿàÿ∂ÿ±Ÿäÿ®ÿ© ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿ∂ÿßŸÅÿ©."}),e.jsx("li",{children:"ÿ™ÿ≠ÿ™ŸÅÿ∏ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ≠ŸÇ ÿ™ÿ≠ÿØŸäÿ´ ÿ£Ÿà ÿ•ÿ∂ÿßŸÅÿ© ÿÆÿØŸÖÿßÿ™ ÿ£Ÿà ÿ±ÿ≥ŸàŸÖ ŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ© ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ©."})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"5. ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),e.jsx("p",{children:"ÿ™ÿ™ÿ≠ŸÖŸÑ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ŸÉÿßŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿπŸÜ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ¨ŸàÿØÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ Ÿàÿ≥ŸÑÿßŸÖÿ© ÿßŸÑÿ£ÿµŸÜÿßŸÅ"}),e.jsx("li",{children:"ŸÜÿ∏ÿßŸÅÿ© Ÿàÿ™ÿ≠ÿ∂Ÿäÿ± ÿßŸÑÿ∑ÿπÿßŸÖ ŸàÿßŸÑÿ™ÿ∫ŸÑŸäŸÅ"}),e.jsx("li",{children:"ÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßÿ∑ÿßÿ™ ÿßŸÑÿµÿ≠Ÿäÿ© ÿßŸÑŸÖÿπŸÖŸàŸÑ ÿ®Ÿáÿß"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"6. ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ™ŸàŸÅŸäÿ± ŸÖŸÜÿµÿ© ÿ™ŸÇŸÜŸäÿ© ŸÑŸÑÿ™ŸàÿßÿµŸÑ ÿ®ŸäŸÜ ÿßŸÑÿ£ÿ≥ÿ± ŸàÿßŸÑÿπŸÖŸÑÿßÿ°"}),e.jsx("li",{children:"ÿßŸÑŸÖŸÜÿµÿ© ŸÑŸäÿ≥ÿ™ ÿ∑ÿ±ŸÅÿßŸã ŸÅŸä ÿ£Ÿä ÿπŸÇÿØ ÿ®ŸäŸÜ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ŸàÿßŸÑÿπŸÖŸäŸÑ"}),e.jsx("li",{children:"ÿßŸÑŸÖŸÜÿµÿ© ÿ∫Ÿäÿ± ŸÖÿ≥ÿ§ŸàŸÑÿ© ÿπŸÜ ÿ¨ŸàÿØÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ£Ÿà ŸÖŸàÿ´ŸàŸÇŸäÿ™Ÿáÿß"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"7. ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®"}),e.jsx("p",{children:"ÿ™ÿ≠ÿ™ŸÅÿ∏ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ≠ŸÇ ÿ™ÿπŸÑŸäŸÇ ÿ£Ÿà ÿ•ŸÜŸáÿßÿ° ÿ£Ÿä ÿ≠ÿ≥ÿßÿ® ŸäÿÆÿßŸÑŸÅ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ÿ£Ÿà Ÿäÿ∂ÿ± ÿ®ÿ≥ŸÖÿπÿ© ÿßŸÑŸÖŸÜÿµÿ© ÿ£Ÿà ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿßŸÑÿ¢ÿÆÿ±ŸäŸÜ."})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsx("button",{onClick:()=>k(!1),className:"w-full py-3 bg-sky-500 text-white font-bold rounded-xl hover:bg-sky-600 transition",children:"ŸÅŸáŸÖÿ™ ‚úì"})})]})}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-sky-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[e.jsx(us,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-bold text-lg",children:"ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©"})]}),e.jsx("button",{onClick:()=>$(!1),className:"p-2 hover:bg-sky-100 rounded-full",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 text-sm leading-relaxed space-y-4",children:[e.jsx("h3",{className:"font-bold text-sky-600",children:"1. ÿ¨ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsx("p",{children:"ŸÜÿ¨ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ© ŸÑÿ™ŸÇÿØŸäŸÖ ÿÆÿØŸÖÿßÿ™ŸÜÿß:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿßŸÑÿßÿ≥ŸÖ ŸàÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä Ÿàÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ"}),e.jsx("li",{children:"ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ¨ÿ∫ÿ±ÿßŸÅŸä (ÿπŸÜÿØ ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©)"}),e.jsx("li",{children:"ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸàÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"2. ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿÆÿØŸÖÿßÿ™ Ÿàÿ™ŸÜŸÅŸäÿ∞ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("li",{children:"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ÿ®ÿ¥ÿ£ŸÜ ÿ∑ŸÑÿ®ÿßÿ™ŸÉ"}),e.jsx("li",{children:"ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ"}),e.jsx("li",{children:"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖŸáŸÖÿ©"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"3. ÿ≠ŸÖÿßŸäÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsx("p",{children:"ŸÜÿ≥ÿ™ÿÆÿØŸÖ ÿ™ŸÇŸÜŸäÿßÿ™ ÿ£ŸÖÿßŸÜ ŸÖÿ™ŸÇÿØŸÖÿ© ŸÑÿ≠ŸÖÿßŸäÿ© ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ© ŸàŸÑÿß ŸÜÿ¥ÿßÿ±ŸÉŸáÿß ŸÖÿπ ÿ£ÿ∑ÿ±ÿßŸÅ ÿ´ÿßŸÑÿ´ÿ© ÿ•ŸÑÿß ÿπŸÜÿØ ÿßŸÑÿ∂ÿ±Ÿàÿ±ÿ© ŸÑÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿÆÿØŸÖÿ©."}),e.jsx("h3",{className:"font-bold text-sky-600",children:"4. ÿ≠ŸÇŸàŸÇŸÉ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ≠ŸÇ ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ"}),e.jsx("li",{children:"ÿ≠ŸÇ ÿ™ÿµÿ≠Ÿäÿ≠ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑÿØŸÇŸäŸÇÿ©"}),e.jsx("li",{children:"ÿ≠ŸÇ ÿ∑ŸÑÿ® ÿ≠ÿ∞ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ Ÿàÿ®ŸäÿßŸÜÿßÿ™ŸÉ"})]}),e.jsx("h3",{className:"font-bold text-sky-600",children:"5. ÿßŸÑÿ™ŸàÿßÿµŸÑ"}),e.jsx("p",{children:"ŸÑŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™ ÿ≠ŸàŸÑ ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©ÿå ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ÿπÿ®ÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ£Ÿà ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä."})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsx("button",{onClick:()=>$(!1),className:"w-full py-3 bg-sky-500 text-white font-bold rounded-xl hover:bg-sky-600 transition",children:"ŸÅŸáŸÖÿ™ ‚úì"})})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-emerald-50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600",children:[e.jsx(Be,{className:"w-5 h-5"}),e.jsx("h2",{className:"font-bold text-lg",children:"ÿ¥ÿ±Ÿàÿ∑ Ÿàÿ£ÿ≠ŸÉÿßŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®"})]}),e.jsx("button",{onClick:()=>R(!1),className:"p-2 hover:bg-emerald-100 rounded-full",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 text-sm leading-relaxed space-y-4",children:[e.jsx("h3",{className:"font-bold text-emerald-600",children:"1. ÿµŸÅÿ© ÿßŸÑŸÖŸÜÿØŸàÿ®"}),e.jsx("p",{children:"ŸäÿπŸÖŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ® ŸÉŸÖŸÇÿßŸàŸÑ ŸÖÿ≥ÿ™ŸÇŸÑ ŸàŸÑŸäÿ≥ ŸÖŸàÿ∏ŸÅÿßŸã ŸÑÿØŸâ ÿßŸÑŸÖŸÜÿµÿ©. Ÿäÿ™ÿ≠ŸÖŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ® ŸÉÿßŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ© ÿπŸÜ ÿ™ÿµÿ±ŸÅÿßÿ™Ÿá."}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"2. ÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿßŸÑÿπŸÖÿ± 18 ÿ≥ŸÜÿ© ŸÅŸÖÿß ŸÅŸàŸÇ"}),e.jsx("li",{children:"ÿ±ÿÆÿµÿ© ŸÇŸäÿßÿØÿ© ÿ≥ÿßÿ±Ÿäÿ© ÿßŸÑŸÖŸÅÿπŸàŸÑ"}),e.jsx("li",{children:"ŸÖÿ±ŸÉÿ®ÿ© ŸÖŸÜÿßÿ≥ÿ®ÿ© ŸÑŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("li",{children:"Ÿáÿßÿ™ŸÅ ÿ∞ŸÉŸä ŸÖÿπ ÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"3. ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿßÿ™"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ™ŸàÿµŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ≠ÿØÿØ"}),e.jsx("li",{children:"ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿ≥ŸÑÿßŸÖÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("li",{children:"ÿßŸÑÿ™ÿπÿßŸÖŸÑ ÿ®ŸÑÿ∑ŸÅ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ° ŸàÿßŸÑÿ£ÿ≥ÿ±"}),e.jsx("li",{children:"ÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ŸÇŸàÿßŸÜŸäŸÜ ÿßŸÑŸÖÿ±Ÿàÿ±"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"4. ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠ ŸàÿßŸÑÿ±ÿ≥ŸàŸÖ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿäÿ≠ÿØÿØŸáÿß ÿßŸÑŸÖŸÜÿØŸàÿ® ÿ£Ÿà ÿßŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsxs("li",{children:["ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©: ",e.jsx("strong",{children:"3.75 ÿ±ŸäÿßŸÑ"})," ŸÑŸÉŸÑ ÿ∑ŸÑÿ® ÿ™ŸàÿµŸäŸÑ"]}),e.jsx("li",{children:"ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠ ÿ™Ÿèÿ∂ÿßŸÅ ŸÑŸÑŸÖÿ≠ŸÅÿ∏ÿ© ŸÅŸàÿ±ÿßŸã ÿ®ÿπÿØ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"5. ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÜŸÇÿßÿ∑"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Ÿäÿ®ÿØÿ£ ÿßŸÑŸÖŸÜÿØŸàÿ® ÿ®ŸÄ 100 ŸÜŸÇÿ∑ÿ©"}),e.jsx("li",{children:"ÿ™ŸèÿÆÿµŸÖ ŸÜŸÇÿßÿ∑ ÿπŸÜÿØ ÿßŸÑÿ¥ŸÉÿßŸàŸâ ÿ£Ÿà ÿßŸÑÿ™ÿ£ÿÆŸäÿ±"}),e.jsx("li",{children:"ŸäŸèŸàŸÇŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿπŸÜÿØ ŸàÿµŸàŸÑ ÿßŸÑŸÜŸÇÿßÿ∑ ŸÑŸÄ 30 ÿ£Ÿà ÿ£ŸÇŸÑ"})]}),e.jsx("h3",{className:"font-bold text-emerald-600",children:"6. ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®"}),e.jsx("p",{children:"Ÿäÿ≠ŸÇ ŸÑŸÑŸÖŸÜÿµÿ© ÿ•ŸäŸÇÿßŸÅ ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÜÿØŸàÿ® ŸÅŸä ÿ≠ÿßŸÑÿßÿ™ ŸÖÿÆÿßŸÑŸÅÿ© ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ÿ£Ÿà ÿ™ŸÑŸÇŸä ÿ¥ŸÉÿßŸàŸâ ŸÖÿ™ŸÉÿ±ÿ±ÿ© ÿ£Ÿà ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™."})]}),e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsx("button",{onClick:()=>R(!1),className:"w-full py-3 bg-emerald-500 text-white font-bold rounded-xl hover:bg-emerald-600 transition",children:"ŸÅŸáŸÖÿ™ ‚úì"})})]})}),e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:e.jsx(ct,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ"})]}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ms,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"ÿßŸÑÿßÿ≥ŸÖ",value:D,onChange:q=>E(q.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Rt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"ÿßŸÑÿ•ŸäŸÖŸäŸÑ",type:"email",value:d,onChange:q=>i(q.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Et,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",type:"password",value:y,onChange:q=>r(q.target.value)})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:O.map(q=>{const m=q.icon,p=j===q.value;return e.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${p?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[e.jsx("input",{type:"radio",name:"role",value:q.value,className:"hidden",onChange:()=>o(q.value)}),e.jsx(m,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-bold",children:q.label})]},q.value)})}),j==="owner"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),e.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ",value:B,onChange:q=>P(q.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(es,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400 pointer-events-none"}),e.jsxs("select",{value:N,onChange:q=>T(q.target.value),className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all appearance-none cursor-pointer",children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿØŸäŸÜÿ©"}),Ja.map(q=>e.jsx("option",{value:q,children:q},q))]})]}),e.jsxs("div",{onClick:()=>g(!U),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${U?"bg-green-50 border-green-400":"bg-orange-50 border-orange-200 hover:border-orange-300"}`,children:[U?e.jsx(pr,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(br,{className:"w-6 h-6 text-orange-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm leading-relaxed",children:[e.jsxs("span",{className:U?"text-green-700":"text-orange-700",children:["ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ"," "]}),e.jsx("button",{type:"button",onClick:q=>{q.stopPropagation(),k(!0)},className:"text-sky-600 hover:text-sky-800 font-bold underline",children:"ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ"}),e.jsxs("span",{className:U?"text-green-700":"text-orange-700",children:[" ","Ÿà"," "]}),e.jsx("button",{type:"button",onClick:q=>{q.stopPropagation(),$(!0)},className:"text-sky-600 hover:text-sky-800 font-bold underline",children:"ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©"}),e.jsxs("span",{className:U?"text-green-700":"text-orange-700",children:[" ","ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"]})]})]})]}),j==="courier"&&e.jsxs("div",{onClick:()=>g(!U),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${U?"bg-green-50 border-green-400":"bg-emerald-50 border-emerald-200 hover:border-emerald-300"}`,children:[U?e.jsx(pr,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(br,{className:"w-6 h-6 text-emerald-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm leading-relaxed",children:[e.jsxs("span",{className:U?"text-green-700":"text-emerald-700",children:["ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ"," "]}),e.jsx("button",{type:"button",onClick:q=>{q.stopPropagation(),R(!0)},className:"text-emerald-600 hover:text-emerald-800 font-bold underline",children:"ÿ¥ÿ±Ÿàÿ∑ Ÿàÿ£ÿ≠ŸÉÿßŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®"}),e.jsxs("span",{className:U?"text-green-700":"text-emerald-700",children:[" ","Ÿàÿ£ÿ™ÿ≠ŸÖŸÑ ŸÉÿßŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ŸÉŸÖŸÜÿØŸàÿ® ŸÖÿ≥ÿ™ŸÇŸÑ"]})]})]}),e.jsx("button",{disabled:w||c&&!U,className:`w-full flex items-center justify-center gap-3 text-white font-bold p-4 rounded-2xl shadow-xl transition-all ${c&&!U?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 shadow-sky-300/50 hover:scale-[1.02]"}`,children:w?"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ...":e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-5 h-5"}),"ÿ™ÿ≥ÿ¨ŸäŸÑ"]})}),c&&!U&&e.jsx("p",{className:`text-center text-sm p-3 rounded-xl ${j==="courier"?"text-emerald-600 bg-emerald-50":"text-orange-600 bg-orange-50"}`,children:"‚ö†Ô∏è Ÿäÿ¨ÿ® ÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ ŸÑÿ•ŸÉŸÖÿßŸÑ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ"})]}),e.jsxs("p",{className:"mt-6 text-center text-sky-600",children:["ÿπŸÜÿØŸÉ ÿ≠ÿ≥ÿßÿ®ÿü"," ",e.jsx(le,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑ ‚ú®"})]})]})]})},Tc=[{id:"customer",title:"ÿπŸÖŸäŸÑ",subtitle:"ÿ£ÿ®ÿ∫Ÿâ ÿ£ÿ∑ŸÑÿ® ÿ£ŸÉŸÑ",emoji:"üõí",icon:e.jsx(cs,{className:"w-8 h-8"}),color:"from-green-500 to-emerald-600",shadowColor:"shadow-green-500/30",href:"/register/form?type=customer",features:["ÿ™ÿµŸÅÿ≠ ÿßŸÑŸÖÿ™ÿßÿ¨ÿ±","ÿßÿ∑ŸÑÿ® ÿ£ŸÉŸÑ ÿ®Ÿäÿ™Ÿä","ÿ™ÿßÿ®ÿπ ÿ∑ŸÑÿ®ÿßÿ™ŸÉ"]},{id:"courier",title:"ŸÖŸÜÿØŸàÿ® ÿ™ŸàÿµŸäŸÑ",subtitle:"ÿ£ÿ®ÿ∫Ÿâ ÿ£ŸàÿµŸÑ ÿ∑ŸÑÿ®ÿßÿ™",emoji:"üöó",icon:e.jsx(Be,{className:"w-8 h-8"}),color:"from-sky-500 to-blue-600",shadowColor:"shadow-sky-500/30",href:"/register/form?type=courier",features:["ÿßÿ≥ÿ™ŸÑŸÖ ÿ∑ŸÑÿ®ÿßÿ™","ÿßŸÉÿ≥ÿ® ŸÅŸÑŸàÿ≥","ÿßÿ¥ÿ™ÿ∫ŸÑ ÿ®ŸàŸÇÿ™ŸÉ"]},{id:"owner",title:"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",subtitle:"ÿπŸÜÿØŸä ÿ£ŸÉŸÑ ÿ®Ÿäÿ™Ÿä ÿ£ÿ®ŸäÿπŸá",emoji:"üë©‚Äçüç≥",icon:e.jsx(jt,{className:"w-8 h-8"}),color:"from-amber-500 to-orange-600",shadowColor:"shadow-orange-500/30",href:"/register-owner",features:["ÿ≥ÿ¨ŸëŸÑ ŸÖÿ™ÿ¨ÿ±ŸÉ","ÿ£ÿ∂ŸÅ ÿ£ÿµŸÜÿßŸÅŸÉ","ÿßÿ≥ÿ™ŸÇÿ®ŸÑ ÿ∑ŸÑÿ®ÿßÿ™"]},{id:"restaurant",title:"ŸÖÿ∑ÿπŸÖ",subtitle:"ÿπŸÜÿØŸä ŸÖÿ∑ÿπŸÖ Ÿàÿ£ÿ®ÿ∫Ÿâ ÿ£ŸàÿµŸÑ ŸÑŸÑÿπŸÖŸÑÿßÿ°",emoji:"üçΩÔ∏è",icon:e.jsx(jt,{className:"w-8 h-8"}),color:"from-rose-500 to-red-600",shadowColor:"shadow-rose-500/30",href:"/register-owner?type=restaurant",features:["ÿ≥ÿ¨ŸëŸÑ ŸÖÿ∑ÿπŸÖŸÉ","ŸÇÿßÿ¶ŸÖÿ© ÿ∑ÿπÿßŸÖ ŸÉÿßŸÖŸÑÿ©","ÿ™ŸàÿµŸäŸÑ ÿ≥ÿ±Ÿäÿπ"]}],Ec=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-purple-500 to-pink-500 
            rounded-3xl flex items-center justify-center shadow-2xl shadow-purple-500/30`,children:e.jsx("span",{className:"text-4xl",children:"‚ú®"})}),e.jsx("h1",{className:"text-3xl font-black text-gray-800 mb-2",children:"ÿ≥ÿ¨ŸëŸÑ ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ"}),e.jsx("p",{className:"text-gray-500",children:"ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿ≠ÿ≥ÿßÿ®ŸÉ"})]}),e.jsx(le,{to:"/customer-login",className:`block bg-gradient-to-r from-emerald-500 to-green-600 text-white 
            rounded-2xl p-5 mb-6 shadow-xl shadow-emerald-500/30
            active:scale-[0.98] transition-all duration-200 border-2 border-emerald-300`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-16 h-16 bg-white/20 backdrop-blur rounded-2xl 
              flex items-center justify-center flex-shrink-0`,children:e.jsx(Hr,{className:"w-8 h-8"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold",children:"üì± ÿØÿÆŸàŸÑ ÿ≥ÿ±Ÿäÿπ ÿ®ÿßŸÑÿ¨ŸàÿßŸÑ"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿ≥ÿ¨ŸëŸÑ ÿ£Ÿà ÿßÿØÿÆŸÑ ÿ®ÿ±ŸÇŸÖ ÿ¨ŸàÿßŸÑŸÉ ŸÅŸÇÿ∑"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"ÿ®ÿØŸàŸÜ ÿ•ŸäŸÖŸäŸÑ"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"ÿ®ÿØŸàŸÜ ŸÉŸÑŸÖÿ© ŸÖÿ±Ÿàÿ±"}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"ÿ≥ÿ±Ÿäÿπ Ÿàÿ¢ŸÖŸÜ"})]})]}),e.jsx(Rs,{className:"w-6 h-6 flex-shrink-0"})]})}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"ÿ£Ÿà ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿ≠ÿ≥ÿßÿ®ŸÉ"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),e.jsx("div",{className:"space-y-4",children:Tc.map(s=>e.jsx(le,{to:s.href,className:`block bg-gradient-to-r ${s.color} text-white 
                rounded-2xl p-5 shadow-xl ${s.shadowColor}
                active:scale-[0.98] transition-all duration-200`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-16 h-16 bg-white/20 backdrop-blur rounded-2xl 
                  flex items-center justify-center flex-shrink-0`,children:e.jsx("span",{className:"text-4xl",children:s.emoji})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold",children:s.title}),e.jsx("p",{className:"text-white/80 text-sm",children:s.subtitle}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.features.map((a,n)=>e.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:a},n))})]}),e.jsx(Rs,{className:"w-6 h-6 flex-shrink-0"})]})},s.id))}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("p",{className:"text-gray-500",children:["ÿπŸÜÿØŸÉ ÿ≠ÿ≥ÿßÿ®ÿü"," ",e.jsx(le,{to:"/login",className:"text-purple-600 font-bold hover:underline",children:"ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑ"})]})}),e.jsx(le,{to:"/",className:"block text-center mt-4 text-gray-400 text-sm hover:text-gray-600",children:"‚Üê ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"})]})}),$c=()=>{const s=fs(),[a,n]=t.useState(1),[d,i]=t.useState(!1),[y,r]=t.useState(""),[D,E]=t.useState(""),[B,P]=t.useState(""),[N,T]=t.useState(""),[j,f]=t.useState(""),[U,g]=t.useState(!1),w=()=>{switch(a){case 1:return D.trim().length>=2&&B!=="";case 2:return N.includes("@")&&N.length>=5&&j.length>=6;case 3:return U;default:return!1}},M=()=>{w()&&a<3&&(n(a+1),r(""))},b=()=>{a>1&&(n(a-1),r(""))},h=async()=>{if(w()){i(!0),r("");try{const k=await Dt(ps,N,j);await Qe(J(S,"users",k.user.uid),{name:D,email:N,role:"owner",city:B,createdAt:X()}),await Qe(J(S,"restaurants",k.user.uid),{name:D,ownerId:k.user.uid,email:N,city:B,isOpen:!0,packageType:"free",licenseStatus:"pending",createdAt:X()}),s("/owner")}catch(k){console.error("Registration error:",k),k.code==="auth/email-already-in-use"?r("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ¨ŸÑ ŸÖÿ≥ÿ®ŸÇÿßŸã. ÿ¨ÿ±ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"):k.code==="auth/weak-password"?r("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∂ÿπŸäŸÅÿ©. ÿßÿ≥ÿ™ÿÆÿØŸÖ 6 ÿ£ÿ≠ÿ±ŸÅ ÿ£Ÿà ÿ£ŸÉÿ´ÿ±"):r("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{i(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-amber-500 to-orange-500 
            rounded-3xl flex items-center justify-center shadow-2xl shadow-orange-500/30`,children:e.jsx(jt,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-black text-gray-800 mb-2",children:"ÿ≥ÿ¨ŸëŸÑ ÿ£ÿ≥ÿ±ÿ™ŸÉ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),e.jsx("p",{className:"text-gray-500",children:"ÿßÿ®ÿØÿ£ ÿßŸÑÿ®Ÿäÿπ ŸÅŸä ÿØŸÇÿßÿ¶ŸÇ! üöÄ"})]}),e.jsx("div",{className:"flex items-center justify-center gap-3 mb-8",children:[1,2,3].map(k=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg
                transition-all duration-300 ${a>k?"bg-green-500 text-white":a===k?"bg-amber-500 text-white shadow-lg scale-110":"bg-gray-200 text-gray-400"}`,children:a>k?e.jsx(gs,{className:"w-5 h-5"}):k}),k<3&&e.jsx("div",{className:`w-8 h-1 mx-1 rounded transition-all duration-300 ${a>k?"bg-green-500":"bg-gray-200"}`})]},k))}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mb-6",children:[a===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("span",{className:"text-5xl",children:"üè†"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-2",children:"ÿπÿ±ŸëŸÅŸÜÿß ÿ®ÿ£ÿ≥ÿ±ÿ™ŸÉ"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"ÿßŸäÿ¥ ÿßÿ≥ŸÖ ŸÖÿ∑ÿ®ÿÆŸÉÿü"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"ÿßÿ≥ŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500"}),e.jsx("input",{type:"text",value:D,onChange:k=>E(k.target.value),placeholder:"ŸÖÿ´ÿßŸÑ: ŸÖÿ∑ÿ®ÿÆ ÿ£ŸÖ ÿ≥ÿßÿ±ÿ©",className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      placeholder:text-gray-400`})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"üí° ÿßÿÆÿ™ÿ± ÿßÿ≥ŸÖ Ÿäÿπÿ®ÿ± ÿπŸÜ ŸáŸàŸäÿ™ŸÉ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsxs("div",{className:"relative",children:[e.jsx(es,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500 pointer-events-none"}),e.jsxs("select",{value:B,onChange:k=>P(k.target.value),className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      appearance-none cursor-pointer bg-white`,children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ŸÖÿØŸäŸÜÿ™ŸÉ"}),Ja.map(k=>e.jsx("option",{value:k,children:k},k))]})]})]})]}),a===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("span",{className:"text-5xl",children:"üìß"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-2",children:"ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"ŸÑÿ™ŸÇÿØÿ± ÿ™ÿØÿÆŸÑ ÿ≠ÿ≥ÿßÿ®ŸÉ ŸÑÿßÿ≠ŸÇÿßŸã"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"}),e.jsxs("div",{className:"relative",children:[e.jsx(Rt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500"}),e.jsx("input",{type:"email",value:N,onChange:k=>T(k.target.value),placeholder:"example@email.com",className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      placeholder:text-gray-400 text-left`,dir:"ltr"})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"üìß ŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ Ÿàÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2 text-lg",children:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±"}),e.jsxs("div",{className:"relative",children:[e.jsx(Et,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 text-amber-500"}),e.jsx("input",{type:"password",value:j,onChange:k=>f(k.target.value),placeholder:"6 ÿ£ÿ≠ÿ±ŸÅ ÿ£Ÿà ÿ£ŸÉÿ´ÿ±",className:`w-full p-4 pr-14 text-lg rounded-2xl border-2 border-gray-200 
                      focus:border-amber-500 focus:ring-4 focus:ring-amber-100 transition-all
                      placeholder:text-gray-400`})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"üîí ÿßÿ≠ŸÅÿ∏Ÿáÿß ŸÅŸä ŸÖŸÉÿßŸÜ ÿ¢ŸÖŸÜ"})]})]}),a===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("span",{className:"text-5xl",children:"‚ú®"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mt-2",children:"ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßŸÜÿ∑ŸÑÿßŸÇ!"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"ÿÆÿ∑Ÿàÿ© ÿ£ÿÆŸäÿ±ÿ© ŸÅŸÇÿ∑"})]}),e.jsxs("div",{className:"bg-amber-50 rounded-2xl p-4 space-y-3",children:[e.jsx("h3",{className:"font-bold text-amber-800 mb-3",children:"üìã ŸÖŸÑÿÆÿµ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ:"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßÿ≥ŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ©:"}),e.jsx("span",{className:"font-bold text-gray-800",children:D})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©:"}),e.jsx("span",{className:"font-bold text-gray-800",children:B})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:"}),e.jsx("span",{className:"font-bold text-gray-800",dir:"ltr",children:N})]})]}),e.jsxs("button",{onClick:()=>g(!U),className:`w-full p-4 rounded-2xl border-2 flex items-center gap-4 transition-all ${U?"bg-green-50 border-green-500":"bg-white border-gray-200 hover:border-amber-300"}`,children:[U?e.jsx(Ie,{className:"w-8 h-8 text-green-500 flex-shrink-0"}):e.jsx(pi,{className:"w-8 h-8 text-gray-300 flex-shrink-0"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`font-bold ${U?"text-green-700":"text-gray-700"}`,children:"ÿ£ŸàÿßŸÅŸÇ ÿπŸÑŸâ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.jsx(le,{to:"/terms",target:"_blank",className:"text-amber-600 underline",children:"ÿßŸÇÿ±ÿ£ ÿßŸÑÿ¥ÿ±Ÿàÿ∑"})})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-amber-100 to-orange-100 rounded-2xl p-4 text-center",children:e.jsx("p",{className:"text-amber-800 font-bold",children:"üéâ ŸÖÿ®ÿ±ŸàŸÉ! ÿ®ÿπÿØ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿ™ŸÇÿØÿ± ÿ™ÿ∂ŸäŸÅ ÿ£ÿµŸÜÿßŸÅŸÉ Ÿàÿ™ÿ®ÿØÿ£ ÿ™ÿ≥ÿ™ŸÇÿ®ŸÑ ÿ∑ŸÑÿ®ÿßÿ™"})})]}),y&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border-2 border-red-200 rounded-2xl text-red-700 text-center",children:["‚ö†Ô∏è ",y]})]}),e.jsxs("div",{className:"flex gap-3",children:[a>1&&e.jsxs("button",{onClick:b,className:`flex-1 py-4 px-6 rounded-2xl bg-white border-2 border-gray-200 
                text-gray-600 font-bold text-lg flex items-center justify-center gap-2
                active:scale-95 transition-all`,children:[e.jsx(Rs,{className:"w-5 h-5"}),"ÿ±ÿ¨Ÿàÿπ"]}),e.jsx("button",{onClick:a===3?h:M,disabled:!w()||d,className:`flex-1 py-4 px-6 rounded-2xl font-bold text-lg 
              flex items-center justify-center gap-2 transition-all
              ${w()&&!d?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-xl shadow-orange-500/30 active:scale-95":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ..."]}):a===3?e.jsxs(e.Fragment,{children:[e.jsx(is,{className:"w-5 h-5"}),"ÿßÿ®ÿØÿ£ ÿßŸÑÿ¢ŸÜ!"]}):e.jsxs(e.Fragment,{children:["ÿßŸÑÿ™ÿßŸÑŸä",e.jsx(qa,{className:"w-5 h-5"})]})})]}),e.jsxs("p",{className:"text-center text-gray-500 mt-6",children:["ÿπŸÜÿØŸÉ ÿ≠ÿ≥ÿßÿ®ÿü"," ",e.jsx(le,{to:"/login",className:"text-amber-600 font-bold hover:underline",children:"ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑ"})]})]})})},Ir=s=>{let a=s.replace(/\D/g,"");return a.startsWith("0")&&(a=a.substring(1)),a.startsWith("966")||(a="966"+a),"+"+a},Fc=()=>{const[s,a]=t.useState(""),[n,d]=t.useState(""),[i,y]=t.useState("phone"),[r,D]=t.useState(!1),[E,B]=t.useState(null),[P,N]=t.useState(0),T=t.useRef(null),j=t.useRef(null),f=fs(),U=Ps();t.useEffect(()=>(T.current&&!j.current&&(j.current=new ur(ps,T.current,{size:"invisible",callback:()=>{},"expired-callback":()=>{j.current=null}})),()=>{j.current&&(j.current.clear(),j.current=null)}),[]),t.useEffect(()=>{if(P>0){const b=setTimeout(()=>N(P-1),1e3);return()=>clearTimeout(b)}},[P]);const g=async()=>{if(!s||s.length<9){U.warning("ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿ¨ŸàÿßŸÑ ÿµÿ≠Ÿäÿ≠");return}const b=Ir(s);D(!0);try{!j.current&&T.current&&(j.current=new ur(ps,T.current,{size:"invisible"}));const h=await di(ps,b,j.current);B(h),y("otp"),N(60),U.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ŸÑŸâ ÿ¨ŸàÿßŸÑŸÉ")}catch(h){console.error("OTP Error:",h),j.current&&(j.current.clear(),j.current=null),h.code==="auth/invalid-phone-number"?U.error("ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠"):h.code==="auth/too-many-requests"?U.error("ŸÖÿ≠ÿßŸàŸÑÿßÿ™ ŸÉÿ´Ÿäÿ±ÿ©ÿå ÿ≠ÿßŸàŸÑ ŸÑÿßÿ≠ŸÇÿßŸã"):h.code==="auth/quota-exceeded"?U.error("ÿ™ŸÖ ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑÿ≠ÿØ ÿßŸÑŸäŸàŸÖŸäÿå ÿ≠ÿßŸàŸÑ ÿ∫ÿØÿßŸã"):U.error(h.message||"ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ŸÖÿ≤")}finally{D(!1)}},w=async()=>{if(!n||n.length!==6){U.warning("ÿ£ÿØÿÆŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿßŸÑŸÖŸÉŸàŸÜ ŸÖŸÜ 6 ÿ£ÿ±ŸÇÿßŸÖ");return}if(!E){U.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ£ÿπÿØ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ŸÖÿ≤"),y("phone");return}D(!0);try{const b=await E.confirm(n),h=b.user.uid,k=b.user.phoneNumber,L=await Ce(J(S,"users",h));let $=!1;L.exists()?U.success("ÿ£ŸáŸÑÿßŸã ÿ®ÿπŸàÿØÿ™ŸÉ! üëã"):($=!0,await Qe(J(S,"users",h),{phone:k,role:"customer",name:"",createdAt:X()}),U.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! üéâ"));const v=L.exists()?L.data():{role:"customer"};if(!((v==null?void 0:v.savedLocation)||(v==null?void 0:v.location))&&(v.role==="customer"||$))try{navigator.geolocation&&navigator.geolocation.getCurrentPosition(async c=>{const o={lat:c.coords.latitude,lng:c.coords.longitude,address:"ŸÖŸàŸÇÿπŸä ÿßŸÑÿ≠ÿßŸÑŸä"};await xe(J(S,"users",h),{savedLocation:o,location:{lat:o.lat,lng:o.lng}}),sessionStorage.setItem("broast_session_location",JSON.stringify({lat:o.lat,lng:o.lng}))},c=>{console.warn("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã:",c)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}catch(c){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ:",c)}v.role==="owner"?f("/owner"):v.role==="admin"?f("/admin"):v.role==="developer"?f("/developer"):v.role==="courier"?f("/courier"):f("/")}catch(b){console.error("Verify Error:",b),b.code==="auth/invalid-verification-code"?U.error("ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠"):b.code==="auth/code-expired"?(U.error("ÿßŸÜÿ™Ÿáÿ™ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑÿ±ŸÖÿ≤ÿå ÿ£ÿπÿØ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ"),y("phone")):U.error(b.message||"ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ŸÇŸÇ")}finally{D(!1)}},M=()=>{P>0||(y("phone"),d(""),B(null))};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 px-4",children:[e.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),e.jsx("div",{ref:T,id:"recaptcha-container"}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:e.jsx("span",{className:"text-4xl",children:"üçù"})}),e.jsx("h1",{className:"text-3xl font-black text-sky-600",children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}),e.jsx("p",{className:"text-sky-500 mt-1",children:i==="phone"?"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ":"ÿ£ÿØÿÆŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ"})]}),i==="phone"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ol,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:s,onChange:b=>a(b.target.value.replace(/\D/g,"")),maxLength:10})]}),e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"ÿ≥ŸÜÿ±ÿ≥ŸÑ ŸÑŸÉ ÿ±ŸÖÿ≤ ÿ™ÿ≠ŸÇŸÇ ÿπÿ®ÿ± SMS"}),e.jsx("button",{onClick:g,disabled:r||s.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"w-5 h-5"}),"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ"]})})]}),i==="otp"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("p",{className:"text-gray-600",children:"ÿ£ÿ±ÿ≥ŸÑŸÜÿß ÿ±ŸÖÿ≤ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ŸÑŸâ"}),e.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:Ir(s)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(_l,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),e.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:b=>d(b.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),e.jsx("button",{onClick:w,disabled:r||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÇŸÇ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(zr,{className:"w-5 h-5"}),"ÿ™ÿ£ŸÉŸäÿØ ŸàÿØÿÆŸàŸÑ"]})}),e.jsx("div",{className:"text-center",children:P>0?e.jsxs("p",{className:"text-gray-500 text-sm",children:["ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ÿπÿØ ",e.jsx("span",{className:"font-bold text-sky-600",children:P})," ÿ´ÿßŸÜŸäÿ©"]}):e.jsx("button",{onClick:M,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"ŸÑŸÖ ŸäÿµŸÑŸÉ ÿßŸÑÿ±ŸÖÿ≤ÿü ÿ£ÿπÿØ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ"})}),e.jsx("button",{onClick:()=>{y("phone"),d("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"‚Üê ÿ™ÿ∫ŸäŸäÿ± ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[e.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"ÿµÿßÿ≠ÿ® ŸÖÿ∑ÿπŸÖ ÿ£Ÿà ŸÖŸÜÿØŸàÿ®ÿü"}),e.jsx(le,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿ®ÿßŸÑÿ•ŸäŸÖŸäŸÑ ‚Üí"})]})]})]})};function _c(){return e.jsx("div",{className:"min-h-screen bg-slate-200 text-gray-800 px-4 py-10 leading-relaxed",children:e.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-4 text-center",children:"ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ© Ÿàÿ•ÿÆŸÑÿßÿ° ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ©"}),e.jsx("p",{className:"text-center text-gray-600 mb-8",children:"üè† ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}),e.jsx("section",{className:"mb-6",children:e.jsxs("p",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 text-gray-800",children:["ŸÜÿ≠ŸÜ ŸÅŸä ÿ™ÿ∑ÿ®ŸäŸÇ ",e.jsx("strong",{children:"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})," ŸÜÿ≠ÿ™ÿ±ŸÖ ÿÆÿµŸàÿµŸäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ŸàŸÜÿ≥ÿπŸâ ŸÑÿ™ŸÇÿØŸäŸÖ ŸÖŸÜÿµÿ© ÿ¢ŸÖŸÜÿ© Ÿàÿ≥ŸáŸÑÿ© ÿ™ÿ±ÿ®ÿ∑ ÿ®ŸäŸÜ ŸÖŸÇÿØŸÖŸä ÿßŸÑÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ŸàÿßŸÑÿπŸÖŸÑÿßÿ°."]})}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"1. ÿ∑ÿ®Ÿäÿπÿ© ÿØŸàÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsxs("li",{children:["ÿ™ÿ∑ÿ®ŸäŸÇ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸäÿπŸÖŸÑ ŸÉŸÄ",e.jsx("strong",{className:"text-sky-600",children:"ŸÖŸÜÿµÿ© Ÿàÿ≥Ÿäÿ∑ÿ© ŸÅŸÇÿ∑"})," ŸÑÿ±ÿ®ÿ∑ ÿßŸÑÿπŸÖŸÑÿßÿ° ÿ®ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ŸàÿßŸÑŸÖÿ∑ÿßÿπŸÖ ŸàŸÖŸÇÿØŸÖŸä ÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ™ŸàÿµŸäŸÑ."]}),e.jsxs("li",{children:["ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ",e.jsx("strong",{className:"text-red-600",children:"ŸÑÿß ŸäŸÇŸàŸÖ"})," ÿ®ÿ•ÿπÿØÿßÿØ ÿßŸÑÿ∑ÿπÿßŸÖÿå ŸàŸÑÿß ÿ®ÿ™ÿ∫ŸÑŸäŸÅŸáÿå ŸàŸÑÿß ÿ®ÿ™ÿÆÿ≤ŸäŸÜŸáÿå ŸàŸÑÿß ÿ®ÿ™ŸàÿµŸäŸÑŸá ÿ®ÿ¥ŸÉŸÑ ŸÖÿ®ÿßÿ¥ÿ±."]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-red-500 pr-3",children:"2. ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿπŸÜ ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿπÿßŸÖ"}),e.jsxs("p",{className:"mb-3 text-gray-700",children:["ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿ∑ÿπŸÖÿ© ŸàÿßŸÑŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™ ÿßŸÑŸÖÿπÿ±Ÿàÿ∂ÿ© ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ Ÿäÿ™ŸÖ ÿ•ÿπÿØÿßÿØŸáÿß Ÿàÿ™ÿ¨ŸáŸäÿ≤Ÿáÿß ŸÖŸÜ ŸÇÿ®ŸÑ ",e.jsx("strong",{children:"ŸÖŸÇÿØŸÖŸä ÿßŸÑÿÆÿØŸÖÿ© ÿ£ŸÜŸÅÿ≥ŸáŸÖ"}),". ŸàÿπŸÑŸäŸá:"]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"font-bold text-red-700 mb-3",children:"ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ∫Ÿäÿ± ŸÖÿ≥ÿ§ŸàŸÑ ÿπŸÜ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-red-700 mr-4",children:[e.jsx("li",{children:"ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿπÿßŸÖ"}),e.jsx("li",{children:"ÿ≥ŸÑÿßŸÖÿ© ÿßŸÑŸÖŸÉŸàŸÜÿßÿ™"}),e.jsx("li",{children:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿÆÿ≤ŸäŸÜ"}),e.jsx("li",{children:"ÿßŸÑÿ™ÿ≥ŸÖŸÖ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿä"}),e.jsx("li",{children:"ÿ£Ÿä ÿ£ÿ∂ÿ±ÿßÿ± ÿµÿ≠Ÿäÿ© ÿ£Ÿà ÿ≠ÿ≥ÿßÿ≥Ÿäÿ© ÿ∫ÿ∞ÿßÿ¶Ÿäÿ©"}),e.jsx("li",{children:"ÿßŸÑŸÜÿ∏ÿßŸÅÿ© ÿ£Ÿà ÿßŸÑÿ™ÿ∫ŸÑŸäŸÅ"})]}),e.jsx("p",{className:"mt-4 font-bold text-gray-800 bg-amber-100 p-2 rounded",children:"‚ö†Ô∏è ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑŸÉÿßŸÖŸÑÿ© ÿ™ŸÇÿπ ÿπŸÑŸâ ŸÖŸÇÿØŸÖ ÿßŸÑÿÆÿØŸÖÿ© (ÿßŸÑÿ£ÿ≥ÿ±ÿ© / ÿßŸÑŸÖÿ∑ÿπŸÖ)"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-amber-500 pr-3",children:"3. ÿßŸÑÿ≠ÿ≥ÿßÿ≥Ÿäÿ© ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ŸàÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsxs("li",{children:["Ÿäÿ™ÿ≠ŸÖŸÑ ",e.jsx("strong",{children:"ÿßŸÑÿπŸÖŸäŸÑ"})," ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖŸÉŸàŸÜÿßÿ™ ŸÇÿ®ŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿå ÿÆÿßÿµÿ© ŸÅŸä ÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ≥Ÿäÿ© ÿ£Ÿà ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ÿßŸÑÿÆÿßÿµÿ©."]}),e.jsxs("li",{children:["ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ",e.jsx("strong",{className:"text-red-600",children:"ŸÑÿß Ÿäÿ∂ŸÖŸÜ"})," ÿØŸÇÿ© ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ÿßŸÑŸÖŸÇÿØŸÖÿ© ŸÖŸÜ ŸÖŸÇÿØŸÖŸä ÿßŸÑÿÆÿØŸÖÿ©."]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"4. ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsxs("p",{className:"mb-3 text-gray-700",children:["ÿÆÿØŸÖÿ© ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿäÿ™ŸÖ ÿ™ŸÜŸÅŸäÿ∞Ÿáÿß ÿ®Ÿàÿßÿ≥ÿ∑ÿ© ",e.jsx("strong",{children:"ÿ∑ÿ±ŸÅ ÿ´ÿßŸÑÿ´ ŸÖÿ≥ÿ™ŸÇŸÑ"}),"."]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"font-bold text-gray-700 mb-2",children:"ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ∫Ÿäÿ± ŸÖÿ≥ÿ§ŸàŸÑ ÿπŸÜ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600 mr-4",children:[e.jsx("li",{children:"ÿ™ÿ£ÿÆŸäÿ± ÿßŸÑÿ∑ŸÑÿ®"}),e.jsx("li",{children:"ÿ™ŸÑŸÅ ÿßŸÑÿ∑ŸÑÿ® ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÜŸÇŸÑ"}),e.jsx("li",{children:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖŸÜ ÿßŸÑŸÖŸÜÿØŸàÿ®"})]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"5. ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsx("p",{className:"mb-3 text-gray-700",children:"ŸÇÿØ ŸÜŸÇŸàŸÖ ÿ®ÿ¨ŸÖÿπ ÿ®ŸäÿßŸÜÿßÿ™ ÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÖÿ´ŸÑ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-700 mr-4 mb-3",children:[e.jsx("li",{children:"ÿßŸÑÿßÿ≥ŸÖ"}),e.jsx("li",{children:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("li",{children:"ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ¨ÿ∫ÿ±ÿßŸÅŸä"}),e.jsx("li",{children:"ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®"})]}),e.jsxs("div",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-gray-700",children:["Ÿàÿ∞ŸÑŸÉ ",e.jsx("strong",{children:"ŸÅŸÇÿ∑"})," ŸÑÿ∫ÿ±ÿ∂ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿÆÿØŸÖÿ© Ÿàÿ™ÿ≠ÿ≥ŸäŸÜ ÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ."]}),e.jsx("p",{className:"text-sky-700 font-bold mt-2",children:"‚úÖ ŸÑÿß Ÿäÿ™ŸÖ ÿ®Ÿäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÑÿ£Ÿä ÿ∑ÿ±ŸÅ ÿÆÿßÿ±ÿ¨Ÿä"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-purple-500 pr-3",children:"6. ÿßŸÑŸÜÿ≤ÿßÿπÿßÿ™"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsxs("li",{children:["ÿ£Ÿä ŸÜÿ≤ÿßÿπ Ÿäÿ™ÿπŸÑŸÇ ÿ®ÿßŸÑÿ∑ÿπÿßŸÖ ÿ£Ÿà ÿßŸÑÿÆÿØŸÖÿ© Ÿäÿ™ŸÖ ÿ≠ŸÑŸá ",e.jsx("strong",{children:"ŸÖÿ®ÿßÿ¥ÿ±ÿ©"})," ÿ®ŸäŸÜ ÿßŸÑÿπŸÖŸäŸÑ ŸàŸÖŸÇÿØŸÖ ÿßŸÑÿÆÿØŸÖÿ©."]}),e.jsxs("li",{children:["ÿØŸàÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸäŸÇÿ™ÿµÿ± ÿπŸÑŸâ ",e.jsx("strong",{className:"text-sky-600",children:"ÿßŸÑŸàÿ≥ÿßÿ∑ÿ© ÿßŸÑÿ™ŸÇŸÜŸäÿ© ŸÅŸÇÿ∑"}),"."]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-green-500 pr-3",children:"7. ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©"}),e.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4",children:e.jsxs("p",{className:"text-green-800",children:["ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿå ŸÅÿ•ŸÜŸÉ ",e.jsx("strong",{children:"ÿ™ŸàÿßŸÅŸÇ"})," ÿπŸÑŸâ Ÿáÿ∞Ÿá ÿßŸÑÿ¥ÿ±Ÿàÿ∑ Ÿàÿ™ŸÇÿ± ÿ®ÿ£ŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ",e.jsx("strong",{children:"Ÿàÿ≥Ÿäÿ∑ ÿ™ŸÇŸÜŸä ŸÅŸÇÿ∑"})," ŸàŸÑÿß Ÿäÿ™ÿ≠ŸÖŸÑ ÿ£Ÿä ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿπŸÜ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑŸÖÿπÿ±Ÿàÿ∂ÿ©."]})})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"8. ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß"}),e.jsxs("div",{className:"bg-sky-50 rounded-lg p-4",children:[e.jsxs("p",{className:"mb-2",children:["üìß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä: ",e.jsx("strong",{children:"afrtalbyt2026@gmail.com"})]}),e.jsxs("p",{className:"mb-2",children:["üìû ÿßŸÑÿ¨ŸàÿßŸÑ: ",e.jsx("strong",{dir:"ltr",children:"0535534208"})]}),e.jsx("p",{children:"üì± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ: ŸÇÿ≥ŸÖ ÿßŸÑÿØÿπŸÖ ŸàÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©"})]})]}),e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-400 rounded-lg p-4 mt-8 text-center",children:[e.jsx("p",{className:"text-amber-800 font-bold text-lg",children:"‚ö†Ô∏è ÿ•ŸÇÿ±ÿßÿ± ŸÖŸáŸÖ"}),e.jsx("p",{className:"text-amber-700 mt-2",children:'ÿ®ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ "ŸÖŸàÿßŸÅŸÇ" ÿ£Ÿà ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿå ÿ£ŸÜÿ™ ÿ™ŸÇÿ± ÿ®ÿ£ŸÜŸÉ ŸÇÿ±ÿ£ÿ™ ŸàŸÅŸáŸÖÿ™ ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ© Ÿàÿ•ÿÆŸÑÿßÿ° ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© Ÿàÿ™ŸàÿßŸÅŸÇ ÿπŸÑŸäŸáÿß ÿ®ÿßŸÑŸÉÿßŸÖŸÑ.'})]}),e.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["ÿ™ŸÖ ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´ ŸÑŸáÿ∞Ÿá ÿßŸÑÿ≥Ÿäÿßÿ≥ÿ© ÿ®ÿ™ÿßÿ±ŸäÿÆ ",new Date().toLocaleDateString("ar-SA")]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(le,{to:"/terms",className:"text-white bg-sky-500 hover:bg-sky-600 px-6 py-3 rounded-lg inline-block transition-colors text-center font-bold",children:"üìã ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ"}),e.jsx(le,{to:"/",className:"text-sky-600 bg-sky-100 hover:bg-sky-200 px-6 py-3 rounded-lg inline-block transition-colors text-center",children:"ÿßŸÑÿ±ÿ¨Ÿàÿπ ÿ•ŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"})]})]})})}function Oc(){return e.jsx("div",{className:"min-h-screen bg-slate-200 text-gray-800 px-4 py-10 leading-relaxed",children:e.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:"ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ - üè† ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"1. ÿßŸÑÿ™ÿπÿ±ŸäŸÅ"}),e.jsx("p",{children:"ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸáŸä ŸÖŸÜÿµÿ© ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿ© ÿ™ŸáÿØŸÅ ÿ•ŸÑŸâ ÿπÿ±ÿ∂ Ÿàÿ™ÿ≥ŸàŸäŸÇ ŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© Ÿàÿ±ÿ®ÿ∑Ÿáÿß ÿ®ÿßŸÑÿπŸÖŸÑÿßÿ° ÿπÿ®ÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ."})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"2. ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÅŸä ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸÖÿ¨ÿßŸÜŸä ÿ®ÿßŸÑŸÉÿßŸÖŸÑ."}),e.jsx("li",{children:"ŸÑÿß Ÿäÿ™ŸÖ ŸÅÿ±ÿ∂ ÿ£Ÿä ÿ±ÿ≥ŸàŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"3. ÿ™ÿ≥ÿπŸäÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ Ÿàÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ÿ™ŸÇŸàŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿ®ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨."}),e.jsxs("li",{children:["ÿ™ŸàÿßŸÅŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿπŸÑŸâ ŸÇŸäÿßŸÖ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ŸÇÿØÿ±Ÿáÿß"," ",e.jsx("strong",{className:"text-sky-600",children:"1.75 ÿ±ŸäÿßŸÑ"})," ÿπŸÑŸâ ŸÉŸÑ ŸÖŸÜÿ™ÿ¨."]}),e.jsxs("li",{children:["ÿ®ÿßŸÑŸÜÿ≥ÿ®ÿ© ŸÑŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ™Ÿä ŸäŸÉŸàŸÜ ÿ≥ÿπÿ±Ÿáÿß 1 ÿ±ŸäÿßŸÑ ÿ£Ÿà 2 ÿ±ŸäÿßŸÑÿå Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ©"," ",e.jsx("strong",{className:"text-sky-600",children:"0.25 ÿ±ŸäÿßŸÑ"})," ŸÅŸÇÿ∑."]}),e.jsx("li",{children:"Ÿäÿ∏Ÿáÿ± ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿπŸÖŸäŸÑ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿπŸÑŸâ ÿ£ŸÜŸá ÿ≥ÿπÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨."}),e.jsx("li",{children:"ŸÑÿß Ÿäÿ™ŸÖ ÿÆÿµŸÖ ÿ£Ÿä ŸÖÿ®ÿßŸÑÿ∫ ŸÖŸÜ ÿØÿÆŸÑ ÿßŸÑÿ£ÿ≥ÿ±ÿ©ÿå Ÿàÿ¨ŸÖŸäÿπ ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ© ÿ™Ÿèÿ≠ŸÖŸëŸÑ ÿπŸÑŸâ ÿßŸÑÿπŸÖŸäŸÑ."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"4. ÿßŸÑÿ∑ŸÑÿ® ŸàÿßŸÑÿØŸÅÿπ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"Ÿäÿ™ŸÖ ÿπÿ±ÿ∂ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä ŸÑŸÑŸÖŸÜÿ™ÿ¨ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿ®ÿπÿØ ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ŸàŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸÜÿµÿ©."}),e.jsxs("li",{children:["ŸÇÿØ Ÿäÿ™ŸÖ ÿßÿ≠ÿ™ÿ≥ÿßÿ® ÿ±ÿ≥ŸàŸÖ ÿ£ÿÆÿ±Ÿâ ŸÖÿ´ŸÑ:",e.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[e.jsx("li",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("li",{children:"ÿ∂ÿ±Ÿäÿ®ÿ© ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿ∂ÿßŸÅÿ© ÿ≠ÿ≥ÿ® ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑŸÖÿπŸÖŸàŸÑ ÿ®Ÿáÿß"})]})]}),e.jsx("li",{children:"ÿ™ÿ≠ÿ™ŸÅÿ∏ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ≠ŸÇ ÿ™ÿ≠ÿØŸäÿ´ ÿ£Ÿà ÿ•ÿ∂ÿßŸÅÿ© ÿÆÿØŸÖÿßÿ™ ÿ£Ÿà ÿ±ÿ≥ŸàŸÖ ŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ© ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ©ÿå ŸÖÿπ ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿ®ÿ∞ŸÑŸÉ."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"5. ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),e.jsx("p",{className:"mb-3",children:"ÿ™ÿ™ÿ≠ŸÖŸÑ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ŸÉÿßŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿπŸÜ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[e.jsx("li",{children:"ÿ¨ŸàÿØÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™"}),e.jsx("li",{children:"ÿ≥ŸÑÿßŸÖÿ© ÿßŸÑÿ£ÿµŸÜÿßŸÅ"}),e.jsx("li",{children:"ŸÜÿ∏ÿßŸÅÿ© Ÿàÿ™ÿ≠ÿ∂Ÿäÿ± ÿßŸÑÿ∑ÿπÿßŸÖ"}),e.jsx("li",{children:"ÿßŸÑÿ™ÿ∫ŸÑŸäŸÅ ŸàÿßŸÑÿ™ÿπÿ®ÿ¶ÿ©"}),e.jsx("li",{children:"ÿßŸÑÿßŸÑÿ™ÿ≤ÿßŸÖ ÿ®ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßÿ∑ÿßÿ™ ÿßŸÑÿµÿ≠Ÿäÿ© ÿßŸÑŸÖÿπŸÖŸàŸÑ ÿ®Ÿáÿß"})]}),e.jsx("p",{className:"mt-3",children:"ÿ™ŸÑÿ™ÿ≤ŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿ®ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿ®ÿßŸÑÿ≠ÿßŸÑÿ© ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© ŸàÿßŸÑŸÖÿ™ŸÅŸÇ ÿπŸÑŸäŸáÿß ŸÖÿπ ÿßŸÑÿπŸÖŸäŸÑ."})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"6. ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸàÿßŸÑŸÖŸÜÿØŸàÿ®ŸäŸÜ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ÿ™ÿπŸÖŸÑ ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ŸÉŸàÿ≥Ÿäÿ∑ ÿ™ŸÇŸÜŸä ŸÑÿ±ÿ®ÿ∑ ÿßŸÑÿ£ÿ∑ÿ±ÿßŸÅ."}),e.jsxs("li",{children:["ŸÑÿß ÿ™ÿ™ÿ≠ŸÖŸÑ ÿßŸÑŸÖŸÜÿµÿ© ÿ£Ÿä ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿπŸÜ:",e.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[e.jsx("li",{children:"ÿ™ÿµÿ±ŸÅÿßÿ™ ÿßŸÑŸÖŸÜÿØŸàÿ®"}),e.jsx("li",{children:"ÿ™ÿ£ÿÆŸäÿ± ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("li",{children:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿπÿßŸÖŸÑ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ"}),e.jsx("li",{children:"ÿ™ŸÑŸÅ ÿßŸÑÿ∑ŸÑÿ® ÿ®ÿπÿØ ÿÆÿ±Ÿàÿ¨Ÿá ŸÖŸÜ ÿßŸÑÿ£ÿ≥ÿ±ÿ©"})]})]}),e.jsx("li",{children:"ÿ£Ÿä ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ŸÖÿ™ÿπŸÑŸÇÿ© ÿ®ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿäÿ™ŸÖ ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπŸáÿß ÿ≠ÿ≥ÿ® ÿ≥Ÿäÿßÿ≥ÿ© ŸÖÿ≤ŸàÿØ ÿßŸÑÿ™ŸàÿµŸäŸÑ ÿßŸÑŸÖÿπÿ™ŸÖÿØ."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"7. ÿßŸÑÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ•ÿπŸÑÿßŸÜŸäÿ© (ÿßÿÆÿ™Ÿäÿßÿ±Ÿäÿ©)"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"ÿ™ÿ™Ÿäÿ≠ ÿßŸÑŸÖŸÜÿµÿ© ÿÆÿØŸÖÿßÿ™ ÿ•ÿπŸÑÿßŸÜŸäÿ© ÿ£Ÿà ÿ™ÿ±ŸàŸäÿ¨Ÿäÿ© ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÖŸÇÿßÿ®ŸÑ ÿ±ÿ≥ŸàŸÖ."}),e.jsx("li",{children:"Ÿáÿ∞Ÿá ÿßŸÑÿÆÿØŸÖÿßÿ™ ÿßÿÆÿ™Ÿäÿßÿ±Ÿäÿ© ÿ®ÿßŸÑŸÉÿßŸÖŸÑ ŸàŸÑÿß ÿ™ÿ§ÿ´ÿ± ÿπŸÑŸâ ÿßÿ≥ÿ™ŸÖÿ±ÿßÿ± ÿπÿ±ÿ∂ ŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ŸÅŸä ÿ≠ÿßŸÑ ÿπÿØŸÖ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ."}),e.jsx("li",{children:"ÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™ ÿ™ŸáÿØŸÅ ÿ•ŸÑŸâ ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ∏ŸáŸàÿ± ŸàŸÑÿß ÿ™ÿ∂ŸÖŸÜ ÿπÿØÿØŸãÿß ŸÖÿπŸäŸÜŸãÿß ŸÖŸÜ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿ£Ÿà ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"8. ÿ≠ÿØŸàÿØ ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsx("p",{className:"mb-3",children:"ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ÿ∫Ÿäÿ± ŸÖÿ≥ÿ§ŸàŸÑÿ© ÿπŸÜ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[e.jsx("li",{children:"ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ£Ÿà ÿµŸàÿ±Ÿáÿß"}),e.jsx("li",{children:"ÿßÿÆÿ™ŸÑÿßŸÅ ÿßŸÑÿ™ŸàŸÇÿπÿßÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ© ŸÑŸÑÿπŸÖŸäŸÑ"}),e.jsx("li",{children:"ÿ£Ÿä ÿ£ÿ∂ÿ±ÿßÿ± ŸÜÿßÿ™ÿ¨ÿ© ÿπŸÜ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨"})]}),e.jsx("p",{className:"mt-3",children:"ŸäŸÇÿ™ÿµÿ± ÿØŸàÿ± ÿßŸÑŸÖŸÜÿµÿ© ÿπŸÑŸâ:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4 mt-2",children:[e.jsx("li",{children:"ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™"}),e.jsx("li",{children:"ÿ™ÿ≥ŸáŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsx("li",{children:"ÿ±ÿ®ÿ∑ ÿßŸÑÿ£ÿ∑ÿ±ÿßŸÅ ÿπÿ®ÿ± ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ŸÇŸÜŸä"})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"9. ÿßŸÑÿ™ÿπÿØŸäŸÑ"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[e.jsx("li",{children:"Ÿäÿ≠ŸÇ ŸÑŸÑŸÖŸÜÿµÿ© ÿ™ÿπÿØŸäŸÑ Ÿáÿ∞Ÿá ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿ®ŸÖÿß Ÿäÿ™ŸàÿßŸÅŸÇ ŸÖÿπ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ©."}),e.jsx("li",{children:"Ÿäÿ™ŸÖ ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿ®ÿ£Ÿä ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™."})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"10. ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©"}),e.jsx("p",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 text-gray-800",children:"ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸÉ ŸÑŸÑÿ™ÿ∑ÿ®ŸäŸÇÿå ŸÅÿ•ŸÜŸÉ ÿ™ŸÇÿ± ÿ®ŸÇÿ±ÿßÿ°ÿ© ŸàŸÅŸáŸÖ ŸàÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ ÿ£ÿπŸÑÿßŸá."})]}),e.jsxs("div",{className:"border-t-2 border-gray-200 pt-6 mt-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:"ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©"}),e.jsxs("ul",{className:"list-disc list-inside space-y-3 text-gray-700",children:[e.jsx("li",{children:"ÿ™ÿ≠ÿ™ÿ±ŸÖ ŸÖŸÜÿµÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ ÿÆÿµŸàÿµŸäÿ© ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ."}),e.jsxs("li",{children:["Ÿäÿ™ŸÖ ÿ¨ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸÇÿ∑ ŸÑÿ∫ÿ±ÿ∂:",e.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[e.jsx("li",{children:"ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsx("li",{children:"ÿ™ŸÜŸÅŸäÿ∞ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("li",{children:"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),e.jsx("li",{children:"ÿ™ÿ≠ÿ≥ŸäŸÜ ÿ¨ŸàÿØÿ© ÿßŸÑÿÆÿØŸÖÿ©"})]})]}),e.jsx("li",{children:"ŸÑÿß Ÿäÿ™ŸÖ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ŸÖÿπ ÿ£Ÿä ÿ∑ÿ±ŸÅ ÿ´ÿßŸÑÿ´ ÿ•ŸÑÿß ÿπŸÜÿØ ÿßŸÑÿ∂ÿ±Ÿàÿ±ÿ© ŸÑÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿÆÿØŸÖÿ© ÿ£Ÿà ŸàŸÅŸÇ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ© ÿßŸÑŸÖÿπŸÖŸàŸÑ ÿ®Ÿáÿß."}),e.jsx("li",{children:"ÿ™ÿ≠ÿ™ŸÅÿ∏ ÿßŸÑŸÖŸÜÿµÿ© ÿ®ÿ≠ŸÇ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ¥ÿßŸáÿØÿßÿ™ ŸàÿßŸÑÿ™ŸÅÿßÿπŸÑ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿ™ÿ¥ÿ∫ŸäŸÑŸäÿ© Ÿàÿ™ÿ≠ŸÑŸäŸÑŸäÿ© Ÿàÿ™ÿ≠ÿ≥ŸäŸÜŸäÿ©."})]})]}),e.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 mt-8 text-center",children:e.jsx("p",{className:"text-green-800 font-medium",children:"‚òëÔ∏è ÿ®ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©ÿå ÿ£ŸÜÿ™ ÿ™ŸÇÿ± ÿ®ŸÇÿ±ÿßÿ°ÿ© ŸàŸÅŸáŸÖ ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ŸàÿßŸÑÿ£ÿ≠ŸÉÿßŸÖ Ÿàÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©"})}),e.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["ÿ™ŸÖ ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´ ŸÑŸáÿ∞Ÿá ÿßŸÑÿ¥ÿ±Ÿàÿ∑ ÿ®ÿ™ÿßÿ±ŸäÿÆ ",new Date().toLocaleDateString("ar-SA")]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(le,{to:"/register",className:"text-white bg-sky-500 hover:bg-sky-600 px-6 py-3 rounded-lg inline-block transition-colors text-center font-bold",children:"‚úÖ ŸÖŸàÿßŸÅŸÇ - ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ™ÿ≥ÿ¨ŸäŸÑ"}),e.jsx(le,{to:"/",className:"text-sky-600 bg-sky-100 hover:bg-sky-200 px-6 py-3 rounded-lg inline-block transition-colors text-center",children:"ÿßŸÑÿ±ÿ¨Ÿàÿπ ÿ•ŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"})]})]})})}function Lc(){return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-200 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ŸÜÿ£ÿ≥ŸÅ ŸÑŸÖÿ∫ÿßÿØÿ±ÿ™ŸÉ üçó ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿπŸàÿØÿ© ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™ Ÿàÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¨ÿØŸäÿØ."}),e.jsx(le,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"ÿßŸÑÿ±ÿ¨Ÿàÿπ ÿ•ŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"})]})}const Fe=({allow:s,children:a})=>{const{role:n,loading:d}=Ee();return d?e.jsx("div",{className:"p-8 text-center",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."}):!n||!s.includes(n)?e.jsx(Ya,{to:"/",replace:!0}):e.jsx(e.Fragment,{children:a})},cn=({isOpen:s,onClose:a,onConfirm:n,initialLocation:d})=>{const[i,y]=t.useState(d||null),[r,D]=t.useState(""),[E,B]=t.useState(!1),[P,N]=t.useState(!1),[T,j]=t.useState(null),[f,U]=t.useState(!1),[g,w]=t.useState(""),[M,b]=t.useState([]),[h,k]=t.useState(!1),[L,$]=t.useState(!1),[v,R]=t.useState("map"),c={lat:24.7136,lng:46.6753},o=t.useCallback(async I=>{if(!I.trim()||I.length<2){b([]),$(!1);return}k(!0);try{const x=I.includes("ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©")?I:`${I}, ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©`,A=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(x)}&limit=5&accept-language=ar`,{headers:{Accept:"application/json"}})).json();b(A),$(A.length>0)}catch(x){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ®ÿ≠ÿ´:",x),b([])}finally{k(!1)}},[]),_=t.useCallback(I=>{const x={lat:parseFloat(I.lat),lng:parseFloat(I.lon)};y(x),w(""),b([]),$(!1),window.leafletMap&&(window.leafletMap.setView([x.lat,x.lng],16,{animate:!0,duration:.5}),window.leafletMarker&&window.leafletMarker.setLatLng([x.lat,x.lng]));const Q=I.display_name.split(",").slice(0,3).join("ÿå");D(Q)},[]),O=t.useCallback(()=>{if(!navigator.geolocation){j("ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÑÿß ŸäÿØÿπŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ");return}N(!0),j(null),navigator.geolocation.getCurrentPosition(I=>{const x={lat:I.coords.latitude,lng:I.coords.longitude};y(x),N(!1),window.leafletMap&&(window.leafletMap.setView([x.lat,x.lng],17),window.leafletMarker&&window.leafletMarker.setLatLng([x.lat,x.lng]))},I=>{N(!1),I.code===1?j("ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ•ÿ∞ŸÜ ÿßŸÑŸÖŸàŸÇÿπ. ŸÅÿπŸëŸÑ ÿßŸÑŸÖŸàŸÇÿπ ŸÖŸÜ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ™ÿµŸÅÿ≠"):I.code===2?j("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ŸÅÿπŸäŸÑ GPS"):j("ÿßŸÜÿ™Ÿáÿ™ ŸÖŸáŸÑÿ© ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);t.useEffect(()=>{if(s){if(!document.getElementById("leaflet-css")){const I=document.createElement("link");I.id="leaflet-css",I.rel="stylesheet",I.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(I)}if(window.L)U(!0);else{const I=document.createElement("script");I.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",I.onload=()=>U(!0),document.body.appendChild(I)}}},[s]),t.useEffect(()=>{if(!s||!f||!window.L)return;const I=window.L;if(!document.getElementById("location-map"))return;window.leafletMap&&window.leafletMap.remove();const Q=i||c,A=I.map("location-map",{zoomControl:!1,attributionControl:!1}).setView([Q.lat,Q.lng],i?17:12);I.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(A);const u=I.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;">üìç</div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),C=I.marker([Q.lat,Q.lng],{icon:u,draggable:!0}).addTo(A);return C.on("dragend",()=>{const V=C.getLatLng();y({lat:V.lat,lng:V.lng})}),A.on("click",V=>{const{lat:W,lng:ne}=V.latlng;C.setLatLng([W,ne]),y({lat:W,lng:ne})}),window.leafletMap=A,window.leafletMarker=C,i&&y(i),()=>{window.leafletMap&&(window.leafletMap.remove(),window.leafletMap=null,window.leafletMarker=null)}},[s,f]);const q=()=>{i&&window.leafletMap&&window.leafletMap.setView([i.lat,i.lng],17,{animate:!0,duration:.5})},m={ÿßŸÑÿ±Ÿäÿßÿ∂:{lat:24.7136,lng:46.6753},ÿ¨ÿØÿ©:{lat:21.4858,lng:39.1925},"ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©":{lat:21.3891,lng:39.8579},"ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©":{lat:24.5247,lng:39.5692},ÿßŸÑÿØŸÖÿßŸÖ:{lat:26.4207,lng:50.0888},ÿßŸÑÿÆÿ®ÿ±:{lat:26.2172,lng:50.1971},ÿßŸÑÿ£ÿ≠ÿ≥ÿßÿ°:{lat:25.3548,lng:49.5886},ÿßŸÑÿ∑ÿßÿ¶ŸÅ:{lat:21.2703,lng:40.4158},ÿ™ÿ®ŸàŸÉ:{lat:28.3838,lng:36.555},ÿ®ÿ±ŸäÿØÿ©:{lat:26.326,lng:43.975},"ÿÆŸÖŸäÿ≥ ŸÖÿ¥Ÿäÿ∑":{lat:18.3066,lng:42.7283},ÿ£ÿ®Ÿáÿß:{lat:18.2164,lng:42.5053},ÿßŸÑŸÇÿ∑ŸäŸÅ:{lat:26.5196,lng:50.0115},ŸÜÿ¨ÿ±ÿßŸÜ:{lat:17.4924,lng:44.1277},ÿ¨ÿßÿ≤ÿßŸÜ:{lat:16.8892,lng:42.5611},ŸäŸÜÿ®ÿπ:{lat:24.0895,lng:38.0618},ÿ≠ÿßÿ¶ŸÑ:{lat:27.5114,lng:41.7208}},p=()=>{var I;if(v==="manual"){if(!r.trim()){j("ÿ£ÿØÿÆŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä");return}const x=(I=r.split("ÿå")[0])==null?void 0:I.trim(),Q=m[x]||{lat:24.7136,lng:46.6753};n(Q,r);return}if(!i){j("ÿ≠ÿØÿØ ŸÖŸàŸÇÿπŸÉ ÿ£ŸàŸÑÿßŸã");return}if(!r.trim()){j("ÿ£ÿØÿÆŸÑ ŸàÿµŸÅ ÿßŸÑÿπŸÜŸàÿßŸÜ");return}n(i,r)};return s?e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative w-full h-full sm:w-[95%] sm:h-[90%] sm:max-w-2xl sm:rounded-3xl overflow-hidden bg-white shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(es,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:"ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("p",{className:"text-sm text-white/80",children:v==="map"?"ÿßÿ®ÿ≠ÿ´ ÿ£Ÿà ÿßÿ≥ÿ≠ÿ® ÿßŸÑÿØÿ®Ÿàÿ≥":"ÿßŸÉÿ™ÿ® ÿπŸÜŸàÿßŸÜŸÉ ŸäÿØŸàŸäÿßŸã"})]})]}),e.jsx("button",{onClick:a,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:()=>R("map"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${v==="map"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[e.jsx(bi,{className:"w-4 h-4"}),"ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©"]}),e.jsxs("button",{onClick:()=>R("manual"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${v==="manual"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[e.jsx(Ut,{className:"w-4 h-4"}),"ÿ•ÿØÿÆÿßŸÑ ŸäÿØŸàŸä"]})]}),v==="map"&&e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:g,onChange:I=>{w(I.target.value),o(I.target.value)},onFocus:()=>M.length>0&&$(!0),placeholder:"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ≠Ÿäÿå ÿ¥ÿßÿ±ÿπÿå ÿ£Ÿà ŸÖŸÉÿßŸÜ...",className:"w-full bg-white/95 text-gray-800 rounded-xl p-3 pr-10 pl-10 focus:outline-none focus:ring-2 focus:ring-white/50 transition placeholder:text-gray-400"}),h&&e.jsx(as,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-500 animate-spin"}),L&&M.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl overflow-hidden z-[1001] max-h-60 overflow-y-auto",children:M.map((I,x)=>e.jsxs("button",{onClick:()=>_(I),className:"w-full p-3 text-right hover:bg-sky-50 border-b border-gray-100 last:border-0 transition flex items-start gap-3",children:[e.jsx(es,{className:"w-5 h-5 text-sky-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-sm leading-relaxed",children:I.display_name})]},x))})]})]}),v==="map"&&e.jsxs("div",{className:"flex-1 relative",children:[!f&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(as,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600 font-medium",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©..."})]})}),e.jsx("div",{id:"location-map",className:"w-full h-full"}),e.jsxs("div",{className:"absolute left-4 top-4 flex flex-col gap-2 z-[1000]",children:[e.jsx("button",{onClick:O,disabled:P,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition disabled:opacity-50",title:"ŸÖŸàŸÇÿπŸä ÿßŸÑÿ≠ÿßŸÑŸä",children:P?e.jsx(as,{className:"w-5 h-5 text-sky-500 animate-spin"}):e.jsx(tt,{className:"w-5 h-5 text-sky-500"})}),i&&e.jsx("button",{onClick:q,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition",title:"ÿ™ŸÖÿ±ŸÉÿ≤",children:e.jsx(dt,{className:"w-5 h-5 text-gray-600"})})]}),i&&e.jsxs("div",{className:"absolute right-4 top-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 z-[1000] max-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[e.jsx(gs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ"})]}),e.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[i.lat.toFixed(6),", ",i.lng.toFixed(6)]})]})]}),v==="manual"&&e.jsx("div",{className:"flex-1 p-6 overflow-y-auto bg-gray-50",children:e.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Ut,{className:"w-10 h-10 text-sky-500"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"ÿ£ÿØÿÆŸÑ ÿπŸÜŸàÿßŸÜŸÉ ŸäÿØŸàŸäÿßŸã"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ÿßŸÉÿ™ÿ® ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ ÿ®ÿØŸÇÿ© ŸÑŸäÿµŸÑŸÉ ÿßŸÑÿ∑ŸÑÿ®"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-xl p-3 bg-white focus:border-sky-400 focus:outline-none",onChange:I=>D(x=>{const Q=x.split("ÿå").slice(1);return I.target.value+(Q.length?"ÿå"+Q.join("ÿå"):"")}),children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsx("option",{value:"ÿßŸÑÿ±Ÿäÿßÿ∂",children:"ÿßŸÑÿ±Ÿäÿßÿ∂"}),e.jsx("option",{value:"ÿ¨ÿØÿ©",children:"ÿ¨ÿØÿ©"}),e.jsx("option",{value:"ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©",children:"ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©"}),e.jsx("option",{value:"ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©",children:"ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©"}),e.jsx("option",{value:"ÿßŸÑÿØŸÖÿßŸÖ",children:"ÿßŸÑÿØŸÖÿßŸÖ"}),e.jsx("option",{value:"ÿßŸÑÿÆÿ®ÿ±",children:"ÿßŸÑÿÆÿ®ÿ±"}),e.jsx("option",{value:"ÿßŸÑÿ£ÿ≠ÿ≥ÿßÿ°",children:"ÿßŸÑÿ£ÿ≠ÿ≥ÿßÿ°"}),e.jsx("option",{value:"ÿßŸÑÿ∑ÿßÿ¶ŸÅ",children:"ÿßŸÑÿ∑ÿßÿ¶ŸÅ"}),e.jsx("option",{value:"ÿ™ÿ®ŸàŸÉ",children:"ÿ™ÿ®ŸàŸÉ"}),e.jsx("option",{value:"ÿ®ÿ±ŸäÿØÿ©",children:"ÿ®ÿ±ŸäÿØÿ©"}),e.jsx("option",{value:"ÿÆŸÖŸäÿ≥ ŸÖÿ¥Ÿäÿ∑",children:"ÿÆŸÖŸäÿ≥ ŸÖÿ¥Ÿäÿ∑"}),e.jsx("option",{value:"ÿ£ÿ®Ÿáÿß",children:"ÿ£ÿ®Ÿáÿß"}),e.jsx("option",{value:"ÿßŸÑŸÇÿ∑ŸäŸÅ",children:"ÿßŸÑŸÇÿ∑ŸäŸÅ"}),e.jsx("option",{value:"ŸÜÿ¨ÿ±ÿßŸÜ",children:"ŸÜÿ¨ÿ±ÿßŸÜ"}),e.jsx("option",{value:"ÿ¨ÿßÿ≤ÿßŸÜ",children:"ÿ¨ÿßÿ≤ÿßŸÜ"}),e.jsx("option",{value:"ŸäŸÜÿ®ÿπ",children:"ŸäŸÜÿ®ÿπ"}),e.jsx("option",{value:"ÿ≠ÿßÿ¶ŸÑ",children:"ÿ≠ÿßÿ¶ŸÑ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ÿßŸÑÿ≠Ÿä"}),e.jsx("input",{type:"text",placeholder:"ŸÖÿ´ÿßŸÑ: ÿ≠Ÿä ÿßŸÑŸÜÿ±ÿ¨ÿ≥",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:I=>D(x=>(x.split("ÿå")[0]||"")+(I.target.value?"ÿå "+I.target.value:""))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ÿßŸÑÿ¥ÿßÿ±ÿπ"}),e.jsx("input",{type:"text",placeholder:"ŸÖÿ´ÿßŸÑ: ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÖŸÑŸÉ ÿπÿ®ÿØÿßŸÑÿπÿ≤Ÿäÿ≤",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:I=>D(x=>x.split("ÿå").slice(0,2).join("ÿå")+(I.target.value?"ÿå "+I.target.value:""))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ÿ™ŸÅÿßÿµŸäŸÑ ÿ•ÿ∂ÿßŸÅŸäÿ©"}),e.jsx("textarea",{placeholder:"ÿ±ŸÇŸÖ ÿßŸÑŸÖÿ®ŸÜŸâÿå ÿßŸÑÿØŸàÿ±ÿå ÿπŸÑÿßŸÖÿ© ŸÖŸÖŸäÿ≤ÿ©...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none resize-none",onChange:I=>D(x=>x.split("ÿå").slice(0,3).join("ÿå")+(I.target.value?"ÿå "+I.target.value:""))})]}),r&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[e.jsx(gs,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ:"})]}),e.jsx("p",{className:"text-gray-700",children:r})]})]})}),e.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[T&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4 flex-shrink-0"}),T]}),v==="map"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(Hr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:r,onChange:I=>D(I.target.value),placeholder:"ŸàÿµŸÅ ÿßŸÑÿπŸÜŸàÿßŸÜ (ŸÖÿ´ÿßŸÑ: ÿ≠Ÿä ÿßŸÑŸÜÿ±ÿ¨ÿ≥ÿå ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÖŸÑŸÉ ÿπÿ®ÿØÿßŸÑÿπÿ≤Ÿäÿ≤ÿå ÿ®ÿ¨ÿßŸÜÿ® ŸÖÿ≥ÿ¨ÿØ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 pr-10 focus:border-sky-400 focus:outline-none transition text-gray-800"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"üí° ÿ£ÿ∂ŸÅ ÿ™ŸÅÿßÿµŸäŸÑ Ÿàÿßÿ∂ÿ≠ÿ© ŸÑŸäÿµŸÑŸÉ ÿßŸÑÿ∑ŸÑÿ® ÿ®ÿ≥ÿ±ÿπÿ©"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"flex-1 py-3 px-4 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsxs("button",{onClick:p,disabled:v==="map"&&!i,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:[e.jsx(gs,{className:"w-5 h-5"}),"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ"]})]})]})]}),e.jsx("style",{children:`
        .custom-marker {
          background: transparent !important;
          border: none !important;
        }
        .leaflet-container {
          font-family: inherit;
        }
        .leaflet-control-zoom {
          display: none;
        }
        #location-map {
          background: #f0f9ff;
        }
      `})]}):null},Dr=.27,Wt={clientId:"AR7QZ7sgXORp99wUPIY75Wl9m4YLtLtVzaStB5g-q7eUT9jOLIKEeGGlxT8jlC9n1sDTcpCpD1peRxR5",currency:"USD",environment:"live",minRecharge:10,maxRecharge:1e3,sarToUsd:s=>Math.round(s*Dr*100)/100,usdToSar:s=>Math.round(s/Dr*100)/100,calculateFee:s=>Math.round((s*.029+.3)*100)/100},dn=()=>({clientId:Wt.clientId,currency:Wt.currency,intent:"capture",components:"buttons"}),Ot=1,pt=.75,Rr=3.75,Mc=.0157,Uc=5,ca=!0,Bc=()=>{const{items:s,subtotal:a,clear:n}=Na(),{user:d}=Ee(),i=fs(),y=Ps(),r=ze(),[D,E]=t.useState(""),[B,P]=t.useState(!1),[N,T]=t.useState(null),[j,f]=t.useState(null),[U,g]=t.useState(!1),[w,M]=t.useState("pickup"),[b,h]=t.useState("cod"),[k,L]=t.useState(0),[$,v]=t.useState(!1),[R,c]=t.useState([]),[o,_]=t.useState(null),[O,q]=t.useState(!1);s.reduce((u,C)=>u+C.qty,0);const m=t.useMemo(()=>s.reduce((u,C)=>C.price>=Uc?u+Mc*C.qty:u,0),[s]),p=t.useMemo(()=>{if(!o)return 0;switch(o.offerType){case"percent_discount":const u=a*(o.discountPercent||0)/100;return Math.min(u,a);case"fixed_discount":return Math.min(o.discountAmount||0,a);case"bundle_meal":return o.bundleOriginalPrice&&o.bundlePrice?o.bundleOriginalPrice-o.bundlePrice:0;case"buy_x_get_y":return 0;default:return 0}},[o,a]),I=a+m-p;t.useEffect(()=>{(async()=>{var ne,re,fe;if(!d)return;try{const he=await Ce(J(S,"wallets",d.uid));he.exists()&&L(((ne=he.data())==null?void 0:ne.balance)||0)}catch(he){console.warn("Error loading wallet:",he)}if(s.length===0)return;let C=(re=s[0])==null?void 0:re.ownerId;if(!C&&((fe=s[0])!=null&&fe.id))try{const he=await Ce(J(S,"menuItems",s[0].id)),F=he.exists()?he.data():null;C=(F==null?void 0:F.ownerId)||null}catch(he){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿµŸÜŸÅ:",he)}if(!C){T(null);return}const V=await Ce(J(S,"restaurants",C)),W=V.exists()?V.data():null;T({id:C,name:(W==null?void 0:W.name)||"ŸÖÿ∑ÿπŸÖ",referredBy:W==null?void 0:W.referredBy,referrerType:W==null?void 0:W.referrerType})})()},[s,d]),t.useEffect(()=>{(async()=>{if(!(N!=null&&N.id)){c([]);return}q(!0);try{const C=be(se(S,"offers"),je("ownerId","==",N.id),je("isActive","==",!0)),V=await pe(C),W=new Date,ne=V.docs.map(re=>{var fe,he,F,te;return{id:re.id,...re.data(),expiresAt:(he=(fe=re.data().expiresAt)==null?void 0:fe.toDate)==null?void 0:he.call(fe),startsAt:(te=(F=re.data().startsAt)==null?void 0:F.toDate)==null?void 0:te.call(F)}}).filter(re=>!(re.expiresAt&&new Date(re.expiresAt)<W||re.startsAt&&new Date(re.startsAt)>W||re.minOrderAmount&&a<re.minOrderAmount));c(ne),ne.length===1&&_(ne[0])}catch(C){console.warn("Error loading offers:",C),c([])}finally{q(!1)}})()},[N==null?void 0:N.id,a]);const x=(u,C)=>{f(u),E(C),g(!1),r.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! üìç")},Q=async()=>{var C;if(!d)return;if(s.length===0){y.warning("ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ©");return}if(w==="delivery"&&ca){if(!D){y.warning("ÿ£ÿØÿÆŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ");return}if(!j){y.warning("ÿ≠ÿØŸëÿØ ŸÖŸàŸÇÿπŸÉ ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©");return}}let u=N==null?void 0:N.id;if(!u&&((C=s[0])!=null&&C.id)){const V=await Ce(J(S,"menuItems",s[0].id)),W=V.exists()?V.data():null;u=(W==null?void 0:W.ownerId)||null}if(!u){y.error("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÑŸÑÿ∑ŸÑÿ®. ÿ£ÿπÿØ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©.");return}P(!0);try{const V=(N==null?void 0:N.referrerType)==="admin"&&(N==null?void 0:N.referredBy),W=s.reduce((ee,Y)=>ee+Y.qty,0),ne=Ot+pt,fe=a-ne*W,he=Ot*W,F=V?pt*W:0,te=he+(V?0:pt*W),Ne=await Te(se(S,"orders"),{customerId:d.uid,restaurantId:u,restaurantName:(N==null?void 0:N.name)||"ŸÖÿ∑ÿπŸÖ",items:s.map(ee=>({id:ee.id,name:ee.name,price:ee.price,qty:ee.qty,ownerId:ee.ownerId??u})),subtotal:a,deliveryFee:0,deliveryFeeSetBy:null,deliveryFeeSetAt:null,total:I,status:"pending",deliveryType:w,address:w==="pickup"?"ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ":D,location:w==="pickup"?null:j,createdAt:X(),updatedAt:X(),paymentMethod:"cod",appliedOffer:o?{id:o.id,title:o.title,offerType:o.offerType,discountPercent:o.discountPercent||null,discountAmount:o.discountAmount||null}:null,discountAmount:p,restaurantEarnings:fe,platformFee:he,platformFeePerItem:Ot,adminCommission:F,adminCommissionPerItem:pt,appEarnings:te,totalItemsCount:W,referredBy:(N==null?void 0:N.referredBy)||null,courierPlatformFee:w==="delivery"?Rr:0});try{const ee=J(S,"wallets",u);(await Ce(ee)).exists()?await xe(ee,{pendingBalance:Ze(fe),updatedAt:X()}):await Qe(ee,{balance:0,pendingBalance:fe,totalSales:0,totalWithdrawn:0,ownerType:"restaurant",updatedAt:X()})}catch(ee){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑŸÖÿ∑ÿπŸÖ:",ee)}if(V&&(N!=null&&N.referredBy)&&F>0)try{const ee=J(S,"wallets",N.referredBy);(await Ce(ee)).exists()?await xe(ee,{balance:Ze(F),totalEarnings:Ze(F),updatedAt:X()}):await Qe(ee,{balance:F,totalEarnings:F,totalWithdrawn:0,transactions:[],updatedAt:X()})}catch(ee){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅ:",ee)}try{const ee=J(S,"wallets","app_earnings");(await Ce(ee)).exists()?await xe(ee,{balance:Ze(te),totalEarnings:Ze(te),updatedAt:X()}):await Qe(ee,{balance:te,totalEarnings:te,totalWithdrawn:0,transactions:[],updatedAt:X()})}catch(ee){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:",ee)}if(o)try{await xe(J(S,"offers",o.id),{usedCount:Ze(1),updatedAt:X()})}catch(ee){console.warn("Error updating offer usage count:",ee)}try{const{notifyRestaurantNewOrder:ee,notifyOrderCreated:Y}=await Bs(async()=>{const{notifyRestaurantNewOrder:K,notifyOrderCreated:me}=await Promise.resolve().then(()=>ga);return{notifyRestaurantNewOrder:K,notifyOrderCreated:me}},void 0);await ee(u,Ne.id,d.displayName||"ÿπŸÖŸäŸÑ",I,s.reduce((K,me)=>K+me.qty,0)),await Y(d.uid,Ne.id,(N==null?void 0:N.name)||"ÿßŸÑŸÖÿ∑ÿπŸÖ",I),console.log("‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ¨ÿØŸäÿØ")}catch(ee){console.warn("‚ö†Ô∏è ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™:",ee)}n(),i("/orders")}catch(V){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®:",V),y.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.")}finally{P(!1)}},A=async(u,C)=>{var ee;if(!d)return;if(s.length===0){y.warning("ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ©");return}if(w==="delivery"&&ca){if(!D){y.warning("ÿ£ÿØÿÆŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ");return}if(!j){y.warning("ÿ≠ÿØŸëÿØ ŸÖŸàŸÇÿπŸÉ ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©");return}}if(u==="wallet"&&k<I){y.warning("ÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ÿ∫Ÿäÿ± ŸÉÿßŸÅŸä");return}let V=N==null?void 0:N.id;if(!V&&((ee=s[0])!=null&&ee.id)){const Y=await Ce(J(S,"menuItems",s[0].id)),K=Y.exists()?Y.data():null;V=(K==null?void 0:K.ownerId)||null}if(!V){y.error("ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÑŸÑÿ∑ŸÑÿ®. ÿ£ÿπÿØ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©.");return}P(!0);const W=(N==null?void 0:N.referrerType)==="admin"&&(N==null?void 0:N.referredBy),ne=s.reduce((Y,K)=>Y+K.qty,0),re=Ot+pt,he=a-re*ne,F=Ot*ne,te=W?pt*ne:0,Ne=F+(W?0:pt*ne);try{if(u==="wallet"){const K=J(S,"wallets",d.uid),me={id:`order_${Date.now()}`,type:"debit",amount:I,description:`ÿØŸÅÿπ ÿ∑ŸÑÿ® ŸÖŸÜ ${N==null?void 0:N.name}`,createdAt:new Date};await xe(K,{balance:Ze(-I),transactions:Tl(me),updatedAt:X()}),L(de=>de-I)}const Y=await Te(se(S,"orders"),{customerId:d.uid,restaurantId:V,restaurantName:(N==null?void 0:N.name)||"ŸÖÿ∑ÿπŸÖ",items:s.map(K=>({id:K.id,name:K.name,price:K.price,qty:K.qty,ownerId:K.ownerId??V})),subtotal:a,deliveryFee:0,deliveryFeeSetBy:null,deliveryFeeSetAt:null,total:I,status:"pending",deliveryType:w,address:w==="pickup"?"ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ":D,location:w==="pickup"?null:j,createdAt:X(),updatedAt:X(),paymentMethod:u,paymentStatus:"paid",paypalOrderId:C||null,paidAt:X(),appliedOffer:o?{id:o.id,title:o.title,offerType:o.offerType,discountPercent:o.discountPercent||null,discountAmount:o.discountAmount||null}:null,discountAmount:p,restaurantEarnings:he,platformFee:F,platformFeePerItem:Ot,adminCommission:te,adminCommissionPerItem:pt,appEarnings:Ne,totalItemsCount:ne,referredBy:(N==null?void 0:N.referredBy)||null,courierPlatformFee:w==="delivery"?Rr:0});try{const K=J(S,"wallets",V);(await Ce(K)).exists()?await xe(K,{pendingBalance:Ze(he),totalEarnings:Ze(he),updatedAt:X()}):await Qe(K,{pendingBalance:he,totalEarnings:he,balance:0,totalWithdrawn:0,transactions:[],updatedAt:X()})}catch(K){console.warn("Error updating restaurant wallet:",K)}if(W&&(N!=null&&N.referredBy)&&te>0)try{const K=J(S,"wallets",N.referredBy);(await Ce(K)).exists()?await xe(K,{balance:Ze(te),totalEarnings:Ze(te),updatedAt:X()}):await Qe(K,{balance:te,totalEarnings:te,totalWithdrawn:0,transactions:[],updatedAt:X()})}catch(K){console.warn("Error updating admin wallet:",K)}if(o)try{await xe(J(S,"offers",o.id),{usedCount:Ze(1),updatedAt:X()})}catch(K){console.warn("Error updating offer usage count:",K)}try{const{notifyRestaurantNewOrder:K,notifyOrderCreated:me}=await Bs(async()=>{const{notifyRestaurantNewOrder:de,notifyOrderCreated:ye}=await Promise.resolve().then(()=>ga);return{notifyRestaurantNewOrder:de,notifyOrderCreated:ye}},void 0);await K(V,Y.id,d.displayName||"ÿπŸÖŸäŸÑ",I,s.reduce((de,ye)=>de+ye.qty,0)),await me(d.uid,Y.id,(N==null?void 0:N.name)||"ÿßŸÑŸÖÿ∑ÿπŸÖ",I),console.log("‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ¨ÿØŸäÿØ")}catch(K){console.warn("‚ö†Ô∏è ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™:",K)}n(),y.success(u==="paypal"?`ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ
ÿ™ŸÖ ÿßŸÑÿØŸÅÿπ ÿπÿ®ÿ± PayPal`:`ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ
ÿ™ŸÖ ÿßŸÑÿÆÿµŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©`),i("/orders")}catch(Y){console.error("Error placing order:",Y),y.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®")}finally{P(!1)}};return e.jsx(Fe,{allow:["customer","admin","developer"],children:e.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(cs,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsx("p",{className:"text-sm text-white/80",children:(N==null?void 0:N.name)||"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(cs,{className:"w-5 h-5 text-sky-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsxs("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full mr-auto",children:[s.length," ÿµŸÜŸÅ"]})]}),e.jsx("div",{className:"p-4 space-y-2",children:s.map(u=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center text-sm",children:[u.qty,"√ó"]}),e.jsx("span",{className:"text-gray-800 font-medium",children:u.name})]}),e.jsxs("span",{className:"font-bold text-sky-600",children:[(u.price*u.qty).toFixed(2)," ÿ±.ÿ≥"]})]},u.id))})]}),(R.length>0||O)&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Os,{className:"w-5 h-5 text-orange-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©"}),R.length>0&&e.jsxs("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full mr-auto",children:[R.length," ÿπÿ±ÿ∂"]})]}),e.jsx("div",{className:"p-4 space-y-3",children:O?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-orange-300 border-t-orange-600 rounded-full animate-spin"}),e.jsx("span",{className:"mr-2 text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿπÿ±Ÿàÿ∂..."})]}):e.jsxs(e.Fragment,{children:[R.map(u=>{const C=(o==null?void 0:o.id)===u.id,V=u.offerType==="percent_discount"?e.jsx(Fl,{className:"w-5 h-5"}):u.offerType==="fixed_discount"?e.jsx(Yt,{className:"w-5 h-5"}):e.jsx(Os,{className:"w-5 h-5"}),W=u.offerType==="percent_discount"?`${u.discountPercent}%`:u.offerType==="fixed_discount"?`${u.discountAmount} ÿ±.ÿ≥`:u.offerType==="bundle_meal"&&u.bundlePrice?`${u.bundlePrice} ÿ±.ÿ≥`:"";return e.jsxs("button",{onClick:()=>_(C?null:u),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${C?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-300"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${C?"bg-orange-500 text-white":"bg-orange-100 text-orange-600"}`,children:V}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:`font-bold ${C?"text-orange-700":"text-gray-800"}`,children:u.title}),e.jsx("p",{className:"text-sm text-gray-500",children:u.description||(u.offerType==="percent_discount"?`ÿÆÿµŸÖ ${u.discountPercent}% ÿπŸÑŸâ ÿ∑ŸÑÿ®ŸÉ`:u.offerType==="fixed_discount"?`ÿÆÿµŸÖ ${u.discountAmount} ÿ±.ÿ≥ ŸÖŸÜ ÿ∑ŸÑÿ®ŸÉ`:u.offerType==="bundle_meal"?`Ÿàÿ¨ÿ®ÿ© ŸÖÿ¨ŸÖŸëÿπÿ© ÿ®ÿ≥ÿπÿ± ${u.bundlePrice} ÿ±.ÿ≥`:u.offerType==="buy_x_get_y"?`ÿßÿ¥ÿ™ÿ±Ÿê ${u.buyQuantity} Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ${u.getQuantity} ŸÖÿ¨ÿßŸÜÿßŸã`:"ÿπÿ±ÿ∂ ÿÆÿßÿµ")}),u.minOrderAmount&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ∑ŸÑÿ®: ",u.minOrderAmount," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[W&&e.jsx("span",{className:`text-lg font-black ${C?"text-orange-600":"text-gray-700"}`,children:W}),C&&e.jsx(gs,{className:"w-5 h-5 text-orange-500 mt-1"})]})]},u.id)}),o&&e.jsx("button",{onClick:()=>_(null),className:"w-full text-center text-sm text-gray-500 hover:text-red-500 py-2",children:"ÿ•ŸÑÿ∫ÿßÿ° ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿπÿ±ÿ∂"})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-sky-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ"})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("button",{onClick:()=>M("pickup"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${w==="pickup"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${w==="pickup"?"bg-green-500":"bg-gray-100"}`,children:e.jsx(Le,{className:`w-6 h-6 ${w==="pickup"?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:`font-bold ${w==="pickup"?"text-green-700":"text-gray-800"}`,children:"ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ŸÖÿ¨ÿßŸÜÿßŸã - ÿ®ÿØŸàŸÜ ÿ±ÿ≥ŸàŸÖ ÿ™ŸàÿµŸäŸÑ"})]}),w==="pickup"&&e.jsx(gs,{className:"w-6 h-6 text-green-500"})]}),e.jsxs("button",{onClick:()=>M("delivery"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${w==="delivery"?"border-sky-500 bg-sky-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${w==="delivery"?"bg-sky-500":"bg-gray-100"}`,children:e.jsx(Be,{className:`w-6 h-6 ${w==="delivery"?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:`font-bold ${w==="delivery"?"text-sky-700":"text-gray-800"}`,children:"ÿ™ŸàÿµŸäŸÑ ŸÑŸÑŸÖŸÜÿ≤ŸÑ"}),e.jsx("p",{className:"text-sm text-amber-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ Ÿäÿ≠ÿØÿØŸáÿß ÿßŸÑŸÖŸÜÿØŸàÿ®/ÿßŸÑÿ£ÿ≥ÿ±ÿ©"})]}),w==="delivery"&&e.jsx(gs,{className:"w-6 h-6 text-sky-500"})]})]})]}),w==="delivery"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(es,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ŸÖŸàŸÇÿπ ÿßŸÑÿ™ŸàÿµŸäŸÑ"})]}),e.jsx("div",{className:"p-4",children:j?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(gs,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-green-700 mb-1",children:"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ‚úì"}),e.jsx("p",{className:"text-sm text-gray-600 break-words",children:D}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 font-mono",children:[j.lat.toFixed(5),", ",j.lng.toFixed(5)]})]})]})}),e.jsxs("button",{onClick:()=>g(!0),className:"w-full py-3 px-4 rounded-xl border-2 border-sky-200 text-sky-600 font-semibold hover:bg-sky-50 transition flex items-center justify-center gap-2",children:[e.jsx(es,{className:"w-5 h-5"}),"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÖŸàŸÇÿπ"]})]}):e.jsxs("button",{onClick:()=>g(!0),className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-500 to-sky-600 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[e.jsx(es,{className:"w-6 h-6"}),e.jsx("span",{children:"ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx(xt,{className:"w-5 h-5"})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ŸÖŸÑÿÆÿµ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©"})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[e.jsx("span",{children:"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ ÿßŸÑŸÅÿ±ÿπŸä"}),e.jsxs("span",{className:"font-semibold",children:[a.toFixed(2)," ÿ±.ÿ≥"]})]}),m>0&&e.jsxs("div",{className:"flex items-center justify-between text-gray-500",children:[e.jsx("span",{className:"text-sm",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsxs("span",{className:"font-semibold text-sm",children:[m.toFixed(2)," ÿ±.ÿ≥"]})]}),o&&p>0&&e.jsxs("div",{className:"flex items-center justify-between text-green-600 bg-green-50 -mx-4 px-4 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["ÿÆÿµŸÖ: ",o.title]})]}),e.jsxs("span",{className:"font-bold",children:["- ",p.toFixed(2)," ÿ±.ÿ≥"]})]}),w==="delivery"&&e.jsxs("div",{className:"flex items-center justify-between text-amber-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"})]}),e.jsx("span",{className:"font-semibold text-sm",children:"ÿ™Ÿèÿ≠ÿØÿØ ŸÑÿßÿ≠ŸÇÿßŸã"})]}),w==="pickup"&&e.jsxs("div",{className:"flex items-center justify-between text-green-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{children:"ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]}),e.jsx("span",{className:"font-semibold",children:"ŸÖÿ¨ÿßŸÜÿßŸã"})]}),e.jsx("div",{className:"h-px bg-gray-200 my-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-lg text-gray-800",children:"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä"}),e.jsxs("div",{className:"text-left",children:[p>0&&e.jsx("span",{className:"text-sm text-gray-400 line-through ml-2",children:a.toFixed(2)}),e.jsxs("span",{className:"font-black text-xl text-sky-600",children:[I.toFixed(2)," ÿ±.ÿ≥"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"font-bold text-gray-800",children:"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ"})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("button",{onClick:()=>h("cod"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${b==="cod"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${b==="cod"?"border-green-500":"border-gray-300"}`,children:b==="cod"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"üíµ ÿßŸÑÿØŸÅÿπ ÿπŸÜÿØ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßÿØŸÅÿπ ŸÜŸÇÿØÿßŸã ÿπŸÜÿØ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ŸÉ"})]})]}),e.jsxs("button",{onClick:()=>h("paypal"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${b==="paypal"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${b==="paypal"?"border-blue-500":"border-gray-300"}`,children:b==="paypal"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("p",{className:"font-bold text-gray-800",children:"üí≥ PayPal"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßÿØŸÅÿπ ÿ®ŸÄ Visa/Mastercard ÿ£Ÿà ÿ≠ÿ≥ÿßÿ® PayPal"})]})]}),e.jsxs("button",{onClick:()=>h("wallet"),disabled:k<I,className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-3 ${b==="wallet"?"border-sky-500 bg-sky-50":k<I?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${b==="wallet"?"border-sky-500":"border-gray-300"}`,children:b==="wallet"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-sky-500"})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsxs("p",{className:"font-bold text-gray-800",children:[e.jsx(ns,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©",e.jsxs("span",{className:`text-sm mr-2 ${k>=I?"text-green-600":"text-red-500"}`,children:["(",k.toFixed(2)," ÿ±.ÿ≥)"]})]}),k<I?e.jsxs("p",{className:"text-xs text-red-500",children:["ÿ±ÿµŸäÿØ ÿ∫Ÿäÿ± ŸÉÿßŸÅŸä - ÿ™ÿ≠ÿ™ÿßÿ¨ ",(I-k).toFixed(2)," ÿ±.ÿ≥"]}):e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßÿØŸÅÿπ ŸÖŸÜ ÿ±ÿµŸäÿØ ŸÖÿ≠ŸÅÿ∏ÿ™ŸÉ"})]})]})]})]}),b==="paypal"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿ≤ÿ± PayPal ŸÑÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ ÿ®ŸÖÿ®ŸÑÿ∫ ",e.jsxs("span",{className:"font-bold text-sky-600",children:[I.toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"text-gray-400 text-xs mr-1",children:["(‚âà $",Wt.sarToUsd(I),")"]})]}),e.jsx(Jr,{options:dn(),children:e.jsx(Xr,{style:{layout:"vertical",shape:"pill",color:"blue",label:"pay",height:50},disabled:B||$||w==="delivery"&&ca&&!j,createOrder:(u,C)=>{const V=Wt.sarToUsd(I);return C.order.create({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:V.toString()},description:`ÿ∑ŸÑÿ® ŸÖŸÜ ${(N==null?void 0:N.name)||"ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"}`}]})},onApprove:async(u,C)=>{if(C.order){v(!0);try{const V=await C.order.capture();await A("paypal",V.id)}catch(V){console.error("PayPal capture error:",V),r.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ")}finally{v(!1)}}},onError:u=>{console.error("PayPal Error:",u),r.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ")},onCancel:()=>{r.info("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ")}})}),$&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sky-600",children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"ÿ¨ÿßÿ±Ÿê ŸÖÿπÿßŸÑÿ¨ÿ© ÿ∑ŸÑÿ®ŸÉ..."})]})]}):e.jsx("button",{disabled:B||w==="delivery"&&ca&&!j||b==="wallet"&&k<I,onClick:()=>{b==="wallet"?A("wallet"):Q()},className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-3",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"w-6 h-6"}),b==="wallet"?`ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® (ÿÆÿµŸÖ ${I.toFixed(2)} ŸÖŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©)`:w==="pickup"?"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® (ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ)":"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® (ÿØŸÅÿπ ÿπŸÜÿØ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ)"]})}),w==="delivery"&&ca&&!j&&e.jsx("p",{className:"text-center text-sm text-amber-600 bg-amber-50 rounded-xl p-3",children:"‚ö†Ô∏è Ÿäÿ¨ÿ® ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπ ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÇÿ®ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsx(cn,{isOpen:U,onClose:()=>g(!1),onConfirm:x,initialLocation:j})]})})},Vc={restaurant:{title:"ŸÇŸäŸëŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©",icon:Le,color:"amber",placeholder:"ŸÉŸäŸÅ ŸÉÿßŸÜÿ™ ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿπÿßŸÖ ŸàÿßŸÑÿÆÿØŸÖÿ©ÿü",headerClass:"from-amber-500 to-amber-600",btnClass:"from-amber-500 to-amber-600",btnHoverClass:"hover:from-amber-600 hover:to-amber-700"},courier:{title:"ŸÇŸäŸëŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®",icon:Be,color:"emerald",placeholder:"ŸÉŸäŸÅ ŸÉÿßŸÜ ÿ£ÿØÿßÿ° ÿßŸÑŸÖŸÜÿØŸàÿ®ÿü",headerClass:"from-emerald-500 to-emerald-600",btnClass:"from-emerald-500 to-emerald-600",btnHoverClass:"hover:from-emerald-600 hover:to-emerald-700"},customer:{title:"ŸÇŸäŸëŸÖ ÿßŸÑÿπŸÖŸäŸÑ",icon:ms,color:"sky",placeholder:"ŸÉŸäŸÅ ŸÉÿßŸÜ ÿ™ÿπÿßŸÖŸÑ ÿßŸÑÿπŸÖŸäŸÑÿü",headerClass:"from-sky-500 to-sky-600",btnClass:"from-sky-500 to-sky-600",btnHoverClass:"hover:from-sky-600 hover:to-sky-700"}},Bl=({isOpen:s,onClose:a,onSubmit:n,type:d,targetName:i,orderId:y})=>{const[r,D]=t.useState(0),[E,B]=t.useState(0),[P,N]=t.useState(""),[T,j]=t.useState(!1),[f,U]=t.useState(""),g=Vc[d],w=g.icon,M=async()=>{if(r===0){U("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿπÿØÿØ ÿßŸÑŸÜÿ¨ŸàŸÖ");return}j(!0),U("");try{await n({stars:r,comment:P.trim()}),D(0),N(""),a()}catch{U("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{j(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-200",children:[e.jsx("div",{className:`bg-gradient-to-r ${g.headerClass} p-6 text-white`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:g.title}),i&&e.jsx("p",{className:"text-white/80 text-sm",children:i})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-xl transition",children:e.jsx(_e,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"ŸÉŸÖ ÿ™ŸÇŸäŸäŸÖŸÉÿü"}),e.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(b=>e.jsx("button",{type:"button",onClick:()=>D(b),onMouseEnter:()=>B(b),onMouseLeave:()=>B(0),className:"p-1 transition-transform hover:scale-110",children:e.jsx(ls,{className:`w-10 h-10 transition-colors ${b<=(E||r)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},b))}),r>0&&e.jsxs("p",{className:"mt-2 text-lg font-bold text-gray-800",children:[r===1&&"ÿ≥Ÿäÿ° üòû",r===2&&"ŸÖŸÇÿ®ŸàŸÑ üòê",r===3&&"ÿ¨ŸäÿØ üôÇ",r===4&&"ÿ¨ŸäÿØ ÿ¨ÿØÿßŸã üòä",r===5&&"ŸÖŸÖÿ™ÿßÿ≤! üåü"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ÿ™ÿπŸÑŸäŸÇ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("textarea",{value:P,onChange:b=>N(b.target.value),placeholder:g.placeholder,rows:3,className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sky-500 resize-none"})]}),f&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm text-center",children:f}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{onClick:M,disabled:T||r===0,className:`flex-1 flex items-center justify-center gap-2 py-3 px-6 
                         bg-gradient-to-r ${g.btnClass} 
                         ${g.btnHoverClass}
                         text-white rounded-xl font-bold transition-all disabled:opacity-50`,children:T?e.jsx(as,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇŸäŸäŸÖ"})]})})})]})]})}):null},hs={STARTING_POINTS:100,SUSPENSION_THRESHOLD:30,WARNING_THRESHOLD:50},Ba={PREPARATION_TIME:30,COURIER_PICKUP_TIME:15,DELIVERY_TIME:30,WARNING_THRESHOLD:.75},qc=(s,a)=>{var E;if(!s)return{elapsed:0,remaining:a,percentage:0};const n=(E=s==null?void 0:s.toDate)!=null&&E.call(s)?s.toDate():s instanceof Date?s:new Date(s);if(isNaN(n.getTime()))return{elapsed:0,remaining:a,percentage:0};const i=new Date().getTime()-n.getTime(),y=Math.floor(i/6e4),r=a-y,D=Math.min(y/a*100,100);return{elapsed:y,remaining:r,percentage:D}},zc=s=>s>=100?"exceeded":s>=Ba.WARNING_THRESHOLD*100?"warning":"normal",da=s=>{const a=Math.abs(s);if(a<60)return`${a} ÿØŸÇŸäŸÇÿ©`;const n=Math.floor(a/60),d=a%60;return`${n}ÿ≥ ${d}ÿØ`},Pr=s=>{switch(s){case"preparation":return"ÿßŸÑÿ™ÿ¨ŸáŸäÿ≤";case"pickup":return"ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ";case"delivery":return"ÿßŸÑÿ™ŸàÿµŸäŸÑ"}},Hc=s=>{switch(s){case"preparation":return Ba.PREPARATION_TIME;case"pickup":return Ba.COURIER_PICKUP_TIME;case"delivery":return Ba.DELIVERY_TIME}},Qc=(s,a)=>{if(s.timestamps)switch(a){case"preparation":return s.timestamps.acceptedAt;case"pickup":return s.timestamps.readyAt;case"delivery":return s.timestamps.pickedUpAt}},Wc=(s,a)=>{switch(a){case"preparation":return s.status==="ready"||s.status==="out_for_delivery"||s.status==="delivered";case"pickup":return s.status==="out_for_delivery"||s.status==="delivered";case"delivery":return s.status==="delivered"}},Gc=(s,a)=>{switch(a){case"preparation":return s.status==="accepted"||s.status==="preparing";case"pickup":return s.status==="ready";case"delivery":return s.status==="out_for_delivery"}},ma=({order:s,type:a,showLabel:n=!0,compact:d=!1})=>{const[i,y]=t.useState({elapsed:0,remaining:0,percentage:0}),[r,D]=t.useState("normal"),E=Hc(a),B=Qc(s,a),P=Wc(s,a),N=Gc(s,a);if(t.useEffect(()=>{if(!N||P||!B)return;const f=()=>{const g=qc(B,E);y(g),D(zc(g.percentage))};f();const U=setInterval(f,1e4);return()=>clearInterval(U)},[B,E,N,P]),!B&&!P)return null;if(P)return d?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"‚úì"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-3 py-1.5 rounded-lg",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:[Pr(a)," ‚úì"]})]});if(!N)return null;const j={normal:{bg:"bg-sky-50",border:"border-sky-200",text:"text-sky-700",bar:"bg-sky-500",icon:"text-sky-500"},warning:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",bar:"bg-amber-500",icon:"text-amber-500"},exceeded:{bg:"bg-red-50",border:"border-red-300",text:"text-red-700",bar:"bg-red-500",icon:"text-red-500"}}[r];return d?e.jsxs("div",{className:`flex items-center gap-1 ${j.text}`,children:[r==="exceeded"?e.jsx(Is,{className:"w-4 h-4 animate-pulse"}):e.jsx(Ye,{className:`w-4 h-4 ${j.icon}`}),e.jsx("span",{className:"text-xs font-bold",children:i.remaining>0?da(i.remaining):`+${da(Math.abs(i.remaining))}`})]}):e.jsxs("div",{className:`${j.bg} ${j.border} border rounded-xl p-3 space-y-2`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r==="exceeded"?e.jsx(Is,{className:`w-5 h-5 ${j.icon} animate-pulse`}):e.jsx(Ye,{className:`w-5 h-5 ${j.icon}`}),n&&e.jsx("span",{className:`text-sm font-bold ${j.text}`,children:Pr(a)})]}),e.jsx("div",{className:`text-lg font-bold ${j.text}`,children:i.remaining>0?e.jsx("span",{children:da(i.remaining)}):e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:["+",da(Math.abs(i.remaining))]}),e.jsx("span",{className:"text-xs",children:"‚ö†Ô∏è"})]})})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${j.bar} transition-all duration-500`,style:{width:`${Math.min(i.percentage,100)}%`}})}),r==="exceeded"&&e.jsx("div",{className:"text-xs text-red-600 font-medium animate-pulse",children:"‚ö†Ô∏è ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ≠ÿØÿØ! Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ•ÿ≥ÿ±ÿßÿπ."}),r==="warning"&&e.jsxs("div",{className:"text-xs text-amber-600 font-medium",children:["‚è∞ ÿßŸÑŸàŸÇÿ™ ŸäŸÜŸÅÿØ! ÿ®ÿßŸÇŸä ",da(i.remaining)," ŸÅŸÇÿ∑."]})]})},Yc=()=>{var p,I;const{user:s}=Ee(),a=fs(),n=ze(),{clear:d,add:i}=Na(),[y,r]=t.useState(null),[D,E]=t.useState([]),[B,P]=t.useState(null),[N,T]=t.useState(null),[j,f]=t.useState(null),[U,g]=t.useState(!1),[w,M]=t.useState(null),b=async(x,Q)=>{g(!0),T(Q);try{const A=await Ce(J(S,"restaurants",x,"private","bankInfo"));if(A.exists()){const u=A.data();f({bankName:u.bankName||"",bankAccountName:u.bankAccountName||"",bankAccountNumber:u.bankAccountNumber||""})}else{const u=await Ce(J(S,"restaurants",x));if(u.exists()){const C=u.data();f({bankName:C.bankName||"",bankAccountName:C.bankAccountName||"",bankAccountNumber:C.bankAccountNumber||""})}else f(null)}}catch{n.error("ÿ™ÿπÿ∞ÿ± ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿØŸÅÿπ"),f(null)}finally{g(!1)}},h=x=>{navigator.clipboard.writeText(x),n.success("ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿ≥ÿßÿ®! üìã")};t.useEffect(()=>{if(!s)return;r(null),P(null);const x=be(se(S,"orders"),je("customerId","==",s.uid),ss("createdAt","desc")),Q=xs(x,A=>{E(A.docs.map(u=>({id:u.id,...u.data()}))),r(null)},async A=>{console.error("TrackOrders onSnapshot error:",A),r("‚ö†Ô∏è ÿßÿ≠ÿ™ŸÖÿßŸÑ ÿ™ÿ≠ÿ™ÿßÿ¨ Composite Index ŸÑŸÄ customerId + createdAt. ÿ®ŸÜÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿØŸàŸÜ ÿ™ÿ±ÿ™Ÿäÿ® ŸÖÿ§ŸÇÿ™Ÿãÿß.");const u=be(se(S,"orders"),je("customerId","==",s.uid)),V=(await pe(u)).docs.map(re=>({id:re.id,...re.data()})),W=be(se(S,"orders"),ss("createdAt","desc"),bs(5));let ne=[];try{ne=(await pe(W)).docs.map(fe=>{var F,te,Ne,ee;const he=fe.data();return{id:fe.id,customerId:he.customerId,restaurantId:he.restaurantId,createdAt:((ee=(Ne=(te=(F=he.createdAt)==null?void 0:F.toDate)==null?void 0:te.call(F))==null?void 0:Ne.toISOString)==null?void 0:ee.call(Ne))??null}})}catch{}P({uid:s.uid,fallbackCount:V.length,sample:ne}),E(V)});return()=>Q()},[s]);const k=x=>{var Q;d(),(Q=x.items)==null||Q.forEach(A=>{i({id:A.id,name:A.name,price:A.price,ownerId:A.ownerId||x.restaurantId},A.qty)}),n.success("ÿ™ŸÖÿ™ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÜÿßÿµÿ± ŸÑŸÑÿ≥ŸÑÿ©! üõí"),x.restaurantId?a(`/menu?restaurant=${x.restaurantId}`):a("/cart")},[L,$]=t.useState(null),v=async x=>{if(x.status!=="pending"){n.error("ŸÑÿß ŸäŸÖŸÉŸÜ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ® ÿ®ÿπÿØ ŸÇÿ®ŸàŸÑŸá");return}if(window.confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®ÿü")){$(x.id);try{await xe(J(S,"orders",x.id),{status:"cancelled",cancelledAt:X(),cancelledBy:"customer",updatedAt:X()});const{processOrderRefund:A,notifyRefundParties:u}=await Bs(async()=>{const{processOrderRefund:V,notifyRefundParties:W}=await import("./refundService-CHXob5M2.js");return{processOrderRefund:V,notifyRefundParties:W}},__vite__mapDeps([0,1,2,3,4])),C=await A({id:x.id,customerId:x.customerId,restaurantId:x.restaurantId||"",subtotal:x.subtotal,total:x.total,restaurantEarnings:x.restaurantEarnings,platformFee:x.platformFee,adminCommission:x.adminCommission,appEarnings:x.appEarnings,referredBy:x.referredBy,paymentMethod:x.paymentMethod});await u({id:x.id,customerId:x.customerId,restaurantId:x.restaurantId||"",subtotal:x.subtotal,total:x.total},C,"customer"),C.details.customerRefunded>0?n.success(`ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ® Ÿàÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ${C.details.customerRefunded.toFixed(2)} ÿ±.ÿ≥ ŸÑŸÖÿ≠ŸÅÿ∏ÿ™ŸÉ ‚úÖ`):n.success("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ")}catch(A){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®:",A),n.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®")}finally{$(null)}}},R=x=>({pending:{text:"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",emoji:"‚è≥",color:"bg-yellow-500",icon:Ye},accepted:{text:"ÿ™ŸÖ ÿßŸÑŸÇÿ®ŸàŸÑ",emoji:"‚úÖ",color:"bg-blue-500",icon:Ie},preparing:{text:"ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",emoji:"üë®‚Äçüç≥",color:"bg-orange-500",icon:jt},ready:{text:"ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿ™ÿ≥ŸÑŸäŸÖ",emoji:"üì¶",color:"bg-purple-500",icon:Oe},out_for_delivery:{text:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",emoji:"üöó",color:"bg-sky-500",icon:Be},delivered:{text:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",emoji:"üéâ",color:"bg-green-500",icon:Ie},cancelled:{text:"ŸÖŸÑÿ∫Ÿä",emoji:"‚ùå",color:"bg-red-500",icon:lt}})[x]||{text:x,emoji:"üì¶",color:"bg-gray-500",icon:Oe},c=x=>x.courierId&&x.status==="out_for_delivery",o=x=>{const Q=["pending","accepted","preparing","ready"];return!x.courierId&&x.restaurantId&&Q.includes(x.status)},_=x=>["pending","accepted"].includes(x.status),O=x=>{var u,C,V,W;if(x.status!=="delivered")return!1;const Q=(C=(u=x.ratings)==null?void 0:u.customerToRestaurant)==null?void 0:C.stars,A=(W=(V=x.ratings)==null?void 0:V.customerToCourier)==null?void 0:W.stars;return x.courierId?!Q||!A:!Q},q=async(x,Q,A)=>{var he,F;const u=D.find(te=>te.id===x);if(!u)return;const C={stars:A.stars,comment:A.comment||void 0,createdAt:new Date},W={[Q==="restaurant"?"ratings.customerToRestaurant":"ratings.customerToCourier"]:C,updatedAt:X()},ne=u.ratings||{};Q==="restaurant"?ne.customerToRestaurant=C:ne.customerToCourier=C;const re=(he=ne.customerToRestaurant)==null?void 0:he.stars,fe=(F=ne.customerToCourier)==null?void 0:F.stars;u.courierId?re&&fe&&(W.ratingCompleted=!0):re&&(W.ratingCompleted=!0),await xe(J(S,"orders",x),W),Q==="restaurant"&&u.restaurantId&&await m(u.restaurantId,A.stars),n.success("ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™ŸÇŸäŸäŸÖŸÉ! ‚≠ê")},m=async(x,Q)=>{try{const A=await Ce(J(S,"restaurants",x));if(A.exists()){const u=A.data(),C=u.averageRating||0,V=u.totalRatings||0,W=V>0?(C*V+Q)/(V+1):Q;await xe(J(S,"restaurants",x),{averageRating:Math.round(W*10)/10,totalRatings:V+1,updatedAt:X()})}}catch(A){console.error("Error updating restaurant rating:",A)}};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:"ÿ∑ŸÑÿ®ÿßÿ™Ÿä"}),w&&e.jsx(Bl,{isOpen:w.isOpen,onClose:()=>M(null),onSubmit:async x=>{await q(w.orderId,w.type,x),M(null)},type:w.type,targetName:w.targetName,orderId:w.orderId}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>T(null),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",onClick:x=>x.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ws,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ"})]}),e.jsx("button",{onClick:()=>T(null),className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-5",children:U?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-10 h-10 border-3 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]}):j&&j.bankName&&j.bankAccountNumber?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 bg-amber-50 p-3 rounded-xl",children:"üí∞ ÿ≠ŸàŸëŸÑ ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿπŸÑŸâ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä ÿßŸÑÿ™ÿßŸÑŸä ÿ´ŸÖ ÿ£ÿ®ŸÑÿ∫ ÿµÿßÿ≠ÿ® ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(js,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßŸÑÿ®ŸÜŸÉ"}),e.jsx("p",{className:"font-bold text-gray-800",children:j.bankName})]})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßÿ≥ŸÖ ÿµÿßÿ≠ÿ® ÿßŸÑÿ≠ÿ≥ÿßÿ®"}),e.jsx("p",{className:"font-bold text-gray-800",children:j.bankAccountName})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿ±ŸÇŸÖ ÿßŸÑÿ¢Ÿäÿ®ÿßŸÜ / ÿßŸÑÿ≠ÿ≥ÿßÿ®"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-mono font-bold text-gray-800 flex-1 text-left",dir:"ltr",children:j.bankAccountNumber}),e.jsx("button",{onClick:()=>h(j.bankAccountNumber||""),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition",children:e.jsx(Qr,{className:"w-4 h-4"})})]})]})]}),D.find(x=>x.id===N)&&e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-sm text-green-600 mb-1",children:"ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿ∑ŸÑŸàÿ® ÿ™ÿ≠ŸàŸäŸÑŸá"}),e.jsxs("p",{className:"text-3xl font-black text-green-700",children:[(I=(p=D.find(x=>x.id===N))==null?void 0:p.total)==null?void 0:I.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"‚ö†Ô∏è ÿ®ÿπÿØ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑÿå ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿØŸÅÿπ"})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(js,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"ŸÑŸÖ Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÑŸÖÿπÿ±ŸÅÿ© ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ"})]})})]})}),y&&e.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[y,B&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{children:["UID: ",e.jsx("b",{children:B.uid})]}),e.jsxs("div",{children:["ÿπÿØÿØ ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑŸÅŸàŸÑÿ®ŸëÿßŸÉ: ",e.jsx("b",{children:B.fallbackCount})]}),Array.isArray(B.sample)&&B.sample.length>0&&e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"font-semibold",children:"ÿπŸäŸÜÿ© (ÿ£ÿ≠ÿØÿ´ 5):"}),B.sample.map(x=>e.jsxs("div",{className:"truncate",children:["#",x.id," ‚Ä¢ customerId: ",String(x.customerId)," ‚Ä¢ restaurantId: ",String(x.restaurantId)," ‚Ä¢ createdAt: ",x.createdAt||"‚Äî"]},x.id))]})]})]}),D.map(x=>{var Q,A,u,C,V,W,ne,re,fe,he,F,te,Ne,ee,Y,K,me,de,ye;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:`${R(x.status).color} px-4 py-3 flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("span",{className:"text-xl",children:R(x.status).emoji}),e.jsx("span",{className:"font-bold",children:R(x.status).text})]}),e.jsxs("div",{className:"text-white/80 text-sm font-medium",children:["#",x.id.slice(-6)]})]}),e.jsxs("div",{className:"p-4",children:[x.restaurantName&&e.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold mb-2",children:[e.jsx("span",{children:"üçΩÔ∏è"}),e.jsx("span",{children:String(x.restaurantName)})]}),(x.status==="accepted"||x.status==="preparing")&&e.jsx("div",{className:"mb-3",children:e.jsx(ma,{order:x,type:"preparation"})}),x.status==="ready"&&x.deliveryType==="delivery"&&e.jsx("div",{className:"mb-3",children:e.jsx(ma,{order:x,type:"pickup"})}),x.status==="out_for_delivery"&&e.jsx("div",{className:"mb-3",children:e.jsx(ma,{order:x,type:"delivery"})}),e.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 rounded-xl p-3 mb-3",children:(Q=x.items)==null?void 0:Q.map(G=>`${G.name}√ó${G.qty}`).join(" ‚Ä¢ ")}),e.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:x.deliveryType==="pickup"?e.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-medium bg-green-50 rounded-xl p-3",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:"ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]}):e.jsxs("div",{className:"space-y-1 bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä:"}),e.jsxs("span",{children:[((u=(A=x.subtotal)==null?void 0:A.toFixed)==null?void 0:u.call(A,2))||"‚Äî"," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ:"}),x.deliveryFee!==void 0&&x.deliveryFee>0?e.jsxs("span",{className:"font-medium",children:[(V=(C=x.deliveryFee)==null?void 0:C.toFixed)==null?void 0:V.call(C,2)," ÿ±.ÿ≥"]}):e.jsx("span",{className:"text-amber-600",children:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"font-bold text-lg text-primary",children:["ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: ",(ne=(W=x.total)==null?void 0:W.toFixed)==null?void 0:ne.call(W,2)," ÿ±.ÿ≥"]})}),_(x)&&x.restaurantId&&e.jsxs("button",{onClick:()=>b(x.restaurantId,x.id),className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-500 to-green-600 
                             text-white rounded-xl font-bold shadow-lg hover:shadow-xl 
                             hover:scale-[1.02] transition-all duration-200`,children:[e.jsx(Ws,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ üí≥"})]}),x.status==="pending"&&e.jsx("button",{onClick:()=>v(x),disabled:L===x.id,className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 
                             text-white rounded-xl font-bold shadow-lg hover:shadow-xl 
                             hover:scale-[1.02] transition-all duration-200 disabled:opacity-50`,children:L===x.id?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(lt,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ® ‚ùå"})]})}),O(x)&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border-2 border-amber-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ls,{className:"w-5 h-5 text-amber-500 fill-amber-500"}),e.jsx("span",{className:"font-bold text-amber-800",children:"ŸÇŸäŸëŸÖ ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ ‚≠ê"})]}),e.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"ÿ≥ÿßÿπÿØŸÜÿß ŸÅŸä ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿÆÿØŸÖÿ© ÿ®ÿ™ŸÇŸäŸäŸÖŸÉ"}),e.jsxs("div",{className:"space-y-2",children:[!((fe=(re=x.ratings)==null?void 0:re.customerToRestaurant)!=null&&fe.stars)&&e.jsxs("button",{onClick:()=>M({isOpen:!0,orderId:x.id,type:"restaurant",targetName:x.restaurantName||"ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-amber-300 
                                   rounded-xl hover:bg-amber-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Le,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"ŸÇŸäŸëŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(G=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-amber-400 transition"},G))})]}),x.courierId&&!((F=(he=x.ratings)==null?void 0:he.customerToCourier)!=null&&F.stars)&&e.jsxs("button",{onClick:()=>M({isOpen:!0,orderId:x.id,type:"courier",targetName:"ÿßŸÑŸÖŸÜÿØŸàÿ®"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-emerald-300 
                                   rounded-xl hover:bg-emerald-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"ŸÇŸäŸëŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(G=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-emerald-400 transition"},G))})]})]}),(((Ne=(te=x.ratings)==null?void 0:te.customerToRestaurant)==null?void 0:Ne.stars)||((Y=(ee=x.ratings)==null?void 0:ee.customerToCourier)==null?void 0:Y.stars))&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-amber-200 space-y-2",children:[((me=(K=x.ratings)==null?void 0:K.customerToRestaurant)==null?void 0:me.stars)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ£ÿ≥ÿ±ÿ©:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(G=>e.jsx(ls,{className:`w-4 h-4 ${G<=x.ratings.customerToRestaurant.stars?"text-amber-400 fill-amber-400":"text-gray-300"}`},G))})]}),((ye=(de=x.ratings)==null?void 0:de.customerToCourier)==null?void 0:ye.stars)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ™ŸÇŸäŸäŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(G=>e.jsx(ls,{className:`w-4 h-4 ${G<=x.ratings.customerToCourier.stars?"text-emerald-400 fill-emerald-400":"text-gray-300"}`},G))})]})]})]}),x.status==="delivered"&&x.ratingCompleted&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(Ie,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"ÿ™ŸÖ ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ‚úÖ"})]})}),(x.status==="delivered"||x.status==="cancelled")&&x.items&&x.items.length>0&&e.jsxs("button",{onClick:()=>k(x),className:`w-full flex items-center justify-center gap-2 px-4 py-3 
                             bg-gradient-to-r from-sky-500 to-sky-600 
                             text-white rounded-xl font-bold shadow-lg 
                             hover:shadow-xl hover:scale-[1.02] 
                             transition-all duration-200`,children:[e.jsx(qe,{className:"w-5 h-5"}),e.jsx("span",{children:"üîÑ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ®"})]}),e.jsxs("div",{className:"flex gap-2",children:[c(x)&&e.jsxs("button",{onClick:()=>a(`/chat?orderId=${x.id}`),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-primary to-accent 
                               text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                               hover:scale-105 transition-all duration-200 animate-pulse`,children:[e.jsx(Qs,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖŸÜÿØŸàÿ® üöó"})]}),o(x)&&e.jsxs("button",{onClick:()=>a(`/chat?orderId=${x.id}`),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 
                               text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                               hover:scale-105 transition-all duration-200`,children:[e.jsx(Le,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ üçΩÔ∏è"})]}),e.jsxs("button",{onClick:()=>a(`/support?orderId=${x.id}`),className:`flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200`,title:"ÿ™ŸÇÿØŸäŸÖ ÿ¥ŸÉŸàŸâ ÿ£Ÿà ÿ∑ŸÑÿ® ÿØÿπŸÖ",children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ¥ŸÉŸàŸâ"})]})]})]})]})]},x.id)}),D.length===0&&!y&&e.jsx("div",{className:"text-gray-600",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ≠ÿ™Ÿâ ÿßŸÑÿ¢ŸÜ."})]})},Kc=()=>{const{user:s,role:a}=Ee(),n=Ps(),d=ze(),i=t.useRef(null),[y,r]=t.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[D,E]=t.useState(null),[B,P]=t.useState(!1),[N,T]=t.useState({totalOrders:0,favoriteRestaurants:0,pendingOrders:0}),[j,f]=t.useState(0),[U,g]=t.useState([]),[w,M]=t.useState(!1),[b,h]=t.useState(""),[k,L]=t.useState(!1),[$,v]=t.useState(!1),[R,c]=t.useState([]),[o,_]=t.useState(0),[O,q]=t.useState(!1),[m,p]=t.useState(null),[I,x]=t.useState(""),[Q,A]=t.useState(!0),[u,C]=t.useState(!1);t.useEffect(()=>{if(!s)return;(async()=>{const Y=await Ce(J(S,"users",s.uid));if(Y.exists()){const K=Y.data();r({name:K.name||"",phone:K.phone||s.phoneNumber||"",city:K.city||"",address:K.address||"",restaurantName:K.restaurantName||""}),E(K.photoUrl||null),K.savedLocations&&Array.isArray(K.savedLocations)?(c(K.savedLocations),_(K.defaultLocationIndex||0)):K.savedLocation&&(c([{...K.savedLocation,label:"ÿßŸÑŸÖŸÜÿ≤ŸÑ"}]),_(0))}if(a==="customer")try{const K=await Ce(J(S,"wallets",s.uid));if(K.exists()){const me=K.data();f((me==null?void 0:me.balance)||0),g((me==null?void 0:me.transactions)||[])}}catch(K){console.warn("Error loading wallet:",K)}if(a==="customer")try{const{collection:K,query:me,where:de,getDocs:ye}=await Bs(async()=>{const{collection:ke,query:Ae,where:Ue,getDocs:$e}=await import("./vendor-firebase-DPNhE71o.js").then(Je=>Je.M);return{collection:ke,query:Ae,where:Ue,getDocs:$e}},[]),G=me(K(S,"orders"),de("customerId","==",s.uid)),ae=await ye(G),ce=ae.docs.filter(ke=>["pending","accepted","preparing","ready","out_for_delivery"].includes(ke.data().status)).length,ie=me(K(S,"storeFollowers"),de("followerId","==",s.uid)),ge=await ye(ie);T({totalOrders:ae.size,favoriteRestaurants:ge.size,pendingOrders:ce})}catch(K){console.warn("Error loading stats:",K)}A(!1)})()},[s,a]);const V=async ee=>{if(ee.preventDefault(),!!s){C(!0);try{const Y=R[o]||null;await xe(J(S,"users",s.uid),{name:y.name,phone:y.phone,city:y.city,address:y.address,photoUrl:D,savedLocation:Y,savedLocations:R,defaultLocationIndex:o,...a==="owner"&&{restaurantName:y.restaurantName}}),n.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ")}catch{n.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{C(!1)}}},W=async ee=>{var K;const Y=(K=ee.target.files)==null?void 0:K[0];if(!(!Y||!s)){if(!Y.type.startsWith("image/")){d.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿµÿßŸÑÿ≠ÿ©");return}if(Y.size>5*1024*1024){d.error("ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 5 ŸÖŸäÿ¨ÿßÿ®ÿßŸäÿ™");return}P(!0);try{const me=ks(yt,`users/${s.uid}/profile.${Y.name.split(".").pop()}`);await bt(me,Y);const de=await Ss(me);E(de),d.success("ÿ™ŸÖ ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©! ÿßÿ∂ÿ∫ÿ∑ ÿ≠ŸÅÿ∏ ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™")}catch(me){console.error("Error uploading photo:",me),d.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©")}finally{P(!1)}}},ne=()=>{E(null),d.info("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿµŸàÿ±ÿ©! ÿßÿ∂ÿ∫ÿ∑ ÿ≠ŸÅÿ∏ ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™")},re=async ee=>{var K,me,de;if(!s)return;const Y=parseFloat(b);L(!0);try{const{collection:ye,addDoc:G}=await Bs(async()=>{const{collection:ge,addDoc:ke}=await import("./vendor-firebase-DPNhE71o.js").then(Ae=>Ae.M);return{collection:ge,addDoc:ke}},[]);await G(ye(S,"rechargeRequests"),{userId:s.uid,userName:y.name||s.email,userPhone:y.phone,amount:Y,paymentMethod:"paypal",paypalOrderId:ee.id,paypalPayerId:(K=ee.payer)==null?void 0:K.payer_id,paypalEmail:(me=ee.payer)==null?void 0:me.email_address,status:"approved",createdAt:X(),updatedAt:X()});const ae=J(S,"wallets",s.uid),ce=await Ce(ae),ie={id:ee.id,type:"credit",amount:Y,description:"ÿ¥ÿ≠ŸÜ ÿπÿ®ÿ± PayPal",paypalOrderId:ee.id,createdAt:new Date};if(ce.exists()){const ge=((de=ce.data())==null?void 0:de.balance)||0;await xe(ae,{balance:ge+Y,transactions:Tl(ie),updatedAt:X()}),f(ge+Y)}else await Qe(ae,{id:s.uid,balance:Y,totalEarnings:Y,totalWithdrawn:0,transactions:[ie],createdAt:X(),updatedAt:X()}),f(Y);g(ge=>[ie,...ge]),n.success(`ÿ™ŸÖ ÿ¥ÿ≠ŸÜ ${Y} ÿ±ŸäÿßŸÑ ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ`),h(""),M(!1)}catch(ye){console.error("Error processing PayPal payment:",ye),n.error("ŸÅÿ¥ŸÑ ŸÅŸä ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿØŸÅÿπ")}finally{L(!1)}},fe=(ee,Y)=>{const K={lat:ee.lat,lng:ee.lng,address:Y,label:I||`ÿπŸÜŸàÿßŸÜ ${R.length+1}`};c([...R,K]),x(""),q(!1),d.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÜŸàÿßŸÜ! ÿßÿ∂ÿ∫ÿ∑ ÿ≠ŸÅÿ∏ ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™")},he=(ee,Y)=>{if(m===null)return;const K=[...R];K[m]={...K[m],lat:ee.lat,lng:ee.lng,address:Y},c(K),p(null),q(!1),d.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπŸÜŸàÿßŸÜ! ÿßÿ∂ÿ∫ÿ∑ ÿ≠ŸÅÿ∏ ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™")},F=async ee=>{if(!await n.confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿπŸÜŸàÿßŸÜÿü"))return;const K=R.filter((me,de)=>de!==ee);c(K),o>=K.length?_(Math.max(0,K.length-1)):o>ee&&_(o-1),d.info("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿπŸÜŸàÿßŸÜ")},te=ee=>{_(ee),d.success("ÿ™ŸÖ ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿπŸÜŸàÿßŸÜ ŸÉÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä")};if(Q)return e.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[e.jsx(qe,{className:"w-6 h-6 animate-spin ml-2"}),"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."]});const Ne=()=>a==="owner"?"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ":a==="courier"?"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÜÿØŸàÿ®":a==="admin"?"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅ":"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™Ÿä";return e.jsxs("div",{className:"max-w-md mx-auto py-8 px-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-sky-100 border-4 border-sky-200 shadow-lg",children:D?e.jsx("img",{src:D,alt:"ÿµŸàÿ±ÿ™Ÿä",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ms,{className:"w-12 h-12 text-sky-400"})})}),e.jsx("button",{type:"button",onClick:()=>{var ee;return(ee=i.current)==null?void 0:ee.click()},disabled:B,className:"absolute bottom-0 right-0 w-8 h-8 bg-sky-500 hover:bg-sky-600 text-white rounded-full shadow-lg flex items-center justify-center transition disabled:opacity-50",children:B?e.jsx(qe,{className:"w-4 h-4 animate-spin"}):e.jsx(Nt,{className:"w-4 h-4"})}),D&&e.jsx("button",{type:"button",onClick:ne,className:"absolute top-0 right-0 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg flex items-center justify-center transition opacity-0 group-hover:opacity-100",children:e.jsx(_e,{className:"w-3 h-3"})}),e.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:W,className:"hidden"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:Ne()}),e.jsx("p",{className:"text-sm text-gray-500",children:(s==null?void 0:s.email)||(s==null?void 0:s.phoneNumber)})]})]}),a==="customer"&&e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs(le,{to:"/orders",className:"bg-sky-50 rounded-xl p-3 text-center hover:bg-sky-100 transition",children:[e.jsx(cs,{className:"w-6 h-6 text-sky-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-sky-600",children:N.totalOrders}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿ∑ŸÑÿ®ÿßÿ™Ÿä"})]}),e.jsxs("div",{className:"bg-pink-50 rounded-xl p-3 text-center",children:[e.jsx(ot,{className:"w-6 h-6 text-pink-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-pink-600",children:N.favoriteRestaurants}),e.jsx("p",{className:"text-xs text-gray-500",children:"ŸÖÿ™ÿßÿ®Ÿéÿπ"})]}),e.jsxs(le,{to:"/orders",className:"bg-amber-50 rounded-xl p-3 text-center hover:bg-amber-100 transition",children:[e.jsx(Pt,{className:"w-6 h-6 text-amber-500 mx-auto mb-1"}),e.jsx("p",{className:"text-2xl font-black text-amber-600",children:N.pendingOrders}),e.jsx("p",{className:"text-xs text-gray-500",children:"ŸÇŸäÿØ ÿßŸÑÿ™ŸÜŸÅŸäÿ∞"})]})]}),a==="customer"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 via-sky-600 to-sky-700 rounded-2xl p-5 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ns,{className:"w-6 h-6"})}),e.jsx("span",{className:"font-bold",children:"ŸÖÿ≠ŸÅÿ∏ÿ™Ÿä"})]}),e.jsxs("button",{type:"button",onClick:()=>M(!0),className:"px-4 py-2 bg-white text-sky-600 rounded-xl font-bold text-sm hover:bg-sky-50 transition flex items-center gap-1",children:[e.jsx(fr,{className:"w-4 h-4"}),"ÿ¥ÿ≠ŸÜ"]})]}),e.jsxs("div",{className:"text-center py-3",children:[e.jsx("p",{className:"text-sky-100 text-sm mb-1",children:"ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑÿ≠ÿßŸÑŸä"}),e.jsxs("p",{className:"text-4xl font-black",children:[j.toFixed(2)," ",e.jsx("span",{className:"text-lg",children:"ÿ±.ÿ≥"})]})]}),U.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20",children:[e.jsx("p",{className:"text-xs text-sky-100 mb-2",children:"ÿ¢ÿÆÿ± ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:U.slice(-3).reverse().map((ee,Y)=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-white/10 rounded-lg p-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ee.type==="credit"?e.jsx(fr,{className:"w-4 h-4 text-green-300"}):e.jsx(fi,{className:"w-4 h-4 text-red-300"}),e.jsx("span",{className:"text-xs",children:ee.description||(ee.type==="credit"?"ÿ¥ÿ≠ŸÜ":"ÿÆÿµŸÖ")})]}),e.jsxs("span",{className:ee.type==="credit"?"text-green-300 font-bold":"text-red-300 font-bold",children:[ee.type==="credit"?"+":"-",ee.amount," ÿ±.ÿ≥"]})]},Y))})]})]})}),a==="customer"&&e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs(le,{to:"/notifications",className:"flex-1 flex items-center justify-center gap-2 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition text-gray-700 font-medium",children:[e.jsx(ft,{className:"w-5 h-5"}),"ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"]}),e.jsxs(le,{to:"/orders",className:"flex-1 flex items-center justify-center gap-2 py-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition text-gray-700 font-medium",children:[e.jsx(cs,{className:"w-5 h-5"}),"ÿ∑ŸÑÿ®ÿßÿ™Ÿä"]})]}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(ms,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ",value:y.name,onChange:ee=>r({...y,name:ee.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Ol,{className:"w-4 h-4 inline ml-1"}),"ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:y.phone,onChange:ee=>r({...y,phone:ee.target.value}),dir:"ltr"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(js,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑŸÖÿØŸäŸÜÿ©"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"ŸÖÿ´ÿßŸÑ: ÿßŸÑÿ±Ÿäÿßÿ∂",value:y.city,onChange:ee=>r({...y,city:ee.target.value})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(es,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä"]}),e.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"ÿßŸÑÿ≠Ÿäÿå ÿßŸÑÿ¥ÿßÿ±ÿπÿå ÿ±ŸÇŸÖ ÿßŸÑŸÖÿ®ŸÜŸâÿå ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©...",value:y.address,onChange:ee=>r({...y,address:ee.target.value})})]}),(a==="customer"||a==="admin")&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:[e.jsx(tt,{className:"w-4 h-4"}),"ÿπŸÜÿßŸàŸäŸÜ ÿßŸÑÿ™ŸàÿµŸäŸÑ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[R.length,"/5"]})]}),R.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:R.map((ee,Y)=>e.jsxs("div",{className:`rounded-xl p-3 border-2 transition ${Y===o?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${Y===o?"bg-green-500":"bg-gray-400"}`,children:e.jsx(es,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-bold text-gray-800",children:ee.label||`ÿπŸÜŸàÿßŸÜ ${Y+1}`}),Y===o&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-500 text-white text-xs font-bold rounded-full",children:[e.jsx(ls,{className:"w-3 h-3"})," ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä"]})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:ee.address})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[Y!==o&&e.jsxs("button",{type:"button",onClick:()=>te(Y),className:"flex-1 py-2 px-3 rounded-lg border border-green-200 text-green-600 text-xs font-medium hover:bg-green-50 transition flex items-center justify-center gap-1",children:[e.jsx(gs,{className:"w-3 h-3"})," ÿ™ÿπŸäŸäŸÜ ŸÉÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä"]}),e.jsx("button",{type:"button",onClick:()=>{p(Y),q(!0)},className:"flex-1 py-2 px-3 rounded-lg border border-sky-200 text-sky-600 text-xs font-medium hover:bg-sky-50 transition",children:"ÿ™ÿπÿØŸäŸÑ"}),e.jsx("button",{type:"button",onClick:()=>F(Y),className:"py-2 px-3 rounded-lg border border-red-200 text-red-500 hover:bg-red-50 transition",children:e.jsx(Ns,{className:"w-4 h-4"})})]})]},Y))}),R.length<5&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:I,onChange:ee=>x(ee.target.value),placeholder:"ÿßÿ≥ŸÖ ÿßŸÑÿπŸÜŸàÿßŸÜ (ŸÖÿ´ÿßŸÑ: ÿßŸÑŸÖŸÜÿ≤ŸÑÿå ÿßŸÑÿπŸÖŸÑ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 text-sm focus:border-sky-400 focus:outline-none"}),e.jsxs("button",{type:"button",onClick:()=>{p(null),q(!0)},className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-100 to-sky-50 border-2 border-dashed border-sky-300 text-sky-600 font-semibold hover:border-sky-400 transition flex items-center justify-center gap-3",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÜŸàÿßŸÜ ÿ¨ÿØŸäÿØ"})]})]}),R.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"üí° ÿ£ÿ∂ŸÅ ÿπŸÜÿßŸàŸäŸÜŸÉ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ŸÑÿ™ÿ≥ŸáŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®"})]}),a==="owner"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Va,{className:"w-4 h-4 inline ml-1"}),"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ"]}),e.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ",value:y.restaurantName,onChange:ee=>r({...y,restaurantName:ee.target.value})})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:u?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ll,{className:"w-5 h-5"}),"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[e.jsx("p",{children:"üí° ŸäŸÖŸÉŸÜŸÉ ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™"}),(a==="customer"||a==="admin")&&e.jsx("p",{className:"mt-1",children:"üìç ŸäŸÖŸÉŸÜŸÉ ÿ≠ŸÅÿ∏ ÿ≠ÿ™Ÿâ 5 ÿπŸÜÿßŸàŸäŸÜ ŸÖÿÆÿ™ŸÑŸÅÿ©"})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl w-full max-w-md shadow-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white z-10",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5 text-sky-500"}),"ÿ¥ÿ≠ŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©"]}),e.jsx("button",{onClick:()=>M(!1),className:"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:e.jsx(_e,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-sky-600 rounded-xl p-4 text-center text-white",children:[e.jsx("p",{className:"text-sm text-sky-100 mb-1",children:"ÿ±ÿµŸäÿØŸÉ ÿßŸÑÿ≠ÿßŸÑŸä"}),e.jsxs("p",{className:"text-3xl font-black",children:[j.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ÿßÿÆÿ™ÿ± ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ¥ÿ≠ŸÜ (ÿ±ŸäÿßŸÑ)"}),e.jsx("input",{type:"number",value:b,onChange:ee=>h(ee.target.value),placeholder:"ÿ£ÿØÿÆŸÑ ÿßŸÑŸÖÿ®ŸÑÿ∫ (10 - 1000)",className:"w-full border-2 border-gray-200 rounded-xl p-4 text-lg font-bold text-center focus:border-sky-400 focus:outline-none",min:"10",max:"1000",dir:"ltr"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[20,50,100,200].map(ee=>e.jsxs("button",{type:"button",onClick:()=>h(ee.toString()),className:`py-3 rounded-xl font-bold text-sm transition ${b===ee.toString()?"bg-sky-500 text-white shadow-lg scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[ee," ÿ±.ÿ≥"]},ee))}),b&&parseFloat(b)>=10&&parseFloat(b)<=1e3&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("p",{className:"text-sm text-center text-gray-600 mb-3",children:["üí≥ ÿßÿØŸÅÿπ ",e.jsxs("span",{className:"font-bold text-sky-600",children:[b," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"text-gray-400 text-xs mr-1",children:["(‚âà $",Wt.sarToUsd(parseFloat(b)),")"]}),"ÿπÿ®ÿ± PayPal"]}),e.jsx(Jr,{options:dn(),children:e.jsx(Xr,{style:{layout:"vertical",shape:"pill",color:"blue",label:"pay",height:50},disabled:k,createOrder:(ee,Y)=>{const K=Wt.sarToUsd(parseFloat(b));return Y.order.create({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:K.toString()},description:`ÿ¥ÿ≠ŸÜ ŸÖÿ≠ŸÅÿ∏ÿ© ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™ - ${b} ÿ±.ÿ≥`}]})},onApprove:async(ee,Y)=>{if(Y.order){const K=await Y.order.capture();re(K)}},onError:ee=>{console.error("PayPal Error:",ee),d.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ")},onCancel:()=>{d.info("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿπŸÖŸÑŸäÿ© ÿßŸÑÿØŸÅÿπ")}})}),k&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 text-sky-600",children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"ÿ¨ÿßÿ±Ÿê ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿØŸÅÿπ..."})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ws,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-blue-800",children:"ÿßŸÑÿØŸÅÿπ ÿßŸÑÿ¢ŸÖŸÜ ÿπÿ®ÿ± PayPal"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ±ÿµŸäÿØ ŸÅŸàÿ±ÿßŸã ÿ®ÿπÿØ ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ. ŸäŸÖŸÉŸÜŸÉ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ®ÿ∑ÿßŸÇÿ© Visa/Mastercard ÿ£Ÿà ÿ≠ÿ≥ÿßÿ® PayPal."})]})]})}),e.jsx("p",{className:"text-xs text-center text-gray-400",children:"üîí ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ŸÖÿ¥ŸÅÿ±ÿ© Ÿàÿ¢ŸÖŸÜÿ©"})]})]})}),e.jsx(cn,{isOpen:O,onClose:()=>{q(!1),p(null)},onConfirm:(ee,Y)=>{m!==null?he(ee,Y):fe(ee,Y)},initialLocation:m!==null&&R[m]?{lat:R[m].lat,lng:R[m].lng}:null})]})},Jc=()=>{var V,W,ne,re,fe,he;const{user:s}=Ee(),a=ze(),[n,d]=t.useState(!0),[i,y]=t.useState(!1),[r,D]=t.useState(null),[E,B]=t.useState("overview"),[P,N]=t.useState({todayOrders:0,todayRevenue:0,weekOrders:0,weekRevenue:0,monthOrders:0,monthRevenue:0,totalOrders:0,totalRevenue:0,pendingOrders:0,preparingOrders:0,deliveredOrders:0,cancelledOrders:0,menuItems:0,availableItems:0,averageRating:0,deliveryRate:0,activePromotions:0,totalViews:0,uniqueCustomers:0,profileViews:0,menuViews:0,itemViews:0,shareClicks:0,whatsappShares:0,registeredViaLink:0,todayViews:0,followersCount:0}),[T,j]=t.useState(!1),[f,U]=t.useState(null),g=F=>{const te=`${window.location.origin}/menu?restaurant=${s==null?void 0:s.uid}`;return F?`${te}&ref=${F}`:te},w=async F=>{if(s!=null&&s.uid)try{const te=J(S,"restaurantStats",s.uid),Ne={totalShareClicks:Ze(1),updatedAt:X()};F==="whatsapp"&&(Ne.whatsappShareCount=Ze(1)),await xe(te,Ne).catch(async()=>{await Qe(te,{totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:1,whatsappShareCount:F==="whatsapp"?1:0,registeredCustomers:0,appDownloads:0,dailyViews:{},updatedAt:X()})})}catch(te){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ©:",te)}},M=async()=>{const F=g("copy");await navigator.clipboard.writeText(F),j(!0),setTimeout(()=>j(!1),2e3),a.success("ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑! üìã"),w("copy")},b=()=>{const F=g("whatsapp"),te=encodeURIComponent(`üçΩÔ∏è ÿ™ŸÅÿ∂ŸÑ ÿ®ÿ≤Ÿäÿßÿ±ÿ© ŸÖÿ™ÿ¨ÿ± ${(r==null?void 0:r.name)||"ŸÖÿ™ÿ¨ÿ±Ÿä"} ÿπŸÑŸâ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™!

${F}`);window.open(`https://wa.me/?text=${te}`,"_blank"),a.success("ÿ¨ÿßÿ±Ÿä ŸÅÿ™ÿ≠ ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ®... üì±"),w("whatsapp")},h=async()=>{const F=g("social");if(navigator.share)try{await navigator.share({title:(r==null?void 0:r.name)||"ŸÖÿ™ÿ¨ÿ±Ÿä",text:`ÿ™ŸÅÿ∂ŸÑ ÿ®ÿ≤Ÿäÿßÿ±ÿ© ${r==null?void 0:r.name} ÿπŸÑŸâ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™`,url:F}),w("social")}catch{M()}else M()},[k,L]=t.useState([]),[$,v]=t.useState([]),[R,c]=t.useState([]),o=async()=>{var F,te,Ne;if(s!=null&&s.uid)try{const ee=await Ce(J(S,"restaurants",s.uid));ee.exists()&&D(ee.data());const Y=be(se(S,"menuItems"),je("ownerId","==",s.uid)),me=(await pe(Y)).docs.map(ve=>({id:ve.id,...ve.data()})),de=be(se(S,"orders"),je("ownerId","==",s.uid),ss("createdAt","desc")),G=(await pe(de)).docs.map(ve=>({id:ve.id,...ve.data()}));let ae=0,ce=0;try{const ve=be(se(S,"promotions"),je("ownerId","==",s.uid));(await pe(ve)).docs.forEach(Ke=>{const Ge=Ke.data();Ge.isActive&&ae++,ce+=Ge.viewsCount||0})}catch{}const ie=new Date,ge=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()),ke=new Date(ge.getTime()-7*24*60*60*1e3),Ae=new Date(ge.getTime()-30*24*60*60*1e3),Ue=G.filter(ve=>{var Ke,Ge;return(((Ge=(Ke=ve.createdAt)==null?void 0:Ke.toDate)==null?void 0:Ge.call(Ke))||new Date(0))>=ge&&ve.status!=="cancelled"}),$e=G.filter(ve=>{var Ke,Ge;return(((Ge=(Ke=ve.createdAt)==null?void 0:Ke.toDate)==null?void 0:Ge.call(Ke))||new Date(0))>=ke&&ve.status!=="cancelled"}),Je=G.filter(ve=>{var Ke,Ge;return(((Ge=(Ke=ve.createdAt)==null?void 0:Ke.toDate)==null?void 0:Ge.call(Ke))||new Date(0))>=Ae&&ve.status!=="cancelled"}),We=G.filter(ve=>ve.status==="delivered"),Ts=G.filter(ve=>ve.status==="pending"),Es=G.filter(ve=>["accepted","preparing"].includes(ve.status)),rt=G.filter(ve=>ve.status==="cancelled"),nt=new Set(G.map(ve=>ve.customerId).filter(Boolean)),ds={};We.forEach(ve=>{var Me;(Me=ve.items)==null||Me.forEach(Ke=>{const Ge=Ke.name||"ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ";ds[Ge]=(ds[Ge]||0)+(Ke.qty||1)})});const ht=Object.entries(ds).sort((ve,Me)=>Me[1]-ve[1]).slice(0,5).map(([ve,Me])=>({name:ve,count:Me}));v(ht),L(G.slice(0,5));let Ys=0,$s=0,Ks=0,Js=0,Xt=0,$t=0,Zt=0,Xs=0;try{const ve=await Ce(J(S,"restaurantStats",s.uid));if(ve.exists()){const Me=ve.data();U(Me),Ys=Me.totalProfileViews||0,$s=Me.totalMenuViews||0,Ks=Me.totalItemViews||0,Js=Me.totalShareClicks||0,Xt=Me.whatsappShareCount||0,$t=Me.registeredCustomers||0,Xs=Me.followersCount||0;const Ke=new Date().toISOString().split("T")[0];Zt=((F=Me.dailyViews)==null?void 0:F[Ke])||0}}catch(ve){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ≤Ÿäÿßÿ±ÿßÿ™:",ve)}try{const ve=be(se(S,"customerRegistrations"),je("restaurantId","==",s.uid));$t=(await pe(ve)).size}catch{}try{const ve=be(se(S,"storeFollowers"),je("restaurantId","==",s.uid));Xs=(await pe(ve)).size}catch{}try{const ve=be(se(S,"stories"),je("ownerId","==",s.uid)),Ke=(await pe(ve)).docs.map(Ge=>{var Zs,ut,Vs,wt;return{id:Ge.id,...Ge.data(),expiresAt:(ut=(Zs=Ge.data().expiresAt)==null?void 0:Zs.toDate)==null?void 0:ut.call(Zs),createdAt:(wt=(Vs=Ge.data().createdAt)==null?void 0:Vs.toDate)==null?void 0:wt.call(Vs)}}).filter(Ge=>Ge.expiresAt&&new Date(Ge.expiresAt)>ie).sort((Ge,Zs)=>{var ut,Vs;return(((ut=Zs.createdAt)==null?void 0:ut.getTime())||0)-(((Vs=Ge.createdAt)==null?void 0:Vs.getTime())||0)});c(Ke)}catch(ve){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä:",ve)}N({todayOrders:Ue.length,todayRevenue:Ue.reduce((ve,Me)=>ve+(Me.subtotal||0),0),weekOrders:$e.length,weekRevenue:$e.reduce((ve,Me)=>ve+(Me.subtotal||0),0),monthOrders:Je.length,monthRevenue:Je.reduce((ve,Me)=>ve+(Me.subtotal||0),0),totalOrders:G.filter(ve=>ve.status!=="cancelled").length,totalRevenue:We.reduce((ve,Me)=>ve+(Me.subtotal||0),0),pendingOrders:Ts.length,preparingOrders:Es.length,deliveredOrders:We.length,cancelledOrders:rt.length,menuItems:me.length,availableItems:me.filter(ve=>ve.available).length,averageRating:((te=ee.data())==null?void 0:te.rating)||0,deliveryRate:((Ne=ee.data())==null?void 0:Ne.deliveryRate)||0,activePromotions:ae,totalViews:ce,uniqueCustomers:nt.size,profileViews:Ys,menuViews:$s,itemViews:Ks,shareClicks:Js,whatsappShares:Xt,registeredViaLink:$t,todayViews:Zt,followersCount:Xs})}catch(ee){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:",ee)}finally{d(!1),y(!1)}};t.useEffect(()=>{o()},[s==null?void 0:s.uid]);const _=()=>{y(!0),o()},O=F=>({pending:{label:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ",color:"bg-yellow-100 text-yellow-700",icon:Ye},accepted:{label:"ŸÖŸÇÿ®ŸàŸÑ",color:"bg-blue-100 text-blue-700",icon:Ie},preparing:{label:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",color:"bg-orange-100 text-orange-700",icon:jt},ready:{label:"ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿ™ŸàÿµŸäŸÑ",color:"bg-purple-100 text-purple-700",icon:Oe},out_for_delivery:{label:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",color:"bg-indigo-100 text-indigo-700",icon:Be},delivered:{label:"ÿ™ŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ",color:"bg-green-100 text-green-700",icon:Ie},cancelled:{label:"ŸÖŸÑÿ∫Ÿä",color:"bg-red-100 text-red-700",icon:Ds}})[F]||{label:F,color:"bg-gray-100 text-gray-700",icon:Ye},q=F=>{switch(F){case"gold":return{label:"ÿ∞Ÿáÿ®Ÿä",color:"from-yellow-400 to-amber-500",icon:"üëë"};case"silver":return{label:"ŸÅÿ∂Ÿä",color:"from-gray-300 to-gray-400",icon:"ü•à"};default:return{label:"ÿ®ÿ±ŸàŸÜÿ≤Ÿä",color:"from-orange-500 to-orange-600",icon:"ü•â"}}};if(n)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})});const m=(r==null?void 0:r.packageType)==="premium",p=q(r==null?void 0:r.sellerTier),x=(()=>{var ee,Y;if(!(r!=null&&r.packageExpiresAt))return null;const F=((Y=(ee=r.packageExpiresAt)==null?void 0:ee.toDate)==null?void 0:Y.call(ee))||new Date(r.packageExpiresAt),te=new Date,Ne=F.getTime()-te.getTime();return Math.ceil(Ne/(1e3*60*60*24))})(),Q=x!==null&&x<=7&&x>0,A=x!==null&&x<=0,C=(()=>{const F=P.totalRevenue,te=P.deliveredOrders*3.75;return F-te})();return m?e.jsxs("div",{className:"space-y-6 pb-24 -mx-4 -mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"h-40 sm:h-48 bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-amber-500/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-500/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsx("button",{onClick:_,disabled:i,className:"absolute top-4 left-4 p-2 bg-white/10 hover:bg-white/20 rounded-xl transition z-10",children:e.jsx(qe,{className:`w-5 h-5 text-white ${i?"animate-spin":""}`})}),e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 px-4 py-1.5 rounded-full flex items-center gap-2 shadow-lg",children:[e.jsx(ts,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-white font-bold text-sm",children:"ÿ®ÿßŸÇÿ© ŸÖŸÖŸäÿ≤ÿ©"})]})})]}),e.jsx("div",{className:"relative px-4 -mt-16",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-5",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative -mt-12",children:[e.jsx("div",{className:"w-24 h-24 rounded-2xl bg-white shadow-xl overflow-hidden border-4 border-white",children:r!=null&&r.logoUrl?e.jsx("img",{src:r.logoUrl,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center",children:e.jsx(Le,{className:"w-10 h-10 text-amber-500"})})}),(r==null?void 0:r.isVerified)&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white",children:e.jsx(Ie,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex-1 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:(r==null?void 0:r.name)||"ŸÖÿ™ÿ¨ÿ±Ÿä"}),e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold text-white bg-gradient-to-r ${p.color}`,children:[p.icon," ",p.label]})]}),(r==null?void 0:r.city)&&e.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-1 mt-1",children:[e.jsx(es,{className:"w-3 h-3"}),r.city]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ls,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),e.jsx("span",{className:"font-bold",children:P.averageRating.toFixed(1)})]}),e.jsx("div",{className:"text-gray-300",children:"|"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-bold text-gray-900",children:P.totalOrders})," ÿ∑ŸÑÿ®"]}),e.jsx("div",{className:"text-gray-300",children:"|"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-bold text-gray-900",children:P.menuItems})," ÿµŸÜŸÅ"]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 -mx-2 px-2",children:[e.jsxs(le,{to:`/menu?restaurant=${s==null?void 0:s.uid}`,className:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[e.jsx(ws,{className:"w-4 h-4"}),"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑŸÖÿ™ÿ¨ÿ±"]}),e.jsxs(le,{to:"/owner/edit",className:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[e.jsx(Ut,{className:"w-4 h-4"}),"ÿ™ÿπÿØŸäŸÑ"]}),e.jsxs(le,{to:"/owner/promotion",className:"flex items-center gap-2 bg-purple-100 hover:bg-purple-200 text-purple-700 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[e.jsx(Ls,{className:"w-4 h-4"}),"ÿ•ÿπŸÑÿßŸÜ ÿ¨ÿØŸäÿØ"]})]})]})})]}),e.jsxs("div",{className:"px-4 space-y-3",children:[(A||Q)&&e.jsx(le,{to:"/owner/packages",className:`block rounded-2xl p-4 shadow-lg ${A?"bg-gradient-to-r from-red-600 to-red-500 text-white":"bg-gradient-to-r from-amber-500 to-orange-500 text-white"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ts,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex-1",children:A?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-lg",children:"‚ö†Ô∏è ÿßŸÜÿ™Ÿáÿ™ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ!"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿ¨ÿØŸëÿØ ÿßŸÑÿ¢ŸÜ ŸÑŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑŸÖÿ≤ÿßŸäÿß"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-bold text-lg",children:["‚è∞ ÿ®ÿßŸÇŸä ",x," ŸäŸàŸÖ ÿπŸÑŸâ ÿßŸÜÿ™Ÿáÿßÿ° ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ"]}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿ¨ÿØŸëÿØ ŸÖÿ®ŸÉÿ±ÿßŸã Ÿàÿßÿ≥ÿ™ŸÖÿ™ÿπ ÿ®ÿßŸÑŸÖÿ≤ÿßŸäÿß"})]})}),e.jsx(Rs,{className:"w-6 h-6"})]})}),(r==null?void 0:r.commercialLicenseUrl)&&r.licenseStatus!=="approved"&&e.jsx("div",{className:`rounded-2xl p-4 ${r.licenseStatus==="rejected"?"bg-red-50 border border-red-200":"bg-yellow-50 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r.licenseStatus==="rejected"?"bg-red-500":"bg-yellow-500"}`,children:e.jsx(us,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:r.licenseStatus==="rejected"?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-red-700",children:"‚ùå ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ"}),e.jsx("p",{className:"text-sm text-red-600",children:r.licenseNotes||"Ÿäÿ±ÿ¨Ÿâ ÿ±ŸÅÿπ ÿ™ÿ±ÿÆŸäÿµ ÿµÿßŸÑÿ≠"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-bold text-yellow-700",children:"‚è≥ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ¥ÿπÿßÿ±ŸÉ ÿ®ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ŸÇÿ±Ÿäÿ®ÿßŸã"})]})}),r.licenseStatus==="rejected"&&e.jsx(le,{to:"/owner/edit",className:"text-red-600 text-sm font-bold underline",children:"ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ±ŸÅÿπ"})]})}),P.pendingOrders>0&&e.jsx(le,{to:"/owner/orders",className:"block bg-gradient-to-r from-red-500 to-orange-500 rounded-2xl p-4 text-white shadow-lg animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(ft,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-lg",children:["üîî ",P.pendingOrders," ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ!"]}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿßÿ∂ÿ∫ÿ∑ ŸÑŸÑŸÇÿ®ŸàŸÑ ÿßŸÑÿ¢ŸÜ"})]}),e.jsx(Rs,{className:"w-6 h-6"})]})}),!(r!=null&&r.bankName)&&e.jsx(le,{to:"/owner/edit#bank",className:"block bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center",children:e.jsx(js,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-amber-700",children:"ÿ£ÿ∂ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä"}),e.jsx("p",{className:"text-sm text-amber-600",children:"ŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑÿßÿ™ ŸÖŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ°"})]})]})})]}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 via-pink-600 to-rose-500 rounded-2xl p-5 text-white shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white rounded-full translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(za,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"üì¢ ÿßŸÜÿ¥ÿ±Ÿä ŸÖÿ™ÿ¨ÿ±ŸÉ!"})]}),e.jsx("p",{className:"text-white/80 text-sm mb-4",children:"ÿ¥ÿßÿ±ŸÉŸä ÿ±ÿßÿ®ÿ∑ ŸÖÿ™ÿ¨ÿ±ŸÉ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ° ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®ÿå ÿ™ŸàŸäÿ™ÿ±ÿå ÿßŸÜÿ≥ÿ™ŸÇÿ±ÿßŸÖ ÿ£Ÿà ÿ£Ÿä ŸÖŸÜÿµÿ©!"}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 mb-4",children:[e.jsx("p",{className:"text-white/60 text-xs mb-1",children:"ÿ±ÿßÿ®ÿ∑ ŸÖÿ™ÿ¨ÿ±ŸÉ ÿßŸÑÿÆÿßÿµ:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 bg-white/10 rounded-lg p-2 text-sm font-mono truncate",dir:"ltr",children:[window.location.origin,"/menu?restaurant=",s==null?void 0:s.uid]}),e.jsx("button",{onClick:M,className:`p-2 rounded-lg transition ${T?"bg-green-500":"bg-white/20 hover:bg-white/30"}`,children:T?e.jsx(Ie,{className:"w-5 h-5"}):e.jsx(Qr,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:b,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl transition",children:[e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Ÿàÿßÿ™ÿ≥ÿßÿ®"]}),e.jsxs("button",{onClick:h,className:"flex-1 flex items-center justify-center gap-2 bg-white text-purple-600 font-bold py-3 rounded-xl hover:bg-purple-50 transition",children:[e.jsx(za,{className:"w-5 h-5"}),"ŸÖÿ¥ÿßÿ±ŸÉÿ©"]}),e.jsxs(le,{to:`/menu?restaurant=${s==null?void 0:s.uid}`,className:"flex items-center justify-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-3 rounded-xl transition",children:[e.jsx(ws,{className:"w-5 h-5"}),"ŸÖÿπÿßŸäŸÜÿ©"]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-2 mt-4 pt-4 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:P.followersCount}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ŸÖÿ™ÿßÿ®ÿπ üíú"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:P.todayViews}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ÿ≤Ÿäÿßÿ±ÿßÿ™ ÿßŸÑŸäŸàŸÖ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:P.profileViews}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ŸÖÿ¥ÿßŸáÿØÿ© ÿµŸÅÿ≠ÿ©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:P.whatsappShares}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ŸÖÿ¥ÿßÿ±ŸÉÿ© Ÿàÿßÿ™ÿ≥"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:P.registeredViaLink}),e.jsx("p",{className:"text-white/70 text-[10px]",children:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿπÿ®ÿ±ŸÉ"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 pt-2 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:P.uniqueCustomers}),e.jsx("p",{className:"text-white/70 text-xs",children:"ÿπŸÖŸäŸÑ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:P.totalViews}),e.jsx("p",{className:"text-white/70 text-xs",children:"ŸÖÿ¥ÿßŸáÿØÿ©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:P.totalOrders}),e.jsx("p",{className:"text-white/70 text-xs",children:"ÿ∑ŸÑÿ®"})]})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 via-fuchsia-600 to-pink-600 rounded-2xl p-5 text-white shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white rounded-full translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"üì∏ ÿ≥ÿ™Ÿàÿ±Ÿä ÿßŸÑÿ£ÿ≥ÿ±ÿ©"})]}),e.jsx(le,{to:"/owner/stories",className:"bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-lg text-sm font-bold transition",children:"+ ÿ£ÿ∂ŸÅ ÿ≥ÿ™Ÿàÿ±Ÿä"})]}),e.jsx("p",{className:"text-white/80 text-sm mb-4",children:"ÿ¥ÿßÿ±ŸÉŸä ŸÇÿµÿ™ŸÉ ŸÖÿπ ÿπŸÖŸÑÿßÿ¶ŸÉ! ÿµŸàÿ± ÿ£ŸÉŸÑÿßÿ™ŸÉÿå ŸÖÿ∑ÿ®ÿÆŸÉÿå Ÿàÿ£ÿ¨Ÿàÿßÿ° ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ± üç≥"}),R.length===0?e.jsxs(le,{to:"/owner/stories",className:"block bg-white/10 backdrop-blur rounded-xl p-6 text-center hover:bg-white/20 transition",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(vs,{className:"w-8 h-8"})}),e.jsx("p",{className:"font-bold",children:"ÿ£ÿ∂ŸäŸÅŸä ÿ£ŸàŸÑ ÿ≥ÿ™Ÿàÿ±Ÿä!"}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:"ÿßÿ¨ÿ∞ÿ®Ÿä ÿπŸÖŸÑÿßÿ° ÿ¨ÿØÿØ ÿ®ÿµŸàÿ± ŸÑÿ∞Ÿäÿ∞ÿ©"})]}):e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-2 px-2",children:[e.jsxs(le,{to:"/owner/stories",className:"flex-shrink-0 w-20 h-28 bg-white/20 rounded-xl flex flex-col items-center justify-center hover:bg-white/30 transition",children:[e.jsx("div",{className:"w-10 h-10 bg-white/30 rounded-full flex items-center justify-center mb-1",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs",children:"ÿ¨ÿØŸäÿØ"})]}),R.slice(0,4).map(F=>e.jsxs(le,{to:"/owner/stories",className:"flex-shrink-0 w-20 h-28 rounded-xl overflow-hidden relative group",children:[F.type==="text"?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",style:{backgroundColor:F.backgroundColor||"#0ea5e9"},children:e.jsx("p",{className:"text-[10px] text-center line-clamp-3",style:{color:F.textColor||"#fff"},children:F.caption})}):e.jsx("img",{src:F.mediaUrl,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute bottom-1 left-1 right-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx(ws,{className:"w-3 h-3"}),F.viewsCount||0]})})]},F.id)),R.length>4&&e.jsxs(le,{to:"/owner/stories",className:"flex-shrink-0 w-20 h-28 bg-white/20 rounded-xl flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["+",R.length-4]}),e.jsx("span",{className:"text-xs",children:"ÿßŸÑŸÖÿ≤ŸäÿØ"})]})]}),R.length>0&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-4 pt-3 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:R.length}),e.jsx("p",{className:"text-white/70 text-xs",children:"ÿ≥ÿ™Ÿàÿ±Ÿä ŸÜÿ¥ÿ∑ÿ©"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:R.reduce((F,te)=>F+(te.viewsCount||0),0)}),e.jsx("p",{className:"text-white/70 text-xs",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ¥ÿßŸáÿØÿßÿ™"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold",children:"24 ÿ≥"}),e.jsx("p",{className:"text-white/70 text-xs",children:"ŸÖÿØÿ© ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä"})]})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-emerald-700 rounded-2xl p-5 text-white shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-6 h-6"}),e.jsx("h2",{className:"text-lg font-bold",children:"üí∞ ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™"})]}),e.jsx(le,{to:"/owner/orders",className:"text-white/80 text-sm hover:text-white",children:"ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ‚Üê"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑŸäŸàŸÖ"}),e.jsxs("p",{className:"text-2xl font-bold",children:[P.todayRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[P.todayOrders," ÿ∑ŸÑÿ®"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ"}),e.jsxs("p",{className:"text-2xl font-bold",children:[P.weekRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[P.weekOrders," ÿ∑ŸÑÿ®"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ¥Ÿáÿ±"}),e.jsxs("p",{className:"text-2xl font-bold",children:[P.monthRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[P.monthOrders," ÿ∑ŸÑÿ®"]})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl p-4 ring-2 ring-white/30",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä"}),e.jsxs("p",{className:"text-2xl font-bold",children:[P.totalRevenue.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[P.deliveredOrders," ŸÖŸÉÿ™ŸÖŸÑ"]})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ms,{className:"w-6 h-6 text-green-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"üìä ÿ™ŸÇÿ±Ÿäÿ± ÿµÿßŸÅŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[P.totalRevenue.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["(",P.deliveredOrders," ÿ∑ŸÑÿ® √ó 3.75 ÿ±.ÿ≥)"]})]}),e.jsxs("span",{className:"font-bold text-red-600",children:["- ",(P.deliveredOrders*3.75).toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl px-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx(ns,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-bold text-green-800",children:"ÿµÿßŸÅŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[C.toFixed(2)," ÿ±.ÿ≥"]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"ŸÜÿ≥ÿ®ÿ© ÿµÿßŸÅŸä ÿßŸÑÿ±ÿ®ÿ≠"}),e.jsxs("span",{className:`font-bold ${C>=0?"text-green-600":"text-red-600"}`,children:[P.totalRevenue>0?(C/P.totalRevenue*100).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full transition-all duration-500",style:{width:`${P.totalRevenue>0?Math.max(0,C/P.totalRevenue*100):0}%`}})})]})]})}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"‚ö° ÿ™ÿ≠ŸÉŸÖ ÿ≥ÿ±Ÿäÿπ"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(le,{to:"/owner/orders",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mb-3",children:e.jsx(Ha,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[P.pendingOrders," ÿ¨ÿØŸäÿØ"]}),e.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[P.preparingOrders," ÿ™ÿ≠ÿ∂Ÿäÿ±"]})]})]}),e.jsxs(le,{to:"/owner/menu",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center mb-3",children:e.jsx(at,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[P.availableItems," ŸÖÿ™ÿßÿ≠"]}),e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[P.menuItems," ÿ•ÿ¨ŸÖÿßŸÑŸä"]})]})]}),e.jsxs(le,{to:"/owner/promotion",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center mb-3",children:e.jsx(Ls,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"ÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[P.activePromotions," ŸÜÿ¥ÿ∑"]}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(ws,{className:"w-3 h-3"}),P.totalViews]})]})]}),e.jsxs(le,{to:"/owner/edit",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-600 to-gray-700 rounded-xl flex items-center justify-center mb-3",children:e.jsx(ha,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-gray-900",children:"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™"}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ™ÿ¨ÿ±"})]})]})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"üìä ÿ≠ÿßŸÑÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs(le,{to:"/owner/orders?status=pending",className:"text-center p-3 bg-yellow-50 rounded-xl hover:bg-yellow-100 transition",children:[e.jsx(Ye,{className:"w-6 h-6 text-yellow-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-yellow-700",children:P.pendingOrders}),e.jsx("p",{className:"text-xs text-yellow-600",children:"ÿ¨ÿØŸäÿØ"})]}),e.jsxs(le,{to:"/owner/orders?status=preparing",className:"text-center p-3 bg-orange-50 rounded-xl hover:bg-orange-100 transition",children:[e.jsx(jt,{className:"w-6 h-6 text-orange-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-orange-700",children:P.preparingOrders}),e.jsx("p",{className:"text-xs text-orange-600",children:"ÿ™ÿ≠ÿ∂Ÿäÿ±"})]}),e.jsxs(le,{to:"/owner/orders?status=delivered",className:"text-center p-3 bg-green-50 rounded-xl hover:bg-green-100 transition",children:[e.jsx(Ie,{className:"w-6 h-6 text-green-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-green-700",children:P.deliveredOrders}),e.jsx("p",{className:"text-xs text-green-600",children:"ŸÖŸÉÿ™ŸÖŸÑ"})]}),e.jsxs(le,{to:"/owner/orders?status=cancelled",className:"text-center p-3 bg-red-50 rounded-xl hover:bg-red-100 transition",children:[e.jsx(Ds,{className:"w-6 h-6 text-red-500 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-red-700",children:P.cancelledOrders}),e.jsx("p",{className:"text-xs text-red-600",children:"ŸÖŸÑÿ∫Ÿä"})]})]})})]}),$.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"üèÜ ÿßŸÑÿ£ŸÉÿ´ÿ± ŸÖÿ®ŸäÿπÿßŸã"}),e.jsx(le,{to:"/owner/menu",className:"text-amber-600 text-sm font-semibold",children:"ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ ‚Üê"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:$.map((F,te)=>e.jsxs("div",{className:`flex items-center gap-3 p-4 ${te!==$.length-1?"border-b":""}`,children:[e.jsx("span",{className:"text-2xl w-8",children:te===0?"ü•á":te===1?"ü•à":te===2?"ü•â":`#${te+1}`}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-semibold text-gray-900",children:F.name})}),e.jsxs("div",{className:"bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-sm font-bold",children:[F.count," ŸÖÿ®Ÿäÿπÿßÿ™"]})]},te))})]}),k.length>0&&e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"üì¶ ÿ¢ÿÆÿ± ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx(le,{to:"/owner/orders",className:"text-blue-600 text-sm font-semibold",children:"ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ ‚Üê"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:k.map((F,te)=>{var Y,K,me,de;const Ne=O(F.status),ee=Ne.icon;return e.jsxs(le,{to:"/owner/orders",className:`flex items-center gap-3 p-4 hover:bg-gray-50 transition ${te!==k.length-1?"border-b":""}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${Ne.color}`,children:e.jsx(ee,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[((Y=F.items)==null?void 0:Y.length)||0," ÿ£ÿµŸÜÿßŸÅ"]}),e.jsx("p",{className:"text-xs text-gray-500",children:((me=(K=F.createdAt)==null?void 0:K.toDate)==null?void 0:me.call(K).toLocaleDateString("ar-SA"))||""})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-green-600",children:[(de=F.subtotal)==null?void 0:de.toFixed(0)," ÿ±.ÿ≥"]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Ne.color}`,children:Ne.label})]})]},F.id)})})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"üõ†Ô∏è ÿ£ÿØŸàÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs(le,{to:"/owner/edit#hiring",className:`flex items-center gap-3 bg-white rounded-2xl shadow p-4 border ${r!=null&&r.isHiring?"border-purple-300 bg-purple-50":"border-gray-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r!=null&&r.isHiring?"bg-purple-500":"bg-gray-200"}`,children:e.jsx(qt,{className:`w-5 h-5 ${r!=null&&r.isHiring?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"ÿ™Ÿàÿ∏ŸäŸÅ ÿπÿßŸÖŸÑÿßÿ™"}),e.jsx("p",{className:"text-xs text-gray-500",children:r!=null&&r.isHiring?"‚úì ÿ•ÿπŸÑÿßŸÜ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ ŸÖŸÅÿπŸëŸÑ":"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿ∑ÿ®ÿÆ"})]})]}),e.jsxs(le,{to:"/owner/edit#bank",className:`flex items-center gap-3 bg-white rounded-2xl shadow p-4 border ${r!=null&&r.bankName?"border-green-300 bg-green-50":"border-gray-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r!=null&&r.bankName?"bg-green-500":"bg-gray-200"}`,children:e.jsx(js,{className:`w-5 h-5 ${r!=null&&r.bankName?"text-white":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"}),e.jsx("p",{className:"text-xs text-gray-500",children:r!=null&&r.bankName?`‚úì ${r.bankName}`:"ÿ£ÿ∂ŸÅ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ®"})]})]}),e.jsxs(le,{to:"/owner/packages",className:"flex items-center gap-3 bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl shadow p-4 border border-amber-200",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center",children:e.jsx(ts,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-amber-700",children:"ÿ®ÿßŸÇÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-amber-600",children:"üëë ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÖŸäÿ≤ÿ©"}),x!==null&&e.jsx("span",{className:`px-2 py-0.5 rounded-full ${A?"bg-red-100 text-red-600":Q?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:A?"ŸÖŸÜÿ™ŸáŸäÿ©":`${x} ŸäŸàŸÖ`})]})]})]}),e.jsxs(le,{to:`/menu?restaurant=${s==null?void 0:s.uid}`,className:"flex items-center gap-3 bg-white rounded-2xl shadow p-4 border border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-500 rounded-xl flex items-center justify-center",children:e.jsx(ji,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑŸÖÿ™ÿ¨ÿ±"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿ¥ÿßŸáÿØ ŸÖÿ™ÿ¨ÿ±ŸÉ ŸÉŸÖÿß Ÿäÿ±ÿßŸá ÿßŸÑÿπŸÖŸÑÿßÿ°"})]})]})]})]}),e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Oe,{className:"w-5 h-5 text-amber-600"}),e.jsx("h3",{className:"font-bold text-amber-800",children:"üìã ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ŸÜŸàÿπ ÿßŸÑÿ®ÿßŸÇÿ©"}),e.jsxs("span",{className:"bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1",children:[e.jsx(ts,{className:"w-4 h-4"}),"ŸÖŸÖŸäÿ≤ÿ©"]})]}),(r==null?void 0:r.packageSubscribedAt)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ"}),e.jsx("span",{className:"text-gray-900 font-medium",children:((ne=(W=(V=r.packageSubscribedAt)==null?void 0:V.toDate)==null?void 0:W.call(V))==null?void 0:ne.toLocaleDateString("ar-SA"))||"-"})]}),(r==null?void 0:r.packageExpiresAt)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ°"}),e.jsx("span",{className:`font-medium ${A?"text-red-600":Q?"text-yellow-600":"text-gray-900"}`,children:((he=(fe=(re=r.packageExpiresAt)==null?void 0:re.toDate)==null?void 0:fe.call(re))==null?void 0:he.toLocaleDateString("ar-SA"))||"-"})]}),x!==null&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑÿ£ŸäÿßŸÖ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©"}),e.jsx("span",{className:`text-lg font-bold ${A?"text-red-600":Q?"text-yellow-600":"text-green-600"}`,children:A?"ŸÖŸÜÿ™ŸáŸäÿ©":`${x} ŸäŸàŸÖ`})]})]}),(A||Q)&&e.jsx(le,{to:"/owner/packages",className:"mt-4 block w-full text-center bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold py-3 rounded-xl hover:from-amber-600 hover:to-orange-600 transition",children:"üîÑ ÿ™ÿ¨ÿØŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿßŸÑÿ¢ŸÜ"})]})}),(r==null?void 0:r.bankName)&&e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(js,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-bold text-green-800",children:"‚úÖ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä ŸÖŸÅÿπŸëŸÑ"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"ÿßŸÑÿ®ŸÜŸÉ:"})," ",r.bankName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"ÿßÿ≥ŸÖ ÿßŸÑÿ≠ÿ≥ÿßÿ®:"})," ",r.bankAccountName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"ÿ±ŸÇŸÖ ÿßŸÑÿ¢Ÿäÿ®ÿßŸÜ:"})," ",r.bankAccountNumber]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"üí° Ÿäÿ∏Ÿáÿ± ŸÑŸÑÿπŸÖŸÑÿßÿ° ÿπŸÜÿØ ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ®ŸÜŸÉŸä"})]})})]}):e.jsxs("div",{className:"space-y-6 pb-20",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-50 rounded-2xl p-4 border-2 border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-xl flex items-center justify-center",children:e.jsx(Oe,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-700",children:"üì¶ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©"})]})]}),e.jsx(le,{to:"/owner/packages",className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-2 rounded-xl text-sm font-bold hover:shadow-lg transition",children:"ÿ™ÿ±ŸÇŸäÿ© ‚ú®"})]})}),r!=null&&r.commercialLicenseUrl?e.jsx("div",{className:`rounded-2xl p-4 border-2 ${r.licenseStatus==="approved"?"bg-green-50 border-green-200":r.licenseStatus==="rejected"?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${r.licenseStatus==="approved"?"bg-green-500":r.licenseStatus==="rejected"?"bg-red-500":"bg-yellow-500"}`,children:e.jsx(us,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:`font-bold ${r.licenseStatus==="approved"?"text-green-700":r.licenseStatus==="rejected"?"text-red-700":"text-yellow-700"}`,children:[r.licenseStatus==="approved"&&"‚úÖ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ŸÖŸèÿπÿ™ŸÖÿØ",r.licenseStatus==="rejected"&&"‚ùå ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ŸÖÿ±ŸÅŸàÿ∂",(!r.licenseStatus||r.licenseStatus==="pending")&&"‚è≥ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"]}),r.licenseStatus==="rejected"&&r.licenseNotes&&e.jsx("p",{className:"text-sm text-red-600",children:r.licenseNotes})]}),r.licenseStatus==="rejected"&&e.jsx(le,{to:"/owner/edit",className:"text-red-600 text-sm font-bold underline",children:"ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ±ŸÅÿπ"})]})}):e.jsx(le,{to:"/owner/edit",className:"block bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200 rounded-2xl p-4 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(us,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-orange-700",children:"üìÑ ÿßÿ±ŸÅÿπ ÿ™ÿ±ÿÆŸäÿµŸÉ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä"}),e.jsx("p",{className:"text-sm text-orange-600",children:"ŸÑÿ™ŸÅÿπŸäŸÑ ŸÖÿ™ÿ¨ÿ±ŸÉ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ"})]})]})}),(r==null?void 0:r.points)&&e.jsxs("div",{className:`rounded-2xl p-4 border-2 ${r.points.isSuspended?"bg-red-50 border-red-300":r.points.currentPoints<hs.WARNING_THRESHOLD?"bg-amber-50 border-amber-300":"bg-sky-50 border-sky-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r.points.isSuspended?"bg-red-500":r.points.currentPoints<hs.WARNING_THRESHOLD?"bg-amber-500":"bg-sky-500"}`,children:e.jsx(us,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:`font-bold ${r.points.isSuspended?"text-red-700":r.points.currentPoints<hs.WARNING_THRESHOLD?"text-amber-700":"text-sky-700"}`,children:r.points.isSuspended?"‚õî ÿ≠ÿ≥ÿßÿ®ŸÉ ŸÖŸàŸÇŸàŸÅ!":"üõ°Ô∏è ÿ±ÿµŸäÿØ ÿßŸÑŸÜŸÇÿßÿ∑"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`text-3xl font-bold ${r.points.isSuspended?"text-red-600":r.points.currentPoints<hs.WARNING_THRESHOLD?"text-amber-600":"text-sky-600"}`,children:r.points.currentPoints}),e.jsxs("div",{className:"text-sm text-gray-500",children:["/ ",hs.STARTING_POINTS," ŸÜŸÇÿ∑ÿ©"]})]}),e.jsx("div",{className:"flex-1 max-w-[150px] mr-4",children:e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${r.points.isSuspended?"bg-red-500":r.points.currentPoints<hs.WARNING_THRESHOLD?"bg-amber-500":"bg-sky-500"}`,style:{width:`${Math.min(100,r.points.currentPoints)}%`}})})})]}),r.points.isSuspended&&e.jsxs("div",{className:"mt-3 bg-red-100 rounded-xl p-3",children:[e.jsx("p",{className:"text-sm text-red-700",children:"‚õî ÿ≠ÿ≥ÿßÿ®ŸÉ ŸÖŸàŸÇŸàŸÅ ÿ®ÿ≥ÿ®ÿ® ÿßŸÜÿÆŸÅÿßÿ∂ ÿßŸÑŸÜŸÇÿßÿ∑. ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä ŸÑÿ•ÿπÿßÿØÿ© ÿ™ŸÅÿπŸäŸÑŸá."}),e.jsx(le,{to:"/support",className:"inline-block mt-2 text-red-600 font-bold underline text-sm",children:"ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ‚Üê"})]}),!r.points.isSuspended&&r.points.currentPoints<hs.WARNING_THRESHOLD&&e.jsx("div",{className:"mt-3 bg-amber-100 rounded-xl p-3",children:e.jsx("p",{className:"text-sm text-amber-700",children:"‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá: ŸÜŸÇÿßÿ∑ŸÉ ŸÖŸÜÿÆŸÅÿ∂ÿ©! ÿ≠ÿßŸÅÿ∏ ÿπŸÑŸâ ÿ¨ŸàÿØÿ© ÿßŸÑÿÆÿØŸÖÿ© ŸÑÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ•ŸäŸÇÿßŸÅ."})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-4 border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx(ns,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"font-bold text-green-700",children:"üí∞ ŸÖŸÑÿÆÿµ ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:P.totalRevenue.toFixed(0)}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™ (ÿ±.ÿ≥)"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:C.toFixed(0)}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÿµÿßŸÅŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠ (ÿ±.ÿ≥)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"* ÿ®ÿπÿØ ÿÆÿµŸÖ ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ© (3.75 ÿ±.ÿ≥ ŸÑŸÉŸÑ ÿ∑ŸÑÿ®)"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 rounded-3xl shadow-2xl p-6 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white rounded-full -translate-y-1/2 translate-x-1/2"})}),e.jsxs("div",{className:"relative z-10 text-center py-6",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ts,{className:"w-10 h-10 text-yellow-300"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"üåü ÿßÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÖŸäÿ≤ÿ©"}),e.jsx("p",{className:"text-white/80 mb-4",children:"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ŸÖÿπ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÖŸÅÿµŸëŸÑÿ© ŸàŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ©!"}),e.jsxs(le,{to:"/owner/packages",className:"inline-flex items-center gap-2 bg-white text-amber-600 font-bold px-6 py-3 rounded-xl hover:bg-yellow-50 transition shadow-lg",children:[e.jsx(is,{className:"w-5 h-5"}),"ÿßŸÉÿ™ÿ¥ŸÅ ÿßŸÑÿ®ÿßŸÇÿßÿ™ ÿßŸÑÿ¢ŸÜ"]})]})]}),!(r!=null&&r.bankName)&&e.jsx(le,{to:"/owner/edit#bank",className:"block bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-2xl p-4 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(js,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-red-700",children:"‚ö†Ô∏è ÿ£ÿ∂ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä!"}),e.jsx("p",{className:"text-sm text-red-600",children:"ŸÑÿ™ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑÿßÿ™ ŸÖŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ°"})]})]})}),P.pendingOrders>0&&e.jsx(le,{to:"/owner/orders",className:"block bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-2xl p-4 hover:shadow-lg transition animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-bold text-yellow-700",children:["üîî ŸÑÿØŸäŸÉ ",P.pendingOrders," ÿ∑ŸÑÿ® ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ!"]}),e.jsx("p",{className:"text-sm text-yellow-600",children:"ÿßÿ∂ÿ∫ÿ∑ ŸÑŸÑÿ∞Ÿáÿßÿ® ÿ•ŸÑŸâ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(le,{to:"/owner/packages",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-5 ring-2 ring-amber-300 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 py-1.5 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white text-sm font-bold",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:"ÿßŸÉÿ™ÿ¥ŸÅ ÿßŸÑÿ®ÿßŸÇÿßÿ™"}),e.jsx(is,{className:"w-4 h-4"})]})}),e.jsx("div",{className:"h-6"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ts,{className:"w-8 h-8 text-amber-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿ®ÿßŸÇÿßÿ™ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ©!"})]}),e.jsxs(le,{to:"/owner/menu",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-yellow-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(at,{className:"w-8 h-8 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ•ÿ∂ÿßŸÅÿ© Ÿàÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ£ÿµŸÜÿßŸÅ ŸàÿßŸÑŸàÿ¨ÿ®ÿßÿ™."})]}),e.jsxs(le,{to:"/owner/orders",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-green-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ha,{className:"w-8 h-8 text-green-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ŸÇÿ®ŸàŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ Ÿàÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÖŸÜÿØŸàÿ®."}),P.pendingOrders>0&&e.jsxs("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold mt-2 inline-block",children:[P.pendingOrders," ÿ¨ÿØŸäÿØ!"]})]}),e.jsxs(le,{to:"/owner/edit",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-blue-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ha,{className:"w-8 h-8 text-blue-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ™ÿ¨ÿ±."})]}),e.jsxs(le,{to:"/owner/wallet",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-emerald-50 to-white p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ns,{className:"w-8 h-8 text-emerald-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ŸÖÿ≠ŸÅÿ∏ÿ™Ÿä"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™ ŸàÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠."})]}),e.jsxs(le,{to:"/owner/offers",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-pink-50 to-white p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -left-1 bg-gradient-to-r from-pink-500 to-red-500 text-white text-xs font-bold px-3 py-1 rounded-br-xl",children:"ÿ¨ÿØŸäÿØ ‚ú®"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Os,{className:"w-8 h-8 text-pink-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑÿÆÿßÿµÿ©"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ£ÿ∂ŸÅ ÿÆÿµŸàŸÖÿßÿ™ Ÿàÿπÿ±Ÿàÿ∂ ŸÑÿ¨ÿ∞ÿ® ÿßŸÑÿπŸÖŸÑÿßÿ°."})]}),Qt()&&e.jsxs(le,{to:"/owner/offers?type=ramadan",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-purple-900 via-purple-800 to-emerald-900 p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -left-1 bg-gradient-to-r from-amber-400 to-amber-500 text-purple-900 text-xs font-bold px-3 py-1 rounded-br-xl",children:"üåô ÿ±ŸÖÿ∂ÿßŸÜ"}),e.jsx("div",{className:"absolute top-2 right-2 text-2xl animate-pulse",children:"üåô"}),e.jsx("div",{className:"absolute bottom-2 left-2 text-xl opacity-50",children:"‚ú®"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:"üèòÔ∏è"}),e.jsx("h3",{className:"text-lg font-extrabold text-white",children:"ÿπÿ±Ÿàÿ∂ ÿ±ŸÖÿ∂ÿßŸÜ"})]}),e.jsx("p",{className:"text-sm text-purple-200",children:"ÿ£ÿ∂ŸÅ ÿ®ÿßŸÇÿßÿ™ ÿ•ŸÅÿ∑ÿßÿ± Ÿàÿ≥ÿ≠Ÿàÿ± Ÿàÿπÿ±Ÿàÿ∂ ÿÆÿßÿµÿ©"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("span",{className:"bg-amber-400/20 text-amber-300 text-xs px-2 py-1 rounded-full",children:"ÿ®ÿßŸÇÿ© ÿ•ŸÅÿ∑ÿßÿ±"}),e.jsx("span",{className:"bg-purple-400/20 text-purple-300 text-xs px-2 py-1 rounded-full",children:"ÿ®ÿßŸÇÿ© ÿ≥ÿ≠Ÿàÿ±"}),e.jsx("span",{className:"bg-emerald-400/20 text-emerald-300 text-xs px-2 py-1 rounded-full",children:"ÿπÿ±ÿ∂ ÿπÿßÿ¶ŸÑŸä"})]})]}),e.jsxs(le,{to:"/owner/stories",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-purple-50 to-white p-5 relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-1 -left-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-3 py-1 rounded-br-xl",children:"ÿ¨ÿØŸäÿØ ‚ú®"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Nt,{className:"w-8 h-8 text-purple-500"}),e.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"ÿ≥ÿ™Ÿàÿ±Ÿä ÿßŸÑÿ£ÿ≥ÿ±ÿ©"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ¥ÿßÿ±ŸÉ ÿ∑ÿ®ÿÆ ÿßŸÑŸäŸàŸÖ Ÿàÿπÿ±Ÿàÿ∂ŸÉ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ°."})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ts,{className:"w-6 h-6 text-amber-400"}),e.jsx("h3",{className:"text-lg font-bold",children:"üöÄ ŸÖÿ≤ÿßŸäÿß ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÖŸäÿ≤ÿ©"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(Us,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÖÿßŸÑŸäÿ© ŸÖŸÅÿµŸëŸÑÿ©"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(ls,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{children:"ÿ£ŸÉÿ´ÿ± ÿßŸÑÿ£ÿµŸÜÿßŸÅ ŸÖÿ®ŸäÿπÿßŸã"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(Ls,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{children:"ÿ•ÿπŸÑÿßŸÜÿßÿ™ ŸÖŸÖŸàŸÑÿ© ŸÖÿ¨ÿßŸÜŸäÿ©"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(us,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{children:"ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©"})]})]}),e.jsx(le,{to:"/owner/packages",className:"block w-full text-center bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold py-3 rounded-xl hover:from-amber-600 hover:to-orange-600 transition",children:"üöÄ ÿßÿ¥ÿ™ÿ±ŸÉ ÿßŸÑÿ¢ŸÜ"})]})]})},Xc=({kind:s,message:a,onClose:n})=>{const d=s==="success"?"bg-green-600":s==="error"?"bg-rose-600":s==="warning"?"bg-amber-500":"bg-slate-800";return t.useEffect(()=>{const i=setTimeout(n,2500);return()=>clearTimeout(i)},[n]),e.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${d}`,children:a})},Aa=()=>({name:"",desc:"",price:0,available:!0,file:null,discountPercent:0,discountExpiresAt:""});async function Tr(s,a=900,n=.8){try{const d=await createImageBitmap(s),i=Math.min(1,a/d.width),y=Math.round(d.width*i),r=Math.round(d.height*i),D=document.createElement("canvas");D.width=y,D.height=r,D.getContext("2d").drawImage(d,0,0,y,r);const B=s.type.includes("png")?"image/png":"image/jpeg";return await new Promise(N=>D.toBlob(T=>N(T),B,n))}catch{return s}}const Zc=()=>{const{user:s}=Ee(),a=Ps(),[n,d]=t.useState([]),[i,y]=t.useState(!0),[r,D]=t.useState(Aa()),[E,B]=t.useState(!1),[P,N]=t.useState(null),[T,j]=t.useState(Aa()),[f,U]=t.useState(!1),g=t.useRef(null),[w,M]=t.useState(null),b=(O,q)=>M({kind:O,message:q}),h=ba(Cs),k=t.useRef(null),L=async()=>{if(!s)return;y(!0);const O=be(se(S,"menuItems"),je("ownerId","==",s.uid)),q=await pe(O);d(q.docs.map(m=>({id:m.id,...m.data()}))),y(!1)};t.useEffect(()=>{L()},[s]);const $=async O=>{if(O.preventDefault(),!s){b("warning","‚ö†Ô∏è ŸÑÿßÿ≤ŸÖ ÿ™ÿ≥ÿ¨ŸÑ ÿØÿÆŸàŸÑ ÿ£ŸàŸÑ");return}const q=Number(r.price||0);if(!r.name.trim()){b("warning","‚ö†Ô∏è ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖ ÿßŸÑÿµŸÜŸÅ");return}if(!Number.isFinite(q)||q<=0){b("warning","‚ö†Ô∏è ÿ£ÿØÿÆŸÑ ÿ≥ÿπÿ± ÿµÿßŸÑÿ≠");return}B(!0);const m="temp_"+Date.now(),p=r.file?URL.createObjectURL(r.file):void 0,I={_tempId:m,_optimistic:!0,_progress:r.file?1:100,name:r.name,desc:r.desc||"",price:q,imageUrl:p,available:r.available??!0,ownerId:s.uid};d(x=>[I,...x]);try{let x;if(r.file){const u=await Tr(r.file),C=r.file.name.replace(/\s+/g,"_").slice(-60),V=`menuImages/${s.uid}_${Date.now()}_${C}`,W=ks(h,V),ne=Tt(W,u,{contentType:r.file.type||"image/jpeg"});await new Promise((re,fe)=>{ne.on("state_changed",he=>{const F=Math.round(he.bytesTransferred/he.totalBytes*100);d(te=>te.map(Ne=>Ne._tempId===m?{...Ne,_progress:F}:Ne))},fe,async()=>{const he=await Ss(ne.snapshot.ref);x=`${he}${he.includes("?")?"&":"?"}v=${Date.now()}`,re()})})}const Q={name:I.name,desc:I.desc,price:q,imageUrl:x||"",available:I.available,ownerId:s.uid,...I.categoryId?{categoryId:I.categoryId}:{},...r.discountPercent&&r.discountPercent>0?{discountPercent:r.discountPercent}:{},...r.discountExpiresAt?{discountExpiresAt:new Date(r.discountExpiresAt)}:{}},A=await Te(se(S,"menuItems"),Q);d(u=>u.map(C=>C._tempId===m?{...C,id:A.id,imageUrl:x||C.imageUrl,_optimistic:!1,_progress:100}:C)),b("success","‚úÖ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿµŸÜŸÅ ÿ®ŸÜÿ¨ÿßÿ≠")}catch(x){d(Q=>Q.filter(A=>A._tempId!==m)),b("error",`‚ùå ŸÅÿ¥ŸÑ ÿ≠ŸÅÿ∏ ÿßŸÑÿµŸÜŸÅ: ${(x==null?void 0:x.message)||x}`)}finally{B(!1),D(Aa()),k.current&&(k.current.value=""),p&&URL.revokeObjectURL(p)}},v=async(O,q)=>{if(O){d(m=>m.map(p=>p.id===O?{...p,available:!q}:p));try{await xe(J(S,"menuItems",O),{available:!q}),b("success","ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿßŸÑÿ©")}catch{d(m=>m.map(p=>p.id===O?{...p,available:!!q}:p)),b("error","ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±. ÿ£ÿπÿØ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©.")}}},R=async O=>{if(!O||!await a.confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿµŸÜŸÅ ŸÜŸáÿßÿ¶ŸäŸãÿßÿü",{dangerous:!0,title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿµŸÜŸÅ"}))return;const m=n;d(p=>p.filter(I=>I.id!==O));try{await As(J(S,"menuItems",O)),b("success","ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ")}catch{d(m),b("error","ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ. ÿ£ÿπÿØ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©.")}},c=O=>{N(O.id||null),j({...O,file:null})},o=()=>{N(null),j(Aa()),g.current&&(g.current.value="")},_=async O=>{if(O.preventDefault(),!s||!P)return;const q=Number(T.price||0);if(!T.name.trim()){b("warning","‚ö†Ô∏è ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖ ÿßŸÑÿµŸÜŸÅ");return}if(!Number.isFinite(q)||q<=0){b("warning","‚ö†Ô∏è ÿ£ÿØÿÆŸÑ ÿ≥ÿπÿ± ÿµÿßŸÑÿ≠");return}U(!0);const m=n;d(p=>p.map(I=>I.id===P?{...I,name:T.name,desc:T.desc,price:q,available:T.available}:I));try{let p=T.imageUrl;if(T.file){const I=await Tr(T.file),x=T.file.name.replace(/\s+/g,"_").slice(-60),Q=`menuImages/${s.uid}_${Date.now()}_${x}`,A=ks(h,Q),u=Tt(A,I,{contentType:T.file.type||"image/jpeg"});await new Promise((C,V)=>{u.on("state_changed",null,V,async()=>{const W=await Ss(u.snapshot.ref);p=`${W}${W.includes("?")?"&":"?"}v=${Date.now()}`,C()})})}await xe(J(S,"menuItems",P),{name:T.name,desc:T.desc||"",price:q,available:T.available,...p?{imageUrl:p}:{},discountPercent:T.discountPercent||0,...T.discountExpiresAt?{discountExpiresAt:new Date(T.discountExpiresAt)}:{discountExpiresAt:null}}),p&&d(I=>I.map(x=>x.id===P?{...x,imageUrl:p}:x)),b("success","‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿµŸÜŸÅ ÿ®ŸÜÿ¨ÿßÿ≠"),o()}catch(p){d(m),b("error",`‚ùå ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´: ${(p==null?void 0:p.message)||p}`)}finally{U(!1)}};return i?e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[e.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(O=>e.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},O))})]}):e.jsxs(e.Fragment,{children:[w&&e.jsx(Xc,{kind:w.kind,message:w.message,onClose:()=>M(null)}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("form",{onSubmit:$,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[e.jsx("h2",{className:"text-lg font-bold",children:"ÿ•ÿ∂ÿßŸÅÿ© ÿµŸÜŸÅ"}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑÿµŸÜŸÅ",value:r.name,onChange:O=>D({...r,name:O.target.value})}),e.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:"ÿßŸÑŸàÿµŸÅ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)",value:r.desc,onChange:O=>D({...r,desc:O.target.value})}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ÿßŸÑÿ≥ÿπÿ±",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(r.price)?r.price:0,onChange:O=>D({...r,price:Number(O.target.value)})}),e.jsxs("div",{className:"border border-dashed border-amber-300 rounded-xl p-4 bg-amber-50/50 space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold text-amber-700 flex items-center gap-2",children:"üè∑Ô∏è ÿ•ÿ∂ÿßŸÅÿ© ÿÆÿµŸÖ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿÆÿµŸÖ %"}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ŸÖÿ´ÿßŸÑ: 20",type:"number",min:0,max:100,value:r.discountPercent||"",onChange:O=>D({...r,discountPercent:Number(O.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"ŸäŸÜÿ™ŸáŸä ŸÅŸä"}),e.jsx("input",{className:"w-full border rounded-xl p-3",type:"date",value:r.discountExpiresAt?typeof r.discountExpiresAt=="string"?r.discountExpiresAt:new Date(r.discountExpiresAt).toISOString().split("T")[0]:"",onChange:O=>D({...r,discountExpiresAt:O.target.value})})]})]}),r.discountPercent&&r.discountPercent>0&&e.jsxs("div",{className:"text-sm bg-green-100 text-green-700 p-2 rounded-lg",children:["ÿßŸÑÿ≥ÿπÿ± ÿ®ÿπÿØ ÿßŸÑÿÆÿµŸÖ: ",e.jsxs("strong",{children:[(r.price-r.price*(r.discountPercent/100)).toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"line-through text-gray-400 mr-2",children:[r.price.toFixed(2)," ÿ±.ÿ≥"]})]})]}),e.jsx("input",{ref:k,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:O=>{var q;return D({...r,file:((q=O.target.files)==null?void 0:q[0])||null})}}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:r.available,onChange:O=>D({...r,available:O.target.checked})}),"ŸÖÿ™ÿßÿ≠"]}),e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:E,children:E?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏‚Ä¶":"ÿ≠ŸÅÿ∏"})]}),e.jsxs("div",{className:"space-y-3",children:[n.map(O=>e.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:P===O.id?e.jsxs("form",{onSubmit:_,className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("img",{src:T.file?URL.createObjectURL(T.file):T.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:q=>{q.currentTarget.style.display="none"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸàÿ±ÿ©"}),e.jsx("input",{ref:g,type:"file",accept:"image/*",className:"w-full text-sm border rounded-lg p-2",onChange:q=>{var m;return j({...T,file:((m=q.target.files)==null?void 0:m[0])||null})}})]})]}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑÿµŸÜŸÅ",value:T.name,onChange:q=>j({...T,name:q.target.value})}),e.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:"ÿßŸÑŸàÿµŸÅ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)",value:T.desc||"",onChange:q=>j({...T,desc:q.target.value})}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ÿßŸÑÿ≥ÿπÿ±",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(T.price)?T.price:0,onChange:q=>j({...T,price:Number(q.target.value)})}),e.jsxs("div",{className:"border border-dashed border-amber-300 rounded-xl p-4 bg-amber-50/50 space-y-3",children:[e.jsx("h3",{className:"text-sm font-bold text-amber-700 flex items-center gap-2",children:"üè∑Ô∏è ÿßŸÑÿÆÿµŸÖ"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿÆÿµŸÖ %"}),e.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"ŸÖÿ´ÿßŸÑ: 20",type:"number",min:0,max:100,value:T.discountPercent||"",onChange:q=>j({...T,discountPercent:Number(q.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"ŸäŸÜÿ™ŸáŸä ŸÅŸä"}),e.jsx("input",{className:"w-full border rounded-xl p-3",type:"date",value:T.discountExpiresAt?typeof T.discountExpiresAt=="string"?T.discountExpiresAt:new Date(T.discountExpiresAt).toISOString().split("T")[0]:"",onChange:q=>j({...T,discountExpiresAt:q.target.value})})]})]}),T.discountPercent&&T.discountPercent>0&&e.jsxs("div",{className:"text-sm bg-green-100 text-green-700 p-2 rounded-lg",children:["ÿßŸÑÿ≥ÿπÿ± ÿ®ÿπÿØ ÿßŸÑÿÆÿµŸÖ: ",e.jsxs("strong",{children:[(T.price-T.price*(T.discountPercent/100)).toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"line-through text-gray-400 mr-2",children:[T.price.toFixed(2)," ÿ±.ÿ≥"]})]}),T.discountPercent&&T.discountPercent>0&&e.jsx("button",{type:"button",onClick:()=>j({...T,discountPercent:0,discountExpiresAt:""}),className:"text-xs text-red-500 hover:text-red-700",children:"‚ùå ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿÆÿµŸÖ"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:T.available,onChange:q=>j({...T,available:q.target.checked})}),"ŸÖÿ™ÿßÿ≠"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-2 rounded-xl bg-green-600 text-white disabled:opacity-60",children:f?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏‚Ä¶":"üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™"}),e.jsx("button",{type:"button",onClick:o,disabled:f,className:"px-4 py-2 rounded-xl bg-gray-400 text-white disabled:opacity-60",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}):e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:O.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:q=>{q.currentTarget.style.display="none"}}),O._optimistic&&e.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:e.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${O._progress||1}%`}})})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold",children:O.name}),O.desc&&e.jsx("div",{className:"text-sm text-gray-600",children:O.desc}),(()=>{var I,x,Q,A,u,C;const q=O.discountPercent&&O.discountPercent>0,m=((x=(I=O.discountExpiresAt)==null?void 0:I.toDate)==null?void 0:x.call(I))||(O.discountExpiresAt?new Date(O.discountExpiresAt):null),p=!m||m>new Date;return q&&p?e.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"font-bold text-green-600",children:[(O.price-O.price*((O.discountPercent||0)/100)).toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"text-sm text-gray-400 line-through",children:[(A=(Q=O.price)==null?void 0:Q.toFixed)==null?void 0:A.call(Q,2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:["ÿÆÿµŸÖ ",O.discountPercent,"%"]})]}):e.jsxs("div",{className:"font-semibold mt-1",children:[(C=(u=O.price)==null?void 0:u.toFixed)==null?void 0:C.call(u,2)," ÿ±.ÿ≥"]})})(),O._optimistic&&e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"Ÿäÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏‚Ä¶"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{onClick:()=>c(O),disabled:!!O._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-amber-500 text-white disabled:opacity-50",children:"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ"}),e.jsx("button",{onClick:()=>v(O.id,O.available),disabled:!!O._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:O.available?"ÿ™ÿπÿ∑ŸäŸÑ":"ÿ™ŸÅÿπŸäŸÑ"}),e.jsx("button",{onClick:()=>R(O.id),disabled:!!O._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:"ÿ≠ÿ∞ŸÅ"})]})]})},O.id||O._tempId)),n.length===0&&e.jsx("div",{className:"text-gray-600",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿµŸÜÿßŸÅ ÿ®ÿπÿØ."})]})]})]})},Er=s=>({pending:"‚è≥ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",accepted:"‚úÖ ÿ™ŸÖ ÿßŸÑŸÇÿ®ŸàŸÑ",preparing:"üë®‚Äçüç≥ ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",ready:"üì¶ ÿ¨ÿßŸáÿ≤",out_for_delivery:"üöö ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",delivered:"üéâ ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",cancelled:"‚ùå ŸÖŸÑÿ∫Ÿä"})[s]||s,ed=s=>{switch(s){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},sd=()=>{const{user:s}=Ee(),a=fs(),n=ze(),[d,i]=t.useState([]),[y,r]=t.useState(null),[D,E]=t.useState({}),[B,P]=t.useState(null),[N,T]=t.useState(null);t.useRef(null);const j=t.useMemo(()=>(s==null?void 0:s.uid)??null,[s]);t.useEffect(()=>{if(!j)return;r(null);const b=xs(se(S,"orders"),h=>{const L=h.docs.map($=>({id:$.id,...$.data()})).filter($=>{var c,o;const v=$.restaurantId===j,R=((o=(c=$==null?void 0:$.items)==null?void 0:c[0])==null?void 0:o.ownerId)===j;return v||R});L.sort(($,v)=>{var o,_,O,q;const R=((_=(o=$.createdAt)==null?void 0:o.toMillis)==null?void 0:_.call(o))??0;return(((q=(O=v.createdAt)==null?void 0:O.toMillis)==null?void 0:q.call(O))??0)-R}),i(L),r(null)},h=>{console.error("Firestore error:",h),r("ÿ≠ÿØÿ´ÿ™ ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™.")});return()=>b()},[j]);const f=async(b,h,k)=>{const L={status:h,updatedAt:X()};if(h==="accepted"&&(k==null?void 0:k.deliveryType)==="delivery"){const $=D[b]||0;L.deliveryFee=$,L.total=(k.subtotal||0)+$}if(h==="cancelled"&&(L.cancelledAt=X(),L.cancelledBy="owner"),await xe(J(S,"orders",b),L),h==="cancelled"&&k){try{const{processOrderRefund:$,notifyRefundParties:v}=await Bs(async()=>{const{processOrderRefund:c,notifyRefundParties:o}=await import("./refundService-CHXob5M2.js");return{processOrderRefund:c,notifyRefundParties:o}},__vite__mapDeps([0,1,2,3,4])),R=await $({id:k.id||b,customerId:k.customerId,restaurantId:k.restaurantId||j||"",subtotal:k.subtotal,total:k.total,restaurantEarnings:k.restaurantEarnings,platformFee:k.platformFee,adminCommission:k.adminCommission,appEarnings:k.appEarnings,referredBy:k.referredBy,paymentMethod:k.paymentMethod});await v({id:k.id||b,customerId:k.customerId,restaurantId:k.restaurantId||j||"",subtotal:k.subtotal,total:k.total},R,"owner"),R.success&&n.success("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ® Ÿàÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ‚úÖ")}catch($){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä:",$),n.warning("ÿ™ŸÖ ÿßŸÑÿ•ŸÑÿ∫ÿßÿ° ŸÑŸÉŸÜ ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ≥ÿ™ÿ±ÿØÿßÿØ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä")}return}try{const{notifyOrderAccepted:$,notifyOrderPreparing:v,notifyOrderReady:R,notifyCourierOrderReady:c}=await Bs(async()=>{const{notifyOrderAccepted:O,notifyOrderPreparing:q,notifyOrderReady:m,notifyCourierOrderReady:p}=await Promise.resolve().then(()=>ga);return{notifyOrderAccepted:O,notifyOrderPreparing:q,notifyOrderReady:m,notifyCourierOrderReady:p}},void 0),o=k==null?void 0:k.customerId,_=(k==null?void 0:k.restaurantName)||"ÿßŸÑŸÖÿ∑ÿπŸÖ";if(o){if(h==="accepted")await $(o,b,_);else if(h==="preparing")await v(o,b,_);else if(h==="ready"&&(await R(o,b,_,(k==null?void 0:k.deliveryType)||"delivery"),(k==null?void 0:k.deliveryType)==="delivery"&&j)){const{collection:O,query:q,where:m,getDocs:p}=await Bs(async()=>{const{collection:A,query:u,where:C,getDocs:V}=await import("./vendor-firebase-DPNhE71o.js").then(W=>W.M);return{collection:A,query:u,where:C,getDocs:V}},[]),I=q(O(S,"hiringRequests"),m("restaurantId","==",j),m("status","==","accepted")),x=await p(I),Q=(k==null?void 0:k.address)||"ÿßŸÑÿπŸÖŸäŸÑ";for(const A of x.docs){const u=A.data().courierId;u&&await c(u,b,_,Q)}}}}catch($){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±:",$)}},U=async(b,h)=>{const k={stars:h.stars,comment:h.comment||void 0,createdAt:new Date};await xe(J(S,"orders",b),{"ratings.restaurantToCustomer":k,updatedAt:X()}),n.success("ÿ™ŸÖ ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿπŸÖŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠! ‚≠ê")},g=b=>{var h,k;return b.status==="delivered"&&!((k=(h=b.ratings)==null?void 0:h.restaurantToCustomer)!=null&&k.stars)},w=async(b,h)=>{if(h){T(b);try{const k=ks(yt,`orders/${b}/ready_${Date.now()}.jpg`);await bt(k,h);const L=await Ss(k);await xe(J(S,"orders",b),{readyPhotoUrl:L,readyPhotoAt:X(),updatedAt:X()}),n.success("ÿ™ŸÖ ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠! üì∏")}catch(k){console.error("Error uploading photo:",k),n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©")}finally{T(null)}}},M=(b,h)=>{var L;const k=(L=h.target.files)==null?void 0:L[0];k&&w(b,k)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"üìã ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),B&&e.jsx(Bl,{isOpen:B.isOpen,onClose:()=>P(null),onSubmit:async b=>{await U(B.orderId,b),P(null)},type:"customer",targetName:B.customerName,orderId:B.orderId}),y&&e.jsx("div",{className:"text-red-500 text-sm mb-2",children:y}),d.map(b=>{var h,k,L,$,v,R,c;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"font-bold text-lg",children:["ÿ∑ŸÑÿ® #",b.id.slice(-6),e.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(h=b.items)==null?void 0:h.map(o=>`${o.name}√ó${o.qty}`).join(" ‚Ä¢ ")})]}),e.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(L=(k=b.total)==null?void 0:k.toFixed)==null?void 0:L.call(k,2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"ÿßŸÑÿ≠ÿßŸÑÿ©:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${ed(b.status)}`,children:Er(b.status||"pending")})]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ:"})," ",b.address]}),b.location&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"üìç ŸÖŸàŸÇÿπ ÿßŸÑÿπŸÖŸäŸÑ:"}),e.jsx("iframe",{title:`map-${b.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${b.location.lat},${b.location.lng}&hl=ar&z=15&output=embed`})]}),b.status==="pending"&&b.deliveryType==="delivery"&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-800 mb-2",children:"üíµ ÿ≠ÿØÿØ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÇÿ®ŸÑ ÿßŸÑŸÇÿ®ŸàŸÑ:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:"ŸÖÿ´ÿßŸÑ: 10",value:D[b.id]||"",onChange:o=>E(_=>({..._,[b.id]:parseFloat(o.target.value)||0})),className:"flex-1 px-4 py-3 border-2 border-amber-300 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-lg font-bold text-center"}),e.jsx("span",{className:"text-amber-700 font-bold",children:"ÿ±.ÿ≥"})]}),e.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ™Ÿáÿß ŸÑŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ÿπŸÜÿØ ŸÇÿ®ŸàŸÑ ÿßŸÑÿ∑ŸÑÿ®"})]}),b.deliveryFee!==void 0&&b.deliveryFee>0&&e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ:"})," ",(v=($=b.deliveryFee)==null?void 0:$.toFixed)==null?void 0:v.call($,2)," ÿ±.ÿ≥"]}),["preparing","ready"].includes(b.status)&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Nt,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-bold text-purple-800",children:"üì∏ ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ¨ÿßŸáÿ≤"})]}),b.readyPhotoUrl?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:b.readyPhotoUrl,alt:"ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®",className:"w-full h-48 object-cover rounded-xl border-2 border-purple-300"}),e.jsxs("div",{className:"absolute top-2 left-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"}),"ÿ™ŸÖ ÿßŸÑÿ±ŸÅÿπ"]})]}),e.jsx("p",{className:"text-xs text-purple-600 text-center",children:"‚úÖ ÿ™ŸÖ ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ® - ŸäŸÖŸÉŸÜ ŸÑŸÑŸÖŸÜÿØŸàÿ® ÿßÿ≥ÿ™ŸÑÿßŸÖŸá ÿßŸÑÿ¢ŸÜ"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-purple-700",children:"‚ö†Ô∏è ŸäŸèÿ±ÿ¨Ÿâ ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ® ŸÇÿ®ŸÑ ÿ™ÿ≥ŸÑŸäŸÖŸá ŸÑŸÑŸÖŸÜÿØŸàÿ®"}),e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:o=>M(b.id,o),className:"hidden",id:`photo-${b.id}`}),e.jsx("label",{htmlFor:`photo-${b.id}`,className:`flex items-center justify-center gap-3 w-full py-4 rounded-xl cursor-pointer transition-all ${N===b.id?"bg-purple-200 cursor-wait":"bg-purple-500 hover:bg-purple-600 text-white"}`,children:N===b.id?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ±ŸÅÿπ..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold",children:"üì∏ ÿßŸÑÿ™ŸÇÿ∑ ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®"})]})})]})]}),b.readyPhotoUrl&&!["preparing","ready"].includes(b.status)&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(zt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®:"})]}),e.jsx("img",{src:b.readyPhotoUrl,alt:"ÿµŸàÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®",className:"w-full h-32 object-cover rounded-lg"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:[!b.courierId&&["pending","accepted","preparing","ready"].includes(b.status)&&e.jsxs("button",{onClick:()=>a(`/chat?orderId=${b.id}`),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gradient-to-r from-orange-500 to-amber-500 text-white hover:shadow-lg transition flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4"}),"ŸÖÿ≠ÿßÿØÿ´ÿ© ÿßŸÑÿπŸÖŸäŸÑ üí¨"]}),["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(o=>{const _=o==="accepted"&&b.status==="pending"&&b.deliveryType==="delivery",O=D[b.id]!==void 0&&D[b.id]>=0,q=_&&!O;return e.jsx("button",{onClick:()=>f(b.id,o,b),disabled:q,className:`px-4 py-2 rounded-xl text-sm font-semibold transition ${q?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:q?"ÿ≠ÿØÿØ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ ÿ£ŸàŸÑÿßŸã":"",children:Er(o)},o)})]}),g(b)&&e.jsxs("div",{className:"mt-4 bg-gradient-to-r from-sky-50 to-blue-50 border-2 border-sky-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ls,{className:"w-5 h-5 text-sky-500 fill-sky-500"}),e.jsx("span",{className:"font-bold text-sky-800",children:"ŸÇŸäŸëŸÖ ÿßŸÑÿπŸÖŸäŸÑ ‚≠ê"})]}),e.jsxs("button",{onClick:()=>P({isOpen:!0,orderId:b.id,customerName:"ÿßŸÑÿπŸÖŸäŸÑ"}),className:`w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-sky-300 
                           rounded-xl hover:bg-sky-50 transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ms,{className:"w-5 h-5 text-sky-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"ŸÇŸäŸëŸÖ ÿ™ÿπÿßŸÖŸÑ ÿßŸÑÿπŸÖŸäŸÑ"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(o=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-sky-400 transition"},o))})]})]}),((c=(R=b.ratings)==null?void 0:R.restaurantToCustomer)==null?void 0:c.stars)&&e.jsx("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"ÿ™ŸÇŸäŸäŸÖŸÉ ŸÑŸÑÿπŸÖŸäŸÑ:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(o=>e.jsx(ls,{className:`w-4 h-4 ${o<=b.ratings.restaurantToCustomer.stars?"text-sky-400 fill-sky-400":"text-gray-300"}`},o))})]})})]},b.id)}),d.length===0&&!y&&e.jsx("div",{className:"text-gray-400 text-center text-lg",children:"üö´ ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ≠ÿßŸÑŸäÿßŸã."})]})},td=[{value:"",label:"ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑŸÖÿ∑ÿ®ÿÆ"},{value:"traditional",label:"üçö ÿ£ŸÉŸÑÿßÿ™ ÿ¥ÿπÿ®Ÿäÿ©"},{value:"sweets",label:"üç∞ ÿ≠ŸÑŸàŸäÿßÿ™"},{value:"pastries",label:"ü•ß ŸÖÿπÿ¨ŸÜÿßÿ™"},{value:"grills",label:"üçñ ŸÖÿ¥ŸàŸäÿßÿ™"},{value:"healthy",label:"ü•ó ÿ£ŸÉŸÑ ÿµÿ≠Ÿä"},{value:"international",label:"üåç ÿ£ŸÉŸÑÿßÿ™ ÿπÿßŸÑŸÖŸäÿ©"}],ad=()=>{var v;const{user:s}=Ee(),a=ze(),[n,d]=t.useState({name:"",phone:"",city:"",location:"",logoUrl:"",isOpen:!0,allowDelivery:!0,allowPickup:!1,cuisineType:"",announcement:"",commercialLicenseUrl:"",licenseStatus:void 0,licenseNotes:"",bankName:"",bankAccountName:"",bankAccountNumber:"",isHiring:!1,hiringDescription:"",hiringContact:""}),[i,y]=t.useState(null),[r,D]=t.useState(""),[E,B]=t.useState(null),[P,N]=t.useState(""),T=t.useRef(null),[j,f]=t.useState(!0),[U,g]=t.useState(!1),w=t.useMemo(()=>!U&&!!s,[U,s]);t.useEffect(()=>{s&&(async()=>{try{const R=await Ce(J(S,"restaurants",s.uid));if(R.exists()){const c=R.data();let o={bankName:"",bankAccountName:"",bankAccountNumber:""};try{const _=await Ce(J(S,"restaurants",s.uid,"private","bankInfo"));if(_.exists()){const O=_.data();o={bankName:O.bankName??"",bankAccountName:O.bankAccountName??"",bankAccountNumber:O.bankAccountNumber??""}}}catch{}d({name:c.name??"",phone:c.phone??"",city:c.city??"",location:c.location??"",logoUrl:c.logoUrl??"",isOpen:c.isOpen??!0,allowDelivery:c.allowDelivery??!0,allowPickup:c.allowPickup??!1,cuisineType:c.cuisineType??"",announcement:c.announcement??"",commercialLicenseUrl:c.commercialLicenseUrl??"",licenseStatus:c.licenseStatus,licenseNotes:c.licenseNotes??"",bankName:o.bankName,bankAccountName:o.bankAccountName,bankAccountNumber:o.bankAccountNumber,isHiring:c.isHiring??!1,hiringDescription:c.hiringDescription??"",hiringContact:c.hiringContact??""})}}catch{a.error("ÿ™ÿπÿ∞Ÿëÿ±ÿ™ ŸÇÿ±ÿßÿ°ÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ")}finally{f(!1)}})()},[s,a]),t.useEffect(()=>()=>{r&&URL.revokeObjectURL(r)},[r]),t.useEffect(()=>()=>{P&&URL.revokeObjectURL(P)},[P]);const M=R=>{const{name:c,value:o}=R.target;d(_=>({..._,[c]:o}))},b=R=>{var o;const c=((o=R.target.files)==null?void 0:o[0])||null;if(y(c),c){const _=URL.createObjectURL(c);D(_)}else D("")},h=R=>{var c;try{const o=(c=R.target.files)==null?void 0:c[0];if(!o){B(null),N("");return}if(!/^(image\/|application\/pdf)/.test(o.type)){a.warning("üìÑ ÿßŸÑŸÖŸÑŸÅ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿµŸàÿ±ÿ© ÿ£Ÿà PDF"),T.current&&(T.current.value="");return}const O=5*1024*1024;if(o.size>O){a.warning("üìÅ ÿ≠ÿ¨ŸÖ ÿßŸÑŸÖŸÑŸÅ ŸÉÿ®Ÿäÿ±ÿå Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÑŸÅ ÿ£ŸÇŸÑ ŸÖŸÜ 5MB"),T.current&&(T.current.value="");return}if(B(o),o.type.startsWith("image/")){const q=URL.createObjectURL(o);N(q)}else N("");a.success("‚úÖ ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÖŸÑŸÅ ÿ®ŸÜÿ¨ÿßÿ≠")}catch(o){console.error("‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÖŸÑŸÅ:",o),a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÖŸÑŸÅ")}},k=async()=>{if(!s||!i)return;if(!/^image\//.test(i.type)){a.warning("ÿßŸÑŸÖŸÑŸÅ ÿßŸÑŸÖÿÆÿ™ÿßÿ± ŸÑŸäÿ≥ ÿµŸàÿ±ÿ©");return}const c=3*1024*1024;if(i.size>c){a.warning("ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© ŸÉÿ®Ÿäÿ±ÿå Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£ŸÇŸÑ ŸÖŸÜ 3MB");return}const o=i.name.replace(/\s+/g,"_"),_=`restaurants/${s.uid}/logo_${Date.now()}_${o}`,O=ks(yt,_),q={contentType:i.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await bt(O,i,q);const m=await Ss(O);return`${m}${m.includes("?")?"&":"?"}v=${Date.now()}`},L=async(R,c)=>{if(!s||!R)return;if(!/^(image\/|application\/pdf)/.test(R.type)){a.warning("ÿßŸÑŸÖŸÑŸÅ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿµŸàÿ±ÿ© ÿ£Ÿà PDF");return}const _=5*1024*1024;if(R.size>_){a.warning("ÿ≠ÿ¨ŸÖ ÿßŸÑŸÖŸÑŸÅ ŸÉÿ®Ÿäÿ±ÿå Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÑŸÅ ÿ£ŸÇŸÑ ŸÖŸÜ 5MB");return}const O=R.name.replace(/\s+/g,"_"),q=`restaurants/${s.uid}/licenses/${c}_${Date.now()}_${O}`,m=ks(yt,q),p={contentType:R.type,cacheControl:"public,max-age=31536000,immutable"};return await bt(m,R,p),await Ss(m)},$=async R=>{if(R.preventDefault(),!s){a.warning("‚ö†Ô∏è Ÿäÿ¨ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã");return}if(!n.name.trim()){a.warning("ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ");return}g(!0);try{let c=n.logoUrl,o=n.commercialLicenseUrl,_=n.licenseStatus;if(i){a.info("‚è≥ ÿ¨ÿßÿ±Ÿä ÿ±ŸÅÿπ ÿßŸÑÿ¥ÿπÿßÿ± ‚Ä¶");const p=await k();p&&(c=p)}if(E){a.info("‚è≥ ÿ¨ÿßÿ±Ÿä ÿ±ŸÅÿπ ÿßŸÑÿ±ÿÆÿµÿ© ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ© ‚Ä¶");const p=await L(E,"commercial");p&&(o=p,_="pending")}const{bankAccountName:O,bankAccountNumber:q,...m}=n;await Qe(J(S,"restaurants",s.uid),{...m,logoUrl:c,commercialLicenseUrl:o,licenseStatus:_},{merge:!0}),(n.bankName||O||q)&&await Qe(J(S,"restaurants",s.uid,"private","bankInfo"),{bankName:n.bankName||"",bankAccountName:O||"",bankAccountNumber:q||""},{merge:!0}),r&&URL.revokeObjectURL(r),P&&URL.revokeObjectURL(P),D(""),N(""),y(null),B(null),a.success("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠ üéâ",{title:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ∑ÿπŸÖ"})}catch(c){a.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ≠ŸÅÿ∏: ${(c==null?void 0:c.message)||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"}`)}finally{g(!1)}};return j?e.jsx("div",{className:"p-6 text-center",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ‚Ä¶"}):e.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[e.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"ÿ™ÿπÿØŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-semibold",children:"ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:r||n.logoUrl?e.jsx("img",{src:r||n.logoUrl,className:"w-full h-full object-cover",onError:R=>R.currentTarget.style.display="none",alt:"logo"}):null}),e.jsx("input",{type:"file",accept:"image/*",onChange:b})]}),i&&e.jsxs("div",{className:"text-xs text-gray-600",children:["ÿ≥Ÿäÿ™ŸÖ ÿ±ŸÅÿπ: ",e.jsx("span",{className:"font-semibold",children:i.name})]})]}),e.jsx("input",{name:"name",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ",value:n.name,onChange:M,className:"w-full border p-3 rounded-xl"}),e.jsx("input",{name:"phone",placeholder:"ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ",value:n.phone,onChange:M,className:"w-full border p-3 rounded-xl"}),e.jsxs("div",{className:"relative",children:[e.jsx(es,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400 pointer-events-none"}),e.jsxs("select",{name:"city",value:n.city,onChange:R=>d(c=>({...c,city:R.target.value})),className:"w-full border p-3 pr-10 rounded-xl bg-white appearance-none cursor-pointer focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿØŸäŸÜÿ©"}),Ja.map(R=>e.jsx("option",{value:R,children:R},R))]})]}),e.jsx("input",{name:"location",placeholder:"ÿßŸÑŸÖŸàŸÇÿπ",value:n.location,onChange:M,className:"w-full border p-3 rounded-xl"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{name:"cuisineType",value:n.cuisineType||"",onChange:R=>d(c=>({...c,cuisineType:R.target.value})),className:"w-full border p-3 rounded-xl bg-white appearance-none cursor-pointer focus:border-amber-400 focus:ring-2 focus:ring-amber-100",children:td.map(R=>e.jsx("option",{value:R.value,children:R.label},R.value))}),e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none",children:"ŸÜŸàÿπ ÿßŸÑŸÖÿ∑ÿ®ÿÆ"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(ys,{className:"w-5 h-5 text-sky-500"}),"ŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸÇÿµŸäÿ±ÿ© ŸÑŸÑÿπŸÖŸÑÿßÿ°"]}),e.jsx("textarea",{name:"announcement",placeholder:"ÿßŸÉÿ™ÿ® ŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸÇÿµŸäÿ±ÿ© ÿ™ÿ∏Ÿáÿ± ŸÑŸÑÿπŸÖŸÑÿßÿ° ÿπŸÜÿØ ÿ≤Ÿäÿßÿ±ÿ© ŸÖÿ™ÿ¨ÿ±ŸÉ... ŸÖÿ´ŸÑÿßŸã: ŸÜÿ≥ÿ™ŸÇÿ®ŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸÖŸÜ ÿßŸÑÿ≥ÿßÿπÿ© 4 ÿπÿµÿ±ÿßŸã",value:n.announcement||"",onChange:M,maxLength:150,rows:2,className:"w-full border p-3 rounded-xl resize-none focus:border-sky-400 focus:ring-2 focus:ring-sky-100"}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsxs("span",{children:[((v=n.announcement)==null?void 0:v.length)||0,"/150"]}),"ÿ≠ÿ±ŸÅ"]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-green-500"}),"ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿ∑ŸÑÿ®"]}),e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl mb-3 ${n.isOpen?"bg-green-50 border-2 border-green-200":"bg-red-50 border-2 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.isOpen?"bg-green-500":"bg-red-500"}`,children:n.isOpen?e.jsx(Le,{className:"w-5 h-5 text-white"}):e.jsx(Et,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${n.isOpen?"text-green-800":"text-red-800"}`,children:n.isOpen?"‚úì ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖÿ™ÿßÿ≠":"‚úï ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖÿ∫ŸÑŸÇ"}),e.jsx("p",{className:"text-sm text-gray-500",children:n.isOpen?"ÿßŸÑÿπŸÖŸÑÿßÿ° ŸäŸÖŸÉŸÜŸáŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ¢ŸÜ":"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿπÿ∑ŸÑÿ© ŸÖÿ§ŸÇÿ™ÿßŸã"})]})]}),e.jsx("button",{type:"button",onClick:()=>d(R=>({...R,isOpen:!R.isOpen})),className:`relative w-14 h-8 rounded-full transition-colors ${n.isOpen?"bg-green-500":"bg-red-400"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.isOpen?"right-1":"left-1"}`})})]}),!n.isOpen&&e.jsx("p",{className:"mb-3 text-sm text-red-600 bg-red-50 p-2 rounded-lg",children:"‚ö†Ô∏è ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖÿ∫ŸÑŸÇ - ÿßŸÑÿπŸÖŸÑÿßÿ° ŸÑŸÜ Ÿäÿ™ŸÖŸÉŸÜŸàÿß ŸÖŸÜ ÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿµŸÜÿßŸÅ ŸÑŸÑÿ≥ŸÑÿ©"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.allowDelivery?"bg-sky-500":"bg-gray-300"}`,children:e.jsx(es,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÑŸÑÿπŸÖŸÑÿßÿ°"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÿ™ŸàÿµŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸÑŸÖŸàŸÇÿπ ÿßŸÑÿπŸÖŸäŸÑ"})]})]}),e.jsx("button",{type:"button",onClick:()=>d(R=>({...R,allowDelivery:!R.allowDelivery})),className:`relative w-14 h-8 rounded-full transition-colors ${n.allowDelivery?"bg-sky-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.allowDelivery?"right-1":"left-1"}`})})]}),n.allowDelivery&&e.jsx("p",{className:"mb-3 text-sm text-sky-600 bg-sky-50 p-2 rounded-lg",children:'üöó ÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÖŸÅÿπŸëŸÑ - ÿ≥ÿ™ÿ∏Ÿáÿ± ÿπŸÑÿßŸÖÿ© "ÿ™ŸàÿµŸäŸÑ" ÿ®ÿ¨ÿßŸÜÿ® ŸÖÿ∑ÿπŸÖŸÉ ŸÑŸÑÿπŸÖŸÑÿßÿ°'}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:e.jsx(Le,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÿßŸÑÿ≥ŸÖÿßÿ≠ ŸÑŸÑÿπŸÖŸÑÿßÿ° ÿ®ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ÿßÿ™ŸáŸÖ ŸÖŸÜ ŸÖŸàŸÇÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]})]}),e.jsx("button",{type:"button",onClick:()=>d(R=>({...R,allowPickup:!R.allowPickup})),className:`relative w-14 h-8 rounded-full transition-colors ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.allowPickup?"right-1":"left-1"}`})})]}),n.allowPickup&&e.jsx("p",{className:"mt-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:"‚úì ÿßŸÑÿπŸÖŸÑÿßÿ° ŸäŸÖŸÉŸÜŸáŸÖ ÿßÿÆÿ™Ÿäÿßÿ± ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ÿßÿ™ŸáŸÖ ŸÖŸÜ ŸÖŸàŸÇÿπ ÿßŸÑŸÖÿ∑ÿπŸÖ (ÿ®ÿØŸàŸÜ ÿ±ÿ≥ŸàŸÖ ÿ™ŸàÿµŸäŸÑ)"})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(ys,{className:"w-5 h-5 text-sky-500"}),"ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ ŸàÿßŸÑÿ¥ŸáÿßÿØÿßÿ™"]}),n.licenseStatus&&e.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 ${n.licenseStatus==="approved"?"bg-green-50 text-green-700":n.licenseStatus==="rejected"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[n.licenseStatus==="approved"&&e.jsx(Ie,{className:"w-5 h-5"}),n.licenseStatus==="rejected"&&e.jsx(Ds,{className:"w-5 h-5"}),n.licenseStatus==="pending"&&e.jsx(Ye,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:[n.licenseStatus==="approved"&&"ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ ŸÖŸàÿßŸÅŸÇ ÿπŸÑŸäŸáÿß ‚úì",n.licenseStatus==="rejected"&&"ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ ŸÖÿ±ŸÅŸàÿ∂ÿ©",n.licenseStatus==="pending"&&"ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©..."]})]}),n.licenseNotes&&n.licenseStatus==="rejected"&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl text-red-600 text-sm",children:[e.jsx("strong",{children:"ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™:"})," ",n.licenseNotes]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(Ni,{className:"w-4 h-4 text-orange-500"}),"ÿßŸÑÿ±ÿÆÿµÿ© ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[P&&e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden border bg-gray-100",children:e.jsx("img",{src:P,alt:"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿ™ÿ±ÿÆŸäÿµ",className:"w-full h-full object-cover"})}),n.commercialLicenseUrl&&!P&&e.jsxs("a",{href:n.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-sky-50 text-sky-600 px-3 py-2 rounded-lg text-sm hover:bg-sky-100",children:[e.jsx(ys,{className:"w-4 h-4"}),"ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ≠ÿßŸÑŸä"]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"relative cursor-pointer",children:[e.jsx("input",{ref:T,type:"file",accept:"image/*,application/pdf",capture:"environment",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-sky-100 hover:bg-sky-200 text-sky-700 px-4 py-3 rounded-xl text-sm font-medium transition-colors",children:[e.jsx(ys,{className:"w-5 h-5"}),E?"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÖŸÑŸÅ":"ÿßÿÆÿ™ÿ± ÿµŸàÿ±ÿ© ÿßŸÑÿ™ÿ±ÿÆŸäÿµ"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"üì∑ ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ™ŸÇÿßÿ∑ ÿµŸàÿ±ÿ© ÿ£Ÿà ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÑŸÅ (ÿµŸàÿ±ÿ© ÿ£Ÿà PDF ÿ®ÿ≠ÿØ ÿ£ŸÇÿµŸâ 5MB)"})]}),E&&e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 text-green-700 px-3 py-2 rounded-lg text-sm mt-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"ÿ≥Ÿäÿ™ŸÖ ÿ±ŸÅÿπ: ",e.jsx("span",{className:"font-semibold",children:E.name})]})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(js,{className:"w-5 h-5 text-green-500"}),"ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 bg-green-50 p-3 rounded-xl",children:"üí∞ ÿ£ÿØÿÆŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä ŸÑŸäÿ™ŸÖŸÉŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ° ŸÖŸÜ ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ∑ŸÑÿ® ŸÖÿ®ÿßÿ¥ÿ±ÿ©"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative",children:e.jsxs("select",{name:"bankName",value:n.bankName||"",onChange:R=>d(c=>({...c,bankName:R.target.value})),className:"w-full border p-3 rounded-xl bg-white appearance-none cursor-pointer focus:border-green-400 focus:ring-2 focus:ring-green-100",children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ŸÜŸÉ"}),e.jsx("option",{value:"ÿßŸÑÿ±ÿßÿ¨ÿ≠Ÿä",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ±ÿßÿ¨ÿ≠Ÿä"}),e.jsx("option",{value:"ÿßŸÑÿ£ŸáŸÑŸä",children:"ÿßŸÑÿ®ŸÜŸÉ ÿßŸÑÿ£ŸáŸÑŸä ÿßŸÑÿ≥ÿπŸàÿØŸä"}),e.jsx("option",{value:"ÿßŸÑÿ•ŸÜŸÖÿßÿ°",children:"ŸÖÿµÿ±ŸÅ ÿßŸÑÿ•ŸÜŸÖÿßÿ°"}),e.jsx("option",{value:"ÿßŸÑÿ±Ÿäÿßÿ∂",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ±Ÿäÿßÿ∂"}),e.jsx("option",{value:"ÿßŸÑÿ®ŸÑÿßÿØ",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ®ŸÑÿßÿØ"}),e.jsx("option",{value:"ÿßŸÑÿ¨ÿ≤Ÿäÿ±ÿ©",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ¨ÿ≤Ÿäÿ±ÿ©"}),e.jsx("option",{value:"ÿßŸÑÿπÿ±ÿ®Ÿä",children:"ÿßŸÑÿ®ŸÜŸÉ ÿßŸÑÿπÿ±ÿ®Ÿä ÿßŸÑŸàÿ∑ŸÜŸä"}),e.jsx("option",{value:"ÿßŸÑÿ≥ÿπŸàÿØŸä ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿä",children:"ÿßŸÑÿ®ŸÜŸÉ ÿßŸÑÿ≥ÿπŸàÿØŸä ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿä"}),e.jsx("option",{value:"ÿ≥ÿßÿ®",children:"ÿ®ŸÜŸÉ ÿ≥ÿßÿ®"}),e.jsx("option",{value:"stc pay",children:"STC Pay"}),e.jsx("option",{value:"ÿ£ÿÆÿ±Ÿâ",children:"ÿ£ÿÆÿ±Ÿâ"})]})}),e.jsx("input",{name:"bankAccountName",placeholder:"ÿßÿ≥ŸÖ ÿµÿßÿ≠ÿ® ÿßŸÑÿ≠ÿ≥ÿßÿ®",value:n.bankAccountName||"",onChange:M,className:"w-full border p-3 rounded-xl focus:border-green-400 focus:ring-2 focus:ring-green-100"}),e.jsx("input",{name:"bankAccountNumber",placeholder:"ÿ±ŸÇŸÖ ÿßŸÑÿ¢Ÿäÿ®ÿßŸÜ ÿ£Ÿà ÿßŸÑÿ≠ÿ≥ÿßÿ®",value:n.bankAccountNumber||"",onChange:M,className:"w-full border p-3 rounded-xl focus:border-green-400 focus:ring-2 focus:ring-green-100 font-mono text-left",dir:"ltr"}),n.bankName&&n.bankAccountName&&n.bankAccountNumber&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 text-green-700 text-sm",children:"‚úÖ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ®ŸÜŸÉ ŸÖŸÉÿ™ŸÖŸÑÿ© - ÿ≥Ÿäÿ™ŸÖŸÉŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ° ŸÖŸÜ ÿ±ÿ§Ÿäÿ™Ÿáÿß ÿπŸÜÿØ ÿßŸÑÿ∑ŸÑÿ®"})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5 text-purple-500"}),"ÿ™Ÿàÿ∏ŸäŸÅ ÿπÿßŸÖŸÑÿßÿ™ ŸÑŸÑÿ∑ÿ®ÿÆ"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 bg-purple-50 p-3 rounded-xl",children:"üë©‚Äçüç≥ ŸÅÿπŸëŸÑ Ÿáÿ∞ÿß ÿßŸÑÿÆŸäÿßÿ± ÿ•ÿ∞ÿß ŸÉŸÜÿ™ ÿ™ÿ®ÿ≠ÿ´ ÿπŸÜ ÿπÿßŸÖŸÑÿßÿ™ ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿ∑ÿ®ÿÆ"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.isHiring?"bg-purple-500":"bg-gray-300"}`,children:e.jsx(qt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖŸàÿ∏ŸÅÿßÿ™"}),e.jsx("p",{className:"text-sm text-gray-500",children:"ÿπÿ±ÿ∂ ÿ•ÿπŸÑÿßŸÜ ÿ™Ÿàÿ∏ŸäŸÅ ŸÅŸä ÿµŸÅÿ≠ÿ™ŸÉ"})]})]}),e.jsx("button",{type:"button",onClick:()=>d(R=>({...R,isHiring:!R.isHiring})),className:`relative w-14 h-8 rounded-full transition-colors ${n.isHiring?"bg-purple-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.isHiring?"right-1":"left-1"}`})})]}),n.isHiring&&e.jsxs("div",{className:"space-y-3 bg-purple-50 p-4 rounded-xl",children:[e.jsx("textarea",{name:"hiringDescription",placeholder:"ŸàÿµŸÅ ÿßŸÑŸàÿ∏ŸäŸÅÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© (ŸÖÿ´ÿßŸÑ: ŸÜÿ®ÿ≠ÿ´ ÿπŸÜ ÿ∑ÿ®ÿßÿÆÿ© ŸÖÿßŸáÿ±ÿ© ŸÑŸÑÿπŸÖŸÑ ÿ®ÿØŸàÿßŸÖ ÿ¨ÿ≤ÿ¶Ÿä...)",value:n.hiringDescription||"",onChange:R=>d(c=>({...c,hiringDescription:R.target.value})),className:"w-full border p-3 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-100 min-h-[100px]",rows:3}),e.jsx("input",{name:"hiringContact",placeholder:"ÿ±ŸÇŸÖ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÑŸÑÿ™Ÿàÿ∏ŸäŸÅ (Ÿàÿßÿ™ÿ≥ÿßÿ®)",value:n.hiringContact||"",onChange:M,className:"w-full border p-3 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-100"}),n.hiringDescription&&n.hiringContact&&e.jsx("div",{className:"bg-purple-100 border border-purple-200 rounded-xl p-3 text-purple-700 text-sm",children:"‚úÖ ÿ•ÿπŸÑÿßŸÜ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿπÿ±ÿ∂ ŸÅŸä ÿµŸÅÿ≠ÿ™ŸÉ"})]})]}),e.jsx("button",{type:"submit",disabled:!w,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:U?"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ≠ŸÅÿ∏‚Ä¶":"ÿ≠ŸÅÿ∏"})]})]})},ld=()=>{const{user:s}=Ee(),a=Ps(),n=ze(),[d,i]=t.useState([]),[y,r]=t.useState(!0);t.useEffect(()=>{s&&(async()=>{const g=be(se(S,"hiringRequests"),je("restaurantId","==",s.uid)),w=await pe(g);i(w.docs.map(M=>({id:M.id,...M.data()}))),r(!1)})()},[s]);const D=async(g,w)=>{await xe(J(S,"hiringRequests",g),{status:w}),i(M=>M.map(b=>b.id===g?{...b,status:w}:b)),n.success(w==="accepted"?"ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ® ‚úÖ":"ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®")},E=async g=>{await a.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÅÿµŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ® "${g.courierName}"ÿü`,{title:"ŸÅÿµŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ®",confirmText:"ŸÜÿπŸÖÿå ŸÅÿµŸÑ",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°",dangerous:!0})&&(await xe(J(S,"hiringRequests",g.id),{status:"terminated"}),i(M=>M.map(b=>b.id===g.id?{...b,status:"terminated"}:b)),n.success("ÿ™ŸÖ ŸÅÿµŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ®"))},B=async g=>{await a.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ ÿ∑ŸÑÿ® "${g.courierName}" ŸÜŸáÿßÿ¶ŸäÿßŸãÿü`,{title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ∑ŸÑÿ®",confirmText:"ŸÜÿπŸÖÿå ÿ≠ÿ∞ŸÅ",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°",dangerous:!0})&&(await As(J(S,"hiringRequests",g.id)),i(M=>M.filter(b=>b.id!==g.id)),n.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ∑ŸÑÿ®"))},P=async g=>{await xe(J(S,"hiringRequests",g.id),{status:"accepted"}),i(w=>w.map(M=>M.id===g.id?{...M,status:"accepted"}:M)),n.success("ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸÖŸÜÿØŸàÿ® ‚úÖ")},N=g=>{switch(g){case"pending":return{text:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ±ÿØ",color:"bg-yellow-100 text-yellow-700",icon:Ye};case"accepted":return{text:"ŸÖŸÇÿ®ŸàŸÑ ‚úÖ",color:"bg-green-100 text-green-700",icon:Ie};case"rejected":return{text:"ŸÖÿ±ŸÅŸàÿ∂",color:"bg-red-100 text-red-700",icon:lt};case"terminated":return{text:"ŸÖŸÅÿµŸàŸÑ",color:"bg-gray-100 text-gray-700",icon:jr};default:return{text:g,color:"bg-gray-100 text-gray-700",icon:Ye}}};if(y)return e.jsx("div",{className:"text-center py-10",children:"‚è≥ ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."});const T=d.filter(g=>g.status==="accepted"),j=d.filter(g=>g.status==="pending"),f=d.filter(g=>g.status==="terminated"),U=d.filter(g=>g.status==="rejected");return e.jsxs("div",{className:"py-6 space-y-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-6",children:"üë• ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÜÿßÿØŸäÿ®"}),d.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üë•"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ™Ÿàÿ∏ŸäŸÅ"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ÿ≥Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖŸÜÿßÿØŸäÿ® ŸÑŸÑÿßŸÜÿ∂ŸÖÿßŸÖ ŸÑŸÖÿ∑ÿπŸÖŸÉ"})]}):e.jsxs(e.Fragment,{children:[T.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-green-600 mb-3 flex items-center gap-2",children:[e.jsx(ul,{className:"w-5 h-5"}),"ÿßŸÑŸÖŸÜÿßÿØŸäÿ® ÿßŸÑŸÜÿ¥ÿ∑ŸäŸÜ (",T.length,")"]}),e.jsx("div",{className:"space-y-3",children:T.map(g=>{const w=N(g.status);return e.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl",children:"üöó"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800",children:g.courierName}),e.jsxs("div",{className:`text-xs px-2 py-1 rounded-full inline-flex items-center gap-1 ${w.color}`,children:[e.jsx(w.icon,{className:"w-3 h-3"}),w.text]})]})]}),e.jsxs("button",{onClick:()=>E(g),className:`flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-xl 
                                     hover:bg-red-100 transition-all font-medium`,children:[e.jsx(yi,{className:"w-4 h-4"}),"ŸÅÿµŸÑ"]})]})},g.id)})})]}),j.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-yellow-600 mb-3 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),"ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ© (",j.length,")"]}),e.jsx("div",{className:"space-y-3",children:j.map(g=>e.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-2xl",children:"üë§"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-800",children:g.courierName}),e.jsx("div",{className:"text-xs text-yellow-600",children:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ±ÿØ ‚è≥"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>D(g.id,"accepted"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-green-500 text-white hover:bg-green-600 transition-all font-medium",children:[e.jsx(ul,{className:"w-4 h-4"}),"ŸÇÿ®ŸàŸÑ"]}),e.jsxs("button",{onClick:()=>D(g.id,"rejected"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-red-500 text-white hover:bg-red-600 transition-all font-medium",children:[e.jsx(lt,{className:"w-4 h-4"}),"ÿ±ŸÅÿ∂"]})]})]})},g.id))})]}),f.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-500 mb-3 flex items-center gap-2",children:[e.jsx(jr,{className:"w-5 h-5"}),"ÿßŸÑŸÖŸÅÿµŸàŸÑŸäŸÜ (",f.length,")"]}),e.jsx("div",{className:"space-y-3",children:f.map(g=>e.jsx("div",{className:"bg-gray-50 rounded-2xl shadow p-4 border-r-4 border-gray-400 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-2xl",children:"üë§"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-600",children:g.courierName}),e.jsx("div",{className:"text-xs text-gray-500",children:"ŸÖŸÅÿµŸàŸÑ"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>P(g),className:`flex items-center gap-1 px-3 py-2 bg-green-100 text-green-600 rounded-xl 
                                     hover:bg-green-200 transition-all text-sm font-medium`,children:[e.jsx(ul,{className:"w-4 h-4"}),"ÿ•ÿπÿßÿØÿ© ÿ™ŸÅÿπŸäŸÑ"]}),e.jsxs("button",{onClick:()=>B(g),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                     hover:bg-red-200 transition-all text-sm font-medium`,children:[e.jsx(Ns,{className:"w-4 h-4"}),"ÿ≠ÿ∞ŸÅ"]})]})]})},g.id))})]}),U.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-red-500 mb-3 flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"ŸÖÿ±ŸÅŸàÿ∂ŸäŸÜ (",U.length,")"]}),e.jsx("div",{className:"space-y-3",children:U.map(g=>e.jsx("div",{className:"bg-red-50 rounded-2xl shadow p-4 border-r-4 border-red-400 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-2xl",children:"üë§"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-600",children:g.courierName}),e.jsx("div",{className:"text-xs text-red-500",children:"ŸÖÿ±ŸÅŸàÿ∂"})]})]}),e.jsxs("button",{onClick:()=>B(g),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                   hover:bg-red-200 transition-all text-sm font-medium`,children:[e.jsx(Ns,{className:"w-4 h-4"}),"ÿ≠ÿ∞ŸÅ"]})]})},g.id))})]})]})]})},Ia={premium:{displayName:"ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",description:"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ© Ÿàÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ©",isEnabled:!0,originalPrice:99,currentPrice:99,durationDays:30},free:{displayName:"ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©",description:"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÖÿ¨ÿßŸÜÿßŸã",isEnabled:!0,originalPrice:0,currentPrice:0,durationDays:0},defaultPackage:"free"},on=s=>{var i,y,r,D;if(!(s!=null&&s.isActive))return!1;const a=new Date,n=((y=(i=s.startDate)==null?void 0:i.toDate)==null?void 0:y.call(i))||(s.startDate?new Date(s.startDate):null),d=((D=(r=s.endDate)==null?void 0:r.toDate)==null?void 0:D.call(r))||(s.endDate?new Date(s.endDate):null);return!(n&&a<n||d&&a>d)},rd=s=>{if(!on(s.discount))return s.originalPrice;const a=s.discount;return a.type==="percentage"?s.originalPrice-s.originalPrice*a.value/100:Math.max(0,s.originalPrice-a.value)},nd=()=>{var R;const{user:s}=Ee(),a=ze(),n=Ps(),[d,i]=t.useState("free"),[y,r]=t.useState(!0),[D,E]=t.useState(!1),[B,P]=t.useState(!1),[N,T]=t.useState(Ia),[j,f]=t.useState(null),[U,g]=t.useState(!1),[w,M]=t.useState(null),b=t.useRef(null),h=rd(N.premium),k=on(N.premium.discount);t.useEffect(()=>{console.log("üí∞ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ®ÿßŸÇÿ©:",{pkgSettings:N.premium,discount:N.premium.discount,hasDiscount:k,premiumPrice:h,originalPrice:N.premium.originalPrice})},[N,k,h]),t.useEffect(()=>{if(!s)return;(async()=>{var O;try{const q=await Ce(J(S,"settings","packages"));if(q.exists()){const x=q.data();console.log("üì¶ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™ ŸÖŸÜ Firestore:",x),T({...Ia,...x,premium:{...Ia.premium,...x.premium,discount:(O=x.premium)!=null&&O.discount?{...x.premium.discount,isActive:x.premium.discount.isActive??!1}:void 0},free:{...Ia.free,...x.free}})}else console.log("‚ö†Ô∏è ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿ®ÿßŸÇÿßÿ™ ŸÅŸä Firestoreÿå Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä");const m=await Ce(J(S,"restaurants",s.uid));if(m.exists()){const x=m.data();i((x==null?void 0:x.packageType)||"free")}const p=be(se(S,"packageRequests"),je("restaurantId","==",s.uid)),I=await pe(p);if(!I.empty){const Q=I.docs.map(A=>({id:A.id,...A.data()})).find(A=>!["approved","rejected","expired"].includes(A.status));Q&&f(Q)}}catch(q){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:",q)}finally{r(!1)}})();const o=be(se(S,"packageRequests"),je("restaurantId","==",s.uid)),_=xs(o,O=>{if(!O.empty){const q=O.docs.map(I=>({id:I.id,...I.data()})),m=q.find(I=>!["approved","rejected","expired"].includes(I.status));f(m||null),q.find(I=>I.status==="approved")&&i("premium")}});return()=>_()},[s]);const L=async()=>{if(!s)return;if(d==="free"){a.info("ÿ£ŸÜÿ™ ÿ®ÿßŸÑŸÅÿπŸÑ ŸÖÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©");return}if(await n.confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©ÿü ÿ≥ÿ™ŸÅŸÇÿØ ŸÖŸÖŸäÿ≤ÿßÿ™ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤.",{title:"üì¶ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ŸÑŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©",confirmText:"ŸÜÿπŸÖÿå ÿ≠ŸàŸëŸÑ ŸÑŸÑŸÖÿ¨ÿßŸÜŸäÿ©",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°"})){P(!0);try{await xe(J(S,"restaurants",s.uid),{packageType:"free",packageRequest:null,updatedAt:X()}),i("free"),a.success("ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ŸÑŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©")}catch(o){console.error("ÿÆÿ∑ÿ£:",o),a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{P(!1)}}},$=async()=>{if(!s)return;if(j){a.info("ŸÑÿØŸäŸÉ ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÇŸäÿØ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©");return}if(h===0){if(!await n.confirm("ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÖÿ™ÿßÿ≠ÿ© ŸÖÿ¨ÿßŸÜÿßŸã ÿ≠ÿßŸÑŸäÿßŸã! ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ŸÅÿπŸäŸÑŸáÿß ÿßŸÑÿ¢ŸÜÿü",{title:"üéÅ ÿπÿ±ÿ∂ ÿÆÿßÿµ - ÿ®ÿßŸÇÿ© ŸÖÿ¨ÿßŸÜŸäÿ©!",confirmText:"ŸÜÿπŸÖÿå ŸÅÿπŸëŸÑ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑÿ¢ŸÜ",cancelText:"ŸÑÿßÿ≠ŸÇÿßŸã"}))return;E(!0);try{const _=new Date;_.setDate(_.getDate()+(N.premium.durationDays||30)),await xe(J(S,"restaurants",s.uid),{packageType:"premium",packageSubscribedAt:X(),packageExpiresAt:_,packageRequest:null,updatedAt:X()}),i("premium"),a.success("üéâ ŸÖÿ®ÿ±ŸàŸÉ! ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÖÿ¨ÿßŸÜÿßŸã!")}catch(_){console.error("ÿÆÿ∑ÿ£:",_),a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{E(!1)}return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ŸÉ ŸÑŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ÿ®ŸÖÿ®ŸÑÿ∫ ${h.toFixed(0)} ÿ±ŸäÿßŸÑ. ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©ÿü`,{title:"‚ú® ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",confirmText:"ŸÜÿπŸÖÿå ÿ£ÿ±ŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ",cancelText:"ŸÑÿßÿ≠ŸÇÿßŸã"})){E(!0);try{const _=(await Ce(J(S,"restaurants",s.uid))).data(),O=await Te(se(S,"packageRequests"),{restaurantId:s.uid,restaurantName:(_==null?void 0:_.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",ownerName:(_==null?void 0:_.ownerName)||"",ownerPhone:(_==null?void 0:_.phone)||"",status:"pending",subscriptionAmount:h,subscriptionDuration:N.premium.durationDays,requestedAt:X(),createdAt:X(),updatedAt:X()});await xe(J(S,"restaurants",s.uid),{packageRequest:"premium",packageRequestedAt:X(),updatedAt:X()});try{const q=be(se(S,"users"),je("role","==","developer")),m=await pe(q);if(m.empty){const p=be(se(S,"users"),je("role","==","admin")),I=await pe(p);for(const x of I.docs)await Te(se(S,"notifications"),{recipientId:x.id,title:"üì¶ ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿ¨ÿØŸäÿØ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",message:`${(_==null?void 0:_.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©"} ÿ∑ŸÑÿ®ÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤`,type:"package_request",read:!1,data:{requestId:O.id,restaurantId:s.uid},createdAt:X()})}else for(const p of m.docs)await Te(se(S,"notifications"),{recipientId:p.id,title:"üì¶ ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿ¨ÿØŸäÿØ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",message:`${(_==null?void 0:_.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©"} ÿ∑ŸÑÿ®ÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤`,type:"package_request",read:!1,data:{requestId:O.id,restaurantId:s.uid},createdAt:X()})}catch(q){console.warn("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±:",q)}a.success("ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ∑ŸÑÿ®ŸÉ! Ÿäÿ±ÿ¨Ÿâ ÿ±ŸÅÿπ ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ£ÿØŸÜÿßŸá üí≥")}catch(o){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®:",o),a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}finally{E(!1)}}},v=async()=>{var c;if(!s||!j||!w){a.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ");return}g(!0);try{const o=`paymentProofs/${s.uid}_${Date.now()}_${w.name}`,_=ks(yt,o);await bt(_,w);const O=await Ss(_);await xe(J(S,"packageRequests",j.id),{status:"payment_sent",paymentProofImageUrl:O,paymentSentAt:X(),updatedAt:X()});try{const m=((c=(await Ce(J(S,"restaurants",s.uid))).data())==null?void 0:c.name)||"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",p=be(se(S,"users"),je("role","==","developer")),I=await pe(p);if(I.empty){const x=be(se(S,"users"),je("role","==","admin")),Q=await pe(x);for(const A of Q.docs)await Te(se(S,"notifications"),{recipientId:A.id,title:"üí≥ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿ™ÿ≠ŸàŸäŸÑ",message:`${m} ÿ£ÿ±ÿ≥ŸÑÿ™ ÿ•ÿ´ÿ®ÿßÿ™ ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ`,type:"payment_proof_sent",read:!1,data:{requestId:j.id,restaurantId:s.uid},createdAt:X()})}else for(const x of I.docs)await Te(se(S,"notifications"),{recipientId:x.id,title:"üí≥ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿ™ÿ≠ŸàŸäŸÑ",message:`${m} ÿ£ÿ±ÿ≥ŸÑÿ™ ÿ•ÿ´ÿ®ÿßÿ™ ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ`,type:"payment_proof_sent",read:!1,data:{requestId:j.id,restaurantId:s.uid},createdAt:X()})}catch(q){console.warn("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±:",q)}a.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠! ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ™Ÿá Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ© ‚ú®"),M(null),b.current&&(b.current.value="")}catch(o){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ±ŸÅÿπ ÿßŸÑÿ•ÿ´ÿ®ÿßÿ™:",o),a.error(`ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: ${o.message}`)}finally{g(!1)}};return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-amber-100 to-yellow-100 px-5 py-2.5 rounded-full mb-4 shadow-sm",children:[e.jsx("span",{className:"text-xl",children:"üíº"}),e.jsx("span",{className:"text-amber-700 font-bold text-lg",children:"ÿ®ÿßŸÇÿßÿ™ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-3",children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© ŸÑÿ£ÿ≥ÿ±ÿ™ŸÉ"}),e.jsx("p",{className:"text-gray-600 max-w-lg mx-auto",children:"ÿßÿ®ÿØÿ£ ŸÖÿ¨ÿßŸÜÿßŸã Ÿàÿßÿ≥ÿ™ŸÖÿ™ÿπ ÿ®ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©ÿå ÿ£Ÿà ÿßÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ©"})]}),j&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl p-6 border-2 border-amber-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center",children:e.jsx(Ws,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-amber-800",children:"ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÇŸäÿØ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©"}),e.jsxs("p",{className:"text-amber-600 text-sm",children:[j.status==="pending"&&"‚è≥ Ÿäÿ±ÿ¨Ÿâ ÿ±ŸÅÿπ ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ",j.status==="payment_sent"&&"üí≥ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ - ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ£ŸÉŸäÿØ"]})]})]}),j.status==="pending"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4",children:[e.jsxs("p",{className:"text-green-600 font-bold text-lg mb-2",children:["üí∞ ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®: ",j.subscriptionAmount||h," ÿ±ŸäÿßŸÑ"]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿ£ÿπŸÑÿßŸá ÿ´ŸÖ ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"üì§ ÿßÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ:"}),e.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:c=>{var o;return M(((o=c.target.files)==null?void 0:o[0])||null)},className:"w-full border-2 border-dashed border-amber-300 rounded-xl p-4 bg-amber-50"}),w&&e.jsxs("p",{className:"text-sm text-green-600",children:["‚úÖ ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±: ",w.name]}),e.jsx("button",{onClick:v,disabled:U||!w,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 transition flex items-center justify-center gap-2",children:U?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ±ŸÅÿπ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ua,{className:"w-5 h-5"}),"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"]})})]})]}),j.status==="payment_sent"&&e.jsxs("div",{className:"bg-purple-100 rounded-xl p-4 flex items-center gap-3",children:[e.jsx(Ye,{className:"w-8 h-8 text-purple-600 animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-purple-800",children:"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ŸäÿµÿßŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"}),e.jsx("p",{className:"text-purple-600 text-sm",children:"ÿ¨ÿßÿ±Ÿê ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑÿ•ŸäÿµÿßŸÑ Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ©... ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ¥ÿπÿßÿ±ŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${d==="free"?"ring-4 ring-green-400 shadow-2xl":"shadow-lg hover:shadow-xl"}`,children:[d==="free"&&e.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[e.jsx(gs,{className:"w-4 h-4"}),"ÿ®ÿßŸÇÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©"]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-6 md:p-8 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(Os,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©"}),e.jsx("p",{className:"text-green-600 font-semibold",children:"ŸÑŸÑÿ¨ŸÖŸäÿπ ‚Ä¢ ŸÖÿØŸâ ÿßŸÑÿ≠Ÿäÿßÿ©"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center",children:[e.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[e.jsx("span",{className:"text-5xl font-black text-gray-900",children:"0"}),e.jsx("span",{className:"text-xl text-gray-600",children:"ÿ±.ÿ≥"})]}),e.jsx("p",{className:"text-green-600 font-medium mt-1",children:"ŸÖÿ¨ÿßŸÜÿßŸã ŸÑŸÑÿ£ÿ®ÿØ"})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5 text-amber-500"}),"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©:"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ct,{icon:e.jsx(ws,{className:"w-5 h-5"}),title:"ÿßŸÑÿ∏ŸáŸàÿ± ŸÅŸä ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ",desc:"ÿ£ÿ≥ÿ±ÿ™ŸÉ ÿ™ÿ∏Ÿáÿ± ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿπŸÖŸÑÿßÿ° ŸÅŸä ŸÖŸÜÿ∑ŸÇÿ™ŸÉ",included:!0}),e.jsx(Ct,{icon:e.jsx(cs,{className:"w-5 h-5"}),title:"ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",desc:"ÿßÿ≥ÿ™ŸÇÿ®ŸÑ ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿπŸÖŸÑÿßÿ° ÿ®ÿØŸàŸÜ ÿ≠ÿØŸàÿØ",included:!0}),e.jsx(Ct,{icon:e.jsx(ys,{className:"w-5 h-5"}),title:"ÿµŸÅÿ≠ÿ© ÿÆÿßÿµÿ© ŸÑÿ£ÿ≥ÿ±ÿ™ŸÉ",desc:"ÿµŸÅÿ≠ÿ© ŸÖÿÆÿµÿµÿ© ÿ™ÿπÿ±ÿ∂ ŸÇÿßÿ¶ŸÖÿ™ŸÉ ŸàŸÖŸÜÿ™ÿ¨ÿßÿ™ŸÉ",included:!0})]})]}),e.jsx("div",{className:"mt-6",children:d==="free"?e.jsxs("div",{className:"bg-green-100 text-green-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[e.jsx(gs,{className:"w-5 h-5"}),"ÿ£ŸÜÿ™ ŸÖÿ¥ÿ™ÿ±ŸÉ ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑÿ®ÿßŸÇÿ©"]}):e.jsx("button",{onClick:L,disabled:B,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Os,{className:"w-6 h-6"}),"ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©",e.jsx(xt,{className:"w-5 h-5"})]})})})]})]}),e.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${d==="premium"?"ring-4 ring-amber-400 shadow-2xl":"shadow-lg hover:shadow-xl hover:scale-[1.01]"}`,children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-amber-500 py-2 text-center z-10",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white font-bold",children:[e.jsx(ts,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ¥ÿπÿ®Ÿäÿ©"}),e.jsx(ts,{className:"w-5 h-5"})]})}),d==="premium"&&e.jsxs("div",{className:"absolute top-12 right-4 bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[e.jsx(ts,{className:"w-4 h-4"}),"ÿ®ÿßŸÇÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©"]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-6 md:p-8 pt-14 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 via-yellow-400 to-orange-400 rounded-2xl flex items-center justify-center shadow-lg relative",children:[e.jsx(ts,{className:"w-8 h-8 text-white"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow",children:e.jsx(is,{className:"w-4 h-4 text-amber-500"})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäŸëÿ≤"}),e.jsx("p",{className:"text-amber-600 font-semibold",children:"ŸÑŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÖŸäÿ≤ÿ© ‚ú®"})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-400/10 via-yellow-400/10 to-orange-400/10"}),e.jsxs("div",{className:"relative",children:[k&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"bg-red-500 text-white text-sm px-3 py-1 rounded-full font-bold",children:((R=N.premium.discount)==null?void 0:R.label)||"ÿÆÿµŸÖ ÿÆÿßÿµ!"}),N.premium.originalPrice>h&&e.jsxs("p",{className:"text-gray-400 line-through text-lg mt-1",children:[N.premium.originalPrice.toFixed(0)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[e.jsx("span",{className:"text-5xl font-black bg-gradient-to-r from-amber-600 to-orange-500 bg-clip-text text-transparent",children:h===0?"ŸÖÿ¨ÿßŸÜÿßŸã":h.toFixed(0)}),h>0&&e.jsx("span",{className:"text-xl text-gray-600",children:"ÿ±.ÿ≥"})]}),e.jsx("p",{className:"text-amber-600 font-medium mt-1",children:h===0?"ÿπÿ±ÿ∂ ÿÆÿßÿµ!":`ŸÑŸÖÿØÿ© ${N.premium.durationDays} ŸäŸàŸÖ`})]})]}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5 text-amber-500"}),"ÿ¨ŸÖŸäÿπ ŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©ÿå ÿ®ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ:"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ct,{icon:e.jsx(Ms,{className:"w-5 h-5"}),title:"ÿßŸÑÿ∏ŸáŸàÿ± ÿ£ÿπŸÑŸâ ŸÅŸä ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨",desc:"ÿ£ÿ≥ÿ±ÿ™ŸÉ ÿ™ÿ∏Ÿáÿ± ŸÅŸä ÿ£ÿπŸÑŸâ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ®ÿ≠ÿ´ ÿØÿßÿ¶ŸÖÿßŸã",included:!0,premium:!0}),e.jsx(Ct,{icon:e.jsx(xa,{className:"w-5 h-5"}),title:"ÿπŸÑÿßŸÖÿ© ÿ£ÿ≥ÿ±ÿ© ŸÖŸÖŸäÿ≤ÿ©",desc:"ÿ¥ÿßÿ±ÿ© ÿ∞Ÿáÿ®Ÿäÿ© ÿ™ŸÖŸäÿ≤ŸÉ ÿπŸÜ ÿßŸÑÿ¢ÿÆÿ±ŸäŸÜ",included:!0,premium:!0}),e.jsx(Ct,{icon:e.jsx(Va,{className:"w-5 h-5"}),title:"ÿßŸÇÿ™ÿ±ÿßÿ≠ŸÉ ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",desc:"ÿ∏ŸáŸàÿ± ÿ£ÿ≥ÿ±ÿ™ŸÉ ŸÅŸä ŸÇÿ≥ŸÖ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÖŸäÿ≤ÿ©",included:!0,premium:!0}),e.jsx(Ct,{icon:e.jsx(mt,{className:"w-5 h-5"}),title:"ÿßŸÑÿ≠ŸÖŸÑÿßÿ™ ÿßŸÑŸÖŸàÿ≥ŸÖŸäÿ©",desc:"ÿØÿÆŸàŸÑ ŸÖÿ¨ÿßŸÜŸä ŸÅŸä ÿ≠ŸÖŸÑÿßÿ™ ÿ±ŸÖÿ∂ÿßŸÜ ŸàÿßŸÑÿ£ÿπŸäÿßÿØ",included:!0,premium:!0})]})]}),e.jsx("div",{className:"mt-6 space-y-3",children:d==="premium"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-amber-100 text-amber-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5"}),"ÿ£ŸÜÿ™ ŸÖÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"]}),e.jsx("button",{onClick:L,disabled:B,className:"w-full py-3 px-6 rounded-xl bg-red-50 hover:bg-red-100 text-red-600 font-semibold text-sm border border-red-200 transition-all duration-300 flex items-center justify-center gap-2",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-red-300 border-t-red-600 rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-4 h-4"}),"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ"]})})]}):e.jsxs("button",{onClick:$,disabled:D,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 text-white font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"w-6 h-6"}),"ÿßÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäŸëÿ≤",e.jsx(xt,{className:"w-5 h-5"})]})]})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 px-6 py-4",children:e.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5 text-amber-400"}),"ŸÖŸÇÿßÿ±ŸÜÿ© ÿ≥ÿ±Ÿäÿπÿ© ÿ®ŸäŸÜ ÿßŸÑÿ®ÿßŸÇÿßÿ™"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:"ÿßŸÑŸÖŸäÿ≤ÿ©"}),e.jsx("th",{className:"px-6 py-4 text-center font-bold text-green-600",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Os,{className:"w-5 h-5"}),"ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©"]})}),e.jsx("th",{className:"px-6 py-4 text-center font-bold text-amber-600",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5"}),"ÿßŸÑÿ™ŸÖŸäŸëÿ≤"]})})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.jsx(At,{label:"ÿßŸÑÿ∏ŸáŸàÿ± ŸÅŸä ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ",free:!0,premium:!0}),e.jsx(At,{label:"ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",free:!0,premium:!0}),e.jsx(At,{label:"ÿµŸÅÿ≠ÿ© ÿÆÿßÿµÿ© ŸÑÿ£ÿ≥ÿ±ÿ™ŸÉ",free:!0,premium:!0}),e.jsx(At,{label:"ÿßŸÑÿ∏ŸáŸàÿ± ÿ£ÿπŸÑŸâ ŸÅŸä ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨",premium:!0}),e.jsx(At,{label:"ÿπŸÑÿßŸÖÿ© ÿ£ÿ≥ÿ±ÿ© ŸÖŸÖŸäÿ≤ÿ©",premium:!0}),e.jsx(At,{label:"ÿßŸÇÿ™ÿ±ÿßÿ≠ŸÉ ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",premium:!0}),e.jsx(At,{label:"ÿßŸÑÿ≠ŸÖŸÑÿßÿ™ ÿßŸÑŸÖŸàÿ≥ŸÖŸäÿ©",premium:!0})]})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:[e.jsx("span",{className:"font-bold text-sky-600",children:"üí° ŸÖŸÑÿßÿ≠ÿ∏ÿ©:"})," ","ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ™ÿ±ŸÇŸäÿ© ÿ£Ÿà ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™. ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿßŸÑÿ™ÿ≤ÿßŸÖÿßÿ™ ÿ∑ŸàŸäŸÑÿ© ÿßŸÑŸÖÿØŸâ."]})})]})},Ct=({icon:s,title:a,desc:n,included:d,premium:i})=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-xl transition ${d?i?"bg-gradient-to-r from-amber-100/50 to-yellow-100/50":"bg-white/50":"opacity-50"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${d?i?"bg-gradient-to-br from-amber-400 to-orange-400 text-white":"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:s}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:`font-bold ${d?"text-gray-800":"text-gray-400"}`,children:a}),i&&e.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-400 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:"ÿ≠ÿµÿ±Ÿä"})]}),e.jsx("p",{className:`text-sm ${d?"text-gray-500":"text-gray-400"}`,children:n})]}),d&&e.jsx(gs,{className:`w-5 h-5 flex-shrink-0 ${i?"text-amber-500":"text-green-500"}`})]}),At=({label:s,free:a,premium:n})=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4 text-gray-700 font-medium",children:s}),e.jsx("td",{className:"px-6 py-4 text-center",children:a?e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-green-100 rounded-full",children:e.jsx(gs,{className:"w-5 h-5 text-green-600"})}):e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:e.jsx("span",{className:"text-gray-400",children:"‚Äî"})})}),e.jsx("td",{className:"px-6 py-4 text-center",children:n?e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-amber-100 rounded-full",children:e.jsx(gs,{className:"w-5 h-5 text-amber-600"})}):e.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:e.jsx("span",{className:"text-gray-400",children:"‚Äî"})})})]}),bl=5,Da=24,id=()=>{const{user:s}=Ee(),a=ze(),n=Ps(),[d,i]=t.useState([]),[y,r]=t.useState(!0),[D,E]=t.useState(!1),[B,P]=t.useState(!1),[N,T]=t.useState(0),j=t.useRef(null),[f,U]=t.useState({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""});t.useEffect(()=>{s&&g()},[s]);const g=async()=>{if(s)try{const k=be(se(S,"promotions"),je("ownerId","==",s.uid)),$=(await pe(k)).docs.map(v=>{var R,c,o,_;return{id:v.id,...v.data(),expiresAt:(c=(R=v.data().expiresAt)==null?void 0:R.toDate)==null?void 0:c.call(R),createdAt:(_=(o=v.data().createdAt)==null?void 0:o.toDate)==null?void 0:_.call(o)}});$.sort((v,R)=>{var c,o;return(((c=R.createdAt)==null?void 0:c.getTime())||0)-(((o=v.createdAt)==null?void 0:o.getTime())||0)}),i($)}catch(k){a.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™"),console.error(k)}finally{r(!1)}},w=k=>k.expiresAt?new Date>new Date(k.expiresAt):!1,M=k=>{var c;const L=(c=k.target.files)==null?void 0:c[0];if(!L)return;const $=L.type.startsWith("image/"),v=L.type.startsWith("video/");if(!$&&!v){a.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà");return}const R=v?50*1024*1024:10*1024*1024;if(L.size>R){a.warning(v?"ÿ≠ÿ¨ŸÖ ÿßŸÑŸÅŸäÿØŸäŸà Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 50 ŸÖŸäÿ¨ÿß":"ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 10 ŸÖŸäÿ¨ÿß");return}U({...f,type:v?"video":"image",mediaFile:L,mediaPreview:URL.createObjectURL(L)})},b=async k=>{if(k.preventDefault(),!!s){if(f.type!=="text"&&!f.mediaFile){a.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà");return}if(!f.title.trim()&&!f.description.trim()&&!f.mediaFile){a.warning("Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≠ÿ™ŸàŸâ ŸÑŸÑÿ•ÿπŸÑÿßŸÜ");return}try{P(!0);let L="";if(f.mediaFile){const v=f.mediaFile.name.replace(/\s+/g,"_").slice(-60),R=`promotions/${s.uid}_${Date.now()}_${v}`,c=ks(yt,R),o=Tt(c,f.mediaFile);await new Promise((_,O)=>{o.on("state_changed",q=>{const m=Math.round(q.bytesTransferred/q.totalBytes*100);T(m)},O,async()=>{L=await Ss(o.snapshot.ref),_()})})}const $=new Date;$.setHours($.getHours()+Da),await Te(se(S,"promotions"),{ownerId:s.uid,restaurantId:s.uid,type:f.type,title:f.title.trim(),description:f.description.trim(),mediaUrl:L,isActive:!0,isPaid:!0,price:bl,duration:Da,viewsCount:0,expiresAt:fa.fromDate($),createdAt:X(),updatedAt:X()}),a.success(`ÿ™ŸÖ ŸÜÿ¥ÿ± ÿ•ÿπŸÑÿßŸÜŸÉ! ‚ú® ÿ≥Ÿäÿ∏Ÿáÿ± ŸÑŸÖÿØÿ© ${Da} ÿ≥ÿßÿπÿ©`),U({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""}),E(!1),T(0),g()}catch(L){a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ŸÜÿ¥ÿ± ÿßŸÑÿ•ÿπŸÑÿßŸÜ"),console.error(L)}finally{P(!1)}}},h=async k=>{if(await n.confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ•ÿπŸÑÿßŸÜÿü",{dangerous:!0}))try{await As(J(S,"promotions",k)),a.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ•ÿπŸÑÿßŸÜ"),g()}catch{a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}};return y?e.jsxs("div",{className:"flex items-center justify-center h-96",children:[e.jsx(qe,{className:"w-6 h-6 animate-spin ml-2"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."]}):e.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(Ls,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"ÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÖŸàŸÑÿ©"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"ÿ£ŸÜÿ¥ÿ¶ ÿ•ÿπŸÑÿßŸÜŸÉ Ÿàÿ≥Ÿäÿ∏Ÿáÿ± ŸÑŸÑÿπŸÖŸÑÿßÿ° ŸÅŸä ÿµŸÅÿ≠ÿ© ÿ£ÿ≥ÿ±ÿ™ŸÉ"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(is,{className:"w-5 h-5 text-purple-500"}),e.jsxs("span",{className:"text-lg font-bold text-purple-700",children:[bl," ÿ±.ÿ≥ ŸÅŸÇÿ∑ ŸÑŸÖÿØÿ© ",Da," ÿ≥ÿßÿπÿ©"]}),e.jsx(is,{className:"w-5 h-5 text-purple-500"})]}),e.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"ÿ£ÿ∂ŸÅ ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà ÿ£Ÿà ŸÜÿµ ÿ™ÿ±ŸàŸäÿ¨Ÿä ŸÑÿ£ÿ≥ÿ±ÿ™ŸÉ"})]}),!D&&e.jsxs("button",{onClick:()=>E(!0),className:"w-full py-4 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[e.jsx(vs,{className:"w-6 h-6"}),"ÿ•ŸÜÿ¥ÿßÿ° ÿ•ÿπŸÑÿßŸÜ ÿ¨ÿØŸäÿØ"]}),D&&e.jsxs("form",{onSubmit:b,className:"bg-white rounded-2xl shadow-xl p-6 space-y-4",children:[e.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:"ÿ•ŸÜÿ¥ÿßÿ° ÿ•ÿπŸÑÿßŸÜ ÿ¨ÿØŸäÿØ"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ŸÜŸàÿπ ÿßŸÑÿ•ÿπŸÑÿßŸÜ"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>U({...f,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${f.type==="text"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(ys,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"ŸÜÿµ"})]}),e.jsxs("button",{type:"button",onClick:()=>{var k;U({...f,type:"image"}),(k=j.current)==null||k.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${f.type==="image"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(zt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"ÿµŸàÿ±ÿ©"})]}),e.jsxs("button",{type:"button",onClick:()=>{var k;U({...f,type:"video"}),(k=j.current)==null||k.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${f.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(Qa,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"ŸÅŸäÿØŸäŸà"})]})]})]}),e.jsx("input",{type:"file",ref:j,accept:"image/*,video/*",onChange:M,className:"hidden"}),f.mediaPreview&&e.jsxs("div",{className:"relative",children:[f.type==="video"?e.jsx("video",{src:f.mediaPreview,controls:!0,className:"w-full h-48 object-cover rounded-xl"}):e.jsx("img",{src:f.mediaPreview,alt:"ŸÖÿπÿßŸäŸÜÿ©",className:"w-full h-48 object-cover rounded-xl"}),e.jsx("button",{type:"button",onClick:()=>U({...f,mediaFile:null,mediaPreview:"",type:"text"}),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full",children:e.jsx(lt,{className:"w-4 h-4"})})]}),f.type!=="text"&&!f.mediaPreview&&e.jsxs("button",{type:"button",onClick:()=>{var k;return(k=j.current)==null?void 0:k.click()},className:"w-full py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-purple-400 transition flex items-center justify-center gap-2",children:[e.jsx(ua,{className:"w-5 h-5"}),"ÿßÿÆÿ™ÿ± ",f.type==="video"?"ŸÅŸäÿØŸäŸà":"ÿµŸàÿ±ÿ©"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"text",value:f.title,onChange:k=>U({...f,title:k.target.value}),placeholder:"ŸÖÿ´ÿßŸÑ: ÿπÿ±ÿ∂ ÿÆÿßÿµ ÿßŸÑŸäŸàŸÖ!",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ÿßŸÑÿ¥ÿ±ÿ≠ ÿ£Ÿà ÿßŸÑŸàÿµŸÅ"}),e.jsx("textarea",{value:f.description,onChange:k=>U({...f,description:k.target.value}),placeholder:"ÿßŸÉÿ™ÿ® ÿ™ŸÅÿßÿµŸäŸÑ ÿ•ÿπŸÑÿßŸÜŸÉ ŸáŸÜÿß...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),B&&N>0&&e.jsx("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-full transition-all",style:{width:`${N}%`}})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:B,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:B?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑŸÜÿ¥ÿ±..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-5 h-5"}),"ŸÜÿ¥ÿ± ÿßŸÑÿ•ÿπŸÑÿßŸÜ (",bl," ÿ±.ÿ≥)"]})}),e.jsx("button",{type:"button",onClick:()=>{E(!1),U({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""})},className:"px-4 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-medium",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"font-bold text-lg text-gray-800",children:"ÿ•ÿπŸÑÿßŸÜÿßÿ™ŸÉ"}),d.length===0?e.jsxs("div",{className:"text-center py-10 text-gray-400",children:[e.jsx(Ls,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"ŸÑŸÖ ÿ™ŸÜÿ¥ÿ¶ ÿ£Ÿä ÿ•ÿπŸÑÿßŸÜÿßÿ™ ÿ®ÿπÿØ"})]}):d.map(k=>e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden ${w(k)?"opacity-60":""}`,children:[k.mediaUrl&&(k.type==="video"?e.jsx("video",{src:k.mediaUrl,controls:!0,className:"w-full h-48 object-cover"}):e.jsx("img",{src:k.mediaUrl,alt:k.title,className:"w-full h-48 object-cover"})),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w(k)?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-500 text-xs font-medium rounded-full",children:[e.jsx(lt,{className:"w-3 h-3"})," ŸÖŸÜÿ™ŸáŸä"]}):k.isActive?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-600 text-xs font-medium rounded-full",children:[e.jsx(Ie,{className:"w-3 h-3"})," ŸÜÿ¥ÿ∑"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-600 text-xs font-medium rounded-full",children:[e.jsx(Ye,{className:"w-3 h-3"})," ŸÅŸä ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±"]}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-600 text-xs font-medium rounded-full",children:[e.jsx(ws,{className:"w-3 h-3"})," ",k.viewsCount," ŸÖÿ¥ÿßŸáÿØÿ©"]})]}),k.title&&e.jsx("h3",{className:"font-bold text-gray-800",children:k.title}),k.description&&e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:[k.expiresAt&&!w(k)&&e.jsxs(e.Fragment,{children:["ŸäŸÜÿ™ŸáŸä: ",new Date(k.expiresAt).toLocaleString("ar-SA")]}),w(k)&&"ÿßŸÜÿ™Ÿáÿ™ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑÿ•ÿπŸÑÿßŸÜ"]}),e.jsx("button",{onClick:()=>h(k.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",children:e.jsx(Ns,{className:"w-4 h-4"})})]})]})]},k.id))]}),e.jsxs(le,{to:"/owner",className:"flex items-center justify-center gap-2 text-sky-600 hover:text-sky-700 py-4",children:[e.jsx(Rs,{className:"w-5 h-5"}),"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ"]})]})},xn=[{value:"percent_discount",label:"ÿÆÿµŸÖ ŸÜÿ≥ÿ®ÿ© %",icon:Fl,desc:"ÿÆÿµŸÖ ŸÜÿ≥ÿ®ÿ© ŸÖÿ¶ŸàŸäÿ© ÿπŸÑŸâ ÿßŸÑÿ∑ŸÑÿ®"},{value:"fixed_discount",label:"ÿÆÿµŸÖ ŸÖÿ®ŸÑÿ∫ ÿ´ÿßÿ®ÿ™",icon:Yt,desc:"ÿÆÿµŸÖ ŸÖÿ®ŸÑÿ∫ ŸÖÿ≠ÿØÿØ ŸÖŸÜ ÿßŸÑÿ∑ŸÑÿ®"},{value:"bundle_meal",label:"Ÿàÿ¨ÿ®ÿ© ŸÖÿ¨ŸÖŸëÿπÿ©",icon:Oe,desc:"ŸÖÿ¨ŸÖŸàÿπÿ© ÿ£ÿµŸÜÿßŸÅ ÿ®ÿ≥ÿπÿ± ÿÆÿßÿµ"},{value:"buy_x_get_y",label:"ÿßÿ¥ÿ™ÿ±Ÿê Ÿàÿßÿ≠ÿµŸÑ",icon:Os,desc:"ÿßÿ¥ÿ™ÿ±Ÿê 2 Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ 1 ŸÖÿ¨ÿßŸÜÿßŸã"}],cd=[{value:"iftar_package",label:"ÿ®ÿßŸÇÿ© ÿ•ŸÅÿ∑ÿßÿ±",icon:wi,desc:"Ÿàÿ¨ÿ®ÿ© ÿ•ŸÅÿ∑ÿßÿ± ŸÖÿ™ŸÉÿßŸÖŸÑÿ©",color:"from-amber-500 to-orange-600"},{value:"suhoor_package",label:"ÿ®ÿßŸÇÿ© ÿ≥ÿ≠Ÿàÿ±",icon:$l,desc:"Ÿàÿ¨ÿ®ÿ© ÿ≥ÿ≠Ÿàÿ± ŸÖŸÖŸäÿ≤ÿ©",color:"from-indigo-500 to-purple-600"},{value:"family_bundle",label:"ÿπÿ±ÿ∂ ÿπÿßÿ¶ŸÑŸä",icon:zs,desc:"ÿ®ÿßŸÇÿ© ŸÑŸÑÿπÿßÿ¶ŸÑÿ© ÿ®ÿ≥ÿπÿ± ÿÆÿßÿµ",color:"from-emerald-500 to-teal-600"},{value:"discount",label:"ÿÆÿµŸÖ ÿ±ŸÖÿ∂ÿßŸÜŸä",icon:Yt,desc:"ÿÆÿµŸÖ ÿÆÿßÿµ ÿ®ŸÖŸÜÿßÿ≥ÿ®ÿ© ÿ±ŸÖÿ∂ÿßŸÜ",color:"from-rose-500 to-pink-600"}],dd=xn,fl={offerType:"percent_discount",title:"",description:"",discountPercent:10,discountAmount:5,minOrderAmount:0,bundleItems:[],bundlePrice:0,buyQuantity:2,getQuantity:1,applicableItemIds:[],expiresAt:"",imageUrl:"",originalPrice:0,offerPrice:0,servesCount:4},od=()=>{const{user:s}=Ee(),a=ze(),[n]=pa(),d=n.get("type")==="ramadan"&&Qt(),[i,y]=t.useState([]),[r,D]=t.useState([]),[E,B]=t.useState(!0),[P,N]=t.useState(!1),[T,j]=t.useState(!1),[f,U]=t.useState(null),[g,w]=t.useState({...fl,offerType:d?"iftar_package":"percent_discount"}),[M,b]=t.useState(null),[h,k]=t.useState(!1),[L,$]=t.useState(0),[v,R]=t.useState(null),c=t.useRef(null);t.useEffect(()=>{if(!s)return;(async()=>{try{const C=await Ce(J(S,"restaurants",s.uid));C.exists()&&b(C.data());const V=be(se(S,"offers"),je("ownerId","==",s.uid)),ne=(await pe(V)).docs.map(Ne=>({id:Ne.id,...Ne.data()})),re=be(se(S,"ramadanOffers"),je("ownerId","==",s.uid)),he=(await pe(re)).docs.map(Ne=>({id:Ne.id,...Ne.data(),isRamadanOffer:!0}));y(d?he:ne);const F=be(se(S,"menuItems"),je("ownerId","==",s.uid)),te=await pe(F);D(te.docs.map(Ne=>({id:Ne.id,...Ne.data()})))}catch(C){console.error("Error fetching data:",C),a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{B(!1)}})()},[s,d]);const o=async u=>{if(s){k(!0),$(0);try{const C=ba(Cs),V=`ramadan_offers/${s.uid}/${Date.now()}_${u.name}`,W=ks(C,V),ne=Tt(W,u);ne.on("state_changed",re=>{const fe=re.bytesTransferred/re.totalBytes*100;$(fe)},re=>{console.error("Upload error:",re),a.error("ŸÅÿ¥ŸÑ ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©"),k(!1)},async()=>{const re=await Ss(ne.snapshot.ref);w(fe=>({...fe,imageUrl:re})),R(re),k(!1),a.success("ÿ™ŸÖ ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ© ‚úÖ")})}catch(C){console.error("Error uploading image:",C),a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ±ŸÅÿπ ÿßŸÑÿµŸàÿ±ÿ©"),k(!1)}}},_=u=>{var V;const C=(V=u.target.files)==null?void 0:V[0];if(C){if(C.size>5*1024*1024){a.error("ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 5MB");return}const W=new FileReader;W.onload=ne=>{var re;R((re=ne.target)==null?void 0:re.result)},W.readAsDataURL(C),o(C)}},O=u=>["iftar_package","suhoor_package","family_bundle","discount"].includes(u),q=async()=>{if(s){if(!g.title.trim()){a.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿπŸÜŸàÿßŸÜ ÿßŸÑÿπÿ±ÿ∂");return}if(d&&O(g.offerType)&&g.offerType!=="discount"&&(!g.offerPrice||g.offerPrice<=0)){a.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ≥ÿπÿ± ÿßŸÑÿπÿ±ÿ∂");return}N(!0);try{const u=d?"ramadanOffers":"offers",C={ownerId:s.uid,restaurantId:s.uid,restaurantName:M==null?void 0:M.name,restaurantLogo:M==null?void 0:M.logoUrl,offerType:g.offerType,title:g.title.trim(),description:g.description.trim(),isActive:!0,viewsCount:0,usedCount:0,updatedAt:X()};if(d&&O(g.offerType)?(C.imageUrl=g.imageUrl||"",C.originalPrice=g.originalPrice||0,C.offerPrice=g.offerPrice||0,C.servesCount=g.servesCount||4,C.isRamadanOffer=!0,g.originalPrice>0&&g.offerPrice>0&&(C.discountPercent=Math.round((g.originalPrice-g.offerPrice)/g.originalPrice*100))):g.offerType==="percent_discount"?(C.discountPercent=g.discountPercent,C.minOrderAmount=g.minOrderAmount):g.offerType==="fixed_discount"?(C.discountAmount=g.discountAmount,C.minOrderAmount=g.minOrderAmount):g.offerType==="bundle_meal"?(C.bundleItems=g.bundleItems,C.bundlePrice=g.bundlePrice,C.bundleOriginalPrice=g.bundleItems.reduce((V,W)=>V+W.originalPrice*W.quantity,0)):g.offerType==="buy_x_get_y"&&(C.buyQuantity=g.buyQuantity,C.getQuantity=g.getQuantity,C.applicableItemIds=g.applicableItemIds,C.applicableItemNames=r.filter(V=>g.applicableItemIds.includes(V.id)).map(V=>V.name)),g.expiresAt&&(C.expiresAt=new Date(g.expiresAt)),f)await xe(J(S,u,f),C),y(V=>V.map(W=>W.id===f?{...W,...C}:W)),a.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿ±ÿ∂ ‚úÖ");else{C.createdAt=X();const V=await Te(se(S,u),C);y(W=>[{id:V.id,...C},...W]),a.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπÿ±ÿ∂ ‚úÖ")}j(!1),U(null),w({...fl,offerType:d?"iftar_package":"percent_discount"}),R(null)}catch(u){console.error("Error saving offer:",u),a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿπÿ±ÿ∂")}finally{N(!1)}}},m=async u=>{const C=u.isRamadanOffer?"ramadanOffers":"offers";try{await xe(J(S,C,u.id),{isActive:!u.isActive,updatedAt:X()}),y(V=>V.map(W=>W.id===u.id?{...W,isActive:!W.isActive}:W)),a.success(u.isActive?"ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿπÿ±ÿ∂":"ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿπÿ±ÿ∂")}catch{a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}},p=async(u,C)=>{if(!confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿπÿ±ÿ∂ÿü"))return;const V=d?"ramadanOffers":"offers";try{await As(J(S,V,u)),y(W=>W.filter(ne=>ne.id!==u)),a.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿπÿ±ÿ∂")}catch{a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}},I=u=>{U(u.id),w({offerType:u.offerType,title:u.title,description:u.description||"",discountPercent:u.discountPercent||10,discountAmount:u.discountAmount||5,minOrderAmount:u.minOrderAmount||0,bundleItems:u.bundleItems||[],bundlePrice:u.bundlePrice||0,buyQuantity:u.buyQuantity||2,getQuantity:u.getQuantity||1,applicableItemIds:u.applicableItemIds||[],expiresAt:u.expiresAt?new Date(u.expiresAt).toISOString().slice(0,16):"",imageUrl:u.imageUrl||"",originalPrice:u.originalPrice||0,offerPrice:u.offerPrice||0,servesCount:u.servesCount||4}),R(u.imageUrl||null),j(!0)},x=u=>{const C=g.bundleItems.find(V=>V.itemId===u.id);w(C?{...g,bundleItems:g.bundleItems.map(V=>V.itemId===u.id?{...V,quantity:V.quantity+1}:V)}:{...g,bundleItems:[...g.bundleItems,{itemId:u.id,itemName:u.name,quantity:1,originalPrice:u.price}]})},Q=u=>{w({...g,bundleItems:g.bundleItems.filter(C=>C.itemId!==u)})},A=g.bundleItems.reduce((u,C)=>u+C.originalPrice*C.quantity,0);return E?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(as,{className:"w-8 h-8 text-sky-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`flex items-center justify-between ${d?"bg-gradient-to-r from-purple-900 to-emerald-900 -mx-4 -mt-4 p-4 rounded-b-2xl":""}`,children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${d?"text-amber-300":"text-sky-700"}`,children:d?"üåô ÿπÿ±Ÿàÿ∂ ÿ±ŸÖÿ∂ÿßŸÜ":"üéÅ ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑÿÆÿßÿµÿ©"}),e.jsx("p",{className:`text-sm mt-1 ${d?"text-purple-200":"text-gray-500"}`,children:d?"ÿ£ÿ∂ŸÅ ÿ®ÿßŸÇÿßÿ™ ÿ•ŸÅÿ∑ÿßÿ± Ÿàÿ≥ÿ≠Ÿàÿ± Ÿàÿπÿ±Ÿàÿ∂ ÿ±ŸÖÿ∂ÿßŸÜŸäÿ© ŸÖŸÖŸäÿ≤ÿ©":"ÿ£ÿ∂ŸÅ ÿπÿ±Ÿàÿ∂ ÿ™ÿ¨ÿ∞ÿ® ÿßŸÑÿπŸÖŸÑÿßÿ° Ÿàÿ™ÿ≤ŸäÿØ ŸÖÿ®Ÿäÿπÿßÿ™ŸÉ"})]}),e.jsxs("button",{onClick:()=>{j(!0),U(null),w({...fl,offerType:d?"iftar_package":"percent_discount"}),R(null)},className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold shadow-lg hover:scale-105 transition ${d?"bg-gradient-to-r from-amber-400 to-amber-500 text-purple-900":"bg-gradient-to-r from-sky-500 to-sky-600 text-white"}`,children:[e.jsx(vs,{className:"w-5 h-5"}),d?"ÿπÿ±ÿ∂ ÿ±ŸÖÿ∂ÿßŸÜŸä":"ÿπÿ±ÿ∂ ÿ¨ÿØŸäÿØ"]})]}),T&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:`p-4 text-white sticky top-0 z-10 ${d?"bg-gradient-to-r from-purple-900 to-emerald-900":"bg-gradient-to-r from-sky-500 to-sky-600"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold",children:f?d?"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ ÿπÿ±ÿ∂ ÿ±ŸÖÿ∂ÿßŸÜ":"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿπÿ±ÿ∂":d?"üåô ÿ•ÿ∂ÿßŸÅÿ© ÿπÿ±ÿ∂ ÿ±ŸÖÿ∂ÿßŸÜŸä":"‚ûï ÿ•ÿ∂ÿßŸÅÿ© ÿπÿ±ÿ∂ ÿ¨ÿØŸäÿØ"}),e.jsx("button",{onClick:()=>{j(!1),R(null)},className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜŸàÿπ ÿßŸÑÿπÿ±ÿ∂"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(d?cd:xn).map(u=>e.jsxs("button",{onClick:()=>w({...g,offerType:u.value}),className:`p-3 rounded-xl border-2 text-right transition ${g.offerType===u.value?d?"border-purple-500 bg-purple-50":"border-sky-500 bg-sky-50":"border-gray-200 hover:border-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(u.icon,{className:`w-5 h-5 ${g.offerType===u.value?d?"text-purple-600":"text-sky-600":"text-gray-400"}`}),e.jsx("span",{className:"font-bold text-sm",children:u.label})]}),e.jsx("p",{className:"text-xs text-gray-500",children:u.desc})]},u.value))})]}),d&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿµŸàÿ±ÿ© ÿßŸÑÿπÿ±ÿ∂"}),e.jsxs("div",{className:"border-2 border-dashed border-purple-300 rounded-xl p-4 text-center bg-purple-50/50",children:[v?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:v,alt:"ŸÖÿπÿßŸäŸÜÿ©",className:"w-full h-48 object-cover rounded-xl"}),e.jsx("button",{onClick:()=>{R(null),w({...g,imageUrl:""})},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:e.jsx(_e,{className:"w-4 h-4"})})]}):e.jsx("div",{onClick:()=>{var u;return(u=c.current)==null?void 0:u.click()},className:"cursor-pointer py-8",children:h?e.jsxs("div",{className:"space-y-2",children:[e.jsx(as,{className:"w-10 h-10 text-purple-500 animate-spin mx-auto"}),e.jsxs("p",{className:"text-purple-600 font-bold",children:[Math.round(L),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"w-12 h-12 text-purple-400 mx-auto mb-2"}),e.jsx("p",{className:"text-purple-600 font-semibold",children:"ÿßÿ∂ÿ∫ÿ∑ ŸÑÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿßŸÑÿπÿ±ÿ∂"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG ÿ≠ÿ™Ÿâ 5MB"})]})}),e.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:_,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿπŸÜŸàÿßŸÜ ÿßŸÑÿπÿ±ÿ∂ *"}),e.jsx("input",{type:"text",value:g.title,onChange:u=>w({...g,title:u.target.value}),placeholder:"ŸÖÿ´ÿßŸÑ: ÿπÿ±ÿ∂ ŸÜŸáÿßŸäÿ© ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸàÿµŸÅ ÿßŸÑÿπÿ±ÿ∂"}),e.jsx("textarea",{value:g.description,onChange:u=>w({...g,description:u.target.value}),placeholder:d?"ŸàÿµŸÅ ŸÖÿ≠ÿ™ŸàŸäÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿ©...":"ŸàÿµŸÅ ŸÖÿÆÿ™ÿµÿ± ŸÑŸÑÿπÿ±ÿ∂...",rows:2,className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none resize-none"})]}),d&&O(g.offerType)&&g.offerType!=="discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-gradient-to-br from-purple-50 to-amber-50 rounded-xl border-2 border-purple-200",children:[e.jsxs("h4",{className:"font-bold text-purple-800 flex items-center gap-2",children:[e.jsx($l,{className:"w-5 h-5"}),"ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ©"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿ™ŸÉŸÅŸä ŸÉŸÖ ÿ¥ÿÆÿµÿü"}),e.jsx("div",{className:"flex gap-2",children:[2,4,6,8,10].map(u=>e.jsx("button",{type:"button",onClick:()=>w({...g,servesCount:u}),className:`px-4 py-2 rounded-lg font-bold transition ${g.servesCount===u?"bg-purple-600 text-white":"bg-white border border-purple-200 text-purple-600 hover:bg-purple-50"}`,children:u},u))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿµŸÑŸä (ÿ±.ÿ≥)"}),e.jsx("input",{type:"number",value:g.originalPrice||"",onChange:u=>w({...g,originalPrice:Number(u.target.value)||0}),placeholder:"150",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿ≥ÿπÿ± ÿßŸÑÿπÿ±ÿ∂ (ÿ±.ÿ≥) *"}),e.jsx("input",{type:"number",value:g.offerPrice||"",onChange:u=>w({...g,offerPrice:Number(u.target.value)||0}),placeholder:"99",className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]})]}),g.originalPrice>0&&g.offerPrice>0&&g.originalPrice>g.offerPrice&&e.jsxs("div",{className:"bg-green-100 text-green-700 p-3 rounded-xl text-center font-bold",children:["ÿ™ŸàŸÅŸäÿ± ",Math.round((g.originalPrice-g.offerPrice)/g.originalPrice*100),"% üéâ"]})]}),d&&g.offerType==="discount"&&e.jsx("div",{className:"space-y-4 p-4 bg-rose-50 rounded-xl",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿÆÿµŸÖ %"}),e.jsx("input",{type:"number",value:g.discountPercent,onChange:u=>w({...g,discountPercent:Number(u.target.value)}),min:1,max:90,className:"w-full border-2 border-rose-200 rounded-xl px-4 py-3 focus:border-rose-500 focus:outline-none"})]})}),!d&&g.offerType==="percent_discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-amber-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿÆÿµŸÖ %"}),e.jsx("input",{type:"number",value:g.discountPercent,onChange:u=>w({...g,discountPercent:Number(u.target.value)}),min:1,max:90,className:"w-full border-2 border-amber-200 rounded-xl px-4 py-3 focus:border-amber-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ∑ŸÑÿ® (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"number",value:g.minOrderAmount||"",onChange:u=>w({...g,minOrderAmount:Number(u.target.value)||0}),placeholder:"0 = ÿ®ÿØŸàŸÜ ÿ≠ÿØ ÿ£ÿØŸÜŸâ",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]})]}),!d&&g.offerType==="fixed_discount"&&e.jsxs("div",{className:"space-y-4 p-4 bg-green-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿÆÿµŸÖ (ÿ±.ÿ≥)"}),e.jsx("input",{type:"number",value:g.discountAmount,onChange:u=>w({...g,discountAmount:Number(u.target.value)}),min:1,className:"w-full border-2 border-green-200 rounded-xl px-4 py-3 focus:border-green-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ∑ŸÑÿ® (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"number",value:g.minOrderAmount||"",onChange:u=>w({...g,minOrderAmount:Number(u.target.value)||0}),placeholder:"0 = ÿ®ÿØŸàŸÜ ÿ≠ÿØ ÿ£ÿØŸÜŸâ",className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]})]}),!d&&g.offerType==="bundle_meal"&&e.jsxs("div",{className:"space-y-4 p-4 bg-purple-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿ£ÿµŸÜÿßŸÅ ÿßŸÑŸàÿ¨ÿ®ÿ©"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:g.bundleItems.map(u=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white rounded-full text-sm border",children:[u.itemName," √ó ",u.quantity,e.jsx("button",{onClick:()=>Q(u.itemId),className:"text-red-500 hover:text-red-700",children:e.jsx(_e,{className:"w-4 h-4"})})]},u.itemId))}),e.jsxs("select",{onChange:u=>{const C=r.find(V=>V.id===u.target.value);C&&x(C),u.target.value=""},className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"+ ÿ£ÿ∂ŸÅ ÿµŸÜŸÅ ŸÑŸÑŸàÿ¨ÿ®ÿ©"}),r.filter(u=>u.available!==!1).map(u=>e.jsxs("option",{value:u.id,children:[u.name," - ",u.price," ÿ±.ÿ≥"]},u.id))]})]}),A>0&&e.jsxs("div",{className:"bg-white p-3 rounded-xl",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿµŸÑŸä: ",e.jsxs("span",{className:"line-through",children:[A," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"ÿ≥ÿπÿ± ÿßŸÑÿπÿ±ÿ∂"}),e.jsx("input",{type:"number",value:g.bundlePrice||"",onChange:u=>w({...g,bundlePrice:Number(u.target.value)}),placeholder:`ÿßŸÇÿ™ÿ±ÿ≠: ${(A*.8).toFixed(0)} ÿ±.ÿ≥`,className:"w-full border-2 border-purple-200 rounded-xl px-4 py-3 focus:border-purple-500 focus:outline-none"})]})]})]}),!d&&g.offerType==="buy_x_get_y"&&e.jsxs("div",{className:"space-y-4 p-4 bg-pink-50 rounded-xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿßÿ¥ÿ™ÿ±Ÿê"}),e.jsx("input",{type:"number",value:g.buyQuantity,onChange:u=>w({...g,buyQuantity:Number(u.target.value)}),min:1,className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ"}),e.jsx("input",{type:"number",value:g.getQuantity,onChange:u=>w({...g,getQuantity:Number(u.target.value)}),min:1,className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿßŸÑÿ£ÿµŸÜÿßŸÅ ÿßŸÑŸÖÿ¥ŸÖŸàŸÑÿ©"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:g.applicableItemIds.map(u=>{const C=r.find(V=>V.id===u);return C?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white rounded-full text-sm border",children:[C.name,e.jsx("button",{onClick:()=>w({...g,applicableItemIds:g.applicableItemIds.filter(V=>V!==u)}),className:"text-red-500",children:e.jsx(_e,{className:"w-4 h-4"})})]},u):null})}),e.jsxs("select",{onChange:u=>{u.target.value&&!g.applicableItemIds.includes(u.target.value)&&w({...g,applicableItemIds:[...g.applicableItemIds,u.target.value]}),u.target.value=""},className:"w-full border-2 border-pink-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"+ ÿ£ÿ∂ŸÅ ÿµŸÜŸÅ"}),r.filter(u=>u.available!==!1&&!g.applicableItemIds.includes(u.id)).map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿπÿ±ÿ∂ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"datetime-local",value:g.expiresAt,onChange:u=>w({...g,expiresAt:u.target.value}),className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-sky-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{onClick:q,disabled:P,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-sky-500 to-sky-600 text-white rounded-xl font-bold shadow-lg hover:scale-[1.02] transition disabled:opacity-50",children:[P?e.jsx(as,{className:"w-5 h-5 animate-spin"}):e.jsx(Ll,{className:"w-5 h-5"}),f?"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™":"ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπÿ±ÿ∂"]}),e.jsx("button",{onClick:()=>j(!1),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]})}),i.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Os,{className:"w-10 h-10 text-sky-500"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿπÿ±Ÿàÿ∂ ÿ≠ÿßŸÑŸäÿßŸã"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ÿ£ÿ∂ŸÅ ÿπÿ±Ÿàÿ∂ ŸÑÿ¨ÿ∞ÿ® ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿπŸÖŸÑÿßÿ°"})]}):e.jsx("div",{className:"grid gap-4",children:i.map(u=>{var ne;const C=dd.find(re=>re.value===u.offerType),V=(C==null?void 0:C.icon)||Yt,W=u.expiresAt&&new Date(u.expiresAt)<new Date;return e.jsx("div",{className:`bg-white rounded-2xl shadow-md overflow-hidden border-2 transition ${!u.isActive||W?"border-gray-200 opacity-60":"border-sky-100"}`,children:e.jsxs("div",{className:"flex items-stretch",children:[e.jsx("div",{className:`w-24 flex-shrink-0 flex items-center justify-center ${u.offerType==="percent_discount"?"bg-amber-100":u.offerType==="fixed_discount"?"bg-green-100":u.offerType==="bundle_meal"?"bg-purple-100":"bg-pink-100"}`,children:e.jsx(V,{className:`w-10 h-10 ${u.offerType==="percent_discount"?"text-amber-600":u.offerType==="fixed_discount"?"text-green-600":u.offerType==="bundle_meal"?"text-purple-600":"text-pink-600"}`})}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:u.title}),e.jsx("p",{className:"text-sm text-gray-500",children:C==null?void 0:C.label})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>m(u),className:`p-2 rounded-lg transition ${u.isActive?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:u.isActive?"ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿπÿ±ÿ∂":"ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿπÿ±ÿ∂",children:u.isActive?e.jsx(ws,{className:"w-4 h-4"}):e.jsx(vi,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(u),className:"p-2 rounded-lg bg-sky-100 text-sky-600 hover:bg-sky-200 transition",children:e.jsx(ki,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(u.id),className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition",children:e.jsx(Ns,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[u.offerType==="percent_discount"&&e.jsxs("p",{className:"text-amber-600 font-bold",children:["ÿÆÿµŸÖ ",u.discountPercent,"%"]}),u.offerType==="fixed_discount"&&e.jsxs("p",{className:"text-green-600 font-bold",children:["ÿÆÿµŸÖ ",u.discountAmount," ÿ±.ÿ≥"]}),u.offerType==="bundle_meal"&&e.jsxs("p",{className:"text-purple-600 font-bold",children:[(ne=u.bundleItems)==null?void 0:ne.length," ÿ£ÿµŸÜÿßŸÅ ÿ®ŸÄ ",u.bundlePrice," ÿ±.ÿ≥",e.jsxs("span",{className:"text-gray-400 line-through mr-2",children:[u.bundleOriginalPrice," ÿ±.ÿ≥"]})]}),u.offerType==="buy_x_get_y"&&e.jsxs("p",{className:"text-pink-600 font-bold",children:["ÿßÿ¥ÿ™ÿ±Ÿê ",u.buyQuantity," Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ",u.getQuantity," ŸÖÿ¨ÿßŸÜÿßŸã"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-3 h-3"})," ",u.viewsCount||0," ŸÖÿ¥ÿßŸáÿØÿ©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(cs,{className:"w-3 h-3"})," ",u.usedCount||0," ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ"]}),W&&e.jsxs("span",{className:"text-red-500 flex items-center gap-1",children:[e.jsx(Ye,{className:"w-3 h-3"})," ŸÖŸÜÿ™ŸáŸä"]})]})]})]})},u.id)})})]})},xd=24,md=()=>{const{user:s}=Ee(),a=ze(),[n,d]=t.useState([]),[i,y]=t.useState([]),[r,D]=t.useState(!0),[E,B]=t.useState(!1),[P,N]=t.useState(!1),[T,j]=t.useState(0),[f,U]=t.useState(null),g=t.useRef(null),[w,M]=t.useState({type:"image",mediaFile:null,mediaPreview:"",caption:"",backgroundColor:"#0ea5e9",textColor:"#ffffff",menuItemId:""});t.useEffect(()=>{s&&b()},[s]);const b=async()=>{if(s)try{const c=await Ce(J(S,"restaurants",s.uid));c.exists()&&U(c.data());const o=be(se(S,"stories"),je("ownerId","==",s.uid)),_=await pe(o),O=new Date,q=_.docs.map(I=>{var x,Q,A,u;return{id:I.id,...I.data(),expiresAt:(Q=(x=I.data().expiresAt)==null?void 0:x.toDate)==null?void 0:Q.call(x),createdAt:(u=(A=I.data().createdAt)==null?void 0:A.toDate)==null?void 0:u.call(A)}}).filter(I=>I.expiresAt&&new Date(I.expiresAt)>O).sort((I,x)=>{var Q,A;return(((Q=x.createdAt)==null?void 0:Q.getTime())||0)-(((A=I.createdAt)==null?void 0:A.getTime())||0)});d(q);const m=be(se(S,"menuItems"),je("ownerId","==",s.uid)),p=await pe(m);y(p.docs.map(I=>({id:I.id,...I.data()})))}catch(c){console.error("Error loading data:",c),a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{D(!1)}},h=c=>{var m;const o=(m=c.target.files)==null?void 0:m[0];if(!o)return;const _=o.type.startsWith("image/"),O=o.type.startsWith("video/");if(!_&&!O){a.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà");return}const q=O?30*1024*1024:10*1024*1024;if(o.size>q){a.warning(O?"ÿ≠ÿ¨ŸÖ ÿßŸÑŸÅŸäÿØŸäŸà Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 30 ŸÖŸäÿ¨ÿß":"ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 10 ŸÖŸäÿ¨ÿß");return}M({...w,type:O?"video":"image",mediaFile:o,mediaPreview:URL.createObjectURL(o)})},k=async()=>{if(s){if(w.type!=="text"&&!w.mediaFile){a.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà");return}if(w.type==="text"&&!w.caption.trim()){a.warning("Ÿäÿ±ÿ¨Ÿâ ŸÉÿ™ÿßÿ®ÿ© ŸÜÿµ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä");return}N(!0);try{let c="";if(w.mediaFile){const m=w.mediaFile.name.split(".").pop(),p=`stories/${s.uid}/${Date.now()}.${m}`,I=ks(yt,p),x=Tt(I,w.mediaFile);await new Promise((Q,A)=>{x.on("state_changed",u=>{const C=u.bytesTransferred/u.totalBytes*100;j(C)},A,async()=>{c=await Ss(x.snapshot.ref),Q()})})}const o=new Date;o.setHours(o.getHours()+xd);const _=i.find(m=>m.id===w.menuItemId),O={ownerId:s.uid,restaurantId:s.uid,restaurantName:f==null?void 0:f.name,restaurantLogo:f==null?void 0:f.logoUrl,type:w.type,mediaUrl:c||void 0,caption:w.caption.trim()||void 0,backgroundColor:w.type==="text"?w.backgroundColor:void 0,textColor:w.type==="text"?w.textColor:void 0,menuItemId:w.menuItemId||void 0,menuItemName:_==null?void 0:_.name,viewsCount:0,viewedBy:[],expiresAt:fa.fromDate(o),createdAt:X()},q=await Te(se(S,"stories"),O);console.log("‚úÖ Story created successfully:",q.id),d(m=>[{id:q.id,...O,expiresAt:o,createdAt:new Date},...m]),a.success("ÿ™ŸÖ ŸÜÿ¥ÿ± ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä! üéâ"),B(!1),$()}catch(c){console.error("‚ùå Error uploading story:",c),console.error("Error code:",c==null?void 0:c.code),console.error("Error message:",c==null?void 0:c.message),a.error(`ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: ${(c==null?void 0:c.message)||"ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"}`)}finally{N(!1),j(0)}}},L=async c=>{if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿäÿü"))try{await As(J(S,"stories",c)),d(o=>o.filter(_=>_.id!==c)),a.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä")}catch{a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}},$=()=>{M({type:"image",mediaFile:null,mediaPreview:"",caption:"",backgroundColor:"#0ea5e9",textColor:"#ffffff",menuItemId:""}),g.current&&(g.current.value="")},v=c=>{const o=new Date,_=new Date(c).getTime()-o.getTime(),O=Math.floor(_/(1e3*60*60)),q=Math.floor(_%(1e3*60*60)/(1e3*60));return O>0?`${O} ÿ≥ÿßÿπÿ©`:`${q} ÿØŸÇŸäŸÇÿ©`},R=["#0ea5e9","#8b5cf6","#ec4899","#f97316","#22c55e","#1f2937","#dc2626","#0891b2"];return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(as,{className:"w-8 h-8 text-sky-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-700",children:"üì∏ ÿ≥ÿ™Ÿàÿ±Ÿä ÿßŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"ÿ¥ÿßÿ±ŸÉ ÿ∑ÿ®ÿÆ ÿßŸÑŸäŸàŸÖ Ÿàÿπÿ±Ÿàÿ∂ŸÉ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ°"})]}),e.jsxs("button",{onClick:()=>{B(!0),$()},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-bold shadow-lg hover:scale-105 transition",children:[e.jsx(vs,{className:"w-5 h-5"}),"ÿ≥ÿ™Ÿàÿ±Ÿä ÿ¨ÿØŸäÿØ"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-4 border border-pink-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-pink-700",children:[e.jsx(is,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold",children:"ÿ≥ÿ™Ÿàÿ±Ÿä ŸÖÿ¨ÿßŸÜŸä!"})]}),e.jsx("p",{className:"text-sm text-pink-600 mt-1",children:"ÿ¥ÿßÿ±ŸÉ ÿµŸàÿ± ÿßŸÑÿ∑ÿ®ÿÆ ŸàÿßŸÑÿπÿ±Ÿàÿ∂ ŸÖÿπ ÿπŸÖŸÑÿßÿ¶ŸÉ. ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä Ÿäÿ∏Ÿáÿ± ŸÑŸÄ 24 ÿ≥ÿßÿπÿ© ÿ´ŸÖ ŸäÿÆÿ™ŸÅŸä ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã."})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 p-4 text-white sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold",children:"üì∏ ÿ≥ÿ™Ÿàÿ±Ÿä ÿ¨ÿØŸäÿØ"}),e.jsx("button",{onClick:()=>B(!1),className:"p-1 hover:bg-white/20 rounded-lg",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜŸàÿπ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>M({...w,type:"image",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition ${w.type==="image"?"border-pink-500 bg-pink-50":"border-gray-200"}`,children:[e.jsx(zt,{className:`w-6 h-6 ${w.type==="image"?"text-pink-600":"text-gray-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:"ÿµŸàÿ±ÿ©"})]}),e.jsxs("button",{onClick:()=>M({...w,type:"video",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition ${w.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[e.jsx(Qa,{className:`w-6 h-6 ${w.type==="video"?"text-purple-600":"text-gray-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:"ŸÅŸäÿØŸäŸà"})]}),e.jsxs("button",{onClick:()=>M({...w,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition ${w.type==="text"?"border-sky-500 bg-sky-50":"border-gray-200"}`,children:[e.jsx(Si,{className:`w-6 h-6 ${w.type==="text"?"text-sky-600":"text-gray-400"}`}),e.jsx("span",{className:"text-xs font-medium",children:"ŸÜÿµ"})]})]})]}),(w.type==="image"||w.type==="video")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:w.type==="image"?"üì∑ ÿßÿÆÿ™ÿ± ÿµŸàÿ±ÿ©":"üé¨ ÿßÿÆÿ™ÿ± ŸÅŸäÿØŸäŸà"}),e.jsx("input",{ref:g,type:"file",accept:w.type==="video"?"video/*":"image/*",onChange:h,className:"hidden"}),w.mediaPreview?e.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-black aspect-[9/16] max-h-[300px]",children:[w.type==="video"?e.jsx("video",{src:w.mediaPreview,className:"w-full h-full object-contain",controls:!0}):e.jsx("img",{src:w.mediaPreview,alt:"Preview",className:"w-full h-full object-contain"}),e.jsx("button",{onClick:()=>{M({...w,mediaFile:null,mediaPreview:""}),g.current&&(g.current.value="")},className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full",children:e.jsx(_e,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>{var c;return(c=g.current)==null?void 0:c.click()},className:"w-full aspect-[9/16] max-h-[200px] border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center gap-2 hover:border-pink-400 hover:bg-pink-50 transition",children:[e.jsx(ua,{className:"w-10 h-10 text-gray-400"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"ÿßÿ∂ÿ∫ÿ∑ ŸÑŸÑÿ±ŸÅÿπ"}),e.jsx("span",{className:"text-xs text-gray-400",children:w.type==="video"?"ÿ≠ÿØ 30 ŸÖŸäÿ¨ÿß":"ÿ≠ÿØ 10 ŸÖŸäÿ¨ÿß"})]})]}),w.type==="text"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-[9/16] max-h-[250px] rounded-xl flex items-center justify-center p-6",style:{backgroundColor:w.backgroundColor},children:e.jsx("p",{className:"text-center text-xl font-bold leading-relaxed",style:{color:w.textColor},children:w.caption||"ÿßŸÉÿ™ÿ® ŸÜÿµ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä..."})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÑŸàŸÜ ÿßŸÑÿÆŸÑŸÅŸäÿ©"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:R.map(c=>e.jsx("button",{onClick:()=>M({...w,backgroundColor:c}),className:`w-10 h-10 rounded-full transition-transform ${w.backgroundColor===c?"ring-4 ring-pink-300 scale-110":""}`,style:{backgroundColor:c}},c))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:w.type==="text"?"ŸÜÿµ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä *":"ŸÜÿµ ŸÖÿµÿßÿ≠ÿ® (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("textarea",{value:w.caption,onChange:c=>M({...w,caption:c.target.value}),placeholder:w.type==="text"?"ÿßŸÉÿ™ÿ® ŸÜÿµ ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä...":"ŸÖÿ´ÿßŸÑ: ÿ∑ÿ®ÿÆ ÿßŸÑŸäŸàŸÖ üçö",rows:3,className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none resize-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[e.jsx(cs,{className:"w-4 h-4 inline ml-1"}),"ÿ±ÿ®ÿ∑ ÿ®ÿµŸÜŸÅ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"]}),e.jsxs("select",{value:w.menuItemId,onChange:c=>M({...w,menuItemId:c.target.value}),className:"w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-pink-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"ÿ®ÿØŸàŸÜ ÿ±ÿ®ÿ∑"}),i.filter(c=>c.available!==!1).map(c=>e.jsxs("option",{value:c.id,children:[c.name," - ",c.price," ÿ±.ÿ≥"]},c.id))]})]}),P&&e.jsxs("div",{className:"bg-pink-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(as,{className:"w-5 h-5 text-pink-500 animate-spin"}),e.jsx("span",{className:"text-pink-700 font-medium",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ±ŸÅÿπ..."})]}),e.jsx("div",{className:"h-2 bg-pink-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-300",style:{width:`${T}%`}})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{onClick:k,disabled:P,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-bold shadow-lg hover:scale-[1.02] transition disabled:opacity-50",children:[e.jsx(Nt,{className:"w-5 h-5"}),"ŸÜÿ¥ÿ± ÿßŸÑÿ≥ÿ™Ÿàÿ±Ÿä"]}),e.jsx("button",{onClick:()=>B(!1),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]})}),n.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Nt,{className:"w-10 h-10 text-pink-500"})}),e.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≥ÿ™Ÿàÿ±Ÿäÿßÿ™"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"ÿ¥ÿßÿ±ŸÉ ÿ∑ÿ®ÿÆ ÿßŸÑŸäŸàŸÖ ŸÖÿπ ÿπŸÖŸÑÿßÿ¶ŸÉ!"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map(c=>e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"aspect-[9/16] rounded-2xl overflow-hidden shadow-lg",children:[c.type==="text"?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:c.backgroundColor},children:e.jsx("p",{className:"text-center text-sm font-bold leading-relaxed line-clamp-6",style:{color:c.textColor},children:c.caption})}):c.type==="video"?e.jsx("video",{src:c.mediaUrl,className:"w-full h-full object-cover"}):e.jsx("img",{src:c.mediaUrl,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),e.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 bg-black/50 text-white text-xs font-medium px-2 py-1 rounded-full",children:[e.jsx(Ye,{className:"w-3 h-3"}),v(c.expiresAt)]}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-1 bg-black/50 text-white text-xs font-medium px-2 py-1 rounded-full",children:[e.jsx(ws,{className:"w-3 h-3"}),c.viewsCount]}),e.jsx("button",{onClick:()=>L(c.id),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition",children:e.jsx(Ns,{className:"w-4 h-4"})}),c.menuItemName&&e.jsxs("div",{className:"absolute bottom-2 left-2 flex items-center gap-1 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:[e.jsx(jt,{className:"w-3 h-3"}),c.menuItemName]})]}),c.caption&&c.type!=="text"&&e.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:c.caption})]},c.id))})]})};async function Gs(s){try{const a={...s,read:!1,createdAt:X()},n=await Te(se(S,"notifications"),a);console.log("üîî ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ•ÿ¥ÿπÿßÿ±:",s.type,"‚Üí",s.recipientId);try{await Ki(s.title,s.message,{icon:"/icon-192.png",tag:s.type+"-"+(s.orderId||Date.now()),url:s.actionUrl||"/"}),console.log("üì± ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ Push Notification")}catch(d){console.warn("‚ö†Ô∏è Push Notification ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠:",d)}return n.id}catch(a){return console.error("‚ùå ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±:",a),null}}async function hd(s,a,n){await Gs({type:"order_accepted",recipientId:s,recipientType:"customer",title:"ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿ∑ŸÑÿ®ŸÉ ‚úÖ",message:`${n} ÿ®ÿØÿ£ÿ™ ÿ®ÿ™ÿ¨ŸáŸäÿ≤ ÿ∑ŸÑÿ®ŸÉ`,orderId:a,restaurantName:n,actionType:"order",actionUrl:"/track-orders",priority:"high"})}async function ud(s,a,n,d){const i=d==="pickup"?`ÿ∑ŸÑÿ®ŸÉ ŸÖŸÜ ${n} ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ! ÿ™ÿπÿßŸÑ ÿßÿ≥ÿ™ŸÑŸÖŸá üèÉ`:`ÿ∑ŸÑÿ®ŸÉ ŸÖŸÜ ${n} ÿ¨ÿßŸáÿ≤ÿå ÿßŸÑŸÖŸÜÿØŸàÿ® ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ ÿ•ŸÑŸäŸÉ üöó`;await Gs({type:"order_ready",recipientId:s,recipientType:"customer",title:"ÿ∑ŸÑÿ®ŸÉ ÿ¨ÿßŸáÿ≤! üéâ",message:i,orderId:a,restaurantName:n,actionType:"order",actionUrl:"/track-orders",priority:"high"})}async function mn(s,a,n){await Gs({type:"courier_assigned",recipientId:s,recipientType:"customer",title:"ŸÖŸÜÿØŸàÿ® ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ üöó",message:`${n} ÿßÿ≥ÿ™ŸÑŸÖ ÿ∑ŸÑÿ®ŸÉ ŸàŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ ÿ•ŸÑŸäŸÉ`,orderId:a,actionType:"order",actionUrl:"/track-orders",priority:"normal"})}async function hn(s,a,n){await Gs({type:"order_delivered",recipientId:s,recipientType:"customer",title:"ŸàÿµŸÑ ÿ∑ŸÑÿ®ŸÉ! üì¶",message:`ÿ™ŸÖ ÿ™ŸàÿµŸäŸÑ ÿ∑ŸÑÿ®ŸÉ ŸÖŸÜ ${n}. ÿ®ÿßŸÑÿπÿßŸÅŸäÿ©! üçΩÔ∏è`,orderId:a,restaurantName:n,actionType:"order",actionUrl:"/track-orders",priority:"normal"})}async function gd(s,a,n,d){await Gs({type:"order_ready",recipientId:s,recipientType:"courier",title:"ÿ∑ŸÑÿ® ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿ™ŸàÿµŸäŸÑ üì¶",message:`ŸÖŸÜ ${n} ÿ•ŸÑŸâ ${d}`,orderId:a,restaurantName:n,actionType:"order",actionUrl:"/courier",priority:"high"})}async function pd(s,a,n,d,i){try{const y=be(se(S,"users"),je("role","in",["developer","admin"])),r=await pe(y);for(const D of r.docs)await Gs({type:"admin_new_order",recipientId:D.id,recipientType:"admin",title:"üí∞ ÿ∑ŸÑÿ® ŸÜÿßÿ¨ÿ≠!",message:`${a} ‚Üí ${n} | ${d.toFixed(2)} ÿ±.ÿ≥ (ÿ±ÿ≥ŸàŸÖ: ${i.toFixed(2)})`,orderId:s,restaurantName:a,actionType:"order",actionUrl:"/admin/orders",priority:"normal"});console.log("üìä ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑÿ•ÿØÿßÿ±ÿ© ÿπŸÜ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑŸÜÿßÿ¨ÿ≠")}catch(y){console.error("‚ùå ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑÿ•ÿØÿßÿ±ÿ©:",y)}}async function bd(s,a,n){await Gs({type:"order_preparing",recipientId:s,recipientType:"customer",title:"ÿ¨ÿßÿ±Ÿä ÿ™ÿ¨ŸáŸäÿ≤ ÿ∑ŸÑÿ®ŸÉ üë®‚Äçüç≥",message:`${n} ÿ®ÿØÿ£ÿ™ ÿ®ÿ™ÿ¨ŸáŸäÿ≤ ÿ∑ŸÑÿ®ŸÉ`,orderId:a,restaurantName:n,actionType:"order",actionUrl:"/orders",priority:"normal"})}async function fd(s,a,n,d){await Gs({type:"order_new",recipientId:s,recipientType:"customer",title:"ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ŸÉ ‚úÖ",message:`ÿ∑ŸÑÿ®ŸÉ ŸÖŸÜ ${n} ÿ®ŸÇŸäŸÖÿ© ${d.toFixed(2)} ÿ±.ÿ≥ ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ`,orderId:a,restaurantName:n,actionType:"order",actionUrl:"/orders",priority:"high"})}async function jd(s,a,n,d,i){await Gs({type:"order_new",recipientId:s,recipientType:"owner",title:"üîî ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ!",message:`${n} ÿ∑ŸÑÿ® ${i} ŸÖŸÜÿ™ÿ¨ ÿ®ŸÇŸäŸÖÿ© ${d.toFixed(2)} ÿ±.ÿ≥`,orderId:a,actionType:"order",actionUrl:"/restaurant/orders",priority:"high"})}async function Nd(s,a,n,d,i){await Gs({type:"order_new",recipientId:s,recipientType:a,title:`üí¨ ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸÜ ${n}`,message:i.length>50?i.substring(0,50)+"...":i,orderId:d,actionType:"order",actionUrl:`/chat?orderId=${d}`,priority:"high"})}const ga=Object.freeze(Object.defineProperty({__proto__:null,notifyAdminSuccessfulOrder:pd,notifyCourierAssigned:mn,notifyCourierOrderReady:gd,notifyNewMessage:Nd,notifyOrderAccepted:hd,notifyOrderCreated:fd,notifyOrderDelivered:hn,notifyOrderPreparing:bd,notifyOrderReady:ud,notifyRestaurantNewOrder:jd,sendSmartNotification:Gs},Symbol.toStringTag,{value:"Module"})),It=3.75,jl=3,yd=()=>{const{user:s}=Ee(),a=fs(),n=ze(),d=Ps(),[i,y]=t.useState("dashboard"),[r,D]=t.useState([]),[E,B]=t.useState([]),[P,N]=t.useState([]),[T,j]=t.useState({}),[f,U]=t.useState(null),[g,w]=t.useState(!1),[M,b]=t.useState([]),[h,k]=t.useState(null),[L,$]=t.useState(!0),[v,R]=t.useState(!1),[c,o]=t.useState({todayDeliveries:0,todayEarnings:0,weekDeliveries:0,weekEarnings:0,monthDeliveries:0,monthEarnings:0,totalDeliveries:0,totalEarnings:0,totalPlatformFees:0,netEarnings:0,pendingOrders:0,activeOrders:0}),[_,O]=t.useState(null),[q,m]=t.useState(!1),[p,I]=t.useState({}),[x,Q]=t.useState({isOpen:!1,orderId:""});t.useEffect(()=>{if(!(s!=null&&s.uid))return;const G=async()=>{const ce=J(S,"couriers",s.uid),ie=await Ce(ce);if(ie.exists())k(ie.data());else{const ge={name:s.displayName||"",phone:"",city:"",isAvailable:!0,totalDeliveries:0,rating:5,joinedAt:X()};await Qe(ce,ge),k(ge)}$(!1)},ae=async()=>{const{getDocs:ce}=await Bs(async()=>{const{getDocs:Ae}=await import("./vendor-firebase-DPNhE71o.js").then(Ue=>Ue.M);return{getDocs:Ae}},[]),ie=be(se(S,"hiringRequests"),je("courierId","==",s.uid),je("status","==","accepted")),ke=(await ce(ie)).docs.map(Ae=>Ae.data().restaurantId);b(ke)};G(),ae()},[s==null?void 0:s.uid]),t.useEffect(()=>{if(!(s!=null&&s.uid))return;const G=be(se(S,"orders"),je("status","in",["ready"]),ss("createdAt","desc"),bs(50)),ae=xs(G,ge=>{const ke=ge.docs.map(Ae=>({id:Ae.id,...Ae.data()}));if(M.length>0){const Ae=ke.filter(Ue=>{var Je,We;const $e=Ue.restaurantId||((We=(Je=Ue.items)==null?void 0:Je[0])==null?void 0:We.ownerId)||"";return M.includes($e)});D(Ae)}else D([])}),ce=be(se(S,"orders"),je("courierId","==",s.uid),ss("createdAt","desc"),bs(50)),ie=xs(ce,ge=>{const ke=ge.docs.map(Ae=>({id:Ae.id,...Ae.data()}));B(ke),N(ke),A(ke)});return()=>{ae(),ie()}},[s==null?void 0:s.uid,M]);const A=G=>{const ae=new Date,ce=new Date(ae.getFullYear(),ae.getMonth(),ae.getDate()),ie=new Date(ce);ie.setDate(ie.getDate()-7);const ge=new Date(ae.getFullYear(),ae.getMonth(),1);let ke=0,Ae=0,Ue=0,$e=0,Je=0,We=0,Ts=0,Es=0,rt=0,nt=0;G.forEach(ds=>{var Ks,Js;const ht=((Js=(Ks=ds.createdAt)==null?void 0:Ks.toDate)==null?void 0:Js.call(Ks))||new Date(ds.createdAt),Ys=ds.deliveryFee||0,$s=ds.courierPlatformFee||It;ds.status==="out_for_delivery"&&nt++,ds.status==="delivered"&&(Ts++,Es+=Ys,rt+=$s,ht>=ce&&(ke++,Ae+=Ys),ht>=ie&&(Ue++,$e+=Ys),ht>=ge&&(Je++,We+=Ys))}),o({todayDeliveries:ke,todayEarnings:Ae,weekDeliveries:Ue,weekEarnings:$e,monthDeliveries:Je,monthEarnings:We,totalDeliveries:Ts,totalEarnings:Es,totalPlatformFees:rt,netEarnings:Es-rt,pendingOrders:r.length,activeOrders:nt})},u=async()=>{if(s!=null&&s.uid){w(!0);try{const G=await Ce(J(S,"couriers",s.uid));G.exists()&&k(G.data());const ae=be(se(S,"hiringRequests"),je("courierId","==",s.uid),je("status","==","accepted")),ie=(await pe(ae)).docs.map(ge=>ge.data().restaurantId);b(ie),n.success("ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´")}catch{n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ™ÿ≠ÿØŸäÿ´")}finally{w(!1)}}},C=async()=>{if(!(s!=null&&s.uid)||!h)return;const G=!h.isAvailable;await xe(J(S,"couriers",s.uid),{isAvailable:G,updatedAt:X()}),k({...h,isAvailable:G}),n.success(G?"üü¢ ÿ£ŸÜÿ™ ÿßŸÑÿ¢ŸÜ ŸÖÿ™ÿßÿ≠ ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™":"üî¥ ÿ£ŸÜÿ™ ÿßŸÑÿ¢ŸÜ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠")},V=async(G,ae)=>{if(!s)return;if(!(h!=null&&h.isAvailable)){n.error("ŸÅÿπŸëŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ŸàŸÅÿ± ÿ£ŸàŸÑÿßŸã");return}const ce=(h==null?void 0:h.maxActiveOrders)||jl,ie=E.filter($e=>$e.status==="out_for_delivery"||$e.status==="accepted").length;if(ie>=ce){d.warning(`ŸÑÿØŸäŸÉ ${ie} ÿ∑ŸÑÿ® ŸÜÿ¥ÿ∑ ÿ≠ÿßŸÑŸäÿßŸã. ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸáŸà ${ce} ÿ∑ŸÑÿ®ÿßÿ™.

ÿ£ŸÉŸÖŸÑ ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™ ÿßŸÑÿ≠ÿßŸÑŸäÿ© ŸÇÿ®ŸÑ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ©.`,{title:"‚ö†Ô∏è ÿ™ÿ¨ÿßŸàÿ≤ÿ™ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™"});return}const ge=T[G],ke=ae.deliveryFeeSetBy?ae.deliveryFee||0:parseFloat(ge);if(!ae.deliveryFeeSetBy&&(isNaN(ke)||ke<0)){n.error("ÿ≠ÿØÿØ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ ÿ£ŸàŸÑÿßŸã");return}if(!(!await d.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿßÿ≥ÿ™ŸÑÿßŸÖ Ÿáÿ∞ÿß ÿßŸÑÿ∑ŸÑÿ®ÿü

üìç ${ae.address}
üí∞ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ: ${ae.deliveryFeeSetBy?ae.deliveryFee:ke} ÿ±.ÿ≥`,{title:"üöó ÿ™ÿ£ŸÉŸäÿØ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®",confirmText:"ŸÜÿπŸÖÿå ŸÖÿ™ÿßÿ®ÿπÿ©",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°"})||!await d.confirm(`‚ö†Ô∏è ÿ™ÿ£ŸÉŸäÿØ ŸÜŸáÿßÿ¶Ÿä:

ÿ®ÿßÿ≥ÿ™ŸÑÿßŸÖŸÉ ŸÑŸáÿ∞ÿß ÿßŸÑÿ∑ŸÑÿ®ÿå ÿ£ŸÜÿ™ ŸÖŸÑÿ™ÿ≤ŸÖ ÿ®ÿ™ŸàÿµŸäŸÑŸá ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ≠ÿØÿØ.

‚Ä¢ ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©: ${It} ÿ±.ÿ≥ ÿ≥ÿ™ŸèÿÆÿµŸÖ ŸÖŸÜ ÿ£ÿ±ÿ®ÿßÿ≠ŸÉ
‚Ä¢ ŸÑÿØŸäŸÉ ÿ≠ÿßŸÑŸäÿßŸã ${ie+1} ŸÖŸÜ ${ce} ÿ∑ŸÑÿ®ÿßÿ™ ŸÜÿ¥ÿ∑ÿ©`,{title:"‚ö° ÿßŸÑÿ™ÿ≤ÿßŸÖ ŸÜŸáÿßÿ¶Ÿä",confirmText:"‚úì ÿ£ÿ≥ÿ™ŸÑŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ¢ŸÜ",cancelText:"ÿ™ÿ±ÿßÿ¨ÿπ",dangerous:!1}))){U(G);try{await oi(S,async Je=>{const We=J(S,"orders",G),Ts=await Je.get(We);if(!Ts.exists())throw new Error("ÿßŸÑÿ∑ŸÑÿ® ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ");const Es=Ts.data();if(Es.courierId)throw new Error("ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ Ÿáÿ∞ÿß ÿßŸÑÿ∑ŸÑÿ® ŸÖŸÜ ŸÇÿ®ŸÑ ŸÖŸÜÿØŸàÿ® ÿ¢ÿÆÿ±");if(Es.status!=="ready")throw new Error("Ÿáÿ∞ÿß ÿßŸÑÿ∑ŸÑÿ® ŸÑŸÖ ŸäÿπÿØ ŸÖÿ™ÿßÿ≠ÿßŸã ŸÑŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ");const nt=(ae.total||ae.subtotal)+ke,ds={courierId:s.uid,status:"out_for_delivery",courierPlatformFee:It,"timestamps.pickedUpAt":X(),updatedAt:X()};ae.deliveryFeeSetBy||(ds.deliveryFee=ke,ds.deliveryFeeSetBy="courier",ds.deliveryFeeSetAt=X(),ds.total=nt),Je.update(We,ds)});const $e=P.find(Je=>Je.id===G)||r.find(Je=>Je.id===G);$e&&mn($e.customerId,G,(h==null?void 0:h.name)||"ÿßŸÑŸÖŸÜÿØŸàÿ®"),n.success(ae.deliveryFeeSetBy?"ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®!":`ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®! ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ: ${ke} ÿ±.ÿ≥`)}catch($e){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®:",$e),n.error($e.message||"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®")}finally{U(null)}}},W=async G=>{if(!await d.confirm("ŸáŸÑ ÿ™ŸÖ ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠ÿü",{title:"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",confirmText:"ŸÜÿπŸÖÿå ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",cancelText:"ÿ•ŸÑÿ∫ÿßÿ°"}))return;const ce=E.find(ie=>ie.id===G);if(await xe(J(S,"orders",G),{status:"delivered",deliveredAt:X(),"timestamps.deliveredAt":X(),updatedAt:X()}),ce){hn(ce.customerId,G,ce.restaurantName||"ÿßŸÑŸÖÿ∑ÿπŸÖ");try{const{notifyAdminSuccessfulOrder:ie}=await Bs(async()=>{const{notifyAdminSuccessfulOrder:ge}=await Promise.resolve().then(()=>ga);return{notifyAdminSuccessfulOrder:ge}},void 0);await ie(G,ce.restaurantName||"ÿßŸÑŸÖÿ∑ÿπŸÖ","ÿßŸÑÿπŸÖŸäŸÑ",ce.total||0,ce.platformFee||0)}catch(ie){console.warn("‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑÿ•ÿØÿßÿ±ÿ©:",ie)}}n.success("ÿ™ŸÖ ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ")},ne=G=>{var ae,ce;return G.status!=="delivered"?!1:!((ce=(ae=G.ratings)==null?void 0:ae.courierToCustomer)!=null&&ce.stars)},re=async(G,ae)=>{var ce,ie,ge,ke;try{const Ae=J(S,"orders",G),Ue=await Ce(Ae);if(!Ue.exists())return;const We={...Ue.data().ratings||{},courierToCustomer:ae},Ts=((ce=We.customerToRestaurant)==null?void 0:ce.stars)&&((ie=We.customerToCourier)==null?void 0:ie.stars)&&((ge=We.restaurantToCustomer)==null?void 0:ge.stars)&&((ke=We.courierToCustomer)==null?void 0:ke.stars);await xe(Ae,{ratings:We,ratingCompleted:Ts,updatedAt:X()}),n.success("ÿ¥ŸÉÿ±ÿßŸã ÿπŸÑŸâ ÿ™ŸÇŸäŸäŸÖŸÉ! ‚≠ê"),Q({isOpen:!1,orderId:""})}catch{n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇŸäŸäŸÖ")}},fe=async G=>{if(s!=null&&s.uid){R(!0);try{await xe(J(S,"couriers",s.uid),{...G,updatedAt:X()}),k(ae=>ae?{...ae,...G}:null),n.success("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}catch{n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£")}R(!1)}},he=async(G,ae)=>{if(s!=null&&s.uid){O(G);try{const ce=ks(yt,`couriers/${s.uid}/${G}_${Date.now()}`);await bt(ce,ae);const ie=await Ss(ce),ke={[`${G}Url`]:ie,documentsStatus:"pending"};await fe(ke),n.success("ÿ™ŸÖ ÿ±ŸÅÿπ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØ ÿ®ŸÜÿ¨ÿßÿ≠")}catch{n.error("ŸÅÿ¥ŸÑ ÿ±ŸÅÿπ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØ")}O(null)}},F=()=>{I({name:(h==null?void 0:h.name)||"",phone:(h==null?void 0:h.phone)||"",city:(h==null?void 0:h.city)||"",bankName:(h==null?void 0:h.bankName)||"",bankAccountName:(h==null?void 0:h.bankAccountName)||"",bankAccountNumber:(h==null?void 0:h.bankAccountNumber)||"",maxActiveOrders:(h==null?void 0:h.maxActiveOrders)||jl}),m(!0)};if(L)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-sky-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})});const te=[{id:"dashboard",label:"ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",icon:dt},{id:"orders",label:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",icon:Oe},{id:"history",label:"ÿßŸÑÿ≥ÿ¨ŸÑ",icon:Pt},{id:"earnings",label:"ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠",icon:ns},{id:"profile",label:"ÿ≠ÿ≥ÿßÿ®Ÿä",icon:ms}],Ne=G=>{var ae,ce;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all border border-gray-100",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-white font-bold",children:["#",G.id.slice(-6)]}),e.jsx("span",{className:"text-white/90 text-sm",children:G.restaurantName||"ŸÖÿ∑ÿπŸÖ"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(ma,{order:G,type:"pickup",compact:!0})}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:G.address})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 mb-3 space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ≥ÿπÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™"}),e.jsxs("span",{className:"font-semibold",children:[(ae=G.subtotal)==null?void 0:ae.toFixed(2)," ÿ±.ÿ≥"]})]}),G.deliveryFeeSetBy?e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[(ce=G.deliveryFee)==null?void 0:ce.toFixed(2)," ÿ±.ÿ≥"]})]}):e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsx("span",{className:"text-amber-600 text-xs",children:"ÿ™ÿ≠ÿØÿØŸáÿß ÿ£ŸÜÿ™"})]})]}),!G.deliveryFeeSetBy&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ds,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-semibold text-amber-800 text-sm",children:"ÿ≠ÿØÿØ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:"ŸÖÿ´ÿßŸÑ: 10",value:T[G.id]||"",onChange:ie=>j(ge=>({...ge,[G.id]:ie.target.value})),className:"flex-1 px-3 py-2 rounded-lg border border-amber-200 focus:border-amber-400 focus:outline-none text-sm"}),e.jsx("span",{className:"flex items-center text-gray-500 text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-xs text-amber-700 mt-2",children:["‚ö†Ô∏è ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©: ",It," ÿ±.ÿ≥ ŸÑŸÉŸÑ ÿ∑ŸÑÿ®"]})]}),e.jsx("button",{onClick:()=>V(G.id,G),disabled:f===G.id||!(h!=null&&h.isAvailable),className:`w-full py-3 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 
                     text-white font-bold flex items-center justify-center gap-2
                     hover:from-gray-900 hover:to-black transition-all shadow-lg disabled:opacity-50`,children:f===G.id?e.jsx("span",{children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏..."}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ® üöó"})]})})]})]},G.id)},ee=G=>{var ae,ce;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden border-2 border-sky-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-blue-500 px-4 py-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-white font-bold",children:["#",G.id.slice(-6)]}),e.jsxs("div",{className:"flex items-center gap-1 text-white/90 text-sm",children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsx("span",{children:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(ma,{order:G,type:"delivery"})}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:G.address})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[e.jsx(Ht,{className:"w-5 h-5"}),e.jsxs("span",{children:[(ce=(ae=G.total)==null?void 0:ae.toFixed)==null?void 0:ce.call(ae,2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>a(`/chat?orderId=${G.id}`),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-primary to-accent 
                       text-white font-bold flex items-center justify-center gap-2`,children:[e.jsx(Qs,{className:"w-5 h-5"}),e.jsx("span",{children:"ŸÖÿ≠ÿßÿØÿ´ÿ© üí¨"})]}),e.jsxs("button",{onClick:()=>W(G.id),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 
                       text-white font-bold flex items-center justify-center gap-2`,children:[e.jsx(Ie,{className:"w-5 h-5"}),e.jsx("span",{children:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ ‚úÖ"})]})]})]})]},G.id)},Y=()=>{var G;return e.jsxs("div",{className:"space-y-6",children:[((G=h==null?void 0:h.points)==null?void 0:G.isSuspended)&&e.jsxs("div",{className:"bg-red-50 border-2 border-red-300 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center",children:e.jsx(Sl,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-red-700",children:"‚õî ÿ≠ÿ≥ÿßÿ®ŸÉ ŸÖŸàŸÇŸàŸÅ!"}),e.jsx("p",{className:"text-sm text-red-600",children:"ŸÑŸÜ ÿ™ÿ≥ÿ™ÿ∑Ÿäÿπ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ©. ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä."})]})]}),e.jsx("button",{onClick:()=>a("/support"),className:"w-full mt-3 py-2 bg-red-500 text-white rounded-xl font-bold",children:"ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿØÿπŸÖ ‚Üê"})]}),(h==null?void 0:h.points)&&!h.points.isSuspended&&e.jsxs("div",{className:`rounded-2xl p-4 border-2 ${h.points.currentPoints<hs.WARNING_THRESHOLD?"bg-amber-50 border-amber-300":"bg-sky-50 border-sky-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(us,{className:`w-6 h-6 ${h.points.currentPoints<hs.WARNING_THRESHOLD?"text-amber-500":"text-sky-500"}`}),e.jsx("span",{className:"font-bold text-gray-700",children:"ÿ±ÿµŸäÿØ ÿßŸÑŸÜŸÇÿßÿ∑"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-2xl font-bold ${h.points.currentPoints<hs.WARNING_THRESHOLD?"text-amber-600":"text-sky-600"}`,children:h.points.currentPoints}),e.jsxs("span",{className:"text-gray-400",children:["/ ",hs.STARTING_POINTS]})]})]}),h.points.currentPoints<hs.WARNING_THRESHOLD&&e.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"‚ö†Ô∏è ŸÜŸÇÿßÿ∑ŸÉ ŸÖŸÜÿÆŸÅÿ∂ÿ©! ÿ≠ÿßŸÅÿ∏ ÿπŸÑŸâ ÿ¨ŸàÿØÿ© ÿßŸÑÿÆÿØŸÖÿ©."})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-sky-50 border border-blue-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(qt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-800",children:"üöó ÿ£ŸÜÿ™ ŸÖŸÜÿØŸàÿ® ŸÖÿ≥ÿ™ŸÇŸÑ (ÿπŸÖŸÑ ÿ≠ÿ±)"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"ÿ™ÿπŸÖŸÑ ÿ®ÿ≠ÿ±Ÿäÿ© ŸÉÿßŸÖŸÑÿ© ÿ®ÿØŸàŸÜ ÿØŸàÿßŸÖ ÿ£Ÿà ÿßŸÑÿ™ÿ≤ÿßŸÖÿßÿ™ Ÿàÿ∏ŸäŸÅŸäÿ©. ÿßÿ≥ÿ™ŸÑŸÖ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ŸÜÿßÿ≥ÿ®ŸÉ Ÿàÿßÿ≠ÿ™ŸÅÿ∏ ÿ®ÿ£ÿ±ÿ®ÿßÿ≠ŸÉ."})]})]})}),e.jsx("button",{onClick:C,className:`w-full py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 transition-all shadow-lg ${h!=null&&h.isAvailable?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700":"bg-gradient-to-r from-gray-400 to-gray-500 text-white hover:from-gray-500 hover:to-gray-600"}`,children:h!=null&&h.isAvailable?e.jsxs(e.Fragment,{children:[e.jsx(Ci,{className:"w-6 h-6"}),e.jsx("span",{children:"üü¢ ŸÖÿ™ÿßÿ≠ ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ai,{className:"w-6 h-6"}),e.jsx("span",{children:"üî¥ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Oe,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ©"})]}),e.jsx("div",{className:"text-3xl font-bold",children:r.length})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Be,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"ŸÇŸäÿØ ÿßŸÑÿ™ŸàÿµŸäŸÑ"})]}),e.jsx("div",{className:"text-3xl font-bold",children:c.activeOrders})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ht,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"ÿ£ÿ±ÿ®ÿßÿ≠ ÿßŸÑŸäŸàŸÖ"})]}),e.jsxs("div",{className:"text-3xl font-bold",children:[c.todayEarnings.toFixed(0),e.jsx("span",{className:"text-lg",children:" ÿ±.ÿ≥"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ie,{className:"w-5 h-5 opacity-80"}),e.jsx("span",{className:"text-sm opacity-90",children:"ÿ™ÿ≥ŸÑŸäŸÖÿßÿ™ ÿßŸÑŸäŸàŸÖ"})]}),e.jsx("div",{className:"text-3xl font-bold",children:c.todayDeliveries})]})]}),(h==null?void 0:h.documentsStatus)!=="approved"&&e.jsx("div",{className:`rounded-2xl p-4 ${(h==null?void 0:h.documentsStatus)==="rejected"?"bg-red-50 border border-red-200":"bg-amber-50 border border-amber-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${(h==null?void 0:h.documentsStatus)==="rejected"?"bg-red-500":"bg-amber-500"}`,children:e.jsx(ys,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:(h==null?void 0:h.documentsStatus)==="rejected"?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-red-700",children:"‚ùå ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™"}),e.jsx("p",{className:"text-sm text-red-600",children:h.documentsNotes||"Ÿäÿ±ÿ¨Ÿâ ÿ±ŸÅÿπ ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ÿµÿßŸÑÿ≠ÿ©"})]}):(h==null?void 0:h.documentsStatus)==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-amber-700",children:"‚è≥ ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"}),e.jsx("p",{className:"text-sm text-amber-600",children:"ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ¥ÿπÿßÿ±ŸÉ ÿ®ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ŸÇÿ±Ÿäÿ®ÿßŸã"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-bold text-amber-700",children:"üìÑ ÿßÿ±ŸÅÿπ ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ŸÉ"}),e.jsx("p",{className:"text-sm text-amber-600",children:"ŸÑÿ™Ÿàÿ´ŸäŸÇ ÿ≠ÿ≥ÿßÿ®ŸÉ Ÿàÿ≤ŸäÿßÿØÿ© ÿßŸÑŸÖŸàÿ´ŸàŸÇŸäÿ©"})]})}),e.jsx("button",{onClick:()=>y("profile"),className:"text-sm font-bold text-amber-700 underline",children:"ÿ±ŸÅÿπ"})]})}),E.filter(ae=>ae.status==="out_for_delivery").length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-sky-500"}),"ÿ∑ŸÑÿ®ÿßÿ™Ÿä ÿßŸÑŸÜÿ¥ÿ∑ÿ©"]}),e.jsx("div",{className:"space-y-3",children:E.filter(ae=>ae.status==="out_for_delivery").map(ee)})]}),(h==null?void 0:h.isAvailable)&&r.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-purple-500"}),"ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ© ŸÑŸÑÿ™ŸàÿµŸäŸÑ (",r.length,")"]}),e.jsxs("div",{className:"space-y-3",children:[r.slice(0,3).map(Ne),r.length>3&&e.jsxs("button",{onClick:()=>y("orders"),className:"w-full py-3 bg-gray-100 rounded-xl text-gray-600 font-semibold hover:bg-gray-200 transition",children:["ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ (",r.length,") ‚Üê"]})]})]})]})},K=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-sky-500"}),"ÿ∑ŸÑÿ®ÿßÿ™Ÿä ÿßŸÑŸÜÿ¥ÿ∑ÿ© (",E.filter(G=>G.status==="out_for_delivery").length,")"]}),E.filter(G=>G.status==="out_for_delivery").length>0?e.jsx("div",{className:"space-y-3",children:E.filter(G=>G.status==="out_for_delivery").map(ee)}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-2xl",children:[e.jsx(Be,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ŸÜÿ¥ÿ∑ÿ©"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-purple-500"}),"ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ© ŸÑŸÑÿ™ŸàÿµŸäŸÑ (",r.length,")"]}),r.length>0?e.jsx("div",{className:"space-y-3",children:r.map(Ne)}):M.length===0?e.jsxs("div",{className:"text-center py-8 bg-amber-50 rounded-2xl border border-amber-200",children:[e.jsx(qt,{className:"w-12 h-12 text-amber-400 mx-auto mb-2"}),e.jsx("p",{className:"text-amber-700 font-medium",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿ≥ÿ± ŸÖŸÜÿ™ÿ¨ÿ© ŸÇÿ®ŸÑÿ™ ÿ∑ŸÑÿ® ÿ™Ÿàÿ∏ŸäŸÅŸÉ"}),e.jsx("p",{className:"text-amber-600 text-sm mt-1",children:'ÿ™ŸÇÿØŸÖ ŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿ™Ÿàÿ∏ŸäŸÅ ŸÖŸÜ ÿµŸÅÿ≠ÿ© "ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ"'})]}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-2xl",children:[e.jsx(Oe,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿßŸáÿ≤ÿ© ÿ≠ÿßŸÑŸäÿßŸã"})]})]})]}),me=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Pt,{className:"w-5 h-5 text-gray-500"}),"ÿ≥ÿ¨ŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[P.filter(G=>G.status==="delivered").length," ÿ∑ŸÑÿ®"]})]}),P.filter(G=>G.status==="delivered").length>0?e.jsx("div",{className:"space-y-3",children:P.filter(G=>G.status==="delivered").map(G=>{var ae,ce,ie,ge,ke;return e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-bold text-gray-800",children:["#",G.id.slice(-6)]}),e.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs font-bold",children:"‚úÖ ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:G.address})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsx("div",{className:"text-sm text-gray-500",children:((ce=(ae=G.createdAt)==null?void 0:ae.toDate)==null?void 0:ce.call(ae).toLocaleDateString("ar-SA"))||""}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-green-600 font-bold",children:[(ie=G.deliveryFee)==null?void 0:ie.toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("span",{className:"text-red-500 text-sm",children:["-",It," ÿ±ÿ≥ŸàŸÖ"]})]})]}),ne(G)&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("button",{onClick:()=>Q({isOpen:!0,orderId:G.id}),className:`w-full flex items-center justify-between px-4 py-3 bg-gradient-to-r from-sky-50 to-blue-50 
                               border-2 border-sky-200 rounded-xl hover:shadow-md transition-all group`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ms,{className:"w-5 h-5 text-sky-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:"ŸÇŸäŸëŸÖ ÿßŸÑÿπŸÖŸäŸÑ ‚≠ê"})]}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(Ae=>e.jsx(ls,{className:"w-4 h-4 text-gray-300 group-hover:text-sky-400 transition"},Ae))})]})}),((ke=(ge=G.ratings)==null?void 0:ge.courierToCustomer)==null?void 0:ke.stars)&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 bg-green-50 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"ÿ™ŸÇŸäŸäŸÖŸÉ ŸÑŸÑÿπŸÖŸäŸÑ:"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(Ae=>{var Ue,$e;return e.jsx(ls,{className:`w-4 h-4 ${Ae<=((($e=(Ue=G.ratings)==null?void 0:Ue.courierToCustomer)==null?void 0:$e.stars)||0)?"text-sky-400 fill-sky-400":"text-gray-300"}`},Ae)})})]})})]},G.id)})}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx(Pt,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ≥ÿßÿ®ŸÇÿ©"})]})]}),de=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-emerald-700 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ns,{className:"w-6 h-6"}),e.jsx("h3",{className:"font-bold text-lg",children:"üí∞ ŸÖŸÑÿÆÿµ ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑŸäŸàŸÖ"}),e.jsxs("p",{className:"text-2xl font-bold",children:[c.todayEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[c.todayDeliveries," ÿ™ŸàÿµŸäŸÑ"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ"}),e.jsxs("p",{className:"text-2xl font-bold",children:[c.weekEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[c.weekDeliveries," ÿ™ŸàÿµŸäŸÑ"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ¥Ÿáÿ±"}),e.jsxs("p",{className:"text-2xl font-bold",children:[c.monthEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[c.monthDeliveries," ÿ™ŸàÿµŸäŸÑ"]})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 ring-2 ring-white/30",children:[e.jsx("p",{className:"text-white/70 text-sm mb-1",children:"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä"}),e.jsxs("p",{className:"text-2xl font-bold",children:[c.totalEarnings.toFixed(0)," ",e.jsx("span",{className:"text-sm",children:"ÿ±.ÿ≥"})]}),e.jsxs("p",{className:"text-white/60 text-xs",children:[c.totalDeliveries," ÿ™ŸàÿµŸäŸÑ"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Us,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-bold text-gray-800",children:"üìä ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"}),e.jsxs("span",{className:"font-bold text-gray-900",children:[c.totalEarnings.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["(",c.totalDeliveries," ÿ∑ŸÑÿ® √ó ",It," ÿ±.ÿ≥)"]})]}),e.jsxs("span",{className:"font-bold text-red-600",children:["- ",c.totalPlatformFees.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 bg-green-50 rounded-xl px-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx(ns,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"font-bold text-green-800",children:"ÿµÿßŸÅŸä ÿ£ÿ±ÿ®ÿßÿ≠ŸÉ"})]}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[c.netEarnings.toFixed(2)," ÿ±.ÿ≥"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-sky-50 border border-blue-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(js,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-bold text-blue-800",children:"üè¶ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä"})]}),h!=null&&h.bankName?e.jsxs("div",{className:"bg-white rounded-xl p-3 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"ÿßŸÑÿ®ŸÜŸÉ:"})," ",e.jsx("span",{className:"font-semibold",children:h.bankName})]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"ÿßŸÑÿßÿ≥ŸÖ:"})," ",e.jsx("span",{className:"font-semibold",children:h.bankAccountName})]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"ÿßŸÑÿ¢Ÿäÿ®ÿßŸÜ:"})," ",e.jsx("span",{className:"font-semibold",children:h.bankAccountNumber})]})]}):e.jsx("button",{onClick:()=>y("profile"),className:"w-full py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition",children:"ÿ£ÿ∂ŸÅ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä"}),e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"üí° Ÿäÿ™ŸÖ ÿ™ÿ≠ŸàŸäŸÑ ÿ£ÿ±ÿ®ÿßÿ≠ŸÉ ÿ£ÿ≥ÿ®ŸàÿπŸäÿßŸã ÿ•ŸÑŸâ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä"})]}),e.jsxs("button",{onClick:()=>a("/courier/wallet"),className:"w-full py-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-2xl font-bold hover:from-orange-600 hover:to-orange-700 transition flex items-center justify-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5"}),"ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑÿ™ŸÅÿµŸäŸÑŸäÿ©"]})]}),ye=()=>{var G;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-5 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-sky-500 rounded-full -translate-y-1/2 translate-x-1/2"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-white/20 flex items-center justify-center overflow-hidden",children:h!=null&&h.photoUrl?e.jsx("img",{src:h.photoUrl,alt:"",className:"w-full h-full object-cover"}):e.jsx(ms,{className:"w-10 h-10 text-white/60"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:(h==null?void 0:h.name)||"ŸÖŸÜÿØŸàÿ®"}),e.jsx("p",{className:"text-white/70 text-sm",children:(h==null?void 0:h.phone)||"ŸÑŸÖ ŸäŸèÿ≠ÿØÿØ"}),e.jsx("p",{className:"text-white/50 text-sm",children:(h==null?void 0:h.city)||"ÿßŸÑŸÖÿØŸäŸÜÿ©"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-4 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:c.totalDeliveries}),e.jsx("p",{className:"text-white/60 text-xs",children:"ÿ™ŸàÿµŸäŸÑ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold flex items-center justify-center gap-1",children:[e.jsx(ls,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),((G=h==null?void 0:h.rating)==null?void 0:G.toFixed(1))||"5.0"]}),e.jsx("p",{className:"text-white/60 text-xs",children:"ÿ™ŸÇŸäŸäŸÖ"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:c.netEarnings.toFixed(0)}),e.jsx("p",{className:"text-white/60 text-xs",children:"ÿ±.ÿ≥ ÿ£ÿ±ÿ®ÿßÿ≠"})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-4 ${(h==null?void 0:h.documentsStatus)==="approved"?"bg-green-50 border border-green-200":(h==null?void 0:h.documentsStatus)==="rejected"?"bg-red-50 border border-red-200":"bg-amber-50 border border-amber-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${(h==null?void 0:h.documentsStatus)==="approved"?"bg-green-500":(h==null?void 0:h.documentsStatus)==="rejected"?"bg-red-500":"bg-amber-500"}`,children:e.jsx(us,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:`font-bold ${(h==null?void 0:h.documentsStatus)==="approved"?"text-green-700":(h==null?void 0:h.documentsStatus)==="rejected"?"text-red-700":"text-amber-700"}`,children:[(h==null?void 0:h.documentsStatus)==="approved"&&"‚úÖ ÿ≠ÿ≥ÿßÿ® ŸÖŸàÿ´ŸÇ",(h==null?void 0:h.documentsStatus)==="rejected"&&"‚ùå ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ŸÖÿ±ŸÅŸàÿ∂ÿ©",(!(h!=null&&h.documentsStatus)||(h==null?void 0:h.documentsStatus)==="pending")&&"‚è≥ ŸÇŸäÿØ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"]}),(h==null?void 0:h.documentsStatus)==="rejected"&&h.documentsNotes&&e.jsx("p",{className:"text-sm text-red-600",children:h.documentsNotes})]})]})}),q?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-gray-100",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ÿßŸÑÿßÿ≥ŸÖ"}),e.jsx("input",{type:"text",value:p.name||"",onChange:ae=>I({...p,name:ae.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ÿ±ŸÇŸÖ ÿßŸÑÿ¨ŸàÿßŸÑ"}),e.jsx("input",{type:"tel",value:p.phone||"",onChange:ae=>I({...p,phone:ae.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400 focus:ring-2 focus:ring-sky-100",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsx("input",{type:"text",value:p.city||"",onChange:ae=>I({...p,city:ae.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400 focus:ring-2 focus:ring-sky-100"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-orange-500"}),"ÿßŸÑÿ∑ÿßŸÇÿ© ÿßŸÑÿßÿ≥ÿ™Ÿäÿπÿßÿ®Ÿäÿ©"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÜÿ¥ÿ∑ÿ©"}),e.jsxs("select",{value:p.maxActiveOrders||jl,onChange:ae=>I({...p,maxActiveOrders:parseInt(ae.target.value)}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400",children:[e.jsx("option",{value:1,children:"ÿ∑ŸÑÿ® Ÿàÿßÿ≠ÿØ"}),e.jsx("option",{value:2,children:"ÿ∑ŸÑÿ®ÿßŸÜ"}),e.jsx("option",{value:3,children:"3 ÿ∑ŸÑÿ®ÿßÿ™ (ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä)"}),e.jsx("option",{value:4,children:"4 ÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("option",{value:5,children:"5 ÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"ŸÑŸÜ ÿ™ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ© ÿ≠ÿ™Ÿâ ÿ™ŸÜŸáŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÜÿ¥ÿ∑ÿ©"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(js,{className:"w-4 h-4 text-green-500"}),"ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("select",{value:p.bankName||"",onChange:ae=>I({...p,bankName:ae.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-sky-400",children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ŸÜŸÉ"}),e.jsx("option",{value:"ÿßŸÑÿ±ÿßÿ¨ÿ≠Ÿä",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ±ÿßÿ¨ÿ≠Ÿä"}),e.jsx("option",{value:"ÿßŸÑÿ£ŸáŸÑŸä",children:"ÿßŸÑÿ®ŸÜŸÉ ÿßŸÑÿ£ŸáŸÑŸä"}),e.jsx("option",{value:"ÿßŸÑÿ•ŸÜŸÖÿßÿ°",children:"ŸÖÿµÿ±ŸÅ ÿßŸÑÿ•ŸÜŸÖÿßÿ°"}),e.jsx("option",{value:"ÿßŸÑÿ±Ÿäÿßÿ∂",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ±Ÿäÿßÿ∂"}),e.jsx("option",{value:"ÿßŸÑÿ®ŸÑÿßÿØ",children:"ÿ®ŸÜŸÉ ÿßŸÑÿ®ŸÑÿßÿØ"})]}),e.jsx("input",{type:"text",placeholder:"ÿßÿ≥ŸÖ ÿµÿßÿ≠ÿ® ÿßŸÑÿ≠ÿ≥ÿßÿ®",value:p.bankAccountName||"",onChange:ae=>I({...p,bankAccountName:ae.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200"}),e.jsx("input",{type:"text",placeholder:"ÿ±ŸÇŸÖ ÿßŸÑÿ¢Ÿäÿ®ÿßŸÜ (IBAN)",value:p.bankAccountNumber||"",onChange:ae=>I({...p,bankAccountNumber:ae.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200",dir:"ltr"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{fe(p),m(!1)},disabled:v,className:"flex-1 py-3 bg-sky-500 text-white rounded-xl font-bold hover:bg-sky-600 transition disabled:opacity-50",children:v?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏...":"ÿ≠ŸÅÿ∏"}),e.jsx("button",{onClick:()=>m(!1),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-300 transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]}):e.jsxs("button",{onClick:F,className:"w-full py-3 bg-sky-500 text-white rounded-xl font-bold hover:bg-sky-600 transition flex items-center justify-center gap-2",children:[e.jsx(ha,{className:"w-5 h-5"}),"ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ys,{className:"w-5 h-5 text-gray-500"}),"ÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ws,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"ÿµŸàÿ±ÿ© ÿßŸÑŸáŸàŸäÿ©"})]}),h!=null&&h.idCardUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:h.idCardUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 text-sm",children:"ÿπÿ±ÿ∂"}),e.jsx(Ie,{className:"w-5 h-5 text-green-500"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ae=>{var ce;return((ce=ae.target.files)==null?void 0:ce[0])&&he("idCard",ae.target.files[0])}}),e.jsx("span",{className:"text-sky-600 text-sm font-bold",children:_==="idCard"?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ±ŸÅÿπ...":"ÿ±ŸÅÿπ"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ii,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"ÿ±ÿÆÿµÿ© ÿßŸÑŸÇŸäÿßÿØÿ©"})]}),h!=null&&h.driverLicenseUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:h.driverLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 text-sm",children:"ÿπÿ±ÿ∂"}),e.jsx(Ie,{className:"w-5 h-5 text-green-500"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ae=>{var ce;return((ce=ae.target.files)==null?void 0:ce[0])&&he("driverLicense",ae.target.files[0])}}),e.jsx("span",{className:"text-sky-600 text-sm font-bold",children:_==="driverLicense"?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ±ŸÅÿπ...":"ÿ±ŸÅÿπ"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ys,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"ÿßÿ≥ÿ™ŸÖÿßÿ±ÿ© ÿßŸÑÿ≥Ÿäÿßÿ±ÿ©"})]}),h!=null&&h.vehicleRegistrationUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:h.vehicleRegistrationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 text-sm",children:"ÿπÿ±ÿ∂"}),e.jsx(Ie,{className:"w-5 h-5 text-green-500"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ae=>{var ce;return((ce=ae.target.files)==null?void 0:ce[0])&&he("vehicleRegistration",ae.target.files[0])}}),e.jsx("span",{className:"text-sky-600 text-sm font-bold",children:_==="vehicleRegistration"?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ±ŸÅÿπ...":"ÿ±ŸÅÿπ"})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-50 border border-gray-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(wl,{className:"w-5 h-5 text-gray-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"üìã ÿ®ŸäÿßŸÜ ÿßŸÑÿπŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ™ŸÇŸÑ:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-500",children:[e.jsx("li",{children:"ÿ£ŸÜÿ™ ÿ™ÿπŸÖŸÑ ŸÉŸÖŸÜÿØŸàÿ® ŸÖÿ≥ÿ™ŸÇŸÑ (Freelancer) ŸàŸÑŸäÿ≥ ŸÖŸàÿ∏ŸÅÿßŸã"}),e.jsx("li",{children:"ŸÑÿß ŸäŸàÿ¨ÿØ ÿØŸàÿßŸÖ ÿ´ÿßÿ®ÿ™ ÿ£Ÿà ÿ≥ÿßÿπÿßÿ™ ÿπŸÖŸÑ ŸÖÿ≠ÿØÿØÿ©"}),e.jsx("li",{children:"ÿ≠ÿ±Ÿäÿ© ŸÉÿßŸÖŸÑÿ© ŸÅŸä ŸÇÿ®ŸàŸÑ ÿ£Ÿà ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsxs("li",{children:["ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©: ",It," ÿ±.ÿ≥ ŸÑŸÉŸÑ ÿ∑ŸÑÿ®"]}),e.jsx("li",{children:"ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ° Ÿäÿ™ŸÖ ÿπÿ®ÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÅŸÇÿ∑"})]})]})]})})]})};return e.jsxs("div",{className:"space-y-4 pb-24",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Be,{className:"w-6 h-6 text-sky-500"}),"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÜÿØŸàÿ®"]}),e.jsx("button",{onClick:u,disabled:g,className:"p-2 bg-gray-100 rounded-xl hover:bg-gray-200 transition",children:e.jsx(qe,{className:`w-5 h-5 text-gray-600 ${g?"animate-spin":""}`})})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-4 px-4",children:te.map(G=>{const ae=G.icon;return e.jsxs("button",{onClick:()=>y(G.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold whitespace-nowrap transition ${i===G.id?"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(ae,{className:"w-4 h-4"}),G.label]},G.id)})}),i==="dashboard"&&Y(),i==="orders"&&K(),i==="history"&&me(),i==="earnings"&&de(),i==="profile"&&ye(),e.jsx(Bl,{isOpen:x.isOpen,onClose:()=>Q({isOpen:!1,orderId:""}),onSubmit:G=>re(x.orderId,G),type:"customer",orderId:x.orderId})]})},wd=()=>{const{user:s}=Ee(),a=Ps(),[n,d]=t.useState([]),[i,y]=t.useState({}),[r,D]=t.useState(!0),[E,B]=t.useState(null);t.useEffect(()=>{if(!s)return;(async()=>{const j=(await pe(se(S,"restaurants"))).docs.map(w=>({id:w.id,...w.data()}));d(j);const f=be(se(S,"hiringRequests"),je("courierId","==",s.uid)),U=await pe(f),g={};U.docs.forEach(w=>{const M=w.data();g[M.restaurantId]={restaurantId:M.restaurantId,status:M.status}}),y(g),D(!1)})()},[s]);const P=async N=>{if(!s){a.warning("ÿ≥ÿ¨ŸÑ ÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã");return}B(N.id),await Te(se(S,"hiringRequests"),{courierId:s.uid,courierName:s.displayName||"ŸÖŸÜÿØŸàÿ®",restaurantId:N.id,restaurantName:N.name,status:"pending",createdAt:X()}),y(T=>({...T,[N.id]:{restaurantId:N.id,status:"pending"}})),B(null)};return r?e.jsx("div",{className:"text-center py-10 text-sky-600",children:"‚è≥ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ..."}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-200 via-slate-100 to-slate-200 py-8 px-4",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold text-sky-600 text-center mb-8 flex items-center justify-center gap-2",children:[e.jsx(qt,{className:"w-7 h-7 text-sky-500"}),"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™Ÿàÿ∏ŸäŸÅ"]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto",children:n.map(N=>{const T=i[N.id];return e.jsxs("div",{className:"glass-card rounded-2xl p-6 hover:shadow-xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[N.logoUrl?e.jsx("img",{src:N.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-sky-300 shadow"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-sky-100 flex items-center justify-center text-3xl mb-4",children:"üç¥"}),e.jsx("h3",{className:"font-bold text-lg mb-2 text-sky-900",children:N.name}),T?e.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${T.status==="pending"?"bg-amber-100 text-amber-700 border border-amber-200":T.status==="accepted"?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:[T.status==="pending"&&e.jsx(Ye,{className:"w-4 h-4"}),T.status==="accepted"&&e.jsx(Di,{className:"w-4 h-4"}),T.status==="rejected"&&e.jsx(lt,{className:"w-4 h-4"}),T.status==="pending"?"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©":T.status==="accepted"?"‚úÖ ÿ™ŸÖ ÿßŸÑŸÇÿ®ŸàŸÑ":"‚ùå ŸÖÿ±ŸÅŸàÿ∂"]}):e.jsx("button",{disabled:E===N.id,onClick:()=>P(N),className:"mt-4 w-full px-4 py-2 rounded-xl bg-gradient-to-r from-sky-500 to-sky-600 text-white font-bold shadow-lg shadow-sky-200/50 hover:shadow-xl hover:scale-105 transition disabled:opacity-50",children:E===N.id?"‚è≥ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...":"üì© ÿ∑ŸÑÿ® ÿ™Ÿàÿ∏ŸäŸÅ"})]},N.id)})})]})},vd=[{text:"ÿ£ŸäŸÜ ŸàÿµŸÑÿ™ÿü üìç",emoji:"üìç"},{text:"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ! üíô",emoji:"üíô"},{text:"ÿÆÿ∞ ÿ±ÿßÿ≠ÿ™ŸÉ üòä",emoji:"üòä"},{text:"ÿ£ŸÜÿß ÿ®ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± ‚è≥",emoji:"‚è≥"},{text:"ÿ™ŸÖÿßŸÖ üëç",emoji:"üëç"},{text:"ŸÖŸÖÿ™ÿßÿ≤! ‚≠ê",emoji:"‚≠ê"}],kd=[{text:"ŸÉŸÖ ÿßŸÑŸÖÿØÿ© ÿßŸÑŸÖÿ™ŸàŸÇÿπÿ©ÿü ‚è±Ô∏è",emoji:"‚è±Ô∏è"},{text:"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉŸÖ! üíô",emoji:"üíô"},{text:"ŸáŸÑ ÿßŸÑÿ∑ŸÑÿ® ÿ¨ÿßŸáÿ≤ÿü üì¶",emoji:"üì¶"},{text:"ÿ£ÿ≠ÿ™ÿßÿ¨ ÿ™ÿπÿØŸäŸÑ ÿπŸÑŸâ ÿßŸÑÿ∑ŸÑÿ® üìù",emoji:"üìù"},{text:"ŸÖŸÖÿ™ÿßÿ≤! ‚≠ê",emoji:"‚≠ê"},{text:"ÿ™ŸÖÿßŸÖ üëç",emoji:"üëç"}],Sd=[{text:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ ÿ•ŸÑŸäŸÉ! üöó",emoji:"üöó"},{text:"ŸàÿµŸÑÿ™! üìç",emoji:"üìç"},{text:"ÿØŸÇÿßÿ¶ŸÇ Ÿàÿ£ŸàÿµŸÑ ‚è±Ô∏è",emoji:"‚è±Ô∏è"},{text:"ÿ£ÿ≠ÿ™ÿßÿ¨ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ üìå",emoji:"üìå"},{text:"ÿßÿ™ÿµŸÑ ÿ®Ÿä üìû",emoji:"üìû"},{text:"ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ∑ŸÑÿ®ŸÉ! üôè",emoji:"üôè"}],Cd=[{text:"ÿ∑ŸÑÿ®ŸÉ ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ± üë®‚Äçüç≥",emoji:"üë®‚Äçüç≥"},{text:"ÿßŸÑÿ∑ŸÑÿ® ÿ¨ÿßŸáÿ≤! üì¶",emoji:"üì¶"},{text:"ÿßŸÑŸÖŸÜÿØŸàÿ® ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ üöó",emoji:"üöó"},{text:"ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ∑ŸÑÿ®ŸÉ! üôè",emoji:"üôè"},{text:"ŸÜÿπÿ™ÿ∞ÿ± ÿπŸÜ ÿßŸÑÿ™ÿ£ÿÆŸäÿ± ‚è≥",emoji:"‚è≥"},{text:"ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ∑ŸÑÿ® ‚úÖ",emoji:"‚úÖ"}],Ad=["üòä","üëç","‚ù§Ô∏è","üî•","‚≠ê","üôè","üí™","üéâ","‚òï","üçï","üöó","üìç"],Id=()=>{const[s]=pa(),a=s.get("orderId"),n=fs(),{user:d,role:i}=Ee(),y=ze(),[r,D]=t.useState(null),[E,B]=t.useState([]),[P,N]=t.useState(""),[T,j]=t.useState(!1),[f,U]=t.useState(!1),[g,w]=t.useState(""),M=t.useRef(null),b=i==="courier",h=i==="owner",k=i==="customer"||i==="admin",L=r&&!r.courierId&&r.restaurantId,v=b?Sd:h?Cd:k&&L?kd:vd;t.useEffect(()=>{if(!a)return;const p=xs(J(S,"orders",a),I=>{if(I.exists()){const x=I.data();D({id:I.id,status:x.status,address:x.address,total:x.total,customerId:x.customerId,courierId:x.courierId,restaurantId:x.restaurantId,restaurantName:x.restaurantName})}});return()=>p()},[a]),t.useEffect(()=>{if(!r)return;let p,I="customer";if(b||h?(p=r.customerId,I="customer"):k&&(r.courierId?(p=r.courierId,I="courier"):r.restaurantId&&(p=r.restaurantId,I="restaurant")),!p){w(L?r.restaurantName||"ÿßŸÑŸÖÿ∑ÿπŸÖ":"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ");return}I==="restaurant"?Ce(J(S,"restaurants",p)).then(x=>{var Q;x.exists()?w(((Q=x.data())==null?void 0:Q.name)||"ÿßŸÑŸÖÿ∑ÿπŸÖ"):w(r.restaurantName||"ÿßŸÑŸÖÿ∑ÿπŸÖ")}):Ce(J(S,"users",p)).then(x=>{var Q;if(x.exists()){const A=I==="courier"?"ÿßŸÑŸÖŸÜÿØŸàÿ®":"ÿßŸÑÿπŸÖŸäŸÑ";w(((Q=x.data())==null?void 0:Q.name)||A)}})},[r,b,h,k,L]),t.useEffect(()=>{if(!a)return;const p=be(se(S,"orders",a,"messages"),ss("createdAt","asc")),I=xs(p,x=>{B(x.docs.map(Q=>({id:Q.id,...Q.data()})))});return()=>I()},[a]),t.useEffect(()=>{var p;(p=M.current)==null||p.scrollIntoView({behavior:"smooth"})},[E]);const R=async p=>{if(!(!p.trim()||!d||!a)){j(!0);try{let I="customer";b?I="courier":h&&(I="owner"),await Te(se(S,"orders",a,"messages"),{text:p.trim(),senderId:d.uid,senderRole:I,createdAt:X()});try{const{notifyNewMessage:x}=await Bs(async()=>{const{notifyNewMessage:u}=await Promise.resolve().then(()=>ga);return{notifyNewMessage:u}},void 0);let Q,A="customer";b||h?(Q=r==null?void 0:r.customerId,A="customer"):k&&r&&(r.courierId?(Q=r.courierId,A="courier"):r.restaurantId&&(Q=r.restaurantId,A="owner")),Q&&await x(Q,A,h?"ÿßŸÑŸÖÿ∑ÿπŸÖ":b?"ÿßŸÑŸÖŸÜÿØŸàÿ®":"ÿßŸÑÿπŸÖŸäŸÑ",a,p.trim())}catch(x){console.warn("‚ö†Ô∏è ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©:",x)}N(""),U(!1)}catch{y.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©")}j(!1)}},c=p=>{N(I=>I+p)},o=p=>p?p.toDate().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"",_=p=>({pending:{text:"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",color:"bg-yellow-500",emoji:"‚è≥"},accepted:{text:"ÿ™ŸÖ ÿßŸÑŸÇÿ®ŸàŸÑ",color:"bg-blue-500",emoji:"‚úÖ"},preparing:{text:"ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",color:"bg-orange-500",emoji:"üë®‚Äçüç≥"},ready:{text:"ÿ¨ÿßŸáÿ≤",color:"bg-purple-500",emoji:"üì¶"},out_for_delivery:{text:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",color:"bg-sky-500",emoji:"üöó"},delivered:{text:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",color:"bg-green-500",emoji:"‚úÖ"}})[p]||{text:p,color:"bg-gray-500",emoji:"üì¶"},O=()=>b||h?"üë§":L?"üçΩÔ∏è":"üöó";if(!a)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qs,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ∑ŸÑÿ®"})]})});if(!r)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})});if(!((d==null?void 0:d.uid)===r.customerId||(d==null?void 0:d.uid)===r.courierId||(d==null?void 0:d.uid)===r.restaurantId))return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üîí"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸàÿµŸàŸÑ ŸÑŸáÿ∞Ÿá ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©"})]})});const m=_(r.status);return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] max-w-2xl mx-auto",children:[e.jsxs("div",{className:`bg-gradient-to-r ${L?"from-orange-500 via-amber-500 to-yellow-500":"from-primary via-sky-500 to-accent"} rounded-t-3xl p-4 shadow-luxury`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>n(-1),className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center hover:bg-white/30 transition-all",children:e.jsx(Rs,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:O()})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-white text-lg",children:g||(L?"ÿßŸÑŸÖÿ∑ÿπŸÖ":b||h?"ÿßŸÑÿπŸÖŸäŸÑ":"ÿßŸÑŸÖŸÜÿØŸàÿ®")}),e.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-sm",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${r.status==="delivered"?"bg-green-400":"bg-yellow-400 animate-pulse"}`}),e.jsxs("span",{children:[m.emoji," ",m.text]})]})]})]})}),L?e.jsx(Le,{className:"w-6 h-6 text-white animate-pulse"}):e.jsx(is,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-white/90 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsxs("span",{children:["#",r.id.slice(-6)]})]}),r.restaurantName&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{children:r.restaurantName})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[150px]",children:r.address})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-sky-50 to-white p-4 space-y-3",children:[E.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üí¨"}),e.jsx("p",{className:"text-gray-500",children:"ÿßÿ®ÿØÿ£ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ© ÿßŸÑÿ¢ŸÜ!"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"ÿ£ÿ±ÿ≥ŸÑ ÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÑÿ™ŸàÿßÿµŸÑ"})]}),E.map((p,I)=>{const x=p.senderId===(d==null?void 0:d.uid);return e.jsx("div",{className:`flex ${x?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`
                  max-w-[80%] rounded-2xl px-4 py-3 shadow-md
                  ${x?"bg-gradient-to-br from-primary to-sky-600 text-white rounded-bl-sm":"bg-white text-gray-800 rounded-br-sm border border-gray-100"}
                  transform transition-all duration-300 hover:scale-[1.02]
                `,children:[e.jsx("p",{className:"text-base leading-relaxed",children:p.text}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${x?"text-white/70":"text-gray-400"}`,children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsx("span",{children:o(p.createdAt)}),x&&e.jsx(Nr,{className:"w-3 h-3 mr-1"})]})]})},p.id)}),e.jsx("div",{ref:M})]}),e.jsx("div",{className:"bg-white border-t border-gray-100 px-3 py-2",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:v.map((p,I)=>e.jsx("button",{onClick:()=>R(p.text),className:`flex-shrink-0 px-4 py-2 bg-gradient-to-r from-sky-50 to-blue-50 
                         rounded-full text-sm text-primary font-medium border border-sky-100
                         hover:from-sky-100 hover:to-blue-100 hover:shadow-md 
                         transition-all duration-200 active:scale-95`,children:p.text},I))})}),f&&e.jsx("div",{className:"bg-white border-t border-gray-100 px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Ad.map((p,I)=>e.jsx("button",{onClick:()=>c(p),className:`w-10 h-10 text-2xl hover:bg-gray-100 rounded-full 
                           transition-all duration-200 hover:scale-125 active:scale-95`,children:p},I))})}),e.jsx("div",{className:"bg-white border-t border-gray-200 p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(!f),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all
                       ${f?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(Ri,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{type:"text",value:P,onChange:p=>N(p.target.value),onKeyPress:p=>p.key==="Enter"&&R(P),placeholder:"ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ...",className:`w-full px-5 py-3 bg-gray-100 rounded-full text-gray-800 
                         placeholder-gray-400 focus:outline-none focus:ring-2 
                         focus:ring-primary/50 focus:bg-white transition-all`})}),e.jsx("button",{onClick:()=>R(P),disabled:!P.trim()||T,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all
                       ${P.trim()?"bg-gradient-to-r from-primary to-accent text-white shadow-lg hover:shadow-xl hover:scale-105":"bg-gray-200 text-gray-400"}
                       disabled:opacity-50 active:scale-95`,children:e.jsx(Kt,{className:"w-5 h-5"})})]})}),r.status==="delivered"&&e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[e.jsx(Nr,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"ÿ™ŸÖ ÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠! üéâ"}),e.jsx(ot,{className:"w-5 h-5 text-red-300 animate-pulse"})]}),e.jsx("p",{className:"text-white/80 text-sm mt-1",children:"ÿ¥ŸÉÿ±ÿßŸã ŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸÉ ÿ™ÿ∑ÿ®ŸäŸÇŸÜÿß ‚≠ê"})]})]})},$r={order_ready:{icon:e.jsx(Oe,{className:"w-5 h-5"}),bgColor:"bg-green-100",textColor:"text-green-600"},order_delivered:{icon:e.jsx(Ie,{className:"w-5 h-5"}),bgColor:"bg-emerald-100",textColor:"text-emerald-600"},order_accepted:{icon:e.jsx(gs,{className:"w-5 h-5"}),bgColor:"bg-blue-100",textColor:"text-blue-600"},courier_assigned:{icon:e.jsx(Be,{className:"w-5 h-5"}),bgColor:"bg-sky-100",textColor:"text-sky-600"},nearby_offer:{icon:e.jsx(es,{className:"w-5 h-5"}),bgColor:"bg-purple-100",textColor:"text-purple-600"},discount:{icon:e.jsx(Yt,{className:"w-5 h-5"}),bgColor:"bg-rose-100",textColor:"text-rose-600"},new_menu_item:{icon:e.jsx(is,{className:"w-5 h-5"}),bgColor:"bg-amber-100",textColor:"text-amber-600"},default:{icon:e.jsx(ft,{className:"w-5 h-5"}),bgColor:"bg-gray-100",textColor:"text-gray-600"}},Dd=()=>{const{user:s}=Ee(),a=ze(),n=fs(),[d,i]=t.useState([]),[y,r]=t.useState(!0);t.useEffect(()=>{if(!s)return;const T=be(se(S,"notifications"),je("recipientId","==",s.uid),ss("createdAt","desc")),j=xs(T,f=>{const U=f.docs.map(g=>({id:g.id,...g.data()}));i(U),r(!1)},f=>{console.error("Error fetching notifications:",f),r(!1)});return()=>j()},[s]);const D=async T=>{try{await xe(J(S,"notifications",T),{read:!0})}catch(j){console.error("Error marking as read:",j)}},E=async()=>{const T=d.filter(j=>!j.read);try{await Promise.all(T.map(j=>xe(J(S,"notifications",j.id),{read:!0}))),a.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÉŸÑ ŸÉŸÖŸÇÿ±Ÿàÿ°")}catch{a.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™")}},B=async T=>{try{await As(J(S,"notifications",T)),a.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±")}catch{a.error("ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±")}},P=T=>{if(!T)return"";const j=T.toDate(),U=new Date().getTime()-j.getTime(),g=Math.floor(U/6e4),w=Math.floor(U/36e5),M=Math.floor(U/864e5);return g<1?"ÿßŸÑÿ¢ŸÜ":g<60?`ŸÖŸÜÿ∞ ${g} ÿØŸÇŸäŸÇÿ©`:w<24?`ŸÖŸÜÿ∞ ${w} ÿ≥ÿßÿπÿ©`:M<7?`ŸÖŸÜÿ∞ ${M} ŸäŸàŸÖ`:j.toLocaleDateString("ar-SA")},N=d.filter(T=>!T.read).length;return y?e.jsx("div",{className:"min-h-screen bg-slate-200 flex items-center justify-center",children:e.jsx(qe,{className:"w-8 h-8 animate-spin text-sky-500"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-200 to-slate-100",children:[e.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[e.jsx(Rs,{className:"w-5 h-5"}),"ÿ±ÿ¨Ÿàÿπ"]}),e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(ft,{className:"w-6 h-6 text-sky-500"}),"ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™",N>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:N})]}),N>0&&e.jsx("button",{onClick:E,className:"text-sm text-sky-600 hover:text-sky-800",children:"ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑŸÉŸÑ"})]})})}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:d.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(ft,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™"})]}):e.jsx("div",{className:"space-y-3",children:d.map(T=>{const j=$r[T.type]||$r.default;return e.jsx("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition hover:shadow-md cursor-pointer ${T.read?"border-gray-100":"border-sky-200 bg-sky-50/50"}`,onClick:()=>{T.read||D(T.id),T.actionUrl&&n(T.actionUrl)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${j.bgColor} ${j.textColor}`,children:j.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:T.message}),!T.read&&e.jsx("span",{className:"text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded-full",children:"ÿ¨ÿØŸäÿØ"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:P(T.createdAt)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[!T.read&&e.jsx("button",{onClick:f=>{f.stopPropagation(),D(T.id)},className:"p-1.5 text-gray-400 hover:text-green-500 transition",title:"ÿ™ÿ≠ÿØŸäÿØ ŸÉŸÖŸÇÿ±Ÿàÿ°",children:e.jsx(gs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:f=>{f.stopPropagation(),B(T.id)},className:"p-1.5 text-gray-400 hover:text-red-500 transition",title:"ÿ≠ÿ∞ŸÅ",children:e.jsx(Ns,{className:"w-4 h-4"})})]})]})},T.id)})})})]})},Rd=[{keywords:["ŸÖÿ±ÿ≠ÿ®ÿß","ÿßŸÑÿ≥ŸÑÿßŸÖ","ŸáŸÑÿß","ÿßŸáŸÑÿß"],reply:"ÿ£ŸáŸÑÿßŸã Ÿàÿ≥ŸáŸÑÿßŸã! üëã ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿßŸÑŸäŸàŸÖÿü"},{keywords:["ÿ∑ŸÑÿ®","ŸÖÿ™ÿ£ÿÆÿ±","ÿ™ÿ£ÿÆÿ±","ŸàŸäŸÜ ÿßŸÑÿ∑ŸÑÿ®"],reply:"ŸÜÿπÿ™ÿ∞ÿ± ÿπŸÜ ÿßŸÑÿ™ÿ£ÿÆŸäÿ±! ŸáŸÑ ŸäŸÖŸÉŸÜŸÉ ÿ•ÿÆÿ®ÿßÿ±Ÿä ÿ®ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ® ŸÑŸÖÿ™ÿßÿ®ÿπÿ™Ÿáÿü"},{keywords:["ÿßŸÑÿ∫ÿßÿ°","ÿßŸÑÿ∫Ÿä","ÿ£ŸÑÿ∫Ÿä","ÿ±ÿ¨ÿπ ŸÅŸÑŸàÿ≥Ÿä"],reply:"ÿ≥ÿ£ÿ≥ÿßÿπÿØŸÉ ŸÅŸä ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®. ŸÖÿß ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®ÿü ŸàŸÖÿß ÿ≥ÿ®ÿ® ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°ÿü"},{keywords:["ÿ¥ŸÉÿ±ÿß","ŸÖÿ¥ŸÉŸàÿ±","ÿ™ÿ≥ŸÑŸÖ"],reply:"ÿßŸÑÿπŸÅŸà! ÿ≥ÿπŸäÿØŸäŸÜ ÿ®ÿÆÿØŸÖÿ™ŸÉ üåü ŸáŸÑ ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ£Ÿä ŸÖÿ≥ÿßÿπÿØÿ© ÿ£ÿÆÿ±Ÿâÿü"}],Pd=[{q:"ŸÉŸäŸÅ ÿ£ŸÑÿ∫Ÿä ÿ∑ŸÑÿ®Ÿäÿü",icon:"‚ùå"},{q:"ÿ£ŸäŸÜ ÿ∑ŸÑÿ®Ÿä ÿßŸÑÿ¢ŸÜÿü",icon:"üìç"},{q:"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿØŸÅÿπ",icon:"üí≥"},{q:"ÿ¥ŸÉŸàŸâ ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ±ÿ©",icon:"üè†"},{q:"ÿ¥ŸÉŸàŸâ ÿπŸÑŸâ ÿßŸÑŸÖŸÜÿØŸàÿ®",icon:"üöó"},{q:"ÿ£ÿÆÿ±Ÿâ",icon:"üí¨"}],Td=()=>{fs();const{user:s,role:a}=Ee(),n=ze(),d=t.useRef(null),i=t.useRef(null),[y,r]=t.useState(null),[D,E]=t.useState([]),[B,P]=t.useState(!0),[N,T]=t.useState(!1),[j,f]=t.useState(""),[U,g]=t.useState(!0),[w,M]=t.useState(!1);t.useEffect(()=>{if(!(s!=null&&s.uid))return;(async()=>{const $=be(se(S,"supportChats"),je("userId","==",s.uid),je("status","in",["active","waiting"]),bs(1)),v=await pe($);if(!v.empty){const R={id:v.docs[0].id,...v.docs[0].data()};r(R),g(!1)}P(!1)})()},[s==null?void 0:s.uid]),t.useEffect(()=>{if(!(y!=null&&y.id))return;const L=be(se(S,"supportChats",y.id,"messages"),ss("createdAt","asc")),$=xs(L,v=>{const R=v.docs.map(c=>({id:c.id,...c.data()}));E(R),R.some(c=>!c.read&&c.senderRole==="support")&&xe(J(S,"supportChats",y.id),{unreadByUser:0})});return()=>$()},[y==null?void 0:y.id]),t.useEffect(()=>{var L;(L=d.current)==null||L.scrollIntoView({behavior:"smooth"})},[D,w]);const b=async L=>{if(s!=null&&s.uid)try{const $={userId:s.uid,userName:s.displayName||"ŸÖÿ≥ÿ™ÿÆÿØŸÖ",userRole:a||"customer",status:"waiting",subject:L||"ÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ± ÿπÿßŸÖ",priority:"medium",createdAt:X(),updatedAt:X(),unreadByUser:0,unreadBySupport:1},v=await Te(se(S,"supportChats"),$),R={id:v.id,...$};r(R),g(!1),await Te(se(S,"supportChats",v.id,"messages"),{chatId:v.id,senderId:"bot",senderName:"ŸÖÿ≥ÿßÿπÿØ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™",senderRole:"bot",message:`ŸÖÿ±ÿ≠ÿ®ÿßŸã ${s.displayName||"ÿπÿ≤Ÿäÿ≤Ÿä ÿßŸÑÿπŸÖŸäŸÑ"}! üëã

ÿ£ŸÜÿß ŸÖÿ≥ÿßÿπÿØŸÉ ÿßŸÑÿ¢ŸÑŸä. ÿ£ÿÆÿ®ÿ±ŸÜŸä ÿ®ŸÖÿ¥ŸÉŸÑÿ™ŸÉ Ÿàÿ≥ÿ£ÿ≠ÿßŸàŸÑ ŸÖÿ≥ÿßÿπÿØÿ™ŸÉÿå ÿ£Ÿà ÿ≥Ÿäÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ ÿÆŸÑÿßŸÑ ÿØŸÇÿßÿ¶ŸÇ.

${L?`ŸÖŸàÿ∂Ÿàÿπ ÿßŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±: ${L}`:""}`,type:"bot",createdAt:X(),read:!1}),setTimeout(()=>{var c;return(c=i.current)==null?void 0:c.focus()},100)}catch($){console.error("Error starting chat:",$),n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ÿå ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ")}},h=async L=>{const $=L||j.trim();if(!(!$||!(y!=null&&y.id)||N)){T(!0),f("");try{await Te(se(S,"supportChats",y.id,"messages"),{chatId:y.id,senderId:s==null?void 0:s.uid,senderName:(s==null?void 0:s.displayName)||"ŸÖÿ≥ÿ™ÿÆÿØŸÖ",senderRole:"user",message:$,type:"user",createdAt:X(),read:!1}),await xe(J(S,"supportChats",y.id),{lastMessage:$,lastMessageAt:X(),updatedAt:X(),unreadBySupport:Ze(1)}),setTimeout(async()=>{M(!0);const v=Rd.find(R=>R.keywords.some(c=>$.toLowerCase().includes(c)));await new Promise(R=>setTimeout(R,1500)),v&&await Te(se(S,"supportChats",y.id,"messages"),{chatId:y.id,senderId:"bot",senderName:"ŸÖÿ≥ÿßÿπÿØ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™",senderRole:"bot",message:v.reply,type:"bot",createdAt:X(),read:!1}),M(!1)},500)}catch(v){console.error("Error sending message:",v),n.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©")}finally{T(!1)}}},k=async()=>{y!=null&&y.id&&(await xe(J(S,"supportChats",y.id),{status:"closed",updatedAt:X()}),r(null),E([]),g(!0),n.success("ÿ™ŸÖ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©"))};return B?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(as,{className:"w-10 h-10 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto h-[calc(100vh-120px)] flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-blue-500 rounded-t-2xl p-4 text-white flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Bt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä"}),e.jsx("p",{className:"text-sky-100 text-sm flex items-center gap-1",children:(y==null?void 0:y.status)==="active"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"ŸÖÿ™ÿµŸÑ ÿßŸÑÿ¢ŸÜ"]}):(y==null?void 0:y.status)==="waiting"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse"}),"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿØÿπŸÖ"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"ŸÖÿ™ÿßÿ≠ ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ©"]})})]})]}),y&&e.jsx("button",{onClick:k,className:"p-2 hover:bg-white/20 rounded-full transition",title:"ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"flex-1 bg-gradient-to-b from-gray-50 to-white overflow-y-auto p-4 space-y-4",children:[U&&!y&&e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-400 to-blue-500 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg",children:e.jsx(is,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"ŸÉŸäŸÅ ŸäŸÖŸÉŸÜŸÜÿß ŸÖÿ≥ÿßÿπÿØÿ™ŸÉÿü"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"ÿßÿÆÿ™ÿ± ŸÖŸàÿ∂ŸàÿπÿßŸã ÿ£Ÿà ÿßÿ®ÿØÿ£ ŸÖÿ≠ÿßÿØÿ´ÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ©"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Pd.map((L,$)=>e.jsxs("button",{onClick:()=>b(L.q),className:`flex items-center gap-3 p-4 bg-white rounded-xl border-2 border-gray-100 
                             hover:border-sky-300 hover:shadow-md transition-all text-right`,children:[e.jsx("span",{className:"text-2xl",children:L.icon}),e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:L.q})]},$))}),e.jsxs("button",{onClick:()=>b(),className:`w-full flex items-center justify-center gap-3 py-4 px-6 
                         bg-gradient-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700
                         text-white rounded-2xl font-bold shadow-lg transition-all`,children:[e.jsx(Qs,{className:"w-6 h-6"}),e.jsx("span",{children:"ÿßÿ®ÿØÿ£ ŸÖÿ≠ÿßÿØÿ´ÿ© ŸÖÿπ ÿßŸÑÿØÿπŸÖ"})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-amber-800 text-sm",children:"‚è∞ ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ ŸÖÿ™ÿßÿ≠ ÿπŸÑŸâ ŸÖÿØÿßÿ± ÿßŸÑÿ≥ÿßÿπÿ©"}),e.jsx("p",{className:"text-amber-600 text-xs mt-1",children:"ŸÖÿ™Ÿàÿ≥ÿ∑ ŸàŸÇÿ™ ÿßŸÑÿ±ÿØ: ÿ£ŸÇŸÑ ŸÖŸÜ 5 ÿØŸÇÿßÿ¶ŸÇ"})]})]}),D.map(L=>{var $,v;return e.jsx("div",{className:`flex ${L.senderRole==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] ${L.senderRole==="user"?"order-1":"order-2"}`,children:[L.senderRole!=="user"&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${L.senderRole==="bot"?"bg-purple-100":"bg-sky-100"}`,children:L.senderRole==="bot"?e.jsx(Cl,{className:"w-4 h-4 text-purple-600"}):e.jsx(Bt,{className:"w-4 h-4 text-sky-600"})}),e.jsx("span",{className:"text-xs text-gray-500",children:L.senderName})]}),e.jsx("div",{className:`rounded-2xl px-4 py-3 ${L.senderRole==="user"?"bg-gradient-to-r from-sky-500 to-blue-500 text-white rounded-br-md":L.senderRole==="bot"?"bg-purple-50 text-gray-800 border border-purple-100 rounded-bl-md":"bg-white text-gray-800 border border-gray-200 shadow-sm rounded-bl-md"}`,children:e.jsx("p",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:L.message})}),e.jsx("p",{className:`text-xs text-gray-400 mt-1 ${L.senderRole==="user"?"text-left":"text-right"}`,children:((v=($=L.createdAt)==null?void 0:$.toDate)==null?void 0:v.call($).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}))||""})]})},L.id)}),w&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Cl,{className:"w-4 h-4 text-purple-600"})}),e.jsx("div",{className:"bg-gray-100 rounded-2xl px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),e.jsx("div",{ref:d})]}),y&&e.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 rounded-b-2xl flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{ref:i,type:"text",value:j,onChange:L=>f(L.target.value),onKeyPress:L=>L.key==="Enter"&&h(),placeholder:"ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ŸáŸÜÿß...",className:`flex-1 px-4 py-3 bg-gray-100 rounded-xl border-2 border-transparent 
                       focus:border-sky-300 focus:bg-white focus:outline-none transition`,disabled:N}),e.jsx("button",{onClick:()=>h(),disabled:!j.trim()||N,className:`w-12 h-12 bg-gradient-to-r from-sky-500 to-blue-500 hover:from-sky-600 hover:to-blue-700
                       text-white rounded-xl flex items-center justify-center transition-all
                       disabled:opacity-50 disabled:cursor-not-allowed`,children:N?e.jsx(as,{className:"w-5 h-5 animate-spin"}):e.jsx(Kt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-1",children:["ÿ£ŸäŸÜ ÿ∑ŸÑÿ®Ÿäÿü","ÿ£ÿ±ŸäÿØ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®","ÿ™ÿ≠ÿØÿ´ ŸÖÿπ ŸÖŸàÿ∏ŸÅ"].map((L,$)=>e.jsx("button",{onClick:()=>h(L),disabled:N,className:`flex-shrink-0 px-3 py-1.5 bg-gray-100 hover:bg-sky-100 
                         text-gray-600 hover:text-sky-700 rounded-full text-sm transition`,children:L},$))})]})]})},Ed=()=>{var L,$;const{user:s,role:a}=Ee(),n=ze(),[d,i]=t.useState("dashboard"),[y,r]=t.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[D,E]=t.useState(0),[B,P]=t.useState(!0),[N,T]=t.useState(null),[j,f]=t.useState([]),[U,g]=t.useState("all"),[w,M]=t.useState([]),[b,h]=t.useState(null);t.useEffect(()=>{s&&(async()=>{try{const v=be(se(S,"restaurants"),je("referredBy","==",s.uid)),c=(await pe(v)).docs.map(p=>({id:p.id,...p.data()}));M(c);const o=c.length,_=c.map(p=>p.id);let O=0,q=0,m=0;if(_.length>0){const p=be(se(S,"orders"),je("status","==","pending"),bs(100));O=(await pe(p)).docs.filter(A=>_.includes(A.data().restaurantId)).length;const Q=(await pe(se(S,"orders"))).docs.filter(A=>_.includes(A.data().restaurantId));q=Q.length,m=Q.reduce((A,u)=>A+(u.data().deliveryFee||0),0)}try{const I=(await Ce(J(S,"wallets",s.uid))).data();E((I==null?void 0:I.balance)||0)}catch{E(0)}try{const p=be(se(S,"tasks"),je("assignedTo","==",s.uid)),x=(await pe(p)).docs.map(Q=>({id:Q.id,...Q.data()}));f(x.sort((Q,A)=>{var u,C;return(((u=A.createdAt)==null?void 0:u.seconds)||0)-(((C=Q.createdAt)==null?void 0:C.seconds)||0)}))}catch(p){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸáÿßŸÖ:",p)}r({totalRestaurants:o,totalOrders:q,totalEarnings:m,pendingOrders:O})}catch(v){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™:",v)}finally{P(!1)}})()},[s]);const k=async(v,R)=>{try{const c={status:R,updatedAt:X()};R==="completed"&&(c.completedAt=X()),await xe(J(S,"tasks",v),c),f(o=>o.map(_=>_.id===v?{..._,status:R}:_)),n.success(R==="in_progress"?"ÿ™ŸÖ ÿ®ÿØÿ° ÿßŸÑŸÖŸáŸÖÿ©":R==="completed"?"ÿ™ŸÖ ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑŸÖŸáŸÖÿ© ÿ®ŸÜÿ¨ÿßÿ≠! üéâ":"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸáŸÖÿ©")}catch{n.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸáŸÖÿ©")}};return t.useEffect(()=>{s&&(async()=>{try{const v=await Ce(J(S,"users",s.uid));v.exists()&&T({uid:v.id,...v.data()})}catch(v){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅ:",v)}})()},[s]),B?e.jsx(Fe,{allow:["admin"],children:e.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})}):e.jsx(Fe,{allow:["admin"],children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ•ÿØÿßÿ±ÿ©"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"ÿ£ŸáŸÑÿßŸã ÿ®ŸÉ Ÿäÿß ŸÖÿ¥ÿ±ŸÅ! üëã"})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6 flex-wrap",children:[e.jsxs("button",{onClick:()=>i("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${d==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Us,{className:"w-5 h-5"}),"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ"]}),e.jsxs("button",{onClick:()=>i("myRestaurants"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${d==="myRestaurants"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Le,{className:"w-5 h-5"}),"ŸÖÿ∑ÿßÿπŸÖŸä",e.jsx("span",{className:"bg-white/20 text-xs px-2 py-0.5 rounded-full",children:w.length})]}),e.jsxs("button",{onClick:()=>i("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${d==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(ms,{className:"w-5 h-5"}),"ÿ®ŸäÿßŸÜÿßÿ™Ÿä"]}),e.jsxs("button",{onClick:()=>i("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${d==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Ha,{className:"w-5 h-5"}),"ŸÖŸáÿßŸÖŸä",j.filter(v=>v.status==="pending"||v.status==="in_progress").length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:j.filter(v=>v.status==="pending"||v.status==="in_progress").length})]})]}),d==="myRestaurants"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ŸÖÿ∑ÿßÿπŸÖŸä ÿßŸÑŸÖÿ≥ÿ¨ŸÑÿ©"}),e.jsx("h2",{className:"text-4xl font-bold",children:w.length}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"üí∞ ÿ≥ÿ™ÿ≠ÿµŸÑŸäŸÜ ÿπŸÑŸâ ÿπŸÖŸàŸÑÿ© ŸÖŸÜ ŸÉŸÑ ÿ∑ŸÑÿ® ŸÑŸáÿ∞Ÿá ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"})]}),e.jsx(Le,{className:"w-16 h-16 opacity-80"})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(Le,{className:"w-6 h-6"}),"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ≥ÿ¨ŸÑÿ© ÿ®Ÿàÿßÿ≥ÿ∑ÿ™Ÿä"]}),w.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-5xl mb-4",children:"üè™"}),e.jsx("p",{className:"text-lg font-semibold",children:"ŸÑŸÖ ÿ™ŸÇŸàŸÖŸä ÿ®ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ£Ÿä ŸÖÿ∑ÿπŸÖ ÿ®ÿπÿØ"}),e.jsx("p",{className:"text-sm mt-2",children:'ÿßÿ∂ÿ∫ÿ∑Ÿä ÿπŸÑŸâ "ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ" ŸÑÿ®ÿØÿ° ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ'}),e.jsx(le,{to:"/admin/add-restaurant",className:"inline-block mt-4 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:"‚ûï ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"})]}):e.jsx("div",{className:"space-y-4",children:w.map(v=>{var R,c,o;return e.jsxs("div",{className:"border-2 rounded-2xl overflow-hidden hover:border-primary transition",children:[e.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50 flex items-center justify-between",onClick:()=>h(b===v.id?null:v.id),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:v.logoUrl?e.jsx("img",{src:v.logoUrl,alt:v.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:"üçΩÔ∏è"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:v.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[v.city||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"," ‚Ä¢ ",v.phone||"ÿ®ÿØŸàŸÜ ÿ±ŸÇŸÖ"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.isVerified?e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:"‚úÖ ŸÖŸàÿ´ŸÇ"}):e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-semibold rounded-full",children:"‚è≥ ÿ∫Ÿäÿ± ŸÖŸàÿ´ŸÇ"}),v.packageType==="premium"&&e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 text-xs font-semibold rounded-full",children:"‚≠ê ŸÖŸÖŸäÿ≤"})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:b===v.id?e.jsx(ja,{className:"w-5 h-5 text-gray-400"}):e.jsx(Jt,{className:"w-5 h-5 text-gray-400"})})]}),b===v.id&&e.jsx("div",{className:"border-t bg-gray-50 p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßŸÑŸÖÿπÿ±ŸëŸÅ"}),e.jsx("p",{className:"font-mono text-xs text-gray-700 truncate",children:v.id})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßŸÑÿ®ÿ±ŸäÿØ"}),e.jsx("p",{className:"text-sm text-gray-700 truncate",children:v.email||"-"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿßŸÑŸÖŸàŸÇÿπ"}),e.jsx("p",{className:"text-sm text-gray-700 truncate",children:v.location||"-"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ"}),e.jsx("p",{className:"text-sm text-gray-700",children:((o=(c=(R=v.createdAt)==null?void 0:R.toDate)==null?void 0:c.call(R))==null?void 0:o.toLocaleDateString("ar-SA"))||(v.createdAt instanceof Date?v.createdAt.toLocaleDateString("ar-SA"):"-")})]})]})})]},v.id)})}),w.length>0&&e.jsx(le,{to:"/admin/add-restaurant",className:"block mt-6 w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"‚ûï ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"})]})]}),d==="profile"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(ms,{className:"w-6 h-6"}),"ÿ®ŸäÿßŸÜÿßÿ™Ÿä"]}),N?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((L=N.name)==null?void 0:L.charAt(0))||(($=N.email)==null?void 0:$.charAt(0))||"ÿü"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:N.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:"üëî ŸÖÿ¥ÿ±ŸÅ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"}),e.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:N.email})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ÿßŸÑÿØŸàÿ±"}),e.jsx("p",{className:"font-semibold text-gray-900",children:a==="admin"?"ŸÖÿ¥ÿ±ŸÅ":a})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ŸÖÿπÿ±ŸëŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ"}),e.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:N.uid})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©"}),e.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[D.toFixed(2)," ÿ±.ÿ≥"]})]})]})]}),e.jsx(le,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä"})]}):e.jsx("div",{className:"text-center py-8 text-gray-600",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]}),d==="tasks"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[e.jsx(Ha,{className:"w-6 h-6"}),"ŸÖŸáÿßŸÖŸä ÿßŸÑŸäŸàŸÖŸäÿ©"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(v=>e.jsxs("button",{onClick:()=>g(v),className:`px-4 py-2 rounded-xl font-semibold transition ${U===v?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[v==="all"&&"üìã ÿßŸÑŸÉŸÑ",v==="pending"&&"‚è≥ ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±",v==="in_progress"&&"üîÑ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞",v==="completed"&&"‚úÖ ŸÖŸÉÿ™ŸÖŸÑÿ©"]},v))}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:j.filter(v=>v.status==="pending").length}),e.jsx("p",{className:"text-sm text-yellow-700",children:"ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:j.filter(v=>v.status==="in_progress").length}),e.jsx("p",{className:"text-sm text-blue-700",children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:j.filter(v=>v.status==="completed").length}),e.jsx("p",{className:"text-sm text-green-700",children:"ŸÖŸÉÿ™ŸÖŸÑÿ©"})]})]}),j.filter(v=>U==="all"||v.status===U).length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-5xl mb-4",children:"üìã"}),e.jsxs("p",{className:"text-lg",children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸáÿßŸÖ ",U!=="all"&&"ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸÅÿ¶ÿ©"]}),e.jsx("p",{className:"text-sm mt-2",children:"ÿ≥ÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß ÿßŸÑŸÖŸáÿßŸÖ ÿßŸÑÿ™Ÿä Ÿäÿ≥ŸÜÿØŸáÿß ŸÑŸÉ ÿßŸÑŸÖÿ∑Ÿàÿ±"})]}):e.jsx("div",{className:"space-y-4",children:j.filter(v=>U==="all"||v.status===U).map(v=>{var R,c,o;return e.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${v.status==="completed"?"bg-green-50 border-green-200":v.status==="in_progress"?"bg-blue-50 border-blue-200":v.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${v.priority==="high"?"bg-red-100 text-red-700":v.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:v.priority==="high"?"üî¥ ÿπÿßŸÑŸäÿ©":v.priority==="medium"?"üü° ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©":"‚ö™ ŸÖŸÜÿÆŸÅÿ∂ÿ©"}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${v.status==="pending"?"bg-yellow-100 text-yellow-700":v.status==="in_progress"?"bg-blue-100 text-blue-700":v.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[v.status==="pending"&&"‚è≥ ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±",v.status==="in_progress"&&"üîÑ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞",v.status==="completed"&&"‚úÖ ŸÖŸÉÿ™ŸÖŸÑÿ©",v.status==="cancelled"&&"‚ùå ŸÖŸÑÿ∫ÿßÿ©"]})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-800",children:v.title}),v.description&&e.jsx("p",{className:"text-gray-600 mt-1",children:v.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[v.dueDate&&e.jsxs("span",{className:new Date(v.dueDate)<new Date&&v.status!=="completed"?"text-red-600 font-semibold":"",children:["üìÖ ",new Date(v.dueDate).toLocaleDateString("ar-SA"),new Date(v.dueDate)<new Date&&v.status!=="completed"&&" (ŸÖÿ™ÿ£ÿÆÿ±ÿ©!)"]}),e.jsxs("span",{children:["üïê ",((o=(c=(R=v.createdAt)==null?void 0:R.toDate)==null?void 0:c.call(R))==null?void 0:o.toLocaleDateString("ar-SA"))||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"]})]}),v.notes&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:["üí¨ ",v.notes]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[v.status==="pending"&&e.jsx("button",{onClick:()=>k(v.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:"‚ñ∂Ô∏è ÿ®ÿØÿ°"}),v.status==="in_progress"&&e.jsxs("button",{onClick:()=>k(v.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[e.jsx(Ie,{className:"w-4 h-4"}),"ÿ•ŸÉŸÖÿßŸÑ"]}),v.status==="completed"&&e.jsx("span",{className:"text-green-600 font-semibold text-center",children:"‚úÖ ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¨ÿßÿ≤"})]})]})},v.id)})})]})}),d==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"ÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©"}),e.jsxs("h2",{className:"text-3xl font-bold",children:[D.toFixed(2)," ÿ±.ÿ≥"]}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"üí∞ ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ 50 ŸáŸÑŸÑÿ© ŸÖŸÜ ŸÉŸÑ ÿ∑ŸÑÿ® ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑÿ™Ÿä ÿ£ÿ∂ŸÅÿ™Ÿáÿß"})]}),e.jsx(ns,{className:"w-16 h-16 opacity-80"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ∂ÿßŸÅÿ©"}),e.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:y.totalRestaurants})]}),e.jsx(js,{className:"w-12 h-12 text-primary opacity-30"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:y.totalOrders})]}),e.jsx(Vr,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿπŸÑŸÇÿ©"}),e.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:y.pendingOrders})]}),e.jsx(Us,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"}),e.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:y.totalEarnings.toFixed(2)})]}),e.jsx(Us,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"ÿ£ÿ∂ŸÅ ŸÖÿ∑ÿßÿπŸÖ ÿ¨ÿØŸäÿØÿ© Ÿàÿ£ÿØÿ± ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ≥ÿ¨ŸÑÿ©"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(le,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"‚ûï ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"}),e.jsx(le,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"üìã ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"ÿ±ÿßŸÇÿ® ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ∂ÿßŸÅÿ© Ÿàÿ™ÿßÿ®ÿπ ÿ≠ÿßŸÑÿ™Ÿáÿß"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(le,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"üìä ÿ¨ŸÖŸäÿπ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx(le,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"‚è≥ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿπŸÑŸÇÿ©"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"ŸÉÿπŸÖŸäŸÑ"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"ÿßÿ≥ÿ™ÿπÿ±ÿ∂ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© Ÿàÿ£ŸÜÿ¥ÿ¶ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ© ŸÖÿ´ŸÑ ÿ£Ÿä ÿπŸÖŸäŸÑ"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(le,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"üçó ÿßÿ≥ÿ™ÿπÿ±ÿ∂ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©"}),e.jsx(le,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"üì¶ ÿ∑ŸÑÿ®ÿßÿ™Ÿä"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ŸàÿßŸÑŸÖŸÉÿßŸÅÿ¢ÿ™"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"ÿßÿπÿ±ÿ∂ ÿ±ÿµŸäÿØŸÉ ŸàÿßŸÑÿπŸÖŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ™ÿ≠ÿµŸÑÿ© ŸÖŸÜ ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿ∑ÿßÿπŸÖŸÉ"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:["üí∞ ÿ±ÿµŸäÿØŸÉ: ",D.toFixed(2)," ÿ±.ÿ≥"]}),e.jsx(le,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"üìã ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©"})]})]})]})]})]})})},$d=()=>{const{user:s,role:a}=Ee(),n=ze(),d=Ps(),[i,y]=t.useState([]),[r,D]=t.useState(!0),[E,B]=t.useState(!1),[P,N]=t.useState(!1),[T,j]=t.useState(0),f=t.useRef(null),U=t.useRef(null),g=ba(Cs),[w,M]=t.useState(null),[b,h]=t.useState({name:"",phone:"",city:"",location:"",isOpen:!0,allowDelivery:!0,allowPickup:!1,logoFile:null,logoPreview:""}),[k,L]=t.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});t.useEffect(()=>{s&&$()},[s]);const $=async()=>{if(s)try{let p=[];if(a==="developer")p=(await pe(se(S,"restaurants"))).docs.map(x=>({id:x.id,...x.data()}));else{const I=be(se(S,"restaurants"),je("referredBy","==",s.uid));p=(await pe(I)).docs.map(Q=>({id:Q.id,...Q.data()}))}y(p)}catch(p){n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"),console.error(p)}finally{D(!1)}},v=async p=>{if(p.preventDefault(),!k.name.trim()){n.warning("ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ");return}try{N(!0);let I="";if(k.logoFile){const A=k.logoFile.name.replace(/\s+/g,"_").slice(-60),u=`uploads/restaurant_${Date.now()}_${A}`,C=ks(g,u),V=Tt(C,k.logoFile,{contentType:k.logoFile.type||"image/jpeg"});await new Promise((W,ne)=>{V.on("state_changed",re=>{const fe=Math.round(re.bytesTransferred/re.totalBytes*100);j(fe)},ne,async()=>{I=await Ss(V.snapshot.ref),W()})})}const x=a==="admin",Q=a==="developer";await Te(se(S,"restaurants"),{name:k.name,phone:k.phone,city:k.city,location:k.location,ownerId:"admin_"+Date.now(),email:(s==null?void 0:s.email)||"",logoUrl:I,createdAt:new Date,referredBy:x?s==null?void 0:s.uid:null,referrerType:x?"admin":Q?"developer":null}),n.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),x&&n.info("üí∞ ÿ≥ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ 75 ŸáŸÑŸÑÿ© ŸÖŸÜ ŸÉŸÑ ŸÖŸÜÿ™ÿ¨ ŸäŸèÿ∑ŸÑÿ® ŸÖŸÜ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖ"),L({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),B(!1),j(0),$()}catch(I){n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿ∑ÿπŸÖ"),console.error(I)}finally{N(!1)}},R=p=>{M(p),h({name:p.name||"",phone:p.phone||"",city:p.city||"",location:p.location||"",isOpen:p.isOpen!==!1,allowDelivery:p.allowDelivery!==!1,allowPickup:p.allowPickup===!0,logoFile:null,logoPreview:p.logoUrl||""})},c=()=>{M(null),h({name:"",phone:"",city:"",location:"",isOpen:!0,allowDelivery:!0,allowPickup:!1,logoFile:null,logoPreview:""})},o=async p=>{if(p.preventDefault(),!!w){if(!b.name.trim()){n.warning("ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ");return}try{N(!0);let I=b.logoPreview;if(b.logoFile){const x=b.logoFile.name.replace(/\s+/g,"_").slice(-60),Q=`uploads/restaurant_${Date.now()}_${x}`,A=ks(g,Q),u=Tt(A,b.logoFile,{contentType:b.logoFile.type||"image/jpeg"});await new Promise((C,V)=>{u.on("state_changed",W=>{const ne=Math.round(W.bytesTransferred/W.totalBytes*100);j(ne)},V,async()=>{I=await Ss(u.snapshot.ref),C()})})}await xe(J(S,"restaurants",w.id),{name:b.name,phone:b.phone,city:b.city,location:b.location,isOpen:b.isOpen,allowDelivery:b.allowDelivery,allowPickup:b.allowPickup,logoUrl:I,updatedAt:X()}),n.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),c(),j(0),$()}catch(I){n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ÿπŸÖ"),console.error(I)}finally{N(!1)}}},_=async p=>{if(await d.confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖÿü",{dangerous:!0,title:"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ"}))try{await As(J(S,"restaurants",p)),n.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠"),$()}catch(x){n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ"),console.error(x)}},O=async p=>{const I=!p.isVerified;if(await d.confirm(I?`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™Ÿàÿ´ŸäŸÇ ÿ£ÿ≥ÿ±ÿ© "${p.name}"ÿü`:`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ŸÑÿ∫ÿßÿ° ÿ™Ÿàÿ´ŸäŸÇ ÿ£ÿ≥ÿ±ÿ© "${p.name}"ÿü`,{title:I?"‚úÖ ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ©":"‚ùå ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ",confirmText:I?"ŸÜÿπŸÖÿå Ÿàÿ´ŸëŸÇ":"ŸÜÿπŸÖÿå ÿ£ŸÑÿ∫Ÿê ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"}))try{await xe(J(S,"restaurants",p.id),{isVerified:I,verifiedAt:I?X():null,updatedAt:X()}),n.success(I?"ÿ™ŸÖ ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ‚úÖ":"ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"),$()}catch(Q){n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£"),console.error(Q)}},q=async(p,I)=>{try{await xe(J(S,"restaurants",p.id),{sellerTier:I,tierUpdatedAt:X(),updatedAt:X()});const x={bronze:"ÿ®ÿ±ŸàŸÜÿ≤Ÿä",silver:"ŸÅÿ∂Ÿä",gold:"ÿ∞Ÿáÿ®Ÿä"};n.success(`ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿµŸÜŸäŸÅ ÿ•ŸÑŸâ ${x[I]} üèÜ`),$()}catch(x){n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£"),console.error(x)}},m=({tier:p})=>{switch(p){case"gold":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold rounded-full shadow",children:[e.jsx(ts,{className:"w-3 h-3"})," Gold"]});case"silver":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold rounded-full shadow",children:[e.jsx(kl,{className:"w-3 h-3"})," Silver"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-600 to-orange-600 text-white text-xs font-bold rounded-full shadow",children:[e.jsx(xa,{className:"w-3 h-3"})," Bronze"]})}};return r?e.jsx(Fe,{allow:["admin","developer"],children:e.jsx("div",{className:"flex items-center justify-center h-96",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})}):e.jsx(Fe,{allow:["admin","developer"],children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ∂ÿßŸÅÿ©"}),e.jsxs("button",{onClick:()=>B(!E),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[e.jsx(vs,{className:"w-5 h-5"})," ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"]})]}),E&&e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsxs("div",{className:"flex items-center gap-4",children:[k.logoPreview?e.jsx("img",{src:k.logoPreview,alt:"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿ¥ÿπÿßÿ±",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsx(zt,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:f,type:"file",accept:"image/*",className:"hidden",onChange:p=>{var x;const I=(x=p.target.files)==null?void 0:x[0];I&&L({...k,logoFile:I,logoPreview:URL.createObjectURL(I)})}}),e.jsxs("button",{type:"button",onClick:()=>{var p;return(p=f.current)==null?void 0:p.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[e.jsx(ua,{className:"w-4 h-4"}),k.logoFile?"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸàÿ±ÿ©":"ÿ±ŸÅÿπ ÿ¥ÿπÿßÿ±"]}),k.logoFile&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:k.logoFile.name})]})]}),P&&T>0&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${T}%`}})})]}),e.jsx("input",{type:"text",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ",value:k.name,onChange:p=>L({...k,name:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsx("input",{type:"text",placeholder:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ",value:k.phone,onChange:p=>L({...k,phone:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsx("input",{type:"text",placeholder:"ÿßŸÑŸÖÿØŸäŸÜÿ©",value:k.city,onChange:p=>L({...k,city:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsx("textarea",{placeholder:"ÿßŸÑŸÖŸàŸÇÿπ / ÿßŸÑÿπŸÜŸàÿßŸÜ",value:k.location,onChange:p=>L({...k,location:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:P,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:P?`ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ±ŸÅÿπ... ${T}%`:"‚úÖ ÿ≠ŸÅÿ∏"}),e.jsx("button",{type:"button",onClick:()=>B(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:"‚ùå ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-primary",children:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded-xl transition",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-semibold text-gray-700",children:"ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsxs("div",{className:"flex items-center gap-4",children:[b.logoPreview?e.jsx("img",{src:b.logoPreview,alt:"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿ¥ÿπÿßÿ±",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsx(zt,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:U,type:"file",accept:"image/*",className:"hidden",onChange:p=>{var x;const I=(x=p.target.files)==null?void 0:x[0];I&&h({...b,logoFile:I,logoPreview:URL.createObjectURL(I)})}}),e.jsxs("button",{type:"button",onClick:()=>{var p;return(p=U.current)==null?void 0:p.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[e.jsx(ua,{className:"w-4 h-4"}),b.logoFile?"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸàÿ±ÿ©":"ÿ±ŸÅÿπ ÿ¥ÿπÿßÿ± ÿ¨ÿØŸäÿØ"]})]})]}),P&&T>0&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${T}%`}})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Le,{className:"w-4 h-4 inline ml-1"}),"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ"]}),e.jsx("input",{type:"text",value:b.name,onChange:p=>h({...b,name:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(Ol,{className:"w-4 h-4 inline ml-1"}),"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"]}),e.jsx("input",{type:"text",value:b.phone,onChange:p=>h({...b,phone:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"05xxxxxxxx"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(js,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑŸÖÿØŸäŸÜÿ©"]}),e.jsx("input",{type:"text",value:b.city,onChange:p=>h({...b,city:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"ÿßŸÑŸÖÿØŸäŸÜÿ©"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[e.jsx(es,{className:"w-4 h-4 inline ml-1"}),"ÿßŸÑŸÖŸàŸÇÿπ / ÿßŸÑÿπŸÜŸàÿßŸÜ"]}),e.jsx("textarea",{value:b.location,onChange:p=>h({...b,location:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900",placeholder:"ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä",rows:2})]}),e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ™ÿ¨ÿ±"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.isOpen,onChange:p=>h({...b,isOpen:p.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"text-gray-700",children:"ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸÖŸÅÿ™Ÿàÿ≠ ŸàŸäÿ≥ÿ™ŸÇÿ®ŸÑ ÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.allowDelivery,onChange:p=>h({...b,allowDelivery:p.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"text-gray-700",children:"ŸäÿØÿπŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.allowPickup,onChange:p=>h({...b,allowPickup:p.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"text-gray-700",children:"ŸäÿØÿπŸÖ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖÿ∑ÿπŸÖ"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"submit",disabled:P,className:"flex-1 bg-sky-600 hover:bg-sky-700 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:P?`ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ±ŸÅÿπ... ${T}%`:"‚úÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™"}),e.jsx("button",{type:"button",onClick:c,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:"‚ùå ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]})}),e.jsx("div",{className:"grid gap-4",children:i.length===0?e.jsx("div",{className:"text-center text-gray-500 py-12",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ŸÖÿ≥ÿ¨ŸÑÿ© ÿ≠ÿßŸÑŸäÿßŸã"}):i.map(p=>e.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[p.logoUrl?e.jsx("img",{src:p.logoUrl,alt:p.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):e.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"üçΩÔ∏è"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"text-xl font-bold text-primary",children:p.name}),p.isVerified&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[e.jsx(Ie,{className:"w-3 h-3"})," ŸÖŸàÿ´ŸÇÿ©"]}),e.jsx(m,{tier:p.sellerTier})]}),p.city&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["üìç ",p.city]}),p.phone&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["üìû ",p.phone]}),p.location&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["üè¢ ",p.location]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>O(p),className:`p-2.5 rounded-xl transition flex items-center gap-1 text-sm font-semibold ${p.isVerified?"bg-green-100 hover:bg-green-200 text-green-700":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:p.isVerified?"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ":"ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ©",children:[e.jsx(us,{className:"w-4 h-4"}),p.isVerified?"ŸÖŸàÿ´ŸÇÿ©":"ÿ™Ÿàÿ´ŸäŸÇ"]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"p-2.5 rounded-xl bg-amber-100 hover:bg-amber-200 text-amber-700 transition flex items-center gap-1 text-sm font-semibold",children:[e.jsx(xa,{className:"w-4 h-4"}),"ÿßŸÑÿ™ÿµŸÜŸäŸÅ",e.jsx(Jt,{className:"w-3 h-3"})]}),e.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white rounded-xl shadow-xl border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 min-w-[140px]",children:[e.jsxs("button",{onClick:()=>q(p,"bronze"),className:`w-full px-4 py-2.5 text-right hover:bg-amber-50 transition flex items-center gap-2 first:rounded-t-xl ${p.sellerTier==="bronze"||!p.sellerTier?"bg-amber-50":""}`,children:[e.jsx(xa,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-semibold",children:"Bronze"})]}),e.jsxs("button",{onClick:()=>q(p,"silver"),className:`w-full px-4 py-2.5 text-right hover:bg-gray-50 transition flex items-center gap-2 ${p.sellerTier==="silver"?"bg-gray-100":""}`,children:[e.jsx(kl,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-semibold",children:"Silver"})]}),e.jsxs("button",{onClick:()=>q(p,"gold"),className:`w-full px-4 py-2.5 text-right hover:bg-yellow-50 transition flex items-center gap-2 last:rounded-b-xl ${p.sellerTier==="gold"?"bg-yellow-50":""}`,children:[e.jsx(ts,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"font-semibold",children:"Gold"})]})]})]}),e.jsx("button",{onClick:()=>R(p),className:"p-2.5 bg-sky-100 hover:bg-sky-200 text-sky-600 rounded-xl transition",title:"ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ∑ÿπŸÖ",children:e.jsx(Wr,{className:"w-4 h-4"})}),a==="developer"&&e.jsx("button",{onClick:()=>_(p.id),className:"p-2.5 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ",children:e.jsx(Ns,{className:"w-4 h-4"})})]})]})},p.id))})]})})},Nl={pending:"‚è≥ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",accepted:"‚úÖ ŸÖŸÇÿ®ŸàŸÑ",preparing:"üë®‚Äçüç≥ ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",ready:"üì¶ ÿ¨ÿßŸáÿ≤",out_for_delivery:"üöó ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",delivered:"‚úîÔ∏è ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",cancelled:"‚ùå ŸÖŸÑÿ∫Ÿä"},Fd=()=>{const{user:s,role:a}=Ee(),n=ze(),[d,i]=t.useState([]),[y,r]=t.useState([]),[D,E]=t.useState(!0),[B,P]=t.useState("all"),[N,T]=t.useState([]);t.useEffect(()=>{if(!s)return;(async()=>{if(a==="developer")T([]);else{const U=be(se(S,"restaurants"),je("referredBy","==",s.uid)),w=(await pe(U)).docs.map(M=>M.id);T(w)}})()},[s,a]),t.useEffect(()=>{s&&j()},[B,s,a,N]);const j=async()=>{try{let f;B==="all"?f=be(se(S,"orders"),ss("createdAt","desc")):f=be(se(S,"orders"),je("status","==",B),ss("createdAt","desc"));let g=(await pe(f)).docs.map(w=>({id:w.id,...w.data()}));a!=="developer"&&N.length>0?g=g.filter(w=>N.includes(w.restaurantId||"")):a!=="developer"&&N.length===0&&(g=[]),r(g),i(g)}catch(f){n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"),console.error(f)}finally{E(!1)}};return D?e.jsx(Fe,{allow:["admin","developer"],children:e.jsx("div",{className:"flex items-center justify-center h-96",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})}):e.jsx(Fe,{allow:["admin","developer"],children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsxs("button",{onClick:()=>P("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${B==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:["ÿßŸÑŸÉŸÑ (",d.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(f=>{const U=d.filter(g=>g.status===f).length;return e.jsxs("button",{onClick:()=>P(f),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${B===f?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[Nl[f]," (",U,")"]},f)})]}),e.jsx("div",{className:"space-y-4",children:d.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-12",children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ",B!=="all"&&`ÿ®ÿ≠ÿßŸÑÿ© "${Nl[B]}"`]}):d.map(f=>{var U,g;return e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold",children:["ÿ∑ŸÑÿ® #",f.id.slice(-8)]}),e.jsx("p",{className:"text-gray-600 text-sm",children:f.createdAt?new Date(f.createdAt).toLocaleDateString("ar-SA"):"‚Äî"})]}),e.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${f.status==="pending"?"bg-yellow-500":f.status==="delivered"?"bg-green-600":f.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:Nl[f.status]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑÿπŸÖŸäŸÑ ID"}),e.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[f.customerId.slice(0,12),"..."]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("p",{className:"font-semibold text-gray-800",children:f.restaurantName||"‚Äî"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ"}),e.jsx("p",{className:"text-sm text-gray-800",children:f.address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"ÿßŸÑŸÖÿ¨ŸÖŸàÿπ"}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:[((U=f.total)==null?void 0:U.toFixed(2))||0," ÿ±.ÿ≥"]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:"ÿßŸÑÿ£ÿµŸÜÿßŸÅ:"}),e.jsx("div",{className:"space-y-1",children:(g=f.items)==null?void 0:g.map((w,M)=>e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsxs("span",{children:[w.name," √ó ",w.qty]}),e.jsxs("span",{children:[(w.price*w.qty).toFixed(2)," ÿ±.ÿ≥"]})]},M))})]})]},f.id)})})]})})},_s={projectId:Cs.options.projectId,authDomain:Cs.options.authDomain,storageBucket:Cs.options.storageBucket,messagingSenderId:Cs.options.messagingSenderId,appId:Cs.options.appId},_d=()=>{var cr,dr,or,xr;const{user:s}=Ee(),a=ze(),n=Ps(),d=ba(Cs),[i,y]=t.useState("overview"),[r,D]=t.useState(!0),[E,B]=t.useState(!1),[P,N]=t.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[T,j]=t.useState({}),[f,U]=t.useState([]),[g,w]=t.useState([]),[M,b]=t.useState([]),[h,k]=t.useState([]),[L,$]=t.useState(!1),[v,R]=t.useState({}),[c,o]=t.useState(null),[_,O]=t.useState({}),[q,m]=t.useState(!1),[p,I]=t.useState(null),[x,Q]=t.useState({}),[A,u]=t.useState(null),[C,V]=t.useState(!1),[W,ne]=t.useState(""),[re,fe]=t.useState(""),[he,F]=t.useState(""),[te,Ne]=t.useState(""),[ee,Y]=t.useState(!1),[K,me]=t.useState(!1),[de,ye]=t.useState(""),[G,ae]=t.useState(""),[ce,ie]=t.useState(""),[ge,ke]=t.useState(""),[Ae,Ue]=t.useState(!1),[$e,Je]=t.useState(!1),[We,Ts]=t.useState(""),[Es,rt]=t.useState(""),[nt,ds]=t.useState(""),[ht,Ys]=t.useState(""),[$s,Ks]=t.useState(""),[Js,Xt]=t.useState(""),[$t,Zt]=t.useState(!1),[Xs,ve]=t.useState([]),[Me,Ke]=t.useState(!1),[Ge,Zs]=t.useState(""),[ut,Vs]=t.useState(""),[wt,Xa]=t.useState(""),[Vl,Za]=t.useState("medium"),[ql,el]=t.useState(""),[zl,Hl]=t.useState(!1),[Ft,un]=t.useState("all"),[vt,gn]=t.useState([]),[xo,mo]=t.useState("all"),[ho,uo]=t.useState(null),[go,po]=t.useState(null),[bo,fo]=t.useState(99),[jo,No]=t.useState(30),[sl,pn]=t.useState([]),[tl,Ql]=t.useState(!1),[al,bn]=t.useState("all"),[ea,ll]=t.useState([]),[rl,Wl]=t.useState(!1),[kt,Gl]=t.useState(""),[ya,Yl]=t.useState(""),[sa,Kl]=t.useState(""),[Jl,Xl]=t.useState(""),[ta,Zl]=t.useState("support"),[er,sr]=t.useState(!1),[fn,nl]=t.useState(null),[wa,tr]=t.useState("support"),[aa,jn]=t.useState("all"),[Fs,it]=t.useState(""),[la,ar]=t.useState("all"),[va,lr]=t.useState("all"),[il,rr]=t.useState("all"),[qs,cl]=t.useState("newest"),[ra,nr]=t.useState("all");s!=null&&s.email;const dl=()=>{let l=[...g];if(Fs){const H=Fs.toLowerCase();l=l.filter(z=>{var Z,oe,ue,we;return((Z=z.name)==null?void 0:Z.toLowerCase().includes(H))||((oe=z.email)==null?void 0:oe.toLowerCase().includes(H))||((ue=z.phone)==null?void 0:ue.includes(H))||((we=z.city)==null?void 0:we.toLowerCase().includes(H))})}return la==="premium"?l=l.filter(H=>H.packageType==="premium"):la==="free"?l=l.filter(H=>!H.packageType||H.packageType==="free"):la==="verified"?l=l.filter(H=>H.isVerified):la==="unverified"&&(l=l.filter(H=>!H.isVerified)),qs==="newest"?l.sort((H,z)=>{var Z,oe,ue,we,Pe,Se;return(((ue=(oe=(Z=z.createdAt)==null?void 0:Z.toDate)==null?void 0:oe.call(Z))==null?void 0:ue.getTime())||0)-(((Se=(Pe=(we=H.createdAt)==null?void 0:we.toDate)==null?void 0:Pe.call(we))==null?void 0:Se.getTime())||0)}):qs==="oldest"?l.sort((H,z)=>{var Z,oe,ue,we,Pe,Se;return(((ue=(oe=(Z=H.createdAt)==null?void 0:Z.toDate)==null?void 0:oe.call(Z))==null?void 0:ue.getTime())||0)-(((Se=(Pe=(we=z.createdAt)==null?void 0:we.toDate)==null?void 0:Pe.call(we))==null?void 0:Se.getTime())||0)}):qs==="name"&&l.sort((H,z)=>(H.name||"").localeCompare(z.name||"","ar")),l},ol=()=>{let l=[...M];if(Fs){const H=Fs.toLowerCase();l=l.filter(z=>{var Z,oe,ue;return((Z=z.id)==null?void 0:Z.toLowerCase().includes(H))||((oe=z.restaurantName)==null?void 0:oe.toLowerCase().includes(H))||((ue=z.address)==null?void 0:ue.toLowerCase().includes(H))})}if(va==="pending"?l=l.filter(H=>["pending","accepted","preparing","ready"].includes(H.status)):va==="delivered"?l=l.filter(H=>H.status==="delivered"):va==="cancelled"&&(l=l.filter(H=>H.status==="cancelled")),ra!=="all"){const H=new Date,z=new Date;ra==="today"?z.setHours(0,0,0,0):ra==="week"?z.setDate(H.getDate()-7):ra==="month"&&z.setMonth(H.getMonth()-1),l=l.filter(Z=>{var ue,we;return(((we=(ue=Z.createdAt)==null?void 0:ue.toDate)==null?void 0:we.call(ue))||new Date(Z.createdAt))>=z})}return qs==="newest"?l.sort((H,z)=>{var Z,oe,ue,we,Pe,Se;return(((ue=(oe=(Z=z.createdAt)==null?void 0:Z.toDate)==null?void 0:oe.call(Z))==null?void 0:ue.getTime())||0)-(((Se=(Pe=(we=H.createdAt)==null?void 0:we.toDate)==null?void 0:Pe.call(we))==null?void 0:Se.getTime())||0)}):qs==="oldest"&&l.sort((H,z)=>{var Z,oe,ue,we,Pe,Se;return(((ue=(oe=(Z=H.createdAt)==null?void 0:Z.toDate)==null?void 0:oe.call(Z))==null?void 0:ue.getTime())||0)-(((Se=(Pe=(we=z.createdAt)==null?void 0:we.toDate)==null?void 0:Pe.call(we))==null?void 0:Se.getTime())||0)}),l},xl=()=>{let l=[...f];if(Fs){const H=Fs.toLowerCase();l=l.filter(z=>{var Z,oe,ue;return((Z=z.name)==null?void 0:Z.toLowerCase().includes(H))||((oe=z.email)==null?void 0:oe.toLowerCase().includes(H))||((ue=z.phone)==null?void 0:ue.includes(H))})}return il!=="all"&&(l=l.filter(H=>H.role===il)),qs==="newest"?l.sort((H,z)=>{var Z,oe,ue,we,Pe,Se;return(((ue=(oe=(Z=z.createdAt)==null?void 0:Z.toDate)==null?void 0:oe.call(Z))==null?void 0:ue.getTime())||0)-(((Se=(Pe=(we=H.createdAt)==null?void 0:we.toDate)==null?void 0:Pe.call(we))==null?void 0:Se.getTime())||0)}):qs==="oldest"?l.sort((H,z)=>{var Z,oe,ue,we,Pe,Se;return(((ue=(oe=(Z=H.createdAt)==null?void 0:Z.toDate)==null?void 0:oe.call(Z))==null?void 0:ue.getTime())||0)-(((Se=(Pe=(we=z.createdAt)==null?void 0:we.toDate)==null?void 0:Pe.call(we))==null?void 0:Se.getTime())||0)}):qs==="name"&&l.sort((H,z)=>(H.name||"").localeCompare(z.name||"","ar")),l},ka=async(l,H,z,Z,oe,ue,we)=>{try{await Te(se(S,"activityLogs"),{action:l,targetType:H,targetId:z,targetName:Z,performedBy:(s==null?void 0:s.uid)||"",performedByName:(s==null?void 0:s.email)||"ŸÖÿ∑Ÿàÿ±",details:oe,oldValue:ue,newValue:we,createdAt:X()})}catch(Pe){console.warn("ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿπŸÖŸÑŸäÿ©:",Pe)}},Nn=async(l,H)=>{const z=H?"ÿ™ÿπŸÑŸäŸÇ":"ÿ™ŸÅÿπŸäŸÑ";if(await n.confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ${z} ÿ≠ÿ≥ÿßÿ® "${l.name||l.email}"ÿü`,{title:`${z} ÿßŸÑÿ≠ÿ≥ÿßÿ®`,dangerous:!H}))try{await xe(J(S,"users",l.uid),{isActive:!H,updatedAt:X()}),await ka(H?"deactivate":"activate","user",l.uid,l.name||l.email,`ÿ™ŸÖ ${z} ÿßŸÑÿ≠ÿ≥ÿßÿ®`),a.success(`ÿ™ŸÖ ${z} ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ`),rs()}catch(oe){console.error("ÿÆÿ∑ÿ£:",oe),a.error(`ŸÅÿ¥ŸÑ ${z} ÿßŸÑÿ≠ÿ≥ÿßÿ®`)}},yn=async l=>{if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ•ŸÑŸâ: ${l.email}`,{title:"üîë ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±"}))try{await Br(ps,l.email),await nn({action:"password_reset_requested",performedBy:(s==null?void 0:s.uid)||"",performedByName:(s==null?void 0:s.email)||"ŸÖÿ∑Ÿàÿ±",targetUserId:l.uid,targetUserName:l.name||l.email,details:"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ŸÖŸÜ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±"}),await ka("update","user",l.uid,l.name||l.email,"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±"),a.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ®ŸÜÿ¨ÿßÿ≠ üìß")}catch(z){console.error("ÿÆÿ∑ÿ£:",z),z.code==="auth/user-not-found"?a.error("ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≠ÿ≥ÿßÿ® ÿ®Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"):a.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿßÿ®ÿ∑ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿπŸäŸäŸÜ")}},[na,Sa]=t.useState({isOpen:!1,userId:"",userName:"",history:[],loading:!1}),wn=async l=>{Sa({isOpen:!0,userId:l.uid,userName:l.name||l.email,history:[],loading:!0});try{const H=await Ac(l.uid,20);Sa(z=>({...z,history:H,loading:!1}))}catch(H){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ≥ÿ¨ŸÑ ÿßŸÑÿØÿÆŸàŸÑ:",H),Sa(z=>({...z,loading:!1})),a.error("ŸÅÿ¥ŸÑ ÿ¨ŸÑÿ® ÿ≥ÿ¨ŸÑ ÿßŸÑÿØÿÆŸàŸÑ")}},vn=async(l,H=30)=>{if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÄ "${l.name}" ŸÑŸÖÿØÿ© ${H} ŸäŸàŸÖ`,{title:"‚ú® ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"}))try{const Z=new Date;Z.setDate(Z.getDate()+H),await xe(J(S,"restaurants",l.id),{packageType:"premium",packageSubscribedAt:X(),packageExpiresAt:Z,packageRequest:null,updatedAt:X()}),await ka("package_activate","restaurant",l.id,l.name,`ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÖÿØÿ© ${H} ŸäŸàŸÖ`),a.success(`ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÄ ${l.name} ‚ú®`),rs()}catch(Z){console.error("ÿÆÿ∑ÿ£:",Z),a.error("ŸÅÿ¥ŸÑ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ©")}},kn=async l=>{if(await n.confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÄ "${l.name}"ÿü`,{title:"‚ö†Ô∏è ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",dangerous:!0}))try{await xe(J(S,"restaurants",l.id),{packageType:"free",packageExpiresAt:null,updatedAt:X()}),await ka("package_cancel","restaurant",l.id,l.name,"ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"),a.success(`ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÄ ${l.name}`),rs()}catch(z){console.error("ÿÆÿ∑ÿ£:",z),a.error("ŸÅÿ¥ŸÑ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ®ÿßŸÇÿ©")}},ir=async()=>{Ql(!0);try{const l=be(se(S,"activityLogs"),ss("createdAt","desc"),bs(100)),z=(await pe(l)).docs.map(Z=>{var oe,ue;return{id:Z.id,...Z.data(),createdAt:((ue=(oe=Z.data().createdAt)==null?void 0:oe.toDate)==null?void 0:ue.call(oe))||null}});pn(z)}catch(l){console.warn("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿ≥ÿ¨ŸÑ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™:",l)}finally{Ql(!1)}},Sn=async()=>{var l;try{const H=["supervisor","support","social_media","admin","accountant"],z=[];for(const Z of f)H.includes(Z.role)&&z.push({uid:Z.uid,email:Z.email,name:Z.name,phone:Z.phone,role:Z.role,isActive:Z.isActive!==!1&&!((l=Z.security)!=null&&l.isDeactivated),createdAt:Z.createdAt});ll(z)}catch(H){console.warn("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ:",H)}};t.useEffect(()=>{f.length>0&&Sn()},[f]);const Cn=async()=>{if(!kt.trim()||!sa.trim()){a.warning("ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸàŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±");return}if(sa.length<6){a.warning("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ");return}const l={supervisor:"ŸÖÿ¥ÿ±ŸÅ",support:"ÿØÿπŸÖ ŸÅŸÜŸä",social_media:"ÿ≥Ÿàÿ¥ŸäÿßŸÑ ŸÖŸäÿØŸäÿß",admin:"ÿ•ÿØÿßÿ±ÿ©",accountant:"ŸÖÿ≠ÿßÿ≥ÿ®"};if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖŸàÿ∏ŸÅ ÿ¨ÿØŸäÿØ:

üìß ${kt}
üë§ ${ya||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}
üé≠ ${l[ta]}

ŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ŸÖÿ§ŸÇÿ™ÿßŸã.`,{title:"ÿ•ŸÜÿ¥ÿßÿ° ŸÖŸàÿ∏ŸÅ ÿ¨ÿØŸäÿØ"})){sr(!0);try{const Z=(await Dt(ps,kt.trim(),sa)).user.uid;await Qe(J(S,"users",Z),{email:kt.trim(),name:ya.trim()||"ŸÖŸàÿ∏ŸÅ ÿ¨ÿØŸäÿØ",phone:Jl.trim()||"",role:ta,isActive:!0,createdAt:X(),createdBy:s==null?void 0:s.uid}),["supervisor","admin","accountant"].includes(ta)&&await Qe(J(S,"wallets",Z),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:X()}),await Te(se(S,"activityLogs"),{action:"create",targetType:"user",targetId:Z,targetName:ya.trim()||kt,performedBy:s==null?void 0:s.uid,performedByName:s==null?void 0:s.email,details:`ÿ•ŸÜÿ¥ÿßÿ° ŸÖŸàÿ∏ŸÅ ÿ¨ÿØŸäÿØ - ${l[ta]}`,createdAt:X()}),a.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸàÿ∏ŸÅ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),a.info("‚ö†Ô∏è ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉÿå Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"),Gl(""),Yl(""),Kl(""),Xl(""),Zl("support"),Wl(!1)}catch(z){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸàÿ∏ŸÅ:",z),z.code==="auth/email-already-in-use"?a.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖÿ≥ÿ®ŸÇÿßŸã"):z.code==="auth/invalid-email"?a.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠"):a.error("ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸàÿ∏ŸÅ")}finally{sr(!1)}}},An=async(l,H)=>{const z=ea.find(oe=>oe.uid===l);if(!z)return;const Z={supervisor:"ŸÖÿ¥ÿ±ŸÅ",support:"ÿØÿπŸÖ ŸÅŸÜŸä",social_media:"ÿ≥Ÿàÿ¥ŸäÿßŸÑ ŸÖŸäÿØŸäÿß",admin:"ÿ•ÿØÿßÿ±ÿ©",accountant:"ŸÖÿ≠ÿßÿ≥ÿ®"};try{await xe(J(S,"users",l),{role:H,updatedAt:X()}),await Te(se(S,"activityLogs"),{action:"role_change",targetType:"user",targetId:l,targetName:z.name||z.email,performedBy:s==null?void 0:s.uid,performedByName:s==null?void 0:s.email,oldValue:z.role,newValue:H,details:`ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿØŸàÿ± ŸÖŸÜ ${Z[z.role]} ÿ•ŸÑŸâ ${Z[H]}`,createdAt:X()}),ll(oe=>oe.map(ue=>ue.uid===l?{...ue,role:H}:ue)),nl(null),a.success("ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿØŸàÿ± ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ")}catch(oe){console.error("ÿÆÿ∑ÿ£:",oe),a.error("ŸÅÿ¥ŸÑ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿØŸàÿ±")}},In=async l=>{const H=ea.find(ue=>ue.uid===l);if(!H)return;const z=!H.isActive,Z=z?"ÿ™ŸÅÿπŸäŸÑ":"ÿ•ŸäŸÇÿßŸÅ";if(await n.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ${Z} ÿ≠ÿ≥ÿßÿ® ${H.name||H.email}ÿü`,{title:`${Z} ÿßŸÑÿ≠ÿ≥ÿßÿ®`}))try{await xe(J(S,"users",l),{isActive:z,"security.isDeactivated":!z,updatedAt:X()}),await Te(se(S,"activityLogs"),{action:z?"activate":"deactivate",targetType:"user",targetId:l,targetName:H.name||H.email,performedBy:s==null?void 0:s.uid,performedByName:s==null?void 0:s.email,details:`${Z} ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸàÿ∏ŸÅ`,createdAt:X()}),ll(ue=>ue.map(we=>we.uid===l?{...we,isActive:z}:we)),a.success(`ÿ™ŸÖ ${Z} ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ`)}catch(ue){console.error("ÿÆÿ∑ÿ£:",ue),a.error(`ŸÅÿ¥ŸÑ ${Z} ÿßŸÑÿ≠ÿ≥ÿßÿ®`)}},Dn=async()=>{if(!W.trim()||!he.trim()){a.warning("ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸàŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±");return}if(he.length<6){a.warning("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ");return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖÿ¥ÿ±ŸÅ ÿ¨ÿØŸäÿØ:

üìß ${W}
üë§ ${re||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}

ŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ŸÖÿ§ŸÇÿ™ÿßŸãÿå ŸÇŸÖ ÿ®ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.`,{title:"ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ¥ÿ±ŸÅ ÿ¨ÿØŸäÿØ"})){Y(!0);try{const z=(await Dt(ps,W.trim(),he)).user.uid;await Qe(J(S,"users",z),{email:W.trim(),name:re.trim()||"ŸÖÿ¥ÿ±ŸÅ ÿ¨ÿØŸäÿØ",phone:te.trim()||"",role:"admin",createdAt:X()}),await Qe(J(S,"wallets",z),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:X()}),a.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿ¥ÿ±ŸÅ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),a.info("‚ö†Ô∏è ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉÿå Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"),ne(""),fe(""),F(""),Ne(""),V(!1)}catch(H){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ¥ÿ±ŸÅ:",H),H.code==="auth/email-already-in-use"?a.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖÿ≥ÿ®ŸÇÿßŸã"):H.code==="auth/invalid-email"?a.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠"):H.code==="auth/weak-password"?a.error("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∂ÿπŸäŸÅÿ© ÿ¨ÿØÿßŸã"):a.error("ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ¥ÿ±ŸÅ: "+(H.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{Y(!1)}}},Rn=async()=>{if(!de.trim()||!ce.trim()){a.warning("ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸàŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±");return}if(ce.length<6){a.warning("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ");return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖŸÜÿØŸàÿ® ÿ¨ÿØŸäÿØ:

üìß ${de}
üë§ ${G||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}
üì± ${ge||"ÿ®ÿØŸàŸÜ ÿ±ŸÇŸÖ"}`,{title:"ÿ•ŸÜÿ¥ÿßÿ° ŸÖŸÜÿØŸàÿ® ÿ¨ÿØŸäÿØ"})){Ue(!0);try{const z=(await Dt(ps,de.trim(),ce)).user.uid;await Qe(J(S,"users",z),{email:de.trim(),name:G.trim()||"ŸÖŸÜÿØŸàÿ® ÿ¨ÿØŸäÿØ",phone:ge.trim()||"",role:"courier",createdAt:X()}),a.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÜÿØŸàÿ® ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),a.info("‚ö†Ô∏è ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉÿå Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"),ye(""),ae(""),ie(""),ke(""),me(!1)}catch(H){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸÜÿØŸàÿ®:",H),H.code==="auth/email-already-in-use"?a.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖÿ≥ÿ®ŸÇÿßŸã"):a.error("ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸÜÿØŸàÿ®: "+(H.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{Ue(!1)}}},Pn=async()=>{if(!We.trim()){a.warning("ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ");return}if(!$s.trim()||!Js.trim()){a.warning("ÿ£ÿØÿÆŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿµÿßÿ≠ÿ® ÿßŸÑŸÖÿ∑ÿπŸÖ");return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ:

üè™ ${We}
üìç ${Es||"ÿ®ÿØŸàŸÜ ŸÖÿØŸäŸÜÿ©"}
üë§ ÿµÿßÿ≠ÿ® ÿßŸÑŸÖÿ∑ÿπŸÖ: ${$s}`,{title:"ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"})){Zt(!0);try{const z=(await Dt(ps,$s.trim(),Js)).user.uid;await Qe(J(S,"users",z),{email:$s.trim(),name:We.trim()+" - ŸÖÿßŸÑŸÉ",role:"owner",createdAt:X()}),await Qe(J(S,"restaurants",z),{name:We.trim(),ownerId:z,email:ht.trim()||$s.trim(),phone:nt.trim()||"",city:Es.trim()||"",referredBy:s==null?void 0:s.uid,referrerType:"developer",createdAt:X()}),a.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ∑ÿπŸÖ Ÿàÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿßŸÑŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),a.info("‚ö†Ô∏è ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉÿå Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ"),Ts(""),rt(""),ds(""),Ys(""),Ks(""),Xt(""),Je(!1)}catch(H){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ∑ÿπŸÖ:",H),H.code==="auth/email-already-in-use"?a.error("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖÿ≥ÿ®ŸÇÿßŸã"):a.error("ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ∑ÿπŸÖ: "+(H.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{Zt(!1)}}},Tn=()=>{const l=new Date,H=new Date(l.getFullYear(),l.getMonth(),l.getDate()),z=new Date(H.getTime()-7*24*60*60*1e3),Z=new Date(H.getTime()-30*24*60*60*1e3),oe=M.filter(Se=>{var os,et;return(((et=(os=Se.createdAt)==null?void 0:os.toDate)==null?void 0:et.call(os))||new Date(0))>=H&&Se.status!=="cancelled"}),ue=M.filter(Se=>{var os,et;return(((et=(os=Se.createdAt)==null?void 0:os.toDate)==null?void 0:et.call(os))||new Date(0))>=z&&Se.status!=="cancelled"}),we=M.filter(Se=>{var os,et;return(((et=(os=Se.createdAt)==null?void 0:os.toDate)==null?void 0:et.call(os))||new Date(0))>=Z&&Se.status!=="cancelled"}),Pe=M.filter(Se=>Se.status==="delivered");return{todayRevenue:oe.reduce((Se,Ve)=>Se+(Ve.total||0),0),todayOrders:oe.length,todayPlatformFee:oe.reduce((Se,Ve)=>Se+(Ve.platformFee||0),0),weekRevenue:ue.reduce((Se,Ve)=>Se+(Ve.total||0),0),weekOrders:ue.length,weekPlatformFee:ue.reduce((Se,Ve)=>Se+(Ve.platformFee||0),0),monthRevenue:we.reduce((Se,Ve)=>Se+(Ve.total||0),0),monthOrders:we.length,monthPlatformFee:we.reduce((Se,Ve)=>Se+(Ve.platformFee||0),0),totalRevenue:Pe.reduce((Se,Ve)=>Se+(Ve.total||0),0),totalPlatformFee:Pe.reduce((Se,Ve)=>Se+(Ve.platformFee||0),0),totalAdminCommission:Pe.reduce((Se,Ve)=>Se+(Ve.adminCommission||0),0)}},rs=async()=>{try{const[l,H,z,Z,oe]=await Promise.all([pe(se(S,"users")),pe(se(S,"restaurants")),pe(se(S,"menuItems")),pe(se(S,"orders")),pe(se(S,"wallets"))]);let ue={docs:[]};try{ue=await pe(se(S,"tasks"))}catch{}let we={docs:[]};try{we=await pe(se(S,"packageRequests"))}catch{}const Pe=l.docs.map(De=>({uid:De.id,...De.data()}));U(Pe);const Se=H.docs.map(De=>({id:De.id,...De.data()}));w(Se);const Ve=Z.docs.map(De=>({id:De.id,...De.data()}));b(Ve);const os=ue.docs.map(De=>({id:De.id,...De.data()}));ve(os.sort((De,_t)=>{var gt,St;return(((gt=_t.createdAt)==null?void 0:gt.seconds)||0)-(((St=De.createdAt)==null?void 0:St.seconds)||0)}));const et=we.docs.map(De=>({id:De.id,...De.data()}));gn(et.sort((De,_t)=>{var gt,St;return(((gt=_t.createdAt)==null?void 0:gt.seconds)||0)-(((St=De.createdAt)==null?void 0:St.seconds)||0)}));const hl={};oe.docs.forEach(De=>{hl[De.id]=De.data()});const Vn=hl.app_earnings||{balance:0,totalEarnings:0},mr=Pe.filter(De=>De.role==="admin"),qn=Pe.filter(De=>De.role==="courier"),zn=Pe.filter(De=>De.role==="customer"),Hn=Pe.filter(De=>De.role==="owner"),Qn=mr.map(De=>{const _t=Se.filter(St=>St.referredBy===De.uid),gt=hl[De.uid]||{balance:0,totalEarnings:0};return{uid:De.uid,email:De.email,name:De.name,walletBalance:gt.balance||0,totalEarnings:gt.totalEarnings||0,restaurantsCount:_t.length,restaurants:_t}});k(Qn),N({users:Pe.length,restaurants:Se.length,menuItems:z.size,orders:Ve.length,pendingOrders:Ve.filter(De=>De.status==="pending").length,deliveredOrders:Ve.filter(De=>De.status==="delivered").length,admins:mr.length,couriers:qn.length,customers:zn.length,owners:Hn.length,totalAppEarnings:Vn.totalEarnings||0});const hr=await Ce(J(S,"settings","general"));if(hr.exists()){const De=hr.data();j(De),R(De)}else{const De={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};j(De),R(De)}}catch(l){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:",l),a.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{D(!1),B(!1)}};t.useEffect(()=>{rs()},[]);const ml=()=>{B(!0),rs(),a.info("ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™...")},En=async()=>{try{await Qe(J(S,"settings","general"),v,{merge:!0}),j(v),$(!1),a.success("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ")}catch(l){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™:",l),a.error("ŸÅÿ¥ŸÑ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™")}},$n=async l=>{try{await xe(J(S,"restaurants",l),{..._,updatedAt:X()}),o(null),a.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),rs()}catch(H){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ÿπŸÖ:",H),a.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ÿπŸÖ")}},Fn=async(l,H)=>{try{if(!H.type.startsWith("image/")){a.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ŸÅŸÇÿ∑");return}if(H.size>5*1024*1024){a.warning("ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© ŸÉÿ®Ÿäÿ±ÿå Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿ£ŸÇŸÑ ŸÖŸÜ 5MB");return}m(!0);const z=H.name.replace(/\s+/g,"_"),Z=`restaurants/${l}/logo_${Date.now()}_${z}`,oe=ks(d,Z),ue={contentType:H.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await bt(oe,H,ue);const we=await Ss(oe);await xe(J(S,"restaurants",l),{logoUrl:we,updatedAt:X()}),a.success("ÿ™ŸÖ ÿ±ŸÅÿπ ÿßŸÑÿ¥ÿπÿßÿ± ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),rs()}catch(z){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ±ŸÅÿπ ÿßŸÑÿ¥ÿπÿßÿ±:",z),a.error("ŸÅÿ¥ŸÑ ÿ±ŸÅÿπ ÿßŸÑÿ¥ÿπÿßÿ±")}finally{m(!1)}},_n=async l=>{if(await n.confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖÿü ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ!",{title:"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ",dangerous:!0}))try{await As(J(S,"restaurants",l)),a.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠"),rs()}catch(z){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ:",z),a.error("ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ")}},On=async l=>{try{await xe(J(S,"users",l),{...x,updatedAt:X()}),I(null),a.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ"),rs()}catch(H){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:",H),a.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ")}},Ln=async l=>{if(await n.confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖÿü ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ!",{title:"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ",dangerous:!0}))try{await As(J(S,"users",l)),a.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸÜ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"),a.warning("ŸÖŸÑÿßÿ≠ÿ∏ÿ©: Ÿäÿ¨ÿ® ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸäÿØŸàŸäÿßŸã ŸÖŸÜ Firebase Auth"),rs()}catch(z){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:",z),a.error("ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ")}},Mn=async(l,H)=>{try{await xe(J(S,"orders",l),{status:H,updatedAt:X()}),a.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ∑ŸÑÿ® ‚úÖ"),rs()}catch(z){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ∑ŸÑÿ®:",z),a.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ∑ŸÑÿ®")}},Un=l=>{switch(l){case"customer":return"üë§ ÿπŸÖŸäŸÑ";case"owner":return"üè™ ÿµÿßÿ≠ÿ® ŸÖÿ∑ÿπŸÖ";case"courier":return"üöó ŸÖŸÜÿØŸàÿ®";case"admin":return"üëë ŸÖÿ¥ÿ±ŸÅ";case"developer":return"üë®‚Äçüíª ŸÖÿ∑Ÿàÿ±";case"supervisor":return"üë©‚Äçüíº ŸÖÿ¥ÿ±ŸÅÿ© ŸÖÿ∑ÿßÿπŸÖ";case"social_media":return"üì± ÿ≥Ÿàÿ¥ŸäÿßŸÑ ŸÖŸäÿØŸäÿß";case"support":return"üéß ÿØÿπŸÖ ŸÅŸÜŸä";case"accountant":return"üí∞ ŸÖÿ≠ÿßÿ≥ÿ®";default:return l}},Bn=l=>{switch(l){case"pending":return"‚è≥ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©";case"accepted":return"‚úÖ ŸÖŸÇÿ®ŸàŸÑ";case"preparing":return"üë®‚Äçüç≥ ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±";case"ready":return"üì¶ ÿ¨ÿßŸáÿ≤";case"out_for_delivery":return"üöó ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ";case"delivered":return"‚úîÔ∏è ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ";case"cancelled":return"‚ùå ŸÖŸÑÿ∫Ÿä";default:return l}};return r?e.jsx(Fe,{allow:["developer"],children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(qe,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±..."})]})})}):e.jsx(Fe,{allow:["developer"],children:e.jsxs("div",{className:"space-y-6 pb-8",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-3xl p-8 text-white shadow-2xl",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-sky-500/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-sky-400 to-sky-600 rounded-2xl flex items-center justify-center shadow-lg shadow-sky-500/30",children:e.jsx(Al,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black tracking-tight",children:"ŸÖÿ±ŸÉÿ≤ ÿßŸÑÿ™ÿ≠ŸÉŸÖ"}),e.jsx("p",{className:"text-sky-300/80 text-sm",children:"Developer Console ‚Ä¢ ÿ≥ŸÅÿ±ÿ© ÿßŸÑÿ®Ÿäÿ™"})]})]}),e.jsx("p",{className:"text-slate-400 mt-3 max-w-xl",children:"ÿ•ÿØÿßÿ±ÿ© ÿ¥ÿßŸÖŸÑÿ© ŸÑÿ¨ŸÖŸäÿπ ÿπŸÖŸÑŸäÿßÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿå ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜÿå ÿßŸÑŸÖÿ∑ÿßÿπŸÖÿå ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ŸàÿßŸÑŸÖÿßŸÑŸäÿ©"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("button",{onClick:ml,disabled:E,className:"flex items-center gap-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm px-5 py-3 rounded-xl font-semibold transition border border-white/10 disabled:opacity-50",children:[e.jsx(qe,{className:`w-5 h-5 ${E?"animate-spin":""}`}),"ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"]}),e.jsxs("a",{href:"/accounting",className:"flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 px-5 py-3 rounded-xl font-semibold transition shadow-lg shadow-emerald-500/30",children:[e.jsx(Us,{className:"w-5 h-5"}),"ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©"]})]})]}),e.jsxs("div",{className:"relative z-10 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mt-8",children:[e.jsx(Lt,{icon:e.jsx(zs,{className:"w-5 h-5"}),value:P.users,label:"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ",color:"sky"}),e.jsx(Lt,{icon:e.jsx(js,{className:"w-5 h-5"}),value:P.restaurants,label:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ",color:"emerald"}),e.jsx(Lt,{icon:e.jsx(Oe,{className:"w-5 h-5"}),value:P.orders,label:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",color:"purple"}),e.jsx(Lt,{icon:e.jsx(Be,{className:"w-5 h-5"}),value:P.couriers,label:"ÿßŸÑŸÖŸÜÿßÿØŸäÿ®",color:"orange"}),e.jsx(Lt,{icon:e.jsx(ts,{className:"w-5 h-5"}),value:P.admins,label:"ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ",color:"amber"}),e.jsx(Lt,{icon:e.jsx(ns,{className:"w-5 h-5"}),value:`${P.totalAppEarnings.toFixed(0)} ÿ±.ÿ≥`,label:"ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠",color:"green"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-100 p-2",children:e.jsx("div",{className:"flex flex-wrap gap-1.5",children:[{id:"overview",label:"ŸÜÿ∏ÿ±ÿ© ÿπÿßŸÖÿ©",icon:e.jsx(Pi,{className:"w-4 h-4"})},{id:"finance",label:"ÿßŸÑŸÖÿßŸÑŸäÿ©",icon:e.jsx(ns,{className:"w-4 h-4"})},{id:"restaurants",label:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ",icon:e.jsx(js,{className:"w-4 h-4"})},{id:"storeAnalytics",label:"ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™",icon:e.jsx(Gr,{className:"w-4 h-4"})},{id:"packages",label:"ÿßŸÑÿ®ÿßŸÇÿßÿ™",icon:e.jsx(ts,{className:"w-4 h-4"}),badge:vt.filter(l=>["pending","payment_sent"].includes(l.status)).length},{id:"packageSettings",label:"ÿ£ÿ≥ÿπÿßÿ± ÿßŸÑÿ®ÿßŸÇÿßÿ™",icon:e.jsx(is,{className:"w-4 h-4"})},{id:"licenses",label:"ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ",icon:e.jsx(Il,{className:"w-4 h-4"})},{id:"orders",label:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",icon:e.jsx(Oe,{className:"w-4 h-4"})},{id:"users",label:"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ",icon:e.jsx(zs,{className:"w-4 h-4"})},{id:"couriers",label:"ÿßŸÑŸÖŸÜÿßÿØŸäÿ®",icon:e.jsx(Be,{className:"w-4 h-4"})},{id:"admins",label:"ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ",icon:e.jsx(ts,{className:"w-4 h-4"})},{id:"employees",label:"ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ",icon:e.jsx(ct,{className:"w-4 h-4"})},{id:"tasks",label:"ÿßŸÑŸÖŸáÿßŸÖ",icon:e.jsx(dt,{className:"w-4 h-4"})},{id:"activityLog",label:"ÿßŸÑÿ≥ÿ¨ŸÑ",icon:e.jsx(Ye,{className:"w-4 h-4"})},{id:"settings",label:"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™",icon:e.jsx(ha,{className:"w-4 h-4"})},{id:"tools",label:"ÿßŸÑÿ£ÿØŸàÿßÿ™",icon:e.jsx(Al,{className:"w-4 h-4"})}].map(l=>e.jsxs("button",{onClick:()=>{y(l.id),l.id==="activityLog"&&ir()},className:`relative flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 ${i===l.id?"bg-gradient-to-r from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-500/30":"text-slate-600 hover:bg-slate-100"}`,children:[l.icon,e.jsx("span",{className:"hidden sm:inline",children:l.label}),l.badge&&l.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center animate-pulse",children:l.badge})]},l.id))})}),i==="overview"&&e.jsxs("div",{className:"space-y-6",children:[vt.filter(l=>["pending","payment_sent"].includes(l.status)).length>0&&e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:e.jsx(ft,{className:"w-7 h-7 animate-bounce"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"ÿ∑ŸÑÿ®ÿßÿ™ ÿ™ÿ≠ÿ™ÿßÿ¨ ÿßŸÜÿ™ÿ®ÿßŸáŸÉ!"}),e.jsxs("p",{className:"text-white/80",children:[vt.filter(l=>l.status==="pending").length>0&&e.jsxs("span",{className:"mr-3",children:["‚è≥ ",vt.filter(l=>l.status==="pending").length," ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ"]}),vt.filter(l=>l.status==="payment_sent").length>0&&e.jsxs("span",{children:["üí≥ ",vt.filter(l=>l.status==="payment_sent").length," ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ£ŸÉŸäÿØ"]})]})]})]}),e.jsx("button",{onClick:()=>y("packages"),className:"bg-white text-orange-600 px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transition transform hover:scale-105",children:"ÿπÿ±ÿ∂ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ‚Üê"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Pa,{title:"ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™ ÿßŸÑŸäŸàŸÖ",value:`${M.filter(l=>{var Z,oe;const H=((oe=(Z=l.createdAt)==null?void 0:Z.toDate)==null?void 0:oe.call(Z))||new Date(l.createdAt),z=new Date;return H.toDateString()===z.toDateString()&&l.status==="delivered"}).reduce((l,H)=>l+(H.total||0),0).toFixed(0)} ÿ±.ÿ≥`,change:12.5,icon:e.jsx(Ms,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(Pa,{title:"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸäŸàŸÖ",value:M.filter(l=>{var Z,oe;const H=((oe=(Z=l.createdAt)==null?void 0:Z.toDate)==null?void 0:oe.call(Z))||new Date(l.createdAt),z=new Date;return H.toDateString()===z.toDateString()}).length.toString(),change:8.3,icon:e.jsx(Oe,{className:"w-5 h-5"}),color:"sky"}),e.jsx(Pa,{title:"ŸÖÿ¥ÿ™ÿ±ŸÉŸäŸÜ ÿßŸÑÿ™ŸÖŸäÿ≤",value:g.filter(l=>l.packageType==="premium").length.toString(),subtitle:`ŸÖŸÜ ${g.length} ŸÖÿ∑ÿπŸÖ`,icon:e.jsx(ts,{className:"w-5 h-5"}),color:"amber"}),e.jsx(Pa,{title:"ŸÖÿπÿØŸÑ ÿßŸÑÿ™ŸàÿµŸäŸÑ",value:`${P.orders>0?(P.deliveredOrders/P.orders*100).toFixed(0):0}%`,subtitle:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ•ÿ™ŸÖÿßŸÖ",icon:e.jsx(dt,{className:"w-5 h-5"}),color:"purple"})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(Ta,{icon:e.jsx(Ie,{className:"w-5 h-5 text-emerald-500"}),value:f.filter(l=>l.isActive!==!1).length,label:"ÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸÜÿ¥ÿ∑ÿ©",bgColor:"bg-emerald-50"}),e.jsx(Ta,{icon:e.jsx(Ds,{className:"w-5 h-5 text-red-500"}),value:f.filter(l=>l.isActive===!1).length,label:"ÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸÖŸàŸÇŸàŸÅÿ©",bgColor:"bg-red-50"}),e.jsx(Ta,{icon:e.jsx(is,{className:"w-5 h-5 text-amber-500"}),value:g.filter(l=>l.packageType==="premium").length,label:"ÿ®ÿßŸÇÿ© ÿ™ŸÖŸäÿ≤",bgColor:"bg-amber-50"}),e.jsx(Ta,{icon:e.jsx(Oe,{className:"w-5 h-5 text-slate-500"}),value:g.filter(l=>!l.packageType||l.packageType==="free").length,label:"ÿ®ÿßŸÇÿ© ŸÖÿ¨ÿßŸÜŸäÿ©",bgColor:"bg-slate-50"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ti,{className:"w-6 h-6 text-orange-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"ÿ•ÿπÿØÿßÿØÿßÿ™ Firebase"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),e.jsx("p",{className:"font-mono text-sm",children:_s.projectId})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),e.jsx("p",{className:"font-mono text-sm",children:_s.storageBucket})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("a",{href:`https://console.firebase.google.com/project/${_s.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:"üî• Console"}),e.jsx("a",{href:`https://console.firebase.google.com/project/${_s.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:"üìä Firestore"}),e.jsx("a",{href:`https://console.firebase.google.com/project/${_s.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:"üîê Auth"}),e.jsx("a",{href:`https://console.firebase.google.com/project/${_s.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:"üìÅ Storage"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"üìä ÿ™Ÿàÿ≤Ÿäÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:P.customers}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿπŸÖŸÑÿßÿ°"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:P.owners}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ£ÿµÿ≠ÿßÿ® ŸÖÿ∑ÿßÿπŸÖ"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:P.couriers}),e.jsx("p",{className:"text-sm text-gray-600",children:"ŸÖŸÜÿßÿØŸäÿ®"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:P.admins}),e.jsx("p",{className:"text-sm text-gray-600",children:"ŸÖÿ¥ÿ±ŸÅŸäŸÜ"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ŸÖÿ∑Ÿàÿ±"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"üîó ÿ±Ÿàÿßÿ®ÿ∑ ÿ≥ÿ±Ÿäÿπÿ©"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(le,{to:"/reports-admin",className:"flex items-center gap-3 bg-amber-50 hover:bg-amber-100 text-amber-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™"}),e.jsx("p",{className:"text-xs opacity-75",children:"ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"})]})]}),e.jsxs(le,{to:"/accounting",className:"flex items-center gap-3 bg-emerald-50 hover:bg-emerald-100 text-emerald-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üí∞"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©"}),e.jsx("p",{className:"text-xs opacity-75",children:"ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸÖÿßŸÑŸäÿ©"})]})]}),e.jsxs(le,{to:"/support-admin",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üéß"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿØÿπŸÖ"}),e.jsx("p",{className:"text-xs opacity-75",children:"ÿ™ÿ∞ÿßŸÉÿ± ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä"})]})]}),e.jsxs(le,{to:"/problems-admin",className:"flex items-center gap-3 bg-red-50 hover:bg-red-100 text-red-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üö®"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ"}),e.jsx("p",{className:"text-xs opacity-75",children:"ŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-orange-500"}),"ÿ£ŸàŸÇÿßÿ™ ÿßŸÑÿ∞ÿ±Ÿàÿ©"]}),e.jsx("div",{className:"grid grid-cols-6 md:grid-cols-12 gap-2",children:Array.from({length:24},(l,H)=>{const z=M.filter(ue=>{var Pe,Se;return(((Se=(Pe=ue.createdAt)==null?void 0:Pe.toDate)==null?void 0:Se.call(Pe))||new Date(ue.createdAt)).getHours()===H}).length,Z=Math.max(...Array.from({length:24},(ue,we)=>M.filter(Pe=>{var Ve,os;return(((os=(Ve=Pe.createdAt)==null?void 0:Ve.toDate)==null?void 0:os.call(Ve))||new Date(Pe.createdAt)).getHours()===we}).length),1),oe=z/Z;return e.jsxs("div",{className:"text-center",title:`${H}:00 - ${z} ÿ∑ŸÑÿ®`,children:[e.jsx("div",{className:`h-16 rounded-lg mb-1 ${oe>.8?"bg-red-500":oe>.6?"bg-orange-500":oe>.4?"bg-yellow-500":oe>.2?"bg-green-400":oe>0?"bg-green-200":"bg-gray-100"}`,style:{opacity:Math.max(.3,oe)}}),e.jsx("span",{className:"text-xs text-gray-500",children:H})]},H)})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"})," ÿ∞ÿ±Ÿàÿ© ÿπÿßŸÑŸäÿ©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"})," ŸÜÿ¥ÿßÿ∑ ŸÖÿ±ÿ™ŸÅÿπ"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"})," ŸÖÿ™Ÿàÿ≥ÿ∑"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-green-400 rounded"})," ŸÖŸÜÿÆŸÅÿ∂"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(xa,{className:"w-5 h-5 text-amber-500"}),"ÿ£ŸÅÿ∂ŸÑ 5 ŸÖÿ∑ÿßÿπŸÖ (ÿ≠ÿ≥ÿ® ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™)"]}),e.jsxs("div",{className:"space-y-3",children:[g.map(l=>({...l,orderCount:M.filter(H=>H.restaurantId===l.id&&H.status==="delivered").length,revenue:M.filter(H=>H.restaurantId===l.id&&H.status==="delivered").reduce((H,z)=>H+(z.subtotal||0),0)})).sort((l,H)=>H.orderCount-l.orderCount).slice(0,5).map((l,H)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${H===0?"bg-amber-500":H===1?"bg-gray-400":H===2?"bg-amber-700":"bg-gray-300"}`,children:H+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500",children:l.city||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-emerald-600",children:[l.orderCount," ÿ∑ŸÑÿ®"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[l.revenue.toFixed(0)," ÿ±.ÿ≥"]})]})]},l.id)),g.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÉÿßŸÅŸäÿ©"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-cyan-500"}),"ÿ£ŸÅÿ∂ŸÑ 5 ŸÖŸÜÿßÿØŸäÿ® (ÿ≠ÿ≥ÿ® ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™)"]}),e.jsx("div",{className:"space-y-3",children:(()=>{const l=M.filter(z=>z.courierId&&z.status==="delivered").reduce((z,Z)=>(z[Z.courierId]||(z[Z.courierId]={deliveries:0,earnings:0}),z[Z.courierId].deliveries++,z[Z.courierId].earnings+=(Z.deliveryFee||0)-(Z.courierPlatformFee||0),z),{}),H=f.filter(z=>z.role==="courier"&&l[z.uid]).map(z=>({...z,...l[z.uid]})).sort((z,Z)=>Z.deliveries-z.deliveries).slice(0,5);return H.length===0?e.jsx("p",{className:"text-center text-gray-500 py-4",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÉÿßŸÅŸäÿ©"}):H.map((z,Z)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${Z===0?"bg-cyan-500":Z===1?"bg-gray-400":Z===2?"bg-cyan-700":"bg-gray-300"}`,children:Z+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold",children:z.name||"ŸÖŸÜÿØŸàÿ®"}),e.jsx("p",{className:"text-sm text-gray-500",children:z.phone||z.email})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-cyan-600",children:[z.deliveries," ÿ™ŸàÿµŸäŸÑÿ©"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[z.earnings.toFixed(0)," ÿ±.ÿ≥"]})]})]},z.uid))})()})]})]}),i==="finance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl p-6 text-white flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:"üìä ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ© ÿßŸÑÿ™ŸÅÿµŸäŸÑŸäÿ©"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿπÿ±ÿ∂ ÿ™ŸÇÿßÿ±Ÿäÿ± ŸÖŸÅÿµŸÑÿ©ÿå ŸÖÿ≠ÿßŸÅÿ∏ ÿßŸÑÿ£ÿ≥ÿ± ŸàÿßŸÑŸÖŸÜÿßÿØŸäÿ®ÿå ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©"})]}),e.jsxs("a",{href:"/accounting",className:"bg-white text-emerald-600 px-6 py-3 rounded-xl font-bold hover:bg-emerald-50 transition flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5"}),"ŸÅÿ™ÿ≠ ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©"]})]}),(()=>{const l=Tn();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"üí∞ ÿßŸÑŸÖŸÑÿÆÿµ ÿßŸÑŸÖÿßŸÑŸä"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:l.totalRevenue.toFixed(0)}),e.jsx("p",{className:"text-sm opacity-90",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™ (ÿ±.ÿ≥)"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:l.totalPlatformFee.toFixed(2)}),e.jsx("p",{className:"text-sm opacity-90",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ (ÿ±.ÿ≥)"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:l.totalAdminCommission.toFixed(2)}),e.jsx("p",{className:"text-sm opacity-90",children:"ÿπŸÖŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ (ÿ±.ÿ≥)"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold",children:(l.totalPlatformFee+l.totalAdminCommission).toFixed(2)}),e.jsx("p",{className:"text-sm opacity-90",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠ (ÿ±.ÿ≥)"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:"üìÖ ÿßŸÑŸäŸàŸÖ"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™:"}),e.jsx("span",{className:"font-bold",children:l.todayOrders})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™:"}),e.jsxs("span",{className:"font-bold",children:[l.todayRevenue.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[l.todayPlatformFee.toFixed(2)," ÿ±.ÿ≥"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"üìÖ ÿ¢ÿÆÿ± 7 ÿ£ŸäÿßŸÖ"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™:"}),e.jsx("span",{className:"font-bold",children:l.weekOrders})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™:"}),e.jsxs("span",{className:"font-bold",children:[l.weekRevenue.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[l.weekPlatformFee.toFixed(2)," ÿ±.ÿ≥"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"üìÖ ÿ¢ÿÆÿ± 30 ŸäŸàŸÖ"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™:"}),e.jsx("span",{className:"font-bold",children:l.monthOrders})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™:"}),e.jsxs("span",{className:"font-bold",children:[l.monthRevenue.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[l.monthPlatformFee.toFixed(2)," ÿ±.ÿ≥"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"üèÜ ÿ£ÿπŸÑŸâ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿ£ÿØÿßÿ°Ÿã"}),e.jsx("div",{className:"space-y-3",children:g.map(H=>({...H,ordersCount:M.filter(z=>z.restaurantId===H.id&&z.status==="delivered").length,revenue:M.filter(z=>z.restaurantId===H.id&&z.status==="delivered").reduce((z,Z)=>z+(Z.total||0),0)})).sort((H,z)=>z.revenue-H.revenue).slice(0,5).map((H,z)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:z===0?"ü•á":z===1?"ü•à":z===2?"ü•â":`#${z+1}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:H.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[H.ordersCount," ÿ∑ŸÑÿ®"]})]})]}),e.jsxs("p",{className:"font-bold text-green-600",children:[H.revenue.toFixed(2)," ÿ±.ÿ≥"]})]},H.id))})]})]})})()]}),i==="restaurants"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white via-sky-50/30 to-emerald-50/30 rounded-3xl p-6 border border-sky-100 shadow-lg shadow-sky-100/50",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-200",children:e.jsx(Le,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[dl().length," ŸÖŸÜ ",g.length," ŸÖÿ∑ÿπŸÖ"]})]})]}),e.jsx("button",{onClick:()=>Je(!$e),className:"group flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white px-5 py-3 rounded-2xl font-bold shadow-lg shadow-emerald-200 transition-all duration-300 hover:scale-105",children:$e?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-5 h-5"}),"ÿ•ŸÑÿ∫ÿßÿ°"]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),"ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"]})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Hs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖÿå ÿßŸÑÿ•ŸäŸÖŸäŸÑÿå ÿßŸÑŸáÿßÿ™ŸÅÿå ÿ£Ÿà ÿßŸÑŸÖÿØŸäŸÜÿ©...",value:Fs,onChange:l=>it(l.target.value),className:"w-full pr-12 pl-4 py-4 border-2 border-sky-100 rounded-2xl focus:border-emerald-400 focus:ring-4 focus:ring-emerald-100 transition-all bg-white/80 backdrop-blur text-lg"}),Fs&&e.jsx("button",{onClick:()=>it(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(oa,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ŸÅŸÑÿ™ÿ±:"})]}),[{value:"all",label:"ÿßŸÑŸÉŸÑ",icon:"üè™"},{value:"premium",label:"ÿ®ÿ±ŸäŸÖŸäŸàŸÖ",icon:"üëë"},{value:"free",label:"ŸÖÿ¨ÿßŸÜŸä",icon:"üÜì"},{value:"verified",label:"ŸÖŸàÿ´ŸÇ",icon:"‚úÖ"},{value:"unverified",label:"ÿ∫Ÿäÿ± ŸÖŸàÿ´ŸÇ",icon:"‚è≥"}].map(l=>e.jsxs("button",{onClick:()=>ar(l.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${la===l.value?"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg shadow-emerald-200":"bg-white border border-gray-200 text-gray-600 hover:border-emerald-300 hover:bg-emerald-50"}`,children:[l.icon," ",l.label]},l.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ei,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ÿ™ÿ±ÿ™Ÿäÿ®:"})]}),e.jsxs("select",{value:qs,onChange:l=>cl(l.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium focus:border-emerald-400 focus:ring-2 focus:ring-emerald-100",children:[e.jsx("option",{value:"newest",children:"ÿßŸÑÿ£ÿ≠ÿØÿ´ ÿ£ŸàŸÑÿßŸã"}),e.jsx("option",{value:"oldest",children:"ÿßŸÑÿ£ŸÇÿØŸÖ ÿ£ŸàŸÑÿßŸã"}),e.jsx("option",{value:"name",children:"ÿßŸÑÿßÿ≥ŸÖ (ÿ£-Ÿä)"})]})]})]}),$e&&e.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[e.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"üè™ ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ∑ÿπŸÖ ÿ¨ÿØŸäÿØ"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ *"}),e.jsx("input",{type:"text",placeholder:"ŸÖÿ´ÿßŸÑ: ŸÖÿ∑ÿπŸÖ ÿßŸÑÿ¥ÿßŸÖ",value:We,onChange:l=>Ts(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsx("input",{type:"text",placeholder:"ŸÖÿ´ÿßŸÑ: ÿßŸÑÿ±Ÿäÿßÿ∂",value:Es,onChange:l=>rt(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"Ÿáÿßÿ™ŸÅ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:nt,onChange:l=>ds(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿ•ŸäŸÖŸäŸÑ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:ht,onChange:l=>Ys(l.target.value),className:"w-full border rounded-xl p-3"})]})]}),e.jsxs("div",{className:"border-t mt-4 pt-4",children:[e.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"üë§ ÿ®ŸäÿßŸÜÿßÿ™ ÿµÿßÿ≠ÿ® ÿßŸÑŸÖÿ∑ÿπŸÖ (ŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ)"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿ•ŸäŸÖŸäŸÑ ÿµÿßÿ≠ÿ® ÿßŸÑŸÖÿ∑ÿπŸÖ *"}),e.jsx("input",{type:"email",placeholder:"owner@example.com",value:$s,onChange:l=>Ks(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± *"}),e.jsx("input",{type:"password",placeholder:"6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ",value:Js,onChange:l=>Xt(l.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),e.jsx("button",{onClick:Pn,disabled:$t||!We.trim()||!$s.trim()||!Js.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:$t?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):"üè™ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ∑ÿπŸÖ"})]}),e.jsx("div",{className:"space-y-4",children:dl().length===0?e.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Hs,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿ±ÿ® ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑÿ®ÿ≠ÿ´"}),e.jsx("button",{onClick:()=>{it(""),ar("all")},className:"mt-4 px-6 py-2 bg-sky-100 text-sky-600 rounded-xl font-medium hover:bg-sky-200 transition-colors",children:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÅŸÑÿßÿ™ÿ±"})]}):dl().map(l=>{var H;return e.jsx("div",{className:"bg-white rounded-2xl shadow-lg shadow-gray-100 border border-gray-100 p-5 hover:shadow-xl transition-all duration-300",children:c===l.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("input",{type:"text",value:_.name||"",onChange:z=>O({..._,name:z.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("input",{type:"text",value:_.phone||"",onChange:z=>O({..._,phone:z.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"}),e.jsx("input",{type:"email",value:_.email||"",onChange:z=>O({..._,email:z.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿßŸÑŸÖÿØŸäŸÜÿ©"}),e.jsx("input",{type:"text",value:_.city||"",onChange:z=>O({..._,city:z.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ"}),e.jsx("input",{type:"text",value:_.location||"",onChange:z=>O({..._,location:z.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿ±ÿ®ÿ∑ ÿ®ŸÖÿ¥ÿ±ŸÅ (ŸÑŸÑÿπŸÖŸàŸÑÿ©)"}),e.jsxs("select",{value:_.referredBy||"",onChange:z=>O({..._,referredBy:z.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[e.jsx("option",{value:"",children:"-- ÿ®ÿØŸàŸÜ ŸÖÿ¥ÿ±ŸÅ (ÿßŸÑŸÖÿ∑Ÿàÿ± ŸÅŸÇÿ∑) --"}),f.filter(z=>z.role==="admin").map(z=>e.jsxs("option",{value:z.uid,children:["üëë ",z.name||z.email]},z.uid))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ÿßŸÑŸÖÿ¥ÿ±ŸÅ ÿßŸÑŸÖÿ±ÿ™ÿ®ÿ∑ Ÿäÿ≠ÿµŸÑ ÿπŸÑŸâ ÿπŸÖŸàŸÑÿ© ŸÖŸÜ ÿ∑ŸÑÿ®ÿßÿ™ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("input",{type:"file",accept:"image/*",onChange:z=>{var oe;const Z=(oe=z.target.files)==null?void 0:oe[0];Z&&Fn(l.id,Z)},className:"w-full border rounded-xl p-2 mt-1",disabled:q}),q&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ±ŸÅÿπ..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>$n(l.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[e.jsx(Ll,{className:"w-4 h-4"})," ÿ≠ŸÅÿ∏"]}),e.jsxs("button",{onClick:()=>o(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[e.jsx(_e,{className:"w-4 h-4"})," ÿ•ŸÑÿ∫ÿßÿ°"]})]})]}):e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:l.logoUrl?e.jsx("img",{src:l.logoUrl,alt:l.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:"üè™"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-lg",children:l.name}),l.isVerified&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[e.jsx(Ie,{className:"w-3 h-3"})," ŸÖŸàÿ´ŸÇÿ©"]})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[l.phone&&e.jsxs("p",{children:["üì± ",l.phone]}),l.email&&e.jsxs("p",{children:["üìß ",l.email]}),l.city&&e.jsxs("p",{children:["üìç ",l.city]}),l.referredBy&&e.jsxs("p",{className:"text-purple-600",children:["üëë ŸÖÿ∂ÿßŸÅ ŸÖŸÜ: ",((H=h.find(z=>z.uid===l.referredBy))==null?void 0:H.name)||l.referredBy.slice(0,8)]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{const z=!l.isVerified;if(await n.confirm(z?`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™Ÿàÿ´ŸäŸÇ ÿ£ÿ≥ÿ±ÿ© "${l.name}"ÿü ÿ≥ÿ™ÿ∏Ÿáÿ± ÿπŸÑÿßŸÖÿ© ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ ŸÑŸÑÿπŸÖŸÑÿßÿ°.`:`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ŸÑÿ∫ÿßÿ° ÿ™Ÿàÿ´ŸäŸÇ ÿ£ÿ≥ÿ±ÿ© "${l.name}"ÿü`,{title:z?"‚úÖ ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ©":"‚ùå ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ",confirmText:z?"ŸÜÿπŸÖÿå Ÿàÿ´ŸëŸÇ":"ŸÜÿπŸÖÿå ÿ£ŸÑÿ∫Ÿê ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"}))try{await xe(J(S,"restaurants",l.id),{isVerified:z,verifiedAt:z?X():null,updatedAt:X()}),a.success(z?"ÿ™ŸÖ ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ‚úÖ":"ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ"),rs()}catch(oe){a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£"),console.error(oe)}},className:`p-2 rounded-xl ${l.isVerified?"bg-green-100 hover:bg-green-200 text-green-600":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:l.isVerified?"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ":"ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑÿ£ÿ≥ÿ±ÿ©",children:e.jsx(Ie,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{o(l.id),O(l)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"ÿ™ÿ≠ÿ±Ÿäÿ±",children:e.jsx(Ut,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>_n(l.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"ÿ≠ÿ∞ŸÅ",children:e.jsx(Ns,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex gap-2 items-center",children:l.packageType==="premium"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded-full flex items-center gap-1",children:"‚ú® ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"}),e.jsx("button",{onClick:()=>kn(l),className:"text-xs bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1 rounded-lg",children:"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ®ÿßŸÇÿ©"})]}):e.jsx("button",{onClick:()=>vn(l),className:"text-xs bg-amber-50 hover:bg-amber-100 text-amber-700 px-3 py-1 rounded-lg flex items-center gap-1",children:"‚ú® ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"})}),e.jsxs("select",{value:l.referredBy||"",onChange:async z=>{const Z=z.target.value;try{await xe(J(S,"restaurants",l.id),{referredBy:Z||null,updatedAt:X()}),a.success(Z?"ÿ™ŸÖ ÿ±ÿ®ÿ∑ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿ®ÿßŸÑŸÖÿ¥ÿ±ŸÅ":"ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿ±ÿ®ÿ∑ ÿßŸÑŸÖÿ¥ÿ±ŸÅ"),rs()}catch{a.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ±ÿ®ÿ∑")}},className:"text-xs border rounded-lg p-1",title:"ÿ±ÿ®ÿ∑ ÿ®ŸÖÿ¥ÿ±ŸÅ",children:[e.jsx("option",{value:"",children:"üë§ ÿ®ÿØŸàŸÜ ŸÖÿ¥ÿ±ŸÅ"}),f.filter(z=>z.role==="admin").map(z=>e.jsxs("option",{value:z.uid,children:["üëë ",z.name||z.email]},z.uid))]})]})]})},l.id)})})]}),i==="orders"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white via-amber-50/30 to-orange-50/30 rounded-3xl p-6 border border-amber-100 shadow-lg shadow-amber-100/50",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg shadow-amber-200",children:e.jsx(Oe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[ol().length," ŸÖŸÜ ",M.length," ÿ∑ŸÑÿ®"]})]})]})}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Hs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿ®ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®ÿå ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ∑ÿπŸÖÿå ÿ£Ÿà ÿßŸÑÿπŸÜŸàÿßŸÜ...",value:Fs,onChange:l=>it(l.target.value),className:"w-full pr-12 pl-4 py-4 border-2 border-amber-100 rounded-2xl focus:border-amber-400 focus:ring-4 focus:ring-amber-100 transition-all bg-white/80 backdrop-blur text-lg"}),Fs&&e.jsx("button",{onClick:()=>it(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(oa,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ÿßŸÑÿ≠ÿßŸÑÿ©:"})]}),[{value:"all",label:"ÿßŸÑŸÉŸÑ",icon:"üì¶"},{value:"pending",label:"ÿ¨ÿßÿ±Ÿä",icon:"‚è≥"},{value:"delivered",label:"ŸÖŸÉÿ™ŸÖŸÑ",icon:"‚úÖ"},{value:"cancelled",label:"ŸÖŸÑÿ∫Ÿä",icon:"‚ùå"}].map(l=>e.jsxs("button",{onClick:()=>lr(l.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${va===l.value?"bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-lg shadow-amber-200":"bg-white border border-gray-200 text-gray-600 hover:border-amber-300 hover:bg-amber-50"}`,children:[l.icon," ",l.label]},l.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ÿßŸÑŸÅÿ™ÿ±ÿ©:"})]}),[{value:"all",label:"ÿßŸÑŸÉŸÑ"},{value:"today",label:"ÿßŸÑŸäŸàŸÖ"},{value:"week",label:"ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ"},{value:"month",label:"ÿßŸÑÿ¥Ÿáÿ±"}].map(l=>e.jsx("button",{onClick:()=>nr(l.value),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${ra===l.value?"bg-amber-100 text-amber-700":"text-gray-500 hover:bg-gray-100"}`,children:l.label},l.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("select",{value:qs,onChange:l=>cl(l.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium focus:border-amber-400 focus:ring-2 focus:ring-amber-100",children:[e.jsx("option",{value:"newest",children:"ÿßŸÑÿ£ÿ≠ÿØÿ´ ÿ£ŸàŸÑÿßŸã"}),e.jsx("option",{value:"oldest",children:"ÿßŸÑÿ£ŸÇÿØŸÖ ÿ£ŸàŸÑÿßŸã"})]})]})]}),e.jsx("div",{className:"space-y-4",children:ol().length===0?e.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Oe,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿ±ÿ® ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿ£Ÿà ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑÿ≤ŸÖŸÜŸäÿ©"}),e.jsx("button",{onClick:()=>{it(""),lr("all"),nr("all")},className:"mt-4 px-6 py-2 bg-amber-100 text-amber-600 rounded-xl font-medium hover:bg-amber-200 transition-colors",children:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÅŸÑÿßÿ™ÿ±"})]}):ol().map(l=>{var H,z;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg shadow-gray-100 border border-gray-100 p-5 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg",children:["ÿ∑ŸÑÿ® #",l.id.slice(-8)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["üè™ ",l.restaurantName||"ŸÖÿ∑ÿπŸÖ"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["üìç ",l.address]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["üí∞ ",(H=l.total)==null?void 0:H.toFixed(2)," ÿ±.ÿ≥"]}),l.platformFee&&e.jsxs("p",{className:"text-xs text-green-600",children:["ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ: ",l.platformFee," ÿ±.ÿ≥",l.adminCommission?` | ÿπŸÖŸàŸÑÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅ: ${l.adminCommission} ÿ±.ÿ≥`:""]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:`inline-block px-3 py-1.5 rounded-xl text-sm font-bold ${l.status==="delivered"?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700":l.status==="cancelled"?"bg-gradient-to-r from-red-100 to-pink-100 text-red-700":l.status==="pending"?"bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-700":"bg-gradient-to-r from-blue-100 to-sky-100 text-blue-700"}`,children:Bn(l.status)}),e.jsxs("select",{value:l.status,onChange:Z=>Mn(l.id,Z.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[e.jsx("option",{value:"pending",children:"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"}),e.jsx("option",{value:"accepted",children:"ŸÖŸÇÿ®ŸàŸÑ"}),e.jsx("option",{value:"preparing",children:"ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±"}),e.jsx("option",{value:"ready",children:"ÿ¨ÿßŸáÿ≤"}),e.jsx("option",{value:"out_for_delivery",children:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ"}),e.jsx("option",{value:"delivered",children:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ"}),e.jsx("option",{value:"cancelled",children:"ŸÖŸÑÿ∫Ÿä"})]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"ÿßŸÑÿ£ÿµŸÜÿßŸÅ:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(z=l.items)==null?void 0:z.map((Z,oe)=>e.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-lg",children:[Z.name," √ó ",Z.qty]},oe))})]})]},l.id)})})]}),i==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white via-violet-50/30 to-purple-50/30 rounded-3xl p-6 border border-violet-100 shadow-lg shadow-violet-100/50",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-violet-200",children:e.jsx(zs,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[xl().length," ŸÖŸÜ ",f.length," ŸÖÿ≥ÿ™ÿÆÿØŸÖ"]})]})]})}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Hs,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖÿå ÿßŸÑÿ•ŸäŸÖŸäŸÑÿå ÿ£Ÿà ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ...",value:Fs,onChange:l=>it(l.target.value),className:"w-full pr-12 pl-4 py-4 border-2 border-violet-100 rounded-2xl focus:border-violet-400 focus:ring-4 focus:ring-violet-100 transition-all bg-white/80 backdrop-blur text-lg"}),Fs&&e.jsx("button",{onClick:()=>it(""),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(oa,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"ÿßŸÑÿØŸàÿ±:"})]}),[{value:"all",label:"ÿßŸÑŸÉŸÑ",icon:"üë•",color:"violet"},{value:"customer",label:"ÿπŸÖŸäŸÑ",icon:"üõí"},{value:"owner",label:"ŸÖÿ∑ÿπŸÖ",icon:"üè™"},{value:"courier",label:"ŸÖŸÜÿØŸàÿ®",icon:"üöó"},{value:"admin",label:"ŸÖÿ¥ÿ±ŸÅ",icon:"üëë"},{value:"supervisor",label:"ŸÖÿ¥ÿ±ŸÅÿ© ŸÖÿ∑ÿßÿπŸÖ",icon:"üë©‚Äçüíº"},{value:"social_media",label:"ÿ≥Ÿàÿ¥ŸäÿßŸÑ ŸÖŸäÿØŸäÿß",icon:"üì±"},{value:"support",label:"ÿØÿπŸÖ ŸÅŸÜŸä",icon:"üéß"},{value:"accountant",label:"ŸÖÿ≠ÿßÿ≥ÿ®",icon:"üí∞"}].map(l=>e.jsxs("button",{onClick:()=>rr(l.value),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${il===l.value?"bg-gradient-to-r from-violet-500 to-purple-600 text-white shadow-lg shadow-violet-200":"bg-white border border-gray-200 text-gray-600 hover:border-violet-300 hover:bg-violet-50"}`,children:[l.icon," ",l.label]},l.value)),e.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),e.jsxs("select",{value:qs,onChange:l=>cl(l.target.value),className:"px-4 py-2 rounded-xl border border-gray-200 bg-white text-sm font-medium focus:border-violet-400 focus:ring-2 focus:ring-violet-100",children:[e.jsx("option",{value:"newest",children:"ÿßŸÑÿ£ÿ≠ÿØÿ´ ÿ£ŸàŸÑÿßŸã"}),e.jsx("option",{value:"oldest",children:"ÿßŸÑÿ£ŸÇÿØŸÖ ÿ£ŸàŸÑÿßŸã"}),e.jsx("option",{value:"name",children:"ÿßŸÑÿßÿ≥ŸÖ (ÿ£-Ÿä)"})]})]})]}),xl().length===0?e.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(zs,{className:"w-10 h-10 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿ±ÿ® ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑÿ®ÿ≠ÿ´"}),e.jsx("button",{onClick:()=>{it(""),rr("all")},className:"mt-4 px-6 py-2 bg-violet-100 text-violet-600 rounded-xl font-medium hover:bg-violet-200 transition-colors",children:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÅŸÑÿßÿ™ÿ±"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:xl().map(l=>{var H,z,Z,oe,ue,we,Pe;return e.jsx("div",{className:"bg-white rounded-2xl shadow-lg shadow-gray-100 border border-gray-100 p-5 hover:shadow-xl transition-all duration-300",children:p===l.uid?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"ÿßŸÑÿßÿ≥ŸÖ",value:x.name||"",onChange:Se=>Q({...x,name:Se.target.value}),className:"w-full border rounded-xl p-2"}),e.jsx("input",{type:"text",placeholder:"ÿßŸÑŸáÿßÿ™ŸÅ",value:x.phone||"",onChange:Se=>Q({...x,phone:Se.target.value}),className:"w-full border rounded-xl p-2"}),e.jsxs("select",{value:x.role||"customer",onChange:Se=>Q({...x,role:Se.target.value}),className:"w-full border rounded-xl p-2",children:[e.jsx("option",{value:"customer",children:"ÿπŸÖŸäŸÑ"}),e.jsx("option",{value:"owner",children:"ÿµÿßÿ≠ÿ® ŸÖÿ∑ÿπŸÖ"}),e.jsx("option",{value:"courier",children:"ŸÖŸÜÿØŸàÿ®"}),e.jsx("option",{value:"admin",children:"ŸÖÿ¥ÿ±ŸÅ"}),e.jsx("option",{value:"supervisor",children:"ŸÖÿ¥ÿ±ŸÅÿ© ŸÖÿ∑ÿßÿπŸÖ"}),e.jsx("option",{value:"social_media",children:"ŸÖÿ≥ÿ§ŸàŸÑÿ© ÿ≥Ÿàÿ¥ŸäÿßŸÑ ŸÖŸäÿØŸäÿß"}),e.jsx("option",{value:"support",children:"ÿØÿπŸÖ ŸÅŸÜŸä"}),e.jsx("option",{value:"accountant",children:"ŸÖÿ≠ÿßÿ≥ÿ®"}),e.jsx("option",{value:"developer",children:"ŸÖÿ∑Ÿàÿ±"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>On(l.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:"ÿ≠ŸÅÿ∏"}),e.jsx("button",{onClick:()=>I(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-bold",children:l.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),l.isActive===!1&&e.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:"ŸÖŸàŸÇŸàŸÅ"}),((H=l.security)==null?void 0:H.isDeactivated)&&e.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:"üîí ŸÖÿ≠ÿ∏Ÿàÿ±"}),((z=l.security)==null?void 0:z.lockedUntil)&&new Date(((oe=(Z=l.security.lockedUntil).toDate)==null?void 0:oe.call(Z))||l.security.lockedUntil)>new Date&&e.jsx("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full",children:"‚è±Ô∏è ŸÖŸÇŸÅŸÑ ŸÖÿ§ŸÇÿ™ÿßŸã"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:l.email}),l.phone&&e.jsxs("p",{className:"text-xs text-gray-500",children:["üì± ",l.phone]}),e.jsx("p",{className:"text-xs mt-1",children:Un(l.role)}),((ue=l.security)==null?void 0:ue.lastLogin)&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["üïê ÿ¢ÿÆÿ± ÿØÿÆŸàŸÑ: ",new Date(((Pe=(we=l.security.lastLogin).toDate)==null?void 0:Pe.call(we))||l.security.lastLogin).toLocaleString("ar-SA")]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Nn(l,l.isActive!==!1),className:`p-1.5 rounded-lg ${l.isActive===!1?"bg-green-100 text-green-600":"bg-orange-100 text-orange-600"}`,title:l.isActive===!1?"ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®":"ÿ™ÿπŸÑŸäŸÇ ÿßŸÑÿ≠ÿ≥ÿßÿ®",children:l.isActive===!1?e.jsx(Ie,{className:"w-4 h-4"}):e.jsx(Ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{I(l.uid),Q(l)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",title:"ÿ™ÿπÿØŸäŸÑ",children:e.jsx(Ut,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ln(l.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"ÿ≠ÿ∞ŸÅ",children:e.jsx(Ns,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>yn(l),className:"p-1.5 bg-amber-100 text-amber-600 rounded-lg hover:bg-amber-200 transition-colors",title:"ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",children:e.jsx(_l,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>wn(l),className:"p-1.5 bg-violet-100 text-violet-600 rounded-lg hover:bg-violet-200 transition-colors",title:"ÿ≥ÿ¨ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",children:e.jsx(Pt,{className:"w-4 h-4"})})]})]})]})})},l.uid)})}),na.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 bg-gradient-to-r from-violet-500 to-purple-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pt,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"ÿ≥ÿ¨ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"}),e.jsx("p",{className:"text-sm text-violet-100",children:na.userName})]})]}),e.jsx("button",{onClick:()=>Sa(l=>({...l,isOpen:!1})),className:"p-2 hover:bg-white/20 rounded-xl transition",children:e.jsx(_e,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:na.loading?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qe,{className:"w-8 h-8 animate-spin mx-auto text-violet-500 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})]}):na.history.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Pt,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≥ÿ¨ŸÑÿßÿ™ ÿØÿÆŸàŸÑ"})]}):e.jsx("div",{className:"space-y-3",children:na.history.map((l,H)=>e.jsxs("div",{className:`p-4 rounded-2xl border ${l.status==="success"?"bg-green-50 border-green-200":l.status==="blocked"?"bg-red-50 border-red-200":"bg-orange-50 border-orange-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l.status==="success"?e.jsx(Ie,{className:"w-5 h-5 text-green-600"}):l.status==="blocked"?e.jsx(us,{className:"w-5 h-5 text-red-600"}):e.jsx(Ds,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:`font-medium ${l.status==="success"?"text-green-700":l.status==="blocked"?"text-red-700":"text-orange-700"}`,children:l.status==="success"?"ÿØÿÆŸàŸÑ ŸÜÿßÿ¨ÿ≠":l.status==="blocked"?"ŸÖÿ≠ÿ∏Ÿàÿ±":"ŸÖÿ≠ÿßŸàŸÑÿ© ŸÅÿßÿ¥ŸÑÿ©"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:l.timestamp?new Date(l.timestamp).toLocaleString("ar-SA"):"-"})]}),l.errorMessage&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:l.errorMessage})]},l.id||H))})})]})})]}),i==="couriers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-white via-cyan-50/30 to-teal-50/30 rounded-3xl p-6 border border-cyan-100 shadow-lg shadow-cyan-100/50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-teal-600 rounded-2xl flex items-center justify-center shadow-lg shadow-cyan-200",children:e.jsx(Be,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-600 to-teal-600 bg-clip-text text-transparent",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÜÿßÿØŸäÿ®"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[P.couriers," ŸÖŸÜÿØŸàÿ® ŸÖÿ≥ÿ¨ŸÑ"]})]})]}),e.jsx("button",{onClick:()=>me(!K),className:"group flex items-center gap-2 bg-gradient-to-r from-cyan-500 to-teal-600 hover:from-cyan-600 hover:to-teal-700 text-white px-5 py-3 rounded-2xl font-bold shadow-lg shadow-cyan-200 transition-all duration-300 hover:scale-105",children:K?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-5 h-5"}),"ÿ•ŸÑÿ∫ÿßÿ°"]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),"ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿØŸàÿ® ÿ¨ÿØŸäÿØ"]})})]})}),K&&e.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[e.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"üöó ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿØŸàÿ® ÿ¨ÿØŸäÿØ"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä *"}),e.jsx("input",{type:"email",placeholder:"courier@example.com",value:de,onChange:l=>ye(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± *"}),e.jsx("input",{type:"password",placeholder:"6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ",value:ce,onChange:l=>ie(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßŸÑÿßÿ≥ŸÖ"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿØŸàÿ®",value:G,onChange:l=>ae(l.target.value),className:"w-full border rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:ge,onChange:l=>ke(l.target.value),className:"w-full border rounded-xl p-3"})]})]}),e.jsx("button",{onClick:Rn,disabled:Ae||!de.trim()||!ce.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Ae?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):"üöó ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÜÿØŸàÿ®"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.filter(l=>l.role==="courier").map(l=>e.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:"üöó"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:l.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),e.jsx("p",{className:"text-sm text-gray-600",children:l.email}),l.phone&&e.jsxs("p",{className:"text-sm text-gray-600",children:["üì± ",l.phone]})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[e.jsx("p",{className:"text-lg font-bold text-green-600",children:M.filter(H=>H.courierId===l.uid&&H.status==="delivered").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿ≥ŸÑŸÖÿ©"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[e.jsx("p",{className:"text-lg font-bold text-blue-600",children:M.filter(H=>H.courierId===l.uid&&H.status==="out_for_delivery").length}),e.jsx("p",{className:"text-xs text-gray-600",children:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ"})]})]})})]},l.uid)),P.couriers===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖŸÜÿßÿØŸäÿ® ŸÖÿ≥ÿ¨ŸÑŸäŸÜ"})]})]}),i==="admins"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["üëë ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ ŸàÿπŸÖŸàŸÑÿßÿ™ŸáŸÖ (",h.length,")"]}),e.jsxs("button",{onClick:()=>V(!C),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[e.jsx(ct,{className:"w-5 h-5"}),C?"ÿ•ŸÑÿ∫ÿßÿ°":"ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ¥ÿ±ŸÅ"]})]}),C&&e.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"üëë ÿ™ÿ±ŸÇŸäÿ© ŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ŸÖÿ¥ÿ±ŸÅ"}),e.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"ÿßÿÆÿ™ÿ± ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸàÿ¨ŸàÿØ ŸÑÿ™ÿ±ŸÇŸäÿ™Ÿá ÿ•ŸÑŸâ ÿØŸàÿ± ÿßŸÑŸÖÿ¥ÿ±ŸÅÿå ÿ£Ÿà ÿ£ÿØÿÆŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ¨ÿØŸäÿØ"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"ÿ™ÿ±ŸÇŸäÿ© ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸàÿ¨ŸàÿØ:"}),e.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[f.filter(l=>l.role==="customer").slice(0,10).map(l=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:l.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),e.jsx("p",{className:"text-sm text-gray-500",children:l.email})]}),e.jsx("button",{onClick:async()=>{if(await n.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ÿ±ŸÇŸäÿ© ${l.name||l.email} ÿ•ŸÑŸâ ŸÖÿ¥ÿ±ŸÅÿü`,{title:"ÿ™ÿ±ŸÇŸäÿ© ÿ•ŸÑŸâ ŸÖÿ¥ÿ±ŸÅ"}))try{await xe(J(S,"users",l.uid),{role:"admin"}),a.success("ÿ™ŸÖ ÿ™ÿ±ŸÇŸäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ŸÖÿ¥ÿ±ŸÅ ‚úÖ"),V(!1),rs()}catch{a.error("ŸÅÿ¥ŸÑ ÿ™ÿ±ŸÇŸäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:"ÿ™ÿ±ŸÇŸäÿ© üëë"})]},l.uid)),f.filter(l=>l.role==="customer").length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ÿπŸÖŸÑÿßÿ° ŸäŸÖŸÉŸÜ ÿ™ÿ±ŸÇŸäÿ™ŸáŸÖ"})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"‚ú® ÿ£Ÿà ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖÿ¥ÿ±ŸÅ ÿ¨ÿØŸäÿØ:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä *"}),e.jsx("input",{type:"email",placeholder:"admin@example.com",value:W,onChange:l=>ne(l.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± *"}),e.jsx("input",{type:"password",placeholder:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± (6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ)",value:he,onChange:l=>F(l.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿßŸÑÿßÿ≥ŸÖ"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ¥ÿ±ŸÅ",value:re,onChange:l=>fe(l.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:te,onChange:l=>Ne(l.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),e.jsx("button",{onClick:Dn,disabled:ee||!W.trim()||!he.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:ee?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-5 h-5"}),"ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿ¥ÿ±ŸÅ"]})}),e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá: ÿ®ÿπÿØ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ¥ÿ±ŸÅ ÿßŸÑÿ¨ÿØŸäÿØÿå ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã. Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ."})]}),e.jsx("div",{className:"border-t pt-4 mt-4",children:e.jsx("p",{className:"text-xs text-gray-500",children:'üí° ŸäŸÖŸÉŸÜŸÉ ÿ£Ÿäÿ∂ÿßŸã ÿ™ÿ∫ŸäŸäÿ± ÿØŸàÿ± ÿ£Ÿä ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸÜ ÿ™ÿ®ŸàŸäÿ® "ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"'})})]}),e.jsxs("div",{className:"space-y-4",children:[h.map(l=>e.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>u(A===l.uid?null:l.uid),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:"üëë"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:l.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),e.jsx("p",{className:"text-sm text-gray-600",children:l.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"font-bold text-green-600",children:[l.walletBalance.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ÿ•ÿ¨ŸÖÿßŸÑŸä: ",l.totalEarnings.toFixed(2)," ÿ±.ÿ≥ | ",l.restaurantsCount," ŸÖÿ∑ÿπŸÖ"]})]}),A===l.uid?e.jsx(ja,{className:"w-5 h-5 text-gray-400"}):e.jsx(Jt,{className:"w-5 h-5 text-gray-400"})]})]})}),A===l.uid&&e.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[e.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["üè™ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ∂ÿßŸÅÿ© ÿ®Ÿàÿßÿ≥ÿ∑ÿ© Ÿáÿ∞ÿß ÿßŸÑŸÖÿ¥ÿ±ŸÅ (",l.restaurants.length,"):"]}),l.restaurants.length>0?e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:l.restaurants.map(H=>e.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:H.logoUrl?e.jsx("img",{src:H.logoUrl,alt:H.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"üè™"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:H.name}),e.jsx("p",{className:"text-xs text-gray-500",children:H.city||"ÿ®ÿØŸàŸÜ ŸÖÿØŸäŸÜÿ©"})]})]},H.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"ŸÑŸÖ Ÿäÿ∂ŸÅ ÿ£Ÿä ŸÖÿ∑ÿßÿπŸÖ ÿ®ÿπÿØ"}),e.jsx("div",{className:"mt-4 pt-3 border-t",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-green-700",children:l.walletBalance.toFixed(2)}),e.jsx("p",{className:"text-xs text-gray-600",children:"ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑÿ≠ÿßŸÑŸä"})]}),e.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-blue-700",children:l.totalEarnings.toFixed(2)}),e.jsx("p",{className:"text-xs text-gray-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-purple-700",children:M.filter(H=>H.referredBy===l.uid).length}),e.jsx("p",{className:"text-xs text-gray-600",children:"ÿ∑ŸÑÿ®ÿßÿ™ ŸÖŸÜ ŸÖÿ∑ÿßÿπŸÖŸá"})]})]})})]})]},l.uid)),h.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖÿ¥ÿ±ŸÅŸäŸÜ ŸÖÿ≥ÿ¨ŸÑŸäŸÜ"})]})]}),i==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"‚öôÔ∏è ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),L?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{$(!1),R(T)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx("button",{onClick:En,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:"üíæ ÿ≠ŸÅÿ∏"})]}):e.jsx("button",{onClick:()=>$(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:"‚úèÔ∏è ÿ™ÿπÿØŸäŸÑ"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üí∞ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ (ÿ±.ÿ≥)"}),L?e.jsx("input",{type:"number",value:v.deliveryFee||0,onChange:l=>R({...v,deliveryFee:Number(l.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[T.deliveryFee||7," ÿ±.ÿ≥"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üíµ ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ / ŸÖŸÜÿ™ÿ¨ (ÿ±.ÿ≥)"}),L?e.jsx("input",{type:"number",step:"0.1",value:v.platformFee||1,onChange:l=>R({...v,platformFee:Number(l.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[T.platformFee||1," ÿ±.ÿ≥/ŸÖŸÜÿ™ÿ¨"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üëë ÿπŸÖŸàŸÑÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅ / ŸÖŸÜÿ™ÿ¨ (ÿ±.ÿ≥)"}),L?e.jsx("input",{type:"number",step:"0.05",value:v.adminCommissionRate||.75,onChange:l=>R({...v,adminCommissionRate:Number(l.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[T.adminCommissionRate||.75," ÿ±.ÿ≥/ŸÖŸÜÿ™ÿ¨"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üõí ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÑÿ∑ŸÑÿ®"}),L?e.jsx("input",{type:"number",value:v.minOrderAmount||0,onChange:l=>R({...v,minOrderAmount:Number(l.target.value)}),className:"w-full border rounded-xl p-3"}):e.jsxs("p",{className:"text-2xl font-bold",children:[T.minOrderAmount||20," ÿ±.ÿ≥"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üïê ÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿπŸÖŸÑ"}),L?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"time",value:((cr=v.workingHours)==null?void 0:cr.open)||"09:00",onChange:l=>R({...v,workingHours:{...v.workingHours,open:l.target.value}}),className:"flex-1 border rounded-xl p-3"}),e.jsx("input",{type:"time",value:((dr=v.workingHours)==null?void 0:dr.close)||"23:00",onChange:l=>R({...v,workingHours:{...v.workingHours,close:l.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):e.jsxs("p",{className:"text-2xl font-bold",children:[((or=T.workingHours)==null?void 0:or.open)||"09:00"," - ",((xr=T.workingHours)==null?void 0:xr.close)||"23:00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"üîß Ÿàÿ∂ÿπ ÿßŸÑÿµŸäÿßŸÜÿ©"}),L?e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.maintenanceMode||!1,onChange:l=>R({...v,maintenanceMode:l.target.checked}),className:"w-6 h-6"}),e.jsx("span",{className:"text-lg",children:v.maintenanceMode?"ŸÖŸÅÿπŸëŸÑ":"ŸÖÿπÿ∑ŸëŸÑ"})]}):e.jsx("p",{className:`text-2xl font-bold ${T.maintenanceMode?"text-red-600":"text-green-600"}`,children:T.maintenanceMode?"üî¥ ŸÖŸÅÿπŸëŸÑ":"üü¢ ŸÖÿπÿ∑ŸëŸÑ"})]})]})}),e.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[e.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"üí∞ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿπŸÖŸàŸÑÿßÿ™ (ŸÑŸÉŸÑ ŸÖŸÜÿ™ÿ¨ = 1.75 ÿ±.ÿ≥):"}),e.jsxs("div",{className:"text-sky-800 space-y-2",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ:"})," ",T.platformFee||1," ÿ±.ÿ≥ √ó ÿπÿØÿØ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"ÿπŸÖŸàŸÑÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅ:"})," ",T.adminCommissionRate||.75," ÿ±.ÿ≥ √ó ÿπÿØÿØ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™"]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[e.jsx("p",{className:"font-bold mb-2",children:"üìù ŸÖÿ´ÿßŸÑ: ÿ∑ŸÑÿ® ŸÅŸäŸá 5 ŸÖŸÜÿ™ÿ¨ÿßÿ™"}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"ÿ•ÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÖÿ∂ÿßŸÅ ŸÖŸÜ ŸÖÿ¥ÿ±ŸÅ:"})]}),e.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[e.jsxs("li",{children:["ÿßŸÑŸÖÿ¥ÿ±ŸÅ Ÿäÿ≠ÿµŸÑ ÿπŸÑŸâ: 5 √ó ",T.adminCommissionRate||.75," = ",e.jsxs("strong",{children:[(5*(T.adminCommissionRate||.75)).toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("li",{children:["ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ Ÿäÿ≠ÿµŸÑ ÿπŸÑŸâ: 5 √ó ",T.platformFee||1," = ",e.jsxs("strong",{children:[(5*(T.platformFee||1)).toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsxs("li",{className:"text-green-700",children:["ÿßŸÑŸÖÿ¨ŸÖŸàÿπ: ",e.jsxs("strong",{children:[(5*1.75).toFixed(2)," ÿ±.ÿ≥"]})]})]}),e.jsxs("p",{className:"mt-2",children:["‚Ä¢ ",e.jsx("strong",{children:"ÿ•ÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÖÿ∂ÿßŸÅ ŸÖŸÜ ÿßŸÑŸÖÿ∑Ÿàÿ±:"})]}),e.jsx("ul",{className:"mr-6 list-disc text-sm",children:e.jsxs("li",{children:["ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ Ÿäÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÉŸÑ ÿ¥Ÿäÿ°: 5 √ó 1.75 = ",e.jsxs("strong",{children:[(5*1.75).toFixed(2)," ÿ±.ÿ≥"]})]})})]})]})]})]}),i==="employees"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["üë• ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ (",ea.length,")"]}),e.jsxs("button",{onClick:()=>Wl(!rl),className:"flex items-center gap-2 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white px-5 py-2.5 rounded-xl font-semibold transition shadow-lg",children:[e.jsx(ct,{className:"w-5 h-5"}),rl?"ÿ•ŸÑÿ∫ÿßÿ°":"ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸàÿ∏ŸÅ"]})]}),rl&&e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 border-2 border-indigo-200 shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-bold text-indigo-800 mb-4 flex items-center gap-2",children:[e.jsx(ct,{className:"w-6 h-6"}),"ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖŸàÿ∏ŸÅ ÿ¨ÿØŸäÿØ"]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-1",children:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä *"}),e.jsx("input",{type:"email",placeholder:"employee@example.com",value:kt,onChange:l=>Gl(l.target.value),className:"w-full border-2 border-indigo-200 rounded-xl p-3 text-gray-900 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-1",children:"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± *"}),e.jsx("input",{type:"password",placeholder:"6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ",value:sa,onChange:l=>Kl(l.target.value),className:"w-full border-2 border-indigo-200 rounded-xl p-3 text-gray-900 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-1",children:"ÿßŸÑÿßÿ≥ŸÖ"}),e.jsx("input",{type:"text",placeholder:"ÿßÿ≥ŸÖ ÿßŸÑŸÖŸàÿ∏ŸÅ",value:ya,onChange:l=>Yl(l.target.value),className:"w-full border-2 border-indigo-200 rounded-xl p-3 text-gray-900 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-1",children:"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ"}),e.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Jl,onChange:l=>Xl(l.target.value),className:"w-full border-2 border-indigo-200 rounded-xl p-3 text-gray-900 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"ÿßŸÑÿØŸàÿ± ÿßŸÑŸàÿ∏ŸäŸÅŸä *"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:[{id:"supervisor",label:"üë§ ŸÖÿ¥ÿ±ŸÅ",color:"amber"},{id:"support",label:"üéß ÿØÿπŸÖ ŸÅŸÜŸä",color:"blue"},{id:"social_media",label:"üì± ÿ≥Ÿàÿ¥ŸäÿßŸÑ",color:"pink"},{id:"admin",label:"üîß ÿ•ÿØÿßÿ±ÿ©",color:"purple"},{id:"accountant",label:"üí∞ ŸÖÿ≠ÿßÿ≥ÿ®",color:"green"}].map(l=>e.jsx("button",{onClick:()=>Zl(l.id),className:`px-4 py-2.5 rounded-xl font-medium transition-all ${ta===l.id?`bg-${l.color}-500 text-white shadow-lg`:"bg-white text-gray-700 border-2 border-gray-200 hover:border-indigo-300"}`,children:l.label},l.id))})]})]}),e.jsx("button",{onClick:Cn,disabled:er||!kt.trim()||!sa.trim(),className:"mt-6 w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white py-3.5 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg",children:er?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-5 h-5"}),"ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®"]})}),e.jsx("p",{className:"text-xs text-orange-600 mt-3 bg-orange-50 p-2 rounded-lg",children:"‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá: ÿ®ÿπÿØ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸàÿ∏ŸÅÿå ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ŸÖÿ§ŸÇÿ™ÿßŸã. Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ."})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"all",label:"ÿßŸÑŸÉŸÑ"},{id:"supervisor",label:"üë§ ŸÖÿ¥ÿ±ŸÅŸäŸÜ"},{id:"support",label:"üéß ÿØÿπŸÖ ŸÅŸÜŸä"},{id:"social_media",label:"üì± ÿ≥Ÿàÿ¥ŸäÿßŸÑ"},{id:"admin",label:"üîß ÿ•ÿØÿßÿ±ÿ©"},{id:"accountant",label:"üí∞ ŸÖÿ≠ÿßÿ≥ÿ®ŸäŸÜ"},{id:"active",label:"‚úÖ ŸÜÿ¥ÿ∑"},{id:"inactive",label:"‚õî ŸÖÿ™ŸàŸÇŸÅ"}].map(l=>e.jsx("button",{onClick:()=>jn(l.id),className:`px-4 py-2 rounded-xl font-medium transition ${aa===l.id?"bg-indigo-500 text-white shadow":"bg-white text-gray-600 border border-gray-200 hover:border-indigo-300"}`,children:l.label},l.id))}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:ea.filter(l=>aa==="all"?!0:aa==="active"?l.isActive:aa==="inactive"?!l.isActive:l.role===aa).map(l=>{const z={supervisor:{label:"ŸÖÿ¥ÿ±ŸÅ",emoji:"üë§",color:"amber"},support:{label:"ÿØÿπŸÖ ŸÅŸÜŸä",emoji:"üéß",color:"blue"},social_media:{label:"ÿ≥Ÿàÿ¥ŸäÿßŸÑ ŸÖŸäÿØŸäÿß",emoji:"üì±",color:"pink"},admin:{label:"ÿ•ÿØÿßÿ±ÿ©",emoji:"üîß",color:"purple"},accountant:{label:"ŸÖÿ≠ÿßÿ≥ÿ®",emoji:"üí∞",color:"green"}}[l.role]||{label:l.role,emoji:"üë§",color:"gray"};return e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden border-2 transition-all ${l.isActive?"border-gray-100 hover:border-indigo-200":"border-red-200 bg-red-50/50"}`,children:[e.jsx("div",{className:`bg-gradient-to-r from-${z.color}-500 to-${z.color}-600 px-4 py-3 text-white`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:z.emoji}),e.jsx("span",{className:"font-bold",children:z.label})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${l.isActive?"bg-white/20":"bg-red-100 text-red-700"}`,children:l.isActive?"‚úÖ ŸÜÿ¥ÿ∑":"‚õî ŸÖÿ™ŸàŸÇŸÅ"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:l.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ"}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(Rt,{className:"w-3.5 h-3.5"}),l.email]}),l.phone&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["üì± ",l.phone]}),fn===l.uid?e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-600",children:"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿØŸàÿ±:"}),e.jsxs("select",{value:wa,onChange:Z=>tr(Z.target.value),className:"w-full border-2 border-indigo-200 rounded-xl p-2.5 text-gray-900 focus:border-indigo-400",children:[e.jsx("option",{value:"supervisor",children:"üë§ ŸÖÿ¥ÿ±ŸÅ"}),e.jsx("option",{value:"support",children:"üéß ÿØÿπŸÖ ŸÅŸÜŸä"}),e.jsx("option",{value:"social_media",children:"üì± ÿ≥Ÿàÿ¥ŸäÿßŸÑ ŸÖŸäÿØŸäÿß"}),e.jsx("option",{value:"admin",children:"üîß ÿ•ÿØÿßÿ±ÿ©"}),e.jsx("option",{value:"accountant",children:"üí∞ ŸÖÿ≠ÿßÿ≥ÿ®"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>An(l.uid,wa),disabled:wa===l.role,className:`flex-1 py-2 rounded-xl text-sm font-bold transition ${wa===l.role?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white"}`,children:"‚úÖ ÿ≠ŸÅÿ∏"}),e.jsx("button",{onClick:()=>nl(null),className:"flex-1 py-2 rounded-xl text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-600 transition",children:"‚ùå ÿ•ŸÑÿ∫ÿßÿ°"})]})]}):e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs("button",{onClick:()=>{nl(l.uid),tr(l.role)},className:"flex-1 flex items-center justify-center gap-1 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 py-2 rounded-xl text-sm font-medium transition",children:[e.jsx(Ut,{className:"w-4 h-4"}),"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿØŸàÿ±"]}),e.jsx("button",{onClick:()=>In(l.uid),className:`flex-1 flex items-center justify-center gap-1 py-2 rounded-xl text-sm font-medium transition ${l.isActive?"bg-red-50 hover:bg-red-100 text-red-600":"bg-green-50 hover:bg-green-100 text-green-600"}`,children:l.isActive?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-4 h-4"}),"ÿ•ŸäŸÇÿßŸÅ"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4"}),"ÿ™ŸÅÿπŸäŸÑ"]})})]})]})]},l.uid)})}),ea.length===0&&e.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow",children:[e.jsx(ct,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"ŸÑÿß ŸäŸàÿ¨ÿØ ŸÖŸàÿ∏ŸÅŸäŸÜ ÿ≠ÿßŸÑŸäÿßŸã"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ÿßÿ®ÿØÿ£ ÿ®ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸàÿ∏ŸÅ ÿ¨ÿØŸäÿØ"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl p-6 border border-indigo-100",children:[e.jsxs("h3",{className:"font-bold text-indigo-900 mb-4 flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5"}),"ÿµŸÑÿßÿ≠Ÿäÿßÿ™ ŸÉŸÑ ÿØŸàÿ±"]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"üë§"}),e.jsx("span",{className:"font-bold text-amber-700",children:"ŸÖÿ¥ÿ±ŸÅ"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"‚úì ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑÿ™ÿßÿ®ÿπÿ©"}),e.jsx("li",{children:"‚úì ŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("li",{children:"‚úì ÿπŸÖŸàŸÑÿßÿ™ ÿπŸÑŸâ ŸÉŸÑ ÿ∑ŸÑÿ®"}),e.jsx("li",{children:"‚úì ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ£ÿØÿßÿ°"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"üéß"}),e.jsx("span",{className:"font-bold text-blue-700",children:"ÿØÿπŸÖ ŸÅŸÜŸä"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"‚úì ÿßŸÑÿ±ÿØ ÿπŸÑŸâ ÿßŸÑÿ¥ŸÉÿßŸàŸâ"}),e.jsx("li",{children:"‚úì ÿØÿπŸÖ ÿßŸÑÿπŸÖŸÑÿßÿ°"}),e.jsx("li",{children:"‚úì ÿ≠ŸÑ ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ"}),e.jsx("li",{children:"‚úó ŸÑÿß Ÿäÿ±Ÿâ ÿßŸÑŸÖÿßŸÑŸäÿ©"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"üì±"}),e.jsx("span",{className:"font-bold text-pink-700",children:"ÿ≥Ÿàÿ¥ŸäÿßŸÑ ŸÖŸäÿØŸäÿß"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"‚úì ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ"}),e.jsx("li",{children:"‚úì ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ™ŸÅÿßÿπŸÑ"}),e.jsx("li",{children:"‚úì ÿßŸÑÿ≠ŸÖŸÑÿßÿ™ ÿßŸÑÿ•ÿπŸÑÿßŸÜŸäÿ©"}),e.jsx("li",{children:"‚úó ŸÑÿß Ÿäÿ±Ÿâ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"üîß"}),e.jsx("span",{className:"font-bold text-purple-700",children:"ÿ•ÿØÿßÿ±ÿ©"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"‚úì ÿ¨ŸÖŸäÿπ ÿµŸÑÿßÿ≠Ÿäÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅ"}),e.jsx("li",{children:"‚úì ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),e.jsx("li",{children:"‚úì ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ¥ÿßŸÖŸÑÿ©"}),e.jsx("li",{children:"‚úó ŸÑÿß Ÿäÿ∫Ÿäÿ± ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:"üí∞"}),e.jsx("span",{className:"font-bold text-green-700",children:"ŸÖÿ≠ÿßÿ≥ÿ®"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"‚úì ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸÖÿßŸÑŸäÿ©"}),e.jsx("li",{children:"‚úì ÿßŸÑÿπŸÖŸàŸÑÿßÿ™ ŸàÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"}),e.jsx("li",{children:"‚úì ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ≥ÿ≠ÿ®"}),e.jsx("li",{children:"‚úó ŸÑÿß ŸäÿØŸäÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"})]})]})]})]})]}),i==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"üìã ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸáÿßŸÖ ÿßŸÑŸäŸàŸÖŸäÿ©"}),e.jsxs("button",{onClick:()=>Ke(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[e.jsx(vs,{className:"w-5 h-5"}),"ŸÖŸáŸÖÿ© ÿ¨ÿØŸäÿØÿ©"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(l=>e.jsxs("button",{onClick:()=>un(l),className:`px-4 py-2 rounded-xl font-semibold transition ${Ft===l?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[l==="all"&&"üìã ÿßŸÑŸÉŸÑ",l==="pending"&&"‚è≥ ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±",l==="in_progress"&&"üîÑ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞",l==="completed"&&"‚úÖ ŸÖŸÉÿ™ŸÖŸÑÿ©",l==="cancelled"&&"‚ùå ŸÖŸÑÿ∫ÿßÿ©"]},l))}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Xs.filter(l=>l.status==="pending").length}),e.jsx("p",{className:"text-sm text-yellow-700",children:"ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Xs.filter(l=>l.status==="in_progress").length}),e.jsx("p",{className:"text-sm text-blue-700",children:"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Xs.filter(l=>l.status==="completed").length}),e.jsx("p",{className:"text-sm text-green-700",children:"ŸÖŸÉÿ™ŸÖŸÑÿ©"})]}),e.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:Xs.filter(l=>l.status==="cancelled").length}),e.jsx("p",{className:"text-sm text-red-700",children:"ŸÖŸÑÿ∫ÿßÿ©"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:Xs.filter(l=>Ft==="all"||l.status===Ft).length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{className:"text-4xl mb-2",children:"üìã"}),e.jsxs("p",{children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸáÿßŸÖ ",Ft!=="all"&&"ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸÅÿ¶ÿ©"]})]}):e.jsx("div",{className:"divide-y",children:Xs.filter(l=>Ft==="all"||l.status===Ft).map(l=>{var z,Z,oe;const H=f.find(ue=>ue.uid===l.assignedTo);return e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${l.priority==="high"?"bg-red-100 text-red-700":l.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:l.priority==="high"?"üî¥ ÿπÿßŸÑŸäÿ©":l.priority==="medium"?"üü° ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©":"‚ö™ ŸÖŸÜÿÆŸÅÿ∂ÿ©"}),e.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${l.status==="pending"?"bg-yellow-100 text-yellow-700":l.status==="in_progress"?"bg-blue-100 text-blue-700":l.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.status==="pending"&&"‚è≥ ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±",l.status==="in_progress"&&"üîÑ ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÜŸÅŸäÿ∞",l.status==="completed"&&"‚úÖ ŸÖŸÉÿ™ŸÖŸÑÿ©",l.status==="cancelled"&&"‚ùå ŸÖŸÑÿ∫ÿßÿ©"]})]}),e.jsx("h3",{className:"font-bold text-gray-800",children:l.title}),l.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["üë§ ",(H==null?void 0:H.name)||l.assignedToName||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"]}),l.dueDate&&e.jsxs("span",{children:["üìÖ ",new Date(l.dueDate).toLocaleDateString("ar-SA")]}),e.jsxs("span",{children:["üïê ",((oe=(Z=(z=l.createdAt)==null?void 0:z.toDate)==null?void 0:Z.call(z))==null?void 0:oe.toLocaleDateString("ar-SA"))||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"]})]}),l.notes&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:["üí¨ ",l.notes]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[l.status==="pending"&&e.jsx("button",{onClick:async()=>{try{await xe(J(S,"tasks",l.id),{status:"in_progress",updatedAt:X()}),a.success("ÿ™ŸÖ ÿ®ÿØÿ° ÿßŸÑŸÖŸáŸÖÿ©"),rs()}catch{a.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸáŸÖÿ©")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:"ÿ®ÿØÿ° ÿßŸÑŸÖŸáŸÖÿ©",children:"‚ñ∂Ô∏è"}),(l.status==="pending"||l.status==="in_progress")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:async()=>{try{await xe(J(S,"tasks",l.id),{status:"completed",completedAt:X(),updatedAt:X()}),a.success("ÿ™ŸÖ ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑŸÖŸáŸÖÿ©"),rs()}catch{a.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸáŸÖÿ©")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:"ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑŸÖŸáŸÖÿ©",children:"‚úÖ"}),e.jsx("button",{onClick:async()=>{if(await n.confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ•ŸÑÿ∫ÿßÿ° Ÿáÿ∞Ÿá ÿßŸÑŸÖŸáŸÖÿ©ÿü",{dangerous:!0}))try{await xe(J(S,"tasks",l.id),{status:"cancelled",updatedAt:X()}),a.success("ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ©"),rs()}catch{a.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ©")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ©",children:"‚ùå"})]}),e.jsx("button",{onClick:async()=>{if(await n.confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑŸÖŸáŸÖÿ© ŸÜŸáÿßÿ¶ŸäÿßŸãÿü",{dangerous:!0}))try{await As(J(S,"tasks",l.id)),a.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸáŸÖÿ©"),rs()}catch{a.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸáŸÖÿ©")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸáŸÖÿ©",children:"üóëÔ∏è"})]})]})},l.id)})})}),Me&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"üìã ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸáŸÖÿ© ÿ¨ÿØŸäÿØÿ©"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖŸáŸÖÿ© *"}),e.jsx("input",{type:"text",value:Ge,onChange:l=>Zs(l.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:"ŸÖÿ´ÿßŸÑ: ŸÖÿ™ÿßÿ®ÿπÿ© ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ ÿßŸÑÿ¨ÿØŸäÿØ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿßŸÑŸàÿµŸÅ"}),e.jsx("textarea",{value:ut,onChange:l=>Vs(l.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:"ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖŸáŸÖÿ©..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿ™ÿπŸäŸäŸÜ ÿ•ŸÑŸâ *"}),e.jsxs("select",{value:wt,onChange:l=>Xa(l.target.value),className:"w-full border rounded-xl px-4 py-2",children:[e.jsx("option",{value:"",children:"-- ÿßÿÆÿ™ÿ± ŸÖÿ¥ÿ±ŸÅ --"}),f.filter(l=>l.role==="admin").map(l=>e.jsx("option",{value:l.uid,children:l.name||l.email},l.uid))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿßŸÑÿ£ŸàŸÑŸàŸäÿ©"}),e.jsxs("select",{value:Vl,onChange:l=>Za(l.target.value),className:"w-full border rounded-xl px-4 py-2",children:[e.jsx("option",{value:"low",children:"‚ö™ ŸÖŸÜÿÆŸÅÿ∂ÿ©"}),e.jsx("option",{value:"medium",children:"üü° ŸÖÿ™Ÿàÿ≥ÿ∑ÿ©"}),e.jsx("option",{value:"high",children:"üî¥ ÿπÿßŸÑŸäÿ©"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßÿ≥ÿ™ÿ≠ŸÇÿßŸÇ"}),e.jsx("input",{type:"date",value:ql,onChange:l=>el(l.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{Ke(!1),Zs(""),Vs(""),Xa(""),Za("medium"),el("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"}),e.jsx("button",{onClick:async()=>{if(!Ge.trim()||!wt){a.error("Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿßŸÑÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©");return}Hl(!0);try{const l=f.find(H=>H.uid===wt);await Te(se(S,"tasks"),{title:Ge.trim(),description:ut.trim(),assignedTo:wt,assignedToName:(l==null?void 0:l.name)||(l==null?void 0:l.email)||"",status:"pending",priority:Vl,dueDate:ql||null,createdBy:s==null?void 0:s.uid,createdAt:X(),updatedAt:X(),completedAt:null,notes:""}),a.success("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ© ÿ®ŸÜÿ¨ÿßÿ≠"),Ke(!1),Zs(""),Vs(""),Xa(""),Za("medium"),el(""),rs()}catch(l){console.error(l),a.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ©")}finally{Hl(!1)}},disabled:zl,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:zl?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°...":"ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸáŸÖÿ©"})]})]})})]}),i==="tools"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"üõ†Ô∏è ÿ£ÿØŸàÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"üìä ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>{const l={exportDate:new Date().toISOString(),users:f.length,restaurants:g.length,orders:M.length,admins:h.length,stats:P,settings:T},H=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),z=URL.createObjectURL(H),Z=document.createElement("a");Z.href=z,Z.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,Z.click(),a.success("ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üì•"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™"}),e.jsx("p",{className:"text-xs opacity-75",children:"ÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸÑÿÆÿµ JSON"})]})]}),e.jsxs("button",{onClick:()=>{const l=[["ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®","ÿßŸÑŸÖÿ∑ÿπŸÖ","ÿßŸÑŸÖÿ®ŸÑÿ∫","ÿßŸÑÿ≠ÿßŸÑÿ©","ÿßŸÑÿ™ÿßÿ±ŸäÿÆ"].join(","),...M.map(oe=>{var ue,we,Pe;return[oe.id.slice(-8),oe.restaurantName||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ",oe.total,oe.status,((Pe=(we=(ue=oe.createdAt)==null?void 0:ue.toDate)==null?void 0:we.call(ue))==null?void 0:Pe.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),H=new Blob(["\uFEFF"+l],{type:"text/csv;charset=utf-8"}),z=URL.createObjectURL(H),Z=document.createElement("a");Z.href=z,Z.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,Z.click(),a.success("ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üìã"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("p",{className:"text-xs opacity-75",children:"ŸÖŸÑŸÅ CSV ŸÑŸÑÿ•ŸÉÿ≥ŸÑ"})]})]}),e.jsxs("button",{onClick:()=>{const l=[["ÿßŸÑÿßÿ≥ŸÖ","ÿßŸÑÿ•ŸäŸÖŸäŸÑ","ÿßŸÑÿØŸàÿ±","ÿßŸÑŸáÿßÿ™ŸÅ"].join(","),...f.map(oe=>[oe.name||"ÿ®ÿØŸàŸÜ ÿßÿ≥ŸÖ",oe.email,oe.role,oe.phone||""].join(","))].join(`
`),H=new Blob(["\uFEFF"+l],{type:"text/csv;charset=utf-8"}),z=URL.createObjectURL(H),Z=document.createElement("a");Z.href=z,Z.download=`users-${new Date().toISOString().split("T")[0]}.csv`,Z.click(),a.success("ÿ™ŸÖ ÿ™ÿµÿØŸäÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿ®ŸÜÿ¨ÿßÿ≠")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üë•"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ™ÿµÿØŸäÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),e.jsx("p",{className:"text-xs opacity-75",children:"ŸÖŸÑŸÅ CSV ŸÑŸÑÿ•ŸÉÿ≥ŸÑ"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"üîß ÿ£ÿØŸàÿßÿ™ ÿßŸÑÿµŸäÿßŸÜÿ©"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:async()=>{const l=M.filter(z=>z.status==="pending");if(l.length===0){a.info("ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿπŸÑŸÇÿ©");return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ${l.length} ÿ∑ŸÑÿ® ŸÖÿπŸÑŸÇ. ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØÿü`,{title:"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿπŸÑŸÇÿ©",dangerous:!0}))try{await Promise.all(l.map(z=>xe(J(S,"orders",z.id),{status:"cancelled",updatedAt:X()}))),a.success(`ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ${l.length} ÿ∑ŸÑÿ®`),rs()}catch{a.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"‚è≥"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿπŸÑŸÇÿ©"}),e.jsxs("p",{className:"text-xs opacity-75",children:[M.filter(l=>l.status==="pending").length," ÿ∑ŸÑÿ® ŸÖÿπŸÑŸÇ"]})]})]}),e.jsxs("button",{onClick:async()=>{const l=new Date;l.setMonth(l.getMonth()-3);const H=M.filter(Z=>{var ue,we;return(((we=(ue=Z.createdAt)==null?void 0:ue.toDate)==null?void 0:we.call(ue))||new Date)<l&&(Z.status==="delivered"||Z.status==="cancelled")});if(H.length===0){a.info("ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ŸÇÿØŸäŸÖÿ©");return}if(await n.confirm(`ÿ≥Ÿäÿ™ŸÖ ÿ≠ÿ∞ŸÅ ${H.length} ÿ∑ŸÑÿ® ŸÇÿØŸäŸÖ (ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 3 ÿ£ÿ¥Ÿáÿ±). ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØÿü`,{title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÇÿØŸäŸÖÿ©",dangerous:!0}))try{await Promise.all(H.map(Z=>As(J(S,"orders",Z.id)))),a.success(`ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ${H.length} ÿ∑ŸÑÿ® ŸÇÿØŸäŸÖ`),rs()}catch{a.error("ŸÅÿ¥ŸÑ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üóëÔ∏è"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:"ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÇÿØŸäŸÖÿ©"}),e.jsx("p",{className:"text-xs opacity-75",children:"ÿ≠ÿ∞ŸÅ ÿ£ŸÇÿØŸÖ ŸÖŸÜ 3 ÿ£ÿ¥Ÿáÿ±"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"üîó ÿ±Ÿàÿßÿ®ÿ∑ ÿ≥ÿ±Ÿäÿπÿ©"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("a",{href:`https://console.firebase.google.com/project/${_s.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üìä"}),e.jsx("span",{className:"font-semibold",children:"Firestore"})]}),e.jsxs("a",{href:`https://console.firebase.google.com/project/${_s.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üîê"}),e.jsx("span",{className:"font-semibold",children:"Authentication"})]}),e.jsxs("a",{href:`https://console.firebase.google.com/project/${_s.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üìÅ"}),e.jsx("span",{className:"font-semibold",children:"Storage"})]}),e.jsxs("a",{href:`https://console.firebase.google.com/project/${_s.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[e.jsx("span",{className:"text-2xl",children:"üåê"}),e.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"‚ÑπÔ∏è ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Project ID"}),e.jsx("p",{className:"font-mono",children:_s.projectId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),e.jsx("p",{className:"font-mono",children:_s.storageBucket})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ÿ•ÿµÿØÿßÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsx("p",{className:"font-bold",children:T.appVersion||"1.0.0"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Ÿàÿ∂ÿπ ÿßŸÑÿµŸäÿßŸÜÿ©"}),e.jsx("p",{className:`font-bold ${T.maintenanceMode?"text-red-600":"text-green-600"}`,children:T.maintenanceMode?"üî¥ ŸÖŸÅÿπŸëŸÑ":"üü¢ ŸÖÿπÿ∑ŸëŸÑ"})]})]})]})]}),i==="licenses"&&e.jsx(Od,{restaurants:g,onUpdate:ml,toast:a,dialog:n}),i==="packages"&&e.jsx(Md,{packageRequests:vt,onUpdate:ml,toast:a,dialog:n,storage:d}),i==="packageSettings"&&e.jsx(Ud,{toast:a,dialog:n}),i==="storeAnalytics"&&e.jsx(Ld,{restaurants:g,orders:M,toast:a}),i==="activityLog"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:["üìú ÿ≥ÿ¨ŸÑ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™",e.jsxs("span",{className:"text-sm bg-gray-200 px-3 py-1 rounded-full",children:[sl.length," ÿπŸÖŸÑŸäÿ©"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:al,onChange:l=>bn(l.target.value),className:"border rounded-xl px-4 py-2",children:[e.jsx("option",{value:"all",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿπŸÖŸÑŸäÿßÿ™"}),e.jsx("option",{value:"activate",children:"ÿ™ŸÅÿπŸäŸÑ"}),e.jsx("option",{value:"deactivate",children:"ÿ•ŸäŸÇÿßŸÅ"}),e.jsx("option",{value:"create",children:"ÿ•ŸÜÿ¥ÿßÿ°"}),e.jsx("option",{value:"update",children:"ÿ™ÿ≠ÿØŸäÿ´"}),e.jsx("option",{value:"delete",children:"ÿ≠ÿ∞ŸÅ"}),e.jsx("option",{value:"package_activate",children:"ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ©"}),e.jsx("option",{value:"package_cancel",children:"ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ©"}),e.jsx("option",{value:"role_change",children:"ÿ™ÿ∫ŸäŸäÿ± ÿØŸàÿ±"})]}),e.jsxs("button",{onClick:ir,disabled:tl,className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:[tl?"‚è≥":"üîÑ"," ÿ™ÿ≠ÿØŸäÿ´"]})]})]}),tl?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-sky-200 border-t-sky-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ≥ÿ¨ŸÑ..."})]}):sl.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"üì≠ ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿπŸÖŸÑŸäÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ© ÿ®ÿπÿØ"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ¨ŸÖŸäÿπ ÿπŸÖŸÑŸäÿßÿ™ ÿßŸÑÿ™ŸÅÿπŸäŸÑ ŸàÿßŸÑÿ•ŸäŸÇÿßŸÅ ŸàÿßŸÑÿ™ÿπÿØŸäŸÑ ŸáŸÜÿß"})]}):e.jsx("div",{className:"space-y-3",children:sl.filter(l=>al==="all"||l.action===al).map(l=>e.jsx("div",{className:`bg-white rounded-xl shadow p-4 border-r-4 ${l.action==="activate"||l.action==="package_activate"?"border-green-500":l.action==="deactivate"||l.action==="package_cancel"||l.action==="delete"?"border-red-500":l.action==="create"?"border-blue-500":"border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${l.action==="activate"?"bg-green-100 text-green-700":l.action==="deactivate"?"bg-red-100 text-red-700":l.action==="create"?"bg-blue-100 text-blue-700":l.action==="update"?"bg-yellow-100 text-yellow-700":l.action==="delete"?"bg-red-100 text-red-700":l.action==="package_activate"?"bg-amber-100 text-amber-700":l.action==="package_cancel"?"bg-orange-100 text-orange-700":l.action==="role_change"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:[l.action==="activate"&&"‚úÖ ÿ™ŸÅÿπŸäŸÑ",l.action==="deactivate"&&"‚è∏Ô∏è ÿ•ŸäŸÇÿßŸÅ",l.action==="create"&&"‚ûï ÿ•ŸÜÿ¥ÿßÿ°",l.action==="update"&&"‚úèÔ∏è ÿ™ÿ≠ÿØŸäÿ´",l.action==="delete"&&"üóëÔ∏è ÿ≠ÿ∞ŸÅ",l.action==="package_activate"&&"‚ú® ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ©",l.action==="package_cancel"&&"üì¶ ÿ•ŸÑÿ∫ÿßÿ° ÿ®ÿßŸÇÿ©",l.action==="role_change"&&"üîÑ ÿ™ÿ∫ŸäŸäÿ± ÿØŸàÿ±"]}),e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:[l.targetType==="user"&&"üë§ ŸÖÿ≥ÿ™ÿÆÿØŸÖ",l.targetType==="restaurant"&&"üè™ ŸÖÿ∑ÿπŸÖ",l.targetType==="order"&&"üì¶ ÿ∑ŸÑÿ®",l.targetType==="package"&&"üíé ÿ®ÿßŸÇÿ©",l.targetType==="settings"&&"‚öôÔ∏è ÿ•ÿπÿØÿßÿØÿßÿ™"]})]}),e.jsx("p",{className:"font-bold text-gray-800",children:l.targetName||l.targetId}),l.details&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.details}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["ÿ®Ÿàÿßÿ≥ÿ∑ÿ©: ",l.performedByName||"ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"]})]}),e.jsx("div",{className:"text-left text-xs text-gray-400 whitespace-nowrap",children:l.createdAt?new Date(l.createdAt).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]})},l.id))})]}),e.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[e.jsxs("span",{children:["üìß ",s==null?void 0:s.email]}),e.jsxs("span",{children:["üÜî ",s==null?void 0:s.uid.slice(0,12),"..."]}),e.jsxs("span",{children:["üìÖ ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},Od=({restaurants:s,onUpdate:a,toast:n,dialog:d})=>{const[i,y]=t.useState("pending"),[r,D]=t.useState({}),[E,B]=t.useState(null),[P,N]=t.useState(""),[T,j]=t.useState(null),[f,U]=t.useState(new Set),[g,w]=t.useState(""),[M,b]=t.useState([]),[h,k]=t.useState(!1),[L,$]=t.useState(!1);t.useEffect(()=>{i==="sent_messages"&&M.length===0&&v()},[i]);const v=async()=>{k(!0);try{const A=be(se(S,"notifications"),je("type","==","license_reminder"),ss("createdAt","desc"),bs(100)),C=(await pe(A)).docs.map(V=>{var W,ne;return{id:V.id,...V.data(),createdAt:((ne=(W=V.data().createdAt)==null?void 0:W.toDate)==null?void 0:ne.call(W))||null}});b(C)}catch(A){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ:",A),n.warning("ÿ™ÿ≠ÿ™ÿßÿ¨ ŸÑÿ•ŸÜÿ¥ÿßÿ° ŸÅŸáÿ±ÿ≥ ŸÖÿ±ŸÉÿ® ŸÑŸÄ notifications (type + createdAt)")}finally{k(!1)}},R=s.filter(A=>A.commercialLicenseUrl),c=s.filter(A=>!A.commercialLicenseUrl),o=R.filter(A=>i==="all"?!0:i==="missing"||i==="sent_messages"?!1:A.licenseStatus===i||!A.licenseStatus&&i==="pending"),_={all:R.length,pending:R.filter(A=>!A.licenseStatus||A.licenseStatus==="pending").length,approved:R.filter(A=>A.licenseStatus==="approved").length,rejected:R.filter(A=>A.licenseStatus==="rejected").length,missing:c.length,sent_messages:M.length},O=async(A,u)=>{if(!u.trim()){n.warning("Ÿäÿ±ÿ¨Ÿâ ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");return}j(A.id);try{await Te(se(S,"notifications"),{type:"license_reminder",recipientId:A.ownerId,recipientType:"owner",restaurantId:A.id,restaurantName:A.name,title:"‚ö†Ô∏è ÿ™ÿ∞ŸÉŸäÿ±: ÿ±ŸÅÿπ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä",message:u,read:!1,createdAt:X()}),n.success(`ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÄ ${A.name}`),N("")}catch(C){n.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©: "+(C.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{j(null)}},q=async()=>{if(!g.trim()){n.warning("Ÿäÿ±ÿ¨Ÿâ ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");return}const A=f.size>0?c.filter(C=>f.has(C.id)):c;if(A.length===0){n.warning("ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");return}if(await d.confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÄ ${A.length} ŸÖÿ∑ÿπŸÖÿü`,{title:"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ÿ¨ŸÖÿßÿπŸäÿ©"})){$(!0);try{const C=A.map(V=>Te(se(S,"notifications"),{type:"license_reminder",recipientId:V.ownerId,recipientType:"owner",restaurantId:V.id,restaurantName:V.name,title:"‚ö†Ô∏è ÿ™ÿ∞ŸÉŸäÿ±: ÿ±ŸÅÿπ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä",message:g,read:!1,createdAt:X()}));await Promise.all(C),n.success(`ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÄ ${A.length} ŸÖÿ∑ÿπŸÖ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úì`),w(""),U(new Set)}catch(C){n.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ÿπÿ∂ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ: "+(C.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{$(!1)}}},m=()=>{f.size===c.length?U(new Set):U(new Set(c.map(A=>A.id)))},p=A=>{const u=new Set(f);u.has(A)?u.delete(A):u.add(A),U(u)},I=async(A,u)=>{const C=r[A]||"";if(u==="rejected"&&!C.trim()){n.warning("Ÿäÿ±ÿ¨Ÿâ ŸÉÿ™ÿßÿ®ÿ© ÿ≥ÿ®ÿ® ÿßŸÑÿ±ŸÅÿ∂");return}const V=u==="approved"?"ÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ":"ÿ±ŸÅÿ∂";if(await d.confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ${V} ÿ™ÿ±ÿßÿÆŸäÿµ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ∑ÿπŸÖÿü`,{title:`${V} ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ`})){B(A);try{await xe(J(S,"restaurants",A),{licenseStatus:u,licenseNotes:u==="rejected"?C:"",updatedAt:X()}),n.success(u==="approved"?"ÿ™ŸÖÿ™ ÿßŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ ‚úì":"ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ"),D(ne=>({...ne,[A]:""})),a()}catch(ne){n.error("ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´: "+(ne.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{B(null)}}},x=async(A,u)=>{const C="ÿßŸÑÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä";if(await d.confirm(`ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ ${C} ŸÑŸÄ "${A.name}"ÿü
ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑŸÖÿ∑ÿπŸÖ ŸÑÿ•ÿπÿßÿØÿ© ÿ±ŸÅÿπ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ.`,{title:`üóëÔ∏è ÿ≠ÿ∞ŸÅ ${C}`})){B(A.id);try{const W={licenseStatus:null,licenseNotes:"",updatedAt:X(),commercialLicenseUrl:null};await xe(J(S,"restaurants",A.id),W),await Te(se(S,"notifications"),{type:"license_deleted",recipientId:A.ownerId,recipientType:"owner",restaurantId:A.id,restaurantName:A.name,title:`‚ö†Ô∏è ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ${C}`,message:`ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ${C} ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÖÿ∑ÿπŸÖŸÉ. Ÿäÿ±ÿ¨Ÿâ ÿ•ÿπÿßÿØÿ© ÿ±ŸÅÿπ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ ÿßŸÑÿµÿ≠Ÿäÿ≠ ŸÖŸÜ ÿµŸÅÿ≠ÿ© ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ.`,read:!1,createdAt:X()}),n.success(`ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ${C} Ÿàÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑŸÖÿ∑ÿπŸÖ ‚úì`),a()}catch(W){n.error("ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ: "+(W.message||"ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{B(null)}}},Q=A=>{switch(A){case"approved":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[e.jsx(Ie,{className:"w-3 h-3"})," ŸÖŸàÿßŸÅŸÇ"]});case"rejected":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:[e.jsx(Ds,{className:"w-3 h-3"})," ŸÖÿ±ŸÅŸàÿ∂"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[e.jsx(Ye,{className:"w-3 h-3"})," ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"]})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Il,{className:"w-6 h-6 text-sky-500"}),"ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑÿ™ÿ±ÿßÿÆŸäÿµ"]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["pending","approved","rejected","all","missing","sent_messages"].map(A=>e.jsxs("button",{onClick:()=>y(A),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${i===A?A==="missing"?"bg-orange-500 text-white":A==="sent_messages"?"bg-purple-500 text-white":"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[A==="all"&&`ÿßŸÑŸÉŸÑ (${_.all})`,A==="pending"&&`ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© (${_.pending})`,A==="approved"&&`ŸÖŸàÿßŸÅŸÇ (${_.approved})`,A==="rejected"&&`ŸÖÿ±ŸÅŸàÿ∂ (${_.rejected})`,A==="missing"&&`‚ö†Ô∏è ŸÑŸÖ Ÿäÿ±ŸÅÿπ (${_.missing})`,A==="sent_messages"&&"üì® ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ©"]},A))})]}),i==="sent_messages"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-purple-700 flex items-center gap-2",children:"üì® ÿ≥ÿ¨ŸÑ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ© ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ"}),e.jsx("button",{onClick:v,disabled:h,className:"px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-xl font-medium transition disabled:opacity-50",children:h?"‚è≥ ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...":"üîÑ ÿ™ÿ≠ÿØŸäÿ´"})]}),h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-purple-200 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ..."})]}):M.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ±ÿ≥ÿßÿ¶ŸÑ ŸÖÿ±ÿ≥ŸÑÿ© ÿ®ÿπÿØ"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ™Ÿä ÿ™ÿ±ÿ≥ŸÑŸáÿß ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ ÿ≥ÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß"})]}):e.jsx("div",{className:"space-y-3",children:M.map(A=>e.jsx("div",{className:"bg-white rounded-xl shadow p-4 border-r-4 border-purple-500",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold text-gray-800",children:A.restaurantName||"ŸÖÿ∑ÿπŸÖ"}),A.read?e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"‚úì ŸÖŸÇÿ±Ÿàÿ°ÿ©"}):e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full",children:"‚è≥ ŸÑŸÖ ÿ™ŸèŸÇÿ±ÿ£"})]}),e.jsx("p",{className:"text-sm text-gray-600 font-semibold mb-1",children:A.title}),e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 p-3 rounded-lg",children:A.message})]}),e.jsx("div",{className:"text-left text-xs text-gray-400 whitespace-nowrap",children:A.createdAt?new Date(A.createdAt).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]})},A.id))})]}),i==="missing"&&e.jsx("div",{className:"space-y-4",children:c.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Ie,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),e.jsx("p",{className:"text-green-600 font-semibold",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ÿ±ŸÅÿπÿ™ ÿ™ÿ±ÿßÿÆŸäÿµŸáÿß ‚úì"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-2xl p-5",children:[e.jsx("h3",{className:"font-bold text-orange-800 mb-3 flex items-center gap-2",children:"üì¢ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ÿ¨ŸÖÿßÿπŸäÿ©"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.size===c.length,onChange:m,className:"w-5 h-5 rounded border-orange-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("span",{className:"text-sm text-orange-700",children:["ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÉŸÑ (",c.length,")"]})]}),f.size>0&&e.jsxs("span",{className:"text-sm bg-orange-200 text-orange-800 px-2 py-1 rounded-full",children:["ŸÖÿ≠ÿØÿØ: ",f.size]})]}),e.jsx("textarea",{placeholder:"ÿßŸÉÿ™ÿ® ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ™Ÿä ÿ≥ÿ™ÿ±ÿ≥ŸÑ ŸÑŸÑŸÖÿ∑ÿßÿπŸÖ ÿßŸÑŸÖÿ≠ÿØÿØÿ© (ÿ£Ÿà ÿ¨ŸÖŸäÿπŸáÿß ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™ÿ≠ÿØÿØ)...",value:g,onChange:A=>w(A.target.value),className:"w-full border border-orange-200 rounded-xl p-3 text-sm resize-none h-24 focus:ring-2 focus:ring-orange-400 focus:border-transparent"}),e.jsx("button",{onClick:q,disabled:L||!g.trim(),className:"mt-3 w-full flex items-center justify-center gap-2 bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:L?e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ..."]}):e.jsxs(e.Fragment,{children:["üì§ ÿ•ÿ±ÿ≥ÿßŸÑ ŸÑŸÄ ",f.size>0?f.size:c.length," ŸÖÿ∑ÿπŸÖ"]})})]}),e.jsx("div",{className:"grid gap-3",children:c.map(A=>e.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow-sm hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:f.has(A.id),onChange:()=>p(A.id),className:"w-5 h-5 mt-1 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:A.name}),e.jsx("p",{className:"text-sm text-gray-500",children:A.city||"ÿ®ÿØŸàŸÜ ŸÖÿØŸäŸÜÿ©"})]}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-semibold",children:[e.jsx(Ds,{className:"w-3 h-3"}),"ŸÑŸÖ Ÿäÿ±ŸÅÿπ ÿßŸÑÿ™ÿ±ÿÆŸäÿµ"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[A.email&&e.jsxs("span",{children:["üìß ",A.email]}),A.phone&&e.jsxs("span",{children:["üì± ",A.phone]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"ÿ±ÿ≥ÿßŸÑÿ© ÿ≥ÿ±Ÿäÿπÿ©...",value:T===A.id?P:"",onChange:u=>{j(A.id),N(u.target.value)},onFocus:()=>j(A.id),className:"flex-1 border rounded-lg px-3 py-2 text-sm"}),e.jsx("button",{onClick:()=>O(A,P),disabled:T===A.id&&!P.trim(),className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg text-sm font-medium transition disabled:opacity-50",children:"ÿ•ÿ±ÿ≥ÿßŸÑ"})]})]})]})},A.id))})]})}),i!=="missing"&&o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Il,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsxs("p",{children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿ±ÿßÿÆŸäÿµ ",i==="pending"?"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©":i==="approved"?"ŸÖŸàÿßŸÅŸÇ ÿπŸÑŸäŸáÿß":i==="rejected"?"ŸÖÿ±ŸÅŸàÿ∂ÿ©":""]})]}):i!=="missing"&&e.jsx("div",{className:"grid gap-4",children:o.map(A=>e.jsxs("div",{className:"bg-white border rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:A.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[A.city||"ÿ®ÿØŸàŸÜ ŸÖÿØŸäŸÜÿ©"," ‚Ä¢ ",A.email||"ÿ®ÿØŸàŸÜ ÿ®ÿ±ŸäÿØ"]})]}),Q(A.licenseStatus)]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:A.commercialLicenseUrl&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"üìú ÿßŸÑÿ±ÿÆÿµÿ© ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©"}),e.jsx("button",{onClick:()=>x(A),disabled:E===A.id,className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ±ÿÆÿµÿ© ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©",children:e.jsx(Ns,{className:"w-4 h-4"})})]}),e.jsxs("a",{href:A.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[e.jsx(Dl,{className:"w-4 h-4"}),"ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÑŸÅ"]})]})}),A.commercialLicenseUrl&&e.jsxs("button",{onClick:()=>x(A),disabled:E===A.id,className:"w-full flex items-center justify-center gap-2 mb-4 py-2 px-4 border-2 border-dashed border-red-200 text-red-500 hover:bg-red-50 hover:border-red-300 rounded-xl text-sm font-medium transition",children:[e.jsx(Ns,{className:"w-4 h-4"}),"ÿ≠ÿ∞ŸÅ ÿßŸÑÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä Ÿàÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ®"]}),A.licenseStatus==="rejected"&&A.licenseNotes&&e.jsxs("div",{className:"bg-red-50 text-red-700 rounded-xl p-3 mb-4 text-sm",children:[e.jsx("strong",{children:"ÿ≥ÿ®ÿ® ÿßŸÑÿ±ŸÅÿ∂:"})," ",A.licenseNotes]}),A.licenseStatus!=="approved"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{placeholder:"ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ (ŸÖÿ∑ŸÑŸàÿ®ÿ© ŸÑŸÑÿ±ŸÅÿ∂)...",value:r[A.id]||"",onChange:u=>D(C=>({...C,[A.id]:u.target.value})),className:"w-full border rounded-xl p-3 text-sm resize-none h-20"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>I(A.id,"approved"),disabled:E===A.id,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(Ie,{className:"w-5 h-5"}),"ŸÖŸàÿßŸÅŸÇÿ©"]}),e.jsxs("button",{onClick:()=>I(A.id,"rejected"),disabled:E===A.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(Ds,{className:"w-5 h-5"}),"ÿ±ŸÅÿ∂"]})]})]}),A.licenseStatus==="approved"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{placeholder:"ÿ≥ÿ®ÿ® ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©...",value:r[A.id]||"",onChange:u=>D(C=>({...C,[A.id]:u.target.value})),className:"w-full border border-yellow-200 rounded-xl p-3 text-sm resize-none h-20 focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>I(A.id,"rejected"),disabled:E===A.id,className:"flex-1 flex items-center justify-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(Ds,{className:"w-5 h-5"}),"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©"]}),e.jsxs("button",{onClick:()=>x(A),disabled:E===A.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[e.jsx(Ns,{className:"w-5 h-5"}),"ÿ≠ÿ∞ŸÅ Ÿàÿ•ÿπÿßÿØÿ© ÿßŸÑÿ∑ŸÑÿ®"]})]})]})]},A.id))})]})},Ld=({restaurants:s,orders:a,toast:n})=>{var N,T,j,f;const[d,i]=t.useState(null),[y,r]=t.useState({}),[D,E]=t.useState(!1),B=async U=>{var g;E(!0);try{const w=await Ce(J(S,"restaurantStats",U)),M=w.exists()?w.data():null,b=a.filter(o=>o.restaurantId===U),h=b.filter(o=>o.status==="delivered"),k=be(se(S,"menuItems"),je("ownerId","==",U)),L=await pe(k);let $=0;try{const o=be(se(S,"customerRegistrations"),je("restaurantId","==",U));$=(await pe(o)).size}catch{}const v=h.reduce((o,_)=>o+(_.total||0),0),R=new Date().toISOString().split("T")[0],c=((g=M==null?void 0:M.dailyViews)==null?void 0:g[R])||0;r(o=>({...o,[U]:{totalOrders:b.length,deliveredOrders:h.length,totalRevenue:v,menuItemsCount:L.size,profileViews:(M==null?void 0:M.totalProfileViews)||0,menuViews:(M==null?void 0:M.totalMenuViews)||0,itemViews:(M==null?void 0:M.totalItemViews)||0,shareClicks:(M==null?void 0:M.totalShareClicks)||0,whatsappShares:(M==null?void 0:M.whatsappShareCount)||0,registeredCustomers:$,todayViews:c,dailyViews:(M==null?void 0:M.dailyViews)||{}}}))}catch(w){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿ™ÿ¨ÿ±:",w),n.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{E(!1)}},P=U=>{i(U),y[U]||B(U)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"üìà ŸÖÿ±ÿßŸÇÿ®ÿ© ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ¨ÿ±"}),e.jsxs("span",{className:"text-gray-500",children:[s.length," ŸÖÿ™ÿ¨ÿ±"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(U=>{const g=y[U.id];return e.jsxs("div",{onClick:()=>P(U.id),className:`bg-white rounded-2xl shadow p-4 cursor-pointer transition hover:shadow-lg ${d===U.id?"ring-2 ring-sky-500":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[U.logoUrl?e.jsx("img",{src:U.logoUrl,alt:U.name,className:"w-12 h-12 rounded-xl object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center",children:"üè™"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:U.name}),e.jsx("p",{className:"text-xs text-gray-500",children:U.city||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"})]})]}),g&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-blue-700",children:g.profileViews}),e.jsx("p",{className:"text-blue-600",children:"ÿ≤Ÿäÿßÿ±ÿ©"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-green-700",children:g.deliveredOrders}),e.jsx("p",{className:"text-green-600",children:"ÿ∑ŸÑÿ®"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-2",children:[e.jsx("p",{className:"font-bold text-purple-700",children:g.whatsappShares}),e.jsx("p",{className:"text-purple-600",children:"ŸÖÿ¥ÿßÿ±ŸÉÿ©"})]})]})]},U.id)})}),d&&e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:D?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qe,{className:"w-8 h-8 animate-spin mx-auto text-sky-500"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."})]}):y[d]?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(N=s.find(U=>U.id===d))!=null&&N.logoUrl?e.jsx("img",{src:(T=s.find(U=>U.id===d))==null?void 0:T.logoUrl,alt:"",className:"w-16 h-16 rounded-xl object-cover"}):e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-xl flex items-center justify-center text-2xl",children:"üè™"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:(j=s.find(U=>U.id===d))==null?void 0:j.name}),e.jsx("p",{className:"text-gray-500",children:(f=s.find(U=>U.id===d))==null?void 0:f.city})]})]}),e.jsx("button",{onClick:()=>B(d),className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-xl",children:e.jsx(qe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-700",children:y[d].profileViews}),e.jsx("p",{className:"text-sm text-blue-600",children:"ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿµŸÅÿ≠ÿ©"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-green-700",children:y[d].todayViews}),e.jsx("p",{className:"text-sm text-green-600",children:"ÿ≤Ÿäÿßÿ±ÿßÿ™ ÿßŸÑŸäŸàŸÖ"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-700",children:y[d].whatsappShares}),e.jsx("p",{className:"text-sm text-purple-600",children:"ŸÖÿ¥ÿßÿ±ŸÉÿ© Ÿàÿßÿ™ÿ≥ÿßÿ®"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl p-4",children:[e.jsx("p",{className:"text-3xl font-bold text-amber-700",children:y[d].shareClicks}),e.jsx("p",{className:"text-sm text-amber-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿßÿ™"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:y[d].totalOrders}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:y[d].deliveredOrders}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿ∑ŸÑÿ®ÿßÿ™ ŸÖŸÉÿ™ŸÖŸÑÿ©"})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:y[d].totalRevenue.toFixed(0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ (ÿ±.ÿ≥)"})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-2xl font-bold",children:y[d].menuItemsCount}),e.jsx("p",{className:"text-sm text-gray-600",children:"ÿπÿØÿØ ÿßŸÑÿ£ÿµŸÜÿßŸÅ"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-indigo-800 mb-2",children:"üë• ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑÿßÿ™ ÿπÿ®ÿ± ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:y[d].registeredCustomers}),e.jsx("p",{className:"text-xs text-indigo-500",children:"ÿπŸÖŸäŸÑ ÿ≥ÿ¨ŸÑ ÿπÿ®ÿ± ÿßŸÑÿ±ÿßÿ®ÿ∑"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:y[d].itemViews}),e.jsx("p",{className:"text-xs text-purple-500",children:"ŸÖÿ¥ÿßŸáÿØÿßÿ™ ÿßŸÑÿ£ÿµŸÜÿßŸÅ"})]})]})]}),Object.keys(y[d].dailyViews||{}).length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"üìä ÿßŸÑÿ≤Ÿäÿßÿ±ÿßÿ™ ÿßŸÑŸäŸàŸÖŸäÿ© (ÿ¢ÿÆÿ± 7 ÿ£ŸäÿßŸÖ)"}),e.jsx("div",{className:"flex items-end gap-2 h-32",children:(()=>{const U=y[d].dailyViews||{},g=[];for(let M=6;M>=0;M--){const b=new Date;b.setDate(b.getDate()-M);const h=b.toISOString().split("T")[0];g.push({date:h,views:U[h]||0})}const w=Math.max(...g.map(M=>M.views),1);return g.map((M,b)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full bg-sky-500 rounded-t",style:{height:`${M.views/w*100}%`,minHeight:M.views>0?"4px":"0"}}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(M.date).toLocaleDateString("ar-SA",{weekday:"short"})}),e.jsx("span",{className:"text-xs font-bold",children:M.views})]},M.date))})()})]})]}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ŸÖÿ™ÿ¨ÿ± ŸÑÿπÿ±ÿ∂ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™Ÿá"})})]})},Md=({packageRequests:s,onUpdate:a,toast:n,dialog:d,storage:i})=>{const[y,r]=t.useState("all"),[D,E]=t.useState(null),[B,P]=t.useState(null),[N,T]=t.useState(99),[j,f]=t.useState(null),[U,g]=t.useState(null),[w,M]=t.useState(""),[b,h]=t.useState(null),k=async(m,p)=>{if(!p.trim()){n.warning("Ÿäÿ±ÿ¨Ÿâ ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©");return}g(m.id);try{await Te(se(S,"notifications"),{recipientId:m.restaurantId,title:"üì¨ ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸÜ ÿßŸÑÿ•ÿØÿßÿ±ÿ©",message:p.trim(),type:"admin_message",read:!1,data:{requestId:m.id},createdAt:X()}),n.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ÿ®ŸÜÿ¨ÿßÿ≠! üì¨"),h(null),M("")}catch(I){n.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ: ${I.message}`)}finally{g(null)}},L=s.filter(m=>y==="all"?!0:m.status===y),$=s.filter(m=>m.status==="pending").length,v=s.filter(m=>m.status==="bank_sent").length,R=s.filter(m=>m.status==="payment_sent").length,c=s.filter(m=>m.status==="approved").length,o=m=>{switch(m){case"pending":return{label:"ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ",color:"bg-yellow-100 text-yellow-700",icon:"‚è≥"};case"bank_sent":return{label:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ",color:"bg-blue-100 text-blue-700",icon:"üè¶"};case"payment_sent":return{label:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ£ŸÉŸäÿØ",color:"bg-purple-100 text-purple-700",icon:"üí≥"};case"approved":return{label:"ŸÖŸÅÿπŸëŸÑ",color:"bg-green-100 text-green-700",icon:"‚úÖ"};case"rejected":return{label:"ŸÖÿ±ŸÅŸàÿ∂",color:"bg-red-100 text-red-700",icon:"‚ùå"};case"expired":return{label:"ŸÖŸÜÿ™ŸáŸä",color:"bg-gray-100 text-gray-700",icon:"‚è∞"};default:return{label:m,color:"bg-gray-100",icon:"üì¶"}}},_=async m=>{if(!B){n.warning("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿµŸàÿ±ÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä");return}E(m);try{const p=`bankAccounts/${Date.now()}_${B.name}`,I=ks(i,p);await bt(I,B);const x=await Ss(I);await xe(J(S,"packageRequests",m),{status:"bank_sent",bankAccountImageUrl:x,subscriptionAmount:N,bankSentAt:X(),updatedAt:X()});const Q=s.find(A=>A.id===m);Q&&await Te(se(S,"notifications"),{recipientId:Q.restaurantId,title:"üè¶ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä",message:`Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿ®ŸÑÿ∫ ${N} ÿ±ŸäÿßŸÑ ÿ´ŸÖ ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ`,type:"package_bank_sent",read:!1,data:{requestId:m,amount:N},createdAt:X()}),n.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä ÿ®ŸÜÿ¨ÿßÿ≠"),P(null),f(null),a()}catch(p){n.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ: ${p.message}`)}finally{E(null)}},O=async m=>{if(await d.confirm(`ŸáŸÑ ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖÿ®ŸÑÿ∫ ${m.subscriptionAmount} ÿ±ŸäÿßŸÑ Ÿàÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÑŸÄ "${m.restaurantName}"ÿü`,{title:"‚úÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿØŸÅÿπ Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ©",confirmText:"ŸÜÿπŸÖÿå ŸÅÿπŸëŸÑ ÿßŸÑÿ®ÿßŸÇÿ©"})){E(m.id);try{const I=new Date;I.setDate(I.getDate()+(m.subscriptionDuration||30)),await xe(J(S,"packageRequests",m.id),{status:"approved",approvedAt:X(),expiresAt:I,updatedAt:X()}),await xe(J(S,"restaurants",m.restaurantId),{packageType:"premium",packageSubscribedAt:X(),packageExpiresAt:I,packageRequest:null,updatedAt:X()}),await Te(se(S,"notifications"),{recipientId:m.restaurantId,title:"üéâ ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤!",message:`ŸÖÿ®ÿ±ŸàŸÉ! ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ÿ≠ÿ™Ÿâ ${I.toLocaleDateString("ar-SA")}`,type:"package_approved",read:!1,data:{requestId:m.id},createdAt:X()}),n.success("ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ© ÿ®ŸÜÿ¨ÿßÿ≠! üéâ"),a()}catch(I){n.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ™ŸÅÿπŸäŸÑ: ${I.message}`)}finally{E(null)}}},q=async m=>{if(await d.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ±ŸÅÿ∂ ÿ∑ŸÑÿ® "${m.restaurantName}"ÿü`,{title:"‚ùå ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®",confirmText:"ŸÜÿπŸÖÿå ÿßÿ±ŸÅÿ∂",dangerous:!0})){E(m.id);try{await xe(J(S,"packageRequests",m.id),{status:"rejected",rejectedAt:X(),updatedAt:X()}),await Te(se(S,"notifications"),{recipientId:m.restaurantId,title:"‚ùå ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ∑ŸÑÿ® ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ",message:"ŸÑŸÑÿ£ÿ≥ŸÅ ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤. ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß ŸÑŸÖÿπÿ±ŸÅÿ© ÿßŸÑÿ≥ÿ®ÿ®.",type:"package_rejected",read:!1,createdAt:X()}),n.success("ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®"),a()}catch(I){n.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ±ŸÅÿ∂: ${I.message}`)}finally{E(null)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-8 h-8 text-amber-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿßŸÑÿ®ÿßŸÇÿßÿ™"}),e.jsx("p",{className:"text-gray-600",children:"ÿ•ÿØÿßÿ±ÿ© ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ© ŸÑŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÅŸä ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center border border-yellow-200",children:[e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:$}),e.jsx("p",{className:"text-sm text-yellow-700",children:"‚è≥ ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center border border-blue-200",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:v}),e.jsx("p",{className:"text-sm text-blue-700",children:"üè¶ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 text-center border border-purple-200",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:R}),e.jsx("p",{className:"text-sm text-purple-700",children:"üí≥ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ£ŸÉŸäÿØ"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center border border-green-200",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:c}),e.jsx("p",{className:"text-sm text-green-700",children:"‚úÖ ŸÖŸÅÿπŸëŸÑ"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"all",label:"ÿßŸÑŸÉŸÑ"},{id:"pending",label:"‚è≥ ÿ∑ŸÑÿ®ÿßÿ™ ÿ¨ÿØŸäÿØÿ©"},{id:"bank_sent",label:"üè¶ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"},{id:"payment_sent",label:"üí≥ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ™ÿ£ŸÉŸäÿØ"},{id:"approved",label:"‚úÖ ŸÖŸÅÿπŸëŸÑÿ©"},{id:"rejected",label:"‚ùå ŸÖÿ±ŸÅŸàÿ∂ÿ©"}].map(m=>e.jsx("button",{onClick:()=>r(m.id),className:`px-4 py-2 rounded-xl font-semibold transition ${y===m.id?"bg-amber-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:m.label},m.id))}),L.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-2xl",children:[e.jsx(Oe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-500 text-lg",children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ",y!=="all"&&"ÿ®Ÿáÿ∞Ÿá ÿßŸÑÿ≠ÿßŸÑÿ©"]})]}):e.jsx("div",{className:"space-y-4",children:L.map(m=>{var I,x,Q,A,u,C,V,W,ne,re,fe,he;const p=o(m.status);return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center text-2xl",children:"üë®‚Äçüç≥"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:m.restaurantName}),e.jsxs("p",{className:"text-white/80 text-sm",children:[m.ownerName||"ÿµÿßÿ≠ÿ® ÿßŸÑÿ£ÿ≥ÿ±ÿ©"," ‚Ä¢ ",m.ownerPhone||"ÿ®ÿØŸàŸÜ ÿ±ŸÇŸÖ"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[m.ownerPhone&&e.jsx("a",{href:`https://wa.me/${m.ownerPhone.replace(/[^0-9]/g,"").replace(/^0/,"966")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-xl text-sm font-semibold transition",children:"üì± Ÿàÿßÿ™ÿ≥ÿßÿ®"}),e.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${p.color}`,children:[p.icon," ",p.label]})]})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsx("p",{className:"font-semibold",children:((Q=(x=(I=m.requestedAt)==null?void 0:I.toDate)==null?void 0:x.call(I))==null?void 0:Q.toLocaleDateString("ar-SA"))||((C=(u=(A=m.createdAt)==null?void 0:A.toDate)==null?void 0:u.call(A))==null?void 0:C.toLocaleDateString("ar-SA"))||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ÿßŸÑŸÖÿ®ŸÑÿ∫"}),e.jsxs("p",{className:"font-semibold text-green-600",children:[m.subscriptionAmount||99," ÿ±.ÿ≥"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ÿßŸÑŸÖÿØÿ©"}),e.jsxs("p",{className:"font-semibold",children:[m.subscriptionDuration||30," ŸäŸàŸÖ"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"ŸÖÿπÿ±ŸÅ ÿßŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsxs("p",{className:"font-mono text-xs",children:[m.restaurantId.slice(0,12),"..."]})]})]}),e.jsx("div",{className:"border-t pt-4",children:b===m.id?e.jsxs("div",{className:"space-y-3 bg-sky-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-bold text-sky-600",children:"üì¨ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ© ŸÑŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsx("textarea",{value:w,onChange:F=>M(F.target.value),placeholder:"ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ŸáŸÜÿß...",className:"w-full border rounded-lg p-3 resize-none",rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>k(m,w),disabled:U===m.id||!w.trim(),className:"flex-1 bg-sky-500 hover:bg-sky-600 text-white py-2 rounded-xl font-semibold disabled:opacity-50",children:U===m.id?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...":"üì¨ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©"}),e.jsx("button",{onClick:()=>{h(null),M("")},className:"px-4 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}):e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>h(m.id),className:"flex items-center gap-2 bg-sky-100 hover:bg-sky-200 text-sky-700 px-4 py-2 rounded-xl font-semibold transition",children:"üì¨ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ©"}),m.ownerPhone&&e.jsx("a",{href:`https://wa.me/${m.ownerPhone.replace(/[^0-9]/g,"").replace(/^0/,"966")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-xl font-semibold transition",children:"üì± Ÿàÿßÿ™ÿ≥ÿßÿ®"}),!m.ownerPhone&&e.jsx("span",{className:"text-gray-400 text-sm self-center",children:"‚ö†Ô∏è ŸÑÿß ŸäŸàÿ¨ÿØ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ"})]})}),m.status==="pending"&&e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsx("h4",{className:"font-bold text-amber-600",children:"üì§ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"}),j===m.id?e.jsxs("div",{className:"space-y-3 bg-amber-50 p-4 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ÿµŸàÿ±ÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä (IBAN)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:F=>{var te;return P(((te=F.target.files)==null?void 0:te[0])||null)},className:"w-full border rounded-lg p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-1",children:"ŸÖÿ®ŸÑÿ∫ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ (ÿ±ŸäÿßŸÑ)"}),e.jsx("input",{type:"number",value:N,onChange:F=>T(Number(F.target.value)),className:"w-full border rounded-lg p-2",min:1})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(m.id),disabled:D===m.id||!B,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white py-2 rounded-xl font-semibold disabled:opacity-50",children:D===m.id?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...":"üì§ ÿ•ÿ±ÿ≥ÿßŸÑ ŸÑŸÑÿ£ÿ≥ÿ±ÿ©"}),e.jsx("button",{onClick:()=>{f(null),P(null)},className:"px-4 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(m.id),className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white py-3 rounded-xl font-semibold",children:"üè¶ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ®ŸÜŸÉ"}),e.jsx("button",{onClick:()=>q(m),disabled:D===m.id,className:"px-6 bg-red-100 hover:bg-red-200 text-red-700 rounded-xl font-semibold",children:"‚ùå ÿ±ŸÅÿ∂"})]})]}),m.status==="bank_sent"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-blue-700 font-semibold mb-2",children:"üè¶ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä"}),e.jsxs("p",{className:"text-blue-600 text-sm",children:["ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿ®ŸÑÿ∫ ",m.subscriptionAmount," ÿ±ŸäÿßŸÑ ŸÖŸÜ ÿßŸÑÿ£ÿ≥ÿ±ÿ©"]}),m.bankAccountImageUrl&&e.jsxs("a",{href:m.bankAccountImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline mt-2 text-sm",children:[e.jsx(Dl,{className:"w-4 h-4"}),"ÿπÿ±ÿ∂ ÿµŸàÿ±ÿ© ÿßŸÑÿ®ŸÜŸÉ ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ©"]})]})}),m.status==="payment_sent"&&e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-purple-700 font-semibold mb-2",children:"üí≥ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ÿ£ÿ±ÿ≥ŸÑÿ™ ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"}),m.paymentProofImageUrl&&e.jsxs("a",{href:m.paymentProofImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg text-purple-600 hover:bg-purple-100 transition",children:[e.jsx(Dl,{className:"w-5 h-5"}),"ÿπÿ±ÿ∂ ÿµŸàÿ±ÿ© ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>O(m),disabled:D===m.id,className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-bold disabled:opacity-50",children:D===m.id?"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ŸÅÿπŸäŸÑ...":"‚úÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿØŸÅÿπ Ÿàÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ®ÿßŸÇÿ©"}),e.jsx("button",{onClick:()=>q(m),disabled:D===m.id,className:"px-6 bg-red-100 hover:bg-red-200 text-red-700 rounded-xl font-semibold",children:"‚ùå ÿ±ŸÅÿ∂"})]})]}),m.status==="approved"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl flex items-center gap-3",children:[e.jsx(Ie,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 font-semibold",children:"‚úÖ ÿßŸÑÿ®ÿßŸÇÿ© ŸÖŸÅÿπŸëŸÑÿ©"}),e.jsxs("p",{className:"text-green-600 text-sm",children:["ÿ™ŸÜÿ™ŸáŸä ŸÅŸä: ",((ne=(W=(V=m.expiresAt)==null?void 0:V.toDate)==null?void 0:W.call(V))==null?void 0:ne.toLocaleDateString("ar-SA"))||"-"]})]})]})}),m.status==="rejected"&&e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl",children:[e.jsx("p",{className:"text-red-700 font-semibold",children:"‚ùå ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑÿ∑ŸÑÿ®"}),e.jsxs("p",{className:"text-red-600 text-sm",children:["ÿ®ÿ™ÿßÿ±ŸäÿÆ: ",((he=(fe=(re=m.rejectedAt)==null?void 0:re.toDate)==null?void 0:fe.call(re))==null?void 0:he.toLocaleDateString("ar-SA"))||"-"]})]})})]})]},m.id)})})]})},Ra={premium:{displayName:"ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤",description:"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ© Ÿàÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ©",isEnabled:!0,originalPrice:99,currentPrice:99,durationDays:30,discount:{isActive:!1,type:"percentage",value:0}},free:{displayName:"ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©",description:"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÖÿ¨ÿßŸÜÿßŸã",isEnabled:!0,originalPrice:0,currentPrice:0,durationDays:0,discount:{isActive:!1,type:"percentage",value:0}},defaultPackage:"free"},Ud=({toast:s,dialog:a})=>{var w,M,b,h,k,L,$,v,R,c,o,_,O,q,m,p,I;const[n,d]=t.useState(!0),[i,y]=t.useState(!1),[r,D]=t.useState(Ra),[E,B]=t.useState(null);t.useEffect(()=>{P()},[]);const P=async()=>{d(!0);try{const x=await Ce(J(S,"settings","packages"));if(x.exists()){const Q=x.data();D({...Ra,...Q,premium:{...Ra.premium,...Q.premium},free:{...Ra.free,...Q.free}})}}catch(x){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™:",x),s.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™")}finally{d(!1)}},N=async()=>{var x;y(!0);try{const Q={...r};if((x=Q.premium.discount)!=null&&x.isActive&&Q.premium.discount.value>0){const A=Q.premium.discount;A.type==="percentage"?Q.premium.currentPrice=Q.premium.originalPrice-Q.premium.originalPrice*A.value/100:Q.premium.currentPrice=Math.max(0,Q.premium.originalPrice-A.value)}else Q.premium.currentPrice=Q.premium.originalPrice;await Qe(J(S,"settings","packages"),{...Q,updatedAt:X()}),D(Q),s.success("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠ ‚úÖ")}catch(Q){console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™:",Q),s.error(`ŸÅÿ¥ŸÑ ÿßŸÑÿ≠ŸÅÿ∏: ${Q.message}`)}finally{y(!1)}},T=(x,Q,A)=>{D(u=>({...u,[x]:{...u[x],[Q]:A}}))},j=(x,Q,A)=>{D(u=>({...u,[x]:{...u[x],discount:{...u[x].discount,[Q]:A}}}))},f=async()=>{await a.confirm("ÿ≥Ÿäÿ™ŸÖ ÿ¨ÿπŸÑ ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ ŸÖÿ¨ÿßŸÜŸäÿ© (0 ÿ±ŸäÿßŸÑ). ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØÿü",{title:"üéÅ ÿ¨ÿπŸÑ ÿßŸÑÿ®ÿßŸÇÿ© ŸÖÿ¨ÿßŸÜŸäÿ©"})&&(D(Q=>({...Q,premium:{...Q.premium,originalPrice:0,currentPrice:0,discount:{isActive:!1,type:"percentage",value:0}}})),s.success("ÿ™ŸÖ ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ≥ÿπÿ± ÿπŸÑŸâ 0 ÿ±ŸäÿßŸÑ. ÿßÿ∂ÿ∫ÿ∑ ÿ≠ŸÅÿ∏ ŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™."))},U=x=>{var C,V,W,ne;if(!(x!=null&&x.isActive))return!1;const Q=new Date,A=((V=(C=x.startDate)==null?void 0:C.toDate)==null?void 0:V.call(C))||(x.startDate?new Date(x.startDate):null),u=((ne=(W=x.endDate)==null?void 0:W.toDate)==null?void 0:ne.call(W))||(x.endDate?new Date(x.endDate):null);return!(A&&Q<A||u&&Q>u)},g=x=>{if(!U(x.discount))return x.originalPrice;const Q=x.discount;return Q.type==="percentage"?x.originalPrice-x.originalPrice*Q.value/100:Math.max(0,x.originalPrice-Q.value)};return n?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl flex items-center justify-center",children:e.jsx(ha,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"ÿ•ÿπÿØÿßÿØÿßÿ™ ÿ£ÿ≥ÿπÿßÿ± ÿßŸÑÿ®ÿßŸÇÿßÿ™"}),e.jsx("p",{className:"text-gray-600",children:"ÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿ£ÿ≥ÿπÿßÿ± ÿßŸÑÿ®ÿßŸÇÿßÿ™ ŸàÿßŸÑÿÆÿµŸàŸÖÿßÿ™ ŸÖŸÜ ŸáŸÜÿß"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:f,className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-5 py-3 rounded-xl font-bold shadow-lg transition flex items-center gap-2",children:"üéÅ ÿ¨ÿπŸÑŸáÿß ŸÖÿ¨ÿßŸÜŸäÿ©"}),e.jsx("button",{onClick:N,disabled:i,className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg transition disabled:opacity-50 flex items-center gap-2",children:i?"‚è≥ ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ≠ŸÅÿ∏...":"üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500 p-5 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"üëë ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤ (Premium)"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿØŸÅŸàÿπÿ© ŸÖÿπ ŸÖÿ≤ÿßŸäÿß ÿ≠ÿµÿ±Ÿäÿ©"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-xl cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.premium.isEnabled,onChange:x=>T("premium","isEnabled",x.target.checked),className:"w-5 h-5 rounded"}),e.jsx("span",{className:"font-semibold",children:r.premium.isEnabled?"‚úÖ ŸÖŸÅÿπŸëŸÑÿ©":"‚ùå ŸÖŸàŸÇŸàŸÅÿ©"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üí∞ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿµŸÑŸä (ÿ±ŸäÿßŸÑ)"}),e.jsx("input",{type:"number",min:"0",step:"1",value:r.premium.originalPrice,onChange:x=>T("premium","originalPrice",Number(x.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-xl font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üìÖ ŸÖÿØÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ (ŸäŸàŸÖ)"}),e.jsx("input",{type:"number",min:"1",value:r.premium.durationDays,onChange:x=>T("premium","durationDays",Number(x.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-xl font-bold text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üíµ ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ≠ÿßŸÑŸä"}),e.jsxs("div",{className:"w-full px-4 py-3 bg-green-50 border-2 border-green-300 rounded-xl text-xl font-bold text-center text-green-700",children:[g(r.premium).toFixed(0)," ÿ±ŸäÿßŸÑ",U(r.premium.discount)&&e.jsx("span",{className:"text-sm text-green-600 block",children:"ÿ®ÿπÿØ ÿßŸÑÿÆÿµŸÖ"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üìù ŸàÿµŸÅ ÿßŸÑÿ®ÿßŸÇÿ©"}),e.jsx("textarea",{value:r.premium.description||"",onChange:x=>T("premium","description",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200",rows:2,placeholder:"ŸàÿµŸÅ ŸÇÿµŸäÿ± ŸÑŸÑÿ®ÿßŸÇÿ©..."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üè∑Ô∏è"}),e.jsx("h4",{className:"text-lg font-bold text-red-700",children:"ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿÆÿµŸÖ"})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-xl cursor-pointer shadow",children:[e.jsx("input",{type:"checkbox",checked:((w=r.premium.discount)==null?void 0:w.isActive)||!1,onChange:x=>j("premium","isActive",x.target.checked),className:"w-5 h-5 rounded accent-red-500"}),e.jsx("span",{className:"font-semibold text-red-700",children:(M=r.premium.discount)!=null&&M.isActive?"‚úÖ ÿßŸÑÿÆÿµŸÖ ŸÖŸÅÿπŸëŸÑ":"‚è∏Ô∏è ÿßŸÑÿÆÿµŸÖ ŸÖŸàŸÇŸàŸÅ"})]})]}),((b=r.premium.discount)==null?void 0:b.isActive)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ŸÜŸàÿπ ÿßŸÑÿÆÿµŸÖ"}),e.jsxs("select",{value:((h=r.premium.discount)==null?void 0:h.type)||"percentage",onChange:x=>j("premium","type",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500",children:[e.jsx("option",{value:"percentage",children:"ŸÜÿ≥ÿ®ÿ© ŸÖÿ¶ŸàŸäÿ© (%)"}),e.jsx("option",{value:"fixed",children:"ŸÖÿ®ŸÑÿ∫ ÿ´ÿßÿ®ÿ™ (ÿ±ŸäÿßŸÑ)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["ŸÇŸäŸÖÿ© ÿßŸÑÿÆÿµŸÖ ",((k=r.premium.discount)==null?void 0:k.type)==="percentage"?"(%)":"(ÿ±ŸäÿßŸÑ)"]}),e.jsx("input",{type:"number",min:"0",max:((L=r.premium.discount)==null?void 0:L.type)==="percentage"?100:r.premium.originalPrice,value:(($=r.premium.discount)==null?void 0:$.value)||0,onChange:x=>j("premium","value",Number(x.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 text-lg font-bold text-center"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üìÖ ÿ™ÿßÿ±ŸäÿÆ ÿ®ÿØÿßŸäÿ© ÿßŸÑÿÆÿµŸÖ"}),e.jsx("input",{type:"date",value:(v=r.premium.discount)!=null&&v.startDate?typeof r.premium.discount.startDate=="string"?r.premium.discount.startDate:((o=(c=(R=r.premium.discount.startDate).toDate)==null?void 0:c.call(R))==null?void 0:o.toISOString().split("T")[0])||"":"",onChange:x=>j("premium","startDate",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üìÖ ÿ™ÿßÿ±ŸäÿÆ ŸÜŸáÿßŸäÿ© ÿßŸÑÿÆÿµŸÖ"}),e.jsx("input",{type:"date",value:(_=r.premium.discount)!=null&&_.endDate?typeof r.premium.discount.endDate=="string"?r.premium.discount.endDate:((m=(q=(O=r.premium.discount.endDate).toDate)==null?void 0:q.call(O))==null?void 0:m.toISOString().split("T")[0])||"":"",onChange:x=>j("premium","endDate",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"üè∑Ô∏è Ÿàÿ≥ŸÖ/ÿ≥ÿ®ÿ® ÿßŸÑÿÆÿµŸÖ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"text",value:((p=r.premium.discount)==null?void 0:p.label)||"",onChange:x=>j("premium","label",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500",placeholder:"ŸÖÿ´ÿßŸÑ: ÿπÿ±ÿ∂ ÿßŸÑÿ•ÿ∑ŸÑÿßŸÇÿå ÿÆÿµŸÖ ÿ±ŸÖÿ∂ÿßŸÜ..."})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-dashed border-red-300",children:[e.jsxs("p",{className:"text-center text-lg",children:[e.jsxs("span",{className:"text-gray-500 line-through",children:[r.premium.originalPrice," ÿ±ŸäÿßŸÑ"]}),e.jsx("span",{className:"mx-3",children:"‚Üí"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[g(r.premium).toFixed(0)," ÿ±ŸäÿßŸÑ"]}),((I=r.premium.discount)==null?void 0:I.label)&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full mr-2",children:r.premium.discount.label})]}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:U(r.premium.discount)?"‚úÖ ÿßŸÑÿÆÿµŸÖ ŸÜÿ¥ÿ∑ ÿ≠ÿßŸÑŸäÿßŸã":"‚è∏Ô∏è ÿßŸÑÿÆÿµŸÖ ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑ (ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™Ÿàÿßÿ±ŸäÿÆ)"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 p-5 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"üì¶ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ© (Free)"}),e.jsx("p",{className:"text-white/80 text-sm",children:"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ÿ®ÿØŸàŸÜ ÿ±ÿ≥ŸàŸÖ"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-xl cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.free.isEnabled,onChange:x=>T("free","isEnabled",x.target.checked),className:"w-5 h-5 rounded"}),e.jsx("span",{className:"font-semibold",children:r.free.isEnabled?"‚úÖ ŸÖŸÅÿπŸëŸÑÿ©":"‚ùå ŸÖŸàŸÇŸàŸÅÿ©"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-green-700 font-bold text-lg",children:"‚úÖ Ÿáÿ∞Ÿá ÿßŸÑÿ®ÿßŸÇÿ© ŸÖÿ¨ÿßŸÜŸäÿ© ÿØÿßÿ¶ŸÖÿßŸã"}),e.jsx("p",{className:"text-green-600 text-sm",children:"ŸÑÿß Ÿäÿ™ÿ∑ŸÑÿ® ÿØŸÅÿπ ÿ£Ÿä ÿ±ÿ≥ŸàŸÖ"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 border-2 border-sky-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-sky-800 mb-4 flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5"}),"ŸÖŸÑÿÆÿµ ÿßŸÑÿ£ÿ≥ÿπÿßÿ± ÿßŸÑÿ≠ÿßŸÑŸäÿ©"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"üëë ÿ®ÿßŸÇÿ© ÿßŸÑÿ™ŸÖŸäÿ≤"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${r.premium.isEnabled?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r.premium.isEnabled?"ŸÖŸÅÿπŸëŸÑÿ©":"ŸÖŸàŸÇŸàŸÅÿ©"})]}),e.jsxs("p",{className:"text-3xl font-bold text-amber-600 mt-2",children:[g(r.premium).toFixed(0)," ÿ±ŸäÿßŸÑ",U(r.premium.discount)&&e.jsx("span",{className:"text-sm text-red-500 mr-2 bg-red-50 px-2 py-1 rounded-full",children:"ÿÆÿµŸÖ!"})]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["ŸÑŸÖÿØÿ© ",r.premium.durationDays," ŸäŸàŸÖ"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"üì¶ ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${r.free.isEnabled?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r.free.isEnabled?"ŸÖŸÅÿπŸëŸÑÿ©":"ŸÖŸàŸÇŸàŸÅÿ©"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:"ŸÖÿ¨ÿßŸÜÿßŸã"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"ÿ®ÿØŸàŸÜ ÿ±ÿ≥ŸàŸÖ"})]})]})]})]})},Lt=({icon:s,value:a,label:n,color:d})=>{const i={sky:"bg-sky-500/20 text-sky-300",emerald:"bg-emerald-500/20 text-emerald-300",purple:"bg-purple-500/20 text-purple-300",orange:"bg-orange-500/20 text-orange-300",amber:"bg-amber-500/20 text-amber-300",green:"bg-green-500/20 text-green-300"};return e.jsxs("div",{className:`${i[d]} rounded-xl p-3 backdrop-blur-sm`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s,e.jsx("span",{className:"text-xl font-bold text-white",children:a})]}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:n})]})},Pa=({title:s,value:a,change:n,subtitle:d,icon:i,color:y})=>{const r={emerald:"from-emerald-500 to-teal-600",sky:"from-sky-500 to-blue-600",amber:"from-amber-500 to-orange-600",purple:"from-purple-500 to-indigo-600",red:"from-red-500 to-rose-600"};return e.jsxs("div",{className:`relative overflow-hidden bg-gradient-to-br ${r[y]} rounded-2xl p-5 text-white shadow-lg`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:i}),n!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${n>=0?"text-green-200":"text-red-200"}`,children:[n>=0?e.jsx(Ml,{className:"w-4 h-4"}):e.jsx(Yr,{className:"w-4 h-4"}),Math.abs(n),"%"]})]}),e.jsx("p",{className:"text-2xl font-bold",children:a}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:d||s})]})]})},Ta=({icon:s,value:a,label:n,bgColor:d})=>e.jsxs("div",{className:`${d} rounded-xl p-4 flex items-center gap-3`,children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center shadow-sm",children:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a}),e.jsx("p",{className:"text-sm text-slate-500",children:n})]})]}),Bd="afrtalbyt2026@gmail.com",Vd=()=>{const s=fs(),[a,n]=t.useState(""),[d,i]=t.useState(""),[y,r]=t.useState(!1),[D,E]=t.useState(""),[B,P]=t.useState(!1),N=async T=>{if(T.preventDefault(),E(""),a.trim().toLowerCase()!==Bd){E("‚ùå Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸäÿØ ÿ∫Ÿäÿ± ŸÖÿ≥ŸÖŸàÿ≠ ŸÑŸá ÿ®ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖÿ∑Ÿàÿ±");return}if(d.length<6){E("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ");return}r(!0);try{const f=(await Dt(ps,a.trim(),d)).user.uid;await Qe(J(S,"users",f),{email:a.trim(),name:"ÿßŸÑŸÖÿ∑Ÿàÿ± ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä",role:"developer",createdAt:X()}),P(!0),setTimeout(()=>{s("/developer")},2e3)}catch(j){console.error("Setup error:",j),j.code==="auth/email-already-in-use"?E("Ÿáÿ∞ÿß ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖŸàÿ¨ŸàÿØ ŸÖÿ≥ÿ®ŸÇÿßŸãÿå ÿ¨ÿ±ÿ® ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"):j.code==="auth/invalid-email"?E("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠"):j.code==="auth/weak-password"?E("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∂ÿπŸäŸÅÿ© ÿ¨ÿØÿßŸã"):E("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: "+(j.message||"ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ"))}finally{r(!1)}};return B?e.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:e.jsxs("div",{className:"text-center bg-gradient-to-br from-green-500 to-emerald-600 text-white p-10 rounded-3xl shadow-2xl",children:[e.jsx(Ie,{className:"w-20 h-20 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"üéâ ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠!"}),e.jsx("p",{children:"ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸàŸäŸÑŸÉ ŸÑŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±..."})]})}):e.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 p-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(us,{className:"w-10 h-10 text-white"})}),e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2",children:[e.jsx(is,{className:"w-6 h-6"}),"ÿ•ÿπÿØÿßÿØ ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿ∑Ÿàÿ±",e.jsx(is,{className:"w-6 h-6"})]}),e.jsx("p",{className:"text-white/80 text-sm mt-2",children:"üîê ŸÑŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖÿ≠ÿØŸàÿØ ŸÅŸÇÿ∑"})]}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-5",children:[D&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 rounded-xl p-3 text-sm text-center",children:D}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[e.jsx(Rt,{className:"w-4 h-4"}),"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä"]}),e.jsx("input",{type:"email",value:a,onChange:T=>n(T.target.value),placeholder:"ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑŸÖÿÆÿµÿµ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[e.jsx($i,{className:"w-4 h-4"}),"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±"]}),e.jsx("input",{type:"password",value:d,onChange:T=>i(T.target.value),placeholder:"ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full py-4 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white font-bold rounded-xl hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-5 h-5"}),"ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖÿ∑Ÿàÿ±"]})}),e.jsx("p",{className:"text-gray-500 text-xs text-center",children:"‚ö†Ô∏è Ÿáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ© ŸÖÿ≠ÿØŸàÿØÿ© ŸÑŸÑÿ®ÿ±ŸäÿØ ÿßŸÑŸÖÿ≠ÿØÿØ ŸÅŸÇÿ∑"})]})]})})})};async function qd(s,a,n,d,i){var b,h,k,L;const r=J(S,a==="restaurant"?"restaurants":"couriers",s),D=await Ce(r);if(!D.exists())return{success:!1,newPoints:0,isSuspended:!1,isWarning:!1,message:"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ"};const E=D.data(),B=((b=E.points)==null?void 0:b.currentPoints)??hs.STARTING_POINTS,P=((h=E.points)==null?void 0:h.totalDeductions)??0,N=((k=E.points)==null?void 0:k.warningCount)??0,T=((L=E.points)==null?void 0:L.pointsHistory)??[],j=Math.max(0,B-n),f={id:`deduct_${Date.now()}`,type:"deduction",amount:-n,reason:d,orderId:i==null?void 0:i.orderId,ticketId:i==null?void 0:i.ticketId,adminId:i==null?void 0:i.adminId,createdAt:new Date},U=j<hs.SUSPENSION_THRESHOLD,g=!U&&j<hs.WARNING_THRESHOLD,w={"points.currentPoints":j,"points.totalDeductions":P+n,"points.pointsHistory":[...T,f],updatedAt:X()};U&&(w["points.isSuspended"]=!0,w["points.suspendedAt"]=X(),w["points.suspendedReason"]=`ÿ•ŸäŸÇÿßŸÅ ÿ™ŸÑŸÇÿßÿ¶Ÿä - ÿßŸÑŸÜŸÇÿßÿ∑ ÿ£ŸÇŸÑ ŸÖŸÜ ${hs.SUSPENSION_THRESHOLD}`,w.isOpen=!1,w.isAvailable=!1),g&&(w["points.warningCount"]=N+1,w["points.lastWarningAt"]=X()),await xe(r,w);let M=`ÿ™ŸÖ ÿÆÿµŸÖ ${n} ŸÜŸÇÿ∑ÿ©. ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑÿ≠ÿßŸÑŸäÿ©: ${j}`;return U?M=`‚õî ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã! ÿßŸÑŸÜŸÇÿßÿ∑ ŸàÿµŸÑÿ™ ÿ•ŸÑŸâ ${j}`:g&&(M=`‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá! ÿßŸÑŸÜŸÇÿßÿ∑ ŸÖŸÜÿÆŸÅÿ∂ÿ©: ${j}. ŸÇÿØ Ÿäÿ™ŸÖ ÿßŸÑÿ•ŸäŸÇÿßŸÅ ÿπŸÜÿØ ${hs.SUSPENSION_THRESHOLD}`),{success:!0,newPoints:j,isSuspended:U,isWarning:g,message:M}}const zd={waiting:{label:"ÿ¨ÿØŸäÿØÿ©",color:"amber",icon:Ye},active:{label:"ŸÜÿ¥ÿ∑ÿ©",color:"green",icon:Qs},resolved:{label:"ŸÖÿ≠ŸÑŸàŸÑÿ©",color:"blue",icon:Ie},closed:{label:"ŸÖÿ∫ŸÑŸÇÿ©",color:"gray",icon:lt}},Hd=()=>{const{user:s}=Ee(),a=ze(),n=t.useRef(null),d=t.useRef(null),[i,y]=t.useState([]),[r,D]=t.useState(null),[E,B]=t.useState([]),[P,N]=t.useState(!0),[T,j]=t.useState(!1),[f,U]=t.useState(""),[g,w]=t.useState("all"),[M,b]=t.useState("");t.useEffect(()=>{const C=be(se(S,"supportChats"),ss("lastMessageAt","desc")),V=xs(C,W=>{const ne=W.docs.map(re=>({id:re.id,...re.data()}));y(ne),N(!1)});return()=>V()},[]),t.useEffect(()=>{if(!(r!=null&&r.id))return;const C=be(se(S,"supportChats",r.id,"messages"),ss("createdAt","asc")),V=xs(C,W=>{const ne=W.docs.map(re=>({id:re.id,...re.data()}));B(ne),r.unreadBySupport&&r.unreadBySupport>0&&xe(J(S,"supportChats",r.id),{unreadBySupport:0})});return setTimeout(()=>{var W;return(W=d.current)==null?void 0:W.focus()},100),()=>V()},[r==null?void 0:r.id]),t.useEffect(()=>{var C;(C=n.current)==null||C.scrollIntoView({behavior:"smooth"})},[E]);const h=async()=>{if(!(!f.trim()||!(r!=null&&r.id)||T)){j(!0);try{await Te(se(S,"supportChats",r.id,"messages"),{chatId:r.id,senderId:s==null?void 0:s.uid,senderName:"ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ",senderRole:"support",message:f.trim(),createdAt:X()}),await xe(J(S,"supportChats",r.id),{status:"active",lastMessage:f.trim(),lastMessageAt:X(),updatedAt:X(),unreadByUser:Ze(1)}),U(""),a.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿØ")}catch{a.error("ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿØ")}finally{j(!1)}}},k=async C=>{r!=null&&r.id&&(await xe(J(S,"supportChats",r.id),{status:C,updatedAt:X()}),D({...r,status:C}),a.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿßŸÑÿ©"))},[L,$]=t.useState(!1),[v,R]=t.useState("restaurant"),[c,o]=t.useState(""),[_,O]=t.useState(""),[q,m]=t.useState(10),[p,I]=t.useState(""),[x,Q]=t.useState(!1),A=async()=>{if(!c||!p||q<=0){a.error("Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™");return}Q(!0);try{const C=await qd(c,v,q,p,{ticketId:r==null?void 0:r.id,adminId:s==null?void 0:s.uid});C.success?(r!=null&&r.id&&await Te(se(S,"supportChats",r.id,"messages"),{chatId:r.id,senderId:"system",senderName:"ÿßŸÑŸÜÿ∏ÿßŸÖ",senderRole:"bot",message:`‚úÖ ÿ™ŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ¥ŸÉŸàŸâ ŸàÿÆÿµŸÖ ${q} ŸÜŸÇÿ∑ÿ© ŸÖŸÜ ${v==="restaurant"?"ÿßŸÑÿ£ÿ≥ÿ±ÿ©":"ÿßŸÑŸÖŸÜÿØŸàÿ®"}.

${C.isSuspended?"‚õî ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã!":C.isWarning?"‚ö†Ô∏è ÿ™ŸÜÿ®ŸäŸá: ÿßŸÑŸÜŸÇÿßÿ∑ ŸÖŸÜÿÆŸÅÿ∂ÿ©!":""}`,createdAt:X()}),a.success(C.message),C.isSuspended&&a.error("‚õî ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã!"),$(!1),I(""),m(10)):a.error(C.message)}catch{a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿÆÿµŸÖ ÿßŸÑŸÜŸÇÿßÿ∑")}finally{Q(!1)}},u=i.filter(C=>{var V;return!(g==="waiting"&&C.status!=="waiting"||g==="active"&&C.status!=="active"||M&&!C.userName.includes(M)&&!((V=C.subject)!=null&&V.includes(M)))});return P?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(as,{className:"w-8 h-8 animate-spin text-sky-500"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[e.jsx(Bt,{className:"w-8 h-8 text-sky-500"}),"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿØÿπŸÖ ÿßŸÑŸÅŸÜŸä"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",value:M,onChange:C=>b(C.target.value),placeholder:"ÿ®ÿ≠ÿ´...",className:"w-full pr-10 pl-4 py-2 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-300"})]}),e.jsx("div",{className:"flex gap-2",children:["all","waiting","active"].map(C=>e.jsxs("button",{onClick:()=>w(C),className:`px-3 py-1 rounded-lg text-sm font-medium transition ${g===C?"bg-sky-100 text-sky-700":"text-gray-500 hover:bg-gray-100"}`,children:[C==="all"?"ÿßŸÑŸÉŸÑ":C==="waiting"?"ÿ¨ÿØŸäÿØÿ©":"ŸÜÿ¥ÿ∑ÿ©",C==="waiting"&&e.jsx("span",{className:"mr-1 px-1.5 py-0.5 bg-amber-500 text-white rounded-full text-xs",children:i.filter(V=>V.status==="waiting").length})]},C))})]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto divide-y divide-gray-100",children:u.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(Qs,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ≠ÿßÿØÿ´ÿßÿ™"})]}):u.map(C=>{var ne,re;const V=zd[C.status],W=V.icon;return e.jsxs("button",{onClick:()=>D(C),className:`w-full p-4 text-right hover:bg-gray-50 transition ${(r==null?void 0:r.id)===C.id?"bg-sky-50":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-bold text-gray-800",children:C.userName})]}),C.unreadBySupport?e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:C.unreadBySupport}):null]}),e.jsx("p",{className:"text-sm text-gray-500 truncate mb-2",children:C.lastMessage||C.subject}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full
                        ${V.color==="amber"?"bg-amber-100 text-amber-700":""}
                        ${V.color==="green"?"bg-green-100 text-green-700":""}
                        ${V.color==="blue"?"bg-blue-100 text-blue-700":""}
                        ${V.color==="gray"?"bg-gray-100 text-gray-700":""}
                      `,children:[e.jsx(W,{className:"w-3 h-3"}),V.label]}),e.jsx("span",{className:"text-gray-400",children:((re=(ne=C.lastMessageAt)==null?void 0:ne.toDate)==null?void 0:re.call(ne).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}))||""})]})]},C.id)})})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col",style:{minHeight:"600px"},children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ms,{className:"w-5 h-5"}),r.userName]}),e.jsx("p",{className:"text-sm text-gray-500",children:r.subject})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>k("resolved"),className:"px-3 py-1.5 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition",children:"‚úÖ ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ"}),e.jsx("button",{onClick:()=>k("closed"),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition",children:"ÿ•ÿ∫ŸÑÿßŸÇ"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>{R("restaurant"),O("ÿßŸÑÿ£ÿ≥ÿ±ÿ©"),$(!0)},className:"flex items-center gap-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition",children:[e.jsx(Le,{className:"w-4 h-4"}),"ÿÆÿµŸÖ ŸÖŸÜ ÿßŸÑÿ£ÿ≥ÿ±ÿ© ‚õî"]}),e.jsxs("button",{onClick:()=>{R("courier"),O("ÿßŸÑŸÖŸÜÿØŸàÿ®"),$(!0)},className:"flex items-center gap-2 px-3 py-2 bg-orange-100 text-orange-700 rounded-lg text-sm font-medium hover:bg-orange-200 transition",children:[e.jsx(Be,{className:"w-4 h-4"}),"ÿÆÿµŸÖ ŸÖŸÜ ÿßŸÑŸÖŸÜÿØŸàÿ® ‚õî"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[E.map(C=>{var V,W;return e.jsx("div",{className:`flex ${C.senderRole==="support"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:"max-w-[80%]",children:[C.senderRole!=="support"&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${C.senderRole==="bot"?"bg-purple-100":"bg-gray-200"}`,children:C.senderRole==="bot"?e.jsx(Cl,{className:"w-4 h-4 text-purple-600"}):e.jsx(ms,{className:"w-4 h-4 text-gray-600"})}),e.jsx("span",{className:"text-xs text-gray-500",children:C.senderName})]}),e.jsx("div",{className:`rounded-2xl px-4 py-3 ${C.senderRole==="support"?"bg-sky-500 text-white rounded-bl-md":C.senderRole==="bot"?"bg-purple-50 text-gray-800 border border-purple-100 rounded-br-md":"bg-white text-gray-800 border border-gray-200 rounded-br-md"}`,children:e.jsx("p",{className:"whitespace-pre-wrap text-sm",children:C.message})}),e.jsx("p",{className:`text-xs text-gray-400 mt-1 ${C.senderRole==="support"?"text-left":"text-right"}`,children:((W=(V=C.createdAt)==null?void 0:V.toDate)==null?void 0:W.call(V).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}))||""})]})},C.id)}),e.jsx("div",{ref:n})]}),e.jsxs("div",{className:"p-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{ref:d,type:"text",value:f,onChange:C=>U(C.target.value),onKeyPress:C=>C.key==="Enter"&&h(),placeholder:"ÿßŸÉÿ™ÿ® ÿ±ÿØŸÉ ŸáŸÜÿß...",className:"flex-1 px-4 py-3 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-300",disabled:T}),e.jsx("button",{onClick:h,disabled:!f.trim()||T,className:"px-6 py-3 bg-sky-500 hover:bg-sky-600 text-white rounded-xl font-medium transition disabled:opacity-50",children:T?e.jsx(as,{className:"w-5 h-5 animate-spin"}):e.jsx(Kt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:["ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™ŸàÿßÿµŸÑŸÉ ŸÖÿπŸÜÿß","ÿ≥ŸÜÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÖŸàÿ∂Ÿàÿπ","ÿ™ŸÖ ÿ≠ŸÑ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©","Ÿäÿ±ÿ¨Ÿâ ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ"].map((C,V)=>e.jsx("button",{onClick:()=>U(C),className:"px-3 py-1.5 bg-gray-100 hover:bg-sky-100 text-gray-600 hover:text-sky-700 rounded-full text-sm transition",children:C},V))})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qs,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),e.jsx("p",{children:"ÿßÿÆÿ™ÿ± ŸÖÿ≠ÿßÿØÿ´ÿ© ŸÑŸÑÿ±ÿØ ÿπŸÑŸäŸáÿß"})]})})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-amber-600",children:i.filter(C=>C.status==="waiting").length}),e.jsx("p",{className:"text-sm text-amber-700",children:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿ±ÿØ"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:i.filter(C=>C.status==="active").length}),e.jsx("p",{className:"text-sm text-green-700",children:"ŸÜÿ¥ÿ∑ÿ©"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:i.filter(C=>C.status==="resolved").length}),e.jsx("p",{className:"text-sm text-blue-700",children:"ŸÖÿ≠ŸÑŸàŸÑÿ©"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-600",children:i.length}),e.jsx("p",{className:"text-sm text-gray-700",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä"})]})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Sl,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ¥ŸÉŸàŸâ ŸàÿÆÿµŸÖ ÿßŸÑŸÜŸÇÿßÿ∑"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["ÿÆÿµŸÖ ŸÜŸÇÿßÿ∑ ŸÖŸÜ ",_]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ŸÖÿπÿ±ŸÅ ",_," (UID)"]}),e.jsx("input",{type:"text",value:c,onChange:C=>o(C.target.value),placeholder:"ÿ£ÿØÿÆŸÑ UID...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-400 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ÿπÿØÿØ ÿßŸÑŸÜŸÇÿßÿ∑ ÿßŸÑŸÖÿÆÿµŸàŸÖÿ©"}),e.jsx("div",{className:"flex gap-2",children:[5,10,15,20].map(C=>e.jsxs("button",{onClick:()=>m(C),className:`flex-1 py-2 rounded-lg font-bold transition ${q===C?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["-",C]},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ÿ≥ÿ®ÿ® ÿßŸÑÿÆÿµŸÖ"}),e.jsxs("select",{value:p,onChange:C=>I(C.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-400 focus:outline-none",children:[e.jsx("option",{value:"",children:"ÿßÿÆÿ™ÿ± ÿßŸÑÿ≥ÿ®ÿ®..."}),e.jsx("option",{value:"ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿπÿßŸÖ ÿ≥Ÿäÿ¶ÿ©",children:"ÿ¨ŸàÿØÿ© ÿßŸÑÿ∑ÿπÿßŸÖ ÿ≥Ÿäÿ¶ÿ©"}),e.jsx("option",{value:"ÿ™ÿ£ÿÆŸäÿ± ŸÅŸä ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",children:"ÿ™ÿ£ÿÆŸäÿ± ŸÅŸä ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ"}),e.jsx("option",{value:"ÿ≥Ÿàÿ° ÿßŸÑÿÆÿØŸÖÿ©",children:"ÿ≥Ÿàÿ° ÿßŸÑÿÆÿØŸÖÿ©"}),e.jsx("option",{value:"ÿ∑ŸÑÿ® ÿÆÿßÿ∑ÿ¶",children:"ÿ∑ŸÑÿ® ÿÆÿßÿ∑ÿ¶"}),e.jsx("option",{value:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿ∫ŸÑŸäŸÅ",children:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿ∫ŸÑŸäŸÅ"}),e.jsx("option",{value:"ŸÖÿ¥ŸÉŸÑÿ© ŸÜÿ∏ÿßŸÅÿ©",children:"ŸÖÿ¥ŸÉŸÑÿ© ŸÜÿ∏ÿßŸÅÿ©"}),e.jsx("option",{value:"ÿπÿØŸÖ ÿßŸÑÿ≠ÿ∂Ÿàÿ±",children:"ÿπÿØŸÖ ÿßŸÑÿ≠ÿ∂Ÿàÿ±"}),e.jsx("option",{value:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿπÿßŸÖŸÑ",children:"ÿ≥Ÿàÿ° ÿßŸÑÿ™ÿπÿßŸÖŸÑ"}),e.jsx("option",{value:"ÿ¥ŸÉŸàŸâ ÿ£ÿÆÿ±Ÿâ",children:"ÿ¥ŸÉŸàŸâ ÿ£ÿÆÿ±Ÿâ"})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:e.jsxs("p",{className:"text-sm text-amber-800",children:["‚ö†Ô∏è ",e.jsx("strong",{children:"ÿ™ŸÜÿ®ŸäŸá:"})," ÿ•ÿ∞ÿß ŸàÿµŸÑÿ™ ÿßŸÑŸÜŸÇÿßÿ∑ ÿ£ŸÇŸÑ ŸÖŸÜ ",hs.SUSPENSION_THRESHOLD," ÿ≥Ÿäÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã!"]})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:A,disabled:x||!c||!p,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-bold transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?e.jsx(as,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Sl,{className:"w-5 h-5"}),"ÿ™ÿ£ŸÉŸäÿØ ŸàÿÆÿµŸÖ ÿßŸÑŸÜŸÇÿßÿ∑"]})}),e.jsx("button",{onClick:()=>$(!1),className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]})})]})},Qd=()=>{const[s,a]=t.useState(!0),[n,d]=t.useState([]),[i,y]=t.useState([]),[r,D]=t.useState([]),[E,B]=t.useState("restaurants"),[P,N]=t.useState("month");t.useEffect(()=>{T()},[P]);const T=async()=>{a(!0);try{const f=(await pe(se(S,"orders"))).docs.map(R=>({id:R.id,...R.data()})),U=new Date,g=f.filter(R=>{var _,O;if(P==="all")return!0;const c=((O=(_=R.createdAt)==null?void 0:_.toDate)==null?void 0:O.call(_))||new Date(0),o=(U.getTime()-c.getTime())/(1e3*60*60*24);return P==="week"?o<=7:P==="month"?o<=30:!0}),w=new Map;g.forEach(R=>{var O,q;const c=R.restaurantId;if(!c)return;w.has(c)||w.set(c,{id:c,name:R.restaurantName||"ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ",totalOrders:0,complaintsCount:0,avgRating:0,lowRatings:0});const o=w.get(c);o.totalOrders++;const _=(q=(O=R.ratings)==null?void 0:O.customerToRestaurant)==null?void 0:q.stars;_&&_<=2&&o.lowRatings++});const b=(await pe(se(S,"supportChats"))).docs.map(R=>R.data());b.forEach(R=>{});const h=Array.from(w.values()).sort((R,c)=>c.lowRatings-R.lowRatings);d(h);const k=new Map;g.forEach(R=>{var O,q;const c=R.courierId;if(!c)return;k.has(c)||k.set(c,{id:c,name:R.courierName||"ŸÖŸÜÿØŸàÿ®",totalDeliveries:0,complaintsCount:0,avgRating:0,lowRatings:0});const o=k.get(c);o.totalDeliveries++;const _=(q=(O=R.ratings)==null?void 0:O.customerToCourier)==null?void 0:q.stars;_&&_<=2&&o.lowRatings++});const L=Array.from(k.values()).sort((R,c)=>c.lowRatings-R.lowRatings);y(L);const $=new Map;g.forEach(R=>{const c=R.customerId;if(!c)return;$.has(c)||$.set(c,{id:c,name:R.customerName||"ÿπŸÖŸäŸÑ",totalOrders:0,complaintsFiledCount:0,avgRatingGiven:0});const o=$.get(c);o.totalOrders++}),b.forEach(R=>{const c=R.userId;$.has(c)&&$.get(c).complaintsFiledCount++});const v=Array.from($.values()).sort((R,c)=>c.complaintsFiledCount-R.complaintsFiledCount);D(v)}catch(j){console.error("Error loading stats:",j)}finally{a(!1)}};return s?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(as,{className:"w-8 h-8 animate-spin text-sky-500"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx(Us,{className:"w-8 h-8 text-red-500"}),"ŸÖÿ±ŸÉÿ≤ ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ"]}),e.jsx("button",{onClick:T,className:"p-2 bg-gray-100 rounded-xl hover:bg-gray-200 transition",children:e.jsx(qe,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-orange-500 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Le,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"ÿ£ÿ≥ÿ± ÿ®ŸÖÿ¥ÿßŸÉŸÑ"})]}),e.jsx("p",{className:"text-3xl font-bold",children:n.filter(j=>j.lowRatings>0).length}),e.jsxs("p",{className:"text-white/70 text-sm",children:["ŸÖŸÜ ÿ£ÿµŸÑ ",n.length," ÿ£ÿ≥ÿ±ÿ©"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-yellow-500 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Be,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"ŸÖŸÜÿØŸàÿ®ŸäŸÜ ÿ®ŸÖÿ¥ÿßŸÉŸÑ"})]}),e.jsx("p",{className:"text-3xl font-bold",children:i.filter(j=>j.lowRatings>0).length}),e.jsxs("p",{className:"text-white/70 text-sm",children:["ŸÖŸÜ ÿ£ÿµŸÑ ",i.length," ŸÖŸÜÿØŸàÿ®"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-5 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ms,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold",children:"ÿπŸÖŸÑÿßÿ° ŸÉÿ´Ÿäÿ±Ÿä ÿßŸÑÿ¥ŸÉÿßŸàŸâ"})]}),e.jsx("p",{className:"text-3xl font-bold",children:r.filter(j=>j.complaintsFiledCount>2).length}),e.jsx("p",{className:"text-white/70 text-sm",children:"ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ÿ¥ŸÉŸàŸäÿ™ŸäŸÜ"})]})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:["week","month","all"].map(j=>e.jsx("button",{onClick:()=>N(j),className:`px-4 py-2 rounded-xl font-medium transition ${P===j?"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:j==="week"?"ÿ¢ÿÆÿ± ÿ£ÿ≥ÿ®Ÿàÿπ":j==="month"?"ÿ¢ÿÆÿ± ÿ¥Ÿáÿ±":"ÿßŸÑŸÉŸÑ"},j))}),e.jsxs("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>B("restaurants"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition ${E==="restaurants"?"bg-red-500 text-white":"bg-gray-100 text-gray-600"}`,children:[e.jsx(Le,{className:"w-4 h-4"}),"ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©"]}),e.jsxs("button",{onClick:()=>B("couriers"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition ${E==="couriers"?"bg-amber-500 text-white":"bg-gray-100 text-gray-600"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),"ÿßŸÑŸÖŸÜÿØŸàÿ®ŸäŸÜ"]}),e.jsxs("button",{onClick:()=>B("customers"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition ${E==="customers"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600"}`,children:[e.jsx(ms,{className:"w-4 h-4"}),"ÿßŸÑÿπŸÖŸÑÿßÿ°"]})]}),E==="restaurants"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-red-50 border-b border-red-100",children:e.jsxs("h2",{className:"font-bold text-red-800 flex items-center gap-2",children:[e.jsx(Is,{className:"w-5 h-5"}),"ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑÿ£ŸÉÿ´ÿ± ŸÖÿ¥ÿßŸÉŸÑ (ÿ™ŸÇŸäŸäŸÖÿßÿ™ ŸÖŸÜÿÆŸÅÿ∂ÿ©)"]})}),n.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™"}):e.jsx("div",{className:"divide-y divide-gray-100",children:n.slice(0,20).map((j,f)=>e.jsxs("div",{className:`p-4 flex items-center justify-between ${j.lowRatings>0?"bg-red-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${j.lowRatings>2?"bg-red-500 text-white":j.lowRatings>0?"bg-amber-500 text-white":"bg-gray-200 text-gray-600"}`,children:f+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:j.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[j.totalOrders," ÿ∑ŸÑÿ®"]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:j.lowRatings>0&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(yr,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold",children:j.lowRatings}),e.jsx("span",{className:"text-xs",children:"ÿ™ŸÇŸäŸäŸÖ ÿ≥Ÿäÿ°"})]})})]},j.id))})]}),E==="couriers"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-amber-50 border-b border-amber-100",children:e.jsxs("h2",{className:"font-bold text-amber-800 flex items-center gap-2",children:[e.jsx(Is,{className:"w-5 h-5"}),"ÿßŸÑŸÖŸÜÿØŸàÿ®ŸäŸÜ ÿßŸÑÿ£ŸÉÿ´ÿ± ŸÖÿ¥ÿßŸÉŸÑ"]})}),i.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™"}):e.jsx("div",{className:"divide-y divide-gray-100",children:i.slice(0,20).map((j,f)=>e.jsxs("div",{className:`p-4 flex items-center justify-between ${j.lowRatings>0?"bg-amber-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${j.lowRatings>2?"bg-red-500 text-white":j.lowRatings>0?"bg-amber-500 text-white":"bg-gray-200 text-gray-600"}`,children:f+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:j.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[j.totalDeliveries," ÿ™ŸàÿµŸäŸÑ"]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:j.lowRatings>0&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-600",children:[e.jsx(yr,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold",children:j.lowRatings}),e.jsx("span",{className:"text-xs",children:"ÿ™ŸÇŸäŸäŸÖ ÿ≥Ÿäÿ°"})]})})]},j.id))})]}),E==="customers"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-purple-50 border-b border-purple-100",children:e.jsxs("h2",{className:"font-bold text-purple-800 flex items-center gap-2",children:[e.jsx(Is,{className:"w-5 h-5"}),"ÿßŸÑÿπŸÖŸÑÿßÿ° ŸÉÿ´Ÿäÿ±Ÿä ÿßŸÑÿ¥ŸÉÿßŸàŸâ"]})}),r.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™"}):e.jsx("div",{className:"divide-y divide-gray-100",children:r.filter(j=>j.complaintsFiledCount>0).slice(0,20).map((j,f)=>e.jsxs("div",{className:`p-4 flex items-center justify-between ${j.complaintsFiledCount>2?"bg-purple-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${j.complaintsFiledCount>3?"bg-red-500 text-white":j.complaintsFiledCount>1?"bg-amber-500 text-white":"bg-gray-200 text-gray-600"}`,children:f+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:j.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[j.totalOrders," ÿ∑ŸÑÿ®"]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-purple-600",children:[e.jsx(Is,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold",children:j.complaintsFiledCount}),e.jsx("span",{className:"text-xs",children:"ÿ¥ŸÉŸàŸâ"})]})})]},j.id))})]}),e.jsx("div",{className:"mt-6 bg-amber-50 border border-amber-200 rounded-xl p-4 text-center",children:e.jsxs("p",{className:"text-amber-800",children:["üí° ",e.jsx("strong",{children:"ŸÜÿµŸäÿ≠ÿ©:"})," ÿ±ÿßŸÇÿ® Ÿáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ© ÿ®ÿ¥ŸÉŸÑ ÿØŸàÿ±Ÿä ŸÑÿßŸÉÿ™ÿ¥ÿßŸÅ ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ ŸÖÿ®ŸÉÿ±ÿßŸã"]})})]})},Wd=[{value:"orders",label:"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",icon:Oe,color:"blue"},{value:"delivery",label:"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ™ŸàÿµŸäŸÑ",icon:Be,color:"orange"},{value:"payment",label:"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿØŸÅÿπ",icon:Ws,color:"green"},{value:"account",label:"ŸÖÿ¥ŸÉŸÑÿ© ŸÅŸä ÿßŸÑÿ≠ÿ≥ÿßÿ®",icon:ms,color:"purple"},{value:"suggestion",label:"ÿßŸÇÿ™ÿ±ÿßÿ≠ ŸÑŸÑÿ™ÿ≠ÿ≥ŸäŸÜ",icon:Kr,color:"amber"}],Gd=()=>{const s=fs(),{user:a,role:n}=Ee(),d=ze(),[i,y]=t.useState(null),[r,D]=t.useState(""),[E,B]=t.useState(!1),[P,N]=t.useState(!1),T=async j=>{if(j.preventDefault(),!i){d.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ŸÜŸàÿπ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©");return}if(!r.trim()){d.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ŸÉÿ™ÿßÿ®ÿ© ŸàÿµŸÅ ŸÑŸÑŸÖÿ¥ŸÉŸÑÿ©");return}if(r.trim().length<10){d.error("ÿßŸÑÿ±ÿ¨ÿßÿ° ŸÉÿ™ÿßÿ®ÿ© ŸàÿµŸÅ ÿ£ŸÉÿ´ÿ± ÿ™ŸÅÿµŸäŸÑÿßŸã (10 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ)");return}if(!(a!=null&&a.uid)){d.error("Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£ŸàŸÑÿßŸã");return}B(!0);try{await Te(se(S,"problemReports"),{userId:a.uid,userName:a.displayName||"",userEmail:a.email||"",userRole:n,problemType:i,description:r.trim(),status:"pending",createdAt:X()}),N(!0),d.success("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫ ÿ®ŸÜÿ¨ÿßÿ≠"),y(null),D("")}catch(f){console.error("Error submitting report:",f),d.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫")}finally{B(!1)}};return P?e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"w-10 h-10 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-sky-900 mb-3",children:"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫"}),e.jsx("p",{className:"text-sky-600 mb-6",children:"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ! ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ®ŸÑÿßÿ∫ŸÉ ŸÖŸÜ ŸÇÿ®ŸÑ ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-6 py-3 bg-sky-100 text-sky-700 rounded-xl font-medium hover:bg-sky-200 transition-colors",children:"ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸÑÿßÿ∫ ÿ¢ÿÆÿ±"}),e.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 bg-sky-600 text-white rounded-xl font-medium hover:bg-sky-700 transition-colors",children:"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"})]})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-sky-100 rounded-2xl flex items-center justify-center",children:e.jsx(Is,{className:"w-8 h-8 text-sky-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-sky-900 mb-2",children:"ÿßŸÑÿ•ÿ®ŸÑÿßÿ∫ ÿπŸÜ ŸÖÿ¥ŸÉŸÑÿ©"}),e.jsx("p",{className:"text-sky-600",children:"ÿ£ÿÆÿ®ÿ±ŸÜÿß ÿπŸÜ ÿ£Ÿä ŸÖÿ¥ŸÉŸÑÿ© ÿ™Ÿàÿßÿ¨ŸáŸÉ ÿ£Ÿà ÿ¥ÿßÿ±ŸÉŸÜÿß ÿßŸÇÿ™ÿ±ÿßÿ≠ÿßÿ™ŸÉ ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"})]}),e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-sky-600 text-white rounded-full flex items-center justify-center text-sm",children:"1"}),"ÿßÿÆÿ™ÿ± ŸÜŸàÿπ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Wd.map(j=>{const f=j.icon,U=i===j.value;return e.jsxs("button",{type:"button",onClick:()=>y(j.value),className:`p-4 rounded-xl border-2 transition-all text-right flex items-center gap-3 ${U?"border-sky-500 bg-sky-50":"border-gray-200 hover:border-sky-300 hover:bg-sky-50/50"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${U?"bg-sky-500 text-white":"bg-gray-100 text-gray-500"}`,children:e.jsx(f,{className:"w-5 h-5"})}),e.jsx("span",{className:`font-medium ${U?"text-sky-700":"text-gray-700"}`,children:j.label})]},j.value)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-sky-600 text-white rounded-full flex items-center justify-center text-sm",children:"2"}),"ÿßÿ¥ÿ±ÿ≠ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©"]}),e.jsx("textarea",{value:r,onChange:j=>D(j.target.value),placeholder:"ÿßŸÉÿ™ÿ® ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ© ÿ£Ÿà ÿßŸÑÿßŸÇÿ™ÿ±ÿßÿ≠ ŸáŸÜÿß...",rows:5,maxLength:500,className:"w-full p-4 border-2 border-gray-200 rounded-xl resize-none focus:outline-none focus:border-sky-500 transition-colors",disabled:E}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[r.length,"/500 ÿ≠ÿ±ŸÅ"]})]}),e.jsx("button",{type:"submit",disabled:E||!i||!r.trim(),className:`w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all ${E||!i||!r.trim()?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-sky-600 text-white hover:bg-sky-700 shadow-lg hover:shadow-xl"}`,children:E?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-5 h-5 animate-spin"}),"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"w-5 h-5"}),"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫"]})}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ®ŸÑÿßÿ∫ŸÉ ŸÖŸÜ ŸÇÿ®ŸÑ ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ ŸÑÿ™ÿ≠ÿ≥ŸäŸÜ ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ"})]})]})},Fr={orders:{label:"ÿ∑ŸÑÿ®ÿßÿ™",icon:Oe,color:"blue",bgClass:"bg-blue-100",textClass:"text-blue-600"},delivery:{label:"ÿ™ŸàÿµŸäŸÑ",icon:Be,color:"orange",bgClass:"bg-orange-100",textClass:"text-orange-600"},payment:{label:"ÿØŸÅÿπ",icon:Ws,color:"green",bgClass:"bg-green-100",textClass:"text-green-600"},account:{label:"ÿ≠ÿ≥ÿßÿ®",icon:ms,color:"purple",bgClass:"bg-purple-100",textClass:"text-purple-600"},suggestion:{label:"ÿßŸÇÿ™ÿ±ÿßÿ≠",icon:Kr,color:"amber",bgClass:"bg-amber-100",textClass:"text-amber-600"}},_r={customer:{label:"ÿπŸÖŸäŸÑ",color:"blue",bgClass:"bg-blue-50",textClass:"text-blue-700"},owner:{label:"ÿ£ÿ≥ÿ±ÿ© ŸÖŸÜÿ™ÿ¨ÿ©",color:"green",bgClass:"bg-green-50",textClass:"text-green-700"},courier:{label:"ŸÖŸÜÿØŸàÿ®",color:"orange",bgClass:"bg-orange-50",textClass:"text-orange-700"}},yl={pending:{label:"ÿ¨ÿØŸäÿØ",color:"yellow",icon:Ye,bgClass:"bg-yellow-100",textClass:"text-yellow-700"},reviewed:{label:"ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©",color:"blue",icon:ws,bgClass:"bg-blue-100",textClass:"text-blue-700"},resolved:{label:"ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ",color:"green",icon:Ie,bgClass:"bg-green-100",textClass:"text-green-700"}},Yd=()=>{const{user:s}=Ee(),a=ze(),[n,d]=t.useState([]),[i,y]=t.useState(!0),[r,D]=t.useState(null),[E,B]=t.useState("all"),[P,N]=t.useState("all"),[T,j]=t.useState("all"),[f,U]=t.useState("");t.useEffect(()=>{const h=be(se(S,"problemReports"),ss("createdAt","desc")),k=xs(h,L=>{const $=L.docs.map(v=>{var R,c;return{id:v.id,...v.data(),createdAt:((c=(R=v.data().createdAt)==null?void 0:R.toDate)==null?void 0:c.call(R))||new Date}});d($),y(!1)},L=>{console.error("Error fetching reports:",L),a.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™"),y(!1)});return()=>k()},[]);const g=async(h,k)=>{try{await xe(J(S,"problemReports",h),{status:k,adminId:s==null?void 0:s.uid,reviewedAt:X()}),a.success(`ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ≠ÿßŸÑÿ© ÿ•ŸÑŸâ: ${yl[k].label}`)}catch(L){console.error("Error updating status:",L),a.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿßŸÑÿ©")}},w=n.filter(h=>{var k,L;if(E!=="all"&&h.problemType!==E||P!=="all"&&h.status!==P||T!=="all"&&h.userRole!==T)return!1;if(f){const $=f.toLowerCase();return h.description.toLowerCase().includes($)||((k=h.userName)==null?void 0:k.toLowerCase().includes($))||((L=h.userEmail)==null?void 0:L.toLowerCase().includes($))}return!0}),M={total:n.length,pending:n.filter(h=>h.status==="pending").length,reviewed:n.filter(h=>h.status==="reviewed").length,resolved:n.filter(h=>h.status==="resolved").length},b=h=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(h);return i?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(as,{className:"w-8 h-8 text-sky-600 animate-spin"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-3",children:[e.jsx(Is,{className:"w-8 h-8 text-sky-600"}),"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:"ŸÖÿ±ÿßÿ¨ÿπÿ© ŸàŸÖÿ™ÿßÿ®ÿπÿ© ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"text-3xl font-bold text-sky-900",children:M.total}),e.jsx("div",{className:"text-sm text-gray-500",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 shadow-sm border border-yellow-100",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-700",children:M.pending}),e.jsx("div",{className:"text-sm text-yellow-600",children:"ÿ¨ÿØŸäÿØ"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 shadow-sm border border-blue-100",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-700",children:M.reviewed}),e.jsx("div",{className:"text-sm text-blue-600",children:"ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 shadow-sm border border-green-100",children:[e.jsx("div",{className:"text-3xl font-bold text-green-700",children:M.resolved}),e.jsx("div",{className:"text-sm text-green-600",children:"ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-sky-700",children:[e.jsx(oa,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"ÿ™ÿµŸÅŸäÿ© ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"w-4 h-4 absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"ÿ®ÿ≠ÿ´...",value:f,onChange:h=>U(h.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("select",{value:E,onChange:h=>B(h.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"all",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜŸàÿßÿπ"}),Object.entries(Fr).map(([h,{label:k}])=>e.jsx("option",{value:h,children:k},h))]}),e.jsxs("select",{value:P,onChange:h=>N(h.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"all",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ÿßŸÑÿßÿ™"}),Object.entries(yl).map(([h,{label:k}])=>e.jsx("option",{value:h,children:k},h))]}),e.jsxs("select",{value:T,onChange:h=>j(h.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"all",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"}),Object.entries(_r).map(([h,{label:k}])=>e.jsx("option",{value:h,children:k},h))]})]})]}),w.length===0?e.jsxs("div",{className:"bg-white rounded-xl p-12 text-center shadow-sm",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸÑÿßÿ∫ÿßÿ™"})]}):e.jsx("div",{className:"space-y-4",children:w.map(h=>{const k=Fr[h.problemType],L=_r[h.userRole],$=yl[h.status],v=k.icon;$.icon;const R=r===h.id;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>D(R?null:h.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${k.bgClass}`,children:e.jsx(v,{className:`w-5 h-5 ${k.textClass}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sky-900",children:k.label}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${$.bgClass} ${$.textClass}`,children:$.label})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[e.jsx("span",{className:`px-2 py-0.5 rounded ${L.bgClass} ${L.textClass}`,children:L.label}),h.userName&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fi,{className:"w-4 h-4"}),h.userName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"w-4 h-4"}),b(h.createdAt)]})]})]})]}),e.jsx("div",{className:"text-gray-400",children:R?e.jsx(ja,{className:"w-5 h-5"}):e.jsx(Jt,{className:"w-5 h-5"})})]})}),R&&e.jsxs("div",{className:"border-t border-gray-100 p-4 bg-gray-50",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-medium text-sky-900 mb-2",children:"ŸàÿµŸÅ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©:"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:h.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[h.userEmail&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"ÿßŸÑÿ®ÿ±ŸäÿØ:"}),e.jsx("span",{className:"mr-2 text-sky-700",children:h.userEmail})]}),h.userPhone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"ÿßŸÑŸáÿßÿ™ŸÅ:"}),e.jsx("span",{className:"mr-2 text-sky-700",children:h.userPhone})]})]}),h.status!=="resolved"&&e.jsxs("div",{className:"flex gap-2",children:[h.status==="pending"&&e.jsxs("button",{onClick:()=>g(h.id,"reviewed"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"]}),e.jsxs("button",{onClick:()=>g(h.id,"resolved"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ"]})]})]})]},h.id)})})]})},Or=3.75,Kd=()=>{const{role:s}=Ee(),a=ze(),[n,d]=t.useState(new Date().getFullYear()),[i,y]=t.useState(new Date().getMonth()+1),[r,D]=t.useState(!0),[E,B]=t.useState({totalOrders:0,totalOrdersValue:0,totalDeliveries:0,totalDeliveryFees:0,platformFees:0,adminCommissions:0,subscriptions:0,promotions:0,grossRevenue:0,netRevenue:0}),[P,N]=t.useState([]),[T,j]=t.useState({restaurants:{count:0,totalBalance:0,totalSales:0},couriers:{count:0,totalBalance:0,totalEarnings:0,totalFees:0},admins:{count:0,totalBalance:0,totalCommissions:0},app:{balance:0,totalEarnings:0}}),[f,U]=t.useState([]);if(t.useEffect(()=>{s==="developer"&&g()},[n,i,s]),s!=="developer")return e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-500",children:"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸàÿµŸàŸÑ ŸÑŸáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ©"})});const g=async()=>{D(!0);try{const L=`${n}-${String(i).padStart(2,"0")}`,$=new Date(n,i-1,1),v=new Date(n,i,0,23,59,59),R=be(se(S,"orders"),je("createdAt",">=",$),je("createdAt","<=",v),ss("createdAt","desc")),o=(await pe(R)).docs.map(W=>({id:W.id,...W.data()}));let _=0,O=0,q=0,m=0,p=0,I=0;const x={};o.forEach(W=>{var fe,he;_++,O+=W.total||0,W.status==="delivered"&&(q++,m+=W.deliveryFee||0,p+=W.courierPlatformFee||Or,W.adminCommission&&(I+=W.adminCommission));const re=(((he=(fe=W.createdAt)==null?void 0:fe.toDate)==null?void 0:he.call(fe))||new Date(W.createdAt)).toISOString().split("T")[0];x[re]||(x[re]={date:re,orders:0,ordersValue:0,deliveries:0,deliveryFees:0,platformFees:0,adminCommissions:0}),x[re].orders++,x[re].ordersValue+=W.total||0,W.status==="delivered"&&(x[re].deliveries++,x[re].deliveryFees+=W.deliveryFee||0,x[re].platformFees+=W.courierPlatformFee||Or,x[re].adminCommissions+=W.adminCommission||0)});const Q=0,A=0,u=p+I+Q+A;B({totalOrders:_,totalOrdersValue:O,totalDeliveries:q,totalDeliveryFees:m,platformFees:p,adminCommissions:I,subscriptions:Q,promotions:A,grossRevenue:u,netRevenue:u});const V=Object.values(x).sort((W,ne)=>new Date(ne.date).getTime()-new Date(W.date).getTime());N(V),await w(),await M()}catch(L){console.error("Error loading accounting data:",L),a.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{D(!1)}},w=async()=>{try{const L=await pe(se(S,"wallets"));let $={count:0,totalBalance:0,totalSales:0},v={count:0,totalBalance:0,totalEarnings:0,totalFees:0},R={count:0,totalBalance:0,totalCommissions:0},c={balance:0,totalEarnings:0};L.docs.forEach(o=>{const _=o.data();o.id==="app_earnings"?c={balance:_.balance||0,totalEarnings:_.totalEarnings||0}:_.ownerType==="restaurant"?($.count++,$.totalBalance+=_.balance||0,$.totalSales+=_.totalSales||0):_.ownerType==="courier"?(v.count++,v.totalBalance+=_.balance||0,v.totalEarnings+=_.totalEarnings||0,v.totalFees+=_.totalPlatformFees||0):(R.count++,R.totalBalance+=_.balance||0,R.totalCommissions+=_.totalEarnings||0)}),j({restaurants:$,couriers:v,admins:R,app:c})}catch(L){console.error("Error loading wallet summary:",L)}},M=async()=>{try{const L=be(se(S,"transactions"),ss("createdAt","desc"),bs(20)),$=await pe(L);U($.docs.map(v=>({id:v.id,...v.data()})))}catch{U([])}},b=L=>{let $=i+L,v=n;$>12?($=1,v++):$<1&&($=12,v--),y($),d(v)},h=L=>["ŸäŸÜÿßŸäÿ±","ŸÅÿ®ÿ±ÿßŸäÿ±","ŸÖÿßÿ±ÿ≥","ÿ£ÿ®ÿ±ŸäŸÑ","ŸÖÿßŸäŸà","ŸäŸàŸÜŸäŸà","ŸäŸàŸÑŸäŸà","ÿ£ÿ∫ÿ≥ÿ∑ÿ≥","ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±","ÿ£ŸÉÿ™Ÿàÿ®ÿ±","ŸÜŸàŸÅŸÖÿ®ÿ±","ÿØŸäÿ≥ŸÖÿ®ÿ±"][L-1],k=L=>`${L.toFixed(2)} ÿ±.ÿ≥`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-2",children:[e.jsx(Us,{className:"w-7 h-7"}),"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿ©"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:"ÿ•ÿØÿßÿ±ÿ© ŸàŸÖÿ±ÿßŸÇÿ®ÿ© ÿ•Ÿäÿ±ÿßÿØÿßÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl p-2 shadow-sm border border-sky-100",children:[e.jsx("button",{onClick:()=>b(-1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(Gt,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold text-sky-900 min-w-[140px] text-center",children:[h(i)," ",n]}),e.jsx("button",{onClick:()=>b(1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(xt,{className:"w-5 h-5 text-sky-600"})}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-sky-50 rounded-lg transition mr-2",title:"ÿ™ÿ≠ÿØŸäÿ´",children:e.jsx(qe,{className:`w-5 h-5 text-sky-600 ${r?"animate-spin":""}`})})]})]}),r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qe,{className:"w-8 h-8 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Ea,{title:"ÿµÿßŸÅŸä ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™",value:k(E.netRevenue),icon:e.jsx(ns,{className:"w-6 h-6"}),color:"emerald",subtitle:"Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±"}),e.jsx(Ea,{title:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©",value:k(E.platformFees),icon:e.jsx(_i,{className:"w-6 h-6"}),color:"sky",subtitle:`ŸÖŸÜ ${E.totalDeliveries} ÿ™ŸàÿµŸäŸÑÿ©`}),e.jsx(Ea,{title:"ÿπŸÖŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ",value:k(E.adminCommissions),icon:e.jsx(zs,{className:"w-6 h-6"}),color:"purple",subtitle:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿπŸÖŸàŸÑÿßÿ™"}),e.jsx(Ea,{title:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",value:E.totalOrders.toString(),icon:e.jsx(Oe,{className:"w-6 h-6"}),color:"amber",subtitle:k(E.totalOrdersValue)})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Ul,{className:"w-5 h-5"}),"ŸÖŸÑÿÆÿµ ÿßŸÑŸÖÿ≠ÿßŸÅÿ∏"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx($a,{title:"ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ",balance:T.app.balance,total:T.app.totalEarnings,icon:e.jsx(Ht,{className:"w-5 h-5"}),color:"emerald"}),e.jsx($a,{title:"ÿßŸÑÿ£ÿ≥ÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿ©",balance:T.restaurants.totalBalance,total:T.restaurants.totalSales,count:T.restaurants.count,icon:e.jsx(js,{className:"w-5 h-5"}),color:"sky"}),e.jsx($a,{title:"ÿßŸÑŸÖŸÜÿßÿØŸäÿ®",balance:T.couriers.totalBalance,total:T.couriers.totalEarnings,count:T.couriers.count,icon:e.jsx(Be,{className:"w-5 h-5"}),color:"orange"}),e.jsx($a,{title:"ÿßŸÑŸÖÿ¥ÿ±ŸÅŸàŸÜ",balance:T.admins.totalBalance,total:T.admins.totalCommissions,count:T.admins.count,icon:e.jsx(zs,{className:"w-5 h-5"}),color:"purple"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5"}),"ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸäŸàŸÖŸäÿ©"]}),P.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-sky-100",children:[e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ŸÇŸäŸÖÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsx("th",{className:"text-right py-3 px-2 font-semibold text-sky-700",children:"ÿπŸÖŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ"})]})}),e.jsx("tbody",{children:P.map(L=>e.jsxs("tr",{className:"border-b border-sky-50 hover:bg-sky-25",children:[e.jsx("td",{className:"py-3 px-2 font-medium",children:L.date}),e.jsx("td",{className:"py-3 px-2",children:L.orders}),e.jsx("td",{className:"py-3 px-2",children:k(L.ordersValue)}),e.jsx("td",{className:"py-3 px-2",children:L.deliveries}),e.jsx("td",{className:"py-3 px-2 text-emerald-600",children:k(L.platformFees)}),e.jsx("td",{className:"py-3 px-2 text-purple-600",children:k(L.adminCommissions)})]},L.date))})]})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÑŸáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"ŸÖÿµÿßÿØÿ± ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Fa,{label:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ© (ŸÖŸÜ ÿßŸÑŸÖŸÜÿßÿØŸäÿ®)",value:E.platformFees,percentage:E.platformFees/(E.grossRevenue||1)*100,color:"sky"}),e.jsx(Fa,{label:"ÿπŸÖŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ÿ±ŸÅŸäŸÜ",value:E.adminCommissions,percentage:E.adminCommissions/(E.grossRevenue||1)*100,color:"purple"}),e.jsx(Fa,{label:"ÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™ ÿßŸÑÿ®ÿßŸÇÿßÿ™",value:E.subscriptions,percentage:E.subscriptions/(E.grossRevenue||1)*100,color:"amber"}),e.jsx(Fa,{label:"ÿßŸÑÿ•ÿπŸÑÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÖŸàŸÑÿ©",value:E.promotions,percentage:E.promotions/(E.grossRevenue||1)*100,color:"emerald"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Gr,{className:"w-5 h-5"}),"ŸÖŸÑÿÆÿµ ÿßŸÑÿ¥Ÿáÿ±"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Mt,{label:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",value:E.totalOrders.toString()}),e.jsx(Mt,{label:"ŸÇŸäŸÖÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",value:k(E.totalOrdersValue)}),e.jsx(Mt,{label:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©",value:E.totalDeliveries.toString()}),e.jsx(Mt,{label:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ",value:k(E.totalDeliveryFees)}),e.jsxs("div",{className:"border-t border-sky-100 pt-4 mt-4",children:[e.jsx(Mt,{label:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™",value:k(E.grossRevenue),highlight:!0}),e.jsx(Mt,{label:"ÿµÿßŸÅŸä ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™",value:k(E.netRevenue),highlight:!0,color:"emerald"})]})]})]})]})]})]})},Ea=({title:s,value:a,icon:n,color:d,subtitle:i})=>{const y={sky:"bg-sky-50 text-sky-600",emerald:"bg-emerald-50 text-emerald-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600",orange:"bg-orange-50 text-orange-600"};return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-sky-100",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl ${y[d]} flex items-center justify-center mb-3`,children:n}),e.jsx("p",{className:"text-sm text-sky-600 mb-1",children:s}),e.jsx("p",{className:"text-xl font-bold text-sky-900",children:a}),i&&e.jsx("p",{className:"text-xs text-sky-500 mt-1",children:i})]})},$a=({title:s,balance:a,total:n,count:d,icon:i,color:y})=>{const r={sky:"border-sky-200 bg-sky-50",emerald:"border-emerald-200 bg-emerald-50",purple:"border-purple-200 bg-purple-50",orange:"border-orange-200 bg-orange-50"},D={sky:"text-sky-600",emerald:"text-emerald-600",purple:"text-purple-600",orange:"text-orange-600"};return e.jsxs("div",{className:`rounded-xl p-4 border ${r[y]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:D[y],children:i}),e.jsx("span",{className:"font-semibold text-sky-900 text-sm",children:s}),d!==void 0&&e.jsx("span",{className:"text-xs bg-white px-2 py-0.5 rounded-full text-sky-600",children:d})]}),e.jsxs("p",{className:`text-lg font-bold ${D[y]}`,children:[a.toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("p",{className:"text-xs text-sky-500 mt-1",children:["ÿ•ÿ¨ŸÖÿßŸÑŸä: ",n.toFixed(2)," ÿ±.ÿ≥"]})]})},Fa=({label:s,value:a,percentage:n,color:d})=>{const i={sky:"bg-sky-500",emerald:"bg-emerald-500",purple:"bg-purple-500",amber:"bg-amber-500"};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-sky-700",children:s}),e.jsxs("span",{className:"font-semibold text-sky-900",children:[a.toFixed(2)," ÿ±.ÿ≥"]})]}),e.jsx("div",{className:"h-2 bg-sky-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${i[d]} rounded-full transition-all duration-500`,style:{width:`${Math.min(n,100)}%`}})})]})},Mt=({label:s,value:a,highlight:n,color:d="sky"})=>e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:n?"font-semibold text-sky-900":"text-sky-600",children:s}),e.jsx("span",{className:`font-bold ${d==="emerald"?"text-emerald-600":"text-sky-900"}`,children:a})]}),Jd=()=>{const{user:s,role:a}=Ee(),n=ze(),[d,i]=t.useState(new Date().getFullYear()),[y,r]=t.useState(new Date().getMonth()+1),[D,E]=t.useState(!0),[B,P]=t.useState(null),[N,T]=t.useState({todaySales:0,todayOrders:0,weekSales:0,weekOrders:0,monthSales:0,monthOrders:0,totalSales:0,totalOrders:0,pendingAmount:0,availableBalance:0}),[j,f]=t.useState([]),[U,g]=t.useState([]),[w,M]=t.useState("");if(t.useEffect(()=>{s!=null&&s.uid&&(a==="owner"||a==="developer")&&b()},[s==null?void 0:s.uid,d,y,a]),a!=="owner"&&a!=="developer")return e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-500",children:"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸàÿµŸàŸÑ ŸÑŸáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ©"})});const b=async()=>{if(s!=null&&s.uid){E(!0);try{const c=await Ce(J(S,"restaurants",s.uid));c.exists()&&M(c.data().name||"ÿ£ÿ≥ÿ±ÿ™Ÿä");const o=await Ce(J(S,"wallets",s.uid));if(o.exists()){const te=o.data();P(te)}else P({id:s.uid,ownerType:"restaurant",balance:0,totalSales:0,totalWithdrawn:0,pendingBalance:0});const _=be(se(S,"orders"),je("restaurantId","==",s.uid),ss("createdAt","desc"),bs(200)),q=(await pe(_)).docs.map(te=>({id:te.id,...te.data()})),m=new Date,p=new Date(m.getFullYear(),m.getMonth(),m.getDate()),I=new Date(p);I.setDate(I.getDate()-7);const x=new Date(d,y-1,1),Q=new Date(d,y,0,23,59,59);let A=0,u=0,C=0,V=0,W=0,ne=0,re=0,fe=0,he=0;const F=[];q.forEach(te=>{var Y,K;const Ne=((K=(Y=te.createdAt)==null?void 0:Y.toDate)==null?void 0:K.call(Y))||new Date(te.createdAt),ee=te.subtotal||0;F.length<20&&F.push({id:te.id,total:te.total,subtotal:te.subtotal,status:te.status,createdAt:te.createdAt}),["delivered","cancelled"].includes(te.status)||(he+=ee),te.status==="delivered"&&(fe++,re+=ee,Ne>=p&&(u++,A+=ee),Ne>=I&&(V++,C+=ee),Ne>=x&&Ne<=Q&&(ne++,W+=ee))}),T({todaySales:A,todayOrders:u,weekSales:C,weekOrders:V,monthSales:W,monthOrders:ne,totalSales:re,totalOrders:fe,pendingAmount:he,availableBalance:(B==null?void 0:B.balance)||0}),f(F),await h()}catch(c){console.error("Error loading wallet data:",c),n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{E(!1)}}},h=async()=>{if(s!=null&&s.uid)try{const c=be(se(S,"wallets",s.uid,"transactions"),ss("createdAt","desc"),bs(50)),o=await pe(c);g(o.docs.map(_=>({id:_.id,..._.data()})))}catch{g([])}},k=c=>{let o=y+c,_=d;o>12?(o=1,_++):o<1&&(o=12,_--),r(o),i(_)},L=c=>["ŸäŸÜÿßŸäÿ±","ŸÅÿ®ÿ±ÿßŸäÿ±","ŸÖÿßÿ±ÿ≥","ÿ£ÿ®ÿ±ŸäŸÑ","ŸÖÿßŸäŸà","ŸäŸàŸÜŸäŸà","ŸäŸàŸÑŸäŸà","ÿ£ÿ∫ÿ≥ÿ∑ÿ≥","ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±","ÿ£ŸÉÿ™Ÿàÿ®ÿ±","ŸÜŸàŸÅŸÖÿ®ÿ±","ÿØŸäÿ≥ŸÖÿ®ÿ±"][c-1],$=c=>`${c.toFixed(2)} ÿ±.ÿ≥`,v=c=>({pending:{text:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ",color:"text-amber-600 bg-amber-50"},accepted:{text:"ŸÖŸÇÿ®ŸàŸÑ",color:"text-blue-600 bg-blue-50"},preparing:{text:"ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",color:"text-purple-600 bg-purple-50"},ready:{text:"ÿ¨ÿßŸáÿ≤",color:"text-sky-600 bg-sky-50"},out_for_delivery:{text:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",color:"text-orange-600 bg-orange-50"},delivered:{text:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",color:"text-emerald-600 bg-emerald-50"},cancelled:{text:"ŸÖŸÑÿ∫Ÿä",color:"text-red-600 bg-red-50"}})[c]||{text:c,color:"text-gray-600 bg-gray-50"},R=c=>{var _;return c?(((_=c==null?void 0:c.toDate)==null?void 0:_.call(c))||new Date(c)).toLocaleDateString("ar-SA",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"-"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-2",children:[e.jsx(ns,{className:"w-7 h-7"}),"ŸÖÿ≠ŸÅÿ∏ÿ™Ÿä"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:w})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl p-2 shadow-sm border border-sky-100",children:[e.jsx("button",{onClick:()=>k(-1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(Gt,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold text-sky-900 min-w-[140px] text-center",children:[L(y)," ",d]}),e.jsx("button",{onClick:()=>k(1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(xt,{className:"w-5 h-5 text-sky-600"})}),e.jsx("button",{onClick:b,className:"p-2 hover:bg-sky-50 rounded-lg transition mr-2",title:"ÿ™ÿ≠ÿØŸäÿ´",children:e.jsx(qe,{className:`w-5 h-5 text-sky-600 ${D?"animate-spin":""}`})})]})]}),D?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qe,{className:"w-8 h-8 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sky-100 flex items-center gap-2",children:[e.jsx(Ul,{className:"w-5 h-5"}),"ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑŸÖÿ™ÿßÿ≠"]}),e.jsx("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm",children:"ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑÿ£ÿ≥ÿ±ÿ©"})]}),e.jsx("p",{className:"text-4xl font-bold mb-2",children:$(N.availableBalance)}),e.jsxs("div",{className:"flex gap-6 mt-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sky-200",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™"}),e.jsx("p",{className:"font-semibold",children:$(N.totalSales)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sky-200",children:"ŸÖÿπŸÑŸÇ"}),e.jsx("p",{className:"font-semibold",children:$(N.pendingAmount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sky-200",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("p",{className:"font-semibold",children:N.totalOrders})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(_a,{title:"ŸÖÿ®Ÿäÿπÿßÿ™ ÿßŸÑŸäŸàŸÖ",value:$(N.todaySales),subtitle:`${N.todayOrders} ÿ∑ŸÑÿ®`,icon:e.jsx(cs,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(_a,{title:"ŸÖÿ®Ÿäÿπÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ",value:$(N.weekSales),subtitle:`${N.weekOrders} ÿ∑ŸÑÿ®`,icon:e.jsx(Ms,{className:"w-5 h-5"}),color:"sky"}),e.jsx(_a,{title:"ŸÖÿ®Ÿäÿπÿßÿ™ ÿßŸÑÿ¥Ÿáÿ±",value:$(N.monthSales),subtitle:`${N.monthOrders} ÿ∑ŸÑÿ®`,icon:e.jsx(mt,{className:"w-5 h-5"}),color:"purple"}),e.jsx(_a,{title:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™",value:$(N.totalSales),subtitle:`${N.totalOrders} ÿ∑ŸÑÿ®`,icon:e.jsx(Ht,{className:"w-5 h-5"}),color:"amber"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"ÿ¢ÿÆÿ± ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"]}),j.length>0?e.jsx("div",{className:"space-y-3",children:j.slice(0,10).map(c=>{const o=v(c.status);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-sky-50/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-sky-100 rounded-full flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sky-900 text-sm",children:["ÿ∑ŸÑÿ® #",c.id.slice(-6)]}),e.jsx("p",{className:"text-xs text-sky-500",children:R(c.createdAt)})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-sky-900",children:$(c.subtotal)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${o.color}`,children:o.text})]})]},c.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿ®ÿπÿØ"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),"ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™"]}),U.length>0?e.jsx("div",{className:"space-y-3",children:U.map(c=>{var o,_,O;return e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-sky-50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${c.type==="credit"?"bg-emerald-100":"bg-red-100"}`,children:c.type==="credit"?e.jsx(Ml,{className:"w-5 h-5 text-emerald-600"}):e.jsx(Oi,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sky-900 text-sm",children:c.description}),e.jsx("p",{className:"text-xs text-sky-500",children:((O=(_=(o=c.createdAt)==null?void 0:o.toDate)==null?void 0:_.call(o))==null?void 0:O.toLocaleDateString("ar-SA"))||(c.createdAt instanceof Date?c.createdAt.toLocaleDateString("ar-SA"):"-")})]})]}),e.jsxs("span",{className:`font-bold ${c.type==="credit"?"text-emerald-600":"text-red-600"}`,children:[c.type==="credit"?"+":"-",$(c.amount)]})]},c.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿπÿßŸÖŸÑÿßÿ™ ÿ®ÿπÿØ"})]}),e.jsx("div",{className:"bg-sky-50 rounded-xl p-4 border border-sky-100",children:e.jsx("p",{className:"text-sm text-sky-700 text-center",children:"üí° Ÿäÿ™ŸÖ ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ ÿßŸÑŸÖÿ≥ÿ™ÿ≠ŸÇÿ© ÿ•ŸÑŸâ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä ÿÆŸÑÿßŸÑ 3-5 ÿ£ŸäÿßŸÖ ÿπŸÖŸÑ ÿ®ÿπÿØ ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®"})})]})]})},_a=({title:s,value:a,subtitle:n,icon:d,color:i})=>{const y={sky:"bg-sky-50 text-sky-600",emerald:"bg-emerald-50 text-emerald-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600"};return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-sky-100",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${y[i]} flex items-center justify-center mb-3`,children:d}),e.jsx("p",{className:"text-sm text-sky-600 mb-1",children:s}),e.jsx("p",{className:"text-xl font-bold text-sky-900",children:a}),e.jsx("p",{className:"text-xs text-sky-500 mt-1",children:n})]})},Lr=3.75,Xd=()=>{const{user:s,role:a}=Ee(),n=ze(),[d,i]=t.useState(new Date().getFullYear()),[y,r]=t.useState(new Date().getMonth()+1),[D,E]=t.useState(!0),[B,P]=t.useState(null),[N,T]=t.useState({todayDeliveries:0,todayEarnings:0,todayFees:0,weekDeliveries:0,weekEarnings:0,weekFees:0,monthDeliveries:0,monthEarnings:0,monthFees:0,totalDeliveries:0,totalEarnings:0,totalFees:0,netEarnings:0,availableBalance:0}),[j,f]=t.useState([]),[U,g]=t.useState([]),[w,M]=t.useState("");if(t.useEffect(()=>{s!=null&&s.uid&&(a==="courier"||a==="developer")&&b()},[s==null?void 0:s.uid,d,y,a]),a!=="courier"&&a!=="developer")return e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-500",children:"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ÿßŸÑŸàÿµŸàŸÑ ŸÑŸáÿ∞Ÿá ÿßŸÑÿµŸÅÿ≠ÿ©"})});const b=async()=>{if(s!=null&&s.uid){E(!0);try{const c=await Ce(J(S,"couriers",s.uid));c.exists()&&M(c.data().name||"ÿßŸÑŸÖŸÜÿØŸàÿ®");const o=await Ce(J(S,"wallets",s.uid));if(o.exists()){const K=o.data();P(K)}else P({id:s.uid,ownerType:"courier",balance:0,totalEarnings:0,totalPlatformFees:0,netEarnings:0,totalWithdrawn:0});const _=be(se(S,"orders"),je("courierId","==",s.uid),ss("createdAt","desc"),bs(200)),q=(await pe(_)).docs.map(K=>({id:K.id,...K.data()})),m=new Date,p=new Date(m.getFullYear(),m.getMonth(),m.getDate()),I=new Date(p);I.setDate(I.getDate()-7);const x=new Date(d,y-1,1),Q=new Date(d,y,0,23,59,59);let A=0,u=0,C=0,V=0,W=0,ne=0,re=0,fe=0,he=0,F=0,te=0,Ne=0;const ee=[];q.forEach(K=>{var G,ae;const me=((ae=(G=K.createdAt)==null?void 0:G.toDate)==null?void 0:ae.call(G))||new Date(K.createdAt),de=K.deliveryFee||0,ye=K.courierPlatformFee||Lr;ee.length<20&&ee.push({id:K.id,deliveryFee:de,platformFee:ye,status:K.status,createdAt:K.createdAt,restaurantName:K.restaurantName}),K.status==="delivered"&&(F++,te+=de,Ne+=ye,me>=p&&(A++,u+=de,C+=ye),me>=I&&(V++,W+=de,ne+=ye),me>=x&&me<=Q&&(re++,fe+=de,he+=ye))});const Y=te-Ne;T({todayDeliveries:A,todayEarnings:u,todayFees:C,weekDeliveries:V,weekEarnings:W,weekFees:ne,monthDeliveries:re,monthEarnings:fe,monthFees:he,totalDeliveries:F,totalEarnings:te,totalFees:Ne,netEarnings:Y,availableBalance:(B==null?void 0:B.balance)||Y}),f(ee),await h()}catch(c){console.error("Error loading wallet data:",c),n.error("ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™")}finally{E(!1)}}},h=async()=>{if(s!=null&&s.uid)try{const c=be(se(S,"wallets",s.uid,"transactions"),ss("createdAt","desc"),bs(50)),o=await pe(c);g(o.docs.map(_=>({id:_.id,..._.data()})))}catch{g([])}},k=c=>{let o=y+c,_=d;o>12?(o=1,_++):o<1&&(o=12,_--),r(o),i(_)},L=c=>["ŸäŸÜÿßŸäÿ±","ŸÅÿ®ÿ±ÿßŸäÿ±","ŸÖÿßÿ±ÿ≥","ÿ£ÿ®ÿ±ŸäŸÑ","ŸÖÿßŸäŸà","ŸäŸàŸÜŸäŸà","ŸäŸàŸÑŸäŸà","ÿ£ÿ∫ÿ≥ÿ∑ÿ≥","ÿ≥ÿ®ÿ™ŸÖÿ®ÿ±","ÿ£ŸÉÿ™Ÿàÿ®ÿ±","ŸÜŸàŸÅŸÖÿ®ÿ±","ÿØŸäÿ≥ŸÖÿ®ÿ±"][c-1],$=c=>`${c.toFixed(2)} ÿ±.ÿ≥`,v=c=>({ready:{text:"ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ",color:"text-sky-600 bg-sky-50"},out_for_delivery:{text:"ŸÅŸä ÿßŸÑÿ∑ÿ±ŸäŸÇ",color:"text-orange-600 bg-orange-50"},delivered:{text:"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ŸÑŸäŸÖ",color:"text-emerald-600 bg-emerald-50"},cancelled:{text:"ŸÖŸÑÿ∫Ÿä",color:"text-red-600 bg-red-50"}})[c]||{text:c,color:"text-gray-600 bg-gray-50"},R=c=>{var _;return c?(((_=c==null?void 0:c.toDate)==null?void 0:_.call(c))||new Date(c)).toLocaleDateString("ar-SA",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"-"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-sky-900 flex items-center gap-2",children:[e.jsx(ns,{className:"w-7 h-7"}),"ŸÖÿ≠ŸÅÿ∏ÿ™Ÿä"]}),e.jsx("p",{className:"text-sky-600 mt-1",children:w})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl p-2 shadow-sm border border-sky-100",children:[e.jsx("button",{onClick:()=>k(-1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(Gt,{className:"w-5 h-5 text-sky-600"})}),e.jsxs("div",{className:"px-4 py-2 font-semibold text-sky-900 min-w-[140px] text-center",children:[L(y)," ",d]}),e.jsx("button",{onClick:()=>k(1),className:"p-2 hover:bg-sky-50 rounded-lg transition",children:e.jsx(xt,{className:"w-5 h-5 text-sky-600"})}),e.jsx("button",{onClick:b,className:"p-2 hover:bg-sky-50 rounded-lg transition mr-2",title:"ÿ™ÿ≠ÿØŸäÿ´",children:e.jsx(qe,{className:`w-5 h-5 text-sky-600 ${D?"animate-spin":""}`})})]})]}),D?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qe,{className:"w-8 h-8 animate-spin text-sky-500 mx-auto mb-3"}),e.jsx("p",{className:"text-sky-600",children:"ÿ¨ÿßÿ±Ÿê ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-orange-100 flex items-center gap-2",children:[e.jsx(Ul,{className:"w-5 h-5"}),"ÿµÿßŸÅŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"]}),e.jsx("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm",children:"ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑŸÖŸÜÿØŸàÿ®"})]}),e.jsx("p",{className:"text-4xl font-bold mb-2",children:$(N.netEarnings)}),e.jsxs("div",{className:"flex gap-6 mt-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-200",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"}),e.jsx("p",{className:"font-semibold",children:$(N.totalEarnings)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-200",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("p",{className:"font-semibold text-orange-200",children:["-",$(N.totalFees)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-200",children:"ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™"}),e.jsx("p",{className:"font-semibold",children:N.totalDeliveries})]})]})]}),e.jsxs("div",{className:"bg-amber-50 rounded-xl p-4 border border-amber-200 flex items-start gap-3",children:[e.jsx(Ds,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"ÿ±ÿ≥ŸàŸÖ ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["Ÿäÿ™ŸÖ ÿÆÿµŸÖ ",$(Lr)," ŸÖŸÜ ŸÉŸÑ ÿ∑ŸÑÿ® ÿ™ŸàÿµŸäŸÑ ŸÉÿ±ÿ≥ŸàŸÖ ŸÑŸÑŸÖŸÜÿµÿ©"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Oa,{title:"ÿ£ÿ±ÿ®ÿßÿ≠ ÿßŸÑŸäŸàŸÖ",value:$(N.todayEarnings-N.todayFees),subtitle:`${N.todayDeliveries} ÿ™ŸàÿµŸäŸÑÿ©`,icon:e.jsx(Be,{className:"w-5 h-5"}),color:"emerald"}),e.jsx(Oa,{title:"ÿ£ÿ±ÿ®ÿßÿ≠ ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ",value:$(N.weekEarnings-N.weekFees),subtitle:`${N.weekDeliveries} ÿ™ŸàÿµŸäŸÑÿ©`,icon:e.jsx(Ms,{className:"w-5 h-5"}),color:"sky"}),e.jsx(Oa,{title:"ÿ£ÿ±ÿ®ÿßÿ≠ ÿßŸÑÿ¥Ÿáÿ±",value:$(N.monthEarnings-N.monthFees),subtitle:`${N.monthDeliveries} ÿ™ŸàÿµŸäŸÑÿ©`,icon:e.jsx(mt,{className:"w-5 h-5"}),color:"purple"}),e.jsx(Oa,{title:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠",value:$(N.totalEarnings),subtitle:`${N.totalDeliveries} ÿ™ŸàÿµŸäŸÑÿ©`,icon:e.jsx(Ht,{className:"w-5 h-5"}),color:"amber"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5"}),"ÿ™ŸÅÿßÿµŸäŸÑ ",L(y)]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-sky-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-sky-900",children:N.monthDeliveries}),e.jsx("p",{className:"text-sm text-sky-600",children:"ÿ™ŸàÿµŸäŸÑÿ©"})]}),e.jsxs("div",{className:"text-center p-4 bg-emerald-50 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:$(N.monthEarnings)}),e.jsx("p",{className:"text-sm text-emerald-600",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["-",$(N.monthFees)]}),e.jsx("p",{className:"text-sm text-red-600",children:"ÿ±ÿ≥ŸàŸÖ"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),"ÿ¢ÿÆÿ± ÿßŸÑÿ™ŸàÿµŸäŸÑÿßÿ™"]}),j.length>0?e.jsx("div",{className:"space-y-3",children:j.slice(0,10).map(c=>{const o=v(c.status);return c.deliveryFee-(c.status==="delivered"?c.platformFee:0),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-sky-50/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(es,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sky-900 text-sm",children:c.restaurantName||`ÿ∑ŸÑÿ® #${c.id.slice(-6)}`}),e.jsx("p",{className:"text-xs text-sky-500",children:R(c.createdAt)})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-sky-900",children:[$(c.deliveryFee),c.status==="delivered"&&e.jsxs("span",{className:"text-xs text-red-500 mr-1",children:["(-",$(c.platformFee),")"]})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${o.color}`,children:o.text})]})]},c.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ŸàÿµŸäŸÑÿßÿ™ ÿ®ÿπÿØ"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-sky-100",children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-900 mb-4 flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),"ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™"]}),U.length>0?e.jsx("div",{className:"space-y-3",children:U.map(c=>{var o,_,O;return e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-sky-50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${c.type==="credit"?"bg-emerald-100":"bg-red-100"}`,children:c.type==="credit"?e.jsx(Ml,{className:"w-5 h-5 text-emerald-600"}):e.jsx(Yr,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sky-900 text-sm",children:c.description}),e.jsx("p",{className:"text-xs text-sky-500",children:((O=(_=(o=c.createdAt)==null?void 0:o.toDate)==null?void 0:_.call(o))==null?void 0:O.toLocaleDateString("ar-SA"))||(c.createdAt instanceof Date?c.createdAt.toLocaleDateString("ar-SA"):"-")})]})]}),e.jsxs("span",{className:`font-bold ${c.type==="credit"?"text-emerald-600":"text-red-600"}`,children:[c.type==="credit"?"+":"-",$(c.amount)]})]},c.id)})}):e.jsx("p",{className:"text-center text-sky-500 py-8",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿπÿßŸÖŸÑÿßÿ™ ÿ®ÿπÿØ"})]}),e.jsx("div",{className:"bg-sky-50 rounded-xl p-4 border border-sky-100",children:e.jsx("p",{className:"text-sm text-sky-700 text-center",children:"üí° Ÿäÿ™ŸÖ ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ ÿßŸÑŸÖÿ≥ÿ™ÿ≠ŸÇÿ© ÿ•ŸÑŸâ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä ÿÆŸÑÿßŸÑ 3-5 ÿ£ŸäÿßŸÖ ÿπŸÖŸÑ"})})]})]})},Oa=({title:s,value:a,subtitle:n,icon:d,color:i})=>{const y={sky:"bg-sky-50 text-sky-600",emerald:"bg-emerald-50 text-emerald-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600"};return e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-sky-100",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${y[i]} flex items-center justify-center mb-3`,children:d}),e.jsx("p",{className:"text-sm text-sky-600 mb-1",children:s}),e.jsx("p",{className:"text-xl font-bold text-sky-900",children:a}),e.jsx("p",{className:"text-xs text-sky-500 mt-1",children:n})]})},st=1,Zd=()=>{const{user:s}=Ee(),a=ze(),[n,d]=t.useState("dashboard"),[i,y]=t.useState([]),[r,D]=t.useState([]),[E,B]=t.useState({balance:0,totalEarnings:0,withdrawals:[]}),[P,N]=t.useState(!0),[T,j]=t.useState("all"),[f,U]=t.useState("all"),[g,w]=t.useState(""),[M,b]=t.useState(null),[h,k]=t.useState(null);t.useEffect(()=>{if(!(s!=null&&s.uid))return;N(!0);const o=be(se(S,"restaurants"),je("supervisorId","==",s.uid)),_=xs(o,m=>{const p=m.docs.map(I=>{var x,Q;return{id:I.id,...I.data(),createdAt:((Q=(x=I.data().createdAt)==null?void 0:x.toDate)==null?void 0:Q.call(x))||new Date}});y(p)}),O=J(S,"supervisorWallets",s.uid),q=xs(O,m=>{if(m.exists()){const p=m.data();B({balance:p.balance||0,totalEarnings:p.totalEarnings||0,withdrawals:(p.withdrawals||[]).map(I=>{var x,Q,A,u;return{...I,requestedAt:((Q=(x=I.requestedAt)==null?void 0:x.toDate)==null?void 0:Q.call(x))||new Date,processedAt:(u=(A=I.processedAt)==null?void 0:A.toDate)==null?void 0:u.call(A)}})})}});return N(!1),()=>{_(),q()}},[s==null?void 0:s.uid]),t.useEffect(()=>{if(i.length===0){D([]);return}const o=i.map(O=>O.id),_=[];return o.forEach(O=>{const q=be(se(S,"orders"),je("restaurantId","==",O),ss("createdAt","desc"),bs(100)),m=xs(q,p=>{const I=p.docs.map(x=>{var Q,A,u,C;return{id:x.id,...x.data(),createdAt:((A=(Q=x.data().createdAt)==null?void 0:Q.toDate)==null?void 0:A.call(Q))||new Date,updatedAt:(C=(u=x.data().updatedAt)==null?void 0:u.toDate)==null?void 0:C.call(u)}});D(x=>[...x.filter(A=>A.restaurantId!==O),...I].sort((A,u)=>new Date(u.createdAt).getTime()-new Date(A.createdAt).getTime()))});_.push(m)}),()=>{_.forEach(O=>O())}},[i]);const L=t.useMemo(()=>{const o=new Date,_=new Date(o.getFullYear(),o.getMonth(),o.getDate()),O=new Date(_.getTime()-7*24*60*60*1e3),q=new Date(_.getTime()-30*24*60*60*1e3),m=r.filter(V=>V.status==="delivered"),p=r.filter(V=>!["delivered","cancelled"].includes(V.status)),I=r.filter(V=>new Date(V.createdAt)>=_),x=r.filter(V=>new Date(V.createdAt)>=O),Q=r.filter(V=>new Date(V.createdAt)>=q),A=I.filter(V=>V.status==="delivered").length,u=x.filter(V=>V.status==="delivered").length,C=Q.filter(V=>V.status==="delivered").length;return{totalRestaurants:i.length,totalOrders:r.length,completedOrders:m.length,activeOrders:p.length,cancelledOrders:r.filter(V=>V.status==="cancelled").length,todayOrders:I.length,todayCompleted:A,todayEarnings:A*st,weekCompleted:u,weekEarnings:u*st,monthCompleted:C,monthEarnings:C*st,totalRevenue:m.reduce((V,W)=>V+(W.total||0),0),totalEarnings:m.length*st}},[r,i]),$=t.useMemo(()=>{let o=[...r];T!=="all"&&(o=o.filter(q=>q.status===T));const _=new Date,O=new Date(_.getFullYear(),_.getMonth(),_.getDate());if(f==="today")o=o.filter(q=>new Date(q.createdAt)>=O);else if(f==="week"){const q=new Date(O.getTime()-6048e5);o=o.filter(m=>new Date(m.createdAt)>=q)}else if(f==="month"){const q=new Date(O.getTime()-2592e6);o=o.filter(m=>new Date(m.createdAt)>=q)}if(g){const q=g.toLowerCase();o=o.filter(m=>{var p,I;return m.id.toLowerCase().includes(q)||((p=m.restaurantName)==null?void 0:p.toLowerCase().includes(q))||((I=m.customerName)==null?void 0:I.toLowerCase().includes(q))})}return o},[r,T,f,g]),v=async(o,_)=>{try{if(await xe(J(S,"orders",o),{status:_,updatedAt:new Date}),_==="delivered"&&(s!=null&&s.uid)){const O=J(S,"supervisorWallets",s.uid),q=await Ce(O),m=q.exists()&&q.data().balance||0,p=q.exists()&&q.data().totalEarnings||0;await xe(O,{balance:m+st,totalEarnings:p+st,lastUpdated:new Date})}a.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ∑ŸÑÿ®")}catch{a.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ∑ŸÑÿ®")}},R=o=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(o),c=o=>{const _={pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",accepted:"bg-blue-500/20 text-blue-400 border-blue-500/30",preparing:"bg-purple-500/20 text-purple-400 border-purple-500/30",ready:"bg-cyan-500/20 text-cyan-400 border-cyan-500/30",out_for_delivery:"bg-orange-500/20 text-orange-400 border-orange-500/30",delivered:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"},O={pending:"ŸÖÿπŸÑŸÇ",accepted:"ŸÖŸÇÿ®ŸàŸÑ",preparing:"ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±",ready:"ÿ¨ÿßŸáÿ≤",out_for_delivery:"ŸÇŸäÿØ ÿßŸÑÿ™ŸàÿµŸäŸÑ",delivered:"ŸÖŸÉÿ™ŸÖŸÑ",cancelled:"ŸÖŸÑÿ∫Ÿâ"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${_[o]||_.pending}`,children:O[o]||o})};return P?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"text-amber-400 text-xl",children:"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white",dir:"rtl",children:[e.jsx("header",{className:"bg-slate-800/50 backdrop-blur-xl border-b border-amber-500/20 sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-amber-400 to-amber-600 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg shadow-amber-500/20",children:e.jsx(Rl,{className:"w-5 h-5 sm:w-6 sm:h-6 text-slate-900"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base sm:text-xl font-bold bg-gradient-to-r from-amber-400 to-amber-200 bg-clip-text text-transparent",children:"ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿ¥ÿ±ŸÅÿ©"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-slate-400 hidden sm:block",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ∑ÿßÿπŸÖ ŸàÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-amber-500/10 to-amber-600/10 border border-amber-500/30 rounded-xl sm:rounded-2xl px-2 sm:px-4 py-1.5 sm:py-2",children:e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-400"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[9px] sm:text-xs text-amber-300/70 hidden sm:block",children:"ÿ±ÿµŸäÿØŸÉ"}),e.jsxs("div",{className:"text-sm sm:text-lg font-bold text-amber-400",children:[E.balance.toFixed(0)," ",e.jsx("span",{className:"text-[10px] sm:text-sm",children:"ÿ±.ÿ≥"})]})]})]})})]})})}),e.jsx("nav",{className:"bg-slate-800/30 border-b border-slate-700/50 sticky top-[52px] sm:top-[68px] z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4",children:e.jsx("div",{className:"flex gap-1 overflow-x-auto py-2 scrollbar-hide",style:{WebkitOverflowScrolling:"touch"},children:[{id:"dashboard",label:"ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",icon:e.jsx(Rl,{className:"w-4 h-4"})},{id:"restaurants",label:"ÿßŸÑŸÖÿ∑ÿßÿπŸÖ",icon:e.jsx(Le,{className:"w-4 h-4"})},{id:"orders",label:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™",icon:e.jsx(cs,{className:"w-4 h-4"})},{id:"reports",label:"ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±",icon:e.jsx(Us,{className:"w-4 h-4"})}].map(o=>e.jsxs("button",{onClick:()=>d(o.id),className:`flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg sm:rounded-xl text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex-shrink-0 ${n===o.id?"bg-gradient-to-r from-amber-500 to-amber-600 text-slate-900 shadow-lg shadow-amber-500/20":"text-slate-400 hover:text-amber-400 hover:bg-slate-700/50"}`,children:[o.icon,e.jsx("span",{children:o.label})]},o.id))})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6 pb-20",children:[n==="dashboard"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500/10 to-amber-600/5 border border-amber-500/30 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Li,{className:"w-6 h-6 sm:w-8 sm:h-8 text-amber-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm sm:text-base font-bold text-amber-400",children:["ÿπŸÖŸàŸÑÿ™ŸÉ: ",st," ÿ±ŸäÿßŸÑ / ÿ∑ŸÑÿ®"]}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-400",children:"ÿ™Ÿèÿ∂ÿßŸÅ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿπŸÜÿØ ÿßŸÉÿ™ŸÖÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-amber-600/10 border border-amber-500/30 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-amber-500/20 rounded-lg sm:rounded-xl flex items-center justify-center",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-400"})}),e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"ÿßŸÑÿ±ÿµŸäÿØ"})]}),e.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-amber-400",children:[E.balance.toFixed(0)," ",e.jsx("span",{className:"text-xs sm:text-sm",children:"ÿ±.ÿ≥"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-emerald-500/20 rounded-lg sm:rounded-xl flex items-center justify-center",children:e.jsx(Ms,{className:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-400"})}),e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"})]}),e.jsxs("div",{className:"text-lg sm:text-2xl font-bold text-emerald-400",children:[E.totalEarnings.toFixed(0)," ",e.jsx("span",{className:"text-xs sm:text-sm",children:"ÿ±.ÿ≥"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-500/20 rounded-lg sm:rounded-xl flex items-center justify-center",children:e.jsx(Ie,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-400"})}),e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"ŸÖŸÉÿ™ŸÖŸÑÿ©"})]}),e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-400",children:L.completedOrders})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/30 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-500/20 rounded-lg sm:rounded-xl flex items-center justify-center",children:e.jsx(Ye,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-400"})}),e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"ŸÜÿ¥ÿ∑ÿ©"})]}),e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-400",children:L.activeOrders})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:e.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"üìÖ ÿßŸÑŸäŸàŸÖ"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold",children:L.todayOrders}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"ÿ∑ŸÑÿ®"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-700"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:L.todayCompleted}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"ŸÖŸÉÿ™ŸÖŸÑ"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-700"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-amber-400",children:L.todayEarnings}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"ÿ±.ÿ≥"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:e.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"üìà ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:L.weekCompleted}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"ŸÖŸÉÿ™ŸÖŸÑ"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-700"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-amber-400",children:L.weekEarnings}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"ÿ±.ÿ≥"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:e.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"üåü ÿßŸÑÿ¥Ÿáÿ±"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-emerald-400",children:L.monthCompleted}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"ŸÖŸÉÿ™ŸÖŸÑ"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-700"}),e.jsxs("div",{className:"text-center flex-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-amber-400",children:L.monthEarnings}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:"ÿ±.ÿ≥"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-700/50",children:e.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[e.jsx(Ht,{className:"w-5 h-5 text-amber-400"}),"ÿ≥ÿ¨ŸÑ ÿπŸÖŸÑŸäÿßÿ™ ÿßŸÑÿ≥ÿ≠ÿ®"]})}),e.jsx("div",{className:"p-4",children:E.withdrawals.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿπŸÖŸÑŸäÿßÿ™ ÿ≥ÿ≠ÿ® ÿ≥ÿßÿ®ŸÇÿ©"}):e.jsx("div",{className:"space-y-3",children:E.withdrawals.map((o,_)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-xl",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[o.amount," ÿ±.ÿ≥"]}),e.jsx("div",{className:"text-xs text-slate-500",children:R(o.requestedAt)})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${o.status==="approved"?"bg-emerald-500/20 text-emerald-400":o.status==="rejected"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:o.status==="approved"?"ÿ™ŸÖÿ™ ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©":o.status==="rejected"?"ŸÖÿ±ŸÅŸàÿ∂":"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©"})]},_))})})]})]}),n==="restaurants"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-base sm:text-xl font-bold",children:["ÿßŸÑŸÖÿ∑ÿßÿπŸÖ (",i.length,")"]})}),i.length===0?e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-6 sm:p-8 text-center",children:[e.jsx(Le,{className:"w-12 h-12 sm:w-16 sm:h-16 text-slate-600 mx-auto mb-3 sm:mb-4"}),e.jsx("div",{className:"text-sm sm:text-base text-slate-400",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ∑ÿßÿπŸÖ ŸÖÿ≥ÿ¨ŸÑÿ© ÿ™ÿ≠ÿ™ ÿ•ÿ¥ÿ±ÿßŸÅŸÉ"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:i.map(o=>{const _=r.filter(m=>m.restaurantId===o.id),O=_.filter(m=>m.status==="delivered"),q=O.reduce((m,p)=>m+(p.total||0),0);return e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl overflow-hidden hover:border-amber-500/30 transition-colors",children:[e.jsxs("div",{className:"p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2.5 sm:gap-3 mb-3 sm:mb-4",children:[o.logoUrl?e.jsx("img",{src:o.logoUrl,alt:o.name,className:"w-11 h-11 sm:w-14 sm:h-14 rounded-lg sm:rounded-xl object-cover"}):e.jsx("div",{className:"w-11 h-11 sm:w-14 sm:h-14 bg-slate-700 rounded-lg sm:rounded-xl flex items-center justify-center",children:e.jsx(Le,{className:"w-5 h-5 sm:w-7 sm:h-7 text-slate-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:o.name}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:o.city})]}),e.jsx("div",{className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${o.isOpen?"bg-emerald-400":"bg-red-400"}`,title:o.isOpen?"ŸÖŸÅÿ™Ÿàÿ≠":"ŸÖÿ∫ŸÑŸÇ"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1.5 sm:gap-2 text-center",children:[e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-1.5 sm:p-2",children:[e.jsx("div",{className:"text-base sm:text-lg font-bold",children:_.length}),e.jsx("div",{className:"text-[9px] sm:text-xs text-slate-500",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-1.5 sm:p-2",children:[e.jsx("div",{className:"text-base sm:text-lg font-bold text-emerald-400",children:O.length}),e.jsx("div",{className:"text-[9px] sm:text-xs text-slate-500",children:"ŸÖŸÉÿ™ŸÖŸÑ"})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-1.5 sm:p-2",children:[e.jsx("div",{className:"text-base sm:text-lg font-bold text-amber-400",children:q.toFixed(0)}),e.jsx("div",{className:"text-[9px] sm:text-xs text-slate-500",children:"ÿ±.ÿ≥"})]})]})]}),e.jsxs("button",{onClick:()=>b(o),className:"w-full bg-slate-700/30 hover:bg-amber-500/20 text-slate-400 hover:text-amber-400 py-2 text-xs sm:text-sm transition-colors flex items-center justify-center gap-2",children:[e.jsx(ws,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ"]})]},o.id)})})]}),n==="orders"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"ÿ®ÿ≠ÿ´...",value:g,onChange:o=>w(o.target.value),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg sm:rounded-xl pr-10 pl-3 py-2 text-sm focus:border-amber-500 outline-none"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:T,onChange:o=>j(o.target.value),className:"flex-1 sm:flex-none bg-slate-700/50 border border-slate-600 rounded-lg sm:rounded-xl px-2 sm:px-4 py-2 text-xs sm:text-sm focus:border-amber-500 outline-none",children:[e.jsx("option",{value:"all",children:"ÿßŸÑŸÉŸÑ"}),e.jsx("option",{value:"pending",children:"ŸÖÿπŸÑŸÇ"}),e.jsx("option",{value:"accepted",children:"ŸÖŸÇÿ®ŸàŸÑ"}),e.jsx("option",{value:"preparing",children:"ÿ™ÿ≠ÿ∂Ÿäÿ±"}),e.jsx("option",{value:"ready",children:"ÿ¨ÿßŸáÿ≤"}),e.jsx("option",{value:"out_for_delivery",children:"ÿ™ŸàÿµŸäŸÑ"}),e.jsx("option",{value:"delivered",children:"ŸÖŸÉÿ™ŸÖŸÑ"}),e.jsx("option",{value:"cancelled",children:"ŸÖŸÑÿ∫Ÿâ"})]}),e.jsxs("select",{value:f,onChange:o=>U(o.target.value),className:"flex-1 sm:flex-none bg-slate-700/50 border border-slate-600 rounded-lg sm:rounded-xl px-2 sm:px-4 py-2 text-xs sm:text-sm focus:border-amber-500 outline-none",children:[e.jsx("option",{value:"all",children:"ÿßŸÑŸÉŸÑ"}),e.jsx("option",{value:"today",children:"ÿßŸÑŸäŸàŸÖ"}),e.jsx("option",{value:"week",children:"ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ"}),e.jsx("option",{value:"month",children:"ÿßŸÑÿ¥Ÿáÿ±"})]})]})]})}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:$.length===0?e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-6 sm:p-8 text-center",children:[e.jsx(cs,{className:"w-12 h-12 sm:w-16 sm:h-16 text-slate-600 mx-auto mb-3 sm:mb-4"}),e.jsx("div",{className:"text-sm sm:text-base text-slate-400",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™"})]}):$.map(o=>{var _,O;return e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-3 sm:p-4 cursor-pointer hover:bg-slate-700/20 transition-colors",onClick:()=>k(h===o.id?null:o.id),children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-slate-700/50 rounded-lg sm:rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"font-medium flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-sm sm:text-base",children:["#",o.id.slice(-6)]}),c(o.status)]}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500 truncate",children:o.restaurantName||((_=i.find(q=>q.id===o.restaurantId))==null?void 0:_.name)})]})]}),e.jsxs("div",{className:"text-left flex-shrink-0",children:[e.jsxs("div",{className:"font-bold text-amber-400 text-sm sm:text-base",children:[(O=o.total)==null?void 0:O.toFixed(0)," ",e.jsx("span",{className:"text-xs",children:"ÿ±.ÿ≥"})]}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500",children:R(o.createdAt)})]}),h===o.id?e.jsx(ja,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-500 flex-shrink-0"}):e.jsx(Jt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-500 flex-shrink-0"})]})}),h===o.id&&e.jsxs("div",{className:"border-t border-slate-700/50 p-3 sm:p-4 bg-slate-800/30",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500 mb-0.5 sm:mb-1",children:"ÿßŸÑÿπŸÖŸäŸÑ"}),e.jsx("div",{className:"text-sm sm:text-base",children:o.customerName||"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-500 mb-0.5 sm:mb-1",children:"ÿπŸÖŸàŸÑÿ™ŸÉ"}),e.jsx("div",{className:`font-bold text-sm sm:text-base ${o.status==="delivered"?"text-emerald-400":"text-slate-500"}`,children:o.status==="delivered"?st+" ÿ±.ÿ≥ ‚úì":"ÿ™Ÿèÿ≥ÿ™ÿ≠ŸÇ ÿπŸÜÿØ ÿßŸÑÿßŸÉÿ™ŸÖÿßŸÑ"})]})]}),!["delivered","cancelled"].includes(o.status)&&e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400 w-full sm:w-auto mb-1 sm:mb-0",children:"ÿ™ÿ∫ŸäŸäÿ±:"}),o.status==="pending"&&e.jsx("button",{onClick:()=>v(o.id,"accepted"),className:"bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"ŸÇÿ®ŸàŸÑ"}),o.status==="accepted"&&e.jsx("button",{onClick:()=>v(o.id,"preparing"),className:"bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"ÿ™ÿ≠ÿ∂Ÿäÿ±"}),o.status==="preparing"&&e.jsx("button",{onClick:()=>v(o.id,"ready"),className:"bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"ÿ¨ÿßŸáÿ≤"}),o.status==="ready"&&e.jsx("button",{onClick:()=>v(o.id,"out_for_delivery"),className:"bg-orange-500/20 hover:bg-orange-500/30 text-orange-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"ÿ™ŸàÿµŸäŸÑ"}),o.status==="out_for_delivery"&&e.jsx("button",{onClick:()=>v(o.id,"delivered"),className:"bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"ÿ™ŸÖ"}),e.jsx("button",{onClick:()=>v(o.id,"cancelled"),className:"bg-red-500/20 hover:bg-red-500/30 text-red-400 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-lg text-xs sm:text-sm",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]})]},o.id)})})]}),n==="reports"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("h2",{className:"text-base sm:text-xl font-bold flex items-center gap-2",children:[e.jsx(Us,{className:"w-5 h-5 sm:w-6 sm:h-6 text-amber-400"}),"ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("h3",{className:"font-bold text-amber-400 mb-3 sm:mb-4 flex items-center gap-2 text-sm sm:text-base",children:"üìÖ ÿßŸÑŸäŸàŸÖ"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("span",{className:"font-bold text-sm sm:text-base",children:L.todayOrders})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"ŸÖŸÉÿ™ŸÖŸÑÿ©"}),e.jsx("span",{className:"font-bold text-sm sm:text-base text-emerald-400",children:L.todayCompleted})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"ÿ£ÿ±ÿ®ÿßÿ≠ŸÉ"}),e.jsxs("span",{className:"font-bold text-sm sm:text-base text-amber-400",children:[L.todayEarnings," ÿ±.ÿ≥"]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("h3",{className:"font-bold text-amber-400 mb-3 sm:mb-4 flex items-center gap-2 text-sm sm:text-base",children:"üìà ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"ŸÖŸÉÿ™ŸÖŸÑÿ©"}),e.jsx("span",{className:"font-bold text-sm sm:text-base text-emerald-400",children:L.weekCompleted})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠"}),e.jsxs("span",{className:"font-bold text-sm sm:text-base text-amber-400",children:[L.weekEarnings," ÿ±.ÿ≥"]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl p-3 sm:p-4",children:[e.jsx("h3",{className:"font-bold text-amber-400 mb-3 sm:mb-4 flex items-center gap-2 text-sm sm:text-base",children:"üåü ÿßŸÑÿ¥Ÿáÿ±"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4",children:[e.jsxs("div",{className:"text-center p-2.5 sm:p-4 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("div",{className:"text-xl sm:text-3xl font-bold",children:L.monthCompleted}),e.jsx("div",{className:"text-[10px] sm:text-sm text-slate-400",children:"ŸÖŸÉÿ™ŸÖŸÑ"})]}),e.jsxs("div",{className:"text-center p-2.5 sm:p-4 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("div",{className:"text-xl sm:text-3xl font-bold text-amber-400",children:L.monthEarnings}),e.jsx("div",{className:"text-[10px] sm:text-sm text-slate-400",children:"ÿ±.ÿ≥"})]}),e.jsxs("div",{className:"text-center p-2.5 sm:p-4 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsx("div",{className:"text-xl sm:text-3xl font-bold text-blue-400",children:i.length}),e.jsx("div",{className:"text-[10px] sm:text-sm text-slate-400",children:"ŸÖÿ∑ÿπŸÖ"})]}),e.jsxs("div",{className:"text-center p-2.5 sm:p-4 bg-slate-700/30 rounded-lg sm:rounded-xl",children:[e.jsxs("div",{className:"text-xl sm:text-3xl font-bold text-emerald-400",children:[L.completedOrders>0?(L.completedOrders/L.totalOrders*100).toFixed(0):0,"%"]}),e.jsx("div",{className:"text-[10px] sm:text-sm text-slate-400",children:"ÿ•ŸÜÿ¨ÿßÿ≤"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl sm:rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b border-slate-700/50",children:e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-sm sm:text-base",children:[e.jsx(Le,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-400"}),"ÿ£ÿØÿßÿ° ÿßŸÑŸÖÿ∑ÿßÿπŸÖ"]})}),e.jsx("div",{className:"sm:hidden p-3 space-y-2",children:i.map(o=>{const _=r.filter(p=>p.restaurantId===o.id),O=_.filter(p=>p.status==="delivered"),q=O.reduce((p,I)=>p+(I.total||0),0),m=O.length*st;return e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-3",children:[e.jsx("div",{className:"font-medium text-sm mb-2",children:o.name}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:_.length}),e.jsx("div",{className:"text-slate-500",children:"ÿ∑ŸÑÿ®"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-emerald-400",children:O.length}),e.jsx("div",{className:"text-slate-500",children:"ŸÖŸÉÿ™ŸÖŸÑ"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:q.toFixed(0)}),e.jsx("div",{className:"text-slate-500",children:"ÿ±.ÿ≥"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-amber-400",children:m}),e.jsx("div",{className:"text-slate-500",children:"ÿπŸÖŸàŸÑÿ©"})]})]})]},o.id)})}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-700/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-right p-3",children:"ÿßŸÑŸÖÿ∑ÿπŸÖ"}),e.jsx("th",{className:"text-center p-3",children:"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™"}),e.jsx("th",{className:"text-center p-3",children:"ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©"}),e.jsx("th",{className:"text-center p-3",children:"ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™"}),e.jsx("th",{className:"text-center p-3",children:"ÿπŸÖŸàŸÑÿ™ŸÉ"})]})}),e.jsx("tbody",{children:i.map(o=>{const _=r.filter(p=>p.restaurantId===o.id),O=_.filter(p=>p.status==="delivered"),q=O.reduce((p,I)=>p+(I.total||0),0),m=O.length*st;return e.jsxs("tr",{className:"border-t border-slate-700/30 hover:bg-slate-700/20",children:[e.jsx("td",{className:"p-3 font-medium",children:o.name}),e.jsx("td",{className:"p-3 text-center",children:_.length}),e.jsx("td",{className:"p-3 text-center text-emerald-400",children:O.length}),e.jsxs("td",{className:"p-3 text-center",children:[q.toFixed(2)," ÿ±.ÿ≥"]}),e.jsxs("td",{className:"p-3 text-center text-amber-400",children:[m," ÿ±.ÿ≥"]})]},o.id)})})]})})]})]})]})]})},eo=()=>{const{user:s}=Ee(),a=ze(),[n,d]=t.useState("dashboard"),[i,y]=t.useState({followers:0,followersGrowth:0,engagementRate:0,appClicks:0,whatsappClicks:0,totalReach:0,impressions:0}),[r,D]=t.useState([]),[E,B]=t.useState([]),[P,N]=t.useState(!0),[T,j]=t.useState("month"),[f,U]=t.useState(!1),[g,w]=t.useState(null),[M,b]=t.useState(null),[h,k]=t.useState({title:"",description:"",type:"image",platform:"instagram",status:"draft",scheduledAt:""});t.useEffect(()=>{if(!(s!=null&&s.uid))return;N(!0);const m=J(S,"socialMediaStats","current"),p=xs(m,u=>{u.exists()&&y(u.data())}),I=be(se(S,"socialMediaPosts"),ss("createdAt","desc"),bs(50)),x=xs(I,u=>{const C=u.docs.map(V=>{var W,ne,re,fe,he,F,te,Ne;return{id:V.id,...V.data(),createdAt:((ne=(W=V.data().createdAt)==null?void 0:W.toDate)==null?void 0:ne.call(W))||new Date,scheduledAt:(fe=(re=V.data().scheduledAt)==null?void 0:re.toDate)==null?void 0:fe.call(re),publishedAt:(F=(he=V.data().publishedAt)==null?void 0:he.toDate)==null?void 0:F.call(he),updatedAt:(Ne=(te=V.data().updatedAt)==null?void 0:te.toDate)==null?void 0:Ne.call(te)}});D(C)}),Q=be(se(S,"socialMediaCampaigns"),ss("startDate","desc"),bs(20)),A=xs(Q,u=>{const C=u.docs.map(V=>{var W,ne,re,fe;return{id:V.id,...V.data(),startDate:((ne=(W=V.data().startDate)==null?void 0:W.toDate)==null?void 0:ne.call(W))||new Date,endDate:(fe=(re=V.data().endDate)==null?void 0:re.toDate)==null?void 0:fe.call(re)}});B(C)});return N(!1),()=>{p(),x(),A()}},[s==null?void 0:s.uid]);const L=t.useMemo(()=>{const m=r.filter(V=>V.status==="published"),p=r.filter(V=>V.status==="scheduled"),I=r.filter(V=>V.status==="draft"),x=m.reduce((V,W)=>V+(W.views||0),0),Q=m.reduce((V,W)=>V+(W.likes||0),0),A=m.reduce((V,W)=>V+(W.comments||0),0),u=m.reduce((V,W)=>V+(W.shares||0),0),C=m.sort((V,W)=>(W.likes||0)+(W.comments||0)+(W.shares||0)-((V.likes||0)+(V.comments||0)+(V.shares||0)))[0];return{totalPosts:r.length,published:m.length,scheduled:p.length,drafts:I.length,totalViews:x,totalLikes:Q,totalComments:A,totalShares:u,bestPost:C,avgEngagement:m.length>0?((Q+A+u)/m.length).toFixed(1):0}},[r]),$=t.useMemo(()=>{const m=E.filter(A=>A.status==="active"),p=E.reduce((A,u)=>A+u.budget,0),I=E.reduce((A,u)=>A+u.spent,0),x=E.reduce((A,u)=>A+u.clicks,0),Q=E.reduce((A,u)=>A+u.conversions,0);return{total:E.length,active:m.length,totalBudget:p,totalSpent:I,totalClicks:x,totalConversions:Q,avgCPC:x>0?(I/x).toFixed(2):0}},[E]),v=async()=>{if(!h.title.trim()){a.warning("Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±");return}try{await Te(se(S,"socialMediaPosts"),{...h,scheduledAt:h.scheduledAt?new Date(h.scheduledAt):null,createdAt:new Date,createdBy:s==null?void 0:s.uid,views:0,likes:0,comments:0,shares:0,saves:0,clicks:0}),a.success("ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±"),U(!1),k({title:"",description:"",type:"image",platform:"instagram",status:"draft",scheduledAt:""})}catch{a.error("ŸÅÿ¥ŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±")}},R=async m=>{if(confirm("ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±ÿü"))try{await As(J(S,"socialMediaPosts",m)),a.success("ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±")}catch{a.error("ŸÅÿ¥ŸÑ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±")}},c=async(m,p)=>{try{await xe(J(S,"socialMediaPosts",m),{status:p,updatedAt:new Date,...p==="published"?{publishedAt:new Date}:{}}),a.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±")}catch{a.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿßŸÑÿ©")}},o=async(m,p)=>{try{await Qe(J(S,"socialMediaStats","current"),{...i,[m]:p,updatedAt:new Date,updatedBy:s==null?void 0:s.uid},{merge:!0}),a.success("ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™")}catch{a.error("ŸÅÿ¥ŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™")}},_=m=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(m),O=m=>{switch(m){case"image":return e.jsx(zt,{className:"w-4 h-4"});case"video":return e.jsx(Qa,{className:"w-4 h-4"});case"reel":return e.jsx(Al,{className:"w-4 h-4"});case"story":return e.jsx(is,{className:"w-4 h-4"});case"carousel":return e.jsx(ys,{className:"w-4 h-4"});default:return e.jsx(ys,{className:"w-4 h-4"})}},q=m=>{switch(m){case"instagram":return e.jsx(Ui,{className:"w-4 h-4"});case"twitter":return e.jsx(Kt,{className:"w-4 h-4"});case"tiktok":return e.jsx(Qa,{className:"w-4 h-4"});default:return e.jsx(za,{className:"w-4 h-4"})}};return P?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-slate-900 to-indigo-950 flex items-center justify-center",children:e.jsx("div",{className:"text-indigo-400 text-xl",children:"ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-slate-900 to-indigo-950 text-white",dir:"rtl",children:[e.jsx("header",{className:"bg-slate-900/50 backdrop-blur-xl border-b border-indigo-500/20 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-400 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-500/20",children:e.jsx(Ls,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ≥Ÿàÿ¥ŸäÿßŸÑ ŸÖŸäÿØŸäÿß"}),e.jsx("p",{className:"text-xs text-slate-400",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ŸàÿßŸÑÿ™ÿ≥ŸàŸäŸÇ"})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-indigo-500/10 border border-indigo-500/30 rounded-xl px-3 py-2",children:[e.jsx(zs,{className:"w-4 h-4 text-indigo-400"}),e.jsx("span",{className:"font-bold",children:i.followers.toLocaleString()}),e.jsx("span",{className:"text-xs text-slate-400",children:"ŸÖÿ™ÿßÿ®ÿπ"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-pink-500/10 border border-pink-500/30 rounded-xl px-3 py-2",children:[e.jsx(ot,{className:"w-4 h-4 text-pink-400"}),e.jsxs("span",{className:"font-bold",children:[i.engagementRate.toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-slate-400",children:"ÿ™ŸÅÿßÿπŸÑ"})]})]})]})}),e.jsx("nav",{className:"bg-slate-900/30 border-b border-slate-700/50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("div",{className:"flex gap-1 overflow-x-auto py-2",children:[{id:"dashboard",label:"ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",icon:e.jsx(Rl,{className:"w-4 h-4"})},{id:"content",label:"ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ",icon:e.jsx(ys,{className:"w-4 h-4"})},{id:"calendar",label:"ÿ¨ÿØŸàŸÑ ÿßŸÑŸÜÿ¥ÿ±",icon:e.jsx(mt,{className:"w-4 h-4"})},{id:"campaigns",label:"ÿßŸÑÿ≠ŸÖŸÑÿßÿ™",icon:e.jsx(dt,{className:"w-4 h-4"})},{id:"reports",label:"ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±",icon:e.jsx(Us,{className:"w-4 h-4"})}].map(m=>e.jsxs("button",{onClick:()=>d(m.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all whitespace-nowrap ${n===m.id?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-400 hover:text-indigo-400 hover:bg-slate-700/50"}`,children:[m.icon,m.label]},m.id))})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[n==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500/20 to-indigo-600/10 border border-indigo-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/20 rounded-xl flex items-center justify-center",children:e.jsx(zs,{className:"w-5 h-5 text-indigo-400"})}),e.jsx("span",{className:"text-sm text-slate-400",children:"ÿßŸÑŸÖÿ™ÿßÿ®ÿπŸäŸÜ"})]}),e.jsx("div",{className:"text-2xl font-bold text-indigo-400",children:i.followers.toLocaleString()}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[i.followersGrowth>=0?e.jsx(Ms,{className:"w-3 h-3 text-emerald-400"}):e.jsx(Ms,{className:"w-3 h-3 text-red-400 rotate-180"}),e.jsxs("span",{className:`text-xs ${i.followersGrowth>=0?"text-emerald-400":"text-red-400"}`,children:[i.followersGrowth,"%"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-500/20 to-pink-600/10 border border-pink-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-500/20 rounded-xl flex items-center justify-center",children:e.jsx(ot,{className:"w-5 h-5 text-pink-400"})}),e.jsx("span",{className:"text-sm text-slate-400",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ™ŸÅÿßÿπŸÑ"})]}),e.jsxs("div",{className:"text-2xl font-bold text-pink-400",children:[i.engagementRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Mi,{className:"w-5 h-5 text-emerald-400"})}),e.jsx("span",{className:"text-sm text-slate-400",children:"ŸÜŸÇÿ±ÿßÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"})]}),e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:i.appClicks.toLocaleString()})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/10 border border-green-500/30 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Qs,{className:"w-5 h-5 text-green-400"})}),e.jsx("span",{className:"text-sm text-slate-400",children:"ŸÜŸÇÿ±ÿßÿ™ Ÿàÿßÿ™ÿ≥ÿßÿ®"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:i.whatsappClicks.toLocaleString()})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5 text-indigo-400"}),"ÿßŸÑŸàÿµŸàŸÑ ŸàÿßŸÑÿ∏ŸáŸàÿ±"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("span",{className:"text-slate-400",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸàÿµŸàŸÑ"}),e.jsx("span",{className:"font-bold text-indigo-400",children:i.totalReach.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("span",{className:"text-slate-400",children:"ÿßŸÑÿ∏ŸáŸàÿ± (Impressions)"}),e.jsx("span",{className:"font-bold",children:i.impressions.toLocaleString()})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(ys,{className:"w-5 h-5 text-purple-400"}),"ÿ£ÿØÿßÿ° ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold",children:L.totalPosts}),e.jsx("div",{className:"text-xs text-slate-500",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±ÿßÿ™"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:L.published}),e.jsx("div",{className:"text-xs text-slate-500",children:"ŸÖŸÜÿ¥Ÿàÿ±"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-pink-400",children:L.totalLikes}),e.jsx("div",{className:"text-xs text-slate-500",children:"ÿ•ÿπÿ¨ÿßÿ®"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:L.avgEngagement}),e.jsx("div",{className:"text-xs text-slate-500",children:"ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿ™ŸÅÿßÿπŸÑ"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5 text-amber-400"}),"ÿ£ÿØÿßÿ° ÿßŸÑÿ≠ŸÖŸÑÿßÿ™ ÿßŸÑÿ•ÿπŸÑÿßŸÜŸäÿ©"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:$.active}),e.jsx("div",{className:"text-sm text-slate-400",children:"ÿ≠ŸÖŸÑÿ© ŸÜÿ¥ÿ∑ÿ©"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold",children:$.totalClicks.toLocaleString()}),e.jsx("div",{className:"text-sm text-slate-400",children:"ŸÜŸÇÿ±ÿßÿ™"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-400",children:$.totalConversions}),e.jsx("div",{className:"text-sm text-slate-400",children:"ÿ™ÿ≠ŸàŸäŸÑÿßÿ™"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold text-indigo-400",children:$.avgCPC}),e.jsx("div",{className:"text-sm text-slate-400",children:"ÿ™ŸÉŸÑŸÅÿ© ÿßŸÑŸÜŸÇÿ±ÿ©"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(Wr,{className:"w-5 h-5 text-slate-400"}),"ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"ŸäŸÖŸÉŸÜŸÉ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸäÿØŸàŸäÿßŸã ŸÖŸÜ ŸáŸÜÿß"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ÿπÿØÿØ ÿßŸÑŸÖÿ™ÿßÿ®ÿπŸäŸÜ"}),e.jsx("input",{type:"number",value:i.followers,onChange:m=>o("followers",parseInt(m.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÜŸÖŸà %"}),e.jsx("input",{type:"number",step:"0.1",value:i.followersGrowth,onChange:m=>o("followersGrowth",parseFloat(m.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ™ŸÅÿßÿπŸÑ %"}),e.jsx("input",{type:"number",step:"0.1",value:i.engagementRate,onChange:m=>o("engagementRate",parseFloat(m.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ŸÜŸÇÿ±ÿßÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ"}),e.jsx("input",{type:"number",value:i.appClicks,onChange:m=>o("appClicks",parseInt(m.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ŸÜŸÇÿ±ÿßÿ™ Ÿàÿßÿ™ÿ≥ÿßÿ®"}),e.jsx("input",{type:"number",value:i.whatsappClicks,onChange:m=>o("whatsappClicks",parseInt(m.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ÿßŸÑŸàÿµŸàŸÑ ÿßŸÑŸÉŸÑŸä"}),e.jsx("input",{type:"number",value:i.totalReach,onChange:m=>o("totalReach",parseInt(m.target.value)||0),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]})]})]})]}),n==="content"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ"}),e.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:opacity-90 transition-opacity",children:[e.jsx(vs,{className:"w-4 h-4"}),"ŸÖŸÜÿ¥Ÿàÿ± ÿ¨ÿØŸäÿØ"]})]}),f&&e.jsxs("div",{className:"bg-slate-800/50 border border-indigo-500/30 rounded-2xl p-4",children:[e.jsx("h3",{className:"font-bold mb-4",children:"ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ¥Ÿàÿ± ÿ¨ÿØŸäÿØ"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ÿßŸÑÿπŸÜŸàÿßŸÜ *"}),e.jsx("input",{type:"text",value:h.title,onChange:m=>k(p=>({...p,title:m.target.value})),placeholder:"ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±",className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ŸÜŸàÿπ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ"}),e.jsxs("select",{value:h.type,onChange:m=>k(p=>({...p,type:m.target.value})),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"image",children:"ÿµŸàÿ±ÿ©"}),e.jsx("option",{value:"video",children:"ŸÅŸäÿØŸäŸà"}),e.jsx("option",{value:"reel",children:"ÿ±ŸäŸÑÿ≤"}),e.jsx("option",{value:"story",children:"ÿ≥ÿ™Ÿàÿ±Ÿä"}),e.jsx("option",{value:"carousel",children:"ŸÉÿßÿ±Ÿàÿ≥ŸäŸÑ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ÿßŸÑŸÖŸÜÿµÿ©"}),e.jsxs("select",{value:h.platform,onChange:m=>k(p=>({...p,platform:m.target.value})),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"instagram",children:"ÿßŸÜÿ≥ÿ™ŸÇÿ±ÿßŸÖ"}),e.jsx("option",{value:"twitter",children:"ÿ™ŸàŸäÿ™ÿ±"}),e.jsx("option",{value:"tiktok",children:"ÿ™ŸäŸÉ ÿ™ŸàŸÉ"}),e.jsx("option",{value:"snapchat",children:"ÿ≥ŸÜÿßÿ® ÿ¥ÿßÿ™"}),e.jsx("option",{value:"all",children:"ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÜÿµÿßÿ™"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÜÿ¥ÿ± (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"}),e.jsx("input",{type:"datetime-local",value:h.scheduledAt,onChange:m=>k(p=>({...p,scheduledAt:m.target.value,status:m.target.value?"scheduled":"draft"})),className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"ÿßŸÑŸàÿµŸÅ"}),e.jsx("textarea",{value:h.description,onChange:m=>k(p=>({...p,description:m.target.value})),placeholder:"ŸàÿµŸÅ ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±...",rows:3,className:"w-full bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm resize-none"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:v,className:"bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-xl text-sm",children:"ÿ≠ŸÅÿ∏"}),e.jsx("button",{onClick:()=>U(!1),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-xl text-sm",children:"ÿ•ŸÑÿ∫ÿßÿ°"})]})]}),e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-8 text-center",children:[e.jsx(ys,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("div",{className:"text-slate-400",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÜÿ¥Ÿàÿ±ÿßÿ™"})]}):r.map(m=>e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-slate-700/20 transition-colors",onClick:()=>b(M===m.id?null:m.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-700/50 rounded-xl flex items-center justify-center",children:O(m.type)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[m.title,e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${m.status==="published"?"bg-emerald-500/20 text-emerald-400":m.status==="scheduled"?"bg-blue-500/20 text-blue-400":m.status==="draft"?"bg-slate-500/20 text-slate-400":"bg-slate-600/20 text-slate-500"}`,children:m.status==="published"?"ŸÖŸÜÿ¥Ÿàÿ±":m.status==="scheduled"?"ŸÖÿ¨ÿØŸàŸÑ":m.status==="draft"?"ŸÖÿ≥ŸàÿØÿ©":"ŸÖÿ§ÿ±ÿ¥ŸÅ"})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[q(m.platform),m.platform==="instagram"?"ÿßŸÜÿ≥ÿ™ŸÇÿ±ÿßŸÖ":m.platform==="twitter"?"ÿ™ŸàŸäÿ™ÿ±":m.platform==="tiktok"?"ÿ™ŸäŸÉ ÿ™ŸàŸÉ":m.platform==="snapchat"?"ÿ≥ŸÜÿßÿ® ÿ¥ÿßÿ™":"ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÜÿµÿßÿ™"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:[m.status==="published"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-3 h-3"})," ",m.views||0]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ot,{className:"w-3 h-3"})," ",m.likes||0]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qs,{className:"w-3 h-3"})," ",m.comments||0]})]}),M===m.id?e.jsx(ja,{className:"w-5 h-5"}):e.jsx(Jt,{className:"w-5 h-5"})]})]})}),M===m.id&&e.jsxs("div",{className:"border-t border-slate-700/50 p-4 bg-slate-800/30",children:[m.description&&e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:m.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>c(m.id,"published"),className:"bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-400 px-3 py-1 rounded-lg text-sm",children:"ŸÜÿ¥ÿ± ÿßŸÑÿ¢ŸÜ"}),e.jsx("button",{onClick:()=>c(m.id,"scheduled"),className:"bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 px-3 py-1 rounded-lg text-sm",children:"ÿ¨ÿØŸàŸÑÿ©"})]}),m.status==="scheduled"&&e.jsx("button",{onClick:()=>c(m.id,"published"),className:"bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-400 px-3 py-1 rounded-lg text-sm",children:"ŸÜÿ¥ÿ± ÿßŸÑÿ¢ŸÜ"}),e.jsx("button",{onClick:()=>c(m.id,"archived"),className:"bg-slate-500/20 hover:bg-slate-500/30 text-slate-400 px-3 py-1 rounded-lg text-sm",children:"ÿ£ÿ±ÿ¥ŸÅÿ©"}),e.jsx("button",{onClick:()=>R(m.id),className:"bg-red-500/20 hover:bg-red-500/30 text-red-400 px-3 py-1 rounded-lg text-sm",children:"ÿ≠ÿ∞ŸÅ"})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-3",children:["ÿ£ŸèŸÜÿ¥ÿ¶: ",_(m.createdAt),m.publishedAt&&` ‚Ä¢ ŸÜŸèÿ¥ÿ±: ${_(m.publishedAt)}`]})]})]},m.id))})]}),n==="calendar"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(mt,{className:"w-6 h-6 text-indigo-400"}),"ÿ¨ÿØŸàŸÑ ŸÜÿ¥ÿ± ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ"]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:L.published}),e.jsx("div",{className:"text-sm text-slate-400",children:"ŸÖŸÜÿ¥Ÿàÿ±"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:L.scheduled}),e.jsx("div",{className:"text-sm text-slate-400",children:"ŸÖÿ¨ÿØŸàŸÑ"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-400",children:L.drafts}),e.jsx("div",{className:"text-sm text-slate-400",children:"ŸÖÿ≥ŸàÿØÿ©"})]})]}),e.jsx("h3",{className:"font-bold mb-3",children:"ÿßŸÑŸÖŸÜÿ¥Ÿàÿ±ÿßÿ™ ÿßŸÑŸÖÿ¨ÿØŸàŸÑÿ© ÿßŸÑŸÇÿßÿØŸÖÿ©"}),e.jsx("div",{className:"space-y-2",children:r.filter(m=>m.status==="scheduled").length===0?e.jsx("div",{className:"text-center py-8 text-slate-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÜÿ¥Ÿàÿ±ÿßÿ™ ŸÖÿ¨ÿØŸàŸÑÿ©"}):r.filter(m=>m.status==="scheduled").map(m=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[O(m.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.title}),e.jsx("div",{className:"text-xs text-slate-500",children:m.scheduledAt?_(m.scheduledAt):"ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ"})]})]}),q(m.platform)]},m.id))})]})]}),n==="campaigns"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(dt,{className:"w-6 h-6 text-amber-400"}),"ÿßŸÑÿ≠ŸÖŸÑÿßÿ™ ÿßŸÑÿ•ÿπŸÑÿßŸÜŸäÿ©"]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-amber-600/10 border border-amber-500/30 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:$.total}),e.jsx("div",{className:"text-sm text-slate-400",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ≠ŸÖŸÑÿßÿ™"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border border-emerald-500/30 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-400",children:$.active}),e.jsx("div",{className:"text-sm text-slate-400",children:"ŸÜÿ¥ÿ∑ÿ© ÿßŸÑÿ¢ŸÜ"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 border border-blue-500/30 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400",children:$.totalBudget.toLocaleString()}),e.jsx("div",{className:"text-sm text-slate-400",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ©"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 border border-purple-500/30 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:$.totalSpent.toLocaleString()}),e.jsx("div",{className:"text-sm text-slate-400",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿµÿ±ŸàŸÅ"})]})]}),e.jsx("div",{className:"space-y-3",children:E.length===0?e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-8 text-center",children:[e.jsx(dt,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("div",{className:"text-slate-400",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ŸÖŸÑÿßÿ™"})]}):E.map(m=>e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:m.name}),e.jsx("div",{className:"text-sm text-slate-500",children:m.platform})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${m.status==="active"?"bg-emerald-500/20 text-emerald-400":m.status==="paused"?"bg-yellow-500/20 text-yellow-400":m.status==="completed"?"bg-blue-500/20 text-blue-400":"bg-slate-500/20 text-slate-400"}`,children:m.status==="active"?"ŸÜÿ¥ÿ∑ÿ©":m.status==="paused"?"ŸÖÿ™ŸàŸÇŸÅÿ©":m.status==="completed"?"ŸÖŸÉÿ™ŸÖŸÑÿ©":"ŸÖÿ≥ŸàÿØÿ©"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-2",children:[e.jsx("div",{className:"font-bold",children:m.impressions.toLocaleString()}),e.jsx("div",{className:"text-xs text-slate-500",children:"ÿ∏ŸáŸàÿ±"})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-2",children:[e.jsx("div",{className:"font-bold",children:m.clicks.toLocaleString()}),e.jsx("div",{className:"text-xs text-slate-500",children:"ŸÜŸÇÿ±ÿßÿ™"})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-2",children:[e.jsx("div",{className:"font-bold text-emerald-400",children:m.conversions}),e.jsx("div",{className:"text-xs text-slate-500",children:"ÿ™ÿ≠ŸàŸäŸÑÿßÿ™"})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-2",children:[e.jsx("div",{className:"font-bold text-amber-400",children:m.spent.toLocaleString()}),e.jsx("div",{className:"text-xs text-slate-500",children:"ŸÖÿµÿ±ŸàŸÅ"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[e.jsx("span",{children:"ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖÿ©"}),e.jsxs("span",{children:[m.budget>0?(m.spent/m.budget*100).toFixed(0):0,"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500",style:{width:`${m.budget>0?Math.min(m.spent/m.budget*100,100):0}%`}})})]})]},m.id))})]}),n==="reports"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Us,{className:"w-6 h-6 text-indigo-400"}),"ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™"]}),e.jsxs("select",{value:T,onChange:m=>j(m.target.value),className:"bg-slate-700/50 border border-slate-600 rounded-xl px-3 py-2 text-sm",children:[e.jsx("option",{value:"week",children:"ÿ¢ÿÆÿ± ÿ£ÿ≥ÿ®Ÿàÿπ"}),e.jsx("option",{value:"month",children:"ÿ¢ÿÆÿ± ÿ¥Ÿáÿ±"}),e.jsx("option",{value:"quarter",children:"ÿ¢ÿÆÿ± 3 ÿ£ÿ¥Ÿáÿ±"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5 text-emerald-400"}),"ŸÜŸÖŸà ÿßŸÑÿ≠ÿ≥ÿßÿ®"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold text-indigo-400",children:i.followers.toLocaleString()}),e.jsx("div",{className:"text-sm text-slate-400",children:"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ™ÿßÿ®ÿπŸäŸÜ"}),e.jsxs("div",{className:`text-xs mt-1 ${i.followersGrowth>=0?"text-emerald-400":"text-red-400"}`,children:[i.followersGrowth>=0?"+":"",i.followersGrowth,"% Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±"]})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsxs("div",{className:"text-3xl font-bold text-pink-400",children:[i.engagementRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-slate-400",children:"ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿ™ŸÅÿßÿπŸÑ"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-700/30 rounded-xl",children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-400",children:i.totalReach.toLocaleString()}),e.jsx("div",{className:"text-sm text-slate-400",children:"ÿßŸÑŸàÿµŸàŸÑ ÿßŸÑŸÉŸÑŸä"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5 text-amber-400"}),"ÿ£ŸÅÿ∂ŸÑ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿ£ÿØÿßÿ°Ÿã"]}),L.bestPost?e.jsxs("div",{className:"p-4 bg-gradient-to-br from-amber-500/10 to-amber-600/5 border border-amber-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[O(L.bestPost.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:L.bestPost.title}),e.jsx("div",{className:"text-xs text-slate-500",children:L.bestPost.publishedAt?_(L.bestPost.publishedAt):""})]})]}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-4 h-4 text-slate-400"}),L.bestPost.views||0," ŸÖÿ¥ÿßŸáÿØÿ©"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ot,{className:"w-4 h-4 text-pink-400"}),L.bestPost.likes||0," ÿ•ÿπÿ¨ÿßÿ®"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qs,{className:"w-4 h-4 text-blue-400"}),L.bestPost.comments||0," ÿ™ÿπŸÑŸäŸÇ"]})]})]}):e.jsx("div",{className:"text-center py-8 text-slate-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÜÿ¥Ÿàÿ±ÿßÿ™ ÿ®ÿπÿØ"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-4",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5 text-emerald-400"}),"ÿ£ÿØÿßÿ° ÿßŸÑÿ≠ŸÖŸÑÿßÿ™"]}),e.jsx("div",{className:"space-y-3",children:E.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500",children:"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ŸÖŸÑÿßÿ™"}):E.slice(0,5).map(m=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.name}),e.jsx("div",{className:"text-xs text-slate-500",children:m.platform})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"text-emerald-400 font-bold",children:[m.conversions," ÿ™ÿ≠ŸàŸäŸÑ"]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["CPC: ",m.clicks>0?(m.spent/m.clicks).toFixed(2):0," ÿ±.ÿ≥"]})]})]},m.id))})]})]})]}),e.jsxs("div",{className:"fixed bottom-4 left-4 bg-slate-800/90 backdrop-blur border border-indigo-500/30 rounded-xl p-3 text-xs text-slate-400 max-w-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 text-indigo-400 font-medium mb-1",children:[e.jsx(so,{className:"w-3 h-3"}),"ÿµŸÑÿßÿ≠Ÿäÿßÿ™ŸÉ"]}),e.jsx("p",{children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ŸàÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ™ÿ≥ŸàŸäŸÇŸäÿ© ŸÅŸÇÿ∑. ŸÑÿß ŸäŸÖŸÉŸÜŸÉ ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿ£Ÿà ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠."})]})]})},so=({className:s})=>e.jsxs("svg",{className:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),He=({children:s})=>{const{user:a,loading:n}=Ee();return n?e.jsx("div",{className:"p-8 text-center",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."}):a?e.jsx(e.Fragment,{children:s}):e.jsx(Ya,{to:"/login",replace:!0})},to=()=>{var B;const{role:s,loading:a}=Ee(),[n,d]=t.useState([]),[i,y]=t.useState(!0),[r,D]=t.useState(null);if(t.useEffect(()=>{a||s!=="developer"||(async()=>{try{D(null);const P=be(se(S,"orders"),ss("createdAt","desc"),bs(10)),T=(await pe(P)).docs.map(j=>{var U,g,w,M,b,h;const f=j.data();return{id:j.id,restaurantId:f.restaurantId??null,firstItemOwnerId:((g=(U=f==null?void 0:f.items)==null?void 0:U[0])==null?void 0:g.ownerId)??null,customerId:f.customerId??null,createdAtISO:((h=(b=(M=(w=f.createdAt)==null?void 0:w.toDate)==null?void 0:M.call(w))==null?void 0:b.toISOString)==null?void 0:h.call(b))??null}});d(T)}catch(P){if(String((P==null?void 0:P.message)||"").includes("index"))try{const T=(await pe(se(S,"orders"))).docs.map(j=>{var U,g,w,M,b,h;const f=j.data();return{id:j.id,restaurantId:f.restaurantId??null,firstItemOwnerId:((g=(U=f==null?void 0:f.items)==null?void 0:U[0])==null?void 0:g.ownerId)??null,customerId:f.customerId??null,createdAtISO:((h=(b=(M=(w=f.createdAt)==null?void 0:w.toDate)==null?void 0:M.call(w))==null?void 0:b.toISOString)==null?void 0:h.call(b))??null}});d(T),D("‚ö†Ô∏è ŸÖÿß ŸÅŸäŸá ŸÅŸáÿ±ÿ≥ ŸÑŸÄ createdAt ‚Äî ÿπÿ±ÿ∂ŸÜÿß ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ÿØŸàŸÜ ÿ™ÿ±ÿ™Ÿäÿ®.")}catch(N){D("‚ùå ŸÅÿ¥ŸÑ ÿßŸÑÿ¨ŸÑÿ® ÿ≠ÿ™Ÿâ ÿ®ÿØŸàŸÜ ÿ™ÿ±ÿ™Ÿäÿ®: "+((N==null?void 0:N.message)||N))}else D("‚ùå ÿÆÿ∑ÿ£ ÿßŸÑÿ¨ŸÑÿ®: "+((P==null?void 0:P.message)||P))}finally{y(!1)}})()},[a,s]),a)return e.jsx("div",{className:"p-8 text-center",children:"ÿ¨ÿßÿ±Ÿê ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ..."});if(s!=="developer")return e.jsx(Ya,{to:"/",replace:!0});const E=(B=Cs.options)==null?void 0:B.projectId;return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:"üîß DEBUG: Orders Snapshot (ŸÑŸÑŸÖÿ∑Ÿàÿ± ŸÅŸÇÿ∑)"}),e.jsxs("div",{className:"text-sm",children:["ProjectId: ",e.jsx("b",{children:String(E)})]}),r&&e.jsx("div",{className:"text-red-600 text-sm",children:r}),i&&e.jsx("div",{children:"‚è≥ Loading‚Ä¶"}),!i&&n.length===0&&e.jsxs("div",{className:"text-gray-600",children:["ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£Ÿä ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ŸÅŸä collection: ",e.jsx("code",{children:"orders"})," ŸÅŸä Ÿáÿ∞ÿß ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ."]}),n.map(P=>e.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[e.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",P.id]}),e.jsxs("div",{children:["restaurantId: ",e.jsx("b",{children:String(P.restaurantId)})]}),e.jsxs("div",{children:["items[0].ownerId: ",e.jsx("b",{children:String(P.firstItemOwnerId)})]}),e.jsxs("div",{children:["customerId: ",e.jsx("b",{children:String(P.customerId)})]}),e.jsxs("div",{children:["createdAt: ",e.jsx("b",{children:P.createdAtISO||"‚Äî"})]})]},P.id))]})},ao=30*60*1e3,lo=60*60*1e3,ro=5*60*1e3,no=(s={})=>{const{user:a,role:n,logout:d}=Ee(),i=ze(),y=t.useRef(null),r=t.useRef(null),D=t.useRef(!1),E=t.useCallback(()=>n==="developer"||n==="admin"||n==="supervisor"||n==="social_media"?lo:ao,[n]),B=t.useCallback(()=>{D.current||(D.current=!0,i.warning("ÿ≥Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿÆŸÑÿßŸÑ 5 ÿØŸÇÿßÿ¶ŸÇ ÿ®ÿ≥ÿ®ÿ® ÿπÿØŸÖ ÿßŸÑŸÜÿ¥ÿßÿ∑. ÿ≠ÿ±ŸëŸÉ ÿßŸÑŸÅÿ£ÿ±ÿ© ŸÑŸÑÿ®ŸÇÿßÿ° ŸÖÿ™ÿµŸÑÿßŸã.",{duration:1e4}))},[i]),P=t.useCallback(()=>{if(!a||s.disabled)return;D.current=!1,y.current&&clearTimeout(y.current),r.current&&clearTimeout(r.current);const T=E();r.current=setTimeout(()=>{B()},T-ro),y.current=setTimeout(async()=>{i.info("ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿ®ÿ≥ÿ®ÿ® ÿπÿØŸÖ ÿßŸÑŸÜÿ¥ÿßÿ∑ üëã"),await d()},T),localStorage.setItem("broast_last_activity",Date.now().toString())},[a,s.disabled,E,B,i,d]),N=t.useCallback(()=>{const T=localStorage.getItem("broast_last_activity");if(T){const j=Date.now()-parseInt(T,10),f=E();if(j>f)return i.info("ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ÿ®ÿ≥ÿ®ÿ® ÿπÿØŸÖ ÿßŸÑŸÜÿ¥ÿßÿ∑"),d(),!1}return!0},[E,i,d]);return t.useEffect(()=>{if(!a||s.disabled||!N())return;const T=["mousedown","mousemove","keydown","scroll","touchstart","click","focus"];return T.forEach(j=>{document.addEventListener(j,P,{passive:!0})}),P(),()=>{T.forEach(j=>{document.removeEventListener(j,P)}),y.current&&clearTimeout(y.current),r.current&&clearTimeout(r.current)}},[a,s.disabled,P,N]),{resetTimer:P,isActive:!!a&&!s.disabled}},io=()=>{const{items:s,subtotal:a}=Na(),n=fs();if(s.length===0)return null;const d=s.reduce((i,y)=>i+y.qty,0);return e.jsxs("button",{onClick:()=>n("/cart"),className:`fixed bottom-20 left-4 right-4 mx-auto max-w-md z-50 
        bg-gradient-to-r from-green-500 to-green-600 text-white 
        rounded-2xl shadow-2xl shadow-green-500/30
        px-6 py-4 flex items-center justify-between
        active:scale-95 transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"w-8 h-8"}),e.jsx("span",{className:`absolute -top-2 -right-2 bg-white text-green-600 
            w-6 h-6 rounded-full text-sm font-bold flex items-center justify-center`,children:d})]}),e.jsx("span",{className:"text-lg font-bold",children:"ÿπÿ±ÿ∂ ÿßŸÑÿ≥ŸÑÿ©"})]}),e.jsxs("span",{className:"text-xl font-bold",children:[a.toFixed(0)," ÿ±.ÿ≥"]})]})};function co(){const{locationRequired:s,refreshUserData:a,loading:n,user:d}=Ee();return no({disabled:!0}),!n&&s?e.jsx(lc,{onLocationSaved:a}):e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[e.jsx(ac,{}),e.jsx(tc,{}),e.jsx(Xi,{})]}),e.jsx("div",{className:"h-[130px] sm:h-[150px]"}),e.jsx(io,{}),e.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:e.jsxs(Gn,{children:[e.jsx(Re,{path:"/",element:e.jsx(rc,{})}),e.jsx(Re,{path:"/restaurants",element:e.jsx(hc,{})}),e.jsx(Re,{path:"/menu",element:e.jsx(yc,{})}),e.jsx(Re,{path:"/cart",element:e.jsx(kc,{})}),e.jsx(Re,{path:"/login",element:e.jsx(Rc,{})}),e.jsx(Re,{path:"/customer-login",element:e.jsx(Fc,{})}),e.jsx(Re,{path:"/register",element:e.jsx(Ec,{})}),e.jsx(Re,{path:"/register/form",element:e.jsx(Pc,{})}),e.jsx(Re,{path:"/register-owner",element:e.jsx($c,{})}),e.jsx(Re,{path:"/privacy-policy",element:e.jsx(_c,{})}),e.jsx(Re,{path:"/terms",element:e.jsx(Oc,{})}),e.jsx(Re,{path:"/account-deleted",element:e.jsx(Lc,{})}),e.jsx(Re,{path:"/setup-dev",element:e.jsx(Vd,{})}),e.jsx(Re,{path:"/chat",element:e.jsx(He,{children:e.jsx(Fe,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(Id,{})})})}),e.jsx(Re,{path:"/notifications",element:e.jsx(He,{children:e.jsx(Fe,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(Dd,{})})})}),e.jsx(Re,{path:"/support",element:e.jsx(He,{children:e.jsx(Fe,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(Td,{})})})}),e.jsx(Re,{path:"/report-problem",element:e.jsx(He,{children:e.jsx(Fe,{allow:["customer","courier","owner","developer"],children:e.jsx(Gd,{})})})}),e.jsx(Re,{path:"/checkout",element:e.jsx(Bc,{})}),e.jsx(Re,{path:"/orders",element:e.jsx(He,{children:e.jsx(Fe,{allow:["customer","admin","developer"],children:e.jsx(Yc,{})})})}),e.jsx(Re,{path:"/profile",element:e.jsx(He,{children:e.jsx(Fe,{allow:["customer","courier","owner","admin","developer"],children:e.jsx(Kc,{})})})}),e.jsx(Re,{path:"/owner",element:e.jsx(He,{children:e.jsx(Fe,{allow:["owner","developer"],children:e.jsx(Jc,{})})})}),e.jsx(Re,{path:"/owner/menu",element:e.jsx(He,{children:e.jsx(Fe,{allow:["owner","developer"],children:e.jsx(Zc,{})})})}),e.jsx(Re,{path:"/owner/orders",element:e.jsx(He,{children:e.jsx(Fe,{allow:["owner","developer"],children:e.jsx(sd,{})})})}),e.jsx(Re,{path:"/owner/edit",element:e.jsx(He,{children:e.jsx(Fe,{allow:["owner","developer"],children:e.jsx(ad,{})})})}),e.jsx(Re,{path:"/owner/courier-requests",element:e.jsx(He,{children:e.jsx(Fe,{allow:["owner","developer"],children:e.jsx(ld,{})})})}),e.jsx(Re,{path:"/owner/packages",element:e.jsx(He,{children:e.jsx(Fe,{allow:["owner","developer"],children:e.jsx(nd,{})})})}),e.jsx(Re,{path:"/owner/offers",element:e.jsx(He,{children:e.jsx(Fe,{allow:["owner","developer"],children:e.jsx(od,{})})})}),e.jsx(Re,{path:"/owner/stories",element:e.jsx(He,{children:e.jsx(Fe,{allow:["owner","developer"],children:e.jsx(md,{})})})}),e.jsx(Re,{path:"/owner/promotion",element:e.jsx(He,{children:e.jsx(Fe,{allow:["owner","developer"],children:e.jsx(id,{})})})}),e.jsx(Re,{path:"/courier",element:e.jsx(He,{children:e.jsx(Fe,{allow:["courier","developer"],children:e.jsx(yd,{})})})}),e.jsx(Re,{path:"/courier/hiring",element:e.jsx(He,{children:e.jsx(Fe,{allow:["courier","developer"],children:e.jsx(wd,{})})})}),e.jsx(Re,{path:"/admin",element:e.jsx(He,{children:e.jsx(Fe,{allow:["admin","developer"],children:e.jsx(Ed,{})})})}),e.jsx(Re,{path:"/admin/restaurants",element:e.jsx(He,{children:e.jsx(Fe,{allow:["admin","developer"],children:e.jsx($d,{})})})}),e.jsx(Re,{path:"/admin/orders",element:e.jsx(He,{children:e.jsx(Fe,{allow:["admin","developer"],children:e.jsx(Fd,{})})})}),e.jsx(Re,{path:"/developer",element:e.jsx(He,{children:e.jsx(Fe,{allow:["developer","admin"],children:e.jsx(_d,{})})})}),e.jsx(Re,{path:"/support-admin",element:e.jsx(He,{children:e.jsx(Fe,{allow:["developer"],children:e.jsx(Hd,{})})})}),e.jsx(Re,{path:"/problems-admin",element:e.jsx(He,{children:e.jsx(Fe,{allow:["developer"],children:e.jsx(Qd,{})})})}),e.jsx(Re,{path:"/accounting",element:e.jsx(He,{children:e.jsx(Fe,{allow:["developer"],children:e.jsx(Kd,{})})})}),e.jsx(Re,{path:"/reports-admin",element:e.jsx(He,{children:e.jsx(Fe,{allow:["admin","developer"],children:e.jsx(Yd,{})})})}),e.jsx(Re,{path:"/owner/wallet",element:e.jsx(He,{children:e.jsx(Fe,{allow:["owner","developer"],children:e.jsx(Jd,{})})})}),e.jsx(Re,{path:"/courier/wallet",element:e.jsx(He,{children:e.jsx(Fe,{allow:["courier","developer"],children:e.jsx(Xd,{})})})}),e.jsx(Re,{path:"/supervisor",element:e.jsx(He,{children:e.jsx(Fe,{allow:["supervisor","developer"],children:e.jsx(Zd,{})})})}),e.jsx(Re,{path:"/social-media",element:e.jsx(He,{children:e.jsx(Fe,{allow:["social_media","developer"],children:e.jsx(eo,{})})})}),e.jsx(Re,{path:"/__debug_orders",element:e.jsx(to,{})}),e.jsx(Re,{path:"*",element:e.jsx(Ya,{to:"/",replace:!0})})]})}),e.jsx(sc,{})]})}t.createContext(void 0);const oo=({children:s})=>e.jsx(e.Fragment,{children:s});Pl.createRoot(document.getElementById("root")).render(e.jsx(Yn.StrictMode,{children:e.jsx(Kn,{children:e.jsx(pc,{children:e.jsx(Zi,{children:e.jsx(Ji,{children:e.jsxs(oo,{children:["   ",e.jsx(co,{})]})})})})})}));export{Bs as _,S as d,ga as n};
