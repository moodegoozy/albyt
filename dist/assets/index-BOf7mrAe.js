function I1(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function S1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qv={exports:{}},Od={},Hv={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rc=Symbol.for("react.element"),C1=Symbol.for("react.portal"),A1=Symbol.for("react.fragment"),R1=Symbol.for("react.strict_mode"),P1=Symbol.for("react.profiler"),D1=Symbol.for("react.provider"),L1=Symbol.for("react.context"),O1=Symbol.for("react.forward_ref"),M1=Symbol.for("react.suspense"),V1=Symbol.for("react.memo"),F1=Symbol.for("react.lazy"),qx=Symbol.iterator;function U1(t){return t===null||typeof t!="object"?null:(t=qx&&t[qx]||t["@@iterator"],typeof t=="function"?t:null)}var Wv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kv=Object.assign,Gv={};function eo(t,e,n){this.props=t,this.context=e,this.refs=Gv,this.updater=n||Wv}eo.prototype.isReactComponent={};eo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qv(){}Qv.prototype=eo.prototype;function cp(t,e,n){this.props=t,this.context=e,this.refs=Gv,this.updater=n||Wv}var up=cp.prototype=new Qv;up.constructor=cp;Kv(up,eo.prototype);up.isPureReactComponent=!0;var Hx=Array.isArray,Xv=Object.prototype.hasOwnProperty,dp={current:null},Yv={key:!0,ref:!0,__self:!0,__source:!0};function Jv(t,e,n){var s,i={},a=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Xv.call(e,s)&&!Yv.hasOwnProperty(s)&&(i[s]=e[s]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(s in c=t.defaultProps,c)i[s]===void 0&&(i[s]=c[s]);return{$$typeof:rc,type:t,key:a,ref:o,props:i,_owner:dp.current}}function $1(t,e){return{$$typeof:rc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hp(t){return typeof t=="object"&&t!==null&&t.$$typeof===rc}function B1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wx=/\/+/g;function Mh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?B1(""+t.key):e.toString(36)}function bu(t,e,n,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rc:case C1:o=!0}}if(o)return o=t,i=i(o),t=s===""?"."+Mh(o,0):s,Hx(i)?(n="",t!=null&&(n=t.replace(Wx,"$&/")+"/"),bu(i,e,n,"",function(d){return d})):i!=null&&(hp(i)&&(i=$1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Wx,"$&/")+"/")+t)),e.push(i)),1;if(o=0,s=s===""?".":s+":",Hx(t))for(var c=0;c<t.length;c++){a=t[c];var u=s+Mh(a,c);o+=bu(a,e,n,u,i)}else if(u=U1(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=s+Mh(a,c++),o+=bu(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qc(t,e,n){if(t==null)return t;var s=[],i=0;return bu(t,s,"","",function(a){return e.call(n,a,i++)}),s}function z1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},Nu={transition:null},q1={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Nu,ReactCurrentOwner:dp};function Zv(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Qc,forEach:function(t,e,n){Qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qc(t,function(){e++}),e},toArray:function(t){return Qc(t,function(e){return e})||[]},only:function(t){if(!hp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=eo;me.Fragment=A1;me.Profiler=P1;me.PureComponent=cp;me.StrictMode=R1;me.Suspense=M1;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q1;me.act=Zv;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Kv({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=dp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Xv.call(e,u)&&!Yv.hasOwnProperty(u)&&(s[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}return{$$typeof:rc,type:t.type,key:i,ref:a,props:s,_owner:o}};me.createContext=function(t){return t={$$typeof:L1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:D1,_context:t},t.Consumer=t};me.createElement=Jv;me.createFactory=function(t){var e=Jv.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:O1,render:t}};me.isValidElement=hp;me.lazy=function(t){return{$$typeof:F1,_payload:{_status:-1,_result:t},_init:z1}};me.memo=function(t,e){return{$$typeof:V1,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Nu.transition;Nu.transition={};try{t()}finally{Nu.transition=e}};me.unstable_act=Zv;me.useCallback=function(t,e){return Qt.current.useCallback(t,e)};me.useContext=function(t){return Qt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Qt.current.useEffect(t,e)};me.useId=function(){return Qt.current.useId()};me.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Qt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};me.useRef=function(t){return Qt.current.useRef(t)};me.useState=function(t){return Qt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Qt.current.useTransition()};me.version="18.3.1";Hv.exports=me;var I=Hv.exports;const ew=S1(I),H1=I1({__proto__:null,default:ew},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1=I,K1=Symbol.for("react.element"),G1=Symbol.for("react.fragment"),Q1=Object.prototype.hasOwnProperty,X1=W1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y1={key:!0,ref:!0,__self:!0,__source:!0};function tw(t,e,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)Q1.call(e,s)&&!Y1.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:K1,type:t,key:a,ref:o,props:i,_owner:X1.current}}Od.Fragment=G1;Od.jsx=tw;Od.jsxs=tw;qv.exports=Od;var r=qv.exports,Of={},nw={exports:{}},Nn={},sw={exports:{}},rw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,X){var se=F.length;F.push(X);e:for(;0<se;){var ve=se-1>>>1,pe=F[ve];if(0<i(pe,X))F[ve]=X,F[se]=pe,se=ve;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var X=F[0],se=F.pop();if(se!==X){F[0]=se;e:for(var ve=0,pe=F.length,Le=pe>>>1;ve<Le;){var Pt=2*(ve+1)-1,Bn=F[Pt],ln=Pt+1,cn=F[ln];if(0>i(Bn,se))ln<pe&&0>i(cn,Bn)?(F[ve]=cn,F[ln]=se,ve=ln):(F[ve]=Bn,F[Pt]=se,ve=Pt);else if(ln<pe&&0>i(cn,se))F[ve]=cn,F[ln]=se,ve=ln;else break e}}return X}function i(F,X){var se=F.sortIndex-X.sortIndex;return se!==0?se:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,m=null,p=3,v=!1,_=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(F){for(var X=n(d);X!==null;){if(X.callback===null)s(d);else if(X.startTime<=F)s(d),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(d)}}function j(F){if(R=!1,y(F),!_)if(n(u)!==null)_=!0,$(C);else{var X=n(d);X!==null&&B(j,X.startTime-F)}}function C(F,X){_=!1,R&&(R=!1,b(x),x=-1),v=!0;var se=p;try{for(y(X),m=n(u);m!==null&&(!(m.expirationTime>X)||F&&!P());){var ve=m.callback;if(typeof ve=="function"){m.callback=null,p=m.priorityLevel;var pe=ve(m.expirationTime<=X);X=t.unstable_now(),typeof pe=="function"?m.callback=pe:m===n(u)&&s(u),y(X)}else s(u);m=n(u)}if(m!==null)var Le=!0;else{var Pt=n(d);Pt!==null&&B(j,Pt.startTime-X),Le=!1}return Le}finally{m=null,p=se,v=!1}}var O=!1,N=null,x=-1,E=5,k=-1;function P(){return!(t.unstable_now()-k<E)}function L(){if(N!==null){var F=t.unstable_now();k=F;var X=!0;try{X=N(!0,F)}finally{X?D():(O=!1,N=null)}}else O=!1}var D;if(typeof w=="function")D=function(){w(L)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,V=ie.port2;ie.port1.onmessage=L,D=function(){V.postMessage(null)}}else D=function(){T(L,0)};function $(F){N=F,O||(O=!0,D())}function B(F,X){x=T(function(){F(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,$(C))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var se=p;p=X;try{return F()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var se=p;p=F;try{return X()}finally{p=se}},t.unstable_scheduleCallback=function(F,X,se){var ve=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ve+se:ve):se=ve,F){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=se+pe,F={id:h++,callback:X,priorityLevel:F,startTime:se,expirationTime:pe,sortIndex:-1},se>ve?(F.sortIndex=se,e(d,F),n(u)===null&&F===n(d)&&(R?(b(x),x=-1):R=!0,B(j,se-ve))):(F.sortIndex=pe,e(u,F),_||v||(_=!0,$(C))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var X=p;return function(){var se=p;p=X;try{return F.apply(this,arguments)}finally{p=se}}}})(rw);sw.exports=rw;var J1=sw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1=I,_n=J1;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iw=new Set,El={};function Oi(t,e){Va(t,e),Va(t+"Capture",e)}function Va(t,e){for(El[t]=e,t=0;t<e.length;t++)iw.add(e[t])}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mf=Object.prototype.hasOwnProperty,e2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kx={},Gx={};function t2(t){return Mf.call(Gx,t)?!0:Mf.call(Kx,t)?!1:e2.test(t)?Gx[t]=!0:(Kx[t]=!0,!1)}function n2(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function s2(t,e,n,s){if(e===null||typeof e>"u"||n2(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,s,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var fp=/[\-:]([a-z])/g;function mp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fp,mp);Rt[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fp,mp);Rt[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fp,mp);Rt[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function pp(t,e,n,s){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(s2(e,n,i,s)&&(n=null),s||i===null?t2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,s=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var tr=Z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xc=Symbol.for("react.element"),ma=Symbol.for("react.portal"),pa=Symbol.for("react.fragment"),gp=Symbol.for("react.strict_mode"),Vf=Symbol.for("react.profiler"),aw=Symbol.for("react.provider"),ow=Symbol.for("react.context"),xp=Symbol.for("react.forward_ref"),Ff=Symbol.for("react.suspense"),Uf=Symbol.for("react.suspense_list"),yp=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),lw=Symbol.for("react.offscreen"),Qx=Symbol.iterator;function Uo(t){return t===null||typeof t!="object"?null:(t=Qx&&t[Qx]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,Vh;function Yo(t){if(Vh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vh=e&&e[1]||""}return`
`+Vh+t}var Fh=!1;function Uh(t,e){if(!t||Fh)return"";Fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Fh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function r2(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=Uh(t.type,!1),t;case 11:return t=Uh(t.type.render,!1),t;case 1:return t=Uh(t.type,!0),t;default:return""}}function $f(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pa:return"Fragment";case ma:return"Portal";case Vf:return"Profiler";case gp:return"StrictMode";case Ff:return"Suspense";case Uf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ow:return(t.displayName||"Context")+".Consumer";case aw:return(t._context.displayName||"Context")+".Provider";case xp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yp:return e=t.displayName||null,e!==null?e:$f(t.type)||"Memo";case fr:e=t._payload,t=t._init;try{return $f(t(e))}catch{}}return null}function i2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $f(e);case 8:return e===gp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function a2(t){var e=cw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yc(t){t._valueTracker||(t._valueTracker=a2(t))}function uw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=cw(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function qu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bf(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xx(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Or(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dw(t,e){e=e.checked,e!=null&&pp(t,"checked",e,!1)}function zf(t,e){dw(t,e);var n=Or(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qf(t,e.type,n):e.hasOwnProperty("defaultValue")&&qf(t,e.type,Or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qf(t,e,n){(e!=="number"||qu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jo=Array.isArray;function Ia(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Or(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Hf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Jo(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Or(n)}}function hw(t,e){var n=Or(e.value),s=Or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Zx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jc,mw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jc=Jc||document.createElement("div"),Jc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o2=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){o2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function pw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function gw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=pw(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}var l2=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kf(t,e){if(e){if(l2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Gf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qf=null;function vp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xf=null,Sa=null,Ca=null;function e0(t){if(t=oc(t)){if(typeof Xf!="function")throw Error(G(280));var e=t.stateNode;e&&(e=$d(e),Xf(t.stateNode,t.type,e))}}function xw(t){Sa?Ca?Ca.push(t):Ca=[t]:Sa=t}function yw(){if(Sa){var t=Sa,e=Ca;if(Ca=Sa=null,e0(t),e)for(t=0;t<e.length;t++)e0(e[t])}}function vw(t,e){return t(e)}function ww(){}var $h=!1;function _w(t,e,n){if($h)return t(e,n);$h=!0;try{return vw(t,e,n)}finally{$h=!1,(Sa!==null||Ca!==null)&&(ww(),yw())}}function Tl(t,e){var n=t.stateNode;if(n===null)return null;var s=$d(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Yf=!1;if(Ws)try{var $o={};Object.defineProperty($o,"passive",{get:function(){Yf=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{Yf=!1}function c2(t,e,n,s,i,a,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ll=!1,Hu=null,Wu=!1,Jf=null,u2={onError:function(t){ll=!0,Hu=t}};function d2(t,e,n,s,i,a,o,c,u){ll=!1,Hu=null,c2.apply(u2,arguments)}function h2(t,e,n,s,i,a,o,c,u){if(d2.apply(this,arguments),ll){if(ll){var d=Hu;ll=!1,Hu=null}else throw Error(G(198));Wu||(Wu=!0,Jf=d)}}function Mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function t0(t){if(Mi(t)!==t)throw Error(G(188))}function f2(t){var e=t.alternate;if(!e){if(e=Mi(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return t0(i),t;if(a===s)return t0(i),e;a=a.sibling}throw Error(G(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,s=a;break}if(c===s){o=!0,s=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,s=i;break}if(c===s){o=!0,s=a,n=i;break}c=c.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==s)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function Nw(t){return t=f2(t),t!==null?jw(t):null}function jw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jw(t);if(e!==null)return e;t=t.sibling}return null}var Ew=_n.unstable_scheduleCallback,n0=_n.unstable_cancelCallback,m2=_n.unstable_shouldYield,p2=_n.unstable_requestPaint,rt=_n.unstable_now,g2=_n.unstable_getCurrentPriorityLevel,wp=_n.unstable_ImmediatePriority,kw=_n.unstable_UserBlockingPriority,Ku=_n.unstable_NormalPriority,x2=_n.unstable_LowPriority,Tw=_n.unstable_IdlePriority,Md=null,ms=null;function y2(t){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(Md,t,void 0,(t.current.flags&128)===128)}catch{}}var Jn=Math.clz32?Math.clz32:_2,v2=Math.log,w2=Math.LN2;function _2(t){return t>>>=0,t===0?32:31-(v2(t)/w2|0)|0}var Zc=64,eu=4194304;function Zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gu(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?s=Zo(c):(a&=o,a!==0&&(s=Zo(a)))}else o=n&~i,o!==0?s=Zo(o):a!==0&&(s=Zo(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Jn(e),i=1<<n,s|=t[n],e&=~i;return s}function b2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N2(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Jn(a),c=1<<o,u=i[o];u===-1?(!(c&n)||c&s)&&(i[o]=b2(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function Zf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Iw(){var t=Zc;return Zc<<=1,!(Zc&4194240)&&(Zc=64),t}function Bh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ic(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jn(e),t[e]=n}function j2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Jn(n),a=1<<i;e[i]=0,s[i]=-1,t[i]=-1,n&=~a}}function _p(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Jn(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}var Te=0;function Sw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cw,bp,Aw,Rw,Pw,em=!1,tu=[],Er=null,kr=null,Tr=null,Il=new Map,Sl=new Map,pr=[],E2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s0(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(e.pointerId)}}function Bo(t,e,n,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=oc(e),e!==null&&bp(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function k2(t,e,n,s,i){switch(e){case"focusin":return Er=Bo(Er,t,e,n,s,i),!0;case"dragenter":return kr=Bo(kr,t,e,n,s,i),!0;case"mouseover":return Tr=Bo(Tr,t,e,n,s,i),!0;case"pointerover":var a=i.pointerId;return Il.set(a,Bo(Il.get(a)||null,t,e,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Sl.set(a,Bo(Sl.get(a)||null,t,e,n,s,i)),!0}return!1}function Dw(t){var e=di(t.target);if(e!==null){var n=Mi(e);if(n!==null){if(e=n.tag,e===13){if(e=bw(n),e!==null){t.blockedOn=e,Pw(t.priority,function(){Aw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Qf=s,n.target.dispatchEvent(s),Qf=null}else return e=oc(n),e!==null&&bp(e),t.blockedOn=n,!1;e.shift()}return!0}function r0(t,e,n){ju(t)&&n.delete(e)}function T2(){em=!1,Er!==null&&ju(Er)&&(Er=null),kr!==null&&ju(kr)&&(kr=null),Tr!==null&&ju(Tr)&&(Tr=null),Il.forEach(r0),Sl.forEach(r0)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,em||(em=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,T2)))}function Cl(t){function e(i){return zo(i,t)}if(0<tu.length){zo(tu[0],t);for(var n=1;n<tu.length;n++){var s=tu[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Er!==null&&zo(Er,t),kr!==null&&zo(kr,t),Tr!==null&&zo(Tr,t),Il.forEach(e),Sl.forEach(e),n=0;n<pr.length;n++)s=pr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)Dw(n),n.blockedOn===null&&pr.shift()}var Aa=tr.ReactCurrentBatchConfig,Qu=!0;function I2(t,e,n,s){var i=Te,a=Aa.transition;Aa.transition=null;try{Te=1,Np(t,e,n,s)}finally{Te=i,Aa.transition=a}}function S2(t,e,n,s){var i=Te,a=Aa.transition;Aa.transition=null;try{Te=4,Np(t,e,n,s)}finally{Te=i,Aa.transition=a}}function Np(t,e,n,s){if(Qu){var i=tm(t,e,n,s);if(i===null)Jh(t,e,s,Xu,n),s0(t,s);else if(k2(i,t,e,n,s))s.stopPropagation();else if(s0(t,s),e&4&&-1<E2.indexOf(t)){for(;i!==null;){var a=oc(i);if(a!==null&&Cw(a),a=tm(t,e,n,s),a===null&&Jh(t,e,s,Xu,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else Jh(t,e,s,null,n)}}var Xu=null;function tm(t,e,n,s){if(Xu=null,t=vp(s),t=di(t),t!==null)if(e=Mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xu=t,null}function Lw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g2()){case wp:return 1;case kw:return 4;case Ku:case x2:return 16;case Tw:return 536870912;default:return 16}default:return 16}}var _r=null,jp=null,Eu=null;function Ow(){if(Eu)return Eu;var t,e=jp,n=e.length,s,i="value"in _r?_r.value:_r.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===i[a-s];s++);return Eu=i.slice(t,1<s?1-s:void 0)}function ku(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nu(){return!0}function i0(){return!1}function jn(t){function e(n,s,i,a,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?nu:i0,this.isPropagationStopped=i0,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),e}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ep=jn(to),ac=Xe({},to,{view:0,detail:0}),C2=jn(ac),zh,qh,qo,Vd=Xe({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qo&&(qo&&t.type==="mousemove"?(zh=t.screenX-qo.screenX,qh=t.screenY-qo.screenY):qh=zh=0,qo=t),zh)},movementY:function(t){return"movementY"in t?t.movementY:qh}}),a0=jn(Vd),A2=Xe({},Vd,{dataTransfer:0}),R2=jn(A2),P2=Xe({},ac,{relatedTarget:0}),Hh=jn(P2),D2=Xe({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),L2=jn(D2),O2=Xe({},to,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),M2=jn(O2),V2=Xe({},to,{data:0}),o0=jn(V2),F2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$2[t])?!!e[t]:!1}function kp(){return B2}var z2=Xe({},ac,{key:function(t){if(t.key){var e=F2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ku(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?U2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kp,charCode:function(t){return t.type==="keypress"?ku(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ku(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),q2=jn(z2),H2=Xe({},Vd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l0=jn(H2),W2=Xe({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kp}),K2=jn(W2),G2=Xe({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q2=jn(G2),X2=Xe({},Vd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y2=jn(X2),J2=[9,13,27,32],Tp=Ws&&"CompositionEvent"in window,cl=null;Ws&&"documentMode"in document&&(cl=document.documentMode);var Z2=Ws&&"TextEvent"in window&&!cl,Mw=Ws&&(!Tp||cl&&8<cl&&11>=cl),c0=" ",u0=!1;function Vw(t,e){switch(t){case"keyup":return J2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ga=!1;function eE(t,e){switch(t){case"compositionend":return Fw(e);case"keypress":return e.which!==32?null:(u0=!0,c0);case"textInput":return t=e.data,t===c0&&u0?null:t;default:return null}}function tE(t,e){if(ga)return t==="compositionend"||!Tp&&Vw(t,e)?(t=Ow(),Eu=jp=_r=null,ga=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mw&&e.locale!=="ko"?null:e.data;default:return null}}var nE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nE[t.type]:e==="textarea"}function Uw(t,e,n,s){xw(s),e=Yu(e,"onChange"),0<e.length&&(n=new Ep("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ul=null,Al=null;function sE(t){Yw(t,0)}function Fd(t){var e=va(t);if(uw(e))return t}function rE(t,e){if(t==="change")return e}var $w=!1;if(Ws){var Wh;if(Ws){var Kh="oninput"in document;if(!Kh){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),Kh=typeof h0.oninput=="function"}Wh=Kh}else Wh=!1;$w=Wh&&(!document.documentMode||9<document.documentMode)}function f0(){ul&&(ul.detachEvent("onpropertychange",Bw),Al=ul=null)}function Bw(t){if(t.propertyName==="value"&&Fd(Al)){var e=[];Uw(e,Al,t,vp(t)),_w(sE,e)}}function iE(t,e,n){t==="focusin"?(f0(),ul=e,Al=n,ul.attachEvent("onpropertychange",Bw)):t==="focusout"&&f0()}function aE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fd(Al)}function oE(t,e){if(t==="click")return Fd(e)}function lE(t,e){if(t==="input"||t==="change")return Fd(e)}function cE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ss=typeof Object.is=="function"?Object.is:cE;function Rl(t,e){if(ss(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Mf.call(e,i)||!ss(t[i],e[i]))return!1}return!0}function m0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p0(t,e){var n=m0(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=m0(n)}}function zw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qw(){for(var t=window,e=qu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qu(t.document)}return e}function Ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uE(t){var e=qw(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zw(n.ownerDocument.documentElement,n)){if(s!==null&&Ip(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!t.extend&&a>s&&(i=s,s=a,a=i),i=p0(n,a);var o=p0(n,s);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dE=Ws&&"documentMode"in document&&11>=document.documentMode,xa=null,nm=null,dl=null,sm=!1;function g0(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sm||xa==null||xa!==qu(s)||(s=xa,"selectionStart"in s&&Ip(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),dl&&Rl(dl,s)||(dl=s,s=Yu(nm,"onSelect"),0<s.length&&(e=new Ep("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=xa)))}function su(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ya={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},Gh={},Hw={};Ws&&(Hw=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function Ud(t){if(Gh[t])return Gh[t];if(!ya[t])return t;var e=ya[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hw)return Gh[t]=e[n];return t}var Ww=Ud("animationend"),Kw=Ud("animationiteration"),Gw=Ud("animationstart"),Qw=Ud("transitionend"),Xw=new Map,x0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){Xw.set(t,e),Oi(e,[t])}for(var Qh=0;Qh<x0.length;Qh++){var Xh=x0[Qh],hE=Xh.toLowerCase(),fE=Xh[0].toUpperCase()+Xh.slice(1);zr(hE,"on"+fE)}zr(Ww,"onAnimationEnd");zr(Kw,"onAnimationIteration");zr(Gw,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(Qw,"onTransitionEnd");Va("onMouseEnter",["mouseout","mouseover"]);Va("onMouseLeave",["mouseout","mouseover"]);Va("onPointerEnter",["pointerout","pointerover"]);Va("onPointerLeave",["pointerout","pointerover"]);Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mE=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function y0(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,h2(s,e,void 0,t),t.currentTarget=null}function Yw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var o=s.length-1;0<=o;o--){var c=s[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==a&&i.isPropagationStopped())break e;y0(i,c,d),a=u}else for(o=0;o<s.length;o++){if(c=s[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==a&&i.isPropagationStopped())break e;y0(i,c,d),a=u}}}if(Wu)throw t=Jf,Wu=!1,Jf=null,t}function Ue(t,e){var n=e[lm];n===void 0&&(n=e[lm]=new Set);var s=t+"__bubble";n.has(s)||(Jw(e,t,2,!1),n.add(s))}function Yh(t,e,n){var s=0;e&&(s|=4),Jw(n,t,s,e)}var ru="_reactListening"+Math.random().toString(36).slice(2);function Pl(t){if(!t[ru]){t[ru]=!0,iw.forEach(function(n){n!=="selectionchange"&&(mE.has(n)||Yh(n,!1,t),Yh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ru]||(e[ru]=!0,Yh("selectionchange",!1,e))}}function Jw(t,e,n,s){switch(Lw(e)){case 1:var i=I2;break;case 4:i=S2;break;default:i=Np}n=i.bind(null,e,n,t),i=void 0,!Yf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Jh(t,e,n,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var c=s.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=di(c),o===null)return;if(u=o.tag,u===5||u===6){s=a=o;continue e}c=c.parentNode}}s=s.return}_w(function(){var d=a,h=vp(n),m=[];e:{var p=Xw.get(t);if(p!==void 0){var v=Ep,_=t;switch(t){case"keypress":if(ku(n)===0)break e;case"keydown":case"keyup":v=q2;break;case"focusin":_="focus",v=Hh;break;case"focusout":_="blur",v=Hh;break;case"beforeblur":case"afterblur":v=Hh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=a0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=R2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=K2;break;case Ww:case Kw:case Gw:v=L2;break;case Qw:v=Q2;break;case"scroll":v=C2;break;case"wheel":v=Y2;break;case"copy":case"cut":case"paste":v=M2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=l0}var R=(e&4)!==0,T=!R&&t==="scroll",b=R?p!==null?p+"Capture":null:p;R=[];for(var w=d,y;w!==null;){y=w;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,b!==null&&(j=Tl(w,b),j!=null&&R.push(Dl(w,j,y)))),T)break;w=w.return}0<R.length&&(p=new v(p,_,null,n,h),m.push({event:p,listeners:R}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==Qf&&(_=n.relatedTarget||n.fromElement)&&(di(_)||_[Ks]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=d,_=_?di(_):null,_!==null&&(T=Mi(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=d),v!==_)){if(R=a0,j="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(R=l0,j="onPointerLeave",b="onPointerEnter",w="pointer"),T=v==null?p:va(v),y=_==null?p:va(_),p=new R(j,w+"leave",v,n,h),p.target=T,p.relatedTarget=y,j=null,di(h)===d&&(R=new R(b,w+"enter",_,n,h),R.target=y,R.relatedTarget=T,j=R),T=j,v&&_)t:{for(R=v,b=_,w=0,y=R;y;y=ca(y))w++;for(y=0,j=b;j;j=ca(j))y++;for(;0<w-y;)R=ca(R),w--;for(;0<y-w;)b=ca(b),y--;for(;w--;){if(R===b||b!==null&&R===b.alternate)break t;R=ca(R),b=ca(b)}R=null}else R=null;v!==null&&v0(m,p,v,R,!1),_!==null&&T!==null&&v0(m,T,_,R,!0)}}e:{if(p=d?va(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var C=rE;else if(d0(p))if($w)C=lE;else{C=aE;var O=iE}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=oE);if(C&&(C=C(t,d))){Uw(m,C,n,h);break e}O&&O(t,p,d),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&qf(p,"number",p.value)}switch(O=d?va(d):window,t){case"focusin":(d0(O)||O.contentEditable==="true")&&(xa=O,nm=d,dl=null);break;case"focusout":dl=nm=xa=null;break;case"mousedown":sm=!0;break;case"contextmenu":case"mouseup":case"dragend":sm=!1,g0(m,n,h);break;case"selectionchange":if(dE)break;case"keydown":case"keyup":g0(m,n,h)}var N;if(Tp)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ga?Vw(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Mw&&n.locale!=="ko"&&(ga||x!=="onCompositionStart"?x==="onCompositionEnd"&&ga&&(N=Ow()):(_r=h,jp="value"in _r?_r.value:_r.textContent,ga=!0)),O=Yu(d,x),0<O.length&&(x=new o0(x,t,null,n,h),m.push({event:x,listeners:O}),N?x.data=N:(N=Fw(n),N!==null&&(x.data=N)))),(N=Z2?eE(t,n):tE(t,n))&&(d=Yu(d,"onBeforeInput"),0<d.length&&(h=new o0("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=N))}Yw(m,e)})}function Dl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yu(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Tl(t,n),a!=null&&s.unshift(Dl(t,a,i)),a=Tl(t,e),a!=null&&s.push(Dl(t,a,i))),t=t.return}return s}function ca(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function v0(t,e,n,s,i){for(var a=e._reactName,o=[];n!==null&&n!==s;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===s)break;c.tag===5&&d!==null&&(c=d,i?(u=Tl(n,a),u!=null&&o.unshift(Dl(n,u,c))):i||(u=Tl(n,a),u!=null&&o.push(Dl(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pE=/\r\n?/g,gE=/\u0000|\uFFFD/g;function w0(t){return(typeof t=="string"?t:""+t).replace(pE,`
`).replace(gE,"")}function iu(t,e,n){if(e=w0(e),w0(t)!==e&&n)throw Error(G(425))}function Ju(){}var rm=null,im=null;function am(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var om=typeof setTimeout=="function"?setTimeout:void 0,xE=typeof clearTimeout=="function"?clearTimeout:void 0,_0=typeof Promise=="function"?Promise:void 0,yE=typeof queueMicrotask=="function"?queueMicrotask:typeof _0<"u"?function(t){return _0.resolve(null).then(t).catch(vE)}:om;function vE(t){setTimeout(function(){throw t})}function Zh(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){t.removeChild(i),Cl(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);Cl(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function b0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var no=Math.random().toString(36).slice(2),hs="__reactFiber$"+no,Ll="__reactProps$"+no,Ks="__reactContainer$"+no,lm="__reactEvents$"+no,wE="__reactListeners$"+no,_E="__reactHandles$"+no;function di(t){var e=t[hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ks]||n[hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=b0(t);t!==null;){if(n=t[hs])return n;t=b0(t)}return e}t=n,n=t.parentNode}return null}function oc(t){return t=t[hs]||t[Ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function va(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function $d(t){return t[Ll]||null}var cm=[],wa=-1;function qr(t){return{current:t}}function ze(t){0>wa||(t.current=cm[wa],cm[wa]=null,wa--)}function Me(t,e){wa++,cm[wa]=t.current,t.current=e}var Mr={},zt=qr(Mr),nn=qr(!1),bi=Mr;function Fa(t,e){var n=t.type.contextTypes;if(!n)return Mr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function sn(t){return t=t.childContextTypes,t!=null}function Zu(){ze(nn),ze(zt)}function N0(t,e,n){if(zt.current!==Mr)throw Error(G(168));Me(zt,e),Me(nn,n)}function Zw(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(G(108,i2(t)||"Unknown",i));return Xe({},n,s)}function ed(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,bi=zt.current,Me(zt,t),Me(nn,nn.current),!0}function j0(t,e,n){var s=t.stateNode;if(!s)throw Error(G(169));n?(t=Zw(t,e,bi),s.__reactInternalMemoizedMergedChildContext=t,ze(nn),ze(zt),Me(zt,t)):ze(nn),Me(nn,n)}var Ps=null,Bd=!1,ef=!1;function e_(t){Ps===null?Ps=[t]:Ps.push(t)}function bE(t){Bd=!0,e_(t)}function Hr(){if(!ef&&Ps!==null){ef=!0;var t=0,e=Te;try{var n=Ps;for(Te=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Ps=null,Bd=!1}catch(i){throw Ps!==null&&(Ps=Ps.slice(t+1)),Ew(wp,Hr),i}finally{Te=e,ef=!1}}return null}var _a=[],ba=0,td=null,nd=0,Sn=[],Cn=0,Ni=null,Os=1,Ms="";function oi(t,e){_a[ba++]=nd,_a[ba++]=td,td=t,nd=e}function t_(t,e,n){Sn[Cn++]=Os,Sn[Cn++]=Ms,Sn[Cn++]=Ni,Ni=t;var s=Os;t=Ms;var i=32-Jn(s)-1;s&=~(1<<i),n+=1;var a=32-Jn(e)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Os=1<<32-Jn(e)+i|n<<i|s,Ms=a+t}else Os=1<<a|n<<i|s,Ms=t}function Sp(t){t.return!==null&&(oi(t,1),t_(t,1,0))}function Cp(t){for(;t===td;)td=_a[--ba],_a[ba]=null,nd=_a[--ba],_a[ba]=null;for(;t===Ni;)Ni=Sn[--Cn],Sn[Cn]=null,Ms=Sn[--Cn],Sn[Cn]=null,Os=Sn[--Cn],Sn[Cn]=null}var vn=null,gn=null,We=!1,Qn=null;function n_(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function E0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,gn=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ni!==null?{id:Os,overflow:Ms}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,gn=null,!0):!1;default:return!1}}function um(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dm(t){if(We){var e=gn;if(e){var n=e;if(!E0(t,e)){if(um(t))throw Error(G(418));e=Ir(n.nextSibling);var s=vn;e&&E0(t,e)?n_(s,n):(t.flags=t.flags&-4097|2,We=!1,vn=t)}}else{if(um(t))throw Error(G(418));t.flags=t.flags&-4097|2,We=!1,vn=t}}}function k0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function au(t){if(t!==vn)return!1;if(!We)return k0(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!am(t.type,t.memoizedProps)),e&&(e=gn)){if(um(t))throw s_(),Error(G(418));for(;e;)n_(t,e),e=Ir(e.nextSibling)}if(k0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=vn?Ir(t.stateNode.nextSibling):null;return!0}function s_(){for(var t=gn;t;)t=Ir(t.nextSibling)}function Ua(){gn=vn=null,We=!1}function Ap(t){Qn===null?Qn=[t]:Qn.push(t)}var NE=tr.ReactCurrentBatchConfig;function Ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var s=n.stateNode}if(!s)throw Error(G(147,t));var i=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function ou(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function T0(t){var e=t._init;return e(t._payload)}function r_(t){function e(b,w){if(t){var y=b.deletions;y===null?(b.deletions=[w],b.flags|=16):y.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function s(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=Rr(b,w),b.index=0,b.sibling=null,b}function a(b,w,y){return b.index=y,t?(y=b.alternate,y!==null?(y=y.index,y<w?(b.flags|=2,w):y):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,w,y,j){return w===null||w.tag!==6?(w=lf(y,b.mode,j),w.return=b,w):(w=i(w,y),w.return=b,w)}function u(b,w,y,j){var C=y.type;return C===pa?h(b,w,y.props.children,j,y.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===fr&&T0(C)===w.type)?(j=i(w,y.props),j.ref=Ho(b,w,y),j.return=b,j):(j=Pu(y.type,y.key,y.props,null,b.mode,j),j.ref=Ho(b,w,y),j.return=b,j)}function d(b,w,y,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==y.containerInfo||w.stateNode.implementation!==y.implementation?(w=cf(y,b.mode,j),w.return=b,w):(w=i(w,y.children||[]),w.return=b,w)}function h(b,w,y,j,C){return w===null||w.tag!==7?(w=xi(y,b.mode,j,C),w.return=b,w):(w=i(w,y),w.return=b,w)}function m(b,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return w=lf(""+w,b.mode,y),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xc:return y=Pu(w.type,w.key,w.props,null,b.mode,y),y.ref=Ho(b,null,w),y.return=b,y;case ma:return w=cf(w,b.mode,y),w.return=b,w;case fr:var j=w._init;return m(b,j(w._payload),y)}if(Jo(w)||Uo(w))return w=xi(w,b.mode,y,null),w.return=b,w;ou(b,w)}return null}function p(b,w,y,j){var C=w!==null?w.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:c(b,w,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xc:return y.key===C?u(b,w,y,j):null;case ma:return y.key===C?d(b,w,y,j):null;case fr:return C=y._init,p(b,w,C(y._payload),j)}if(Jo(y)||Uo(y))return C!==null?null:h(b,w,y,j,null);ou(b,y)}return null}function v(b,w,y,j,C){if(typeof j=="string"&&j!==""||typeof j=="number")return b=b.get(y)||null,c(w,b,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Xc:return b=b.get(j.key===null?y:j.key)||null,u(w,b,j,C);case ma:return b=b.get(j.key===null?y:j.key)||null,d(w,b,j,C);case fr:var O=j._init;return v(b,w,y,O(j._payload),C)}if(Jo(j)||Uo(j))return b=b.get(y)||null,h(w,b,j,C,null);ou(w,j)}return null}function _(b,w,y,j){for(var C=null,O=null,N=w,x=w=0,E=null;N!==null&&x<y.length;x++){N.index>x?(E=N,N=null):E=N.sibling;var k=p(b,N,y[x],j);if(k===null){N===null&&(N=E);break}t&&N&&k.alternate===null&&e(b,N),w=a(k,w,x),O===null?C=k:O.sibling=k,O=k,N=E}if(x===y.length)return n(b,N),We&&oi(b,x),C;if(N===null){for(;x<y.length;x++)N=m(b,y[x],j),N!==null&&(w=a(N,w,x),O===null?C=N:O.sibling=N,O=N);return We&&oi(b,x),C}for(N=s(b,N);x<y.length;x++)E=v(N,b,x,y[x],j),E!==null&&(t&&E.alternate!==null&&N.delete(E.key===null?x:E.key),w=a(E,w,x),O===null?C=E:O.sibling=E,O=E);return t&&N.forEach(function(P){return e(b,P)}),We&&oi(b,x),C}function R(b,w,y,j){var C=Uo(y);if(typeof C!="function")throw Error(G(150));if(y=C.call(y),y==null)throw Error(G(151));for(var O=C=null,N=w,x=w=0,E=null,k=y.next();N!==null&&!k.done;x++,k=y.next()){N.index>x?(E=N,N=null):E=N.sibling;var P=p(b,N,k.value,j);if(P===null){N===null&&(N=E);break}t&&N&&P.alternate===null&&e(b,N),w=a(P,w,x),O===null?C=P:O.sibling=P,O=P,N=E}if(k.done)return n(b,N),We&&oi(b,x),C;if(N===null){for(;!k.done;x++,k=y.next())k=m(b,k.value,j),k!==null&&(w=a(k,w,x),O===null?C=k:O.sibling=k,O=k);return We&&oi(b,x),C}for(N=s(b,N);!k.done;x++,k=y.next())k=v(N,b,x,k.value,j),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?x:k.key),w=a(k,w,x),O===null?C=k:O.sibling=k,O=k);return t&&N.forEach(function(L){return e(b,L)}),We&&oi(b,x),C}function T(b,w,y,j){if(typeof y=="object"&&y!==null&&y.type===pa&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Xc:e:{for(var C=y.key,O=w;O!==null;){if(O.key===C){if(C=y.type,C===pa){if(O.tag===7){n(b,O.sibling),w=i(O,y.props.children),w.return=b,b=w;break e}}else if(O.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===fr&&T0(C)===O.type){n(b,O.sibling),w=i(O,y.props),w.ref=Ho(b,O,y),w.return=b,b=w;break e}n(b,O);break}else e(b,O);O=O.sibling}y.type===pa?(w=xi(y.props.children,b.mode,j,y.key),w.return=b,b=w):(j=Pu(y.type,y.key,y.props,null,b.mode,j),j.ref=Ho(b,w,y),j.return=b,b=j)}return o(b);case ma:e:{for(O=y.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===y.containerInfo&&w.stateNode.implementation===y.implementation){n(b,w.sibling),w=i(w,y.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=cf(y,b.mode,j),w.return=b,b=w}return o(b);case fr:return O=y._init,T(b,w,O(y._payload),j)}if(Jo(y))return _(b,w,y,j);if(Uo(y))return R(b,w,y,j);ou(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,w!==null&&w.tag===6?(n(b,w.sibling),w=i(w,y),w.return=b,b=w):(n(b,w),w=lf(y,b.mode,j),w.return=b,b=w),o(b)):n(b,w)}return T}var $a=r_(!0),i_=r_(!1),sd=qr(null),rd=null,Na=null,Rp=null;function Pp(){Rp=Na=rd=null}function Dp(t){var e=sd.current;ze(sd),t._currentValue=e}function hm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Ra(t,e){rd=t,Rp=Na=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(Rp!==t)if(t={context:t,memoizedValue:e,next:null},Na===null){if(rd===null)throw Error(G(308));Na=t,rd.dependencies={lanes:0,firstContext:t}}else Na=Na.next=t;return e}var hi=null;function Lp(t){hi===null?hi=[t]:hi.push(t)}function a_(t,e,n,s){var i=e.interleaved;return i===null?(n.next=n,Lp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gs(t,s)}function Gs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mr=!1;function Op(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function o_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $s(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ne&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Gs(t,n)}return i=s.interleaved,i===null?(e.next=e,Lp(s)):(e.next=i.next,i.next=e),s.interleaved=e,Gs(t,n)}function Tu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,_p(t,n)}}function I0(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function id(t,e,n,s){var i=t.updateQueue;mr=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=u))}if(a!==null){var m=i.baseState;o=0,h=d=u=null,c=a;do{var p=c.lane,v=c.eventTime;if((s&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var _=t,R=c;switch(p=e,v=n,R.tag){case 1:if(_=R.payload,typeof _=="function"){m=_.call(v,m,p);break e}m=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=R.payload,p=typeof _=="function"?_.call(v,m,p):_,p==null)break e;m=Xe({},m,p);break e;case 2:mr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[c]:p.push(c))}else v={eventTime:v,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=v,u=m):h=h.next=v,o|=p;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;p=c,c=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Ei|=o,t.lanes=o,t.memoizedState=m}}function S0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(G(191,i));i.call(s)}}}var lc={},ps=qr(lc),Ol=qr(lc),Ml=qr(lc);function fi(t){if(t===lc)throw Error(G(174));return t}function Mp(t,e){switch(Me(Ml,e),Me(Ol,t),Me(ps,lc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wf(e,t)}ze(ps),Me(ps,e)}function Ba(){ze(ps),ze(Ol),ze(Ml)}function l_(t){fi(Ml.current);var e=fi(ps.current),n=Wf(e,t.type);e!==n&&(Me(Ol,t),Me(ps,n))}function Vp(t){Ol.current===t&&(ze(ps),ze(Ol))}var Ge=qr(0);function ad(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tf=[];function Fp(){for(var t=0;t<tf.length;t++)tf[t]._workInProgressVersionPrimary=null;tf.length=0}var Iu=tr.ReactCurrentDispatcher,nf=tr.ReactCurrentBatchConfig,ji=0,Qe=null,gt=null,bt=null,od=!1,hl=!1,Vl=0,jE=0;function Ot(){throw Error(G(321))}function Up(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ss(t[n],e[n]))return!1;return!0}function $p(t,e,n,s,i,a){if(ji=a,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Iu.current=t===null||t.memoizedState===null?IE:SE,t=n(s,i),hl){a=0;do{if(hl=!1,Vl=0,25<=a)throw Error(G(301));a+=1,bt=gt=null,e.updateQueue=null,Iu.current=CE,t=n(s,i)}while(hl)}if(Iu.current=ld,e=gt!==null&&gt.next!==null,ji=0,bt=gt=Qe=null,od=!1,e)throw Error(G(300));return t}function Bp(){var t=Vl!==0;return Vl=0,t}function ds(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Qe.memoizedState=bt=t:bt=bt.next=t,bt}function Vn(){if(gt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var e=bt===null?Qe.memoizedState:bt.next;if(e!==null)bt=e,gt=t;else{if(t===null)throw Error(G(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},bt===null?Qe.memoizedState=bt=t:bt=bt.next=t}return bt}function Fl(t,e){return typeof e=="function"?e(t):e}function sf(t){var e=Vn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var s=gt,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var c=o=null,u=null,d=a;do{var h=d.lane;if((ji&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=s):u=u.next=m,Qe.lanes|=h,Ei|=h}d=d.next}while(d!==null&&d!==a);u===null?o=s:u.next=c,ss(s,e.memoizedState)||(tn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=u,n.lastRenderedState=s}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Qe.lanes|=a,Ei|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rf(t){var e=Vn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);ss(a,e.memoizedState)||(tn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function c_(){}function u_(t,e){var n=Qe,s=Vn(),i=e(),a=!ss(s.memoizedState,i);if(a&&(s.memoizedState=i,tn=!0),s=s.queue,zp(f_.bind(null,n,s,t),[t]),s.getSnapshot!==e||a||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,Ul(9,h_.bind(null,n,s,i,e),void 0,null),jt===null)throw Error(G(349));ji&30||d_(n,e,i)}return i}function d_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function h_(t,e,n,s){e.value=n,e.getSnapshot=s,m_(e)&&p_(t)}function f_(t,e,n){return n(function(){m_(e)&&p_(t)})}function m_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ss(t,n)}catch{return!0}}function p_(t){var e=Gs(t,1);e!==null&&Zn(e,t,1,-1)}function C0(t){var e=ds();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:t},e.queue=t,t=t.dispatch=TE.bind(null,Qe,t),[e.memoizedState,t]}function Ul(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function g_(){return Vn().memoizedState}function Su(t,e,n,s){var i=ds();Qe.flags|=t,i.memoizedState=Ul(1|e,n,void 0,s===void 0?null:s)}function zd(t,e,n,s){var i=Vn();s=s===void 0?null:s;var a=void 0;if(gt!==null){var o=gt.memoizedState;if(a=o.destroy,s!==null&&Up(s,o.deps)){i.memoizedState=Ul(e,n,a,s);return}}Qe.flags|=t,i.memoizedState=Ul(1|e,n,a,s)}function A0(t,e){return Su(8390656,8,t,e)}function zp(t,e){return zd(2048,8,t,e)}function x_(t,e){return zd(4,2,t,e)}function y_(t,e){return zd(4,4,t,e)}function v_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function w_(t,e,n){return n=n!=null?n.concat([t]):null,zd(4,4,v_.bind(null,e,t),n)}function qp(){}function __(t,e){var n=Vn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Up(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function b_(t,e){var n=Vn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Up(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function N_(t,e,n){return ji&21?(ss(n,e)||(n=Iw(),Qe.lanes|=n,Ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function EE(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var s=nf.transition;nf.transition={};try{t(!1),e()}finally{Te=n,nf.transition=s}}function j_(){return Vn().memoizedState}function kE(t,e,n){var s=Ar(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},E_(t))k_(e,n);else if(n=a_(t,e,n,s),n!==null){var i=Kt();Zn(n,t,s,i),T_(n,e,s)}}function TE(t,e,n){var s=Ar(t),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(E_(t))k_(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(i.hasEagerState=!0,i.eagerState=c,ss(c,o)){var u=e.interleaved;u===null?(i.next=i,Lp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=a_(t,e,i,s),n!==null&&(i=Kt(),Zn(n,t,s,i),T_(n,e,s))}}function E_(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function k_(t,e){hl=od=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function T_(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,_p(t,n)}}var ld={readContext:Mn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},IE={readContext:Mn,useCallback:function(t,e){return ds().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:A0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Su(4194308,4,v_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Su(4194308,4,t,e)},useInsertionEffect:function(t,e){return Su(4,2,t,e)},useMemo:function(t,e){var n=ds();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=ds();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=kE.bind(null,Qe,t),[s.memoizedState,t]},useRef:function(t){var e=ds();return t={current:t},e.memoizedState=t},useState:C0,useDebugValue:qp,useDeferredValue:function(t){return ds().memoizedState=t},useTransition:function(){var t=C0(!1),e=t[0];return t=EE.bind(null,t[1]),ds().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=Qe,i=ds();if(We){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),jt===null)throw Error(G(349));ji&30||d_(s,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,A0(f_.bind(null,s,a,t),[t]),s.flags|=2048,Ul(9,h_.bind(null,s,a,n,e),void 0,null),n},useId:function(){var t=ds(),e=jt.identifierPrefix;if(We){var n=Ms,s=Os;n=(s&~(1<<32-Jn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},SE={readContext:Mn,useCallback:__,useContext:Mn,useEffect:zp,useImperativeHandle:w_,useInsertionEffect:x_,useLayoutEffect:y_,useMemo:b_,useReducer:sf,useRef:g_,useState:function(){return sf(Fl)},useDebugValue:qp,useDeferredValue:function(t){var e=Vn();return N_(e,gt.memoizedState,t)},useTransition:function(){var t=sf(Fl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:c_,useSyncExternalStore:u_,useId:j_,unstable_isNewReconciler:!1},CE={readContext:Mn,useCallback:__,useContext:Mn,useEffect:zp,useImperativeHandle:w_,useInsertionEffect:x_,useLayoutEffect:y_,useMemo:b_,useReducer:rf,useRef:g_,useState:function(){return rf(Fl)},useDebugValue:qp,useDeferredValue:function(t){var e=Vn();return gt===null?e.memoizedState=t:N_(e,gt.memoizedState,t)},useTransition:function(){var t=rf(Fl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:c_,useSyncExternalStore:u_,useId:j_,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function fm(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qd={isMounted:function(t){return(t=t._reactInternals)?Mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Kt(),i=Ar(t),a=$s(s,i);a.payload=e,n!=null&&(a.callback=n),e=Sr(t,a,i),e!==null&&(Zn(e,t,i,s),Tu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Kt(),i=Ar(t),a=$s(s,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Sr(t,a,i),e!==null&&(Zn(e,t,i,s),Tu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),s=Ar(t),i=$s(n,s);i.tag=2,e!=null&&(i.callback=e),e=Sr(t,i,s),e!==null&&(Zn(e,t,s,n),Tu(e,t,s))}};function R0(t,e,n,s,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,o):e.prototype&&e.prototype.isPureReactComponent?!Rl(n,s)||!Rl(i,a):!0}function I_(t,e,n){var s=!1,i=Mr,a=e.contextType;return typeof a=="object"&&a!==null?a=Mn(a):(i=sn(e)?bi:zt.current,s=e.contextTypes,a=(s=s!=null)?Fa(t,i):Mr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qd,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function P0(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&qd.enqueueReplaceState(e,e.state,null)}function mm(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Op(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Mn(a):(a=sn(e)?bi:zt.current,i.context=Fa(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(fm(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qd.enqueueReplaceState(i,i.state,null),id(t,n,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function za(t,e){try{var n="",s=e;do n+=r2(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function af(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AE=typeof WeakMap=="function"?WeakMap:Map;function S_(t,e,n){n=$s(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){ud||(ud=!0,Em=s),pm(t,e)},n}function C_(t,e,n){n=$s(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;n.payload=function(){return s(i)},n.callback=function(){pm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){pm(t,e),typeof s!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function D0(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new AE;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(i.add(n),t=HE.bind(null,t,e,n),e.then(t,t))}function L0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function O0(t,e,n,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$s(-1,1),e.tag=2,Sr(n,e,1))),n.lanes|=1),t)}var RE=tr.ReactCurrentOwner,tn=!1;function Wt(t,e,n,s){e.child=t===null?i_(e,null,n,s):$a(e,t.child,n,s)}function M0(t,e,n,s,i){n=n.render;var a=e.ref;return Ra(e,i),s=$p(t,e,n,s,a,i),n=Bp(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qs(t,e,i)):(We&&n&&Sp(e),e.flags|=1,Wt(t,e,s,i),e.child)}function V0(t,e,n,s,i){if(t===null){var a=n.type;return typeof a=="function"&&!Jp(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,A_(t,e,a,s,i)):(t=Pu(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Rl,n(o,s)&&t.ref===e.ref)return Qs(t,e,i)}return e.flags|=1,t=Rr(a,s),t.ref=e.ref,t.return=e,e.child=t}function A_(t,e,n,s,i){if(t!==null){var a=t.memoizedProps;if(Rl(a,s)&&t.ref===e.ref)if(tn=!1,e.pendingProps=s=a,(t.lanes&i)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Qs(t,e,i)}return gm(t,e,n,s,i)}function R_(t,e,n){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Ea,hn),hn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(Ea,hn),hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,Me(Ea,hn),hn|=s}else a!==null?(s=a.baseLanes|n,e.memoizedState=null):s=n,Me(Ea,hn),hn|=s;return Wt(t,e,i,n),e.child}function P_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gm(t,e,n,s,i){var a=sn(n)?bi:zt.current;return a=Fa(e,a),Ra(e,i),n=$p(t,e,n,s,a,i),s=Bp(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qs(t,e,i)):(We&&s&&Sp(e),e.flags|=1,Wt(t,e,n,i),e.child)}function F0(t,e,n,s,i){if(sn(n)){var a=!0;ed(e)}else a=!1;if(Ra(e,i),e.stateNode===null)Cu(t,e),I_(e,n,s),mm(e,n,s,i),s=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Mn(d):(d=sn(n)?bi:zt.current,d=Fa(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==s||u!==d)&&P0(e,o,s,d),mr=!1;var p=e.memoizedState;o.state=p,id(e,s,o,i),u=e.memoizedState,c!==s||p!==u||nn.current||mr?(typeof h=="function"&&(fm(e,n,h,s),u=e.memoizedState),(c=mr||R0(e,n,c,s,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),o.props=s,o.state=u,o.context=d,s=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,o_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Kn(e.type,c),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Mn(u):(u=sn(n)?bi:zt.current,u=Fa(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||p!==u)&&P0(e,o,s,u),mr=!1,p=e.memoizedState,o.state=p,id(e,s,o,i);var _=e.memoizedState;c!==m||p!==_||nn.current||mr?(typeof v=="function"&&(fm(e,n,v,s),_=e.memoizedState),(d=mr||R0(e,n,d,s,p,_,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=_),o.props=s,o.state=_,o.context=u,s=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),s=!1)}return xm(t,e,n,s,a,i)}function xm(t,e,n,s,i,a){P_(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&j0(e,n,!1),Qs(t,e,a);s=e.stateNode,RE.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=$a(e,t.child,null,a),e.child=$a(e,null,c,a)):Wt(t,e,c,a),e.memoizedState=s.state,i&&j0(e,n,!0),e.child}function D_(t){var e=t.stateNode;e.pendingContext?N0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&N0(t,e.context,!1),Mp(t,e.containerInfo)}function U0(t,e,n,s,i){return Ua(),Ap(i),e.flags|=256,Wt(t,e,n,s),e.child}var ym={dehydrated:null,treeContext:null,retryLane:0};function vm(t){return{baseLanes:t,cachePool:null,transitions:null}}function L_(t,e,n){var s=e.pendingProps,i=Ge.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Me(Ge,i&1),t===null)return dm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,a?(s=e.mode,a=e.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Kd(o,s,0,null),t=xi(t,s,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=vm(n),e.memoizedState=ym,t):Hp(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return PE(t,e,o,s,c,i,n);if(a){a=s.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=u,e.deletions=null):(s=Rr(i,u),s.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Rr(c,a):(a=xi(a,o,n,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,o=t.child.memoizedState,o=o===null?vm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=ym,s}return a=t.child,t=a.sibling,s=Rr(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Hp(t,e){return e=Kd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lu(t,e,n,s){return s!==null&&Ap(s),$a(e,t.child,null,n),t=Hp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PE(t,e,n,s,i,a,o){if(n)return e.flags&256?(e.flags&=-257,s=af(Error(G(422))),lu(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,i=e.mode,s=Kd({mode:"visible",children:s.children},i,0,null),a=xi(a,i,o,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&$a(e,t.child,null,o),e.child.memoizedState=vm(o),e.memoizedState=ym,a);if(!(e.mode&1))return lu(t,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var c=s.dgst;return s=c,a=Error(G(419)),s=af(a,s,void 0),lu(t,e,o,s)}if(c=(o&t.childLanes)!==0,tn||c){if(s=jt,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Gs(t,i),Zn(s,t,i,-1))}return Yp(),s=af(Error(G(421))),lu(t,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=WE.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,gn=Ir(i.nextSibling),vn=e,We=!0,Qn=null,t!==null&&(Sn[Cn++]=Os,Sn[Cn++]=Ms,Sn[Cn++]=Ni,Os=t.id,Ms=t.overflow,Ni=e),e=Hp(e,s.children),e.flags|=4096,e)}function $0(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),hm(t.return,e,n)}function of(t,e,n,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function O_(t,e,n){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(Wt(t,e,s.children,n),s=Ge.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$0(t,n,e);else if(t.tag===19)$0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Me(Ge,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ad(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),of(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ad(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}of(e,!0,n,null,a);break;case"together":of(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DE(t,e,n){switch(e.tag){case 3:D_(e),Ua();break;case 5:l_(e);break;case 1:sn(e.type)&&ed(e);break;case 4:Mp(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Me(sd,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Me(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?L_(t,e,n):(Me(Ge,Ge.current&1),t=Qs(t,e,n),t!==null?t.sibling:null);Me(Ge,Ge.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return O_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Me(Ge,Ge.current),s)break;return null;case 22:case 23:return e.lanes=0,R_(t,e,n)}return Qs(t,e,n)}var M_,wm,V_,F_;M_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wm=function(){};V_=function(t,e,n,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,fi(ps.current);var a=null;switch(n){case"input":i=Bf(t,i),s=Bf(t,s),a=[];break;case"select":i=Xe({},i,{value:void 0}),s=Xe({},s,{value:void 0}),a=[];break;case"textarea":i=Hf(t,i),s=Hf(t,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Ju)}Kf(n,s);var o;n=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(El.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var u=s[d];if(c=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(El.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ue("scroll",t),a||c===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};F_=function(t,e,n,s){n!==s&&(e.flags|=4)};function Wo(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function LE(t,e,n){var s=e.pendingProps;switch(Cp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return sn(e.type)&&Zu(),Mt(e),null;case 3:return s=e.stateNode,Ba(),ze(nn),ze(zt),Fp(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(au(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(Im(Qn),Qn=null))),wm(t,e),Mt(e),null;case 5:Vp(e);var i=fi(Ml.current);if(n=e.type,t!==null&&e.stateNode!=null)V_(t,e,n,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(G(166));return Mt(e),null}if(t=fi(ps.current),au(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[hs]=e,s[Ll]=a,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(i=0;i<el.length;i++)Ue(el[i],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":Xx(s,a),Ue("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Ue("invalid",s);break;case"textarea":Jx(s,a),Ue("invalid",s)}Kf(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?s.textContent!==c&&(a.suppressHydrationWarning!==!0&&iu(s.textContent,c,t),i=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&iu(s.textContent,c,t),i=["children",""+c]):El.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ue("scroll",s)}switch(n){case"input":Yc(s),Yx(s,a,!0);break;case"textarea":Yc(s),Zx(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Ju)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[hs]=e,t[Ll]=s,M_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gf(n,s),n){case"dialog":Ue("cancel",t),Ue("close",t),i=s;break;case"iframe":case"object":case"embed":Ue("load",t),i=s;break;case"video":case"audio":for(i=0;i<el.length;i++)Ue(el[i],t);i=s;break;case"source":Ue("error",t),i=s;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=s;break;case"details":Ue("toggle",t),i=s;break;case"input":Xx(t,s),i=Bf(t,s),Ue("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=Xe({},s,{value:void 0}),Ue("invalid",t);break;case"textarea":Jx(t,s),i=Hf(t,s),Ue("invalid",t);break;default:i=s}Kf(n,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?gw(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&mw(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&kl(t,u):typeof u=="number"&&kl(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(El.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Ue("scroll",t):u!=null&&pp(t,a,u,o))}switch(n){case"input":Yc(t),Yx(t,s,!1);break;case"textarea":Yc(t),Zx(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Or(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?Ia(t,!!s.multiple,a,!1):s.defaultValue!=null&&Ia(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ju)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)F_(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(G(166));if(n=fi(Ml.current),fi(ps.current),au(e)){if(s=e.stateNode,n=e.memoizedProps,s[hs]=e,(a=s.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:iu(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&iu(s.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[hs]=e,e.stateNode=s}return Mt(e),null;case 13:if(ze(Ge),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&gn!==null&&e.mode&1&&!(e.flags&128))s_(),Ua(),e.flags|=98560,a=!1;else if(a=au(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(G(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(G(317));a[hs]=e}else Ua(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),a=!1}else Qn!==null&&(Im(Qn),Qn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?xt===0&&(xt=3):Yp())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Ba(),wm(t,e),t===null&&Pl(e.stateNode.containerInfo),Mt(e),null;case 10:return Dp(e.type._context),Mt(e),null;case 17:return sn(e.type)&&Zu(),Mt(e),null;case 19:if(ze(Ge),a=e.memoizedState,a===null)return Mt(e),null;if(s=(e.flags&128)!==0,o=a.rendering,o===null)if(s)Wo(a,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ad(t),o!==null){for(e.flags|=128,Wo(a,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)a=n,t=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(Ge,Ge.current&1|2),e.child}t=t.sibling}a.tail!==null&&rt()>qa&&(e.flags|=128,s=!0,Wo(a,!1),e.lanes=4194304)}else{if(!s)if(t=ad(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!We)return Mt(e),null}else 2*rt()-a.renderingStartTime>qa&&n!==1073741824&&(e.flags|=128,s=!0,Wo(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=rt(),e.sibling=null,n=Ge.current,Me(Ge,s?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return Xp(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?hn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function OE(t,e){switch(Cp(e),e.tag){case 1:return sn(e.type)&&Zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ba(),ze(nn),ze(zt),Fp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vp(e),null;case 13:if(ze(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Ua()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(Ge),null;case 4:return Ba(),null;case 10:return Dp(e.type._context),null;case 22:case 23:return Xp(),null;case 24:return null;default:return null}}var cu=!1,Ut=!1,ME=typeof WeakSet=="function"?WeakSet:Set,ee=null;function ja(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){tt(t,e,s)}else n.current=null}function _m(t,e,n){try{n()}catch(s){tt(t,e,s)}}var B0=!1;function VE(t,e){if(rm=Qu,t=qw(),Ip(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var v;m!==n||i!==0&&m.nodeType!==3||(c=o+i),m!==a||s!==0&&m.nodeType!==3||(u=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===t)break t;if(p===n&&++d===i&&(c=o),p===a&&++h===s&&(u=o),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(im={focusedElem:t,selectionRange:n},Qu=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var R=_.memoizedProps,T=_.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?R:Kn(e.type,R),T);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(j){tt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return _=B0,B0=!1,_}function fl(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&_m(e,n,a)}i=i.next}while(i!==s)}}function Hd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function bm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function U_(t){var e=t.alternate;e!==null&&(t.alternate=null,U_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hs],delete e[Ll],delete e[lm],delete e[wE],delete e[_E])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $_(t){return t.tag===5||t.tag===3||t.tag===4}function z0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ju));else if(s!==4&&(t=t.child,t!==null))for(Nm(t,e,n),t=t.sibling;t!==null;)Nm(t,e,n),t=t.sibling}function jm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(jm(t,e,n),t=t.sibling;t!==null;)jm(t,e,n),t=t.sibling}var Tt=null,Gn=!1;function dr(t,e,n){for(n=n.child;n!==null;)B_(t,e,n),n=n.sibling}function B_(t,e,n){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(Md,n)}catch{}switch(n.tag){case 5:Ut||ja(n,e);case 6:var s=Tt,i=Gn;Tt=null,dr(t,e,n),Tt=s,Gn=i,Tt!==null&&(Gn?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(Gn?(t=Tt,n=n.stateNode,t.nodeType===8?Zh(t.parentNode,n):t.nodeType===1&&Zh(t,n),Cl(t)):Zh(Tt,n.stateNode));break;case 4:s=Tt,i=Gn,Tt=n.stateNode.containerInfo,Gn=!0,dr(t,e,n),Tt=s,Gn=i;break;case 0:case 11:case 14:case 15:if(!Ut&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&_m(n,e,o),i=i.next}while(i!==s)}dr(t,e,n);break;case 1:if(!Ut&&(ja(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(c){tt(n,e,c)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(Ut=(s=Ut)||n.memoizedState!==null,dr(t,e,n),Ut=s):dr(t,e,n);break;default:dr(t,e,n)}}function q0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ME),e.forEach(function(s){var i=KE.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Tt=c.stateNode,Gn=!1;break e;case 3:Tt=c.stateNode.containerInfo,Gn=!0;break e;case 4:Tt=c.stateNode.containerInfo,Gn=!0;break e}c=c.return}if(Tt===null)throw Error(G(160));B_(a,o,i),Tt=null,Gn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){tt(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)z_(e,t),e=e.sibling}function z_(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),us(t),s&4){try{fl(3,t,t.return),Hd(3,t)}catch(R){tt(t,t.return,R)}try{fl(5,t,t.return)}catch(R){tt(t,t.return,R)}}break;case 1:Wn(e,t),us(t),s&512&&n!==null&&ja(n,n.return);break;case 5:if(Wn(e,t),us(t),s&512&&n!==null&&ja(n,n.return),t.flags&32){var i=t.stateNode;try{kl(i,"")}catch(R){tt(t,t.return,R)}}if(s&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&dw(i,a),Gf(c,o);var d=Gf(c,a);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?gw(i,m):h==="dangerouslySetInnerHTML"?mw(i,m):h==="children"?kl(i,m):pp(i,h,m,d)}switch(c){case"input":zf(i,a);break;case"textarea":hw(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Ia(i,!!a.multiple,v,!1):p!==!!a.multiple&&(a.defaultValue!=null?Ia(i,!!a.multiple,a.defaultValue,!0):Ia(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ll]=a}catch(R){tt(t,t.return,R)}}break;case 6:if(Wn(e,t),us(t),s&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(R){tt(t,t.return,R)}}break;case 3:if(Wn(e,t),us(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(R){tt(t,t.return,R)}break;case 4:Wn(e,t),us(t);break;case 13:Wn(e,t),us(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Gp=rt())),s&4&&q0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(d=Ut)||h,Wn(e,t),Ut=d):Wn(e,t),us(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(m=ee=h;ee!==null;){switch(p=ee,v=p.child,p.tag){case 0:case 11:case 14:case 15:fl(4,p,p.return);break;case 1:ja(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){s=p,n=p.return;try{e=s,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(R){tt(s,n,R)}}break;case 5:ja(p,p.return);break;case 22:if(p.memoizedState!==null){W0(m);continue}}v!==null?(v.return=p,ee=v):W0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=pw("display",o))}catch(R){tt(t,t.return,R)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(R){tt(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Wn(e,t),us(t),s&4&&q0(t);break;case 21:break;default:Wn(e,t),us(t)}}function us(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($_(n)){var s=n;break e}n=n.return}throw Error(G(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(kl(i,""),s.flags&=-33);var a=z0(t);jm(t,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,c=z0(t);Nm(t,c,o);break;default:throw Error(G(161))}}catch(u){tt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FE(t,e,n){ee=t,q_(t)}function q_(t,e,n){for(var s=(t.mode&1)!==0;ee!==null;){var i=ee,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||cu;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||Ut;c=cu;var d=Ut;if(cu=o,(Ut=u)&&!d)for(ee=i;ee!==null;)o=ee,u=o.child,o.tag===22&&o.memoizedState!==null?K0(i):u!==null?(u.return=o,ee=u):K0(i);for(;a!==null;)ee=a,q_(a),a=a.sibling;ee=i,cu=c,Ut=d}H0(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ee=a):H0(t)}}function H0(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||Hd(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Ut)if(n===null)s.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&S0(e,a,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}S0(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Cl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Ut||e.flags&512&&bm(e)}catch(p){tt(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function W0(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function K0(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hd(4,e)}catch(u){tt(e,n,u)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(u){tt(e,i,u)}}var a=e.return;try{bm(e)}catch(u){tt(e,a,u)}break;case 5:var o=e.return;try{bm(e)}catch(u){tt(e,o,u)}}}catch(u){tt(e,e.return,u)}if(e===t){ee=null;break}var c=e.sibling;if(c!==null){c.return=e.return,ee=c;break}ee=e.return}}var UE=Math.ceil,cd=tr.ReactCurrentDispatcher,Wp=tr.ReactCurrentOwner,Pn=tr.ReactCurrentBatchConfig,Ne=0,jt=null,ht=null,St=0,hn=0,Ea=qr(0),xt=0,$l=null,Ei=0,Wd=0,Kp=0,ml=null,Zt=null,Gp=0,qa=1/0,Rs=null,ud=!1,Em=null,Cr=null,uu=!1,br=null,dd=0,pl=0,km=null,Au=-1,Ru=0;function Kt(){return Ne&6?rt():Au!==-1?Au:Au=rt()}function Ar(t){return t.mode&1?Ne&2&&St!==0?St&-St:NE.transition!==null?(Ru===0&&(Ru=Iw()),Ru):(t=Te,t!==0||(t=window.event,t=t===void 0?16:Lw(t.type)),t):1}function Zn(t,e,n,s){if(50<pl)throw pl=0,km=null,Error(G(185));ic(t,n,s),(!(Ne&2)||t!==jt)&&(t===jt&&(!(Ne&2)&&(Wd|=n),xt===4&&gr(t,St)),rn(t,s),n===1&&Ne===0&&!(e.mode&1)&&(qa=rt()+500,Bd&&Hr()))}function rn(t,e){var n=t.callbackNode;N2(t,e);var s=Gu(t,t===jt?St:0);if(s===0)n!==null&&n0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&n0(n),e===1)t.tag===0?bE(G0.bind(null,t)):e_(G0.bind(null,t)),yE(function(){!(Ne&6)&&Hr()}),n=null;else{switch(Sw(s)){case 1:n=wp;break;case 4:n=kw;break;case 16:n=Ku;break;case 536870912:n=Tw;break;default:n=Ku}n=J_(n,H_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function H_(t,e){if(Au=-1,Ru=0,Ne&6)throw Error(G(327));var n=t.callbackNode;if(Pa()&&t.callbackNode!==n)return null;var s=Gu(t,t===jt?St:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=hd(t,s);else{e=s;var i=Ne;Ne|=2;var a=K_();(jt!==t||St!==e)&&(Rs=null,qa=rt()+500,gi(t,e));do try{zE();break}catch(c){W_(t,c)}while(!0);Pp(),cd.current=a,Ne=i,ht!==null?e=0:(jt=null,St=0,e=xt)}if(e!==0){if(e===2&&(i=Zf(t),i!==0&&(s=i,e=Tm(t,i))),e===1)throw n=$l,gi(t,0),gr(t,s),rn(t,rt()),n;if(e===6)gr(t,s);else{if(i=t.current.alternate,!(s&30)&&!$E(i)&&(e=hd(t,s),e===2&&(a=Zf(t),a!==0&&(s=a,e=Tm(t,a))),e===1))throw n=$l,gi(t,0),gr(t,s),rn(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(G(345));case 2:li(t,Zt,Rs);break;case 3:if(gr(t,s),(s&130023424)===s&&(e=Gp+500-rt(),10<e)){if(Gu(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){Kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=om(li.bind(null,t,Zt,Rs),e);break}li(t,Zt,Rs);break;case 4:if(gr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var o=31-Jn(s);a=1<<o,o=e[o],o>i&&(i=o),s&=~a}if(s=i,s=rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*UE(s/1960))-s,10<s){t.timeoutHandle=om(li.bind(null,t,Zt,Rs),s);break}li(t,Zt,Rs);break;case 5:li(t,Zt,Rs);break;default:throw Error(G(329))}}}return rn(t,rt()),t.callbackNode===n?H_.bind(null,t):null}function Tm(t,e){var n=ml;return t.current.memoizedState.isDehydrated&&(gi(t,e).flags|=256),t=hd(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&Im(e)),t}function Im(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function $E(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!ss(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(t,e){for(e&=~Kp,e&=~Wd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jn(e),s=1<<n;t[n]=-1,e&=~s}}function G0(t){if(Ne&6)throw Error(G(327));Pa();var e=Gu(t,0);if(!(e&1))return rn(t,rt()),null;var n=hd(t,e);if(t.tag!==0&&n===2){var s=Zf(t);s!==0&&(e=s,n=Tm(t,s))}if(n===1)throw n=$l,gi(t,0),gr(t,e),rn(t,rt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,li(t,Zt,Rs),rn(t,rt()),null}function Qp(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(qa=rt()+500,Bd&&Hr())}}function ki(t){br!==null&&br.tag===0&&!(Ne&6)&&Pa();var e=Ne;Ne|=1;var n=Pn.transition,s=Te;try{if(Pn.transition=null,Te=1,t)return t()}finally{Te=s,Pn.transition=n,Ne=e,!(Ne&6)&&Hr()}}function Xp(){hn=Ea.current,ze(Ea)}function gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xE(n)),ht!==null)for(n=ht.return;n!==null;){var s=n;switch(Cp(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Zu();break;case 3:Ba(),ze(nn),ze(zt),Fp();break;case 5:Vp(s);break;case 4:Ba();break;case 13:ze(Ge);break;case 19:ze(Ge);break;case 10:Dp(s.type._context);break;case 22:case 23:Xp()}n=n.return}if(jt=t,ht=t=Rr(t.current,null),St=hn=e,xt=0,$l=null,Kp=Wd=Ei=0,Zt=ml=null,hi!==null){for(e=0;e<hi.length;e++)if(n=hi[e],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}n.pending=s}hi=null}return t}function W_(t,e){do{var n=ht;try{if(Pp(),Iu.current=ld,od){for(var s=Qe.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}od=!1}if(ji=0,bt=gt=Qe=null,hl=!1,Vl=0,Wp.current=null,n===null||n.return===null){xt=1,$l=e,ht=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=St,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=c,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=L0(o);if(v!==null){v.flags&=-257,O0(v,o,c,a,e),v.mode&1&&D0(a,d,e),e=v,u=d;var _=e.updateQueue;if(_===null){var R=new Set;R.add(u),e.updateQueue=R}else _.add(u);break e}else{if(!(e&1)){D0(a,d,e),Yp();break e}u=Error(G(426))}}else if(We&&c.mode&1){var T=L0(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),O0(T,o,c,a,e),Ap(za(u,c));break e}}a=u=za(u,c),xt!==4&&(xt=2),ml===null?ml=[a]:ml.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=S_(a,u,e);I0(a,b);break e;case 1:c=u;var w=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Cr===null||!Cr.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e;var j=C_(a,c,e);I0(a,j);break e}}a=a.return}while(a!==null)}Q_(n)}catch(C){e=C,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function K_(){var t=cd.current;return cd.current=ld,t===null?ld:t}function Yp(){(xt===0||xt===3||xt===2)&&(xt=4),jt===null||!(Ei&268435455)&&!(Wd&268435455)||gr(jt,St)}function hd(t,e){var n=Ne;Ne|=2;var s=K_();(jt!==t||St!==e)&&(Rs=null,gi(t,e));do try{BE();break}catch(i){W_(t,i)}while(!0);if(Pp(),Ne=n,cd.current=s,ht!==null)throw Error(G(261));return jt=null,St=0,xt}function BE(){for(;ht!==null;)G_(ht)}function zE(){for(;ht!==null&&!m2();)G_(ht)}function G_(t){var e=Y_(t.alternate,t,hn);t.memoizedProps=t.pendingProps,e===null?Q_(t):ht=e,Wp.current=null}function Q_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OE(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,ht=null;return}}else if(n=LE(n,e,hn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);xt===0&&(xt=5)}function li(t,e,n){var s=Te,i=Pn.transition;try{Pn.transition=null,Te=1,qE(t,e,n,s)}finally{Pn.transition=i,Te=s}return null}function qE(t,e,n,s){do Pa();while(br!==null);if(Ne&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(j2(t,a),t===jt&&(ht=jt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uu||(uu=!0,J_(Ku,function(){return Pa(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Pn.transition,Pn.transition=null;var o=Te;Te=1;var c=Ne;Ne|=4,Wp.current=null,VE(t,n),z_(n,t),uE(im),Qu=!!rm,im=rm=null,t.current=n,FE(n),p2(),Ne=c,Te=o,Pn.transition=a}else t.current=n;if(uu&&(uu=!1,br=t,dd=i),a=t.pendingLanes,a===0&&(Cr=null),y2(n.stateNode),rn(t,rt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(ud)throw ud=!1,t=Em,Em=null,t;return dd&1&&t.tag!==0&&Pa(),a=t.pendingLanes,a&1?t===km?pl++:(pl=0,km=t):pl=0,Hr(),null}function Pa(){if(br!==null){var t=Sw(dd),e=Pn.transition,n=Te;try{if(Pn.transition=null,Te=16>t?16:t,br===null)var s=!1;else{if(t=br,br=null,dd=0,Ne&6)throw Error(G(331));var i=Ne;for(Ne|=4,ee=t.current;ee!==null;){var a=ee,o=a.child;if(ee.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(ee=d;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:fl(8,h,a)}var m=h.child;if(m!==null)m.return=h,ee=m;else for(;ee!==null;){h=ee;var p=h.sibling,v=h.return;if(U_(h),h===d){ee=null;break}if(p!==null){p.return=v,ee=p;break}ee=v}}}var _=a.alternate;if(_!==null){var R=_.child;if(R!==null){_.child=null;do{var T=R.sibling;R.sibling=null,R=T}while(R!==null)}}ee=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ee=o;else e:for(;ee!==null;){if(a=ee,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fl(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,ee=b;break e}ee=a.return}}var w=t.current;for(ee=w;ee!==null;){o=ee;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ee=y;else e:for(o=w;ee!==null;){if(c=ee,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Hd(9,c)}}catch(C){tt(c,c.return,C)}if(c===o){ee=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,ee=j;break e}ee=c.return}}if(Ne=i,Hr(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(Md,t)}catch{}s=!0}return s}finally{Te=n,Pn.transition=e}}return!1}function Q0(t,e,n){e=za(n,e),e=S_(t,e,1),t=Sr(t,e,1),e=Kt(),t!==null&&(ic(t,1,e),rn(t,e))}function tt(t,e,n){if(t.tag===3)Q0(t,t,n);else for(;e!==null;){if(e.tag===3){Q0(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Cr===null||!Cr.has(s))){t=za(n,t),t=C_(e,t,1),e=Sr(e,t,1),t=Kt(),e!==null&&(ic(e,1,t),rn(e,t));break}}e=e.return}}function HE(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(St&n)===n&&(xt===4||xt===3&&(St&130023424)===St&&500>rt()-Gp?gi(t,0):Kp|=n),rn(t,e)}function X_(t,e){e===0&&(t.mode&1?(e=eu,eu<<=1,!(eu&130023424)&&(eu=4194304)):e=1);var n=Kt();t=Gs(t,e),t!==null&&(ic(t,e,n),rn(t,n))}function WE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),X_(t,n)}function KE(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(G(314))}s!==null&&s.delete(e),X_(t,n)}var Y_;Y_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,DE(t,e,n);tn=!!(t.flags&131072)}else tn=!1,We&&e.flags&1048576&&t_(e,nd,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Cu(t,e),t=e.pendingProps;var i=Fa(e,zt.current);Ra(e,n),i=$p(null,e,s,t,i,n);var a=Bp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(s)?(a=!0,ed(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Op(e),i.updater=qd,e.stateNode=i,i._reactInternals=e,mm(e,s,t,n),e=xm(null,e,s,!0,a,n)):(e.tag=0,We&&a&&Sp(e),Wt(null,e,i,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Cu(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=QE(s),t=Kn(s,t),i){case 0:e=gm(null,e,s,t,n);break e;case 1:e=F0(null,e,s,t,n);break e;case 11:e=M0(null,e,s,t,n);break e;case 14:e=V0(null,e,s,Kn(s.type,t),n);break e}throw Error(G(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Kn(s,i),gm(t,e,s,i,n);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Kn(s,i),F0(t,e,s,i,n);case 3:e:{if(D_(e),t===null)throw Error(G(387));s=e.pendingProps,a=e.memoizedState,i=a.element,o_(t,e),id(e,s,null,n);var o=e.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=za(Error(G(423)),e),e=U0(t,e,s,n,i);break e}else if(s!==i){i=za(Error(G(424)),e),e=U0(t,e,s,n,i);break e}else for(gn=Ir(e.stateNode.containerInfo.firstChild),vn=e,We=!0,Qn=null,n=i_(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ua(),s===i){e=Qs(t,e,n);break e}Wt(t,e,s,n)}e=e.child}return e;case 5:return l_(e),t===null&&dm(e),s=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,am(s,i)?o=null:a!==null&&am(s,a)&&(e.flags|=32),P_(t,e),Wt(t,e,o,n),e.child;case 6:return t===null&&dm(e),null;case 13:return L_(t,e,n);case 4:return Mp(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=$a(e,null,s,n):Wt(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Kn(s,i),M0(t,e,s,i,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Me(sd,s._currentValue),s._currentValue=o,a!==null)if(ss(a.value,o)){if(a.children===i.children&&!nn.current){e=Qs(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===s){if(a.tag===1){u=$s(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),hm(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(G(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),hm(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Ra(e,n),i=Mn(i),s=s(i),e.flags|=1,Wt(t,e,s,n),e.child;case 14:return s=e.type,i=Kn(s,e.pendingProps),i=Kn(s.type,i),V0(t,e,s,i,n);case 15:return A_(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Kn(s,i),Cu(t,e),e.tag=1,sn(s)?(t=!0,ed(e)):t=!1,Ra(e,n),I_(e,s,i),mm(e,s,i,n),xm(null,e,s,!0,t,n);case 19:return O_(t,e,n);case 22:return R_(t,e,n)}throw Error(G(156,e.tag))};function J_(t,e){return Ew(t,e)}function GE(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,s){return new GE(t,e,n,s)}function Jp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QE(t){if(typeof t=="function")return Jp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xp)return 11;if(t===yp)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pu(t,e,n,s,i,a){var o=2;if(s=t,typeof t=="function")Jp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pa:return xi(n.children,i,a,e);case gp:o=8,i|=8;break;case Vf:return t=Rn(12,n,e,i|2),t.elementType=Vf,t.lanes=a,t;case Ff:return t=Rn(13,n,e,i),t.elementType=Ff,t.lanes=a,t;case Uf:return t=Rn(19,n,e,i),t.elementType=Uf,t.lanes=a,t;case lw:return Kd(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aw:o=10;break e;case ow:o=9;break e;case xp:o=11;break e;case yp:o=14;break e;case fr:o=16,s=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Rn(o,n,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function xi(t,e,n,s){return t=Rn(7,t,s,e),t.lanes=n,t}function Kd(t,e,n,s){return t=Rn(22,t,s,e),t.elementType=lw,t.lanes=n,t.stateNode={isHidden:!1},t}function lf(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function cf(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XE(t,e,n,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bh(0),this.expirationTimes=Bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bh(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zp(t,e,n,s,i,a,o,c,u){return t=new XE(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Rn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Op(a),t}function YE(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Z_(t){if(!t)return Mr;t=t._reactInternals;e:{if(Mi(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(sn(n))return Zw(t,n,e)}return e}function eb(t,e,n,s,i,a,o,c,u){return t=Zp(n,s,!0,t,i,a,o,c,u),t.context=Z_(null),n=t.current,s=Kt(),i=Ar(n),a=$s(s,i),a.callback=e??null,Sr(n,a,i),t.current.lanes=i,ic(t,i,s),rn(t,s),t}function Gd(t,e,n,s){var i=e.current,a=Kt(),o=Ar(i);return n=Z_(n),e.context===null?e.context=n:e.pendingContext=n,e=$s(a,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Sr(i,e,o),t!==null&&(Zn(t,i,o,a),Tu(t,i,o)),o}function fd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function X0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eg(t,e){X0(t,e),(t=t.alternate)&&X0(t,e)}function JE(){return null}var tb=typeof reportError=="function"?reportError:function(t){console.error(t)};function tg(t){this._internalRoot=t}Qd.prototype.render=tg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Gd(t,e,null,null)};Qd.prototype.unmount=tg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ki(function(){Gd(null,t,null,null)}),e[Ks]=null}};function Qd(t){this._internalRoot=t}Qd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Rw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&Dw(t)}};function ng(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y0(){}function ZE(t,e,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=fd(o);a.call(d)}}var o=eb(e,s,t,0,null,!1,!1,"",Y0);return t._reactRootContainer=o,t[Ks]=o.current,Pl(t.nodeType===8?t.parentNode:t),ki(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var c=s;s=function(){var d=fd(u);c.call(d)}}var u=Zp(t,0,!1,null,null,!1,!1,"",Y0);return t._reactRootContainer=u,t[Ks]=u.current,Pl(t.nodeType===8?t.parentNode:t),ki(function(){Gd(e,u,n,s)}),u}function Yd(t,e,n,s,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var u=fd(o);c.call(u)}}Gd(e,o,t,i)}else o=ZE(n,e,t,i,s);return fd(o)}Cw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zo(e.pendingLanes);n!==0&&(_p(e,n|1),rn(e,rt()),!(Ne&6)&&(qa=rt()+500,Hr()))}break;case 13:ki(function(){var s=Gs(t,1);if(s!==null){var i=Kt();Zn(s,t,1,i)}}),eg(t,1)}};bp=function(t){if(t.tag===13){var e=Gs(t,134217728);if(e!==null){var n=Kt();Zn(e,t,134217728,n)}eg(t,134217728)}};Aw=function(t){if(t.tag===13){var e=Ar(t),n=Gs(t,e);if(n!==null){var s=Kt();Zn(n,t,e,s)}eg(t,e)}};Rw=function(){return Te};Pw=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Xf=function(t,e,n){switch(e){case"input":if(zf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=$d(s);if(!i)throw Error(G(90));uw(s),zf(s,i)}}}break;case"textarea":hw(t,n);break;case"select":e=n.value,e!=null&&Ia(t,!!n.multiple,e,!1)}};vw=Qp;ww=ki;var ek={usingClientEntryPoint:!1,Events:[oc,va,$d,xw,yw,Qp]},Ko={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tk={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||JE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{Md=du.inject(tk),ms=du}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ek;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ng(e))throw Error(G(200));return YE(t,e,null,n)};Nn.createRoot=function(t,e){if(!ng(t))throw Error(G(299));var n=!1,s="",i=tb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Zp(t,1,!1,null,null,n,!1,s,i),t[Ks]=e.current,Pl(t.nodeType===8?t.parentNode:t),new tg(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=Nw(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return ki(t)};Nn.hydrate=function(t,e,n){if(!Xd(e))throw Error(G(200));return Yd(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!ng(t))throw Error(G(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",o=tb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=eb(e,null,t,1,n??null,i,!1,a,o),t[Ks]=e.current,Pl(t),s)for(t=0;t<s.length;t++)n=s[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qd(e)};Nn.render=function(t,e,n){if(!Xd(e))throw Error(G(200));return Yd(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!Xd(t))throw Error(G(40));return t._reactRootContainer?(ki(function(){Yd(null,null,t,!1,function(){t._reactRootContainer=null,t[Ks]=null})}),!0):!1};Nn.unstable_batchedUpdates=Qp;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Xd(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Yd(t,e,n,!1,s)};Nn.version="18.3.1-next-f1338f8080-20240426";function nb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nb)}catch(t){console.error(t)}}nb(),nw.exports=Nn;var nk=nw.exports,J0=nk;Of.createRoot=J0.createRoot,Of.hydrateRoot=J0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Bl.apply(this,arguments)}var Nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nr||(Nr={}));const Z0="popstate";function sk(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:o,hash:c}=s.location;return Sm("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:md(i)}return ik(e,n,null,t)}function it(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rk(){return Math.random().toString(36).substr(2,8)}function ey(t,e){return{usr:t.state,key:t.key,idx:e}}function Sm(t,e,n,s){return n===void 0&&(n=null),Bl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?so(e):e,{state:n,key:e&&e.key||s||rk()})}function md(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function so(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function ik(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,c=Nr.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Bl({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){c=Nr.Pop;let T=h(),b=T==null?null:T-d;d=T,u&&u({action:c,location:R.location,delta:b})}function p(T,b){c=Nr.Push;let w=Sm(R.location,T,b);d=h()+1;let y=ey(w,d),j=R.createHref(w);try{o.pushState(y,"",j)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(j)}a&&u&&u({action:c,location:R.location,delta:1})}function v(T,b){c=Nr.Replace;let w=Sm(R.location,T,b);d=h();let y=ey(w,d),j=R.createHref(w);o.replaceState(y,"",j),a&&u&&u({action:c,location:R.location,delta:0})}function _(T){let b=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof T=="string"?T:md(T);return w=w.replace(/ $/,"%20"),it(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let R={get action(){return c},get location(){return t(i,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Z0,m),u=T,()=>{i.removeEventListener(Z0,m),u=null}},createHref(T){return e(i,T)},createURL:_,encodeLocation(T){let b=_(T);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:v,go(T){return o.go(T)}};return R}var ty;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ty||(ty={}));function ak(t,e,n){return n===void 0&&(n="/"),ok(t,e,n)}function ok(t,e,n,s){let i=typeof e=="string"?so(e):e,a=sg(i.pathname||"/",n);if(a==null)return null;let o=rb(t);lk(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=wk(a);c=xk(o[u],d)}return c}function rb(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(it(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=Pr([s,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(it(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),rb(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:pk(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of ib(a.path))i(a,o,u)}),e}function ib(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=ib(s.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function lk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gk(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const ck=/^:[\w-]+$/,uk=3,dk=2,hk=1,fk=10,mk=-2,ny=t=>t==="*";function pk(t,e){let n=t.split("/"),s=n.length;return n.some(ny)&&(s+=mk),e&&(s+=dk),n.filter(i=>!ny(i)).reduce((i,a)=>i+(ck.test(a)?uk:a===""?hk:fk),s)}function gk(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function xk(t,e,n){let{routesMeta:s}=t,i={},a="/",o=[];for(let c=0;c<s.length;++c){let u=s[c],d=c===s.length-1,h=a==="/"?e:e.slice(a.length)||"/",m=yk({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Pr([a,m.pathname]),pathnameBase:jk(Pr([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=Pr([a,m.pathnameBase]))}return o}function yk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=vk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((d,h,m)=>{let{paramName:p,isOptional:v}=h;if(p==="*"){let R=c[m]||"";o=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const _=c[m];return v&&!_?d[p]=void 0:d[p]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function vk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),sb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function wk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function sg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function _k(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?so(t):t;return{pathname:n?n.startsWith("/")?n:bk(n,e):e,search:Ek(s),hash:kk(i)}}function bk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function uf(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rg(t,e){let n=Nk(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function ig(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=so(t):(i=Bl({},t),it(!i.pathname||!i.pathname.includes("?"),uf("?","pathname","search",i)),it(!i.pathname||!i.pathname.includes("#"),uf("#","pathname","hash",i)),it(!i.search||!i.search.includes("#"),uf("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}c=m>=0?e[m]:"/"}let u=_k(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Pr=t=>t.join("/").replace(/\/\/+/g,"/"),jk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ek=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Tk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ab=["post","put","patch","delete"];new Set(ab);const Ik=["get",...ab];new Set(Ik);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zl.apply(this,arguments)}const ag=I.createContext(null),Sk=I.createContext(null),Wr=I.createContext(null),Jd=I.createContext(null),Kr=I.createContext({outlet:null,matches:[],isDataRoute:!1}),ob=I.createContext(null);function Ck(t,e){let{relative:n}=e===void 0?{}:e;ro()||it(!1);let{basename:s,navigator:i}=I.useContext(Wr),{hash:a,pathname:o,search:c}=cb(t,{relative:n}),u=o;return s!=="/"&&(u=o==="/"?s:Pr([s,o])),i.createHref({pathname:u,search:c,hash:a})}function ro(){return I.useContext(Jd)!=null}function Gr(){return ro()||it(!1),I.useContext(Jd).location}function lb(t){I.useContext(Wr).static||I.useLayoutEffect(t)}function Yt(){let{isDataRoute:t}=I.useContext(Kr);return t?zk():Ak()}function Ak(){ro()||it(!1);let t=I.useContext(ag),{basename:e,future:n,navigator:s}=I.useContext(Wr),{matches:i}=I.useContext(Kr),{pathname:a}=Gr(),o=JSON.stringify(rg(i,n.v7_relativeSplatPath)),c=I.useRef(!1);return lb(()=>{c.current=!0}),I.useCallback(function(d,h){if(h===void 0&&(h={}),!c.current)return;if(typeof d=="number"){s.go(d);return}let m=ig(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Pr([e,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[e,s,o,a,t])}function cb(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=I.useContext(Wr),{matches:i}=I.useContext(Kr),{pathname:a}=Gr(),o=JSON.stringify(rg(i,s.v7_relativeSplatPath));return I.useMemo(()=>ig(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function Rk(t,e){return Pk(t,e)}function Pk(t,e,n,s){ro()||it(!1);let{navigator:i}=I.useContext(Wr),{matches:a}=I.useContext(Kr),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Gr(),h;if(e){var m;let T=typeof e=="string"?so(e):e;u==="/"||(m=T.pathname)!=null&&m.startsWith(u)||it(!1),h=T}else h=d;let p=h.pathname||"/",v=p;if(u!=="/"){let T=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=ak(t,{pathname:v}),R=Vk(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:Pr([u,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?u:Pr([u,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,n,s);return e&&R?I.createElement(Jd.Provider,{value:{location:zl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Nr.Pop}},R):R}function Dk(){let t=Bk(),e=Tk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,null)}const Lk=I.createElement(Dk,null);class Ok extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(Kr.Provider,{value:this.props.routeContext},I.createElement(ob.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mk(t){let{routeContext:e,match:n,children:s}=t,i=I.useContext(ag);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Kr.Provider,{value:e},s)}function Vk(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let h=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);h>=0||it(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:v}=n,_=m.route.loader&&p[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||_){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,p)=>{let v,_=!1,R=null,T=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,R=m.route.errorElement||Lk,u&&(d<0&&p===0?(qk("route-fallback"),_=!0,T=null):d===p&&(_=!0,T=m.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),w=()=>{let y;return v?y=R:_?y=T:m.route.Component?y=I.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=h,I.createElement(Mk,{match:m,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:y})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?I.createElement(Ok,{location:n.location,revalidation:n.revalidation,component:R,error:v,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var ub=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ub||{}),db=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(db||{});function Fk(t){let e=I.useContext(ag);return e||it(!1),e}function Uk(t){let e=I.useContext(Sk);return e||it(!1),e}function $k(t){let e=I.useContext(Kr);return e||it(!1),e}function hb(t){let e=$k(),n=e.matches[e.matches.length-1];return n.route.id||it(!1),n.route.id}function Bk(){var t;let e=I.useContext(ob),n=Uk(),s=hb();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function zk(){let{router:t}=Fk(ub.UseNavigateStable),e=hb(db.UseNavigateStable),n=I.useRef(!1);return lb(()=>{n.current=!0}),I.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,zl({fromRouteId:e},a)))},[t,e])}const sy={};function qk(t,e,n){sy[t]||(sy[t]=!0)}function Hk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function og(t){let{to:e,replace:n,state:s,relative:i}=t;ro()||it(!1);let{future:a,static:o}=I.useContext(Wr),{matches:c}=I.useContext(Kr),{pathname:u}=Gr(),d=Yt(),h=ig(e,rg(c,a.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(h);return I.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:i}),[d,m,i,n,s]),null}function be(t){it(!1)}function Wk(t){let{basename:e="/",children:n=null,location:s,navigationType:i=Nr.Pop,navigator:a,static:o=!1,future:c}=t;ro()&&it(!1);let u=e.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:u,navigator:a,static:o,future:zl({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof s=="string"&&(s=so(s));let{pathname:h="/",search:m="",hash:p="",state:v=null,key:_="default"}=s,R=I.useMemo(()=>{let T=sg(h,u);return T==null?null:{location:{pathname:T,search:m,hash:p,state:v,key:_},navigationType:i}},[u,h,m,p,v,_,i]);return R==null?null:I.createElement(Wr.Provider,{value:d},I.createElement(Jd.Provider,{children:n,value:R}))}function Kk(t){let{children:e,location:n}=t;return Rk(Cm(e),n)}new Promise(()=>{});function Cm(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(s,i)=>{if(!I.isValidElement(s))return;let a=[...e,i];if(s.type===I.Fragment){n.push.apply(n,Cm(s.props.children,a));return}s.type!==be&&it(!1),!s.props.index||!s.props.children||it(!1);let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Cm(s.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Am.apply(this,arguments)}function Gk(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Qk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Xk(t,e){return t.button===0&&(!e||e==="_self")&&!Qk(t)}function Rm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function Yk(t,e){let n=Rm(t);return e&&e.forEach((s,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const Jk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Zk="6";try{window.__reactRouterVersion=Zk}catch{}const eT="startTransition",ry=H1[eT];function tT(t){let{basename:e,children:n,future:s,window:i}=t,a=I.useRef();a.current==null&&(a.current=sk({window:i,v5Compat:!0}));let o=a.current,[c,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},h=I.useCallback(m=>{d&&ry?ry(()=>u(m)):u(m)},[u,d]);return I.useLayoutEffect(()=>o.listen(h),[o,h]),I.useEffect(()=>Hk(s),[s]),I.createElement(Wk,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:s})}const nT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_e=I.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,p=Gk(e,Jk),{basename:v}=I.useContext(Wr),_,R=!1;if(typeof d=="string"&&sT.test(d)&&(_=d,nT))try{let y=new URL(window.location.href),j=d.startsWith("//")?new URL(y.protocol+d):new URL(d),C=sg(j.pathname,v);j.origin===y.origin&&C!=null?d=C+j.search+j.hash:R=!0}catch{}let T=Ck(d,{relative:i}),b=rT(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:m});function w(y){s&&s(y),y.defaultPrevented||b(y)}return I.createElement("a",Am({},p,{href:_||T,onClick:R||a?s:w,ref:n,target:u}))});var iy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(iy||(iy={}));var ay;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ay||(ay={}));function rT(t,e){let{target:n,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=Yt(),d=Gr(),h=cb(t,{relative:o});return I.useCallback(m=>{if(Xk(m,n)){m.preventDefault();let p=s!==void 0?s:md(d)===md(h);u(t,{replace:p,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[d,u,h,s,i,n,t,a,o,c])}function fb(t){let e=I.useRef(Rm(t)),n=I.useRef(!1),s=Gr(),i=I.useMemo(()=>Yk(s.search,n.current?null:e.current),[s.search]),a=Yt(),o=I.useCallback((c,u)=>{const d=Rm(typeof c=="function"?c(i):c);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var oy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iT=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[s++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},pb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,m=(a&3)<<4|c>>4;let p=(c&15)<<2|d>>6,v=d&63;u||(v=64,o||(p=64)),s.push(n[h],n[m],n[p],n[v])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||m==null)throw new aT;const p=a<<2|c>>4;if(s.push(p),d!==64){const v=c<<4&240|d>>2;if(s.push(v),m!==64){const _=d<<6&192|m;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oT=function(t){const e=mb(t);return pb.encodeByteArray(e,!0)},pd=function(t){return oT(t).replace(/\./g,"")},gb=function(t){try{return pb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=()=>lT().__FIREBASE_DEFAULTS__,uT=()=>{if(typeof process>"u"||typeof oy>"u")return;const t=oy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gb(t[1]);return e&&JSON.parse(e)},Zd=()=>{try{return cT()||uT()||dT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xb=t=>{var e,n;return(n=(e=Zd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yb=t=>{const e=xb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},vb=()=>{var t;return(t=Zd())===null||t===void 0?void 0:t.config},wb=t=>{var e;return(e=Zd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pd(JSON.stringify(n)),pd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function mT(){var t;const e=(t=Zd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yT(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vT(){return!mT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wT(){try{return typeof indexedDB=="object"}catch{return!1}}function _T(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="FirebaseError";class js extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=bT,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?NT(a,s):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new js(i,c,s)}}function NT(t,e){return t.replace(jT,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const jT=/\{\$([^}]+)}/g;function ET(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gd(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const a=t[i],o=e[i];if(ly(a)&&ly(o)){if(!gd(a,o))return!1}else if(a!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function ly(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function tl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,a]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function nl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kT(t,e){const n=new TT(t,e);return n.subscribe.bind(n)}class TT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");IT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=df),i.error===void 0&&(i.error=df),i.complete===void 0&&(i.complete=df);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function df(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t){return t&&t._delegate?t._delegate:t}class Vr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new hT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AT(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});s.resolve(a)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);s===c&&o.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:CT(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CT(t){return t===ci?void 0:t}function AT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ST(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const PT={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},DT=xe.INFO,LT={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},OT=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=LT[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lg{constructor(e){this.name=e,this._logLevel=DT,this._logHandler=OT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const MT=(t,e)=>e.some(n=>t instanceof n);let cy,uy;function VT(){return cy||(cy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FT(){return uy||(uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bb=new WeakMap,Pm=new WeakMap,Nb=new WeakMap,hf=new WeakMap,cg=new WeakMap;function UT(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Dr(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bb.set(n,t)}).catch(()=>{}),cg.set(e,t),e}function $T(t){if(Pm.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Pm.set(t,e)}let Dm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Nb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BT(t){Dm=t(Dm)}function zT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(ff(this),e,...n);return Nb.set(s,e.sort?e.sort():[e]),Dr(s)}:FT().includes(t)?function(...e){return t.apply(ff(this),e),Dr(bb.get(this))}:function(...e){return Dr(t.apply(ff(this),e))}}function qT(t){return typeof t=="function"?zT(t):(t instanceof IDBTransaction&&$T(t),MT(t,VT())?new Proxy(t,Dm):t)}function Dr(t){if(t instanceof IDBRequest)return UT(t);if(hf.has(t))return hf.get(t);const e=qT(t);return e!==t&&(hf.set(t,e),cg.set(e,t)),e}const ff=t=>cg.get(t);function HT(t,e,{blocked:n,upgrade:s,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=Dr(o);return s&&o.addEventListener("upgradeneeded",u=>{s(Dr(o.result),u.oldVersion,u.newVersion,Dr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const WT=["get","getKey","getAll","getAllKeys","count"],KT=["put","add","delete","clear"],mf=new Map;function dy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mf.get(e))return mf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=KT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||WT.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return s&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return mf.set(e,a),a}BT(t=>({...t,get:(e,n,s)=>dy(e,n)||t.get(e,n,s),has:(e,n)=>!!dy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function QT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lm="@firebase/app",hy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new lg("@firebase/app"),XT="@firebase/app-compat",YT="@firebase/analytics-compat",JT="@firebase/analytics",ZT="@firebase/app-check-compat",eI="@firebase/app-check",tI="@firebase/auth",nI="@firebase/auth-compat",sI="@firebase/database",rI="@firebase/data-connect",iI="@firebase/database-compat",aI="@firebase/functions",oI="@firebase/functions-compat",lI="@firebase/installations",cI="@firebase/installations-compat",uI="@firebase/messaging",dI="@firebase/messaging-compat",hI="@firebase/performance",fI="@firebase/performance-compat",mI="@firebase/remote-config",pI="@firebase/remote-config-compat",gI="@firebase/storage",xI="@firebase/storage-compat",yI="@firebase/firestore",vI="@firebase/vertexai-preview",wI="@firebase/firestore-compat",_I="firebase",bI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="[DEFAULT]",NI={[Lm]:"fire-core",[XT]:"fire-core-compat",[JT]:"fire-analytics",[YT]:"fire-analytics-compat",[eI]:"fire-app-check",[ZT]:"fire-app-check-compat",[tI]:"fire-auth",[nI]:"fire-auth-compat",[sI]:"fire-rtdb",[rI]:"fire-data-connect",[iI]:"fire-rtdb-compat",[aI]:"fire-fn",[oI]:"fire-fn-compat",[lI]:"fire-iid",[cI]:"fire-iid-compat",[uI]:"fire-fcm",[dI]:"fire-fcm-compat",[hI]:"fire-perf",[fI]:"fire-perf-compat",[mI]:"fire-rc",[pI]:"fire-rc-compat",[gI]:"fire-gcs",[xI]:"fire-gcs-compat",[yI]:"fire-fst",[wI]:"fire-fst-compat",[vI]:"fire-vertex","fire-js":"fire-js",[_I]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new Map,jI=new Map,Mm=new Map;function fy(t,e){try{t.container.addComponent(e)}catch(n){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ti(t){const e=t.name;if(Mm.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;Mm.set(e,t);for(const n of ql.values())fy(n,t);for(const n of jI.values())fy(n,t);return!0}function eh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new cc("app","Firebase",EI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=bI;function jb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Om,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw Lr.create("bad-app-name",{appName:String(i)});if(n||(n=vb()),!n)throw Lr.create("no-options");const a=ql.get(i);if(a){if(gd(n,a.options)&&gd(s,a.config))return a;throw Lr.create("duplicate-app",{appName:i})}const o=new RT(i);for(const u of Mm.values())o.addComponent(u);const c=new kI(n,s,o);return ql.set(i,c),c}function th(t=Om){const e=ql.get(t);if(!e&&t===Om&&vb())return jb();if(!e)throw Lr.create("no-app",{appName:t});return e}function Eb(){return Array.from(ql.values())}function gs(t,e,n){var s;let i=(s=NI[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(c.join(" "));return}Ti(new Vr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebase-heartbeat-database",II=1,Hl="firebase-heartbeat-store";let pf=null;function kb(){return pf||(pf=HT(TI,II,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),pf}async function SI(t){try{const n=(await kb()).transaction(Hl),s=await n.objectStore(Hl).get(Tb(t));return await n.done,s}catch(e){if(e instanceof js)Xs.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xs.warn(n.message)}}}async function my(t,e){try{const s=(await kb()).transaction(Hl,"readwrite");await s.objectStore(Hl).put(e,Tb(t)),await s.done}catch(n){if(n instanceof js)Xs.warn(n.message);else{const s=Lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xs.warn(s.message)}}}function Tb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=1024,AI=30*24*60*60*1e3;class RI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=py();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=AI}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Xs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=py(),{heartbeatsToSend:s,unsentEntries:i}=PI(this._heartbeatsCache.heartbeats),a=pd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Xs.warn(n),""}}}function py(){return new Date().toISOString().substring(0,10)}function PI(t,e=CI){const n=[];let s=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),gy(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gy(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class DI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wT()?_T().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return my(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return my(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function gy(t){return pd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){Ti(new Vr("platform-logger",e=>new GT(e),"PRIVATE")),Ti(new Vr("heartbeat",e=>new RI(e),"PRIVATE")),gs(Lm,hy,t),gs(Lm,hy,"esm2017"),gs("fire-js","")}LI("");function ug(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function Ib(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OI=Ib,Sb=new cc("auth","Firebase",Ib());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new lg("@firebase/auth");function MI(t,...e){xd.logLevel<=xe.WARN&&xd.warn(`Auth (${Vi}): ${t}`,...e)}function Du(t,...e){xd.logLevel<=xe.ERROR&&xd.error(`Auth (${Vi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,...e){throw dg(t,...e)}function wn(t,...e){return dg(t,...e)}function Cb(t,e,n){const s=Object.assign(Object.assign({},OI()),{[e]:n});return new cc("auth","Firebase",s).create(e,{appName:t.name})}function xs(t){return Cb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dg(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Sb.create(t,...e)}function te(t,e,...n){if(!t)throw dg(e,...n)}function Vs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Du(e),new Error(e)}function Ys(t,e){t||Vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ab(){return xy()==="http:"||xy()==="https:"}function xy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ab()||gT()||"connection"in navigator)?navigator.onLine:!0}function FI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ys(n>e,"Short delay should be less than long delay!"),this.isMobile=fT()||xT()}get(){return VI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e){Ys(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=new uc(3e4,6e4);function on(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Un(t,e,n,s,i={}){return Pb(t,i,async()=>{let a={},o={};s&&(e==="GET"?o=s:a={body:JSON.stringify(s)});const c=io(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return pT()||(d.referrerPolicy="no-referrer"),Rb.fetch()(Db(t,t.config.apiHost,n,c),d)})}async function Pb(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},UI),e);try{const i=new zI(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw sl(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw sl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw sl(t,"user-disabled",o);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Cb(t,h,d);rs(t,h)}}catch(i){if(i instanceof js)throw i;rs(t,"network-request-failed",{message:String(i)})}}async function Qr(t,e,n,s,i={}){const a=await Un(t,e,n,s,i);return"mfaPendingCredential"in a&&rs(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Db(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?hg(t.config,i):`${t.config.apiScheme}://${i}`}function BI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(wn(this.auth,"network-request-failed")),$I.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sl(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=wn(t,e,s);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t){return t!==void 0&&t.getResponse!==void 0}function vy(t){return t!==void 0&&t.enterprise!==void 0}class qI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HI(t){return(await Un(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function WI(t,e){return Un(t,"GET","/v2/recaptchaConfig",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(t,e){return Un(t,"POST","/v1/accounts:delete",e)}async function Lb(t,e){return Un(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GI(t,e=!1){const n=Ve(t),s=await n.getIdToken(e),i=fg(s);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:s,authTime:gl(gf(i.auth_time)),issuedAtTime:gl(gf(i.iat)),expirationTime:gl(gf(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function gf(t){return Number(t)*1e3}function fg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Du("JWT malformed, contained fewer than 3 sections"),null;try{const i=gb(n);return i?JSON.parse(i):(Du("Failed to decode base64 JWT payload"),null)}catch(i){return Du("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function wy(t){const e=fg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof js&&QI(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function QI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(t){var e;const n=t.auth,s=await t.getIdToken(),i=await Wl(t,Lb(n,{idToken:s}));te(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Ob(a.providerUserInfo):[],c=JI(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),h=u?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Fm(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function YI(t){const e=Ve(t);await yd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JI(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function Ob(t){return t.map(e=>{var{providerId:n}=e,s=ug(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(t,e){const n=await Pb(t,{},async()=>{const s=io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=Db(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Rb.fetch()(o,{method:"POST",headers:c,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eS(t,e){return Un(t,"POST","/v2/accounts:revokeToken",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=wy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:a}=await ZI(e,n);this.updateTokensAndExpiration(s,i,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:a}=n,o=new Da;return s&&(te(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(te(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return Vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fs{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,a=ug(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Fm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GI(this,e)}reload(){return YI(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await yd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(xs(this.auth));const e=await this.getIdToken();return await Wl(this,KI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,a,o,c,u,d,h;const m=(s=n.displayName)!==null&&s!==void 0?s:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,v=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,T=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:y,emailVerified:j,isAnonymous:C,providerData:O,stsTokenManager:N}=n;te(y&&N,e,"internal-error");const x=Da.fromJSON(this.name,N);te(typeof y=="string",e,"internal-error"),hr(m,e.name),hr(p,e.name),te(typeof j=="boolean",e,"internal-error"),te(typeof C=="boolean",e,"internal-error"),hr(v,e.name),hr(_,e.name),hr(R,e.name),hr(T,e.name),hr(b,e.name),hr(w,e.name);const E=new Fs({uid:y,auth:e,email:p,emailVerified:j,displayName:m,isAnonymous:C,photoURL:_,phoneNumber:v,tenantId:R,stsTokenManager:x,createdAt:b,lastLoginAt:w});return O&&Array.isArray(O)&&(E.providerData=O.map(k=>Object.assign({},k))),T&&(E._redirectEventId=T),E}static async _fromIdTokenResponse(e,n,s=!1){const i=new Da;i.updateFromServerResponse(n);const a=new Fs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await yd(a),a}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];te(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Ob(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Da;c.updateFromIdToken(s);const u=new Fs({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Fm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new Map;function Us(t){Ys(t instanceof Function,"Expected a class definition");let e=_y.get(t);return e?(Ys(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_y.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Mb.type="NONE";const by=Mb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){return`firebase:${t}:${e}:${n}`}class La{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:a}=this.auth;this.fullUserKey=Lu(this.userKey,i.apiKey,a),this.fullPersistenceKey=Lu("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new La(Us(by),e,s);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Us(by);const o=Lu(s,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){const m=Fs._fromJSON(e,h);d!==a&&(c=m),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new La(a,e,s):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new La(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($b(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zb(e))return"Blackberry";if(qb(e))return"Webos";if(Fb(e))return"Safari";if((e.includes("chrome/")||Ub(e))&&!e.includes("edge/"))return"Chrome";if(Bb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Vb(t=qt()){return/firefox\//i.test(t)}function Fb(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ub(t=qt()){return/crios\//i.test(t)}function $b(t=qt()){return/iemobile/i.test(t)}function Bb(t=qt()){return/android/i.test(t)}function zb(t=qt()){return/blackberry/i.test(t)}function qb(t=qt()){return/webos/i.test(t)}function mg(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tS(t=qt()){var e;return mg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nS(){return yT()&&document.documentMode===10}function Hb(t=qt()){return mg(t)||Bb(t)||qb(t)||zb(t)||/windows phone/i.test(t)||$b(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t,e=[]){let n;switch(t){case"Browser":n=Ny(qt());break;case"Worker":n=`${Ny(qt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,e={}){return Un(t,"GET","/v2/passwordPolicy",on(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=6;class aS{constructor(e){var n,s,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:iS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,i,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jy(this),this.idTokenSubscription=new jy(this),this.beforeStateQueue=new sS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Us(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Lb(this,{idToken:e}),s=await Fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(xs(this));const n=e?Ve(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rS(this),n=new aS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await eS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Us(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[Us(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&MI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function nr(t){return Ve(t)}class jy{constructor(e){this.auth=e,this.observer=null,this.addObserver=kT(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lS(t){dc=t}function pg(t){return dc.loadJS(t)}function cS(){return dc.recaptchaV2Script}function uS(){return dc.recaptchaEnterpriseScript}function dS(){return dc.gapiScript}function Kb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const hS="recaptcha-enterprise",fS="NO_RECAPTCHA";class mS{constructor(e){this.type=hS,this.auth=nr(e)}async verify(e="verify",n=!1){async function s(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{WI(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new qI(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;vy(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(fS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{s(this.auth).then(c=>{if(!n&&vy(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=uS();u.length!==0&&(u+=c),pg(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function Ey(t,e,n,s=!1){const i=new mS(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o=Object.assign({},e);return s?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Um(t,e,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ey(t,e,n,n==="getOobCode");return s(t,a)}else return s(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ey(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t,e){const n=eh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(gd(a,e??{}))return i;rs(i,"already-initialized")}return n.initialize({options:e})}function pS(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Us);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function gS(t,e,n){const s=nr(t);te(s._canInitEmulator,s,"emulator-config-failed"),te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,a=Qb(e),{host:o,port:c}=xS(e),u=c===null?"":`:${c}`;s.config.emulator={url:`${a}//${o}${u}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),yS()}function Qb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xS(t){const e=Qb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const a=i[1];return{host:a,port:ky(s.substr(a.length+1))}}else{const[a,o]=s.split(":");return{host:a,port:ky(o)}}}function ky(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vs("not implemented")}_getIdTokenResponse(e){return Vs("not implemented")}_linkToIdToken(e,n){return Vs("not implemented")}_getReauthenticationResolver(e){return Vs("not implemented")}}async function vS(t,e){return Un(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(t,e){return Qr(t,"POST","/v1/accounts:signInWithPassword",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(t,e){return Qr(t,"POST","/v1/accounts:signInWithEmailLink",on(t,e))}async function bS(t,e){return Qr(t,"POST","/v1/accounts:signInWithEmailLink",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends nh{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Kl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Kl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,n,"signInWithPassword",wS);case"emailLink":return _S(e,{email:this._email,oobCode:this._password});default:rs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,s,"signUpPassword",vS);case"emailLink":return bS(e,{idToken:n,email:this._email,oobCode:this._password});default:rs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(t,e){return Qr(t,"POST","/v1/accounts:signInWithIdp",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="http://localhost";class Ii extends nh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=n,a=ug(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new Ii(s,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Oa(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Oa(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oa(e,n)}buildRequest(){const e={requestUri:NS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=io(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(t,e){return Un(t,"POST","/v1/accounts:sendVerificationCode",on(t,e))}async function ES(t,e){return Qr(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,e))}async function kS(t,e){const n=await Qr(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,e));if(n.temporaryProof)throw sl(t,"account-exists-with-different-credential",n);return n}const TS={USER_NOT_FOUND:"user-not-found"};async function IS(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Qr(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,n),TS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends nh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new xl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new xl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return ES(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return kS(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return IS(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:s,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:s,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:s,phoneNumber:i,temporaryProof:a}=e;return!s&&!n&&!i&&!a?null:new xl({verificationId:n,verificationCode:s,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CS(t){const e=tl(nl(t)).link,n=e?tl(nl(e)).deep_link_id:null,s=tl(nl(t)).deep_link_id;return(s?tl(nl(s)).link:null)||s||n||e||t}class gg{constructor(e){var n,s,i,a,o,c;const u=tl(nl(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(s=u.oobCode)!==null&&s!==void 0?s:null,m=SS((i=u.mode)!==null&&i!==void 0?i:null);te(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=CS(e);try{return new gg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.providerId=ao.PROVIDER_ID}static credential(e,n){return Kl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=gg.parseLink(n);return te(s,"argument-error"),Kl._fromEmailAndCode(e,s.code,s.tenantId)}}ao.PROVIDER_ID="password";ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Xb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends hc{constructor(){super("facebook.com")}static credential(e){return Ii._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ii._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return yr.credential(n,s)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends hc{constructor(){super("github.com")}static credential(e){return Ii._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends hc{constructor(){super("twitter.com")}static credential(e,n){return Ii._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return wr.credential(n,s)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(t,e){return Qr(t,"POST","/v1/accounts:signUp",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const a=await Fs._fromIdTokenResponse(e,s,i),o=Ty(s);return new Si({user:a,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=Ty(s);return new Si({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function Ty(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends js{constructor(e,n,s,i){var a;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,vd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new vd(e,n,s,i)}}function Yb(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?vd._fromErrorAndOperation(t,a,e,s):a})}async function RS(t,e,n=!1){const s=await Wl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Si._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(t,e,n=!1){const{auth:s}=t;if(Xn(s.app))return Promise.reject(xs(s));const i="reauthenticate";try{const a=await Wl(t,Yb(s,i,e,t),n);te(a.idToken,s,"internal-error");const o=fg(a.idToken);te(o,s,"internal-error");const{sub:c}=o;return te(t.uid===c,s,"user-mismatch"),Si._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&rs(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(t,e,n=!1){if(Xn(t.app))return Promise.reject(xs(t));const s="signIn",i=await Yb(t,s,e),a=await Si._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(a.user),a}async function Zb(t,e){return Jb(nr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(t){const e=nr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yl(t,e,n){if(Xn(t.app))return Promise.reject(xs(t));const s=nr(t),o=await Um(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&eN(t),u}),c=await Si._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(c.user),c}function DS(t,e,n){return Xn(t.app)?Promise.reject(xs(t)):Zb(Ve(t),ao.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&eN(t),s})}function LS(t,e,n,s){return Ve(t).onIdTokenChanged(e,n,s)}function OS(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function MS(t,e,n,s){return Ve(t).onAuthStateChanged(e,n,s)}function VS(t){return Ve(t).signOut()}async function FS(t){return Ve(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){return Un(t,"POST","/v2/accounts/mfaEnrollment:start",on(t,e))}const wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wd,"1"),this.storage.removeItem(wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=1e3,BS=10;class nN extends tN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},a=this.storage.getItem(s);nS()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BS):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},$S)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nN.type="LOCAL";const sN=nN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN extends tN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rN.type="SESSION";const iN=rN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new sh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await zS(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=xg("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return window}function HS(t){dt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(){return typeof dt().WorkerGlobalScope<"u"&&typeof dt().importScripts=="function"}async function WS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GS(){return yg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="firebaseLocalStorageDb",QS=1,_d="firebaseLocalStorage",oN="fbase_key";class fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rh(t,e){return t.transaction([_d],e?"readwrite":"readonly").objectStore(_d)}function XS(){const t=indexedDB.deleteDatabase(aN);return new fc(t).toPromise()}function $m(){const t=indexedDB.open(aN,QS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(_d,{keyPath:oN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(_d)?e(s):(s.close(),await XS(),e(await $m()))})})}async function Iy(t,e,n){const s=rh(t,!0).put({[oN]:e,value:n});return new fc(s).toPromise()}async function YS(t,e){const n=rh(t,!1).get(e),s=await new fc(n).toPromise();return s===void 0?null:s.value}function Sy(t,e){const n=rh(t,!0).delete(e);return new fc(n).toPromise()}const JS=800,ZS=3;class lN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ZS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sh._getInstance(GS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await WS(),!this.activeServiceWorker)return;this.sender=new qS(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $m();return await Iy(e,wd,"1"),await Sy(e,wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Iy(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>YS(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=rh(i,!1).getAll();return new fc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lN.type="LOCAL";const cN=lN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e){return Un(t,"POST","/v2/accounts/mfaSignIn:start",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=500,nC=6e4,hu=1e12;class sC{constructor(e){this.auth=e,this.counter=hu,this._widgets=new Map}render(e,n){const s=this.counter;return this._widgets.set(s,new rC(e,this.auth.name,n||{})),this.counter++,s}reset(e){var n;const s=e||hu;(n=this._widgets.get(s))===null||n===void 0||n.delete(),this._widgets.delete(s)}getResponse(e){var n;const s=e||hu;return((n=this._widgets.get(s))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const s=e||hu;return(n=this._widgets.get(s))===null||n===void 0||n.execute(),""}}class rC{constructor(e,n,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;te(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=iC(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},nC)},tC))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function iC(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<t;s++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=Kb("rcb"),aC=new uc(3e4,6e4);class oC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=dt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return te(lC(n),e,"argument-error"),this.shouldResolveImmediately(n)&&yy(dt().grecaptcha)?Promise.resolve(dt().grecaptcha):new Promise((s,i)=>{const a=dt().setTimeout(()=>{i(wn(e,"network-request-failed"))},aC.get());dt()[xf]=()=>{dt().clearTimeout(a),delete dt()[xf];const c=dt().grecaptcha;if(!c||!yy(c)){i(wn(e,"internal-error"));return}const u=c.render;c.render=(d,h)=>{const m=u(d,h);return this.counter++,m},this.hostLanguage=n,s(c)};const o=`${cS()}?${io({onload:xf,render:"explicit",hl:n})}`;pg(o).catch(()=>{clearTimeout(a),i(wn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=dt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function lC(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class cC{async load(e){return new sC(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="recaptcha",uC={theme:"light",type:"image"};class Cy{constructor(e,n,s=Object.assign({},uC)){this.parameters=s,this.type=uN,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nr(e),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;te(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cC:new oC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),s=n.getResponse(e);return s||new Promise(i=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),i(o))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(s=>s(n)),typeof e=="function")e(n);else if(typeof e=="string"){const s=dt()[e];typeof s=="function"&&s(n)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(Ab()&&!yg(),this.auth,"internal-error"),await dC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await HI(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function dC(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=xl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function fC(t,e,n){if(Xn(t.app))return Promise.reject(xs(t));const s=nr(t),i=await mC(s,e,Ve(n));return new hC(i,a=>Zb(s,a))}async function mC(t,e,n){var s;const i=await n.verify();try{te(typeof i=="string",t,"argument-error"),te(n.type===uN,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const o=a.session;if("phoneNumber"in a)return te(o.type==="enroll",t,"internal-error"),(await US(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{te(o.type==="signin",t,"internal-error");const c=((s=a.multiFactorHint)===null||s===void 0?void 0:s.uid)||a.multiFactorUid;return te(c,t,"missing-multi-factor-info"),(await eC(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await jS(t,{phoneNumber:a.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t,e){return e?Us(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends nh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gC(t){return Jb(t.auth,new vg(t),t.bypassAuthState)}function xC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),PS(n,new vg(t),t.bypassAuthState)}async function yC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),RS(n,new vg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,s,i,a=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gC;case"linkViaPopup":case"linkViaRedirect":return yC;case"reauthViaPopup":case"reauthViaRedirect":return xC;default:rs(this.auth,"internal-error")}}resolve(e){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new uc(2e3,1e4);class ka extends dN{constructor(e,n,s,i,a){super(e,n,i,a),this.provider=s,this.authWindow=null,this.pollId=null,ka.currentPopupAction&&ka.currentPopupAction.cancel(),ka.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Ys(this.filter.length===1,"Popup operations only handle one event");const e=xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ka.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vC.get())};e()}}ka.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="pendingRedirect",Ou=new Map;class _C extends dN{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Ou.get(this.auth._key());if(!e){try{const s=await bC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Ou.set(this.auth._key(),e)}return this.bypassAuthState||Ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bC(t,e){const n=EC(e),s=jC(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function NC(t,e){Ou.set(t._key(),e)}function jC(t){return Us(t._redirectPersistence)}function EC(t){return Lu(wC,t.config.apiKey,t.name)}async function kC(t,e,n=!1){if(Xn(t.app))return Promise.reject(xs(t));const s=nr(t),i=pC(s,e),o=await new _C(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=10*60*1e3;class IC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!hN(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ay(e))}saveEventToCache(e){this.cachedEventUids.add(Ay(e)),this.lastProcessedEventTime=Date.now()}}function Ay(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(t,e={}){return Un(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RC=/^https?/;async function PC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CC(t);for(const n of e)try{if(DC(n))return}catch{}rs(t,"unauthorized-domain")}function DC(t){const e=Vm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!RC.test(n))return!1;if(AC.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new uc(3e4,6e4);function Ry(){const t=dt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OC(t){return new Promise((e,n)=>{var s,i,a;function o(){Ry(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ry(),n(wn(t,"network-request-failed"))},timeout:LC.get()})}if(!((i=(s=dt().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=dt().gapi)===null||a===void 0)&&a.load)o();else{const c=Kb("iframefcb");return dt()[c]=()=>{gapi.load?o():n(wn(t,"network-request-failed"))},pg(`${dS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Mu=null,e})}let Mu=null;function MC(t){return Mu=Mu||OC(t),Mu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=new uc(5e3,15e3),FC="__/auth/iframe",UC="emulator/auth/iframe",$C={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zC(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hg(e,UC):`https://${t.config.authDomain}/${FC}`,s={apiKey:e.apiKey,appName:t.name,v:Vi},i=BC.get(t.config.apiHost);i&&(s.eid=i);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${io(s).slice(1)}`}async function qC(t){const e=await MC(t),n=dt().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:zC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$C,dontclear:!0},s=>new Promise(async(i,a)=>{await s.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),c=dt().setTimeout(()=>{a(o)},VC.get());function u(){dt().clearTimeout(c),i(s)}s.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WC=500,KC=600,GC="_blank",QC="http://localhost";class Py{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XC(t,e,n,s=WC,i=KC){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const u=Object.assign(Object.assign({},HC),{width:s.toString(),height:i.toString(),top:a,left:o}),d=qt().toLowerCase();n&&(c=Ub(d)?GC:n),Vb(d)&&(e=e||QC,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[v,_])=>`${p}${v}=${_},`,"");if(tS(d)&&c!=="_self")return YC(e||"",c),new Py(null);const m=window.open(e||"",c,h);te(m,t,"popup-blocked");try{m.focus()}catch{}return new Py(m)}function YC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="__/auth/handler",ZC="emulator/auth/handler",eA=encodeURIComponent("fac");async function Dy(t,e,n,s,i,a){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Vi,eventId:i};if(e instanceof Xb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ET(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof hc){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${eA}=${encodeURIComponent(u)}`:"";return`${tA(t)}?${io(c).slice(1)}${d}`}function tA({config:t}){return t.emulator?hg(t,ZC):`https://${t.authDomain}/${JC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="webStorageSupport";class nA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iN,this._completeRedirectFn=kC,this._overrideRedirectResult=NC}async _openPopup(e,n,s,i){var a;Ys((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Dy(e,n,s,Vm(),i);return XC(e,o,xg())}async _openRedirect(e,n,s,i){await this._originValidation(e);const a=await Dy(e,n,s,Vm(),i);return HS(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Ys(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await qC(e),s=new IC(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yf,{type:yf},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[yf];o!==void 0&&n(!!o),rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Hb()||Fb()||mg()}}const sA=nA;var Ly="@firebase/auth",Oy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aA(t){Ti(new Vr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=s.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wb(t)},d=new oS(s,i,a,u);return pS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ti(new Vr("auth-internal",e=>{const n=nr(e.getProvider("auth").getImmediate());return(s=>new rA(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(Ly,Oy,iA(t)),gs(Ly,Oy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=5*60,lA=wb("authIdTokenMaxAge")||oA;let My=null;const cA=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>lA)return;const i=n==null?void 0:n.token;My!==i&&(My=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uA(t=th()){const e=eh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Gb(t,{popupRedirectResolver:sA,persistence:[cN,sN,iN]}),s=wb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const o=cA(a.toString());OS(n,o,()=>o(n.currentUser)),LS(n,c=>o(c))}}const i=xb("auth");return i&&gS(n,`http://${i}`),n}function dA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lS({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const a=wn("internal-error");a.customData=i,n(a)},s.type="text/javascript",s.charset="UTF-8",dA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aA("Browser");var hA="firebase",fA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(hA,fA,"app");var Vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,fN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function E(){}E.prototype=x.prototype,N.D=x.prototype,N.prototype=new E,N.prototype.constructor=N,N.C=function(k,P,L){for(var D=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)D[ie-2]=arguments[ie];return x.prototype[P].apply(k,D)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,x,E){E||(E=0);var k=Array(16);if(typeof x=="string")for(var P=0;16>P;++P)k[P]=x.charCodeAt(E++)|x.charCodeAt(E++)<<8|x.charCodeAt(E++)<<16|x.charCodeAt(E++)<<24;else for(P=0;16>P;++P)k[P]=x[E++]|x[E++]<<8|x[E++]<<16|x[E++]<<24;x=N.g[0],E=N.g[1],P=N.g[2];var L=N.g[3],D=x+(L^E&(P^L))+k[0]+3614090360&4294967295;x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+k[1]+3905402710&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+k[2]+606105819&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+k[3]+3250441966&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(L^E&(P^L))+k[4]+4118548399&4294967295,x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+k[5]+1200080426&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+k[6]+2821735955&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+k[7]+4249261313&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(L^E&(P^L))+k[8]+1770035416&4294967295,x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+k[9]+2336552879&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+k[10]+4294925233&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+k[11]+2304563134&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(L^E&(P^L))+k[12]+1804603682&4294967295,x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+k[13]+4254626195&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+k[14]+2792965006&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+k[15]+1236535329&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(P^L&(E^P))+k[1]+4129170786&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+k[6]+3225465664&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+k[11]+643717713&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+k[0]+3921069994&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(E^P))+k[5]+3593408605&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+k[10]+38016083&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+k[15]+3634488961&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+k[4]+3889429448&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(E^P))+k[9]+568446438&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+k[14]+3275163606&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+k[3]+4107603335&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+k[8]+1163531501&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(E^P))+k[13]+2850285829&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+k[2]+4243563512&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+k[7]+1735328473&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+k[12]+2368359562&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(E^P^L)+k[5]+4294588738&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+k[8]+2272392833&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+k[11]+1839030562&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+k[14]+4259657740&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(E^P^L)+k[1]+2763975236&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+k[4]+1272893353&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+k[7]+4139469664&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+k[10]+3200236656&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(E^P^L)+k[13]+681279174&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+k[0]+3936430074&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+k[3]+3572445317&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+k[6]+76029189&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(E^P^L)+k[9]+3654602809&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+k[12]+3873151461&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+k[15]+530742520&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+k[2]+3299628645&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(P^(E|~L))+k[0]+4096336452&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+k[7]+1126891415&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+k[14]+2878612391&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+k[5]+4237533241&4294967295,E=P+(D<<21&4294967295|D>>>11),D=x+(P^(E|~L))+k[12]+1700485571&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+k[3]+2399980690&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+k[10]+4293915773&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+k[1]+2240044497&4294967295,E=P+(D<<21&4294967295|D>>>11),D=x+(P^(E|~L))+k[8]+1873313359&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+k[15]+4264355552&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+k[6]+2734768916&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+k[13]+1309151649&4294967295,E=P+(D<<21&4294967295|D>>>11),D=x+(P^(E|~L))+k[4]+4149444226&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+k[11]+3174756917&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+k[2]+718787259&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+P&4294967295,N.g[3]=N.g[3]+L&4294967295}s.prototype.u=function(N,x){x===void 0&&(x=N.length);for(var E=x-this.blockSize,k=this.B,P=this.h,L=0;L<x;){if(P==0)for(;L<=E;)i(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<x;)if(k[P++]=N.charCodeAt(L++),P==this.blockSize){i(this,k),P=0;break}}else for(;L<x;)if(k[P++]=N[L++],P==this.blockSize){i(this,k),P=0;break}}this.h=P,this.o+=x},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;var E=8*this.o;for(x=N.length-8;x<N.length;++x)N[x]=E&255,E/=256;for(this.u(N),N=Array(16),x=E=0;4>x;++x)for(var k=0;32>k;k+=8)N[E++]=this.g[x]>>>k&255;return N};function a(N,x){var E=c;return Object.prototype.hasOwnProperty.call(E,N)?E[N]:E[N]=x(N)}function o(N,x){this.h=x;for(var E=[],k=!0,P=N.length-1;0<=P;P--){var L=N[P]|0;k&&L==x||(E[P]=L,k=!1)}this.g=E}var c={};function u(N){return-128<=N&&128>N?a(N,function(x){return new o([x|0],0>x?-1:0)}):new o([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return T(d(-N));for(var x=[],E=1,k=0;N>=E;k++)x[k]=N/E|0,E*=4294967296;return new o(x,0)}function h(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return T(h(N.substring(1),x));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(x,8)),k=m,P=0;P<N.length;P+=8){var L=Math.min(8,N.length-P),D=parseInt(N.substring(P,P+L),x);8>L?(L=d(Math.pow(x,L)),k=k.j(L).add(d(D))):(k=k.j(E),k=k.add(d(D)))}return k}var m=u(0),p=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-T(this).m();for(var N=0,x=1,E=0;E<this.g.length;E++){var k=this.i(E);N+=(0<=k?k:4294967296+k)*x,x*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(_(this))return"0";if(R(this))return"-"+T(this).toString(N);for(var x=d(Math.pow(N,6)),E=this,k="";;){var P=j(E,x).g;E=b(E,P.j(x));var L=((0<E.g.length?E.g[0]:E.h)>>>0).toString(N);if(E=P,_(E))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function _(N){if(N.h!=0)return!1;for(var x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function R(N){return N.h==-1}t.l=function(N){return N=b(this,N),R(N)?-1:_(N)?0:1};function T(N){for(var x=N.g.length,E=[],k=0;k<x;k++)E[k]=~N.g[k];return new o(E,~N.h).add(p)}t.abs=function(){return R(this)?T(this):this},t.add=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],k=0,P=0;P<=x;P++){var L=k+(this.i(P)&65535)+(N.i(P)&65535),D=(L>>>16)+(this.i(P)>>>16)+(N.i(P)>>>16);k=D>>>16,L&=65535,D&=65535,E[P]=D<<16|L}return new o(E,E[E.length-1]&-2147483648?-1:0)};function b(N,x){return N.add(T(x))}t.j=function(N){if(_(this)||_(N))return m;if(R(this))return R(N)?T(this).j(T(N)):T(T(this).j(N));if(R(N))return T(this.j(T(N)));if(0>this.l(v)&&0>N.l(v))return d(this.m()*N.m());for(var x=this.g.length+N.g.length,E=[],k=0;k<2*x;k++)E[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<N.g.length;P++){var L=this.i(k)>>>16,D=this.i(k)&65535,ie=N.i(P)>>>16,V=N.i(P)&65535;E[2*k+2*P]+=D*V,w(E,2*k+2*P),E[2*k+2*P+1]+=L*V,w(E,2*k+2*P+1),E[2*k+2*P+1]+=D*ie,w(E,2*k+2*P+1),E[2*k+2*P+2]+=L*ie,w(E,2*k+2*P+2)}for(k=0;k<x;k++)E[k]=E[2*k+1]<<16|E[2*k];for(k=x;k<2*x;k++)E[k]=0;return new o(E,0)};function w(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function y(N,x){this.g=N,this.h=x}function j(N,x){if(_(x))throw Error("division by zero");if(_(N))return new y(m,m);if(R(N))return x=j(T(N),x),new y(T(x.g),T(x.h));if(R(x))return x=j(N,T(x)),new y(T(x.g),x.h);if(30<N.g.length){if(R(N)||R(x))throw Error("slowDivide_ only works with positive integers.");for(var E=p,k=x;0>=k.l(N);)E=C(E),k=C(k);var P=O(E,1),L=O(k,1);for(k=O(k,2),E=O(E,2);!_(k);){var D=L.add(k);0>=D.l(N)&&(P=P.add(E),L=D),k=O(k,1),E=O(E,1)}return x=b(N,P.j(x)),new y(P,x)}for(P=m;0<=N.l(x);){for(E=Math.max(1,Math.floor(N.m()/x.m())),k=Math.ceil(Math.log(E)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=d(E),D=L.j(x);R(D)||0<D.l(N);)E-=k,L=d(E),D=L.j(x);_(L)&&(L=p),P=P.add(L),N=b(N,D)}return new y(P,N)}t.A=function(N){return j(this,N).h},t.and=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],k=0;k<x;k++)E[k]=this.i(k)&N.i(k);return new o(E,this.h&N.h)},t.or=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],k=0;k<x;k++)E[k]=this.i(k)|N.i(k);return new o(E,this.h|N.h)},t.xor=function(N){for(var x=Math.max(this.g.length,N.g.length),E=[],k=0;k<x;k++)E[k]=this.i(k)^N.i(k);return new o(E,this.h^N.h)};function C(N){for(var x=N.g.length+1,E=[],k=0;k<x;k++)E[k]=N.i(k)<<1|N.i(k-1)>>>31;return new o(E,N.h)}function O(N,x){var E=x>>5;x%=32;for(var k=N.g.length-E,P=[],L=0;L<k;L++)P[L]=0<x?N.i(L+E)>>>x|N.i(L+E+1)<<32-x:N.i(L+E);return new o(P,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,fN=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,yi=o}).apply(typeof Vy<"u"?Vy:typeof self<"u"?self:typeof window<"u"?window:{});var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mN,rl,pN,Vu,Bm,gN,xN,yN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof fu=="object"&&fu];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function i(l,f){if(f)e:{var g=s;l=l.split(".");for(var S=0;S<l.length-1;S++){var M=l[S];if(!(M in g))break e;g=g[M]}l=l[l.length-1],S=g[l],f=f(S),f!=S&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function a(l,f){l instanceof String&&(l+="");var g=0,S=!1,M={next:function(){if(!S&&g<l.length){var U=g++;return{value:f(U,l[U]),done:!1}}return S=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(l){return l||function(){return a(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function m(l,f,g){if(!l)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,S),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function v(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function _(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(S,M,U){for(var Y=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)Y[Pe-2]=arguments[Pe];return f.prototype[M].apply(S,Y)}}function R(l){const f=l.length;if(0<f){const g=Array(f);for(let S=0;S<f;S++)g[S]=l[S];return g}return[]}function T(l,f){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(u(S)){const M=l.length||0,U=S.length||0;l.length=M+U;for(let Y=0;Y<U;Y++)l[M+Y]=S[Y]}else l.push(S)}}class b{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(l){return/^[\s\xa0]*$/.test(l)}function y(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var C=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function O(l,f,g){for(const S in l)f.call(g,l[S],S,l)}function N(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function x(l){const f={};for(const g in l)f[g]=l[g];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,f){let g,S;for(let M=1;M<arguments.length;M++){S=arguments[M];for(g in S)l[g]=S[g];for(let U=0;U<E.length;U++)g=E[U],Object.prototype.hasOwnProperty.call(S,g)&&(l[g]=S[g])}}function P(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function L(l){c.setTimeout(()=>{throw l},0)}function D(){var l=X;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ie{constructor(){this.h=this.g=null}add(f,g){const S=V.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var V=new b(()=>new $,l=>l.reset());class ${constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let B,F=!1,X=new ie,se=()=>{const l=c.Promise.resolve(void 0);B=()=>{l.then(ve)}};var ve=()=>{for(var l;l=D();){try{l.h.call(l.g)}catch(g){L(g)}var f=V;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}F=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Le(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Le.prototype.h=function(){this.defaultPrevented=!0};var Pt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};c.addEventListener("test",g,f),c.removeEventListener("test",g,f)}catch{}return l}();function Bn(l,f){if(Le.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(C){e:{try{j(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ln[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Bn.aa.h.call(this)}}_(Bn,Le);var ln={2:"touch",3:"pen",4:"mouse"};Bn.prototype.h=function(){Bn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),sr=0;function Cc(l,f,g,S,M){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=M,this.key=++sr,this.da=this.fa=!1}function rr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Yr(l){this.src=l,this.g={},this.h=0}Yr.prototype.add=function(l,f,g,S,M){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var Y=$i(l,f,S,M);return-1<Y?(f=l[Y],g||(f.fa=!1)):(f=new Cc(f,this.src,U,!!S,M),f.fa=g,l.push(f)),f};function ks(l,f){var g=f.type;if(g in l.g){var S=l.g[g],M=Array.prototype.indexOf.call(S,f,void 0),U;(U=0<=M)&&Array.prototype.splice.call(S,M,1),U&&(rr(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function $i(l,f,g,S){for(var M=0;M<l.length;++M){var U=l[M];if(!U.da&&U.listener==f&&U.capture==!!g&&U.ha==S)return M}return-1}var Bi="closure_lm_"+(1e6*Math.random()|0),zi={};function mo(l,f,g,S,M){if(Array.isArray(f)){for(var U=0;U<f.length;U++)mo(l,f[U],g,S,M);return null}return g=vo(g),l&&l[cn]?l.K(f,g,d(S)?!!S.capture:!1,M):Ac(l,f,g,!1,S,M)}function Ac(l,f,g,S,M,U){if(!f)throw Error("Invalid event type");var Y=d(M)?!!M.capture:!!M,Pe=qi(l);if(Pe||(l[Bi]=Pe=new Yr(l)),g=Pe.add(f,g,S,Y,U),g.proxy)return g;if(S=po(),g.proxy=S,S.src=l,S.listener=g,l.addEventListener)Pt||(M=Y),M===void 0&&(M=!1),l.addEventListener(f.toString(),S,M);else if(l.attachEvent)l.attachEvent(xo(f.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function po(){function l(g){return f.call(l.src,l.listener,g)}const f=yo;return l}function go(l,f,g,S,M){if(Array.isArray(f))for(var U=0;U<f.length;U++)go(l,f[U],g,S,M);else S=d(S)?!!S.capture:!!S,g=vo(g),l&&l[cn]?(l=l.i,f=String(f).toString(),f in l.g&&(U=l.g[f],g=$i(U,g,S,M),-1<g&&(rr(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete l.g[f],l.h--)))):l&&(l=qi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=$i(f,g,S,M)),(g=-1<l?f[l]:null)&&as(g))}function as(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[cn])ks(f.i,l);else{var g=l.type,S=l.proxy;f.removeEventListener?f.removeEventListener(g,S,l.capture):f.detachEvent?f.detachEvent(xo(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=qi(f))?(ks(g,l),g.h==0&&(g.src=null,f[Bi]=null)):rr(l)}}}function xo(l){return l in zi?zi[l]:zi[l]="on"+l}function yo(l,f){if(l.da)l=!0;else{f=new Bn(f,this);var g=l.listener,S=l.ha||l.src;l.fa&&as(l),l=g.call(S,f)}return l}function qi(l){return l=l[Bi],l instanceof Yr?l:null}var Ts="__closure_events_fn_"+(1e9*Math.random()>>>0);function vo(l){return typeof l=="function"?l:(l[Ts]||(l[Ts]=function(f){return l.handleEvent(f)}),l[Ts])}function lt(){pe.call(this),this.i=new Yr(this),this.M=this,this.F=null}_(lt,pe),lt.prototype[cn]=!0,lt.prototype.removeEventListener=function(l,f,g,S){go(this,l,f,g,S)};function yt(l,f){var g,S=l.F;if(S)for(g=[];S;S=S.F)g.push(S);if(l=l.M,S=f.type||f,typeof f=="string")f=new Le(f,l);else if(f instanceof Le)f.target=f.target||l;else{var M=f;f=new Le(S,l),k(f,M)}if(M=!0,g)for(var U=g.length-1;0<=U;U--){var Y=f.g=g[U];M=Jr(Y,S,!0,f)&&M}if(Y=f.g=l,M=Jr(Y,S,!0,f)&&M,M=Jr(Y,S,!1,f)&&M,g)for(U=0;U<g.length;U++)Y=f.g=g[U],M=Jr(Y,S,!1,f)&&M}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],S=0;S<g.length;S++)rr(g[S]);delete l.g[f],l.h--}}this.F=null},lt.prototype.K=function(l,f,g,S){return this.i.add(String(l),f,!1,g,S)},lt.prototype.L=function(l,f,g,S){return this.i.add(String(l),f,!0,g,S)};function Jr(l,f,g,S){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,U=0;U<f.length;++U){var Y=f[U];if(Y&&!Y.da&&Y.capture==g){var Pe=Y.listener,kt=Y.ha||Y.src;Y.fa&&ks(l.i,Y),M=Pe.call(kt,S)!==!1&&M}}return M&&!S.defaultPrevented}function wo(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:c.setTimeout(l,f||0)}function Hi(l){l.g=wo(()=>{l.g=null,l.i&&(l.i=!1,Hi(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Rc extends pe{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Hi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(l){pe.call(this),this.h=l,this.g={}}_(kn,pe);var _o=[];function Wi(l){O(l.g,function(f,g){this.g.hasOwnProperty(g)&&as(f)},l),l.g={}}kn.prototype.N=function(){kn.aa.N.call(this),Wi(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ki=c.JSON.stringify,Pc=c.JSON.parse,Dc=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Gi(){}Gi.prototype.h=null;function bo(l){return l.h||(l.h=l.i())}function os(){}var ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ar(){Le.call(this,"d")}_(ar,Le);function Qi(){Le.call(this,"c")}_(Qi,Le);var ls={},No=null;function zn(){return No=No||new lt}ls.La="serverreachability";function Lc(l){Le.call(this,ls.La,l)}_(Lc,Le);function Zr(l){const f=zn();yt(f,new Lc(f))}ls.STAT_EVENT="statevent";function Xi(l,f){Le.call(this,ls.STAT_EVENT,l),this.stat=f}_(Xi,Le);function pt(l){const f=zn();yt(f,new Xi(f,l))}ls.Ma="timingevent";function Yi(l,f){Le.call(this,ls.Ma,l),this.size=f}_(Yi,Le);function or(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},f)}function Is(){this.g=!0}Is.prototype.xa=function(){this.g=!1};function Ji(l,f,g,S,M,U){l.info(function(){if(l.g)if(U)for(var Y="",Pe=U.split("&"),kt=0;kt<Pe.length;kt++){var Ee=Pe[kt].split("=");if(1<Ee.length){var Dt=Ee[0];Ee=Ee[1];var Lt=Dt.split("_");Y=2<=Lt.length&&Lt[1]=="type"?Y+(Dt+"="+Ee+"&"):Y+(Dt+"=redacted&")}}else Y=null;else Y=U;return"XMLHTTP REQ ("+S+") [attempt "+M+"]: "+f+`
`+g+`
`+Y})}function jo(l,f,g,S,M,U,Y){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+M+"]: "+f+`
`+g+`
`+U+" "+Y})}function Ss(l,f,g,S){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Oc(l,g)+(S?" "+S:"")})}function Eo(l,f){l.info(function(){return"TIMEOUT: "+f})}Is.prototype.info=function(){};function Oc(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var S=g[l];if(!(2>S.length)){var M=S[1];if(Array.isArray(M)&&!(1>M.length)){var U=M[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Y=1;Y<M.length;Y++)M[Y]=""}}}}return Ki(g)}catch{return f}}var lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ko={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zi;function qn(){}_(qn,Gi),qn.prototype.g=function(){return new XMLHttpRequest},qn.prototype.i=function(){return{}},Zi=new qn;function cs(l,f,g,S){this.j=l,this.i=f,this.l=g,this.R=S||1,this.U=new kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mc}function Mc(){this.i=null,this.g="",this.h=!1}var Vc={},To={};function Io(l,f,g){l.L=1,l.v=sa(he(f)),l.m=g,l.P=!0,ct(l,null)}function ct(l,f){l.F=Date.now(),ea(l),l.A=he(l.v);var g=l.A,S=l.R;Array.isArray(S)||(S=[String(S)]),bx(g.i,"t",S),l.C=0,g=l.j.J,l.h=new Mc,l.g=Ux(l.j,g?f:null,!l.m),0<l.O&&(l.M=new Rc(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,S=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(_o[0]=M.toString()),M=_o);for(var U=0;U<M.length;U++){var Y=mo(g,M[U],S||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Zr(),Ji(l.i,l.u,l.A,l.l,l.R,l.m)}cs.prototype.ca=function(l){l=l.target;const f=this.M;f&&As(l)==3?f.j():this.Y(l)},cs.prototype.Y=function(l){try{if(l==this.g)e:{const Lt=As(this.g);var f=this.g.Ba();const la=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||Sx(this.g)))){this.J||Lt!=4||f==7||(f==8||0>=la?Zr(3):Zr(2)),Co(this);var g=this.g.Z();this.X=g;t:if(So(this)){var S=Sx(this.g);l="";var M=S.length,U=As(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cs(this),ei(this);var Y="";break t}this.h.i=new c.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(S[f],{stream:!(U&&f==M-1)});S.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,jo(this.i,this.u,this.A,this.l,this.R,Lt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,kt=this.g;if((Pe=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Pe)){var Ee=Pe;break t}}Ee=null}if(g=Ee)Ss(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ao(this,g);else{this.o=!1,this.s=3,pt(12),Cs(this),ei(this);break e}}if(this.P){g=!0;let Hn;for(;!this.J&&this.C<Y.length;)if(Hn=Sh(this,Y),Hn==To){Lt==4&&(this.s=4,pt(14),g=!1),Ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==Vc){this.s=4,pt(15),Ss(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else Ss(this.i,this.l,Hn,null),Ao(this,Hn);if(So(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||Y.length!=0||this.h.h||(this.s=1,pt(16),g=!1),this.o=this.o&&g,!g)Ss(this.i,this.l,Y,"[Invalid Chunked Response]"),Cs(this),ei(this);else if(0<Y.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Lh(Dt),Dt.M=!0,pt(11))}}else Ss(this.i,this.l,Y,null),Ao(this,Y);Lt==4&&Cs(this),this.o&&!this.J&&(Lt==4?Ox(this.j,this):(this.o=!1,ea(this)))}else k1(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Cs(this),ei(this)}}}catch{}finally{}};function So(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Sh(l,f){var g=l.C,S=f.indexOf(`
`,g);return S==-1?To:(g=Number(f.substring(g,S)),isNaN(g)?Vc:(S+=1,S+g>f.length?To:(f=f.slice(S,S+g),l.C=S+g,f)))}cs.prototype.cancel=function(){this.J=!0,Cs(this)};function ea(l){l.S=Date.now()+l.I,Fc(l,l.I)}function Fc(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=or(p(l.ba,l),f)}function Co(l){l.B&&(c.clearTimeout(l.B),l.B=null)}cs.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Eo(this.i,this.A),this.L!=2&&(Zr(),pt(17)),Cs(this),this.s=2,ei(this)):Fc(this,this.S-l)};function ei(l){l.j.G==0||l.J||Ox(l.j,l)}function Cs(l){Co(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Wi(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ao(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||ta(g.h,l))){if(!l.K&&ta(g.h,l)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var M=S;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Wc(g),qc(g);else break e;Dh(g),pt(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=or(p(g.Za,g),6e3));if(1>=Po(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ri(g,11)}else if((l.K||g.g==l)&&Wc(g),!w(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let Ee=M[f];if(g.T=Ee[0],Ee=Ee[1],g.G==2)if(Ee[0]=="c"){g.K=Ee[1],g.ia=Ee[2];const Dt=Ee[3];Dt!=null&&(g.la=Dt,g.j.info("VER="+g.la));const Lt=Ee[4];Lt!=null&&(g.Aa=Lt,g.j.info("SVER="+g.Aa));const la=Ee[5];la!=null&&typeof la=="number"&&0<la&&(S=1.5*la,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Hn=l.g;if(Hn){const Gc=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gc){var U=S.h;U.g||Gc.indexOf("spdy")==-1&&Gc.indexOf("quic")==-1&&Gc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(na(U,U.h),U.h=null))}if(S.D){const Oh=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Oh&&(S.ya=Oh,Se(S.I,S.D,Oh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var Y=l;if(S.qa=Fx(S,S.J?S.ia:null,S.W),Y.K){A(S.h,Y);var Pe=Y,kt=S.L;kt&&(Pe.I=kt),Pe.B&&(Co(Pe),ea(Pe)),S.g=Y}else Dx(S);0<g.i.length&&Hc(g)}else Ee[0]!="stop"&&Ee[0]!="close"||ri(g,7);else g.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?ri(g,7):Ph(g):Ee[0]!="noop"&&g.l&&g.l.ta(Ee),g.v=0)}}Zr(4)}catch{}}var Ch=class{constructor(l,f){this.g=l,this.map=f}};function Uc(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ro(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Po(l){return l.h?1:l.g?l.g.size:0}function ta(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function na(l,f){l.g?l.g.add(f):l.h=f}function A(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Uc.prototype.cancel=function(){if(this.i=W(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function W(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return R(l.i)}function K(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,S=0;S<g;S++)f.push(l[S]);return f}f=[],g=0;for(S in l)f[g++]=l[S];return f}function le(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const S in l)f[g++]=S;return f}}}function je(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=le(l),S=K(l),M=S.length,U=0;U<M;U++)f.call(void 0,S[U],g&&g[U],l)}var Ae=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var S=l[g].indexOf("="),M=null;if(0<=S){var U=l[g].substring(0,S);M=l[g].substring(S+1)}else U=l[g];f(U,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function vt(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof vt){this.h=l.h,Re(this,l.j),this.o=l.o,this.g=l.g,Ke(this,l.s),this.l=l.l;var f=l.i,g=new Lo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),un(this,g),this.m=l.m}else l&&(f=String(l).match(Ae))?(this.h=!1,Re(this,f[1]||"",!0),this.o=ti(f[2]||""),this.g=ti(f[3]||"",!0),Ke(this,f[4]),this.l=ti(f[5]||"",!0),un(this,f[6]||"",!0),this.m=ti(f[7]||"")):(this.h=!1,this.i=new Lo(null,this.h))}vt.prototype.toString=function(){var l=[],f=this.j;f&&l.push(ni(f,Do,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(ni(f,Do,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(ni(g,g.charAt(0)=="/"?ra:fe,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",ni(g,ia)),l.join("")};function he(l){return new vt(l)}function Re(l,f,g){l.j=g?ti(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Ke(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function un(l,f,g){f instanceof Lo?(l.i=f,v1(l.i,l.h)):(g||(f=ni(f,si)),l.i=new Lo(f,l.h))}function Se(l,f,g){l.i.set(f,g)}function sa(l){return Se(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ti(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ni(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,Ah),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ah(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Do=/[#\/\?@]/g,fe=/[#\?:]/g,ra=/[#\?]/g,si=/[#\?@]/g,ia=/#/g;function Lo(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function cr(l){l.g||(l.g=new Map,l.h=0,l.i&&Ze(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Lo.prototype,t.add=function(l,f){cr(this),this.i=null,l=aa(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function wx(l,f){cr(l),f=aa(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function _x(l,f){return cr(l),f=aa(l,f),l.g.has(f)}t.forEach=function(l,f){cr(this),this.g.forEach(function(g,S){g.forEach(function(M){l.call(f,M,S,this)},this)},this)},t.na=function(){cr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){const M=l[S];for(let U=0;U<M.length;U++)g.push(f[S])}return g},t.V=function(l){cr(this);let f=[];if(typeof l=="string")_x(this,l)&&(f=f.concat(this.g.get(aa(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return cr(this),this.i=null,l=aa(this,l),_x(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function bx(l,f,g){wx(l,f),0<g.length&&(l.i=null,l.g.set(aa(l,f),R(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];const U=encodeURIComponent(String(S)),Y=this.V(S);for(S=0;S<Y.length;S++){var M=U;Y[S]!==""&&(M+="="+encodeURIComponent(String(Y[S]))),l.push(M)}}return this.i=l.join("&")};function aa(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function v1(l,f){f&&!l.j&&(cr(l),l.i=null,l.g.forEach(function(g,S){var M=S.toLowerCase();S!=M&&(wx(this,S),bx(this,M,g))},l)),l.j=f}function w1(l,f){const g=new Is;if(c.Image){const S=new Image;S.onload=v(ur,g,"TestLoadImage: loaded",!0,f,S),S.onerror=v(ur,g,"TestLoadImage: error",!1,f,S),S.onabort=v(ur,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=v(ur,g,"TestLoadImage: timeout",!1,f,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else f(!1)}function _1(l,f){const g=new Is,S=new AbortController,M=setTimeout(()=>{S.abort(),ur(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:S.signal}).then(U=>{clearTimeout(M),U.ok?ur(g,"TestPingServer: ok",!0,f):ur(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),ur(g,"TestPingServer: error",!1,f)})}function ur(l,f,g,S,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),S(g)}catch{}}function b1(){this.g=new Dc}function N1(l,f,g){const S=g||"";try{je(l,function(M,U){let Y=M;d(M)&&(Y=Ki(M)),f.push(S+U+"="+encodeURIComponent(Y))})}catch(M){throw f.push(S+"type="+encodeURIComponent("_badmap")),M}}function $c(l){this.l=l.Ub||null,this.j=l.eb||!1}_($c,Gi),$c.prototype.g=function(){return new Bc(this.l,this.j)},$c.prototype.i=function(l){return function(){return l}}({});function Bc(l,f){lt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Bc,lt),t=Bc.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Mo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||c).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Mo(this)),this.g&&(this.readyState=3,Mo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nx(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nx(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Oo(this):Mo(this),this.readyState==3&&Nx(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Oo(this))},t.Qa=function(l){this.g&&(this.response=l,Oo(this))},t.ga=function(){this.g&&Oo(this)};function Oo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Mo(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Mo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Bc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function jx(l){let f="";return O(l,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function Rh(l,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=jx(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Se(l,f,g))}function et(l){lt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(et,lt);var j1=/^https?$/i,E1=["POST","PUT"];t=et.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zi.g(),this.v=this.o?bo(this.o):bo(Zi),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(U){Ex(this,U);return}if(l=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var M in S)g.set(M,S[M]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const U of S.keys())g.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(E1,f,void 0))||S||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Y]of g)this.g.setRequestHeader(U,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ix(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){Ex(this,U)}};function Ex(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,kx(l),zc(l)}function kx(l){l.A||(l.A=!0,yt(l,"complete"),yt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,yt(this,"complete"),yt(this,"abort"),zc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zc(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tx(this):this.bb())},t.bb=function(){Tx(this)};function Tx(l){if(l.h&&typeof o<"u"&&(!l.v[1]||As(l)!=4||l.Z()!=2)){if(l.u&&As(l)==4)wo(l.Ea,0,l);else if(yt(l,"readystatechange"),As(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=Y===0){var M=String(l.D).match(Ae)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),S=!j1.test(M?M.toLowerCase():"")}g=S}if(g)yt(l,"complete"),yt(l,"success");else{l.m=6;try{var U=2<As(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",kx(l)}}finally{zc(l)}}}}function zc(l,f){if(l.g){Ix(l);const g=l.g,S=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||yt(l,"ready");try{g.onreadystatechange=S}catch{}}}function Ix(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function As(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<As(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Pc(f)}};function Sx(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function k1(l){const f={};l=(l.g&&2<=As(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(w(l[S]))continue;var g=P(l[S]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=f[M]||[];f[M]=U,U.push(g)}N(f,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vo(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Cx(l){this.Aa=0,this.i=[],this.j=new Is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vo("baseRetryDelayMs",5e3,l),this.cb=Vo("retryDelaySeedMs",1e4,l),this.Wa=Vo("forwardChannelMaxRetries",2,l),this.wa=Vo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Uc(l&&l.concurrentRequestLimit),this.Da=new b1,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Cx.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,S){pt(0),this.W=l,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=Fx(this,null,this.W),Hc(this)};function Ph(l){if(Ax(l),l.G==3){var f=l.U++,g=he(l.I);if(Se(g,"SID",l.K),Se(g,"RID",f),Se(g,"TYPE","terminate"),Fo(l,g),f=new cs(l,l.j,f),f.L=2,f.v=sa(he(g)),g=!1,c.navigator&&c.navigator.sendBeacon)try{g=c.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&c.Image&&(new Image().src=f.v,g=!0),g||(f.g=Ux(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ea(f)}Vx(l)}function qc(l){l.g&&(Lh(l),l.g.cancel(),l.g=null)}function Ax(l){qc(l),l.u&&(c.clearTimeout(l.u),l.u=null),Wc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Hc(l){if(!Ro(l.h)&&!l.s){l.s=!0;var f=l.Ga;B||se(),F||(B(),F=!0),X.add(f,l),l.B=0}}function T1(l,f){return Po(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=or(p(l.Ga,l,f),Mx(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new cs(this,this.j,l);let U=this.o;if(this.S&&(U?(U=x(U),k(U,this.S)):U=this.S),this.m!==null||this.O||(M.H=U,U=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Px(this,M,f),g=he(this.I),Se(g,"RID",l),Se(g,"CVER",22),this.D&&Se(g,"X-HTTP-Session-Id",this.D),Fo(this,g),U&&(this.O?f="headers="+encodeURIComponent(String(jx(U)))+"&"+f:this.m&&Rh(g,this.m,U)),na(this.h,M),this.Ua&&Se(g,"TYPE","init"),this.P?(Se(g,"$req",f),Se(g,"SID","null"),M.T=!0,Io(M,g,null)):Io(M,g,f),this.G=2}}else this.G==3&&(l?Rx(this,l):this.i.length==0||Ro(this.h)||Rx(this))};function Rx(l,f){var g;f?g=f.l:g=l.U++;const S=he(l.I);Se(S,"SID",l.K),Se(S,"RID",g),Se(S,"AID",l.T),Fo(l,S),l.m&&l.o&&Rh(S,l.m,l.o),g=new cs(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Px(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),na(l.h,g),Io(g,S,f)}function Fo(l,f){l.H&&O(l.H,function(g,S){Se(f,S,g)}),l.l&&je({},function(g,S){Se(f,S,g)})}function Px(l,f,g){g=Math.min(l.i.length,g);var S=l.l?p(l.l.Na,l.l,l):null;e:{var M=l.i;let U=-1;for(;;){const Y=["count="+g];U==-1?0<g?(U=M[0].g,Y.push("ofs="+U)):U=0:Y.push("ofs="+U);let Pe=!0;for(let kt=0;kt<g;kt++){let Ee=M[kt].g;const Dt=M[kt].map;if(Ee-=U,0>Ee)U=Math.max(0,M[kt].g-100),Pe=!1;else try{N1(Dt,Y,"req"+Ee+"_")}catch{S&&S(Dt)}}if(Pe){S=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,S}function Dx(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;B||se(),F||(B(),F=!0),X.add(f,l),l.v=0}}function Dh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=or(p(l.Fa,l),Mx(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Lx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=or(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),qc(this),Lx(this))};function Lh(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Lx(l){l.g=new cs(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=he(l.qa);Se(f,"RID","rpc"),Se(f,"SID",l.K),Se(f,"AID",l.T),Se(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Se(f,"TO",l.ja),Se(f,"TYPE","xmlhttp"),Fo(l,f),l.m&&l.o&&Rh(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=sa(he(f)),g.m=null,g.P=!0,ct(g,l)}t.Za=function(){this.C!=null&&(this.C=null,qc(this),Dh(this),pt(19))};function Wc(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Ox(l,f){var g=null;if(l.g==f){Wc(l),Lh(l),l.g=null;var S=2}else if(ta(l.h,f))g=f.D,A(l.h,f),S=1;else return;if(l.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;S=zn(),yt(S,new Yi(S,g)),Hc(l)}else Dx(l);else if(M=f.s,M==3||M==0&&0<f.X||!(S==1&&T1(l,f)||S==2&&Dh(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),M){case 1:ri(l,5);break;case 4:ri(l,10);break;case 3:ri(l,6);break;default:ri(l,2)}}}function Mx(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function ri(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),S=l.Xa;const M=!S;S=new vt(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Re(S,"https"),sa(S),M?w1(S.toString(),g):_1(S.toString(),g)}else pt(2);l.G=0,l.l&&l.l.sa(f),Vx(l),Ax(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Vx(l){if(l.G=0,l.ka=[],l.l){const f=W(l.h);(f.length!=0||l.i.length!=0)&&(T(l.ka,f),T(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function Fx(l,f,g){var S=g instanceof vt?he(g):new vt(g);if(S.g!="")f&&(S.g=f+"."+S.g),Ke(S,S.s);else{var M=c.location;S=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var U=new vt(null);S&&Re(U,S),f&&(U.g=f),M&&Ke(U,M),g&&(U.l=g),S=U}return g=l.D,f=l.ya,g&&f&&Se(S,g,f),Se(S,"VER",l.la),Fo(l,S),S}function Ux(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new et(new $c({eb:g})):new et(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $x(){}t=$x.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kc(){}Kc.prototype.g=function(l,f){return new dn(l,f)};function dn(l,f){lt.call(this),this.g=new Cx(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!w(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new oa(this)}_(dn,lt),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Ph(this.g)},dn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Ki(l),l=g);f.i.push(new Ch(f.Ya++,l)),f.G==3&&Hc(f)},dn.prototype.N=function(){this.g.l=null,delete this.j,Ph(this.g),delete this.g,dn.aa.N.call(this)};function Bx(l){ar.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}_(Bx,ar);function zx(){Qi.call(this),this.status=1}_(zx,Qi);function oa(l){this.g=l}_(oa,$x),oa.prototype.ua=function(){yt(this.g,"a")},oa.prototype.ta=function(l){yt(this.g,new Bx(l))},oa.prototype.sa=function(l){yt(this.g,new zx)},oa.prototype.ra=function(){yt(this.g,"b")},Kc.prototype.createWebChannel=Kc.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,yN=function(){return new Kc},xN=function(){return zn()},gN=ls,Bm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,Vu=lr,ko.COMPLETE="complete",pN=ko,os.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",lt.prototype.listen=lt.prototype.K,rl=os,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,mN=et}).apply(typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{});const Fy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new lg("@firebase/firestore");function Go(){return Ci.logLevel}function ne(t,...e){if(Ci.logLevel<=xe.DEBUG){const n=e.map(wg);Ci.debug(`Firestore (${oo}): ${t}`,...n)}}function Js(t,...e){if(Ci.logLevel<=xe.ERROR){const n=e.map(wg);Ci.error(`Firestore (${oo}): ${t}`,...n)}}function Ai(t,...e){if(Ci.logLevel<=xe.WARN){const n=e.map(wg);Ci.warn(`Firestore (${oo}): ${t}`,...n)}}function wg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: `+t;throw Js(e),new Error(e)}function Ie(t,e){t||oe()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends js{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class mA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pA{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let s=this.i;const i=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let a=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Bs,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Bs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ie(typeof s.accessToken=="string"),new vN(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Ft(e)}}class gA{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xA{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new gA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const s=a=>{a.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>s(a))};const i=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new yA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const i=wA(40);for(let a=0;a<i.length;++a)s.length<20&&i[a]<n&&(s+=e.charAt(i[a]%e.length))}return s}}function ke(t,e){return t<e?-1:t>e?1:0}function Ha(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new at(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new at(0,0))}static max(){return new ce(new at(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,s){n===void 0?n=0:n>e.length&&oe(),s===void 0?s=e.length-n:s>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Gl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gl?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $e extends Gl{construct(e,n,s){return new $e(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Z(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const _A=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Gl{construct(e,n,s){return new Nt(e,n,s)}static isValidIdentifier(e){return _A.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const n=[];let s="",i=0;const a=()=>{if(s.length===0)throw new Z(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Z(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(s+=c,i++):(a(),i++)}if(a(),o)throw new Z(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re($e.fromString(e))}static fromName(e){return new re($e.fromString(e).popFirst(5))}static empty(){return new re($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new $e(e.slice()))}}function bA(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(s===1e9?new at(n+1,0):new at(n,s));return new Fr(i,re.empty(),e)}function NA(t){return new Fr(t.readTime,t.key,-1)}class Fr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Fr(ce.min(),re.empty(),-1)}static max(){return new Fr(ce.max(),re.empty(),-1)}}function jA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==EA)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((s,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,s)=>{n(e)})}static reject(e){return new H((n,s)=>{s(e)})}static waitFor(e){return new H((n,s)=>{let i=0,a=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++a,o&&a===i&&n()},u=>s(u))}),o=!0,a===i&&n()})}static or(e){let n=H.resolve(!1);for(const s of e)n=n.next(i=>i?H.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,a)=>{s.push(n.call(this,i,a))}),this.waitFor(s)}static mapArray(e,n){return new H((s,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++c,c===a&&s(o)},h=>i(h))}})}static doWhile(e,n){return new H((s,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):s()};a()})}}function TA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}bg.oe=-1;function ih(t){return t==null}function bd(t){return t===0&&1/t==-1/0}function IA(t){return typeof t=="number"&&Number.isInteger(t)&&!bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _N(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}}class mu{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?s(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,s,i,a){this.key=e,this.value=n,this.color=s??It.RED,this.left=i??It.EMPTY,this.right=a??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,a){return new It(e??this.key,n??this.value,s??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const a=s(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,s),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return It.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,s,i,a){return this}insert(e,n,s){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $y(this.data.getIterator())}getIteratorFrom(e){return new $y(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=s.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class $y{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Ct(Nt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new bN("Invalid base64 string: "+a):a}}(e);return new Et(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const SA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=SA.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ri(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jg(t){const e=t.mapValue.fields.__previous_value__;return Ng(e)?jg(e):e}function Ql(t){const e=Ur(t.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n,s,i,a,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Wa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu={mapValue:{}};function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ng(t)?4:RA(t)?9007199254740991:AA(t)?10:11:oe()}function _s(t,e){if(t===e)return!0;const n=Pi(t);if(n!==Pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ql(t).isEqual(Ql(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Ur(i.timestampValue),c=Ur(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ri(i.bytesValue).isEqual(Ri(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return st(i.geoPointValue.latitude)===st(a.geoPointValue.latitude)&&st(i.geoPointValue.longitude)===st(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return st(i.integerValue)===st(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=st(i.doubleValue),c=st(a.doubleValue);return o===c?bd(o)===bd(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Ha(t.arrayValue.values||[],e.arrayValue.values||[],_s);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Uy(o)!==Uy(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!_s(o[u],c[u])))return!1;return!0}(t,e);default:return oe()}}function Xl(t,e){return(t.values||[]).find(n=>_s(n,e))!==void 0}function Ka(t,e){if(t===e)return 0;const n=Pi(t),s=Pi(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=st(a.integerValue||a.doubleValue),u=st(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return By(t.timestampValue,e.timestampValue);case 4:return By(Ql(t),Ql(e));case 5:return ke(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Ri(a),u=Ri(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=ke(c[d],u[d]);if(h!==0)return h}return ke(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=ke(st(a.latitude),st(o.latitude));return c!==0?c:ke(st(a.longitude),st(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zy(t.arrayValue,e.arrayValue);case 10:return function(a,o){var c,u,d,h;const m=a.fields||{},p=o.fields||{},v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,_=(u=p.value)===null||u===void 0?void 0:u.arrayValue,R=ke(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:zy(v,_)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===pu.mapValue&&o===pu.mapValue)return 0;if(a===pu.mapValue)return 1;if(o===pu.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=ke(u[m],h[m]);if(p!==0)return p;const v=Ka(c[u[m]],d[h[m]]);if(v!==0)return v}return ke(u.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function By(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=Ur(t),s=Ur(e),i=ke(n.seconds,s.seconds);return i!==0?i:ke(n.nanos,s.nanos)}function zy(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const a=Ka(n[i],s[i]);if(a)return a}return ke(n.length,s.length)}function Ga(t){return zm(t)}function zm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ur(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const a of n.values||[])i?i=!1:s+=",",s+=zm(a);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of s)a?a=!1:i+=",",i+=`${o}:${zm(n.fields[o])}`;return i+"}"}(t.mapValue):oe()}function qy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qm(t){return!!t&&"integerValue"in t}function Eg(t){return!!t&&"arrayValue"in t}function Hy(t){return!!t&&"nullValue"in t}function Wy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fu(t){return!!t&&"mapValue"in t}function AA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fi(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=vl(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Fu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vl(n)}setAll(e){let n=Nt.emptyPath(),s={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,s,i),s={},i=[],n=c.popLast()}o?s[c.lastSegment()]=vl(o):i.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,s,i)}delete(e){const n=this.field(e.popLast());Fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _s(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Fu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){Fi(n,(i,a)=>e[i]=a);for(const i of s)delete e[i]}clone(){return new en(vl(this.value))}}function NN(t){const e=[];return Fi(t.fields,(n,s)=>{const i=new Nt([n]);if(Fu(s)){const a=NN(s.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,s,i,a,o,c){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new $t(e,0,ce.min(),ce.min(),ce.min(),en.empty(),0)}static newFoundDocument(e,n,s,i){return new $t(e,1,n,ce.min(),s,i,0)}static newNoDocument(e,n){return new $t(e,2,n,ce.min(),ce.min(),en.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,ce.min(),ce.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.position=e,this.inclusive=n}}function Ky(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?s=re.comparator(re.fromName(o.referenceValue),n.key):s=Ka(o,n.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function Gy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_s(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function PA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{}class ft extends jN{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new LA(e,n,s):n==="array-contains"?new VA(e,s):n==="in"?new FA(e,s):n==="not-in"?new UA(e,s):n==="array-contains-any"?new $A(e,s):new ft(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new OA(e,s):new MA(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ka(n,this.value)):n!==null&&Pi(this.value)===Pi(n)&&this.matchesComparison(Ka(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class is extends jN{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new is(e,n)}matches(e){return EN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function EN(t){return t.op==="and"}function kN(t){return DA(t)&&EN(t)}function DA(t){for(const e of t.filters)if(e instanceof is)return!1;return!0}function Hm(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+Ga(t.value);if(kN(t))return t.filters.map(e=>Hm(e)).join(",");{const e=t.filters.map(n=>Hm(n)).join(",");return`${t.op}(${e})`}}function TN(t,e){return t instanceof ft?function(s,i){return i instanceof ft&&s.op===i.op&&s.field.isEqual(i.field)&&_s(s.value,i.value)}(t,e):t instanceof is?function(s,i){return i instanceof is&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((a,o,c)=>a&&TN(o,i.filters[c]),!0):!1}(t,e):void oe()}function IN(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Ga(n.value)}`}(t):t instanceof is?function(n){return n.op.toString()+" {"+n.getFilters().map(IN).join(" ,")+"}"}(t):"Filter"}class LA extends ft{constructor(e,n,s){super(e,n,s),this.key=re.fromName(s.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class OA extends ft{constructor(e,n){super(e,"in",n),this.keys=SN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MA extends ft{constructor(e,n){super(e,"not-in",n),this.keys=SN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function SN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>re.fromName(s.referenceValue))}class VA extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Eg(n)&&Xl(n.arrayValue,this.value)}}class FA extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xl(this.value.arrayValue,n)}}class UA extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Xl(this.value.arrayValue,n)}}class $A extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Xl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n=null,s=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function Qy(t,e=null,n=[],s=[],i=null,a=null,o=null){return new BA(t,e,n,s,i,a,o)}function kg(t){const e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Hm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ga(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ga(s)).join(",")),e.ue=n}return e.ue}function Tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gy(t.startAt,e.startAt)&&Gy(t.endAt,e.endAt)}function Wm(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n=null,s=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zA(t,e,n,s,i,a,o,c){return new lo(t,e,n,s,i,a,o,c)}function ah(t){return new lo(t)}function Xy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CN(t){return t.collectionGroup!==null}function wl(t){const e=de(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ct(Nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Yl(a,s))}),n.has(Nt.keyField().canonicalString())||e.ce.push(new Yl(Nt.keyField(),s))}return e.ce}function ys(t){const e=de(t);return e.le||(e.le=qA(e,wl(t))),e.le}function qA(t,e){if(t.limitType==="F")return Qy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Yl(i.field,a)});const n=t.endAt?new Nd(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Nd(t.startAt.position,t.startAt.inclusive):null;return Qy(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Km(t,e){const n=t.filters.concat([e]);return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jd(t,e,n){return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oh(t,e){return Tg(ys(t),ys(e))&&t.limitType===e.limitType}function AN(t){return`${kg(ys(t))}|lt:${t.limitType}`}function da(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>IN(i)).join(", ")}]`),ih(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Ga(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Ga(i)).join(",")),`Target(${s})`}(ys(t))}; limitType=${t.limitType})`}function lh(t,e){return e.isFoundDocument()&&function(s,i){const a=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):re.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(t,e)&&function(s,i){for(const a of wl(s))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const a of s.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,c,u){const d=Ky(o,c,u);return o.inclusive?d<=0:d<0}(s.startAt,wl(s),i)||s.endAt&&!function(o,c,u){const d=Ky(o,c,u);return o.inclusive?d>=0:d>0}(s.endAt,wl(s),i))}(t,e)}function HA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RN(t){return(e,n)=>{let s=!1;for(const i of wl(t)){const a=WA(i,e,n);if(a!==0)return a;s=s||i.field.isKeyField()}return 0}}function WA(t,e,n){const s=t.field.isKeyField()?re.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?Ka(u,d):oe()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,a]of s)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(n,s)=>{for(const[i,a]of s)e(i,a)})}isEmpty(){return _N(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new Ye(re.comparator);function Zs(){return KA}const PN=new Ye(re.comparator);function il(...t){let e=PN;for(const n of t)e=e.insert(n.key,n);return e}function DN(t){let e=PN;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function mi(){return _l()}function LN(){return _l()}function _l(){return new co(t=>t.toString(),(t,e)=>t.isEqual(e))}const GA=new Ye(re.comparator),QA=new Ct(re.comparator);function ge(...t){let e=QA;for(const n of t)e=e.add(n);return e}const XA=new Ct(ke);function YA(){return XA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function ON(t){return{integerValue:""+t}}function MN(t,e){return IA(e)?ON(e):Ig(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this._=void 0}}function JA(t,e,n){return t instanceof Jl?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Ng(a)&&(a=jg(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof Zl?FN(t,e):t instanceof ec?UN(t,e):function(i,a){const o=VN(i,a),c=Yy(o)+Yy(i.Pe);return qm(o)&&qm(i.Pe)?ON(c):Ig(i.serializer,c)}(t,e)}function ZA(t,e,n){return t instanceof Zl?FN(t,e):t instanceof ec?UN(t,e):n}function VN(t,e){return t instanceof tc?function(s){return qm(s)||function(a){return!!a&&"doubleValue"in a}(s)}(e)?e:{integerValue:0}:null}class Jl extends ch{}class Zl extends ch{constructor(e){super(),this.elements=e}}function FN(t,e){const n=$N(e);for(const s of t.elements)n.some(i=>_s(i,s))||n.push(s);return{arrayValue:{values:n}}}class ec extends ch{constructor(e){super(),this.elements=e}}function UN(t,e){let n=$N(e);for(const s of t.elements)n=n.filter(i=>!_s(i,s));return{arrayValue:{values:n}}}class tc extends ch{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Yy(t){return st(t.integerValue||t.doubleValue)}function $N(t){return Eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n){this.field=e,this.transform=n}}function eR(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof Zl&&i instanceof Zl||s instanceof ec&&i instanceof ec?Ha(s.elements,i.elements,_s):s instanceof tc&&i instanceof tc?_s(s.Pe,i.Pe):s instanceof Jl&&i instanceof Jl}(t.transform,e.transform)}class tR{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uh{}function zN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sg(t.key,Dn.none()):new gc(t.key,t.data,Dn.none());{const n=t.data,s=en.empty();let i=new Ct(Nt.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?s.delete(a):s.set(a,o),i=i.add(a)}return new Xr(t.key,s,new xn(i.toArray()),Dn.none())}}function nR(t,e,n){t instanceof gc?function(i,a,o){const c=i.value.clone(),u=Zy(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Xr?function(i,a,o){if(!Uu(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Zy(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(qN(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bl(t,e,n,s){return t instanceof gc?function(a,o,c,u){if(!Uu(a.precondition,o))return c;const d=a.value.clone(),h=ev(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Xr?function(a,o,c,u){if(!Uu(a.precondition,o))return c;const d=ev(a.fieldTransforms,u,o),h=o.data;return h.setAll(qN(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(a,o,c){return Uu(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function sR(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),a=VN(s.transform,i||null);a!=null&&(n===null&&(n=en.empty()),n.set(s.field,a))}return n||null}function Jy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Ha(s,i,(a,o)=>eR(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gc extends uh{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xr extends uh{constructor(e,n,s,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function qN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Zy(t,e,n){const s=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);s.set(a.field,ZA(o,c,n[i]))}return s}function ev(t,e,n){const s=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);s.set(i.field,JA(a,o,e))}return s}class Sg extends uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rR extends uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&nR(a,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=bl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=bl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=LN();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=zN(o,c);u!==null&&s.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ce.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,(n,s)=>Jy(n,s))&&Ha(this.baseMutations,e.baseMutations,(n,s)=>Jy(n,s))}}class Cg{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Ie(e.mutations.length===s.length);let i=function(){return GA}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,s[o].version);return new Cg(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,we;function lR(t){switch(t){default:return oe();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function HN(t){if(t===void 0)return Js("GRPC error has no .code"),q.UNKNOWN;switch(t){case ut.OK:return q.OK;case ut.CANCELLED:return q.CANCELLED;case ut.UNKNOWN:return q.UNKNOWN;case ut.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case ut.INTERNAL:return q.INTERNAL;case ut.UNAVAILABLE:return q.UNAVAILABLE;case ut.UNAUTHENTICATED:return q.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case ut.NOT_FOUND:return q.NOT_FOUND;case ut.ALREADY_EXISTS:return q.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return q.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case ut.ABORTED:return q.ABORTED;case ut.OUT_OF_RANGE:return q.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return q.UNIMPLEMENTED;case ut.DATA_LOSS:return q.DATA_LOSS;default:return oe()}}(we=ut||(ut={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new yi([4294967295,4294967295],0);function tv(t){const e=cR().encode(t),n=new fN;return n.update(e),new Uint8Array(n.digest())}function nv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new yi([n,s],0),new yi([i,a],0)]}class Ag{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new al(`Invalid padding: ${n}`);if(s<0)throw new al(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new al(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new al(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=yi.fromNumber(this.Ie)}Ee(e,n,s){let i=e.add(n.multiply(yi.fromNumber(s)));return i.compare(uR)===1&&(i=new yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=tv(e),[s,i]=nv(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(s,i,a);if(!this.de(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Ag(a,i,n);return s.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=tv(e),[s,i]=nv(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(s,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n,s,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new dh(ce.min(),i,new Ye(ke),Zs(),ge())}}class xc{constructor(e,n,s,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new xc(s,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n,s,i){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=i}}class WN{constructor(e,n){this.targetId=e,this.me=n}}class KN{constructor(e,n,s=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class sv{constructor(){this.fe=0,this.ge=iv(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),s=ge();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:oe()}}),new xc(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=iv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zs(),this.qe=rv(),this.Qe=new Ye(ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const s=this.Ge(n);switch(e.state){case 0:this.ze(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),s.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,s=e.me.count,i=this.Je(n);if(i){const a=i.target;if(Wm(a))if(s===0){const o=new re(a.path);this.Ue(n,o,$t.newNoDocument(o,ce.min()))}else Ie(s===1);else{const o=this.Ye(n);if(o!==s){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=Ri(s).toUint8Array()}catch(u){if(u instanceof bN)return Ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ag(o,i,a)}catch(u){return Ai(u instanceof al?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,s){return n.me.count===s-this.nt(e,n.targetId)?0:2}nt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let i=0;return s.forEach(a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const c=this.Je(o);if(c){if(a.current&&Wm(c.target)){const u=new re(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,$t.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let s=ge();this.qe.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new dh(e,n,this.Qe,this.ke,s);return this.ke=Zs(),this.qe=rv(),this.Qe=new Ye(ke),i}$e(e,n){if(!this.ze(e))return;const s=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,s){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new sv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ct(ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function rv(){return new Ye(re.comparator)}function iv(){return new Ye(re.comparator)}const hR={asc:"ASCENDING",desc:"DESCENDING"},fR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mR={and:"AND",or:"OR"};class pR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gm(t,e){return t.useProto3Json||ih(e)?e:{value:e}}function Ed(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gR(t,e){return Ed(t,e.toTimestamp())}function vs(t){return Ie(!!t),ce.fromTimestamp(function(n){const s=Ur(n);return new at(s.seconds,s.nanos)}(t))}function Rg(t,e){return Qm(t,e).canonicalString()}function Qm(t,e){const n=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function QN(t){const e=$e.fromString(t);return Ie(ej(e)),e}function Xm(t,e){return Rg(t.databaseId,e.path)}function vf(t,e){const n=QN(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(YN(n))}function XN(t,e){return Rg(t.databaseId,e)}function xR(t){const e=QN(t);return e.length===4?$e.emptyPath():YN(e)}function Ym(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YN(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function av(t,e,n){return{name:Xm(t,e),fields:n.value.mapValue.fields}}function yR(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Ie(h===void 0||typeof h=="string"),Et.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const h=d.code===void 0?q.UNKNOWN:HN(d.code);return new Z(h,d.message||"")}(o);n=new KN(s,i,a,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=vf(t,s.document.name),a=vs(s.document.updateTime),o=s.document.createTime?vs(s.document.createTime):ce.min(),c=new en({mapValue:{fields:s.document.fields}}),u=$t.newFoundDocument(i,a,o,c),d=s.targetIds||[],h=s.removedTargetIds||[];n=new $u(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=vf(t,s.document),a=s.readTime?vs(s.readTime):ce.min(),o=$t.newNoDocument(i,a),c=s.removedTargetIds||[];n=new $u([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=vf(t,s.document),a=s.removedTargetIds||[];n=new $u([],a,i,null)}else{if(!("filter"in e))return oe();{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:a}=s,o=new oR(i,a),c=s.targetId;n=new WN(c,o)}}return n}function vR(t,e){let n;if(e instanceof gc)n={update:av(t,e.key,e.value)};else if(e instanceof Sg)n={delete:Xm(t,e.key)};else if(e instanceof Xr)n={update:av(t,e.key,e.data),updateMask:IR(e.fieldMask)};else{if(!(e instanceof rR))return oe();n={verify:Xm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(a,o){const c=o.transform;if(c instanceof Jl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Zl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ec)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof tc)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw oe()}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:gR(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:oe()}(t,e.precondition)),n}function wR(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(i,a){let o=i.updateTime?vs(i.updateTime):vs(a);return o.isEqual(ce.min())&&(o=vs(a)),new tR(o,i.transformResults||[])}(n,e))):[]}function _R(t,e){return{documents:[XN(t,e.path)]}}function bR(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=XN(t,i);const a=function(d){if(d.length!==0)return ZN(is.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:ha(p.field),direction:ER(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Gm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function NR(t){let e=xR(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Ie(s===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(m){const p=JN(m);return p instanceof is&&kN(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(_){return new Yl(fa(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let c=null;n.limit&&(c=function(m){let p;return p=typeof m=="object"?m.value:m,ih(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,v=m.values||[];return new Nd(v,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,v=m.values||[];return new Nd(v,p)}(n.endAt)),zA(e,i,o,a,c,"F",u,d)}function jR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=fa(n.unaryFilter.field);return ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=fa(n.unaryFilter.field);return ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fa(n.unaryFilter.field);return ft.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fa(n.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return ft.create(fa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return is.create(n.compositeFilter.filters.map(s=>JN(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function ER(t){return hR[t]}function kR(t){return fR[t]}function TR(t){return mR[t]}function ha(t){return{fieldPath:t.canonicalString()}}function fa(t){return Nt.fromServerFormat(t.fieldPath)}function ZN(t){return t instanceof ft?function(n){if(n.op==="=="){if(Wy(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NAN"}};if(Hy(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wy(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NAN"}};if(Hy(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(n.field),op:kR(n.op),value:n.value}}}(t):t instanceof is?function(n){const s=n.getFilters().map(i=>ZN(i));return s.length===1?s[0]:{compositeFilter:{op:TR(n.op),filters:s}}}(t):oe()}function IR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ej(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,s,i,a=ce.min(),o=ce.min(),c=Et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.ct=e}}function CR(t){const e=NR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.un=new RR}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Fr.min())}updateCollectionGroup(e,n,s){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class RR{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new Ct($e.comparator),a=!i.has(s);return this.index[n]=i.add(s),a}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Ct($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Qa(0)}static kn(){return new Qa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.changes=new co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&bl(s.mutation,i,xn.empty(),at.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ge()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ge()){const i=mi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(a=>{let o=il();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=mi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ge()))}populateOverlays(e,n,s){const i=[];return s.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,s,i){let a=Zs();const o=_l(),c=function(){return _l()}();return n.forEach((u,d)=>{const h=s.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Xr)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),bl(h.mutation,d,h.mutation.getFieldMask(),at.now())):o.set(d.key,xn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var m;return c.set(d,new DR(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const s=_l();let i=new Ye((o,c)=>o-c),a=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=s.get(u)||xn.empty();h=c.applyToLocalView(d,h),s.set(u,h);const m=(i.get(c.batchId)||ge()).add(u);i=i.insert(c.batchId,m)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,m=LN();h.forEach(p=>{if(!a.has(p)){const v=zN(n.get(p),s.get(p));v!==null&&m.set(p,v),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return H.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):CN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-a.size):H.resolve(mi());let c=-1,u=a;return o.next(d=>H.forEach(d,(h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),a.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,ge())).next(h=>({batchId:c,changes:DN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(s=>{let i=il();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const a=n.collectionGroup;let o=il();return this.indexManager.getCollectionParents(e,a).next(c=>H.forEach(c,u=>{const d=function(m,p){return new lo(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,a,i))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,$t.newInvalidDocument(h)))});let c=il();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&bl(h.mutation,d,xn.empty(),at.now()),lh(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:vs(i.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:CR(i.bundledQuery),readTime:vs(i.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.overlays=new Ye(re.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const s=mi();return H.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&s.set(i,a)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,a)=>{this.ht(e,n,a)}),H.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.Ir.get(s);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(s)),H.resolve()}getOverlaysForCollection(e,n,s){const i=mi(),a=n.length+1,o=new re(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>s&&i.set(u.getKey(),u)}return H.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let a=new Ye((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=a.get(d.largestBatchId);h===null&&(h=mi(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=mi(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=i)););return H.resolve(c)}ht(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(s.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new aR(n,s));let a=this.Ir.get(n);a===void 0&&(a=ge(),this.Ir.set(n,a)),this.Ir.set(n,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.Tr=new Ct(_t.Er),this.dr=new Ct(_t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const s=new _t(e,n);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Vr(new _t(e,n))}mr(e,n){e.forEach(s=>this.removeReference(s,n))}gr(e){const n=new re(new $e([])),s=new _t(n,e),i=new _t(n,e+1),a=[];return this.dr.forEachInRange([s,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new re(new $e([])),s=new _t(n,e),i=new _t(n,e+1);let a=ge();return this.dr.forEachInRange([s,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new _t(e,0),s=this.Tr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class _t{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return re.comparator(e.key,n.key)||ke(e.wr,n.wr)}static Ar(e,n){return ke(e.wr,n.wr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ct(_t.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new iR(a,n,s,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new _t(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.vr(s),a=i<0?0:i;return H.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new _t(n,0),i=new _t(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([s,i],o=>{const c=this.Dr(o.wr);a.push(c)}),H.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ct(ke);return n.forEach(i=>{const a=new _t(i,0),o=new _t(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],c=>{s=s.add(c.wr)})}),H.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let a=s;re.isDocumentKey(a)||(a=a.child(""));const o=new _t(new re(a),0);let c=new Ct(ke);return this.br.forEachWhile(u=>{const d=u.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),H.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(s=>{const i=this.Dr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return H.forEach(n.mutations,i=>{const a=new _t(i.key,n.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,n){const s=new _t(n,0),i=this.br.firstAfterOrEqual(s);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.Mr=e,this.docs=function(){return new Ye(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let s=Zs();return n.forEach(i=>{const a=this.docs.get(i);s=s.insert(i,a?a.document.mutableCopy():$t.newInvalidDocument(i))}),H.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let a=Zs();const o=n.path,c=new re(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||jA(NA(h),s)<=0||(i.has(h.key)||lh(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return H.resolve(a)}getAllFromCollectionGroup(e,n,s,i){oe()}Or(e,n){return H.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new $R(this)}getSize(e){return H.resolve(this.size)}}class $R extends PR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(s)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.persistence=e,this.Nr=new co(n=>kg(n),Tg),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pg,this.targetCount=0,this.kr=Qa.Bn()}forEachTarget(e,n){return this.Nr.forEach((s,i)=>n(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Qa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,s){let i=0;const a=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&s.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),H.waitFor(a).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const s=this.Nr.get(n)||null;return H.resolve(s)}addMatchingKeys(e,n,s){return this.Br.Rr(n,s),H.resolve()}removeMatchingKeys(e,n,s){this.Br.mr(n,s);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Br.yr(n);return H.resolve(s)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new bg(0),this.Kr=!1,this.Kr=!0,this.$r=new VR,this.referenceDelegate=e(this),this.Ur=new BR(this),this.indexManager=new AR,this.remoteDocumentCache=function(i){return new UR(i)}(s=>this.referenceDelegate.Wr(s)),this.serializer=new SR(n),this.Gr=new OR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.qr[e.toKey()];return s||(s=new FR(n,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,s){ne("MemoryPersistence","Starting transaction:",e);const i=new qR(this.Qr.next());return this.referenceDelegate.zr(),s(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return H.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,n)))}}class qR extends kA{constructor(e){super(),this.currentSequenceNumber=e}}class Dg{constructor(e){this.persistence=e,this.Jr=new Pg,this.Yr=null}static Zr(e){return new Dg(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,s){return this.Jr.addReference(s,n),this.Xr.delete(s.toString()),H.resolve()}removeReference(e,n,s){return this.Jr.removeReference(s,n),this.Xr.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>s.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,s=>{const i=re.fromPath(s);return this.ei(e,i).next(a=>{a||n.removeEntry(i,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(s=>{s?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.$i=s,this.Ui=i}static Wi(e,n){let s=ge(),i=ge();for(const a of n.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Lg(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vT()?8:TA(qt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,s,i){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,i,s).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new HR;return this.Xi(e,n,o).next(c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>a.result)}es(e,n,s,i){return s.documentReadCount<this.ji?(Go()<=xe.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",da(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Go()<=xe.DEBUG&&ne("QueryEngine","Query:",da(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.Hi*i?(Go()<=xe.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",da(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(n))):H.resolve())}Yi(e,n){if(Xy(n))return H.resolve(null);let s=ys(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jd(n,null,"F"),s=ys(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(a=>{const o=ge(...a);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,s).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,jd(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,s,i){return Xy(n)||i.isEqual(ce.min())?H.resolve(null):this.Ji.getDocuments(e,s).next(a=>{const o=this.ts(n,a);return this.ns(n,o,s,i)?H.resolve(null):(Go()<=xe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),da(n)),this.rs(e,o,n,bA(i,-1)).next(c=>c))})}ts(e,n){let s=new Ct(RN(e));return n.forEach((i,a)=>{lh(e,a)&&(s=s.add(a))}),s}ns(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,s){return Go()<=xe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",da(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fr.min(),s)}rs(e,n,s,i){return this.Ji.getDocumentsMatchingQuery(e,s,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,s,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ye(ke),this._s=new co(a=>kg(a),Tg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function GR(t,e,n,s){return new KR(t,e,n,s)}async function tj(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(s))).next(a=>{const o=[],c=[];let u=ge();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function QR(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,h){const m=d.batch,p=m.keys();let v=H.resolve();return p.forEach(_=>{v=v.next(()=>h.getEntry(u,_)).next(R=>{const T=d.docVersions.get(_);Ie(T!==null),R.version.compareTo(T)<0&&(m.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),h.addEntry(R)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,s,e,a).next(()=>a.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(c){let u=ge();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function nj(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function XR(t,e){const n=de(t),s=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((h,m)=>{const p=i.get(m);if(!p)return;c.push(n.Ur.removeMatchingKeys(a,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(a,h.addedDocuments,m)));let v=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(Et.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,s)),i=i.insert(m,v),function(R,T,b){return R.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,v,h)&&c.push(n.Ur.updateTargetData(a,v))});let u=Zs(),d=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),c.push(YR(a,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!s.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(a).next(m=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,s));c.push(h)}return H.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=i,a))}function YR(t,e,n){let s=ge(),i=ge();return n.forEach(a=>s=s.add(a)),e.getEntries(t,s).next(a=>{let o=Zs();return n.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):ne("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function JR(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function ZR(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Ur.getTargetData(s,e).next(a=>a?(i=a,H.resolve(i)):n.Ur.allocateTargetId(s).next(o=>(i=new jr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ur.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.os.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(s.targetId,s),n._s.set(e,s.targetId)),s})}async function Jm(t,e,n){const s=de(t),i=s.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",a,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!pc(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.os=s.os.remove(e),s._s.delete(i.target)}function ov(t,e,n){const s=de(t);let i=ce.min(),a=ge();return s.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=de(u),p=m._s.get(h);return p!==void 0?H.resolve(m.os.get(p)):m.Ur.getTargetData(d,h)}(s,o,ys(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>s.ss.getDocumentsMatchingQuery(o,e,n?i:ce.min(),n?a:ge())).next(c=>(e4(s,HA(e),c),{documents:c,Ts:a})))}function e4(t,e,n){let s=t.us.get(e)||ce.min();n.forEach((i,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),t.us.set(e,s)}class lv{constructor(){this.activeTargetIds=YA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t4{constructor(){this.so=new lv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,s){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new lv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu=null;function wf(){return gu===null?gu=function(){return 268435456+Math.round(2147483648*Math.random())}():gu++,"0x"+gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class i4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,s,i,a,o){const c=wf(),u=this.xo(n,s.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw Ai("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,s,i,a,o,c){return this.Mo(n,s,i,a,o)}Oo(n,s,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((a,o)=>n[o]=a),i&&i.headers.forEach((a,o)=>n[o]=a)}xo(n,s){const i=s4[n];return`${this.Do}/v1/${s}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,s,i){const a=wf();return new Promise((o,c)=>{const u=new mN;u.setWithCredentials(!0),u.listenOnce(pN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vu.NO_ERROR:const h=u.getResponseJson();ne(Vt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Vu.TIMEOUT:ne(Vt,`RPC '${e}' ${a} timed out`),c(new Z(q.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const m=u.getStatus();if(ne(Vt,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const _=function(T){const b=T.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(b)>=0?b:q.UNKNOWN}(v.status);c(new Z(_,v.message))}else c(new Z(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Z(q.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{ne(Vt,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);ne(Vt,`RPC '${e}' ${a} sending request:`,i),u.send(n,"POST",d,s,15)})}Bo(e,n,s){const i=wf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yN(),c=xN(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=a.join("");ne(Vt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=o.createWebChannel(h,u);let p=!1,v=!1;const _=new r4({Io:T=>{v?ne(Vt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(p||(ne(Vt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),ne(Vt,`RPC '${e}' stream ${i} sending:`,T),m.send(T))},To:()=>m.close()}),R=(T,b,w)=>{T.listen(b,y=>{try{w(y)}catch(j){setTimeout(()=>{throw j},0)}})};return R(m,rl.EventType.OPEN,()=>{v||(ne(Vt,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),R(m,rl.EventType.CLOSE,()=>{v||(v=!0,ne(Vt,`RPC '${e}' stream ${i} transport closed`),_.So())}),R(m,rl.EventType.ERROR,T=>{v||(v=!0,Ai(Vt,`RPC '${e}' stream ${i} transport errored:`,T),_.So(new Z(q.UNAVAILABLE,"The operation could not be completed")))}),R(m,rl.EventType.MESSAGE,T=>{var b;if(!v){const w=T.data[0];Ie(!!w);const y=w,j=y.error||((b=y[0])===null||b===void 0?void 0:b.error);if(j){ne(Vt,`RPC '${e}' stream ${i} received error:`,j);const C=j.status;let O=function(E){const k=ut[E];if(k!==void 0)return HN(k)}(C),N=j.message;O===void 0&&(O=q.INTERNAL,N="Unknown error status: "+C+" with message "+j.message),v=!0,_.So(new Z(O,N)),m.close()}else ne(Vt,`RPC '${e}' stream ${i} received:`,w),_.bo(w)}}),R(c,gN.STAT_EVENT,T=>{T.stat===Bm.PROXY?ne(Vt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Bm.NOPROXY&&ne(Vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function _f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){return new pR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n,s=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=s,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-s);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n,s,i,a,o,c,u){this.ui=e,this.Ho=s,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sj(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Js(n.toString()),Js("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Yo===n&&this.P_(s,i)},s=>{e(()=>{const i=new Z(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(i)})})}P_(e,n){const s=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{s(()=>this.I_(i))}),this.stream.onMessage(i=>{s(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a4 extends rj{constructor(e,n,s,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=yR(this.serializer,e),s=function(a){if(!("targetChange"in a))return ce.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?vs(o.readTime):ce.min()}(e);return this.listener.d_(n,s)}A_(e){const n={};n.database=Ym(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=Wm(u)?{documents:_R(a,u)}:{query:bR(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=GN(a,o.resumeToken);const d=Gm(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ce.min())>0){c.readTime=Ed(a,o.snapshotVersion.toTimestamp());const d=Gm(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const s=jR(this.serializer,e);s&&(n.labels=s),this.a_(n)}R_(e){const n={};n.database=Ym(this.serializer),n.removeTarget=e,this.a_(n)}}class o4 extends rj{constructor(e,n,s,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=wR(e.writeResults,e.commitTime),s=vs(e.commitTime);return this.listener.g_(s,n)}p_(){const e={};e.database=Ym(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>vR(this.serializer,s))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4 extends class{}{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Z(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Qm(n,s),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(q.UNKNOWN,a.toString())})}Lo(e,n,s,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Qm(n,s),i,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class c4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Js(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,s,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{s.enqueueAndForget(async()=>{Ui(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=de(u);d.L_.add(4),await yc(d),d.q_.set("Unknown"),d.L_.delete(4),await fh(d)}(this))})}),this.q_=new c4(s,i)}}async function fh(t){if(Ui(t))for(const e of t.B_)await e(!0)}async function yc(t){for(const e of t.B_)await e(!1)}function ij(t,e){const n=de(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Fg(n)?Vg(n):uo(n).r_()&&Mg(n,e))}function Og(t,e){const n=de(t),s=uo(n);n.N_.delete(e),s.r_()&&aj(n,e),n.N_.size===0&&(s.r_()?s.o_():Ui(n)&&n.q_.set("Unknown"))}function Mg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uo(t).A_(e)}function aj(t,e){t.Q_.xe(e),uo(t).R_(e)}function Vg(t){t.Q_=new dR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),uo(t).start(),t.q_.v_()}function Fg(t){return Ui(t)&&!uo(t).n_()&&t.N_.size>0}function Ui(t){return de(t).L_.size===0}function oj(t){t.Q_=void 0}async function d4(t){t.q_.set("Online")}async function h4(t){t.N_.forEach((e,n)=>{Mg(t,e)})}async function f4(t,e){oj(t),Fg(t)?(t.q_.M_(e),Vg(t)):t.q_.set("Unknown")}async function m4(t,e,n){if(t.q_.set("Online"),e instanceof KN&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(s){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await kd(t,s)}else if(e instanceof $u?t.Q_.Ke(e):e instanceof WN?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const s=await nj(t.localStore);n.compareTo(s)>=0&&await function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.N_.get(d);h&&a.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const h=a.N_.get(u);if(!h)return;a.N_.set(u,h.withResumeToken(Et.EMPTY_BYTE_STRING,h.snapshotVersion)),aj(a,u);const m=new jr(h.target,u,d,h.sequenceNumber);Mg(a,m)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(s){ne("RemoteStore","Failed to raise snapshot:",s),await kd(t,s)}}async function kd(t,e,n){if(!pc(e))throw e;t.L_.add(1),await yc(t),t.q_.set("Offline"),n||(n=()=>nj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await fh(t)})}function lj(t,e){return e().catch(n=>kd(t,n,e))}async function mh(t){const e=de(t),n=$r(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;p4(e);)try{const i=await JR(e.localStore,s);if(i===null){e.O_.length===0&&n.o_();break}s=i.batchId,g4(e,i)}catch(i){await kd(e,i)}cj(e)&&uj(e)}function p4(t){return Ui(t)&&t.O_.length<10}function g4(t,e){t.O_.push(e);const n=$r(t);n.r_()&&n.V_&&n.m_(e.mutations)}function cj(t){return Ui(t)&&!$r(t).n_()&&t.O_.length>0}function uj(t){$r(t).start()}async function x4(t){$r(t).p_()}async function y4(t){const e=$r(t);for(const n of t.O_)e.m_(n.mutations)}async function v4(t,e,n){const s=t.O_.shift(),i=Cg.from(s,e,n);await lj(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await mh(t)}async function w4(t,e){e&&$r(t).V_&&await async function(s,i){if(function(o){return lR(o)&&o!==q.ABORTED}(i.code)){const a=s.O_.shift();$r(s).s_(),await lj(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,i)),await mh(s)}}(t,e),cj(t)&&uj(t)}async function uv(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const s=Ui(n);n.L_.add(3),await yc(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await fh(n)}async function _4(t,e){const n=de(t);e?(n.L_.delete(2),await fh(n)):e||(n.L_.add(2),await yc(n),n.q_.set("Unknown"))}function uo(t){return t.K_||(t.K_=function(n,s,i){const a=de(n);return a.w_(),new a4(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:d4.bind(null,t),Ro:h4.bind(null,t),mo:f4.bind(null,t),d_:m4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Fg(t)?Vg(t):t.q_.set("Unknown")):(await t.K_.stop(),oj(t))})),t.K_}function $r(t){return t.U_||(t.U_=function(n,s,i){const a=de(n);return a.w_(),new o4(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:x4.bind(null,t),mo:w4.bind(null,t),f_:y4.bind(null,t),g_:v4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await mh(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,n,s,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=a,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,a){const o=Date.now()+s,c=new Ug(e,n,o,i,a);return c.start(s),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $g(t,e){if(Js("AsyncQueue",`${e}: ${t}`),pc(t))return new Z(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.comparator=e?(n,s)=>e(n,s)||re.comparator(n.key,s.key):(n,s)=>re.comparator(n.key,s.key),this.keyedMap=il(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new Ma(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=s.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ma;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.W_=new Ye(re.comparator)}track(e){const n=e.doc.key,s=this.W_.get(n);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(n,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(n):e.type===1&&s.type===2?this.W_=this.W_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Xa{constructor(e,n,s,i,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,i,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Xa(e,n,Ma.emptySet(n),o,s,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class N4{constructor(){this.queries=hv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,s){const i=de(n),a=i.queries;i.queries=hv(),a.forEach((o,c)=>{for(const u of c.j_)u.onError(s)})})(this,new Z(q.ABORTED,"Firestore shutting down"))}}function hv(){return new co(t=>AN(t),oh)}async function Bg(t,e){const n=de(t);let s=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(s=2):(a=new b4,s=e.J_()?0:1);try{switch(s){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=$g(o,`Initialization of query '${da(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&qg(n)}async function zg(t,e){const n=de(t),s=e.query;let i=3;const a=n.queries.get(s);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function j4(t,e){const n=de(t);let s=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(i)&&(s=!0);o.z_=i}}s&&qg(n)}function E4(t,e,n){const s=de(t),i=s.queries.get(e);if(i)for(const a of i.j_)a.onError(n);s.queries.delete(e)}function qg(t){t.Y_.forEach(e=>{e.next()})}var Zm,fv;(fv=Zm||(Zm={})).ea="default",fv.Cache="cache";class Hg{constructor(e,n,s){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new Xa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const s=n!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.key=e}}class hj{constructor(e){this.key=e}}class k4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=RN(e),this.Ra=new Ma(this.Aa)}get Va(){return this.Ta}ma(e,n){const s=n?n.fa:new dv,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const p=i.get(h),v=lh(this.query,m)?m:null,_=!!p&&this.mutatedKeys.has(p.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let T=!1;p&&v?p.data.isEqual(v.data)?_!==R&&(s.track({type:3,doc:v}),T=!0):this.ga(p,v)||(s.track({type:2,doc:v}),T=!0,(u&&this.Aa(v,u)>0||d&&this.Aa(v,d)<0)&&(c=!0)):!p&&v?(s.track({type:0,doc:v}),T=!0):p&&!v&&(s.track({type:1,doc:p}),T=!0,(u||d)&&(c=!0)),T&&(v?(o=o.add(v),a=R?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),s.track({type:1,doc:h})}return{Ra:o,fa:s,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(v,_){const R=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return R(v)-R(_)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(s),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Xa(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new dv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const n=[];return e.forEach(s=>{this.da.has(s)||n.push(new hj(s))}),this.da.forEach(s=>{e.has(s)||n.push(new dj(s))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Xa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class T4{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class I4{constructor(e){this.key=e,this.va=!1}}class S4{constructor(e,n,s,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new co(c=>AN(c),oh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(re.comparator),this.Na=new Map,this.La=new Pg,this.Ba={},this.ka=new Map,this.qa=Qa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function C4(t,e,n=!0){const s=yj(t);let i;const a=s.Fa.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await fj(s,e,n,!0),i}async function A4(t,e){const n=yj(t);await fj(n,e,!0,!1)}async function fj(t,e,n,s){const i=await ZR(t.localStore,ys(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return s&&(c=await R4(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ij(t.remoteStore,i),c}async function R4(t,e,n,s,i){t.Ka=(m,p,v)=>async function(R,T,b,w){let y=T.view.ma(b);y.ns&&(y=await ov(R.localStore,T.query,!1).then(({documents:N})=>T.view.ma(N,y)));const j=w&&w.targetChanges.get(T.targetId),C=w&&w.targetMismatches.get(T.targetId)!=null,O=T.view.applyChanges(y,R.isPrimaryClient,j,C);return pv(R,T.targetId,O.wa),O.snapshot}(t,m,p,v);const a=await ov(t.localStore,e,!0),o=new k4(e,a.Ts),c=o.ma(a.documents),u=xc.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);pv(t,n,d.wa);const h=new T4(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function P4(t,e,n){const s=de(t),i=s.Fa.get(e),a=s.Ma.get(i.targetId);if(a.length>1)return s.Ma.set(i.targetId,a.filter(o=>!oh(o,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Jm(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&Og(s.remoteStore,i.targetId),ep(s,i.targetId)}).catch(mc)):(ep(s,i.targetId),await Jm(s.localStore,i.targetId,!0))}async function D4(t,e){const n=de(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Og(n.remoteStore,s.targetId))}async function L4(t,e,n){const s=B4(t);try{const i=await function(o,c){const u=de(o),d=at.now(),h=c.reduce((v,_)=>v.add(_.key),ge());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let _=Zs(),R=ge();return u.cs.getEntries(v,h).next(T=>{_=T,_.forEach((b,w)=>{w.isValidDocument()||(R=R.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,_)).next(T=>{m=T;const b=[];for(const w of c){const y=sR(w,m.get(w.key).overlayedDocument);y!=null&&b.push(new Xr(w.key,y,NN(y.value.mapValue),Dn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,b,c)}).next(T=>{p=T;const b=T.applyToLocalDocumentSet(m,R);return u.documentOverlayCache.saveOverlays(v,T.batchId,b)})}).then(()=>({batchId:p.batchId,changes:DN(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ye(ke)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(s,i.batchId,n),await vc(s,i.changes),await mh(s.remoteStore)}catch(i){const a=$g(i,"Failed to persist write");n.reject(a)}}async function mj(t,e){const n=de(t);try{const s=await XR(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Na.get(a);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ie(o.va):i.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),await vc(n,s,e)}catch(s){await mc(s)}}function mv(t,e,n){const s=de(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Fa.forEach((a,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=de(o);u.onlineState=c;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.j_)p.Z_(c)&&(d=!0)}),d&&qg(u)}(s.eventManager,e),i.length&&s.Ca.d_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function O4(t,e,n){const s=de(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Na.get(e),a=i&&i.key;if(a){let o=new Ye(re.comparator);o=o.insert(a,$t.newNoDocument(a,ce.min()));const c=ge().add(a),u=new dh(ce.min(),new Map,new Ye(ke),o,c);await mj(s,u),s.Oa=s.Oa.remove(a),s.Na.delete(e),Wg(s)}else await Jm(s.localStore,e,!1).then(()=>ep(s,e,n)).catch(mc)}async function M4(t,e){const n=de(t),s=e.batch.batchId;try{const i=await QR(n.localStore,e);gj(n,s,null),pj(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await vc(n,i)}catch(i){await mc(i)}}async function V4(t,e,n){const s=de(t);try{const i=await function(o,c){const u=de(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Ie(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(s.localStore,e);gj(s,e,n),pj(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await vc(s,i)}catch(i){await mc(i)}}function pj(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function gj(t,e,n){const s=de(t);let i=s.Ba[s.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),s.Ba[s.currentUser.toKey()]=i}}function ep(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Ma.get(e))t.Fa.delete(s),n&&t.Ca.$a(s,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(s=>{t.La.containsKey(s)||xj(t,s)})}function xj(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Og(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Wg(t))}function pv(t,e,n){for(const s of n)s instanceof dj?(t.La.addReference(s.key,e),F4(t,s)):s instanceof hj?(ne("SyncEngine","Document no longer in limbo: "+s.key),t.La.removeReference(s.key,e),t.La.containsKey(s.key)||xj(t,s.key)):oe()}function F4(t,e){const n=e.key,s=n.path.canonicalString();t.Oa.get(n)||t.xa.has(s)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(s),Wg(t))}function Wg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new re($e.fromString(e)),s=t.qa.next();t.Na.set(s,new I4(n)),t.Oa=t.Oa.insert(n,s),ij(t.remoteStore,new jr(ys(ah(n.path)),s,"TargetPurposeLimboResolution",bg.oe))}}async function vc(t,e,n){const s=de(t),i=[],a=[],o=[];s.Fa.isEmpty()||(s.Fa.forEach((c,u)=>{o.push(s.Ka(u,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Lg.Wi(u.targetId,d);a.push(m)}}))}),await Promise.all(o),s.Ca.d_(i),await async function(u,d){const h=de(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>H.forEach(d,p=>H.forEach(p.$i,v=>h.persistence.referenceDelegate.addReference(m,p.targetId,v)).next(()=>H.forEach(p.Ui,v=>h.persistence.referenceDelegate.removeReference(m,p.targetId,v)))))}catch(m){if(!pc(m))throw m;ne("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const v=h.os.get(p),_=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(p,R)}}}(s.localStore,a))}async function U4(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const s=await tj(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(c=>{c.forEach(u=>{u.reject(new Z(q.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await vc(n,s.hs)}}function $4(t,e){const n=de(t),s=n.Na.get(e);if(s&&s.va)return ge().add(s.key);{let i=ge();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function yj(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O4.bind(null,e),e.Ca.d_=j4.bind(null,e.eventManager),e.Ca.$a=E4.bind(null,e.eventManager),e}function B4(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V4.bind(null,e),e}class Td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return GR(this.persistence,new WR,e.initialUser,this.serializer)}Ga(e){return new zR(Dg.Zr,this.serializer)}Wa(e){return new t4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Td.provider={build:()=>new Td};class tp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>mv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=U4.bind(null,this.syncEngine),await _4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new N4}()}createDatastore(e){const n=hh(e.databaseInfo.databaseId),s=function(a){return new i4(a)}(e.databaseInfo);return function(a,o,c,u){return new l4(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,a,o,c){return new u4(s,i,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>mv(this.syncEngine,n,0),function(){return cv.D()?new cv:new n4}())}createSyncEngine(e,n){return function(i,a,o,c,u,d,h){const m=new S4(i,a,o,c,u,d);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=de(i);ne("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await yc(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}tp.provider={build:()=>new tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Js("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n,s,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=_g.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async o=>{ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=$g(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function bf(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await tj(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function gv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await q4(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>uv(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>uv(e.remoteStore,i)),t._onlineComponents=e}async function q4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await bf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ai("Error using user provided cache. Falling back to memory cache: "+n),await bf(t,new Td)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await bf(t,new Td);return t._offlineComponents}async function vj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await gv(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await gv(t,new tp))),t._onlineComponents}function H4(t){return vj(t).then(e=>e.syncEngine)}async function Id(t){const e=await vj(t),n=e.eventManager;return n.onListen=C4.bind(null,e.syncEngine),n.onUnlisten=P4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=A4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D4.bind(null,e.syncEngine),n}function W4(t,e,n={}){const s=new Bs;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const h=new Kg({next:p=>{h.Za(),o.enqueueAndForget(()=>zg(a,m));const v=p.docs.has(c);!v&&p.fromCache?d.reject(new Z(q.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&u&&u.source==="server"?d.reject(new Z(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Hg(ah(c.path),h,{includeMetadataChanges:!0,_a:!0});return Bg(a,m)}(await Id(t),t.asyncQueue,e,n,s)),s.promise}function K4(t,e,n={}){const s=new Bs;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const h=new Kg({next:p=>{h.Za(),o.enqueueAndForget(()=>zg(a,m)),p.fromCache&&u.source==="server"?d.reject(new Z(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Hg(c,h,{includeMetadataChanges:!0,_a:!0});return Bg(a,m)}(await Id(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t,e,n){if(!n)throw new Z(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bj(t,e,n,s){if(e===!0&&s===!0)throw new Z(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yv(t){if(!re.isDocumentKey(t))throw new Z(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vv(t){if(re.isDocumentKey(t))throw new Z(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Gt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ph(t);throw new Z(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function G4(t,e){if(e<=0)throw new Z(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wj((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gh{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wv(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new wN;switch(s.type){case"firstParty":return new xA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Z(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=xv.get(n);s&&(ne("ComponentProvider","Removing Datastore"),xv.delete(n),s.terminate())}(this),Promise.resolve()}}function Nj(t,e,n,s={}){var i;const a=(t=Gt(t,gh))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),s.mockUserToken){let c,u;if(typeof s.mockUserToken=="string")c=s.mockUserToken,u=Ft.MOCK_USER;else{c=_b(s.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Z(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ft(d)}t._authCredentials=new mA(new vN(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Es(this.firestore,e,this._query)}}class At{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class zs extends Es{constructor(e,n,s){super(e,n,ah(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new re(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function ue(t,e,...n){if(t=Ve(t),_j("collection","path",e),t instanceof gh){const s=$e.fromString(e,...n);return vv(s),new zs(t,null,s)}{if(!(t instanceof At||t instanceof zs))throw new Z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child($e.fromString(e,...n));return vv(s),new zs(t.firestore,null,s)}}function J(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=_g.newId()),_j("doc","path",e),t instanceof gh){const s=$e.fromString(e,...n);return yv(s),new At(t,null,new re(s))}{if(!(t instanceof At||t instanceof zs))throw new Z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child($e.fromString(e,...n));return yv(s),new At(t.firestore,t instanceof zs?t.converter:null,new re(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sj(this,"async_queue_retry"),this.Vu=()=>{const s=_f();s&&ne("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const n=_f();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=_f();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Bs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pc(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(s=>{this.Eu=s,this.du=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(s);throw Js("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.du=!1,s))));return this.mu=n,n}enqueueAfterDelay(e,n,s){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ug.createAndSchedule(this,e,n,s,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function bv(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of s)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class bs extends gh{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new _v,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _v(e),this._firestoreClient=void 0,await e}}}function jj(t,e){const n=typeof t=="object"?t:th(),s=typeof t=="string"?t:"(default)",i=eh(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const a=yb("firestore");a&&Nj(i,...a)}return i}function wc(t){if(t._terminated)throw new Z(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Q4(t),t._firestoreClient}function Q4(t){var e,n,s;const i=t._freezeSettings(),a=function(c,u,d,h){return new CA(c,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wj(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new z4(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Di(Et.fromBase64String(e))}catch(n){throw new Z(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Di(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=/^__.*__$/;class Y4{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms):new gc(e,this.data,n,this.fieldTransforms)}}class Ej{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class Gg{constructor(e,n,s,i,a,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:s,xu:!1});return i.Ou(e),i}Nu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:s,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(kj(this.Cu)&&X4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class J4{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||hh(e)}Qu(e,n,s,i=!1){return new Gg({Cu:e,methodName:n,qu:s,path:Nt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vh(t){const e=t._freezeSettings(),n=hh(t._databaseId);return new J4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tj(t,e,n,s,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);Yg("Data must be an object, but it was:",o,s);const c=Ij(s,o);let u,d;if(a.merge)u=new xn(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const p=np(e,m,n);if(!o.contains(p))throw new Z(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Cj(h,p)||h.push(p)}u=new xn(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new Y4(new en(c),u,d)}class wh extends ho{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wh}}class Qg extends ho{_toFieldTransform(e){return new BN(e.path,new Jl)}isEqual(e){return e instanceof Qg}}class Xg extends ho{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new tc(e.serializer,MN(e.serializer,this.$u));return new BN(e.path,n)}isEqual(e){return e instanceof Xg&&this.$u===e.$u}}function Z4(t,e,n,s){const i=t.Qu(1,e,n);Yg("Data must be an object, but it was:",i,s);const a=[],o=en.empty();Fi(s,(u,d)=>{const h=Jg(e,u,n);d=Ve(d);const m=i.Nu(h);if(d instanceof wh)a.push(h);else{const p=bc(d,m);p!=null&&(a.push(h),o.set(h,p))}});const c=new xn(a);return new Ej(o,c,i.fieldTransforms)}function e5(t,e,n,s,i,a){const o=t.Qu(1,e,n),c=[np(e,s,n)],u=[i];if(a.length%2!=0)throw new Z(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)c.push(np(e,a[p])),u.push(a[p+1]);const d=[],h=en.empty();for(let p=c.length-1;p>=0;--p)if(!Cj(d,c[p])){const v=c[p];let _=u[p];_=Ve(_);const R=o.Nu(v);if(_ instanceof wh)d.push(v);else{const T=bc(_,R);T!=null&&(d.push(v),h.set(v,T))}}const m=new xn(d);return new Ej(h,m,o.fieldTransforms)}function t5(t,e,n,s=!1){return bc(n,t.Qu(s?4:3,e))}function bc(t,e){if(Sj(t=Ve(t)))return Yg("Unsupported field value:",e,t),Ij(t,e);if(t instanceof ho)return function(s,i){if(!kj(i.Cu))throw i.Bu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(s,i){const a=[];let o=0;for(const c of s){let u=bc(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(s,i){if((s=Ve(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return MN(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=at.fromDate(s);return{timestampValue:Ed(i.serializer,a)}}if(s instanceof at){const a=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ed(i.serializer,a)}}if(s instanceof xh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Di)return{bytesValue:GN(i.serializer,s._byteString)};if(s instanceof At){const a=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Rg(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof yh)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Ig(c.serializer,u)})}}}}}}(s,i);throw i.Bu(`Unsupported field value: ${ph(s)}`)}(t,e)}function Ij(t,e){const n={};return _N(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(t,(s,i)=>{const a=bc(i,e.Mu(s));a!=null&&(n[s]=a)}),{mapValue:{fields:n}}}function Sj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof xh||t instanceof Di||t instanceof At||t instanceof ho||t instanceof yh)}function Yg(t,e,n){if(!Sj(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=ph(n);throw s==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+s)}}function np(t,e,n){if((e=Ve(e))instanceof _c)return e._internalPath;if(typeof e=="string")return Jg(t,e);throw Sd("Field path arguments must be of type string or ",t,!1,void 0,n)}const n5=new RegExp("[~\\*/\\[\\]]");function Jg(t,e,n){if(e.search(n5)>=0)throw Sd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _c(...e.split("."))._internalPath}catch{throw Sd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sd(t,e,n,s,i){const a=s&&!s.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${s}`),o&&(u+=` in document ${i}`),u+=")"),new Z(q.INVALID_ARGUMENT,c+t+u)}function Cj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n,s,i,a){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new s5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_h("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class s5 extends Aj{data(){return super.data()}}function _h(t,e){return typeof e=="string"?Jg(t,e):e instanceof _c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zg{}class bh extends Zg{}function ot(t,e,...n){let s=[];e instanceof Zg&&s.push(e),s=s.concat(n),function(a){const o=a.filter(u=>u instanceof Nh).length,c=a.filter(u=>u instanceof Nc).length;if(o>1||o>0&&c>0)throw new Z(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class Nc extends bh{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Nc(e,n,s)}_apply(e){const n=this._parse(e);return Pj(e._query,n),new Es(e.firestore,e.converter,Km(e._query,n))}_parse(e){const n=vh(e.firestore);return function(a,o,c,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){jv(m,h);const v=[];for(const _ of m)v.push(Nv(u,a,_));p={arrayValue:{values:v}}}else p=Nv(u,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||jv(m,h),p=t5(c,o,m,h==="in"||h==="not-in");return ft.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mt(t,e,n){const s=e,i=_h("where",t);return Nc._create(i,s,n)}class Nh extends Zg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:is.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)Pj(o,u),o=Km(o,u)}(e._query,n),new Es(e.firestore,e.converter,Km(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jh extends bh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jh(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new Z(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Z(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(a,o)}(e._query,this._field,this._direction);return new Es(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new lo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Ns(t,e="asc"){const n=e,s=_h("orderBy",t);return jh._create(s,n)}class Eh extends bh{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Eh(e,n,s)}_apply(e){return new Es(e.firestore,e.converter,jd(e._query,this._limit,this._limitType))}}function ex(t){return G4("limit",t),Eh._create("limit",t,"F")}function Nv(t,e,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new Z(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CN(e)&&n.indexOf("/")!==-1)throw new Z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child($e.fromString(n));if(!re.isDocumentKey(s))throw new Z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return qy(t,new re(s))}if(n instanceof At)return qy(t,n._key);throw new Z(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(n)}.`)}function jv(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pj(t,e){const n=function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Dj{convertValue(e,n="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Fi(e,(i,a)=>{s[i]=this.convertValue(a,n)}),s}convertVectorValue(e){var n,s,i;const a=(i=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(o=>st(o.doubleValue));return new yh(a)}convertGeoPoint(e){return new xh(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=jg(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=$e.fromString(e);Ie(ej(s));const i=new Wa(s.get(1),s.get(3)),a=new re(s.popFirst(5));return i.isEqual(n)||Js(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tx extends Aj{constructor(e,n,s,i,a,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(_h("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Nl extends tx{data(e={}){return super.data(e)}}class nx{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ta(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Nl(this._firestore,this._userDataWriter,s.key,s,new Ta(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new Nl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ta(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Nl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ta(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:r5(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function r5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){t=Gt(t,At);const e=Gt(t.firestore,bs);return W4(wc(e),t._key).then(n=>Oj(e,t,n))}class sx extends Dj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function Be(t){t=Gt(t,Es);const e=Gt(t.firestore,bs),n=wc(e),s=new sx(e);return Rj(t._query),K4(n,t._query).then(i=>new nx(e,s,t,i))}function fn(t,e,n){t=Gt(t,At);const s=Gt(t.firestore,bs),i=Lj(t.converter,e,n);return jc(s,[Tj(vh(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Dn.none())])}function ye(t,e,n,...s){t=Gt(t,At);const i=Gt(t.firestore,bs),a=vh(i);let o;return o=typeof(e=Ve(e))=="string"||e instanceof _c?e5(a,"updateDoc",t._key,e,n,s):Z4(a,"updateDoc",t._key,e),jc(i,[o.toMutation(t._key,Dn.exists(!0))])}function Yn(t){return jc(Gt(t.firestore,bs),[new Sg(t._key,Dn.none())])}function es(t,e){const n=Gt(t.firestore,bs),s=J(t),i=Lj(t.converter,e);return jc(n,[Tj(vh(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,Dn.exists(!1))]).then(()=>s)}function er(t,...e){var n,s,i;t=Ve(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||bv(e[o])||(a=e[o],o++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(bv(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(s=m.error)===null||s===void 0?void 0:s.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,d,h;if(t instanceof At)d=Gt(t.firestore,bs),h=ah(t._key.path),u={next:m=>{e[o]&&e[o](Oj(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Gt(t,Es);d=Gt(m.firestore,bs),h=m._query;const p=new sx(d);u={next:v=>{e[o]&&e[o](new nx(d,p,m,v))},error:e[o+1],complete:e[o+2]},Rj(t._query)}return function(p,v,_,R){const T=new Kg(R),b=new Hg(v,T,_);return p.asyncQueue.enqueueAndForget(async()=>Bg(await Id(p),b)),()=>{T.Za(),p.asyncQueue.enqueueAndForget(async()=>zg(await Id(p),b))}}(wc(d),h,c,u)}function jc(t,e){return function(s,i){const a=new Bs;return s.asyncQueue.enqueueAndForget(async()=>L4(await H4(s),i,a)),a.promise}(wc(t),e)}function Oj(t,e,n){const s=n.docs.get(e._key),i=new sx(t);return new tx(t,i,e._key,s,new Ta(n.hasPendingWrites,n.fromCache),e.converter)}function ae(){return new Qg("serverTimestamp")}function Ds(t){return new Xg("increment",t)}(function(e,n=!0){(function(i){oo=i})(Vi),Ti(new Vr("firestore",(s,{instanceIdentifier:i,options:a})=>{const o=s.getProvider("app").getImmediate(),c=new bs(new pA(s.getProvider("auth-internal")),new vA(s.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(d.options.projectId,h)}(o,i),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),gs(Fy,"4.7.3",e),gs(Fy,"4.7.3","esm2017")})();const Nf=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Dj,Bytes:Di,CollectionReference:zs,DocumentReference:At,DocumentSnapshot:tx,FieldPath:_c,FieldValue:ho,Firestore:bs,FirestoreError:Z,GeoPoint:xh,Query:Es,QueryCompositeFilterConstraint:Nh,QueryConstraint:bh,QueryDocumentSnapshot:Nl,QueryFieldFilterConstraint:Nc,QueryLimitConstraint:Eh,QueryOrderByConstraint:jh,QuerySnapshot:nx,SnapshotMetadata:Ta,Timestamp:at,VectorValue:yh,_AutoId:_g,_ByteString:Et,_DatabaseId:Wa,_DocumentKey:re,_EmptyAuthCredentialsProvider:wN,_FieldPath:Nt,_cast:Gt,_logWarn:Ai,_validateIsNotUsedTogether:bj,addDoc:es,collection:ue,connectFirestoreEmulator:Nj,deleteDoc:Yn,doc:J,ensureFirestoreConfigured:wc,executeWrite:jc,getDoc:nt,getDocs:Be,getFirestore:jj,increment:Ds,limit:ex,onSnapshot:er,orderBy:Ns,query:ot,serverTimestamp:ae,setDoc:fn,updateDoc:ye,where:mt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj="firebasestorage.googleapis.com",Vj="storageBucket",i5=2*60*1e3,a5=10*60*1e3,o5=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je extends js{constructor(e,n,s=0){super(jf(e),`Firebase Storage: ${n} (${jf(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qe||(qe={}));function jf(t){return"storage/"+t}function rx(){const t="An unknown error occurred, please check the error payload for server response.";return new Je(qe.UNKNOWN,t)}function l5(t){return new Je(qe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function c5(t){return new Je(qe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function u5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Je(qe.UNAUTHENTICATED,t)}function d5(){return new Je(qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function h5(t){return new Je(qe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Fj(){return new Je(qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Uj(){return new Je(qe.CANCELED,"User canceled the upload/download.")}function f5(t){return new Je(qe.INVALID_URL,"Invalid URL '"+t+"'.")}function m5(t){return new Je(qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function p5(){return new Je(qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Vj+"' property when initializing the app?")}function $j(){return new Je(qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g5(){return new Je(qe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function x5(){return new Je(qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function y5(t){return new Je(qe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sp(t){return new Je(qe.INVALID_ARGUMENT,t)}function Bj(){return new Je(qe.APP_DELETED,"The Firebase app was deleted.")}function v5(t){return new Je(qe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jl(t,e){return new Je(qe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qo(t){throw new Je(qe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=yn.makeFromUrl(e,n)}catch{return new yn(e,"")}if(s.path==="")return s;throw m5(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function a(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${h}/b/${i}/o${p}`,"i"),_={bucket:1,path:3},R=n===Mj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",b=new RegExp(`^https?://${R}/${i}/${T}`,"i"),y=[{regex:c,indices:u,postModify:a},{regex:v,indices:_,postModify:d},{regex:b,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<y.length;j++){const C=y[j],O=C.regex.exec(e);if(O){const N=O[C.indices.bucket];let x=O[C.indices.path];x||(x=""),s=new yn(N,x),C.postModify(s);break}}if(s==null)throw f5(e);return s}}class w5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e,n){let s=1,i=null,a=null,o=!1,c=0;function u(){return c===2}let d=!1;function h(...T){d||(d=!0,e.apply(null,T))}function m(T){i=setTimeout(()=>{i=null,t(v,u())},T)}function p(){a&&clearTimeout(a)}function v(T,...b){if(d){p();return}if(T){p(),h.call(null,T,...b);return}if(u()||o){p(),h.call(null,T,...b);return}s<64&&(s*=2);let y;c===1?(c=2,y=0):y=(s+Math.random())*1e3,m(y)}let _=!1;function R(T){_||(_=!0,p(),!d&&(i!==null?(T||(c=2),clearTimeout(i),m(0)):T||(c=1)))}return m(0),a=setTimeout(()=>{o=!0,R(!0)},n),R}function b5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(t){return t!==void 0}function j5(t){return typeof t=="function"}function E5(t){return typeof t=="object"&&!Array.isArray(t)}function kh(t){return typeof t=="string"||t instanceof String}function Ev(t){return ix()&&t instanceof Blob}function ix(){return typeof Blob<"u"}function kv(t,e,n,s){if(s<e)throw sp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw sp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function zj(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var vi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(vi||(vi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,n,s,i,a,o,c,u,d,h,m,p=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,_)=>{this.resolve_=v,this.reject_=_,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new xu(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===vi.NO_ERROR,u=a.getStatus();if(!c||qj(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===vi.ABORT;s(!1,new xu(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;s(!0,new xu(d,a))})},n=(s,i)=>{const a=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());N5(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=rx();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Bj():Uj();o(u)}else{const u=Fj();o(u)}};this.canceled_?n(!1,new xu(!1,null,!0)):this.backoffId_=_5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&b5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xu{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function T5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function I5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function S5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function C5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function A5(t,e,n,s,i,a,o=!0){const c=zj(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return S5(d,e),T5(d,n),I5(d,a),C5(d,s),new k5(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function P5(...t){const e=R5();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(ix())return new Blob(t);throw new Je(qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function D5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(t){if(typeof atob>"u")throw y5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ef{constructor(e,n){this.data=e,this.contentType=n||null}}function O5(t,e){switch(t){case fs.RAW:return new Ef(Hj(e));case fs.BASE64:case fs.BASE64URL:return new Ef(Wj(t,e));case fs.DATA_URL:return new Ef(V5(e),F5(e))}throw rx()}function Hj(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=s,o=t.charCodeAt(++n);s=65536|(a&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function M5(t){let e;try{e=decodeURIComponent(t)}catch{throw jl(fs.DATA_URL,"Malformed data URL.")}return Hj(e)}function Wj(t,e){switch(t){case fs.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw jl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case fs.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw jl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=L5(e)}catch(i){throw i.message.includes("polyfill")?i:jl(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}class Kj{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw jl(fs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=U5(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function V5(t){const e=new Kj(t);return e.base64?Wj(fs.BASE64,e.rest):M5(e.rest)}function F5(t){return new Kj(t).contentType}function U5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){let s=0,i="";Ev(e)?(this.data_=e,s=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ev(this.data_)){const s=this.data_,i=D5(s,e,n);return i===null?null:new Ls(i)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Ls(s,!0)}}static getBlob(...e){if(ix()){const n=e.map(s=>s instanceof Ls?s.data_:s);return new Ls(P5.apply(null,n))}else{const n=e.map(o=>kh(o)?O5(fs.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const i=new Uint8Array(s);let a=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[a++]=o[c]}),new Ls(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t){let e;try{e=JSON.parse(t)}catch{return null}return E5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function B5(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function Qj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t,e){return e}class Ht{constructor(e,n,s,i){this.server=e,this.local=n||e,this.writable=!!s,this.xform=i||z5}}let yu=null;function q5(t){return!kh(t)||t.length<2?t:Qj(t)}function ax(){if(yu)return yu;const t=[];t.push(new Ht("bucket")),t.push(new Ht("generation")),t.push(new Ht("metageneration")),t.push(new Ht("name","fullPath",!0));function e(a,o){return q5(o)}const n=new Ht("name");n.xform=e,t.push(n);function s(a,o){return o!==void 0?Number(o):o}const i=new Ht("size");return i.xform=s,t.push(i),t.push(new Ht("timeCreated")),t.push(new Ht("updated")),t.push(new Ht("md5Hash",null,!0)),t.push(new Ht("cacheControl",null,!0)),t.push(new Ht("contentDisposition",null,!0)),t.push(new Ht("contentEncoding",null,!0)),t.push(new Ht("contentLanguage",null,!0)),t.push(new Ht("contentType",null,!0)),t.push(new Ht("metadata","customMetadata",!0)),yu=t,yu}function H5(t,e){function n(){const s=t.bucket,i=t.fullPath,a=new yn(s,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function W5(t,e,n){const s={};s.type="file";const i=n.length;for(let a=0;a<i;a++){const o=n[a];s[o.local]=o.xform(s,e[o.server])}return H5(s,t),s}function Xj(t,e,n){const s=Gj(e);return s===null?null:W5(t,s,n)}function K5(t,e,n,s){const i=Gj(e);if(i===null||!kh(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const h=t.bucket,m=t.fullPath,p="/b/"+o(h)+"/o/"+o(m),v=Ec(p,n,s),_=zj({alt:"media",token:d});return v+_})[0]}function Yj(t,e){const n={},s=e.length;for(let i=0;i<s;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class fo{constructor(e,n,s,i){this.url=e,this.method=n,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t){if(!t)throw rx()}function ox(t,e){function n(s,i){const a=Xj(t,i,e);return qs(a!==null),a}return n}function G5(t,e){function n(s,i){const a=Xj(t,i,e);return qs(a!==null),K5(a,i,t.host,t._protocol)}return n}function kc(t){function e(n,s){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=d5():i=u5():n.getStatus()===402?i=c5(t.bucket):n.getStatus()===403?i=h5(t.path):i=s,i.status=n.getStatus(),i.serverResponse=s.serverResponse,i}return e}function Jj(t){const e=kc(t);function n(s,i){let a=e(s,i);return s.getStatus()===404&&(a=l5(t.path)),a.serverResponse=i.serverResponse,a}return n}function Q5(t,e,n){const s=e.fullServerUrl(),i=Ec(s,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new fo(i,a,ox(t,n),o);return c.errorHandler=Jj(e),c}function X5(t,e,n){const s=e.fullServerUrl(),i=Ec(s,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new fo(i,a,G5(t,n),o);return c.errorHandler=Jj(e),c}function Y5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Zj(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=Y5(null,e)),s}function e1(t,e,n,s,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let y="";for(let j=0;j<2;j++)y=y+Math.random().toString().slice(2);return y}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=Zj(e,s,i),h=Yj(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",v=Ls.getBlob(m,s,p);if(v===null)throw $j();const _={name:d.fullPath},R=Ec(a,t.host,t._protocol),T="POST",b=t.maxUploadRetryTime,w=new fo(R,T,ox(t,n),b);return w.urlParams=_,w.headers=o,w.body=v.uploadData(),w.errorHandler=kc(e),w}class Cd{constructor(e,n,s,i){this.current=e,this.total=n,this.finalized=!!s,this.metadata=i||null}}function lx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{qs(!1)}return qs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function J5(t,e,n,s,i){const a=e.bucketOnlyServerUrl(),o=Zj(e,s,i),c={name:o.fullPath},u=Ec(a,t.host,t._protocol),d="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=Yj(o,n),p=t.maxUploadRetryTime;function v(R){lx(R);let T;try{T=R.getResponseHeader("X-Goog-Upload-URL")}catch{qs(!1)}return qs(kh(T)),T}const _=new fo(u,d,v,p);return _.urlParams=c,_.headers=h,_.body=m,_.errorHandler=kc(e),_}function Z5(t,e,n,s){const i={"X-Goog-Upload-Command":"query"};function a(d){const h=lx(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{qs(!1)}m||qs(!1);const p=Number(m);return qs(!isNaN(p)),new Cd(p,s.size(),h==="final")}const o="POST",c=t.maxUploadRetryTime,u=new fo(n,o,a,c);return u.headers=i,u.errorHandler=kc(e),u}const Tv=256*1024;function eP(t,e,n,s,i,a,o,c){const u=new Cd(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw g5();const d=u.total-u.current;let h=d;i>0&&(h=Math.min(h,i));const m=u.current,p=m+h;let v="";h===0?v="finalize":d===h?v="upload, finalize":v="upload";const _={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${u.current}`},R=s.slice(m,p);if(R===null)throw $j();function T(j,C){const O=lx(j,["active","final"]),N=u.current+h,x=s.size();let E;return O==="final"?E=ox(e,a)(j,C):E=null,new Cd(N,x,O==="final",E)}const b="POST",w=e.maxUploadRetryTime,y=new fo(n,b,T,w);return y.headers=_,y.body=R.uploadData(),y.progressCallback=c||null,y.errorHandler=kc(t),y}const Jt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function kf(t){switch(t){case"running":case"pausing":case"canceling":return Jt.RUNNING;case"paused":return Jt.PAUSED;case"success":return Jt.SUCCESS;case"canceled":return Jt.CANCELED;case"error":return Jt.ERROR;default:return Jt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,s){if(j5(e)||n!=null||s!=null)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class nP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,i){if(this.sent_)throw Qo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sP extends nP{initXhr(){this.xhr_.responseType="text"}}function ui(){return new sP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=ax(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(qe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(qj(i.status,[]))if(a)i=Fj();else{this.sleepTime=Math.max(this.sleepTime*2,o5),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(qe.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const s=J5(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,ui,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const i=Z5(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ui,n,s);this._request=a,a.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Tv*this._chunkMultiplier,n=new Cd(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((i,a)=>{let o;try{o=eP(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(o,ui,i,a,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Tv*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=Q5(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(s,ui,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=e1(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,ui,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Uj(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=kf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,i){const a=new tP(n||void 0,s||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(kf(this._state)){case Jt.SUCCESS:ua(this._resolve.bind(null,this.snapshot))();break;case Jt.CANCELED:case Jt.ERROR:const n=this._reject;ua(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(kf(this._state)){case Jt.RUNNING:case Jt.PAUSED:e.next&&ua(e.next.bind(e,this.snapshot))();break;case Jt.SUCCESS:e.complete&&ua(e.complete.bind(e))();break;case Jt.CANCELED:case Jt.ERROR:e.error&&ua(e.error.bind(e,this._error))();break;default:e.error&&ua(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this._service=e,n instanceof yn?this._location=n:this._location=yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Li(e,n)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qj(this._location.path)}get storage(){return this._service}get parent(){const e=$5(this._location.path);if(e===null)return null;const n=new yn(this._location.bucket,e);return new Li(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw v5(e)}}function iP(t,e,n){t._throwIfRoot("uploadBytes");const s=e1(t.storage,t._location,ax(),new Ls(e,!0),n);return t.storage.makeRequestWithTokens(s,ui).then(i=>({metadata:i,ref:t}))}function aP(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new rP(t,new Ls(e),n)}function oP(t){t._throwIfRoot("getDownloadURL");const e=X5(t.storage,t._location,ax());return t.storage.makeRequestWithTokens(e,ui).then(n=>{if(n===null)throw x5();return n})}function lP(t,e){const n=B5(t._location.path,e),s=new yn(t._location.bucket,n);return new Li(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t){return/^[A-Za-z]+:\/\//.test(t)}function uP(t,e){return new Li(t,e)}function t1(t,e){if(t instanceof cx){const n=t;if(n._bucket==null)throw p5();const s=new Li(n,n._bucket);return e!=null?t1(s,e):s}else return e!==void 0?lP(t,e):t}function dP(t,e){if(e&&cP(e)){if(t instanceof cx)return uP(t,e);throw sp("To use ref(service, url), the first argument must be a Storage instance.")}else return t1(t,e)}function Iv(t,e){const n=e==null?void 0:e[Vj];return n==null?null:yn.makeFromBucketSpec(n,t)}function hP(t,e,n,s={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:_b(i,t.app.options.projectId))}class cx{constructor(e,n,s,i,a){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Mj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i5,this._maxUploadRetryTime=a5,this._requests=new Set,i!=null?this._bucket=yn.makeFromBucketSpec(i,this._host):this._bucket=Iv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=Iv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Li(this,e)}_makeRequest(e,n,s,i,a=!0){if(this._deleted)return new w5(Bj());{const o=A5(e,this._appId,s,i,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const Sv="@firebase/storage",Cv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="storage";function rp(t,e,n){return t=Ve(t),iP(t,e,n)}function ux(t,e,n){return t=Ve(t),aP(t,e,n)}function Ya(t){return t=Ve(t),oP(t)}function Ja(t,e){return t=Ve(t),dP(t,e)}function Th(t=th(),e){t=Ve(t);const s=eh(t,n1).getImmediate({identifier:e}),i=yb("storage");return i&&fP(s,...i),s}function fP(t,e,n,s={}){hP(t,e,n,s)}function mP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new cx(n,s,i,e,Vi)}function pP(){Ti(new Vr(n1,mP,"PUBLIC").setMultipleInstances(!0)),gs(Sv,Cv,""),gs(Sv,Cv,"esm2017")}pP();const gP={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},mn=Eb().length?th():jb(gP),Ln=Eb().length>0?uA(mn):Gb(mn,{persistence:[cN,sN]}),z=jj(mn),ip=Th(mn),vu="broast_session_location",s1=I.createContext({user:null,role:null,loading:!0,logout:async()=>{},userLocation:null,locationRequired:!1,refreshUserData:async()=>{}}),xP=({children:t})=>{const[e,n]=I.useState(null),[s,i]=I.useState(null),[a,o]=I.useState(!0),[c,u]=I.useState(null),[d,h]=I.useState(!1),m=async()=>{if(!e)return;const v=await nt(J(z,"users",e.uid));if(v.exists()){const _=v.data(),R=_==null?void 0:_.role,T=_==null?void 0:_.location,b=_==null?void 0:_.savedLocation;if(R==="customer"||R==="admin"){const w=b?{lat:b.lat,lng:b.lng}:T||null;u(w),w&&sessionStorage.setItem(vu,JSON.stringify(w))}else u(T||null),T&&sessionStorage.setItem(vu,JSON.stringify(T));h(!1)}};I.useEffect(()=>{const v=MS(Ln,async _=>{if(n(_),_){const R=await nt(J(z,"users",_.uid)),T=R.data(),b=R.exists()?T==null?void 0:T.role:null;i(b);const w=T==null?void 0:T.location,y=T==null?void 0:T.savedLocation,j=sessionStorage.getItem(vu),C=j?JSON.parse(j):null;let O=null;if(b==="customer"||b==="admin"?O=y?{lat:y.lat,lng:y.lng}:C||w||null:O=C||w||null,u(O),b==="customer"||b==="admin"?(h(!(!!y||!!C)),y&&!C&&sessionStorage.setItem(vu,JSON.stringify({lat:y.lat,lng:y.lng}))):h(b==="owner"||b==="courier"?!w:!1),b==="owner")try{const N=J(z,"restaurants",_.uid);(await nt(N)).exists()||await fn(N,{name:(T==null?void 0:T.restaurantName)||(T==null?void 0:T.name)||" ",ownerId:_.uid,email:(T==null?void 0:T.email)||_.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(N){console.warn("    ",N)}}else i(null),u(null),h(!1);o(!1)});return()=>v()},[]);const p=async()=>{await VS(Ln)};return r.jsx(s1.Provider,{value:{user:e,role:s,loading:a,logout:p,userLocation:c,locationRequired:d,refreshUserData:m},children:t})},He=()=>I.useContext(s1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),Av=t=>{const e=vP(t);return e.charAt(0).toUpperCase()+e.slice(1)},r1=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),wP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _P={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...c},u)=>I.createElement("svg",{ref:u,..._P,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:r1("lucide",i),...!a&&!wP(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>I.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=(t,e)=>{const n=I.forwardRef(({className:s,...i},a)=>I.createElement(bP,{ref:a,iconNode:e,className:r1(`lucide-${yP(Av(t))}`,`lucide-${t}`,s),...i}));return n.displayName=Av(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],jP=Q("arrow-left",NP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Tc=Q("arrow-right",EP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Bu=Q("award",kP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ad=Q("bell",TP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],SP=Q("briefcase",IP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],i1=Q("building-2",CP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],RP=Q("calendar",AP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Tf=Q("chart-column",PP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Rv=Q("check-check",DP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],On=Q("check",LP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],dx=Q("chef-hat",OP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],a1=Q("chevron-down",MP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ap=Q("chevron-left",VP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],UP=Q("chevron-right",FP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],BP=Q("chevron-up",$P);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pi=Q("circle-alert",zP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ce=Q("circle-check-big",qP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],WP=Q("circle-check",HP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Hs=Q("circle-x",KP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Rd=Q("clipboard-list",GP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ws=Q("clock",QP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],hx=Q("code-xml",XP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],JP=Q("credit-card",YP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],In=Q("crown",ZP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Pv=Q("dollar-sign",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],zu=Q("external-link",t6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],o1=Q("eye",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Dv=Q("file-check",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fx=Q("file-text",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],a6=Q("funnel",i6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],If=Q("gift",o6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],l1=Q("heart",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Pd=Q("house",c6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],c1=Q("image",u6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Lv=Q("info",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],f6=Q("key-round",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],p6=Q("key",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wi=Q("loader-circle",g6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mx=Q("lock",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],px=Q("log-in",y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gx=Q("mail",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],bn=Q("map-pin",w6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],b6=Q("map",_6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],op=Q("medal",N6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],_i=Q("megaphone",j6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],k6=Q("menu",E6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ih=Q("message-circle",T6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M5 12h14",key:"1ays0h"}]],S6=Q("minus",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Za=Q("navigation",C6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ts=Q("package",A6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Dd=Q("pen-line",R6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],xx=Q("phone",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],u1=Q("play",D6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ic=Q("plus",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pn=Q("refresh-cw",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],d1=Q("save",M6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],F6=Q("search",V6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$6=Q("send",U6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],z6=Q("server",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],h1=Q("settings",q6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],W6=Q("shield-check",H6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Sc=Q("shield",K6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],nc=Q("shopping-bag",G6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ld=Q("shopping-cart",Q6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Y6=Q("smartphone",X6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Z6=Q("smile",J6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Fn=Q("sparkles",e3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ov=Q("square-check-big",t3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Mv=Q("square",n3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],f1=Q("star",s3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Bt=Q("store",r3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],a3=Q("target",i3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],an=Q("trash-2",o3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],c3=Q("trending-up",l3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],lp=Q("triangle-alert",u3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ns=Q("truck",d3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],m1=Q("upload",h3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Sf=Q("user-check",f3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],p3=Q("user-minus",m3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sc=Q("user-plus",g3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Vv=Q("user-x",x3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],An=Q("user",y3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],w3=Q("users",v3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],b3=Q("utensils",_3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],j3=Q("video",N3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],p1=Q("wallet",E3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Br=Q("x",k3),Fe=({to:t,label:e,icon:n,onClick:s})=>{const{pathname:i}=Gr(),a=i===t;return r.jsxs(_e,{to:t,onClick:s,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(a?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20 backdrop-blur-sm"),children:[n,r.jsx("span",{children:e})]})},T3=()=>{const{user:t,role:e,logout:n}=He(),[s,i]=I.useState(!1),[a,o]=I.useState(0),c=Gr(),u=Yt(),d=c.pathname==="/";return I.useEffect(()=>{i(!1)},[c.pathname]),I.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),I.useEffect(()=>{if(!t){o(0);return}const h=ot(ue(z,"notifications"),mt("recipientId","==",t.uid),mt("read","==",!1)),m=er(h,p=>{o(p.size)},()=>o(0));return()=>m()},[t]),r.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30",children:[r.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[!d&&r.jsx("button",{onClick:()=>u(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"",children:r.jsx(Tc,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[r.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),r.jsx("span",{className:"text-lg sm:text-2xl",children:" "})]})]}),r.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[r.jsx(Fe,{to:"/restaurants",label:"",icon:r.jsx(Bt,{className:"w-4 h-4"})}),e==="customer"&&r.jsxs(r.Fragment,{children:[r.jsx(Fe,{to:"/cart",label:" "}),r.jsx(Fe,{to:"/orders",label:""}),r.jsx(Fe,{to:"/profile",label:"",icon:r.jsx(An,{className:"w-4 h-4"})})]}),e==="owner"&&r.jsxs(r.Fragment,{children:[r.jsx(Fe,{to:"/owner",label:" "}),r.jsx(Fe,{to:"/owner/orders",label:" "}),r.jsx(Fe,{to:"/owner/courier-requests",label:""})]}),e==="courier"&&r.jsxs(r.Fragment,{children:[r.jsx(Fe,{to:"/courier",label:" "}),r.jsx(Fe,{to:"/courier/hiring",label:""})]}),e==="admin"&&r.jsx(Fe,{to:"/admin",label:" "}),e==="developer"&&r.jsx(Fe,{to:"/developer",label:" "}),t&&r.jsxs(_e,{to:"/notifications",className:"relative p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"",children:[r.jsx(Ad,{className:"w-5 h-5"}),a>0&&r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold animate-pulse",children:a>9?"9+":a})]}),t?r.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:""}):r.jsx(Fe,{to:"/login",label:""})]}),r.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white/20 hover:bg-white/30 transition backdrop-blur-sm",onClick:()=>i(!s),children:s?r.jsx(Br,{className:"w-6 h-6 text-white"}):r.jsx(k6,{className:"w-6 h-6 text-white"})})]}),s&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>i(!1)}),r.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] bg-gradient-to-b from-sky-500 to-sky-700 
        z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${s?"translate-x-0":"translate-x-full"}
      `,children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[r.jsx("span",{className:"text-white font-bold text-lg",children:""}),r.jsx("button",{onClick:()=>i(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:r.jsx(Br,{className:"w-5 h-5 text-white"})})]}),r.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[r.jsx(Fe,{to:"/restaurants",label:"",icon:r.jsx(Bt,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e==="customer"&&r.jsxs(r.Fragment,{children:[r.jsx(Fe,{to:"/cart",label:"",icon:r.jsx(Ld,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx(Fe,{to:"/orders",label:"",icon:r.jsx(ts,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx(Fe,{to:"/profile",label:"",icon:r.jsx(An,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),e==="owner"&&r.jsxs(r.Fragment,{children:[r.jsx(Fe,{to:"/owner",label:" ",icon:r.jsx(Pd,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx(Fe,{to:"/owner/orders",label:" ",icon:r.jsx(ts,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx(Fe,{to:"/owner/courier-requests",label:"",icon:r.jsx(ns,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),e==="courier"&&r.jsxs(r.Fragment,{children:[r.jsx(Fe,{to:"/courier",label:" ",icon:r.jsx(ns,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx(Fe,{to:"/courier/hiring",label:"",icon:r.jsx(ts,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),e==="admin"&&r.jsx(Fe,{to:"/admin",label:" ",icon:r.jsx(Sc,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e==="developer"&&r.jsx(Fe,{to:"/developer",label:" ",icon:r.jsx(hx,{className:"w-5 h-5"}),onClick:()=>i(!1)}),t&&r.jsx(Fe,{to:"/notifications",label:` ${a>0?`(${a})`:""}`,icon:r.jsx(Ad,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx("div",{className:"h-px bg-white/20 my-2"}),t?r.jsx("button",{onClick:()=>{n(),i(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"  "}):r.jsx(Fe,{to:"/login",label:" ",icon:r.jsx(Pd,{className:"w-5 h-5"}),onClick:()=>i(!1)})]})]})]})},g1=I.createContext(null),$n=()=>{const t=I.useContext(g1);if(!t)throw new Error("useDialog must be used within DialogProvider");return t},I3=({children:t})=>{const[e,n]=I.useState({isOpen:!1,message:"",type:"confirm"}),s=I.useCallback(u=>new Promise(d=>{n({...u,isOpen:!0,resolve:d})}),[]),i=I.useCallback(u=>{e.resolve&&e.resolve(u),n(d=>({...d,isOpen:!1}))},[e.resolve]),a=I.useCallback(async()=>{e.onConfirm&&await e.onConfirm(),i(!0)},[e.onConfirm,i]),o=I.useCallback(()=>{e.onCancel&&e.onCancel(),i(!1)},[e.onCancel,i]),c=I.useMemo(()=>({confirm:(u,d={})=>s({message:u,type:"confirm",title:d.title||"",confirmText:d.confirmText||"",cancelText:d.cancelText||"",...d}),alert:(u,d={})=>s({message:u,type:"alert",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),success:(u,d={})=>s({message:u,type:"success",title:d.title||" ",confirmText:d.confirmText||"",...d}).then(()=>{}),error:(u,d={})=>s({message:u,type:"error",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),warning:(u,d={})=>s({message:u,type:"warning",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),info:(u,d={})=>s({message:u,type:"info",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{})}),[s]);return r.jsxs(g1.Provider,{value:c,children:[t,r.jsx(S3,{...e,onConfirm:a,onCancel:o})]})},S3=({isOpen:t,title:e,message:n,type:s="confirm",confirmText:i="",cancelText:a="",dangerous:o,onConfirm:c,onCancel:u})=>{if(!t)return null;const h={confirm:{icon:r.jsx(Lv,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:o?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:r.jsx(lp,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:r.jsx(Ce,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:r.jsx(Hs,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:r.jsx(lp,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:r.jsx(Lv,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[s],m=s==="confirm";return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:u}),r.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:p=>p.stopPropagation(),children:[r.jsxs("div",{className:"relative p-6 pb-0",children:[r.jsx("button",{onClick:u,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:r.jsx(Br,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:`w-16 h-16 rounded-full ${h.iconBg} ${h.iconColor} flex items-center justify-center`,children:h.icon})}),r.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:e})]}),r.jsx("div",{className:"p-6 pt-3",children:r.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),r.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${m?"flex-row-reverse":"justify-center"}`,children:[r.jsx("button",{onClick:c,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${h.buttonColor}`,children:i}),m&&r.jsx("button",{onClick:u,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:a})]})]})}),r.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},C3=()=>{const{user:t}=He(),e=Yt(),n=$n(),s=async()=>{if(!(!t||!await n.confirm("     .     .",{title:"  ",dangerous:!0,confirmText:"  ",cancelText:""})))try{await Yn(J(z,"users",t.uid)),await FS(Ln.currentUser),n.success("   "),e("/account-deleted")}catch(a){console.error("Error deleting account:",a),n.error("    .   .")}};return r.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:r.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),r.jsx("span",{className:"text-xl sm:text-2xl font-black",children:" "})]}),r.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["  ",r.jsx(l1,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"}),"    ",new Date().getFullYear()]}),r.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[r.jsxs(_e,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[r.jsx(Sc,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),r.jsxs(_e,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[r.jsx(hx,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),t&&r.jsxs("button",{onClick:s,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[r.jsx(an,{className:"w-3 h-3 sm:w-4 sm:h-4"})," "]})]}),r.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),r.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"     "})]})})},A3=()=>r.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[r.jsx(Fn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),r.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"            ! "}),r.jsx(Fn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),R3=({onLocationSaved:t})=>{const{user:e,role:n}=He(),[s,i]=I.useState(null),[a,o]=I.useState(!1),[c,u]=I.useState(!1),[d,h]=I.useState(null),[m,p]=I.useState(!1),[v,_]=I.useState(!1),R={lat:24.7136,lng:46.6753},T=I.useCallback(()=>{if(!navigator.geolocation){h("    ");return}u(!0),h(null),navigator.geolocation.getCurrentPosition(y=>{const j={lat:y.coords.latitude,lng:y.coords.longitude};i(j),u(!1),window.locationRequiredMap&&(window.locationRequiredMap.setView([j.lat,j.lng],17),window.locationRequiredMarker&&window.locationRequiredMarker.setLatLng([j.lat,j.lng]))},y=>{u(!1),y.code===1?h("   .     "):y.code===2?h("  .    GPS"):h("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);I.useEffect(()=>{if(!document.getElementById("leaflet-css")){const y=document.createElement("link");y.id="leaflet-css",y.rel="stylesheet",y.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(y)}if(window.L)p(!0);else{const y=document.createElement("script");y.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",y.onload=()=>p(!0),document.body.appendChild(y)}},[]),I.useEffect(()=>{if(!m||!window.L)return;const y=window.L;if(!document.getElementById("location-required-map"))return;window.locationRequiredMap&&window.locationRequiredMap.remove();const C=s||R,O=y.map("location-required-map",{zoomControl:!0,attributionControl:!1}).setView([C.lat,C.lng],12);y.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(O);const N=y.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),x=y.marker([C.lat,C.lng],{icon:N,draggable:!0}).addTo(O);return x.on("dragend",()=>{const E=x.getLatLng();i({lat:E.lat,lng:E.lng})}),O.on("click",E=>{const{lat:k,lng:P}=E.latlng;i({lat:k,lng:P}),x.setLatLng([k,P])}),window.locationRequiredMap=O,window.locationRequiredMarker=x,()=>{window.locationRequiredMap&&(window.locationRequiredMap.remove(),window.locationRequiredMap=null,window.locationRequiredMarker=null)}},[m]);const b=async()=>{if(!(!s||!e)){_(!0);try{if(await ye(J(z,"users",e.uid),{location:s,locationUpdatedAt:new Date}),n==="owner")try{await ye(J(z,"restaurants",e.uid),{geoLocation:s,locationUpdatedAt:new Date})}catch(y){console.warn("   :",y)}t()}catch{h("   .   ")}finally{_(!1)}}},w=()=>{switch(n){case"owner":return"";case"courier":return" ";default:return""}};return r.jsx("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-sky-50 via-white to-sky-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 p-6 text-white text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(bn,{className:"w-10 h-10"})}),r.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["  ",w()]}),r.jsx("p",{className:"text-sky-100 text-sm",children:n==="owner"?"    ":"     (15 )"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[d&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 flex items-center gap-3 text-red-700",children:[r.jsx(lp,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("p",{className:"text-sm",children:d})]}),r.jsx("button",{onClick:T,disabled:c,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:c?r.jsxs(r.Fragment,{children:[r.jsx(wi,{className:"w-5 h-5 animate-spin"}),"  ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Za,{className:"w-5 h-5"}),"   "]})}),r.jsxs("div",{className:"relative",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"      "}),r.jsx("div",{id:"location-required-map",className:"h-64 rounded-xl overflow-hidden border-2 border-gray-200",style:{background:"#f0f9ff"}}),!m&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:r.jsx(wi,{className:"w-8 h-8 animate-spin text-sky-500"})})]}),s&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 flex items-center gap-3 text-green-700",children:[r.jsx(Ce,{className:"w-5 h-5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-semibold",children:"   "}),r.jsxs("p",{className:"text-xs text-green-600",children:[s.lat.toFixed(6),", ",s.lng.toFixed(6)]})]})]}),r.jsx("button",{onClick:b,disabled:!s||v,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:v?r.jsxs(r.Fragment,{children:[r.jsx(wi,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ce,{className:"w-5 h-5"}),"  "]})}),r.jsx("p",{className:"text-xs text-gray-400 text-center",children:"       "})]})]})})},Oe=({to:t,icon:e,label:n,color:s,emoji:i})=>r.jsxs(_e,{to:t,className:`flex flex-col items-center justify-center gap-2 p-4 sm:p-5 rounded-2xl bg-gradient-to-br ${s} text-white shadow-lg active:scale-95 transition-all duration-200`,children:[r.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-white/20 rounded-xl flex items-center justify-center",children:i?r.jsx("span",{className:"text-2xl sm:text-3xl",children:i}):e}),r.jsx("span",{className:"font-bold text-sm sm:text-base text-center leading-tight",children:n})]}),P3=()=>{var i;const{user:t,role:e,loading:n,logout:s}=He();return n?r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100",children:[r.jsx("div",{className:"w-20 h-20 mb-6 bg-gradient-to-br from-sky-500 to-sky-600 rounded-3xl flex items-center justify-center shadow-2xl animate-pulse",children:r.jsx("span",{className:"text-5xl",children:""})}),r.jsx(wi,{className:"w-8 h-8 text-sky-500 animate-spin mb-3"}),r.jsx("p",{className:"text-sky-600 font-semibold",children:" ..."})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 px-3 py-4 sm:px-4 sm:py-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-3 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl sm:rounded-3xl flex items-center justify-center shadow-xl",children:r.jsx("span",{className:"text-4xl sm:text-5xl",children:""})}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-sky-600 to-sky-500 mb-1",children:" "}),t&&r.jsxs("p",{className:"text-sky-600/80 text-sm",children:[" ",t.displayName||((i=t.email)==null?void 0:i.split("@")[0])," "]})]}),!t&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Oe,{to:"/restaurants",emoji:"",icon:r.jsx(Bt,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Oe,{to:"/customer-login",emoji:"",icon:r.jsx(xx,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),r.jsx(Oe,{to:"/login",emoji:"",icon:r.jsx(px,{className:"w-6 h-6"}),label:" ",color:"from-amber-500 to-orange-500"}),r.jsx(Oe,{to:"/register",emoji:"",icon:r.jsx(sc,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"})]}),r.jsx("p",{className:"text-center text-sky-600/70 text-xs",children:"      "})]}),e==="customer"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Oe,{to:"/restaurants",emoji:"",icon:r.jsx(Bt,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Oe,{to:"/cart",emoji:"",icon:r.jsx(Ld,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Oe,{to:"/orders",emoji:"",icon:r.jsx(ts,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Oe,{to:"/profile",emoji:"",icon:r.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="owner"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Oe,{to:"/owner",emoji:"",icon:r.jsx(dx,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Oe,{to:"/owner/orders",emoji:"",icon:r.jsx(Rd,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Oe,{to:"/owner/menu",emoji:"",icon:r.jsx(Bt,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Oe,{to:"/owner/edit",emoji:"",icon:r.jsx(h1,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),r.jsx(Oe,{to:"/owner/courier-requests",emoji:"",icon:r.jsx(ns,{className:"w-6 h-6"}),label:"",color:"from-cyan-500 to-cyan-600"}),r.jsx(Oe,{to:"/profile",emoji:"",icon:r.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="courier"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Oe,{to:"/courier",emoji:"",icon:r.jsx(ns,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Oe,{to:"/courier/hiring",emoji:"",icon:r.jsx(Bt,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),r.jsx(Oe,{to:"/profile",emoji:"",icon:r.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="admin"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Oe,{to:"/admin",emoji:"",icon:r.jsx(Sc,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Oe,{to:"/admin/restaurants",emoji:"",icon:r.jsx(Bt,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Oe,{to:"/admin/orders",emoji:"",icon:r.jsx(ts,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Oe,{to:"/restaurants",emoji:"",icon:r.jsx(Ld,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),r.jsx(Oe,{to:"/profile",emoji:"",icon:r.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="developer"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Oe,{to:"/developer",emoji:"",icon:r.jsx(hx,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Oe,{to:"/restaurants",emoji:"",icon:r.jsx(Bt,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Oe,{to:"/admin/orders",emoji:"",icon:r.jsx(ts,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Oe,{to:"/profile",emoji:"",icon:r.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]})]})},yx=["",""," "," ","","","","","","","","","",""," ","","","","",""," ","","","","","","","","","","","","","",""," ","","","",""];function D3(t,e){const s=wu(e.lat-t.lat),i=wu(e.lng-t.lng),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(wu(t.lat))*Math.cos(wu(e.lat))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function wu(t){return t*(Math.PI/180)}const Cf=15,L3=()=>{var _,R,T,b,w;const{userLocation:t,role:e}=He(),[n,s]=I.useState([]),[i,a]=I.useState([]),[o,c]=I.useState(0),[u,d]=I.useState(!0),[h,m]=I.useState("");I.useEffect(()=>{(async()=>{const j=(await Be(ue(z,"restaurants"))).docs.map(O=>({id:O.id,...O.data()}));try{const O=ot(ue(z,"promotions"),mt("isActive","==",!0)),N=await Be(O),x=new Date,E=N.docs.map(k=>{var P,L;return{id:k.id,...k.data(),expiresAt:(L=(P=k.data().expiresAt)==null?void 0:P.toDate)==null?void 0:L.call(P)}}).filter(k=>!k.expiresAt||new Date(k.expiresAt)>x).map(k=>{const P=j.find(L=>L.id===k.ownerId);return{...k,restaurantName:P==null?void 0:P.name}});a(E)}catch(O){console.warn("Error loading promotions:",O)}let C=[];t?(C=j.map(O=>{if(O.geoLocation){const N=D3(t,O.geoLocation);return{...O,distance:N}}return{...O,distance:void 0}}),(e==="customer"||e==="courier")&&(C=C.filter(O=>!O.geoLocation||O.distance===void 0?!1:O.distance<=Cf)),C.sort((O,N)=>{const x=O.packageType==="premium"?1:0,E=N.packageType==="premium"?1:0;if(E!==x)return E-x;const k={gold:3,silver:2,bronze:1},P=k[O.sellerTier||"bronze"]||0,L=k[N.sellerTier||"bronze"]||0;if(L!==P)return L-P;const D=O.isVerified?1:0,ie=N.isVerified?1:0;return ie!==D?ie-D:(O.distance||999)-(N.distance||999)})):C=j.sort((O,N)=>{const x={gold:3,silver:2,bronze:1},E=x[O.sellerTier||"bronze"]||0,k=x[N.sellerTier||"bronze"]||0;if(k!==E)return k-E;const P=O.isVerified?1:0;return(N.isVerified?1:0)-P}),s(C),d(!1)})()},[t,e]);const p=I.useMemo(()=>{const y=new Set(n.map(j=>j.city).filter(Boolean));return yx.filter(j=>y.has(j))},[n]),v=I.useMemo(()=>h?n.filter(y=>y.city===h):n,[n,h]);return u?r.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."}):r.jsxs("div",{className:"py-10",children:[r.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-sky-600",children:"  "}),i.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[r.jsx(_i,{className:"w-5 h-5 text-purple-500"}),r.jsx("span",{className:"font-bold text-purple-600",children:" "})]}),r.jsxs("div",{className:"relative",children:[r.jsxs(_e,{to:`/menu?restaurant=${(_=i[o])==null?void 0:_.ownerId}`,onClick:async()=>{try{await ye(J(z,"promotions",i[o].id),{viewsCount:Ds(1)})}catch{}},className:"block bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden",children:[r.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(_i,{className:"w-3 h-3"}),""]}),((R=i[o])==null?void 0:R.mediaUrl)&&r.jsx("div",{className:"relative h-48",children:i[o].type==="video"?r.jsxs(r.Fragment,{children:[r.jsx("video",{src:i[o].mediaUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,autoPlay:!0,playsInline:!0}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:r.jsx(u1,{className:"w-6 h-6 text-white fill-white"})})})]}):r.jsx("img",{src:i[o].mediaUrl,alt:i[o].title,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:((T=i[o])==null?void 0:T.restaurantName)&&r.jsx("span",{className:"text-xs bg-white/20 text-white px-2 py-1 rounded-full",children:i[o].restaurantName})}),((b=i[o])==null?void 0:b.title)&&r.jsx("h3",{className:"text-lg font-bold text-white",children:i[o].title}),((w=i[o])==null?void 0:w.description)&&r.jsx("p",{className:"text-purple-100 text-sm mt-1 line-clamp-2",children:i[o].description})]})]}),i.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:y=>{y.preventDefault(),c(j=>j===0?i.length-1:j-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:r.jsx(ap,{className:"w-5 h-5 text-gray-800"})}),r.jsx("button",{onClick:y=>{y.preventDefault(),c(j=>j===i.length-1?0:j+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:r.jsx(UP,{className:"w-5 h-5 text-gray-800"})})]}),i.length>1&&r.jsx("div",{className:"flex justify-center gap-2 mt-3",children:i.map((y,j)=>r.jsx("button",{onClick:()=>c(j),className:`w-2 h-2 rounded-full transition ${j===o?"bg-purple-500 w-4":"bg-gray-300"}`},j))})]})]}),p.length>0&&r.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[r.jsx(a6,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:":"})]}),r.jsx("button",{onClick:()=>m(""),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${h?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-sky-500 text-white shadow-lg"}`,children:""}),p.map(y=>r.jsxs("button",{onClick:()=>m(y),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1 ${h===y?"bg-sky-500 text-white shadow-lg":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:[r.jsx(bn,{className:"w-4 h-4"}),y]},y)),h&&r.jsx("button",{onClick:()=>m(""),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:" ",children:r.jsx(Br,{className:"w-5 h-5"})})]}),v.length===0&&r.jsxs("div",{className:"text-center py-10",children:[r.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(pi,{className:"w-10 h-10 text-sky-500"})}),t?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:"     "}),r.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["   ",Cf,"  "]})]}):r.jsx(r.Fragment,{children:r.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:h?`     ${h}`:"    "})})]}),t&&v.length>0&&(e==="customer"||e==="courier")&&r.jsxs("div",{className:"mb-6 bg-sky-50 border border-sky-200 rounded-xl p-4 flex items-center gap-3",children:[r.jsx(Za,{className:"w-6 h-6 text-sky-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sky-700 font-semibold",children:"    "}),r.jsxs("p",{className:"text-sky-600 text-sm",children:["  : ",Cf," "]})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(y=>r.jsxs(_e,{to:`/menu?restaurant=${y.id}`,className:`bg-white border text-gray-800 rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center relative overflow-hidden ${y.sellerTier==="gold"?"border-amber-300 ring-2 ring-amber-200":"border-gray-200"}`,children:[r.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-1.5",children:[y.isVerified?r.jsxs("div",{className:"bg-green-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[r.jsx(Ce,{className:"w-3 h-3"})," "]}):r.jsx("div",{className:"bg-gray-400 text-white text-xs font-medium px-2.5 py-1 rounded-full flex items-center gap-1 shadow-sm",children:" "}),y.sellerTier==="gold"&&r.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[r.jsx(In,{className:"w-3 h-3"}),"Gold"]}),y.sellerTier==="silver"&&r.jsxs("div",{className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[r.jsx(op,{className:"w-3 h-3"}),"Silver"]}),y.packageType==="premium"&&r.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:" "})]}),y.distance!==void 0&&r.jsxs("div",{className:"absolute top-3 left-3 bg-sky-500 text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[r.jsx(Za,{className:"w-3 h-3"}),y.distance<1?`${Math.round(y.distance*1e3)} `:`${y.distance.toFixed(1)} `]}),y.logoUrl?r.jsx("img",{src:y.logoUrl,alt:y.name,className:`w-28 h-28 object-cover rounded-full mb-4 ${y.sellerTier==="gold"?"border-4 border-amber-400 ring-4 ring-amber-100":y.sellerTier==="silver"?"border-4 border-gray-300":"border-4 border-sky-100"}`}):r.jsx("div",{className:`w-28 h-28 flex items-center justify-center rounded-full text-3xl mb-4 ${y.sellerTier==="gold"?"bg-amber-100 border-4 border-amber-400":y.sellerTier==="silver"?"bg-gray-100 border-4 border-gray-300":"bg-sky-100 border-4 border-sky-200"}`,children:""}),r.jsx("h3",{className:"font-bold text-xl text-gray-800",children:y.name}),y.city&&r.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center justify-center gap-1",children:[r.jsx(bn,{className:"w-4 h-4"}),y.city]})]},y.id))})]})},Fv="broast_cart";function vx(){const[t,e]=I.useState(()=>{try{const c=localStorage.getItem(Fv);return c?JSON.parse(c):[]}catch{return[]}});I.useEffect(()=>{localStorage.setItem(Fv,JSON.stringify(t))},[t]);const n=(c,u=1)=>{e(d=>{const h=d.findIndex(m=>m.id===c.id);if(h>=0){const m=[...d];return m[h]={...m[h],qty:m[h].qty+u,ownerId:c.ownerId??m[h].ownerId},m}return[...d,{...c,qty:u}]})},s=c=>e(u=>u.filter(d=>d.id!==c)),i=(c,u)=>e(d=>d.map(h=>h.id===c?{...h,qty:u}:h)),a=()=>e([]),o=t.reduce((c,u)=>c+u.price*u.qty,0);return{items:t,add:n,remove:s,changeQty:i,clear:a,subtotal:o}}const x1=I.createContext(null),En=()=>{const t=I.useContext(x1);if(!t)throw new Error("useToast must be used within ToastProvider");return t},O3=({children:t})=>{const[e,n]=I.useState([]),s=I.useCallback(o=>{n(c=>c.filter(u=>u.id!==o))},[]),i=I.useCallback((o,c,u)=>{const d=Math.random().toString(36).slice(2),h={id:d,message:o,type:c,title:u==null?void 0:u.title,duration:(u==null?void 0:u.duration)??3e3};n(m=>[...m,h]),h.duration&&h.duration>0&&setTimeout(()=>s(d),h.duration)},[s]),a=I.useMemo(()=>({show:(o,c)=>i(o,(c==null?void 0:c.type)??"info",c),success:(o,c)=>i(o,"success",c),error:(o,c)=>i(o,"error",c),info:(o,c)=>i(o,"info",c),warning:(o,c)=>i(o,"warning",c)}),[i]);return r.jsxs(x1.Provider,{value:a,children:[t,r.jsx(F3,{items:e,onClose:s})]})},M3={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},V3={success:"",error:"",info:"",warning:""},F3=({items:t,onClose:e})=>(I.useEffect(()=>{},[]),r.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[r.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:t.map(n=>r.jsx("div",{className:`pointer-events-auto ${M3[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-xl leading-none",children:V3[n.type]}),r.jsxs("div",{className:"flex-1",children:[n.title&&r.jsx("div",{className:"font-bold",children:n.title}),r.jsx("div",{className:"text-sm",children:n.message})]}),r.jsx("button",{onClick:()=>e(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:""})]})},n.id))}),r.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),U3=()=>{const[t,e]=I.useState([]),[n,s]=I.useState(!0),[i,a]=I.useState(null),[o,c]=I.useState(null),[u,d]=I.useState(!0),{add:h,subtotal:m,items:p}=vx(),{user:v,role:_}=He(),R=En(),[T]=fb(),b=T.get("restaurant");I.useEffect(()=>{(async()=>{let C;if(b){C=ot(ue(z,"menuItems"),mt("available","==",!0),mt("ownerId","==",b));const E=await nt(J(z,"restaurants",b));E.exists()&&a(E.data().name);try{const k=ot(ue(z,"promotions"),mt("ownerId","==",b),mt("isActive","==",!0)),P=await Be(k);if(!P.empty){const L=P.docs.map(V=>{var $,B;return{id:V.id,...V.data(),expiresAt:(B=($=V.data().expiresAt)==null?void 0:$.toDate)==null?void 0:B.call($)}}),D=new Date,ie=L.filter(V=>!V.expiresAt||new Date(V.expiresAt)>D);if(ie.length>0){const V=ie[0];c(V),await ye(J(z,"promotions",V.id),{viewsCount:Ds(1)})}}}catch(k){console.warn("Error loading promotion:",k)}}else C=ot(ue(z,"menuItems"),mt("available","==",!0));const N=(await Be(C)).docs.map(E=>({id:E.id,...E.data()})),x=await Promise.all(N.map(async E=>{if(!E.ownerId)return E;const k=await nt(J(z,"restaurants",E.ownerId));return k.exists()?{...E,restaurant:k.data()}:E}));e(x),s(!1)})()},[b]);const w=1.75,y=C=>{var N;if(!C.ownerId){R.warning("    ",{title:""});return}const O=(N=p[0])==null?void 0:N.ownerId;if(O&&O!==C.ownerId){R.warning("           ",{title:""});return}h({id:C.id,name:C.name,price:C.price+w,ownerId:C.ownerId}),R.success("    ")};if(n)return r.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."});const j=v&&(_==="customer"||_==="admin"||_==="developer"||!_);return r.jsxs("div",{className:"py-10",children:[r.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:i?`  ${i}`:"  "}),b&&r.jsx("div",{className:"text-center mb-6",children:r.jsx(_e,{to:"/restaurants",className:"text-sky-400 hover:text-sky-300 underline",children:"   "})}),o&&u&&r.jsxs("div",{className:"mb-8 bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden relative",children:[r.jsx("button",{onClick:()=>d(!1),className:"absolute top-3 left-3 z-10 p-2 bg-black/40 hover:bg-black/60 rounded-full text-white transition",children:r.jsx(Br,{className:"w-4 h-4"})}),r.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(_i,{className:"w-3 h-3"}),""]}),r.jsxs("div",{className:"relative",children:[o.mediaUrl&&r.jsx("div",{className:"relative",children:o.type==="video"?r.jsxs("div",{className:"relative",children:[r.jsx("video",{src:o.mediaUrl,controls:!0,className:"w-full h-56 object-cover",poster:""}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:r.jsx(u1,{className:"w-8 h-8 text-white fill-white"})})})]}):r.jsx("img",{src:o.mediaUrl,alt:o.title,className:"w-full h-56 object-cover"})}),r.jsxs("div",{className:"p-5",children:[o.title&&r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:o.title}),o.description&&r.jsx("p",{className:"text-purple-100 text-sm leading-relaxed",children:o.description})]})]})]}),t.length===0&&r.jsx("div",{className:"text-center text-gray-400",children:"    "}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(C=>r.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[C.restaurant&&r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[C.restaurant.logoUrl?r.jsx("img",{src:C.restaurant.logoUrl,alt:C.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):r.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:""}),r.jsx("span",{className:"font-semibold",children:C.restaurant.name})]}),r.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:C.imageUrl?r.jsx("img",{src:C.imageUrl,alt:C.name,className:"w-full h-full object-cover rounded-xl"}):r.jsx("span",{className:"text-gray-400",children:" "})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg",children:C.name}),C.desc&&r.jsx("p",{className:"text-sm text-gray-300 mt-1",children:C.desc})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[r.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[(C.price+w).toFixed(2)," ."]}),j&&r.jsx("button",{onClick:()=>y(C),disabled:!C.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${C.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"  "})]})]},C.id))}),m>0&&j&&r.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-40",children:r.jsxs(_e,{to:"/checkout",className:"block w-full sm:w-auto text-center px-6 py-4 rounded-2xl bg-sky-600 text-white shadow-xl font-bold hover:bg-sky-700 transition text-base sm:text-lg",children:["    ",m.toFixed(2)," ."]})})]})},$3=()=>{const{items:t,subtotal:e,remove:n,clear:s,changeQty:i}=vx();return t.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:r.jsx(nc,{className:"w-12 h-12 text-gray-400"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-2",children:" "}),r.jsx("p",{className:"text-gray-500 mb-6",children:"   !"}),r.jsxs(_e,{to:"/restaurants",className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-sky-600 transition",children:[r.jsx(jP,{className:"w-5 h-5"})," "]})]}):r.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[r.jsx(nc,{className:"w-6 h-6 text-primary"})," ",r.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:t.length})]})}),r.jsx("div",{className:"space-y-3",children:t.map(a=>r.jsxs("div",{className:"flex items-center gap-3 bg-white text-gray-900 p-3 sm:p-4 rounded-xl shadow-sm border border-gray-100",children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-3xl",children:""})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:a.name}),r.jsxs("p",{className:"text-primary font-bold text-sm",children:[a.price.toFixed(2)," ."]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("button",{onClick:()=>a.qty>1?i(a.id,a.qty-1):n(a.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:r.jsx(S6,{className:"w-4 h-4"})}),r.jsx("span",{className:"font-bold text-lg w-8 text-center",children:a.qty}),r.jsx("button",{onClick:()=>i(a.id,a.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:r.jsx(Ic,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(a.price*a.qty).toFixed(2)," ."]}),r.jsx("button",{onClick:()=>n(a.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:r.jsx(an,{className:"w-4 h-4"})})]})]},a.id))}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:" "}),r.jsxs("span",{className:"font-bold",children:[e.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:" "}),r.jsx("span",{className:"font-bold",children:"7.00 ."})]}),r.jsx("div",{className:"h-px bg-gray-200"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-bold text-lg",children:""}),r.jsxs("span",{className:"font-bold text-xl text-primary",children:[(e+7).toFixed(2)," ."]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[r.jsxs("button",{onClick:s,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:[r.jsx(an,{className:"w-5 h-5"})," "]}),r.jsx(_e,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition",children:"  "})]})]})},B3=()=>{const[t,e]=I.useState(""),[n,s]=I.useState(""),[i,a]=I.useState(!1),o=Yt(),c=$n(),u=async d=>{d.preventDefault(),a(!0);try{const m=(await DS(Ln,t,n)).user.uid,p=await nt(J(z,"users",m));if(p.exists()){const v=p.data();console.log("  :",v),v.role==="owner"?o("/owner"):v.role==="admin"?o("/admin"):v.role==="developer"?o("/developer"):v.role==="courier"?o("/courier"):o("/")}else c.warning("   Auth       Firestore")}catch(h){c.error(h.message,{title:"   "})}finally{a(!1)}};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[r.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[r.jsxs("div",{className:"flex flex-col items-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:r.jsx("span",{className:"text-4xl",children:"  "})}),r.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),r.jsx("p",{className:"text-sky-500 mt-1",children:" "})]}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(gx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"email",placeholder:"",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:t,onChange:d=>e(d.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(mx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"password",placeholder:" ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:d=>s(d.target.value)})]}),r.jsx("button",{disabled:i,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50`,children:i?r.jsx(r.Fragment,{children:" ..."}):r.jsxs(r.Fragment,{children:[r.jsx(px,{className:"w-5 h-5"}),""]})})]}),r.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["  "," ",r.jsx(_e,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"  "})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[r.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"    "}),r.jsx(_e,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"   "})]})]})]})},z3=()=>{const[t,e]=I.useState(""),[n,s]=I.useState(""),[i,a]=I.useState(""),[o,c]=I.useState(""),[u,d]=I.useState(""),[h,m]=I.useState(""),[p,v]=I.useState(!1),[_,R]=I.useState(!1),T=Yt(),b=h==="owner"||h==="courier",w=C=>{m(C),v(!1)},y=async C=>{if(C.preventDefault(),!h)return alert("  ");if(h==="owner"&&!o)return alert("  ");if(b&&!p)return alert("    ");R(!0);try{const O=await yl(Ln,t,n);await fn(J(z,"users",O.user.uid),{name:i,email:t,role:h,restaurantName:h==="owner"?o:null}),h==="owner"&&await fn(J(z,"restaurants",O.user.uid),{name:o||i||" ",ownerId:O.user.uid,email:t,phone:"",city:u||"",location:"",logoUrl:""},{merge:!0}),T("/")}catch(O){alert(O.message)}finally{R(!1)}},j=[{value:"customer",label:"",icon:w3,color:"sky"},{value:"courier",label:"",icon:ns,color:"emerald"},{value:"owner",label:" ",icon:dx,color:"orange"}];return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[r.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[r.jsxs("div",{className:"flex flex-col items-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:r.jsx(sc,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"  "})]}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(An,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",value:i,onChange:C=>a(C.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(gx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",type:"email",value:t,onChange:C=>e(C.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(mx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:" ",type:"password",value:n,onChange:C=>s(C.target.value)})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:j.map(C=>{const O=C.icon,N=h===C.value;return r.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${N?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[r.jsx("input",{type:"radio",name:"role",value:C.value,className:"hidden",onChange:()=>w(C.value)}),r.jsx(O,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm font-bold",children:C.label})]},C.value)})}),h==="owner"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx(Bt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:" ",value:o,onChange:C=>c(C.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(bn,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400 pointer-events-none"}),r.jsxs("select",{value:u,onChange:C=>d(C.target.value),className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all appearance-none cursor-pointer",children:[r.jsx("option",{value:"",children:" "}),yx.map(C=>r.jsx("option",{value:C,children:C},C))]})]}),r.jsxs("div",{onClick:()=>v(!p),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${p?"bg-green-50 border-green-400":"bg-orange-50 border-orange-200 hover:border-orange-300"}`,children:[p?r.jsx(Ov,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):r.jsx(Mv,{className:"w-6 h-6 text-orange-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm leading-relaxed",children:[r.jsxs("span",{className:p?"text-green-700":"text-orange-700",children:[" "," "]}),r.jsx(_e,{to:"/terms",target:"_blank",onClick:C=>C.stopPropagation(),className:"text-sky-600 hover:text-sky-800 font-bold underline",children:" "}),r.jsxs("span",{className:p?"text-green-700":"text-orange-700",children:[" ",""," "]}),r.jsx(_e,{to:"/privacy-policy",target:"_blank",onClick:C=>C.stopPropagation(),className:"text-sky-600 hover:text-sky-800 font-bold underline",children:" "}),r.jsxs("span",{className:p?"text-green-700":"text-orange-700",children:[" ","   "]})]})]})]}),h==="courier"&&r.jsxs("div",{onClick:()=>v(!p),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${p?"bg-green-50 border-green-400":"bg-emerald-50 border-emerald-200 hover:border-emerald-300"}`,children:[p?r.jsx(Ov,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):r.jsx(Mv,{className:"w-6 h-6 text-emerald-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm leading-relaxed",children:[r.jsxs("span",{className:p?"text-green-700":"text-emerald-700",children:[" "," "]}),r.jsx(_e,{to:"/courier-terms",target:"_blank",onClick:C=>C.stopPropagation(),className:"text-emerald-600 hover:text-emerald-800 font-bold underline",children:"  "}),r.jsxs("span",{className:p?"text-green-700":"text-emerald-700",children:[" ","    "]})]})]}),r.jsx("button",{disabled:_||b&&!p,className:`w-full flex items-center justify-center gap-3 text-white font-bold p-4 rounded-2xl shadow-xl transition-all ${b&&!p?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 shadow-sky-300/50 hover:scale-[1.02]"}`,children:_?" ...":r.jsxs(r.Fragment,{children:[r.jsx(sc,{className:"w-5 h-5"}),""]})}),b&&!p&&r.jsx("p",{className:`text-center text-sm p-3 rounded-xl ${h==="courier"?"text-emerald-600 bg-emerald-50":"text-orange-600 bg-orange-50"}`,children:"       "})]}),r.jsxs("p",{className:"mt-6 text-center text-sky-600",children:[" "," ",r.jsx(_e,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"  "})]})]})]})},Uv=t=>{let e=t.replace(/\D/g,"");return e.startsWith("0")&&(e=e.substring(1)),e.startsWith("966")||(e="966"+e),"+"+e},q3=()=>{const[t,e]=I.useState(""),[n,s]=I.useState(""),[i,a]=I.useState("phone"),[o,c]=I.useState(!1),[u,d]=I.useState(null),[h,m]=I.useState(0),p=I.useRef(null),v=I.useRef(null),_=Yt(),R=$n();I.useEffect(()=>(p.current&&!v.current&&(v.current=new Cy(Ln,p.current,{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired"),v.current=null}})),()=>{v.current&&(v.current.clear(),v.current=null)}),[]),I.useEffect(()=>{if(h>0){const y=setTimeout(()=>m(h-1),1e3);return()=>clearTimeout(y)}},[h]);const T=async()=>{if(!t||t.length<9){R.warning("   ");return}const y=Uv(t);console.log("Sending OTP to:",y),c(!0);try{!v.current&&p.current&&(v.current=new Cy(Ln,p.current,{size:"invisible"}));const j=await fC(Ln,y,v.current);d(j),a("otp"),m(60),R.success("     ")}catch(j){console.error("OTP Error:",j),v.current&&(v.current.clear(),v.current=null),j.code==="auth/invalid-phone-number"?R.error("   "):j.code==="auth/too-many-requests"?R.error("   "):j.code==="auth/quota-exceeded"?R.error("     "):R.error(j.message||"  ")}finally{c(!1)}},b=async()=>{if(!n||n.length!==6){R.warning("     6 ");return}if(!u){R.error("    "),a("phone");return}c(!0);try{const y=await u.confirm(n),j=y.user.uid,C=y.user.phoneNumber,O=await nt(J(z,"users",j));O.exists()?R.success(" ! "):(await fn(J(z,"users",j),{phone:C,role:"customer",name:"",createdAt:ae()}),R.success("   ! "));const N=O.exists()?O.data():{role:"customer"};N.role==="owner"?_("/owner"):N.role==="admin"?_("/admin"):N.role==="developer"?_("/developer"):N.role==="courier"?_("/courier"):_("/")}catch(y){console.error("Verify Error:",y),y.code==="auth/invalid-verification-code"?R.error("   "):y.code==="auth/code-expired"?(R.error("    "),a("phone")):R.error(y.message||" ")}finally{c(!1)}},w=()=>{h>0||(a("phone"),s(""),d(null))};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[r.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),r.jsx("div",{ref:p,id:"recaptcha-container"}),r.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[r.jsxs("div",{className:"flex flex-col items-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:r.jsx("span",{className:"text-4xl",children:""})}),r.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),r.jsx("p",{className:"text-sky-500 mt-1",children:i==="phone"?" ":"  "})]}),i==="phone"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(xx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:t,onChange:y=>e(y.target.value.replace(/\D/g,"")),maxLength:10})]}),r.jsx("p",{className:"text-sm text-gray-500 text-center",children:"     SMS"}),r.jsx("button",{onClick:T,disabled:o||t.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Tc,{className:"w-5 h-5"}),"  "]})})]}),i==="otp"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("p",{className:"text-gray-600",children:"   "}),r.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:Uv(t)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(f6,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:y=>s(y.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),r.jsx("button",{onClick:b,disabled:o||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(px,{className:"w-5 h-5"})," "]})}),r.jsx("div",{className:"text-center",children:h>0?r.jsxs("p",{className:"text-gray-500 text-sm",children:["   ",r.jsx("span",{className:"font-bold text-sky-600",children:h})," "]}):r.jsx("button",{onClick:w,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"    "})}),r.jsx("button",{onClick:()=>{a("phone"),s("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"   "})]}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[r.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"   "}),r.jsx(_e,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"   "})]})]})]})};function H3(){return r.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"  -   "}),r.jsxs("p",{className:"mb-4",children:["   ",r.jsx("strong",{children:" "}),"          ."]}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1.  "}),r.jsx("p",{className:"mb-4",children:"                   .            ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2.  "}),r.jsx("p",{className:"mb-4",children:"               ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3.  "}),r.jsx("p",{className:"mb-4",children:"              .                 ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4.  "}),r.jsx("p",{className:"mb-4",children:"       (    )         ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5.  "}),r.jsxs("p",{className:"mb-4",children:["              .         :",r.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6.   "}),r.jsx("p",{className:"mb-4",children:"                  ."}),r.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["      ",new Date().toLocaleDateString("ar-SA"),"."]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx(_e,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"   "})})]})})}function W3(){return r.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-4 py-10 leading-relaxed",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:"  -   "}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"1. "}),r.jsx("p",{children:"                ."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"2. "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"      ."}),r.jsx("li",{children:"        ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"3.     "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"     ."}),r.jsxs("li",{children:["        "," ",r.jsx("strong",{className:"text-sky-600",children:"1.75 "}),"   ."]}),r.jsxs("li",{children:["     1   2   "," ",r.jsx("strong",{className:"text-sky-600",children:"0.25 "})," ."]}),r.jsx("li",{children:"          ."}),r.jsx("li",{children:"              ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"4.  "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"           ."}),r.jsxs("li",{children:["     :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:"      "})]})]}),r.jsx("li",{children:"               ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"5.   "}),r.jsx("p",{className:"mb-3",children:"     :"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"  "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"    "})]}),r.jsx("p",{className:"mt-3",children:"         ."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"6.  "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"       ."}),r.jsxs("li",{children:["     :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"     "})]})]}),r.jsx("li",{children:"           ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"7.   ()"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"         ."}),r.jsx("li",{children:"              ."}),r.jsx("li",{children:"            ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"8.   "}),r.jsx("p",{className:"mb-3",children:"     :"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[r.jsx("li",{children:"   "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"     "})]}),r.jsx("p",{className:"mt-3",children:"   :"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4 mt-2",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"    "})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"9. "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"          ."}),r.jsx("li",{children:"    ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"10. "}),r.jsx("p",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 text-gray-800",children:"           ."})]}),r.jsxs("div",{className:"border-t-2 border-gray-200 pt-6 mt-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:" "}),r.jsxs("ul",{className:"list-disc list-inside space-y-3 text-gray-700",children:[r.jsx("li",{children:"      ."}),r.jsxs("li",{children:["    :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"  "}),r.jsx("li",{children:"  "})]})]}),r.jsx("li",{children:"                  ."}),r.jsx("li",{children:"            ."})]})]}),r.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 mt-8 text-center",children:r.jsx("p",{className:"text-green-800 font-medium",children:"         "})}),r.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["      ",new Date().toLocaleDateString("ar-SA")]}),r.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx(_e,{to:"/register",className:"text-white bg-sky-500 hover:bg-sky-600 px-6 py-3 rounded-lg inline-block transition-colors text-center font-bold",children:"  -  "}),r.jsx(_e,{to:"/",className:"text-sky-600 bg-sky-100 hover:bg-sky-200 px-6 py-3 rounded-lg inline-block transition-colors text-center",children:"   "})]})]})})}function K3(){return r.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-4 py-10 leading-relaxed",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-emerald-600 mb-6 text-center",children:"  -   "}),r.jsx("p",{className:"text-center text-gray-600 mb-8",children:"  "}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"1. "}),r.jsx("p",{children:"                ."})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"2.  "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsxs("li",{children:["        "," ",r.jsx("strong",{className:"text-emerald-600",children:"    "}),"."]}),r.jsxs("li",{children:["   :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:" "})]})]}),r.jsxs("li",{children:["  "," ",r.jsx("strong",{className:"text-emerald-600",children:""}),"    ."]})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"3. "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"     ."}),r.jsx("li",{children:"        ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"4.   "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"             ."}),r.jsxs("li",{children:[" :"," ",r.jsx("strong",{className:"text-emerald-600",children:"2  3 "}),"   ",r.jsx("br",{}),r.jsx("span",{className:"text-sm text-gray-500 mr-4",children:"(         )"})]}),r.jsx("li",{children:"       ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"5.  "}),r.jsx("p",{className:"mb-3",children:"    :"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[r.jsx("li",{children:"   "}),r.jsx("li",{children:"  "}),r.jsx("li",{children:"    "}),r.jsx("li",{children:"   "}),r.jsx("li",{children:"     "})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"6.   "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"      ."}),r.jsxs("li",{children:["     :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"  "}),r.jsx("li",{children:"     "}),r.jsx("li",{children:"    "})]})]}),r.jsx("li",{children:"          ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"7.  "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"       ."}),r.jsx("li",{children:"       ."}),r.jsx("li",{children:"            ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"8.  "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsxs("li",{children:["        :",r.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:" "}),r.jsx("li",{children:"  "})]})]}),r.jsx("li",{children:"     ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"9. "}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"          ."}),r.jsx("li",{children:"    ."})]})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-emerald-500 pr-3",children:"10. "}),r.jsx("p",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4 text-gray-800",children:"               ."})]}),r.jsx("div",{className:"bg-emerald-50 border border-emerald-300 rounded-lg p-4 mt-8 text-center",children:r.jsx("p",{className:"text-emerald-800 font-medium",children:"         "})}),r.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["     "," ",new Date().toLocaleDateString("ar-SA")]}),r.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx(_e,{to:"/register",className:"text-white bg-emerald-500 hover:bg-emerald-600 px-6 py-3 rounded-lg inline-block transition-colors text-center font-bold",children:"  -  "}),r.jsx(_e,{to:"/",className:"text-emerald-600 bg-emerald-100 hover:bg-emerald-200 px-6 py-3 rounded-lg inline-block transition-colors text-center",children:"   "})]})]})})}function G3(){return r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"   "}),r.jsx("p",{className:"text-gray-600 mb-6",children:"          ."}),r.jsx(_e,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"   "})]})}const Q3="modulepreload",X3=function(t){return"/"+t},$v={},Af=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=X3(u),u in $v)return;$v[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Q3,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((p,v)=>{m.addEventListener("load",p),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},De=({allow:t,children:e})=>{const{role:n,loading:s}=He();return s?r.jsx("div",{className:"p-8 text-center",children:" ..."}):!n||!t.includes(n)?r.jsx(og,{to:"/",replace:!0}):r.jsx(r.Fragment,{children:e})},y1=({isOpen:t,onClose:e,onConfirm:n,initialLocation:s})=>{const[i,a]=I.useState(s||null),[o,c]=I.useState(""),[u,d]=I.useState(!1),[h,m]=I.useState(!1),[p,v]=I.useState(null),[_,R]=I.useState(!1),[T,b]=I.useState(""),[w,y]=I.useState([]),[j,C]=I.useState(!1),[O,N]=I.useState(!1),[x,E]=I.useState("map"),k={lat:24.7136,lng:46.6753},P=I.useCallback(async $=>{if(!$.trim()||$.length<2){y([]),N(!1);return}C(!0);try{const B=$.includes("")?$:`${$}, `,X=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(B)}&limit=5&accept-language=ar`,{headers:{Accept:"application/json"}})).json();y(X),N(X.length>0)}catch(B){console.error("  :",B),y([])}finally{C(!1)}},[]),L=I.useCallback($=>{const B={lat:parseFloat($.lat),lng:parseFloat($.lon)};a(B),b(""),y([]),N(!1),window.leafletMap&&(window.leafletMap.setView([B.lat,B.lng],16,{animate:!0,duration:.5}),window.leafletMarker&&window.leafletMarker.setLatLng([B.lat,B.lng]));const F=$.display_name.split(",").slice(0,3).join("");c(F)},[]),D=I.useCallback(()=>{if(!navigator.geolocation){v("    ");return}m(!0),v(null),navigator.geolocation.getCurrentPosition($=>{const B={lat:$.coords.latitude,lng:$.coords.longitude};a(B),m(!1),window.leafletMap&&(window.leafletMap.setView([B.lat,B.lng],17),window.leafletMarker&&window.leafletMarker.setLatLng([B.lat,B.lng]))},$=>{m(!1),$.code===1?v("   .     "):$.code===2?v("  .    GPS"):v("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);I.useEffect(()=>{if(t){if(!document.getElementById("leaflet-css")){const $=document.createElement("link");$.id="leaflet-css",$.rel="stylesheet",$.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild($)}if(window.L)R(!0);else{const $=document.createElement("script");$.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",$.onload=()=>R(!0),document.body.appendChild($)}}},[t]),I.useEffect(()=>{if(!t||!_||!window.L)return;const $=window.L;if(!document.getElementById("location-map"))return;window.leafletMap&&window.leafletMap.remove();const F=i||k,X=$.map("location-map",{zoomControl:!1,attributionControl:!1}).setView([F.lat,F.lng],i?17:12);$.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(X);const se=$.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),ve=$.marker([F.lat,F.lng],{icon:se,draggable:!0}).addTo(X);return ve.on("dragend",()=>{const pe=ve.getLatLng();a({lat:pe.lat,lng:pe.lng})}),X.on("click",pe=>{const{lat:Le,lng:Pt}=pe.latlng;ve.setLatLng([Le,Pt]),a({lat:Le,lng:Pt})}),window.leafletMap=X,window.leafletMarker=ve,i&&a(i),()=>{window.leafletMap&&(window.leafletMap.remove(),window.leafletMap=null,window.leafletMarker=null)}},[t,_]);const ie=()=>{i&&window.leafletMap&&window.leafletMap.setView([i.lat,i.lng],17,{animate:!0,duration:.5})},V=()=>{if(x==="manual"){if(!o.trim()){v("  ");return}n({lat:24.7136,lng:46.6753},o);return}if(!i){v("  ");return}if(!o.trim()){v("  ");return}n(i,o)};return t?r.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),r.jsxs("div",{className:"relative w-full h-full sm:w-[95%] sm:h-[90%] sm:max-w-2xl sm:rounded-3xl overflow-hidden bg-white shadow-2xl flex flex-col",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(bn,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-lg",children:"  "}),r.jsx("p",{className:"text-sm text-white/80",children:x==="map"?"   ":"  "})]})]}),r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition",children:r.jsx(Br,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsxs("button",{onClick:()=>E("map"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${x==="map"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[r.jsx(b6,{className:"w-4 h-4"}),""]}),r.jsxs("button",{onClick:()=>E("manual"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${x==="manual"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[r.jsx(Dd,{className:"w-4 h-4"})," "]})]}),x==="map"&&r.jsxs("div",{className:"relative",children:[r.jsx(F6,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:T,onChange:$=>{b($.target.value),P($.target.value)},onFocus:()=>w.length>0&&N(!0),placeholder:"     ...",className:"w-full bg-white/95 text-gray-800 rounded-xl p-3 pr-10 pl-10 focus:outline-none focus:ring-2 focus:ring-white/50 transition placeholder:text-gray-400"}),j&&r.jsx(wi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-500 animate-spin"}),O&&w.length>0&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl overflow-hidden z-[1001] max-h-60 overflow-y-auto",children:w.map(($,B)=>r.jsxs("button",{onClick:()=>L($),className:"w-full p-3 text-right hover:bg-sky-50 border-b border-gray-100 last:border-0 transition flex items-start gap-3",children:[r.jsx(bn,{className:"w-5 h-5 text-sky-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-gray-700 text-sm leading-relaxed",children:$.display_name})]},B))})]})]}),x==="map"&&r.jsxs("div",{className:"flex-1 relative",children:[!_&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx(wi,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-sky-600 font-medium",children:"  ..."})]})}),r.jsx("div",{id:"location-map",className:"w-full h-full"}),r.jsxs("div",{className:"absolute left-4 top-4 flex flex-col gap-2 z-[1000]",children:[r.jsx("button",{onClick:D,disabled:h,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition disabled:opacity-50",title:" ",children:h?r.jsx(wi,{className:"w-5 h-5 text-sky-500 animate-spin"}):r.jsx(Za,{className:"w-5 h-5 text-sky-500"})}),i&&r.jsx("button",{onClick:ie,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition",title:"",children:r.jsx(a3,{className:"w-5 h-5 text-gray-600"})})]}),i&&r.jsxs("div",{className:"absolute right-4 top-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 z-[1000] max-w-[200px]",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(On,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"  "})]}),r.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[i.lat.toFixed(6),", ",i.lng.toFixed(6)]})]})]}),x==="manual"&&r.jsx("div",{className:"flex-1 p-6 overflow-y-auto bg-gray-50",children:r.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Dd,{className:"w-10 h-10 text-sky-500"})}),r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"  "}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"     "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),r.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-xl p-3 bg-white focus:border-sky-400 focus:outline-none",onChange:$=>c(B=>{const F=B.split("").slice(1);return $.target.value+(F.length?""+F.join(""):"")}),children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",placeholder:":  ",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:$=>c(B=>(B.split("")[0]||"")+($.target.value?" "+$.target.value:""))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",placeholder:":   ",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:$=>c(B=>B.split("").slice(0,2).join("")+($.target.value?" "+$.target.value:""))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),r.jsx("textarea",{placeholder:"    ...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none resize-none",onChange:$=>c(B=>B.split("").slice(0,3).join("")+($.target.value?" "+$.target.value:""))})]}),o&&r.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[r.jsx(On,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:":"})]}),r.jsx("p",{className:"text-gray-700",children:o})]})]})}),r.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[p&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm flex items-center gap-2",children:[r.jsx(Br,{className:"w-4 h-4 flex-shrink-0"}),p]}),x==="map"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx(Y6,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:o,onChange:$=>c($.target.value),placeholder:"  (:       ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 pr-10 focus:border-sky-400 focus:outline-none transition text-gray-800"})]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"      "})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:e,className:"flex-1 py-3 px-4 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition",children:""}),r.jsxs("button",{onClick:V,disabled:x==="map"&&!i,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:[r.jsx(On,{className:"w-5 h-5"})," "]})]})]})]}),r.jsx("style",{children:`
        .custom-marker {
          background: transparent !important;
          border: none !important;
        }
        .leaflet-container {
          font-family: inherit;
        }
        .leaflet-control-zoom {
          display: none;
        }
        #location-map {
          background: #f0f9ff;
        }
      `})]}):null},Rf=1,Xo=.75,Pf=!1,Y3=()=>{const{items:t,subtotal:e,clear:n}=vx(),{user:s}=He(),i=Yt(),a=$n(),o=En(),[c,u]=I.useState(""),[d,h]=I.useState(!1),[m,p]=I.useState(null),[v,_]=I.useState(null),[R,T]=I.useState(!1),[b,w]=I.useState("pickup"),y=b==="delivery"?7:0;t.reduce((N,x)=>N+x.qty,0);const j=e+y;I.useEffect(()=>{(async()=>{var P,L;if(t.length===0)return;let x=(P=t[0])==null?void 0:P.ownerId;if(!x&&((L=t[0])!=null&&L.id))try{const D=await nt(J(z,"menuItems",t[0].id)),ie=D.exists()?D.data():null;x=(ie==null?void 0:ie.ownerId)||null}catch(D){console.error("    :",D)}if(!x){p(null);return}const E=await nt(J(z,"restaurants",x)),k=E.exists()?E.data():null;p({id:x,name:(k==null?void 0:k.name)||"",referredBy:k==null?void 0:k.referredBy,referrerType:k==null?void 0:k.referrerType})})()},[t]);const C=(N,x)=>{_(N),u(x),T(!1),o.success("   ! ")},O=async()=>{var $;if(!s)return;if(t.length===0){a.warning(" ");return}let N=m==null?void 0:m.id;if(!N&&(($=t[0])!=null&&$.id)){const B=await nt(J(z,"menuItems",t[0].id)),F=B.exists()?B.data():null;N=(F==null?void 0:F.ownerId)||null}if(!N){a.error("   .    .");return}h(!0);const x=(m==null?void 0:m.referrerType)==="admin"&&(m==null?void 0:m.referredBy),E=t.reduce((B,F)=>B+F.qty,0),k=Rf+Xo,L=e-k*E,D=Rf*E,ie=x?Xo*E:0,V=D+(x?0:Xo*E);await es(ue(z,"orders"),{customerId:s.uid,restaurantId:N,restaurantName:(m==null?void 0:m.name)||"",items:t.map(B=>({id:B.id,name:B.name,price:B.price,qty:B.qty,ownerId:B.ownerId??N})),subtotal:e,deliveryFee:y,total:j,status:"pending",deliveryType:b,address:b==="pickup"?"  ":c,location:b==="pickup"?null:v,createdAt:ae(),updatedAt:ae(),paymentMethod:"cod",restaurantEarnings:L,platformFee:D,platformFeePerItem:Rf,adminCommission:ie,adminCommissionPerItem:Xo,appEarnings:V,totalItemsCount:E,referredBy:(m==null?void 0:m.referredBy)||null});try{const B=J(z,"wallets",N);if((await nt(B)).exists())await ye(B,{balance:Ds(L),totalEarnings:Ds(L),updatedAt:ae()});else{const{setDoc:X}=await Af(async()=>{const{setDoc:se}=await Promise.resolve().then(()=>Nf);return{setDoc:se}},void 0);await X(B,{balance:L,totalEarnings:L,totalWithdrawn:0,transactions:[],updatedAt:ae()})}console.log(`   ${L}    ${N}`)}catch(B){console.error("    :",B)}if(x&&(m!=null&&m.referredBy)&&ie>0)try{const B=J(z,"wallets",m.referredBy);if((await nt(B)).exists())await ye(B,{balance:Ds(ie),totalEarnings:Ds(ie),updatedAt:ae()});else{const{setDoc:X}=await Af(async()=>{const{setDoc:se}=await Promise.resolve().then(()=>Nf);return{setDoc:se}},void 0);await X(B,{balance:ie,totalEarnings:ie,totalWithdrawn:0,transactions:[],updatedAt:ae()})}console.log(`   ${ie}    ${m.referredBy} (${E}   ${Xo} .)`)}catch(B){console.error("    :",B)}try{const B=J(z,"wallets","app_earnings");if((await nt(B)).exists())await ye(B,{balance:Ds(V),totalEarnings:Ds(V),updatedAt:ae()});else{const{setDoc:X}=await Af(async()=>{const{setDoc:se}=await Promise.resolve().then(()=>Nf);return{setDoc:se}},void 0);await X(B,{balance:V,totalEarnings:V,totalWithdrawn:0,transactions:[],updatedAt:ae()})}console.log(`   ${V}   `)}catch(B){console.error("    :",B)}n(),h(!1),i("/orders")};return r.jsx(De,{allow:["customer","admin"],children:r.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[r.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 text-white shadow-lg",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(nc,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold",children:" "}),r.jsx("p",{className:"text-sm text-white/80",children:(m==null?void 0:m.name)||" ..."})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[r.jsx(nc,{className:"w-5 h-5 text-sky-500"}),r.jsx("span",{className:"font-bold text-gray-800",children:" "}),r.jsxs("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full mr-auto",children:[t.length," "]})]}),r.jsx("div",{className:"p-4 space-y-2",children:t.map(N=>r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center text-sm",children:[N.qty,""]}),r.jsx("span",{className:"text-gray-800 font-medium",children:N.name})]}),r.jsxs("span",{className:"font-bold text-sky-600",children:[(N.price*N.qty).toFixed(2)," ."]})]},N.id))})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[r.jsx(ns,{className:"w-5 h-5 text-sky-500"}),r.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsxs("button",{onClick:()=>w("pickup"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${b==="pickup"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${b==="pickup"?"bg-green-500":"bg-gray-100"}`,children:r.jsx(Bt,{className:`w-6 h-6 ${b==="pickup"?"text-white":"text-gray-500"}`})}),r.jsxs("div",{className:"flex-1 text-right",children:[r.jsx("p",{className:`font-bold ${b==="pickup"?"text-green-700":"text-gray-800"}`,children:"  "}),r.jsx("p",{className:"text-sm text-gray-500",children:" -   "})]}),b==="pickup"&&r.jsx(On,{className:"w-6 h-6 text-green-500"})]}),r.jsxs("div",{className:"w-full p-4 rounded-xl border-2 border-gray-200 bg-gray-50 flex items-center gap-4 opacity-60 cursor-not-allowed",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-gray-200",children:r.jsx(ns,{className:"w-6 h-6 text-gray-400"})}),r.jsxs("div",{className:"flex-1 text-right",children:[r.jsx("p",{className:"font-bold text-gray-500",children:" "}),r.jsx("p",{className:"text-sm text-gray-400",children:" : 7 ."})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:[r.jsx(Hs,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-semibold",children:" "})]})]})]})]}),Pf,r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[r.jsx(JP,{className:"w-5 h-5 text-amber-500"}),r.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[r.jsx("span",{children:" "}),r.jsxs("span",{className:"font-semibold",children:[e.toFixed(2)," ."]})]}),b==="delivery"&&r.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ns,{className:"w-4 h-4"}),r.jsx("span",{children:" "})]}),r.jsxs("span",{className:"font-semibold",children:[y.toFixed(2)," ."]})]}),b==="pickup"&&r.jsxs("div",{className:"flex items-center justify-between text-green-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bt,{className:"w-4 h-4"}),r.jsx("span",{children:"  "})]}),r.jsx("span",{className:"font-semibold",children:""})]}),r.jsx("div",{className:"h-px bg-gray-200 my-2"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-bold text-lg text-gray-800",children:""}),r.jsxs("span",{className:"font-black text-xl text-sky-600",children:[j.toFixed(2)," ."]})]})]})]}),r.jsx("button",{disabled:d||b==="delivery"&&Pf,onClick:O,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-3",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"  ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(On,{className:"w-6 h-6"}),b==="pickup"?"  (  )":"  (  )"]})}),b==="delivery"&&Pf,r.jsx(y1,{isOpen:R,onClose:()=>T(!1),onConfirm:C,initialLocation:v})]})})},J3=()=>{const{user:t}=He(),e=Yt(),[n,s]=I.useState(null),[i,a]=I.useState([]),[o,c]=I.useState(null);I.useEffect(()=>{if(!t)return;s(null),c(null);const m=ot(ue(z,"orders"),mt("customerId","==",t.uid),Ns("createdAt","desc")),p=er(m,v=>{a(v.docs.map(_=>({id:_.id,..._.data()}))),s(null)},async v=>{console.error("TrackOrders onSnapshot error:",v),s("   Composite Index  customerId + createdAt.     .");const _=ot(ue(z,"orders"),mt("customerId","==",t.uid)),T=(await Be(_)).docs.map(y=>({id:y.id,...y.data()})),b=ot(ue(z,"orders"),Ns("createdAt","desc"),ex(5));let w=[];try{w=(await Be(b)).docs.map(j=>{var O,N,x,E;const C=j.data();return{id:j.id,customerId:C.customerId,restaurantId:C.restaurantId,createdAt:((E=(x=(N=(O=C.createdAt)==null?void 0:O.toDate)==null?void 0:N.call(O))==null?void 0:x.toISOString)==null?void 0:E.call(x))??null}})}catch{}c({uid:t.uid,fallbackCount:T.length,sample:w}),a(T)});return()=>p()},[t]);const u=m=>({pending:{text:" ",emoji:"",color:"bg-yellow-500",icon:ws},accepted:{text:" ",emoji:"",color:"bg-blue-500",icon:Ce},preparing:{text:" ",emoji:"",color:"bg-orange-500",icon:dx},ready:{text:" ",emoji:"",color:"bg-purple-500",icon:ts},out_for_delivery:{text:" ",emoji:"",color:"bg-sky-500",icon:ns},delivered:{text:" ",emoji:"",color:"bg-green-500",icon:Ce},cancelled:{text:"",emoji:"",color:"bg-red-500",icon:Hs}})[m]||{text:m,emoji:"",color:"bg-gray-500",icon:ts},d=m=>m.courierId&&m.status==="out_for_delivery",h=m=>{const p=["pending","accepted","preparing","ready"];return!m.courierId&&m.restaurantId&&p.includes(m.status)};return r.jsxs("div",{className:"space-y-3",children:[r.jsx("h1",{className:"text-xl font-bold",children:""}),n&&r.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[n,o&&r.jsxs("div",{className:"mt-1",children:[r.jsxs("div",{children:["UID: ",r.jsx("b",{children:o.uid})]}),r.jsxs("div",{children:["  : ",r.jsx("b",{children:o.fallbackCount})]}),Array.isArray(o.sample)&&o.sample.length>0&&r.jsxs("div",{className:"mt-1",children:[r.jsx("div",{className:"font-semibold",children:" ( 5):"}),o.sample.map(m=>r.jsxs("div",{className:"truncate",children:["#",m.id,"  customerId: ",String(m.customerId),"  restaurantId: ",String(m.restaurantId),"  createdAt: ",m.createdAt||""]},m.id))]})]})]}),i.map(m=>{var p,v,_,R,T,b,w;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:`${u(m.status).color} px-4 py-3 flex items-center justify-between`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-white",children:[r.jsx("span",{className:"text-xl",children:u(m.status).emoji}),r.jsx("span",{className:"font-bold",children:u(m.status).text})]}),r.jsxs("div",{className:"text-white/80 text-sm font-medium",children:["#",m.id.slice(-6)]})]}),r.jsxs("div",{className:"p-4",children:[m.restaurantName&&r.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold mb-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:String(m.restaurantName)})]}),r.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 rounded-xl p-3 mb-3",children:(p=m.items)==null?void 0:p.map(y=>`${y.name}${y.qty}`).join("  ")}),r.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:m.deliveryType==="pickup"?r.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-medium bg-green-50 rounded-xl p-3",children:[r.jsx(bn,{className:"w-4 h-4"}),r.jsx("span",{children:"  "})]}):r.jsxs("div",{className:"space-y-1 bg-gray-50 rounded-xl p-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" :"}),r.jsxs("span",{children:[((_=(v=m.subtotal)==null?void 0:v.toFixed)==null?void 0:_.call(v,2))||""," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" :"}),m.deliveryFee!==void 0&&m.deliveryFee>0?r.jsxs("span",{className:"font-medium",children:[(T=(R=m.deliveryFee)==null?void 0:R.toFixed)==null?void 0:T.call(R,2)," ."]}):r.jsx("span",{className:"text-amber-600",children:"  "})]})]})}),r.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[r.jsxs("div",{className:"font-bold text-lg text-primary",children:[": ",(w=(b=m.total)==null?void 0:b.toFixed)==null?void 0:w.call(b,2)," ."]}),d(m)&&r.jsxs("button",{onClick:()=>e(`/chat?orderId=${m.id}`),className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-primary to-accent 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200 animate-pulse`,children:[r.jsx(Ih,{className:"w-5 h-5"}),r.jsx("span",{children:"   "})]}),h(m)&&r.jsxs("button",{onClick:()=>e(`/chat?orderId=${m.id}`),className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200`,children:[r.jsx(Bt,{className:"w-5 h-5"}),r.jsx("span",{children:"   "})]})]})]})]},m.id)}),i.length===0&&!n&&r.jsx("div",{className:"text-gray-600",children:"    ."})]})},Z3=()=>{const{user:t,role:e}=He(),n=$n(),s=En(),[i,a]=I.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[o,c]=I.useState([]),[u,d]=I.useState(0),[h,m]=I.useState(!1),[p,v]=I.useState(null),[_,R]=I.useState(""),[T,b]=I.useState(!0),[w,y]=I.useState(!1);I.useEffect(()=>{if(!t)return;(async()=>{const P=await nt(J(z,"users",t.uid));if(P.exists()){const L=P.data();a({name:L.name||"",phone:L.phone||t.phoneNumber||"",city:L.city||"",address:L.address||"",restaurantName:L.restaurantName||""}),L.savedLocations&&Array.isArray(L.savedLocations)?(c(L.savedLocations),d(L.defaultLocationIndex||0)):L.savedLocation&&(c([{...L.savedLocation,label:""}]),d(0))}b(!1)})()},[t]);const j=async k=>{if(k.preventDefault(),!!t){y(!0);try{const P=o[u]||null;await ye(J(z,"users",t.uid),{name:i.name,phone:i.phone,city:i.city,address:i.address,savedLocation:P,savedLocations:o,defaultLocationIndex:u,...e==="owner"&&{restaurantName:i.restaurantName}}),n.success("   ! ")}catch{n.error("   ")}finally{y(!1)}}},C=(k,P)=>{const L={lat:k.lat,lng:k.lng,address:P,label:_||` ${o.length+1}`};c([...o,L]),R(""),m(!1),s.success("  !    ")},O=(k,P)=>{if(p===null)return;const L=[...o];L[p]={...L[p],lat:k.lat,lng:k.lng,address:P},c(L),v(null),m(!1),s.success("  !    ")},N=async k=>{if(!await n.confirm("    "))return;const L=o.filter((D,ie)=>ie!==k);c(L),u>=L.length?d(Math.max(0,L.length-1)):u>k&&d(u-1),s.info("  ")},x=k=>{d(k),s.success("   ")};if(T)return r.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[r.jsx(pn,{className:"w-6 h-6 animate-spin ml-2"}),"  ..."]});const E=()=>e==="owner"?"  ":e==="courier"?"  ":e==="admin"?"  ":" ";return r.jsxs("div",{className:"max-w-md mx-auto py-8 px-4",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center",children:r.jsx(An,{className:"w-6 h-6 text-sky-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-800",children:E()}),r.jsx("p",{className:"text-sm text-gray-500",children:(t==null?void 0:t.email)||(t==null?void 0:t.phoneNumber)})]})]}),r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(An,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:i.name,onChange:k=>a({...i,name:k.target.value})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(xx,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:i.phone,onChange:k=>a({...i,phone:k.target.value}),dir:"ltr"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(i1,{className:"w-4 h-4 inline ml-1"}),""]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:": ",value:i.city,onChange:k=>a({...i,city:k.target.value})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(bn,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"     ...",value:i.address,onChange:k=>a({...i,address:k.target.value})})]}),(e==="customer"||e==="admin")&&r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:[r.jsx(Za,{className:"w-4 h-4"}),"  "]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[o.length,"/5"]})]}),o.length>0&&r.jsx("div",{className:"space-y-3 mb-4",children:o.map((k,P)=>r.jsxs("div",{className:`rounded-xl p-3 border-2 transition ${P===u?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${P===u?"bg-green-500":"bg-gray-400"}`,children:r.jsx(bn,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("p",{className:"font-bold text-gray-800",children:k.label||` ${P+1}`}),P===u&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-500 text-white text-xs font-bold rounded-full",children:[r.jsx(f1,{className:"w-3 h-3"})," "]})]}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:k.address})]})]}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[P!==u&&r.jsxs("button",{type:"button",onClick:()=>x(P),className:"flex-1 py-2 px-3 rounded-lg border border-green-200 text-green-600 text-xs font-medium hover:bg-green-50 transition flex items-center justify-center gap-1",children:[r.jsx(On,{className:"w-3 h-3"}),"  "]}),r.jsx("button",{type:"button",onClick:()=>{v(P),m(!0)},className:"flex-1 py-2 px-3 rounded-lg border border-sky-200 text-sky-600 text-xs font-medium hover:bg-sky-50 transition",children:""}),r.jsx("button",{type:"button",onClick:()=>N(P),className:"py-2 px-3 rounded-lg border border-red-200 text-red-500 hover:bg-red-50 transition",children:r.jsx(an,{className:"w-4 h-4"})})]})]},P))}),o.length<5&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",value:_,onChange:k=>R(k.target.value),placeholder:"  (:  ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 text-sm focus:border-sky-400 focus:outline-none"}),r.jsxs("button",{type:"button",onClick:()=>{v(null),m(!0)},className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-100 to-sky-50 border-2 border-dashed border-sky-300 text-sky-600 font-semibold hover:border-sky-400 transition flex items-center justify-center gap-3",children:[r.jsx(Ic,{className:"w-5 h-5"}),r.jsx("span",{children:"  "})]})]}),o.length===0&&r.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"     "})]}),e==="owner"&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(Pd,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:i.restaurantName,onChange:k=>a({...i,restaurantName:k.target.value})})]}),r.jsx("button",{type:"submit",disabled:w,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:w?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(d1,{className:"w-5 h-5"})," "]})})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[r.jsx("p",{children:"      "}),(e==="customer"||e==="admin")&&r.jsx("p",{className:"mt-1",children:"    5  "})]})]}),r.jsx(y1,{isOpen:h,onClose:()=>{m(!1),v(null)},onConfirm:(k,P)=>{p!==null?O(k,P):C(k,P)},initialLocation:p!==null&&o[p]?{lat:o[p].lat,lng:o[p].lng}:null})]})},eD=()=>{const t=[{to:"/owner/packages",title:"  ",desc:"      .",icon:r.jsx(In,{className:"w-8 h-8 text-amber-500"}),color:"from-amber-50 via-yellow-50 to-orange-50",featured:!0},{to:"/owner/promotion",title:" ",desc:"   ()      -  !",icon:r.jsx(_i,{className:"w-8 h-8 text-purple-500"}),color:"from-purple-50 to-pink-50"},{to:"/owner/menu",title:" ",desc:"     .",icon:r.jsx(b3,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:" ",desc:"     .",icon:r.jsx(Rd,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"  ",desc:"     .",icon:r.jsx(h1,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>r.jsxs(_e,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col relative overflow-hidden ${e.featured?"ring-2 ring-amber-300 sm:col-span-2":""}`,children:[e.featured&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 py-1.5 text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-white text-sm font-bold",children:[r.jsx(Fn,{className:"w-4 h-4"}),r.jsx("span",{children:" "}),r.jsx(Fn,{className:"w-4 h-4"})]})}),r.jsx("div",{className:"h-8"})]}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,r.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),r.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},tD=({kind:t,message:e,onClose:n})=>{const s=t==="success"?"bg-green-600":t==="error"?"bg-rose-600":t==="warning"?"bg-amber-500":"bg-slate-800";return I.useEffect(()=>{const i=setTimeout(n,2500);return()=>clearTimeout(i)},[n]),r.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${s}`,children:e})},Bv=()=>({name:"",desc:"",price:0,available:!0,file:null});async function nD(t,e=900,n=.8){try{const s=await createImageBitmap(t),i=Math.min(1,e/s.width),a=Math.round(s.width*i),o=Math.round(s.height*i),c=document.createElement("canvas");c.width=a,c.height=o,c.getContext("2d").drawImage(s,0,0,a,o);const d=t.type.includes("png")?"image/png":"image/jpeg";return await new Promise(m=>c.toBlob(p=>m(p),d,n))}catch{return t}}const sD=()=>{const{user:t}=He(),e=$n(),[n,s]=I.useState([]),[i,a]=I.useState(!0),[o,c]=I.useState(Bv()),[u,d]=I.useState(!1),[h,m]=I.useState(null),p=(y,j)=>m({kind:y,message:j}),v=Th(mn),_=I.useRef(null),R=async()=>{if(!t)return;a(!0);const y=ot(ue(z,"menuItems"),mt("ownerId","==",t.uid)),j=await Be(y);s(j.docs.map(C=>({id:C.id,...C.data()}))),a(!1)};I.useEffect(()=>{R()},[t]);const T=async y=>{if(y.preventDefault(),!t){p("warning","    ");return}const j=Number(o.price||0);if(!o.name.trim()){p("warning","   ");return}if(!Number.isFinite(j)||j<=0){p("warning","   ");return}d(!0);const C="temp_"+Date.now(),O=o.file?URL.createObjectURL(o.file):void 0,N={_tempId:C,_optimistic:!0,_progress:o.file?1:100,name:o.name,desc:o.desc||"",price:j,imageUrl:O,available:o.available??!0,ownerId:t.uid};s(x=>[N,...x]);try{let x;if(o.file){const P=await nD(o.file),L=o.file.name.replace(/\s+/g,"_").slice(-60),D=`menuImages/${t.uid}_${Date.now()}_${L}`,ie=Ja(v,D),V=ux(ie,P,{contentType:o.file.type||"image/jpeg"});await new Promise(($,B)=>{V.on("state_changed",F=>{const X=Math.round(F.bytesTransferred/F.totalBytes*100);s(se=>se.map(ve=>ve._tempId===C?{...ve,_progress:X}:ve))},B,async()=>{const F=await Ya(V.snapshot.ref);x=`${F}${F.includes("?")?"&":"?"}v=${Date.now()}`,$()})})}const E={name:N.name,desc:N.desc,price:j,imageUrl:x||"",available:N.available,ownerId:t.uid,...N.categoryId?{categoryId:N.categoryId}:{}},k=await es(ue(z,"menuItems"),E);s(P=>P.map(L=>L._tempId===C?{...L,id:k.id,imageUrl:x||L.imageUrl,_optimistic:!1,_progress:100}:L)),p("success","    ")}catch(x){s(E=>E.filter(k=>k._tempId!==C)),p("error",`   : ${(x==null?void 0:x.message)||x}`)}finally{d(!1),c(Bv()),_.current&&(_.current.value=""),O&&URL.revokeObjectURL(O)}},b=async(y,j)=>{if(y){s(C=>C.map(O=>O.id===y?{...O,available:!j}:O));try{await ye(J(z,"menuItems",y),{available:!j}),p("success","  ")}catch{s(C=>C.map(O=>O.id===y?{...O,available:!!j}:O)),p("error","  .  .")}}},w=async y=>{if(!y||!await e.confirm("       ",{dangerous:!0,title:" "}))return;const C=n;s(O=>O.filter(N=>N.id!==y));try{await Yn(J(z,"menuItems",y)),p("success"," ")}catch{s(C),p("error","  .  .")}};return i?r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[r.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(y=>r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},y))})]}):r.jsxs(r.Fragment,{children:[h&&r.jsx(tD,{kind:h.kind,message:h.message,onClose:()=>m(null)}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("form",{onSubmit:T,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[r.jsx("h2",{className:"text-lg font-bold",children:" "}),r.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:o.name,onChange:y=>c({...o,name:y.target.value})}),r.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:o.desc,onChange:y=>c({...o,desc:y.target.value})}),r.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(o.price)?o.price:0,onChange:y=>c({...o,price:Number(y.target.value)})}),r.jsx("input",{ref:_,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:y=>{var j;return c({...o,file:((j=y.target.files)==null?void 0:j[0])||null})}}),r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:o.available,onChange:y=>c({...o,available:y.target.checked})}),""]}),r.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:u,children:u?" ":""})]}),r.jsxs("div",{className:"space-y-3",children:[n.map(y=>{var j,C;return r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:y.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:O=>{O.currentTarget.style.display="none"}}),y._optimistic&&r.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:r.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:r.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${y._progress||1}%`}})})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-bold",children:y.name}),y.desc&&r.jsx("div",{className:"text-sm text-gray-600",children:y.desc}),r.jsxs("div",{className:"font-semibold mt-1",children:[(C=(j=y.price)==null?void 0:j.toFixed)==null?void 0:C.call(j,2)," ."]}),y._optimistic&&r.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" "})]}),r.jsx("button",{onClick:()=>b(y.id,y.available),disabled:!!y._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:y.available?"":""}),r.jsx("button",{onClick:()=>w(y.id),disabled:!!y._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:""})]},y.id||y._tempId)}),n.length===0&&r.jsx("div",{className:"text-gray-600",children:"   ."})]})]})]})},zv=t=>({pending:"  ",accepted:"  ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "})[t]||t,rD=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},iD=()=>{const{user:t}=He(),e=Yt(),[n,s]=I.useState([]),[i,a]=I.useState(null),[o,c]=I.useState({}),u=I.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);I.useEffect(()=>{if(!u)return;a(null);const h=er(ue(z,"orders"),m=>{const v=m.docs.map(_=>({id:_.id,..._.data()})).filter(_=>{var b,w;const R=_.restaurantId===u,T=((w=(b=_==null?void 0:_.items)==null?void 0:b[0])==null?void 0:w.ownerId)===u;return R||T});v.sort((_,R)=>{var w,y,j,C;const T=((y=(w=_.createdAt)==null?void 0:w.toMillis)==null?void 0:y.call(w))??0;return(((C=(j=R.createdAt)==null?void 0:j.toMillis)==null?void 0:C.call(j))??0)-T}),s(v),a(null)},m=>{console.error("Firestore error:",m),a("    .")});return()=>h()},[u]);const d=async(h,m,p)=>{const v={status:m,updatedAt:ae()};if(m==="accepted"&&(p==null?void 0:p.deliveryType)==="delivery"){const _=o[h]||0;v.deliveryFee=_,v.total=(p.subtotal||0)+_}await ye(J(z,"orders",h),v)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"  "}),i&&r.jsx("div",{className:"text-red-500 text-sm mb-2",children:i}),n.map(h=>{var m,p,v,_,R;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[r.jsxs("div",{className:"font-bold text-lg",children:[" #",h.id.slice(-6),r.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(m=h.items)==null?void 0:m.map(T=>`${T.name}${T.qty}`).join("  ")})]}),r.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(v=(p=h.total)==null?void 0:p.toFixed)==null?void 0:v.call(p,2)," ."]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-semibold",children:":"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${rD(h.status)}`,children:zv(h.status||"pending")})]}),r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:":"})," ",h.address]}),h.location&&r.jsxs("div",{className:"mt-3",children:[r.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"  :"}),r.jsx("iframe",{title:`map-${h.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${h.location.lat},${h.location.lng}&hl=ar&z=15&output=embed`})]}),h.status==="pending"&&h.deliveryType==="delivery"&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[r.jsx("label",{className:"block text-sm font-bold text-amber-800 mb-2",children:"     :"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:": 10",value:o[h.id]||"",onChange:T=>c(b=>({...b,[h.id]:parseFloat(T.target.value)||0})),className:"flex-1 px-4 py-3 border-2 border-amber-300 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-lg font-bold text-center"}),r.jsx("span",{className:"text-amber-700 font-bold",children:"."})]}),r.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"     "})]}),h.deliveryFee!==void 0&&h.deliveryFee>0&&r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:" :"})," ",(R=(_=h.deliveryFee)==null?void 0:_.toFixed)==null?void 0:R.call(_,2)," ."]}),r.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:[!h.courierId&&["pending","accepted","preparing","ready"].includes(h.status)&&r.jsxs("button",{onClick:()=>e(`/chat?orderId=${h.id}`),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gradient-to-r from-orange-500 to-amber-500 text-white hover:shadow-lg transition flex items-center gap-2",children:[r.jsx(Ih,{className:"w-4 h-4"}),"  "]}),["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(T=>{const b=T==="accepted"&&h.status==="pending"&&h.deliveryType==="delivery",w=o[h.id]!==void 0&&o[h.id]>=0,y=b&&!w;return r.jsx("button",{onClick:()=>d(h.id,T,h),disabled:y,className:`px-4 py-2 rounded-xl text-sm font-semibold transition ${y?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:y?"   ":"",children:zv(T)},T)})]})]},h.id)}),n.length===0&&!i&&r.jsx("div",{className:"text-gray-400 text-center text-lg",children:"    ."})]})},aD=()=>{const{user:t}=He(),e=En(),[n,s]=I.useState({name:"",phone:"",city:"",location:"",logoUrl:"",allowPickup:!1,commercialLicenseUrl:"",licenseStatus:void 0,licenseNotes:""}),[i,a]=I.useState(null),[o,c]=I.useState(""),[u,d]=I.useState(null),[h,m]=I.useState(!0),[p,v]=I.useState(!1),_=I.useMemo(()=>!p&&!!t,[p,t]);I.useEffect(()=>{t&&(async()=>{try{const j=await nt(J(z,"restaurants",t.uid));if(j.exists()){const C=j.data();s({name:C.name??"",phone:C.phone??"",city:C.city??"",location:C.location??"",logoUrl:C.logoUrl??"",allowPickup:C.allowPickup??!1,commercialLicenseUrl:C.commercialLicenseUrl??"",licenseStatus:C.licenseStatus,licenseNotes:C.licenseNotes??""})}}catch{e.error("   ")}finally{m(!1)}})()},[t,e]),I.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]);const R=j=>{const{name:C,value:O}=j.target;s(N=>({...N,[C]:O}))},T=j=>{var O;const C=((O=j.target.files)==null?void 0:O[0])||null;if(a(C),C){const N=URL.createObjectURL(C);c(N)}else c("")},b=async()=>{if(!t||!i)return;if(!/^image\//.test(i.type)){e.warning("   ");return}const C=3*1024*1024;if(i.size>C){e.warning("        3MB");return}const O=i.name.replace(/\s+/g,"_"),N=`restaurants/${t.uid}/logo_${Date.now()}_${O}`,x=Ja(ip,N),E={contentType:i.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await rp(x,i,E);const k=await Ya(x);return`${k}${k.includes("?")?"&":"?"}v=${Date.now()}`},w=async(j,C)=>{if(!t||!j)return;if(!/^(image\/|application\/pdf)/.test(j.type)){e.warning("      PDF");return}const N=5*1024*1024;if(j.size>N){e.warning("        5MB");return}const x=j.name.replace(/\s+/g,"_"),E=`restaurants/${t.uid}/licenses/${C}_${Date.now()}_${x}`,k=Ja(ip,E),P={contentType:j.type,cacheControl:"public,max-age=31536000,immutable"};return await rp(k,j,P),await Ya(k)},y=async j=>{if(j.preventDefault(),!t){e.warning("    ");return}if(!n.name.trim()){e.warning("  ");return}v(!0);try{let C=n.logoUrl,O=n.commercialLicenseUrl,N=n.licenseStatus;if(i){e.info("    ");const x=await b();x&&(C=x)}if(u){e.info("     ");const x=await w(u,"commercial");x&&(O=x,N="pending")}await fn(J(z,"restaurants",t.uid),{...n,logoUrl:C,commercialLicenseUrl:O,licenseStatus:N},{merge:!0}),o&&URL.revokeObjectURL(o),c(""),a(null),d(null),e.success("    ",{title:" "})}catch(C){e.error(` : ${(C==null?void 0:C.message)||"  "}`)}finally{v(!1)}};return h?r.jsx("div",{className:"p-6 text-center",children:" "}):r.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[r.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"  "}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block font-semibold",children:" "}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:o||n.logoUrl?r.jsx("img",{src:o||n.logoUrl,className:"w-full h-full object-cover",onError:j=>j.currentTarget.style.display="none",alt:"logo"}):null}),r.jsx("input",{type:"file",accept:"image/*",onChange:T})]}),i&&r.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",r.jsx("span",{className:"font-semibold",children:i.name})]})]}),r.jsx("input",{name:"name",placeholder:" ",value:n.name,onChange:R,className:"w-full border p-3 rounded-xl"}),r.jsx("input",{name:"phone",placeholder:" ",value:n.phone,onChange:R,className:"w-full border p-3 rounded-xl"}),r.jsxs("div",{className:"relative",children:[r.jsx(bn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400 pointer-events-none"}),r.jsxs("select",{name:"city",value:n.city,onChange:j=>s(C=>({...C,city:j.target.value})),className:"w-full border p-3 pr-10 rounded-xl bg-white appearance-none cursor-pointer focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[r.jsx("option",{value:"",children:" "}),yx.map(j=>r.jsx("option",{value:j,children:j},j))]})]}),r.jsx("input",{name:"location",placeholder:"",value:n.location,onChange:R,className:"w-full border p-3 rounded-xl"}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(Bt,{className:"w-5 h-5 text-green-500"})," "]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:r.jsx(Bt,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800",children:"  "}),r.jsx("p",{className:"text-sm text-gray-500",children:"      "})]})]}),r.jsx("button",{type:"button",onClick:()=>s(j=>({...j,allowPickup:!j.allowPickup})),className:`relative w-14 h-8 rounded-full transition-colors ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:r.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.allowPickup?"right-1":"left-1"}`})})]}),n.allowPickup&&r.jsx("p",{className:"mt-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:"         (  )"})]}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(fx,{className:"w-5 h-5 text-sky-500"})," "]}),n.licenseStatus&&r.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 ${n.licenseStatus==="approved"?"bg-green-50 text-green-700":n.licenseStatus==="rejected"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[n.licenseStatus==="approved"&&r.jsx(Ce,{className:"w-5 h-5"}),n.licenseStatus==="rejected"&&r.jsx(pi,{className:"w-5 h-5"}),n.licenseStatus==="pending"&&r.jsx(ws,{className:"w-5 h-5"}),r.jsxs("span",{className:"font-semibold",children:[n.licenseStatus==="approved"&&"   ",n.licenseStatus==="rejected"&&" ",n.licenseStatus==="pending"&&"  ..."]})]}),n.licenseNotes&&n.licenseStatus==="rejected"&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl text-red-600 text-sm",children:[r.jsx("strong",{children:":"})," ",n.licenseNotes]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[r.jsx(W6,{className:"w-4 h-4 text-orange-500"})," "]}),r.jsxs("div",{className:"flex items-center gap-3",children:[n.commercialLicenseUrl&&r.jsx("a",{href:n.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:text-sky-700 text-sm underline",children:"  "}),r.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:j=>{var C;return d(((C=j.target.files)==null?void 0:C[0])||null)},className:"text-sm"})]}),u&&r.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",r.jsx("span",{className:"font-semibold",children:u.name})]})]})]}),r.jsx("button",{type:"submit",disabled:!_,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:p?" ":""})]})]})},oD=()=>{const{user:t}=He(),e=$n(),n=En(),[s,i]=I.useState([]),[a,o]=I.useState(!0);I.useEffect(()=>{t&&(async()=>{const T=ot(ue(z,"hiringRequests"),mt("restaurantId","==",t.uid)),b=await Be(T);i(b.docs.map(w=>({id:w.id,...w.data()}))),o(!1)})()},[t]);const c=async(T,b)=>{await ye(J(z,"hiringRequests",T),{status:b}),i(w=>w.map(y=>y.id===T?{...y,status:b}:y)),n.success(b==="accepted"?"   ":"  ")},u=async T=>{await e.confirm(`    "${T.courierName}"`,{title:" ",confirmText:" ",cancelText:"",dangerous:!0})&&(await ye(J(z,"hiringRequests",T.id),{status:"terminated"}),i(w=>w.map(y=>y.id===T.id?{...y,status:"terminated"}:y)),n.success("  "))},d=async T=>{await e.confirm(`    "${T.courierName}" `,{title:" ",confirmText:" ",cancelText:"",dangerous:!0})&&(await Yn(J(z,"hiringRequests",T.id)),i(w=>w.filter(y=>y.id!==T.id)),n.success("  "))},h=async T=>{await ye(J(z,"hiringRequests",T.id),{status:"accepted"}),i(b=>b.map(w=>w.id===T.id?{...w,status:"accepted"}:w)),n.success("    ")},m=T=>{switch(T){case"pending":return{text:" ",color:"bg-yellow-100 text-yellow-700",icon:ws};case"accepted":return{text:" ",color:"bg-green-100 text-green-700",icon:Ce};case"rejected":return{text:"",color:"bg-red-100 text-red-700",icon:Hs};case"terminated":return{text:"",color:"bg-gray-100 text-gray-700",icon:Vv};default:return{text:T,color:"bg-gray-100 text-gray-700",icon:ws}}};if(a)return r.jsx("div",{className:"text-center py-10",children:"  ..."});const p=s.filter(T=>T.status==="accepted"),v=s.filter(T=>T.status==="pending"),_=s.filter(T=>T.status==="terminated"),R=s.filter(T=>T.status==="rejected");return r.jsxs("div",{className:"py-6 space-y-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-6",children:"  "}),s.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-500 text-lg",children:"   "}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"     "})]}):r.jsxs(r.Fragment,{children:[p.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-green-600 mb-3 flex items-center gap-2",children:[r.jsx(Sf,{className:"w-5 h-5"}),"  (",p.length,")"]}),r.jsx("div",{className:"space-y-3",children:p.map(T=>{const b=m(T.status);return r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-green-500",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-800",children:T.courierName}),r.jsxs("div",{className:`text-xs px-2 py-1 rounded-full inline-flex items-center gap-1 ${b.color}`,children:[r.jsx(b.icon,{className:"w-3 h-3"}),b.text]})]})]}),r.jsxs("button",{onClick:()=>u(T),className:`flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-xl 
                                     hover:bg-red-100 transition-all font-medium`,children:[r.jsx(p3,{className:"w-4 h-4"}),""]})]})},T.id)})})]}),v.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-yellow-600 mb-3 flex items-center gap-2",children:[r.jsx(ws,{className:"w-5 h-5"}),"  (",v.length,")"]}),r.jsx("div",{className:"space-y-3",children:v.map(T=>r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-yellow-500",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-800",children:T.courierName}),r.jsx("div",{className:"text-xs text-yellow-600",children:"  "})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>c(T.id,"accepted"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-green-500 text-white hover:bg-green-600 transition-all font-medium",children:[r.jsx(Sf,{className:"w-4 h-4"}),""]}),r.jsxs("button",{onClick:()=>c(T.id,"rejected"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-red-500 text-white hover:bg-red-600 transition-all font-medium",children:[r.jsx(Hs,{className:"w-4 h-4"}),""]})]})]})},T.id))})]}),_.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-gray-500 mb-3 flex items-center gap-2",children:[r.jsx(Vv,{className:"w-5 h-5"})," (",_.length,")"]}),r.jsx("div",{className:"space-y-3",children:_.map(T=>r.jsx("div",{className:"bg-gray-50 rounded-2xl shadow p-4 border-r-4 border-gray-400 opacity-75",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-600",children:T.courierName}),r.jsx("div",{className:"text-xs text-gray-500",children:""})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>h(T),className:`flex items-center gap-1 px-3 py-2 bg-green-100 text-green-600 rounded-xl 
                                     hover:bg-green-200 transition-all text-sm font-medium`,children:[r.jsx(Sf,{className:"w-4 h-4"})," "]}),r.jsxs("button",{onClick:()=>d(T),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                     hover:bg-red-200 transition-all text-sm font-medium`,children:[r.jsx(an,{className:"w-4 h-4"}),""]})]})]})},T.id))})]}),R.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-red-500 mb-3 flex items-center gap-2",children:[r.jsx(Hs,{className:"w-5 h-5"})," (",R.length,")"]}),r.jsx("div",{className:"space-y-3",children:R.map(T=>r.jsx("div",{className:"bg-red-50 rounded-2xl shadow p-4 border-r-4 border-red-400 opacity-75",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-600",children:T.courierName}),r.jsx("div",{className:"text-xs text-red-500",children:""})]})]}),r.jsxs("button",{onClick:()=>d(T),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                   hover:bg-red-200 transition-all text-sm font-medium`,children:[r.jsx(an,{className:"w-4 h-4"}),""]})]})},T.id))})]})]})]})},lD=()=>{const{user:t}=He(),e=En(),n=$n(),[s,i]=I.useState("free"),[a,o]=I.useState(!0),[c,u]=I.useState(!1),[d,h]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t)try{const _=await nt(J(z,"restaurants",t.uid));if(_.exists()){const R=_.data();i((R==null?void 0:R.packageType)||"free")}}catch(_){console.error("   :",_)}finally{o(!1)}})()},[t]);const m=async()=>{if(!t)return;if(s==="free"){e.info("     ");return}if(await n.confirm("         .",{title:"   ",confirmText:"  ",cancelText:""})){h(!0);try{await ye(J(z,"restaurants",t.uid),{packageType:"free",packageRequest:null,updatedAt:ae()}),i("free"),e.success("   ")}catch(_){console.error(":",_),e.error("    ")}finally{h(!1)}}},p=async()=>{if(!(!t||!await n.confirm("        .   ",{title:"    ",confirmText:"  ",cancelText:""}))){u(!0);try{await ye(J(z,"restaurants",t.uid),{packageRequest:"premium",packageRequestedAt:ae(),updatedAt:ae()}),e.success("   !    ")}catch(_){console.error("   :",_),e.error("    ")}finally{u(!1)}}};return a?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:" ..."})]})}):r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-amber-100 to-yellow-100 px-5 py-2.5 rounded-full mb-4 shadow-sm",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsx("span",{className:"text-amber-700 font-bold text-lg",children:"  "})]}),r.jsx("h1",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-3",children:"   "}),r.jsx("p",{className:"text-gray-600 max-w-lg mx-auto",children:"              "})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${s==="free"?"ring-4 ring-green-400 shadow-2xl":"shadow-lg hover:shadow-xl"}`,children:[s==="free"&&r.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[r.jsx(On,{className:"w-4 h-4"})," "]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-6 md:p-8 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(If,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-black text-gray-900",children:" "}),r.jsx("p",{className:"text-green-600 font-semibold",children:"   "})]})]}),r.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center",children:[r.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[r.jsx("span",{className:"text-5xl font-black text-gray-900",children:"0"}),r.jsx("span",{className:"text-xl text-gray-600",children:"."})]}),r.jsx("p",{className:"text-green-600 font-medium mt-1",children:" "})]}),r.jsxs("div",{className:"space-y-4 flex-1",children:[r.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(f1,{className:"w-5 h-5 text-amber-500"})," :"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(ii,{icon:r.jsx(o1,{className:"w-5 h-5"}),title:"  ",desc:"     ",included:!0}),r.jsx(ii,{icon:r.jsx(nc,{className:"w-5 h-5"}),title:" ",desc:"    ",included:!0}),r.jsx(ii,{icon:r.jsx(fx,{className:"w-5 h-5"}),title:"  ",desc:"    ",included:!0})]})]}),r.jsx("div",{className:"mt-6",children:s==="free"?r.jsxs("div",{className:"bg-green-100 text-green-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[r.jsx(On,{className:"w-5 h-5"}),"    "]}):r.jsx("button",{onClick:m,disabled:d,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(If,{className:"w-6 h-6"}),"  ",r.jsx(ap,{className:"w-5 h-5"})]})})})]})]}),r.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${s==="premium"?"ring-4 ring-amber-400 shadow-2xl":"shadow-lg hover:shadow-xl hover:scale-[1.01]"}`,children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-amber-500 py-2 text-center z-10",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-white font-bold",children:[r.jsx(In,{className:"w-5 h-5"}),r.jsx("span",{children:" "}),r.jsx(In,{className:"w-5 h-5"})]})}),s==="premium"&&r.jsxs("div",{className:"absolute top-12 right-4 bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[r.jsx(In,{className:"w-4 h-4"})," "]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-6 md:p-8 pt-14 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 via-yellow-400 to-orange-400 rounded-2xl flex items-center justify-center shadow-lg relative",children:[r.jsx(In,{className:"w-8 h-8 text-white"}),r.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow",children:r.jsx(Fn,{className:"w-4 h-4 text-amber-500"})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-black text-gray-900",children:" "}),r.jsx("p",{className:"text-amber-600 font-semibold",children:"  "})]})]}),r.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-400/10 via-yellow-400/10 to-orange-400/10"}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[r.jsx("span",{className:"text-5xl font-black bg-gradient-to-r from-amber-600 to-orange-500 bg-clip-text text-transparent",children:"45"}),r.jsx("span",{className:"text-xl text-gray-600",children:"."})]}),r.jsx("p",{className:"text-amber-600 font-medium mt-1",children:" "})]})]}),r.jsxs("div",{className:"space-y-4 flex-1",children:[r.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(In,{className:"w-5 h-5 text-amber-500"}),"     :"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(ii,{icon:r.jsx(c3,{className:"w-5 h-5"}),title:"   ",desc:"      ",included:!0,premium:!0}),r.jsx(ii,{icon:r.jsx(Bu,{className:"w-5 h-5"}),title:"  ",desc:"    ",included:!0,premium:!0}),r.jsx(ii,{icon:r.jsx(Pd,{className:"w-5 h-5"}),title:"   ",desc:"     ",included:!0,premium:!0}),r.jsx(ii,{icon:r.jsx(RP,{className:"w-5 h-5"}),title:" ",desc:"     ",included:!0,premium:!0})]})]}),r.jsx("div",{className:"mt-6",children:s==="premium"?r.jsxs("div",{className:"bg-amber-100 text-amber-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[r.jsx(In,{className:"w-5 h-5"}),"    "]}):r.jsxs("button",{onClick:p,disabled:c,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 text-white font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 relative overflow-hidden group",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(In,{className:"w-6 h-6"}),"   ",r.jsx(ap,{className:"w-5 h-5"})]})]})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 px-6 py-4",children:r.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[r.jsx(Fn,{className:"w-5 h-5 text-amber-400"}),"   "]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),r.jsx("th",{className:"px-6 py-4 text-center font-bold text-green-600",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(If,{className:"w-5 h-5"}),""]})}),r.jsx("th",{className:"px-6 py-4 text-center font-bold text-amber-600",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(In,{className:"w-5 h-5"}),""]})})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100",children:[r.jsx(ai,{label:"  ",free:!0,premium:!0}),r.jsx(ai,{label:" ",free:!0,premium:!0}),r.jsx(ai,{label:"  ",free:!0,premium:!0}),r.jsx(ai,{label:"   ",premium:!0}),r.jsx(ai,{label:"  ",premium:!0}),r.jsx(ai,{label:"   ",premium:!0}),r.jsx(ai,{label:" ",premium:!0})]})]})})]}),r.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 text-center",children:r.jsxs("p",{className:"text-gray-600",children:[r.jsx("span",{className:"font-bold text-sky-600",children:" :"})," ","       .     ."]})})]})},ii=({icon:t,title:e,desc:n,included:s,premium:i})=>r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-xl transition ${s?i?"bg-gradient-to-r from-amber-100/50 to-yellow-100/50":"bg-white/50":"opacity-50"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${s?i?"bg-gradient-to-br from-amber-400 to-orange-400 text-white":"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:t}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:`font-bold ${s?"text-gray-800":"text-gray-400"}`,children:e}),i&&r.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-400 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:""})]}),r.jsx("p",{className:`text-sm ${s?"text-gray-500":"text-gray-400"}`,children:n})]}),s&&r.jsx(On,{className:`w-5 h-5 flex-shrink-0 ${i?"text-amber-500":"text-green-500"}`})]}),ai=({label:t,free:e,premium:n})=>r.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[r.jsx("td",{className:"px-6 py-4 text-gray-700 font-medium",children:t}),r.jsx("td",{className:"px-6 py-4 text-center",children:e?r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-green-100 rounded-full",children:r.jsx(On,{className:"w-5 h-5 text-green-600"})}):r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:r.jsx("span",{className:"text-gray-400",children:""})})}),r.jsx("td",{className:"px-6 py-4 text-center",children:n?r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-amber-100 rounded-full",children:r.jsx(On,{className:"w-5 h-5 text-amber-600"})}):r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:r.jsx("span",{className:"text-gray-400",children:""})})})]}),Df=5,_u=24,cD=()=>{const{user:t}=He(),e=En(),n=$n(),[s,i]=I.useState([]),[a,o]=I.useState(!0),[c,u]=I.useState(!1),[d,h]=I.useState(!1),[m,p]=I.useState(0),v=I.useRef(null),[_,R]=I.useState({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""});I.useEffect(()=>{t&&T()},[t]);const T=async()=>{if(t)try{const C=ot(ue(z,"promotions"),mt("ownerId","==",t.uid)),N=(await Be(C)).docs.map(x=>{var E,k,P,L;return{id:x.id,...x.data(),expiresAt:(k=(E=x.data().expiresAt)==null?void 0:E.toDate)==null?void 0:k.call(E),createdAt:(L=(P=x.data().createdAt)==null?void 0:P.toDate)==null?void 0:L.call(P)}});N.sort((x,E)=>{var k,P;return(((k=E.createdAt)==null?void 0:k.getTime())||0)-(((P=x.createdAt)==null?void 0:P.getTime())||0)}),i(N)}catch(C){e.error("   "),console.error(C)}finally{o(!1)}},b=C=>C.expiresAt?new Date>new Date(C.expiresAt):!1,w=C=>{var k;const O=(k=C.target.files)==null?void 0:k[0];if(!O)return;const N=O.type.startsWith("image/"),x=O.type.startsWith("video/");if(!N&&!x){e.warning("    ");return}const E=x?50*1024*1024:10*1024*1024;if(O.size>E){e.warning(x?"       50 ":"       10 ");return}R({..._,type:x?"video":"image",mediaFile:O,mediaPreview:URL.createObjectURL(O)})},y=async C=>{if(C.preventDefault(),!!t){if(_.type!=="text"&&!_.mediaFile){e.warning("    ");return}if(!_.title.trim()&&!_.description.trim()&&!_.mediaFile){e.warning("   ");return}try{h(!0);let O="";if(_.mediaFile){const x=_.mediaFile.name.replace(/\s+/g,"_").slice(-60),E=`promotions/${t.uid}_${Date.now()}_${x}`,k=Ja(ip,E),P=ux(k,_.mediaFile);await new Promise((L,D)=>{P.on("state_changed",ie=>{const V=Math.round(ie.bytesTransferred/ie.totalBytes*100);p(V)},D,async()=>{O=await Ya(P.snapshot.ref),L()})})}const N=new Date;N.setHours(N.getHours()+_u),await es(ue(z,"promotions"),{ownerId:t.uid,restaurantId:t.uid,type:_.type,title:_.title.trim(),description:_.description.trim(),mediaUrl:O,isActive:!0,isPaid:!0,price:Df,duration:_u,viewsCount:0,expiresAt:at.fromDate(N),createdAt:ae(),updatedAt:ae()}),e.success(`  !    ${_u} `),R({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""}),u(!1),p(0),T()}catch(O){e.error("    "),console.error(O)}finally{h(!1)}}},j=async C=>{if(await n.confirm("    ",{dangerous:!0}))try{await Yn(J(z,"promotions",C)),e.success("  "),T()}catch{e.error(" ")}};return a?r.jsxs("div",{className:"flex items-center justify-center h-96",children:[r.jsx(pn,{className:"w-6 h-6 animate-spin ml-2"})," ..."]}):r.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4 space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:r.jsx(_i,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" "}),r.jsx("p",{className:"text-gray-500 mt-2",children:"      "})]}),r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-4 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3",children:[r.jsx(Fn,{className:"w-5 h-5 text-purple-500"}),r.jsxs("span",{className:"text-lg font-bold text-purple-700",children:[Df," .   ",_u," "]}),r.jsx(Fn,{className:"w-5 h-5 text-purple-500"})]}),r.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"       "})]}),!c&&r.jsxs("button",{onClick:()=>u(!0),className:"w-full py-4 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[r.jsx(Ic,{className:"w-6 h-6"}),"  "]}),c&&r.jsxs("form",{onSubmit:y,className:"bg-white rounded-2xl shadow-xl p-6 space-y-4",children:[r.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:"  "}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>R({..._,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${_.type==="text"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[r.jsx(fx,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>{var C;R({..._,type:"image"}),(C=v.current)==null||C.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${_.type==="image"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[r.jsx(c1,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>{var C;R({..._,type:"video"}),(C=v.current)==null||C.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${_.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[r.jsx(j3,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:""})]})]})]}),r.jsx("input",{type:"file",ref:v,accept:"image/*,video/*",onChange:w,className:"hidden"}),_.mediaPreview&&r.jsxs("div",{className:"relative",children:[_.type==="video"?r.jsx("video",{src:_.mediaPreview,controls:!0,className:"w-full h-48 object-cover rounded-xl"}):r.jsx("img",{src:_.mediaPreview,alt:"",className:"w-full h-48 object-cover rounded-xl"}),r.jsx("button",{type:"button",onClick:()=>R({..._,mediaFile:null,mediaPreview:"",type:"text"}),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full",children:r.jsx(Hs,{className:"w-4 h-4"})})]}),_.type!=="text"&&!_.mediaPreview&&r.jsxs("button",{type:"button",onClick:()=>{var C;return(C=v.current)==null?void 0:C.click()},className:"w-full py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-purple-400 transition flex items-center justify-center gap-2",children:[r.jsx(m1,{className:"w-5 h-5"})," ",_.type==="video"?"":""]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),r.jsx("input",{type:"text",value:_.title,onChange:C=>R({..._,title:C.target.value}),placeholder:":   !",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"  "}),r.jsx("textarea",{value:_.description,onChange:C=>R({..._,description:C.target.value}),placeholder:"   ...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),d&&m>0&&r.jsx("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"bg-purple-500 h-full transition-all",style:{width:`${m}%`}})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",disabled:d,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:d?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(_i,{className:"w-5 h-5"}),"  (",Df," .)"]})}),r.jsx("button",{type:"button",onClick:()=>{u(!1),R({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""})},className:"px-4 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-medium",children:""})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"font-bold text-lg text-gray-800",children:""}),s.length===0?r.jsxs("div",{className:"text-center py-10 text-gray-400",children:[r.jsx(_i,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"    "})]}):s.map(C=>r.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden ${b(C)?"opacity-60":""}`,children:[C.mediaUrl&&(C.type==="video"?r.jsx("video",{src:C.mediaUrl,controls:!0,className:"w-full h-48 object-cover"}):r.jsx("img",{src:C.mediaUrl,alt:C.title,className:"w-full h-48 object-cover"})),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b(C)?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-500 text-xs font-medium rounded-full",children:[r.jsx(Hs,{className:"w-3 h-3"})," "]}):C.isActive?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-600 text-xs font-medium rounded-full",children:[r.jsx(Ce,{className:"w-3 h-3"})," "]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-600 text-xs font-medium rounded-full",children:[r.jsx(ws,{className:"w-3 h-3"}),"  "]}),r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-600 text-xs font-medium rounded-full",children:[r.jsx(o1,{className:"w-3 h-3"})," ",C.viewsCount," "]})]}),C.title&&r.jsx("h3",{className:"font-bold text-gray-800",children:C.title}),C.description&&r.jsx("p",{className:"text-gray-600 text-sm mt-1",children:C.description}),r.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[r.jsxs("span",{className:"text-xs text-gray-400",children:[C.expiresAt&&!b(C)&&r.jsxs(r.Fragment,{children:[": ",new Date(C.expiresAt).toLocaleString("ar-SA")]}),b(C)&&"  "]}),r.jsx("button",{onClick:()=>j(C.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",children:r.jsx(an,{className:"w-4 h-4"})})]})]})]},C.id))]}),r.jsxs(_e,{to:"/owner",className:"flex items-center justify-center gap-2 text-sky-600 hover:text-sky-700 py-4",children:[r.jsx(Tc,{className:"w-5 h-5"}),"  "]})]})},uD=()=>{const{user:t}=He(),e=Yt(),[n,s]=I.useState([]),[i,a]=I.useState([]);I.useEffect(()=>{const u=ot(ue(z,"orders"),mt("status","in",["ready"]),Ns("createdAt","desc")),d=er(u,p=>s(p.docs.map(v=>({id:v.id,...v.data()})))),h=ot(ue(z,"orders"),mt("courierId","==",(t==null?void 0:t.uid)||""),Ns("createdAt","desc")),m=er(h,p=>a(p.docs.map(v=>({id:v.id,...v.data()}))));return()=>{d(),m()}},[t==null?void 0:t.uid]);const o=async u=>{t&&await ye(J(z,"orders",u),{courierId:t.uid,status:"out_for_delivery",updatedAt:ae()})},c=async u=>{await ye(J(z,"orders",u),{status:"delivered",updatedAt:ae()})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-2xl p-4 text-white shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ts,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm opacity-90",children:" "})]}),r.jsx("div",{className:"text-3xl font-bold",children:n.length})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ns,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm opacity-90",children:" "})]}),r.jsx("div",{className:"text-3xl font-bold",children:i.filter(u=>u.status!=="delivered").length})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:r.jsx(ts,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h2",{className:"font-bold text-lg",children:"   "})]}),r.jsxs("div",{className:"space-y-3",children:[n.map(u=>{var d,h;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 flex items-center justify-between",children:[r.jsxs("span",{className:"text-white font-bold",children:["#",u.id.slice(-6)]}),r.jsx("span",{className:"text-white/90 text-sm",children:u.restaurantName||""})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[r.jsx(bn,{className:"w-4 h-4"}),r.jsx("span",{className:"truncate",children:u.address})]}),r.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[r.jsx(Pv,{className:"w-5 h-5"}),r.jsxs("span",{children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]}),r.jsxs("button",{onClick:()=>o(u.id),className:`w-full py-3 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 
                               text-white font-bold flex items-center justify-center gap-2
                               hover:from-gray-900 hover:to-black transition-all shadow-lg hover:shadow-xl`,children:[r.jsx(ns,{className:"w-5 h-5"}),r.jsx("span",{children:"  "})]})]})]},u.id)}),n.length===0&&r.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl",children:[r.jsx("div",{className:"text-5xl mb-3",children:""}),r.jsx("p",{className:"text-gray-500",children:"    "}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"    "})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:r.jsx(Za,{className:"w-5 h-5 text-green-600"})}),r.jsx("h2",{className:"font-bold text-lg",children:" "})]}),r.jsxs("div",{className:"space-y-3",children:[i.filter(u=>u.status!=="delivered").map(u=>{var d,h;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-blue-500 px-4 py-2 flex items-center justify-between",children:[r.jsxs("span",{className:"text-white font-bold",children:["#",u.id.slice(-6)]}),r.jsxs("div",{className:"flex items-center gap-1 text-white/90 text-sm",children:[r.jsx(ws,{className:"w-3 h-3"}),r.jsx("span",{children:" "})]})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[r.jsx(bn,{className:"w-4 h-4"}),r.jsx("span",{className:"truncate",children:u.address})]}),r.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[r.jsx(Pv,{className:"w-5 h-5"}),r.jsxs("span",{children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>e(`/chat?orderId=${u.id}`),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-primary to-accent 
                                 text-white font-bold flex items-center justify-center gap-2
                                 hover:shadow-lg transition-all`,children:[r.jsx(Ih,{className:"w-5 h-5"}),r.jsx("span",{children:" "})]}),r.jsxs("button",{onClick:()=>c(u.id),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 
                                 text-white font-bold flex items-center justify-center gap-2
                                 hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg hover:shadow-xl`,children:[r.jsx(Ce,{className:"w-5 h-5"}),r.jsx("span",{children:"  "})]})]})]})]},u.id)}),i.filter(u=>u.status!=="delivered").length===0&&r.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl",children:[r.jsx("div",{className:"text-5xl mb-3",children:""}),r.jsx("p",{className:"text-gray-500",children:"    "}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"    "})]})]})]})]}),i.filter(u=>u.status==="delivered").length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Fn,{className:"w-5 h-5 text-yellow-500"}),r.jsx("h3",{className:"font-bold text-gray-700",children:"  "})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3",children:i.filter(u=>u.status==="delivered").slice(0,6).map(u=>{var d,h;return r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"font-bold text-green-700",children:["#",u.id.slice(-6)]}),r.jsxs("span",{className:"text-green-600 font-bold",children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]})},u.id)})})]})]})},dD=()=>{const{user:t}=He(),e=$n(),[n,s]=I.useState([]),[i,a]=I.useState({}),[o,c]=I.useState(!0),[u,d]=I.useState(null);I.useEffect(()=>{if(!t)return;(async()=>{const v=(await Be(ue(z,"restaurants"))).docs.map(b=>({id:b.id,...b.data()}));s(v);const _=ot(ue(z,"hiringRequests"),mt("courierId","==",t.uid)),R=await Be(_),T={};R.docs.forEach(b=>{const w=b.data();T[w.restaurantId]={restaurantId:w.restaurantId,status:w.status}}),a(T),c(!1)})()},[t]);const h=async m=>{if(!t){e.warning("  ");return}d(m.id),await es(ue(z,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"",restaurantId:m.id,restaurantName:m.name,status:"pending",createdAt:ae()}),a(p=>({...p,[m.id]:{restaurantId:m.id,status:"pending"}})),d(null)};return o?r.jsx("div",{className:"text-center py-10 text-gray-300",children:"  ..."}):r.jsxs("div",{className:"py-8",children:[r.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[r.jsx(SP,{className:"w-7 h-7 text-yellow-400"})," "]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(m=>{const p=i[m.id];return r.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[m.logoUrl?r.jsx("img",{src:m.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):r.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:""}),r.jsx("h3",{className:"font-bold text-lg mb-2",children:m.name}),p?r.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${p.status==="pending"?"bg-gray-500 text-white":p.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[p.status==="pending"&&r.jsx(ws,{className:"w-4 h-4"}),p.status==="accepted"&&r.jsx(WP,{className:"w-4 h-4"}),p.status==="rejected"&&r.jsx(Hs,{className:"w-4 h-4"}),p.status==="pending"?" ":p.status==="accepted"?"  ":" "]}):r.jsx("button",{disabled:u===m.id,onClick:()=>h(m),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:u===m.id?"  ...":"  "})]},m.id)})})]})},hD=[{text:"  ",emoji:""},{text:" ! ",emoji:""},{text:"  ",emoji:""},{text:"  ",emoji:""},{text:" ",emoji:""},{text:"! ",emoji:""}],fD=[{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:"    ",emoji:""},{text:"! ",emoji:""},{text:" ",emoji:""}],mD=[{text:"  ! ",emoji:""},{text:"! ",emoji:""},{text:"  ",emoji:""},{text:"   ",emoji:""},{text:"  ",emoji:""},{text:" ! ",emoji:""}],pD=[{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:"   ",emoji:""}],gD=["","","","","","","","","","","",""],xD=()=>{const[t]=fb(),e=t.get("orderId"),n=Yt(),{user:s,role:i}=He(),a=En(),[o,c]=I.useState(null),[u,d]=I.useState([]),[h,m]=I.useState(""),[p,v]=I.useState(!1),[_,R]=I.useState(!1),[T,b]=I.useState(""),w=I.useRef(null),y=i==="courier",j=i==="owner",C=i==="customer"||i==="admin",O=o&&!o.courierId&&o.restaurantId,x=y?mD:j?pD:C&&O?fD:hD;I.useEffect(()=>{if(!e)return;const $=er(J(z,"orders",e),B=>{if(B.exists()){const F=B.data();c({id:B.id,status:F.status,address:F.address,total:F.total,customerId:F.customerId,courierId:F.courierId,restaurantId:F.restaurantId,restaurantName:F.restaurantName})}});return()=>$()},[e]),I.useEffect(()=>{if(!o)return;let $,B="customer";if(y||j?($=o.customerId,B="customer"):C&&(o.courierId?($=o.courierId,B="courier"):o.restaurantId&&($=o.restaurantId,B="restaurant")),!$){b(O?o.restaurantName||"":" ");return}B==="restaurant"?nt(J(z,"restaurants",$)).then(F=>{var X;F.exists()?b(((X=F.data())==null?void 0:X.name)||""):b(o.restaurantName||"")}):nt(J(z,"users",$)).then(F=>{var X;if(F.exists()){const se=B==="courier"?"":"";b(((X=F.data())==null?void 0:X.name)||se)}})},[o,y,j,C,O]),I.useEffect(()=>{if(!e)return;const $=ot(ue(z,"orders",e,"messages"),Ns("createdAt","asc")),B=er($,F=>{d(F.docs.map(X=>({id:X.id,...X.data()})))});return()=>B()},[e]),I.useEffect(()=>{var $;($=w.current)==null||$.scrollIntoView({behavior:"smooth"})},[u]);const E=async $=>{if(!(!$.trim()||!s||!e)){v(!0);try{let B="customer";y?B="courier":j&&(B="owner"),await es(ue(z,"orders",e,"messages"),{text:$.trim(),senderId:s.uid,senderRole:B,createdAt:ae()}),m(""),R(!1)}catch{a.error("  ")}v(!1)}},k=$=>{m(B=>B+$)},P=$=>$?$.toDate().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"",L=$=>({pending:{text:" ",color:"bg-yellow-500",emoji:""},accepted:{text:" ",color:"bg-blue-500",emoji:""},preparing:{text:" ",color:"bg-orange-500",emoji:""},ready:{text:"",color:"bg-purple-500",emoji:""},out_for_delivery:{text:" ",color:"bg-sky-500",emoji:""},delivered:{text:" ",color:"bg-green-500",emoji:""}})[$]||{text:$,color:"bg-gray-500",emoji:""},D=()=>y||j?"":O?"":"";if(!e)return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ih,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"   "})]})});if(!o)return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:" ..."})]})});if(!((s==null?void 0:s.uid)===o.customerId||(s==null?void 0:s.uid)===o.courierId||(s==null?void 0:s.uid)===o.restaurantId))return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-500",children:"     "})]})});const V=L(o.status);return r.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] max-w-2xl mx-auto",children:[r.jsxs("div",{className:`bg-gradient-to-r ${O?"from-orange-500 via-amber-500 to-yellow-500":"from-primary via-sky-500 to-accent"} rounded-t-3xl p-4 shadow-luxury`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>n(-1),className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center hover:bg-white/30 transition-all",children:r.jsx(Tc,{className:"w-5 h-5 text-white"})}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:D()})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-white text-lg",children:T||(O?"":y||j?"":"")}),r.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-sm",children:[r.jsx("span",{className:`w-2 h-2 rounded-full ${o.status==="delivered"?"bg-green-400":"bg-yellow-400 animate-pulse"}`}),r.jsxs("span",{children:[V.emoji," ",V.text]})]})]})]})}),O?r.jsx(Bt,{className:"w-6 h-6 text-white animate-pulse"}):r.jsx(Fn,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]}),r.jsxs("div",{className:"mt-3 flex items-center gap-4 text-white/90 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ts,{className:"w-4 h-4"}),r.jsxs("span",{children:["#",o.id.slice(-6)]})]}),o.restaurantName&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Bt,{className:"w-4 h-4"}),r.jsx("span",{children:o.restaurantName})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(bn,{className:"w-4 h-4"}),r.jsx("span",{className:"truncate max-w-[150px]",children:o.address})]})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-sky-50 to-white p-4 space-y-3",children:[u.length===0&&r.jsxs("div",{className:"text-center py-10",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-500",children:"  !"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"  "})]}),u.map(($,B)=>{const F=$.senderId===(s==null?void 0:s.uid);return r.jsx("div",{className:`flex ${F?"justify-start":"justify-end"}`,children:r.jsxs("div",{className:`
                  max-w-[80%] rounded-2xl px-4 py-3 shadow-md
                  ${F?"bg-gradient-to-br from-primary to-sky-600 text-white rounded-br-sm":"bg-white text-gray-800 rounded-bl-sm border border-gray-100"}
                  transform transition-all duration-300 hover:scale-[1.02]
                `,children:[r.jsx("p",{className:"text-base leading-relaxed",children:$.text}),r.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${F?"text-white/70":"text-gray-400"}`,children:[r.jsx(ws,{className:"w-3 h-3"}),r.jsx("span",{children:P($.createdAt)}),F&&r.jsx(Rv,{className:"w-3 h-3 mr-1"})]})]})},$.id)}),r.jsx("div",{ref:w})]}),r.jsx("div",{className:"bg-white border-t border-gray-100 px-3 py-2",children:r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:x.map(($,B)=>r.jsx("button",{onClick:()=>E($.text),className:`flex-shrink-0 px-4 py-2 bg-gradient-to-r from-sky-50 to-blue-50 
                         rounded-full text-sm text-primary font-medium border border-sky-100
                         hover:from-sky-100 hover:to-blue-100 hover:shadow-md 
                         transition-all duration-200 active:scale-95`,children:$.text},B))})}),_&&r.jsx("div",{className:"bg-white border-t border-gray-100 px-4 py-3",children:r.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:gD.map(($,B)=>r.jsx("button",{onClick:()=>k($),className:`w-10 h-10 text-2xl hover:bg-gray-100 rounded-full 
                           transition-all duration-200 hover:scale-125 active:scale-95`,children:$},B))})}),r.jsx("div",{className:"bg-white border-t border-gray-200 p-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>R(!_),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all
                       ${_?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:r.jsx(Z6,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex-1 relative",children:r.jsx("input",{type:"text",value:h,onChange:$=>m($.target.value),onKeyPress:$=>$.key==="Enter"&&E(h),placeholder:" ...",className:`w-full px-5 py-3 bg-gray-100 rounded-full text-gray-800 
                         placeholder-gray-400 focus:outline-none focus:ring-2 
                         focus:ring-primary/50 focus:bg-white transition-all`})}),r.jsx("button",{onClick:()=>E(h),disabled:!h.trim()||p,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all
                       ${h.trim()?"bg-gradient-to-r from-primary to-accent text-white shadow-lg hover:shadow-xl hover:scale-105":"bg-gray-200 text-gray-400"}
                       disabled:opacity-50 active:scale-95`,children:r.jsx($6,{className:"w-5 h-5"})})]})}),o.status==="delivered"&&r.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-4 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[r.jsx(Rv,{className:"w-6 h-6"}),r.jsx("span",{className:"font-bold",children:"   ! "}),r.jsx(l1,{className:"w-5 h-5 text-red-300 animate-pulse"})]}),r.jsx("p",{className:"text-white/80 text-sm mt-1",children:"   "})]})]})},yD=()=>{const{user:t}=He(),e=En(),n=Yt(),[s,i]=I.useState([]),[a,o]=I.useState(!0);I.useEffect(()=>{if(!t)return;const p=ot(ue(z,"notifications"),mt("recipientId","==",t.uid),Ns("createdAt","desc")),v=er(p,_=>{const R=_.docs.map(T=>({id:T.id,...T.data()}));i(R),o(!1)},_=>{console.error("Error fetching notifications:",_),o(!1)});return()=>v()},[t]);const c=async p=>{try{await ye(J(z,"notifications",p),{read:!0})}catch(v){console.error("Error marking as read:",v)}},u=async()=>{const p=s.filter(v=>!v.read);try{await Promise.all(p.map(v=>ye(J(z,"notifications",v.id),{read:!0}))),e.success("   ")}catch{e.error("  ")}},d=async p=>{try{await Yn(J(z,"notifications",p)),e.success("  ")}catch{e.error("  ")}},h=p=>{if(!p)return"";const v=p.toDate(),R=new Date().getTime()-v.getTime(),T=Math.floor(R/6e4),b=Math.floor(R/36e5),w=Math.floor(R/864e5);return T<1?"":T<60?` ${T} `:b<24?` ${b} `:w<7?` ${w} `:v.toLocaleDateString("ar-SA")},m=s.filter(p=>!p.read).length;return a?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx(pn,{className:"w-8 h-8 animate-spin text-sky-500"})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[r.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:r.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[r.jsx(Tc,{className:"w-5 h-5"}),""]}),r.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(Ad,{className:"w-6 h-6 text-sky-500"}),"",m>0&&r.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:m})]}),m>0&&r.jsx("button",{onClick:u,className:"text-sm text-sky-600 hover:text-sky-800",children:" "})]})})}),r.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:s.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx(Ad,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("p",{className:"text-gray-500",children:"  "})]}):r.jsx("div",{className:"space-y-3",children:s.map(p=>r.jsx("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition hover:shadow-md ${p.read?"border-gray-100":"border-sky-200 bg-sky-50/50"}`,onClick:()=>!p.read&&c(p.id),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-xl ${p.type==="license_reminder"?"bg-orange-100 text-orange-600":"bg-sky-100 text-sky-600"}`,children:r.jsx(pi,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:p.title}),r.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:h(p.createdAt)})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.message}),!p.read&&r.jsx("span",{className:"inline-block mt-2 text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded-full",children:""})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[!p.read&&r.jsx("button",{onClick:v=>{v.stopPropagation(),c(p.id)},className:"p-1.5 text-gray-400 hover:text-green-500 transition",title:" ",children:r.jsx(On,{className:"w-4 h-4"})}),r.jsx("button",{onClick:v=>{v.stopPropagation(),d(p.id)},className:"p-1.5 text-gray-400 hover:text-red-500 transition",title:"",children:r.jsx(an,{className:"w-4 h-4"})})]})]})},p.id))})})]})},vD=()=>{var w,y;const{user:t,role:e}=He(),n=En(),[s,i]=I.useState("dashboard"),[a,o]=I.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[c,u]=I.useState(0),[d,h]=I.useState(!0),[m,p]=I.useState(null),[v,_]=I.useState([]),[R,T]=I.useState("all");I.useEffect(()=>{t&&(async()=>{try{const C=(await Be(ue(z,"restaurants"))).size,N=(await Be(ue(z,"orders"))).docs.map(P=>({id:P.id,...P.data()})),x=N.length,E=N.filter(P=>P.status==="pending").length,k=N.reduce((P,L)=>P+(L.deliveryFee||0),0);try{const L=(await nt(J(z,"wallets",t.uid))).data();u((L==null?void 0:L.balance)||0)}catch{u(0)}try{const P=ot(ue(z,"tasks"),mt("assignedTo","==",t.uid)),D=(await Be(P)).docs.map(ie=>({id:ie.id,...ie.data()}));_(D.sort((ie,V)=>{var $,B;return((($=V.createdAt)==null?void 0:$.seconds)||0)-(((B=ie.createdAt)==null?void 0:B.seconds)||0)}))}catch(P){console.error("   :",P)}o({totalRestaurants:C,totalOrders:x,totalEarnings:k,pendingOrders:E})}catch(j){console.error("   :",j)}finally{h(!1)}})()},[t]);const b=async(j,C)=>{try{const O={status:C,updatedAt:ae()};C==="completed"&&(O.completedAt=ae()),await ye(J(z,"tasks",j),O),_(N=>N.map(x=>x.id===j?{...x,status:C}:x)),n.success(C==="in_progress"?"  ":C==="completed"?"   ! ":"  ")}catch{n.error("   ")}};return I.useEffect(()=>{t&&(async()=>{try{const j=await nt(J(z,"users",t.uid));j.exists()&&p({uid:j.id,...j.data()})}catch(j){console.error("    :",j)}})()},[t]),d?r.jsx(De,{allow:["admin"],children:r.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:" ..."})}):r.jsx(De,{allow:["admin"],children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"  "}),r.jsx("p",{className:"text-gray-600 mt-2",children:"   ! "})]}),r.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[r.jsxs("button",{onClick:()=>i("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${s==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Tf,{className:"w-5 h-5"})," "]}),r.jsxs("button",{onClick:()=>i("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${s==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(An,{className:"w-5 h-5"}),""]}),r.jsxs("button",{onClick:()=>i("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${s==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Rd,{className:"w-5 h-5"}),"",v.filter(j=>j.status==="pending"||j.status==="in_progress").length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:v.filter(j=>j.status==="pending"||j.status==="in_progress").length})]})]}),s==="profile"&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[r.jsx(An,{className:"w-6 h-6"}),""]}),m?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((w=m.name)==null?void 0:w.charAt(0))||((y=m.email)==null?void 0:y.charAt(0))||""}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m.name||" "}),r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:" "})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:m.email})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),r.jsx("p",{className:"font-semibold text-gray-900",children:e==="admin"?"":e})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:m.uid})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[c.toFixed(2)," ."]})]})]})]}),r.jsx(_e,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"   "})]}):r.jsx("div",{className:"text-center py-8 text-gray-600",children:" ..."})]}),s==="tasks"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[r.jsx(Rd,{className:"w-6 h-6"})," "]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(j=>r.jsxs("button",{onClick:()=>T(j),className:`px-4 py-2 rounded-xl font-semibold transition ${R===j?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[j==="all"&&" ",j==="pending"&&"  ",j==="in_progress"&&"  ",j==="completed"&&" "]},j))}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.filter(j=>j.status==="pending").length}),r.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.filter(j=>j.status==="in_progress").length}),r.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),r.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.filter(j=>j.status==="completed").length}),r.jsx("p",{className:"text-sm text-green-700",children:""})]})]}),v.filter(j=>R==="all"||j.status===R).length===0?r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx("p",{className:"text-5xl mb-4",children:""}),r.jsxs("p",{className:"text-lg",children:["   ",R!=="all"&&"  "]}),r.jsx("p",{className:"text-sm mt-2",children:"      "})]}):r.jsx("div",{className:"space-y-4",children:v.filter(j=>R==="all"||j.status===R).map(j=>{var C,O,N;return r.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${j.status==="completed"?"bg-green-50 border-green-200":j.status==="in_progress"?"bg-blue-50 border-blue-200":j.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${j.priority==="high"?"bg-red-100 text-red-700":j.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:j.priority==="high"?" ":j.priority==="medium"?" ":" "}),r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${j.status==="pending"?"bg-yellow-100 text-yellow-700":j.status==="in_progress"?"bg-blue-100 text-blue-700":j.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[j.status==="pending"&&"  ",j.status==="in_progress"&&"  ",j.status==="completed"&&" ",j.status==="cancelled"&&" "]})]}),r.jsx("h3",{className:"font-bold text-lg text-gray-800",children:j.title}),j.description&&r.jsx("p",{className:"text-gray-600 mt-1",children:j.description}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[j.dueDate&&r.jsxs("span",{className:new Date(j.dueDate)<new Date&&j.status!=="completed"?"text-red-600 font-semibold":"",children:[" ",new Date(j.dueDate).toLocaleDateString("ar-SA"),new Date(j.dueDate)<new Date&&j.status!=="completed"&&" (!)"]}),r.jsxs("span",{children:[" ",((N=(O=(C=j.createdAt)==null?void 0:C.toDate)==null?void 0:O.call(C))==null?void 0:N.toLocaleDateString("ar-SA"))||" "]})]}),j.notes&&r.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:[" ",j.notes]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[j.status==="pending"&&r.jsx("button",{onClick:()=>b(j.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:" "}),j.status==="in_progress"&&r.jsxs("button",{onClick:()=>b(j.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[r.jsx(Ce,{className:"w-4 h-4"}),""]}),j.status==="completed"&&r.jsx("span",{className:"text-green-600 font-semibold text-center",children:"  "})]})]})},j.id)})})]})}),s==="dashboard"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-90",children:" "}),r.jsxs("h2",{className:"text-3xl font-bold",children:[c.toFixed(2)," ."]}),r.jsx("p",{className:"text-sm opacity-75 mt-2",children:"   50       "})]}),r.jsx(p1,{className:"w-16 h-16 opacity-80"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:a.totalRestaurants})]}),r.jsx(i1,{className:"w-12 h-12 text-primary opacity-30"})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:a.totalOrders})]}),r.jsx(Ld,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:a.pendingOrders})]}),r.jsx(Tf,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:a.totalEarnings.toFixed(2)})]}),r.jsx(Tf,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(_e,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"   "}),r.jsx(_e,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"     "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(_e,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),r.jsx(_e,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:""}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"       "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(_e,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),r.jsx(_e,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:" "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:[" : ",c.toFixed(2)," ."]}),r.jsx(_e,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]})]}),r.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 p-6 rounded-lg",children:[r.jsx("h4",{className:"font-bold text-sky-900 mb-2",children:"  :"}),r.jsxs("ul",{className:"text-sky-800 text-sm space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"50 "}),"         "]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"1 "}),"     (     )"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"1.5 "}),"       "]}),r.jsx("li",{children:"        "})]})]})]})]})})},wD=()=>{const{user:t,role:e}=He(),n=En(),s=$n(),[i,a]=I.useState([]),[o,c]=I.useState(!0),[u,d]=I.useState(!1),[h,m]=I.useState(!1),[p,v]=I.useState(0),_=I.useRef(null),R=Th(mn),[T,b]=I.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});I.useEffect(()=>{w()},[]);const w=async()=>{try{const E=(await Be(ue(z,"restaurants"))).docs.map(k=>({id:k.id,...k.data()}));a(E)}catch(x){n.error("   "),console.error(x)}finally{c(!1)}},y=async x=>{if(x.preventDefault(),!T.name.trim()){n.warning("  ");return}try{m(!0);let E="";if(T.logoFile){const L=T.logoFile.name.replace(/\s+/g,"_").slice(-60),D=`uploads/restaurant_${Date.now()}_${L}`,ie=Ja(R,D),V=ux(ie,T.logoFile,{contentType:T.logoFile.type||"image/jpeg"});await new Promise(($,B)=>{V.on("state_changed",F=>{const X=Math.round(F.bytesTransferred/F.totalBytes*100);v(X)},B,async()=>{E=await Ya(V.snapshot.ref),$()})})}const k=e==="admin",P=e==="developer";await es(ue(z,"restaurants"),{name:T.name,phone:T.phone,city:T.city,location:T.location,ownerId:"admin_"+Date.now(),email:(t==null?void 0:t.email)||"",logoUrl:E,createdAt:new Date,referredBy:k?t==null?void 0:t.uid:null,referrerType:k?"admin":P?"developer":null}),n.success("    "),k&&n.info("   75        "),b({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),d(!1),v(0),w()}catch(E){n.error("   "),console.error(E)}finally{m(!1)}},j=async x=>{if(await s.confirm("      ",{dangerous:!0,title:" "}))try{await Yn(J(z,"restaurants",x)),n.success("   "),w()}catch(k){n.error("   "),console.error(k)}},C=async x=>{const E=!x.isVerified;if(await s.confirm(E?`    "${x.name}"`:`     "${x.name}"`,{title:E?"  ":"  ",confirmText:E?" ":"  "}))try{await ye(J(z,"restaurants",x.id),{isVerified:E,verifiedAt:E?ae():null,updatedAt:ae()}),n.success(E?"   ":"  "),w()}catch(P){n.error(" "),console.error(P)}},O=async(x,E)=>{try{await ye(J(z,"restaurants",x.id),{sellerTier:E,tierUpdatedAt:ae(),updatedAt:ae()});const k={bronze:"",silver:"",gold:""};n.success(`    ${k[E]} `),w()}catch(k){n.error(" "),console.error(k)}},N=({tier:x})=>{switch(x){case"gold":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(In,{className:"w-3 h-3"})," Gold"]});case"silver":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold rounded-full shadow",children:[r.jsx(op,{className:"w-3 h-3"})," Silver"]});default:return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-600 to-orange-600 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(Bu,{className:"w-3 h-3"})," Bronze"]})}};return o?r.jsx(De,{allow:["admin","developer"],children:r.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):r.jsx(De,{allow:["admin","developer"],children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),r.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[r.jsx(Ic,{className:"w-5 h-5"}),"  "]})]}),u&&r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block font-semibold text-gray-700",children:" "}),r.jsxs("div",{className:"flex items-center gap-4",children:[T.logoPreview?r.jsx("img",{src:T.logoPreview,alt:" ",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):r.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:r.jsx(c1,{className:"w-8 h-8 text-gray-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("input",{ref:_,type:"file",accept:"image/*",className:"hidden",onChange:x=>{var k;const E=(k=x.target.files)==null?void 0:k[0];E&&b({...T,logoFile:E,logoPreview:URL.createObjectURL(E)})}}),r.jsxs("button",{type:"button",onClick:()=>{var x;return(x=_.current)==null?void 0:x.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[r.jsx(m1,{className:"w-4 h-4"}),T.logoFile?" ":" "]}),T.logoFile&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:T.logoFile.name})]})]}),h&&p>0&&r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${p}%`}})})]}),r.jsx("input",{type:"text",placeholder:" ",value:T.name,onChange:x=>b({...T,name:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsx("input",{type:"text",placeholder:" ",value:T.phone,onChange:x=>b({...T,phone:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsx("input",{type:"text",placeholder:"",value:T.city,onChange:x=>b({...T,city:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsx("textarea",{placeholder:" / ",value:T.location,onChange:x=>b({...T,location:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",disabled:h,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:h?` ... ${p}%`:" "}),r.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:" "})]})]})]}),r.jsx("div",{className:"grid gap-4",children:i.length===0?r.jsx("div",{className:"text-center text-gray-500 py-12",children:"    "}):i.map(x=>r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex gap-4",children:[x.logoUrl?r.jsx("img",{src:x.logoUrl,alt:x.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):r.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h3",{className:"text-xl font-bold text-primary",children:x.name}),x.isVerified&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[r.jsx(Ce,{className:"w-3 h-3"})," "]}),r.jsx(N,{tier:x.sellerTier})]}),x.city&&r.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.city]}),x.phone&&r.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.phone]}),x.location&&r.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.location]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>C(x),className:`p-2.5 rounded-xl transition flex items-center gap-1 text-sm font-semibold ${x.isVerified?"bg-green-100 hover:bg-green-200 text-green-700":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:x.isVerified?" ":" ",children:[r.jsx(Sc,{className:"w-4 h-4"}),x.isVerified?"":""]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{className:"p-2.5 rounded-xl bg-amber-100 hover:bg-amber-200 text-amber-700 transition flex items-center gap-1 text-sm font-semibold",children:[r.jsx(Bu,{className:"w-4 h-4"}),"",r.jsx(a1,{className:"w-3 h-3"})]}),r.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white rounded-xl shadow-xl border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 min-w-[140px]",children:[r.jsxs("button",{onClick:()=>O(x,"bronze"),className:`w-full px-4 py-2.5 text-right hover:bg-amber-50 transition flex items-center gap-2 first:rounded-t-xl ${x.sellerTier==="bronze"||!x.sellerTier?"bg-amber-50":""}`,children:[r.jsx(Bu,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"font-semibold",children:"Bronze"})]}),r.jsxs("button",{onClick:()=>O(x,"silver"),className:`w-full px-4 py-2.5 text-right hover:bg-gray-50 transition flex items-center gap-2 ${x.sellerTier==="silver"?"bg-gray-100":""}`,children:[r.jsx(op,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"font-semibold",children:"Silver"})]}),r.jsxs("button",{onClick:()=>O(x,"gold"),className:`w-full px-4 py-2.5 text-right hover:bg-yellow-50 transition flex items-center gap-2 last:rounded-b-xl ${x.sellerTier==="gold"?"bg-yellow-50":""}`,children:[r.jsx(In,{className:"w-4 h-4 text-amber-500"}),r.jsx("span",{className:"font-semibold",children:"Gold"})]})]})]}),r.jsx("button",{onClick:()=>j(x.id),className:"p-2.5 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:" ",children:r.jsx(an,{className:"w-4 h-4"})})]})]})},x.id))})]})})},Lf={pending:"  ",accepted:" ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "},_D=()=>{const t=En(),[e,n]=I.useState([]),[s,i]=I.useState(!0),[a,o]=I.useState("all");I.useEffect(()=>{c()},[a]);const c=async()=>{try{let u;a==="all"?u=ot(ue(z,"orders"),Ns("createdAt","desc")):u=ot(ue(z,"orders"),mt("status","==",a),Ns("createdAt","desc"));const h=(await Be(u)).docs.map(m=>({id:m.id,...m.data()}));n(h)}catch(u){t.error("   "),console.error(u)}finally{i(!1)}};return s?r.jsx(De,{allow:["admin","developer"],children:r.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):r.jsx(De,{allow:["admin","developer"],children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),r.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[r.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${a==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[" (",e.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(u=>{const d=e.filter(h=>h.status===u).length;return r.jsxs("button",{onClick:()=>o(u),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${a===u?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[Lf[u]," (",d,")"]},u)})]}),r.jsx("div",{className:"space-y-4",children:e.length===0?r.jsxs("div",{className:"text-center text-gray-500 py-12",children:["   ",a!=="all"&&` "${Lf[a]}"`]}):e.map(u=>{var d,h;return r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold",children:[" #",u.id.slice(-8)]}),r.jsx("p",{className:"text-gray-600 text-sm",children:u.createdAt?new Date(u.createdAt).toLocaleDateString("ar-SA"):""})]}),r.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${u.status==="pending"?"bg-yellow-500":u.status==="delivered"?"bg-green-600":u.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:Lf[u.status]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" ID"}),r.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[u.customerId.slice(0,12),"..."]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:""}),r.jsx("p",{className:"font-semibold text-gray-800",children:u.restaurantName||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:""}),r.jsx("p",{className:"text-sm text-gray-800",children:u.address})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:""}),r.jsxs("p",{className:"text-lg font-bold text-primary",children:[((d=u.total)==null?void 0:d.toFixed(2))||0," ."]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[r.jsx("p",{className:"font-semibold mb-2",children:":"}),r.jsx("div",{className:"space-y-1",children:(h=u.items)==null?void 0:h.map((m,p)=>r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsxs("span",{children:[m.name,"  ",m.qty]}),r.jsxs("span",{children:[(m.price*m.qty).toFixed(2)," ."]})]},p))})]})]},u.id)})})]})})},Tn={projectId:mn.options.projectId,authDomain:mn.options.authDomain,storageBucket:mn.options.storageBucket,messagingSenderId:mn.options.messagingSenderId,appId:mn.options.appId},bD=()=>{var Ro,Po,ta,na;const{user:t}=He(),e=En(),n=$n(),s=Th(mn),[i,a]=I.useState("overview"),[o,c]=I.useState(!0),[u,d]=I.useState(!1),[h,m]=I.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[p,v]=I.useState({}),[_,R]=I.useState([]),[T,b]=I.useState([]),[w,y]=I.useState([]),[j,C]=I.useState([]),[O,N]=I.useState(!1),[x,E]=I.useState({}),[k,P]=I.useState(null),[L,D]=I.useState({}),[ie,V]=I.useState(!1),[$,B]=I.useState(null),[F,X]=I.useState({}),[se,ve]=I.useState("all"),[pe,Le]=I.useState("all"),[Pt,Bn]=I.useState(null),[ln,cn]=I.useState(!1),[sr,Cc]=I.useState(""),[rr,Yr]=I.useState(""),[ks,$i]=I.useState(""),[Bi,zi]=I.useState(""),[mo,Ac]=I.useState(!1),[po,go]=I.useState(!1),[as,xo]=I.useState(""),[yo,qi]=I.useState(""),[Ts,vo]=I.useState(""),[lt,yt]=I.useState(""),[Jr,wo]=I.useState(!1),[Hi,Rc]=I.useState(!1),[kn,_o]=I.useState(""),[Wi,Ki]=I.useState(""),[Pc,Dc]=I.useState(""),[Gi,bo]=I.useState(""),[os,ir]=I.useState(""),[ar,Qi]=I.useState(""),[ls,No]=I.useState(!1),[zn,Lc]=I.useState([]),[Zr,Xi]=I.useState(!1),[pt,Yi]=I.useState(""),[or,Is]=I.useState(""),[Ji,jo]=I.useState(""),[Ss,Eo]=I.useState("medium"),[Oc,lr]=I.useState(""),[ko,Zi]=I.useState(!1),[qn,cs]=I.useState("all");t!=null&&t.email;const Mc=async()=>{if(!sr.trim()||!ks.trim()){e.warning("    ");return}if(ks.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${sr}
 ${rr||" "}

:         .`,{title:"  "})){Ac(!0);try{const K=(await yl(Ln,sr.trim(),ks)).user.uid;await fn(J(z,"users",K),{email:sr.trim(),name:rr.trim()||" ",phone:Bi.trim()||"",role:"admin",createdAt:ae()}),await fn(J(z,"wallets",K),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:ae()}),e.success("     "),e.info("        "),Cc(""),Yr(""),$i(""),zi(""),cn(!1)}catch(W){console.error("   :",W),W.code==="auth/email-already-in-use"?e.error("   "):W.code==="auth/invalid-email"?e.error("   "):W.code==="auth/weak-password"?e.error("   "):e.error("  : "+(W.message||"  "))}finally{Ac(!1)}}},Vc=async()=>{if(!as.trim()||!Ts.trim()){e.warning("    ");return}if(Ts.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${as}
 ${yo||" "}
 ${lt||" "}`,{title:"  "})){wo(!0);try{const K=(await yl(Ln,as.trim(),Ts)).user.uid;await fn(J(z,"users",K),{email:as.trim(),name:yo.trim()||" ",phone:lt.trim()||"",role:"courier",createdAt:ae()}),e.success("     "),e.info("        "),xo(""),qi(""),vo(""),yt(""),go(!1)}catch(W){console.error("   :",W),W.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(W.message||"  "))}finally{wo(!1)}}},To=async()=>{if(!kn.trim()){e.warning("  ");return}if(!os.trim()||!ar.trim()){e.warning("   ");return}if(await n.confirm(`   :

 ${kn}
 ${Wi||" "}
  : ${os}`,{title:"  "})){No(!0);try{const K=(await yl(Ln,os.trim(),ar)).user.uid;await fn(J(z,"users",K),{email:os.trim(),name:kn.trim()+" - ",role:"owner",createdAt:ae()}),await fn(J(z,"restaurants",K),{name:kn.trim(),ownerId:K,email:Gi.trim()||os.trim(),phone:Pc.trim()||"",city:Wi.trim()||"",referredBy:t==null?void 0:t.uid,referrerType:"developer",createdAt:ae()}),e.success("      "),e.info("        "),_o(""),Ki(""),Dc(""),bo(""),ir(""),Qi(""),Rc(!1)}catch(W){console.error("   :",W),W.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(W.message||"  "))}finally{No(!1)}}},Io=()=>{const A=new Date,W=new Date(A.getFullYear(),A.getMonth(),A.getDate()),K=new Date(W.getTime()-7*24*60*60*1e3),le=new Date(W.getTime()-30*24*60*60*1e3),je=w.filter(he=>{var Ke,un;return(((un=(Ke=he.createdAt)==null?void 0:Ke.toDate)==null?void 0:un.call(Ke))||new Date(0))>=W&&he.status!=="cancelled"}),Ae=w.filter(he=>{var Ke,un;return(((un=(Ke=he.createdAt)==null?void 0:Ke.toDate)==null?void 0:un.call(Ke))||new Date(0))>=K&&he.status!=="cancelled"}),Ze=w.filter(he=>{var Ke,un;return(((un=(Ke=he.createdAt)==null?void 0:Ke.toDate)==null?void 0:un.call(Ke))||new Date(0))>=le&&he.status!=="cancelled"}),vt=w.filter(he=>he.status==="delivered");return{todayRevenue:je.reduce((he,Re)=>he+(Re.total||0),0),todayOrders:je.length,todayPlatformFee:je.reduce((he,Re)=>he+(Re.platformFee||0),0),weekRevenue:Ae.reduce((he,Re)=>he+(Re.total||0),0),weekOrders:Ae.length,weekPlatformFee:Ae.reduce((he,Re)=>he+(Re.platformFee||0),0),monthRevenue:Ze.reduce((he,Re)=>he+(Re.total||0),0),monthOrders:Ze.length,monthPlatformFee:Ze.reduce((he,Re)=>he+(Re.platformFee||0),0),totalRevenue:vt.reduce((he,Re)=>he+(Re.total||0),0),totalPlatformFee:vt.reduce((he,Re)=>he+(Re.platformFee||0),0),totalAdminCommission:vt.reduce((he,Re)=>he+(Re.adminCommission||0),0)}},ct=async()=>{try{const[A,W,K,le,je]=await Promise.all([Be(ue(z,"users")),Be(ue(z,"restaurants")),Be(ue(z,"menuItems")),Be(ue(z,"orders")),Be(ue(z,"wallets"))]);let Ae={docs:[]};try{Ae=await Be(ue(z,"tasks"))}catch{console.log("   ")}const Ze=A.docs.map(fe=>({uid:fe.id,...fe.data()}));R(Ze);const vt=W.docs.map(fe=>({id:fe.id,...fe.data()}));b(vt);const he=le.docs.map(fe=>({id:fe.id,...fe.data()}));y(he);const Re=Ae.docs.map(fe=>({id:fe.id,...fe.data()}));Lc(Re.sort((fe,ra)=>{var si,ia;return(((si=ra.createdAt)==null?void 0:si.seconds)||0)-(((ia=fe.createdAt)==null?void 0:ia.seconds)||0)}));const Ke={};je.docs.forEach(fe=>{Ke[fe.id]=fe.data()});const un=Ke.app_earnings||{balance:0,totalEarnings:0},Se=Ze.filter(fe=>fe.role==="admin"),sa=Ze.filter(fe=>fe.role==="courier"),ti=Ze.filter(fe=>fe.role==="customer"),ni=Ze.filter(fe=>fe.role==="owner"),Ah=Se.map(fe=>{const ra=vt.filter(ia=>ia.referredBy===fe.uid),si=Ke[fe.uid]||{balance:0,totalEarnings:0};return{uid:fe.uid,email:fe.email,name:fe.name,walletBalance:si.balance||0,totalEarnings:si.totalEarnings||0,restaurantsCount:ra.length,restaurants:ra}});C(Ah),m({users:Ze.length,restaurants:vt.length,menuItems:K.size,orders:he.length,pendingOrders:he.filter(fe=>fe.status==="pending").length,deliveredOrders:he.filter(fe=>fe.status==="delivered").length,admins:Se.length,couriers:sa.length,customers:ti.length,owners:ni.length,totalAppEarnings:un.totalEarnings||0});const Do=await nt(J(z,"settings","general"));if(Do.exists()){const fe=Do.data();v(fe),E(fe)}else{const fe={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};v(fe),E(fe)}}catch(A){console.error("   :",A),e.error("  ")}finally{c(!1),d(!1)}};I.useEffect(()=>{ct()},[]);const So=()=>{d(!0),ct(),e.info("  ...")},Sh=async()=>{try{await fn(J(z,"settings","general"),x,{merge:!0}),v(x),N(!1),e.success("    ")}catch(A){console.error("   :",A),e.error("  ")}},ea=async A=>{try{await ye(J(z,"restaurants",A),{...L,updatedAt:ae()}),P(null),e.success("    "),ct()}catch(W){console.error("   :",W),e.error("  ")}},Fc=async(A,W)=>{try{if(!W.type.startsWith("image/")){e.warning("   ");return}if(W.size>5*1024*1024){e.warning("        5MB");return}V(!0);const K=W.name.replace(/\s+/g,"_"),le=`restaurants/${A}/logo_${Date.now()}_${K}`,je=Ja(s,le),Ae={contentType:W.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await rp(je,W,Ae);const Ze=await Ya(je);await ye(J(z,"restaurants",A),{logoUrl:Ze,updatedAt:ae()}),e.success("    "),ct()}catch(K){console.error("   :",K),e.error("  ")}finally{V(!1)}},Co=async A=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await Yn(J(z,"restaurants",A)),e.success("   "),ct()}catch(K){console.error("   :",K),e.error("  ")}},ei=async A=>{try{await ye(J(z,"users",A),{...F,updatedAt:ae()}),B(null),e.success("    "),ct()}catch(W){console.error("   :",W),e.error("  ")}},Cs=async A=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await Yn(J(z,"users",A)),e.success("     "),e.warning(":      Firebase Auth"),ct()}catch(K){console.error("   :",K),e.error("  ")}},Ao=async(A,W)=>{try{await ye(J(z,"orders",A),{status:W,updatedAt:ae()}),e.success("    "),ct()}catch(K){console.error("   :",K),e.error("  ")}},Ch=A=>{switch(A){case"customer":return" ";case"owner":return"  ";case"courier":return" ";case"admin":return" ";case"developer":return" ";default:return A}},Uc=A=>{switch(A){case"pending":return"  ";case"accepted":return" ";case"preparing":return"  ";case"ready":return" ";case"out_for_delivery":return"  ";case"delivered":return"  ";case"cancelled":return" ";default:return A}};return o?r.jsx(De,{allow:["developer"],children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx(pn,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-gray-600",children:"   ..."})]})})}):r.jsx(De,{allow:["developer"],children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-extrabold text-primary",children:"   "}),r.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),r.jsxs("button",{onClick:So,disabled:u,className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(pn,{className:`w-5 h-5 ${u?"animate-spin":""}`}),""]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[{id:"overview",label:"  "},{id:"finance",label:" "},{id:"restaurants",label:" "},{id:"licenses",label:" "},{id:"orders",label:" "},{id:"users",label:" "},{id:"couriers",label:" "},{id:"admins",label:" "},{id:"tasks",label:" "},{id:"settings",label:" "},{id:"tools",label:" "}].map(A=>r.jsx("button",{onClick:()=>a(A.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition ${i===A.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:A.label},A.id))}),i==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.users}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.restaurants}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.orders}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.admins}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.couriers}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.totalAppEarnings.toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(z6,{className:"w-6 h-6 text-orange-500"}),r.jsx("h2",{className:"text-xl font-bold",children:" Firebase"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),r.jsx("p",{className:"font-mono text-sm",children:Tn.projectId})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),r.jsx("p",{className:"font-mono text-sm",children:Tn.storageBucket})]})]}),r.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[r.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:" Console"}),r.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:" Firestore"}),r.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:" Auth"}),r.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:" Storage"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.customers}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.owners}),r.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:h.couriers}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.admins}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"   "}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-sky-600 mb-3",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold text-purple-600",children:"developer:"}),"     "]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold text-amber-600",children:"admin:"}),"   ( )  "]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold text-orange-600",children:"owner:"}),"      "]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold text-emerald-600",children:"courier:"}),"      "]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold text-blue-600",children:"customer:"}),"   "]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-green-600 mb-3",children:"  Firestore"}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-2 text-sm",children:[r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" users/","{uid}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" restaurants/","{ownerId}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" menuItems/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" orders/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" orders/","{id}","/messages"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" wallets/","{adminId}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" hiringRequests/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" notifications/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" promotions/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" tasks/","{auto}"]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[" settings/","{doc}"]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-amber-600 mb-3",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"bg-amber-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold",children:"  (platformFee):"})," 1.75    (0.25  2 )"]}),r.jsxs("div",{className:"bg-amber-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold",children:"  (adminCommission):"})," 0.5  (     admin)"]}),r.jsxs("div",{className:"bg-amber-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold",children:" :"})," 2-3   "]}),r.jsxs("div",{className:"bg-amber-50 rounded-xl p-3",children:[r.jsx("span",{className:"font-bold",children:" :"})," wallets/","{adminId}","  "]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-blue-600 mb-3",children:"  "}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-center text-sm",children:[r.jsx("span",{className:"bg-gray-200 px-3 py-1 rounded-full",children:"pending"}),r.jsx("span",{children:""}),r.jsx("span",{className:"bg-yellow-200 px-3 py-1 rounded-full",children:"accepted"}),r.jsx("span",{children:""}),r.jsx("span",{className:"bg-orange-200 px-3 py-1 rounded-full",children:"preparing"}),r.jsx("span",{children:""}),r.jsx("span",{className:"bg-cyan-200 px-3 py-1 rounded-full",children:"ready"}),r.jsx("span",{children:""}),r.jsx("span",{className:"bg-purple-200 px-3 py-1 rounded-full",children:"out_for_delivery"}),r.jsx("span",{children:""}),r.jsx("span",{className:"bg-green-200 px-3 py-1 rounded-full",children:"delivered"})]}),r.jsx("p",{className:"text-center text-gray-500 mt-2 text-xs",children:" cancelled "})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-purple-600 mb-3",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[r.jsxs("a",{href:"/terms",target:"_blank",className:"bg-purple-50 rounded-xl p-3 hover:bg-purple-100 transition-colors flex items-center gap-2",children:[r.jsx(zu,{className:"w-4 h-4"}),"  "]}),r.jsxs("a",{href:"/courier-terms",target:"_blank",className:"bg-purple-50 rounded-xl p-3 hover:bg-purple-100 transition-colors flex items-center gap-2",children:[r.jsx(zu,{className:"w-4 h-4"})," "]}),r.jsxs("a",{href:"/privacy-policy",target:"_blank",className:"bg-purple-50 rounded-xl p-3 hover:bg-purple-100 transition-colors flex items-center gap-2",children:[r.jsx(zu,{className:"w-4 h-4"})," "]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-rose-600 mb-3",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"       "]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"      "]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"   (localStorage)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"     "]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"    "]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"   (hiringRequests)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"   (promotions)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"  "]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"   (free/premium)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"   (bronze/silver/gold)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"   (tasks)"]}),r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-2",children:[r.jsx(Ce,{className:"w-4 h-4 text-green-500"}),"    GPS"]})]})]})]})]}),i==="finance"&&r.jsx("div",{className:"space-y-6",children:(()=>{const A=Io();return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:A.totalRevenue.toFixed(0)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:A.totalPlatformFee.toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:A.totalAdminCommission.toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:(A.totalPlatformFee+A.totalAdminCommission).toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]})]})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:" "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold",children:A.todayOrders})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsxs("span",{className:"font-bold",children:[A.todayRevenue.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[A.todayPlatformFee.toFixed(2)," ."]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"  7 "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold",children:A.weekOrders})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsxs("span",{className:"font-bold",children:[A.weekRevenue.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[A.weekPlatformFee.toFixed(2)," ."]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"  30 "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold",children:A.monthOrders})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsxs("span",{className:"font-bold",children:[A.monthRevenue.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[A.monthPlatformFee.toFixed(2)," ."]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"   "}),r.jsx("div",{className:"space-y-3",children:T.map(W=>({...W,ordersCount:w.filter(K=>K.restaurantId===W.id&&K.status==="delivered").length,revenue:w.filter(K=>K.restaurantId===W.id&&K.status==="delivered").reduce((K,le)=>K+(le.total||0),0)})).sort((W,K)=>K.revenue-W.revenue).slice(0,5).map((W,K)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:K===0?"":K===1?"":K===2?"":`#${K+1}`}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:W.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[W.ordersCount," "]})]})]}),r.jsxs("p",{className:"font-bold text-green-600",children:[W.revenue.toFixed(2)," ."]})]},W.id))})]})]})})()}),i==="restaurants"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",T.length,")"]}),r.jsx("button",{onClick:()=>Rc(!Hi),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold",children:Hi?" ":"  "})]}),Hi&&r.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[r.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"text",placeholder:":  ",value:kn,onChange:A=>_o(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),r.jsx("input",{type:"text",placeholder:": ",value:Wi,onChange:A=>Ki(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Pc,onChange:A=>Dc(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:Gi,onChange:A=>bo(A.target.value),className:"w-full border rounded-xl p-3"})]})]}),r.jsxs("div",{className:"border-t mt-4 pt-4",children:[r.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"    ( )"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   *"}),r.jsx("input",{type:"email",placeholder:"owner@example.com",value:os,onChange:A=>ir(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"password",placeholder:"6   ",value:ar,onChange:A=>Qi(A.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),r.jsx("button",{onClick:To,disabled:ls||!kn.trim()||!os.trim()||!ar.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:ls?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):"  "})]}),r.jsx("div",{className:"space-y-4",children:T.map(A=>{var W;return r.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:k===A.id?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"text",value:L.name||"",onChange:K=>D({...L,name:K.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"text",value:L.phone||"",onChange:K=>D({...L,phone:K.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"email",value:L.email||"",onChange:K=>D({...L,email:K.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:""}),r.jsx("input",{type:"text",value:L.city||"",onChange:K=>D({...L,city:K.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-sm text-gray-600",children:""}),r.jsx("input",{type:"text",value:L.location||"",onChange:K=>D({...L,location:K.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-sm text-gray-600",children:"  ()"}),r.jsxs("select",{value:L.referredBy||"",onChange:K=>D({...L,referredBy:K.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[r.jsx("option",{value:"",children:"--   ( ) --"}),_.filter(K=>K.role==="admin").map(K=>r.jsxs("option",{value:K.uid,children:[" ",K.name||K.email]},K.uid))]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"file",accept:"image/*",onChange:K=>{var je;const le=(je=K.target.files)==null?void 0:je[0];le&&Fc(A.id,le)},className:"w-full border rounded-xl p-2 mt-1",disabled:ie}),ie&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" ..."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>ea(A.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[r.jsx(d1,{className:"w-4 h-4"})," "]}),r.jsxs("button",{onClick:()=>P(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[r.jsx(Br,{className:"w-4 h-4"})," "]})]})]}):r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:A.logoUrl?r.jsx("img",{src:A.logoUrl,alt:A.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg",children:A.name}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[A.phone&&r.jsxs("p",{children:[" ",A.phone]}),A.email&&r.jsxs("p",{children:[" ",A.email]}),A.city&&r.jsxs("p",{children:[" ",A.city]}),A.referredBy&&r.jsxs("p",{className:"text-purple-600",children:["  : ",((W=j.find(K=>K.uid===A.referredBy))==null?void 0:W.name)||A.referredBy.slice(0,8)]})]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{P(A.id),D(A)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"",children:r.jsx(Dd,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>Co(A.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"",children:r.jsx(an,{className:"w-5 h-5"})})]}),r.jsxs("select",{value:A.referredBy||"",onChange:async K=>{const le=K.target.value;try{await ye(J(z,"restaurants",A.id),{referredBy:le||null,updatedAt:ae()}),e.success(le?"   ":"   "),ct()}catch{e.error("   ")}},className:"text-xs border rounded-lg p-1",title:" ",children:[r.jsx("option",{value:"",children:"  "}),_.filter(K=>K.role==="admin").map(K=>r.jsxs("option",{value:K.uid,children:[" ",K.name||K.email]},K.uid))]})]})]})},A.id)})})]}),i==="orders"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",w.length,")"]}),r.jsxs("select",{value:se,onChange:A=>ve(A.target.value),className:"border rounded-xl p-2",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"accepted",children:""}),r.jsx("option",{value:"preparing",children:" "}),r.jsx("option",{value:"ready",children:""}),r.jsx("option",{value:"out_for_delivery",children:" "}),r.jsx("option",{value:"delivered",children:" "}),r.jsx("option",{value:"cancelled",children:""})]})]}),r.jsx("div",{className:"space-y-3",children:w.filter(A=>se==="all"||A.status===se).sort((A,W)=>{var K,le;return(((K=W.createdAt)==null?void 0:K.seconds)||0)-(((le=A.createdAt)==null?void 0:le.seconds)||0)}).map(A=>{var W,K;return r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[r.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-bold",children:[" #",A.id.slice(-8)]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",A.restaurantName||""]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",A.address]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",(W=A.total)==null?void 0:W.toFixed(2)," ."]}),A.platformFee&&r.jsxs("p",{className:"text-xs text-green-600",children:[" : ",A.platformFee," .",A.adminCommission?` |  : ${A.adminCommission} .`:""]})]}),r.jsxs("div",{className:"text-left",children:[r.jsx("span",{className:`inline-block px-3 py-1 rounded-xl text-sm font-semibold ${A.status==="delivered"?"bg-green-100 text-green-700":A.status==="cancelled"?"bg-red-100 text-red-700":A.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:Uc(A.status)}),r.jsxs("select",{value:A.status,onChange:le=>Ao(A.id,le.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"accepted",children:""}),r.jsx("option",{value:"preparing",children:" "}),r.jsx("option",{value:"ready",children:""}),r.jsx("option",{value:"out_for_delivery",children:" "}),r.jsx("option",{value:"delivered",children:" "}),r.jsx("option",{value:"cancelled",children:""})]})]})]}),r.jsxs("div",{className:"mt-3 pt-3 border-t",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(K=A.items)==null?void 0:K.map((le,je)=>r.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[le.name,"  ",le.qty]},je))})]})]},A.id)})})]}),i==="users"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",_.length,")"]}),r.jsxs("select",{value:pe,onChange:A=>Le(A.target.value),className:"border rounded-xl p-2",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"customer",children:""}),r.jsx("option",{value:"owner",children:" "}),r.jsx("option",{value:"courier",children:""}),r.jsx("option",{value:"admin",children:""}),r.jsx("option",{value:"developer",children:""})]})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.filter(A=>pe==="all"||A.role===pe).map(A=>r.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:$===A.uid?r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"",value:F.name||"",onChange:W=>X({...F,name:W.target.value}),className:"w-full border rounded-xl p-2"}),r.jsx("input",{type:"text",placeholder:"",value:F.phone||"",onChange:W=>X({...F,phone:W.target.value}),className:"w-full border rounded-xl p-2"}),r.jsxs("select",{value:F.role||"customer",onChange:W=>X({...F,role:W.target.value}),className:"w-full border rounded-xl p-2",children:[r.jsx("option",{value:"customer",children:""}),r.jsx("option",{value:"owner",children:" "}),r.jsx("option",{value:"courier",children:""}),r.jsx("option",{value:"admin",children:""}),r.jsx("option",{value:"developer",children:""})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>ei(A.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:""}),r.jsx("button",{onClick:()=>B(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:""})]})]}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:A.name||" "}),r.jsx("p",{className:"text-sm text-gray-600",children:A.email}),r.jsx("p",{className:"text-xs mt-1",children:Ch(A.role)})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>{B(A.uid),X(A)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:r.jsx(Dd,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Cs(A.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:r.jsx(an,{className:"w-4 h-4"})})]})]})})},A.uid))})]}),i==="couriers"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["  (",h.couriers,")"]}),r.jsx("button",{onClick:()=>go(!po),className:"flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-xl font-semibold",children:po?" ":"  "})]}),po&&r.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[r.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"email",placeholder:"courier@example.com",value:as,onChange:A=>xo(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"password",placeholder:"6   ",value:Ts,onChange:A=>vo(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),r.jsx("input",{type:"text",placeholder:" ",value:yo,onChange:A=>qi(A.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:lt,onChange:A=>yt(A.target.value),className:"w-full border rounded-xl p-3"})]})]}),r.jsx("button",{onClick:Vc,disabled:Jr||!as.trim()||!Ts.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Jr?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):"   "})]}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[_.filter(A=>A.role==="courier").map(A=>r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:A.name||" "}),r.jsx("p",{className:"text-sm text-gray-600",children:A.email}),A.phone&&r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",A.phone]})]})]}),r.jsx("div",{className:"mt-4 pt-3 border-t",children:r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-lg font-bold text-green-600",children:w.filter(W=>W.courierId===A.uid&&W.status==="delivered").length}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-lg font-bold text-blue-600",children:w.filter(W=>W.courierId===A.uid&&W.status==="out_for_delivery").length}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]})]})})]},A.uid)),h.couriers===0&&r.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"   "})]})]}),i==="admins"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",j.length,")"]}),r.jsxs("button",{onClick:()=>cn(!ln),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[r.jsx(sc,{className:"w-5 h-5"}),ln?"":" "]})]}),ln&&r.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[r.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"    "}),r.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"           "}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"  :"}),r.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[_.filter(A=>A.role==="customer").slice(0,10).map(A=>r.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:A.name||" "}),r.jsx("p",{className:"text-sm text-gray-500",children:A.email})]}),r.jsx("button",{onClick:async()=>{if(await n.confirm(`   ${A.name||A.email}  `,{title:"  "}))try{await ye(J(z,"users",A.uid),{role:"admin"}),e.success("     "),cn(!1),ct()}catch{e.error("  ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:" "})]},A.uid)),_.filter(A=>A.role==="customer").length===0&&r.jsx("p",{className:"text-gray-500 text-center py-4",children:"    "})]})]}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"     :"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"email",placeholder:"admin@example.com",value:sr,onChange:A=>Cc(A.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"password",placeholder:"  (6   )",value:ks,onChange:A=>$i(A.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),r.jsx("input",{type:"text",placeholder:" ",value:rr,onChange:A=>Yr(A.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Bi,onChange:A=>zi(A.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),r.jsx("button",{onClick:Mc,disabled:mo||!sr.trim()||!ks.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:mo?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(sc,{className:"w-5 h-5"}),"  "]})}),r.jsx("p",{className:"text-xs text-orange-600 mt-2",children:" :        .     ."})]}),r.jsx("div",{className:"border-t pt-4 mt-4",children:r.jsx("p",{className:"text-xs text-gray-500",children:'         ""'})})]}),r.jsxs("div",{className:"space-y-4",children:[j.map(A=>r.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[r.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>Bn(Pt===A.uid?null:A.uid),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:A.name||" "}),r.jsx("p",{className:"text-sm text-gray-600",children:A.email})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-left",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(p1,{className:"w-4 h-4 text-green-600"}),r.jsxs("span",{className:"font-bold text-green-600",children:[A.walletBalance.toFixed(2)," ."]})]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[": ",A.totalEarnings.toFixed(2)," . | ",A.restaurantsCount," "]})]}),Pt===A.uid?r.jsx(BP,{className:"w-5 h-5 text-gray-400"}):r.jsx(a1,{className:"w-5 h-5 text-gray-400"})]})]})}),Pt===A.uid&&r.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[r.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["      (",A.restaurants.length,"):"]}),A.restaurants.length>0?r.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:A.restaurants.map(W=>r.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:W.logoUrl?r.jsx("img",{src:W.logoUrl,alt:W.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-sm",children:W.name}),r.jsx("p",{className:"text-xs text-gray-500",children:W.city||" "})]})]},W.id))}):r.jsx("p",{className:"text-gray-500 text-sm",children:"    "}),r.jsx("div",{className:"mt-4 pt-3 border-t",children:r.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[r.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-green-700",children:A.walletBalance.toFixed(2)}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-blue-700",children:A.totalEarnings.toFixed(2)}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-purple-700",children:w.filter(W=>W.referredBy===A.uid).length}),r.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})})]})]},A.uid)),j.length===0&&r.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"   "})]})]}),i==="settings"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold",children:"  "}),O?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{N(!1),E(p)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:""}),r.jsx("button",{onClick:Sh,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:" "})]}):r.jsx("button",{onClick:()=>N(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:" "})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),O?r.jsx("input",{type:"number",value:x.deliveryFee||0,onChange:A=>E({...x,deliveryFee:Number(A.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[p.deliveryFee||7," ."]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),O?r.jsx("input",{type:"number",step:"0.1",value:x.platformFee||1,onChange:A=>E({...x,platformFee:Number(A.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[p.platformFee||1," ./"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),O?r.jsx("input",{type:"number",step:"0.05",value:x.adminCommissionRate||.75,onChange:A=>E({...x,adminCommissionRate:Number(A.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[p.adminCommissionRate||.75," ./"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   "}),O?r.jsx("input",{type:"number",value:x.minOrderAmount||0,onChange:A=>E({...x,minOrderAmount:Number(A.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[p.minOrderAmount||20," ."]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),O?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"time",value:((Ro=x.workingHours)==null?void 0:Ro.open)||"09:00",onChange:A=>E({...x,workingHours:{...x.workingHours,open:A.target.value}}),className:"flex-1 border rounded-xl p-3"}),r.jsx("input",{type:"time",value:((Po=x.workingHours)==null?void 0:Po.close)||"23:00",onChange:A=>E({...x,workingHours:{...x.workingHours,close:A.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):r.jsxs("p",{className:"text-2xl font-bold",children:[((ta=p.workingHours)==null?void 0:ta.open)||"09:00"," - ",((na=p.workingHours)==null?void 0:na.close)||"23:00"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),O?r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:x.maintenanceMode||!1,onChange:A=>E({...x,maintenanceMode:A.target.checked}),className:"w-6 h-6"}),r.jsx("span",{className:"text-lg",children:x.maintenanceMode?"":""})]}):r.jsx("p",{className:`text-2xl font-bold ${p.maintenanceMode?"text-red-600":"text-green-600"}`,children:p.maintenanceMode?" ":" "})]})]})}),r.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[r.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"   (  = 1.75 .):"}),r.jsxs("div",{className:"text-sky-800 space-y-2",children:[r.jsxs("p",{children:[" ",r.jsx("strong",{children:" :"})," ",p.platformFee||1," .   "]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:" :"})," ",p.adminCommissionRate||.75," .   "]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[r.jsx("p",{className:"font-bold mb-2",children:" :   5 "}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"    :"})]}),r.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[r.jsxs("li",{children:["  : 5  ",p.adminCommissionRate||.75," = ",r.jsxs("strong",{children:[(5*(p.adminCommissionRate||.75)).toFixed(2)," ."]})]}),r.jsxs("li",{children:["  : 5  ",p.platformFee||1," = ",r.jsxs("strong",{children:[(5*(p.platformFee||1)).toFixed(2)," ."]})]}),r.jsxs("li",{className:"text-green-700",children:[": ",r.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})]}),r.jsxs("p",{className:"mt-2",children:[" ",r.jsx("strong",{children:"    :"})]}),r.jsx("ul",{className:"mr-6 list-disc text-sm",children:r.jsxs("li",{children:["    : 5  1.75 = ",r.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})})]})]})]})]}),i==="tasks"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold",children:"   "}),r.jsxs("button",{onClick:()=>Xi(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[r.jsx(Ic,{className:"w-5 h-5"})," "]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(A=>r.jsxs("button",{onClick:()=>cs(A),className:`px-4 py-2 rounded-xl font-semibold transition ${qn===A?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[A==="all"&&" ",A==="pending"&&"  ",A==="in_progress"&&"  ",A==="completed"&&" ",A==="cancelled"&&" "]},A))}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:zn.filter(A=>A.status==="pending").length}),r.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:zn.filter(A=>A.status==="in_progress").length}),r.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),r.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:zn.filter(A=>A.status==="completed").length}),r.jsx("p",{className:"text-sm text-green-700",children:""})]}),r.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:zn.filter(A=>A.status==="cancelled").length}),r.jsx("p",{className:"text-sm text-red-700",children:""})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:zn.filter(A=>qn==="all"||A.status===qn).length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("p",{className:"text-4xl mb-2",children:""}),r.jsxs("p",{children:["   ",qn!=="all"&&"  "]})]}):r.jsx("div",{className:"divide-y",children:zn.filter(A=>qn==="all"||A.status===qn).map(A=>{var K,le,je;const W=_.find(Ae=>Ae.uid===A.assignedTo);return r.jsx("div",{className:"p-4 hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${A.priority==="high"?"bg-red-100 text-red-700":A.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:A.priority==="high"?" ":A.priority==="medium"?" ":" "}),r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${A.status==="pending"?"bg-yellow-100 text-yellow-700":A.status==="in_progress"?"bg-blue-100 text-blue-700":A.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[A.status==="pending"&&"  ",A.status==="in_progress"&&"  ",A.status==="completed"&&" ",A.status==="cancelled"&&" "]})]}),r.jsx("h3",{className:"font-bold text-gray-800",children:A.title}),A.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.description}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[r.jsxs("span",{children:[" ",(W==null?void 0:W.name)||A.assignedToName||" "]}),A.dueDate&&r.jsxs("span",{children:[" ",new Date(A.dueDate).toLocaleDateString("ar-SA")]}),r.jsxs("span",{children:[" ",((je=(le=(K=A.createdAt)==null?void 0:K.toDate)==null?void 0:le.call(K))==null?void 0:je.toLocaleDateString("ar-SA"))||" "]})]}),A.notes&&r.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:[" ",A.notes]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[A.status==="pending"&&r.jsx("button",{onClick:async()=>{try{await ye(J(z,"tasks",A.id),{status:"in_progress",updatedAt:ae()}),e.success("  "),ct()}catch{e.error("   ")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:" ",children:""}),(A.status==="pending"||A.status==="in_progress")&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:async()=>{try{await ye(J(z,"tasks",A.id),{status:"completed",completedAt:ae(),updatedAt:ae()}),e.success("  "),ct()}catch{e.error("   ")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:" ",children:""}),r.jsx("button",{onClick:async()=>{if(await n.confirm("    ",{dangerous:!0}))try{await ye(J(z,"tasks",A.id),{status:"cancelled",updatedAt:ae()}),e.success("  "),ct()}catch{e.error("   ")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]}),r.jsx("button",{onClick:async()=>{if(await n.confirm("     ",{dangerous:!0}))try{await Yn(J(z,"tasks",A.id)),e.success("  "),ct()}catch{e.error("   ")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]})]})},A.id)})})}),Zr&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"   "}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),r.jsx("input",{type:"text",value:pt,onChange:A=>Yi(A.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:":    "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),r.jsx("textarea",{value:or,onChange:A=>Is(A.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:" ..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),r.jsxs("select",{value:Ji,onChange:A=>jo(A.target.value),className:"w-full border rounded-xl px-4 py-2",children:[r.jsx("option",{value:"",children:"--   --"}),_.filter(A=>A.role==="admin").map(A=>r.jsx("option",{value:A.uid,children:A.name||A.email},A.uid))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),r.jsxs("select",{value:Ss,onChange:A=>Eo(A.target.value),className:"w-full border rounded-xl px-4 py-2",children:[r.jsx("option",{value:"low",children:" "}),r.jsx("option",{value:"medium",children:" "}),r.jsx("option",{value:"high",children:" "})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:" "}),r.jsx("input",{type:"date",value:Oc,onChange:A=>lr(A.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>{Xi(!1),Yi(""),Is(""),jo(""),Eo("medium"),lr("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:""}),r.jsx("button",{onClick:async()=>{if(!pt.trim()||!Ji){e.error("   ");return}Zi(!0);try{const A=_.find(W=>W.uid===Ji);await es(ue(z,"tasks"),{title:pt.trim(),description:or.trim(),assignedTo:Ji,assignedToName:(A==null?void 0:A.name)||(A==null?void 0:A.email)||"",status:"pending",priority:Ss,dueDate:Oc||null,createdBy:t==null?void 0:t.uid,createdAt:ae(),updatedAt:ae(),completedAt:null,notes:""}),e.success("   "),Xi(!1),Yi(""),Is(""),jo(""),Eo("medium"),lr(""),ct()}catch(A){console.error(A),e.error("   ")}finally{Zi(!1)}},disabled:ko,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:ko?" ...":" "})]})]})})]}),i==="tools"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"  "}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("button",{onClick:()=>{const A={exportDate:new Date().toISOString(),users:_.length,restaurants:T.length,orders:w.length,admins:j.length,stats:h,settings:p},W=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),K=URL.createObjectURL(W),le=document.createElement("a");le.href=K,le.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,le.click(),e.success("   ")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:" "}),r.jsx("p",{className:"text-xs opacity-75",children:"  JSON"})]})]}),r.jsxs("button",{onClick:()=>{const A=[[" ","","","",""].join(","),...w.map(je=>{var Ae,Ze,vt;return[je.id.slice(-8),je.restaurantName||" ",je.total,je.status,((vt=(Ze=(Ae=je.createdAt)==null?void 0:Ae.toDate)==null?void 0:Ze.call(Ae))==null?void 0:vt.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),W=new Blob(["\uFEFF"+A],{type:"text/csv;charset=utf-8"}),K=URL.createObjectURL(W),le=document.createElement("a");le.href=K,le.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,le.click(),e.success("   ")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:" "}),r.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]}),r.jsxs("button",{onClick:()=>{const A=[["","","",""].join(","),..._.map(je=>[je.name||" ",je.email,je.role,je.phone||""].join(","))].join(`
`),W=new Blob(["\uFEFF"+A],{type:"text/csv;charset=utf-8"}),K=URL.createObjectURL(W),le=document.createElement("a");le.href=K,le.download=`users-${new Date().toISOString().split("T")[0]}.csv`,le.click(),e.success("   ")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:" "}),r.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:async()=>{const A=w.filter(K=>K.status==="pending");if(A.length===0){e.info("   ");return}if(await n.confirm(`  ${A.length}  .   `,{title:"  ",dangerous:!0}))try{await Promise.all(A.map(K=>ye(J(z,"orders",K.id),{status:"cancelled",updatedAt:ae()}))),e.success(`  ${A.length} `),ct()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:"  "}),r.jsxs("p",{className:"text-xs opacity-75",children:[w.filter(A=>A.status==="pending").length,"  "]})]})]}),r.jsxs("button",{onClick:async()=>{const A=new Date;A.setMonth(A.getMonth()-3);const W=w.filter(le=>{var Ae,Ze;return(((Ze=(Ae=le.createdAt)==null?void 0:Ae.toDate)==null?void 0:Ze.call(Ae))||new Date)<A&&(le.status==="delivered"||le.status==="cancelled")});if(W.length===0){e.info("   ");return}if(await n.confirm(`  ${W.length}   (  3 ).   `,{title:"  ",dangerous:!0}))try{await Promise.all(W.map(le=>Yn(J(z,"orders",le.id)))),e.success(`  ${W.length}  `),ct()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:"  "}),r.jsx("p",{className:"text-xs opacity-75",children:"   3 "})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Firestore"})]}),r.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Authentication"})]}),r.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Storage"})]}),r.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Project ID"}),r.jsx("p",{className:"font-mono",children:Tn.projectId})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),r.jsx("p",{className:"font-mono",children:Tn.storageBucket})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:" "}),r.jsx("p",{className:"font-bold",children:p.appVersion||"1.0.0"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:" "}),r.jsx("p",{className:`font-bold ${p.maintenanceMode?"text-red-600":"text-green-600"}`,children:p.maintenanceMode?" ":" "})]})]})]})]}),i==="licenses"&&r.jsx(ND,{restaurants:T,onUpdate:So,toast:e,dialog:n}),r.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:r.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[r.jsxs("span",{children:[" ",t==null?void 0:t.email]}),r.jsxs("span",{children:[" ",t==null?void 0:t.uid.slice(0,12),"..."]}),r.jsxs("span",{children:[" ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},ND=({restaurants:t,onUpdate:e,toast:n,dialog:s})=>{const[i,a]=I.useState("pending"),[o,c]=I.useState({}),[u,d]=I.useState(null),[h,m]=I.useState(""),[p,v]=I.useState(null),[_,R]=I.useState(new Set),[T,b]=I.useState(""),[w,y]=I.useState(!1),j=t.filter(V=>V.commercialLicenseUrl),C=t.filter(V=>!V.commercialLicenseUrl),O=j.filter(V=>i==="all"?!0:i==="missing"?!1:V.licenseStatus===i||!V.licenseStatus&&i==="pending"),N={all:j.length,pending:j.filter(V=>!V.licenseStatus||V.licenseStatus==="pending").length,approved:j.filter(V=>V.licenseStatus==="approved").length,rejected:j.filter(V=>V.licenseStatus==="rejected").length,missing:C.length},x=async(V,$)=>{if(!$.trim()){n.warning("  ");return}v(V.id);try{await es(ue(z,"notifications"),{type:"license_reminder",recipientId:V.ownerId,recipientType:"owner",restaurantId:V.id,restaurantName:V.name,title:" :   ",message:$,read:!1,createdAt:ae()}),n.success(`    ${V.name}`),m("")}catch(B){n.error("  : "+(B.message||"  "))}finally{v(null)}},E=async()=>{if(!T.trim()){n.warning("  ");return}const V=_.size>0?C.filter(B=>_.has(B.id)):C;if(V.length===0){n.warning("    ");return}if(await s.confirm(`       ${V.length} `,{title:"  "})){y(!0);try{const B=V.map(F=>es(ue(z,"notifications"),{type:"license_reminder",recipientId:F.ownerId,recipientType:"owner",restaurantId:F.id,restaurantName:F.name,title:" :   ",message:T,read:!1,createdAt:ae()}));await Promise.all(B),n.success(`    ${V.length}   `),b(""),R(new Set)}catch(B){n.error("   : "+(B.message||"  "))}finally{y(!1)}}},k=()=>{_.size===C.length?R(new Set):R(new Set(C.map(V=>V.id)))},P=V=>{const $=new Set(_);$.has(V)?$.delete(V):$.add(V),R($)},L=async(V,$)=>{const B=o[V]||"";if($==="rejected"&&!B.trim()){n.warning("   ");return}const F=$==="approved"?" ":"";if(await s.confirm(`    ${F}   `,{title:`${F} `})){d(V);try{await ye(J(z,"restaurants",V),{licenseStatus:$,licenseNotes:$==="rejected"?B:"",updatedAt:ae()}),n.success($==="approved"?"    ":"  "),c(se=>({...se,[V]:""})),e()}catch(se){n.error(" : "+(se.message||"  "))}finally{d(null)}}},D=async(V,$)=>{const B=" ";if(await s.confirm(`     ${B}  "${V.name}"
      .`,{title:`  ${B}`})){d(V.id);try{const X={licenseStatus:null,licenseNotes:"",updatedAt:ae(),commercialLicenseUrl:null};await ye(J(z,"restaurants",V.id),X),await es(ue(z,"notifications"),{type:"license_deleted",recipientId:V.ownerId,recipientType:"owner",restaurantId:V.id,restaurantName:V.name,title:`   ${B}`,message:`  ${B}  .         .`,read:!1,createdAt:ae()}),n.success(`  ${B}    `),e()}catch(X){n.error("  : "+(X.message||"  "))}finally{d(null)}}},ie=V=>{switch(V){case"approved":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[r.jsx(Ce,{className:"w-3 h-3"})," "]});case"rejected":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:[r.jsx(pi,{className:"w-3 h-3"})," "]});default:return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[r.jsx(ws,{className:"w-3 h-3"}),"  "]})}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(Dv,{className:"w-6 h-6 text-sky-500"})," "]}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:["pending","approved","rejected","all","missing"].map(V=>r.jsxs("button",{onClick:()=>a(V),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${i===V?V==="missing"?"bg-orange-500 text-white":"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[V==="all"&&` (${N.all})`,V==="pending"&&`  (${N.pending})`,V==="approved"&&` (${N.approved})`,V==="rejected"&&` (${N.rejected})`,V==="missing"&&`   (${N.missing})`]},V))})]}),i==="missing"&&r.jsx("div",{className:"space-y-4",children:C.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx(Ce,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),r.jsx("p",{className:"text-green-600 font-semibold",children:"    "})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-2xl p-5",children:[r.jsx("h3",{className:"font-bold text-orange-800 mb-3 flex items-center gap-2",children:"   "}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:_.size===C.length,onChange:k,className:"w-5 h-5 rounded border-orange-300 text-orange-500 focus:ring-orange-500"}),r.jsxs("span",{className:"text-sm text-orange-700",children:["  (",C.length,")"]})]}),_.size>0&&r.jsxs("span",{className:"text-sm bg-orange-200 text-orange-800 px-2 py-1 rounded-full",children:[": ",_.size]})]}),r.jsx("textarea",{placeholder:"      (    )...",value:T,onChange:V=>b(V.target.value),className:"w-full border border-orange-200 rounded-xl p-3 text-sm resize-none h-24 focus:ring-2 focus:ring-orange-400 focus:border-transparent"}),r.jsx("button",{onClick:E,disabled:w||!T.trim(),className:"mt-3 w-full flex items-center justify-center gap-2 bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:w?r.jsxs(r.Fragment,{children:[r.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:["   ",_.size>0?_.size:C.length," "]})})]}),r.jsx("div",{className:"grid gap-3",children:C.map(V=>r.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow-sm hover:shadow-md transition",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",checked:_.has(V.id),onChange:()=>P(V.id),className:"w-5 h-5 mt-1 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-800",children:V.name}),r.jsx("p",{className:"text-sm text-gray-500",children:V.city||" "})]}),r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-semibold",children:[r.jsx(pi,{className:"w-3 h-3"}),"  "]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[V.email&&r.jsxs("span",{children:[" ",V.email]}),V.phone&&r.jsxs("span",{children:[" ",V.phone]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:" ...",value:p===V.id?h:"",onChange:$=>{v(V.id),m($.target.value)},onFocus:()=>v(V.id),className:"flex-1 border rounded-lg px-3 py-2 text-sm"}),r.jsx("button",{onClick:()=>x(V,h),disabled:p===V.id&&!h.trim(),className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg text-sm font-medium transition disabled:opacity-50",children:""})]})]})]})},V.id))})]})}),i!=="missing"&&O.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx(Dv,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["   ",i==="pending"?" ":i==="approved"?" ":i==="rejected"?"":""]})]}):i!=="missing"&&r.jsx("div",{className:"grid gap-4",children:O.map(V=>r.jsxs("div",{className:"bg-white border rounded-2xl p-5 shadow-sm",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:V.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[V.city||" ","  ",V.email||" "]})]}),ie(V.licenseStatus)]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:V.commercialLicenseUrl&&r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"  "}),r.jsx("button",{onClick:()=>D(V),disabled:u===V.id,className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"  ",children:r.jsx(an,{className:"w-4 h-4"})})]}),r.jsxs("a",{href:V.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[r.jsx(zu,{className:"w-4 h-4"})," "]})]})}),V.commercialLicenseUrl&&r.jsxs("button",{onClick:()=>D(V),disabled:u===V.id,className:"w-full flex items-center justify-center gap-2 mb-4 py-2 px-4 border-2 border-dashed border-red-200 text-red-500 hover:bg-red-50 hover:border-red-300 rounded-xl text-sm font-medium transition",children:[r.jsx(an,{className:"w-4 h-4"}),"    "]}),V.licenseStatus==="rejected"&&V.licenseNotes&&r.jsxs("div",{className:"bg-red-50 text-red-700 rounded-xl p-3 mb-4 text-sm",children:[r.jsx("strong",{children:" :"})," ",V.licenseNotes]}),V.licenseStatus!=="approved"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{placeholder:" ( )...",value:o[V.id]||"",onChange:$=>c(B=>({...B,[V.id]:$.target.value})),className:"w-full border rounded-xl p-3 text-sm resize-none h-20"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>L(V.id,"approved"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(Ce,{className:"w-5 h-5"}),""]}),r.jsxs("button",{onClick:()=>L(V.id,"rejected"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(pi,{className:"w-5 h-5"}),""]})]})]}),V.licenseStatus==="approved"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{placeholder:"  ...",value:o[V.id]||"",onChange:$=>c(B=>({...B,[V.id]:$.target.value})),className:"w-full border border-yellow-200 rounded-xl p-3 text-sm resize-none h-20 focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>L(V.id,"rejected"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(pi,{className:"w-5 h-5"})," "]}),r.jsxs("button",{onClick:()=>D(V),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(an,{className:"w-5 h-5"}),"  "]})]})]})]},V.id))})]})},jD="afrtalbyt2026@gmail.com",ED=()=>{const t=Yt(),[e,n]=I.useState(""),[s,i]=I.useState(""),[a,o]=I.useState(!1),[c,u]=I.useState(""),[d,h]=I.useState(!1),m=async p=>{if(p.preventDefault(),u(""),e.trim().toLowerCase()!==jD){u("        ");return}if(s.length<6){u("     6   ");return}o(!0);try{const _=(await yl(Ln,e.trim(),s)).user.uid;await fn(J(z,"users",_),{email:e.trim(),name:" ",role:"developer",createdAt:ae()}),h(!0),setTimeout(()=>{t("/developer")},2e3)}catch(v){console.error("Setup error:",v),v.code==="auth/email-already-in-use"?u("      "):v.code==="auth/invalid-email"?u("   "):v.code==="auth/weak-password"?u("   "):u(" : "+(v.message||" "))}finally{o(!1)}};return d?r.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:r.jsxs("div",{className:"text-center bg-gradient-to-br from-green-500 to-emerald-600 text-white p-10 rounded-3xl shadow-2xl",children:[r.jsx(Ce,{className:"w-20 h-20 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"    !"}),r.jsx("p",{children:"   ..."})]})}):r.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 p-6 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Sc,{className:"w-10 h-10 text-white"})}),r.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2",children:[r.jsx(Fn,{className:"w-6 h-6"}),"  ",r.jsx(Fn,{className:"w-6 h-6"})]}),r.jsx("p",{className:"text-white/80 text-sm mt-2",children:"   "})]}),r.jsxs("form",{onSubmit:m,className:"p-6 space-y-5",children:[c&&r.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 rounded-xl p-3 text-sm text-center",children:c}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[r.jsx(gx,{className:"w-4 h-4"})," "]}),r.jsx("input",{type:"email",value:e,onChange:p=>n(p.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[r.jsx(p6,{className:"w-4 h-4"})," "]}),r.jsx("input",{type:"password",value:s,onChange:p=>i(p.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),r.jsx("button",{type:"submit",disabled:a,className:"w-full py-4 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white font-bold rounded-xl hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(mx,{className:"w-5 h-5"}),"  "]})}),r.jsx("p",{className:"text-gray-500 text-xs text-center",children:"      "})]})]})})})},wt=({children:t})=>{const{user:e,loading:n}=He();return n?r.jsx("div",{className:"p-8 text-center",children:" ..."}):e?r.jsx(r.Fragment,{children:t}):r.jsx(og,{to:"/login",replace:!0})},kD=()=>{var c;const[t,e]=I.useState([]),[n,s]=I.useState(!0),[i,a]=I.useState(null);I.useEffect(()=>{(async()=>{try{a(null);const u=ot(ue(z,"orders"),Ns("createdAt","desc"),ex(10)),h=(await Be(u)).docs.map(m=>{var v,_,R,T,b,w;const p=m.data();return{id:m.id,restaurantId:p.restaurantId??null,firstItemOwnerId:((_=(v=p==null?void 0:p.items)==null?void 0:v[0])==null?void 0:_.ownerId)??null,customerId:p.customerId??null,createdAtISO:((w=(b=(T=(R=p.createdAt)==null?void 0:R.toDate)==null?void 0:T.call(R))==null?void 0:b.toISOString)==null?void 0:w.call(b))??null}});e(h)}catch(u){if(String((u==null?void 0:u.message)||"").includes("index"))try{const h=(await Be(ue(z,"orders"))).docs.map(m=>{var v,_,R,T,b,w;const p=m.data();return{id:m.id,restaurantId:p.restaurantId??null,firstItemOwnerId:((_=(v=p==null?void 0:p.items)==null?void 0:v[0])==null?void 0:_.ownerId)??null,customerId:p.customerId??null,createdAtISO:((w=(b=(T=(R=p.createdAt)==null?void 0:R.toDate)==null?void 0:T.call(R))==null?void 0:b.toISOString)==null?void 0:w.call(b))??null}});e(h),a("     createdAt     .")}catch(d){a("     : "+((d==null?void 0:d.message)||d))}else a("  : "+((u==null?void 0:u.message)||u))}finally{s(!1)}})()},[]);const o=(c=mn.options)==null?void 0:c.projectId;return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),r.jsxs("div",{className:"text-sm",children:["ProjectId: ",r.jsx("b",{children:String(o)})]}),i&&r.jsx("div",{className:"text-red-600 text-sm",children:i}),n&&r.jsx("div",{children:" Loading"}),!n&&t.length===0&&r.jsxs("div",{className:"text-gray-600",children:["     collection: ",r.jsx("code",{children:"orders"}),"   ."]}),t.map(u=>r.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[r.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",u.id]}),r.jsxs("div",{children:["restaurantId: ",r.jsx("b",{children:String(u.restaurantId)})]}),r.jsxs("div",{children:["items[0].ownerId: ",r.jsx("b",{children:String(u.firstItemOwnerId)})]}),r.jsxs("div",{children:["customerId: ",r.jsx("b",{children:String(u.customerId)})]}),r.jsxs("div",{children:["createdAt: ",r.jsx("b",{children:u.createdAtISO||""})]})]},u.id))]})};function TD(){const{locationRequired:t,refreshUserData:e,loading:n}=He();return!n&&t?r.jsx(R3,{onLocationSaved:e}):r.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[r.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[r.jsx(A3,{}),r.jsx(T3,{})]}),r.jsx("div",{className:"h-[100px] sm:h-[120px]"}),r.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:r.jsxs(Kk,{children:[r.jsx(be,{path:"/",element:r.jsx(P3,{})}),r.jsx(be,{path:"/restaurants",element:r.jsx(L3,{})}),r.jsx(be,{path:"/menu",element:r.jsx(U3,{})}),r.jsx(be,{path:"/cart",element:r.jsx($3,{})}),r.jsx(be,{path:"/login",element:r.jsx(B3,{})}),r.jsx(be,{path:"/customer-login",element:r.jsx(q3,{})}),r.jsx(be,{path:"/register",element:r.jsx(z3,{})}),r.jsx(be,{path:"/privacy-policy",element:r.jsx(H3,{})}),r.jsx(be,{path:"/terms",element:r.jsx(W3,{})}),r.jsx(be,{path:"/courier-terms",element:r.jsx(K3,{})}),r.jsx(be,{path:"/account-deleted",element:r.jsx(G3,{})}),r.jsx(be,{path:"/setup-dev",element:r.jsx(ED,{})}),r.jsx(be,{path:"/chat",element:r.jsx(wt,{children:r.jsx(De,{allow:["customer","courier","owner","admin"],children:r.jsx(xD,{})})})}),r.jsx(be,{path:"/notifications",element:r.jsx(wt,{children:r.jsx(De,{allow:["customer","courier","owner","admin","developer"],children:r.jsx(yD,{})})})}),r.jsx(be,{path:"/checkout",element:r.jsx(wt,{children:r.jsx(De,{allow:["customer","admin"],children:r.jsx(Y3,{})})})}),r.jsx(be,{path:"/orders",element:r.jsx(wt,{children:r.jsx(De,{allow:["customer","admin"],children:r.jsx(J3,{})})})}),r.jsx(be,{path:"/profile",element:r.jsx(wt,{children:r.jsx(De,{allow:["customer","courier","owner","admin","developer"],children:r.jsx(Z3,{})})})}),r.jsx(be,{path:"/owner",element:r.jsx(wt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(eD,{})})})}),r.jsx(be,{path:"/owner/menu",element:r.jsx(wt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(sD,{})})})}),r.jsx(be,{path:"/owner/orders",element:r.jsx(wt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(iD,{})})})}),r.jsx(be,{path:"/owner/edit",element:r.jsx(wt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(aD,{})})})}),r.jsx(be,{path:"/owner/courier-requests",element:r.jsx(wt,{children:r.jsx(De,{allow:["owner","developer"],children:r.jsx(oD,{})})})}),r.jsx(be,{path:"/owner/packages",element:r.jsx(wt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(lD,{})})})}),r.jsx(be,{path:"/owner/promotion",element:r.jsx(wt,{children:r.jsx(De,{allow:["owner"],children:r.jsx(cD,{})})})}),r.jsx(be,{path:"/courier",element:r.jsx(wt,{children:r.jsx(De,{allow:["courier","developer"],children:r.jsx(uD,{})})})}),r.jsx(be,{path:"/courier/hiring",element:r.jsx(wt,{children:r.jsx(De,{allow:["courier","developer"],children:r.jsx(dD,{})})})}),r.jsx(be,{path:"/admin",element:r.jsx(wt,{children:r.jsx(De,{allow:["admin","developer"],children:r.jsx(vD,{})})})}),r.jsx(be,{path:"/admin/restaurants",element:r.jsx(wt,{children:r.jsx(De,{allow:["admin","developer"],children:r.jsx(wD,{})})})}),r.jsx(be,{path:"/admin/orders",element:r.jsx(wt,{children:r.jsx(De,{allow:["admin","developer"],children:r.jsx(_D,{})})})}),r.jsx(be,{path:"/developer",element:r.jsx(wt,{children:r.jsx(De,{allow:["developer","admin"],children:r.jsx(bD,{})})})}),r.jsx(be,{path:"/__debug_orders",element:r.jsx(kD,{})}),r.jsx(be,{path:"*",element:r.jsx(og,{to:"/",replace:!0})})]})}),r.jsx(C3,{})]})}I.createContext(void 0);const ID=({children:t})=>r.jsx(r.Fragment,{children:t});Of.createRoot(document.getElementById("root")).render(r.jsx(ew.StrictMode,{children:r.jsx(tT,{children:r.jsx(O3,{children:r.jsx(I3,{children:r.jsx(xP,{children:r.jsxs(ID,{children:["   ",r.jsx(TD,{})]})})})})})}));
