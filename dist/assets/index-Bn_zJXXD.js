function Vb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Mb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zv={exports:{}},id={},ex={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pl=Symbol.for("react.element"),Ub=Symbol.for("react.portal"),Fb=Symbol.for("react.fragment"),Bb=Symbol.for("react.strict_mode"),$b=Symbol.for("react.profiler"),zb=Symbol.for("react.provider"),qb=Symbol.for("react.context"),Hb=Symbol.for("react.forward_ref"),Wb=Symbol.for("react.suspense"),Kb=Symbol.for("react.memo"),Gb=Symbol.for("react.lazy"),Jg=Symbol.iterator;function Qb(t){return t===null||typeof t!="object"?null:(t=Jg&&t[Jg]||t["@@iterator"],typeof t=="function"?t:null)}var tx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nx=Object.assign,rx={};function Ao(t,e,n){this.props=t,this.context=e,this.refs=rx,this.updater=n||tx}Ao.prototype.isReactComponent={};Ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sx(){}sx.prototype=Ao.prototype;function Tp(t,e,n){this.props=t,this.context=e,this.refs=rx,this.updater=n||tx}var Ip=Tp.prototype=new sx;Ip.constructor=Tp;nx(Ip,Ao.prototype);Ip.isPureReactComponent=!0;var Zg=Array.isArray,ix=Object.prototype.hasOwnProperty,kp={current:null},ox={key:!0,ref:!0,__self:!0,__source:!0};function ax(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)ix.call(e,r)&&!ox.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Pl,type:t,key:i,ref:a,props:s,_owner:kp.current}}function Xb(t,e){return{$$typeof:Pl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pl}function Yb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ey=/\/+/g;function ah(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yb(""+t.key):e.toString(36)}function Kc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Pl:case Ub:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+ah(a,0):r,Zg(s)?(n="",t!=null&&(n=t.replace(ey,"$&/")+"/"),Kc(s,e,n,"",function(d){return d})):s!=null&&(Sp(s)&&(s=Xb(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(ey,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Zg(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+ah(i,c);a+=Kc(i,e,n,u,s)}else if(u=Qb(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+ah(i,c++),a+=Kc(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ec(t,e,n){if(t==null)return t;var r=[],s=0;return Kc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Jb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},Gc={transition:null},Zb={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Gc,ReactCurrentOwner:kp};function lx(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Ec,forEach:function(t,e,n){Ec(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ec(t,function(){e++}),e},toArray:function(t){return Ec(t,function(e){return e})||[]},only:function(t){if(!Sp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Ao;le.Fragment=Fb;le.Profiler=$b;le.PureComponent=Tp;le.StrictMode=Bb;le.Suspense=Wb;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zb;le.act=lx;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nx({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=kp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)ix.call(e,u)&&!ox.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Pl,type:t.type,key:s,ref:i,props:r,_owner:a}};le.createContext=function(t){return t={$$typeof:qb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zb,_context:t},t.Consumer=t};le.createElement=ax;le.createFactory=function(t){var e=ax.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:Hb,render:t}};le.isValidElement=Sp;le.lazy=function(t){return{$$typeof:Gb,_payload:{_status:-1,_result:t},_init:Jb}};le.memo=function(t,e){return{$$typeof:Kb,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Gc.transition;Gc.transition={};try{t()}finally{Gc.transition=e}};le.unstable_act=lx;le.useCallback=function(t,e){return $t.current.useCallback(t,e)};le.useContext=function(t){return $t.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};le.useEffect=function(t,e){return $t.current.useEffect(t,e)};le.useId=function(){return $t.current.useId()};le.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return $t.current.useMemo(t,e)};le.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};le.useRef=function(t){return $t.current.useRef(t)};le.useState=function(t){return $t.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return $t.current.useTransition()};le.version="18.3.1";ex.exports=le;var j=ex.exports;const cx=Mb(j),eN=Vb({__proto__:null,default:cx},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tN=j,nN=Symbol.for("react.element"),rN=Symbol.for("react.fragment"),sN=Object.prototype.hasOwnProperty,iN=tN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oN={key:!0,ref:!0,__self:!0,__source:!0};function ux(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)sN.call(e,r)&&!oN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:nN,type:t,key:i,ref:a,props:s,_owner:iN.current}}id.Fragment=rN;id.jsx=ux;id.jsxs=ux;Zv.exports=id;var o=Zv.exports,Zh={},dx={exports:{}},mn={},hx={exports:{}},fx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,J){var te=q.length;q.push(J);e:for(;0<te;){var xe=te-1>>>1,ge=q[xe];if(0<s(ge,J))q[xe]=J,q[te]=ge,te=xe;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var J=q[0],te=q.pop();if(te!==J){q[0]=te;e:for(var xe=0,ge=q.length,Ve=ge>>>1;xe<Ve;){var Zt=2*(xe+1)-1,Sn=q[Zt],en=Zt+1,tn=q[en];if(0>s(Sn,te))en<ge&&0>s(tn,Sn)?(q[xe]=tn,q[en]=te,xe=en):(q[xe]=Sn,q[Zt]=te,xe=Zt);else if(en<ge&&0>s(tn,te))q[xe]=tn,q[en]=te,xe=en;else break e}}return J}function s(q,J){var te=q.sortIndex-J.sortIndex;return te!==0?te:q.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,p=null,g=3,w=!1,A=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(q){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=q)r(d),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(d)}}function T(q){if(R=!1,v(q),!A)if(n(u)!==null)A=!0,qt(O);else{var J=n(d);J!==null&&ut(T,J.startTime-q)}}function O(q,J){A=!1,R&&(R=!1,E(y),y=-1),w=!0;var te=g;try{for(v(J),p=n(u);p!==null&&(!(p.expirationTime>J)||q&&!P());){var xe=p.callback;if(typeof xe=="function"){p.callback=null,g=p.priorityLevel;var ge=xe(p.expirationTime<=J);J=t.unstable_now(),typeof ge=="function"?p.callback=ge:p===n(u)&&r(u),v(J)}else r(u);p=n(u)}if(p!==null)var Ve=!0;else{var Zt=n(d);Zt!==null&&ut(T,Zt.startTime-J),Ve=!1}return Ve}finally{p=null,g=te,w=!1}}var V=!1,b=null,y=-1,I=5,S=-1;function P(){return!(t.unstable_now()-S<I)}function D(){if(b!==null){var q=t.unstable_now();S=q;var J=!0;try{J=b(!0,q)}finally{J?C():(V=!1,b=null)}}else V=!1}var C;if(typeof x=="function")C=function(){x(D)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,ct=De.port2;De.port1.onmessage=D,C=function(){ct.postMessage(null)}}else C=function(){k(D,0)};function qt(q){b=q,V||(V=!0,C())}function ut(q,J){y=k(function(){q(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){A||w||(A=!0,qt(O))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var te=g;g=J;try{return q()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,J){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=g;g=q;try{return J()}finally{g=te}},t.unstable_scheduleCallback=function(q,J,te){var xe=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?xe+te:xe):te=xe,q){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=te+ge,q={id:f++,callback:J,priorityLevel:q,startTime:te,expirationTime:ge,sortIndex:-1},te>xe?(q.sortIndex=te,e(d,q),n(u)===null&&q===n(d)&&(R?(E(y),y=-1):R=!0,ut(T,te-xe))):(q.sortIndex=ge,e(u,q),A||w||(A=!0,qt(O))),q},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(q){var J=g;return function(){var te=g;g=J;try{return q.apply(this,arguments)}finally{g=te}}}})(fx);hx.exports=fx;var aN=hx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN=j,pn=aN;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var px=new Set,el={};function fi(t,e){yo(t,e),yo(t+"Capture",e)}function yo(t,e){for(el[t]=e,t=0;t<e.length;t++)px.add(e[t])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ef=Object.prototype.hasOwnProperty,cN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ty={},ny={};function uN(t){return ef.call(ny,t)?!0:ef.call(ty,t)?!1:cN.test(t)?ny[t]=!0:(ty[t]=!0,!1)}function dN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hN(t,e,n,r){if(e===null||typeof e>"u"||dN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var jp=/[\-:]([a-z])/g;function Rp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jp,Rp);Nt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jp,Rp);Nt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jp,Rp);Nt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ap(t,e,n,r){var s=Nt.hasOwnProperty(e)?Nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hN(e,n,s,r)&&(n=null),r||s===null?uN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pr=lN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bc=Symbol.for("react.element"),Wi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),Cp=Symbol.for("react.strict_mode"),tf=Symbol.for("react.profiler"),mx=Symbol.for("react.provider"),gx=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),rf=Symbol.for("react.suspense_list"),Dp=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),yx=Symbol.for("react.offscreen"),ry=Symbol.iterator;function ga(t){return t===null||typeof t!="object"?null:(t=ry&&t[ry]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,lh;function Ia(t){if(lh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lh=e&&e[1]||""}return`
`+lh+t}var ch=!1;function uh(t,e){if(!t||ch)return"";ch=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{ch=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ia(t):""}function fN(t){switch(t.tag){case 5:return Ia(t.type);case 16:return Ia("Lazy");case 13:return Ia("Suspense");case 19:return Ia("SuspenseList");case 0:case 2:case 15:return t=uh(t.type,!1),t;case 11:return t=uh(t.type.render,!1),t;case 1:return t=uh(t.type,!0),t;default:return""}}function sf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ki:return"Fragment";case Wi:return"Portal";case tf:return"Profiler";case Cp:return"StrictMode";case nf:return"Suspense";case rf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gx:return(t.displayName||"Context")+".Consumer";case mx:return(t._context.displayName||"Context")+".Provider";case Pp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dp:return e=t.displayName||null,e!==null?e:sf(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return sf(t(e))}catch{}}return null}function pN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sf(e);case 8:return e===Cp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mN(t){var e=vx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nc(t){t._valueTracker||(t._valueTracker=mN(t))}function xx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function of(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _x(t,e){e=e.checked,e!=null&&Ap(t,"checked",e,!1)}function af(t,e){_x(t,e);var n=gs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lf(t,e.type,n):e.hasOwnProperty("defaultValue")&&lf(t,e.type,gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function iy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lf(t,e,n){(e!=="number"||pu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ka=Array.isArray;function oo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(ka(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gs(n)}}function wx(t,e){var n=gs(e.value),r=gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ay(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ex(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ex(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tc,bx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tc=Tc||document.createElement("div"),Tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Va={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gN=["Webkit","ms","Moz","O"];Object.keys(Va).forEach(function(t){gN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Va[e]=Va[t]})});function Nx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Va.hasOwnProperty(t)&&Va[t]?(""+e).trim():e+"px"}function Tx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Nx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var yN=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function df(t,e){if(e){if(yN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function hf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ff=null;function Op(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pf=null,ao=null,lo=null;function ly(t){if(t=Ll(t)){if(typeof pf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=ud(e),pf(t.stateNode,t.type,e))}}function Ix(t){ao?lo?lo.push(t):lo=[t]:ao=t}function kx(){if(ao){var t=ao,e=lo;if(lo=ao=null,ly(t),e)for(t=0;t<e.length;t++)ly(e[t])}}function Sx(t,e){return t(e)}function jx(){}var dh=!1;function Rx(t,e,n){if(dh)return t(e,n);dh=!0;try{return Sx(t,e,n)}finally{dh=!1,(ao!==null||lo!==null)&&(jx(),kx())}}function nl(t,e){var n=t.stateNode;if(n===null)return null;var r=ud(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var mf=!1;if(Tr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){mf=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{mf=!1}function vN(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ma=!1,mu=null,gu=!1,gf=null,xN={onError:function(t){Ma=!0,mu=t}};function _N(t,e,n,r,s,i,a,c,u){Ma=!1,mu=null,vN.apply(xN,arguments)}function wN(t,e,n,r,s,i,a,c,u){if(_N.apply(this,arguments),Ma){if(Ma){var d=mu;Ma=!1,mu=null}else throw Error(z(198));gu||(gu=!0,gf=d)}}function pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ax(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cy(t){if(pi(t)!==t)throw Error(z(188))}function EN(t){var e=t.alternate;if(!e){if(e=pi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return cy(s),t;if(i===r)return cy(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Cx(t){return t=EN(t),t!==null?Px(t):null}function Px(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Px(t);if(e!==null)return e;t=t.sibling}return null}var Dx=pn.unstable_scheduleCallback,uy=pn.unstable_cancelCallback,bN=pn.unstable_shouldYield,NN=pn.unstable_requestPaint,Qe=pn.unstable_now,TN=pn.unstable_getCurrentPriorityLevel,Lp=pn.unstable_ImmediatePriority,Ox=pn.unstable_UserBlockingPriority,yu=pn.unstable_NormalPriority,IN=pn.unstable_LowPriority,Lx=pn.unstable_IdlePriority,od=null,Yn=null;function kN(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(od,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:RN,SN=Math.log,jN=Math.LN2;function RN(t){return t>>>=0,t===0?32:31-(SN(t)/jN|0)|0}var Ic=64,kc=4194304;function Sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=Sa(c):(i&=a,i!==0&&(r=Sa(i)))}else a=n&~s,a!==0?r=Sa(a):i!==0&&(r=Sa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vn(e),s=1<<n,r|=t[n],e&=~s;return r}function AN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Vn(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=AN(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function yf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vx(){var t=Ic;return Ic<<=1,!(Ic&4194240)&&(Ic=64),t}function hh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function PN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Vp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function Mx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ux,Mp,Fx,Bx,$x,vf=!1,Sc=[],is=null,os=null,as=null,rl=new Map,sl=new Map,Gr=[],DN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dy(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":rl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(e.pointerId)}}function va(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ll(e),e!==null&&Mp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ON(t,e,n,r,s){switch(e){case"focusin":return is=va(is,t,e,n,r,s),!0;case"dragenter":return os=va(os,t,e,n,r,s),!0;case"mouseover":return as=va(as,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return rl.set(i,va(rl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,sl.set(i,va(sl.get(i)||null,t,e,n,r,s)),!0}return!1}function zx(t){var e=Hs(t.target);if(e!==null){var n=pi(e);if(n!==null){if(e=n.tag,e===13){if(e=Ax(n),e!==null){t.blockedOn=e,$x(t.priority,function(){Fx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ff=r,n.target.dispatchEvent(r),ff=null}else return e=Ll(n),e!==null&&Mp(e),t.blockedOn=n,!1;e.shift()}return!0}function hy(t,e,n){Qc(t)&&n.delete(e)}function LN(){vf=!1,is!==null&&Qc(is)&&(is=null),os!==null&&Qc(os)&&(os=null),as!==null&&Qc(as)&&(as=null),rl.forEach(hy),sl.forEach(hy)}function xa(t,e){t.blockedOn===e&&(t.blockedOn=null,vf||(vf=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,LN)))}function il(t){function e(s){return xa(s,t)}if(0<Sc.length){xa(Sc[0],t);for(var n=1;n<Sc.length;n++){var r=Sc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(is!==null&&xa(is,t),os!==null&&xa(os,t),as!==null&&xa(as,t),rl.forEach(e),sl.forEach(e),n=0;n<Gr.length;n++)r=Gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gr.length&&(n=Gr[0],n.blockedOn===null);)zx(n),n.blockedOn===null&&Gr.shift()}var co=Pr.ReactCurrentBatchConfig,xu=!0;function VN(t,e,n,r){var s=_e,i=co.transition;co.transition=null;try{_e=1,Up(t,e,n,r)}finally{_e=s,co.transition=i}}function MN(t,e,n,r){var s=_e,i=co.transition;co.transition=null;try{_e=4,Up(t,e,n,r)}finally{_e=s,co.transition=i}}function Up(t,e,n,r){if(xu){var s=xf(t,e,n,r);if(s===null)Eh(t,e,r,_u,n),dy(t,r);else if(ON(s,t,e,n,r))r.stopPropagation();else if(dy(t,r),e&4&&-1<DN.indexOf(t)){for(;s!==null;){var i=Ll(s);if(i!==null&&Ux(i),i=xf(t,e,n,r),i===null&&Eh(t,e,r,_u,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Eh(t,e,r,null,n)}}var _u=null;function xf(t,e,n,r){if(_u=null,t=Op(r),t=Hs(t),t!==null)if(e=pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ax(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _u=t,null}function qx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TN()){case Lp:return 1;case Ox:return 4;case yu:case IN:return 16;case Lx:return 536870912;default:return 16}default:return 16}}var es=null,Fp=null,Xc=null;function Hx(){if(Xc)return Xc;var t,e=Fp,n=e.length,r,s="value"in es?es.value:es.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Xc=s.slice(t,1<r?1-r:void 0)}function Yc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jc(){return!0}function fy(){return!1}function gn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jc:fy,this.isPropagationStopped=fy,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){},isPersistent:jc}),e}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bp=gn(Co),Ol=Be({},Co,{view:0,detail:0}),UN=gn(Ol),fh,ph,_a,ad=Be({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$p,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_a&&(_a&&t.type==="mousemove"?(fh=t.screenX-_a.screenX,ph=t.screenY-_a.screenY):ph=fh=0,_a=t),fh)},movementY:function(t){return"movementY"in t?t.movementY:ph}}),py=gn(ad),FN=Be({},ad,{dataTransfer:0}),BN=gn(FN),$N=Be({},Ol,{relatedTarget:0}),mh=gn($N),zN=Be({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),qN=gn(zN),HN=Be({},Co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WN=gn(HN),KN=Be({},Co,{data:0}),my=gn(KN),GN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XN[t])?!!e[t]:!1}function $p(){return YN}var JN=Be({},Ol,{key:function(t){if(t.key){var e=GN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$p,charCode:function(t){return t.type==="keypress"?Yc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZN=gn(JN),eT=Be({},ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gy=gn(eT),tT=Be({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$p}),nT=gn(tT),rT=Be({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),sT=gn(rT),iT=Be({},ad,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oT=gn(iT),aT=[9,13,27,32],zp=Tr&&"CompositionEvent"in window,Ua=null;Tr&&"documentMode"in document&&(Ua=document.documentMode);var lT=Tr&&"TextEvent"in window&&!Ua,Wx=Tr&&(!zp||Ua&&8<Ua&&11>=Ua),yy=" ",vy=!1;function Kx(t,e){switch(t){case"keyup":return aT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gi=!1;function cT(t,e){switch(t){case"compositionend":return Gx(e);case"keypress":return e.which!==32?null:(vy=!0,yy);case"textInput":return t=e.data,t===yy&&vy?null:t;default:return null}}function uT(t,e){if(Gi)return t==="compositionend"||!zp&&Kx(t,e)?(t=Hx(),Xc=Fp=es=null,Gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wx&&e.locale!=="ko"?null:e.data;default:return null}}var dT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dT[t.type]:e==="textarea"}function Qx(t,e,n,r){Ix(r),e=wu(e,"onChange"),0<e.length&&(n=new Bp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fa=null,ol=null;function hT(t){o_(t,0)}function ld(t){var e=Yi(t);if(xx(e))return t}function fT(t,e){if(t==="change")return e}var Xx=!1;if(Tr){var gh;if(Tr){var yh="oninput"in document;if(!yh){var _y=document.createElement("div");_y.setAttribute("oninput","return;"),yh=typeof _y.oninput=="function"}gh=yh}else gh=!1;Xx=gh&&(!document.documentMode||9<document.documentMode)}function wy(){Fa&&(Fa.detachEvent("onpropertychange",Yx),ol=Fa=null)}function Yx(t){if(t.propertyName==="value"&&ld(ol)){var e=[];Qx(e,ol,t,Op(t)),Rx(hT,e)}}function pT(t,e,n){t==="focusin"?(wy(),Fa=e,ol=n,Fa.attachEvent("onpropertychange",Yx)):t==="focusout"&&wy()}function mT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ld(ol)}function gT(t,e){if(t==="click")return ld(e)}function yT(t,e){if(t==="input"||t==="change")return ld(e)}function vT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:vT;function al(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ef.call(e,s)||!Fn(t[s],e[s]))return!1}return!0}function Ey(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function by(t,e){var n=Ey(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ey(n)}}function Jx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zx(){for(var t=window,e=pu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pu(t.document)}return e}function qp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xT(t){var e=Zx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jx(n.ownerDocument.documentElement,n)){if(r!==null&&qp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=by(n,i);var a=by(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _T=Tr&&"documentMode"in document&&11>=document.documentMode,Qi=null,_f=null,Ba=null,wf=!1;function Ny(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wf||Qi==null||Qi!==pu(r)||(r=Qi,"selectionStart"in r&&qp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ba&&al(Ba,r)||(Ba=r,r=wu(_f,"onSelect"),0<r.length&&(e=new Bp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qi)))}function Rc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xi={animationend:Rc("Animation","AnimationEnd"),animationiteration:Rc("Animation","AnimationIteration"),animationstart:Rc("Animation","AnimationStart"),transitionend:Rc("Transition","TransitionEnd")},vh={},e_={};Tr&&(e_=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function cd(t){if(vh[t])return vh[t];if(!Xi[t])return t;var e=Xi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in e_)return vh[t]=e[n];return t}var t_=cd("animationend"),n_=cd("animationiteration"),r_=cd("animationstart"),s_=cd("transitionend"),i_=new Map,Ty="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(t,e){i_.set(t,e),fi(e,[t])}for(var xh=0;xh<Ty.length;xh++){var _h=Ty[xh],wT=_h.toLowerCase(),ET=_h[0].toUpperCase()+_h.slice(1);bs(wT,"on"+ET)}bs(t_,"onAnimationEnd");bs(n_,"onAnimationIteration");bs(r_,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(s_,"onTransitionEnd");yo("onMouseEnter",["mouseout","mouseover"]);yo("onMouseLeave",["mouseout","mouseover"]);yo("onPointerEnter",["pointerout","pointerover"]);yo("onPointerLeave",["pointerout","pointerover"]);fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ja));function Iy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wN(r,e,void 0,t),t.currentTarget=null}function o_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Iy(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Iy(s,c,d),i=u}}}if(gu)throw t=gf,gu=!1,gf=null,t}function je(t,e){var n=e[If];n===void 0&&(n=e[If]=new Set);var r=t+"__bubble";n.has(r)||(a_(e,t,2,!1),n.add(r))}function wh(t,e,n){var r=0;e&&(r|=4),a_(n,t,r,e)}var Ac="_reactListening"+Math.random().toString(36).slice(2);function ll(t){if(!t[Ac]){t[Ac]=!0,px.forEach(function(n){n!=="selectionchange"&&(bT.has(n)||wh(n,!1,t),wh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ac]||(e[Ac]=!0,wh("selectionchange",!1,e))}}function a_(t,e,n,r){switch(qx(e)){case 1:var s=VN;break;case 4:s=MN;break;default:s=Up}n=s.bind(null,e,n,t),s=void 0,!mf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Eh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=Hs(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}Rx(function(){var d=i,f=Op(n),p=[];e:{var g=i_.get(t);if(g!==void 0){var w=Bp,A=t;switch(t){case"keypress":if(Yc(n)===0)break e;case"keydown":case"keyup":w=ZN;break;case"focusin":A="focus",w=mh;break;case"focusout":A="blur",w=mh;break;case"beforeblur":case"afterblur":w=mh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=BN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=nT;break;case t_:case n_:case r_:w=qN;break;case s_:w=sT;break;case"scroll":w=UN;break;case"wheel":w=oT;break;case"copy":case"cut":case"paste":w=WN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=gy}var R=(e&4)!==0,k=!R&&t==="scroll",E=R?g!==null?g+"Capture":null:g;R=[];for(var x=d,v;x!==null;){v=x;var T=v.stateNode;if(v.tag===5&&T!==null&&(v=T,E!==null&&(T=nl(x,E),T!=null&&R.push(cl(x,T,v)))),k)break;x=x.return}0<R.length&&(g=new w(g,A,null,n,f),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==ff&&(A=n.relatedTarget||n.fromElement)&&(Hs(A)||A[Ir]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(A=n.relatedTarget||n.toElement,w=d,A=A?Hs(A):null,A!==null&&(k=pi(A),A!==k||A.tag!==5&&A.tag!==6)&&(A=null)):(w=null,A=d),w!==A)){if(R=py,T="onMouseLeave",E="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(R=gy,T="onPointerLeave",E="onPointerEnter",x="pointer"),k=w==null?g:Yi(w),v=A==null?g:Yi(A),g=new R(T,x+"leave",w,n,f),g.target=k,g.relatedTarget=v,T=null,Hs(f)===d&&(R=new R(E,x+"enter",A,n,f),R.target=v,R.relatedTarget=k,T=R),k=T,w&&A)t:{for(R=w,E=A,x=0,v=R;v;v=Bi(v))x++;for(v=0,T=E;T;T=Bi(T))v++;for(;0<x-v;)R=Bi(R),x--;for(;0<v-x;)E=Bi(E),v--;for(;x--;){if(R===E||E!==null&&R===E.alternate)break t;R=Bi(R),E=Bi(E)}R=null}else R=null;w!==null&&ky(p,g,w,R,!1),A!==null&&k!==null&&ky(p,k,A,R,!0)}}e:{if(g=d?Yi(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var O=fT;else if(xy(g))if(Xx)O=yT;else{O=mT;var V=pT}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=gT);if(O&&(O=O(t,d))){Qx(p,O,n,f);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&lf(g,"number",g.value)}switch(V=d?Yi(d):window,t){case"focusin":(xy(V)||V.contentEditable==="true")&&(Qi=V,_f=d,Ba=null);break;case"focusout":Ba=_f=Qi=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,Ny(p,n,f);break;case"selectionchange":if(_T)break;case"keydown":case"keyup":Ny(p,n,f)}var b;if(zp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Gi?Kx(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Wx&&n.locale!=="ko"&&(Gi||y!=="onCompositionStart"?y==="onCompositionEnd"&&Gi&&(b=Hx()):(es=f,Fp="value"in es?es.value:es.textContent,Gi=!0)),V=wu(d,y),0<V.length&&(y=new my(y,t,null,n,f),p.push({event:y,listeners:V}),b?y.data=b:(b=Gx(n),b!==null&&(y.data=b)))),(b=lT?cT(t,n):uT(t,n))&&(d=wu(d,"onBeforeInput"),0<d.length&&(f=new my("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=b))}o_(p,e)})}function cl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=nl(t,n),i!=null&&r.unshift(cl(t,i,s)),i=nl(t,e),i!=null&&r.push(cl(t,i,s))),t=t.return}return r}function Bi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ky(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=nl(n,i),u!=null&&a.unshift(cl(n,u,c))):s||(u=nl(n,i),u!=null&&a.push(cl(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var NT=/\r\n?/g,TT=/\u0000|\uFFFD/g;function Sy(t){return(typeof t=="string"?t:""+t).replace(NT,`
`).replace(TT,"")}function Cc(t,e,n){if(e=Sy(e),Sy(t)!==e&&n)throw Error(z(425))}function Eu(){}var Ef=null,bf=null;function Nf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tf=typeof setTimeout=="function"?setTimeout:void 0,IT=typeof clearTimeout=="function"?clearTimeout:void 0,jy=typeof Promise=="function"?Promise:void 0,kT=typeof queueMicrotask=="function"?queueMicrotask:typeof jy<"u"?function(t){return jy.resolve(null).then(t).catch(ST)}:Tf;function ST(t){setTimeout(function(){throw t})}function bh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),il(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);il(e)}function ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ry(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Po=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Po,ul="__reactProps$"+Po,Ir="__reactContainer$"+Po,If="__reactEvents$"+Po,jT="__reactListeners$"+Po,RT="__reactHandles$"+Po;function Hs(t){var e=t[Qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ir]||n[Qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ry(t);t!==null;){if(n=t[Qn])return n;t=Ry(t)}return e}t=n,n=t.parentNode}return null}function Ll(t){return t=t[Qn]||t[Ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function ud(t){return t[ul]||null}var kf=[],Ji=-1;function Ns(t){return{current:t}}function Ce(t){0>Ji||(t.current=kf[Ji],kf[Ji]=null,Ji--)}function Ie(t,e){Ji++,kf[Ji]=t.current,t.current=e}var ys={},Ot=Ns(ys),Qt=Ns(!1),Zs=ys;function vo(t,e){var n=t.type.contextTypes;if(!n)return ys;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Xt(t){return t=t.childContextTypes,t!=null}function bu(){Ce(Qt),Ce(Ot)}function Ay(t,e,n){if(Ot.current!==ys)throw Error(z(168));Ie(Ot,e),Ie(Qt,n)}function l_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,pN(t)||"Unknown",s));return Be({},n,r)}function Nu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ys,Zs=Ot.current,Ie(Ot,t),Ie(Qt,Qt.current),!0}function Cy(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=l_(t,e,Zs),r.__reactInternalMemoizedMergedChildContext=t,Ce(Qt),Ce(Ot),Ie(Ot,t)):Ce(Qt),Ie(Qt,n)}var pr=null,dd=!1,Nh=!1;function c_(t){pr===null?pr=[t]:pr.push(t)}function AT(t){dd=!0,c_(t)}function Ts(){if(!Nh&&pr!==null){Nh=!0;var t=0,e=_e;try{var n=pr;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pr=null,dd=!1}catch(s){throw pr!==null&&(pr=pr.slice(t+1)),Dx(Lp,Ts),s}finally{_e=e,Nh=!1}}return null}var Zi=[],eo=0,Tu=null,Iu=0,xn=[],_n=0,ei=null,gr=1,yr="";function Fs(t,e){Zi[eo++]=Iu,Zi[eo++]=Tu,Tu=t,Iu=e}function u_(t,e,n){xn[_n++]=gr,xn[_n++]=yr,xn[_n++]=ei,ei=t;var r=gr;t=yr;var s=32-Vn(r)-1;r&=~(1<<s),n+=1;var i=32-Vn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,gr=1<<32-Vn(e)+s|n<<s|r,yr=i+t}else gr=1<<i|n<<s|r,yr=t}function Hp(t){t.return!==null&&(Fs(t,1),u_(t,1,0))}function Wp(t){for(;t===Tu;)Tu=Zi[--eo],Zi[eo]=null,Iu=Zi[--eo],Zi[eo]=null;for(;t===ei;)ei=xn[--_n],xn[_n]=null,yr=xn[--_n],xn[_n]=null,gr=xn[--_n],xn[_n]=null}var dn=null,ln=null,Le=!1,On=null;function d_(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Py(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,ln=ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ei!==null?{id:gr,overflow:yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,ln=null,!0):!1;default:return!1}}function Sf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jf(t){if(Le){var e=ln;if(e){var n=e;if(!Py(t,e)){if(Sf(t))throw Error(z(418));e=ls(n.nextSibling);var r=dn;e&&Py(t,e)?d_(r,n):(t.flags=t.flags&-4097|2,Le=!1,dn=t)}}else{if(Sf(t))throw Error(z(418));t.flags=t.flags&-4097|2,Le=!1,dn=t}}}function Dy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function Pc(t){if(t!==dn)return!1;if(!Le)return Dy(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nf(t.type,t.memoizedProps)),e&&(e=ln)){if(Sf(t))throw h_(),Error(z(418));for(;e;)d_(t,e),e=ls(e.nextSibling)}if(Dy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=ls(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=dn?ls(t.stateNode.nextSibling):null;return!0}function h_(){for(var t=ln;t;)t=ls(t.nextSibling)}function xo(){ln=dn=null,Le=!1}function Kp(t){On===null?On=[t]:On.push(t)}var CT=Pr.ReactCurrentBatchConfig;function wa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Dc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Oy(t){var e=t._init;return e(t._payload)}function f_(t){function e(E,x){if(t){var v=E.deletions;v===null?(E.deletions=[x],E.flags|=16):v.push(x)}}function n(E,x){if(!t)return null;for(;x!==null;)e(E,x),x=x.sibling;return null}function r(E,x){for(E=new Map;x!==null;)x.key!==null?E.set(x.key,x):E.set(x.index,x),x=x.sibling;return E}function s(E,x){return E=hs(E,x),E.index=0,E.sibling=null,E}function i(E,x,v){return E.index=v,t?(v=E.alternate,v!==null?(v=v.index,v<x?(E.flags|=2,x):v):(E.flags|=2,x)):(E.flags|=1048576,x)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,x,v,T){return x===null||x.tag!==6?(x=Ah(v,E.mode,T),x.return=E,x):(x=s(x,v),x.return=E,x)}function u(E,x,v,T){var O=v.type;return O===Ki?f(E,x,v.props.children,T,v.key):x!==null&&(x.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Wr&&Oy(O)===x.type)?(T=s(x,v.props),T.ref=wa(E,x,v),T.return=E,T):(T=su(v.type,v.key,v.props,null,E.mode,T),T.ref=wa(E,x,v),T.return=E,T)}function d(E,x,v,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=Ch(v,E.mode,T),x.return=E,x):(x=s(x,v.children||[]),x.return=E,x)}function f(E,x,v,T,O){return x===null||x.tag!==7?(x=Xs(v,E.mode,T,O),x.return=E,x):(x=s(x,v),x.return=E,x)}function p(E,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ah(""+x,E.mode,v),x.return=E,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case bc:return v=su(x.type,x.key,x.props,null,E.mode,v),v.ref=wa(E,null,x),v.return=E,v;case Wi:return x=Ch(x,E.mode,v),x.return=E,x;case Wr:var T=x._init;return p(E,T(x._payload),v)}if(ka(x)||ga(x))return x=Xs(x,E.mode,v,null),x.return=E,x;Dc(E,x)}return null}function g(E,x,v,T){var O=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return O!==null?null:c(E,x,""+v,T);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case bc:return v.key===O?u(E,x,v,T):null;case Wi:return v.key===O?d(E,x,v,T):null;case Wr:return O=v._init,g(E,x,O(v._payload),T)}if(ka(v)||ga(v))return O!==null?null:f(E,x,v,T,null);Dc(E,v)}return null}function w(E,x,v,T,O){if(typeof T=="string"&&T!==""||typeof T=="number")return E=E.get(v)||null,c(x,E,""+T,O);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case bc:return E=E.get(T.key===null?v:T.key)||null,u(x,E,T,O);case Wi:return E=E.get(T.key===null?v:T.key)||null,d(x,E,T,O);case Wr:var V=T._init;return w(E,x,v,V(T._payload),O)}if(ka(T)||ga(T))return E=E.get(v)||null,f(x,E,T,O,null);Dc(x,T)}return null}function A(E,x,v,T){for(var O=null,V=null,b=x,y=x=0,I=null;b!==null&&y<v.length;y++){b.index>y?(I=b,b=null):I=b.sibling;var S=g(E,b,v[y],T);if(S===null){b===null&&(b=I);break}t&&b&&S.alternate===null&&e(E,b),x=i(S,x,y),V===null?O=S:V.sibling=S,V=S,b=I}if(y===v.length)return n(E,b),Le&&Fs(E,y),O;if(b===null){for(;y<v.length;y++)b=p(E,v[y],T),b!==null&&(x=i(b,x,y),V===null?O=b:V.sibling=b,V=b);return Le&&Fs(E,y),O}for(b=r(E,b);y<v.length;y++)I=w(b,E,y,v[y],T),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?y:I.key),x=i(I,x,y),V===null?O=I:V.sibling=I,V=I);return t&&b.forEach(function(P){return e(E,P)}),Le&&Fs(E,y),O}function R(E,x,v,T){var O=ga(v);if(typeof O!="function")throw Error(z(150));if(v=O.call(v),v==null)throw Error(z(151));for(var V=O=null,b=x,y=x=0,I=null,S=v.next();b!==null&&!S.done;y++,S=v.next()){b.index>y?(I=b,b=null):I=b.sibling;var P=g(E,b,S.value,T);if(P===null){b===null&&(b=I);break}t&&b&&P.alternate===null&&e(E,b),x=i(P,x,y),V===null?O=P:V.sibling=P,V=P,b=I}if(S.done)return n(E,b),Le&&Fs(E,y),O;if(b===null){for(;!S.done;y++,S=v.next())S=p(E,S.value,T),S!==null&&(x=i(S,x,y),V===null?O=S:V.sibling=S,V=S);return Le&&Fs(E,y),O}for(b=r(E,b);!S.done;y++,S=v.next())S=w(b,E,y,S.value,T),S!==null&&(t&&S.alternate!==null&&b.delete(S.key===null?y:S.key),x=i(S,x,y),V===null?O=S:V.sibling=S,V=S);return t&&b.forEach(function(D){return e(E,D)}),Le&&Fs(E,y),O}function k(E,x,v,T){if(typeof v=="object"&&v!==null&&v.type===Ki&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case bc:e:{for(var O=v.key,V=x;V!==null;){if(V.key===O){if(O=v.type,O===Ki){if(V.tag===7){n(E,V.sibling),x=s(V,v.props.children),x.return=E,E=x;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Wr&&Oy(O)===V.type){n(E,V.sibling),x=s(V,v.props),x.ref=wa(E,V,v),x.return=E,E=x;break e}n(E,V);break}else e(E,V);V=V.sibling}v.type===Ki?(x=Xs(v.props.children,E.mode,T,v.key),x.return=E,E=x):(T=su(v.type,v.key,v.props,null,E.mode,T),T.ref=wa(E,x,v),T.return=E,E=T)}return a(E);case Wi:e:{for(V=v.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(E,x.sibling),x=s(x,v.children||[]),x.return=E,E=x;break e}else{n(E,x);break}else e(E,x);x=x.sibling}x=Ch(v,E.mode,T),x.return=E,E=x}return a(E);case Wr:return V=v._init,k(E,x,V(v._payload),T)}if(ka(v))return A(E,x,v,T);if(ga(v))return R(E,x,v,T);Dc(E,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(E,x.sibling),x=s(x,v),x.return=E,E=x):(n(E,x),x=Ah(v,E.mode,T),x.return=E,E=x),a(E)):n(E,x)}return k}var _o=f_(!0),p_=f_(!1),ku=Ns(null),Su=null,to=null,Gp=null;function Qp(){Gp=to=Su=null}function Xp(t){var e=ku.current;Ce(ku),t._currentValue=e}function Rf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){Su=t,Gp=to=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gt=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(Gp!==t)if(t={context:t,memoizedValue:e,next:null},to===null){if(Su===null)throw Error(z(308));to=t,Su.dependencies={lanes:0,firstContext:t}}else to=to.next=t;return e}var Ws=null;function Yp(t){Ws===null?Ws=[t]:Ws.push(t)}function m_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yp(e)):(n.next=s.next,s.next=n),e.interleaved=n,kr(t,r)}function kr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kr=!1;function Jp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,kr(t,n)}return s=r.interleaved,s===null?(e.next=e,Yp(r)):(e.next=s.next,s.next=e),r.interleaved=e,kr(t,n)}function Jc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vp(t,n)}}function Ly(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ju(t,e,n,r){var s=t.updateQueue;Kr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==a&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;a=0,f=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var A=t,R=c;switch(g=e,w=n,R.tag){case 1:if(A=R.payload,typeof A=="function"){p=A.call(w,p,g);break e}p=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=R.payload,g=typeof A=="function"?A.call(w,p,g):A,g==null)break e;p=Be({},p,g);break e;case 2:Kr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=w,u=p):f=f.next=w,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ni|=a,t.lanes=a,t.memoizedState=p}}function Vy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Vl={},Jn=Ns(Vl),dl=Ns(Vl),hl=Ns(Vl);function Ks(t){if(t===Vl)throw Error(z(174));return t}function Zp(t,e){switch(Ie(hl,e),Ie(dl,t),Ie(Jn,Vl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uf(e,t)}Ce(Jn),Ie(Jn,e)}function wo(){Ce(Jn),Ce(dl),Ce(hl)}function y_(t){Ks(hl.current);var e=Ks(Jn.current),n=uf(e,t.type);e!==n&&(Ie(dl,t),Ie(Jn,n))}function em(t){dl.current===t&&(Ce(Jn),Ce(dl))}var Ue=Ns(0);function Ru(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Th=[];function tm(){for(var t=0;t<Th.length;t++)Th[t]._workInProgressVersionPrimary=null;Th.length=0}var Zc=Pr.ReactCurrentDispatcher,Ih=Pr.ReactCurrentBatchConfig,ti=0,Fe=null,at=null,pt=null,Au=!1,$a=!1,fl=0,PT=0;function St(){throw Error(z(321))}function nm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function rm(t,e,n,r,s,i){if(ti=i,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zc.current=t===null||t.memoizedState===null?VT:MT,t=n(r,s),$a){i=0;do{if($a=!1,fl=0,25<=i)throw Error(z(301));i+=1,pt=at=null,e.updateQueue=null,Zc.current=UT,t=n(r,s)}while($a)}if(Zc.current=Cu,e=at!==null&&at.next!==null,ti=0,pt=at=Fe=null,Au=!1,e)throw Error(z(300));return t}function sm(){var t=fl!==0;return fl=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Fe.memoizedState=pt=t:pt=pt.next=t,pt}function In(){if(at===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=pt===null?Fe.memoizedState:pt.next;if(e!==null)pt=e,at=t;else{if(t===null)throw Error(z(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},pt===null?Fe.memoizedState=pt=t:pt=pt.next=t}return pt}function pl(t,e){return typeof e=="function"?e(t):e}function kh(t){var e=In(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=at,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var f=d.lane;if((ti&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,a=r):u=u.next=p,Fe.lanes|=f,ni|=f}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,Fn(r,e.memoizedState)||(Gt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Fe.lanes|=i,ni|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sh(t){var e=In(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Fn(i,e.memoizedState)||(Gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function v_(){}function x_(t,e){var n=Fe,r=In(),s=e(),i=!Fn(r.memoizedState,s);if(i&&(r.memoizedState=s,Gt=!0),r=r.queue,im(E_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,ml(9,w_.bind(null,n,r,s,e),void 0,null),gt===null)throw Error(z(349));ti&30||__(n,e,s)}return s}function __(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function w_(t,e,n,r){e.value=n,e.getSnapshot=r,b_(e)&&N_(t)}function E_(t,e,n){return n(function(){b_(e)&&N_(t)})}function b_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function N_(t){var e=kr(t,1);e!==null&&Mn(e,t,1,-1)}function My(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:t},e.queue=t,t=t.dispatch=LT.bind(null,Fe,t),[e.memoizedState,t]}function ml(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T_(){return In().memoizedState}function eu(t,e,n,r){var s=Gn();Fe.flags|=t,s.memoizedState=ml(1|e,n,void 0,r===void 0?null:r)}function hd(t,e,n,r){var s=In();r=r===void 0?null:r;var i=void 0;if(at!==null){var a=at.memoizedState;if(i=a.destroy,r!==null&&nm(r,a.deps)){s.memoizedState=ml(e,n,i,r);return}}Fe.flags|=t,s.memoizedState=ml(1|e,n,i,r)}function Uy(t,e){return eu(8390656,8,t,e)}function im(t,e){return hd(2048,8,t,e)}function I_(t,e){return hd(4,2,t,e)}function k_(t,e){return hd(4,4,t,e)}function S_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function j_(t,e,n){return n=n!=null?n.concat([t]):null,hd(4,4,S_.bind(null,e,t),n)}function om(){}function R_(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function A_(t,e){var n=In();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function C_(t,e,n){return ti&21?(Fn(n,e)||(n=Vx(),Fe.lanes|=n,ni|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=n)}function DT(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Ih.transition;Ih.transition={};try{t(!1),e()}finally{_e=n,Ih.transition=r}}function P_(){return In().memoizedState}function OT(t,e,n){var r=ds(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},D_(t))O_(e,n);else if(n=m_(t,e,n,r),n!==null){var s=Ut();Mn(n,t,r,s),L_(n,e,r)}}function LT(t,e,n){var r=ds(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(D_(t))O_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,Fn(c,a)){var u=e.interleaved;u===null?(s.next=s,Yp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=m_(t,e,s,r),n!==null&&(s=Ut(),Mn(n,t,r,s),L_(n,e,r))}}function D_(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function O_(t,e){$a=Au=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vp(t,n)}}var Cu={readContext:Tn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},VT={readContext:Tn,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:Uy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,eu(4194308,4,S_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return eu(4194308,4,t,e)},useInsertionEffect:function(t,e){return eu(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OT.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:My,useDebugValue:om,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=My(!1),e=t[0];return t=DT.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,s=Gn();if(Le){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),gt===null)throw Error(z(349));ti&30||__(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Uy(E_.bind(null,r,i,t),[t]),r.flags|=2048,ml(9,w_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gn(),e=gt.identifierPrefix;if(Le){var n=yr,r=gr;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MT={readContext:Tn,useCallback:R_,useContext:Tn,useEffect:im,useImperativeHandle:j_,useInsertionEffect:I_,useLayoutEffect:k_,useMemo:A_,useReducer:kh,useRef:T_,useState:function(){return kh(pl)},useDebugValue:om,useDeferredValue:function(t){var e=In();return C_(e,at.memoizedState,t)},useTransition:function(){var t=kh(pl)[0],e=In().memoizedState;return[t,e]},useMutableSource:v_,useSyncExternalStore:x_,useId:P_,unstable_isNewReconciler:!1},UT={readContext:Tn,useCallback:R_,useContext:Tn,useEffect:im,useImperativeHandle:j_,useInsertionEffect:I_,useLayoutEffect:k_,useMemo:A_,useReducer:Sh,useRef:T_,useState:function(){return Sh(pl)},useDebugValue:om,useDeferredValue:function(t){var e=In();return at===null?e.memoizedState=t:C_(e,at.memoizedState,t)},useTransition:function(){var t=Sh(pl)[0],e=In().memoizedState;return[t,e]},useMutableSource:v_,useSyncExternalStore:x_,useId:P_,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Af(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fd={isMounted:function(t){return(t=t._reactInternals)?pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ut(),s=ds(t),i=wr(r,s);i.payload=e,n!=null&&(i.callback=n),e=cs(t,i,s),e!==null&&(Mn(e,t,s,r),Jc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ut(),s=ds(t),i=wr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=cs(t,i,s),e!==null&&(Mn(e,t,s,r),Jc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ut(),r=ds(t),s=wr(n,r);s.tag=2,e!=null&&(s.callback=e),e=cs(t,s,r),e!==null&&(Mn(e,t,r,n),Jc(e,t,r))}};function Fy(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!al(n,r)||!al(s,i):!0}function V_(t,e,n){var r=!1,s=ys,i=e.contextType;return typeof i=="object"&&i!==null?i=Tn(i):(s=Xt(e)?Zs:Ot.current,r=e.contextTypes,i=(r=r!=null)?vo(t,s):ys),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function By(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fd.enqueueReplaceState(e,e.state,null)}function Cf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Jp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Tn(i):(i=Xt(e)?Zs:Ot.current,s.context=vo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Af(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fd.enqueueReplaceState(s,s.state,null),ju(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,e){try{var n="",r=e;do n+=fN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FT=typeof WeakMap=="function"?WeakMap:Map;function M_(t,e,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Du||(Du=!0,zf=r),Pf(t,e)},n}function U_(t,e,n){n=wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Pf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Pf(t,e),typeof r!="function"&&(us===null?us=new Set([this]):us.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function $y(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=eI.bind(null,t,e,n),e.then(t,t))}function zy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wr(-1,1),e.tag=2,cs(n,e,1))),n.lanes|=1),t)}var BT=Pr.ReactCurrentOwner,Gt=!1;function Mt(t,e,n,r){e.child=t===null?p_(e,null,n,r):_o(e,t.child,n,r)}function Hy(t,e,n,r,s){n=n.render;var i=e.ref;return uo(e,s),r=rm(t,e,n,r,i,s),n=sm(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Sr(t,e,s)):(Le&&n&&Hp(e),e.flags|=1,Mt(t,e,r,s),e.child)}function Wy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!pm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,F_(t,e,i,r,s)):(t=su(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:al,n(a,r)&&t.ref===e.ref)return Sr(t,e,s)}return e.flags|=1,t=hs(i,r),t.ref=e.ref,t.return=e,e.child=t}function F_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(al(i,r)&&t.ref===e.ref)if(Gt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Gt=!0);else return e.lanes=t.lanes,Sr(t,e,s)}return Df(t,e,n,r,s)}function B_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(ro,on),on|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(ro,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(ro,on),on|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(ro,on),on|=r;return Mt(t,e,s,n),e.child}function $_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Df(t,e,n,r,s){var i=Xt(n)?Zs:Ot.current;return i=vo(e,i),uo(e,s),n=rm(t,e,n,r,i,s),r=sm(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Sr(t,e,s)):(Le&&r&&Hp(e),e.flags|=1,Mt(t,e,n,s),e.child)}function Ky(t,e,n,r,s){if(Xt(n)){var i=!0;Nu(e)}else i=!1;if(uo(e,s),e.stateNode===null)tu(t,e),V_(e,n,r),Cf(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tn(d):(d=Xt(n)?Zs:Ot.current,d=vo(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&By(e,a,r,d),Kr=!1;var g=e.memoizedState;a.state=g,ju(e,r,a,s),u=e.memoizedState,c!==r||g!==u||Qt.current||Kr?(typeof f=="function"&&(Af(e,n,f,r),u=e.memoizedState),(c=Kr||Fy(e,n,c,r,g,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,g_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Pn(e.type,c),a.props=d,p=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Tn(u):(u=Xt(n)?Zs:Ot.current,u=vo(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==p||g!==u)&&By(e,a,r,u),Kr=!1,g=e.memoizedState,a.state=g,ju(e,r,a,s);var A=e.memoizedState;c!==p||g!==A||Qt.current||Kr?(typeof w=="function"&&(Af(e,n,w,r),A=e.memoizedState),(d=Kr||Fy(e,n,d,r,g,A,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,A,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,A,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),a.props=r,a.state=A,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Of(t,e,n,r,i,s)}function Of(t,e,n,r,s,i){$_(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Cy(e,n,!1),Sr(t,e,i);r=e.stateNode,BT.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=_o(e,t.child,null,i),e.child=_o(e,null,c,i)):Mt(t,e,c,i),e.memoizedState=r.state,s&&Cy(e,n,!0),e.child}function z_(t){var e=t.stateNode;e.pendingContext?Ay(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ay(t,e.context,!1),Zp(t,e.containerInfo)}function Gy(t,e,n,r,s){return xo(),Kp(s),e.flags|=256,Mt(t,e,n,r),e.child}var Lf={dehydrated:null,treeContext:null,retryLane:0};function Vf(t){return{baseLanes:t,cachePool:null,transitions:null}}function q_(t,e,n){var r=e.pendingProps,s=Ue.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(Ue,s&1),t===null)return jf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=gd(a,r,0,null),t=Xs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vf(n),e.memoizedState=Lf,t):am(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return $T(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=hs(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=hs(c,i):(i=Xs(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Vf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Lf,r}return i=t.child,t=i.sibling,r=hs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function am(t,e){return e=gd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oc(t,e,n,r){return r!==null&&Kp(r),_o(e,t.child,null,n),t=am(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $T(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=jh(Error(z(422))),Oc(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=gd({mode:"visible",children:r.children},s,0,null),i=Xs(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_o(e,t.child,null,a),e.child.memoizedState=Vf(a),e.memoizedState=Lf,i);if(!(e.mode&1))return Oc(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=jh(i,r,void 0),Oc(t,e,a,r)}if(c=(a&t.childLanes)!==0,Gt||c){if(r=gt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,kr(t,s),Mn(r,t,s,-1))}return fm(),r=jh(Error(z(421))),Oc(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ln=ls(s.nextSibling),dn=e,Le=!0,On=null,t!==null&&(xn[_n++]=gr,xn[_n++]=yr,xn[_n++]=ei,gr=t.id,yr=t.overflow,ei=e),e=am(e,r.children),e.flags|=4096,e)}function Qy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rf(t.return,e,n)}function Rh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function H_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Mt(t,e,r.children,n),r=Ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qy(t,n,e);else if(t.tag===19)Qy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Ue,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ru(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ru(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rh(e,!0,n,null,i);break;case"together":Rh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ni|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=hs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zT(t,e,n){switch(e.tag){case 3:z_(e),xo();break;case 5:y_(e);break;case 1:Xt(e.type)&&Nu(e);break;case 4:Zp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(ku,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?q_(t,e,n):(Ie(Ue,Ue.current&1),t=Sr(t,e,n),t!==null?t.sibling:null);Ie(Ue,Ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return H_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Ue,Ue.current),r)break;return null;case 22:case 23:return e.lanes=0,B_(t,e,n)}return Sr(t,e,n)}var W_,Mf,K_,G_;W_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mf=function(){};K_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ks(Jn.current);var i=null;switch(n){case"input":s=of(t,s),r=of(t,r),i=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),i=[];break;case"textarea":s=cf(t,s),r=cf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Eu)}df(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(el.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(el.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&je("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};G_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ea(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qT(t,e,n){var r=e.pendingProps;switch(Wp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return Xt(e.type)&&bu(),jt(e),null;case 3:return r=e.stateNode,wo(),Ce(Qt),Ce(Ot),tm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Wf(On),On=null))),Mf(t,e),jt(e),null;case 5:em(e);var s=Ks(hl.current);if(n=e.type,t!==null&&e.stateNode!=null)K_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return jt(e),null}if(t=Ks(Jn.current),Pc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qn]=e,r[ul]=i,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<ja.length;s++)je(ja[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":sy(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":oy(r,i),je("invalid",r)}df(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Cc(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Cc(r.textContent,c,t),s=["children",""+c]):el.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&je("scroll",r)}switch(n){case"input":Nc(r),iy(r,i,!0);break;case"textarea":Nc(r),ay(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Eu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ex(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Qn]=e,t[ul]=r,W_(t,e,!1,!1),e.stateNode=t;e:{switch(a=hf(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<ja.length;s++)je(ja[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":sy(t,r),s=of(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),je("invalid",t);break;case"textarea":oy(t,r),s=cf(t,r),je("invalid",t);break;default:s=r}df(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Tx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&bx(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&tl(t,u):typeof u=="number"&&tl(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(el.hasOwnProperty(i)?u!=null&&i==="onScroll"&&je("scroll",t):u!=null&&Ap(t,i,u,a))}switch(n){case"input":Nc(t),iy(t,r,!1);break;case"textarea":Nc(t),ay(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?oo(t,!!r.multiple,i,!1):r.defaultValue!=null&&oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Eu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)G_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ks(hl.current),Ks(Jn.current),Pc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qn]=e,(i=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:Cc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=e,e.stateNode=r}return jt(e),null;case 13:if(Ce(Ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&ln!==null&&e.mode&1&&!(e.flags&128))h_(),xo(),e.flags|=98560,i=!1;else if(i=Pc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Qn]=e}else xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),i=!1}else On!==null&&(Wf(On),On=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?lt===0&&(lt=3):fm())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return wo(),Mf(t,e),t===null&&ll(e.stateNode.containerInfo),jt(e),null;case 10:return Xp(e.type._context),jt(e),null;case 17:return Xt(e.type)&&bu(),jt(e),null;case 19:if(Ce(Ue),i=e.memoizedState,i===null)return jt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ea(i,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ru(t),a!==null){for(e.flags|=128,Ea(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Ue,Ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&Qe()>bo&&(e.flags|=128,r=!0,Ea(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ru(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ea(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Le)return jt(e),null}else 2*Qe()-i.renderingStartTime>bo&&n!==1073741824&&(e.flags|=128,r=!0,Ea(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qe(),e.sibling=null,n=Ue.current,Ie(Ue,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return hm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?on&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function HT(t,e){switch(Wp(e),e.tag){case 1:return Xt(e.type)&&bu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wo(),Ce(Qt),Ce(Ot),tm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return em(e),null;case 13:if(Ce(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));xo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Ue),null;case 4:return wo(),null;case 10:return Xp(e.type._context),null;case 22:case 23:return hm(),null;case 24:return null;default:return null}}var Lc=!1,Ct=!1,WT=typeof WeakSet=="function"?WeakSet:Set,G=null;function no(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function Uf(t,e,n){try{n()}catch(r){We(t,e,r)}}var Xy=!1;function KT(t,e){if(Ef=xu,t=Zx(),qp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(c=a+s),p!==i||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++d===s&&(c=a),g===i&&++f===r&&(u=a),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bf={focusedElem:t,selectionRange:n},xu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var R=A.memoizedProps,k=A.memoizedState,E=e.stateNode,x=E.getSnapshotBeforeUpdate(e.elementType===e.type?R:Pn(e.type,R),k);E.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(T){We(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return A=Xy,Xy=!1,A}function za(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Uf(e,n,i)}s=s.next}while(s!==r)}}function pd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ff(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Q_(t){var e=t.alternate;e!==null&&(t.alternate=null,Q_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[ul],delete e[If],delete e[jT],delete e[RT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function X_(t){return t.tag===5||t.tag===3||t.tag===4}function Yy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||X_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Eu));else if(r!==4&&(t=t.child,t!==null))for(Bf(t,e,n),t=t.sibling;t!==null;)Bf(t,e,n),t=t.sibling}function $f(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($f(t,e,n),t=t.sibling;t!==null;)$f(t,e,n),t=t.sibling}var xt=null,Dn=!1;function qr(t,e,n){for(n=n.child;n!==null;)Y_(t,e,n),n=n.sibling}function Y_(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(od,n)}catch{}switch(n.tag){case 5:Ct||no(n,e);case 6:var r=xt,s=Dn;xt=null,qr(t,e,n),xt=r,Dn=s,xt!==null&&(Dn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(Dn?(t=xt,n=n.stateNode,t.nodeType===8?bh(t.parentNode,n):t.nodeType===1&&bh(t,n),il(t)):bh(xt,n.stateNode));break;case 4:r=xt,s=Dn,xt=n.stateNode.containerInfo,Dn=!0,qr(t,e,n),xt=r,Dn=s;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Uf(n,e,a),s=s.next}while(s!==r)}qr(t,e,n);break;case 1:if(!Ct&&(no(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){We(n,e,c)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,qr(t,e,n),Ct=r):qr(t,e,n);break;default:qr(t,e,n)}}function Jy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WT),e.forEach(function(r){var s=nI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:xt=c.stateNode,Dn=!1;break e;case 3:xt=c.stateNode.containerInfo,Dn=!0;break e;case 4:xt=c.stateNode.containerInfo,Dn=!0;break e}c=c.return}if(xt===null)throw Error(z(160));Y_(i,a,s),xt=null,Dn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){We(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)J_(e,t),e=e.sibling}function J_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Kn(t),r&4){try{za(3,t,t.return),pd(3,t)}catch(R){We(t,t.return,R)}try{za(5,t,t.return)}catch(R){We(t,t.return,R)}}break;case 1:Cn(e,t),Kn(t),r&512&&n!==null&&no(n,n.return);break;case 5:if(Cn(e,t),Kn(t),r&512&&n!==null&&no(n,n.return),t.flags&32){var s=t.stateNode;try{tl(s,"")}catch(R){We(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&_x(s,i),hf(c,a);var d=hf(c,i);for(a=0;a<u.length;a+=2){var f=u[a],p=u[a+1];f==="style"?Tx(s,p):f==="dangerouslySetInnerHTML"?bx(s,p):f==="children"?tl(s,p):Ap(s,f,p,d)}switch(c){case"input":af(s,i);break;case"textarea":wx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?oo(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?oo(s,!!i.multiple,i.defaultValue,!0):oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[ul]=i}catch(R){We(t,t.return,R)}}break;case 6:if(Cn(e,t),Kn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){We(t,t.return,R)}}break;case 3:if(Cn(e,t),Kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{il(e.containerInfo)}catch(R){We(t,t.return,R)}break;case 4:Cn(e,t),Kn(t);break;case 13:Cn(e,t),Kn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(um=Qe())),r&4&&Jy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(d=Ct)||f,Cn(e,t),Ct=d):Cn(e,t),Kn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(G=t,f=t.child;f!==null;){for(p=G=f;G!==null;){switch(g=G,w=g.child,g.tag){case 0:case 11:case 14:case 15:za(4,g,g.return);break;case 1:no(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(R){We(r,n,R)}}break;case 5:no(g,g.return);break;case 22:if(g.memoizedState!==null){e0(p);continue}}w!==null?(w.return=g,G=w):e0(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Nx("display",a))}catch(R){We(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){We(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Cn(e,t),Kn(t),r&4&&Jy(t);break;case 21:break;default:Cn(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(X_(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(tl(s,""),r.flags&=-33);var i=Yy(t);$f(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=Yy(t);Bf(t,c,a);break;default:throw Error(z(161))}}catch(u){We(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GT(t,e,n){G=t,Z_(t)}function Z_(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Lc;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Ct;c=Lc;var d=Ct;if(Lc=a,(Ct=u)&&!d)for(G=s;G!==null;)a=G,u=a.child,a.tag===22&&a.memoizedState!==null?t0(s):u!==null?(u.return=a,G=u):t0(s);for(;i!==null;)G=i,Z_(i),i=i.sibling;G=s,Lc=c,Ct=d}Zy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Zy(t)}}function Zy(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||pd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Vy(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vy(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&il(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ct||e.flags&512&&Ff(e)}catch(g){We(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function e0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function t0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pd(4,e)}catch(u){We(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){We(e,s,u)}}var i=e.return;try{Ff(e)}catch(u){We(e,i,u)}break;case 5:var a=e.return;try{Ff(e)}catch(u){We(e,a,u)}}}catch(u){We(e,e.return,u)}if(e===t){G=null;break}var c=e.sibling;if(c!==null){c.return=e.return,G=c;break}G=e.return}}var QT=Math.ceil,Pu=Pr.ReactCurrentDispatcher,lm=Pr.ReactCurrentOwner,bn=Pr.ReactCurrentBatchConfig,fe=0,gt=null,nt=null,wt=0,on=0,ro=Ns(0),lt=0,gl=null,ni=0,md=0,cm=0,qa=null,Wt=null,um=0,bo=1/0,fr=null,Du=!1,zf=null,us=null,Vc=!1,ts=null,Ou=0,Ha=0,qf=null,nu=-1,ru=0;function Ut(){return fe&6?Qe():nu!==-1?nu:nu=Qe()}function ds(t){return t.mode&1?fe&2&&wt!==0?wt&-wt:CT.transition!==null?(ru===0&&(ru=Vx()),ru):(t=_e,t!==0||(t=window.event,t=t===void 0?16:qx(t.type)),t):1}function Mn(t,e,n,r){if(50<Ha)throw Ha=0,qf=null,Error(z(185));Dl(t,n,r),(!(fe&2)||t!==gt)&&(t===gt&&(!(fe&2)&&(md|=n),lt===4&&Qr(t,wt)),Yt(t,r),n===1&&fe===0&&!(e.mode&1)&&(bo=Qe()+500,dd&&Ts()))}function Yt(t,e){var n=t.callbackNode;CN(t,e);var r=vu(t,t===gt?wt:0);if(r===0)n!==null&&uy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uy(n),e===1)t.tag===0?AT(n0.bind(null,t)):c_(n0.bind(null,t)),kT(function(){!(fe&6)&&Ts()}),n=null;else{switch(Mx(r)){case 1:n=Lp;break;case 4:n=Ox;break;case 16:n=yu;break;case 536870912:n=Lx;break;default:n=yu}n=aw(n,ew.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ew(t,e){if(nu=-1,ru=0,fe&6)throw Error(z(327));var n=t.callbackNode;if(ho()&&t.callbackNode!==n)return null;var r=vu(t,t===gt?wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lu(t,r);else{e=r;var s=fe;fe|=2;var i=nw();(gt!==t||wt!==e)&&(fr=null,bo=Qe()+500,Qs(t,e));do try{JT();break}catch(c){tw(t,c)}while(!0);Qp(),Pu.current=i,fe=s,nt!==null?e=0:(gt=null,wt=0,e=lt)}if(e!==0){if(e===2&&(s=yf(t),s!==0&&(r=s,e=Hf(t,s))),e===1)throw n=gl,Qs(t,0),Qr(t,r),Yt(t,Qe()),n;if(e===6)Qr(t,r);else{if(s=t.current.alternate,!(r&30)&&!XT(s)&&(e=Lu(t,r),e===2&&(i=yf(t),i!==0&&(r=i,e=Hf(t,i))),e===1))throw n=gl,Qs(t,0),Qr(t,r),Yt(t,Qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Bs(t,Wt,fr);break;case 3:if(Qr(t,r),(r&130023424)===r&&(e=um+500-Qe(),10<e)){if(vu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ut(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Tf(Bs.bind(null,t,Wt,fr),e);break}Bs(t,Wt,fr);break;case 4:if(Qr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Vn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*QT(r/1960))-r,10<r){t.timeoutHandle=Tf(Bs.bind(null,t,Wt,fr),r);break}Bs(t,Wt,fr);break;case 5:Bs(t,Wt,fr);break;default:throw Error(z(329))}}}return Yt(t,Qe()),t.callbackNode===n?ew.bind(null,t):null}function Hf(t,e){var n=qa;return t.current.memoizedState.isDehydrated&&(Qs(t,e).flags|=256),t=Lu(t,e),t!==2&&(e=Wt,Wt=n,e!==null&&Wf(e)),t}function Wf(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function XT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Fn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~cm,e&=~md,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),r=1<<n;t[n]=-1,e&=~r}}function n0(t){if(fe&6)throw Error(z(327));ho();var e=vu(t,0);if(!(e&1))return Yt(t,Qe()),null;var n=Lu(t,e);if(t.tag!==0&&n===2){var r=yf(t);r!==0&&(e=r,n=Hf(t,r))}if(n===1)throw n=gl,Qs(t,0),Qr(t,e),Yt(t,Qe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bs(t,Wt,fr),Yt(t,Qe()),null}function dm(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(bo=Qe()+500,dd&&Ts())}}function ri(t){ts!==null&&ts.tag===0&&!(fe&6)&&ho();var e=fe;fe|=1;var n=bn.transition,r=_e;try{if(bn.transition=null,_e=1,t)return t()}finally{_e=r,bn.transition=n,fe=e,!(fe&6)&&Ts()}}function hm(){on=ro.current,Ce(ro)}function Qs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IT(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(Wp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bu();break;case 3:wo(),Ce(Qt),Ce(Ot),tm();break;case 5:em(r);break;case 4:wo();break;case 13:Ce(Ue);break;case 19:Ce(Ue);break;case 10:Xp(r.type._context);break;case 22:case 23:hm()}n=n.return}if(gt=t,nt=t=hs(t.current,null),wt=on=e,lt=0,gl=null,cm=md=ni=0,Wt=qa=null,Ws!==null){for(e=0;e<Ws.length;e++)if(n=Ws[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ws=null}return t}function tw(t,e){do{var n=nt;try{if(Qp(),Zc.current=Cu,Au){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Au=!1}if(ti=0,pt=at=Fe=null,$a=!1,fl=0,lm.current=null,n===null||n.return===null){lt=1,gl=e,nt=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=wt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=zy(a);if(w!==null){w.flags&=-257,qy(w,a,c,i,e),w.mode&1&&$y(i,d,e),e=w,u=d;var A=e.updateQueue;if(A===null){var R=new Set;R.add(u),e.updateQueue=R}else A.add(u);break e}else{if(!(e&1)){$y(i,d,e),fm();break e}u=Error(z(426))}}else if(Le&&c.mode&1){var k=zy(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),qy(k,a,c,i,e),Kp(Eo(u,c));break e}}i=u=Eo(u,c),lt!==4&&(lt=2),qa===null?qa=[i]:qa.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=M_(i,u,e);Ly(i,E);break e;case 1:c=u;var x=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(us===null||!us.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=U_(i,c,e);Ly(i,T);break e}}i=i.return}while(i!==null)}sw(n)}catch(O){e=O,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function nw(){var t=Pu.current;return Pu.current=Cu,t===null?Cu:t}function fm(){(lt===0||lt===3||lt===2)&&(lt=4),gt===null||!(ni&268435455)&&!(md&268435455)||Qr(gt,wt)}function Lu(t,e){var n=fe;fe|=2;var r=nw();(gt!==t||wt!==e)&&(fr=null,Qs(t,e));do try{YT();break}catch(s){tw(t,s)}while(!0);if(Qp(),fe=n,Pu.current=r,nt!==null)throw Error(z(261));return gt=null,wt=0,lt}function YT(){for(;nt!==null;)rw(nt)}function JT(){for(;nt!==null&&!bN();)rw(nt)}function rw(t){var e=ow(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?sw(t):nt=e,lm.current=null}function sw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HT(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,nt=null;return}}else if(n=qT(n,e,on),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);lt===0&&(lt=5)}function Bs(t,e,n){var r=_e,s=bn.transition;try{bn.transition=null,_e=1,ZT(t,e,n,r)}finally{bn.transition=s,_e=r}return null}function ZT(t,e,n,r){do ho();while(ts!==null);if(fe&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(PN(t,i),t===gt&&(nt=gt=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vc||(Vc=!0,aw(yu,function(){return ho(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=bn.transition,bn.transition=null;var a=_e;_e=1;var c=fe;fe|=4,lm.current=null,KT(t,n),J_(n,t),xT(bf),xu=!!Ef,bf=Ef=null,t.current=n,GT(n),NN(),fe=c,_e=a,bn.transition=i}else t.current=n;if(Vc&&(Vc=!1,ts=t,Ou=s),i=t.pendingLanes,i===0&&(us=null),kN(n.stateNode),Yt(t,Qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Du)throw Du=!1,t=zf,zf=null,t;return Ou&1&&t.tag!==0&&ho(),i=t.pendingLanes,i&1?t===qf?Ha++:(Ha=0,qf=t):Ha=0,Ts(),null}function ho(){if(ts!==null){var t=Mx(Ou),e=bn.transition,n=_e;try{if(bn.transition=null,_e=16>t?16:t,ts===null)var r=!1;else{if(t=ts,ts=null,Ou=0,fe&6)throw Error(z(331));var s=fe;for(fe|=4,G=t.current;G!==null;){var i=G,a=i.child;if(G.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(G=d;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:za(8,f,i)}var p=f.child;if(p!==null)p.return=f,G=p;else for(;G!==null;){f=G;var g=f.sibling,w=f.return;if(Q_(f),f===d){G=null;break}if(g!==null){g.return=w,G=g;break}G=w}}}var A=i.alternate;if(A!==null){var R=A.child;if(R!==null){A.child=null;do{var k=R.sibling;R.sibling=null,R=k}while(R!==null)}}G=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,G=a;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:za(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,G=E;break e}G=i.return}}var x=t.current;for(G=x;G!==null;){a=G;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,G=v;else e:for(a=x;G!==null;){if(c=G,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:pd(9,c)}}catch(O){We(c,c.return,O)}if(c===a){G=null;break e}var T=c.sibling;if(T!==null){T.return=c.return,G=T;break e}G=c.return}}if(fe=s,Ts(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(od,t)}catch{}r=!0}return r}finally{_e=n,bn.transition=e}}return!1}function r0(t,e,n){e=Eo(n,e),e=M_(t,e,1),t=cs(t,e,1),e=Ut(),t!==null&&(Dl(t,1,e),Yt(t,e))}function We(t,e,n){if(t.tag===3)r0(t,t,n);else for(;e!==null;){if(e.tag===3){r0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(us===null||!us.has(r))){t=Eo(n,t),t=U_(e,t,1),e=cs(e,t,1),t=Ut(),e!==null&&(Dl(e,1,t),Yt(e,t));break}}e=e.return}}function eI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ut(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(wt&n)===n&&(lt===4||lt===3&&(wt&130023424)===wt&&500>Qe()-um?Qs(t,0):cm|=n),Yt(t,e)}function iw(t,e){e===0&&(t.mode&1?(e=kc,kc<<=1,!(kc&130023424)&&(kc=4194304)):e=1);var n=Ut();t=kr(t,e),t!==null&&(Dl(t,e,n),Yt(t,n))}function tI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iw(t,n)}function nI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),iw(t,n)}var ow;ow=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gt=!1,zT(t,e,n);Gt=!!(t.flags&131072)}else Gt=!1,Le&&e.flags&1048576&&u_(e,Iu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tu(t,e),t=e.pendingProps;var s=vo(e,Ot.current);uo(e,n),s=rm(null,e,r,t,s,n);var i=sm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(r)?(i=!0,Nu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jp(e),s.updater=fd,e.stateNode=s,s._reactInternals=e,Cf(e,r,t,n),e=Of(null,e,r,!0,i,n)):(e.tag=0,Le&&i&&Hp(e),Mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=sI(r),t=Pn(r,t),s){case 0:e=Df(null,e,r,t,n);break e;case 1:e=Ky(null,e,r,t,n);break e;case 11:e=Hy(null,e,r,t,n);break e;case 14:e=Wy(null,e,r,Pn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),Df(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),Ky(t,e,r,s,n);case 3:e:{if(z_(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,g_(t,e),ju(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Eo(Error(z(423)),e),e=Gy(t,e,r,n,s);break e}else if(r!==s){s=Eo(Error(z(424)),e),e=Gy(t,e,r,n,s);break e}else for(ln=ls(e.stateNode.containerInfo.firstChild),dn=e,Le=!0,On=null,n=p_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xo(),r===s){e=Sr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return y_(e),t===null&&jf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Nf(r,s)?a=null:i!==null&&Nf(r,i)&&(e.flags|=32),$_(t,e),Mt(t,e,a,n),e.child;case 6:return t===null&&jf(e),null;case 13:return q_(t,e,n);case 4:return Zp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_o(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),Hy(t,e,r,s,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ie(ku,r._currentValue),r._currentValue=a,i!==null)if(Fn(i.value,a)){if(i.children===s.children&&!Qt.current){e=Sr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=wr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Rf(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Rf(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,uo(e,n),s=Tn(s),r=r(s),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,s=Pn(r,e.pendingProps),s=Pn(r.type,s),Wy(t,e,r,s,n);case 15:return F_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pn(r,s),tu(t,e),e.tag=1,Xt(r)?(t=!0,Nu(e)):t=!1,uo(e,n),V_(e,r,s),Cf(e,r,s,n),Of(null,e,r,!0,t,n);case 19:return H_(t,e,n);case 22:return B_(t,e,n)}throw Error(z(156,e.tag))};function aw(t,e){return Dx(t,e)}function rI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,r){return new rI(t,e,n,r)}function pm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sI(t){if(typeof t=="function")return pm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pp)return 11;if(t===Dp)return 14}return 2}function hs(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function su(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")pm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ki:return Xs(n.children,s,i,e);case Cp:a=8,s|=8;break;case tf:return t=En(12,n,e,s|2),t.elementType=tf,t.lanes=i,t;case nf:return t=En(13,n,e,s),t.elementType=nf,t.lanes=i,t;case rf:return t=En(19,n,e,s),t.elementType=rf,t.lanes=i,t;case yx:return gd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mx:a=10;break e;case gx:a=9;break e;case Pp:a=11;break e;case Dp:a=14;break e;case Wr:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=En(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xs(t,e,n,r){return t=En(7,t,r,e),t.lanes=n,t}function gd(t,e,n,r){return t=En(22,t,r,e),t.elementType=yx,t.lanes=n,t.stateNode={isHidden:!1},t}function Ah(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Ch(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hh(0),this.expirationTimes=hh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mm(t,e,n,r,s,i,a,c,u){return t=new iI(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=En(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jp(i),t}function oI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lw(t){if(!t)return ys;t=t._reactInternals;e:{if(pi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Xt(n))return l_(t,n,e)}return e}function cw(t,e,n,r,s,i,a,c,u){return t=mm(n,r,!0,t,s,i,a,c,u),t.context=lw(null),n=t.current,r=Ut(),s=ds(n),i=wr(r,s),i.callback=e??null,cs(n,i,s),t.current.lanes=s,Dl(t,s,r),Yt(t,r),t}function yd(t,e,n,r){var s=e.current,i=Ut(),a=ds(s);return n=lw(n),e.context===null?e.context=n:e.pendingContext=n,e=wr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=cs(s,e,a),t!==null&&(Mn(t,s,a,i),Jc(t,s,a)),a}function Vu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function s0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gm(t,e){s0(t,e),(t=t.alternate)&&s0(t,e)}function aI(){return null}var uw=typeof reportError=="function"?reportError:function(t){console.error(t)};function ym(t){this._internalRoot=t}vd.prototype.render=ym.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));yd(t,e,null,null)};vd.prototype.unmount=ym.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ri(function(){yd(null,t,null,null)}),e[Ir]=null}};function vd(t){this._internalRoot=t}vd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gr.length&&e!==0&&e<Gr[n].priority;n++);Gr.splice(n,0,t),n===0&&zx(t)}};function vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function i0(){}function lI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Vu(a);i.call(d)}}var a=cw(e,r,t,0,null,!1,!1,"",i0);return t._reactRootContainer=a,t[Ir]=a.current,ll(t.nodeType===8?t.parentNode:t),ri(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Vu(u);c.call(d)}}var u=mm(t,0,!1,null,null,!1,!1,"",i0);return t._reactRootContainer=u,t[Ir]=u.current,ll(t.nodeType===8?t.parentNode:t),ri(function(){yd(e,u,n,r)}),u}function _d(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=Vu(a);c.call(u)}}yd(e,a,t,s)}else a=lI(n,e,t,s,r);return Vu(a)}Ux=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sa(e.pendingLanes);n!==0&&(Vp(e,n|1),Yt(e,Qe()),!(fe&6)&&(bo=Qe()+500,Ts()))}break;case 13:ri(function(){var r=kr(t,1);if(r!==null){var s=Ut();Mn(r,t,1,s)}}),gm(t,1)}};Mp=function(t){if(t.tag===13){var e=kr(t,134217728);if(e!==null){var n=Ut();Mn(e,t,134217728,n)}gm(t,134217728)}};Fx=function(t){if(t.tag===13){var e=ds(t),n=kr(t,e);if(n!==null){var r=Ut();Mn(n,t,e,r)}gm(t,e)}};Bx=function(){return _e};$x=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};pf=function(t,e,n){switch(e){case"input":if(af(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ud(r);if(!s)throw Error(z(90));xx(r),af(r,s)}}}break;case"textarea":wx(t,n);break;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}};Sx=dm;jx=ri;var cI={usingClientEntryPoint:!1,Events:[Ll,Yi,ud,Ix,kx,dm]},ba={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uI={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cx(t),t===null?null:t.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||aI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{od=Mc.inject(uI),Yn=Mc}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cI;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vm(e))throw Error(z(200));return oI(t,e,null,n)};mn.createRoot=function(t,e){if(!vm(t))throw Error(z(299));var n=!1,r="",s=uw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=mm(t,1,!1,null,null,n,!1,r,s),t[Ir]=e.current,ll(t.nodeType===8?t.parentNode:t),new ym(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Cx(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return ri(t)};mn.hydrate=function(t,e,n){if(!xd(e))throw Error(z(200));return _d(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!vm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=uw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=cw(e,null,t,1,n??null,s,!1,i,a),t[Ir]=e.current,ll(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new vd(e)};mn.render=function(t,e,n){if(!xd(e))throw Error(z(200));return _d(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!xd(t))throw Error(z(40));return t._reactRootContainer?(ri(function(){_d(null,null,t,!1,function(){t._reactRootContainer=null,t[Ir]=null})}),!0):!1};mn.unstable_batchedUpdates=dm;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xd(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return _d(t,e,n,!1,r)};mn.version="18.3.1-next-f1338f8080-20240426";function dw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dw)}catch(t){console.error(t)}}dw(),dx.exports=mn;var dI=dx.exports,o0=dI;Zh.createRoot=o0.createRoot,Zh.hydrateRoot=o0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yl(){return yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yl.apply(this,arguments)}var ns;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ns||(ns={}));const a0="popstate";function hI(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return Kf("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Mu(s)}return pI(e,n,null,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fI(){return Math.random().toString(36).substr(2,8)}function l0(t,e){return{usr:t.state,key:t.key,idx:e}}function Kf(t,e,n,r){return n===void 0&&(n=null),yl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Do(e):e,{state:n,key:e&&e.key||r||fI()})}function Mu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Do(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pI(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c=ns.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(yl({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function p(){c=ns.Pop;let k=f(),E=k==null?null:k-d;d=k,u&&u({action:c,location:R.location,delta:E})}function g(k,E){c=ns.Push;let x=Kf(R.location,k,E);d=f()+1;let v=l0(x,d),T=R.createHref(x);try{a.pushState(v,"",T)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(T)}i&&u&&u({action:c,location:R.location,delta:1})}function w(k,E){c=ns.Replace;let x=Kf(R.location,k,E);d=f();let v=l0(x,d),T=R.createHref(x);a.replaceState(v,"",T),i&&u&&u({action:c,location:R.location,delta:0})}function A(k){let E=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof k=="string"?k:Mu(k);return x=x.replace(/ $/,"%20"),Xe(E,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,E)}let R={get action(){return c},get location(){return t(s,a)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(a0,p),u=k,()=>{s.removeEventListener(a0,p),u=null}},createHref(k){return e(s,k)},createURL:A,encodeLocation(k){let E=A(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:w,go(k){return a.go(k)}};return R}var c0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(c0||(c0={}));function mI(t,e,n){return n===void 0&&(n="/"),gI(t,e,n)}function gI(t,e,n,r){let s=typeof e=="string"?Do(e):e,i=xm(s.pathname||"/",n);if(i==null)return null;let a=fw(t);yI(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=jI(i);c=II(a[u],d)}return c}function fw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(Xe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=fs([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Xe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),fw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:NI(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of pw(i.path))s(i,a,u)}),e}function pw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=pw(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function yI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vI=/^:[\w-]+$/,xI=3,_I=2,wI=1,EI=10,bI=-2,u0=t=>t==="*";function NI(t,e){let n=t.split("/"),r=n.length;return n.some(u0)&&(r+=bI),e&&(r+=_I),n.filter(s=>!u0(s)).reduce((s,i)=>s+(vI.test(i)?xI:i===""?wI:EI),r)}function TI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function II(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=kI({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:fs([i,p.pathname]),pathnameBase:PI(fs([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=fs([i,p.pathnameBase]))}return a}function kI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=SI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:w}=f;if(g==="*"){let R=c[p]||"";a=i.slice(0,i.length-R.length).replace(/(.)\/+$/,"$1")}const A=c[p];return w&&!A?d[g]=void 0:d[g]=(A||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function SI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function jI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function RI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Do(t):t;return{pathname:n?n.startsWith("/")?n:AI(n,e):e,search:DI(r),hash:OI(s)}}function AI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ph(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _m(t,e){let n=CI(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function wm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Do(t):(s=yl({},t),Xe(!s.pathname||!s.pathname.includes("?"),Ph("?","pathname","search",s)),Xe(!s.pathname||!s.pathname.includes("#"),Ph("#","pathname","hash",s)),Xe(!s.search||!s.search.includes("#"),Ph("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=RI(s,c),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const fs=t=>t.join("/").replace(/\/\/+/g,"/"),PI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,OI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mw=["post","put","patch","delete"];new Set(mw);const VI=["get",...mw];new Set(VI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vl.apply(this,arguments)}const Em=j.createContext(null),MI=j.createContext(null),Is=j.createContext(null),wd=j.createContext(null),ks=j.createContext({outlet:null,matches:[],isDataRoute:!1}),gw=j.createContext(null);function UI(t,e){let{relative:n}=e===void 0?{}:e;Oo()||Xe(!1);let{basename:r,navigator:s}=j.useContext(Is),{hash:i,pathname:a,search:c}=vw(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:fs([r,a])),s.createHref({pathname:u,search:c,hash:i})}function Oo(){return j.useContext(wd)!=null}function Ss(){return Oo()||Xe(!1),j.useContext(wd).location}function yw(t){j.useContext(Is).static||j.useLayoutEffect(t)}function Dr(){let{isDataRoute:t}=j.useContext(ks);return t?JI():FI()}function FI(){Oo()||Xe(!1);let t=j.useContext(Em),{basename:e,future:n,navigator:r}=j.useContext(Is),{matches:s}=j.useContext(ks),{pathname:i}=Ss(),a=JSON.stringify(_m(s,n.v7_relativeSplatPath)),c=j.useRef(!1);return yw(()=>{c.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=wm(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:fs([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,a,i,t])}function vw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(Is),{matches:s}=j.useContext(ks),{pathname:i}=Ss(),a=JSON.stringify(_m(s,r.v7_relativeSplatPath));return j.useMemo(()=>wm(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function BI(t,e){return $I(t,e)}function $I(t,e,n,r){Oo()||Xe(!1);let{navigator:s}=j.useContext(Is),{matches:i}=j.useContext(ks),a=i[i.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=Ss(),f;if(e){var p;let k=typeof e=="string"?Do(e):e;u==="/"||(p=k.pathname)!=null&&p.startsWith(u)||Xe(!1),f=k}else f=d;let g=f.pathname||"/",w=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let A=mI(t,{pathname:w}),R=KI(A&&A.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:fs([u,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:fs([u,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return e&&R?j.createElement(wd.Provider,{value:{location:vl({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ns.Pop}},R):R}function zI(){let t=YI(),e=LI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const qI=j.createElement(zI,null);class HI extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(ks.Provider,{value:this.props.routeContext},j.createElement(gw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WI(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(Em);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(ks.Provider,{value:e},r)}function KI(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=a.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);f>=0||Xe(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:w}=n,A=p.route.loader&&g[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||A){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,p,g)=>{let w,A=!1,R=null,k=null;n&&(w=c&&p.route.id?c[p.route.id]:void 0,R=p.route.errorElement||qI,u&&(d<0&&g===0?(ZI("route-fallback"),A=!0,k=null):d===g&&(A=!0,k=p.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,g+1)),x=()=>{let v;return w?v=R:A?v=k:p.route.Component?v=j.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=f,j.createElement(WI,{match:p,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:v})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?j.createElement(HI,{location:n.location,revalidation:n.revalidation,component:R,error:w,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):x()},null)}var xw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(xw||{}),_w=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_w||{});function GI(t){let e=j.useContext(Em);return e||Xe(!1),e}function QI(t){let e=j.useContext(MI);return e||Xe(!1),e}function XI(t){let e=j.useContext(ks);return e||Xe(!1),e}function ww(t){let e=XI(),n=e.matches[e.matches.length-1];return n.route.id||Xe(!1),n.route.id}function YI(){var t;let e=j.useContext(gw),n=QI(),r=ww();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function JI(){let{router:t}=GI(xw.UseNavigateStable),e=ww(_w.UseNavigateStable),n=j.useRef(!1);return yw(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,vl({fromRouteId:e},i)))},[t,e])}const d0={};function ZI(t,e,n){d0[t]||(d0[t]=!0)}function e2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function bm(t){let{to:e,replace:n,state:r,relative:s}=t;Oo()||Xe(!1);let{future:i,static:a}=j.useContext(Is),{matches:c}=j.useContext(ks),{pathname:u}=Ss(),d=Dr(),f=wm(e,_m(c,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function Re(t){Xe(!1)}function t2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ns.Pop,navigator:i,static:a=!1,future:c}=t;Oo()&&Xe(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:i,static:a,future:vl({v7_relativeSplatPath:!1},c)}),[u,c,i,a]);typeof r=="string"&&(r=Do(r));let{pathname:f="/",search:p="",hash:g="",state:w=null,key:A="default"}=r,R=j.useMemo(()=>{let k=xm(f,u);return k==null?null:{location:{pathname:k,search:p,hash:g,state:w,key:A},navigationType:s}},[u,f,p,g,w,A,s]);return R==null?null:j.createElement(Is.Provider,{value:d},j.createElement(wd.Provider,{children:n,value:R}))}function n2(t){let{children:e,location:n}=t;return BI(Gf(e),n)}new Promise(()=>{});function Gf(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,Gf(r.props.children,i));return}r.type!==Re&&Xe(!1),!r.props.index||!r.props.children||Xe(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Gf(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qf(){return Qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qf.apply(this,arguments)}function r2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function s2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function i2(t,e){return t.button===0&&(!e||e==="_self")&&!s2(t)}function Xf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function o2(t,e){let n=Xf(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const a2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],l2="6";try{window.__reactRouterVersion=l2}catch{}const c2="startTransition",h0=eN[c2];function u2(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=hI({window:s,v5Compat:!0}));let a=i.current,[c,u]=j.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=j.useCallback(p=>{d&&h0?h0(()=>u(p)):u(p)},[u,d]);return j.useLayoutEffect(()=>a.listen(f),[a,f]),j.useEffect(()=>e2(r),[r]),j.createElement(t2,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const d2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",h2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=r2(e,a2),{basename:w}=j.useContext(Is),A,R=!1;if(typeof d=="string"&&h2.test(d)&&(A=d,d2))try{let v=new URL(window.location.href),T=d.startsWith("//")?new URL(v.protocol+d):new URL(d),O=xm(T.pathname,w);T.origin===v.origin&&O!=null?d=O+T.search+T.hash:R=!0}catch{}let k=UI(d,{relative:s}),E=f2(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:p});function x(v){r&&r(v),v.defaultPrevented||E(v)}return j.createElement("a",Qf({},g,{href:A||k,onClick:R||i?r:x,ref:n,target:u}))});var f0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(f0||(f0={}));var p0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(p0||(p0={}));function f2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:c}=e===void 0?{}:e,u=Dr(),d=Ss(),f=vw(t,{relative:a});return j.useCallback(p=>{if(i2(p,n)){p.preventDefault();let g=r!==void 0?r:Mu(d)===Mu(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[d,u,f,r,s,n,t,i,a,c])}function p2(t){let e=j.useRef(Xf(t)),n=j.useRef(!1),r=Ss(),s=j.useMemo(()=>o2(r.search,n.current?null:e.current),[r.search]),i=Dr(),a=j.useCallback((c,u)=>{const d=Xf(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,a]}var m0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},m2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},bw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,a||(g=64)),r.push(n[f],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ew(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):m2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new g2;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),p!==64){const A=d<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class g2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y2=function(t){const e=Ew(t);return bw.encodeByteArray(e,!0)},Uu=function(t){return y2(t).replace(/\./g,"")},Nw=function(t){try{return bw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=()=>v2().__FIREBASE_DEFAULTS__,_2=()=>{if(typeof process>"u"||typeof m0>"u")return;const t=m0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},w2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Nw(t[1]);return e&&JSON.parse(e)},Ed=()=>{try{return x2()||_2()||w2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Tw=t=>{var e,n;return(n=(e=Ed())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Iw=t=>{const e=Tw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kw=()=>{var t;return(t=Ed())===null||t===void 0?void 0:t.config},Sw=t=>{var e;return(e=Ed())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Uu(JSON.stringify(n)),Uu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function N2(){var t;const e=(t=Ed())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function I2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function k2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S2(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function j2(){return!N2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R2(){try{return typeof indexedDB=="object"}catch{return!1}}function A2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="FirebaseError";class ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=C2,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ml.prototype.create)}}class Ml{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?P2(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new ir(s,c,r)}}function P2(t,e){return t.replace(D2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const D2=/\{\$([^}]+)}/g;function O2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(g0(i)&&g0(a)){if(!Fu(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function g0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ra(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Aa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function L2(t,e){const n=new V2(t,e);return n.subscribe.bind(n)}class V2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");M2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Dh),s.error===void 0&&(s.error=Dh),s.complete===void 0&&(s.complete=Dh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t){return t&&t._delegate?t._delegate:t}class vs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new E2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B2(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:F2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F2(t){return t===$s?void 0:t}function B2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new U2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const z2={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},q2=ue.INFO,H2={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},W2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=H2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nm{constructor(e){this.name=e,this._logLevel=q2,this._logHandler=W2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const K2=(t,e)=>e.some(n=>t instanceof n);let y0,v0;function G2(){return y0||(y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q2(){return v0||(v0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rw=new WeakMap,Yf=new WeakMap,Aw=new WeakMap,Oh=new WeakMap,Tm=new WeakMap;function X2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ps(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Rw.set(n,t)}).catch(()=>{}),Tm.set(e,t),e}function Y2(t){if(Yf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Yf.set(t,e)}let Jf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Aw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function J2(t){Jf=t(Jf)}function Z2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lh(this),e,...n);return Aw.set(r,e.sort?e.sort():[e]),ps(r)}:Q2().includes(t)?function(...e){return t.apply(Lh(this),e),ps(Rw.get(this))}:function(...e){return ps(t.apply(Lh(this),e))}}function ek(t){return typeof t=="function"?Z2(t):(t instanceof IDBTransaction&&Y2(t),K2(t,G2())?new Proxy(t,Jf):t)}function ps(t){if(t instanceof IDBRequest)return X2(t);if(Oh.has(t))return Oh.get(t);const e=ek(t);return e!==t&&(Oh.set(t,e),Tm.set(e,t)),e}const Lh=t=>Tm.get(t);function tk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=ps(a);return r&&a.addEventListener("upgradeneeded",u=>{r(ps(a.result),u.oldVersion,u.newVersion,ps(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const nk=["get","getKey","getAll","getAllKeys","count"],rk=["put","add","delete","clear"],Vh=new Map;function x0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=rk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nk.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Vh.set(e,i),i}J2(t=>({...t,get:(e,n,r)=>x0(e,n)||t.get(e,n,r),has:(e,n)=>!!x0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ik(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ik(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zf="@firebase/app",_0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new Nm("@firebase/app"),ok="@firebase/app-compat",ak="@firebase/analytics-compat",lk="@firebase/analytics",ck="@firebase/app-check-compat",uk="@firebase/app-check",dk="@firebase/auth",hk="@firebase/auth-compat",fk="@firebase/database",pk="@firebase/data-connect",mk="@firebase/database-compat",gk="@firebase/functions",yk="@firebase/functions-compat",vk="@firebase/installations",xk="@firebase/installations-compat",_k="@firebase/messaging",wk="@firebase/messaging-compat",Ek="@firebase/performance",bk="@firebase/performance-compat",Nk="@firebase/remote-config",Tk="@firebase/remote-config-compat",Ik="@firebase/storage",kk="@firebase/storage-compat",Sk="@firebase/firestore",jk="@firebase/vertexai-preview",Rk="@firebase/firestore-compat",Ak="firebase",Ck="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="[DEFAULT]",Pk={[Zf]:"fire-core",[ok]:"fire-core-compat",[lk]:"fire-analytics",[ak]:"fire-analytics-compat",[uk]:"fire-app-check",[ck]:"fire-app-check-compat",[dk]:"fire-auth",[hk]:"fire-auth-compat",[fk]:"fire-rtdb",[pk]:"fire-data-connect",[mk]:"fire-rtdb-compat",[gk]:"fire-fn",[yk]:"fire-fn-compat",[vk]:"fire-iid",[xk]:"fire-iid-compat",[_k]:"fire-fcm",[wk]:"fire-fcm-compat",[Ek]:"fire-perf",[bk]:"fire-perf-compat",[Nk]:"fire-rc",[Tk]:"fire-rc-compat",[Ik]:"fire-gcs",[kk]:"fire-gcs-compat",[Sk]:"fire-fst",[Rk]:"fire-fst-compat",[jk]:"fire-vertex","fire-js":"fire-js",[Ak]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new Map,Dk=new Map,tp=new Map;function w0(t,e){try{t.container.addComponent(e)}catch(n){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function si(t){const e=t.name;if(tp.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;tp.set(e,t);for(const n of xl.values())w0(n,t);for(const n of Dk.values())w0(n,t);return!0}function bd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new Ml("app","Firebase",Ok);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=Ck;function Cw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ep,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ms.create("bad-app-name",{appName:String(s)});if(n||(n=kw()),!n)throw ms.create("no-options");const i=xl.get(s);if(i){if(Fu(n,i.options)&&Fu(r,i.config))return i;throw ms.create("duplicate-app",{appName:s})}const a=new $2(s);for(const u of tp.values())a.addComponent(u);const c=new Lk(n,r,a);return xl.set(s,c),c}function Nd(t=ep){const e=xl.get(t);if(!e&&t===ep&&kw())return Cw();if(!e)throw ms.create("no-app",{appName:t});return e}function Pw(){return Array.from(xl.values())}function Zn(t,e,n){var r;let s=(r=Pk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(c.join(" "));return}si(new vs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="firebase-heartbeat-database",Mk=1,_l="firebase-heartbeat-store";let Mh=null;function Dw(){return Mh||(Mh=tk(Vk,Mk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_l)}catch(n){console.warn(n)}}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),Mh}async function Uk(t){try{const n=(await Dw()).transaction(_l),r=await n.objectStore(_l).get(Ow(t));return await n.done,r}catch(e){if(e instanceof ir)jr.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jr.warn(n.message)}}}async function E0(t,e){try{const r=(await Dw()).transaction(_l,"readwrite");await r.objectStore(_l).put(e,Ow(t)),await r.done}catch(n){if(n instanceof ir)jr.warn(n.message);else{const r=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jr.warn(r.message)}}}function Ow(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=1024,Bk=30*24*60*60*1e3;class $k{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=b0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=Bk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){jr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b0(),{heartbeatsToSend:r,unsentEntries:s}=zk(this._heartbeatsCache.heartbeats),i=Uu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return jr.warn(n),""}}}function b0(){return new Date().toISOString().substring(0,10)}function zk(t,e=Fk){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),N0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),N0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R2()?A2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Uk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return E0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return E0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function N0(t){return Uu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(t){si(new vs("platform-logger",e=>new sk(e),"PRIVATE")),si(new vs("heartbeat",e=>new $k(e),"PRIVATE")),Zn(Zf,_0,t),Zn(Zf,_0,"esm2017"),Zn("fire-js","")}Hk("");function Im(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Lw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wk=Lw,Vw=new Ml("auth","Firebase",Lw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new Nm("@firebase/auth");function Kk(t,...e){Bu.logLevel<=ue.WARN&&Bu.warn(`Auth (${mi}): ${t}`,...e)}function iu(t,...e){Bu.logLevel<=ue.ERROR&&Bu.error(`Auth (${mi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw km(t,...e)}function hn(t,...e){return km(t,...e)}function Mw(t,e,n){const r=Object.assign(Object.assign({},Wk()),{[e]:n});return new Ml("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return Mw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function km(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Vw.create(t,...e)}function Q(t,e,...n){if(!t)throw km(e,...n)}function vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iu(e),new Error(e)}function Rr(t,e){t||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Uw(){return T0()==="http:"||T0()==="https:"}function T0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Uw()||I2()||"connection"in navigator)?navigator.onLine:!0}function Qk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rr(n>e,"Short delay should be less than long delay!"),this.isMobile=b2()||k2()}get(){return Gk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){Rr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new Ul(3e4,6e4);function Jt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kn(t,e,n,r,s={}){return Bw(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Lo(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return T2()||(d.referrerPolicy="no-referrer"),Fw.fetch()($w(t,t.config.apiHost,n,c),d)})}async function Bw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Xk),e);try{const s=new Zk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Ca(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ca(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Ca(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Ca(t,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Mw(t,f,d);Bn(t,f)}}catch(s){if(s instanceof ir)throw s;Bn(t,"network-request-failed",{message:String(s)})}}async function js(t,e,n,r,s={}){const i=await kn(t,e,n,r,s);return"mfaPendingCredential"in i&&Bn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function $w(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Sm(t.config,s):`${t.config.apiScheme}://${s}`}function Jk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hn(this.auth,"network-request-failed")),Yk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ca(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t){return t!==void 0&&t.getResponse!==void 0}function k0(t){return t!==void 0&&t.enterprise!==void 0}class eS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Jk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(t){return(await kn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function nS(t,e){return kn(t,"GET","/v2/recaptchaConfig",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,e){return kn(t,"POST","/v1/accounts:delete",e)}async function zw(t,e){return kn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sS(t,e=!1){const n=ke(t),r=await n.getIdToken(e),s=jm(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Wa(Uh(s.auth_time)),issuedAtTime:Wa(Uh(s.iat)),expirationTime:Wa(Uh(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Uh(t){return Number(t)*1e3}function jm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return iu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Nw(n);return s?JSON.parse(s):(iu("Failed to decode base64 JWT payload"),null)}catch(s){return iu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function S0(t){const e=jm(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ir&&iS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wa(this.lastLoginAt),this.creationTime=Wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t){var e;const n=t.auth,r=await t.getIdToken(),s=await wl(t,zw(n,{idToken:r}));Q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?qw(i.providerUserInfo):[],c=lS(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new rp(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function aS(t){const e=ke(t);await $u(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function qw(t){return t.map(e=>{var{providerId:n}=e,r=Im(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(t,e){const n=await Bw(t,{},async()=>{const r=Lo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=$w(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Fw.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uS(t,e){return kn(t,"POST","/v2/accounts:revokeToken",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=S0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await cS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new fo;return r&&(Q(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Im(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wl(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sS(this,e)}reload(){return aS(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $u(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await wl(this,rS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,c,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,A=(a=n.photoURL)!==null&&a!==void 0?a:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:v,emailVerified:T,isAnonymous:O,providerData:V,stsTokenManager:b}=n;Q(v&&b,e,"internal-error");const y=fo.fromJSON(this.name,b);Q(typeof v=="string",e,"internal-error"),Hr(p,e.name),Hr(g,e.name),Q(typeof T=="boolean",e,"internal-error"),Q(typeof O=="boolean",e,"internal-error"),Hr(w,e.name),Hr(A,e.name),Hr(R,e.name),Hr(k,e.name),Hr(E,e.name),Hr(x,e.name);const I=new xr({uid:v,auth:e,email:g,emailVerified:T,displayName:p,isAnonymous:O,photoURL:A,phoneNumber:w,tenantId:R,stsTokenManager:y,createdAt:E,lastLoginAt:x});return V&&Array.isArray(V)&&(I.providerData=V.map(S=>Object.assign({},S))),k&&(I._redirectEventId=k),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new fo;s.updateFromServerResponse(n);const i=new xr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await $u(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?qw(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new fo;c.updateFromIdToken(r);const u=new xr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new rp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;function _r(t){Rr(t instanceof Function,"Expected a class definition");let e=j0.get(t);return e?(Rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,j0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Hw.type="NONE";const R0=Hw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t,e,n){return`firebase:${t}:${e}:${n}`}class po{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ou(this.userKey,s.apiKey,i),this.fullPersistenceKey=ou("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new po(_r(R0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||_r(R0);const a=ou(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(a);if(f){const p=xr._fromJSON(e,f);d!==i&&(c=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new po(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new po(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ww(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yw(e))return"Blackberry";if(Jw(e))return"Webos";if(Kw(e))return"Safari";if((e.includes("chrome/")||Gw(e))&&!e.includes("edge/"))return"Chrome";if(Xw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ww(t=Lt()){return/firefox\//i.test(t)}function Kw(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gw(t=Lt()){return/crios\//i.test(t)}function Qw(t=Lt()){return/iemobile/i.test(t)}function Xw(t=Lt()){return/android/i.test(t)}function Yw(t=Lt()){return/blackberry/i.test(t)}function Jw(t=Lt()){return/webos/i.test(t)}function Rm(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dS(t=Lt()){var e;return Rm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hS(){return S2()&&document.documentMode===10}function Zw(t=Lt()){return Rm(t)||Xw(t)||Jw(t)||Yw(t)||/windows phone/i.test(t)||Qw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e=[]){let n;switch(t){case"Browser":n=A0(Lt());break;case"Worker":n=`${A0(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pS(t,e={}){return kn(t,"GET","/v2/passwordPolicy",Jt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=6;class gS{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:mS,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C0(this),this.idTokenSubscription=new C0(this),this.beforeStateQueue=new fS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_r(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await po.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zw(this,{idToken:e}),r=await xr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ln(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $u(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(er(this));const n=e?ke(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pS(this),n=new gS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ml("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_r(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[_r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Kk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Or(t){return ke(t)}class C0{constructor(e){this.auth=e,this.observer=null,this.addObserver=L2(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vS(t){Fl=t}function Am(t){return Fl.loadJS(t)}function xS(){return Fl.recaptchaV2Script}function _S(){return Fl.recaptchaEnterpriseScript}function wS(){return Fl.gapiScript}function tE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ES="recaptcha-enterprise",bS="NO_RECAPTCHA";class NS{constructor(e){this.type=ES,this.auth=Or(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{nS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new eS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;k0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(bS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&k0(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=_S();u.length!==0&&(u+=c),Am(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function P0(t,e,n,r=!1){const s=new NS(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function sp(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await P0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await P0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t,e){const n=bd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Fu(i,e??{}))return s;Bn(s,"already-initialized")}return n.initialize({options:e})}function TS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_r);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function IS(t,e,n){const r=Or(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=rE(e),{host:a,port:c}=kS(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),SS()}function rE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kS(t){const e=rE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:D0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:D0(a)}}}function D0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function SS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function jS(t,e){return kn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(t,e){return js(t,"POST","/v1/accounts:signInWithPassword",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(t,e){return js(t,"POST","/v1/accounts:signInWithEmailLink",Jt(t,e))}async function CS(t,e){return js(t,"POST","/v1/accounts:signInWithEmailLink",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Td{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new El(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new El(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sp(e,n,"signInWithPassword",RS);case"emailLink":return AS(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sp(e,r,"signUpPassword",jS);case"emailLink":return CS(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t,e){return js(t,"POST","/v1/accounts:signInWithIdp",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="http://localhost";class ii extends Td{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Im(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new ii(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return mo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mo(e,n)}buildRequest(){const e={requestUri:PS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(t,e){return kn(t,"POST","/v1/accounts:sendVerificationCode",Jt(t,e))}async function OS(t,e){return js(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,e))}async function LS(t,e){const n=await js(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,e));if(n.temporaryProof)throw Ca(t,"account-exists-with-different-credential",n);return n}const VS={USER_NOT_FOUND:"user-not-found"};async function MS(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return js(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,n),VS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends Td{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ka({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ka({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return OS(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return LS(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return MS(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new Ka({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FS(t){const e=Ra(Aa(t)).link,n=e?Ra(Aa(e)).deep_link_id:null,r=Ra(Aa(t)).deep_link_id;return(r?Ra(Aa(r)).link:null)||r||n||e||t}class Cm{constructor(e){var n,r,s,i,a,c;const u=Ra(Aa(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=US((s=u.mode)!==null&&s!==void 0?s:null);Q(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=FS(e);try{return new Cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.providerId=Vo.PROVIDER_ID}static credential(e,n){return El._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cm.parseLink(n);return Q(r,"argument-error"),El._fromEmailAndCode(e,r.code,r.tenantId)}}Vo.PROVIDER_ID="password";Vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends sE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Bl{constructor(){super("facebook.com")}static credential(e){return ii._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xr.credential(e.oauthAccessToken)}catch{return null}}}Xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ii._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yr.credential(n,r)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Bl{constructor(){super("github.com")}static credential(e){return ii._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Bl{constructor(){super("twitter.com")}static credential(e,n){return ii._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zr.credential(n,r)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(t,e){return js(t,"POST","/v1/accounts:signUp",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await xr._fromIdTokenResponse(e,r,s),a=O0(r);return new oi({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=O0(r);return new oi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function O0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends ir{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,zu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new zu(e,n,r,s)}}function iE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?zu._fromErrorAndOperation(t,i,e,r):i})}async function $S(t,e,n=!1){const r=await wl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(t,e,n=!1){const{auth:r}=t;if(Ln(r.app))return Promise.reject(er(r));const s="reauthenticate";try{const i=await wl(t,iE(r,s,e,t),n);Q(i.idToken,r,"internal-error");const a=jm(i.idToken);Q(a,r,"internal-error");const{sub:c}=a;return Q(t.uid===c,r,"user-mismatch"),oi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Bn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(t,e,n=!1){if(Ln(t.app))return Promise.reject(er(t));const r="signIn",s=await iE(t,r,e),i=await oi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function aE(t,e){return oE(Or(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lE(t){const e=Or(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function au(t,e,n){if(Ln(t.app))return Promise.reject(er(t));const r=Or(t),a=await sp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&lE(t),u}),c=await oi._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function qS(t,e,n){return Ln(t.app)?Promise.reject(er(t)):aE(ke(t),Vo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lE(t),r})}function HS(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function WS(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}function KS(t,e,n,r){return ke(t).onAuthStateChanged(e,n,r)}function GS(t){return ke(t).signOut()}async function QS(t){return ke(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t,e){return kn(t,"POST","/v2/accounts/mfaEnrollment:start",Jt(t,e))}const qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=1e3,JS=10;class uE extends cE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);hS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,JS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},YS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uE.type="LOCAL";const dE=uE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends cE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hE.type="SESSION";const fE=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Id(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await ZS(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Pm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(){return window}function tj(t){tt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){return typeof tt().WorkerGlobalScope<"u"&&typeof tt().importScripts=="function"}async function nj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sj(){return Dm()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firebaseLocalStorageDb",ij=1,Hu="firebaseLocalStorage",mE="fbase_key";class $l{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kd(t,e){return t.transaction([Hu],e?"readwrite":"readonly").objectStore(Hu)}function oj(){const t=indexedDB.deleteDatabase(pE);return new $l(t).toPromise()}function ip(){const t=indexedDB.open(pE,ij);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hu,{keyPath:mE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hu)?e(r):(r.close(),await oj(),e(await ip()))})})}async function L0(t,e,n){const r=kd(t,!0).put({[mE]:e,value:n});return new $l(r).toPromise()}async function aj(t,e){const n=kd(t,!1).get(e),r=await new $l(n).toPromise();return r===void 0?null:r.value}function V0(t,e){const n=kd(t,!0).delete(e);return new $l(n).toPromise()}const lj=800,cj=3;class gE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ip(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Id._getInstance(sj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nj(),!this.activeServiceWorker)return;this.sender=new ej(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ip();return await L0(e,qu,"1"),await V0(e,qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>L0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>aj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>V0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=kd(s,!1).getAll();return new $l(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gE.type="LOCAL";const yE=gE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t,e){return kn(t,"POST","/v2/accounts/mfaSignIn:start",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=500,hj=6e4,Uc=1e12;class fj{constructor(e){this.auth=e,this.counter=Uc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new pj(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Uc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Uc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Uc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class pj{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;Q(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=mj(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},hj)},dj))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function mj(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=tE("rcb"),gj=new Ul(3e4,6e4);class yj{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=tt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return Q(vj(n),e,"argument-error"),this.shouldResolveImmediately(n)&&I0(tt().grecaptcha)?Promise.resolve(tt().grecaptcha):new Promise((r,s)=>{const i=tt().setTimeout(()=>{s(hn(e,"network-request-failed"))},gj.get());tt()[Fh]=()=>{tt().clearTimeout(i),delete tt()[Fh];const c=tt().grecaptcha;if(!c||!I0(c)){s(hn(e,"internal-error"));return}const u=c.render;c.render=(d,f)=>{const p=u(d,f);return this.counter++,p},this.hostLanguage=n,r(c)};const a=`${xS()}?${Lo({onload:Fh,render:"explicit",hl:n})}`;Am(a).catch(()=>{clearTimeout(i),s(hn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=tt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function vj(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class xj{async load(e){return new fj(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="recaptcha",_j={theme:"light",type:"image"};class M0{constructor(e,n,r=Object.assign({},_j)){this.parameters=r,this.type=vE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Or(e),this.isInvisible=this.parameters.size==="invisible",Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;Q(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xj:new yj,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=a=>{a&&(this.tokenChangeListeners.delete(i),s(a))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=tt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Q(Uw()&&!Dm(),this.auth,"internal-error"),await wj(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await tS(this.auth);Q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function wj(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ka._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function bj(t,e,n){if(Ln(t.app))return Promise.reject(er(t));const r=Or(t),s=await Nj(r,e,ke(n));return new Ej(s,i=>aE(r,i))}async function Nj(t,e,n){var r;const s=await n.verify();try{Q(typeof s=="string",t,"argument-error"),Q(n.type===vE,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const a=i.session;if("phoneNumber"in i)return Q(a.type==="enroll",t,"internal-error"),(await XS(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{Q(a.type==="signin",t,"internal-error");const c=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return Q(c,t,"missing-multi-factor-info"),(await uj(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await DS(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return a}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(t,e){return e?_r(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends Td{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ij(t){return oE(t.auth,new Om(t),t.bypassAuthState)}function kj(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),zS(n,new Om(t),t.bypassAuthState)}async function Sj(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),$S(n,new Om(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ij;case"linkViaPopup":case"linkViaRedirect":return Sj;case"reauthViaPopup":case"reauthViaRedirect":return kj;default:Bn(this.auth,"internal-error")}}resolve(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=new Ul(2e3,1e4);class so extends xE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,so.currentPopupAction&&so.currentPopupAction.cancel(),so.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Rr(this.filter.length===1,"Popup operations only handle one event");const e=Pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,so.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jj.get())};e()}}so.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj="pendingRedirect",lu=new Map;class Aj extends xE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=lu.get(this.auth._key());if(!e){try{const r=await Cj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}lu.set(this.auth._key(),e)}return this.bypassAuthState||lu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Cj(t,e){const n=Oj(e),r=Dj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Pj(t,e){lu.set(t._key(),e)}function Dj(t){return _r(t._redirectPersistence)}function Oj(t){return ou(Rj,t.config.apiKey,t.name)}async function Lj(t,e,n=!1){if(Ln(t.app))return Promise.reject(er(t));const r=Or(t),s=Tj(r,e),a=await new Aj(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=10*60*1e3;class Mj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Uj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_E(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vj&&this.cachedEventUids.clear(),this.cachedEventUids.has(U0(e))}saveEventToCache(e){this.cachedEventUids.add(U0(e)),this.lastProcessedEventTime=Date.now()}}function U0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _E({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Uj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _E(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fj(t,e={}){return kn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$j=/^https?/;async function zj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Fj(t);for(const n of e)try{if(qj(n))return}catch{}Bn(t,"unauthorized-domain")}function qj(t){const e=np(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!$j.test(n))return!1;if(Bj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=new Ul(3e4,6e4);function F0(){const t=tt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Wj(t){return new Promise((e,n)=>{var r,s,i;function a(){F0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F0(),n(hn(t,"network-request-failed"))},timeout:Hj.get()})}if(!((s=(r=tt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=tt().gapi)===null||i===void 0)&&i.load)a();else{const c=tE("iframefcb");return tt()[c]=()=>{gapi.load?a():n(hn(t,"network-request-failed"))},Am(`${wS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw cu=null,e})}let cu=null;function Kj(t){return cu=cu||Wj(t),cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new Ul(5e3,15e3),Qj="__/auth/iframe",Xj="emulator/auth/iframe",Yj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zj(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sm(e,Xj):`https://${t.config.authDomain}/${Qj}`,r={apiKey:e.apiKey,appName:t.name,v:mi},s=Jj.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Lo(r).slice(1)}`}async function eR(t){const e=await Kj(t),n=tt().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:Zj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yj,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=hn(t,"network-request-failed"),c=tt().setTimeout(()=>{i(a)},Gj.get());function u(){tt().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nR=500,rR=600,sR="_blank",iR="http://localhost";class B0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oR(t,e,n,r=nR,s=rR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},tR),{width:r.toString(),height:s.toString(),top:i,left:a}),d=Lt().toLowerCase();n&&(c=Gw(d)?sR:n),Ww(d)&&(e=e||iR,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,A])=>`${g}${w}=${A},`,"");if(dS(d)&&c!=="_self")return aR(e||"",c),new B0(null);const p=window.open(e||"",c,f);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new B0(p)}function aR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="__/auth/handler",cR="emulator/auth/handler",uR=encodeURIComponent("fac");async function $0(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mi,eventId:s};if(e instanceof sE){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",O2(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof Bl){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${uR}=${encodeURIComponent(u)}`:"";return`${dR(t)}?${Lo(c).slice(1)}${d}`}function dR({config:t}){return t.emulator?Sm(t,cR):`https://${t.authDomain}/${lR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="webStorageSupport";class hR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fE,this._completeRedirectFn=Lj,this._overrideRedirectResult=Pj}async _openPopup(e,n,r,s){var i;Rr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await $0(e,n,r,np(),s);return oR(e,a,Pm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await $0(e,n,r,np(),s);return tj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Rr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await eR(e),r=new Mj(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bh,{type:Bh},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Bh];a!==void 0&&n(!!a),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Zw()||Kw()||Rm()}}const fR=hR;var z0="@firebase/auth",q0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gR(t){si(new vs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Q(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eE(t)},d=new yS(r,s,i,u);return TS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),si(new vs("auth-internal",e=>{const n=Or(e.getProvider("auth").getImmediate());return(r=>new pR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(z0,q0,mR(t)),Zn(z0,q0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=5*60,vR=Sw("authIdTokenMaxAge")||yR;let H0=null;const xR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>vR)return;const s=n==null?void 0:n.token;H0!==s&&(H0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function _R(t=Nd()){const e=bd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nE(t,{popupRedirectResolver:fR,persistence:[yE,dE,fE]}),r=Sw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=xR(i.toString());WS(n,a,()=>a(n.currentUser)),HS(n,c=>a(c))}}const s=Tw("auth");return s&&IS(n,`http://${s}`),n}function wR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",wR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gR("Browser");var ER="firebase",bR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(ER,bR,"app");var W0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,wE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,y){function I(){}I.prototype=y.prototype,b.D=y.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(S,P,D){for(var C=Array(arguments.length-2),De=2;De<arguments.length;De++)C[De-2]=arguments[De];return y.prototype[P].apply(S,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,y,I){I||(I=0);var S=Array(16);if(typeof y=="string")for(var P=0;16>P;++P)S[P]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(P=0;16>P;++P)S[P]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=b.g[0],I=b.g[1],P=b.g[2];var D=b.g[3],C=y+(D^I&(P^D))+S[0]+3614090360&4294967295;y=I+(C<<7&4294967295|C>>>25),C=D+(P^y&(I^P))+S[1]+3905402710&4294967295,D=y+(C<<12&4294967295|C>>>20),C=P+(I^D&(y^I))+S[2]+606105819&4294967295,P=D+(C<<17&4294967295|C>>>15),C=I+(y^P&(D^y))+S[3]+3250441966&4294967295,I=P+(C<<22&4294967295|C>>>10),C=y+(D^I&(P^D))+S[4]+4118548399&4294967295,y=I+(C<<7&4294967295|C>>>25),C=D+(P^y&(I^P))+S[5]+1200080426&4294967295,D=y+(C<<12&4294967295|C>>>20),C=P+(I^D&(y^I))+S[6]+2821735955&4294967295,P=D+(C<<17&4294967295|C>>>15),C=I+(y^P&(D^y))+S[7]+4249261313&4294967295,I=P+(C<<22&4294967295|C>>>10),C=y+(D^I&(P^D))+S[8]+1770035416&4294967295,y=I+(C<<7&4294967295|C>>>25),C=D+(P^y&(I^P))+S[9]+2336552879&4294967295,D=y+(C<<12&4294967295|C>>>20),C=P+(I^D&(y^I))+S[10]+4294925233&4294967295,P=D+(C<<17&4294967295|C>>>15),C=I+(y^P&(D^y))+S[11]+2304563134&4294967295,I=P+(C<<22&4294967295|C>>>10),C=y+(D^I&(P^D))+S[12]+1804603682&4294967295,y=I+(C<<7&4294967295|C>>>25),C=D+(P^y&(I^P))+S[13]+4254626195&4294967295,D=y+(C<<12&4294967295|C>>>20),C=P+(I^D&(y^I))+S[14]+2792965006&4294967295,P=D+(C<<17&4294967295|C>>>15),C=I+(y^P&(D^y))+S[15]+1236535329&4294967295,I=P+(C<<22&4294967295|C>>>10),C=y+(P^D&(I^P))+S[1]+4129170786&4294967295,y=I+(C<<5&4294967295|C>>>27),C=D+(I^P&(y^I))+S[6]+3225465664&4294967295,D=y+(C<<9&4294967295|C>>>23),C=P+(y^I&(D^y))+S[11]+643717713&4294967295,P=D+(C<<14&4294967295|C>>>18),C=I+(D^y&(P^D))+S[0]+3921069994&4294967295,I=P+(C<<20&4294967295|C>>>12),C=y+(P^D&(I^P))+S[5]+3593408605&4294967295,y=I+(C<<5&4294967295|C>>>27),C=D+(I^P&(y^I))+S[10]+38016083&4294967295,D=y+(C<<9&4294967295|C>>>23),C=P+(y^I&(D^y))+S[15]+3634488961&4294967295,P=D+(C<<14&4294967295|C>>>18),C=I+(D^y&(P^D))+S[4]+3889429448&4294967295,I=P+(C<<20&4294967295|C>>>12),C=y+(P^D&(I^P))+S[9]+568446438&4294967295,y=I+(C<<5&4294967295|C>>>27),C=D+(I^P&(y^I))+S[14]+3275163606&4294967295,D=y+(C<<9&4294967295|C>>>23),C=P+(y^I&(D^y))+S[3]+4107603335&4294967295,P=D+(C<<14&4294967295|C>>>18),C=I+(D^y&(P^D))+S[8]+1163531501&4294967295,I=P+(C<<20&4294967295|C>>>12),C=y+(P^D&(I^P))+S[13]+2850285829&4294967295,y=I+(C<<5&4294967295|C>>>27),C=D+(I^P&(y^I))+S[2]+4243563512&4294967295,D=y+(C<<9&4294967295|C>>>23),C=P+(y^I&(D^y))+S[7]+1735328473&4294967295,P=D+(C<<14&4294967295|C>>>18),C=I+(D^y&(P^D))+S[12]+2368359562&4294967295,I=P+(C<<20&4294967295|C>>>12),C=y+(I^P^D)+S[5]+4294588738&4294967295,y=I+(C<<4&4294967295|C>>>28),C=D+(y^I^P)+S[8]+2272392833&4294967295,D=y+(C<<11&4294967295|C>>>21),C=P+(D^y^I)+S[11]+1839030562&4294967295,P=D+(C<<16&4294967295|C>>>16),C=I+(P^D^y)+S[14]+4259657740&4294967295,I=P+(C<<23&4294967295|C>>>9),C=y+(I^P^D)+S[1]+2763975236&4294967295,y=I+(C<<4&4294967295|C>>>28),C=D+(y^I^P)+S[4]+1272893353&4294967295,D=y+(C<<11&4294967295|C>>>21),C=P+(D^y^I)+S[7]+4139469664&4294967295,P=D+(C<<16&4294967295|C>>>16),C=I+(P^D^y)+S[10]+3200236656&4294967295,I=P+(C<<23&4294967295|C>>>9),C=y+(I^P^D)+S[13]+681279174&4294967295,y=I+(C<<4&4294967295|C>>>28),C=D+(y^I^P)+S[0]+3936430074&4294967295,D=y+(C<<11&4294967295|C>>>21),C=P+(D^y^I)+S[3]+3572445317&4294967295,P=D+(C<<16&4294967295|C>>>16),C=I+(P^D^y)+S[6]+76029189&4294967295,I=P+(C<<23&4294967295|C>>>9),C=y+(I^P^D)+S[9]+3654602809&4294967295,y=I+(C<<4&4294967295|C>>>28),C=D+(y^I^P)+S[12]+3873151461&4294967295,D=y+(C<<11&4294967295|C>>>21),C=P+(D^y^I)+S[15]+530742520&4294967295,P=D+(C<<16&4294967295|C>>>16),C=I+(P^D^y)+S[2]+3299628645&4294967295,I=P+(C<<23&4294967295|C>>>9),C=y+(P^(I|~D))+S[0]+4096336452&4294967295,y=I+(C<<6&4294967295|C>>>26),C=D+(I^(y|~P))+S[7]+1126891415&4294967295,D=y+(C<<10&4294967295|C>>>22),C=P+(y^(D|~I))+S[14]+2878612391&4294967295,P=D+(C<<15&4294967295|C>>>17),C=I+(D^(P|~y))+S[5]+4237533241&4294967295,I=P+(C<<21&4294967295|C>>>11),C=y+(P^(I|~D))+S[12]+1700485571&4294967295,y=I+(C<<6&4294967295|C>>>26),C=D+(I^(y|~P))+S[3]+2399980690&4294967295,D=y+(C<<10&4294967295|C>>>22),C=P+(y^(D|~I))+S[10]+4293915773&4294967295,P=D+(C<<15&4294967295|C>>>17),C=I+(D^(P|~y))+S[1]+2240044497&4294967295,I=P+(C<<21&4294967295|C>>>11),C=y+(P^(I|~D))+S[8]+1873313359&4294967295,y=I+(C<<6&4294967295|C>>>26),C=D+(I^(y|~P))+S[15]+4264355552&4294967295,D=y+(C<<10&4294967295|C>>>22),C=P+(y^(D|~I))+S[6]+2734768916&4294967295,P=D+(C<<15&4294967295|C>>>17),C=I+(D^(P|~y))+S[13]+1309151649&4294967295,I=P+(C<<21&4294967295|C>>>11),C=y+(P^(I|~D))+S[4]+4149444226&4294967295,y=I+(C<<6&4294967295|C>>>26),C=D+(I^(y|~P))+S[11]+3174756917&4294967295,D=y+(C<<10&4294967295|C>>>22),C=P+(y^(D|~I))+S[2]+718787259&4294967295,P=D+(C<<15&4294967295|C>>>17),C=I+(D^(P|~y))+S[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+D&4294967295}r.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var I=y-this.blockSize,S=this.B,P=this.h,D=0;D<y;){if(P==0)for(;D<=I;)s(this,b,D),D+=this.blockSize;if(typeof b=="string"){for(;D<y;)if(S[P++]=b.charCodeAt(D++),P==this.blockSize){s(this,S),P=0;break}}else for(;D<y;)if(S[P++]=b[D++],P==this.blockSize){s(this,S),P=0;break}}this.h=P,this.o+=y},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var I=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=I&255,I/=256;for(this.u(b),b=Array(16),y=I=0;4>y;++y)for(var S=0;32>S;S+=8)b[I++]=this.g[y]>>>S&255;return b};function i(b,y){var I=c;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=y(b)}function a(b,y){this.h=y;for(var I=[],S=!0,P=b.length-1;0<=P;P--){var D=b[P]|0;S&&D==y||(I[P]=D,S=!1)}this.g=I}var c={};function u(b){return-128<=b&&128>b?i(b,function(y){return new a([y|0],0>y?-1:0)}):new a([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return k(d(-b));for(var y=[],I=1,S=0;b>=I;S++)y[S]=b/I|0,I*=4294967296;return new a(y,0)}function f(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return k(f(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(y,8)),S=p,P=0;P<b.length;P+=8){var D=Math.min(8,b.length-P),C=parseInt(b.substring(P,P+D),y);8>D?(D=d(Math.pow(y,D)),S=S.j(D).add(d(C))):(S=S.j(I),S=S.add(d(C)))}return S}var p=u(0),g=u(1),w=u(16777216);t=a.prototype,t.m=function(){if(R(this))return-k(this).m();for(var b=0,y=1,I=0;I<this.g.length;I++){var S=this.i(I);b+=(0<=S?S:4294967296+S)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(A(this))return"0";if(R(this))return"-"+k(this).toString(b);for(var y=d(Math.pow(b,6)),I=this,S="";;){var P=T(I,y).g;I=E(I,P.j(y));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=P,A(I))return D+S;for(;6>D.length;)D="0"+D;S=D+S}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function A(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function R(b){return b.h==-1}t.l=function(b){return b=E(this,b),R(b)?-1:A(b)?0:1};function k(b){for(var y=b.g.length,I=[],S=0;S<y;S++)I[S]=~b.g[S];return new a(I,~b.h).add(g)}t.abs=function(){return R(this)?k(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0,P=0;P<=y;P++){var D=S+(this.i(P)&65535)+(b.i(P)&65535),C=(D>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);S=C>>>16,D&=65535,C&=65535,I[P]=C<<16|D}return new a(I,I[I.length-1]&-2147483648?-1:0)};function E(b,y){return b.add(k(y))}t.j=function(b){if(A(this)||A(b))return p;if(R(this))return R(b)?k(this).j(k(b)):k(k(this).j(b));if(R(b))return k(this.j(k(b)));if(0>this.l(w)&&0>b.l(w))return d(this.m()*b.m());for(var y=this.g.length+b.g.length,I=[],S=0;S<2*y;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var P=0;P<b.g.length;P++){var D=this.i(S)>>>16,C=this.i(S)&65535,De=b.i(P)>>>16,ct=b.i(P)&65535;I[2*S+2*P]+=C*ct,x(I,2*S+2*P),I[2*S+2*P+1]+=D*ct,x(I,2*S+2*P+1),I[2*S+2*P+1]+=C*De,x(I,2*S+2*P+1),I[2*S+2*P+2]+=D*De,x(I,2*S+2*P+2)}for(S=0;S<y;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=y;S<2*y;S++)I[S]=0;return new a(I,0)};function x(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function v(b,y){this.g=b,this.h=y}function T(b,y){if(A(y))throw Error("division by zero");if(A(b))return new v(p,p);if(R(b))return y=T(k(b),y),new v(k(y.g),k(y.h));if(R(y))return y=T(b,k(y)),new v(k(y.g),y.h);if(30<b.g.length){if(R(b)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,S=y;0>=S.l(b);)I=O(I),S=O(S);var P=V(I,1),D=V(S,1);for(S=V(S,2),I=V(I,2);!A(S);){var C=D.add(S);0>=C.l(b)&&(P=P.add(I),D=C),S=V(S,1),I=V(I,1)}return y=E(b,P.j(y)),new v(P,y)}for(P=p;0<=b.l(y);){for(I=Math.max(1,Math.floor(b.m()/y.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),D=d(I),C=D.j(y);R(C)||0<C.l(b);)I-=S,D=d(I),C=D.j(y);A(D)&&(D=g),P=P.add(D),b=E(b,C)}return new v(P,b)}t.A=function(b){return T(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0;S<y;S++)I[S]=this.i(S)&b.i(S);return new a(I,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0;S<y;S++)I[S]=this.i(S)|b.i(S);return new a(I,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0;S<y;S++)I[S]=this.i(S)^b.i(S);return new a(I,this.h^b.h)};function O(b){for(var y=b.g.length+1,I=[],S=0;S<y;S++)I[S]=b.i(S)<<1|b.i(S-1)>>>31;return new a(I,b.h)}function V(b,y){var I=y>>5;y%=32;for(var S=b.g.length-I,P=[],D=0;D<S;D++)P[D]=0<y?b.i(D+I)>>>y|b.i(D+I+1)<<32-y:b.i(D+I);return new a(P,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wE=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Ys=a}).apply(typeof W0<"u"?W0:typeof self<"u"?self:typeof window<"u"?window:{});var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EE,Pa,bE,uu,op,NE,TE,IE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fc=="object"&&Fc];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var L=l[_];if(!(L in m))break e;m=m[L]}l=l[l.length-1],_=m[l],h=h(_),h!=_&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var m=0,_=!1,L={next:function(){if(!_&&m<l.length){var M=m++;return{value:h(M,l[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,m){return l.call.apply(l.bind,arguments)}function p(l,h,m){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,_),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function g(l,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function w(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function A(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(_,L,M){for(var H=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)H[Ne-2]=arguments[Ne];return h.prototype[L].apply(_,H)}}function R(l){const h=l.length;if(0<h){const m=Array(h);for(let _=0;_<h;_++)m[_]=l[_];return m}return[]}function k(l,h){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(u(_)){const L=l.length||0,M=_.length||0;l.length=L+M;for(let H=0;H<M;H++)l[L+H]=_[H]}else l.push(_)}}class E{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(l){return/^[\s\xa0]*$/.test(l)}function v(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function T(l){return T[" "](l),l}T[" "]=function(){};var O=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function V(l,h,m){for(const _ in l)h.call(m,l[_],_,l)}function b(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function y(l){const h={};for(const m in l)h[m]=l[m];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let m,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(m in _)l[m]=_[m];for(let M=0;M<I.length;M++)m=I[M],Object.prototype.hasOwnProperty.call(_,m)&&(l[m]=_[m])}}function P(l){var h=1;l=l.split(":");const m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function D(l){c.setTimeout(()=>{throw l},0)}function C(){var l=J;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class De{constructor(){this.h=this.g=null}add(h,m){const _=ct.get();_.set(h,m),this.h?this.h.next=_:this.g=_,this.h=_}}var ct=new E(()=>new qt,l=>l.reset());class qt{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,q=!1,J=new De,te=()=>{const l=c.Promise.resolve(void 0);ut=()=>{l.then(xe)}};var xe=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(m){D(m)}var h=ct;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}q=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var Zt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};c.addEventListener("test",m,h),c.removeEventListener("test",m,h)}catch{}return l}();function Sn(l,h){if(Ve.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{T(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:en[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Sn.aa.h.call(this)}}A(Sn,Ve);var en={2:"touch",3:"pen",4:"mouse"};Sn.prototype.h=function(){Sn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),Lr=0;function nc(l,h,m,_,L){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!_,this.ha=L,this.key=++Lr,this.da=this.fa=!1}function Vr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Cs(l){this.src=l,this.g={},this.h=0}Cs.prototype.add=function(l,h,m,_,L){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var H=xi(l,h,_,L);return-1<H?(h=l[H],m||(h.fa=!1)):(h=new nc(h,this.src,M,!!_,L),h.fa=m,l.push(h)),h};function ar(l,h){var m=h.type;if(m in l.g){var _=l.g[m],L=Array.prototype.indexOf.call(_,h,void 0),M;(M=0<=L)&&Array.prototype.splice.call(_,L,1),M&&(Vr(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function xi(l,h,m,_){for(var L=0;L<l.length;++L){var M=l[L];if(!M.da&&M.listener==h&&M.capture==!!m&&M.ha==_)return L}return-1}var _i="closure_lm_"+(1e6*Math.random()|0),wi={};function Ho(l,h,m,_,L){if(Array.isArray(h)){for(var M=0;M<h.length;M++)Ho(l,h[M],m,_,L);return null}return m=Xo(m),l&&l[tn]?l.K(h,m,d(_)?!!_.capture:!1,L):rc(l,h,m,!1,_,L)}function rc(l,h,m,_,L,M){if(!h)throw Error("Invalid event type");var H=d(L)?!!L.capture:!!L,Ne=Ei(l);if(Ne||(l[_i]=Ne=new Cs(l)),m=Ne.add(h,m,_,H,M),m.proxy)return m;if(_=Wo(),m.proxy=_,_.src=l,_.listener=m,l.addEventListener)Zt||(L=H),L===void 0&&(L=!1),l.addEventListener(h.toString(),_,L);else if(l.attachEvent)l.attachEvent(Go(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Wo(){function l(m){return h.call(l.src,l.listener,m)}const h=Qo;return l}function Ko(l,h,m,_,L){if(Array.isArray(h))for(var M=0;M<h.length;M++)Ko(l,h[M],m,_,L);else _=d(_)?!!_.capture:!!_,m=Xo(m),l&&l[tn]?(l=l.i,h=String(h).toString(),h in l.g&&(M=l.g[h],m=xi(M,m,_,L),-1<m&&(Vr(M[m]),Array.prototype.splice.call(M,m,1),M.length==0&&(delete l.g[h],l.h--)))):l&&(l=Ei(l))&&(h=l.g[h.toString()],l=-1,h&&(l=xi(h,m,_,L)),(m=-1<l?h[l]:null)&&zn(m))}function zn(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[tn])ar(h.i,l);else{var m=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(m,_,l.capture):h.detachEvent?h.detachEvent(Go(m),_):h.addListener&&h.removeListener&&h.removeListener(_),(m=Ei(h))?(ar(m,l),m.h==0&&(m.src=null,h[_i]=null)):Vr(l)}}}function Go(l){return l in wi?wi[l]:wi[l]="on"+l}function Qo(l,h){if(l.da)l=!0;else{h=new Sn(h,this);var m=l.listener,_=l.ha||l.src;l.fa&&zn(l),l=m.call(_,h)}return l}function Ei(l){return l=l[_i],l instanceof Cs?l:null}var lr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xo(l){return typeof l=="function"?l:(l[lr]||(l[lr]=function(h){return l.handleEvent(h)}),l[lr])}function Ye(){ge.call(this),this.i=new Cs(this),this.M=this,this.F=null}A(Ye,ge),Ye.prototype[tn]=!0,Ye.prototype.removeEventListener=function(l,h,m,_){Ko(this,l,h,m,_)};function dt(l,h){var m,_=l.F;if(_)for(m=[];_;_=_.F)m.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new Ve(h,l);else if(h instanceof Ve)h.target=h.target||l;else{var L=h;h=new Ve(_,l),S(h,L)}if(L=!0,m)for(var M=m.length-1;0<=M;M--){var H=h.g=m[M];L=Ps(H,_,!0,h)&&L}if(H=h.g=l,L=Ps(H,_,!0,h)&&L,L=Ps(H,_,!1,h)&&L,m)for(M=0;M<m.length;M++)H=h.g=m[M],L=Ps(H,_,!1,h)&&L}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],_=0;_<m.length;_++)Vr(m[_]);delete l.g[h],l.h--}}this.F=null},Ye.prototype.K=function(l,h,m,_){return this.i.add(String(l),h,!1,m,_)},Ye.prototype.L=function(l,h,m,_){return this.i.add(String(l),h,!0,m,_)};function Ps(l,h,m,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,M=0;M<h.length;++M){var H=h[M];if(H&&!H.da&&H.capture==m){var Ne=H.listener,vt=H.ha||H.src;H.fa&&ar(l.i,H),L=Ne.call(vt,_)!==!1&&L}}return L&&!_.defaultPrevented}function Yo(l,h,m){if(typeof l=="function")m&&(l=g(l,m));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function bi(l){l.g=Yo(()=>{l.g=null,l.i&&(l.i=!1,bi(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class sc extends ge{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:bi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(l){ge.call(this),this.h=l,this.g={}}A(yn,ge);var Jo=[];function Ni(l){V(l.g,function(h,m){this.g.hasOwnProperty(m)&&zn(h)},l),l.g={}}yn.prototype.N=function(){yn.aa.N.call(this),Ni(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ti=c.JSON.stringify,ic=c.JSON.parse,oc=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Ii(){}Ii.prototype.h=null;function Zo(l){return l.h||(l.h=l.i())}function qn(){}var Mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ur(){Ve.call(this,"d")}A(Ur,Ve);function ki(){Ve.call(this,"c")}A(ki,Ve);var Hn={},ea=null;function jn(){return ea=ea||new Ye}Hn.La="serverreachability";function ac(l){Ve.call(this,Hn.La,l)}A(ac,Ve);function Ds(l){const h=jn();dt(h,new ac(h))}Hn.STAT_EVENT="statevent";function Si(l,h){Ve.call(this,Hn.STAT_EVENT,l),this.stat=h}A(Si,Ve);function it(l){const h=jn();dt(h,new Si(h,l))}Hn.Ma="timingevent";function ji(l,h){Ve.call(this,Hn.Ma,l),this.size=h}A(ji,Ve);function Fr(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function cr(){this.g=!0}cr.prototype.xa=function(){this.g=!1};function Ri(l,h,m,_,L,M){l.info(function(){if(l.g)if(M)for(var H="",Ne=M.split("&"),vt=0;vt<Ne.length;vt++){var pe=Ne[vt].split("=");if(1<pe.length){var It=pe[0];pe=pe[1];var kt=It.split("_");H=2<=kt.length&&kt[1]=="type"?H+(It+"="+pe+"&"):H+(It+"=redacted&")}}else H=null;else H=M;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+h+`
`+m+`
`+H})}function ta(l,h,m,_,L,M,H){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+h+`
`+m+`
`+M+" "+H})}function ur(l,h,m,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+lc(l,m)+(_?" "+_:"")})}function na(l,h){l.info(function(){return"TIMEOUT: "+h})}cr.prototype.info=function(){};function lc(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var _=m[l];if(!(2>_.length)){var L=_[1];if(Array.isArray(L)&&!(1>L.length)){var M=L[0];if(M!="noop"&&M!="stop"&&M!="close")for(var H=1;H<L.length;H++)L[H]=""}}}}return Ti(m)}catch{return h}}var Br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ra={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ai;function Rn(){}A(Rn,Ii),Rn.prototype.g=function(){return new XMLHttpRequest},Rn.prototype.i=function(){return{}},Ai=new Rn;function Wn(l,h,m,_){this.j=l,this.i=h,this.l=m,this.R=_||1,this.U=new yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cc}function cc(){this.i=null,this.g="",this.h=!1}var uc={},sa={};function ia(l,h,m){l.L=1,l.v=Oi(oe(h)),l.m=m,l.P=!0,Je(l,null)}function Je(l,h){l.F=Date.now(),Ci(l),l.A=oe(l.v);var m=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Rg(m.i,"t",_),l.C=0,m=l.j.J,l.h=new cc,l.g=Gg(l.j,m?h:null,!l.m),0<l.O&&(l.M=new sc(g(l.Y,l,l.g),l.O)),h=l.U,m=l.g,_=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Jo[0]=L.toString()),L=Jo);for(var M=0;M<L.length;M++){var H=Ho(m,L[M],_||h.handleEvent,!1,h.h||h);if(!H)break;h.g[H.key]=H}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ds(),Ri(l.i,l.u,l.A,l.l,l.R,l.m)}Wn.prototype.ca=function(l){l=l.target;const h=this.M;h&&hr(l)==3?h.j():this.Y(l)},Wn.prototype.Y=function(l){try{if(l==this.g)e:{const kt=hr(this.g);var h=this.g.Ba();const Fi=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Vg(this.g)))){this.J||kt!=4||h==7||(h==8||0>=Fi?Ds(3):Ds(2)),oa(this);var m=this.g.Z();this.X=m;t:if(dc(this)){var _=Vg(this.g);l="";var L=_.length,M=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dr(this),Os(this);var H="";break t}this.h.i=new c.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(M&&h==L-1)});_.length=0,this.h.g+=l,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=m==200,ta(this.i,this.u,this.A,this.l,this.R,kt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,vt=this.g;if((Ne=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Ne)){var pe=Ne;break t}}pe=null}if(m=pe)ur(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aa(this,m);else{this.o=!1,this.s=3,it(12),dr(this),Os(this);break e}}if(this.P){m=!0;let An;for(;!this.J&&this.C<H.length;)if(An=Zd(this,H),An==sa){kt==4&&(this.s=4,it(14),m=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(An==uc){this.s=4,it(15),ur(this.i,this.l,H,"[Invalid Chunk]"),m=!1;break}else ur(this.i,this.l,An,null),aa(this,An);if(dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||H.length!=0||this.h.h||(this.s=1,it(16),m=!1),this.o=this.o&&m,!m)ur(this.i,this.l,H,"[Invalid Chunked Response]"),dr(this),Os(this);else if(0<H.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),ih(It),It.M=!0,it(11))}}else ur(this.i,this.l,H,null),aa(this,H);kt==4&&dr(this),this.o&&!this.J&&(kt==4?qg(this.j,this):(this.o=!1,Ci(this)))}else Ob(this.g),m==400&&0<H.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),dr(this),Os(this)}}}catch{}finally{}};function dc(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Zd(l,h){var m=l.C,_=h.indexOf(`
`,m);return _==-1?sa:(m=Number(h.substring(m,_)),isNaN(m)?uc:(_+=1,_+m>h.length?sa:(h=h.slice(_,_+m),l.C=_+m,h)))}Wn.prototype.cancel=function(){this.J=!0,dr(this)};function Ci(l){l.S=Date.now()+l.I,hc(l,l.I)}function hc(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Fr(g(l.ba,l),h)}function oa(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Wn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(na(this.i,this.A),this.L!=2&&(Ds(),it(17)),dr(this),this.s=2,Os(this)):hc(this,this.S-l)};function Os(l){l.j.G==0||l.J||qg(l.j,l)}function dr(l){oa(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Ni(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function aa(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||Pi(m.h,l))){if(!l.K&&Pi(m.h,l)&&m.G==3){try{var _=m.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)xc(m),yc(m);else break e;sh(m),it(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Fr(g(m.Za,m),6e3));if(1>=ca(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Us(m,11)}else if((l.K||m.g==l)&&xc(m),!x(h))for(L=m.Da.g.parse(h),h=0;h<L.length;h++){let pe=L[h];if(m.T=pe[0],pe=pe[1],m.G==2)if(pe[0]=="c"){m.K=pe[1],m.ia=pe[2];const It=pe[3];It!=null&&(m.la=It,m.j.info("VER="+m.la));const kt=pe[4];kt!=null&&(m.Aa=kt,m.j.info("SVER="+m.Aa));const Fi=pe[5];Fi!=null&&typeof Fi=="number"&&0<Fi&&(_=1.5*Fi,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const An=l.g;if(An){const wc=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wc){var M=_.h;M.g||wc.indexOf("spdy")==-1&&wc.indexOf("quic")==-1&&wc.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Di(M,M.h),M.h=null))}if(_.D){const oh=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;oh&&(_.ya=oh,Ee(_.I,_.D,oh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var H=l;if(_.qa=Kg(_,_.J?_.ia:null,_.W),H.K){N(_.h,H);var Ne=H,vt=_.L;vt&&(Ne.I=vt),Ne.B&&(oa(Ne),Ci(Ne)),_.g=H}else $g(_);0<m.i.length&&vc(m)}else pe[0]!="stop"&&pe[0]!="close"||Us(m,7);else m.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Us(m,7):rh(m):pe[0]!="noop"&&m.l&&m.l.ta(pe),m.v=0)}}Ds(4)}catch{}}var eh=class{constructor(l,h){this.g=l,this.map=h}};function fc(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function la(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ca(l){return l.h?1:l.g?l.g.size:0}function Pi(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Di(l,h){l.g?l.g.add(h):l.h=h}function N(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}fc.prototype.cancel=function(){if(this.i=B(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function B(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.D);return h}return R(l.i)}function $(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],m=l.length,_=0;_<m;_++)h.push(l[_]);return h}h=[],m=0;for(_ in l)h[m++]=l[_];return h}function ne(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(const _ in l)h[m++]=_;return h}}}function ye(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=ne(l),_=$(l),L=_.length,M=0;M<L;M++)h.call(void 0,_[M],m&&m[M],l)}var Se=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var _=l[m].indexOf("="),L=null;if(0<=_){var M=l[m].substring(0,_);L=l[m].substring(_+1)}else M=l[m];h(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ht(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ht){this.h=l.h,be(this,l.j),this.o=l.o,this.g=l.g,Me(this,l.s),this.l=l.l;var h=l.i,m=new da;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),nn(this,m),this.m=l.m}else l&&(h=String(l).match(Se))?(this.h=!1,be(this,h[1]||"",!0),this.o=Ls(h[2]||""),this.g=Ls(h[3]||"",!0),Me(this,h[4]),this.l=Ls(h[5]||"",!0),nn(this,h[6]||"",!0),this.m=Ls(h[7]||"")):(this.h=!1,this.i=new da(null,this.h))}ht.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Vs(h,ua,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Vs(h,ua,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Vs(m,m.charAt(0)=="/"?Li:ae,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Vs(m,Vi)),l.join("")};function oe(l){return new ht(l)}function be(l,h,m){l.j=m?Ls(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Me(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function nn(l,h,m){h instanceof da?(l.i=h,Sb(l.i,l.h)):(m||(h=Vs(h,Ms)),l.i=new da(h,l.h))}function Ee(l,h,m){l.i.set(h,m)}function Oi(l){return Ee(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ls(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Vs(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,th),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function th(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ua=/[#\/\?@]/g,ae=/[#\?:]/g,Li=/[#\?]/g,Ms=/[#\?@]/g,Vi=/#/g;function da(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function $r(l){l.g||(l.g=new Map,l.h=0,l.i&&Ze(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=da.prototype,t.add=function(l,h){$r(this),this.i=null,l=Mi(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function Sg(l,h){$r(l),h=Mi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function jg(l,h){return $r(l),h=Mi(l,h),l.g.has(h)}t.forEach=function(l,h){$r(this),this.g.forEach(function(m,_){m.forEach(function(L){l.call(h,L,_,this)},this)},this)},t.na=function(){$r(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let _=0;_<h.length;_++){const L=l[_];for(let M=0;M<L.length;M++)m.push(h[_])}return m},t.V=function(l){$r(this);let h=[];if(typeof l=="string")jg(this,l)&&(h=h.concat(this.g.get(Mi(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},t.set=function(l,h){return $r(this),this.i=null,l=Mi(this,l),jg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Rg(l,h,m){Sg(l,h),0<m.length&&(l.i=null,l.g.set(Mi(l,h),R(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var _=h[m];const M=encodeURIComponent(String(_)),H=this.V(_);for(_=0;_<H.length;_++){var L=M;H[_]!==""&&(L+="="+encodeURIComponent(String(H[_]))),l.push(L)}}return this.i=l.join("&")};function Mi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Sb(l,h){h&&!l.j&&($r(l),l.i=null,l.g.forEach(function(m,_){var L=_.toLowerCase();_!=L&&(Sg(this,_),Rg(this,L,m))},l)),l.j=h}function jb(l,h){const m=new cr;if(c.Image){const _=new Image;_.onload=w(zr,m,"TestLoadImage: loaded",!0,h,_),_.onerror=w(zr,m,"TestLoadImage: error",!1,h,_),_.onabort=w(zr,m,"TestLoadImage: abort",!1,h,_),_.ontimeout=w(zr,m,"TestLoadImage: timeout",!1,h,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function Rb(l,h){const m=new cr,_=new AbortController,L=setTimeout(()=>{_.abort(),zr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(M=>{clearTimeout(L),M.ok?zr(m,"TestPingServer: ok",!0,h):zr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),zr(m,"TestPingServer: error",!1,h)})}function zr(l,h,m,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(m)}catch{}}function Ab(){this.g=new oc}function Cb(l,h,m){const _=m||"";try{ye(l,function(L,M){let H=L;d(L)&&(H=Ti(L)),h.push(_+M+"="+encodeURIComponent(H))})}catch(L){throw h.push(_+"type="+encodeURIComponent("_badmap")),L}}function pc(l){this.l=l.Ub||null,this.j=l.eb||!1}A(pc,Ii),pc.prototype.g=function(){return new mc(this.l,this.j)},pc.prototype.i=function(l){return function(){return l}}({});function mc(l,h){Ye.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(mc,Ye),t=mc.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,fa(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ha(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ag(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ag(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?ha(this):fa(this),this.readyState==3&&Ag(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ha(this))},t.Qa=function(l){this.g&&(this.response=l,ha(this))},t.ga=function(){this.g&&ha(this)};function ha(l){l.readyState=4,l.l=null,l.j=null,l.v=null,fa(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function fa(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Cg(l){let h="";return V(l,function(m,_){h+=_,h+=":",h+=m,h+=`\r
`}),h}function nh(l,h,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Cg(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Ee(l,h,m))}function qe(l){Ye.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(qe,Ye);var Pb=/^https?$/i,Db=["POST","PUT"];t=qe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ai.g(),this.v=this.o?Zo(this.o):Zo(Ai),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){Pg(this,M);return}if(l=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)m.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const M of _.keys())m.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),L=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Db,h,void 0))||_||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,H]of m)this.g.setRequestHeader(M,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lg(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){Pg(this,M)}};function Pg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Dg(l),gc(l)}function Dg(l){l.A||(l.A=!0,dt(l,"complete"),dt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,dt(this,"complete"),dt(this,"abort"),gc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gc(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Og(this):this.bb())},t.bb=function(){Og(this)};function Og(l){if(l.h&&typeof a<"u"&&(!l.v[1]||hr(l)!=4||l.Z()!=2)){if(l.u&&hr(l)==4)Yo(l.Ea,0,l);else if(dt(l,"readystatechange"),hr(l)==4){l.h=!1;try{const H=l.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var _;if(_=H===0){var L=String(l.D).match(Se)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),_=!Pb.test(L?L.toLowerCase():"")}m=_}if(m)dt(l,"complete"),dt(l,"success");else{l.m=6;try{var M=2<hr(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",Dg(l)}}finally{gc(l)}}}}function gc(l,h){if(l.g){Lg(l);const m=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||dt(l,"ready");try{m.onreadystatechange=_}catch{}}}function Lg(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function hr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),ic(h)}};function Vg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ob(l){const h={};l=(l.g&&2<=hr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(x(l[_]))continue;var m=P(l[_]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=h[L]||[];h[L]=M,M.push(m)}b(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pa(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function Mg(l){this.Aa=0,this.i=[],this.j=new cr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pa("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pa("baseRetryDelayMs",5e3,l),this.cb=pa("retryDelaySeedMs",1e4,l),this.Wa=pa("forwardChannelMaxRetries",2,l),this.wa=pa("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new fc(l&&l.concurrentRequestLimit),this.Da=new Ab,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mg.prototype,t.la=8,t.G=1,t.connect=function(l,h,m,_){it(0),this.W=l,this.H=h||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=Kg(this,null,this.W),vc(this)};function rh(l){if(Ug(l),l.G==3){var h=l.U++,m=oe(l.I);if(Ee(m,"SID",l.K),Ee(m,"RID",h),Ee(m,"TYPE","terminate"),ma(l,m),h=new Wn(l,l.j,h),h.L=2,h.v=Oi(oe(m)),m=!1,c.navigator&&c.navigator.sendBeacon)try{m=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&c.Image&&(new Image().src=h.v,m=!0),m||(h.g=Gg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ci(h)}Wg(l)}function yc(l){l.g&&(ih(l),l.g.cancel(),l.g=null)}function Ug(l){yc(l),l.u&&(c.clearTimeout(l.u),l.u=null),xc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function vc(l){if(!la(l.h)&&!l.s){l.s=!0;var h=l.Ga;ut||te(),q||(ut(),q=!0),J.add(h,l),l.B=0}}function Lb(l,h){return ca(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Fr(g(l.Ga,l,h),Hg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Wn(this,this.j,l);let M=this.o;if(this.S&&(M?(M=y(M),S(M,this.S)):M=this.S),this.m!==null||this.O||(L.H=M,M=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Bg(this,L,h),m=oe(this.I),Ee(m,"RID",l),Ee(m,"CVER",22),this.D&&Ee(m,"X-HTTP-Session-Id",this.D),ma(this,m),M&&(this.O?h="headers="+encodeURIComponent(String(Cg(M)))+"&"+h:this.m&&nh(m,this.m,M)),Di(this.h,L),this.Ua&&Ee(m,"TYPE","init"),this.P?(Ee(m,"$req",h),Ee(m,"SID","null"),L.T=!0,ia(L,m,null)):ia(L,m,h),this.G=2}}else this.G==3&&(l?Fg(this,l):this.i.length==0||la(this.h)||Fg(this))};function Fg(l,h){var m;h?m=h.l:m=l.U++;const _=oe(l.I);Ee(_,"SID",l.K),Ee(_,"RID",m),Ee(_,"AID",l.T),ma(l,_),l.m&&l.o&&nh(_,l.m,l.o),m=new Wn(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Bg(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Di(l.h,m),ia(m,_,h)}function ma(l,h){l.H&&V(l.H,function(m,_){Ee(h,_,m)}),l.l&&ye({},function(m,_){Ee(h,_,m)})}function Bg(l,h,m){m=Math.min(l.i.length,m);var _=l.l?g(l.l.Na,l.l,l):null;e:{var L=l.i;let M=-1;for(;;){const H=["count="+m];M==-1?0<m?(M=L[0].g,H.push("ofs="+M)):M=0:H.push("ofs="+M);let Ne=!0;for(let vt=0;vt<m;vt++){let pe=L[vt].g;const It=L[vt].map;if(pe-=M,0>pe)M=Math.max(0,L[vt].g-100),Ne=!1;else try{Cb(It,H,"req"+pe+"_")}catch{_&&_(It)}}if(Ne){_=H.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,_}function $g(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ut||te(),q||(ut(),q=!0),J.add(h,l),l.v=0}}function sh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Fr(g(l.Fa,l),Hg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,zg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Fr(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),yc(this),zg(this))};function ih(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function zg(l){l.g=new Wn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=oe(l.qa);Ee(h,"RID","rpc"),Ee(h,"SID",l.K),Ee(h,"AID",l.T),Ee(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ee(h,"TO",l.ja),Ee(h,"TYPE","xmlhttp"),ma(l,h),l.m&&l.o&&nh(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Oi(oe(h)),m.m=null,m.P=!0,Je(m,l)}t.Za=function(){this.C!=null&&(this.C=null,yc(this),sh(this),it(19))};function xc(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function qg(l,h){var m=null;if(l.g==h){xc(l),ih(l),l.g=null;var _=2}else if(Pi(l.h,h))m=h.D,N(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;_=jn(),dt(_,new ji(_,m)),vc(l)}else $g(l);else if(L=h.s,L==3||L==0&&0<h.X||!(_==1&&Lb(l,h)||_==2&&sh(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),L){case 1:Us(l,5);break;case 4:Us(l,10);break;case 3:Us(l,6);break;default:Us(l,2)}}}function Hg(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function Us(l,h){if(l.j.info("Error code "+h),h==2){var m=g(l.fb,l),_=l.Xa;const L=!_;_=new ht(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||be(_,"https"),Oi(_),L?jb(_.toString(),m):Rb(_.toString(),m)}else it(2);l.G=0,l.l&&l.l.sa(h),Wg(l),Ug(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Wg(l){if(l.G=0,l.ka=[],l.l){const h=B(l.h);(h.length!=0||l.i.length!=0)&&(k(l.ka,h),k(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function Kg(l,h,m){var _=m instanceof ht?oe(m):new ht(m);if(_.g!="")h&&(_.g=h+"."+_.g),Me(_,_.s);else{var L=c.location;_=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var M=new ht(null);_&&be(M,_),h&&(M.g=h),L&&Me(M,L),m&&(M.l=m),_=M}return m=l.D,h=l.ya,m&&h&&Ee(_,m,h),Ee(_,"VER",l.la),ma(l,_),_}function Gg(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new qe(new pc({eb:m})):new qe(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qg(){}t=Qg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _c(){}_c.prototype.g=function(l,h){return new rn(l,h)};function rn(l,h){Ye.call(this),this.g=new Mg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!x(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ui(this)}A(rn,Ye),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){rh(this.g)},rn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Ti(l),l=m);h.i.push(new eh(h.Ya++,l)),h.G==3&&vc(h)},rn.prototype.N=function(){this.g.l=null,delete this.j,rh(this.g),delete this.g,rn.aa.N.call(this)};function Xg(l){Ur.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}A(Xg,Ur);function Yg(){ki.call(this),this.status=1}A(Yg,ki);function Ui(l){this.g=l}A(Ui,Qg),Ui.prototype.ua=function(){dt(this.g,"a")},Ui.prototype.ta=function(l){dt(this.g,new Xg(l))},Ui.prototype.sa=function(l){dt(this.g,new Yg)},Ui.prototype.ra=function(){dt(this.g,"b")},_c.prototype.createWebChannel=_c.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,IE=function(){return new _c},TE=function(){return jn()},NE=Hn,op={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,uu=Br,ra.COMPLETE="complete",bE=ra,qn.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,Pa=qn,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,EE=qe}).apply(typeof Fc<"u"?Fc:typeof self<"u"?self:typeof window<"u"?window:{});const K0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let At=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Nm("@firebase/firestore");function Na(){return ai.logLevel}function X(t,...e){if(ai.logLevel<=ue.DEBUG){const n=e.map(Lm);ai.debug(`Firestore (${Mo}): ${t}`,...n)}}function Ar(t,...e){if(ai.logLevel<=ue.ERROR){const n=e.map(Lm);ai.error(`Firestore (${Mo}): ${t}`,...n)}}function li(t,...e){if(ai.logLevel<=ue.WARN){const n=e.map(Lm);ai.warn(`Firestore (${Mo}): ${t}`,...n)}}function Lm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: `+t;throw Ar(e),new Error(e)}function we(t,e){t||re()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class NR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class TR{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Er,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Er)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new kE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new At(e)}}class IR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class kR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new IR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new SR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=RR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function No(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new st(0,0))}static max(){return new se(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends bl{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const AR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends bl{construct(e,n,r){return new mt(e,n,r)}static isValidIdentifier(e){return AR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ae.fromString(e))}static fromName(e){return new Y(Ae.fromString(e).popFirst(5))}static empty(){return new Y(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ae(e.slice()))}}function CR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new xs(s,Y.empty(),e)}function PR(t){return new xs(t.readTime,t.key,-1)}class xs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xs(se.min(),Y.empty(),-1)}static max(){return new xs(se.max(),Y.empty(),-1)}}function DR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==OR)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++c,c===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function VR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ql(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mm.oe=-1;function Sd(t){return t==null}function Wu(t){return t===0&&1/t==-1/0}function MR(t){return typeof t=="number"&&Number.isInteger(t)&&!Wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_t.RED,this.left=s??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new _t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return _t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,s,i){return this}insert(e,n,r){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Q0(this.data.getIterator())}getIteratorFrom(e){return new Q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class Q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new cn([])}unionWith(e){let n=new Et(mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new RE("Invalid base64 string: "+i):i}}(e);return new yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const UR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(t){if(we(!!t),typeof t=="string"){let e=0;const n=UR.exec(t);if(we(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ci(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fm(t){const e=t.mapValue.fields.__previous_value__;return Um(e)?Fm(e):e}function Nl(t){const e=_s(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n,r,s,i,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class To{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new To("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof To&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c={mapValue:{}};function ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Um(t)?4:$R(t)?9007199254740991:BR(t)?10:11:re()}function rr(t,e){if(t===e)return!0;const n=ui(t);if(n!==ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nl(t).isEqual(Nl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=_s(s.timestampValue),c=_s(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ci(s.bytesValue).isEqual(ci(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ge(s.geoPointValue.latitude)===Ge(i.geoPointValue.latitude)&&Ge(s.geoPointValue.longitude)===Ge(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ge(s.integerValue)===Ge(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ge(s.doubleValue),c=Ge(i.doubleValue);return a===c?Wu(a)===Wu(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return No(t.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(G0(a)!==G0(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!rr(a[u],c[u])))return!1;return!0}(t,e);default:return re()}}function Tl(t,e){return(t.values||[]).find(n=>rr(n,e))!==void 0}function Io(t,e){if(t===e)return 0;const n=ui(t),r=ui(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Ge(i.integerValue||i.doubleValue),u=Ge(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return X0(t.timestampValue,e.timestampValue);case 4:return X0(Nl(t),Nl(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,a){const c=ci(i),u=ci(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=me(c[d],u[d]);if(f!==0)return f}return me(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=me(Ge(i.latitude),Ge(a.latitude));return c!==0?c:me(Ge(i.longitude),Ge(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Y0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,u,d,f;const p=i.fields||{},g=a.fields||{},w=(c=p.value)===null||c===void 0?void 0:c.arrayValue,A=(u=g.value)===null||u===void 0?void 0:u.arrayValue,R=me(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=A==null?void 0:A.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:Y0(w,A)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===$c.mapValue&&a===$c.mapValue)return 0;if(i===$c.mapValue)return 1;if(a===$c.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=me(u[p],f[p]);if(g!==0)return g;const w=Io(c[u[p]],d[f[p]]);if(w!==0)return w}return me(u.length,f.length)}(t.mapValue,e.mapValue);default:throw re()}}function X0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=_s(t),r=_s(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Y0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Io(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function ko(t){return ap(t)}function ap(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_s(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ci(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ap(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${ap(n.fields[a])}`;return s+"}"}(t.mapValue):re()}function J0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function lp(t){return!!t&&"integerValue"in t}function Bm(t){return!!t&&"arrayValue"in t}function Z0(t){return!!t&&"nullValue"in t}function ev(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function du(t){return!!t&&"mapValue"in t}function BR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ga(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ga(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ga(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $R(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!du(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(n)}setAll(e){let n=mt.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Ga(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());du(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];du(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){gi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Kt(Ga(this.value))}}function AE(t){const e=[];return gi(t.fields,(n,r)=>{const s=new mt([n]);if(du(r)){const i=AE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Pt(e,0,se.min(),se.min(),se.min(),Kt.empty(),0)}static newFoundDocument(e,n,r,s){return new Pt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new Pt(e,2,n,se.min(),se.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,se.min(),se.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.position=e,this.inclusive=n}}function tv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(a.referenceValue),n.key):r=Io(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function nv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n="asc"){this.field=e,this.dir=n}}function zR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{}class rt extends CE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HR(e,n,r):n==="array-contains"?new GR(e,r):n==="in"?new QR(e,r):n==="not-in"?new XR(e,r):n==="array-contains-any"?new YR(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new WR(e,r):new KR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Io(n,this.value)):n!==null&&ui(this.value)===ui(n)&&this.matchesComparison(Io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends CE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $n(e,n)}matches(e){return PE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function PE(t){return t.op==="and"}function DE(t){return qR(t)&&PE(t)}function qR(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function cp(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+ko(t.value);if(DE(t))return t.filters.map(e=>cp(e)).join(",");{const e=t.filters.map(n=>cp(n)).join(",");return`${t.op}(${e})`}}function OE(t,e){return t instanceof rt?function(r,s){return s instanceof rt&&r.op===s.op&&r.field.isEqual(s.field)&&rr(r.value,s.value)}(t,e):t instanceof $n?function(r,s){return s instanceof $n&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&OE(a,s.filters[c]),!0):!1}(t,e):void re()}function LE(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${ko(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(LE).join(" ,")+"}"}(t):"Filter"}class HR extends rt{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class WR extends rt{constructor(e,n){super(e,"in",n),this.keys=VE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class KR extends rt{constructor(e,n){super(e,"not-in",n),this.keys=VE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class GR extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bm(n)&&Tl(n.arrayValue,this.value)}}class QR extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Tl(this.value.arrayValue,n)}}class XR extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Tl(this.value.arrayValue,n)}}class YR extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Tl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.ue=null}}function rv(t,e=null,n=[],r=[],s=null,i=null,a=null){return new JR(t,e,n,r,s,i,a)}function $m(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ko(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ko(r)).join(",")),e.ue=n}return e.ue}function zm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nv(t.startAt,e.startAt)&&nv(t.endAt,e.endAt)}function up(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ZR(t,e,n,r,s,i,a,c){return new Uo(t,e,n,r,s,i,a,c)}function jd(t){return new Uo(t)}function sv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ME(t){return t.collectionGroup!==null}function Qa(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Et(mt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Il(i,r))}),n.has(mt.keyField().canonicalString())||e.ce.push(new Il(mt.keyField(),r))}return e.ce}function tr(t){const e=ie(t);return e.le||(e.le=eA(e,Qa(t))),e.le}function eA(t,e){if(t.limitType==="F")return rv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Il(s.field,i)});const n=t.endAt?new Ku(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ku(t.startAt.position,t.startAt.inclusive):null;return rv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dp(t,e){const n=t.filters.concat([e]);return new Uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gu(t,e,n){return new Uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rd(t,e){return zm(tr(t),tr(e))&&t.limitType===e.limitType}function UE(t){return`${$m(tr(t))}|lt:${t.limitType}`}function zi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>LE(s)).join(", ")}]`),Sd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ko(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ko(s)).join(",")),`Target(${r})`}(tr(t))}; limitType=${t.limitType})`}function Ad(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Qa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=tv(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Qa(r),s)||r.endAt&&!function(a,c,u){const d=tv(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Qa(r),s))}(t,e)}function tA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function FE(t){return(e,n)=>{let r=!1;for(const s of Qa(t)){const i=nA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function nA(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Io(u,d):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){gi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=new $e(Y.comparator);function Cr(){return rA}const BE=new $e(Y.comparator);function Da(...t){let e=BE;for(const n of t)e=e.insert(n.key,n);return e}function $E(t){let e=BE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gs(){return Xa()}function zE(){return Xa()}function Xa(){return new Fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const sA=new $e(Y.comparator),iA=new Et(Y.comparator);function ce(...t){let e=iA;for(const n of t)e=e.add(n);return e}const oA=new Et(me);function aA(){return oA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function qE(t){return{integerValue:""+t}}function HE(t,e){return MR(e)?qE(e):qm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this._=void 0}}function lA(t,e,n){return t instanceof kl?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Um(i)&&(i=Fm(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Sl?KE(t,e):t instanceof jl?GE(t,e):function(s,i){const a=WE(s,i),c=iv(a)+iv(s.Pe);return lp(a)&&lp(s.Pe)?qE(c):qm(s.serializer,c)}(t,e)}function cA(t,e,n){return t instanceof Sl?KE(t,e):t instanceof jl?GE(t,e):n}function WE(t,e){return t instanceof Rl?function(r){return lp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class kl extends Cd{}class Sl extends Cd{constructor(e){super(),this.elements=e}}function KE(t,e){const n=QE(e);for(const r of t.elements)n.some(s=>rr(s,r))||n.push(r);return{arrayValue:{values:n}}}class jl extends Cd{constructor(e){super(),this.elements=e}}function GE(t,e){let n=QE(e);for(const r of t.elements)n=n.filter(s=>!rr(s,r));return{arrayValue:{values:n}}}class Rl extends Cd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function iv(t){return Ge(t.integerValue||t.doubleValue)}function QE(t){return Bm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.field=e,this.transform=n}}function uA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Sl&&s instanceof Sl||r instanceof jl&&s instanceof jl?No(r.elements,s.elements,rr):r instanceof Rl&&s instanceof Rl?rr(r.Pe,s.Pe):r instanceof kl&&s instanceof kl}(t.transform,e.transform)}class dA{constructor(e,n){this.version=e,this.transformResults=n}}class Nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pd{}function YE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hm(t.key,Nn.none()):new Hl(t.key,t.data,Nn.none());{const n=t.data,r=Kt.empty();let s=new Et(mt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Rs(t.key,r,new cn(s.toArray()),Nn.none())}}function hA(t,e,n){t instanceof Hl?function(s,i,a){const c=s.value.clone(),u=av(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Rs?function(s,i,a){if(!hu(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=av(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(JE(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ya(t,e,n,r){return t instanceof Hl?function(i,a,c,u){if(!hu(i.precondition,a))return c;const d=i.value.clone(),f=lv(i.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rs?function(i,a,c,u){if(!hu(i.precondition,a))return c;const d=lv(i.fieldTransforms,u,a),f=a.data;return f.setAll(JE(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,a,c){return hu(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function fA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=WE(r.transform,s||null);i!=null&&(n===null&&(n=Kt.empty()),n.set(r.field,i))}return n||null}function ov(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&No(r,s,(i,a)=>uA(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hl extends Pd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rs extends Pd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function JE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function av(t,e,n){const r=new Map;we(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,cA(a,c,n[s]))}return r}function lv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,lA(i,a,e))}return r}class Hm extends Pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pA extends Pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&hA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ya(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ya(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zE();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=YE(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(n,r)=>ov(n,r))&&No(this.baseMutations,e.baseMutations,(n,r)=>ov(n,r))}}class Wm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length);let s=function(){return sA}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Wm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,de;function vA(t){switch(t){default:return re();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function ZE(t){if(t===void 0)return Ar("GRPC error has no .code"),U.UNKNOWN;switch(t){case et.OK:return U.OK;case et.CANCELLED:return U.CANCELLED;case et.UNKNOWN:return U.UNKNOWN;case et.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case et.INTERNAL:return U.INTERNAL;case et.UNAVAILABLE:return U.UNAVAILABLE;case et.UNAUTHENTICATED:return U.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case et.NOT_FOUND:return U.NOT_FOUND;case et.ALREADY_EXISTS:return U.ALREADY_EXISTS;case et.PERMISSION_DENIED:return U.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case et.ABORTED:return U.ABORTED;case et.OUT_OF_RANGE:return U.OUT_OF_RANGE;case et.UNIMPLEMENTED:return U.UNIMPLEMENTED;case et.DATA_LOSS:return U.DATA_LOSS;default:return re()}}(de=et||(et={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=new Ys([4294967295,4294967295],0);function cv(t){const e=xA().encode(t),n=new wE;return n.update(e),new Uint8Array(n.digest())}function uv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ys([n,r],0),new Ys([s,i],0)]}class Km{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oa(`Invalid padding: ${n}`);if(r<0)throw new Oa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ys.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ys.fromNumber(r)));return s.compare(_A)===1&&(s=new Ys([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=cv(e),[r,s]=uv(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Km(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=cv(e),[r,s]=uv(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Wl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dd(se.min(),s,new $e(me),Cr(),ce())}}class Wl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wl(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class e1{constructor(e,n){this.targetId=e,this.me=n}}class t1{constructor(e,n,r=yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class dv{constructor(){this.fe=0,this.ge=fv(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re()}}),new Wl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=fv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class wA{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cr(),this.qe=hv(),this.Qe=new $e(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(up(i))if(r===0){const a=new Y(i.path);this.Ue(n,a,Pt.newNoDocument(a,se.min()))}else we(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=ci(r).toUint8Array()}catch(u){if(u instanceof RE)return li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Km(a,s,i)}catch(u){return li(u instanceof Oa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const c=this.Je(a);if(c){if(i.current&&up(c.target)){const u=new Y(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Pt.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ce();this.qe.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Dd(e,n,this.Qe,this.ke,r);return this.ke=Cr(),this.qe=hv(),this.Qe=new $e(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new dv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function hv(){return new $e(Y.comparator)}function fv(){return new $e(Y.comparator)}const EA={asc:"ASCENDING",desc:"DESCENDING"},bA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NA={and:"AND",or:"OR"};class TA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hp(t,e){return t.useProto3Json||Sd(e)?e:{value:e}}function Qu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IA(t,e){return Qu(t,e.toTimestamp())}function nr(t){return we(!!t),se.fromTimestamp(function(n){const r=_s(n);return new st(r.seconds,r.nanos)}(t))}function Gm(t,e){return fp(t,e).canonicalString()}function fp(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function r1(t){const e=Ae.fromString(t);return we(l1(e)),e}function pp(t,e){return Gm(t.databaseId,e.path)}function $h(t,e){const n=r1(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(i1(n))}function s1(t,e){return Gm(t.databaseId,e)}function kA(t){const e=r1(t);return e.length===4?Ae.emptyPath():i1(e)}function mp(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function i1(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pv(t,e,n){return{name:pp(t,e),fields:n.value.mapValue.fields}}function SA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(we(f===void 0||typeof f=="string"),yt.fromBase64String(f||"")):(we(f===void 0||f instanceof Buffer||f instanceof Uint8Array),yt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const f=d.code===void 0?U.UNKNOWN:ZE(d.code);return new K(f,d.message||"")}(a);n=new t1(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$h(t,r.document.name),i=nr(r.document.updateTime),a=r.document.createTime?nr(r.document.createTime):se.min(),c=new Kt({mapValue:{fields:r.document.fields}}),u=Pt.newFoundDocument(s,i,a,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new fu(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$h(t,r.document),i=r.readTime?nr(r.readTime):se.min(),a=Pt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new fu([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$h(t,r.document),i=r.removedTargetIds||[];n=new fu([],i,s,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new yA(s,i),c=r.targetId;n=new e1(c,a)}}return n}function jA(t,e){let n;if(e instanceof Hl)n={update:pv(t,e.key,e.value)};else if(e instanceof Hm)n={delete:pp(t,e.key)};else if(e instanceof Rs)n={update:pv(t,e.key,e.data),updateMask:MA(e.fieldMask)};else{if(!(e instanceof pA))return re();n={verify:pp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof kl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Sl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof jl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Rl)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:IA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re()}(t,e.precondition)),n}function RA(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?nr(s.updateTime):nr(i);return a.isEqual(se.min())&&(a=nr(i)),new dA(a,s.transformResults||[])}(n,e))):[]}function AA(t,e){return{documents:[s1(t,e.path)]}}function CA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=s1(t,s);const i=function(d){if(d.length!==0)return a1($n.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:qi(g.field),direction:OA(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=hp(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function PA(t){let e=kA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=o1(p);return g instanceof $n&&DE(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(A){return new Il(Hi(A.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Sd(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new Ku(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,w=p.values||[];return new Ku(w,g)}(n.endAt)),ZR(e,s,a,i,c,"F",u,d)}function DA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function o1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hi(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hi(n.unaryFilter.field);return rt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hi(n.unaryFilter.field);return rt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hi(n.unaryFilter.field);return rt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return rt.create(Hi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(r=>o1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function OA(t){return EA[t]}function LA(t){return bA[t]}function VA(t){return NA[t]}function qi(t){return{fieldPath:t.canonicalString()}}function Hi(t){return mt.fromServerFormat(t.fieldPath)}function a1(t){return t instanceof rt?function(n){if(n.op==="=="){if(ev(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NAN"}};if(Z0(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ev(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NAN"}};if(Z0(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qi(n.field),op:LA(n.op),value:n.value}}}(t):t instanceof $n?function(n){const r=n.getFilters().map(s=>a1(s));return r.length===1?r[0]:{compositeFilter:{op:VA(n.op),filters:r}}}(t):re()}function MA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function l1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,r,s,i=se.min(),a=se.min(),c=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.ct=e}}function FA(t){const e=PA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.un=new $A}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(xs.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class $A{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Et(Ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new So(0)}static kn(){return new So(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.changes=new Fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ya(r.mutation,s,cn.empty(),st.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Da();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Cr();const a=Xa(),c=function(){return Xa()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Rs)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Ya(f.mutation,d,f.mutation.getFieldMask(),st.now())):a.set(d.key,cn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var p;return c.set(d,new qA(f,(p=a.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Xa();let s=new $e((a,c)=>a-c),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||cn.empty();f=c.applyToLocalView(d,f),r.set(u,f);const p=(s.get(c.batchId)||ce()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,p=zE();f.forEach(g=>{if(!i.has(g)){const w=YE(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ME(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Gs());let c=-1,u=i;return a.next(d=>F.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ce())).next(f=>({batchId:c,changes:$E(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=Da();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Da();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const d=function(p,g){return new Uo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,Pt.newInvalidDocument(f)))});let c=Da();return a.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Ya(f.mutation,d,cn.empty(),st.now()),Ad(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nr(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:FA(s.bundledQuery),readTime:nr(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.overlays=new $e(Y.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gs();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Gs(),i=n.length+1,a=new Y(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $e((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Gs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Gs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return F.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new gA(n,r));let i=this.Ir.get(n);i===void 0&&(i=ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.Tr=new Et(ft.Er),this.dr=new Et(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new Ae([])),r=new ft(n,e),s=new ft(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new Ae([])),r=new ft(n,e),s=new ft(n,e+1);let i=ce();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(ft.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new mA(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new ft(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(me);return n.forEach(s=>{const i=new ft(s,0),a=new ft(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],c=>{r=r.add(c.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const a=new ft(new Y(i),0);let c=new Et(me);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},a),F.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ft(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.Mr=e,this.docs=function(){return new $e(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let r=Cr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Pt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Cr();const a=n.path,c=new Y(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||DR(PR(f),r)<=0||(s.has(f.key)||Ad(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new YA(this)}getSize(e){return F.resolve(this.size)}}class YA extends zA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.persistence=e,this.Nr=new Fo(n=>$m(n),zm),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Qm,this.targetCount=0,this.kr=So.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new So(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Mm(0),this.Kr=!1,this.Kr=!0,this.$r=new GA,this.referenceDelegate=e(this),this.Ur=new JA(this),this.indexManager=new BA,this.remoteDocumentCache=function(s){return new XA(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new UA(n),this.Gr=new WA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new QA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new eC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class eC extends LR{constructor(e){super(),this.currentSequenceNumber=e}}class Xm{constructor(e){this.persistence=e,this.Jr=new Qm,this.Yr=null}static Zr(e){return new Xm(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=Y.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ym(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return j2()?8:VR(Lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new tC;return this.Xi(e,n,a).next(c=>{if(i.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Na()<=ue.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",zi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Na()<=ue.DEBUG&&X("QueryEngine","Query:",zi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Na()<=ue.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",zi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tr(n))):F.resolve())}Yi(e,n){if(sv(n))return F.resolve(null);let r=tr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gu(n,null,"F"),r=tr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ce(...i);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,a,u.readTime)?this.Yi(e,Gu(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return sv(n)||s.isEqual(se.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?F.resolve(null):(Na()<=ue.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zi(n)),this.rs(e,a,n,CR(s,-1)).next(c=>c))})}ts(e,n){let r=new Et(FE(e));return n.forEach((s,i)=>{Ad(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Na()<=ue.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",zi(n)),this.Ji.getDocumentsMatchingQuery(e,n,xs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new $e(me),this._s=new Fo(i=>$m(i),zm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function sC(t,e,n,r){return new rC(t,e,n,r)}async function c1(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=ce();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function iC(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const p=d.batch,g=p.keys();let w=F.resolve();return g.forEach(A=>{w=w.next(()=>f.getEntry(u,A)).next(R=>{const k=d.docVersions.get(A);we(k!==null),R.version.compareTo(k)<0&&(p.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),f.addEntry(R)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ce();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function u1(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function oC(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;c.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(yt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(p,w),function(R,k,E){return R.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,w,f)&&c.push(n.Ur.updateTargetData(i,w))});let u=Cr(),d=ce();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(aC(i,a,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(se.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return F.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function aC(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Cr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):X("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function lC(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cC(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new rs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function gp(t,e,n){const r=ie(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ql(a))throw a;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function mv(t,e,n){const r=ie(t);let s=se.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const p=ie(u),g=p._s.get(f);return g!==void 0?F.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,a,tr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:se.min(),n?i:ce())).next(c=>(uC(r,tA(e),c),{documents:c,Ts:i})))}function uC(t,e,n){let r=t.us.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class gv{constructor(){this.activeTargetIds=aA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dC{constructor(){this.so=new gv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc=null;function zh(){return zc===null?zc=function(){return 268435456+Math.round(2147483648*Math.random())}():zc++,"0x"+zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class mC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const c=zh(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(f=>(X("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw li("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,c){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=fC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=zh();return new Promise((a,c)=>{const u=new EE;u.setWithCredentials(!0),u.listenOnce(bE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case uu.NO_ERROR:const f=u.getResponseJson();X(Rt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case uu.TIMEOUT:X(Rt,`RPC '${e}' ${i} timed out`),c(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case uu.HTTP_ERROR:const p=u.getStatus();if(X(Rt,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const A=function(k){const E=k.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(E)>=0?E:U.UNKNOWN}(w.status);c(new K(A,w.message))}else c(new K(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(U.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{X(Rt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);X(Rt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=zh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=IE(),c=TE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");X(Rt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=a.createWebChannel(f,u);let g=!1,w=!1;const A=new pC({Io:k=>{w?X(Rt,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(g||(X(Rt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),X(Rt,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},To:()=>p.close()}),R=(k,E,x)=>{k.listen(E,v=>{try{x(v)}catch(T){setTimeout(()=>{throw T},0)}})};return R(p,Pa.EventType.OPEN,()=>{w||(X(Rt,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),R(p,Pa.EventType.CLOSE,()=>{w||(w=!0,X(Rt,`RPC '${e}' stream ${s} transport closed`),A.So())}),R(p,Pa.EventType.ERROR,k=>{w||(w=!0,li(Rt,`RPC '${e}' stream ${s} transport errored:`,k),A.So(new K(U.UNAVAILABLE,"The operation could not be completed")))}),R(p,Pa.EventType.MESSAGE,k=>{var E;if(!w){const x=k.data[0];we(!!x);const v=x,T=v.error||((E=v[0])===null||E===void 0?void 0:E.error);if(T){X(Rt,`RPC '${e}' stream ${s} received error:`,T);const O=T.status;let V=function(I){const S=et[I];if(S!==void 0)return ZE(S)}(O),b=T.message;V===void 0&&(V=U.INTERNAL,b="Unknown error status: "+O+" with message "+T.message),w=!0,A.So(new K(V,b)),p.close()}else X(Rt,`RPC '${e}' stream ${s} received:`,x),A.bo(x)}}),R(c,NE.STAT_EVENT,k=>{k.stat===op.PROXY?X(Rt,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===op.NOPROXY&&X(Rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){return new TA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r,s,i,a,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new d1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Ar(n.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gC extends h1{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=SA(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?se.min():a.readTime?nr(a.readTime):se.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=mp(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=up(u)?{documents:AA(i,u)}:{query:CA(i,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=n1(i,a.resumeToken);const d=hp(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(se.min())>0){c.readTime=Qu(i,a.snapshotVersion.toTimestamp());const d=hp(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=DA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=mp(this.serializer),n.removeTarget=e,this.a_(n)}}class yC extends h1{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=RA(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=mp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>jA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,fp(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,fp(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(U.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ar(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{yi(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.L_.add(4),await Kl(d),d.q_.set("Unknown"),d.L_.delete(4),await Ld(d)}(this))})}),this.q_=new xC(r,s)}}async function Ld(t){if(yi(t))for(const e of t.B_)await e(!0)}async function Kl(t){for(const e of t.B_)await e(!1)}function f1(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),tg(n)?eg(n):Bo(n).r_()&&Zm(n,e))}function Jm(t,e){const n=ie(t),r=Bo(n);n.N_.delete(e),r.r_()&&p1(n,e),n.N_.size===0&&(r.r_()?r.o_():yi(n)&&n.q_.set("Unknown"))}function Zm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bo(t).A_(e)}function p1(t,e){t.Q_.xe(e),Bo(t).R_(e)}function eg(t){t.Q_=new wA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Bo(t).start(),t.q_.v_()}function tg(t){return yi(t)&&!Bo(t).n_()&&t.N_.size>0}function yi(t){return ie(t).L_.size===0}function m1(t){t.Q_=void 0}async function wC(t){t.q_.set("Online")}async function EC(t){t.N_.forEach((e,n)=>{Zm(t,e)})}async function bC(t,e){m1(t),tg(t)?(t.q_.M_(e),eg(t)):t.q_.set("Unknown")}async function NC(t,e,n){if(t.q_.set("Online"),e instanceof t1&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xu(t,r)}else if(e instanceof fu?t.Q_.Ke(e):e instanceof e1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(se.min()))try{const r=await u1(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(yt.EMPTY_BYTE_STRING,f.snapshotVersion)),p1(i,u);const p=new rs(f.target,u,d,f.sequenceNumber);Zm(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Xu(t,r)}}async function Xu(t,e,n){if(!ql(e))throw e;t.L_.add(1),await Kl(t),t.q_.set("Offline"),n||(n=()=>u1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ld(t)})}function g1(t,e){return e().catch(n=>Xu(t,n,e))}async function Vd(t){const e=ie(t),n=ws(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;TC(e);)try{const s=await lC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,IC(e,s)}catch(s){await Xu(e,s)}y1(e)&&v1(e)}function TC(t){return yi(t)&&t.O_.length<10}function IC(t,e){t.O_.push(e);const n=ws(t);n.r_()&&n.V_&&n.m_(e.mutations)}function y1(t){return yi(t)&&!ws(t).n_()&&t.O_.length>0}function v1(t){ws(t).start()}async function kC(t){ws(t).p_()}async function SC(t){const e=ws(t);for(const n of t.O_)e.m_(n.mutations)}async function jC(t,e,n){const r=t.O_.shift(),s=Wm.from(r,e,n);await g1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Vd(t)}async function RC(t,e){e&&ws(t).V_&&await async function(r,s){if(function(a){return vA(a)&&a!==U.ABORTED}(s.code)){const i=r.O_.shift();ws(r).s_(),await g1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Vd(r)}}(t,e),y1(t)&&v1(t)}async function vv(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=yi(n);n.L_.add(3),await Kl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ld(n)}async function AC(t,e){const n=ie(t);e?(n.L_.delete(2),await Ld(n)):e||(n.L_.add(2),await Kl(n),n.q_.set("Unknown"))}function Bo(t){return t.K_||(t.K_=function(n,r,s){const i=ie(n);return i.w_(),new gC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:wC.bind(null,t),Ro:EC.bind(null,t),mo:bC.bind(null,t),d_:NC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),tg(t)?eg(t):t.q_.set("Unknown")):(await t.K_.stop(),m1(t))})),t.K_}function ws(t){return t.U_||(t.U_=function(n,r,s){const i=ie(n);return i.w_(),new yC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:kC.bind(null,t),mo:RC.bind(null,t),f_:SC.bind(null,t),g_:jC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Vd(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new ng(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(t,e){if(Ar("AsyncQueue",`${e}: ${t}`),ql(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Da(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new go(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new go;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.W_=new $e(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class jo{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new jo(e,n,go.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class PC{constructor(){this.queries=_v(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=_v(),i.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function _v(){return new Fo(t=>UE(t),Rd)}async function sg(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new CC,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=rg(a,`Initialization of query '${zi(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&og(n)}async function ig(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function DC(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&og(n)}function OC(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function og(t){t.Y_.forEach(e=>{e.next()})}var yp,wv;(wv=yp||(yp={})).ea="default",wv.Cache="cache";class ag{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new jo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.key=e}}class _1{constructor(e){this.key=e}}class LC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=FE(e),this.Ra=new go(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new xv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),w=Ad(this.query,p)?p:null,A=!!g&&this.mutatedKeys.has(g.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let k=!1;g&&w?g.data.isEqual(w.data)?A!==R&&(r.track({type:3,doc:w}),k=!0):this.ga(g,w)||(r.track({type:2,doc:w}),k=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),k=!0):g&&!w&&(r.track({type:1,doc:g}),k=!0,(u||d)&&(c=!0)),k&&(w?(a=a.add(w),i=R?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,p)=>function(w,A){const R=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return R(w)-R(A)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new jo(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new _1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new x1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return jo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MC{constructor(e){this.key=e,this.va=!1}}class UC{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Fo(c=>UE(c),Rd),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(Y.comparator),this.Na=new Map,this.La=new Qm,this.Ba={},this.ka=new Map,this.qa=So.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function FC(t,e,n=!0){const r=I1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await w1(r,e,n,!0),s}async function BC(t,e){const n=I1(t);await w1(n,e,!0,!1)}async function w1(t,e,n,r){const s=await cC(t.localStore,tr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await $C(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&f1(t.remoteStore,s),c}async function $C(t,e,n,r,s){t.Ka=(p,g,w)=>async function(R,k,E,x){let v=k.view.ma(E);v.ns&&(v=await mv(R.localStore,k.query,!1).then(({documents:b})=>k.view.ma(b,v)));const T=x&&x.targetChanges.get(k.targetId),O=x&&x.targetMismatches.get(k.targetId)!=null,V=k.view.applyChanges(v,R.isPrimaryClient,T,O);return bv(R,k.targetId,V.wa),V.snapshot}(t,p,g,w);const i=await mv(t.localStore,e,!0),a=new LC(e,i.Ts),c=a.ma(i.documents),u=Wl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);bv(t,n,d.wa);const f=new VC(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function zC(t,e,n){const r=ie(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!Rd(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Jm(r.remoteStore,s.targetId),vp(r,s.targetId)}).catch(zl)):(vp(r,s.targetId),await gp(r.localStore,s.targetId,!0))}async function qC(t,e){const n=ie(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jm(n.remoteStore,r.targetId))}async function HC(t,e,n){const r=JC(t);try{const s=await function(a,c){const u=ie(a),d=st.now(),f=c.reduce((w,A)=>w.add(A.key),ce());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let A=Cr(),R=ce();return u.cs.getEntries(w,f).next(k=>{A=k,A.forEach((E,x)=>{x.isValidDocument()||(R=R.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,A)).next(k=>{p=k;const E=[];for(const x of c){const v=fA(x,p.get(x.key).overlayedDocument);v!=null&&E.push(new Rs(x.key,v,AE(v.value.mapValue),Nn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,E,c)}).next(k=>{g=k;const E=k.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(w,k.batchId,E)})}).then(()=>({batchId:g.batchId,changes:$E(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new $e(me)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await Gl(r,s.changes),await Vd(r.remoteStore)}catch(s){const i=rg(s,"Failed to persist write");n.reject(i)}}async function E1(t,e){const n=ie(t);try{const r=await oC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?we(a.va):s.removedDocuments.size>0&&(we(a.va),a.va=!1))}),await Gl(n,r,e)}catch(r){await zl(r)}}function Ev(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const c=a.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ie(a);u.onlineState=c;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(c)&&(d=!0)}),d&&og(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WC(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new $e(Y.comparator);a=a.insert(i,Pt.newNoDocument(i,se.min()));const c=ce().add(i),u=new Dd(se.min(),new Map,new $e(me),a,c);await E1(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),lg(r)}else await gp(r.localStore,e,!1).then(()=>vp(r,e,n)).catch(zl)}async function KC(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await iC(n.localStore,e);N1(n,r,null),b1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gl(n,s)}catch(s){await zl(s)}}async function GC(t,e,n){const r=ie(t);try{const s=await function(a,c){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(we(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);N1(r,e,n),b1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gl(r,s)}catch(s){await zl(s)}}function b1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function N1(t,e,n){const r=ie(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function vp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||T1(t,r)})}function T1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Jm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),lg(t))}function bv(t,e,n){for(const r of n)r instanceof x1?(t.La.addReference(r.key,e),QC(t,r)):r instanceof _1?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||T1(t,r.key)):re()}function QC(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),lg(t))}function lg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(Ae.fromString(e)),r=t.qa.next();t.Na.set(r,new MC(n)),t.Oa=t.Oa.insert(n,r),f1(t.remoteStore,new rs(tr(jd(n.path)),r,"TargetPurposeLimboResolution",Mm.oe))}}async function Gl(t,e,n){const r=ie(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Ym.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const f=ie(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,g=>F.forEach(g.$i,w=>f.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>F.forEach(g.Ui,w=>f.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!ql(p))throw p;X("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const w=f.os.get(g),A=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(A);f.os=f.os.insert(g,R)}}}(r.localStore,i))}async function XC(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await c1(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new K(U.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gl(n,r.hs)}}function YC(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let s=ce();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const c=n.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function I1(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=E1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WC.bind(null,e),e.Ca.d_=DC.bind(null,e.eventManager),e.Ca.$a=OC.bind(null,e.eventManager),e}function JC(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GC.bind(null,e),e}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Od(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return sC(this.persistence,new nC,e.initialUser,this.serializer)}Ga(e){return new ZA(Xm.Zr,this.serializer)}Wa(e){return new dC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class xp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ev(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XC.bind(null,this.syncEngine),await AC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PC}()}createDatastore(e){const n=Od(e.databaseInfo.databaseId),r=function(i){return new mC(i)}(e.databaseInfo);return function(i,a,c,u){return new vC(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new _C(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Ev(this.syncEngine,n,0),function(){return yv.D()?new yv:new hC}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,f){const p=new UC(s,i,a,c,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Kl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xp.provider={build:()=>new xp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=At.UNAUTHENTICATED,this.clientId=Vm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hh(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await c1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Nv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eP(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>vv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>vv(e.remoteStore,s)),t._onlineComponents=e}async function eP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;li("Error using user provided cache. Falling back to memory cache: "+n),await Hh(t,new Yu)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Hh(t,new Yu);return t._offlineComponents}async function k1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Nv(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Nv(t,new xp))),t._onlineComponents}function tP(t){return k1(t).then(e=>e.syncEngine)}async function Ju(t){const e=await k1(t),n=e.eventManager;return n.onListen=FC.bind(null,e.syncEngine),n.onUnlisten=zC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=BC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qC.bind(null,e.syncEngine),n}function nP(t,e,n={}){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new cg({next:g=>{f.Za(),a.enqueueAndForget(()=>ig(i,p));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new ag(jd(c.path),f,{includeMetadataChanges:!0,_a:!0});return sg(i,p)}(await Ju(t),t.asyncQueue,e,n,r)),r.promise}function rP(t,e,n={}){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new cg({next:g=>{f.Za(),a.enqueueAndForget(()=>ig(i,p)),g.fromCache&&u.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new ag(c,f,{includeMetadataChanges:!0,_a:!0});return sg(i,p)}(await Ju(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R1(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Iv(t){if(!Y.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kv(t){if(Y.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Md(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Ft(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Md(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function sP(t,e){if(e<=0)throw new K(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ud{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SE;switch(r.type){case"firstParty":return new kR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Tv.get(n);r&&(X("ComponentProvider","Removing Datastore"),Tv.delete(n),r.terminate())}(this),Promise.resolve()}}function A1(t,e,n,r={}){var s;const i=(t=Ft(t,Ud))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=At.MOCK_USER;else{c=jw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new At(d)}t._authCredentials=new NR(new kE(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new or(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class br extends or{constructor(e,n,r){super(e,n,jd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new Y(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function he(t,e,...n){if(t=ke(t),j1("collection","path",e),t instanceof Ud){const r=Ae.fromString(e,...n);return kv(r),new br(t,null,r)}{if(!(t instanceof bt||t instanceof br))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return kv(r),new br(t.firestore,null,r)}}function Z(t,e,...n){if(t=ke(t),arguments.length===1&&(e=Vm.newId()),j1("doc","path",e),t instanceof Ud){const r=Ae.fromString(e,...n);return Iv(r),new bt(t,null,new Y(r))}{if(!(t instanceof bt||t instanceof br))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return Iv(r),new bt(t.firestore,t instanceof br?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new d1(this,"async_queue_retry"),this.Vu=()=>{const r=qh();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=qh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=qh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Er;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ql(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Ar("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=ng.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Rv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class sr extends Ud{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jv(e),this._firestoreClient=void 0,await e}}}function C1(t,e){const n=typeof t=="object"?t:Nd(),r=typeof t=="string"?t:"(default)",s=bd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Iw("firestore");i&&A1(s,...i)}return s}function Ql(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iP(t),t._firestoreClient}function iP(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new FR(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,S1(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new ZC(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new di(yt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new di(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=/^__.*__$/;class aP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hl(e,this.data,n,this.fieldTransforms)}}class P1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function D1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class ug{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ug(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(D1(this.Cu)&&oP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class lP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Od(e)}Qu(e,n,r,s=!1){return new ug({Cu:e,methodName:n,qu:r,path:mt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $d(t){const e=t._freezeSettings(),n=Od(t._databaseId);return new lP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function O1(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);fg("Data must be an object, but it was:",a,r);const c=L1(r,a);let u,d;if(i.merge)u=new cn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=_p(e,p,n);if(!a.contains(g))throw new K(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);M1(f,g)||f.push(g)}u=new cn(f),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new aP(new Kt(c),u,d)}class zd extends $o{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zd}}class dg extends $o{_toFieldTransform(e){return new XE(e.path,new kl)}isEqual(e){return e instanceof dg}}class hg extends $o{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Rl(e.serializer,HE(e.serializer,this.$u));return new XE(e.path,n)}isEqual(e){return e instanceof hg&&this.$u===e.$u}}function cP(t,e,n,r){const s=t.Qu(1,e,n);fg("Data must be an object, but it was:",s,r);const i=[],a=Kt.empty();gi(r,(u,d)=>{const f=pg(e,u,n);d=ke(d);const p=s.Nu(f);if(d instanceof zd)i.push(f);else{const g=Yl(d,p);g!=null&&(i.push(f),a.set(f,g))}});const c=new cn(i);return new P1(a,c,s.fieldTransforms)}function uP(t,e,n,r,s,i){const a=t.Qu(1,e,n),c=[_p(e,r,n)],u=[s];if(i.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(_p(e,i[g])),u.push(i[g+1]);const d=[],f=Kt.empty();for(let g=c.length-1;g>=0;--g)if(!M1(d,c[g])){const w=c[g];let A=u[g];A=ke(A);const R=a.Nu(w);if(A instanceof zd)d.push(w);else{const k=Yl(A,R);k!=null&&(d.push(w),f.set(w,k))}}const p=new cn(d);return new P1(f,p,a.fieldTransforms)}function dP(t,e,n,r=!1){return Yl(n,t.Qu(r?4:3,e))}function Yl(t,e){if(V1(t=ke(t)))return fg("Unsupported field value:",e,t),L1(t,e);if(t instanceof $o)return function(r,s){if(!D1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=Yl(c,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=st.fromDate(r);return{timestampValue:Qu(s.serializer,i)}}if(r instanceof st){const i=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qu(s.serializer,i)}}if(r instanceof Fd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof di)return{bytesValue:n1(s.serializer,r._byteString)};if(r instanceof bt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Bd)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return qm(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Md(r)}`)}(t,e)}function L1(t,e){const n={};return jE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gi(t,(r,s)=>{const i=Yl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function V1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Fd||t instanceof di||t instanceof bt||t instanceof $o||t instanceof Bd)}function fg(t,e,n){if(!V1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Md(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function _p(t,e,n){if((e=ke(e))instanceof Xl)return e._internalPath;if(typeof e=="string")return pg(t,e);throw Zu("Field path arguments must be of type string or ",t,!1,void 0,n)}const hP=new RegExp("[~\\*/\\[\\]]");function pg(t,e,n){if(e.search(hP)>=0)throw Zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xl(...e.split("."))._internalPath}catch{throw Zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zu(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new K(U.INVALID_ARGUMENT,c+t+u)}function M1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fP extends U1{data(){return super.data()}}function qd(t,e){return typeof e=="string"?pg(t,e):e instanceof Xl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mg{}class Hd extends mg{}function Bt(t,e,...n){let r=[];e instanceof mg&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Wd).length,c=i.filter(u=>u instanceof Jl).length;if(a>1||a>0&&c>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Jl extends Hd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Jl(e,n,r)}_apply(e){const n=this._parse(e);return B1(e._query,n),new or(e.firestore,e.converter,dp(e._query,n))}_parse(e){const n=$d(e.firestore);return function(i,a,c,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Cv(p,f);const w=[];for(const A of p)w.push(Av(u,i,A));g={arrayValue:{values:w}}}else g=Av(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Cv(p,f),g=dP(c,a,p,f==="in"||f==="not-in");return rt.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fn(t,e,n){const r=e,s=qd("where",t);return Jl._create(s,r,n)}class Wd extends mg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)B1(a,u),a=dp(a,u)}(e._query,n),new or(e.firestore,e.converter,dp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kd extends Hd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Kd(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Il(i,a)}(e._query,this._field,this._direction);return new or(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Uo(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Es(t,e="asc"){const n=e,r=qd("orderBy",t);return Kd._create(r,n)}class Gd extends Hd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Gd(e,n,r)}_apply(e){return new or(e.firestore,e.converter,Gu(e._query,this._limit,this._limitType))}}function gg(t){return sP("limit",t),Gd._create("limit",t,"F")}function Av(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ME(e)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ae.fromString(n));if(!Y.isDocumentKey(r))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return J0(t,new Y(r))}if(n instanceof bt)return J0(t,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Md(n)}.`)}function Cv(t,e){if(!Array.isArray(t)||t.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B1(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $1{convertValue(e,n="none"){switch(ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Ge(a.doubleValue));return new Bd(i)}convertGeoPoint(e){return new Fd(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const n=_s(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);we(l1(r));const s=new To(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Ar(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yg extends U1{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ja(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ja extends yg{data(e={}){return super.data(e)}}class vg{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new io(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ja(this._firestore,this._userDataWriter,r.key,r,new io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Ja(s._firestore,s._userDataWriter,c.doc.key,c.doc,new io(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Ja(s._firestore,s._userDataWriter,c.doc.key,c.doc,new io(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:pP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function pP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){t=Ft(t,bt);const e=Ft(t.firestore,sr);return nP(Ql(e),t._key).then(n=>q1(e,t,n))}class xg extends $1{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function Ke(t){t=Ft(t,or);const e=Ft(t.firestore,sr),n=Ql(e),r=new xg(e);return F1(t._query),rP(n,t._query).then(s=>new vg(e,r,t,s))}function wn(t,e,n){t=Ft(t,bt);const r=Ft(t.firestore,sr),s=z1(t.converter,e,n);return Zl(r,[O1($d(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Nn.none())])}function ot(t,e,n,...r){t=Ft(t,bt);const s=Ft(t.firestore,sr),i=$d(s);let a;return a=typeof(e=ke(e))=="string"||e instanceof Xl?uP(i,"updateDoc",t._key,e,n,r):cP(i,"updateDoc",t._key,e),Zl(s,[a.toMutation(t._key,Nn.exists(!0))])}function ss(t){return Zl(Ft(t.firestore,sr),[new Hm(t._key,Nn.none())])}function zo(t,e){const n=Ft(t.firestore,sr),r=Z(t),s=z1(t.converter,e);return Zl(n,[O1($d(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Nn.exists(!1))]).then(()=>r)}function Al(t,...e){var n,r,s;t=ke(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Rv(e[a])||(i=e[a],a++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Rv(e[a])){const p=e[a];e[a]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[a+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[a+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,d,f;if(t instanceof bt)d=Ft(t.firestore,sr),f=jd(t._key.path),u={next:p=>{e[a]&&e[a](q1(d,t,p))},error:e[a+1],complete:e[a+2]};else{const p=Ft(t,or);d=Ft(p.firestore,sr),f=p._query;const g=new xg(d);u={next:w=>{e[a]&&e[a](new vg(d,g,p,w))},error:e[a+1],complete:e[a+2]},F1(t._query)}return function(g,w,A,R){const k=new cg(R),E=new ag(w,k,A);return g.asyncQueue.enqueueAndForget(async()=>sg(await Ju(g),E)),()=>{k.Za(),g.asyncQueue.enqueueAndForget(async()=>ig(await Ju(g),E))}}(Ql(d),f,c,u)}function Zl(t,e){return function(r,s){const i=new Er;return r.asyncQueue.enqueueAndForget(async()=>HC(await tP(r),s,i)),i.promise}(Ql(t),e)}function q1(t,e,n){const r=n.docs.get(e._key),s=new xg(t);return new yg(t,s,e._key,r,new io(n.hasPendingWrites,n.fromCache),e.converter)}function ve(){return new dg("serverTimestamp")}function La(t){return new hg("increment",t)}(function(e,n=!0){(function(s){Mo=s})(mi),si(new vs("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new sr(new TR(r.getProvider("auth-internal")),new jR(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new To(d.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Zn(K0,"4.7.3",e),Zn(K0,"4.7.3","esm2017")})();const Pv=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:$1,Bytes:di,CollectionReference:br,DocumentReference:bt,DocumentSnapshot:yg,FieldPath:Xl,FieldValue:$o,Firestore:sr,FirestoreError:K,GeoPoint:Fd,Query:or,QueryCompositeFilterConstraint:Wd,QueryConstraint:Hd,QueryDocumentSnapshot:Ja,QueryFieldFilterConstraint:Jl,QueryLimitConstraint:Gd,QueryOrderByConstraint:Kd,QuerySnapshot:vg,SnapshotMetadata:io,Timestamp:st,VectorValue:Bd,_AutoId:Vm,_ByteString:yt,_DatabaseId:To,_DocumentKey:Y,_EmptyAuthCredentialsProvider:SE,_FieldPath:mt,_cast:Ft,_logWarn:li,_validateIsNotUsedTogether:R1,addDoc:zo,collection:he,connectFirestoreEmulator:A1,deleteDoc:ss,doc:Z,ensureFirestoreConfigured:Ql,executeWrite:Zl,getDoc:Dt,getDocs:Ke,getFirestore:C1,increment:La,limit:gg,onSnapshot:Al,orderBy:Es,query:Bt,serverTimestamp:ve,setDoc:wn,updateDoc:ot,where:fn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="firebasestorage.googleapis.com",W1="storageBucket",mP=2*60*1e3,gP=10*60*1e3,yP=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze extends ir{constructor(e,n,r=0){super(Wh(e),`Firebase Storage: ${n} (${Wh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pe||(Pe={}));function Wh(t){return"storage/"+t}function _g(){const t="An unknown error occurred, please check the error payload for server response.";return new ze(Pe.UNKNOWN,t)}function vP(t){return new ze(Pe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function xP(t){return new ze(Pe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _P(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ze(Pe.UNAUTHENTICATED,t)}function wP(){return new ze(Pe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EP(t){return new ze(Pe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function K1(){return new ze(Pe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function G1(){return new ze(Pe.CANCELED,"User canceled the upload/download.")}function bP(t){return new ze(Pe.INVALID_URL,"Invalid URL '"+t+"'.")}function NP(t){return new ze(Pe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function TP(){return new ze(Pe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+W1+"' property when initializing the app?")}function Q1(){return new ze(Pe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function IP(){return new ze(Pe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function kP(){return new ze(Pe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SP(t){return new ze(Pe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wp(t){return new ze(Pe.INVALID_ARGUMENT,t)}function X1(){return new ze(Pe.APP_DELETED,"The Firebase app was deleted.")}function jP(t){return new ze(Pe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Za(t,e){return new ze(Pe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ta(t){throw new ze(Pe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=un.makeFromUrl(e,n)}catch{return new un(e,"")}if(r.path==="")return r;throw NP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function d(T){T.path_=decodeURIComponent(T.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),A={bucket:1,path:3},R=n===H1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",E=new RegExp(`^https?://${R}/${s}/${k}`,"i"),v=[{regex:c,indices:u,postModify:i},{regex:w,indices:A,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let T=0;T<v.length;T++){const O=v[T],V=O.regex.exec(e);if(V){const b=V[O.indices.bucket];let y=V[O.indices.path];y||(y=""),r=new un(b,y),O.postModify(r);break}}if(r==null)throw bP(e);return r}}class RP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t,e,n){let r=1,s=null,i=null,a=!1,c=0;function u(){return c===2}let d=!1;function f(...k){d||(d=!0,e.apply(null,k))}function p(k){s=setTimeout(()=>{s=null,t(w,u())},k)}function g(){i&&clearTimeout(i)}function w(k,...E){if(d){g();return}if(k){g(),f.call(null,k,...E);return}if(u()||a){g(),f.call(null,k,...E);return}r<64&&(r*=2);let v;c===1?(c=2,v=0):v=(r+Math.random())*1e3,p(v)}let A=!1;function R(k){A||(A=!0,g(),!d&&(s!==null?(k||(c=2),clearTimeout(s),p(0)):k||(c=1)))}return p(0),i=setTimeout(()=>{a=!0,R(!0)},n),R}function CP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){return t!==void 0}function DP(t){return typeof t=="function"}function OP(t){return typeof t=="object"&&!Array.isArray(t)}function Qd(t){return typeof t=="string"||t instanceof String}function Dv(t){return wg()&&t instanceof Blob}function wg(){return typeof Blob<"u"}function Ov(t,e,n,r){if(r<e)throw wp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw wp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Y1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Js;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Js||(Js={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,r,s,i,a,c,u,d,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,A)=>{this.resolve_=w,this.reject_=A,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new qc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===Js.NO_ERROR,u=i.getStatus();if(!c||J1(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Js.ABORT;r(!1,new qc(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new qc(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());PP(u)?i(u):i()}catch(u){a(u)}else if(c!==null){const u=_g();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(s.canceled){const u=this.appDelete_?X1():G1();a(u)}else{const u=K1();a(u)}};this.canceled_?n(!1,new qc(!1,null,!0)):this.backoffId_=AP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&CP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function VP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function MP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function UP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function FP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function BP(t,e,n,r,s,i,a=!0){const c=Y1(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return UP(d,e),VP(d,n),MP(d,i),FP(d,r),new LP(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zP(...t){const e=$P();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(wg())return new Blob(t);throw new ze(Pe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qP(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){if(typeof atob>"u")throw SP("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kh{constructor(e,n){this.data=e,this.contentType=n||null}}function WP(t,e){switch(t){case Xn.RAW:return new Kh(Z1(e));case Xn.BASE64:case Xn.BASE64URL:return new Kh(eb(t,e));case Xn.DATA_URL:return new Kh(GP(e),QP(e))}throw _g()}function Z1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function KP(t){let e;try{e=decodeURIComponent(t)}catch{throw Za(Xn.DATA_URL,"Malformed data URL.")}return Z1(e)}function eb(t,e){switch(t){case Xn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Za(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Xn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Za(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=HP(e)}catch(s){throw s.message.includes("polyfill")?s:Za(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class tb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Za(Xn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=XP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function GP(t){const e=new tb(t);return e.base64?eb(Xn.BASE64,e.rest):KP(e.rest)}function QP(t){return new tb(t).contentType}function XP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){let r=0,s="";Dv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Dv(this.data_)){const r=this.data_,s=qP(r,e,n);return s===null?null:new mr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mr(r,!0)}}static getBlob(...e){if(wg()){const n=e.map(r=>r instanceof mr?r.data_:r);return new mr(zP.apply(null,n))}else{const n=e.map(a=>Qd(a)?WP(Xn.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)s[i++]=a[c]}),new mr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t){let e;try{e=JSON.parse(t)}catch{return null}return OP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function JP(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function rb(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e){return e}class Vt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||ZP}}let Hc=null;function e4(t){return!Qd(t)||t.length<2?t:rb(t)}function Eg(){if(Hc)return Hc;const t=[];t.push(new Vt("bucket")),t.push(new Vt("generation")),t.push(new Vt("metageneration")),t.push(new Vt("name","fullPath",!0));function e(i,a){return e4(a)}const n=new Vt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Vt("size");return s.xform=r,t.push(s),t.push(new Vt("timeCreated")),t.push(new Vt("updated")),t.push(new Vt("md5Hash",null,!0)),t.push(new Vt("cacheControl",null,!0)),t.push(new Vt("contentDisposition",null,!0)),t.push(new Vt("contentEncoding",null,!0)),t.push(new Vt("contentLanguage",null,!0)),t.push(new Vt("contentType",null,!0)),t.push(new Vt("metadata","customMetadata",!0)),Hc=t,Hc}function t4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new un(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function n4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return t4(r,t),r}function sb(t,e,n){const r=nb(e);return r===null?null:n4(t,r,n)}function r4(t,e,n,r){const s=nb(e);if(s===null||!Qd(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,p=t.fullPath,g="/b/"+a(f)+"/o/"+a(p),w=ec(g,n,r),A=Y1({alt:"media",token:d});return w+A})[0]}function ib(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class qo{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t){if(!t)throw _g()}function bg(t,e){function n(r,s){const i=sb(t,s,e);return Nr(i!==null),i}return n}function s4(t,e){function n(r,s){const i=sb(t,s,e);return Nr(i!==null),r4(i,s,t.host,t._protocol)}return n}function tc(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=wP():s=_P():n.getStatus()===402?s=xP(t.bucket):n.getStatus()===403?s=EP(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ob(t){const e=tc(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=vP(t.path)),i.serverResponse=s.serverResponse,i}return n}function i4(t,e,n){const r=e.fullServerUrl(),s=ec(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new qo(s,i,bg(t,n),a);return c.errorHandler=ob(e),c}function o4(t,e,n){const r=e.fullServerUrl(),s=ec(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new qo(s,i,s4(t,n),a);return c.errorHandler=ob(e),c}function a4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ab(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=a4(null,e)),r}function lb(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let v="";for(let T=0;T<2;T++)v=v+Math.random().toString().slice(2);return v}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const d=ab(e,r,s),f=ib(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=mr.getBlob(p,r,g);if(w===null)throw Q1();const A={name:d.fullPath},R=ec(i,t.host,t._protocol),k="POST",E=t.maxUploadRetryTime,x=new qo(R,k,bg(t,n),E);return x.urlParams=A,x.headers=a,x.body=w.uploadData(),x.errorHandler=tc(e),x}class ed{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Ng(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Nr(!1)}return Nr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function l4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a=ab(e,r,s),c={name:a.fullPath},u=ec(i,t.host,t._protocol),d="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},p=ib(a,n),g=t.maxUploadRetryTime;function w(R){Ng(R);let k;try{k=R.getResponseHeader("X-Goog-Upload-URL")}catch{Nr(!1)}return Nr(Qd(k)),k}const A=new qo(u,d,w,g);return A.urlParams=c,A.headers=f,A.body=p,A.errorHandler=tc(e),A}function c4(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(d){const f=Ng(d,["active","final"]);let p=null;try{p=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Nr(!1)}p||Nr(!1);const g=Number(p);return Nr(!isNaN(g)),new ed(g,r.size(),f==="final")}const a="POST",c=t.maxUploadRetryTime,u=new qo(n,a,i,c);return u.headers=s,u.errorHandler=tc(e),u}const Lv=256*1024;function u4(t,e,n,r,s,i,a,c){const u=new ed(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw IP();const d=u.total-u.current;let f=d;s>0&&(f=Math.min(f,s));const p=u.current,g=p+f;let w="";f===0?w="finalize":d===f?w="upload, finalize":w="upload";const A={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${u.current}`},R=r.slice(p,g);if(R===null)throw Q1();function k(T,O){const V=Ng(T,["active","final"]),b=u.current+f,y=r.size();let I;return V==="final"?I=bg(e,i)(T,O):I=null,new ed(b,y,V==="final",I)}const E="POST",x=e.maxUploadRetryTime,v=new qo(n,E,k,x);return v.headers=A,v.body=R.uploadData(),v.progressCallback=c||null,v.errorHandler=tc(t),v}const Ht={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Gh(t){switch(t){case"running":case"pausing":case"canceling":return Ht.RUNNING;case"paused":return Ht.PAUSED;case"success":return Ht.SUCCESS;case"canceled":return Ht.CANCELED;case"error":return Ht.ERROR;default:return Ht.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n,r){if(DP(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class h4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Js.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Js.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Js.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ta("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ta("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ta("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ta("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ta("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class f4 extends h4{initXhr(){this.xhr_.responseType="text"}}function zs(){return new f4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Eg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Pe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(J1(s.status,[]))if(i)s=K1();else{this.sleepTime=Math.max(this.sleepTime*2,yP),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Pe.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=l4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,zs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=c4(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,zs,n,r);this._request=i,i.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Lv*this._chunkMultiplier,n=new ed(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let a;try{a=u4(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(a,zs,s,i,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Lv*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=i4(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,zs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=lb(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,zs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=G1(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Gh(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new d4(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Gh(this._state)){case Ht.SUCCESS:$i(this._resolve.bind(null,this.snapshot))();break;case Ht.CANCELED:case Ht.ERROR:const n=this._reject;$i(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Gh(this._state)){case Ht.RUNNING:case Ht.PAUSED:e.next&&$i(e.next.bind(e,this.snapshot))();break;case Ht.SUCCESS:e.complete&&$i(e.complete.bind(e))();break;case Ht.CANCELED:case Ht.ERROR:e.error&&$i(e.error.bind(e,this._error))();break;default:e.error&&$i(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n){this._service=e,n instanceof un?this._location=n:this._location=un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new hi(e,n)}get root(){const e=new un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rb(this._location.path)}get storage(){return this._service}get parent(){const e=YP(this._location.path);if(e===null)return null;const n=new un(this._location.bucket,e);return new hi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jP(e)}}function m4(t,e,n){t._throwIfRoot("uploadBytes");const r=lb(t.storage,t._location,Eg(),new mr(e,!0),n);return t.storage.makeRequestWithTokens(r,zs).then(s=>({metadata:s,ref:t}))}function g4(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new p4(t,new mr(e),n)}function y4(t){t._throwIfRoot("getDownloadURL");const e=o4(t.storage,t._location,Eg());return t.storage.makeRequestWithTokens(e,zs).then(n=>{if(n===null)throw kP();return n})}function v4(t,e){const n=JP(t._location.path,e),r=new un(t._location.bucket,n);return new hi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t){return/^[A-Za-z]+:\/\//.test(t)}function _4(t,e){return new hi(t,e)}function cb(t,e){if(t instanceof Tg){const n=t;if(n._bucket==null)throw TP();const r=new hi(n,n._bucket);return e!=null?cb(r,e):r}else return e!==void 0?v4(t,e):t}function w4(t,e){if(e&&x4(e)){if(t instanceof Tg)return _4(t,e);throw wp("To use ref(service, url), the first argument must be a Storage instance.")}else return cb(t,e)}function Vv(t,e){const n=e==null?void 0:e[W1];return n==null?null:un.makeFromBucketSpec(n,t)}function E4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:jw(s,t.app.options.projectId))}class Tg{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=H1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mP,this._maxUploadRetryTime=gP,this._requests=new Set,s!=null?this._bucket=un.makeFromBucketSpec(s,this._host):this._bucket=Vv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=un.makeFromBucketSpec(this._url,e):this._bucket=Vv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ov("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ov("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new RP(X1());{const a=BP(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Mv="@firebase/storage",Uv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="storage";function db(t,e,n){return t=ke(t),m4(t,e,n)}function hb(t,e,n){return t=ke(t),g4(t,e,n)}function Xd(t){return t=ke(t),y4(t)}function Yd(t,e){return t=ke(t),w4(t,e)}function Jd(t=Nd(),e){t=ke(t);const r=bd(t,ub).getImmediate({identifier:e}),s=Iw("storage");return s&&b4(r,...s),r}function b4(t,e,n,r={}){E4(t,e,n,r)}function N4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Tg(n,r,s,e,mi)}function T4(){si(new vs(ub,N4,"PUBLIC").setMultipleInstances(!0)),Zn(Mv,Uv,""),Zn(Mv,Uv,"esm2017")}T4();const I4={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},an=Pw().length?Nd():Cw(I4),Un=Pw().length>0?_R(an):nE(an,{persistence:[yE,dE]}),W=C1(an),k4=Jd(an),fb=j.createContext({user:null,role:null,loading:!0,logout:async()=>{}}),S4=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(null),[i,a]=j.useState(!0);j.useEffect(()=>{const u=KS(Un,async d=>{if(n(d),d){const f=await Dt(Z(W,"users",d.uid)),p=f.data(),g=f.exists()?p==null?void 0:p.role:null;if(s(g),g==="owner")try{const w=Z(W,"restaurants",d.uid);(await Dt(w)).exists()||await wn(w,{name:(p==null?void 0:p.restaurantName)||(p==null?void 0:p.name)||" ",ownerId:d.uid,email:(p==null?void 0:p.email)||d.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(w){console.warn("    ",w)}}else s(null);a(!1)});return()=>u()},[]);const c=async()=>{await GS(Un)};return o.jsx(fb.Provider,{value:{user:e,role:r,loading:i,logout:c},children:t})},Tt=()=>j.useContext(fb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),R4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Fv=t=>{const e=R4(t);return e.charAt(0).toUpperCase()+e.slice(1)},pb=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),A4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var C4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...c},u)=>j.createElement("svg",{ref:u,...C4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:pb("lucide",s),...!i&&!A4(c)&&{"aria-hidden":"true"},...c},[...a.map(([d,f])=>j.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(t,e)=>{const n=j.forwardRef(({className:r,...s},i)=>j.createElement(P4,{ref:i,iconNode:e,className:pb(`lucide-${j4(Fv(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Fv(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ep=ee("arrow-left",D4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],mb=ee("arrow-right",O4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],V4=ee("briefcase",L4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],U4=ee("building-2",M4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Qh=ee("chart-column",F4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],gb=ee("chef-hat",B4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],z4=ee("chevron-down",$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],H4=ee("chevron-up",q4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yb=ee("circle-check-big",W4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],G4=ee("circle-check",K4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],vb=ee("circle-x",Q4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],bp=ee("clipboard-list",X4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],J4=ee("clock",Y4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],xb=ee("code-xml",Z4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],tD=ee("heart",eD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Bv=ee("house",nD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],sD=ee("image",rD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$v=ee("info",iD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],aD=ee("key-round",oD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_b=ee("lock",lD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],wb=ee("log-in",cD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Eb=ee("mail",uD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],hD=ee("menu",dD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M5 12h14",key:"1ays0h"}]],pD=ee("minus",fD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Xh=ee("package",mD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zv=ee("pen-line",gD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],vD=ee("phone",yD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ig=ee("plus",xD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qs=ee("refresh-cw",_D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ED=ee("save",wD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ND=ee("server",bD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ID=ee("settings",TD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],bb=ee("shield",kD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],qv=ee("shopping-bag",SD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Nb=ee("shopping-cart",jD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],td=ee("sparkles",RD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Yh=ee("star",AD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Np=ee("store",CD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ro=ee("trash-2",PD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Hv=ee("triangle-alert",DD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],nd=ee("truck",OD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],VD=ee("upload",LD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],rd=ee("user-plus",MD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cl=ee("user",UD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],BD=ee("users",FD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],zD=ee("utensils",$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Tb=ee("wallet",qD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sd=ee("x",HD),Oe=({to:t,label:e,icon:n,onClick:r})=>{const{pathname:s}=Ss(),i=s===t;return o.jsxs(Te,{to:t,onClick:r,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(i?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20 backdrop-blur-sm"),children:[n,o.jsx("span",{children:e})]})},WD=()=>{const{user:t,role:e,logout:n}=Tt(),[r,s]=j.useState(!1),i=Ss(),a=Dr(),c=i.pathname==="/";return j.useEffect(()=>{s(!1)},[i.pathname]),j.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),o.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30",children:[o.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!c&&o.jsx("button",{onClick:()=>a(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"",children:o.jsx(mb,{className:"w-5 h-5"})}),o.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[o.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),o.jsx("span",{className:"text-lg sm:text-2xl",children:" "})]})]}),o.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[o.jsx(Oe,{to:"/restaurants",label:"",icon:o.jsx(Np,{className:"w-4 h-4"})}),e==="customer"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/cart",label:" "}),o.jsx(Oe,{to:"/orders",label:""}),o.jsx(Oe,{to:"/profile",label:"",icon:o.jsx(Cl,{className:"w-4 h-4"})})]}),e==="owner"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/owner",label:" "}),o.jsx(Oe,{to:"/owner/orders",label:" "}),o.jsx(Oe,{to:"/owner/courier-requests",label:""})]}),e==="courier"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/courier",label:" "}),o.jsx(Oe,{to:"/courier/hiring",label:""})]}),e==="admin"&&o.jsx(Oe,{to:"/admin",label:" "}),e==="developer"&&o.jsx(Oe,{to:"/developer",label:" "}),t?o.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:""}):o.jsx(Oe,{to:"/login",label:""})]}),o.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white/20 hover:bg-white/30 transition backdrop-blur-sm",onClick:()=>s(!r),children:r?o.jsx(sd,{className:"w-6 h-6 text-white"}):o.jsx(hD,{className:"w-6 h-6 text-white"})})]}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>s(!1)}),o.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] bg-gradient-to-b from-sky-500 to-sky-700 
        z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${r?"translate-x-0":"translate-x-full"}
      `,children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[o.jsx("span",{className:"text-white font-bold text-lg",children:""}),o.jsx("button",{onClick:()=>s(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:o.jsx(sd,{className:"w-5 h-5 text-white"})})]}),o.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[o.jsx(Oe,{to:"/restaurants",label:"",icon:o.jsx(Np,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="customer"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/cart",label:"",icon:o.jsx(Nb,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/orders",label:"",icon:o.jsx(Xh,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/profile",label:"",icon:o.jsx(Cl,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="owner"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/owner",label:" ",icon:o.jsx(Bv,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/owner/orders",label:" ",icon:o.jsx(Xh,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/owner/courier-requests",label:"",icon:o.jsx(nd,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="courier"&&o.jsxs(o.Fragment,{children:[o.jsx(Oe,{to:"/courier",label:" ",icon:o.jsx(nd,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Oe,{to:"/courier/hiring",label:"",icon:o.jsx(Xh,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="admin"&&o.jsx(Oe,{to:"/admin",label:" ",icon:o.jsx(bb,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="developer"&&o.jsx(Oe,{to:"/developer",label:" ",icon:o.jsx(xb,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx("div",{className:"h-px bg-white/20 my-2"}),t?o.jsx("button",{onClick:()=>{n(),s(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"  "}):o.jsx(Oe,{to:"/login",label:" ",icon:o.jsx(Bv,{className:"w-5 h-5"}),onClick:()=>s(!1)})]})]})]})},Ib=j.createContext(null),As=()=>{const t=j.useContext(Ib);if(!t)throw new Error("useDialog must be used within DialogProvider");return t},KD=({children:t})=>{const[e,n]=j.useState({isOpen:!1,message:"",type:"confirm"}),r=j.useCallback(u=>new Promise(d=>{n({...u,isOpen:!0,resolve:d})}),[]),s=j.useCallback(u=>{e.resolve&&e.resolve(u),n(d=>({...d,isOpen:!1}))},[e.resolve]),i=j.useCallback(async()=>{e.onConfirm&&await e.onConfirm(),s(!0)},[e.onConfirm,s]),a=j.useCallback(()=>{e.onCancel&&e.onCancel(),s(!1)},[e.onCancel,s]),c=j.useMemo(()=>({confirm:(u,d={})=>r({message:u,type:"confirm",title:d.title||"",confirmText:d.confirmText||"",cancelText:d.cancelText||"",...d}),alert:(u,d={})=>r({message:u,type:"alert",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),success:(u,d={})=>r({message:u,type:"success",title:d.title||" ",confirmText:d.confirmText||"",...d}).then(()=>{}),error:(u,d={})=>r({message:u,type:"error",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),warning:(u,d={})=>r({message:u,type:"warning",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),info:(u,d={})=>r({message:u,type:"info",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{})}),[r]);return o.jsxs(Ib.Provider,{value:c,children:[t,o.jsx(GD,{...e,onConfirm:i,onCancel:a})]})},GD=({isOpen:t,title:e,message:n,type:r="confirm",confirmText:s="",cancelText:i="",dangerous:a,onConfirm:c,onCancel:u})=>{if(!t)return null;const f={confirm:{icon:o.jsx($v,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:a?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:o.jsx(Hv,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:o.jsx(yb,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:o.jsx(vb,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:o.jsx(Hv,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:o.jsx($v,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[r],p=r==="confirm";return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:u}),o.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:g=>g.stopPropagation(),children:[o.jsxs("div",{className:"relative p-6 pb-0",children:[o.jsx("button",{onClick:u,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:o.jsx(sd,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:`w-16 h-16 rounded-full ${f.iconBg} ${f.iconColor} flex items-center justify-center`,children:f.icon})}),o.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:e})]}),o.jsx("div",{className:"p-6 pt-3",children:o.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),o.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${p?"flex-row-reverse":"justify-center"}`,children:[o.jsx("button",{onClick:c,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${f.buttonColor}`,children:s}),p&&o.jsx("button",{onClick:u,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:i})]})]})}),o.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},QD=()=>{const{user:t}=Tt(),e=Dr(),n=As(),r=async()=>{if(!(!t||!await n.confirm("     .     .",{title:"  ",dangerous:!0,confirmText:"  ",cancelText:""})))try{await ss(Z(W,"users",t.uid)),await QS(Un.currentUser),n.success("   "),e("/account-deleted")}catch(i){console.error("Error deleting account:",i),n.error("    .   .")}};return o.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),o.jsx("span",{className:"text-xl sm:text-2xl font-black",children:" "})]}),o.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["  ",o.jsx(tD,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"}),"    ",new Date().getFullYear()]}),o.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[o.jsxs(Te,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(bb,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),o.jsxs(Te,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(xb,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),t&&o.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(Ro,{className:"w-3 h-3 sm:w-4 sm:h-4"})," "]})]}),o.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),o.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"     "})]})})},XD=()=>o.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:o.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[o.jsx(td,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),o.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"            ! "}),o.jsx(td,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),YD=()=>{const{user:t}=Tt();return o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 text-center px-4 sm:px-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-64 sm:w-96 h-64 sm:h-96 bg-gradient-to-br from-sky-400/20 to-sky-300/10 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-gradient-to-tl from-sky-500/20 to-sky-400/10 rounded-full blur-3xl animate-pulse delay-1000"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] sm:w-[600px] h-[300px] sm:h-[600px] bg-gradient-radial from-sky-200/30 to-transparent rounded-full blur-3xl"}),o.jsx("div",{className:"hidden sm:block absolute top-20 left-20 text-sky-300 float",children:o.jsx(td,{className:"w-8 h-8"})}),o.jsx("div",{className:"hidden sm:block absolute top-40 right-32 text-sky-400 float delay-500",children:o.jsx(Yh,{className:"w-6 h-6 fill-current"})}),o.jsx("div",{className:"hidden sm:block absolute bottom-32 left-32 text-sky-300 float delay-1000",children:o.jsx(Yh,{className:"w-5 h-5 fill-current"})}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center max-w-3xl w-full",children:[o.jsxs("div",{className:"mb-6 sm:mb-8 relative",children:[o.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 bg-gradient-to-br from-sky-500 to-sky-600 rounded-[2rem] sm:rounded-[2.5rem] flex items-center justify-center shadow-2xl shadow-sky-300/50 glow",children:o.jsx("span",{className:"text-5xl sm:text-7xl drop-shadow-lg",children:""})}),o.jsx("div",{className:"absolute -top-1 -right-1 sm:-top-2 sm:-right-2 w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(td,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})})]}),o.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 mb-4 sm:mb-6 drop-shadow-sm",children:" "}),o.jsxs("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl text-sky-700/80 max-w-2xl mb-6 sm:mb-10 leading-relaxed font-medium px-2",children:["      ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"text-sky-500",children:"        "})," "]}),o.jsxs("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-4 mb-6 sm:mb-10 px-2",children:[o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[o.jsx(gb,{className:"w-4 h-4 sm:w-5 sm:h-5 text-sky-500"}),o.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:"  "})]}),o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[o.jsx(nd,{className:"w-4 h-4 sm:w-5 sm:h-5 text-sky-500"}),o.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:" "})]}),o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[o.jsx(Yh,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 fill-yellow-500"}),o.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:" "})]})]}),o.jsxs("div",{className:"relative mb-8 sm:mb-12",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-sky-400/30 to-sky-500/30 rounded-[1.5rem] sm:rounded-[2rem] blur-2xl scale-110"}),o.jsx("img",{src:"/landing.png",alt:"  ",className:"relative w-56 sm:w-72 md:w-80 lg:w-96 rounded-[1.5rem] sm:rounded-[2rem] shadow-2xl shadow-sky-200/50 border-2 sm:border-4 border-white object-cover hover:scale-105 transition-transform duration-500"})]}),t?o.jsxs(Te,{to:"/restaurants",className:"group flex items-center gap-2 sm:gap-3 px-8 sm:px-10 py-4 sm:py-5 rounded-full text-lg sm:text-xl font-bold text-white bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 shadow-2xl shadow-sky-300/50 hover:shadow-sky-400/60 hover:scale-105 transition-all duration-300",children:["  ",o.jsx(Ep,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform"})]}):o.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-5 w-full px-4",children:[o.jsxs(Te,{to:"/customer-login",className:"group flex items-center justify-center gap-2 sm:gap-3 w-full max-w-xs px-8 sm:px-12 py-4 sm:py-5 rounded-full text-lg sm:text-xl font-bold text-white bg-gradient-to-r from-green-500 via-green-400 to-green-500 shadow-2xl shadow-green-300/50 hover:shadow-green-400/60 hover:scale-105 transition-all duration-300",children:["   ",o.jsx(Ep,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform"})]}),o.jsx(Te,{to:"/login",className:"text-sky-600 font-semibold hover:text-sky-700 hover:underline transition text-sm sm:text-base",children:"       "}),o.jsxs("p",{className:"text-sky-600/80 text-base sm:text-lg",children:[" "," ",o.jsx(Te,{to:"/customer-login",className:"text-green-600 font-bold hover:text-green-700 hover:underline transition",children:"   "})]})]})]})]})},JD=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0);return j.useEffect(()=>{(async()=>{const s=await Ke(he(W,"restaurants"));e(s.docs.map(i=>({id:i.id,...i.data()}))),r(!1)})()},[]),n?o.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."}):o.jsxs("div",{className:"py-10",children:[o.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:"  "}),t.length===0&&o.jsx("div",{className:"text-center text-gray-400",children:"    "}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>o.jsxs(Te,{to:`/menu?restaurant=${s.id}`,className:"bg-gray-800 text-white rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center",children:[s.logoUrl?o.jsx("img",{src:s.logoUrl,alt:s.name,className:"w-28 h-28 object-cover rounded-full border-4 border-gray-700 mb-4"}):o.jsx("div",{className:"w-28 h-28 flex items-center justify-center bg-gray-600 rounded-full text-3xl mb-4",children:""}),o.jsx("h3",{className:"font-bold text-xl",children:s.name}),s.city&&o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.city})]},s.id))})]})},Wv="broast_cart";function kg(){const[t,e]=j.useState(()=>{try{const c=localStorage.getItem(Wv);return c?JSON.parse(c):[]}catch{return[]}});j.useEffect(()=>{localStorage.setItem(Wv,JSON.stringify(t))},[t]);const n=(c,u=1)=>{e(d=>{const f=d.findIndex(p=>p.id===c.id);if(f>=0){const p=[...d];return p[f]={...p[f],qty:p[f].qty+u,ownerId:c.ownerId??p[f].ownerId},p}return[...d,{...c,qty:u}]})},r=c=>e(u=>u.filter(d=>d.id!==c)),s=(c,u)=>e(d=>d.map(f=>f.id===c?{...f,qty:u}:f)),i=()=>e([]),a=t.reduce((c,u)=>c+u.price*u.qty,0);return{items:t,add:n,remove:r,changeQty:s,clear:i,subtotal:a}}const kb=j.createContext(null),vi=()=>{const t=j.useContext(kb);if(!t)throw new Error("useToast must be used within ToastProvider");return t},ZD=({children:t})=>{const[e,n]=j.useState([]),r=j.useCallback(a=>{n(c=>c.filter(u=>u.id!==a))},[]),s=j.useCallback((a,c,u)=>{const d=Math.random().toString(36).slice(2),f={id:d,message:a,type:c,title:u==null?void 0:u.title,duration:(u==null?void 0:u.duration)??3e3};n(p=>[...p,f]),f.duration&&f.duration>0&&setTimeout(()=>r(d),f.duration)},[r]),i=j.useMemo(()=>({show:(a,c)=>s(a,(c==null?void 0:c.type)??"info",c),success:(a,c)=>s(a,"success",c),error:(a,c)=>s(a,"error",c),info:(a,c)=>s(a,"info",c),warning:(a,c)=>s(a,"warning",c)}),[s]);return o.jsxs(kb.Provider,{value:i,children:[t,o.jsx(nO,{items:e,onClose:r})]})},eO={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},tO={success:"",error:"",info:"",warning:""},nO=({items:t,onClose:e})=>(j.useEffect(()=>{},[]),o.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[o.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:t.map(n=>o.jsx("div",{className:`pointer-events-auto ${eO[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"text-xl leading-none",children:tO[n.type]}),o.jsxs("div",{className:"flex-1",children:[n.title&&o.jsx("div",{className:"font-bold",children:n.title}),o.jsx("div",{className:"text-sm",children:n.message})]}),o.jsx("button",{onClick:()=>e(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:""})]})},n.id))}),o.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),rO=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),{add:a,subtotal:c,items:u}=kg(),{user:d,role:f}=Tt(),p=vi(),[g]=p2(),w=g.get("restaurant");j.useEffect(()=>{(async()=>{let k;if(w){k=Bt(he(W,"menuItems"),fn("available","==",!0),fn("ownerId","==",w));const T=await Dt(Z(W,"restaurants",w));T.exists()&&i(T.data().name)}else k=Bt(he(W,"menuItems"),fn("available","==",!0));const x=(await Ke(k)).docs.map(T=>({id:T.id,...T.data()})),v=await Promise.all(x.map(async T=>{if(!T.ownerId)return T;const O=await Dt(Z(W,"restaurants",T.ownerId));return O.exists()?{...T,restaurant:O.data()}:T}));e(v),r(!1)})()},[w]);const A=k=>{var x;if(!k.ownerId){p.warning("    ",{title:""});return}const E=(x=u[0])==null?void 0:x.ownerId;if(E&&E!==k.ownerId){p.warning("           ",{title:""});return}a({id:k.id,name:k.name,price:k.price,ownerId:k.ownerId}),p.success("    ")};if(n)return o.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."});const R=d&&(f==="customer"||f==="admin"||f==="developer"||!f);return o.jsxs("div",{className:"py-10",children:[o.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:s?`  ${s}`:"  "}),w&&o.jsx("div",{className:"text-center mb-6",children:o.jsx(Te,{to:"/restaurants",className:"text-sky-400 hover:text-sky-300 underline",children:"   "})}),t.length===0&&o.jsx("div",{className:"text-center text-gray-400",children:"    "}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(k=>o.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[k.restaurant&&o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[k.restaurant.logoUrl?o.jsx("img",{src:k.restaurant.logoUrl,alt:k.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):o.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:""}),o.jsx("span",{className:"font-semibold",children:k.restaurant.name})]}),o.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:k.imageUrl?o.jsx("img",{src:k.imageUrl,alt:k.name,className:"w-full h-full object-cover rounded-xl"}):o.jsx("span",{className:"text-gray-400",children:" "})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:k.name}),k.desc&&o.jsx("p",{className:"text-sm text-gray-300 mt-1",children:k.desc})]}),o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[k.price.toFixed(2)," ."]}),R&&o.jsx("button",{onClick:()=>A(k),disabled:!k.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${k.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"  "})]})]},k.id))}),c>0&&R&&o.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-40",children:o.jsxs(Te,{to:"/checkout",className:"block w-full sm:w-auto text-center px-6 py-4 rounded-2xl bg-sky-600 text-white shadow-xl font-bold hover:bg-sky-700 transition text-base sm:text-lg",children:["    ",c.toFixed(2)," ."]})})]})},sO=()=>{const{items:t,subtotal:e,remove:n,clear:r,changeQty:s}=kg();return t.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[o.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:o.jsx(qv,{className:"w-12 h-12 text-gray-400"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-2",children:" "}),o.jsx("p",{className:"text-gray-500 mb-6",children:"   !"}),o.jsxs(Te,{to:"/restaurants",className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-sky-600 transition",children:[o.jsx(Ep,{className:"w-5 h-5"})," "]})]}):o.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[o.jsx(qv,{className:"w-6 h-6 text-primary"})," ",o.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:t.length})]})}),o.jsx("div",{className:"space-y-3",children:t.map(i=>o.jsxs("div",{className:"flex items-center gap-3 bg-white text-gray-900 p-3 sm:p-4 rounded-xl shadow-sm border border-gray-100",children:[o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:i.name}),o.jsxs("p",{className:"text-primary font-bold text-sm",children:[i.price.toFixed(2)," ."]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("button",{onClick:()=>i.qty>1?s(i.id,i.qty-1):n(i.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:o.jsx(pD,{className:"w-4 h-4"})}),o.jsx("span",{className:"font-bold text-lg w-8 text-center",children:i.qty}),o.jsx("button",{onClick:()=>s(i.id,i.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:o.jsx(Ig,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(i.price*i.qty).toFixed(2)," ."]}),o.jsx("button",{onClick:()=>n(i.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:o.jsx(Ro,{className:"w-4 h-4"})})]})]},i.id))}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-gray-600",children:[o.jsx("span",{children:" "}),o.jsxs("span",{className:"font-bold",children:[e.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between text-gray-600",children:[o.jsx("span",{children:" "}),o.jsx("span",{className:"font-bold",children:"7.00 ."})]}),o.jsx("div",{className:"h-px bg-gray-200"}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-bold text-lg",children:""}),o.jsxs("span",{className:"font-bold text-xl text-primary",children:[(e+7).toFixed(2)," ."]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[o.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:[o.jsx(Ro,{className:"w-5 h-5"})," "]}),o.jsx(Te,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition",children:"  "})]})]})},iO=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(!1),a=Dr(),c=As(),u=async d=>{d.preventDefault(),i(!0);try{const p=(await qS(Un,t,n)).user.uid,g=await Dt(Z(W,"users",p));if(g.exists()){const w=g.data();console.log("  :",w),w.role==="owner"?a("/owner"):w.role==="admin"?a("/admin"):w.role==="developer"?a("/developer"):w.role==="courier"?a("/courier"):a("/")}else c.warning("   Auth       Firestore")}catch(f){c.error(f.message,{title:"   "})}finally{i(!1)}};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:o.jsx("span",{className:"text-4xl",children:"  "})}),o.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),o.jsx("p",{className:"text-sky-500 mt-1",children:" "})]}),o.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Eb,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"email",placeholder:"",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:t,onChange:d=>e(d.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(_b,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"password",placeholder:" ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:d=>r(d.target.value)})]}),o.jsx("button",{disabled:s,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50`,children:s?o.jsx(o.Fragment,{children:" ..."}):o.jsxs(o.Fragment,{children:[o.jsx(wb,{className:"w-5 h-5"}),""]})})]}),o.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["  "," ",o.jsx(Te,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"  "})]}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[o.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"    "}),o.jsx(Te,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"   "})]})]})]})},oO=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(""),[a,c]=j.useState(""),[u,d]=j.useState(""),[f,p]=j.useState(!1),g=Dr(),w=async R=>{if(R.preventDefault(),!u)return alert("  ");if(u==="owner"&&!a)return alert("  ");p(!0);try{const k=await au(Un,t,n);await wn(Z(W,"users",k.user.uid),{name:s,email:t,role:u,restaurantName:u==="owner"?a:null}),u==="owner"&&await wn(Z(W,"restaurants",k.user.uid),{name:a||s||" ",ownerId:k.user.uid,email:t,phone:"",city:"",location:"",logoUrl:""},{merge:!0}),g("/")}catch(k){alert(k.message)}finally{p(!1)}},A=[{value:"customer",label:"",icon:BD,color:"sky"},{value:"courier",label:"",icon:nd,color:"emerald"},{value:"owner",label:" ",icon:gb,color:"orange"}];return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:o.jsx(rd,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"  "})]}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Cl,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",value:s,onChange:R=>i(R.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Eb,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",type:"email",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(_b,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:" ",type:"password",value:n,onChange:R=>r(R.target.value)})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:A.map(R=>{const k=R.icon,E=u===R.value;return o.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${E?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[o.jsx("input",{type:"radio",name:"role",value:R.value,className:"hidden",onChange:()=>d(R.value)}),o.jsx(k,{className:"w-6 h-6"}),o.jsx("span",{className:"text-sm font-bold",children:R.label})]},R.value)})}),u==="owner"&&o.jsxs("div",{className:"relative",children:[o.jsx(Np,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:" ",value:a,onChange:R=>c(R.target.value)})]}),o.jsx("button",{disabled:f,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02]",children:f?" ...":o.jsxs(o.Fragment,{children:[o.jsx(rd,{className:"w-5 h-5"}),""]})})]}),o.jsxs("p",{className:"mt-6 text-center text-sky-600",children:[" "," ",o.jsx(Te,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"  "})]})]})]})},Kv=t=>{let e=t.replace(/\D/g,"");return e.startsWith("0")&&(e=e.substring(1)),e.startsWith("966")||(e="966"+e),"+"+e},aO=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState("phone"),[a,c]=j.useState(!1),[u,d]=j.useState(null),[f,p]=j.useState(0),g=j.useRef(null),w=j.useRef(null),A=Dr(),R=As();j.useEffect(()=>(g.current&&!w.current&&(w.current=new M0(Un,g.current,{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired"),w.current=null}})),()=>{w.current&&(w.current.clear(),w.current=null)}),[]),j.useEffect(()=>{if(f>0){const v=setTimeout(()=>p(f-1),1e3);return()=>clearTimeout(v)}},[f]);const k=async()=>{if(!t||t.length<9){R.warning("   ");return}const v=Kv(t);console.log("Sending OTP to:",v),c(!0);try{!w.current&&g.current&&(w.current=new M0(Un,g.current,{size:"invisible"}));const T=await bj(Un,v,w.current);d(T),i("otp"),p(60),R.success("     ")}catch(T){console.error("OTP Error:",T),w.current&&(w.current.clear(),w.current=null),T.code==="auth/invalid-phone-number"?R.error("   "):T.code==="auth/too-many-requests"?R.error("   "):T.code==="auth/quota-exceeded"?R.error("     "):R.error(T.message||"  ")}finally{c(!1)}},E=async()=>{if(!n||n.length!==6){R.warning("     6 ");return}if(!u){R.error("    "),i("phone");return}c(!0);try{const v=await u.confirm(n),T=v.user.uid,O=v.user.phoneNumber,V=await Dt(Z(W,"users",T));V.exists()?R.success(" ! "):(await wn(Z(W,"users",T),{phone:O,role:"customer",name:"",createdAt:ve()}),R.success("   ! "));const b=V.exists()?V.data():{role:"customer"};b.role==="owner"?A("/owner"):b.role==="admin"?A("/admin"):b.role==="developer"?A("/developer"):b.role==="courier"?A("/courier"):A("/")}catch(v){console.error("Verify Error:",v),v.code==="auth/invalid-verification-code"?R.error("   "):v.code==="auth/code-expired"?(R.error("    "),i("phone")):R.error(v.message||" ")}finally{c(!1)}},x=()=>{f>0||(i("phone"),r(""),d(null))};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsx("div",{ref:g,id:"recaptcha-container"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:o.jsx("span",{className:"text-4xl",children:""})}),o.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),o.jsx("p",{className:"text-sky-500 mt-1",children:s==="phone"?" ":"  "})]}),s==="phone"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(vD,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:t,onChange:v=>e(v.target.value.replace(/\D/g,"")),maxLength:10})]}),o.jsx("p",{className:"text-sm text-gray-500 text-center",children:"     SMS"}),o.jsx("button",{onClick:k,disabled:a||t.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:a?o.jsxs(o.Fragment,{children:[o.jsx(qs,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(mb,{className:"w-5 h-5"}),"  "]})})]}),s==="otp"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("p",{className:"text-gray-600",children:"   "}),o.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:Kv(t)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(aD,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:v=>r(v.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),o.jsx("button",{onClick:E,disabled:a||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:a?o.jsxs(o.Fragment,{children:[o.jsx(qs,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(wb,{className:"w-5 h-5"})," "]})}),o.jsx("div",{className:"text-center",children:f>0?o.jsxs("p",{className:"text-gray-500 text-sm",children:["   ",o.jsx("span",{className:"font-bold text-sky-600",children:f})," "]}):o.jsx("button",{onClick:x,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"    "})}),o.jsx("button",{onClick:()=>{i("phone"),r("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"   "})]}),o.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[o.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"   "}),o.jsx(Te,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"   "})]})]})]})};function lO(){return o.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:o.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"  -   "}),o.jsxs("p",{className:"mb-4",children:["   ",o.jsx("strong",{children:" "}),"          ."]}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1.  "}),o.jsx("p",{className:"mb-4",children:"                   .            ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2.  "}),o.jsx("p",{className:"mb-4",children:"               ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3.  "}),o.jsx("p",{className:"mb-4",children:"              .                 ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4.  "}),o.jsx("p",{className:"mb-4",children:"       (    )         ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5.  "}),o.jsxs("p",{className:"mb-4",children:["              .         :",o.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6.   "}),o.jsx("p",{className:"mb-4",children:"                  ."}),o.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["      ",new Date().toLocaleDateString("ar-SA"),"."]}),o.jsx("div",{className:"mt-8 text-center",children:o.jsx(Te,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"   "})})]})})}function cO(){return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"   "}),o.jsx("p",{className:"text-gray-600 mb-6",children:"          ."}),o.jsx(Te,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"   "})]})}const uO="modulepreload",dO=function(t){return"/"+t},Gv={},Qv=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=dO(u),u in Gv)return;Gv[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":uO,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,w)=>{p.addEventListener("load",g),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},He=({allow:t,children:e})=>{const{role:n,loading:r}=Tt();return r?o.jsx("div",{className:"p-8 text-center",children:" ..."}):!n||!t.includes(n)?o.jsx(bm,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:e})},Xv=1,Wc=.75,hO=()=>{const{items:t,subtotal:e,clear:n}=kg(),{user:r}=Tt(),s=Dr(),i=As(),a=vi(),[c,u]=j.useState(""),[d,f]=j.useState(!1),[p,g]=j.useState(null),[w,A]=j.useState(null),R=7,k=e+R;j.useEffect(()=>{(async()=>{var b,y;if(t.length===0)return;let T=(b=t[0])==null?void 0:b.ownerId;if(!T&&((y=t[0])!=null&&y.id))try{const I=await Dt(Z(W,"menuItems",t[0].id)),S=I.exists()?I.data():null;T=(S==null?void 0:S.ownerId)||null}catch(I){console.error("    :",I)}if(!T){g(null);return}const O=await Dt(Z(W,"restaurants",T)),V=O.exists()?O.data():null;g({id:T,name:(V==null?void 0:V.name)||"",referredBy:V==null?void 0:V.referredBy,referrerType:V==null?void 0:V.referrerType})})()},[t]);const E=()=>{if(!navigator.geolocation){i.warning("    ");return}navigator.geolocation.getCurrentPosition(v=>{console.log("  :",v.coords),A({lat:v.coords.latitude,lng:v.coords.longitude}),a.success("    ")},v=>{console.error("   :",v),i.error("  .      .")},{enableHighAccuracy:!0})},x=async()=>{var I;if(!r)return;if(t.length===0){i.warning(" ");return}if(!c){i.warning(" ");return}if(!w){i.warning("   ");return}let v=p==null?void 0:p.id;if(!v&&((I=t[0])!=null&&I.id)){const S=await Dt(Z(W,"menuItems",t[0].id)),P=S.exists()?S.data():null;v=(P==null?void 0:P.ownerId)||null}if(!v){i.error("   .    .");return}f(!0);const T=(p==null?void 0:p.referrerType)==="admin"&&(p==null?void 0:p.referredBy),O=t.reduce((S,P)=>S+P.qty,0),V=Xv*O,b=T?Wc*O:0,y=V+(T?0:Wc*O);if(await zo(he(W,"orders"),{customerId:r.uid,restaurantId:v,restaurantName:(p==null?void 0:p.name)||"",items:t.map(S=>({id:S.id,name:S.name,price:S.price,qty:S.qty,ownerId:S.ownerId??v})),subtotal:e,deliveryFee:R,total:k,status:"pending",address:c,location:w,createdAt:ve(),updatedAt:ve(),paymentMethod:"cod",platformFee:V,platformFeePerItem:Xv,adminCommission:b,adminCommissionPerItem:Wc,totalItemsCount:O,referredBy:(p==null?void 0:p.referredBy)||null}),T&&(p!=null&&p.referredBy)&&b>0)try{const S=Z(W,"wallets",p.referredBy);if((await Dt(S)).exists())await ot(S,{balance:La(b),totalEarnings:La(b),updatedAt:ve()});else{const{setDoc:D}=await Qv(async()=>{const{setDoc:C}=await Promise.resolve().then(()=>Pv);return{setDoc:C}},void 0);await D(S,{balance:b,totalEarnings:b,totalWithdrawn:0,transactions:[],updatedAt:ve()})}console.log(`   ${b}    ${p.referredBy} (${O}   ${Wc} .)`)}catch(S){console.error("    :",S)}try{const S=Z(W,"wallets","app_earnings");if((await Dt(S)).exists())await ot(S,{balance:La(y),totalEarnings:La(y),updatedAt:ve()});else{const{setDoc:D}=await Qv(async()=>{const{setDoc:C}=await Promise.resolve().then(()=>Pv);return{setDoc:C}},void 0);await D(S,{balance:y,totalEarnings:y,totalWithdrawn:0,transactions:[],updatedAt:ve()})}console.log(`   ${y}   `)}catch(S){console.error("    :",S)}n(),f(!1),s("/orders")};return o.jsx(He,{allow:["customer","admin"],children:o.jsxs("div",{className:"max-w-xl mx-auto bg-white rounded-2xl shadow p-6 text-gray-900",children:[o.jsx("h1",{className:"text-xl font-bold mb-4",children:" "}),o.jsx("div",{className:"border rounded-xl p-3 text-gray-800",children:t.map(v=>o.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[o.jsxs("span",{className:"text-sm",children:[v.name,"  ",v.qty]}),o.jsxs("span",{className:"font-semibold",children:[(v.price*v.qty).toFixed(2)," ."]})]},v.id))}),o.jsx("input",{className:"w-full border rounded-xl p-3 text-gray-900 placeholder-gray-500 mt-3",placeholder:" ",value:c,onChange:v=>u(v.target.value)}),o.jsx("button",{onClick:E,className:"w-full mt-3 rounded-xl p-3 bg-blue-600 text-white font-semibold hover:bg-blue-700",children:"   "}),w&&o.jsx("iframe",{title:" ",width:"100%",height:"250",style:{borderRadius:"12px",marginTop:"10px"},loading:"lazy",allowFullScreen:!0,src:`https://maps.google.com/maps?hl=ar&q=${w.lat},${w.lng}&z=15&output=embed`}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-gray-800 mt-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:""}),o.jsxs("span",{children:[e.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:" "}),o.jsxs("span",{children:[R.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex items-center justify-between font-bold text-lg mt-1 text-gray-900",children:[o.jsx("span",{children:""}),o.jsxs("span",{children:[k.toFixed(2)," ."]})]})]}),o.jsx("button",{disabled:d,onClick:x,className:"w-full rounded-xl p-3 bg-green-600 hover:bg-green-700 text-white font-bold mt-3",children:d?"...":"  (  )"})]})})},fO=()=>{const{user:t}=Tt(),[e,n]=j.useState(null),[r,s]=j.useState([]),[i,a]=j.useState(null);j.useEffect(()=>{if(!t)return;n(null),a(null);const u=Bt(he(W,"orders"),fn("customerId","==",t.uid),Es("createdAt","desc")),d=Al(u,f=>{s(f.docs.map(p=>({id:p.id,...p.data()}))),n(null)},async f=>{console.error("TrackOrders onSnapshot error:",f),n("   Composite Index  customerId + createdAt.     .");const p=Bt(he(W,"orders"),fn("customerId","==",t.uid)),w=(await Ke(p)).docs.map(k=>({id:k.id,...k.data()})),A=Bt(he(W,"orders"),Es("createdAt","desc"),gg(5));let R=[];try{R=(await Ke(A)).docs.map(E=>{var v,T,O,V;const x=E.data();return{id:E.id,customerId:x.customerId,restaurantId:x.restaurantId,createdAt:((V=(O=(T=(v=x.createdAt)==null?void 0:v.toDate)==null?void 0:T.call(v))==null?void 0:O.toISOString)==null?void 0:V.call(O))??null}})}catch{}a({uid:t.uid,fallbackCount:w.length,sample:R}),s(w)});return()=>d()},[t]);const c=u=>({pending:" ",accepted:" ",preparing:" ",ready:" ",out_for_delivery:" ",delivered:" ",cancelled:""})[u]||u;return o.jsxs("div",{className:"space-y-3",children:[o.jsx("h1",{className:"text-xl font-bold",children:""}),e&&o.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[e,i&&o.jsxs("div",{className:"mt-1",children:[o.jsxs("div",{children:["UID: ",o.jsx("b",{children:i.uid})]}),o.jsxs("div",{children:["  : ",o.jsx("b",{children:i.fallbackCount})]}),Array.isArray(i.sample)&&i.sample.length>0&&o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"font-semibold",children:" ( 5):"}),i.sample.map(u=>o.jsxs("div",{className:"truncate",children:["#",u.id,"  customerId: ",String(u.customerId),"  restaurantId: ",String(u.restaurantId),"  createdAt: ",u.createdAt||""]},u.id))]})]})]}),r.map(u=>{var d,f,p;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"font-bold",children:[" #",u.id.slice(-6)]}),o.jsx("div",{className:"text-sm px-3 py-1 rounded-full bg-gray-900 text-white",children:c(u.status)})]}),u.restaurantName&&o.jsxs("div",{className:"mt-1 text-yellow-600 font-semibold",children:[": ",String(u.restaurantName)]}),o.jsx("div",{className:"mt-2 text-sm text-gray-700",children:(d=u.items)==null?void 0:d.map(g=>`${g.name}${g.qty}`).join("  ")}),o.jsxs("div",{className:"mt-2 font-bold",children:[": ",(p=(f=u.total)==null?void 0:f.toFixed)==null?void 0:p.call(f,2)," ."]})]},u.id)}),r.length===0&&!e&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})},pO=()=>{const t=[{to:"/owner/menu",title:" ",desc:"     .",icon:o.jsx(zD,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:" ",desc:"     .",icon:o.jsx(bp,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"  ",desc:"     .",icon:o.jsx(ID,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>o.jsxs(Te,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,o.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),o.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},mO=({kind:t,message:e,onClose:n})=>{const r=t==="success"?"bg-green-600":t==="error"?"bg-rose-600":t==="warning"?"bg-amber-500":"bg-slate-800";return j.useEffect(()=>{const s=setTimeout(n,2500);return()=>clearTimeout(s)},[n]),o.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${r}`,children:e})},Yv=()=>({name:"",desc:"",price:0,available:!0,file:null});async function gO(t,e=900,n=.8){try{const r=await createImageBitmap(t),s=Math.min(1,e/r.width),i=Math.round(r.width*s),a=Math.round(r.height*s),c=document.createElement("canvas");c.width=i,c.height=a,c.getContext("2d").drawImage(r,0,0,i,a);const d=t.type.includes("png")?"image/png":"image/jpeg";return await new Promise(p=>c.toBlob(g=>p(g),d,n))}catch{return t}}const yO=()=>{const{user:t}=Tt(),e=As(),[n,r]=j.useState([]),[s,i]=j.useState(!0),[a,c]=j.useState(Yv()),[u,d]=j.useState(!1),[f,p]=j.useState(null),g=(v,T)=>p({kind:v,message:T}),w=Jd(an),A=j.useRef(null),R=async()=>{if(!t)return;i(!0);const v=Bt(he(W,"menuItems"),fn("ownerId","==",t.uid)),T=await Ke(v);r(T.docs.map(O=>({id:O.id,...O.data()}))),i(!1)};j.useEffect(()=>{R()},[t]);const k=async v=>{if(v.preventDefault(),!t){g("warning","    ");return}const T=Number(a.price||0);if(!a.name.trim()){g("warning","   ");return}if(!Number.isFinite(T)||T<=0){g("warning","   ");return}d(!0);const O="temp_"+Date.now(),V=a.file?URL.createObjectURL(a.file):void 0,b={_tempId:O,_optimistic:!0,_progress:a.file?1:100,name:a.name,desc:a.desc||"",price:T,imageUrl:V,available:a.available??!0,ownerId:t.uid};r(y=>[b,...y]);try{let y;if(a.file){const P=await gO(a.file),D=a.file.name.replace(/\s+/g,"_").slice(-60),C=`menuImages/${t.uid}_${Date.now()}_${D}`,De=Yd(w,C),ct=hb(De,P,{contentType:a.file.type||"image/jpeg"});await new Promise((qt,ut)=>{ct.on("state_changed",q=>{const J=Math.round(q.bytesTransferred/q.totalBytes*100);r(te=>te.map(xe=>xe._tempId===O?{...xe,_progress:J}:xe))},ut,async()=>{const q=await Xd(ct.snapshot.ref);y=`${q}${q.includes("?")?"&":"?"}v=${Date.now()}`,qt()})})}const I={name:b.name,desc:b.desc,price:T,imageUrl:y||"",available:b.available,ownerId:t.uid,...b.categoryId?{categoryId:b.categoryId}:{}},S=await zo(he(W,"menuItems"),I);r(P=>P.map(D=>D._tempId===O?{...D,id:S.id,imageUrl:y||D.imageUrl,_optimistic:!1,_progress:100}:D)),g("success","    ")}catch(y){r(I=>I.filter(S=>S._tempId!==O)),g("error",`   : ${(y==null?void 0:y.message)||y}`)}finally{d(!1),c(Yv()),A.current&&(A.current.value=""),V&&URL.revokeObjectURL(V)}},E=async(v,T)=>{if(v){r(O=>O.map(V=>V.id===v?{...V,available:!T}:V));try{await ot(Z(W,"menuItems",v),{available:!T}),g("success","  ")}catch{r(O=>O.map(V=>V.id===v?{...V,available:!!T}:V)),g("error","  .  .")}}},x=async v=>{if(!v||!await e.confirm("       ",{dangerous:!0,title:" "}))return;const O=n;r(V=>V.filter(b=>b.id!==v));try{await ss(Z(W,"menuItems",v)),g("success"," ")}catch{r(O),g("error","  .  .")}};return s?o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[o.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),o.jsx("div",{className:"space-y-3",children:[1,2,3].map(v=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},v))})]}):o.jsxs(o.Fragment,{children:[f&&o.jsx(mO,{kind:f.kind,message:f.message,onClose:()=>p(null)}),o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("form",{onSubmit:k,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[o.jsx("h2",{className:"text-lg font-bold",children:" "}),o.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:a.name,onChange:v=>c({...a,name:v.target.value})}),o.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:a.desc,onChange:v=>c({...a,desc:v.target.value})}),o.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(a.price)?a.price:0,onChange:v=>c({...a,price:Number(v.target.value)})}),o.jsx("input",{ref:A,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:v=>{var T;return c({...a,file:((T=v.target.files)==null?void 0:T[0])||null})}}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:a.available,onChange:v=>c({...a,available:v.target.checked})}),""]}),o.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:u,children:u?" ":""})]}),o.jsxs("div",{className:"space-y-3",children:[n.map(v=>{var T,O;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:v.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:V=>{V.currentTarget.style.display="none"}}),v._optimistic&&o.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:o.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:o.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${v._progress||1}%`}})})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold",children:v.name}),v.desc&&o.jsx("div",{className:"text-sm text-gray-600",children:v.desc}),o.jsxs("div",{className:"font-semibold mt-1",children:[(O=(T=v.price)==null?void 0:T.toFixed)==null?void 0:O.call(T,2)," ."]}),v._optimistic&&o.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" "})]}),o.jsx("button",{onClick:()=>E(v.id,v.available),disabled:!!v._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:v.available?"":""}),o.jsx("button",{onClick:()=>x(v.id),disabled:!!v._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:""})]},v.id||v._tempId)}),n.length===0&&o.jsx("div",{className:"text-gray-600",children:"   ."})]})]})]})},Jv=t=>({pending:"  ",accepted:"  ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "})[t]||t,vO=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},xO=()=>{const{user:t}=Tt(),[e,n]=j.useState([]),[r,s]=j.useState(null),i=j.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);j.useEffect(()=>{if(!i)return;s(null);const c=Al(he(W,"orders"),u=>{const f=u.docs.map(p=>({id:p.id,...p.data()})).filter(p=>{var A,R;const g=p.restaurantId===i,w=((R=(A=p==null?void 0:p.items)==null?void 0:A[0])==null?void 0:R.ownerId)===i;return g||w});f.sort((p,g)=>{var R,k,E,x;const w=((k=(R=p.createdAt)==null?void 0:R.toMillis)==null?void 0:k.call(R))??0;return(((x=(E=g.createdAt)==null?void 0:E.toMillis)==null?void 0:x.call(E))??0)-w}),n(f),s(null)},u=>{console.error("Firestore error:",u),s("    .")});return()=>c()},[i]);const a=async(c,u)=>{await ot(Z(W,"orders",c),{status:u,updatedAt:ve()})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"  "}),r&&o.jsx("div",{className:"text-red-500 text-sm mb-2",children:r}),e.map(c=>{var u,d,f;return o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[o.jsxs("div",{className:"font-bold text-lg",children:[" #",c.id.slice(-6),o.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(u=c.items)==null?void 0:u.map(p=>`${p.name}${p.qty}`).join("  ")})]}),o.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(f=(d=c.total)==null?void 0:d.toFixed)==null?void 0:f.call(d,2)," ."]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-semibold",children:":"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${vO(c.status)}`,children:Jv(c.status||"pending")})]}),o.jsxs("div",{className:"text-sm text-gray-700",children:[o.jsx("span",{className:"font-semibold",children:":"})," ",c.address]}),c.location&&o.jsxs("div",{className:"mt-3",children:[o.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"  :"}),o.jsx("iframe",{title:`map-${c.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${c.location.lat},${c.location.lng}&hl=ar&z=15&output=embed`})]}),o.jsx("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(p=>o.jsx("button",{onClick:()=>a(c.id,p),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gray-100 hover:bg-gray-200 transition",children:Jv(p)},p))})]},c.id)}),e.length===0&&!r&&o.jsx("div",{className:"text-gray-400 text-center text-lg",children:"    ."})]})},_O=()=>{const{user:t}=Tt(),e=vi(),[n,r]=j.useState({name:"",phone:"",city:"",location:"",logoUrl:""}),[s,i]=j.useState(null),[a,c]=j.useState(""),[u,d]=j.useState(!0),[f,p]=j.useState(!1),g=j.useMemo(()=>!f&&!!t,[f,t]);j.useEffect(()=>{t&&(async()=>{try{const E=await Dt(Z(W,"restaurants",t.uid));if(E.exists()){const x=E.data();r({name:x.name??"",phone:x.phone??"",city:x.city??"",location:x.location??"",logoUrl:x.logoUrl??""})}}catch{e.error("   ")}finally{d(!1)}})()},[t,e]),j.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]);const w=E=>{const{name:x,value:v}=E.target;r(T=>({...T,[x]:v}))},A=E=>{var v;const x=((v=E.target.files)==null?void 0:v[0])||null;if(i(x),x){const T=URL.createObjectURL(x);c(T)}else c("")},R=async()=>{if(!t||!s)return;if(!/^image\//.test(s.type)){e.warning("   ");return}const x=3*1024*1024;if(s.size>x){e.warning("        3MB");return}const v=s.name.replace(/\s+/g,"_"),T=`restaurants/${t.uid}/logo_${Date.now()}_${v}`,O=Yd(k4,T),V={contentType:s.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await db(O,s,V);const b=await Xd(O);return`${b}${b.includes("?")?"&":"?"}v=${Date.now()}`},k=async E=>{if(E.preventDefault(),!t){e.warning("    ");return}if(!n.name.trim()){e.warning("  ");return}p(!0);try{let x=n.logoUrl;if(s){e.info("    ");const v=await R();v&&(x=v)}await wn(Z(W,"restaurants",t.uid),{...n,logoUrl:x},{merge:!0}),a&&URL.revokeObjectURL(a),c(""),i(null),e.success("    ",{title:" "})}catch(x){e.error(` : ${(x==null?void 0:x.message)||"  "}`)}finally{p(!1)}};return u?o.jsx("div",{className:"p-6 text-center",children:" "}):o.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[o.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"  "}),o.jsxs("form",{onSubmit:k,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block font-semibold",children:" "}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:a||n.logoUrl?o.jsx("img",{src:a||n.logoUrl,className:"w-full h-full object-cover",onError:E=>E.currentTarget.style.display="none",alt:"logo"}):null}),o.jsx("input",{type:"file",accept:"image/*",onChange:A})]}),s&&o.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",o.jsx("span",{className:"font-semibold",children:s.name})]})]}),o.jsx("input",{name:"name",placeholder:" ",value:n.name,onChange:w,className:"w-full border p-3 rounded-xl"}),o.jsx("input",{name:"phone",placeholder:" ",value:n.phone,onChange:w,className:"w-full border p-3 rounded-xl"}),o.jsx("input",{name:"city",placeholder:"",value:n.city,onChange:w,className:"w-full border p-3 rounded-xl"}),o.jsx("input",{name:"location",placeholder:"",value:n.location,onChange:w,className:"w-full border p-3 rounded-xl"}),o.jsx("button",{type:"submit",disabled:!g,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:f?" ":""})]})]})},wO=()=>{const{user:t}=Tt(),[e,n]=j.useState([]),[r,s]=j.useState(!0);j.useEffect(()=>{t&&(async()=>{const a=Bt(he(W,"hiringRequests"),fn("restaurantId","==",t.uid)),c=await Ke(a);n(c.docs.map(u=>({id:u.id,...u.data()}))),s(!1)})()},[t]);const i=async(a,c)=>{await ot(Z(W,"hiringRequests",a),{status:c}),n(u=>u.map(d=>d.id===a?{...d,status:c}:d))};return r?o.jsx("div",{className:"text-center py-10",children:" ..."}):o.jsxs("div",{className:"py-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-yellow-400 text-center mb-6",children:" "}),e.length===0?o.jsx("div",{className:"text-gray-400 text-center",children:"  "}):o.jsx("div",{className:"space-y-3",children:e.map(a=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:a.courierName}),o.jsx("div",{className:"text-sm text-gray-600",children:a.status==="pending"?" ":a.status})]}),a.status==="pending"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>i(a.id,"accepted"),className:"px-3 py-1 rounded bg-green-500 text-white",children:""}),o.jsx("button",{onClick:()=>i(a.id,"rejected"),className:"px-3 py-1 rounded bg-red-500 text-white",children:""})]})]},a.id))})]})},EO=()=>{const{user:t}=Tt(),[e,n]=j.useState([]),[r,s]=j.useState([]);j.useEffect(()=>{const c=Bt(he(W,"orders"),fn("status","in",["ready"]),Es("createdAt","desc")),u=Al(c,p=>n(p.docs.map(g=>({id:g.id,...g.data()})))),d=Bt(he(W,"orders"),fn("courierId","==",(t==null?void 0:t.uid)||""),Es("createdAt","desc")),f=Al(d,p=>s(p.docs.map(g=>({id:g.id,...g.data()}))));return()=>{u(),f()}},[t==null?void 0:t.uid]);const i=async c=>{t&&await ot(Z(W,"orders",c),{courierId:t.uid,status:"out_for_delivery",updatedAt:ve()})},a=async c=>{await ot(Z(W,"orders",c),{status:"delivered",updatedAt:ve()})};return o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold mb-3",children:"  "}),o.jsxs("div",{className:"space-y-3",children:[e.map(c=>{var u,d;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"font-bold",children:["#",c.id.slice(-6),"  ",(d=(u=c.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ."]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[": ",c.address]}),o.jsx("button",{onClick:()=>i(c.id),className:"mt-2 px-3 py-2 rounded-xl bg-gray-900 text-white text-sm",children:" "})]},c.id)}),e.length===0&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold mb-3",children:""}),o.jsxs("div",{className:"space-y-3",children:[r.map(c=>{var u,d;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"font-bold",children:["#",c.id.slice(-6),"  ",(d=(u=c.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ."]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[": ",c.address]}),o.jsx("button",{onClick:()=>a(c.id),className:"mt-2 px-3 py-2 rounded-xl bg-green-600 text-white text-sm",children:" "})]},c.id)}),r.length===0&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})]})]})},bO=()=>{const{user:t}=Tt(),e=As(),[n,r]=j.useState([]),[s,i]=j.useState({}),[a,c]=j.useState(!0),[u,d]=j.useState(null);j.useEffect(()=>{if(!t)return;(async()=>{const w=(await Ke(he(W,"restaurants"))).docs.map(E=>({id:E.id,...E.data()}));r(w);const A=Bt(he(W,"hiringRequests"),fn("courierId","==",t.uid)),R=await Ke(A),k={};R.docs.forEach(E=>{const x=E.data();k[x.restaurantId]={restaurantId:x.restaurantId,status:x.status}}),i(k),c(!1)})()},[t]);const f=async p=>{if(!t){e.warning("  ");return}d(p.id),await zo(he(W,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"",restaurantId:p.id,restaurantName:p.name,status:"pending",createdAt:ve()}),i(g=>({...g,[p.id]:{restaurantId:p.id,status:"pending"}})),d(null)};return a?o.jsx("div",{className:"text-center py-10 text-gray-300",children:"  ..."}):o.jsxs("div",{className:"py-8",children:[o.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[o.jsx(V4,{className:"w-7 h-7 text-yellow-400"})," "]}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(p=>{const g=s[p.id];return o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[p.logoUrl?o.jsx("img",{src:p.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):o.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:""}),o.jsx("h3",{className:"font-bold text-lg mb-2",children:p.name}),g?o.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${g.status==="pending"?"bg-gray-500 text-white":g.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[g.status==="pending"&&o.jsx(J4,{className:"w-4 h-4"}),g.status==="accepted"&&o.jsx(G4,{className:"w-4 h-4"}),g.status==="rejected"&&o.jsx(vb,{className:"w-4 h-4"}),g.status==="pending"?" ":g.status==="accepted"?"  ":" "]}):o.jsx("button",{disabled:u===p.id,onClick:()=>f(p),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:u===p.id?"  ...":"  "})]},p.id)})})]})},NO=()=>{var x,v;const{user:t,role:e}=Tt(),n=vi(),[r,s]=j.useState("dashboard"),[i,a]=j.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[c,u]=j.useState(0),[d,f]=j.useState(!0),[p,g]=j.useState(null),[w,A]=j.useState([]),[R,k]=j.useState("all");j.useEffect(()=>{t&&(async()=>{try{const O=(await Ke(he(W,"restaurants"))).size,b=(await Ke(he(W,"orders"))).docs.map(P=>({id:P.id,...P.data()})),y=b.length,I=b.filter(P=>P.status==="pending").length,S=b.reduce((P,D)=>P+(D.deliveryFee||0),0);try{const D=(await Dt(Z(W,"wallets",t.uid))).data();u((D==null?void 0:D.balance)||0)}catch{u(0)}try{const P=Bt(he(W,"tasks"),fn("assignedTo","==",t.uid)),C=(await Ke(P)).docs.map(De=>({id:De.id,...De.data()}));A(C.sort((De,ct)=>{var qt,ut;return(((qt=ct.createdAt)==null?void 0:qt.seconds)||0)-(((ut=De.createdAt)==null?void 0:ut.seconds)||0)}))}catch(P){console.error("   :",P)}a({totalRestaurants:O,totalOrders:y,totalEarnings:S,pendingOrders:I})}catch(T){console.error("   :",T)}finally{f(!1)}})()},[t]);const E=async(T,O)=>{try{const V={status:O,updatedAt:ve()};O==="completed"&&(V.completedAt=ve()),await ot(Z(W,"tasks",T),V),A(b=>b.map(y=>y.id===T?{...y,status:O}:y)),n.success(O==="in_progress"?"  ":O==="completed"?"   ! ":"  ")}catch{n.error("   ")}};return j.useEffect(()=>{t&&(async()=>{try{const T=await Dt(Z(W,"users",t.uid));T.exists()&&g({uid:T.id,...T.data()})}catch(T){console.error("    :",T)}})()},[t]),d?o.jsx(He,{allow:["admin"],children:o.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:" ..."})}):o.jsx(He,{allow:["admin"],children:o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"  "}),o.jsx("p",{className:"text-gray-600 mt-2",children:"   ! "})]}),o.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[o.jsxs("button",{onClick:()=>s("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(Qh,{className:"w-5 h-5"})," "]}),o.jsxs("button",{onClick:()=>s("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(Cl,{className:"w-5 h-5"}),""]}),o.jsxs("button",{onClick:()=>s("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${r==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(bp,{className:"w-5 h-5"}),"",w.filter(T=>T.status==="pending"||T.status==="in_progress").length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:w.filter(T=>T.status==="pending"||T.status==="in_progress").length})]})]}),r==="profile"&&o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[o.jsx(Cl,{className:"w-6 h-6"}),""]}),p?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((x=p.name)==null?void 0:x.charAt(0))||((v=p.email)==null?void 0:v.charAt(0))||""}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:p.name||" "}),o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:" "})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:p.email})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),o.jsx("p",{className:"font-semibold text-gray-900",children:e==="admin"?"":e})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:p.uid})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[c.toFixed(2)," ."]})]})]})]}),o.jsx(Te,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"   "})]}):o.jsx("div",{className:"text-center py-8 text-gray-600",children:" ..."})]}),r==="tasks"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[o.jsx(bp,{className:"w-6 h-6"})," "]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(T=>o.jsxs("button",{onClick:()=>k(T),className:`px-4 py-2 rounded-xl font-semibold transition ${R===T?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[T==="all"&&" ",T==="pending"&&"  ",T==="in_progress"&&"  ",T==="completed"&&" "]},T))}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:w.filter(T=>T.status==="pending").length}),o.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w.filter(T=>T.status==="in_progress").length}),o.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),o.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:w.filter(T=>T.status==="completed").length}),o.jsx("p",{className:"text-sm text-green-700",children:""})]})]}),w.filter(T=>R==="all"||T.status===R).length===0?o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx("p",{className:"text-5xl mb-4",children:""}),o.jsxs("p",{className:"text-lg",children:["   ",R!=="all"&&"  "]}),o.jsx("p",{className:"text-sm mt-2",children:"      "})]}):o.jsx("div",{className:"space-y-4",children:w.filter(T=>R==="all"||T.status===R).map(T=>{var O,V,b;return o.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${T.status==="completed"?"bg-green-50 border-green-200":T.status==="in_progress"?"bg-blue-50 border-blue-200":T.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${T.priority==="high"?"bg-red-100 text-red-700":T.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:T.priority==="high"?" ":T.priority==="medium"?" ":" "}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${T.status==="pending"?"bg-yellow-100 text-yellow-700":T.status==="in_progress"?"bg-blue-100 text-blue-700":T.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[T.status==="pending"&&"  ",T.status==="in_progress"&&"  ",T.status==="completed"&&" ",T.status==="cancelled"&&" "]})]}),o.jsx("h3",{className:"font-bold text-lg text-gray-800",children:T.title}),T.description&&o.jsx("p",{className:"text-gray-600 mt-1",children:T.description}),o.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[T.dueDate&&o.jsxs("span",{className:new Date(T.dueDate)<new Date&&T.status!=="completed"?"text-red-600 font-semibold":"",children:[" ",new Date(T.dueDate).toLocaleDateString("ar-SA"),new Date(T.dueDate)<new Date&&T.status!=="completed"&&" (!)"]}),o.jsxs("span",{children:[" ",((b=(V=(O=T.createdAt)==null?void 0:O.toDate)==null?void 0:V.call(O))==null?void 0:b.toLocaleDateString("ar-SA"))||" "]})]}),T.notes&&o.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:[" ",T.notes]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[T.status==="pending"&&o.jsx("button",{onClick:()=>E(T.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:" "}),T.status==="in_progress"&&o.jsxs("button",{onClick:()=>E(T.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(yb,{className:"w-4 h-4"}),""]}),T.status==="completed"&&o.jsx("span",{className:"text-green-600 font-semibold text-center",children:"  "})]})]})},T.id)})})]})}),r==="dashboard"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-90",children:" "}),o.jsxs("h2",{className:"text-3xl font-bold",children:[c.toFixed(2)," ."]}),o.jsx("p",{className:"text-sm opacity-75 mt-2",children:"   50       "})]}),o.jsx(Tb,{className:"w-16 h-16 opacity-80"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:i.totalRestaurants})]}),o.jsx(U4,{className:"w-12 h-12 text-primary opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:i.totalOrders})]}),o.jsx(Nb,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:i.pendingOrders})]}),o.jsx(Qh,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:i.totalEarnings.toFixed(2)})]}),o.jsx(Qh,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"   "}),o.jsx(Te,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"     "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),o.jsx(Te,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:""}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"       "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),o.jsx(Te,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:" "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:[" : ",c.toFixed(2)," ."]}),o.jsx(Te,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]})]}),o.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 p-6 rounded-lg",children:[o.jsx("h4",{className:"font-bold text-sky-900 mb-2",children:"  :"}),o.jsxs("ul",{className:"text-sky-800 text-sm space-y-1",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:"50 "}),"         "]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"1 "}),"     (     )"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"1.5 "}),"       "]}),o.jsx("li",{children:"        "})]})]})]})]})})},TO=()=>{const{user:t,role:e}=Tt(),n=vi(),r=As(),[s,i]=j.useState([]),[a,c]=j.useState(!0),[u,d]=j.useState(!1),[f,p]=j.useState(!1),[g,w]=j.useState(0),A=j.useRef(null),R=Jd(an),[k,E]=j.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});j.useEffect(()=>{x()},[]);const x=async()=>{try{const V=(await Ke(he(W,"restaurants"))).docs.map(b=>({id:b.id,...b.data()}));i(V)}catch(O){n.error("   "),console.error(O)}finally{c(!1)}},v=async O=>{if(O.preventDefault(),!k.name.trim()){n.warning("  ");return}try{p(!0);let V="";if(k.logoFile){const I=k.logoFile.name.replace(/\s+/g,"_").slice(-60),S=`uploads/restaurant_${Date.now()}_${I}`,P=Yd(R,S),D=hb(P,k.logoFile,{contentType:k.logoFile.type||"image/jpeg"});await new Promise((C,De)=>{D.on("state_changed",ct=>{const qt=Math.round(ct.bytesTransferred/ct.totalBytes*100);w(qt)},De,async()=>{V=await Xd(D.snapshot.ref),C()})})}const b=e==="admin",y=e==="developer";await zo(he(W,"restaurants"),{name:k.name,phone:k.phone,city:k.city,location:k.location,ownerId:"admin_"+Date.now(),email:(t==null?void 0:t.email)||"",logoUrl:V,createdAt:new Date,referredBy:b?t==null?void 0:t.uid:null,referrerType:b?"admin":y?"developer":null}),n.success("    "),b&&n.info("   75        "),E({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),d(!1),w(0),x()}catch(V){n.error("   "),console.error(V)}finally{p(!1)}},T=async O=>{if(await r.confirm("      ",{dangerous:!0,title:" "}))try{await ss(Z(W,"restaurants",O)),n.success("   "),x()}catch(b){n.error("   "),console.error(b)}};return a?o.jsx(He,{allow:["admin","developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):o.jsx(He,{allow:["admin","developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),o.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[o.jsx(Ig,{className:"w-5 h-5"}),"  "]})]}),u&&o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block font-semibold text-gray-700",children:" "}),o.jsxs("div",{className:"flex items-center gap-4",children:[k.logoPreview?o.jsx("img",{src:k.logoPreview,alt:" ",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):o.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:o.jsx(sD,{className:"w-8 h-8 text-gray-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{ref:A,type:"file",accept:"image/*",className:"hidden",onChange:O=>{var b;const V=(b=O.target.files)==null?void 0:b[0];V&&E({...k,logoFile:V,logoPreview:URL.createObjectURL(V)})}}),o.jsxs("button",{type:"button",onClick:()=>{var O;return(O=A.current)==null?void 0:O.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[o.jsx(VD,{className:"w-4 h-4"}),k.logoFile?" ":" "]}),k.logoFile&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:k.logoFile.name})]})]}),f&&g>0&&o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${g}%`}})})]}),o.jsx("input",{type:"text",placeholder:" ",value:k.name,onChange:O=>E({...k,name:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("input",{type:"text",placeholder:" ",value:k.phone,onChange:O=>E({...k,phone:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("input",{type:"text",placeholder:"",value:k.city,onChange:O=>E({...k,city:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("textarea",{placeholder:" / ",value:k.location,onChange:O=>E({...k,location:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:f?` ... ${g}%`:" "}),o.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:" "})]})]})]}),o.jsx("div",{className:"grid gap-4",children:s.length===0?o.jsx("div",{className:"text-center text-gray-500 py-12",children:"    "}):s.map(O=>o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex gap-4",children:[O.logoUrl?o.jsx("img",{src:O.logoUrl,alt:O.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):o.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold text-primary",children:O.name}),O.city&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.city]}),O.phone&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.phone]}),O.location&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.location]})]})]}),o.jsx("button",{onClick:()=>T(O.id),className:"p-3 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:" ",children:o.jsx(Ro,{className:"w-5 h-5"})})]})},O.id))})]})})},Jh={pending:"  ",accepted:" ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "},IO=()=>{const t=vi(),[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,a]=j.useState("all");j.useEffect(()=>{c()},[i]);const c=async()=>{try{let u;i==="all"?u=Bt(he(W,"orders"),Es("createdAt","desc")):u=Bt(he(W,"orders"),fn("status","==",i),Es("createdAt","desc"));const f=(await Ke(u)).docs.map(p=>({id:p.id,...p.data()}));n(f)}catch(u){t.error("   "),console.error(u)}finally{s(!1)}};return r?o.jsx(He,{allow:["admin","developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):o.jsx(He,{allow:["admin","developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[o.jsxs("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${i==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[" (",e.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(u=>{const d=e.filter(f=>f.status===u).length;return o.jsxs("button",{onClick:()=>a(u),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${i===u?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[Jh[u]," (",d,")"]},u)})]}),o.jsx("div",{className:"space-y-4",children:e.length===0?o.jsxs("div",{className:"text-center text-gray-500 py-12",children:["   ",i!=="all"&&` "${Jh[i]}"`]}):e.map(u=>{var d,f;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold",children:[" #",u.id.slice(-8)]}),o.jsx("p",{className:"text-gray-600 text-sm",children:u.createdAt?new Date(u.createdAt).toLocaleDateString("ar-SA"):""})]}),o.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${u.status==="pending"?"bg-yellow-500":u.status==="delivered"?"bg-green-600":u.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:Jh[u.status]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" ID"}),o.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[u.customerId.slice(0,12),"..."]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsx("p",{className:"font-semibold text-gray-800",children:u.restaurantName||""})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsx("p",{className:"text-sm text-gray-800",children:u.address})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsxs("p",{className:"text-lg font-bold text-primary",children:[((d=u.total)==null?void 0:d.toFixed(2))||0," ."]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[o.jsx("p",{className:"font-semibold mb-2",children:":"}),o.jsx("div",{className:"space-y-1",children:(f=u.items)==null?void 0:f.map((p,g)=>o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsxs("span",{children:[p.name,"  ",p.qty]}),o.jsxs("span",{children:[(p.price*p.qty).toFixed(2)," ."]})]},g))})]})]},u.id)})})]})})},vn={projectId:an.options.projectId,authDomain:an.options.authDomain,storageBucket:an.options.storageBucket,messagingSenderId:an.options.messagingSenderId,appId:an.options.appId},kO=()=>{var la,ca,Pi,Di;const{user:t}=Tt(),e=vi(),n=As(),r=Jd(an),[s,i]=j.useState("overview"),[a,c]=j.useState(!0),[u,d]=j.useState(!1),[f,p]=j.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[g,w]=j.useState({}),[A,R]=j.useState([]),[k,E]=j.useState([]),[x,v]=j.useState([]),[T,O]=j.useState([]),[V,b]=j.useState(!1),[y,I]=j.useState({}),[S,P]=j.useState(null),[D,C]=j.useState({}),[De,ct]=j.useState(!1),[qt,ut]=j.useState(null),[q,J]=j.useState({}),[te,xe]=j.useState("all"),[ge,Ve]=j.useState("all"),[Zt,Sn]=j.useState(null),[en,tn]=j.useState(!1),[Lr,nc]=j.useState(""),[Vr,Cs]=j.useState(""),[ar,xi]=j.useState(""),[_i,wi]=j.useState(""),[Ho,rc]=j.useState(!1),[Wo,Ko]=j.useState(!1),[zn,Go]=j.useState(""),[Qo,Ei]=j.useState(""),[lr,Xo]=j.useState(""),[Ye,dt]=j.useState(""),[Ps,Yo]=j.useState(!1),[bi,sc]=j.useState(!1),[yn,Jo]=j.useState(""),[Ni,Ti]=j.useState(""),[ic,oc]=j.useState(""),[Ii,Zo]=j.useState(""),[qn,Mr]=j.useState(""),[Ur,ki]=j.useState(""),[Hn,ea]=j.useState(!1),[jn,ac]=j.useState([]),[Ds,Si]=j.useState(!1),[it,ji]=j.useState(""),[Fr,cr]=j.useState(""),[Ri,ta]=j.useState(""),[ur,na]=j.useState("medium"),[lc,Br]=j.useState(""),[ra,Ai]=j.useState(!1),[Rn,Wn]=j.useState("all");t!=null&&t.email;const cc=async()=>{if(!Lr.trim()||!ar.trim()){e.warning("    ");return}if(ar.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${Lr}
 ${Vr||" "}

:         .`,{title:"  "})){rc(!0);try{const $=(await au(Un,Lr.trim(),ar)).user.uid;await wn(Z(W,"users",$),{email:Lr.trim(),name:Vr.trim()||" ",phone:_i.trim()||"",role:"admin",createdAt:ve()}),await wn(Z(W,"wallets",$),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:ve()}),e.success("     "),e.info("        "),nc(""),Cs(""),xi(""),wi(""),tn(!1)}catch(B){console.error("   :",B),B.code==="auth/email-already-in-use"?e.error("   "):B.code==="auth/invalid-email"?e.error("   "):B.code==="auth/weak-password"?e.error("   "):e.error("  : "+(B.message||"  "))}finally{rc(!1)}}},uc=async()=>{if(!zn.trim()||!lr.trim()){e.warning("    ");return}if(lr.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${zn}
 ${Qo||" "}
 ${Ye||" "}`,{title:"  "})){Yo(!0);try{const $=(await au(Un,zn.trim(),lr)).user.uid;await wn(Z(W,"users",$),{email:zn.trim(),name:Qo.trim()||" ",phone:Ye.trim()||"",role:"courier",createdAt:ve()}),e.success("     "),e.info("        "),Go(""),Ei(""),Xo(""),dt(""),Ko(!1)}catch(B){console.error("   :",B),B.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(B.message||"  "))}finally{Yo(!1)}}},sa=async()=>{if(!yn.trim()){e.warning("  ");return}if(!qn.trim()||!Ur.trim()){e.warning("   ");return}if(await n.confirm(`   :

 ${yn}
 ${Ni||" "}
  : ${qn}`,{title:"  "})){ea(!0);try{const $=(await au(Un,qn.trim(),Ur)).user.uid;await wn(Z(W,"users",$),{email:qn.trim(),name:yn.trim()+" - ",role:"owner",createdAt:ve()}),await wn(Z(W,"restaurants",$),{name:yn.trim(),ownerId:$,email:Ii.trim()||qn.trim(),phone:ic.trim()||"",city:Ni.trim()||"",referredBy:t==null?void 0:t.uid,referrerType:"developer",createdAt:ve()}),e.success("      "),e.info("        "),Jo(""),Ti(""),oc(""),Zo(""),Mr(""),ki(""),sc(!1)}catch(B){console.error("   :",B),B.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(B.message||"  "))}finally{ea(!1)}}},ia=()=>{const N=new Date,B=new Date(N.getFullYear(),N.getMonth(),N.getDate()),$=new Date(B.getTime()-7*24*60*60*1e3),ne=new Date(B.getTime()-30*24*60*60*1e3),ye=x.filter(oe=>{var Me,nn;return(((nn=(Me=oe.createdAt)==null?void 0:Me.toDate)==null?void 0:nn.call(Me))||new Date(0))>=B&&oe.status!=="cancelled"}),Se=x.filter(oe=>{var Me,nn;return(((nn=(Me=oe.createdAt)==null?void 0:Me.toDate)==null?void 0:nn.call(Me))||new Date(0))>=$&&oe.status!=="cancelled"}),Ze=x.filter(oe=>{var Me,nn;return(((nn=(Me=oe.createdAt)==null?void 0:Me.toDate)==null?void 0:nn.call(Me))||new Date(0))>=ne&&oe.status!=="cancelled"}),ht=x.filter(oe=>oe.status==="delivered");return{todayRevenue:ye.reduce((oe,be)=>oe+(be.total||0),0),todayOrders:ye.length,todayPlatformFee:ye.reduce((oe,be)=>oe+(be.platformFee||0),0),weekRevenue:Se.reduce((oe,be)=>oe+(be.total||0),0),weekOrders:Se.length,weekPlatformFee:Se.reduce((oe,be)=>oe+(be.platformFee||0),0),monthRevenue:Ze.reduce((oe,be)=>oe+(be.total||0),0),monthOrders:Ze.length,monthPlatformFee:Ze.reduce((oe,be)=>oe+(be.platformFee||0),0),totalRevenue:ht.reduce((oe,be)=>oe+(be.total||0),0),totalPlatformFee:ht.reduce((oe,be)=>oe+(be.platformFee||0),0),totalAdminCommission:ht.reduce((oe,be)=>oe+(be.adminCommission||0),0)}},Je=async()=>{try{const[N,B,$,ne,ye]=await Promise.all([Ke(he(W,"users")),Ke(he(W,"restaurants")),Ke(he(W,"menuItems")),Ke(he(W,"orders")),Ke(he(W,"wallets"))]);let Se={docs:[]};try{Se=await Ke(he(W,"tasks"))}catch{console.log("   ")}const Ze=N.docs.map(ae=>({uid:ae.id,...ae.data()}));R(Ze);const ht=B.docs.map(ae=>({id:ae.id,...ae.data()}));E(ht);const oe=ne.docs.map(ae=>({id:ae.id,...ae.data()}));v(oe);const be=Se.docs.map(ae=>({id:ae.id,...ae.data()}));ac(be.sort((ae,Li)=>{var Ms,Vi;return(((Ms=Li.createdAt)==null?void 0:Ms.seconds)||0)-(((Vi=ae.createdAt)==null?void 0:Vi.seconds)||0)}));const Me={};ye.docs.forEach(ae=>{Me[ae.id]=ae.data()});const nn=Me.app_earnings||{balance:0,totalEarnings:0},Ee=Ze.filter(ae=>ae.role==="admin"),Oi=Ze.filter(ae=>ae.role==="courier"),Ls=Ze.filter(ae=>ae.role==="customer"),Vs=Ze.filter(ae=>ae.role==="owner"),th=Ee.map(ae=>{const Li=ht.filter(Vi=>Vi.referredBy===ae.uid),Ms=Me[ae.uid]||{balance:0,totalEarnings:0};return{uid:ae.uid,email:ae.email,name:ae.name,walletBalance:Ms.balance||0,totalEarnings:Ms.totalEarnings||0,restaurantsCount:Li.length,restaurants:Li}});O(th),p({users:Ze.length,restaurants:ht.length,menuItems:$.size,orders:oe.length,pendingOrders:oe.filter(ae=>ae.status==="pending").length,deliveredOrders:oe.filter(ae=>ae.status==="delivered").length,admins:Ee.length,couriers:Oi.length,customers:Ls.length,owners:Vs.length,totalAppEarnings:nn.totalEarnings||0});const ua=await Dt(Z(W,"settings","general"));if(ua.exists()){const ae=ua.data();w(ae),I(ae)}else{const ae={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};w(ae),I(ae)}}catch(N){console.error("   :",N),e.error("  ")}finally{c(!1),d(!1)}};j.useEffect(()=>{Je()},[]);const dc=()=>{d(!0),Je(),e.info("  ...")},Zd=async()=>{try{await wn(Z(W,"settings","general"),y,{merge:!0}),w(y),b(!1),e.success("    ")}catch(N){console.error("   :",N),e.error("  ")}},Ci=async N=>{try{await ot(Z(W,"restaurants",N),{...D,updatedAt:ve()}),P(null),e.success("    "),Je()}catch(B){console.error("   :",B),e.error("  ")}},hc=async(N,B)=>{try{ct(!0);const $=`restaurants/${N}/logo_${Date.now()}_${B.name}`,ne=Yd(r,$);await db(ne,B);const ye=await Xd(ne);await ot(Z(W,"restaurants",N),{logoUrl:ye,updatedAt:ve()}),e.success("    "),Je()}catch($){console.error("   :",$),e.error("  ")}finally{ct(!1)}},oa=async N=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await ss(Z(W,"restaurants",N)),e.success("   "),Je()}catch($){console.error("   :",$),e.error("  ")}},Os=async N=>{try{await ot(Z(W,"users",N),{...q,updatedAt:ve()}),ut(null),e.success("    "),Je()}catch(B){console.error("   :",B),e.error("  ")}},dr=async N=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await ss(Z(W,"users",N)),e.success("     "),e.warning(":      Firebase Auth"),Je()}catch($){console.error("   :",$),e.error("  ")}},aa=async(N,B)=>{try{await ot(Z(W,"orders",N),{status:B,updatedAt:ve()}),e.success("    "),Je()}catch($){console.error("   :",$),e.error("  ")}},eh=N=>{switch(N){case"customer":return" ";case"owner":return"  ";case"courier":return" ";case"admin":return" ";case"developer":return" ";default:return N}},fc=N=>{switch(N){case"pending":return"  ";case"accepted":return" ";case"preparing":return"  ";case"ready":return" ";case"out_for_delivery":return"  ";case"delivered":return"  ";case"cancelled":return" ";default:return N}};return a?o.jsx(He,{allow:["developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsxs("div",{className:"text-center",children:[o.jsx(qs,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-lg text-gray-600",children:"   ..."})]})})}):o.jsx(He,{allow:["developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-extrabold text-primary",children:"   "}),o.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),o.jsxs("button",{onClick:dc,disabled:u,className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition disabled:opacity-50",children:[o.jsx(qs,{className:`w-5 h-5 ${u?"animate-spin":""}`}),""]})]}),o.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[{id:"overview",label:"  "},{id:"finance",label:" "},{id:"restaurants",label:" "},{id:"orders",label:" "},{id:"users",label:" "},{id:"couriers",label:" "},{id:"admins",label:" "},{id:"tasks",label:" "},{id:"settings",label:" "},{id:"tools",label:" "}].map(N=>o.jsx("button",{onClick:()=>i(N.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition ${s===N.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N.label},N.id))}),s==="overview"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.users}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.restaurants}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.orders}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.admins}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.couriers}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.totalAppEarnings.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(ND,{className:"w-6 h-6 text-orange-500"}),o.jsx("h2",{className:"text-xl font-bold",children:" Firebase"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),o.jsx("p",{className:"font-mono text-sm",children:vn.projectId})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),o.jsx("p",{className:"font-mono text-sm",children:vn.storageBucket})]})]}),o.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[o.jsx("a",{href:`https://console.firebase.google.com/project/${vn.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:" Console"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${vn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:" Firestore"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${vn.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:" Auth"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${vn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:" Storage"})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.customers}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.owners}),o.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),o.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:f.couriers}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:f.admins}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]})]})]}),s==="finance"&&o.jsx("div",{className:"space-y-6",children:(()=>{const N=ia();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:N.totalRevenue.toFixed(0)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:N.totalPlatformFee.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:N.totalAdminCommission.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:(N.totalPlatformFee+N.totalAdminCommission).toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:" "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:N.todayOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[N.todayRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[N.todayPlatformFee.toFixed(2)," ."]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"  7 "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:N.weekOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[N.weekRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[N.weekPlatformFee.toFixed(2)," ."]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"  30 "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:N.monthOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[N.monthRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[N.monthPlatformFee.toFixed(2)," ."]})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"   "}),o.jsx("div",{className:"space-y-3",children:k.map(B=>({...B,ordersCount:x.filter($=>$.restaurantId===B.id&&$.status==="delivered").length,revenue:x.filter($=>$.restaurantId===B.id&&$.status==="delivered").reduce(($,ne)=>$+(ne.total||0),0)})).sort((B,$)=>$.revenue-B.revenue).slice(0,5).map((B,$)=>o.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:$===0?"":$===1?"":$===2?"":`#${$+1}`}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:B.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[B.ordersCount," "]})]})]}),o.jsxs("p",{className:"font-bold text-green-600",children:[B.revenue.toFixed(2)," ."]})]},B.id))})]})]})})()}),s==="restaurants"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",k.length,")"]}),o.jsx("button",{onClick:()=>sc(!bi),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold",children:bi?" ":"  "})]}),bi&&o.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[o.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"   "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"text",placeholder:":  ",value:yn,onChange:N=>Jo(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:": ",value:Ni,onChange:N=>Ti(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:ic,onChange:N=>oc(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:Ii,onChange:N=>Zo(N.target.value),className:"w-full border rounded-xl p-3"})]})]}),o.jsxs("div",{className:"border-t mt-4 pt-4",children:[o.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"    ( )"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   *"}),o.jsx("input",{type:"email",placeholder:"owner@example.com",value:qn,onChange:N=>Mr(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"6   ",value:Ur,onChange:N=>ki(N.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),o.jsx("button",{onClick:sa,disabled:Hn||!yn.trim()||!qn.trim()||!Ur.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Hn?o.jsxs(o.Fragment,{children:[o.jsx(qs,{className:"w-5 h-5 animate-spin"})," ..."]}):"  "})]}),o.jsx("div",{className:"space-y-4",children:k.map(N=>{var B;return o.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:S===N.id?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"text",value:D.name||"",onChange:$=>C({...D,name:$.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"text",value:D.phone||"",onChange:$=>C({...D,phone:$.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"email",value:D.email||"",onChange:$=>C({...D,email:$.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:""}),o.jsx("input",{type:"text",value:D.city||"",onChange:$=>C({...D,city:$.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm text-gray-600",children:""}),o.jsx("input",{type:"text",value:D.location||"",onChange:$=>C({...D,location:$.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm text-gray-600",children:"  ()"}),o.jsxs("select",{value:D.referredBy||"",onChange:$=>C({...D,referredBy:$.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[o.jsx("option",{value:"",children:"--   ( ) --"}),A.filter($=>$.role==="admin").map($=>o.jsxs("option",{value:$.uid,children:[" ",$.name||$.email]},$.uid))]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"file",accept:"image/*",onChange:$=>{var ye;const ne=(ye=$.target.files)==null?void 0:ye[0];ne&&hc(N.id,ne)},className:"w-full border rounded-xl p-2 mt-1",disabled:De}),De&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" ..."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>Ci(N.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[o.jsx(ED,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>P(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[o.jsx(sd,{className:"w-4 h-4"})," "]})]})]}):o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:N.logoUrl?o.jsx("img",{src:N.logoUrl,alt:N.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:N.name}),o.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[N.phone&&o.jsxs("p",{children:[" ",N.phone]}),N.email&&o.jsxs("p",{children:[" ",N.email]}),N.city&&o.jsxs("p",{children:[" ",N.city]}),N.referredBy&&o.jsxs("p",{className:"text-purple-600",children:["  : ",((B=T.find($=>$.uid===N.referredBy))==null?void 0:B.name)||N.referredBy.slice(0,8)]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{P(N.id),C(N)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"",children:o.jsx(zv,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>oa(N.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"",children:o.jsx(Ro,{className:"w-5 h-5"})})]}),o.jsxs("select",{value:N.referredBy||"",onChange:async $=>{const ne=$.target.value;try{await ot(Z(W,"restaurants",N.id),{referredBy:ne||null,updatedAt:ve()}),e.success(ne?"   ":"   "),Je()}catch{e.error("   ")}},className:"text-xs border rounded-lg p-1",title:" ",children:[o.jsx("option",{value:"",children:"  "}),A.filter($=>$.role==="admin").map($=>o.jsxs("option",{value:$.uid,children:[" ",$.name||$.email]},$.uid))]})]})]})},N.id)})})]}),s==="orders"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",x.length,")"]}),o.jsxs("select",{value:te,onChange:N=>xe(N.target.value),className:"border rounded-xl p-2",children:[o.jsx("option",{value:"all",children:" "}),o.jsx("option",{value:"pending",children:" "}),o.jsx("option",{value:"accepted",children:""}),o.jsx("option",{value:"preparing",children:" "}),o.jsx("option",{value:"ready",children:""}),o.jsx("option",{value:"out_for_delivery",children:" "}),o.jsx("option",{value:"delivered",children:" "}),o.jsx("option",{value:"cancelled",children:""})]})]}),o.jsx("div",{className:"space-y-3",children:x.filter(N=>te==="all"||N.status===te).sort((N,B)=>{var $,ne;return((($=B.createdAt)==null?void 0:$.seconds)||0)-(((ne=N.createdAt)==null?void 0:ne.seconds)||0)}).map(N=>{var B,$;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold",children:[" #",N.id.slice(-8)]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",N.restaurantName||""]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",N.address]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",(B=N.total)==null?void 0:B.toFixed(2)," ."]}),N.platformFee&&o.jsxs("p",{className:"text-xs text-green-600",children:[" : ",N.platformFee," .",N.adminCommission?` |  : ${N.adminCommission} .`:""]})]}),o.jsxs("div",{className:"text-left",children:[o.jsx("span",{className:`inline-block px-3 py-1 rounded-xl text-sm font-semibold ${N.status==="delivered"?"bg-green-100 text-green-700":N.status==="cancelled"?"bg-red-100 text-red-700":N.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:fc(N.status)}),o.jsxs("select",{value:N.status,onChange:ne=>aa(N.id,ne.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[o.jsx("option",{value:"pending",children:" "}),o.jsx("option",{value:"accepted",children:""}),o.jsx("option",{value:"preparing",children:" "}),o.jsx("option",{value:"ready",children:""}),o.jsx("option",{value:"out_for_delivery",children:" "}),o.jsx("option",{value:"delivered",children:" "}),o.jsx("option",{value:"cancelled",children:""})]})]})]}),o.jsxs("div",{className:"mt-3 pt-3 border-t",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:($=N.items)==null?void 0:$.map((ne,ye)=>o.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[ne.name,"  ",ne.qty]},ye))})]})]},N.id)})})]}),s==="users"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",A.length,")"]}),o.jsxs("select",{value:ge,onChange:N=>Ve(N.target.value),className:"border rounded-xl p-2",children:[o.jsx("option",{value:"all",children:" "}),o.jsx("option",{value:"customer",children:""}),o.jsx("option",{value:"owner",children:" "}),o.jsx("option",{value:"courier",children:""}),o.jsx("option",{value:"admin",children:""}),o.jsx("option",{value:"developer",children:""})]})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.filter(N=>ge==="all"||N.role===ge).map(N=>o.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:qt===N.uid?o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{type:"text",placeholder:"",value:q.name||"",onChange:B=>J({...q,name:B.target.value}),className:"w-full border rounded-xl p-2"}),o.jsx("input",{type:"text",placeholder:"",value:q.phone||"",onChange:B=>J({...q,phone:B.target.value}),className:"w-full border rounded-xl p-2"}),o.jsxs("select",{value:q.role||"customer",onChange:B=>J({...q,role:B.target.value}),className:"w-full border rounded-xl p-2",children:[o.jsx("option",{value:"customer",children:""}),o.jsx("option",{value:"owner",children:" "}),o.jsx("option",{value:"courier",children:""}),o.jsx("option",{value:"admin",children:""}),o.jsx("option",{value:"developer",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Os(N.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:""}),o.jsx("button",{onClick:()=>ut(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:""})]})]}):o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:N.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:N.email}),o.jsx("p",{className:"text-xs mt-1",children:eh(N.role)})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>{ut(N.uid),J(N)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:o.jsx(zv,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>dr(N.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:o.jsx(Ro,{className:"w-4 h-4"})})]})]})})},N.uid))})]}),s==="couriers"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["  (",f.couriers,")"]}),o.jsx("button",{onClick:()=>Ko(!Wo),className:"flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-xl font-semibold",children:Wo?" ":"  "})]}),Wo&&o.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[o.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"   "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"email",placeholder:"courier@example.com",value:zn,onChange:N=>Go(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"6   ",value:lr,onChange:N=>Xo(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:" ",value:Qo,onChange:N=>Ei(N.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Ye,onChange:N=>dt(N.target.value),className:"w-full border rounded-xl p-3"})]})]}),o.jsx("button",{onClick:uc,disabled:Ps||!zn.trim()||!lr.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Ps?o.jsxs(o.Fragment,{children:[o.jsx(qs,{className:"w-5 h-5 animate-spin"})," ..."]}):"   "})]}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[A.filter(N=>N.role==="courier").map(N=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:N.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:N.email}),N.phone&&o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",N.phone]})]})]}),o.jsx("div",{className:"mt-4 pt-3 border-t",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[o.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[o.jsx("p",{className:"text-lg font-bold text-green-600",children:x.filter(B=>B.courierId===N.uid&&B.status==="delivered").length}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[o.jsx("p",{className:"text-lg font-bold text-blue-600",children:x.filter(B=>B.courierId===N.uid&&B.status==="out_for_delivery").length}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]})]})})]},N.uid)),f.couriers===0&&o.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"   "})]})]}),s==="admins"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",T.length,")"]}),o.jsxs("button",{onClick:()=>tn(!en),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(rd,{className:"w-5 h-5"}),en?"":" "]})]}),en&&o.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"    "}),o.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"           "}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"  :"}),o.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[A.filter(N=>N.role==="customer").slice(0,10).map(N=>o.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:N.name||" "}),o.jsx("p",{className:"text-sm text-gray-500",children:N.email})]}),o.jsx("button",{onClick:async()=>{if(await n.confirm(`   ${N.name||N.email}  `,{title:"  "}))try{await ot(Z(W,"users",N.uid),{role:"admin"}),e.success("     "),tn(!1),Je()}catch{e.error("  ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:" "})]},N.uid)),A.filter(N=>N.role==="customer").length===0&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"    "})]})]}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"     :"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"email",placeholder:"admin@example.com",value:Lr,onChange:N=>nc(N.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"  (6   )",value:ar,onChange:N=>xi(N.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:" ",value:Vr,onChange:N=>Cs(N.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:_i,onChange:N=>wi(N.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),o.jsx("button",{onClick:cc,disabled:Ho||!Lr.trim()||!ar.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:Ho?o.jsxs(o.Fragment,{children:[o.jsx(qs,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(rd,{className:"w-5 h-5"}),"  "]})}),o.jsx("p",{className:"text-xs text-orange-600 mt-2",children:" :        .     ."})]}),o.jsx("div",{className:"border-t pt-4 mt-4",children:o.jsx("p",{className:"text-xs text-gray-500",children:'         ""'})})]}),o.jsxs("div",{className:"space-y-4",children:[T.map(N=>o.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[o.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>Sn(Zt===N.uid?null:N.uid),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:N.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:N.email})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Tb,{className:"w-4 h-4 text-green-600"}),o.jsxs("span",{className:"font-bold text-green-600",children:[N.walletBalance.toFixed(2)," ."]})]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[": ",N.totalEarnings.toFixed(2)," . | ",N.restaurantsCount," "]})]}),Zt===N.uid?o.jsx(H4,{className:"w-5 h-5 text-gray-400"}):o.jsx(z4,{className:"w-5 h-5 text-gray-400"})]})]})}),Zt===N.uid&&o.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[o.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["      (",N.restaurants.length,"):"]}),N.restaurants.length>0?o.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:N.restaurants.map(B=>o.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:B.logoUrl?o.jsx("img",{src:B.logoUrl,alt:B.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm",children:B.name}),o.jsx("p",{className:"text-xs text-gray-500",children:B.city||" "})]})]},B.id))}):o.jsx("p",{className:"text-gray-500 text-sm",children:"    "}),o.jsx("div",{className:"mt-4 pt-3 border-t",children:o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[o.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-green-700",children:N.walletBalance.toFixed(2)}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-blue-700",children:N.totalEarnings.toFixed(2)}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-purple-700",children:x.filter(B=>B.referredBy===N.uid).length}),o.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})})]})]},N.uid)),T.length===0&&o.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"   "})]})]}),s==="settings"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"  "}),V?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{b(!1),I(g)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:""}),o.jsx("button",{onClick:Zd,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:" "})]}):o.jsx("button",{onClick:()=>b(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:" "})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),V?o.jsx("input",{type:"number",value:y.deliveryFee||0,onChange:N=>I({...y,deliveryFee:Number(N.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.deliveryFee||7," ."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),V?o.jsx("input",{type:"number",step:"0.1",value:y.platformFee||1,onChange:N=>I({...y,platformFee:Number(N.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.platformFee||1," ./"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),V?o.jsx("input",{type:"number",step:"0.05",value:y.adminCommissionRate||.75,onChange:N=>I({...y,adminCommissionRate:Number(N.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.adminCommissionRate||.75," ./"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   "}),V?o.jsx("input",{type:"number",value:y.minOrderAmount||0,onChange:N=>I({...y,minOrderAmount:Number(N.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.minOrderAmount||20," ."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),V?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"time",value:((la=y.workingHours)==null?void 0:la.open)||"09:00",onChange:N=>I({...y,workingHours:{...y.workingHours,open:N.target.value}}),className:"flex-1 border rounded-xl p-3"}),o.jsx("input",{type:"time",value:((ca=y.workingHours)==null?void 0:ca.close)||"23:00",onChange:N=>I({...y,workingHours:{...y.workingHours,close:N.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):o.jsxs("p",{className:"text-2xl font-bold",children:[((Pi=g.workingHours)==null?void 0:Pi.open)||"09:00"," - ",((Di=g.workingHours)==null?void 0:Di.close)||"23:00"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),V?o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:y.maintenanceMode||!1,onChange:N=>I({...y,maintenanceMode:N.target.checked}),className:"w-6 h-6"}),o.jsx("span",{className:"text-lg",children:y.maintenanceMode?"":""})]}):o.jsx("p",{className:`text-2xl font-bold ${g.maintenanceMode?"text-red-600":"text-green-600"}`,children:g.maintenanceMode?" ":" "})]})]})}),o.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[o.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"   (  = 1.75 .):"}),o.jsxs("div",{className:"text-sky-800 space-y-2",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:" :"})," ",g.platformFee||1," .   "]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:" :"})," ",g.adminCommissionRate||.75," .   "]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[o.jsx("p",{className:"font-bold mb-2",children:" :   5 "}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"    :"})]}),o.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[o.jsxs("li",{children:["  : 5  ",g.adminCommissionRate||.75," = ",o.jsxs("strong",{children:[(5*(g.adminCommissionRate||.75)).toFixed(2)," ."]})]}),o.jsxs("li",{children:["  : 5  ",g.platformFee||1," = ",o.jsxs("strong",{children:[(5*(g.platformFee||1)).toFixed(2)," ."]})]}),o.jsxs("li",{className:"text-green-700",children:[": ",o.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})]}),o.jsxs("p",{className:"mt-2",children:[" ",o.jsx("strong",{children:"    :"})]}),o.jsx("ul",{className:"mr-6 list-disc text-sm",children:o.jsxs("li",{children:["    : 5  1.75 = ",o.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})})]})]})]})]}),s==="tasks"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"   "}),o.jsxs("button",{onClick:()=>Si(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(Ig,{className:"w-5 h-5"})," "]})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(N=>o.jsxs("button",{onClick:()=>Wn(N),className:`px-4 py-2 rounded-xl font-semibold transition ${Rn===N?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[N==="all"&&" ",N==="pending"&&"  ",N==="in_progress"&&"  ",N==="completed"&&" ",N==="cancelled"&&" "]},N))}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:jn.filter(N=>N.status==="pending").length}),o.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:jn.filter(N=>N.status==="in_progress").length}),o.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),o.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:jn.filter(N=>N.status==="completed").length}),o.jsx("p",{className:"text-sm text-green-700",children:""})]}),o.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:jn.filter(N=>N.status==="cancelled").length}),o.jsx("p",{className:"text-sm text-red-700",children:""})]})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:jn.filter(N=>Rn==="all"||N.status===Rn).length===0?o.jsxs("div",{className:"p-8 text-center text-gray-500",children:[o.jsx("p",{className:"text-4xl mb-2",children:""}),o.jsxs("p",{children:["   ",Rn!=="all"&&"  "]})]}):o.jsx("div",{className:"divide-y",children:jn.filter(N=>Rn==="all"||N.status===Rn).map(N=>{var $,ne,ye;const B=A.find(Se=>Se.uid===N.assignedTo);return o.jsx("div",{className:"p-4 hover:bg-gray-50",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${N.priority==="high"?"bg-red-100 text-red-700":N.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:N.priority==="high"?" ":N.priority==="medium"?" ":" "}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${N.status==="pending"?"bg-yellow-100 text-yellow-700":N.status==="in_progress"?"bg-blue-100 text-blue-700":N.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[N.status==="pending"&&"  ",N.status==="in_progress"&&"  ",N.status==="completed"&&" ",N.status==="cancelled"&&" "]})]}),o.jsx("h3",{className:"font-bold text-gray-800",children:N.title}),N.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.description}),o.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[o.jsxs("span",{children:[" ",(B==null?void 0:B.name)||N.assignedToName||" "]}),N.dueDate&&o.jsxs("span",{children:[" ",new Date(N.dueDate).toLocaleDateString("ar-SA")]}),o.jsxs("span",{children:[" ",((ye=(ne=($=N.createdAt)==null?void 0:$.toDate)==null?void 0:ne.call($))==null?void 0:ye.toLocaleDateString("ar-SA"))||" "]})]}),N.notes&&o.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:[" ",N.notes]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[N.status==="pending"&&o.jsx("button",{onClick:async()=>{try{await ot(Z(W,"tasks",N.id),{status:"in_progress",updatedAt:ve()}),e.success("  "),Je()}catch{e.error("   ")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:" ",children:""}),(N.status==="pending"||N.status==="in_progress")&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:async()=>{try{await ot(Z(W,"tasks",N.id),{status:"completed",completedAt:ve(),updatedAt:ve()}),e.success("  "),Je()}catch{e.error("   ")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:" ",children:""}),o.jsx("button",{onClick:async()=>{if(await n.confirm("    ",{dangerous:!0}))try{await ot(Z(W,"tasks",N.id),{status:"cancelled",updatedAt:ve()}),e.success("  "),Je()}catch{e.error("   ")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]}),o.jsx("button",{onClick:async()=>{if(await n.confirm("     ",{dangerous:!0}))try{await ss(Z(W,"tasks",N.id)),e.success("  "),Je()}catch{e.error("   ")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]})]})},N.id)})})}),Ds&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"   "}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),o.jsx("input",{type:"text",value:it,onChange:N=>ji(N.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:":    "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),o.jsx("textarea",{value:Fr,onChange:N=>cr(N.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:" ..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),o.jsxs("select",{value:Ri,onChange:N=>ta(N.target.value),className:"w-full border rounded-xl px-4 py-2",children:[o.jsx("option",{value:"",children:"--   --"}),A.filter(N=>N.role==="admin").map(N=>o.jsx("option",{value:N.uid,children:N.name||N.email},N.uid))]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),o.jsxs("select",{value:ur,onChange:N=>na(N.target.value),className:"w-full border rounded-xl px-4 py-2",children:[o.jsx("option",{value:"low",children:" "}),o.jsx("option",{value:"medium",children:" "}),o.jsx("option",{value:"high",children:" "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:" "}),o.jsx("input",{type:"date",value:lc,onChange:N=>Br(N.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:()=>{Si(!1),ji(""),cr(""),ta(""),na("medium"),Br("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:""}),o.jsx("button",{onClick:async()=>{if(!it.trim()||!Ri){e.error("   ");return}Ai(!0);try{const N=A.find(B=>B.uid===Ri);await zo(he(W,"tasks"),{title:it.trim(),description:Fr.trim(),assignedTo:Ri,assignedToName:(N==null?void 0:N.name)||(N==null?void 0:N.email)||"",status:"pending",priority:ur,dueDate:lc||null,createdBy:t==null?void 0:t.uid,createdAt:ve(),updatedAt:ve(),completedAt:null,notes:""}),e.success("   "),Si(!1),ji(""),cr(""),ta(""),na("medium"),Br(""),Je()}catch(N){console.error(N),e.error("   ")}finally{Ai(!1)}},disabled:ra,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:ra?" ...":" "})]})]})})]}),s==="tools"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold",children:"  "}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("button",{onClick:()=>{const N={exportDate:new Date().toISOString(),users:A.length,restaurants:k.length,orders:x.length,admins:T.length,stats:f,settings:g},B=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),$=URL.createObjectURL(B),ne=document.createElement("a");ne.href=$,ne.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,ne.click(),e.success("   ")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:"  JSON"})]})]}),o.jsxs("button",{onClick:()=>{const N=[[" ","","","",""].join(","),...x.map(ye=>{var Se,Ze,ht;return[ye.id.slice(-8),ye.restaurantName||" ",ye.total,ye.status,((ht=(Ze=(Se=ye.createdAt)==null?void 0:Se.toDate)==null?void 0:Ze.call(Se))==null?void 0:ht.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),B=new Blob(["\uFEFF"+N],{type:"text/csv;charset=utf-8"}),$=URL.createObjectURL(B),ne=document.createElement("a");ne.href=$,ne.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,ne.click(),e.success("   ")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]}),o.jsxs("button",{onClick:()=>{const N=[["","","",""].join(","),...A.map(ye=>[ye.name||" ",ye.email,ye.role,ye.phone||""].join(","))].join(`
`),B=new Blob(["\uFEFF"+N],{type:"text/csv;charset=utf-8"}),$=URL.createObjectURL(B),ne=document.createElement("a");ne.href=$,ne.download=`users-${new Date().toISOString().split("T")[0]}.csv`,ne.click(),e.success("   ")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("button",{onClick:async()=>{const N=x.filter($=>$.status==="pending");if(N.length===0){e.info("   ");return}if(await n.confirm(`  ${N.length}  .   `,{title:"  ",dangerous:!0}))try{await Promise.all(N.map($=>ot(Z(W,"orders",$.id),{status:"cancelled",updatedAt:ve()}))),e.success(`  ${N.length} `),Je()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:"  "}),o.jsxs("p",{className:"text-xs opacity-75",children:[x.filter(N=>N.status==="pending").length,"  "]})]})]}),o.jsxs("button",{onClick:async()=>{const N=new Date;N.setMonth(N.getMonth()-3);const B=x.filter(ne=>{var Se,Ze;return(((Ze=(Se=ne.createdAt)==null?void 0:Se.toDate)==null?void 0:Ze.call(Se))||new Date)<N&&(ne.status==="delivered"||ne.status==="cancelled")});if(B.length===0){e.info("   ");return}if(await n.confirm(`  ${B.length}   (  3 ).   `,{title:"  ",dangerous:!0}))try{await Promise.all(B.map(ne=>ss(Z(W,"orders",ne.id)))),e.success(`  ${B.length}  `),Je()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:"  "}),o.jsx("p",{className:"text-xs opacity-75",children:"   3 "})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("a",{href:`https://console.firebase.google.com/project/${vn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Firestore"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${vn.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Authentication"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${vn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Storage"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${vn.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:"Project ID"}),o.jsx("p",{className:"font-mono",children:vn.projectId})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),o.jsx("p",{className:"font-mono",children:vn.storageBucket})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:" "}),o.jsx("p",{className:"font-bold",children:g.appVersion||"1.0.0"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:" "}),o.jsx("p",{className:`font-bold ${g.maintenanceMode?"text-red-600":"text-green-600"}`,children:g.maintenanceMode?" ":" "})]})]})]})]}),o.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:o.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[o.jsxs("span",{children:[" ",t==null?void 0:t.email]}),o.jsxs("span",{children:[" ",t==null?void 0:t.uid.slice(0,12),"..."]}),o.jsxs("span",{children:[" ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},sn=({children:t})=>{const{user:e,loading:n}=Tt();return n?o.jsx("div",{className:"p-8 text-center",children:" ..."}):e?o.jsx(o.Fragment,{children:t}):o.jsx(bm,{to:"/login",replace:!0})},SO=()=>{var c;const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null);j.useEffect(()=>{(async()=>{try{i(null);const u=Bt(he(W,"orders"),Es("createdAt","desc"),gg(10)),f=(await Ke(u)).docs.map(p=>{var w,A,R,k,E,x;const g=p.data();return{id:p.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((A=(w=g==null?void 0:g.items)==null?void 0:w[0])==null?void 0:A.ownerId)??null,customerId:g.customerId??null,createdAtISO:((x=(E=(k=(R=g.createdAt)==null?void 0:R.toDate)==null?void 0:k.call(R))==null?void 0:E.toISOString)==null?void 0:x.call(E))??null}});e(f)}catch(u){if(String((u==null?void 0:u.message)||"").includes("index"))try{const f=(await Ke(he(W,"orders"))).docs.map(p=>{var w,A,R,k,E,x;const g=p.data();return{id:p.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((A=(w=g==null?void 0:g.items)==null?void 0:w[0])==null?void 0:A.ownerId)??null,customerId:g.customerId??null,createdAtISO:((x=(E=(k=(R=g.createdAt)==null?void 0:R.toDate)==null?void 0:k.call(R))==null?void 0:E.toISOString)==null?void 0:x.call(E))??null}});e(f),i("     createdAt     .")}catch(d){i("     : "+((d==null?void 0:d.message)||d))}else i("  : "+((u==null?void 0:u.message)||u))}finally{r(!1)}})()},[]);const a=(c=an.options)==null?void 0:c.projectId;return o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),o.jsxs("div",{className:"text-sm",children:["ProjectId: ",o.jsx("b",{children:String(a)})]}),s&&o.jsx("div",{className:"text-red-600 text-sm",children:s}),n&&o.jsx("div",{children:" Loading"}),!n&&t.length===0&&o.jsxs("div",{className:"text-gray-600",children:["     collection: ",o.jsx("code",{children:"orders"}),"   ."]}),t.map(u=>o.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[o.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",u.id]}),o.jsxs("div",{children:["restaurantId: ",o.jsx("b",{children:String(u.restaurantId)})]}),o.jsxs("div",{children:["items[0].ownerId: ",o.jsx("b",{children:String(u.firstItemOwnerId)})]}),o.jsxs("div",{children:["customerId: ",o.jsx("b",{children:String(u.customerId)})]}),o.jsxs("div",{children:["createdAt: ",o.jsx("b",{children:u.createdAtISO||""})]})]},u.id))]})};function jO(){return o.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[o.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[o.jsx(XD,{}),o.jsx(WD,{})]}),o.jsx("div",{className:"h-[100px] sm:h-[120px]"}),o.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:o.jsxs(n2,{children:[o.jsx(Re,{path:"/",element:o.jsx(YD,{})}),o.jsx(Re,{path:"/restaurants",element:o.jsx(JD,{})}),o.jsx(Re,{path:"/menu",element:o.jsx(rO,{})}),o.jsx(Re,{path:"/cart",element:o.jsx(sO,{})}),o.jsx(Re,{path:"/login",element:o.jsx(iO,{})}),o.jsx(Re,{path:"/customer-login",element:o.jsx(aO,{})}),o.jsx(Re,{path:"/register",element:o.jsx(oO,{})}),o.jsx(Re,{path:"/privacy-policy",element:o.jsx(lO,{})}),o.jsx(Re,{path:"/account-deleted",element:o.jsx(cO,{})}),o.jsx(Re,{path:"/checkout",element:o.jsx(sn,{children:o.jsx(He,{allow:["customer","admin"],children:o.jsx(hO,{})})})}),o.jsx(Re,{path:"/orders",element:o.jsx(sn,{children:o.jsx(He,{allow:["customer","admin"],children:o.jsx(fO,{})})})}),o.jsx(Re,{path:"/owner",element:o.jsx(sn,{children:o.jsx(He,{allow:["owner"],children:o.jsx(pO,{})})})}),o.jsx(Re,{path:"/owner/menu",element:o.jsx(sn,{children:o.jsx(He,{allow:["owner"],children:o.jsx(yO,{})})})}),o.jsx(Re,{path:"/owner/orders",element:o.jsx(sn,{children:o.jsx(He,{allow:["owner"],children:o.jsx(xO,{})})})}),o.jsx(Re,{path:"/owner/edit",element:o.jsx(sn,{children:o.jsx(He,{allow:["owner"],children:o.jsx(_O,{})})})}),o.jsx(Re,{path:"/owner/courier-requests",element:o.jsx(sn,{children:o.jsx(He,{allow:["owner"],children:o.jsx(wO,{})})})}),o.jsx(Re,{path:"/courier",element:o.jsx(sn,{children:o.jsx(He,{allow:["courier"],children:o.jsx(EO,{})})})}),o.jsx(Re,{path:"/courier/hiring",element:o.jsx(sn,{children:o.jsx(He,{allow:["courier"],children:o.jsx(bO,{})})})}),o.jsx(Re,{path:"/admin",element:o.jsx(sn,{children:o.jsx(He,{allow:["admin","developer"],children:o.jsx(NO,{})})})}),o.jsx(Re,{path:"/admin/restaurants",element:o.jsx(sn,{children:o.jsx(He,{allow:["admin","developer"],children:o.jsx(TO,{})})})}),o.jsx(Re,{path:"/admin/orders",element:o.jsx(sn,{children:o.jsx(He,{allow:["admin","developer"],children:o.jsx(IO,{})})})}),o.jsx(Re,{path:"/developer",element:o.jsx(sn,{children:o.jsx(He,{allow:["developer","admin"],children:o.jsx(kO,{})})})}),o.jsx(Re,{path:"/__debug_orders",element:o.jsx(SO,{})}),o.jsx(Re,{path:"*",element:o.jsx(bm,{to:"/",replace:!0})})]})}),o.jsx(QD,{})]})}j.createContext(void 0);const RO=({children:t})=>o.jsx(o.Fragment,{children:t});Zh.createRoot(document.getElementById("root")).render(o.jsx(cx.StrictMode,{children:o.jsx(u2,{children:o.jsx(ZD,{children:o.jsx(KD,{children:o.jsx(S4,{children:o.jsxs(RO,{children:["   ",o.jsx(jO,{})]})})})})})}));
