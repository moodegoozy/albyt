function B1(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function z1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dw={exports:{}},Yd={},hw={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc=Symbol.for("react.element"),q1=Symbol.for("react.portal"),H1=Symbol.for("react.fragment"),W1=Symbol.for("react.strict_mode"),K1=Symbol.for("react.profiler"),G1=Symbol.for("react.provider"),Q1=Symbol.for("react.context"),X1=Symbol.for("react.forward_ref"),Y1=Symbol.for("react.suspense"),J1=Symbol.for("react.memo"),Z1=Symbol.for("react.lazy"),u0=Symbol.iterator;function e2(t){return t===null||typeof t!="object"?null:(t=u0&&t[u0]||t["@@iterator"],typeof t=="function"?t:null)}var mw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fw=Object.assign,pw={};function go(t,e,n){this.props=t,this.context=e,this.refs=pw,this.updater=n||mw}go.prototype.isReactComponent={};go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gw(){}gw.prototype=go.prototype;function Dp(t,e,n){this.props=t,this.context=e,this.refs=pw,this.updater=n||mw}var Op=Dp.prototype=new gw;Op.constructor=Dp;fw(Op,go.prototype);Op.isPureReactComponent=!0;var d0=Array.isArray,xw=Object.prototype.hasOwnProperty,Lp={current:null},yw={key:!0,ref:!0,__self:!0,__source:!0};function vw(t,e,n){var s,i={},a=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)xw.call(e,s)&&!yw.hasOwnProperty(s)&&(i[s]=e[s]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:gc,type:t,key:a,ref:o,props:i,_owner:Lp.current}}function t2(t,e){return{$$typeof:gc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mp(t){return typeof t=="object"&&t!==null&&t.$$typeof===gc}function n2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var h0=/\/+/g;function lm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?n2(""+t.key):e.toString(36)}function Ou(t,e,n,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case gc:case q1:o=!0}}if(o)return o=t,i=i(o),t=s===""?"."+lm(o,0):s,d0(i)?(n="",t!=null&&(n=t.replace(h0,"$&/")+"/"),Ou(i,e,n,"",function(d){return d})):i!=null&&(Mp(i)&&(i=t2(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(h0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,s=s===""?".":s+":",d0(t))for(var l=0;l<t.length;l++){a=t[l];var u=s+lm(a,l);o+=Ou(a,e,n,u,i)}else if(u=e2(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=s+lm(a,l++),o+=Ou(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function au(t,e,n){if(t==null)return t;var s=[],i=0;return Ou(t,s,"","",function(a){return e.call(n,a,i++)}),s}function s2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gn={current:null},Lu={transition:null},r2={ReactCurrentDispatcher:gn,ReactCurrentBatchConfig:Lu,ReactCurrentOwner:Lp};function ww(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:au,forEach:function(t,e,n){au(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return au(t,function(){e++}),e},toArray:function(t){return au(t,function(e){return e})||[]},only:function(t){if(!Mp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};je.Component=go;je.Fragment=H1;je.Profiler=K1;je.PureComponent=Dp;je.StrictMode=W1;je.Suspense=Y1;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r2;je.act=ww;je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=fw({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Lp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)xw.call(e,u)&&!yw.hasOwnProperty(u)&&(s[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:gc,type:t.type,key:i,ref:a,props:s,_owner:o}};je.createContext=function(t){return t={$$typeof:Q1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G1,_context:t},t.Consumer=t};je.createElement=vw;je.createFactory=function(t){var e=vw.bind(null,t);return e.type=t,e};je.createRef=function(){return{current:null}};je.forwardRef=function(t){return{$$typeof:X1,render:t}};je.isValidElement=Mp;je.lazy=function(t){return{$$typeof:Z1,_payload:{_status:-1,_result:t},_init:s2}};je.memo=function(t,e){return{$$typeof:J1,type:t,compare:e===void 0?null:e}};je.startTransition=function(t){var e=Lu.transition;Lu.transition={};try{t()}finally{Lu.transition=e}};je.unstable_act=ww;je.useCallback=function(t,e){return gn.current.useCallback(t,e)};je.useContext=function(t){return gn.current.useContext(t)};je.useDebugValue=function(){};je.useDeferredValue=function(t){return gn.current.useDeferredValue(t)};je.useEffect=function(t,e){return gn.current.useEffect(t,e)};je.useId=function(){return gn.current.useId()};je.useImperativeHandle=function(t,e,n){return gn.current.useImperativeHandle(t,e,n)};je.useInsertionEffect=function(t,e){return gn.current.useInsertionEffect(t,e)};je.useLayoutEffect=function(t,e){return gn.current.useLayoutEffect(t,e)};je.useMemo=function(t,e){return gn.current.useMemo(t,e)};je.useReducer=function(t,e,n){return gn.current.useReducer(t,e,n)};je.useRef=function(t){return gn.current.useRef(t)};je.useState=function(t){return gn.current.useState(t)};je.useSyncExternalStore=function(t,e,n){return gn.current.useSyncExternalStore(t,e,n)};je.useTransition=function(){return gn.current.useTransition()};je.version="18.3.1";hw.exports=je;var b=hw.exports;const bw=z1(b),i2=B1({__proto__:null,default:bw},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2=b,o2=Symbol.for("react.element"),l2=Symbol.for("react.fragment"),c2=Object.prototype.hasOwnProperty,u2=a2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d2={key:!0,ref:!0,__self:!0,__source:!0};function _w(t,e,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)c2.call(e,s)&&!d2.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:o2,type:t,key:a,ref:o,props:i,_owner:u2.current}}Yd.Fragment=l2;Yd.jsx=_w;Yd.jsxs=_w;dw.exports=Yd;var r=dw.exports,af={},Nw={exports:{}},Un={},jw={exports:{}},kw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,H){var L=F.length;F.push(H);e:for(;0<L;){var se=L-1>>>1,ee=F[se];if(0<i(ee,H))F[se]=H,F[L]=ee,L=se;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var H=F[0],L=F.pop();if(L!==H){F[0]=L;e:for(var se=0,ee=F.length,me=ee>>>1;se<me;){var de=2*(se+1)-1,Ce=F[de],Ve=de+1,Xe=F[Ve];if(0>i(Ce,L))Ve<ee&&0>i(Xe,Ce)?(F[se]=Xe,F[Ve]=L,se=Ve):(F[se]=Ce,F[de]=L,se=de);else if(Ve<ee&&0>i(Xe,L))F[se]=Xe,F[Ve]=L,se=Ve;else break e}}return H}function i(F,H){var L=F.sortIndex-H.sortIndex;return L!==0?L:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,f=null,g=3,w=!1,j=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var H=n(d);H!==null;){if(H.callback===null)s(d);else if(H.startTime<=F)s(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function T(F){if(A=!1,_(F),!j)if(n(u)!==null)j=!0,M(O);else{var H=n(d);H!==null&&$(T,H.startTime-F)}}function O(F,H){j=!1,A&&(A=!1,k(p),p=-1),w=!0;var L=g;try{for(_(H),f=n(u);f!==null&&(!(f.expirationTime>H)||F&&!R());){var se=f.callback;if(typeof se=="function"){f.callback=null,g=f.priorityLevel;var ee=se(f.expirationTime<=H);H=t.unstable_now(),typeof ee=="function"?f.callback=ee:f===n(u)&&s(u),_(H)}else s(u);f=n(u)}if(f!==null)var me=!0;else{var de=n(d);de!==null&&$(T,de.startTime-H),me=!1}return me}finally{f=null,g=L,w=!1}}var V=!1,y=null,p=-1,N=5,E=-1;function R(){return!(t.unstable_now()-E<N)}function D(){if(y!==null){var F=t.unstable_now();E=F;var H=!0;try{H=y(!0,F)}finally{H?S():(V=!1,y=null)}}else V=!1}var S;if(typeof v=="function")S=function(){v(D)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,U=X.port2;X.port1.onmessage=D,S=function(){U.postMessage(null)}}else S=function(){I(D,0)};function M(F){y=F,V||(V=!0,S())}function $(F,H){p=I(function(){F(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){j||w||(j=!0,M(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(F){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var L=g;g=H;try{return F()}finally{g=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var L=g;g=F;try{return H()}finally{g=L}},t.unstable_scheduleCallback=function(F,H,L){var se=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?se+L:se):L=se,F){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=L+ee,F={id:h++,callback:H,priorityLevel:F,startTime:L,expirationTime:ee,sortIndex:-1},L>se?(F.sortIndex=L,e(d,F),n(u)===null&&F===n(d)&&(A?(k(p),p=-1):A=!0,$(T,L-se))):(F.sortIndex=ee,e(u,F),j||w||(j=!0,M(O))),F},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(F){var H=g;return function(){var L=g;g=H;try{return F.apply(this,arguments)}finally{g=L}}}})(kw);jw.exports=kw;var h2=jw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m2=b,Fn=h2;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ew=new Set,Rl={};function la(t,e){eo(t,e),eo(t+"Capture",e)}function eo(t,e){for(Rl[t]=e,t=0;t<e.length;t++)Ew.add(e[t])}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),of=Object.prototype.hasOwnProperty,f2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m0={},f0={};function p2(t){return of.call(f0,t)?!0:of.call(m0,t)?!1:f2.test(t)?f0[t]=!0:(m0[t]=!0,!1)}function g2(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function x2(t,e,n,s){if(e===null||typeof e>"u"||g2(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xn(t,e,n,s,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new xn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new xn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new xn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new xn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new xn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new xn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new xn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new xn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new xn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vp=/[\-:]([a-z])/g;function Fp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vp,Fp);Qt[e]=new xn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vp,Fp);Qt[e]=new xn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vp,Fp);Qt[e]=new xn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new xn(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new xn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Up(t,e,n,s){var i=Qt.hasOwnProperty(e)?Qt[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(x2(e,n,i,s)&&(n=null),s||i===null?p2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,s=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var kr=m2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ou=Symbol.for("react.element"),Ca=Symbol.for("react.portal"),Aa=Symbol.for("react.fragment"),$p=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),Iw=Symbol.for("react.provider"),Tw=Symbol.for("react.context"),Bp=Symbol.for("react.forward_ref"),cf=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),zp=Symbol.for("react.memo"),Ur=Symbol.for("react.lazy"),Sw=Symbol.for("react.offscreen"),p0=Symbol.iterator;function Ko(t){return t===null||typeof t!="object"?null:(t=p0&&t[p0]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,cm;function sl(t){if(cm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cm=e&&e[1]||""}return`
`+cm+t}var um=!1;function dm(t,e){if(!t||um)return"";um=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{um=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sl(t):""}function y2(t){switch(t.tag){case 5:return sl(t.type);case 16:return sl("Lazy");case 13:return sl("Suspense");case 19:return sl("SuspenseList");case 0:case 2:case 15:return t=dm(t.type,!1),t;case 11:return t=dm(t.type.render,!1),t;case 1:return t=dm(t.type,!0),t;default:return""}}function df(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Aa:return"Fragment";case Ca:return"Portal";case lf:return"Profiler";case $p:return"StrictMode";case cf:return"Suspense";case uf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tw:return(t.displayName||"Context")+".Consumer";case Iw:return(t._context.displayName||"Context")+".Provider";case Bp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zp:return e=t.displayName||null,e!==null?e:df(t.type)||"Memo";case Ur:e=t._payload,t=t._init;try{return df(t(e))}catch{}}return null}function v2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return df(e);case 8:return e===$p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ui(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function w2(t){var e=Cw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lu(t){t._valueTracker||(t._valueTracker=w2(t))}function Aw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Cw(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function sd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hf(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function g0(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=ui(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rw(t,e){e=e.checked,e!=null&&Up(t,"checked",e,!1)}function mf(t,e){Rw(t,e);var n=ui(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ff(t,e.type,n):e.hasOwnProperty("defaultValue")&&ff(t,e.type,ui(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ff(t,e,n){(e!=="number"||sd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rl=Array.isArray;function qa(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+ui(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function y0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(rl(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ui(n)}}function Pw(t,e){var n=ui(e.value),s=ui(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function v0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cu,Ow=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cu=cu||document.createElement("div"),cu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ml={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b2=["Webkit","ms","Moz","O"];Object.keys(ml).forEach(function(t){b2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ml[e]=ml[t]})});function Lw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ml.hasOwnProperty(t)&&ml[t]?(""+e).trim():e+"px"}function Mw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=Lw(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}var _2=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xf(t,e){if(e){if(_2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function yf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vf=null;function qp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wf=null,Ha=null,Wa=null;function w0(t){if(t=vc(t)){if(typeof wf!="function")throw Error(J(280));var e=t.stateNode;e&&(e=nh(e),wf(t.stateNode,t.type,e))}}function Vw(t){Ha?Wa?Wa.push(t):Wa=[t]:Ha=t}function Fw(){if(Ha){var t=Ha,e=Wa;if(Wa=Ha=null,w0(t),e)for(t=0;t<e.length;t++)w0(e[t])}}function Uw(t,e){return t(e)}function $w(){}var hm=!1;function Bw(t,e,n){if(hm)return t(e,n);hm=!0;try{return Uw(t,e,n)}finally{hm=!1,(Ha!==null||Wa!==null)&&($w(),Fw())}}function Dl(t,e){var n=t.stateNode;if(n===null)return null;var s=nh(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var bf=!1;if(mr)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){bf=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{bf=!1}function N2(t,e,n,s,i,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var fl=!1,rd=null,id=!1,_f=null,j2={onError:function(t){fl=!0,rd=t}};function k2(t,e,n,s,i,a,o,l,u){fl=!1,rd=null,N2.apply(j2,arguments)}function E2(t,e,n,s,i,a,o,l,u){if(k2.apply(this,arguments),fl){if(fl){var d=rd;fl=!1,rd=null}else throw Error(J(198));id||(id=!0,_f=d)}}function ca(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function b0(t){if(ca(t)!==t)throw Error(J(188))}function I2(t){var e=t.alternate;if(!e){if(e=ca(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return b0(i),t;if(a===s)return b0(i),e;a=a.sibling}throw Error(J(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==s)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function qw(t){return t=I2(t),t!==null?Hw(t):null}function Hw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hw(t);if(e!==null)return e;t=t.sibling}return null}var Ww=Fn.unstable_scheduleCallback,_0=Fn.unstable_cancelCallback,T2=Fn.unstable_shouldYield,S2=Fn.unstable_requestPaint,xt=Fn.unstable_now,C2=Fn.unstable_getCurrentPriorityLevel,Hp=Fn.unstable_ImmediatePriority,Kw=Fn.unstable_UserBlockingPriority,ad=Fn.unstable_NormalPriority,A2=Fn.unstable_LowPriority,Gw=Fn.unstable_IdlePriority,Jd=null,Ds=null;function R2(t){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(Jd,t,void 0,(t.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:O2,P2=Math.log,D2=Math.LN2;function O2(t){return t>>>=0,t===0?32:31-(P2(t)/D2|0)|0}var uu=64,du=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function od(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?s=il(l):(a&=o,a!==0&&(s=il(a)))}else o=n&~i,o!==0?s=il(o):a!==0&&(s=il(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-vs(e),i=1<<n,s|=t[n],e&=~i;return s}function L2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M2(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-vs(a),l=1<<o,u=i[o];u===-1?(!(l&n)||l&s)&&(i[o]=L2(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function Nf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qw(){var t=uu;return uu<<=1,!(uu&4194240)&&(uu=64),t}function mm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vs(e),t[e]=n}function V2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vs(n),a=1<<i;e[i]=0,s[i]=-1,t[i]=-1,n&=~a}}function Wp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-vs(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}var Me=0;function Xw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yw,Kp,Jw,Zw,eb,jf=!1,hu=[],Zr=null,ei=null,ti=null,Ol=new Map,Ll=new Map,Br=[],F2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function N0(t,e){switch(t){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Ol.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function Qo(t,e,n,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=vc(e),e!==null&&Kp(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function U2(t,e,n,s,i){switch(e){case"focusin":return Zr=Qo(Zr,t,e,n,s,i),!0;case"dragenter":return ei=Qo(ei,t,e,n,s,i),!0;case"mouseover":return ti=Qo(ti,t,e,n,s,i),!0;case"pointerover":var a=i.pointerId;return Ol.set(a,Qo(Ol.get(a)||null,t,e,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Ll.set(a,Qo(Ll.get(a)||null,t,e,n,s,i)),!0}return!1}function tb(t){var e=Vi(t.target);if(e!==null){var n=ca(e);if(n!==null){if(e=n.tag,e===13){if(e=zw(n),e!==null){t.blockedOn=e,eb(t.priority,function(){Jw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);vf=s,n.target.dispatchEvent(s),vf=null}else return e=vc(n),e!==null&&Kp(e),t.blockedOn=n,!1;e.shift()}return!0}function j0(t,e,n){Mu(t)&&n.delete(e)}function $2(){jf=!1,Zr!==null&&Mu(Zr)&&(Zr=null),ei!==null&&Mu(ei)&&(ei=null),ti!==null&&Mu(ti)&&(ti=null),Ol.forEach(j0),Ll.forEach(j0)}function Xo(t,e){t.blockedOn===e&&(t.blockedOn=null,jf||(jf=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,$2)))}function Ml(t){function e(i){return Xo(i,t)}if(0<hu.length){Xo(hu[0],t);for(var n=1;n<hu.length;n++){var s=hu[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Zr!==null&&Xo(Zr,t),ei!==null&&Xo(ei,t),ti!==null&&Xo(ti,t),Ol.forEach(e),Ll.forEach(e),n=0;n<Br.length;n++)s=Br[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Br.length&&(n=Br[0],n.blockedOn===null);)tb(n),n.blockedOn===null&&Br.shift()}var Ka=kr.ReactCurrentBatchConfig,ld=!0;function B2(t,e,n,s){var i=Me,a=Ka.transition;Ka.transition=null;try{Me=1,Gp(t,e,n,s)}finally{Me=i,Ka.transition=a}}function z2(t,e,n,s){var i=Me,a=Ka.transition;Ka.transition=null;try{Me=4,Gp(t,e,n,s)}finally{Me=i,Ka.transition=a}}function Gp(t,e,n,s){if(ld){var i=kf(t,e,n,s);if(i===null)Nm(t,e,s,cd,n),N0(t,s);else if(U2(i,t,e,n,s))s.stopPropagation();else if(N0(t,s),e&4&&-1<F2.indexOf(t)){for(;i!==null;){var a=vc(i);if(a!==null&&Yw(a),a=kf(t,e,n,s),a===null&&Nm(t,e,s,cd,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else Nm(t,e,s,null,n)}}var cd=null;function kf(t,e,n,s){if(cd=null,t=qp(s),t=Vi(t),t!==null)if(e=ca(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cd=t,null}function nb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C2()){case Hp:return 1;case Kw:return 4;case ad:case A2:return 16;case Gw:return 536870912;default:return 16}default:return 16}}var Qr=null,Qp=null,Vu=null;function sb(){if(Vu)return Vu;var t,e=Qp,n=e.length,s,i="value"in Qr?Qr.value:Qr.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===i[a-s];s++);return Vu=i.slice(t,1<s?1-s:void 0)}function Fu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mu(){return!0}function k0(){return!1}function $n(t){function e(n,s,i,a,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?mu:k0,this.isPropagationStopped=k0,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mu)},persist:function(){},isPersistent:mu}),e}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xp=$n(xo),yc=ct({},xo,{view:0,detail:0}),q2=$n(yc),fm,pm,Yo,Zd=ct({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yo&&(Yo&&t.type==="mousemove"?(fm=t.screenX-Yo.screenX,pm=t.screenY-Yo.screenY):pm=fm=0,Yo=t),fm)},movementY:function(t){return"movementY"in t?t.movementY:pm}}),E0=$n(Zd),H2=ct({},Zd,{dataTransfer:0}),W2=$n(H2),K2=ct({},yc,{relatedTarget:0}),gm=$n(K2),G2=ct({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),Q2=$n(G2),X2=ct({},xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Y2=$n(X2),J2=ct({},xo,{data:0}),I0=$n(J2),Z2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tk[t])?!!e[t]:!1}function Yp(){return nk}var sk=ct({},yc,{key:function(t){if(t.key){var e=Z2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ek[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yp,charCode:function(t){return t.type==="keypress"?Fu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rk=$n(sk),ik=ct({},Zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T0=$n(ik),ak=ct({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yp}),ok=$n(ak),lk=ct({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ck=$n(lk),uk=ct({},Zd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dk=$n(uk),hk=[9,13,27,32],Jp=mr&&"CompositionEvent"in window,pl=null;mr&&"documentMode"in document&&(pl=document.documentMode);var mk=mr&&"TextEvent"in window&&!pl,rb=mr&&(!Jp||pl&&8<pl&&11>=pl),S0=" ",C0=!1;function ib(t,e){switch(t){case"keyup":return hk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ab(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ra=!1;function fk(t,e){switch(t){case"compositionend":return ab(e);case"keypress":return e.which!==32?null:(C0=!0,S0);case"textInput":return t=e.data,t===S0&&C0?null:t;default:return null}}function pk(t,e){if(Ra)return t==="compositionend"||!Jp&&ib(t,e)?(t=sb(),Vu=Qp=Qr=null,Ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rb&&e.locale!=="ko"?null:e.data;default:return null}}var gk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gk[t.type]:e==="textarea"}function ob(t,e,n,s){Vw(s),e=ud(e,"onChange"),0<e.length&&(n=new Xp("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var gl=null,Vl=null;function xk(t){yb(t,0)}function eh(t){var e=Oa(t);if(Aw(e))return t}function yk(t,e){if(t==="change")return e}var lb=!1;if(mr){var xm;if(mr){var ym="oninput"in document;if(!ym){var R0=document.createElement("div");R0.setAttribute("oninput","return;"),ym=typeof R0.oninput=="function"}xm=ym}else xm=!1;lb=xm&&(!document.documentMode||9<document.documentMode)}function P0(){gl&&(gl.detachEvent("onpropertychange",cb),Vl=gl=null)}function cb(t){if(t.propertyName==="value"&&eh(Vl)){var e=[];ob(e,Vl,t,qp(t)),Bw(xk,e)}}function vk(t,e,n){t==="focusin"?(P0(),gl=e,Vl=n,gl.attachEvent("onpropertychange",cb)):t==="focusout"&&P0()}function wk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eh(Vl)}function bk(t,e){if(t==="click")return eh(e)}function _k(t,e){if(t==="input"||t==="change")return eh(e)}function Nk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bs=typeof Object.is=="function"?Object.is:Nk;function Fl(t,e){if(bs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!of.call(e,i)||!bs(t[i],e[i]))return!1}return!0}function D0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function O0(t,e){var n=D0(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=D0(n)}}function ub(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ub(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function db(){for(var t=window,e=sd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sd(t.document)}return e}function Zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jk(t){var e=db(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ub(n.ownerDocument.documentElement,n)){if(s!==null&&Zp(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!t.extend&&a>s&&(i=s,s=a,a=i),i=O0(n,a);var o=O0(n,s);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kk=mr&&"documentMode"in document&&11>=document.documentMode,Pa=null,Ef=null,xl=null,If=!1;function L0(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;If||Pa==null||Pa!==sd(s)||(s=Pa,"selectionStart"in s&&Zp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),xl&&Fl(xl,s)||(xl=s,s=ud(Ef,"onSelect"),0<s.length&&(e=new Xp("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Pa)))}function fu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Da={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},vm={},hb={};mr&&(hb=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function th(t){if(vm[t])return vm[t];if(!Da[t])return t;var e=Da[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hb)return vm[t]=e[n];return t}var mb=th("animationend"),fb=th("animationiteration"),pb=th("animationstart"),gb=th("transitionend"),xb=new Map,M0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(t,e){xb.set(t,e),la(e,[t])}for(var wm=0;wm<M0.length;wm++){var bm=M0[wm],Ek=bm.toLowerCase(),Ik=bm[0].toUpperCase()+bm.slice(1);xi(Ek,"on"+Ik)}xi(mb,"onAnimationEnd");xi(fb,"onAnimationIteration");xi(pb,"onAnimationStart");xi("dblclick","onDoubleClick");xi("focusin","onFocus");xi("focusout","onBlur");xi(gb,"onTransitionEnd");eo("onMouseEnter",["mouseout","mouseover"]);eo("onMouseLeave",["mouseout","mouseover"]);eo("onPointerEnter",["pointerout","pointerover"]);eo("onPointerLeave",["pointerout","pointerover"]);la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));la("onBeforeInput",["compositionend","keypress","textInput","paste"]);la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tk=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function V0(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,E2(s,e,void 0,t),t.currentTarget=null}function yb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&i.isPropagationStopped())break e;V0(i,l,d),a=u}else for(o=0;o<s.length;o++){if(l=s[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&i.isPropagationStopped())break e;V0(i,l,d),a=u}}}if(id)throw t=_f,id=!1,_f=null,t}function Ze(t,e){var n=e[Rf];n===void 0&&(n=e[Rf]=new Set);var s=t+"__bubble";n.has(s)||(vb(e,t,2,!1),n.add(s))}function _m(t,e,n){var s=0;e&&(s|=4),vb(n,t,s,e)}var pu="_reactListening"+Math.random().toString(36).slice(2);function Ul(t){if(!t[pu]){t[pu]=!0,Ew.forEach(function(n){n!=="selectionchange"&&(Tk.has(n)||_m(n,!1,t),_m(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pu]||(e[pu]=!0,_m("selectionchange",!1,e))}}function vb(t,e,n,s){switch(nb(e)){case 1:var i=B2;break;case 4:i=z2;break;default:i=Gp}n=i.bind(null,e,n,t),i=void 0,!bf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nm(t,e,n,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Vi(l),o===null)return;if(u=o.tag,u===5||u===6){s=a=o;continue e}l=l.parentNode}}s=s.return}Bw(function(){var d=a,h=qp(n),f=[];e:{var g=xb.get(t);if(g!==void 0){var w=Xp,j=t;switch(t){case"keypress":if(Fu(n)===0)break e;case"keydown":case"keyup":w=rk;break;case"focusin":j="focus",w=gm;break;case"focusout":j="blur",w=gm;break;case"beforeblur":case"afterblur":w=gm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=E0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=W2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=ok;break;case mb:case fb:case pb:w=Q2;break;case gb:w=ck;break;case"scroll":w=q2;break;case"wheel":w=dk;break;case"copy":case"cut":case"paste":w=Y2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=T0}var A=(e&4)!==0,I=!A&&t==="scroll",k=A?g!==null?g+"Capture":null:g;A=[];for(var v=d,_;v!==null;){_=v;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,k!==null&&(T=Dl(v,k),T!=null&&A.push($l(v,T,_)))),I)break;v=v.return}0<A.length&&(g=new w(g,j,null,n,h),f.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==vf&&(j=n.relatedTarget||n.fromElement)&&(Vi(j)||j[fr]))break e;if((w||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,w?(j=n.relatedTarget||n.toElement,w=d,j=j?Vi(j):null,j!==null&&(I=ca(j),j!==I||j.tag!==5&&j.tag!==6)&&(j=null)):(w=null,j=d),w!==j)){if(A=E0,T="onMouseLeave",k="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=T0,T="onPointerLeave",k="onPointerEnter",v="pointer"),I=w==null?g:Oa(w),_=j==null?g:Oa(j),g=new A(T,v+"leave",w,n,h),g.target=I,g.relatedTarget=_,T=null,Vi(h)===d&&(A=new A(k,v+"enter",j,n,h),A.target=_,A.relatedTarget=I,T=A),I=T,w&&j)t:{for(A=w,k=j,v=0,_=A;_;_=Ea(_))v++;for(_=0,T=k;T;T=Ea(T))_++;for(;0<v-_;)A=Ea(A),v--;for(;0<_-v;)k=Ea(k),_--;for(;v--;){if(A===k||k!==null&&A===k.alternate)break t;A=Ea(A),k=Ea(k)}A=null}else A=null;w!==null&&F0(f,g,w,A,!1),j!==null&&I!==null&&F0(f,I,j,A,!0)}}e:{if(g=d?Oa(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var O=yk;else if(A0(g))if(lb)O=_k;else{O=wk;var V=vk}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=bk);if(O&&(O=O(t,d))){ob(f,O,n,h);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&ff(g,"number",g.value)}switch(V=d?Oa(d):window,t){case"focusin":(A0(V)||V.contentEditable==="true")&&(Pa=V,Ef=d,xl=null);break;case"focusout":xl=Ef=Pa=null;break;case"mousedown":If=!0;break;case"contextmenu":case"mouseup":case"dragend":If=!1,L0(f,n,h);break;case"selectionchange":if(kk)break;case"keydown":case"keyup":L0(f,n,h)}var y;if(Jp)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else Ra?ib(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(rb&&n.locale!=="ko"&&(Ra||p!=="onCompositionStart"?p==="onCompositionEnd"&&Ra&&(y=sb()):(Qr=h,Qp="value"in Qr?Qr.value:Qr.textContent,Ra=!0)),V=ud(d,p),0<V.length&&(p=new I0(p,t,null,n,h),f.push({event:p,listeners:V}),y?p.data=y:(y=ab(n),y!==null&&(p.data=y)))),(y=mk?fk(t,n):pk(t,n))&&(d=ud(d,"onBeforeInput"),0<d.length&&(h=new I0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=y))}yb(f,e)})}function $l(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ud(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Dl(t,n),a!=null&&s.unshift($l(t,a,i)),a=Dl(t,e),a!=null&&s.push($l(t,a,i))),t=t.return}return s}function Ea(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function F0(t,e,n,s,i){for(var a=e._reactName,o=[];n!==null&&n!==s;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===s)break;l.tag===5&&d!==null&&(l=d,i?(u=Dl(n,a),u!=null&&o.unshift($l(n,u,l))):i||(u=Dl(n,a),u!=null&&o.push($l(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Sk=/\r\n?/g,Ck=/\u0000|\uFFFD/g;function U0(t){return(typeof t=="string"?t:""+t).replace(Sk,`
`).replace(Ck,"")}function gu(t,e,n){if(e=U0(e),U0(t)!==e&&n)throw Error(J(425))}function dd(){}var Tf=null,Sf=null;function Cf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Af=typeof setTimeout=="function"?setTimeout:void 0,Ak=typeof clearTimeout=="function"?clearTimeout:void 0,$0=typeof Promise=="function"?Promise:void 0,Rk=typeof queueMicrotask=="function"?queueMicrotask:typeof $0<"u"?function(t){return $0.resolve(null).then(t).catch(Pk)}:Af;function Pk(t){setTimeout(function(){throw t})}function jm(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){t.removeChild(i),Ml(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);Ml(e)}function ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function B0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yo=Math.random().toString(36).slice(2),As="__reactFiber$"+yo,Bl="__reactProps$"+yo,fr="__reactContainer$"+yo,Rf="__reactEvents$"+yo,Dk="__reactListeners$"+yo,Ok="__reactHandles$"+yo;function Vi(t){var e=t[As];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fr]||n[As]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=B0(t);t!==null;){if(n=t[As])return n;t=B0(t)}return e}t=n,n=t.parentNode}return null}function vc(t){return t=t[As]||t[fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function nh(t){return t[Bl]||null}var Pf=[],La=-1;function yi(t){return{current:t}}function nt(t){0>La||(t.current=Pf[La],Pf[La]=null,La--)}function Ge(t,e){La++,Pf[La]=t.current,t.current=e}var di={},ln=yi(di),jn=yi(!1),Gi=di;function to(t,e){var n=t.type.contextTypes;if(!n)return di;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kn(t){return t=t.childContextTypes,t!=null}function hd(){nt(jn),nt(ln)}function z0(t,e,n){if(ln.current!==di)throw Error(J(168));Ge(ln,e),Ge(jn,n)}function wb(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(J(108,v2(t)||"Unknown",i));return ct({},n,s)}function md(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||di,Gi=ln.current,Ge(ln,t),Ge(jn,jn.current),!0}function q0(t,e,n){var s=t.stateNode;if(!s)throw Error(J(169));n?(t=wb(t,e,Gi),s.__reactInternalMemoizedMergedChildContext=t,nt(jn),nt(ln),Ge(ln,t)):nt(jn),Ge(jn,n)}var Zs=null,sh=!1,km=!1;function bb(t){Zs===null?Zs=[t]:Zs.push(t)}function Lk(t){sh=!0,bb(t)}function vi(){if(!km&&Zs!==null){km=!0;var t=0,e=Me;try{var n=Zs;for(Me=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Zs=null,sh=!1}catch(i){throw Zs!==null&&(Zs=Zs.slice(t+1)),Ww(Hp,vi),i}finally{Me=e,km=!1}}return null}var Ma=[],Va=0,fd=null,pd=0,Gn=[],Qn=0,Qi=null,tr=1,nr="";function Di(t,e){Ma[Va++]=pd,Ma[Va++]=fd,fd=t,pd=e}function _b(t,e,n){Gn[Qn++]=tr,Gn[Qn++]=nr,Gn[Qn++]=Qi,Qi=t;var s=tr;t=nr;var i=32-vs(s)-1;s&=~(1<<i),n+=1;var a=32-vs(e)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,tr=1<<32-vs(e)+i|n<<i|s,nr=a+t}else tr=1<<a|n<<i|s,nr=t}function eg(t){t.return!==null&&(Di(t,1),_b(t,1,0))}function tg(t){for(;t===fd;)fd=Ma[--Va],Ma[Va]=null,pd=Ma[--Va],Ma[Va]=null;for(;t===Qi;)Qi=Gn[--Qn],Gn[Qn]=null,nr=Gn[--Qn],Gn[Qn]=null,tr=Gn[--Qn],Gn[Qn]=null}var Ln=null,Pn=null,it=!1,xs=null;function Nb(t,e){var n=Yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function H0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,Pn=ni(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qi!==null?{id:tr,overflow:nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ln=t,Pn=null,!0):!1;default:return!1}}function Df(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Of(t){if(it){var e=Pn;if(e){var n=e;if(!H0(t,e)){if(Df(t))throw Error(J(418));e=ni(n.nextSibling);var s=Ln;e&&H0(t,e)?Nb(s,n):(t.flags=t.flags&-4097|2,it=!1,Ln=t)}}else{if(Df(t))throw Error(J(418));t.flags=t.flags&-4097|2,it=!1,Ln=t}}}function W0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function xu(t){if(t!==Ln)return!1;if(!it)return W0(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cf(t.type,t.memoizedProps)),e&&(e=Pn)){if(Df(t))throw jb(),Error(J(418));for(;e;)Nb(t,e),e=ni(e.nextSibling)}if(W0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=ni(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=Ln?ni(t.stateNode.nextSibling):null;return!0}function jb(){for(var t=Pn;t;)t=ni(t.nextSibling)}function no(){Pn=Ln=null,it=!1}function ng(t){xs===null?xs=[t]:xs.push(t)}var Mk=kr.ReactCurrentBatchConfig;function Jo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var s=n.stateNode}if(!s)throw Error(J(147,t));var i=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function yu(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function K0(t){var e=t._init;return e(t._payload)}function kb(t){function e(k,v){if(t){var _=k.deletions;_===null?(k.deletions=[v],k.flags|=16):_.push(v)}}function n(k,v){if(!t)return null;for(;v!==null;)e(k,v),v=v.sibling;return null}function s(k,v){for(k=new Map;v!==null;)v.key!==null?k.set(v.key,v):k.set(v.index,v),v=v.sibling;return k}function i(k,v){return k=ai(k,v),k.index=0,k.sibling=null,k}function a(k,v,_){return k.index=_,t?(_=k.alternate,_!==null?(_=_.index,_<v?(k.flags|=2,v):_):(k.flags|=2,v)):(k.flags|=1048576,v)}function o(k){return t&&k.alternate===null&&(k.flags|=2),k}function l(k,v,_,T){return v===null||v.tag!==6?(v=Rm(_,k.mode,T),v.return=k,v):(v=i(v,_),v.return=k,v)}function u(k,v,_,T){var O=_.type;return O===Aa?h(k,v,_.props.children,T,_.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ur&&K0(O)===v.type)?(T=i(v,_.props),T.ref=Jo(k,v,_),T.return=k,T):(T=Wu(_.type,_.key,_.props,null,k.mode,T),T.ref=Jo(k,v,_),T.return=k,T)}function d(k,v,_,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Pm(_,k.mode,T),v.return=k,v):(v=i(v,_.children||[]),v.return=k,v)}function h(k,v,_,T,O){return v===null||v.tag!==7?(v=zi(_,k.mode,T,O),v.return=k,v):(v=i(v,_),v.return=k,v)}function f(k,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Rm(""+v,k.mode,_),v.return=k,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ou:return _=Wu(v.type,v.key,v.props,null,k.mode,_),_.ref=Jo(k,null,v),_.return=k,_;case Ca:return v=Pm(v,k.mode,_),v.return=k,v;case Ur:var T=v._init;return f(k,T(v._payload),_)}if(rl(v)||Ko(v))return v=zi(v,k.mode,_,null),v.return=k,v;yu(k,v)}return null}function g(k,v,_,T){var O=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return O!==null?null:l(k,v,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ou:return _.key===O?u(k,v,_,T):null;case Ca:return _.key===O?d(k,v,_,T):null;case Ur:return O=_._init,g(k,v,O(_._payload),T)}if(rl(_)||Ko(_))return O!==null?null:h(k,v,_,T,null);yu(k,_)}return null}function w(k,v,_,T,O){if(typeof T=="string"&&T!==""||typeof T=="number")return k=k.get(_)||null,l(v,k,""+T,O);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ou:return k=k.get(T.key===null?_:T.key)||null,u(v,k,T,O);case Ca:return k=k.get(T.key===null?_:T.key)||null,d(v,k,T,O);case Ur:var V=T._init;return w(k,v,_,V(T._payload),O)}if(rl(T)||Ko(T))return k=k.get(_)||null,h(v,k,T,O,null);yu(v,T)}return null}function j(k,v,_,T){for(var O=null,V=null,y=v,p=v=0,N=null;y!==null&&p<_.length;p++){y.index>p?(N=y,y=null):N=y.sibling;var E=g(k,y,_[p],T);if(E===null){y===null&&(y=N);break}t&&y&&E.alternate===null&&e(k,y),v=a(E,v,p),V===null?O=E:V.sibling=E,V=E,y=N}if(p===_.length)return n(k,y),it&&Di(k,p),O;if(y===null){for(;p<_.length;p++)y=f(k,_[p],T),y!==null&&(v=a(y,v,p),V===null?O=y:V.sibling=y,V=y);return it&&Di(k,p),O}for(y=s(k,y);p<_.length;p++)N=w(y,k,p,_[p],T),N!==null&&(t&&N.alternate!==null&&y.delete(N.key===null?p:N.key),v=a(N,v,p),V===null?O=N:V.sibling=N,V=N);return t&&y.forEach(function(R){return e(k,R)}),it&&Di(k,p),O}function A(k,v,_,T){var O=Ko(_);if(typeof O!="function")throw Error(J(150));if(_=O.call(_),_==null)throw Error(J(151));for(var V=O=null,y=v,p=v=0,N=null,E=_.next();y!==null&&!E.done;p++,E=_.next()){y.index>p?(N=y,y=null):N=y.sibling;var R=g(k,y,E.value,T);if(R===null){y===null&&(y=N);break}t&&y&&R.alternate===null&&e(k,y),v=a(R,v,p),V===null?O=R:V.sibling=R,V=R,y=N}if(E.done)return n(k,y),it&&Di(k,p),O;if(y===null){for(;!E.done;p++,E=_.next())E=f(k,E.value,T),E!==null&&(v=a(E,v,p),V===null?O=E:V.sibling=E,V=E);return it&&Di(k,p),O}for(y=s(k,y);!E.done;p++,E=_.next())E=w(y,k,p,E.value,T),E!==null&&(t&&E.alternate!==null&&y.delete(E.key===null?p:E.key),v=a(E,v,p),V===null?O=E:V.sibling=E,V=E);return t&&y.forEach(function(D){return e(k,D)}),it&&Di(k,p),O}function I(k,v,_,T){if(typeof _=="object"&&_!==null&&_.type===Aa&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ou:e:{for(var O=_.key,V=v;V!==null;){if(V.key===O){if(O=_.type,O===Aa){if(V.tag===7){n(k,V.sibling),v=i(V,_.props.children),v.return=k,k=v;break e}}else if(V.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ur&&K0(O)===V.type){n(k,V.sibling),v=i(V,_.props),v.ref=Jo(k,V,_),v.return=k,k=v;break e}n(k,V);break}else e(k,V);V=V.sibling}_.type===Aa?(v=zi(_.props.children,k.mode,T,_.key),v.return=k,k=v):(T=Wu(_.type,_.key,_.props,null,k.mode,T),T.ref=Jo(k,v,_),T.return=k,k=T)}return o(k);case Ca:e:{for(V=_.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(k,v.sibling),v=i(v,_.children||[]),v.return=k,k=v;break e}else{n(k,v);break}else e(k,v);v=v.sibling}v=Pm(_,k.mode,T),v.return=k,k=v}return o(k);case Ur:return V=_._init,I(k,v,V(_._payload),T)}if(rl(_))return j(k,v,_,T);if(Ko(_))return A(k,v,_,T);yu(k,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(k,v.sibling),v=i(v,_),v.return=k,k=v):(n(k,v),v=Rm(_,k.mode,T),v.return=k,k=v),o(k)):n(k,v)}return I}var so=kb(!0),Eb=kb(!1),gd=yi(null),xd=null,Fa=null,sg=null;function rg(){sg=Fa=xd=null}function ig(t){var e=gd.current;nt(gd),t._currentValue=e}function Lf(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Ga(t,e){xd=t,sg=Fa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nn=!0),t.firstContext=null)}function rs(t){var e=t._currentValue;if(sg!==t)if(t={context:t,memoizedValue:e,next:null},Fa===null){if(xd===null)throw Error(J(308));Fa=t,xd.dependencies={lanes:0,firstContext:t}}else Fa=Fa.next=t;return e}var Fi=null;function ag(t){Fi===null?Fi=[t]:Fi.push(t)}function Ib(t,e,n,s){var i=e.interleaved;return i===null?(n.next=n,ag(e)):(n.next=i.next,i.next=n),e.interleaved=n,pr(t,s)}function pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $r=!1;function og(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function si(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Se&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,pr(t,n)}return i=s.interleaved,i===null?(e.next=e,ag(s)):(e.next=i.next,i.next=e),s.interleaved=e,pr(t,n)}function Uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Wp(t,n)}}function G0(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yd(t,e,n,s){var i=t.updateQueue;$r=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(a!==null){var f=i.baseState;o=0,h=d=u=null,l=a;do{var g=l.lane,w=l.eventTime;if((s&g)===g){h!==null&&(h=h.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=t,A=l;switch(g=e,w=n,A.tag){case 1:if(j=A.payload,typeof j=="function"){f=j.call(w,f,g);break e}f=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=A.payload,g=typeof j=="function"?j.call(w,f,g):j,g==null)break e;f=ct({},f,g);break e;case 2:$r=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=w,u=f):h=h.next=w,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Yi|=o,t.lanes=o,t.memoizedState=f}}function Q0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(J(191,i));i.call(s)}}}var wc={},Os=yi(wc),zl=yi(wc),ql=yi(wc);function Ui(t){if(t===wc)throw Error(J(174));return t}function lg(t,e){switch(Ge(ql,e),Ge(zl,t),Ge(Os,wc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gf(e,t)}nt(Os),Ge(Os,e)}function ro(){nt(Os),nt(zl),nt(ql)}function Sb(t){Ui(ql.current);var e=Ui(Os.current),n=gf(e,t.type);e!==n&&(Ge(zl,t),Ge(Os,n))}function cg(t){zl.current===t&&(nt(Os),nt(zl))}var ot=yi(0);function vd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Em=[];function ug(){for(var t=0;t<Em.length;t++)Em[t]._workInProgressVersionPrimary=null;Em.length=0}var $u=kr.ReactCurrentDispatcher,Im=kr.ReactCurrentBatchConfig,Xi=0,lt=null,Tt=null,Pt=null,wd=!1,yl=!1,Hl=0,Vk=0;function Jt(){throw Error(J(321))}function dg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bs(t[n],e[n]))return!1;return!0}function hg(t,e,n,s,i,a){if(Xi=a,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$u.current=t===null||t.memoizedState===null?Bk:zk,t=n(s,i),yl){a=0;do{if(yl=!1,Hl=0,25<=a)throw Error(J(301));a+=1,Pt=Tt=null,e.updateQueue=null,$u.current=qk,t=n(s,i)}while(yl)}if($u.current=bd,e=Tt!==null&&Tt.next!==null,Xi=0,Pt=Tt=lt=null,wd=!1,e)throw Error(J(300));return t}function mg(){var t=Hl!==0;return Hl=0,t}function Cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?lt.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function is(){if(Tt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Pt===null?lt.memoizedState:Pt.next;if(e!==null)Pt=e,Tt=t;else{if(t===null)throw Error(J(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Pt===null?lt.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function Wl(t,e){return typeof e=="function"?e(t):e}function Tm(t){var e=is(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var s=Tt,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,u=null,d=a;do{var h=d.lane;if((Xi&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=f,o=s):u=u.next=f,lt.lanes|=h,Yi|=h}d=d.next}while(d!==null&&d!==a);u===null?o=s:u.next=l,bs(s,e.memoizedState)||(Nn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=u,n.lastRenderedState=s}if(t=n.interleaved,t!==null){i=t;do a=i.lane,lt.lanes|=a,Yi|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sm(t){var e=is(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);bs(a,e.memoizedState)||(Nn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function Cb(){}function Ab(t,e){var n=lt,s=is(),i=e(),a=!bs(s.memoizedState,i);if(a&&(s.memoizedState=i,Nn=!0),s=s.queue,fg(Db.bind(null,n,s,t),[t]),s.getSnapshot!==e||a||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,Kl(9,Pb.bind(null,n,s,i,e),void 0,null),Lt===null)throw Error(J(349));Xi&30||Rb(n,e,i)}return i}function Rb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Pb(t,e,n,s){e.value=n,e.getSnapshot=s,Ob(e)&&Lb(t)}function Db(t,e,n){return n(function(){Ob(e)&&Lb(t)})}function Ob(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bs(t,n)}catch{return!0}}function Lb(t){var e=pr(t,1);e!==null&&ws(e,t,1,-1)}function X0(t){var e=Cs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:t},e.queue=t,t=t.dispatch=$k.bind(null,lt,t),[e.memoizedState,t]}function Kl(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function Mb(){return is().memoizedState}function Bu(t,e,n,s){var i=Cs();lt.flags|=t,i.memoizedState=Kl(1|e,n,void 0,s===void 0?null:s)}function rh(t,e,n,s){var i=is();s=s===void 0?null:s;var a=void 0;if(Tt!==null){var o=Tt.memoizedState;if(a=o.destroy,s!==null&&dg(s,o.deps)){i.memoizedState=Kl(e,n,a,s);return}}lt.flags|=t,i.memoizedState=Kl(1|e,n,a,s)}function Y0(t,e){return Bu(8390656,8,t,e)}function fg(t,e){return rh(2048,8,t,e)}function Vb(t,e){return rh(4,2,t,e)}function Fb(t,e){return rh(4,4,t,e)}function Ub(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $b(t,e,n){return n=n!=null?n.concat([t]):null,rh(4,4,Ub.bind(null,e,t),n)}function pg(){}function Bb(t,e){var n=is();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&dg(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function zb(t,e){var n=is();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&dg(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function qb(t,e,n){return Xi&21?(bs(n,e)||(n=Qw(),lt.lanes|=n,Yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nn=!0),t.memoizedState=n)}function Fk(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var s=Im.transition;Im.transition={};try{t(!1),e()}finally{Me=n,Im.transition=s}}function Hb(){return is().memoizedState}function Uk(t,e,n){var s=ii(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Wb(t))Kb(e,n);else if(n=Ib(t,e,n,s),n!==null){var i=pn();ws(n,t,s,i),Gb(n,e,s)}}function $k(t,e,n){var s=ii(t),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wb(t))Kb(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,bs(l,o)){var u=e.interleaved;u===null?(i.next=i,ag(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Ib(t,e,i,s),n!==null&&(i=pn(),ws(n,t,s,i),Gb(n,e,s))}}function Wb(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function Kb(t,e){yl=wd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gb(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Wp(t,n)}}var bd={readContext:rs,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},Bk={readContext:rs,useCallback:function(t,e){return Cs().memoizedState=[t,e===void 0?null:e],t},useContext:rs,useEffect:Y0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bu(4194308,4,Ub.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bu(4,2,t,e)},useMemo:function(t,e){var n=Cs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Cs();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=Uk.bind(null,lt,t),[s.memoizedState,t]},useRef:function(t){var e=Cs();return t={current:t},e.memoizedState=t},useState:X0,useDebugValue:pg,useDeferredValue:function(t){return Cs().memoizedState=t},useTransition:function(){var t=X0(!1),e=t[0];return t=Fk.bind(null,t[1]),Cs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=lt,i=Cs();if(it){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),Lt===null)throw Error(J(349));Xi&30||Rb(s,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Y0(Db.bind(null,s,a,t),[t]),s.flags|=2048,Kl(9,Pb.bind(null,s,a,n,e),void 0,null),n},useId:function(){var t=Cs(),e=Lt.identifierPrefix;if(it){var n=nr,s=tr;n=(s&~(1<<32-vs(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Vk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zk={readContext:rs,useCallback:Bb,useContext:rs,useEffect:fg,useImperativeHandle:$b,useInsertionEffect:Vb,useLayoutEffect:Fb,useMemo:zb,useReducer:Tm,useRef:Mb,useState:function(){return Tm(Wl)},useDebugValue:pg,useDeferredValue:function(t){var e=is();return qb(e,Tt.memoizedState,t)},useTransition:function(){var t=Tm(Wl)[0],e=is().memoizedState;return[t,e]},useMutableSource:Cb,useSyncExternalStore:Ab,useId:Hb,unstable_isNewReconciler:!1},qk={readContext:rs,useCallback:Bb,useContext:rs,useEffect:fg,useImperativeHandle:$b,useInsertionEffect:Vb,useLayoutEffect:Fb,useMemo:zb,useReducer:Sm,useRef:Mb,useState:function(){return Sm(Wl)},useDebugValue:pg,useDeferredValue:function(t){var e=is();return Tt===null?e.memoizedState=t:qb(e,Tt.memoizedState,t)},useTransition:function(){var t=Sm(Wl)[0],e=is().memoizedState;return[t,e]},useMutableSource:Cb,useSyncExternalStore:Ab,useId:Hb,unstable_isNewReconciler:!1};function ps(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mf(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ih={isMounted:function(t){return(t=t._reactInternals)?ca(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=pn(),i=ii(t),a=or(s,i);a.payload=e,n!=null&&(a.callback=n),e=si(t,a,i),e!==null&&(ws(e,t,i,s),Uu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=pn(),i=ii(t),a=or(s,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=si(t,a,i),e!==null&&(ws(e,t,i,s),Uu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pn(),s=ii(t),i=or(n,s);i.tag=2,e!=null&&(i.callback=e),e=si(t,i,s),e!==null&&(ws(e,t,s,n),Uu(e,t,s))}};function J0(t,e,n,s,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,o):e.prototype&&e.prototype.isPureReactComponent?!Fl(n,s)||!Fl(i,a):!0}function Qb(t,e,n){var s=!1,i=di,a=e.contextType;return typeof a=="object"&&a!==null?a=rs(a):(i=kn(e)?Gi:ln.current,s=e.contextTypes,a=(s=s!=null)?to(t,i):di),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ih,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Z0(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&ih.enqueueReplaceState(e,e.state,null)}function Vf(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},og(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=rs(a):(a=kn(e)?Gi:ln.current,i.context=to(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Mf(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ih.enqueueReplaceState(i,i.state,null),yd(t,n,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function io(t,e){try{var n="",s=e;do n+=y2(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Cm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ff(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Hk=typeof WeakMap=="function"?WeakMap:Map;function Xb(t,e,n){n=or(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Nd||(Nd=!0,Qf=s),Ff(t,e)},n}function Yb(t,e,n){n=or(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;n.payload=function(){return s(i)},n.callback=function(){Ff(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Ff(t,e),typeof s!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ey(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new Hk;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(i.add(n),t=iE.bind(null,t,e,n),e.then(t,t))}function ty(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ny(t,e,n,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=or(-1,1),e.tag=2,si(n,e,1))),n.lanes|=1),t)}var Wk=kr.ReactCurrentOwner,Nn=!1;function mn(t,e,n,s){e.child=t===null?Eb(e,null,n,s):so(e,t.child,n,s)}function sy(t,e,n,s,i){n=n.render;var a=e.ref;return Ga(e,i),s=hg(t,e,n,s,a,i),n=mg(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gr(t,e,i)):(it&&n&&eg(e),e.flags|=1,mn(t,e,s,i),e.child)}function ry(t,e,n,s,i){if(t===null){var a=n.type;return typeof a=="function"&&!Ng(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Jb(t,e,a,s,i)):(t=Wu(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Fl,n(o,s)&&t.ref===e.ref)return gr(t,e,i)}return e.flags|=1,t=ai(a,s),t.ref=e.ref,t.return=e,e.child=t}function Jb(t,e,n,s,i){if(t!==null){var a=t.memoizedProps;if(Fl(a,s)&&t.ref===e.ref)if(Nn=!1,e.pendingProps=s=a,(t.lanes&i)!==0)t.flags&131072&&(Nn=!0);else return e.lanes=t.lanes,gr(t,e,i)}return Uf(t,e,n,s,i)}function Zb(t,e,n){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge($a,An),An|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ge($a,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,Ge($a,An),An|=s}else a!==null?(s=a.baseLanes|n,e.memoizedState=null):s=n,Ge($a,An),An|=s;return mn(t,e,i,n),e.child}function e_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uf(t,e,n,s,i){var a=kn(n)?Gi:ln.current;return a=to(e,a),Ga(e,i),n=hg(t,e,n,s,a,i),s=mg(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gr(t,e,i)):(it&&s&&eg(e),e.flags|=1,mn(t,e,n,i),e.child)}function iy(t,e,n,s,i){if(kn(n)){var a=!0;md(e)}else a=!1;if(Ga(e,i),e.stateNode===null)zu(t,e),Qb(e,n,s),Vf(e,n,s,i),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=rs(d):(d=kn(n)?Gi:ln.current,d=to(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||u!==d)&&Z0(e,o,s,d),$r=!1;var g=e.memoizedState;o.state=g,yd(e,s,o,i),u=e.memoizedState,l!==s||g!==u||jn.current||$r?(typeof h=="function"&&(Mf(e,n,h,s),u=e.memoizedState),(l=$r||J0(e,n,l,s,g,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),o.props=s,o.state=u,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Tb(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:ps(e.type,l),o.props=d,f=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rs(u):(u=kn(n)?Gi:ln.current,u=to(e,u));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||g!==u)&&Z0(e,o,s,u),$r=!1,g=e.memoizedState,o.state=g,yd(e,s,o,i);var j=e.memoizedState;l!==f||g!==j||jn.current||$r?(typeof w=="function"&&(Mf(e,n,w,s),j=e.memoizedState),(d=$r||J0(e,n,d,s,g,j,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,j,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,j,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=j),o.props=s,o.state=j,o.context=u,s=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return $f(t,e,n,s,a,i)}function $f(t,e,n,s,i,a){e_(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&q0(e,n,!1),gr(t,e,a);s=e.stateNode,Wk.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=so(e,t.child,null,a),e.child=so(e,null,l,a)):mn(t,e,l,a),e.memoizedState=s.state,i&&q0(e,n,!0),e.child}function t_(t){var e=t.stateNode;e.pendingContext?z0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&z0(t,e.context,!1),lg(t,e.containerInfo)}function ay(t,e,n,s,i){return no(),ng(i),e.flags|=256,mn(t,e,n,s),e.child}var Bf={dehydrated:null,treeContext:null,retryLane:0};function zf(t){return{baseLanes:t,cachePool:null,transitions:null}}function n_(t,e,n){var s=e.pendingProps,i=ot.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ge(ot,i&1),t===null)return Of(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,a?(s=e.mode,a=e.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=lh(o,s,0,null),t=zi(t,s,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=zf(n),e.memoizedState=Bf,t):gg(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Kk(t,e,o,s,l,i,n);if(a){a=s.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=u,e.deletions=null):(s=ai(i,u),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=ai(l,a):(a=zi(a,o,n,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,o=t.child.memoizedState,o=o===null?zf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Bf,s}return a=t.child,t=a.sibling,s=ai(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function gg(t,e){return e=lh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vu(t,e,n,s){return s!==null&&ng(s),so(e,t.child,null,n),t=gg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Kk(t,e,n,s,i,a,o){if(n)return e.flags&256?(e.flags&=-257,s=Cm(Error(J(422))),vu(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,i=e.mode,s=lh({mode:"visible",children:s.children},i,0,null),a=zi(a,i,o,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&so(e,t.child,null,o),e.child.memoizedState=zf(o),e.memoizedState=Bf,a);if(!(e.mode&1))return vu(t,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(J(419)),s=Cm(a,s,void 0),vu(t,e,o,s)}if(l=(o&t.childLanes)!==0,Nn||l){if(s=Lt,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,pr(t,i),ws(s,t,i,-1))}return _g(),s=Cm(Error(J(421))),vu(t,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=aE.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Pn=ni(i.nextSibling),Ln=e,it=!0,xs=null,t!==null&&(Gn[Qn++]=tr,Gn[Qn++]=nr,Gn[Qn++]=Qi,tr=t.id,nr=t.overflow,Qi=e),e=gg(e,s.children),e.flags|=4096,e)}function oy(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Lf(t.return,e,n)}function Am(t,e,n,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function s_(t,e,n){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(mn(t,e,s.children,n),s=ot.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oy(t,n,e);else if(t.tag===19)oy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Ge(ot,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&vd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Am(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Am(e,!0,n,null,a);break;case"together":Am(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Gk(t,e,n){switch(e.tag){case 3:t_(e),no();break;case 5:Sb(e);break;case 1:kn(e.type)&&md(e);break;case 4:lg(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Ge(gd,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ge(ot,ot.current&1),e.flags|=128,null):n&e.child.childLanes?n_(t,e,n):(Ge(ot,ot.current&1),t=gr(t,e,n),t!==null?t.sibling:null);Ge(ot,ot.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return s_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ge(ot,ot.current),s)break;return null;case 22:case 23:return e.lanes=0,Zb(t,e,n)}return gr(t,e,n)}var r_,qf,i_,a_;r_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qf=function(){};i_=function(t,e,n,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,Ui(Os.current);var a=null;switch(n){case"input":i=hf(t,i),s=hf(t,s),a=[];break;case"select":i=ct({},i,{value:void 0}),s=ct({},s,{value:void 0}),a=[];break;case"textarea":i=pf(t,i),s=pf(t,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=dd)}xf(n,s);var o;n=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Rl.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var u=s[d];if(l=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Rl.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ze("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};a_=function(t,e,n,s){n!==s&&(e.flags|=4)};function Zo(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Qk(t,e,n){var s=e.pendingProps;switch(tg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return kn(e.type)&&hd(),Zt(e),null;case 3:return s=e.stateNode,ro(),nt(jn),nt(ln),ug(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(xu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xs!==null&&(Jf(xs),xs=null))),qf(t,e),Zt(e),null;case 5:cg(e);var i=Ui(ql.current);if(n=e.type,t!==null&&e.stateNode!=null)i_(t,e,n,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(J(166));return Zt(e),null}if(t=Ui(Os.current),xu(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[As]=e,s[Bl]=a,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",s),Ze("close",s);break;case"iframe":case"object":case"embed":Ze("load",s);break;case"video":case"audio":for(i=0;i<al.length;i++)Ze(al[i],s);break;case"source":Ze("error",s);break;case"img":case"image":case"link":Ze("error",s),Ze("load",s);break;case"details":Ze("toggle",s);break;case"input":g0(s,a),Ze("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Ze("invalid",s);break;case"textarea":y0(s,a),Ze("invalid",s)}xf(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&gu(s.textContent,l,t),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&gu(s.textContent,l,t),i=["children",""+l]):Rl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ze("scroll",s)}switch(n){case"input":lu(s),x0(s,a,!0);break;case"textarea":lu(s),v0(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=dd)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[As]=e,t[Bl]=s,r_(t,e,!1,!1),e.stateNode=t;e:{switch(o=yf(n,s),n){case"dialog":Ze("cancel",t),Ze("close",t),i=s;break;case"iframe":case"object":case"embed":Ze("load",t),i=s;break;case"video":case"audio":for(i=0;i<al.length;i++)Ze(al[i],t);i=s;break;case"source":Ze("error",t),i=s;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),i=s;break;case"details":Ze("toggle",t),i=s;break;case"input":g0(t,s),i=hf(t,s),Ze("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=ct({},s,{value:void 0}),Ze("invalid",t);break;case"textarea":y0(t,s),i=pf(t,s),Ze("invalid",t);break;default:i=s}xf(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?Mw(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ow(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Pl(t,u):typeof u=="number"&&Pl(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Rl.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Ze("scroll",t):u!=null&&Up(t,a,u,o))}switch(n){case"input":lu(t),x0(t,s,!1);break;case"textarea":lu(t),v0(t);break;case"option":s.value!=null&&t.setAttribute("value",""+ui(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?qa(t,!!s.multiple,a,!1):s.defaultValue!=null&&qa(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dd)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)a_(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(J(166));if(n=Ui(ql.current),Ui(Os.current),xu(e)){if(s=e.stateNode,n=e.memoizedProps,s[As]=e,(a=s.nodeValue!==n)&&(t=Ln,t!==null))switch(t.tag){case 3:gu(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gu(s.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[As]=e,e.stateNode=s}return Zt(e),null;case 13:if(nt(ot),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Pn!==null&&e.mode&1&&!(e.flags&128))jb(),no(),e.flags|=98560,a=!1;else if(a=xu(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(J(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(J(317));a[As]=e}else no(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),a=!1}else xs!==null&&(Jf(xs),xs=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||ot.current&1?St===0&&(St=3):_g())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return ro(),qf(t,e),t===null&&Ul(e.stateNode.containerInfo),Zt(e),null;case 10:return ig(e.type._context),Zt(e),null;case 17:return kn(e.type)&&hd(),Zt(e),null;case 19:if(nt(ot),a=e.memoizedState,a===null)return Zt(e),null;if(s=(e.flags&128)!==0,o=a.rendering,o===null)if(s)Zo(a,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vd(t),o!==null){for(e.flags|=128,Zo(a,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)a=n,t=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ge(ot,ot.current&1|2),e.child}t=t.sibling}a.tail!==null&&xt()>ao&&(e.flags|=128,s=!0,Zo(a,!1),e.lanes=4194304)}else{if(!s)if(t=vd(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!it)return Zt(e),null}else 2*xt()-a.renderingStartTime>ao&&n!==1073741824&&(e.flags|=128,s=!0,Zo(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=xt(),e.sibling=null,n=ot.current,Ge(ot,s?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return bg(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?An&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function Xk(t,e){switch(tg(e),e.tag){case 1:return kn(e.type)&&hd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ro(),nt(jn),nt(ln),ug(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cg(e),null;case 13:if(nt(ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));no()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(ot),null;case 4:return ro(),null;case 10:return ig(e.type._context),null;case 22:case 23:return bg(),null;case 24:return null;default:return null}}var wu=!1,nn=!1,Yk=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Ua(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){ft(t,e,s)}else n.current=null}function Hf(t,e,n){try{n()}catch(s){ft(t,e,s)}}var ly=!1;function Jk(t,e){if(Tf=ld,t=db(),Zp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,f=t,g=null;t:for(;;){for(var w;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==a||s!==0&&f.nodeType!==3||(u=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(w=f.firstChild)!==null;)g=f,f=w;for(;;){if(f===t)break t;if(g===n&&++d===i&&(l=o),g===a&&++h===s&&(u=o),(w=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sf={focusedElem:t,selectionRange:n},ld=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var A=j.memoizedProps,I=j.memoizedState,k=e.stateNode,v=k.getSnapshotBeforeUpdate(e.elementType===e.type?A:ps(e.type,A),I);k.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(T){ft(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return j=ly,ly=!1,j}function vl(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Hf(e,n,a)}i=i.next}while(i!==s)}}function ah(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Wf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o_(t){var e=t.alternate;e!==null&&(t.alternate=null,o_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[As],delete e[Bl],delete e[Rf],delete e[Dk],delete e[Ok])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l_(t){return t.tag===5||t.tag===3||t.tag===4}function cy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kf(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dd));else if(s!==4&&(t=t.child,t!==null))for(Kf(t,e,n),t=t.sibling;t!==null;)Kf(t,e,n),t=t.sibling}function Gf(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Gf(t,e,n),t=t.sibling;t!==null;)Gf(t,e,n),t=t.sibling}var Ut=null,gs=!1;function Vr(t,e,n){for(n=n.child;n!==null;)c_(t,e,n),n=n.sibling}function c_(t,e,n){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(Jd,n)}catch{}switch(n.tag){case 5:nn||Ua(n,e);case 6:var s=Ut,i=gs;Ut=null,Vr(t,e,n),Ut=s,gs=i,Ut!==null&&(gs?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(gs?(t=Ut,n=n.stateNode,t.nodeType===8?jm(t.parentNode,n):t.nodeType===1&&jm(t,n),Ml(t)):jm(Ut,n.stateNode));break;case 4:s=Ut,i=gs,Ut=n.stateNode.containerInfo,gs=!0,Vr(t,e,n),Ut=s,gs=i;break;case 0:case 11:case 14:case 15:if(!nn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Hf(n,e,o),i=i.next}while(i!==s)}Vr(t,e,n);break;case 1:if(!nn&&(Ua(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){ft(n,e,l)}Vr(t,e,n);break;case 21:Vr(t,e,n);break;case 22:n.mode&1?(nn=(s=nn)||n.memoizedState!==null,Vr(t,e,n),nn=s):Vr(t,e,n);break;default:Vr(t,e,n)}}function uy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Yk),e.forEach(function(s){var i=oE.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}}function fs(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ut=l.stateNode,gs=!1;break e;case 3:Ut=l.stateNode.containerInfo,gs=!0;break e;case 4:Ut=l.stateNode.containerInfo,gs=!0;break e}l=l.return}if(Ut===null)throw Error(J(160));c_(a,o,i),Ut=null,gs=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){ft(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)u_(e,t),e=e.sibling}function u_(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fs(e,t),Ss(t),s&4){try{vl(3,t,t.return),ah(3,t)}catch(A){ft(t,t.return,A)}try{vl(5,t,t.return)}catch(A){ft(t,t.return,A)}}break;case 1:fs(e,t),Ss(t),s&512&&n!==null&&Ua(n,n.return);break;case 5:if(fs(e,t),Ss(t),s&512&&n!==null&&Ua(n,n.return),t.flags&32){var i=t.stateNode;try{Pl(i,"")}catch(A){ft(t,t.return,A)}}if(s&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Rw(i,a),yf(l,o);var d=yf(l,a);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?Mw(i,f):h==="dangerouslySetInnerHTML"?Ow(i,f):h==="children"?Pl(i,f):Up(i,h,f,d)}switch(l){case"input":mf(i,a);break;case"textarea":Pw(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var w=a.value;w!=null?qa(i,!!a.multiple,w,!1):g!==!!a.multiple&&(a.defaultValue!=null?qa(i,!!a.multiple,a.defaultValue,!0):qa(i,!!a.multiple,a.multiple?[]:"",!1))}i[Bl]=a}catch(A){ft(t,t.return,A)}}break;case 6:if(fs(e,t),Ss(t),s&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(A){ft(t,t.return,A)}}break;case 3:if(fs(e,t),Ss(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ml(e.containerInfo)}catch(A){ft(t,t.return,A)}break;case 4:fs(e,t),Ss(t);break;case 13:fs(e,t),Ss(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(vg=xt())),s&4&&uy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(nn=(d=nn)||h,fs(e,t),nn=d):fs(e,t),Ss(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(f=ae=h;ae!==null;){switch(g=ae,w=g.child,g.tag){case 0:case 11:case 14:case 15:vl(4,g,g.return);break;case 1:Ua(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){s=g,n=g.return;try{e=s,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(A){ft(s,n,A)}}break;case 5:Ua(g,g.return);break;case 22:if(g.memoizedState!==null){hy(f);continue}}w!==null?(w.return=g,ae=w):hy(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Lw("display",o))}catch(A){ft(t,t.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(A){ft(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fs(e,t),Ss(t),s&4&&uy(t);break;case 21:break;default:fs(e,t),Ss(t)}}function Ss(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(l_(n)){var s=n;break e}n=n.return}throw Error(J(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Pl(i,""),s.flags&=-33);var a=cy(t);Gf(t,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=cy(t);Kf(t,l,o);break;default:throw Error(J(161))}}catch(u){ft(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Zk(t,e,n){ae=t,d_(t)}function d_(t,e,n){for(var s=(t.mode&1)!==0;ae!==null;){var i=ae,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||wu;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||nn;l=wu;var d=nn;if(wu=o,(nn=u)&&!d)for(ae=i;ae!==null;)o=ae,u=o.child,o.tag===22&&o.memoizedState!==null?my(i):u!==null?(u.return=o,ae=u):my(i);for(;a!==null;)ae=a,d_(a),a=a.sibling;ae=i,wu=l,nn=d}dy(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ae=a):dy(t)}}function dy(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nn||ah(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!nn)if(n===null)s.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ps(e.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Q0(e,a,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Q0(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ml(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}nn||e.flags&512&&Wf(e)}catch(g){ft(e,e.return,g)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function hy(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function my(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ah(4,e)}catch(u){ft(e,n,u)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(u){ft(e,i,u)}}var a=e.return;try{Wf(e)}catch(u){ft(e,a,u)}break;case 5:var o=e.return;try{Wf(e)}catch(u){ft(e,o,u)}}}catch(u){ft(e,e.return,u)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var eE=Math.ceil,_d=kr.ReactCurrentDispatcher,xg=kr.ReactCurrentOwner,Zn=kr.ReactCurrentBatchConfig,Se=0,Lt=null,Nt=null,qt=0,An=0,$a=yi(0),St=0,Gl=null,Yi=0,oh=0,yg=0,wl=null,bn=null,vg=0,ao=1/0,Js=null,Nd=!1,Qf=null,ri=null,bu=!1,Xr=null,jd=0,bl=0,Xf=null,qu=-1,Hu=0;function pn(){return Se&6?xt():qu!==-1?qu:qu=xt()}function ii(t){return t.mode&1?Se&2&&qt!==0?qt&-qt:Mk.transition!==null?(Hu===0&&(Hu=Qw()),Hu):(t=Me,t!==0||(t=window.event,t=t===void 0?16:nb(t.type)),t):1}function ws(t,e,n,s){if(50<bl)throw bl=0,Xf=null,Error(J(185));xc(t,n,s),(!(Se&2)||t!==Lt)&&(t===Lt&&(!(Se&2)&&(oh|=n),St===4&&zr(t,qt)),En(t,s),n===1&&Se===0&&!(e.mode&1)&&(ao=xt()+500,sh&&vi()))}function En(t,e){var n=t.callbackNode;M2(t,e);var s=od(t,t===Lt?qt:0);if(s===0)n!==null&&_0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&_0(n),e===1)t.tag===0?Lk(fy.bind(null,t)):bb(fy.bind(null,t)),Rk(function(){!(Se&6)&&vi()}),n=null;else{switch(Xw(s)){case 1:n=Hp;break;case 4:n=Kw;break;case 16:n=ad;break;case 536870912:n=Gw;break;default:n=ad}n=v_(n,h_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function h_(t,e){if(qu=-1,Hu=0,Se&6)throw Error(J(327));var n=t.callbackNode;if(Qa()&&t.callbackNode!==n)return null;var s=od(t,t===Lt?qt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=kd(t,s);else{e=s;var i=Se;Se|=2;var a=f_();(Lt!==t||qt!==e)&&(Js=null,ao=xt()+500,Bi(t,e));do try{sE();break}catch(l){m_(t,l)}while(!0);rg(),_d.current=a,Se=i,Nt!==null?e=0:(Lt=null,qt=0,e=St)}if(e!==0){if(e===2&&(i=Nf(t),i!==0&&(s=i,e=Yf(t,i))),e===1)throw n=Gl,Bi(t,0),zr(t,s),En(t,xt()),n;if(e===6)zr(t,s);else{if(i=t.current.alternate,!(s&30)&&!tE(i)&&(e=kd(t,s),e===2&&(a=Nf(t),a!==0&&(s=a,e=Yf(t,a))),e===1))throw n=Gl,Bi(t,0),zr(t,s),En(t,xt()),n;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(J(345));case 2:Oi(t,bn,Js);break;case 3:if(zr(t,s),(s&130023424)===s&&(e=vg+500-xt(),10<e)){if(od(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){pn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Af(Oi.bind(null,t,bn,Js),e);break}Oi(t,bn,Js);break;case 4:if(zr(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var o=31-vs(s);a=1<<o,o=e[o],o>i&&(i=o),s&=~a}if(s=i,s=xt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*eE(s/1960))-s,10<s){t.timeoutHandle=Af(Oi.bind(null,t,bn,Js),s);break}Oi(t,bn,Js);break;case 5:Oi(t,bn,Js);break;default:throw Error(J(329))}}}return En(t,xt()),t.callbackNode===n?h_.bind(null,t):null}function Yf(t,e){var n=wl;return t.current.memoizedState.isDehydrated&&(Bi(t,e).flags|=256),t=kd(t,e),t!==2&&(e=bn,bn=n,e!==null&&Jf(e)),t}function Jf(t){bn===null?bn=t:bn.push.apply(bn,t)}function tE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!bs(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zr(t,e){for(e&=~yg,e&=~oh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vs(e),s=1<<n;t[n]=-1,e&=~s}}function fy(t){if(Se&6)throw Error(J(327));Qa();var e=od(t,0);if(!(e&1))return En(t,xt()),null;var n=kd(t,e);if(t.tag!==0&&n===2){var s=Nf(t);s!==0&&(e=s,n=Yf(t,s))}if(n===1)throw n=Gl,Bi(t,0),zr(t,e),En(t,xt()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Oi(t,bn,Js),En(t,xt()),null}function wg(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(ao=xt()+500,sh&&vi())}}function Ji(t){Xr!==null&&Xr.tag===0&&!(Se&6)&&Qa();var e=Se;Se|=1;var n=Zn.transition,s=Me;try{if(Zn.transition=null,Me=1,t)return t()}finally{Me=s,Zn.transition=n,Se=e,!(Se&6)&&vi()}}function bg(){An=$a.current,nt($a)}function Bi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ak(n)),Nt!==null)for(n=Nt.return;n!==null;){var s=n;switch(tg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&hd();break;case 3:ro(),nt(jn),nt(ln),ug();break;case 5:cg(s);break;case 4:ro();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:ig(s.type._context);break;case 22:case 23:bg()}n=n.return}if(Lt=t,Nt=t=ai(t.current,null),qt=An=e,St=0,Gl=null,yg=oh=Yi=0,bn=wl=null,Fi!==null){for(e=0;e<Fi.length;e++)if(n=Fi[e],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}n.pending=s}Fi=null}return t}function m_(t,e){do{var n=Nt;try{if(rg(),$u.current=bd,wd){for(var s=lt.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}wd=!1}if(Xi=0,Pt=Tt=lt=null,yl=!1,Hl=0,xg.current=null,n===null||n.return===null){St=1,Gl=e,Nt=null;break}e:{var a=t,o=n.return,l=n,u=e;if(e=qt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=ty(o);if(w!==null){w.flags&=-257,ny(w,o,l,a,e),w.mode&1&&ey(a,d,e),e=w,u=d;var j=e.updateQueue;if(j===null){var A=new Set;A.add(u),e.updateQueue=A}else j.add(u);break e}else{if(!(e&1)){ey(a,d,e),_g();break e}u=Error(J(426))}}else if(it&&l.mode&1){var I=ty(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),ny(I,o,l,a,e),ng(io(u,l));break e}}a=u=io(u,l),St!==4&&(St=2),wl===null?wl=[a]:wl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var k=Xb(a,u,e);G0(a,k);break e;case 1:l=u;var v=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ri===null||!ri.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var T=Yb(a,l,e);G0(a,T);break e}}a=a.return}while(a!==null)}g_(n)}catch(O){e=O,Nt===n&&n!==null&&(Nt=n=n.return);continue}break}while(!0)}function f_(){var t=_d.current;return _d.current=bd,t===null?bd:t}function _g(){(St===0||St===3||St===2)&&(St=4),Lt===null||!(Yi&268435455)&&!(oh&268435455)||zr(Lt,qt)}function kd(t,e){var n=Se;Se|=2;var s=f_();(Lt!==t||qt!==e)&&(Js=null,Bi(t,e));do try{nE();break}catch(i){m_(t,i)}while(!0);if(rg(),Se=n,_d.current=s,Nt!==null)throw Error(J(261));return Lt=null,qt=0,St}function nE(){for(;Nt!==null;)p_(Nt)}function sE(){for(;Nt!==null&&!T2();)p_(Nt)}function p_(t){var e=y_(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?g_(t):Nt=e,xg.current=null}function g_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Xk(n,e),n!==null){n.flags&=32767,Nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,Nt=null;return}}else if(n=Qk(n,e,An),n!==null){Nt=n;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);St===0&&(St=5)}function Oi(t,e,n){var s=Me,i=Zn.transition;try{Zn.transition=null,Me=1,rE(t,e,n,s)}finally{Zn.transition=i,Me=s}return null}function rE(t,e,n,s){do Qa();while(Xr!==null);if(Se&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(V2(t,a),t===Lt&&(Nt=Lt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bu||(bu=!0,v_(ad,function(){return Qa(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Zn.transition,Zn.transition=null;var o=Me;Me=1;var l=Se;Se|=4,xg.current=null,Jk(t,n),u_(n,t),jk(Sf),ld=!!Tf,Sf=Tf=null,t.current=n,Zk(n),S2(),Se=l,Me=o,Zn.transition=a}else t.current=n;if(bu&&(bu=!1,Xr=t,jd=i),a=t.pendingLanes,a===0&&(ri=null),R2(n.stateNode),En(t,xt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(Nd)throw Nd=!1,t=Qf,Qf=null,t;return jd&1&&t.tag!==0&&Qa(),a=t.pendingLanes,a&1?t===Xf?bl++:(bl=0,Xf=t):bl=0,vi(),null}function Qa(){if(Xr!==null){var t=Xw(jd),e=Zn.transition,n=Me;try{if(Zn.transition=null,Me=16>t?16:t,Xr===null)var s=!1;else{if(t=Xr,Xr=null,jd=0,Se&6)throw Error(J(331));var i=Se;for(Se|=4,ae=t.current;ae!==null;){var a=ae,o=a.child;if(ae.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(ae=d;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:vl(8,h,a)}var f=h.child;if(f!==null)f.return=h,ae=f;else for(;ae!==null;){h=ae;var g=h.sibling,w=h.return;if(o_(h),h===d){ae=null;break}if(g!==null){g.return=w,ae=g;break}ae=w}}}var j=a.alternate;if(j!==null){var A=j.child;if(A!==null){j.child=null;do{var I=A.sibling;A.sibling=null,A=I}while(A!==null)}}ae=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ae=o;else e:for(;ae!==null;){if(a=ae,a.flags&2048)switch(a.tag){case 0:case 11:case 15:vl(9,a,a.return)}var k=a.sibling;if(k!==null){k.return=a.return,ae=k;break e}ae=a.return}}var v=t.current;for(ae=v;ae!==null;){o=ae;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ae=_;else e:for(o=v;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ah(9,l)}}catch(O){ft(l,l.return,O)}if(l===o){ae=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,ae=T;break e}ae=l.return}}if(Se=i,vi(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(Jd,t)}catch{}s=!0}return s}finally{Me=n,Zn.transition=e}}return!1}function py(t,e,n){e=io(n,e),e=Xb(t,e,1),t=si(t,e,1),e=pn(),t!==null&&(xc(t,1,e),En(t,e))}function ft(t,e,n){if(t.tag===3)py(t,t,n);else for(;e!==null;){if(e.tag===3){py(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ri===null||!ri.has(s))){t=io(n,t),t=Yb(e,t,1),e=si(e,t,1),t=pn(),e!==null&&(xc(e,1,t),En(e,t));break}}e=e.return}}function iE(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=pn(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(qt&n)===n&&(St===4||St===3&&(qt&130023424)===qt&&500>xt()-vg?Bi(t,0):yg|=n),En(t,e)}function x_(t,e){e===0&&(t.mode&1?(e=du,du<<=1,!(du&130023424)&&(du=4194304)):e=1);var n=pn();t=pr(t,e),t!==null&&(xc(t,e,n),En(t,n))}function aE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),x_(t,n)}function oE(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(J(314))}s!==null&&s.delete(e),x_(t,n)}var y_;y_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jn.current)Nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nn=!1,Gk(t,e,n);Nn=!!(t.flags&131072)}else Nn=!1,it&&e.flags&1048576&&_b(e,pd,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;zu(t,e),t=e.pendingProps;var i=to(e,ln.current);Ga(e,n),i=hg(null,e,s,t,i,n);var a=mg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(s)?(a=!0,md(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,og(e),i.updater=ih,e.stateNode=i,i._reactInternals=e,Vf(e,s,t,n),e=$f(null,e,s,!0,a,n)):(e.tag=0,it&&a&&eg(e),mn(null,e,i,n),e=e.child),e;case 16:s=e.elementType;e:{switch(zu(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=cE(s),t=ps(s,t),i){case 0:e=Uf(null,e,s,t,n);break e;case 1:e=iy(null,e,s,t,n);break e;case 11:e=sy(null,e,s,t,n);break e;case 14:e=ry(null,e,s,ps(s.type,t),n);break e}throw Error(J(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:ps(s,i),Uf(t,e,s,i,n);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:ps(s,i),iy(t,e,s,i,n);case 3:e:{if(t_(e),t===null)throw Error(J(387));s=e.pendingProps,a=e.memoizedState,i=a.element,Tb(t,e),yd(e,s,null,n);var o=e.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=io(Error(J(423)),e),e=ay(t,e,s,n,i);break e}else if(s!==i){i=io(Error(J(424)),e),e=ay(t,e,s,n,i);break e}else for(Pn=ni(e.stateNode.containerInfo.firstChild),Ln=e,it=!0,xs=null,n=Eb(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(no(),s===i){e=gr(t,e,n);break e}mn(t,e,s,n)}e=e.child}return e;case 5:return Sb(e),t===null&&Of(e),s=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Cf(s,i)?o=null:a!==null&&Cf(s,a)&&(e.flags|=32),e_(t,e),mn(t,e,o,n),e.child;case 6:return t===null&&Of(e),null;case 13:return n_(t,e,n);case 4:return lg(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=so(e,null,s,n):mn(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:ps(s,i),sy(t,e,s,i,n);case 7:return mn(t,e,e.pendingProps,n),e.child;case 8:return mn(t,e,e.pendingProps.children,n),e.child;case 12:return mn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Ge(gd,s._currentValue),s._currentValue=o,a!==null)if(bs(a.value,o)){if(a.children===i.children&&!jn.current){e=gr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===s){if(a.tag===1){u=or(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Lf(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(J(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Lf(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}mn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Ga(e,n),i=rs(i),s=s(i),e.flags|=1,mn(t,e,s,n),e.child;case 14:return s=e.type,i=ps(s,e.pendingProps),i=ps(s.type,i),ry(t,e,s,i,n);case 15:return Jb(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:ps(s,i),zu(t,e),e.tag=1,kn(s)?(t=!0,md(e)):t=!1,Ga(e,n),Qb(e,s,i),Vf(e,s,i,n),$f(null,e,s,!0,t,n);case 19:return s_(t,e,n);case 22:return Zb(t,e,n)}throw Error(J(156,e.tag))};function v_(t,e){return Ww(t,e)}function lE(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,e,n,s){return new lE(t,e,n,s)}function Ng(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cE(t){if(typeof t=="function")return Ng(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bp)return 11;if(t===zp)return 14}return 2}function ai(t,e){var n=t.alternate;return n===null?(n=Yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wu(t,e,n,s,i,a){var o=2;if(s=t,typeof t=="function")Ng(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Aa:return zi(n.children,i,a,e);case $p:o=8,i|=8;break;case lf:return t=Yn(12,n,e,i|2),t.elementType=lf,t.lanes=a,t;case cf:return t=Yn(13,n,e,i),t.elementType=cf,t.lanes=a,t;case uf:return t=Yn(19,n,e,i),t.elementType=uf,t.lanes=a,t;case Sw:return lh(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Iw:o=10;break e;case Tw:o=9;break e;case Bp:o=11;break e;case zp:o=14;break e;case Ur:o=16,s=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Yn(o,n,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function zi(t,e,n,s){return t=Yn(7,t,s,e),t.lanes=n,t}function lh(t,e,n,s){return t=Yn(22,t,s,e),t.elementType=Sw,t.lanes=n,t.stateNode={isHidden:!1},t}function Rm(t,e,n){return t=Yn(6,t,null,e),t.lanes=n,t}function Pm(t,e,n){return e=Yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uE(t,e,n,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mm(0),this.expirationTimes=mm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mm(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jg(t,e,n,s,i,a,o,l,u){return t=new uE(t,e,n,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Yn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},og(a),t}function dE(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ca,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function w_(t){if(!t)return di;t=t._reactInternals;e:{if(ca(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(kn(n))return wb(t,n,e)}return e}function b_(t,e,n,s,i,a,o,l,u){return t=jg(n,s,!0,t,i,a,o,l,u),t.context=w_(null),n=t.current,s=pn(),i=ii(n),a=or(s,i),a.callback=e??null,si(n,a,i),t.current.lanes=i,xc(t,i,s),En(t,s),t}function ch(t,e,n,s){var i=e.current,a=pn(),o=ii(i);return n=w_(n),e.context===null?e.context=n:e.pendingContext=n,e=or(a,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=si(i,e,o),t!==null&&(ws(t,i,o,a),Uu(t,i,o)),o}function Ed(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kg(t,e){gy(t,e),(t=t.alternate)&&gy(t,e)}function hE(){return null}var __=typeof reportError=="function"?reportError:function(t){console.error(t)};function Eg(t){this._internalRoot=t}uh.prototype.render=Eg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));ch(t,e,null,null)};uh.prototype.unmount=Eg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ji(function(){ch(null,t,null,null)}),e[fr]=null}};function uh(t){this._internalRoot=t}uh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Br.length&&e!==0&&e<Br[n].priority;n++);Br.splice(n,0,t),n===0&&tb(t)}};function Ig(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xy(){}function mE(t,e,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=Ed(o);a.call(d)}}var o=b_(e,s,t,0,null,!1,!1,"",xy);return t._reactRootContainer=o,t[fr]=o.current,Ul(t.nodeType===8?t.parentNode:t),Ji(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var d=Ed(u);l.call(d)}}var u=jg(t,0,!1,null,null,!1,!1,"",xy);return t._reactRootContainer=u,t[fr]=u.current,Ul(t.nodeType===8?t.parentNode:t),Ji(function(){ch(e,u,n,s)}),u}function hh(t,e,n,s,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var u=Ed(o);l.call(u)}}ch(e,o,t,i)}else o=mE(n,e,t,i,s);return Ed(o)}Yw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(Wp(e,n|1),En(e,xt()),!(Se&6)&&(ao=xt()+500,vi()))}break;case 13:Ji(function(){var s=pr(t,1);if(s!==null){var i=pn();ws(s,t,1,i)}}),kg(t,1)}};Kp=function(t){if(t.tag===13){var e=pr(t,134217728);if(e!==null){var n=pn();ws(e,t,134217728,n)}kg(t,134217728)}};Jw=function(t){if(t.tag===13){var e=ii(t),n=pr(t,e);if(n!==null){var s=pn();ws(n,t,e,s)}kg(t,e)}};Zw=function(){return Me};eb=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};wf=function(t,e,n){switch(e){case"input":if(mf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=nh(s);if(!i)throw Error(J(90));Aw(s),mf(s,i)}}}break;case"textarea":Pw(t,n);break;case"select":e=n.value,e!=null&&qa(t,!!n.multiple,e,!1)}};Uw=wg;$w=Ji;var fE={usingClientEntryPoint:!1,Events:[vc,Oa,nh,Vw,Fw,wg]},el={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pE={bundleType:el.bundleType,version:el.version,rendererPackageName:el.rendererPackageName,rendererConfig:el.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qw(t),t===null?null:t.stateNode},findFiberByHostInstance:el.findFiberByHostInstance||hE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_u.isDisabled&&_u.supportsFiber)try{Jd=_u.inject(pE),Ds=_u}catch{}}Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fE;Un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ig(e))throw Error(J(200));return dE(t,e,null,n)};Un.createRoot=function(t,e){if(!Ig(t))throw Error(J(299));var n=!1,s="",i=__;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=jg(t,1,!1,null,null,n,!1,s,i),t[fr]=e.current,Ul(t.nodeType===8?t.parentNode:t),new Eg(e)};Un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=qw(e),t=t===null?null:t.stateNode,t};Un.flushSync=function(t){return Ji(t)};Un.hydrate=function(t,e,n){if(!dh(e))throw Error(J(200));return hh(null,t,e,!0,n)};Un.hydrateRoot=function(t,e,n){if(!Ig(t))throw Error(J(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",o=__;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=b_(e,null,t,1,n??null,i,!1,a,o),t[fr]=e.current,Ul(t),s)for(t=0;t<s.length;t++)n=s[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new uh(e)};Un.render=function(t,e,n){if(!dh(e))throw Error(J(200));return hh(null,t,e,!1,n)};Un.unmountComponentAtNode=function(t){if(!dh(t))throw Error(J(40));return t._reactRootContainer?(Ji(function(){hh(null,null,t,!1,function(){t._reactRootContainer=null,t[fr]=null})}),!0):!1};Un.unstable_batchedUpdates=wg;Un.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!dh(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return hh(t,e,n,!1,s)};Un.version="18.3.1-next-f1338f8080-20240426";function N_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N_)}catch(t){console.error(t)}}N_(),Nw.exports=Un;var gE=Nw.exports,yy=gE;af.createRoot=yy.createRoot,af.hydrateRoot=yy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ql.apply(this,arguments)}var Yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yr||(Yr={}));const vy="popstate";function xE(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:o,hash:l}=s.location;return Zf("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:Id(i)}return vE(e,n,null,t)}function yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function j_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yE(){return Math.random().toString(36).substr(2,8)}function wy(t,e){return{usr:t.state,key:t.key,idx:e}}function Zf(t,e,n,s){return n===void 0&&(n=null),Ql({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vo(e):e,{state:n,key:e&&e.key||s||yE()})}function Id(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function vE(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,l=Yr.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Ql({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=Yr.Pop;let I=h(),k=I==null?null:I-d;d=I,u&&u({action:l,location:A.location,delta:k})}function g(I,k){l=Yr.Push;let v=Zf(A.location,I,k);d=h()+1;let _=wy(v,d),T=A.createHref(v);try{o.pushState(_,"",T)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(T)}a&&u&&u({action:l,location:A.location,delta:1})}function w(I,k){l=Yr.Replace;let v=Zf(A.location,I,k);d=h();let _=wy(v,d),T=A.createHref(v);o.replaceState(_,"",T),a&&u&&u({action:l,location:A.location,delta:0})}function j(I){let k=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof I=="string"?I:Id(I);return v=v.replace(/ $/,"%20"),yt(k,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,k)}let A={get action(){return l},get location(){return t(i,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(vy,f),u=I,()=>{i.removeEventListener(vy,f),u=null}},createHref(I){return e(i,I)},createURL:j,encodeLocation(I){let k=j(I);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:w,go(I){return o.go(I)}};return A}var by;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(by||(by={}));function wE(t,e,n){return n===void 0&&(n="/"),bE(t,e,n)}function bE(t,e,n,s){let i=typeof e=="string"?vo(e):e,a=Tg(i.pathname||"/",n);if(a==null)return null;let o=k_(t);_E(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=DE(a);l=AE(o[u],d)}return l}function k_(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(yt(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let d=oi([s,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(yt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),k_(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:SE(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of E_(a.path))i(a,o,u)}),e}function E_(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=E_(s.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function _E(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:CE(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const NE=/^:[\w-]+$/,jE=3,kE=2,EE=1,IE=10,TE=-2,_y=t=>t==="*";function SE(t,e){let n=t.split("/"),s=n.length;return n.some(_y)&&(s+=TE),e&&(s+=kE),n.filter(i=>!_y(i)).reduce((i,a)=>i+(NE.test(a)?jE:a===""?EE:IE),s)}function CE(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function AE(t,e,n){let{routesMeta:s}=t,i={},a="/",o=[];for(let l=0;l<s.length;++l){let u=s[l],d=l===s.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=RE({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:oi([a,f.pathname]),pathnameBase:VE(oi([a,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(a=oi([a,f.pathnameBase]))}return o}function RE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=PE(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((d,h,f)=>{let{paramName:g,isOptional:w}=h;if(g==="*"){let A=l[f]||"";o=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const j=l[f];return w&&!j?d[g]=void 0:d[g]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function PE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),j_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(s.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function DE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return j_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Tg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function OE(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?vo(t):t;return{pathname:n?n.startsWith("/")?n:LE(n,e):e,search:FE(s),hash:UE(i)}}function LE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Dm(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ME(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Sg(t,e){let n=ME(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Cg(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=vo(t):(i=Ql({},t),yt(!i.pathname||!i.pathname.includes("?"),Dm("?","pathname","search",i)),yt(!i.pathname||!i.pathname.includes("#"),Dm("#","pathname","hash",i)),yt(!i.search||!i.search.includes("#"),Dm("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!s&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),f-=1;i.pathname=g.join("/")}l=f>=0?e[f]:"/"}let u=OE(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const oi=t=>t.join("/").replace(/\/\/+/g,"/"),VE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $E(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const I_=["post","put","patch","delete"];new Set(I_);const BE=["get",...I_];new Set(BE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Xl.apply(this,arguments)}const Ag=b.createContext(null),zE=b.createContext(null),wi=b.createContext(null),mh=b.createContext(null),bi=b.createContext({outlet:null,matches:[],isDataRoute:!1}),T_=b.createContext(null);function qE(t,e){let{relative:n}=e===void 0?{}:e;wo()||yt(!1);let{basename:s,navigator:i}=b.useContext(wi),{hash:a,pathname:o,search:l}=C_(t,{relative:n}),u=o;return s!=="/"&&(u=o==="/"?s:oi([s,o])),i.createHref({pathname:u,search:l,hash:a})}function wo(){return b.useContext(mh)!=null}function _i(){return wo()||yt(!1),b.useContext(mh).location}function S_(t){b.useContext(wi).static||b.useLayoutEffect(t)}function yn(){let{isDataRoute:t}=b.useContext(bi);return t?sI():HE()}function HE(){wo()||yt(!1);let t=b.useContext(Ag),{basename:e,future:n,navigator:s}=b.useContext(wi),{matches:i}=b.useContext(bi),{pathname:a}=_i(),o=JSON.stringify(Sg(i,n.v7_relativeSplatPath)),l=b.useRef(!1);return S_(()=>{l.current=!0}),b.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let f=Cg(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:oi([e,f.pathname])),(h.replace?s.replace:s.push)(f,h.state,h)},[e,s,o,a,t])}function C_(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=b.useContext(wi),{matches:i}=b.useContext(bi),{pathname:a}=_i(),o=JSON.stringify(Sg(i,s.v7_relativeSplatPath));return b.useMemo(()=>Cg(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function WE(t,e){return KE(t,e)}function KE(t,e,n,s){wo()||yt(!1);let{navigator:i}=b.useContext(wi),{matches:a}=b.useContext(bi),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=_i(),h;if(e){var f;let I=typeof e=="string"?vo(e):e;u==="/"||(f=I.pathname)!=null&&f.startsWith(u)||yt(!1),h=I}else h=d;let g=h.pathname||"/",w=g;if(u!=="/"){let I=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(I.length).join("/")}let j=wE(t,{pathname:w}),A=JE(j&&j.map(I=>Object.assign({},I,{params:Object.assign({},l,I.params),pathname:oi([u,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?u:oi([u,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),a,n,s);return e&&A?b.createElement(mh.Provider,{value:{location:Xl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Yr.Pop}},A):A}function GE(){let t=nI(),e=$E(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const QE=b.createElement(GE,null);class XE extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(bi.Provider,{value:this.props.routeContext},b.createElement(T_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YE(t){let{routeContext:e,match:n,children:s}=t,i=b.useContext(Ag);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(bi.Provider,{value:e},s)}function JE(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||yt(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:g,errors:w}=n,j=f.route.loader&&g[f.route.id]===void 0&&(!w||w[f.route.id]===void 0);if(f.route.lazy||j){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,g)=>{let w,j=!1,A=null,I=null;n&&(w=l&&f.route.id?l[f.route.id]:void 0,A=f.route.errorElement||QE,u&&(d<0&&g===0?(rI("route-fallback"),j=!0,I=null):d===g&&(j=!0,I=f.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,g+1)),v=()=>{let _;return w?_=A:j?_=I:f.route.Component?_=b.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,b.createElement(YE,{match:f,routeContext:{outlet:h,matches:k,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?b.createElement(XE,{location:n.location,revalidation:n.revalidation,component:A,error:w,children:v(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):v()},null)}var A_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(A_||{}),R_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(R_||{});function ZE(t){let e=b.useContext(Ag);return e||yt(!1),e}function eI(t){let e=b.useContext(zE);return e||yt(!1),e}function tI(t){let e=b.useContext(bi);return e||yt(!1),e}function P_(t){let e=tI(),n=e.matches[e.matches.length-1];return n.route.id||yt(!1),n.route.id}function nI(){var t;let e=b.useContext(T_),n=eI(),s=P_();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function sI(){let{router:t}=ZE(A_.UseNavigateStable),e=P_(R_.UseNavigateStable),n=b.useRef(!1);return S_(()=>{n.current=!0}),b.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Xl({fromRouteId:e},a)))},[t,e])}const Ny={};function rI(t,e,n){Ny[t]||(Ny[t]=!0)}function iI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function fh(t){let{to:e,replace:n,state:s,relative:i}=t;wo()||yt(!1);let{future:a,static:o}=b.useContext(wi),{matches:l}=b.useContext(bi),{pathname:u}=_i(),d=yn(),h=Cg(e,Sg(l,a.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(h);return b.useEffect(()=>d(JSON.parse(f),{replace:n,state:s,relative:i}),[d,f,i,n,s]),null}function Oe(t){yt(!1)}function aI(t){let{basename:e="/",children:n=null,location:s,navigationType:i=Yr.Pop,navigator:a,static:o=!1,future:l}=t;wo()&&yt(!1);let u=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:u,navigator:a,static:o,future:Xl({v7_relativeSplatPath:!1},l)}),[u,l,a,o]);typeof s=="string"&&(s=vo(s));let{pathname:h="/",search:f="",hash:g="",state:w=null,key:j="default"}=s,A=b.useMemo(()=>{let I=Tg(h,u);return I==null?null:{location:{pathname:I,search:f,hash:g,state:w,key:j},navigationType:i}},[u,h,f,g,w,j,i]);return A==null?null:b.createElement(wi.Provider,{value:d},b.createElement(mh.Provider,{children:n,value:A}))}function oI(t){let{children:e,location:n}=t;return WE(ep(e),n)}new Promise(()=>{});function ep(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(s,i)=>{if(!b.isValidElement(s))return;let a=[...e,i];if(s.type===b.Fragment){n.push.apply(n,ep(s.props.children,a));return}s.type!==Oe&&yt(!1),!s.props.index||!s.props.children||yt(!1);let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=ep(s.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tp(){return tp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},tp.apply(this,arguments)}function lI(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function cI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uI(t,e){return t.button===0&&(!e||e==="_self")&&!cI(t)}function np(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function dI(t,e){let n=np(t);return e&&e.forEach((s,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const hI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mI="6";try{window.__reactRouterVersion=mI}catch{}const fI="startTransition",jy=i2[fI];function pI(t){let{basename:e,children:n,future:s,window:i}=t,a=b.useRef();a.current==null&&(a.current=xE({window:i,v5Compat:!0}));let o=a.current,[l,u]=b.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},h=b.useCallback(f=>{d&&jy?jy(()=>u(f)):u(f)},[u,d]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.useEffect(()=>iI(s),[s]),b.createElement(aI,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:s})}const gI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue=b.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:f}=e,g=lI(e,hI),{basename:w}=b.useContext(wi),j,A=!1;if(typeof d=="string"&&xI.test(d)&&(j=d,gI))try{let _=new URL(window.location.href),T=d.startsWith("//")?new URL(_.protocol+d):new URL(d),O=Tg(T.pathname,w);T.origin===_.origin&&O!=null?d=O+T.search+T.hash:A=!0}catch{}let I=qE(d,{relative:i}),k=yI(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:f});function v(_){s&&s(_),_.defaultPrevented||k(_)}return b.createElement("a",tp({},g,{href:j||I,onClick:A||a?s:v,ref:n,target:u}))});var ky;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ky||(ky={}));var Ey;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ey||(Ey={}));function yI(t,e){let{target:n,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,u=yn(),d=_i(),h=C_(t,{relative:o});return b.useCallback(f=>{if(uI(f,n)){f.preventDefault();let g=s!==void 0?s:Id(d)===Id(h);u(t,{replace:g,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,h,s,i,n,t,a,o,l])}function ph(t){let e=b.useRef(np(t)),n=b.useRef(!1),s=_i(),i=b.useMemo(()=>dI(s.search,n.current?null:e.current),[s.search]),a=yn(),o=b.useCallback((l,u)=>{const d=np(typeof l=="function"?l(i):l);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var Iy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[s++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},O_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,f=(a&3)<<4|l>>4;let g=(l&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),s.push(n[h],n[f],n[g],n[w])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(D_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||l==null||d==null||f==null)throw new wI;const g=a<<2|l>>4;if(s.push(g),d!==64){const w=l<<4&240|d>>2;if(s.push(w),f!==64){const j=d<<6&192|f;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bI=function(t){const e=D_(t);return O_.encodeByteArray(e,!0)},Td=function(t){return bI(t).replace(/\./g,"")},L_=function(t){try{return O_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=()=>_I().__FIREBASE_DEFAULTS__,jI=()=>{if(typeof process>"u"||typeof Iy>"u")return;const t=Iy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&L_(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return NI()||jI()||kI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},M_=t=>{var e,n;return(n=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},V_=t=>{const e=M_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},F_=()=>{var t;return(t=gh())===null||t===void 0?void 0:t.config},U_=t=>{var e;return(e=gh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Td(JSON.stringify(n)),Td(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function II(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function TI(){var t;const e=(t=gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RI(){const t=cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PI(){return!TI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DI(){try{return typeof indexedDB=="object"}catch{return!1}}function OI(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="FirebaseError";class zs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=LI,Object.setPrototypeOf(this,zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bc.prototype.create)}}class bc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?MI(a,s):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new zs(i,l,s)}}function MI(t,e){return t.replace(VI,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const VI=/\{\$([^}]+)}/g;function FI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sd(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const a=t[i],o=e[i];if(Ty(a)&&Ty(o)){if(!Sd(a,o))return!1}else if(a!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Ty(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ol(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,a]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ll(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UI(t,e){const n=new $I(t,e);return n.subscribe.bind(n)}class $I{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");BI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Om),i.error===void 0&&(i.error=Om),i.complete===void 0&&(i.complete=Om);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class hi{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new EI;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HI(e))try{this.getOrInitializeService({instanceIdentifier:Li})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});s.resolve(a)}catch{}}}}clearInstance(e=Li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Li){return this.instances.has(e)}getOptions(e=Li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);s===l&&o.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:qI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Li){return this.component?this.component.multipleInstances?e:Li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qI(t){return t===Li?void 0:t}function HI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const KI={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},GI=Ee.INFO,QI={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},XI=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=QI[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rg{constructor(e){this.name=e,this._logLevel=GI,this._logHandler=XI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const YI=(t,e)=>e.some(n=>t instanceof n);let Sy,Cy;function JI(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZI(){return Cy||(Cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B_=new WeakMap,sp=new WeakMap,z_=new WeakMap,Lm=new WeakMap,Pg=new WeakMap;function eT(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(li(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&B_.set(n,t)}).catch(()=>{}),Pg.set(e,t),e}function tT(t){if(sp.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});sp.set(t,e)}let rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||z_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nT(t){rp=t(rp)}function sT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Mm(this),e,...n);return z_.set(s,e.sort?e.sort():[e]),li(s)}:ZI().includes(t)?function(...e){return t.apply(Mm(this),e),li(B_.get(this))}:function(...e){return li(t.apply(Mm(this),e))}}function rT(t){return typeof t=="function"?sT(t):(t instanceof IDBTransaction&&tT(t),YI(t,JI())?new Proxy(t,rp):t)}function li(t){if(t instanceof IDBRequest)return eT(t);if(Lm.has(t))return Lm.get(t);const e=rT(t);return e!==t&&(Lm.set(t,e),Pg.set(e,t)),e}const Mm=t=>Pg.get(t);function iT(t,e,{blocked:n,upgrade:s,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=li(o);return s&&o.addEventListener("upgradeneeded",u=>{s(li(o.result),u.oldVersion,u.newVersion,li(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const aT=["get","getKey","getAll","getAllKeys","count"],oT=["put","add","delete","clear"],Vm=new Map;function Ay(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vm.get(e))return Vm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=oT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||aT.includes(n)))return;const a=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return Vm.set(e,a),a}nT(t=>({...t,get:(e,n,s)=>Ay(e,n)||t.get(e,n,s),has:(e,n)=>!!Ay(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function cT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ip="@firebase/app",Ry="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new Rg("@firebase/app"),uT="@firebase/app-compat",dT="@firebase/analytics-compat",hT="@firebase/analytics",mT="@firebase/app-check-compat",fT="@firebase/app-check",pT="@firebase/auth",gT="@firebase/auth-compat",xT="@firebase/database",yT="@firebase/data-connect",vT="@firebase/database-compat",wT="@firebase/functions",bT="@firebase/functions-compat",_T="@firebase/installations",NT="@firebase/installations-compat",jT="@firebase/messaging",kT="@firebase/messaging-compat",ET="@firebase/performance",IT="@firebase/performance-compat",TT="@firebase/remote-config",ST="@firebase/remote-config-compat",CT="@firebase/storage",AT="@firebase/storage-compat",RT="@firebase/firestore",PT="@firebase/vertexai-preview",DT="@firebase/firestore-compat",OT="firebase",LT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="[DEFAULT]",MT={[ip]:"fire-core",[uT]:"fire-core-compat",[hT]:"fire-analytics",[dT]:"fire-analytics-compat",[fT]:"fire-app-check",[mT]:"fire-app-check-compat",[pT]:"fire-auth",[gT]:"fire-auth-compat",[xT]:"fire-rtdb",[yT]:"fire-data-connect",[vT]:"fire-rtdb-compat",[wT]:"fire-fn",[bT]:"fire-fn-compat",[_T]:"fire-iid",[NT]:"fire-iid-compat",[jT]:"fire-fcm",[kT]:"fire-fcm-compat",[ET]:"fire-perf",[IT]:"fire-perf-compat",[TT]:"fire-rc",[ST]:"fire-rc-compat",[CT]:"fire-gcs",[AT]:"fire-gcs-compat",[RT]:"fire-fst",[DT]:"fire-fst-compat",[PT]:"fire-vertex","fire-js":"fire-js",[OT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new Map,VT=new Map,op=new Map;function Py(t,e){try{t.container.addComponent(e)}catch(n){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zi(t){const e=t.name;if(op.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,t);for(const n of Yl.values())Py(n,t);for(const n of VT.values())Py(n,t);return!0}function xh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ys(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new bc("app","Firebase",FT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=LT;function q_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:ap,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw ci.create("bad-app-name",{appName:String(i)});if(n||(n=F_()),!n)throw ci.create("no-options");const a=Yl.get(i);if(a){if(Sd(n,a.options)&&Sd(s,a.config))return a;throw ci.create("duplicate-app",{appName:i})}const o=new WI(i);for(const u of op.values())o.addComponent(u);const l=new UT(n,s,o);return Yl.set(i,l),l}function yh(t=ap){const e=Yl.get(t);if(!e&&t===ap&&F_())return q_();if(!e)throw ci.create("no-app",{appName:t});return e}function H_(){return Array.from(Yl.values())}function Ls(t,e,n){var s;let i=(s=MT[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${i}" with version "${e}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(l.join(" "));return}Zi(new hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firebase-heartbeat-database",BT=1,Jl="firebase-heartbeat-store";let Fm=null;function W_(){return Fm||(Fm=iT($T,BT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ci.create("idb-open",{originalErrorMessage:t.message})})),Fm}async function zT(t){try{const n=(await W_()).transaction(Jl),s=await n.objectStore(Jl).get(K_(t));return await n.done,s}catch(e){if(e instanceof zs)xr.warn(e.message);else{const n=ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xr.warn(n.message)}}}async function Dy(t,e){try{const s=(await W_()).transaction(Jl,"readwrite");await s.objectStore(Jl).put(e,K_(t)),await s.done}catch(n){if(n instanceof zs)xr.warn(n.message);else{const s=ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xr.warn(s.message)}}}function K_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=1024,HT=30*24*60*60*1e3;class WT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GT(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Oy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=HT}),this._storage.overwrite(this._heartbeatsCache))}catch(s){xr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Oy(),{heartbeatsToSend:s,unsentEntries:i}=KT(this._heartbeatsCache.heartbeats),a=Td(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return xr.warn(n),""}}}function Oy(){return new Date().toISOString().substring(0,10)}function KT(t,e=qT){const n=[];let s=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),Ly(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ly(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class GT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DI()?OI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Dy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Dy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ly(t){return Td(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){Zi(new hi("platform-logger",e=>new lT(e),"PRIVATE")),Zi(new hi("heartbeat",e=>new WT(e),"PRIVATE")),Ls(ip,Ry,t),Ls(ip,Ry,"esm2017"),Ls("fire-js","")}QT("");function Dg(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function G_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XT=G_,Q_=new bc("auth","Firebase",G_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Rg("@firebase/auth");function YT(t,...e){Cd.logLevel<=Ee.WARN&&Cd.warn(`Auth (${ua}): ${t}`,...e)}function Ku(t,...e){Cd.logLevel<=Ee.ERROR&&Cd.error(`Auth (${ua}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,...e){throw Og(t,...e)}function Mn(t,...e){return Og(t,...e)}function X_(t,e,n){const s=Object.assign(Object.assign({},XT()),{[e]:n});return new bc("auth","Firebase",s).create(e,{appName:t.name})}function Ms(t){return X_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Q_.create(t,...e)}function oe(t,e,...n){if(!t)throw Og(e,...n)}function sr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ku(e),new Error(e)}function yr(t,e){t||sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Y_(){return My()==="http:"||My()==="https:"}function My(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y_()||CI()||"connection"in navigator)?navigator.onLine:!0}function ZT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n){this.shortDelay=e,this.longDelay=n,yr(n>e,"Short delay should be less than long delay!"),this.isMobile=II()||AI()}get(){return JT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t,e){yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=new _c(3e4,6e4);function Tn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function os(t,e,n,s,i={}){return Z_(t,i,async()=>{let a={},o={};s&&(e==="GET"?o=s:a={body:JSON.stringify(s)});const l=bo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return SI()||(d.referrerPolicy="no-referrer"),J_.fetch()(eN(t,t.config.apiHost,n,l),d)})}async function Z_(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},eS),e);try{const i=new sS(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw cl(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw cl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw cl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw cl(t,"user-disabled",o);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw X_(t,h,d);_s(t,h)}}catch(i){if(i instanceof zs)throw i;_s(t,"network-request-failed",{message:String(i)})}}async function Ni(t,e,n,s,i={}){const a=await os(t,e,n,s,i);return"mfaPendingCredential"in a&&_s(t,"multi-factor-auth-required",{_serverResponse:a}),a}function eN(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?Lg(t.config,i):`${t.config.apiScheme}://${i}`}function nS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Mn(this.auth,"network-request-failed")),tS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cl(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Mn(t,e,s);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t){return t!==void 0&&t.getResponse!==void 0}function Fy(t){return t!==void 0&&t.enterprise!==void 0}class rS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(t){return(await os(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function aS(t,e){return os(t,"GET","/v2/recaptchaConfig",Tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(t,e){return os(t,"POST","/v1/accounts:delete",e)}async function tN(t,e){return os(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lS(t,e=!1){const n=Qe(t),s=await n.getIdToken(e),i=Mg(s);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:s,authTime:_l(Um(i.auth_time)),issuedAtTime:_l(Um(i.iat)),expirationTime:_l(Um(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Um(t){return Number(t)*1e3}function Mg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const i=L_(n);return i?JSON.parse(i):(Ku("Failed to decode base64 JWT payload"),null)}catch(i){return Ku("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Uy(t){const e=Mg(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof zs&&cS(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function cS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_l(this.lastLoginAt),this.creationTime=_l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ad(t){var e;const n=t.auth,s=await t.getIdToken(),i=await Zl(t,tN(n,{idToken:s}));oe(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?nN(a.providerUserInfo):[],l=hS(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new cp(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function dS(t){const e=Qe(t);await Ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hS(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function nN(t){return t.map(e=>{var{providerId:n}=e,s=Dg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(t,e){const n=await Z_(t,{},async()=>{const s=bo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=eN(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",J_.fetch()(o,{method:"POST",headers:l,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fS(t,e){return os(t,"POST","/v2/accounts:revokeToken",Tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=Uy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:a}=await mS(e,n);this.updateTokensAndExpiration(s,i,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:a}=n,o=new Xa;return s&&(oe(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(oe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rr{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,a=Dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new cp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lS(this,e)}reload(){return dS(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ad(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ys(this.auth.app))return Promise.reject(Ms(this.auth));const e=await this.getIdToken();return await Zl(this,oS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,a,o,l,u,d,h;const f=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,j=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(l=n.tenantId)!==null&&l!==void 0?l:void 0,I=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:T,isAnonymous:O,providerData:V,stsTokenManager:y}=n;oe(_&&y,e,"internal-error");const p=Xa.fromJSON(this.name,y);oe(typeof _=="string",e,"internal-error"),Fr(f,e.name),Fr(g,e.name),oe(typeof T=="boolean",e,"internal-error"),oe(typeof O=="boolean",e,"internal-error"),Fr(w,e.name),Fr(j,e.name),Fr(A,e.name),Fr(I,e.name),Fr(k,e.name),Fr(v,e.name);const N=new rr({uid:_,auth:e,email:g,emailVerified:T,displayName:f,isAnonymous:O,photoURL:j,phoneNumber:w,tenantId:A,stsTokenManager:p,createdAt:k,lastLoginAt:v});return V&&Array.isArray(V)&&(N.providerData=V.map(E=>Object.assign({},E))),I&&(N._redirectEventId=I),N}static async _fromIdTokenResponse(e,n,s=!1){const i=new Xa;i.updateFromServerResponse(n);const a=new rr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Ad(a),a}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?nN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new Xa;l.updateFromIdToken(s);const u=new rr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new cp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=new Map;function ir(t){yr(t instanceof Function,"Expected a class definition");let e=$y.get(t);return e?(yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$y.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sN.type="NONE";const By=sN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ya{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:a}=this.auth;this.fullUserKey=Gu(this.userKey,i.apiKey,a),this.fullPersistenceKey=Gu("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ya(ir(By),e,s);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||ir(By);const o=Gu(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){const f=rr._fromJSON(e,h);d!==a&&(l=f),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Ya(a,e,s):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Ya(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cN(e))return"Blackberry";if(uN(e))return"Webos";if(iN(e))return"Safari";if((e.includes("chrome/")||aN(e))&&!e.includes("edge/"))return"Chrome";if(lN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function rN(t=cn()){return/firefox\//i.test(t)}function iN(t=cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aN(t=cn()){return/crios\//i.test(t)}function oN(t=cn()){return/iemobile/i.test(t)}function lN(t=cn()){return/android/i.test(t)}function cN(t=cn()){return/blackberry/i.test(t)}function uN(t=cn()){return/webos/i.test(t)}function Vg(t=cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pS(t=cn()){var e;return Vg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gS(){return RI()&&document.documentMode===10}function dN(t=cn()){return Vg(t)||lN(t)||uN(t)||cN(t)||/windows phone/i.test(t)||oN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t,e=[]){let n;switch(t){case"Browser":n=zy(cn());break;case"Worker":n=`${zy(cn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ua}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e={}){return os(t,"GET","/v2/passwordPolicy",Tn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=6;class wS{constructor(e){var n,s,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:vS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,i,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qy(this),this.idTokenSubscription=new qy(this),this.beforeStateQueue=new xS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await Ya.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tN(this,{idToken:e}),s=await rr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ys(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ad(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ys(this.app))return Promise.reject(Ms(this));const n=e?Qe(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ys(this.app)?Promise.reject(Ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ys(this.app)?Promise.reject(Ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yS(this),n=new wS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await fS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ir(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Ya.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&YT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Er(t){return Qe(t)}class qy{constructor(e){this.auth=e,this.observer=null,this.addObserver=UI(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _S(t){Nc=t}function Fg(t){return Nc.loadJS(t)}function NS(){return Nc.recaptchaV2Script}function jS(){return Nc.recaptchaEnterpriseScript}function kS(){return Nc.gapiScript}function mN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ES="recaptcha-enterprise",IS="NO_RECAPTCHA";class TS{constructor(e){this.type=ES,this.auth=Er(e)}async verify(e="verify",n=!1){async function s(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{aS(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new rS(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function i(a,o,l){const u=window.grecaptcha;Fy(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(IS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{s(this.auth).then(l=>{if(!n&&Fy(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=jS();u.length!==0&&(u+=l),Fg(u).then(()=>{i(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Hy(t,e,n,s=!1){const i=new TS(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o=Object.assign({},e);return s?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function up(t,e,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Hy(t,e,n,n==="getOobCode");return s(t,a)}else return s(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Hy(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t,e){const n=xh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Sd(a,e??{}))return i;_s(i,"already-initialized")}return n.initialize({options:e})}function SS(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function CS(t,e,n){const s=Er(t);oe(s._canInitEmulator,s,"emulator-config-failed"),oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,a=pN(e),{host:o,port:l}=AS(e),u=l===null?"":`:${l}`;s.config.emulator={url:`${a}//${o}${u}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),RS()}function pN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function AS(t){const e=pN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const a=i[1];return{host:a,port:Wy(s.substr(a.length+1))}}else{const[a,o]=s.split(":");return{host:a,port:Wy(o)}}}function Wy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sr("not implemented")}_getIdTokenResponse(e){return sr("not implemented")}_linkToIdToken(e,n){return sr("not implemented")}_getReauthenticationResolver(e){return sr("not implemented")}}async function PS(t,e){return os(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(t,e){return Ni(t,"POST","/v1/accounts:signInWithPassword",Tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(t,e){return Ni(t,"POST","/v1/accounts:signInWithEmailLink",Tn(t,e))}async function LS(t,e){return Ni(t,"POST","/v1/accounts:signInWithEmailLink",Tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends vh{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ec(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new ec(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return up(e,n,"signInWithPassword",DS);case"emailLink":return OS(e,{email:this._email,oobCode:this._password});default:_s(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return up(e,s,"signUpPassword",PS);case"emailLink":return LS(e,{idToken:n,email:this._email,oobCode:this._password});default:_s(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t,e){return Ni(t,"POST","/v1/accounts:signInWithIdp",Tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="http://localhost";class ea extends vh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_s("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=n,a=Dg(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new ea(s,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ja(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ja(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ja(e,n)}buildRequest(){const e={requestUri:MS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(t,e){return os(t,"POST","/v1/accounts:sendVerificationCode",Tn(t,e))}async function FS(t,e){return Ni(t,"POST","/v1/accounts:signInWithPhoneNumber",Tn(t,e))}async function US(t,e){const n=await Ni(t,"POST","/v1/accounts:signInWithPhoneNumber",Tn(t,e));if(n.temporaryProof)throw cl(t,"account-exists-with-different-credential",n);return n}const $S={USER_NOT_FOUND:"user-not-found"};async function BS(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ni(t,"POST","/v1/accounts:signInWithPhoneNumber",Tn(t,n),$S)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends vh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Nl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Nl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return FS(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return US(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return BS(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:s,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:s,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:s,phoneNumber:i,temporaryProof:a}=e;return!s&&!n&&!i&&!a?null:new Nl({verificationId:n,verificationCode:s,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qS(t){const e=ol(ll(t)).link,n=e?ol(ll(e)).deep_link_id:null,s=ol(ll(t)).deep_link_id;return(s?ol(ll(s)).link:null)||s||n||e||t}class Ug{constructor(e){var n,s,i,a,o,l;const u=ol(ll(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(s=u.oobCode)!==null&&s!==void 0?s:null,f=zS((i=u.mode)!==null&&i!==void 0?i:null);oe(d&&h&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=qS(e);try{return new Ug(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.providerId=_o.PROVIDER_ID}static credential(e,n){return ec._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ug.parseLink(n);return oe(s,"argument-error"),ec._fromEmailAndCode(e,s.code,s.tenantId)}}_o.PROVIDER_ID="password";_o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends gN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends jc{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ea._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Hr.credential(n,s)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends jc{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends jc{constructor(){super("twitter.com")}static credential(e,n){return ea._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Kr.credential(n,s)}catch{return null}}}Kr.TWITTER_SIGN_IN_METHOD="twitter.com";Kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(t,e){return Ni(t,"POST","/v1/accounts:signUp",Tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const a=await rr._fromIdTokenResponse(e,s,i),o=Ky(s);return new ta({user:a,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=Ky(s);return new ta({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function Ky(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends zs{constructor(e,n,s,i){var a;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Rd(e,n,s,i)}}function xN(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(t,a,e,s):a})}async function WS(t,e,n=!1){const s=await Zl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ta._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(t,e,n=!1){const{auth:s}=t;if(ys(s.app))return Promise.reject(Ms(s));const i="reauthenticate";try{const a=await Zl(t,xN(s,i,e,t),n);oe(a.idToken,s,"internal-error");const o=Mg(a.idToken);oe(o,s,"internal-error");const{sub:l}=o;return oe(t.uid===l,s,"user-mismatch"),ta._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&_s(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t,e,n=!1){if(ys(t.app))return Promise.reject(Ms(t));const s="signIn",i=await xN(t,s,e),a=await ta._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(a.user),a}async function vN(t,e){return yN(Er(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t){const e=Er(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jl(t,e,n){if(ys(t.app))return Promise.reject(Ms(t));const s=Er(t),o=await up(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&wN(t),u}),l=await ta._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function GS(t,e,n){return ys(t.app)?Promise.reject(Ms(t)):vN(Qe(t),_o.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&wN(t),s})}function QS(t,e,n,s){return Qe(t).onIdTokenChanged(e,n,s)}function XS(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function YS(t,e,n,s){return Qe(t).onAuthStateChanged(e,n,s)}function JS(t){return Qe(t).signOut()}async function ZS(t){return Qe(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t,e){return os(t,"POST","/v2/accounts/mfaEnrollment:start",Tn(t,e))}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=1e3,n4=10;class _N extends bN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},a=this.storage.getItem(s);gS()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,n4):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},t4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_N.type="LOCAL";const NN=_N;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN extends bN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jN.type="SESSION";const kN=jN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new wh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const l=Array.from(o).map(async d=>d(n.origin,a)),u=await s4(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=$g("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(f){const g=f;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(g.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return window}function i4(t){_t().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(){return typeof _t().WorkerGlobalScope<"u"&&typeof _t().importScripts=="function"}async function a4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function l4(){return Bg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="firebaseLocalStorageDb",c4=1,Dd="firebaseLocalStorage",IN="fbase_key";class kc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bh(t,e){return t.transaction([Dd],e?"readwrite":"readonly").objectStore(Dd)}function u4(){const t=indexedDB.deleteDatabase(EN);return new kc(t).toPromise()}function dp(){const t=indexedDB.open(EN,c4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Dd,{keyPath:IN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Dd)?e(s):(s.close(),await u4(),e(await dp()))})})}async function Gy(t,e,n){const s=bh(t,!0).put({[IN]:e,value:n});return new kc(s).toPromise()}async function d4(t,e){const n=bh(t,!1).get(e),s=await new kc(n).toPromise();return s===void 0?null:s.value}function Qy(t,e){const n=bh(t,!0).delete(e);return new kc(n).toPromise()}const h4=800,m4=3;class TN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>m4)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(l4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await a4(),!this.activeServiceWorker)return;this.sender=new r4(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dp();return await Gy(e,Pd,"1"),await Qy(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Gy(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>d4(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=bh(i,!1).getAll();return new kc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TN.type="LOCAL";const SN=TN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t,e){return os(t,"POST","/v2/accounts/mfaSignIn:start",Tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=500,g4=6e4,Nu=1e12;class x4{constructor(e){this.auth=e,this.counter=Nu,this._widgets=new Map}render(e,n){const s=this.counter;return this._widgets.set(s,new y4(e,this.auth.name,n||{})),this.counter++,s}reset(e){var n;const s=e||Nu;(n=this._widgets.get(s))===null||n===void 0||n.delete(),this._widgets.delete(s)}getResponse(e){var n;const s=e||Nu;return((n=this._widgets.get(s))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const s=e||Nu;return(n=this._widgets.get(s))===null||n===void 0||n.execute(),""}}class y4{constructor(e,n,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;oe(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=v4(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},g4)},p4))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function v4(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<t;s++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=mN("rcb"),w4=new _c(3e4,6e4);class b4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=_t().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return oe(_4(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Vy(_t().grecaptcha)?Promise.resolve(_t().grecaptcha):new Promise((s,i)=>{const a=_t().setTimeout(()=>{i(Mn(e,"network-request-failed"))},w4.get());_t()[$m]=()=>{_t().clearTimeout(a),delete _t()[$m];const l=_t().grecaptcha;if(!l||!Vy(l)){i(Mn(e,"internal-error"));return}const u=l.render;l.render=(d,h)=>{const f=u(d,h);return this.counter++,f},this.hostLanguage=n,s(l)};const o=`${NS()}?${bo({onload:$m,render:"explicit",hl:n})}`;Fg(o).catch(()=>{clearTimeout(a),i(Mn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=_t().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function _4(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class N4{async load(e){return new x4(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="recaptcha",j4={theme:"light",type:"image"};class Xy{constructor(e,n,s=Object.assign({},j4)){this.parameters=s,this.type=CN,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Er(e),this.isInvisible=this.parameters.size==="invisible",oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;oe(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new N4:new b4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),s=n.getResponse(e);return s||new Promise(i=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),i(o))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(s=>s(n)),typeof e=="function")e(n);else if(typeof e=="string"){const s=_t()[e];typeof s=="function"&&s(n)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){oe(Y_()&&!Bg(),this.auth,"internal-error"),await k4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await iS(this.auth);oe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function k4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Nl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function I4(t,e,n){if(ys(t.app))return Promise.reject(Ms(t));const s=Er(t),i=await T4(s,e,Qe(n));return new E4(i,a=>vN(s,a))}async function T4(t,e,n){var s;const i=await n.verify();try{oe(typeof i=="string",t,"argument-error"),oe(n.type===CN,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const o=a.session;if("phoneNumber"in a)return oe(o.type==="enroll",t,"internal-error"),(await e4(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{oe(o.type==="signin",t,"internal-error");const l=((s=a.multiFactorHint)===null||s===void 0?void 0:s.uid)||a.multiFactorUid;return oe(l,t,"missing-multi-factor-info"),(await f4(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await VS(t,{phoneNumber:a.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(t,e){return e?ir(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg extends vh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ja(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ja(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function C4(t){return yN(t.auth,new zg(t),t.bypassAuthState)}function A4(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),KS(n,new zg(t),t.bypassAuthState)}async function R4(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),WS(n,new zg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,s,i,a=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C4;case"linkViaPopup":case"linkViaRedirect":return R4;case"reauthViaPopup":case"reauthViaRedirect":return A4;default:_s(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new _c(2e3,1e4);class Ba extends AN{constructor(e,n,s,i,a){super(e,n,i,a),this.provider=s,this.authWindow=null,this.pollId=null,Ba.currentPopupAction&&Ba.currentPopupAction.cancel(),Ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){yr(this.filter.length===1,"Popup operations only handle one event");const e=$g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,P4.get())};e()}}Ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="pendingRedirect",Qu=new Map;class O4 extends AN{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Qu.get(this.auth._key());if(!e){try{const s=await L4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Qu.set(this.auth._key(),e)}return this.bypassAuthState||Qu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function L4(t,e){const n=F4(e),s=V4(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function M4(t,e){Qu.set(t._key(),e)}function V4(t){return ir(t._redirectPersistence)}function F4(t){return Gu(D4,t.config.apiKey,t.name)}async function U4(t,e,n=!1){if(ys(t.app))return Promise.reject(Ms(t));const s=Er(t),i=S4(s,e),o=await new O4(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=10*60*1e3;class B4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!RN(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Mn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yy(e))}saveEventToCache(e){this.cachedEventUids.add(Yy(e)),this.lastProcessedEventTime=Date.now()}}function Yy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function z4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q4(t,e={}){return os(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W4=/^https?/;async function K4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await q4(t);for(const n of e)try{if(G4(n))return}catch{}_s(t,"unauthorized-domain")}function G4(t){const e=lp(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!W4.test(n))return!1;if(H4.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new _c(3e4,6e4);function Jy(){const t=_t().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function X4(t){return new Promise((e,n)=>{var s,i,a;function o(){Jy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jy(),n(Mn(t,"network-request-failed"))},timeout:Q4.get()})}if(!((i=(s=_t().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=_t().gapi)===null||a===void 0)&&a.load)o();else{const l=mN("iframefcb");return _t()[l]=()=>{gapi.load?o():n(Mn(t,"network-request-failed"))},Fg(`${kS()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function Y4(t){return Xu=Xu||X4(t),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new _c(5e3,15e3),Z4="__/auth/iframe",eC="emulator/auth/iframe",tC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sC(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lg(e,eC):`https://${t.config.authDomain}/${Z4}`,s={apiKey:e.apiKey,appName:t.name,v:ua},i=nC.get(t.config.apiHost);i&&(s.eid=i);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${bo(s).slice(1)}`}async function rC(t){const e=await Y4(t),n=_t().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:sC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tC,dontclear:!0},s=>new Promise(async(i,a)=>{await s.restyle({setHideOnLeave:!1});const o=Mn(t,"network-request-failed"),l=_t().setTimeout(()=>{a(o)},J4.get());function u(){_t().clearTimeout(l),i(s)}s.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aC=500,oC=600,lC="_blank",cC="http://localhost";class Zy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uC(t,e,n,s=aC,i=oC){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const u=Object.assign(Object.assign({},iC),{width:s.toString(),height:i.toString(),top:a,left:o}),d=cn().toLowerCase();n&&(l=aN(d)?lC:n),rN(d)&&(e=e||cC,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[w,j])=>`${g}${w}=${j},`,"");if(pS(d)&&l!=="_self")return dC(e||"",l),new Zy(null);const f=window.open(e||"",l,h);oe(f,t,"popup-blocked");try{f.focus()}catch{}return new Zy(f)}function dC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="__/auth/handler",mC="emulator/auth/handler",fC=encodeURIComponent("fac");async function ev(t,e,n,s,i,a){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:ua,eventId:i};if(e instanceof gN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",FI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof jc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${fC}=${encodeURIComponent(u)}`:"";return`${pC(t)}?${bo(l).slice(1)}${d}`}function pC({config:t}){return t.emulator?Lg(t,mC):`https://${t.authDomain}/${hC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="webStorageSupport";class gC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kN,this._completeRedirectFn=U4,this._overrideRedirectResult=M4}async _openPopup(e,n,s,i){var a;yr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await ev(e,n,s,lp(),i);return uC(e,o,$g())}async _openRedirect(e,n,s,i){await this._originValidation(e);const a=await ev(e,n,s,lp(),i);return i4(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(yr(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await rC(e),s=new B4(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bm,{type:Bm},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Bm];o!==void 0&&n(!!o),_s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=K4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dN()||iN()||Vg()}}const xC=gC;var tv="@firebase/auth",nv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wC(t){Zi(new hi("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hN(t)},d=new bS(s,i,a,u);return SS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Zi(new hi("auth-internal",e=>{const n=Er(e.getProvider("auth").getImmediate());return(s=>new yC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(tv,nv,vC(t)),Ls(tv,nv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=5*60,_C=U_("authIdTokenMaxAge")||bC;let sv=null;const NC=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>_C)return;const i=n==null?void 0:n.token;sv!==i&&(sv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jC(t=yh()){const e=xh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fN(t,{popupRedirectResolver:xC,persistence:[SN,NN,kN]}),s=U_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const o=NC(a.toString());XS(n,o,()=>o(n.currentUser)),QS(n,l=>o(l))}}const i=M_("auth");return i&&CS(n,`http://${i}`),n}function kC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_S({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const a=Mn("internal-error");a.customData=i,n(a)},s.type="text/javascript",s.charset="UTF-8",kC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wC("Browser");var EC="firebase",IC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(EC,IC,"app");var rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qi,PN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,p){function N(){}N.prototype=p.prototype,y.D=p.prototype,y.prototype=new N,y.prototype.constructor=y,y.C=function(E,R,D){for(var S=Array(arguments.length-2),X=2;X<arguments.length;X++)S[X-2]=arguments[X];return p.prototype[R].apply(E,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(y,p,N){N||(N=0);var E=Array(16);if(typeof p=="string")for(var R=0;16>R;++R)E[R]=p.charCodeAt(N++)|p.charCodeAt(N++)<<8|p.charCodeAt(N++)<<16|p.charCodeAt(N++)<<24;else for(R=0;16>R;++R)E[R]=p[N++]|p[N++]<<8|p[N++]<<16|p[N++]<<24;p=y.g[0],N=y.g[1],R=y.g[2];var D=y.g[3],S=p+(D^N&(R^D))+E[0]+3614090360&4294967295;p=N+(S<<7&4294967295|S>>>25),S=D+(R^p&(N^R))+E[1]+3905402710&4294967295,D=p+(S<<12&4294967295|S>>>20),S=R+(N^D&(p^N))+E[2]+606105819&4294967295,R=D+(S<<17&4294967295|S>>>15),S=N+(p^R&(D^p))+E[3]+3250441966&4294967295,N=R+(S<<22&4294967295|S>>>10),S=p+(D^N&(R^D))+E[4]+4118548399&4294967295,p=N+(S<<7&4294967295|S>>>25),S=D+(R^p&(N^R))+E[5]+1200080426&4294967295,D=p+(S<<12&4294967295|S>>>20),S=R+(N^D&(p^N))+E[6]+2821735955&4294967295,R=D+(S<<17&4294967295|S>>>15),S=N+(p^R&(D^p))+E[7]+4249261313&4294967295,N=R+(S<<22&4294967295|S>>>10),S=p+(D^N&(R^D))+E[8]+1770035416&4294967295,p=N+(S<<7&4294967295|S>>>25),S=D+(R^p&(N^R))+E[9]+2336552879&4294967295,D=p+(S<<12&4294967295|S>>>20),S=R+(N^D&(p^N))+E[10]+4294925233&4294967295,R=D+(S<<17&4294967295|S>>>15),S=N+(p^R&(D^p))+E[11]+2304563134&4294967295,N=R+(S<<22&4294967295|S>>>10),S=p+(D^N&(R^D))+E[12]+1804603682&4294967295,p=N+(S<<7&4294967295|S>>>25),S=D+(R^p&(N^R))+E[13]+4254626195&4294967295,D=p+(S<<12&4294967295|S>>>20),S=R+(N^D&(p^N))+E[14]+2792965006&4294967295,R=D+(S<<17&4294967295|S>>>15),S=N+(p^R&(D^p))+E[15]+1236535329&4294967295,N=R+(S<<22&4294967295|S>>>10),S=p+(R^D&(N^R))+E[1]+4129170786&4294967295,p=N+(S<<5&4294967295|S>>>27),S=D+(N^R&(p^N))+E[6]+3225465664&4294967295,D=p+(S<<9&4294967295|S>>>23),S=R+(p^N&(D^p))+E[11]+643717713&4294967295,R=D+(S<<14&4294967295|S>>>18),S=N+(D^p&(R^D))+E[0]+3921069994&4294967295,N=R+(S<<20&4294967295|S>>>12),S=p+(R^D&(N^R))+E[5]+3593408605&4294967295,p=N+(S<<5&4294967295|S>>>27),S=D+(N^R&(p^N))+E[10]+38016083&4294967295,D=p+(S<<9&4294967295|S>>>23),S=R+(p^N&(D^p))+E[15]+3634488961&4294967295,R=D+(S<<14&4294967295|S>>>18),S=N+(D^p&(R^D))+E[4]+3889429448&4294967295,N=R+(S<<20&4294967295|S>>>12),S=p+(R^D&(N^R))+E[9]+568446438&4294967295,p=N+(S<<5&4294967295|S>>>27),S=D+(N^R&(p^N))+E[14]+3275163606&4294967295,D=p+(S<<9&4294967295|S>>>23),S=R+(p^N&(D^p))+E[3]+4107603335&4294967295,R=D+(S<<14&4294967295|S>>>18),S=N+(D^p&(R^D))+E[8]+1163531501&4294967295,N=R+(S<<20&4294967295|S>>>12),S=p+(R^D&(N^R))+E[13]+2850285829&4294967295,p=N+(S<<5&4294967295|S>>>27),S=D+(N^R&(p^N))+E[2]+4243563512&4294967295,D=p+(S<<9&4294967295|S>>>23),S=R+(p^N&(D^p))+E[7]+1735328473&4294967295,R=D+(S<<14&4294967295|S>>>18),S=N+(D^p&(R^D))+E[12]+2368359562&4294967295,N=R+(S<<20&4294967295|S>>>12),S=p+(N^R^D)+E[5]+4294588738&4294967295,p=N+(S<<4&4294967295|S>>>28),S=D+(p^N^R)+E[8]+2272392833&4294967295,D=p+(S<<11&4294967295|S>>>21),S=R+(D^p^N)+E[11]+1839030562&4294967295,R=D+(S<<16&4294967295|S>>>16),S=N+(R^D^p)+E[14]+4259657740&4294967295,N=R+(S<<23&4294967295|S>>>9),S=p+(N^R^D)+E[1]+2763975236&4294967295,p=N+(S<<4&4294967295|S>>>28),S=D+(p^N^R)+E[4]+1272893353&4294967295,D=p+(S<<11&4294967295|S>>>21),S=R+(D^p^N)+E[7]+4139469664&4294967295,R=D+(S<<16&4294967295|S>>>16),S=N+(R^D^p)+E[10]+3200236656&4294967295,N=R+(S<<23&4294967295|S>>>9),S=p+(N^R^D)+E[13]+681279174&4294967295,p=N+(S<<4&4294967295|S>>>28),S=D+(p^N^R)+E[0]+3936430074&4294967295,D=p+(S<<11&4294967295|S>>>21),S=R+(D^p^N)+E[3]+3572445317&4294967295,R=D+(S<<16&4294967295|S>>>16),S=N+(R^D^p)+E[6]+76029189&4294967295,N=R+(S<<23&4294967295|S>>>9),S=p+(N^R^D)+E[9]+3654602809&4294967295,p=N+(S<<4&4294967295|S>>>28),S=D+(p^N^R)+E[12]+3873151461&4294967295,D=p+(S<<11&4294967295|S>>>21),S=R+(D^p^N)+E[15]+530742520&4294967295,R=D+(S<<16&4294967295|S>>>16),S=N+(R^D^p)+E[2]+3299628645&4294967295,N=R+(S<<23&4294967295|S>>>9),S=p+(R^(N|~D))+E[0]+4096336452&4294967295,p=N+(S<<6&4294967295|S>>>26),S=D+(N^(p|~R))+E[7]+1126891415&4294967295,D=p+(S<<10&4294967295|S>>>22),S=R+(p^(D|~N))+E[14]+2878612391&4294967295,R=D+(S<<15&4294967295|S>>>17),S=N+(D^(R|~p))+E[5]+4237533241&4294967295,N=R+(S<<21&4294967295|S>>>11),S=p+(R^(N|~D))+E[12]+1700485571&4294967295,p=N+(S<<6&4294967295|S>>>26),S=D+(N^(p|~R))+E[3]+2399980690&4294967295,D=p+(S<<10&4294967295|S>>>22),S=R+(p^(D|~N))+E[10]+4293915773&4294967295,R=D+(S<<15&4294967295|S>>>17),S=N+(D^(R|~p))+E[1]+2240044497&4294967295,N=R+(S<<21&4294967295|S>>>11),S=p+(R^(N|~D))+E[8]+1873313359&4294967295,p=N+(S<<6&4294967295|S>>>26),S=D+(N^(p|~R))+E[15]+4264355552&4294967295,D=p+(S<<10&4294967295|S>>>22),S=R+(p^(D|~N))+E[6]+2734768916&4294967295,R=D+(S<<15&4294967295|S>>>17),S=N+(D^(R|~p))+E[13]+1309151649&4294967295,N=R+(S<<21&4294967295|S>>>11),S=p+(R^(N|~D))+E[4]+4149444226&4294967295,p=N+(S<<6&4294967295|S>>>26),S=D+(N^(p|~R))+E[11]+3174756917&4294967295,D=p+(S<<10&4294967295|S>>>22),S=R+(p^(D|~N))+E[2]+718787259&4294967295,R=D+(S<<15&4294967295|S>>>17),S=N+(D^(R|~p))+E[9]+3951481745&4294967295,y.g[0]=y.g[0]+p&4294967295,y.g[1]=y.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,y.g[2]=y.g[2]+R&4294967295,y.g[3]=y.g[3]+D&4294967295}s.prototype.u=function(y,p){p===void 0&&(p=y.length);for(var N=p-this.blockSize,E=this.B,R=this.h,D=0;D<p;){if(R==0)for(;D<=N;)i(this,y,D),D+=this.blockSize;if(typeof y=="string"){for(;D<p;)if(E[R++]=y.charCodeAt(D++),R==this.blockSize){i(this,E),R=0;break}}else for(;D<p;)if(E[R++]=y[D++],R==this.blockSize){i(this,E),R=0;break}}this.h=R,this.o+=p},s.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var p=1;p<y.length-8;++p)y[p]=0;var N=8*this.o;for(p=y.length-8;p<y.length;++p)y[p]=N&255,N/=256;for(this.u(y),y=Array(16),p=N=0;4>p;++p)for(var E=0;32>E;E+=8)y[N++]=this.g[p]>>>E&255;return y};function a(y,p){var N=l;return Object.prototype.hasOwnProperty.call(N,y)?N[y]:N[y]=p(y)}function o(y,p){this.h=p;for(var N=[],E=!0,R=y.length-1;0<=R;R--){var D=y[R]|0;E&&D==p||(N[R]=D,E=!1)}this.g=N}var l={};function u(y){return-128<=y&&128>y?a(y,function(p){return new o([p|0],0>p?-1:0)}):new o([y|0],0>y?-1:0)}function d(y){if(isNaN(y)||!isFinite(y))return f;if(0>y)return I(d(-y));for(var p=[],N=1,E=0;y>=N;E++)p[E]=y/N|0,N*=4294967296;return new o(p,0)}function h(y,p){if(y.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(y.charAt(0)=="-")return I(h(y.substring(1),p));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=d(Math.pow(p,8)),E=f,R=0;R<y.length;R+=8){var D=Math.min(8,y.length-R),S=parseInt(y.substring(R,R+D),p);8>D?(D=d(Math.pow(p,D)),E=E.j(D).add(d(S))):(E=E.j(N),E=E.add(d(S)))}return E}var f=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-I(this).m();for(var y=0,p=1,N=0;N<this.g.length;N++){var E=this.i(N);y+=(0<=E?E:4294967296+E)*p,p*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(j(this))return"0";if(A(this))return"-"+I(this).toString(y);for(var p=d(Math.pow(y,6)),N=this,E="";;){var R=T(N,p).g;N=k(N,R.j(p));var D=((0<N.g.length?N.g[0]:N.h)>>>0).toString(y);if(N=R,j(N))return D+E;for(;6>D.length;)D="0"+D;E=D+E}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function j(y){if(y.h!=0)return!1;for(var p=0;p<y.g.length;p++)if(y.g[p]!=0)return!1;return!0}function A(y){return y.h==-1}t.l=function(y){return y=k(this,y),A(y)?-1:j(y)?0:1};function I(y){for(var p=y.g.length,N=[],E=0;E<p;E++)N[E]=~y.g[E];return new o(N,~y.h).add(g)}t.abs=function(){return A(this)?I(this):this},t.add=function(y){for(var p=Math.max(this.g.length,y.g.length),N=[],E=0,R=0;R<=p;R++){var D=E+(this.i(R)&65535)+(y.i(R)&65535),S=(D>>>16)+(this.i(R)>>>16)+(y.i(R)>>>16);E=S>>>16,D&=65535,S&=65535,N[R]=S<<16|D}return new o(N,N[N.length-1]&-2147483648?-1:0)};function k(y,p){return y.add(I(p))}t.j=function(y){if(j(this)||j(y))return f;if(A(this))return A(y)?I(this).j(I(y)):I(I(this).j(y));if(A(y))return I(this.j(I(y)));if(0>this.l(w)&&0>y.l(w))return d(this.m()*y.m());for(var p=this.g.length+y.g.length,N=[],E=0;E<2*p;E++)N[E]=0;for(E=0;E<this.g.length;E++)for(var R=0;R<y.g.length;R++){var D=this.i(E)>>>16,S=this.i(E)&65535,X=y.i(R)>>>16,U=y.i(R)&65535;N[2*E+2*R]+=S*U,v(N,2*E+2*R),N[2*E+2*R+1]+=D*U,v(N,2*E+2*R+1),N[2*E+2*R+1]+=S*X,v(N,2*E+2*R+1),N[2*E+2*R+2]+=D*X,v(N,2*E+2*R+2)}for(E=0;E<p;E++)N[E]=N[2*E+1]<<16|N[2*E];for(E=p;E<2*p;E++)N[E]=0;return new o(N,0)};function v(y,p){for(;(y[p]&65535)!=y[p];)y[p+1]+=y[p]>>>16,y[p]&=65535,p++}function _(y,p){this.g=y,this.h=p}function T(y,p){if(j(p))throw Error("division by zero");if(j(y))return new _(f,f);if(A(y))return p=T(I(y),p),new _(I(p.g),I(p.h));if(A(p))return p=T(y,I(p)),new _(I(p.g),p.h);if(30<y.g.length){if(A(y)||A(p))throw Error("slowDivide_ only works with positive integers.");for(var N=g,E=p;0>=E.l(y);)N=O(N),E=O(E);var R=V(N,1),D=V(E,1);for(E=V(E,2),N=V(N,2);!j(E);){var S=D.add(E);0>=S.l(y)&&(R=R.add(N),D=S),E=V(E,1),N=V(N,1)}return p=k(y,R.j(p)),new _(R,p)}for(R=f;0<=y.l(p);){for(N=Math.max(1,Math.floor(y.m()/p.m())),E=Math.ceil(Math.log(N)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),D=d(N),S=D.j(p);A(S)||0<S.l(y);)N-=E,D=d(N),S=D.j(p);j(D)&&(D=g),R=R.add(D),y=k(y,S)}return new _(R,y)}t.A=function(y){return T(this,y).h},t.and=function(y){for(var p=Math.max(this.g.length,y.g.length),N=[],E=0;E<p;E++)N[E]=this.i(E)&y.i(E);return new o(N,this.h&y.h)},t.or=function(y){for(var p=Math.max(this.g.length,y.g.length),N=[],E=0;E<p;E++)N[E]=this.i(E)|y.i(E);return new o(N,this.h|y.h)},t.xor=function(y){for(var p=Math.max(this.g.length,y.g.length),N=[],E=0;E<p;E++)N[E]=this.i(E)^y.i(E);return new o(N,this.h^y.h)};function O(y){for(var p=y.g.length+1,N=[],E=0;E<p;E++)N[E]=y.i(E)<<1|y.i(E-1)>>>31;return new o(N,y.h)}function V(y,p){var N=p>>5;p%=32;for(var E=y.g.length-N,R=[],D=0;D<E;D++)R[D]=0<p?y.i(D+N)>>>p|y.i(D+N+1)<<32-p:y.i(D+N);return new o(R,y.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,PN=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,qi=o}).apply(typeof rv<"u"?rv:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DN,ul,ON,Yu,hp,LN,MN,VN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,x){return c==Array.prototype||c==Object.prototype||(c[m]=x.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var m=0;m<c.length;++m){var x=c[m];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=n(this);function i(c,m){if(m)e:{var x=s;c=c.split(".");for(var P=0;P<c.length-1;P++){var z=c[P];if(!(z in x))break e;x=x[z]}c=c[c.length-1],P=x[c],m=m(P),m!=P&&m!=null&&e(x,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var x=0,P=!1,z={next:function(){if(!P&&x<c.length){var q=x++;return{value:m(q,c[q]),done:!1}}return P=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}i("Array.prototype.values",function(c){return c||function(){return a(this,function(m,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function d(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function h(c,m,x){return c.call.apply(c.bind,arguments)}function f(c,m,x){if(!c)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,P),c.apply(m,z)}}return function(){return c.apply(m,arguments)}}function g(c,m,x){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function w(c,m){var x=Array.prototype.slice.call(arguments,1);return function(){var P=x.slice();return P.push.apply(P,arguments),c.apply(this,P)}}function j(c,m){function x(){}x.prototype=m.prototype,c.aa=m.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(P,z,q){for(var ne=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ne[ze-2]=arguments[ze];return m.prototype[z].apply(P,ne)}}function A(c){const m=c.length;if(0<m){const x=Array(m);for(let P=0;P<m;P++)x[P]=c[P];return x}return[]}function I(c,m){for(let x=1;x<arguments.length;x++){const P=arguments[x];if(u(P)){const z=c.length||0,q=P.length||0;c.length=z+q;for(let ne=0;ne<q;ne++)c[z+ne]=P[ne]}else c.push(P)}}class k{constructor(m,x){this.i=m,this.j=x,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(c){return/^[\s\xa0]*$/.test(c)}function _(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function T(c){return T[" "](c),c}T[" "]=function(){};var O=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function V(c,m,x){for(const P in c)m.call(x,c[P],P,c)}function y(c,m){for(const x in c)m.call(void 0,c[x],x,c)}function p(c){const m={};for(const x in c)m[x]=c[x];return m}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,m){let x,P;for(let z=1;z<arguments.length;z++){P=arguments[z];for(x in P)c[x]=P[x];for(let q=0;q<N.length;q++)x=N[q],Object.prototype.hasOwnProperty.call(P,x)&&(c[x]=P[x])}}function R(c){var m=1;c=c.split(":");const x=[];for(;0<m&&c.length;)x.push(c.shift()),m--;return c.length&&x.push(c.join(":")),x}function D(c){l.setTimeout(()=>{throw c},0)}function S(){var c=H;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class X{constructor(){this.h=this.g=null}add(m,x){const P=U.get();P.set(m,x),this.h?this.h.next=P:this.g=P,this.h=P}}var U=new k(()=>new M,c=>c.reset());class M{constructor(){this.next=this.g=this.h=null}set(m,x){this.h=m,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let $,F=!1,H=new X,L=()=>{const c=l.Promise.resolve(void 0);$=()=>{c.then(se)}};var se=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(x){D(x)}var m=U;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}F=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};l.addEventListener("test",x,m),l.removeEventListener("test",x,m)}catch{}return c}();function Ce(c,m){if(me.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,P=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(O){e:{try{T(m.nodeName);var z=!0;break e}catch{}z=!1}z||(m=null)}}else x=="mouseover"?m=c.fromElement:x=="mouseout"&&(m=c.toElement);this.relatedTarget=m,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ve[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ce.aa.h.call(this)}}j(Ce,me);var Ve={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Xe="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Vt(c,m,x,P,z){this.listener=c,this.proxy=null,this.src=m,this.type=x,this.capture=!!P,this.ha=z,this.key=++Fe,this.da=this.fa=!1}function Ye(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function kt(c){this.src=c,this.g={},this.h=0}kt.prototype.add=function(c,m,x,P,z){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var ne=Hs(c,m,P,z);return-1<ne?(m=c[ne],x||(m.fa=!1)):(m=new Vt(m,this.src,q,!!P,z),m.fa=x,c.push(m)),m};function un(c,m){var x=m.type;if(x in c.g){var P=c.g[x],z=Array.prototype.indexOf.call(P,m,void 0),q;(q=0<=z)&&Array.prototype.splice.call(P,z,1),q&&(Ye(m),c.g[x].length==0&&(delete c.g[x],c.h--))}}function Hs(c,m,x,P){for(var z=0;z<c.length;++z){var q=c[z];if(!q.da&&q.listener==m&&q.capture==!!x&&q.ha==P)return z}return-1}var ks="closure_lm_"+(1e6*Math.random()|0),Ir={};function ki(c,m,x,P,z){if(Array.isArray(m)){for(var q=0;q<m.length;q++)ki(c,m[q],x,P,z);return null}return x=Cr(x),c&&c[Xe]?c.K(m,x,d(P)?!!P.capture:!1,z):ma(c,m,x,!1,P,z)}function ma(c,m,x,P,z,q){if(!m)throw Error("Invalid event type");var ne=d(z)?!!z.capture:!!z,ze=Ks(c);if(ze||(c[ks]=ze=new kt(c)),x=ze.add(m,x,P,ne,q),x.proxy)return x;if(P=Ei(),x.proxy=P,P.src=c,P.listener=x,c.addEventListener)de||(z=ne),z===void 0&&(z=!1),c.addEventListener(m.toString(),P,z);else if(c.attachEvent)c.attachEvent(Tr(m.toString()),P);else if(c.addListener&&c.removeListener)c.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ei(){function c(x){return m.call(c.src,c.listener,x)}const m=Sr;return c}function Ws(c,m,x,P,z){if(Array.isArray(m))for(var q=0;q<m.length;q++)Ws(c,m[q],x,P,z);else P=d(P)?!!P.capture:!!P,x=Cr(x),c&&c[Xe]?(c=c.i,m=String(m).toString(),m in c.g&&(q=c.g[m],x=Hs(q,x,P,z),-1<x&&(Ye(q[x]),Array.prototype.splice.call(q,x,1),q.length==0&&(delete c.g[m],c.h--)))):c&&(c=Ks(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Hs(m,x,P,z)),(x=-1<c?m[c]:null)&&Bn(x))}function Bn(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Xe])un(m.i,c);else{var x=c.type,P=c.proxy;m.removeEventListener?m.removeEventListener(x,P,c.capture):m.detachEvent?m.detachEvent(Tr(x),P):m.addListener&&m.removeListener&&m.removeListener(P),(x=Ks(m))?(un(x,c),x.h==0&&(x.src=null,m[ks]=null)):Ye(c)}}}function Tr(c){return c in Ir?Ir[c]:Ir[c]="on"+c}function Sr(c,m){if(c.da)c=!0;else{m=new Ce(m,this);var x=c.listener,P=c.ha||c.src;c.fa&&Bn(c),c=x.call(P,m)}return c}function Ks(c){return c=c[ks],c instanceof kt?c:null}var zn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cr(c){return typeof c=="function"?c:(c[zn]||(c[zn]=function(m){return c.handleEvent(m)}),c[zn])}function rt(){ee.call(this),this.i=new kt(this),this.M=this,this.F=null}j(rt,ee),rt.prototype[Xe]=!0,rt.prototype.removeEventListener=function(c,m,x,P){Ws(this,c,m,x,P)};function pt(c,m){var x,P=c.F;if(P)for(x=[];P;P=P.F)x.push(P);if(c=c.M,P=m.type||m,typeof m=="string")m=new me(m,c);else if(m instanceof me)m.target=m.target||c;else{var z=m;m=new me(P,c),E(m,z)}if(z=!0,x)for(var q=x.length-1;0<=q;q--){var ne=m.g=x[q];z=cs(ne,P,!0,m)&&z}if(ne=m.g=c,z=cs(ne,P,!0,m)&&z,z=cs(ne,P,!1,m)&&z,x)for(q=0;q<x.length;q++)ne=m.g=x[q],z=cs(ne,P,!1,m)&&z}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var x=c.g[m],P=0;P<x.length;P++)Ye(x[P]);delete c.g[m],c.h--}}this.F=null},rt.prototype.K=function(c,m,x,P){return this.i.add(String(c),m,!1,x,P)},rt.prototype.L=function(c,m,x,P){return this.i.add(String(c),m,!0,x,P)};function cs(c,m,x,P){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var z=!0,q=0;q<m.length;++q){var ne=m[q];if(ne&&!ne.da&&ne.capture==x){var ze=ne.listener,Ft=ne.ha||ne.src;ne.fa&&un(c.i,ne),z=ze.call(Ft,P)!==!1&&z}}return z&&!P.defaultPrevented}function le(c,m,x){if(typeof c=="function")x&&(c=g(c,x));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout(c,m||0)}function Ne(c){c.g=le(()=>{c.g=null,c.i&&(c.i=!1,Ne(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class We extends ee{constructor(m,x){super(),this.m=m,this.l=x,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ne(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ue(c){ee.call(this),this.h=c,this.g={}}j(Ue,ee);var Ro=[];function fa(c){V(c.g,function(m,x){this.g.hasOwnProperty(x)&&Bn(m)},c),c.g={}}Ue.prototype.N=function(){Ue.aa.N.call(this),fa(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pa=l.JSON.stringify,Fc=l.JSON.parse,Uc=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function ga(){}ga.prototype.h=null;function Po(c){return c.h||(c.h=c.i())}function Es(){}var Ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rr(){me.call(this,"d")}j(Rr,me);function xa(){me.call(this,"c")}j(xa,me);var Is={},Do=null;function us(){return Do=Do||new rt}Is.La="serverreachability";function $c(c){me.call(this,Is.La,c)}j($c,me);function Ii(c){const m=us();pt(m,new $c(m))}Is.STAT_EVENT="statevent";function ya(c,m){me.call(this,Is.STAT_EVENT,c),this.stat=m}j(ya,me);function Et(c){const m=us();pt(m,new ya(m,c))}Is.Ma="timingevent";function va(c,m){me.call(this,Is.Ma,c),this.size=m}j(va,me);function Pr(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},m)}function Gs(){this.g=!0}Gs.prototype.xa=function(){this.g=!1};function wa(c,m,x,P,z,q){c.info(function(){if(c.g)if(q)for(var ne="",ze=q.split("&"),Ft=0;Ft<ze.length;Ft++){var Ae=ze[Ft].split("=");if(1<Ae.length){var Xt=Ae[0];Ae=Ae[1];var Yt=Xt.split("_");ne=2<=Yt.length&&Yt[1]=="type"?ne+(Xt+"="+Ae+"&"):ne+(Xt+"=redacted&")}}else ne=null;else ne=q;return"XMLHTTP REQ ("+P+") [attempt "+z+"]: "+m+`
`+x+`
`+ne})}function Oo(c,m,x,P,z,q,ne){c.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+z+"]: "+m+`
`+x+`
`+q+" "+ne})}function Qs(c,m,x,P){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Bc(c,x)+(P?" "+P:"")})}function Lo(c,m){c.info(function(){return"TIMEOUT: "+m})}Gs.prototype.info=function(){};function Bc(c,m){if(!c.g)return m;if(!m)return null;try{var x=JSON.parse(m);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var P=x[c];if(!(2>P.length)){var z=P[1];if(Array.isArray(z)&&!(1>z.length)){var q=z[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ne=1;ne<z.length;ne++)z[ne]=""}}}}return pa(x)}catch{return m}}var Dr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ba;function ds(){}j(ds,ga),ds.prototype.g=function(){return new XMLHttpRequest},ds.prototype.i=function(){return{}},ba=new ds;function Ts(c,m,x,P){this.j=c,this.i=m,this.l=x,this.R=P||1,this.U=new Ue(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qn}function qn(){this.i=null,this.g="",this.h=!1}var zc={},qc={};function Hc(c,m,x){c.L=1,c.v=K(Hn(m)),c.m=x,c.P=!0,Kh(c,null)}function Kh(c,m){c.F=Date.now(),Vo(c),c.A=Hn(c.v);var x=c.A,P=c.R;Array.isArray(P)||(P=[String(P)]),Bo(x.i,"t",P),c.C=0,x=c.j.J,c.h=new qn,c.g=a0(c.j,x?m:null,!c.m),0<c.O&&(c.M=new We(g(c.Y,c,c.g),c.O)),m=c.U,x=c.g,P=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(Ro[0]=z.toString()),z=Ro);for(var q=0;q<z.length;q++){var ne=ki(x,z[q],P||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=c.H?p(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),Ii(),wa(c.i,c.u,c.A,c.l,c.R,c.m)}Ts.prototype.ca=function(c){c=c.target;const m=this.M;m&&Ys(c)==3?m.j():this.Y(c)},Ts.prototype.Y=function(c){try{if(c==this.g)e:{const Yt=Ys(this.g);var m=this.g.Ba();const ka=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||Qx(this.g)))){this.J||Yt!=4||m==7||(m==8||0>=ka?Ii(3):Ii(2)),Wc(this);var x=this.g.Z();this.X=x;t:if(Gh(this)){var P=Qx(this.g);c="";var z=P.length,q=Ys(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Or(this),_a(this);var ne="";break t}this.h.i=new l.TextDecoder}for(m=0;m<z;m++)this.h.h=!0,c+=this.h.i.decode(P[m],{stream:!(q&&m==z-1)});P.length=0,this.h.g+=c,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=x==200,Oo(this.i,this.u,this.A,this.l,this.R,Yt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Ft=this.g;if((ze=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ze)){var Ae=ze;break t}}Ae=null}if(x=Ae)Qs(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fo(this,x);else{this.o=!1,this.s=3,Et(12),Or(this),_a(this);break e}}if(this.P){x=!0;let ms;for(;!this.J&&this.C<ne.length;)if(ms=Bx(this,ne),ms==qc){Yt==4&&(this.s=4,Et(14),x=!1),Qs(this.i,this.l,null,"[Incomplete Response]");break}else if(ms==zc){this.s=4,Et(15),Qs(this.i,this.l,ne,"[Invalid Chunk]"),x=!1;break}else Qs(this.i,this.l,ms,null),Fo(this,ms);if(Gh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||ne.length!=0||this.h.h||(this.s=1,Et(16),x=!1),this.o=this.o&&x,!x)Qs(this.i,this.l,ne,"[Invalid Chunked Response]"),Or(this),_a(this);else if(0<ne.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),am(Xt),Xt.M=!0,Et(11))}}else Qs(this.i,this.l,ne,null),Fo(this,ne);Yt==4&&Or(this),this.o&&!this.J&&(Yt==4?n0(this.j,this):(this.o=!1,Vo(this)))}else U1(this.g),x==400&&0<ne.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),Or(this),_a(this)}}}catch{}finally{}};function Gh(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Bx(c,m){var x=c.C,P=m.indexOf(`
`,x);return P==-1?qc:(x=Number(m.substring(x,P)),isNaN(x)?zc:(P+=1,P+x>m.length?qc:(m=m.slice(P,P+x),c.C=P+x,m)))}Ts.prototype.cancel=function(){this.J=!0,Or(this)};function Vo(c){c.S=Date.now()+c.I,Qh(c,c.I)}function Qh(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Pr(g(c.ba,c),m)}function Wc(c){c.B&&(l.clearTimeout(c.B),c.B=null)}Ts.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Lo(this.i,this.A),this.L!=2&&(Ii(),Et(17)),Or(this),this.s=2,_a(this)):Qh(this,this.S-c)};function _a(c){c.j.G==0||c.J||n0(c.j,c)}function Or(c){Wc(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,fa(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function Fo(c,m){try{var x=c.j;if(x.G!=0&&(x.g==c||Ti(x.h,c))){if(!c.K&&Ti(x.h,c)&&x.G==3){try{var P=x.Da.g.parse(m)}catch{P=null}if(Array.isArray(P)&&P.length==3){var z=P;if(z[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)su(x),tu(x);else break e;im(x),Et(18)}}else x.za=z[1],0<x.za-x.T&&37500>z[2]&&x.F&&x.v==0&&!x.C&&(x.C=Pr(g(x.Za,x),6e3));if(1>=wt(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Ai(x,11)}else if((c.K||x.g==c)&&su(x),!v(m))for(z=x.Da.g.parse(m),m=0;m<z.length;m++){let Ae=z[m];if(x.T=Ae[0],Ae=Ae[1],x.G==2)if(Ae[0]=="c"){x.K=Ae[1],x.ia=Ae[2];const Xt=Ae[3];Xt!=null&&(x.la=Xt,x.j.info("VER="+x.la));const Yt=Ae[4];Yt!=null&&(x.Aa=Yt,x.j.info("SVER="+x.Aa));const ka=Ae[5];ka!=null&&typeof ka=="number"&&0<ka&&(P=1.5*ka,x.L=P,x.j.info("backChannelRequestTimeoutMs_="+P)),P=x;const ms=c.g;if(ms){const iu=ms.g?ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var q=P.h;q.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Uo(q,q.h),q.h=null))}if(P.D){const om=ms.g?ms.g.getResponseHeader("X-HTTP-Session-Id"):null;om&&(P.ya=om,C(P.I,P.D,om))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),P=x;var ne=c;if(P.qa=i0(P,P.J?P.ia:null,P.W),ne.K){Qc(P.h,ne);var ze=ne,Ft=P.L;Ft&&(ze.I=Ft),ze.B&&(Wc(ze),Vo(ze)),P.g=ne}else e0(P);0<x.i.length&&nu(x)}else Ae[0]!="stop"&&Ae[0]!="close"||Ai(x,7);else x.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Ai(x,7):rm(x):Ae[0]!="noop"&&x.l&&x.l.ta(Ae),x.v=0)}}Ii(4)}catch{}}var Xh=class{constructor(c,m){this.g=c,this.map=m}};function Kc(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wt(c){return c.h?1:c.g?c.g.size:0}function Ti(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Uo(c,m){c.g?c.g.add(m):c.h=m}function Qc(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Kc.prototype.cancel=function(){if(this.i=Xc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Xc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const x of c.g.values())m=m.concat(x.D);return m}return A(c.i)}function Yh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var m=[],x=c.length,P=0;P<x;P++)m.push(c[P]);return m}m=[],x=0;for(P in c)m[x++]=c[P];return m}function Jh(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var m=[];c=c.length;for(var x=0;x<c;x++)m.push(x);return m}m=[],x=0;for(const P in c)m[x++]=P;return m}}}function Yc(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var x=Jh(c),P=Yh(c),z=P.length,q=0;q<z;q++)m.call(void 0,P[q],x&&x[q],c)}var Jc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zh(c,m){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var P=c[x].indexOf("="),z=null;if(0<=P){var q=c[x].substring(0,P);z=c[x].substring(P+1)}else q=c[x];m(q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Xs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Xs){this.h=c.h,Si(this,c.j),this.o=c.o,this.g=c.g,Ci(this,c.s),this.l=c.l;var m=c.i,x=new ht;x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),$o(this,x),this.m=c.m}else c&&(m=String(c).match(Jc))?(this.h=!1,Si(this,m[1]||"",!0),this.o=G(m[2]||""),this.g=G(m[3]||"",!0),Ci(this,m[4]),this.l=G(m[5]||"",!0),$o(this,m[6]||"",!0),this.m=G(m[7]||"")):(this.h=!1,this.i=new ht(null,this.h))}Xs.prototype.toString=function(){var c=[],m=this.j;m&&c.push(fe(m,$e,!0),":");var x=this.g;return(x||m=="file")&&(c.push("//"),(m=this.o)&&c.push(fe(m,$e,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(fe(x,x.charAt(0)=="/"?dn:Ct,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",fe(x,Be)),c.join("")};function Hn(c){return new Xs(c)}function Si(c,m,x){c.j=x?G(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Ci(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function $o(c,m,x){m instanceof ht?(c.i=m,em(c.i,c.h)):(x||(m=fe(m,Ie)),c.i=new ht(m,c.h))}function C(c,m,x){c.i.set(m,x)}function K(c){return C(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function G(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function fe(c,m,x){return typeof c=="string"?(c=encodeURI(c).replace(m,De),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function De(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $e=/[#\/\?@]/g,Ct=/[#\?:]/g,dn=/[#\?]/g,Ie=/[#\?@]/g,Be=/#/g;function ht(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function It(c){c.g||(c.g=new Map,c.h=0,c.i&&Zh(c.i,function(m,x){c.add(decodeURIComponent(m.replace(/\+/g," ")),x)}))}t=ht.prototype,t.add=function(c,m){It(this),this.i=null,c=Lr(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(m),this.h+=1,this};function Na(c,m){It(c),m=Lr(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Zc(c,m){return It(c),m=Lr(c,m),c.g.has(m)}t.forEach=function(c,m){It(this),this.g.forEach(function(x,P){x.forEach(function(z){c.call(m,z,P,this)},this)},this)},t.na=function(){It(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),x=[];for(let P=0;P<m.length;P++){const z=c[P];for(let q=0;q<z.length;q++)x.push(m[P])}return x},t.V=function(c){It(this);let m=[];if(typeof c=="string")Zc(this,c)&&(m=m.concat(this.g.get(Lr(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)m=m.concat(c[x])}return m},t.set=function(c,m){return It(this),this.i=null,c=Lr(this,c),Zc(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function Bo(c,m,x){Na(c,m),0<x.length&&(c.i=null,c.g.set(Lr(c,m),A(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var x=0;x<m.length;x++){var P=m[x];const q=encodeURIComponent(String(P)),ne=this.V(P);for(P=0;P<ne.length;P++){var z=q;ne[P]!==""&&(z+="="+encodeURIComponent(String(ne[P]))),c.push(z)}}return this.i=c.join("&")};function Lr(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function em(c,m){m&&!c.j&&(It(c),c.i=null,c.g.forEach(function(x,P){var z=P.toLowerCase();P!=z&&(Na(this,P),Bo(this,z,x))},c)),c.j=m}function tm(c,m){const x=new Gs;if(l.Image){const P=new Image;P.onload=w(hs,x,"TestLoadImage: loaded",!0,m,P),P.onerror=w(hs,x,"TestLoadImage: error",!1,m,P),P.onabort=w(hs,x,"TestLoadImage: abort",!1,m,P),P.ontimeout=w(hs,x,"TestLoadImage: timeout",!1,m,P),l.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=c}else m(!1)}function nm(c,m){const x=new Gs,P=new AbortController,z=setTimeout(()=>{P.abort(),hs(x,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:P.signal}).then(q=>{clearTimeout(z),q.ok?hs(x,"TestPingServer: ok",!0,m):hs(x,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),hs(x,"TestPingServer: error",!1,m)})}function hs(c,m,x,P,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),P(x)}catch{}}function pe(){this.g=new Uc}function Mr(c,m,x){const P=x||"";try{Yc(c,function(z,q){let ne=z;d(z)&&(ne=pa(z)),m.push(P+q+"="+encodeURIComponent(ne))})}catch(z){throw m.push(P+"type="+encodeURIComponent("_badmap")),z}}function Sn(c){this.l=c.Ub||null,this.j=c.eb||!1}j(Sn,ga),Sn.prototype.g=function(){return new Wn(this.l,this.j)},Sn.prototype.i=function(c){return function(){return c}}({});function Wn(c,m){rt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(Wn,rt),t=Wn.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,qo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qo(this)),this.g&&(this.readyState=3,qo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zx(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function zx(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?zo(this):qo(this),this.readyState==3&&zx(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,zo(this))},t.Qa=function(c){this.g&&(this.response=c,zo(this))},t.ga=function(){this.g&&zo(this)};function zo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,qo(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var x=m.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=m.next();return c.join(`\r
`)};function qo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Wn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qx(c){let m="";return V(c,function(x,P){m+=P,m+=":",m+=x,m+=`\r
`}),m}function sm(c,m,x){e:{for(P in x){var P=!1;break e}P=!0}P||(x=qx(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):C(c,m,x))}function mt(c){rt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(mt,rt);var V1=/^https?$/i,F1=["POST","PUT"];t=mt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,x,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ba.g(),this.v=this.o?Po(this.o):Po(ba),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(q){Hx(this,q);return}if(c=x||"",x=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var z in P)x.set(z,P[z]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const q of P.keys())x.set(q,P.get(q));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(x.keys()).find(q=>q.toLowerCase()=="content-type"),z=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(F1,m,void 0))||P||z||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ne]of x)this.g.setRequestHeader(q,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gx(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){Hx(this,q)}};function Hx(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,Wx(c),eu(c)}function Wx(c){c.A||(c.A=!0,pt(c,"complete"),pt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,pt(this,"complete"),pt(this,"abort"),eu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eu(this,!0)),mt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Kx(this):this.bb())},t.bb=function(){Kx(this)};function Kx(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Ys(c)!=4||c.Z()!=2)){if(c.u&&Ys(c)==4)le(c.Ea,0,c);else if(pt(c,"readystatechange"),Ys(c)==4){c.h=!1;try{const ne=c.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var x;if(!(x=m)){var P;if(P=ne===0){var z=String(c.D).match(Jc)[1]||null;!z&&l.self&&l.self.location&&(z=l.self.location.protocol.slice(0,-1)),P=!V1.test(z?z.toLowerCase():"")}x=P}if(x)pt(c,"complete"),pt(c,"success");else{c.m=6;try{var q=2<Ys(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",Wx(c)}}finally{eu(c)}}}}function eu(c,m){if(c.g){Gx(c);const x=c.g,P=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||pt(c,"ready");try{x.onreadystatechange=P}catch{}}}function Gx(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ys(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ys(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Fc(m)}};function Qx(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function U1(c){const m={};c=(c.g&&2<=Ys(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<c.length;P++){if(v(c[P]))continue;var x=R(c[P]);const z=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const q=m[z]||[];m[z]=q,q.push(x)}y(m,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ho(c,m,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||m}function Xx(c){this.Aa=0,this.i=[],this.j=new Gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ho("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ho("baseRetryDelayMs",5e3,c),this.cb=Ho("retryDelaySeedMs",1e4,c),this.Wa=Ho("forwardChannelMaxRetries",2,c),this.wa=Ho("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Kc(c&&c.concurrentRequestLimit),this.Da=new pe,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xx.prototype,t.la=8,t.G=1,t.connect=function(c,m,x,P){Et(0),this.W=c,this.H=m||{},x&&P!==void 0&&(this.H.OSID=x,this.H.OAID=P),this.F=this.X,this.I=i0(this,null,this.W),nu(this)};function rm(c){if(Yx(c),c.G==3){var m=c.U++,x=Hn(c.I);if(C(x,"SID",c.K),C(x,"RID",m),C(x,"TYPE","terminate"),Wo(c,x),m=new Ts(c,c.j,m),m.L=2,m.v=K(Hn(x)),x=!1,l.navigator&&l.navigator.sendBeacon)try{x=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!x&&l.Image&&(new Image().src=m.v,x=!0),x||(m.g=a0(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Vo(m)}r0(c)}function tu(c){c.g&&(am(c),c.g.cancel(),c.g=null)}function Yx(c){tu(c),c.u&&(l.clearTimeout(c.u),c.u=null),su(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function nu(c){if(!Gc(c.h)&&!c.s){c.s=!0;var m=c.Ga;$||L(),F||($(),F=!0),H.add(m,c),c.B=0}}function $1(c,m){return wt(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Pr(g(c.Ga,c,m),s0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new Ts(this,this.j,c);let q=this.o;if(this.S&&(q?(q=p(q),E(q,this.S)):q=this.S),this.m!==null||this.O||(z.H=q,q=null),this.P)e:{for(var m=0,x=0;x<this.i.length;x++){t:{var P=this.i[x];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(m+=P,4096<m){m=x;break e}if(m===4096||x===this.i.length-1){m=x+1;break e}}m=1e3}else m=1e3;m=Zx(this,z,m),x=Hn(this.I),C(x,"RID",c),C(x,"CVER",22),this.D&&C(x,"X-HTTP-Session-Id",this.D),Wo(this,x),q&&(this.O?m="headers="+encodeURIComponent(String(qx(q)))+"&"+m:this.m&&sm(x,this.m,q)),Uo(this.h,z),this.Ua&&C(x,"TYPE","init"),this.P?(C(x,"$req",m),C(x,"SID","null"),z.T=!0,Hc(z,x,null)):Hc(z,x,m),this.G=2}}else this.G==3&&(c?Jx(this,c):this.i.length==0||Gc(this.h)||Jx(this))};function Jx(c,m){var x;m?x=m.l:x=c.U++;const P=Hn(c.I);C(P,"SID",c.K),C(P,"RID",x),C(P,"AID",c.T),Wo(c,P),c.m&&c.o&&sm(P,c.m,c.o),x=new Ts(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),m&&(c.i=m.D.concat(c.i)),m=Zx(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Uo(c.h,x),Hc(x,P,m)}function Wo(c,m){c.H&&V(c.H,function(x,P){C(m,P,x)}),c.l&&Yc({},function(x,P){C(m,P,x)})}function Zx(c,m,x){x=Math.min(c.i.length,x);var P=c.l?g(c.l.Na,c.l,c):null;e:{var z=c.i;let q=-1;for(;;){const ne=["count="+x];q==-1?0<x?(q=z[0].g,ne.push("ofs="+q)):q=0:ne.push("ofs="+q);let ze=!0;for(let Ft=0;Ft<x;Ft++){let Ae=z[Ft].g;const Xt=z[Ft].map;if(Ae-=q,0>Ae)q=Math.max(0,z[Ft].g-100),ze=!1;else try{Mr(Xt,ne,"req"+Ae+"_")}catch{P&&P(Xt)}}if(ze){P=ne.join("&");break e}}}return c=c.i.splice(0,x),m.D=c,P}function e0(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;$||L(),F||($(),F=!0),H.add(m,c),c.v=0}}function im(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Pr(g(c.Fa,c),s0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,t0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Pr(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),tu(this),t0(this))};function am(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function t0(c){c.g=new Ts(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=Hn(c.qa);C(m,"RID","rpc"),C(m,"SID",c.K),C(m,"AID",c.T),C(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&C(m,"TO",c.ja),C(m,"TYPE","xmlhttp"),Wo(c,m),c.m&&c.o&&sm(m,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=K(Hn(m)),x.m=null,x.P=!0,Kh(x,c)}t.Za=function(){this.C!=null&&(this.C=null,tu(this),im(this),Et(19))};function su(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function n0(c,m){var x=null;if(c.g==m){su(c),am(c),c.g=null;var P=2}else if(Ti(c.h,m))x=m.D,Qc(c.h,m),P=1;else return;if(c.G!=0){if(m.o)if(P==1){x=m.m?m.m.length:0,m=Date.now()-m.F;var z=c.B;P=us(),pt(P,new va(P,x)),nu(c)}else e0(c);else if(z=m.s,z==3||z==0&&0<m.X||!(P==1&&$1(c,m)||P==2&&im(c)))switch(x&&0<x.length&&(m=c.h,m.i=m.i.concat(x)),z){case 1:Ai(c,5);break;case 4:Ai(c,10);break;case 3:Ai(c,6);break;default:Ai(c,2)}}}function s0(c,m){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*m}function Ai(c,m){if(c.j.info("Error code "+m),m==2){var x=g(c.fb,c),P=c.Xa;const z=!P;P=new Xs(P||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Si(P,"https"),K(P),z?tm(P.toString(),x):nm(P.toString(),x)}else Et(2);c.G=0,c.l&&c.l.sa(m),r0(c),Yx(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function r0(c){if(c.G=0,c.ka=[],c.l){const m=Xc(c.h);(m.length!=0||c.i.length!=0)&&(I(c.ka,m),I(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function i0(c,m,x){var P=x instanceof Xs?Hn(x):new Xs(x);if(P.g!="")m&&(P.g=m+"."+P.g),Ci(P,P.s);else{var z=l.location;P=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;var q=new Xs(null);P&&Si(q,P),m&&(q.g=m),z&&Ci(q,z),x&&(q.l=x),P=q}return x=c.D,m=c.ya,x&&m&&C(P,x,m),C(P,"VER",c.la),Wo(c,P),P}function a0(c,m,x){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new mt(new Sn({eb:x})):new mt(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function o0(){}t=o0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ru(){}ru.prototype.g=function(c,m){return new Cn(c,m)};function Cn(c,m){rt.call(this),this.g=new Xx(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!v(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!v(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new ja(this)}j(Cn,rt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){rm(this.g)},Cn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=pa(c),c=x);m.i.push(new Xh(m.Ya++,c)),m.G==3&&nu(m)},Cn.prototype.N=function(){this.g.l=null,delete this.j,rm(this.g),delete this.g,Cn.aa.N.call(this)};function l0(c){Rr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const x in m){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}j(l0,Rr);function c0(){xa.call(this),this.status=1}j(c0,xa);function ja(c){this.g=c}j(ja,o0),ja.prototype.ua=function(){pt(this.g,"a")},ja.prototype.ta=function(c){pt(this.g,new l0(c))},ja.prototype.sa=function(c){pt(this.g,new c0)},ja.prototype.ra=function(){pt(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,VN=function(){return new ru},MN=function(){return us()},LN=Is,hp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,Yu=Dr,Mo.COMPLETE="complete",ON=Mo,Es.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",rt.prototype.listen=rt.prototype.K,ul=Es,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,DN=mt}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});const iv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=new Rg("@firebase/firestore");function tl(){return na.logLevel}function ce(t,...e){if(na.logLevel<=Ee.DEBUG){const n=e.map(qg);na.debug(`Firestore (${No}): ${t}`,...n)}}function vr(t,...e){if(na.logLevel<=Ee.ERROR){const n=e.map(qg);na.error(`Firestore (${No}): ${t}`,...n)}}function sa(t,...e){if(na.logLevel<=Ee.WARN){const n=e.map(qg);na.warn(`Firestore (${No}): ${t}`,...n)}}function qg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t="Unexpected state"){const e=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: `+t;throw vr(e),new Error(e)}function Le(t,e){t||xe()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends zs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tn.UNAUTHENTICATED))}shutdown(){}}class TC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SC{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0);let s=this.i;const i=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let a=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Vs,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Vs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Le(typeof s.accessToken=="string"),new FN(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new tn(e)}}class CC{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class AC{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new CC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Le(this.o===void 0);const s=a=>{a.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>s(a))};const i=a=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new RC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const i=DC(40);for(let a=0;a<i.length;++a)s.length<20&&i[a]<n&&(s+=e.charAt(i[a]%e.length))}return s}}function Re(t,e){return t<e?-1:t>e?1:0}function oo(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new vt(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ve(e)}static min(){return new ve(new vt(0,0))}static max(){return new ve(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n,s){n===void 0?n=0:n>e.length&&xe(),s===void 0?s=e.length-n:s>e.length-n&&xe(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return tc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tc?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class et extends tc{construct(e,n,s){return new et(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ie(W.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new et(n)}static emptyPath(){return new et([])}}const OC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends tc{construct(e,n,s){return new Ot(e,n,s)}static isValidIdentifier(e){return OC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ot(["__name__"])}static fromServerFormat(e){const n=[];let s="",i=0;const a=()=>{if(s.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ie(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ie(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(s+=l,i++):(a(),i++)}if(a(),o)throw new ie(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(n)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(et.fromString(e))}static fromName(e){return new he(et.fromString(e).popFirst(5))}static empty(){return new he(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new et(e.slice()))}}function LC(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=ve.fromTimestamp(s===1e9?new vt(n+1,0):new vt(n,s));return new mi(i,he.empty(),e)}function MC(t){return new mi(t.readTime,t.key,-1)}class mi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new mi(ve.min(),he.empty(),-1)}static max(){return new mi(ve.max(),he.empty(),-1)}}function VC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==FC)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((s,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,s)=>{n(e)})}static reject(e){return new Q((n,s)=>{s(e)})}static waitFor(e){return new Q((n,s)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&n()},u=>s(u))}),o=!0,a===i&&n()})}static or(e){let n=Q.resolve(!1);for(const s of e)n=n.next(i=>i?Q.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,a)=>{s.push(n.call(this,i,a))}),this.waitFor(s)}static mapArray(e,n){return new Q((s,i)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++l,l===a&&s(o)},h=>i(h))}})}static doWhile(e,n){return new Q((s,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):s()};a()})}}function $C(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ic(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wg.oe=-1;function _h(t){return t==null}function Od(t){return t===0&&1/t==-1/0}function BC(t){return typeof t=="number"&&Number.isInteger(t)&&!Od(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zC(t,e){const n=[];for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.push(e(t[s],s,t));return n}function $N(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?s(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,s,i,a){this.key=e,this.value=n,this.color=s??$t.RED,this.left=i??$t.EMPTY,this.right=a??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,a){return new $t(e??this.key,n??this.value,s??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const a=s(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,s),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $t.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,n,s,i,a){return this}insert(e,n,s){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ov(this.data.getIterator())}getIteratorFrom(e){return new ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=s.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new Ht(Ot.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new BN("Invalid base64 string: "+a):a}}(e);return new Mt(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const qC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(t){if(Le(!!t),typeof t=="string"){let e=0;const n=qC.exec(t);if(Le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ra(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gg(t){const e=t.mapValue.fields.__previous_value__;return Kg(e)?Gg(e):e}function nc(t){const e=fi(t.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,s,i,a,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class lo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new lo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu={mapValue:{}};function ia(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kg(t)?4:KC(t)?9007199254740991:WC(t)?10:11:xe()}function $s(t,e){if(t===e)return!0;const n=ia(t);if(n!==ia(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nc(t).isEqual(nc(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=fi(i.timestampValue),l=fi(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return ra(i.bytesValue).isEqual(ra(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return gt(i.geoPointValue.latitude)===gt(a.geoPointValue.latitude)&&gt(i.geoPointValue.longitude)===gt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return gt(i.integerValue)===gt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=gt(i.doubleValue),l=gt(a.doubleValue);return o===l?Od(o)===Od(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return oo(t.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(av(o)!==av(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!$s(o[u],l[u])))return!1;return!0}(t,e);default:return xe()}}function sc(t,e){return(t.values||[]).find(n=>$s(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=ia(t),s=ia(e);if(n!==s)return Re(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=gt(a.integerValue||a.doubleValue),u=gt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return lv(t.timestampValue,e.timestampValue);case 4:return lv(nc(t),nc(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(a,o){const l=ra(a),u=ra(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=Re(l[d],u[d]);if(h!==0)return h}return Re(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Re(gt(a.latitude),gt(o.latitude));return l!==0?l:Re(gt(a.longitude),gt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cv(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,d,h;const f=a.fields||{},g=o.fields||{},w=(l=f.value)===null||l===void 0?void 0:l.arrayValue,j=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=Re(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((h=j==null?void 0:j.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:cv(w,j)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Eu.mapValue&&o===Eu.mapValue)return 0;if(a===Eu.mapValue)return 1;if(o===Eu.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const g=Re(u[f],h[f]);if(g!==0)return g;const w=co(l[u[f]],d[h[f]]);if(w!==0)return w}return Re(u.length,h.length)}(t.mapValue,e.mapValue);default:throw xe()}}function lv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=fi(t),s=fi(e),i=Re(n.seconds,s.seconds);return i!==0?i:Re(n.nanos,s.nanos)}function cv(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const a=co(n[i],s[i]);if(a)return a}return Re(n.length,s.length)}function uo(t){return mp(t)}function mp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=fi(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ra(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const a of n.values||[])i?i=!1:s+=",",s+=mp(a);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of s)a?a=!1:i+=",",i+=`${o}:${mp(n.fields[o])}`;return i+"}"}(t.mapValue):xe()}function uv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fp(t){return!!t&&"integerValue"in t}function Qg(t){return!!t&&"arrayValue"in t}function dv(t){return!!t&&"nullValue"in t}function hv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ju(t){return!!t&&"mapValue"in t}function WC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function kl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return da(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=kl(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function KC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ju(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(n)}setAll(e){let n=Ot.emptyPath(),s={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,s,i),s={},i=[],n=l.popLast()}o?s[l.lastSegment()]=kl(o):i.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,s,i)}delete(e){const n=this.field(e.popLast());Ju(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Ju(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){da(n,(i,a)=>e[i]=a);for(const i of s)delete e[i]}clone(){return new _n(kl(this.value))}}function zN(t){const e=[];return da(t.fields,(n,s)=>{const i=new Ot([n]);if(Ju(s)){const a=zN(s.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,s,i,a,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new sn(e,0,ve.min(),ve.min(),ve.min(),_n.empty(),0)}static newFoundDocument(e,n,s,i){return new sn(e,1,n,ve.min(),s,i,0)}static newNoDocument(e,n){return new sn(e,2,n,ve.min(),ve.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,ve.min(),ve.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.position=e,this.inclusive=n}}function mv(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?s=he.comparator(he.fromName(o.referenceValue),n.key):s=co(o,n.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function fv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$s(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n="asc"){this.field=e,this.dir=n}}function GC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{}class jt extends qN{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new XC(e,n,s):n==="array-contains"?new ZC(e,s):n==="in"?new e5(e,s):n==="not-in"?new t5(e,s):n==="array-contains-any"?new n5(e,s):new jt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new YC(e,s):new JC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(co(n,this.value)):n!==null&&ia(this.value)===ia(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ns extends qN{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ns(e,n)}matches(e){return HN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function HN(t){return t.op==="and"}function WN(t){return QC(t)&&HN(t)}function QC(t){for(const e of t.filters)if(e instanceof Ns)return!1;return!0}function pp(t){if(t instanceof jt)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(WN(t))return t.filters.map(e=>pp(e)).join(",");{const e=t.filters.map(n=>pp(n)).join(",");return`${t.op}(${e})`}}function KN(t,e){return t instanceof jt?function(s,i){return i instanceof jt&&s.op===i.op&&s.field.isEqual(i.field)&&$s(s.value,i.value)}(t,e):t instanceof Ns?function(s,i){return i instanceof Ns&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((a,o,l)=>a&&KN(o,i.filters[l]),!0):!1}(t,e):void xe()}function GN(t){return t instanceof jt?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof Ns?function(n){return n.op.toString()+" {"+n.getFilters().map(GN).join(" ,")+"}"}(t):"Filter"}class XC extends jt{constructor(e,n,s){super(e,n,s),this.key=he.fromName(s.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class YC extends jt{constructor(e,n){super(e,"in",n),this.keys=QN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JC extends jt{constructor(e,n){super(e,"not-in",n),this.keys=QN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>he.fromName(s.referenceValue))}class ZC extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qg(n)&&sc(n.arrayValue,this.value)}}class e5 extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sc(this.value.arrayValue,n)}}class t5 extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sc(this.value.arrayValue,n)}}class n5 extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>sc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n=null,s=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function pv(t,e=null,n=[],s=[],i=null,a=null,o=null){return new s5(t,e,n,s,i,a,o)}function Xg(t){const e=ye(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>pp(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),_h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>uo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>uo(s)).join(",")),e.ue=n}return e.ue}function Yg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fv(t.startAt,e.startAt)&&fv(t.endAt,e.endAt)}function gp(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n=null,s=[],i=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function r5(t,e,n,s,i,a,o,l){return new jo(t,e,n,s,i,a,o,l)}function Nh(t){return new jo(t)}function gv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XN(t){return t.collectionGroup!==null}function El(t){const e=ye(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ht(Ot.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new rc(a,s))}),n.has(Ot.keyField().canonicalString())||e.ce.push(new rc(Ot.keyField(),s))}return e.ce}function Fs(t){const e=ye(t);return e.le||(e.le=YN(e,El(t))),e.le}function i5(t){const e=ye(t);return e.he||(e.he=YN(e,t.explicitOrderBy)),e.he}function YN(t,e){if(t.limitType==="F")return pv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new rc(i.field,a)});const n=t.endAt?new Ld(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ld(t.startAt.position,t.startAt.inclusive):null;return pv(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function xp(t,e){const n=t.filters.concat([e]);return new jo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Md(t,e,n){return new jo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jh(t,e){return Yg(Fs(t),Fs(e))&&t.limitType===e.limitType}function JN(t){return`${Xg(Fs(t))}|lt:${t.limitType}`}function Ta(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>GN(i)).join(", ")}]`),_h(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>uo(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>uo(i)).join(",")),`Target(${s})`}(Fs(t))}; limitType=${t.limitType})`}function kh(t,e){return e.isFoundDocument()&&function(s,i){const a=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):he.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(t,e)&&function(s,i){for(const a of El(s))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const a of s.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,l,u){const d=mv(o,l,u);return o.inclusive?d<=0:d<0}(s.startAt,El(s),i)||s.endAt&&!function(o,l,u){const d=mv(o,l,u);return o.inclusive?d>=0:d>0}(s.endAt,El(s),i))}(t,e)}function a5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZN(t){return(e,n)=>{let s=!1;for(const i of El(t)){const a=o5(i,e,n);if(a!==0)return a;s=s||i.field.isKeyField()}return 0}}function o5(t,e,n){const s=t.field.isKeyField()?he.comparator(e.key,n.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?co(u,d):xe()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,a]of s)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(n,s)=>{for(const[i,a]of s)e(i,a)})}isEmpty(){return $N(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=new ut(he.comparator);function wr(){return l5}const ej=new ut(he.comparator);function dl(...t){let e=ej;for(const n of t)e=e.insert(n.key,n);return e}function tj(t){let e=ej;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function $i(){return Il()}function nj(){return Il()}function Il(){return new ko(t=>t.toString(),(t,e)=>t.isEqual(e))}const c5=new ut(he.comparator),u5=new Ht(he.comparator);function ke(...t){let e=u5;for(const n of t)e=e.add(n);return e}const d5=new Ht(Re);function h5(){return d5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Od(e)?"-0":e}}function sj(t){return{integerValue:""+t}}function rj(t,e){return BC(e)?sj(e):Jg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function m5(t,e,n){return t instanceof ic?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Kg(a)&&(a=Gg(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof ac?aj(t,e):t instanceof oc?oj(t,e):function(i,a){const o=ij(i,a),l=xv(o)+xv(i.Pe);return fp(o)&&fp(i.Pe)?sj(l):Jg(i.serializer,l)}(t,e)}function f5(t,e,n){return t instanceof ac?aj(t,e):t instanceof oc?oj(t,e):n}function ij(t,e){return t instanceof lc?function(s){return fp(s)||function(a){return!!a&&"doubleValue"in a}(s)}(e)?e:{integerValue:0}:null}class ic extends Eh{}class ac extends Eh{constructor(e){super(),this.elements=e}}function aj(t,e){const n=lj(e);for(const s of t.elements)n.some(i=>$s(i,s))||n.push(s);return{arrayValue:{values:n}}}class oc extends Eh{constructor(e){super(),this.elements=e}}function oj(t,e){let n=lj(e);for(const s of t.elements)n=n.filter(i=>!$s(i,s));return{arrayValue:{values:n}}}class lc extends Eh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function xv(t){return gt(t.integerValue||t.doubleValue)}function lj(t){return Qg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n){this.field=e,this.transform=n}}function p5(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof ac&&i instanceof ac||s instanceof oc&&i instanceof oc?oo(s.elements,i.elements,$s):s instanceof lc&&i instanceof lc?$s(s.Pe,i.Pe):s instanceof ic&&i instanceof ic}(t.transform,e.transform)}class g5{constructor(e,n){this.version=e,this.transformResults=n}}class es{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new es}static exists(e){return new es(void 0,e)}static updateTime(e){return new es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ih{}function uj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zg(t.key,es.none()):new Tc(t.key,t.data,es.none());{const n=t.data,s=_n.empty();let i=new Ht(Ot.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?s.delete(a):s.set(a,o),i=i.add(a)}return new ji(t.key,s,new Dn(i.toArray()),es.none())}}function x5(t,e,n){t instanceof Tc?function(i,a,o){const l=i.value.clone(),u=vv(i.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(i,a,o){if(!Zu(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=vv(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(dj(i)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Tl(t,e,n,s){return t instanceof Tc?function(a,o,l,u){if(!Zu(a.precondition,o))return l;const d=a.value.clone(),h=wv(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof ji?function(a,o,l,u){if(!Zu(a.precondition,o))return l;const d=wv(a.fieldTransforms,u,o),h=o.data;return h.setAll(dj(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,n,s):function(a,o,l){return Zu(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function y5(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),a=ij(s.transform,i||null);a!=null&&(n===null&&(n=_n.empty()),n.set(s.field,a))}return n||null}function yv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&oo(s,i,(a,o)=>p5(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tc extends Ih{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ji extends Ih{constructor(e,n,s,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function dj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function vv(t,e,n){const s=new Map;Le(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);s.set(a.field,f5(o,l,n[i]))}return s}function wv(t,e,n){const s=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);s.set(i.field,m5(a,o,e))}return s}class Zg extends Ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v5 extends Ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&x5(a,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Tl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Tl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=nj();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(i.key)?null:l;const u=uj(o,l);u!==null&&s.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ve.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(n,s)=>yv(n,s))&&oo(this.baseMutations,e.baseMutations,(n,s)=>yv(n,s))}}class ex{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Le(e.mutations.length===s.length);let i=function(){return c5}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,s[o].version);return new ex(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,n,s){this.alias=e,this.aggregateType=n,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Te;function j5(t){switch(t){default:return xe();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function hj(t){if(t===void 0)return vr("GRPC error has no .code"),W.UNKNOWN;switch(t){case bt.OK:return W.OK;case bt.CANCELLED:return W.CANCELLED;case bt.UNKNOWN:return W.UNKNOWN;case bt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case bt.INTERNAL:return W.INTERNAL;case bt.UNAVAILABLE:return W.UNAVAILABLE;case bt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case bt.NOT_FOUND:return W.NOT_FOUND;case bt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case bt.ABORTED:return W.ABORTED;case bt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case bt.DATA_LOSS:return W.DATA_LOSS;default:return xe()}}(Te=bt||(bt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=new qi([4294967295,4294967295],0);function bv(t){const e=k5().encode(t),n=new PN;return n.update(e),new Uint8Array(n.digest())}function _v(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qi([n,s],0),new qi([i,a],0)]}class tx{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new hl(`Invalid padding: ${n}`);if(s<0)throw new hl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new hl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new hl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=qi.fromNumber(this.Ie)}Ee(e,n,s){let i=e.add(n.multiply(qi.fromNumber(s)));return i.compare(E5)===1&&(i=new qi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=bv(e),[s,i]=_v(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(s,i,a);if(!this.de(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new tx(a,i,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=bv(e),[s,i]=_v(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(s,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,s,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Th(ve.min(),i,new ut(Re),wr(),ke())}}class Sc{constructor(e,n,s,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Sc(s,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n,s,i){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=i}}class mj{constructor(e,n){this.targetId=e,this.me=n}}class fj{constructor(e,n,s=Mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class Nv{constructor(){this.fe=0,this.ge=kv(),this.pe=Mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),n=ke(),s=ke();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:xe()}}),new Sc(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=kv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class I5{constructor(e){this.Le=e,this.Be=new Map,this.ke=wr(),this.qe=jv(),this.Qe=new ut(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const s=this.Ge(n);switch(e.state){case 0:this.ze(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),s.De(e.resumeToken));break;default:xe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,s=e.me.count,i=this.Je(n);if(i){const a=i.target;if(gp(a))if(s===0){const o=new he(a.path);this.Ue(n,o,sn.newNoDocument(o,ve.min()))}else Le(s===1);else{const o=this.Ye(n);if(o!==s){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:a=0}=n;let o,l;try{o=ra(s).toUint8Array()}catch(u){if(u instanceof BN)return sa("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new tx(o,i,a)}catch(u){return sa(u instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,s){return n.me.count===s-this.nt(e,n.targetId)?0:2}nt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let i=0;return s.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&gp(l.target)){const u=new he(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,sn.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let s=ke();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new Th(e,n,this.Qe,this.ke,s);return this.ke=wr(),this.qe=jv(),this.Qe=new ut(Re),i}$e(e,n){if(!this.ze(e))return;const s=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,s){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Nv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ht(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Nv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function jv(){return new ut(he.comparator)}function kv(){return new ut(he.comparator)}const T5={asc:"ASCENDING",desc:"DESCENDING"},S5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C5={and:"AND",or:"OR"};class A5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yp(t,e){return t.useProto3Json||_h(e)?e:{value:e}}function Vd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function R5(t,e){return Vd(t,e.toTimestamp())}function Us(t){return Le(!!t),ve.fromTimestamp(function(n){const s=fi(n);return new vt(s.seconds,s.nanos)}(t))}function nx(t,e){return vp(t,e).canonicalString()}function vp(t,e){const n=function(i){return new et(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gj(t){const e=et.fromString(t);return Le(_j(e)),e}function wp(t,e){return nx(t.databaseId,e.path)}function zm(t,e){const n=gj(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(yj(n))}function xj(t,e){return nx(t.databaseId,e)}function P5(t){const e=gj(t);return e.length===4?et.emptyPath():yj(e)}function bp(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yj(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ev(t,e,n){return{name:wp(t,e),fields:n.value.mapValue.fields}}function D5(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Le(h===void 0||typeof h=="string"),Mt.fromBase64String(h||"")):(Le(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Mt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?W.UNKNOWN:hj(d.code);return new ie(h,d.message||"")}(o);n=new fj(s,i,a,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=zm(t,s.document.name),a=Us(s.document.updateTime),o=s.document.createTime?Us(s.document.createTime):ve.min(),l=new _n({mapValue:{fields:s.document.fields}}),u=sn.newFoundDocument(i,a,o,l),d=s.targetIds||[],h=s.removedTargetIds||[];n=new ed(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=zm(t,s.document),a=s.readTime?Us(s.readTime):ve.min(),o=sn.newNoDocument(i,a),l=s.removedTargetIds||[];n=new ed([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=zm(t,s.document),a=s.removedTargetIds||[];n=new ed([],a,i,null)}else{if(!("filter"in e))return xe();{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:a}=s,o=new N5(i,a),l=s.targetId;n=new mj(l,o)}}return n}function O5(t,e){let n;if(e instanceof Tc)n={update:Ev(t,e.key,e.value)};else if(e instanceof Zg)n={delete:wp(t,e.key)};else if(e instanceof ji)n={update:Ev(t,e.key,e.data),updateMask:q5(e.fieldMask)};else{if(!(e instanceof v5))return xe();n={verify:wp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(a,o){const l=o.transform;if(l instanceof ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ac)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof oc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof lc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw xe()}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:R5(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:xe()}(t,e.precondition)),n}function L5(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(i,a){let o=i.updateTime?Us(i.updateTime):Us(a);return o.isEqual(ve.min())&&(o=Us(a)),new g5(o,i.transformResults||[])}(n,e))):[]}function M5(t,e){return{documents:[xj(t,e.path)]}}function vj(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=xj(t,i);const a=function(d){if(d.length!==0)return bj(Ns.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:Gr(g.field),direction:$5(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=yp(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function V5(t,e,n,s){const{_t:i,parent:a}=vj(t,e),o={},l=[];let u=0;return n.forEach(d=>{const h="aggregate_"+u++;o[h]=d.alias,d.aggregateType==="count"?l.push({alias:h,count:{}}):d.aggregateType==="avg"?l.push({alias:h,avg:{field:Gr(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:h,sum:{field:Gr(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:i.structuredQuery},parent:i.parent},ut:o,parent:a}}function F5(t){let e=P5(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Le(s===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(f){const g=wj(f);return g instanceof Ns&&WN(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(j){return new rc(Sa(j.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(f){let g;return g=typeof f=="object"?f.value:f,_h(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(f){const g=!!f.before,w=f.values||[];return new Ld(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const g=!f.before,w=f.values||[];return new Ld(w,g)}(n.endAt)),r5(e,i,o,a,l,"F",u,d)}function U5(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Sa(n.unaryFilter.field);return jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Sa(n.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Sa(n.unaryFilter.field);return jt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sa(n.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(t):t.fieldFilter!==void 0?function(n){return jt.create(Sa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ns.create(n.compositeFilter.filters.map(s=>wj(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xe()}}(n.compositeFilter.op))}(t):xe()}function $5(t){return T5[t]}function B5(t){return S5[t]}function z5(t){return C5[t]}function Gr(t){return{fieldPath:t.canonicalString()}}function Sa(t){return Ot.fromServerFormat(t.fieldPath)}function bj(t){return t instanceof jt?function(n){if(n.op==="=="){if(hv(n.value))return{unaryFilter:{field:Gr(n.field),op:"IS_NAN"}};if(dv(n.value))return{unaryFilter:{field:Gr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hv(n.value))return{unaryFilter:{field:Gr(n.field),op:"IS_NOT_NAN"}};if(dv(n.value))return{unaryFilter:{field:Gr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gr(n.field),op:B5(n.op),value:n.value}}}(t):t instanceof Ns?function(n){const s=n.getFilters().map(i=>bj(i));return s.length===1?s[0]:{compositeFilter:{op:z5(n.op),filters:s}}}(t):xe()}function q5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _j(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,s,i,a=ve.min(),o=ve.min(),l=Mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.ct=e}}function W5(t){const e=F5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Md(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(){this.un=new G5}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(mi.min())}updateCollectionGroup(e,n,s){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class G5{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new Ht(et.comparator),a=!i.has(s);return this.index[n]=i.add(s),a}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Ht(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ho(0)}static kn(){return new ho(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this.changes=new ko(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Q.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&Tl(s.mutation,i,Dn.empty(),vt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ke()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ke()){const i=$i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(a=>{let o=dl();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=$i();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ke()))}populateOverlays(e,n,s){const i=[];return s.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,i){let a=wr();const o=Il(),l=function(){return Il()}();return n.forEach((u,d)=>{const h=s.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof ji)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Tl(h.mutation,d,h.mutation.getFieldMask(),vt.now())):o.set(d.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var f;return l.set(d,new X5(h,(f=o.get(d))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const s=Il();let i=new ut((o,l)=>o-l),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=s.get(u)||Dn.empty();h=l.applyToLocalView(d,h),s.set(u,h);const f=(i.get(l.batchId)||ke()).add(u);i=i.insert(l.batchId,f)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,f=nj();h.forEach(g=>{if(!a.has(g)){const w=uj(n.get(g),s.get(g));w!==null&&f.set(g,w),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return Q.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):XN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-a.size):Q.resolve($i());let l=-1,u=a;return o.next(d=>Q.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,ke())).next(h=>({batchId:l,changes:tj(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(s=>{let i=dl();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const a=n.collectionGroup;let o=dl();return this.indexManager.getCollectionParents(e,a).next(l=>Q.forEach(l,u=>{const d=function(f,g){return new jo(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next(h=>{h.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,a,i))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,sn.newInvalidDocument(h)))});let l=dl();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&Tl(h.mutation,d,Dn.empty(),vt.now()),kh(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Us(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:W5(i.bundledQuery),readTime:Us(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this.overlays=new ut(he.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$i();return Q.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&s.set(i,a)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,a)=>{this.ht(e,n,a)}),Q.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.Ir.get(s);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(s)),Q.resolve()}getOverlaysForCollection(e,n,s){const i=$i(),a=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>s&&i.set(u.getKey(),u)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let a=new ut((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=a.get(d.largestBatchId);h===null&&(h=$i(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=$i(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return Q.resolve(l)}ht(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(s.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new b5(n,s));let a=this.Ir.get(n);a===void 0&&(a=ke(),this.Ir.set(n,a)),this.Ir.set(n,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.Tr=new Ht(Rt.Er),this.dr=new Ht(Rt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const s=new Rt(e,n);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Vr(new Rt(e,n))}mr(e,n){e.forEach(s=>this.removeReference(s,n))}gr(e){const n=new he(new et([])),s=new Rt(n,e),i=new Rt(n,e+1),a=[];return this.dr.forEachInRange([s,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new he(new et([])),s=new Rt(n,e),i=new Rt(n,e+1);let a=ke();return this.dr.forEachInRange([s,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Rt(e,0),s=this.Tr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Rt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return he.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ht(Rt.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new w5(a,n,s,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Rt(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.vr(s),a=i<0?0:i;return Q.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Rt(n,0),i=new Rt(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([s,i],o=>{const l=this.Dr(o.wr);a.push(l)}),Q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ht(Re);return n.forEach(i=>{const a=new Rt(i,0),o=new Rt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{s=s.add(l.wr)})}),Q.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let a=s;he.isDocumentKey(a)||(a=a.child(""));const o=new Rt(new he(a),0);let l=new Ht(Re);return this.br.forEachWhile(u=>{const d=u.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.wr)),!0)},o),Q.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(s=>{const i=this.Dr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return Q.forEach(n.mutations,i=>{const a=new Rt(i.key,n.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,n){const s=new Rt(n,0),i=this.br.firstAfterOrEqual(s);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.Mr=e,this.docs=function(){return new ut(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Q.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let s=wr();return n.forEach(i=>{const a=this.docs.get(i);s=s.insert(i,a?a.document.mutableCopy():sn.newInvalidDocument(i))}),Q.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let a=wr();const o=n.path,l=new he(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||VC(MC(h),s)<=0||(i.has(h.key)||kh(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Q.resolve(a)}getAllFromCollectionGroup(e,n,s,i){xe()}Or(e,n){return Q.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new sA(this)}getSize(e){return Q.resolve(this.size)}}class sA extends Q5{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(s)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.persistence=e,this.Nr=new ko(n=>Xg(n),Yg),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sx,this.targetCount=0,this.kr=ho.Bn()}forEachTarget(e,n){return this.Nr.forEach((s,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,s){let i=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Q.waitFor(a).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const s=this.Nr.get(n)||null;return Q.resolve(s)}addMatchingKeys(e,n,s){return this.Br.Rr(n,s),Q.resolve()}removeMatchingKeys(e,n,s){this.Br.mr(n,s);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Br.yr(n);return Q.resolve(s)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wg(0),this.Kr=!1,this.Kr=!0,this.$r=new eA,this.referenceDelegate=e(this),this.Ur=new rA(this),this.indexManager=new K5,this.remoteDocumentCache=function(i){return new nA(i)}(s=>this.referenceDelegate.Wr(s)),this.serializer=new H5(n),this.Gr=new J5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.qr[e.toKey()];return s||(s=new tA(n,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,s){ce("MemoryPersistence","Starting transaction:",e);const i=new aA(this.Qr.next());return this.referenceDelegate.zr(),s(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return Q.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,n)))}}class aA extends UC{constructor(e){super(),this.currentSequenceNumber=e}}class rx{constructor(e){this.persistence=e,this.Jr=new sx,this.Yr=null}static Zr(e){return new rx(e)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(e,n,s){return this.Jr.addReference(s,n),this.Xr.delete(s.toString()),Q.resolve()}removeReference(e,n,s){return this.Jr.removeReference(s,n),this.Xr.add(s.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>s.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,s=>{const i=he.fromPath(s);return this.ei(e,i).next(a=>{a||n.removeEntry(i,ve.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(s=>{s?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.$i=s,this.Ui=i}static Wi(e,n){let s=ke(),i=ke();for(const a of n.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ix(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return PI()?8:$C(cn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,s,i){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,i,s).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new oA;return this.Xi(e,n,o).next(l=>{if(a.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>a.result)}es(e,n,s,i){return s.documentReadCount<this.ji?(tl()<=Ee.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Ta(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(tl()<=Ee.DEBUG&&ce("QueryEngine","Query:",Ta(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.Hi*i?(tl()<=Ee.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Ta(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fs(n))):Q.resolve())}Yi(e,n){if(gv(n))return Q.resolve(null);let s=Fs(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Md(n,null,"F"),s=Fs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(a=>{const o=ke(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Md(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,s,i){return gv(n)||i.isEqual(ve.min())?Q.resolve(null):this.Ji.getDocuments(e,s).next(a=>{const o=this.ts(n,a);return this.ns(n,o,s,i)?Q.resolve(null):(tl()<=Ee.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ta(n)),this.rs(e,o,n,LC(i,-1)).next(l=>l))})}ts(e,n){let s=new Ht(ZN(e));return n.forEach((i,a)=>{kh(e,a)&&(s=s.add(a))}),s}ns(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,s){return tl()<=Ee.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Ta(n)),this.Ji.getDocumentsMatchingQuery(e,n,mi.min(),s)}rs(e,n,s,i){return this.Ji.getDocumentsMatchingQuery(e,s,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n,s,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ut(Re),this._s=new ko(a=>Xg(a),Yg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y5(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function uA(t,e,n,s){return new cA(t,e,n,s)}async function Nj(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(s))).next(a=>{const o=[],l=[];let u=ke();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function dA(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const f=d.batch,g=f.keys();let w=Q.resolve();return g.forEach(j=>{w=w.next(()=>h.getEntry(u,j)).next(A=>{const I=d.docVersions.get(j);Le(I!==null),A.version.compareTo(I)<0&&(f.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),h.addEntry(A)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(n,s,e,a).next(()=>a.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let u=ke();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function jj(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function hA(t,e){const n=ye(t),s=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((h,f)=>{const g=i.get(f);if(!g)return;l.push(n.Ur.removeMatchingKeys(a,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(a,h.addedDocuments,f)));let w=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(Mt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,s)),i=i.insert(f,w),function(A,I,k){return A.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,w,h)&&l.push(n.Ur.updateTargetData(a,w))});let u=wr(),d=ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(mA(a,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!s.isEqual(ve.min())){const h=n.Ur.getLastRemoteSnapshotVersion(a).next(f=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,s));l.push(h)}return Q.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=i,a))}function mA(t,e,n){let s=ke(),i=ke();return n.forEach(a=>s=s.add(a)),e.getEntries(t,s).next(a=>{let o=wr();return n.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ve.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ce("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function fA(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function pA(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Ur.getTargetData(s,e).next(a=>a?(i=a,Q.resolve(i)):n.Ur.allocateTargetId(s).next(o=>(i=new Jr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ur.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.os.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(s.targetId,s),n._s.set(e,s.targetId)),s})}async function _p(t,e,n){const s=ye(t),i=s.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",a,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ic(o))throw o;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.os=s.os.remove(e),s._s.delete(i.target)}function Iv(t,e,n){const s=ye(t);let i=ve.min(),a=ke();return s.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const f=ye(u),g=f._s.get(h);return g!==void 0?Q.resolve(f.os.get(g)):f.Ur.getTargetData(d,h)}(s,o,Fs(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>s.ss.getDocumentsMatchingQuery(o,e,n?i:ve.min(),n?a:ke())).next(l=>(gA(s,a5(e),l),{documents:l,Ts:a})))}function gA(t,e,n){let s=t.us.get(e)||ve.min();n.forEach((i,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),t.us.set(e,s)}class Tv{constructor(){this.activeTargetIds=h5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xA{constructor(){this.so=new Tv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,s){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Tv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu=null;function qm(){return Iu===null?Iu=function(){return 268435456+Math.round(2147483648*Math.random())}():Iu++,"0x"+Iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class bA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,s,i,a,o){const l=qm(),u=this.xo(n,s.toUriEncodedString());ce("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,i).then(h=>(ce("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw sa("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,s,i,a,o,l){return this.Mo(n,s,i,a,o)}Oo(n,s,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+No}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((a,o)=>n[o]=a),i&&i.headers.forEach((a,o)=>n[o]=a)}xo(n,s){const i=vA[n];return`${this.Do}/v1/${s}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,s,i){const a=qm();return new Promise((o,l)=>{const u=new DN;u.setWithCredentials(!0),u.listenOnce(ON.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Yu.NO_ERROR:const h=u.getResponseJson();ce(en,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Yu.TIMEOUT:ce(en,`RPC '${e}' ${a} timed out`),l(new ie(W.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const f=u.getStatus();if(ce(en,`RPC '${e}' ${a} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const j=function(I){const k=I.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(k)>=0?k:W.UNKNOWN}(w.status);l(new ie(j,w.message))}else l(new ie(W.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ie(W.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{ce(en,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);ce(en,`RPC '${e}' ${a} sending request:`,i),u.send(n,"POST",d,s,15)})}Bo(e,n,s){const i=qm(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VN(),l=MN(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=a.join("");ce(en,`Creating RPC '${e}' stream ${i}: ${h}`,u);const f=o.createWebChannel(h,u);let g=!1,w=!1;const j=new wA({Io:I=>{w?ce(en,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(g||(ce(en,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),ce(en,`RPC '${e}' stream ${i} sending:`,I),f.send(I))},To:()=>f.close()}),A=(I,k,v)=>{I.listen(k,_=>{try{v(_)}catch(T){setTimeout(()=>{throw T},0)}})};return A(f,ul.EventType.OPEN,()=>{w||(ce(en,`RPC '${e}' stream ${i} transport opened.`),j.yo())}),A(f,ul.EventType.CLOSE,()=>{w||(w=!0,ce(en,`RPC '${e}' stream ${i} transport closed`),j.So())}),A(f,ul.EventType.ERROR,I=>{w||(w=!0,sa(en,`RPC '${e}' stream ${i} transport errored:`,I),j.So(new ie(W.UNAVAILABLE,"The operation could not be completed")))}),A(f,ul.EventType.MESSAGE,I=>{var k;if(!w){const v=I.data[0];Le(!!v);const _=v,T=_.error||((k=_[0])===null||k===void 0?void 0:k.error);if(T){ce(en,`RPC '${e}' stream ${i} received error:`,T);const O=T.status;let V=function(N){const E=bt[N];if(E!==void 0)return hj(E)}(O),y=T.message;V===void 0&&(V=W.INTERNAL,y="Unknown error status: "+O+" with message "+T.message),w=!0,j.So(new ie(V,y)),f.close()}else ce(en,`RPC '${e}' stream ${i} received:`,v),j.bo(v)}}),A(l,LN.STAT_EVENT,I=>{I.stat===hp.PROXY?ce(en,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===hp.NOPROXY&&ce(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{j.wo()},0),j}}function Hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){return new A5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n,s=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=s,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-s);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,n,s,i,a,o,l,u){this.ui=e,this.Ho=s,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kj(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Yo===n&&this.P_(s,i)},s=>{e(()=>{const i=new ie(W.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(i)})})}P_(e,n){const s=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{s(()=>this.I_(i))}),this.stream.onMessage(i=>{s(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _A extends Ej{constructor(e,n,s,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=D5(this.serializer,e),s=function(a){if(!("targetChange"in a))return ve.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?Us(o.readTime):ve.min()}(e);return this.listener.d_(n,s)}A_(e){const n={};n.database=bp(this.serializer),n.addTarget=function(a,o){let l;const u=o.target;if(l=gp(u)?{documents:M5(a,u)}:{query:vj(a,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=pj(a,o.resumeToken);const d=yp(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ve.min())>0){l.readTime=Vd(a,o.snapshotVersion.toTimestamp());const d=yp(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=U5(this.serializer,e);s&&(n.labels=s),this.a_(n)}R_(e){const n={};n.database=bp(this.serializer),n.removeTarget=e,this.a_(n)}}class NA extends Ej{constructor(e,n,s,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=L5(e.writeResults,e.commitTime),s=Us(e.commitTime);return this.listener.g_(s,n)}p_(){const e={};e.database=bp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>O5(this.serializer,s))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends class{}{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,vp(n,s),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(W.UNKNOWN,a.toString())})}Lo(e,n,s,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,vp(n,s),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(W.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class kA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vr(n),this.D_=!1):ce("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n,s,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{s.enqueueAndForget(async()=>{ha(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ye(u);d.L_.add(4),await Cc(d),d.q_.set("Unknown"),d.L_.delete(4),await Ch(d)}(this))})}),this.q_=new kA(s,i)}}async function Ch(t){if(ha(t))for(const e of t.B_)await e(!0)}async function Cc(t){for(const e of t.B_)await e(!1)}function Ij(t,e){const n=ye(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cx(n)?lx(n):Eo(n).r_()&&ox(n,e))}function ax(t,e){const n=ye(t),s=Eo(n);n.N_.delete(e),s.r_()&&Tj(n,e),n.N_.size===0&&(s.r_()?s.o_():ha(n)&&n.q_.set("Unknown"))}function ox(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Eo(t).A_(e)}function Tj(t,e){t.Q_.xe(e),Eo(t).R_(e)}function lx(t){t.Q_=new I5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Eo(t).start(),t.q_.v_()}function cx(t){return ha(t)&&!Eo(t).n_()&&t.N_.size>0}function ha(t){return ye(t).L_.size===0}function Sj(t){t.Q_=void 0}async function IA(t){t.q_.set("Online")}async function TA(t){t.N_.forEach((e,n)=>{ox(t,e)})}async function SA(t,e){Sj(t),cx(t)?(t.q_.M_(e),lx(t)):t.q_.set("Unknown")}async function CA(t,e,n){if(t.q_.set("Online"),e instanceof fj&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(s){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fd(t,s)}else if(e instanceof ed?t.Q_.Ke(e):e instanceof mj?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ve.min()))try{const s=await jj(t.localStore);n.compareTo(s)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.N_.get(d);h&&a.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=a.N_.get(u);if(!h)return;a.N_.set(u,h.withResumeToken(Mt.EMPTY_BYTE_STRING,h.snapshotVersion)),Tj(a,u);const f=new Jr(h.target,u,d,h.sequenceNumber);ox(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){ce("RemoteStore","Failed to raise snapshot:",s),await Fd(t,s)}}async function Fd(t,e,n){if(!Ic(e))throw e;t.L_.add(1),await Cc(t),t.q_.set("Offline"),n||(n=()=>jj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ch(t)})}function Cj(t,e){return e().catch(n=>Fd(t,n,e))}async function Ah(t){const e=ye(t),n=pi(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;AA(e);)try{const i=await fA(e.localStore,s);if(i===null){e.O_.length===0&&n.o_();break}s=i.batchId,RA(e,i)}catch(i){await Fd(e,i)}Aj(e)&&Rj(e)}function AA(t){return ha(t)&&t.O_.length<10}function RA(t,e){t.O_.push(e);const n=pi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Aj(t){return ha(t)&&!pi(t).n_()&&t.O_.length>0}function Rj(t){pi(t).start()}async function PA(t){pi(t).p_()}async function DA(t){const e=pi(t);for(const n of t.O_)e.m_(n.mutations)}async function OA(t,e,n){const s=t.O_.shift(),i=ex.from(s,e,n);await Cj(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ah(t)}async function LA(t,e){e&&pi(t).V_&&await async function(s,i){if(function(o){return j5(o)&&o!==W.ABORTED}(i.code)){const a=s.O_.shift();pi(s).s_(),await Cj(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Ah(s)}}(t,e),Aj(t)&&Rj(t)}async function Cv(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const s=ha(n);n.L_.add(3),await Cc(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ch(n)}async function MA(t,e){const n=ye(t);e?(n.L_.delete(2),await Ch(n)):e||(n.L_.add(2),await Cc(n),n.q_.set("Unknown"))}function Eo(t){return t.K_||(t.K_=function(n,s,i){const a=ye(n);return a.w_(),new _A(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:IA.bind(null,t),Ro:TA.bind(null,t),mo:SA.bind(null,t),d_:CA.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),cx(t)?lx(t):t.q_.set("Unknown")):(await t.K_.stop(),Sj(t))})),t.K_}function pi(t){return t.U_||(t.U_=function(n,s,i){const a=ye(n);return a.w_(),new NA(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:PA.bind(null,t),mo:LA.bind(null,t),f_:DA.bind(null,t),g_:OA.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ah(t)):(await t.U_.stop(),t.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n,s,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=a,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,a){const o=Date.now()+s,l=new ux(e,n,o,i,a);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dx(t,e){if(vr("AsyncQueue",`${e}: ${t}`),Ic(t))return new ie(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.comparator=e?(n,s)=>e(n,s)||he.comparator(n.key,s.key):(n,s)=>he.comparator(n.key,s.key),this.keyedMap=dl(),this.sortedSet=new ut(this.comparator)}static emptySet(e){return new Za(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=s.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Za;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.W_=new ut(he.comparator)}track(e){const n=e.doc.key,s=this.W_.get(n);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(n,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(n):e.type===1&&s.type===2?this.W_=this.W_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):xe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,s)=>{e.push(s)}),e}}class mo{constructor(e,n,s,i,a,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,i,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new mo(e,n,Za.emptySet(n),o,s,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class FA{constructor(){this.queries=Rv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,s){const i=ye(n),a=i.queries;i.queries=Rv(),a.forEach((o,l)=>{for(const u of l.j_)u.onError(s)})})(this,new ie(W.ABORTED,"Firestore shutting down"))}}function Rv(){return new ko(t=>JN(t),jh)}async function hx(t,e){const n=ye(t);let s=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(s=2):(a=new VA,s=e.J_()?0:1);try{switch(s){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=dx(o,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&fx(n)}async function mx(t,e){const n=ye(t),s=e.query;let i=3;const a=n.queries.get(s);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function UA(t,e){const n=ye(t);let s=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const l of o.j_)l.X_(i)&&(s=!0);o.z_=i}}s&&fx(n)}function $A(t,e,n){const s=ye(t),i=s.queries.get(e);if(i)for(const a of i.j_)a.onError(n);s.queries.delete(e)}function fx(t){t.Y_.forEach(e=>{e.next()})}var Np,Pv;(Pv=Np||(Np={})).ea="default",Pv.Cache="cache";class px{constructor(e,n,s){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new mo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const s=n!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Np.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.key=e}}class Dj{constructor(e){this.key=e}}class BA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ke(),this.mutatedKeys=ke(),this.Aa=ZN(e),this.Ra=new Za(this.Aa)}get Va(){return this.Ta}ma(e,n){const s=n?n.fa:new Av,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const g=i.get(h),w=kh(this.query,f)?f:null,j=!!g&&this.mutatedKeys.has(g.key),A=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let I=!1;g&&w?g.data.isEqual(w.data)?j!==A&&(s.track({type:3,doc:w}),I=!0):this.ga(g,w)||(s.track({type:2,doc:w}),I=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(l=!0)):!g&&w?(s.track({type:0,doc:w}),I=!0):g&&!w&&(s.track({type:1,doc:g}),I=!0,(u||d)&&(l=!0)),I&&(w?(o=o.add(w),a=A?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),s.track({type:1,doc:h})}return{Ra:o,fa:s,ns:l,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(w,j){const A=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return A(w)-A(j)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(s),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new mo(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Av,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ke(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const n=[];return e.forEach(s=>{this.da.has(s)||n.push(new Dj(s))}),this.da.forEach(s=>{e.has(s)||n.push(new Pj(s))}),n}ba(e){this.Ta=e.Ts,this.da=ke();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class zA{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class qA{constructor(e){this.key=e,this.va=!1}}class HA{constructor(e,n,s,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ko(l=>JN(l),jh),this.Ma=new Map,this.xa=new Set,this.Oa=new ut(he.comparator),this.Na=new Map,this.La=new sx,this.Ba={},this.ka=new Map,this.qa=ho.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WA(t,e,n=!0){const s=Uj(t);let i;const a=s.Fa.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await Oj(s,e,n,!0),i}async function KA(t,e){const n=Uj(t);await Oj(n,e,!0,!1)}async function Oj(t,e,n,s){const i=await pA(t.localStore,Fs(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return s&&(l=await GA(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ij(t.remoteStore,i),l}async function GA(t,e,n,s,i){t.Ka=(f,g,w)=>async function(A,I,k,v){let _=I.view.ma(k);_.ns&&(_=await Iv(A.localStore,I.query,!1).then(({documents:y})=>I.view.ma(y,_)));const T=v&&v.targetChanges.get(I.targetId),O=v&&v.targetMismatches.get(I.targetId)!=null,V=I.view.applyChanges(_,A.isPrimaryClient,T,O);return Ov(A,I.targetId,V.wa),V.snapshot}(t,f,g,w);const a=await Iv(t.localStore,e,!0),o=new BA(e,a.Ts),l=o.ma(a.documents),u=Sc.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,u);Ov(t,n,d.wa);const h=new zA(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function QA(t,e,n){const s=ye(t),i=s.Fa.get(e),a=s.Ma.get(i.targetId);if(a.length>1)return s.Ma.set(i.targetId,a.filter(o=>!jh(o,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await _p(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&ax(s.remoteStore,i.targetId),jp(s,i.targetId)}).catch(Ec)):(jp(s,i.targetId),await _p(s.localStore,i.targetId,!0))}async function XA(t,e){const n=ye(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ax(n.remoteStore,s.targetId))}async function YA(t,e,n){const s=rR(t);try{const i=await function(o,l){const u=ye(o),d=vt.now(),h=l.reduce((w,j)=>w.add(j.key),ke());let f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let j=wr(),A=ke();return u.cs.getEntries(w,h).next(I=>{j=I,j.forEach((k,v)=>{v.isValidDocument()||(A=A.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,j)).next(I=>{f=I;const k=[];for(const v of l){const _=y5(v,f.get(v.key).overlayedDocument);_!=null&&k.push(new ji(v.key,_,zN(_.value.mapValue),es.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,k,l)}).next(I=>{g=I;const k=I.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(w,I.batchId,k)})}).then(()=>({batchId:g.batchId,changes:tj(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new ut(Re)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(s,i.batchId,n),await Ac(s,i.changes),await Ah(s.remoteStore)}catch(i){const a=dx(i,"Failed to persist write");n.reject(a)}}async function Lj(t,e){const n=ye(t);try{const s=await hA(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Na.get(a);o&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Le(o.va):i.removedDocuments.size>0&&(Le(o.va),o.va=!1))}),await Ac(n,s,e)}catch(s){await Ec(s)}}function Dv(t,e,n){const s=ye(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ye(o);u.onlineState=l;let d=!1;u.queries.forEach((h,f)=>{for(const g of f.j_)g.Z_(l)&&(d=!0)}),d&&fx(u)}(s.eventManager,e),i.length&&s.Ca.d_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function JA(t,e,n){const s=ye(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Na.get(e),a=i&&i.key;if(a){let o=new ut(he.comparator);o=o.insert(a,sn.newNoDocument(a,ve.min()));const l=ke().add(a),u=new Th(ve.min(),new Map,new ut(Re),o,l);await Lj(s,u),s.Oa=s.Oa.remove(a),s.Na.delete(e),gx(s)}else await _p(s.localStore,e,!1).then(()=>jp(s,e,n)).catch(Ec)}async function ZA(t,e){const n=ye(t),s=e.batch.batchId;try{const i=await dA(n.localStore,e);Vj(n,s,null),Mj(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ac(n,i)}catch(i){await Ec(i)}}async function eR(t,e,n){const s=ye(t);try{const i=await function(o,l){const u=ye(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(f=>(Le(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(s.localStore,e);Vj(s,e,n),Mj(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ac(s,i)}catch(i){await Ec(i)}}function Mj(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Vj(t,e,n){const s=ye(t);let i=s.Ba[s.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),s.Ba[s.currentUser.toKey()]=i}}function jp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Ma.get(e))t.Fa.delete(s),n&&t.Ca.$a(s,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(s=>{t.La.containsKey(s)||Fj(t,s)})}function Fj(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ax(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),gx(t))}function Ov(t,e,n){for(const s of n)s instanceof Pj?(t.La.addReference(s.key,e),tR(t,s)):s instanceof Dj?(ce("SyncEngine","Document no longer in limbo: "+s.key),t.La.removeReference(s.key,e),t.La.containsKey(s.key)||Fj(t,s.key)):xe()}function tR(t,e){const n=e.key,s=n.path.canonicalString();t.Oa.get(n)||t.xa.has(s)||(ce("SyncEngine","New document in limbo: "+n),t.xa.add(s),gx(t))}function gx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new he(et.fromString(e)),s=t.qa.next();t.Na.set(s,new qA(n)),t.Oa=t.Oa.insert(n,s),Ij(t.remoteStore,new Jr(Fs(Nh(n.path)),s,"TargetPurposeLimboResolution",Wg.oe))}}async function Ac(t,e,n){const s=ye(t),i=[],a=[],o=[];s.Fa.isEmpty()||(s.Fa.forEach((l,u)=>{o.push(s.Ka(u,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){i.push(d);const f=ix.Wi(u.targetId,d);a.push(f)}}))}),await Promise.all(o),s.Ca.d_(i),await async function(u,d){const h=ye(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Q.forEach(d,g=>Q.forEach(g.$i,w=>h.persistence.referenceDelegate.addReference(f,g.targetId,w)).next(()=>Q.forEach(g.Ui,w=>h.persistence.referenceDelegate.removeReference(f,g.targetId,w)))))}catch(f){if(!Ic(f))throw f;ce("LocalStore","Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const w=h.os.get(g),j=w.snapshotVersion,A=w.withLastLimboFreeSnapshotVersion(j);h.os=h.os.insert(g,A)}}}(s.localStore,a))}async function nR(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const s=await Nj(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(u=>{u.reject(new ie(W.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ac(n,s.hs)}}function sR(t,e){const n=ye(t),s=n.Na.get(e);if(s&&s.va)return ke().add(s.key);{let i=ke();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function Uj(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JA.bind(null,e),e.Ca.d_=UA.bind(null,e.eventManager),e.Ca.$a=$A.bind(null,e.eventManager),e}function rR(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eR.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return uA(this.persistence,new lA,e.initialUser,this.serializer)}Ga(e){return new iA(rx.Zr,this.serializer)}Wa(e){return new xA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class kp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Dv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nR.bind(null,this.syncEngine),await MA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FA}()}createDatastore(e){const n=Sh(e.databaseInfo.databaseId),s=function(a){return new bA(a)}(e.databaseInfo);return function(a,o,l,u){return new jA(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,a,o,l){return new EA(s,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Dv(this.syncEngine,n,0),function(){return Sv.D()?new Sv:new yA}())}createSyncEngine(e,n){return function(i,a,o,l,u,d,h){const f=new HA(i,a,o,l,u,d);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=ye(i);ce("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Cc(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}kp.provider={build:()=>new kp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,s,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=tn.UNAUTHENTICATED,this.clientId=Hg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async o=>{ce("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=dx(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Wm(t,e){t.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await Nj(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Lv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aR(t);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Cv(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Cv(e.remoteStore,i)),t._onlineComponents=e}async function aR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;sa("Error using user provided cache. Falling back to memory cache: "+n),await Wm(t,new Ud)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await Wm(t,new Ud);return t._offlineComponents}async function yx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await Lv(t,t._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await Lv(t,new kp))),t._onlineComponents}function oR(t){return yx(t).then(e=>e.syncEngine)}function lR(t){return yx(t).then(e=>e.datastore)}async function $d(t){const e=await yx(t),n=e.eventManager;return n.onListen=WA.bind(null,e.syncEngine),n.onUnlisten=QA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XA.bind(null,e.syncEngine),n}function cR(t,e,n={}){const s=new Vs;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new xx({next:g=>{h.Za(),o.enqueueAndForget(()=>mx(a,f));const w=g.docs.has(l);!w&&g.fromCache?d.reject(new ie(W.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new ie(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),f=new px(Nh(l.path),h,{includeMetadataChanges:!0,_a:!0});return hx(a,f)}(await $d(t),t.asyncQueue,e,n,s)),s.promise}function uR(t,e,n={}){const s=new Vs;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new xx({next:g=>{h.Za(),o.enqueueAndForget(()=>mx(a,f)),g.fromCache&&u.source==="server"?d.reject(new ie(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),f=new px(l,h,{includeMetadataChanges:!0,_a:!0});return hx(a,f)}(await $d(t),t.asyncQueue,e,n,s)),s.promise}function dR(t,e,n){const s=new Vs;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await lR(t);s.resolve(async function(o,l,u){var d;const h=ye(o),{request:f,ut:g,parent:w}=V5(h.serializer,i5(l),u);h.connection.Fo||delete f.parent;const j=(await h.Lo("RunAggregationQuery",h.serializer.databaseId,w,f,1)).filter(I=>!!I.result);Le(j.length===1);const A=(d=j[0].result)===null||d===void 0?void 0:d.aggregateFields;return Object.keys(A).reduce((I,k)=>(I[g[k]]=A[k],I),{})}(i,e,n))}catch(i){s.reject(i)}}),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t,e,n){if(!n)throw new ie(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zj(t,e,n,s){if(e===!0&&s===!0)throw new ie(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vv(t){if(!he.isDocumentKey(t))throw new ie(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fv(t){if(he.isDocumentKey(t))throw new ie(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe()}function an(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rh(t);throw new ie(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hR(t,e){if(e<=0)throw new ie(W.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$j((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ph{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uv(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new UN;switch(s.type){case"firstParty":return new AC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ie(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Mv.get(n);s&&(ce("ComponentProvider","Removing Datastore"),Mv.delete(n),s.terminate())}(this),Promise.resolve()}}function qj(t,e,n,s={}){var i;const a=(t=an(t,Ph))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),s.mockUserToken){let l,u;if(typeof s.mockUserToken=="string")l=s.mockUserToken,u=tn.MOCK_USER;else{l=$_(s.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new ie(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tn(d)}t._authCredentials=new TC(new FN(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class Wt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class lr extends qs{constructor(e,n,s){super(e,n,Nh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new he(e))}withConverter(e){return new lr(this.firestore,e,this._path)}}function re(t,e,...n){if(t=Qe(t),Bj("collection","path",e),t instanceof Ph){const s=et.fromString(e,...n);return Fv(s),new lr(t,null,s)}{if(!(t instanceof Wt||t instanceof lr))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(et.fromString(e,...n));return Fv(s),new lr(t.firestore,null,s)}}function Y(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=Hg.newId()),Bj("doc","path",e),t instanceof Ph){const s=et.fromString(e,...n);return Vv(s),new Wt(t,null,new he(s))}{if(!(t instanceof Wt||t instanceof lr))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(et.fromString(e,...n));return Vv(s),new Wt(t.firestore,t instanceof lr?t.converter:null,new he(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kj(this,"async_queue_retry"),this.Vu=()=>{const s=Hm();s&&ce("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const n=Hm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Hm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Vs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ic(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(s=>{this.Eu=s,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(s);throw vr("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.du=!1,s))));return this.mu=n,n}enqueueAfterDelay(e,n,s){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=ux.createAndSchedule(this,e,n,s,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&xe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Bv(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of s)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class js extends Ph{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new $v,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $v(e),this._firestoreClient=void 0,await e}}}function Hj(t,e){const n=typeof t=="object"?t:yh(),s=typeof t=="string"?t:"(default)",i=xh(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const a=V_("firestore");a&&qj(i,...a)}return i}function Io(t){if(t._terminated)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mR(t),t._firestoreClient}function mR(t){var e,n,s;const i=t._freezeSettings(),a=function(l,u,d,h){return new HC(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$j(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new iR(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class Kj{constructor(e,n,s){this._userDataWriter=n,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aa(Mt.fromBase64String(e))}catch(n){throw new ie(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new aa(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Gj(){return new To("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=/^__.*__$/;class pR{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(e,this.data,n,this.fieldTransforms)}}class Qj{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Xj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class vx{constructor(e,n,s,i,a,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:s,xu:!1});return i.Ou(e),i}Nu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:s,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Xj(this.Cu)&&fR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gR{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Sh(e)}Qu(e,n,s,i=!1){return new vx({Cu:e,methodName:n,qu:s,path:Ot.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lh(t){const e=t._freezeSettings(),n=Sh(t._databaseId);return new gR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Yj(t,e,n,s,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);_x("Data must be an object, but it was:",o,s);const l=Jj(s,o);let u,d;if(a.merge)u=new Dn(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const f of a.mergeFields){const g=Ep(e,f,n);if(!o.contains(g))throw new ie(W.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);e1(h,g)||h.push(g)}u=new Dn(h),d=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=o.fieldTransforms;return new pR(new _n(l),u,d)}class Mh extends So{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mh}}class wx extends So{_toFieldTransform(e){return new cj(e.path,new ic)}isEqual(e){return e instanceof wx}}class bx extends So{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new lc(e.serializer,rj(e.serializer,this.$u));return new cj(e.path,n)}isEqual(e){return e instanceof bx&&this.$u===e.$u}}function xR(t,e,n,s){const i=t.Qu(1,e,n);_x("Data must be an object, but it was:",i,s);const a=[],o=_n.empty();da(s,(u,d)=>{const h=Nx(e,u,n);d=Qe(d);const f=i.Nu(h);if(d instanceof Mh)a.push(h);else{const g=Rc(d,f);g!=null&&(a.push(h),o.set(h,g))}});const l=new Dn(a);return new Qj(o,l,i.fieldTransforms)}function yR(t,e,n,s,i,a){const o=t.Qu(1,e,n),l=[Ep(e,s,n)],u=[i];if(a.length%2!=0)throw new ie(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)l.push(Ep(e,a[g])),u.push(a[g+1]);const d=[],h=_n.empty();for(let g=l.length-1;g>=0;--g)if(!e1(d,l[g])){const w=l[g];let j=u[g];j=Qe(j);const A=o.Nu(w);if(j instanceof Mh)d.push(w);else{const I=Rc(j,A);I!=null&&(d.push(w),h.set(w,I))}}const f=new Dn(d);return new Qj(h,f,o.fieldTransforms)}function vR(t,e,n,s=!1){return Rc(n,t.Qu(s?4:3,e))}function Rc(t,e){if(Zj(t=Qe(t)))return _x("Unsupported field value:",e,t),Jj(t,e);if(t instanceof So)return function(s,i){if(!Xj(i.Cu))throw i.Bu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(s,i){const a=[];let o=0;for(const l of s){let u=Rc(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(s,i){if((s=Qe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return rj(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=vt.fromDate(s);return{timestampValue:Vd(i.serializer,a)}}if(s instanceof vt){const a=new vt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Vd(i.serializer,a)}}if(s instanceof Dh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof aa)return{bytesValue:pj(i.serializer,s._byteString)};if(s instanceof Wt){const a=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:nx(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Oh)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Jg(l.serializer,u)})}}}}}}(s,i);throw i.Bu(`Unsupported field value: ${Rh(s)}`)}(t,e)}function Jj(t,e){const n={};return $N(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(t,(s,i)=>{const a=Rc(i,e.Mu(s));a!=null&&(n[s]=a)}),{mapValue:{fields:n}}}function Zj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof Dh||t instanceof aa||t instanceof Wt||t instanceof So||t instanceof Oh)}function _x(t,e,n){if(!Zj(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=Rh(n);throw s==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+s)}}function Ep(t,e,n){if((e=Qe(e))instanceof To)return e._internalPath;if(typeof e=="string")return Nx(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const wR=new RegExp("[~\\*/\\[\\]]");function Nx(t,e,n){if(e.search(wR)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new To(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,s,i){const a=s&&!s.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${s}`),o&&(u+=` in document ${i}`),u+=")"),new ie(W.INVALID_ARGUMENT,l+t+u)}function e1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,s,i,a){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bR extends t1{data(){return super.data()}}function Vh(t,e){return typeof e=="string"?Nx(t,e):e instanceof To?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jx{}class Fh extends jx{}function be(t,e,...n){let s=[];e instanceof jx&&s.push(e),s=s.concat(n),function(a){const o=a.filter(u=>u instanceof Uh).length,l=a.filter(u=>u instanceof Pc).length;if(o>1||o>0&&l>0)throw new ie(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class Pc extends Fh{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Pc(e,n,s)}_apply(e){const n=this._parse(e);return s1(e._query,n),new qs(e.firestore,e.converter,xp(e._query,n))}_parse(e){const n=Lh(e.firestore);return function(a,o,l,u,d,h,f){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ie(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){qv(f,h);const w=[];for(const j of f)w.push(zv(u,a,j));g={arrayValue:{values:w}}}else g=zv(u,a,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||qv(f,h),g=vR(l,o,f,h==="in"||h==="not-in");return jt.create(d,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _e(t,e,n){const s=e,i=Vh("where",t);return Pc._create(i,s,n)}class Uh extends jx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Uh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ns.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const u of l)s1(o,u),o=xp(o,u)}(e._query,n),new qs(e.firestore,e.converter,xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $h extends Fh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $h(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rc(a,o)}(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new jo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function as(t,e="asc"){const n=e,s=Vh("orderBy",t);return $h._create(s,n)}class Bh extends Fh{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Bh(e,n,s)}_apply(e){return new qs(e.firestore,e.converter,Md(e._query,this._limit,this._limitType))}}function gi(t){return hR("limit",t),Bh._create("limit",t,"F")}function zv(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new ie(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XN(e)&&n.indexOf("/")!==-1)throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(et.fromString(n));if(!he.isDocumentKey(s))throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return uv(t,new he(s))}if(n instanceof Wt)return uv(t,n._key);throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rh(n)}.`)}function qv(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s1(t,e){const n=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class r1{convertValue(e,n="none"){switch(ia(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return da(e,(i,a)=>{s[i]=this.convertValue(a,n)}),s}convertVectorValue(e){var n,s,i;const a=(i=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||i===void 0?void 0:i.map(o=>gt(o.doubleValue));return new Oh(a)}convertGeoPoint(e){return new Dh(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Gg(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(nc(e));default:return null}}convertTimestamp(e){const n=fi(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=et.fromString(e);Le(_j(s));const i=new lo(s.get(1),s.get(3)),a=new he(s.popFirst(5));return i.isEqual(n)||vr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}function a1(){return new Wj("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kx extends t1{constructor(e,n,s,i,a,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Vh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Sl extends kx{data(e={}){return super.data(e)}}class Ex{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new za(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Sl(this._firestore,this._userDataWriter,s.key,s,new za(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Sl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new za(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Sl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new za(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:_R(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _R(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){t=an(t,Wt);const e=an(t.firestore,js);return cR(Io(e),t._key).then(n=>o1(e,t,n))}class zh extends r1{constructor(e){super(),this.firestore=e}convertBytes(e){return new aa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function we(t){t=an(t,qs);const e=an(t.firestore,js),n=Io(e),s=new zh(e);return n1(t._query),uR(n,t._query).then(i=>new Ex(e,s,t,i))}function Bt(t,e,n){t=an(t,Wt);const s=an(t.firestore,js),i=i1(t.converter,e,n);return Dc(s,[Yj(Lh(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,es.none())])}function ge(t,e,n,...s){t=an(t,Wt);const i=an(t.firestore,js),a=Lh(i);let o;return o=typeof(e=Qe(e))=="string"||e instanceof To?yR(a,"updateDoc",t._key,e,n,s):xR(a,"updateDoc",t._key,e),Dc(i,[o.toMutation(t._key,es.exists(!0))])}function Jn(t){return Dc(an(t.firestore,js),[new Zg(t._key,es.none())])}function tt(t,e){const n=an(t.firestore,js),s=Y(t),i=i1(t.converter,e);return Dc(n,[Yj(Lh(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,es.exists(!1))]).then(()=>s)}function Bs(t,...e){var n,s,i;t=Qe(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Bv(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Bv(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(s=f.error)===null||s===void 0?void 0:s.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,d,h;if(t instanceof Wt)d=an(t.firestore,js),h=Nh(t._key.path),u={next:f=>{e[o]&&e[o](o1(d,t,f))},error:e[o+1],complete:e[o+2]};else{const f=an(t,qs);d=an(f.firestore,js),h=f._query;const g=new zh(d);u={next:w=>{e[o]&&e[o](new Ex(d,g,f,w))},error:e[o+1],complete:e[o+2]},n1(t._query)}return function(g,w,j,A){const I=new xx(A),k=new px(w,I,j);return g.asyncQueue.enqueueAndForget(async()=>hx(await $d(g),k)),()=>{I.Za(),g.asyncQueue.enqueueAndForget(async()=>mx(await $d(g),k))}}(Io(d),h,l,u)}function Dc(t,e){return function(s,i){const a=new Vs;return s.asyncQueue.enqueueAndForget(async()=>YA(await oR(s),i,a)),a.promise}(Io(t),e)}function o1(t,e,n){const s=n.docs.get(e._key),i=new zh(t);return new kx(t,i,e._key,s,new za(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t){return l1(t,{count:a1()})}function l1(t,e){const n=an(t.firestore,js),s=Io(n),i=zC(e,(a,o)=>new _5(o,a.aggregateType,a._internalFieldPath));return dR(s,t._query,i).then(a=>function(l,u,d){const h=new zh(l);return new Kj(u,h,d)}(n,t,a))}function te(){return new wx("serverTimestamp")}function fn(t){return new bx("increment",t)}(function(e,n=!0){(function(i){No=i})(ua),Zi(new hi("firestore",(s,{instanceIdentifier:i,options:a})=>{const o=s.getProvider("app").getImmediate(),l=new js(new SC(s.getProvider("auth-internal")),new PC(s.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ie(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lo(d.options.projectId,h)}(o,i),o);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Ls(iv,"4.7.3",e),Ls(iv,"4.7.3","esm2017")})();const Km=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:r1,AggregateField:Wj,AggregateQuerySnapshot:Kj,Bytes:aa,CollectionReference:lr,DocumentReference:Wt,DocumentSnapshot:kx,FieldPath:To,FieldValue:So,Firestore:js,FirestoreError:ie,GeoPoint:Dh,Query:qs,QueryCompositeFilterConstraint:Uh,QueryConstraint:Fh,QueryDocumentSnapshot:Sl,QueryFieldFilterConstraint:Pc,QueryLimitConstraint:Bh,QueryOrderByConstraint:$h,QuerySnapshot:Ex,SnapshotMetadata:za,Timestamp:vt,VectorValue:Oh,_AutoId:Hg,_ByteString:Mt,_DatabaseId:lo,_DocumentKey:he,_EmptyAuthCredentialsProvider:UN,_FieldPath:Ot,_cast:an,_logWarn:sa,_validateIsNotUsedTogether:zj,addDoc:tt,collection:re,connectFirestoreEmulator:qj,count:a1,deleteDoc:Jn,doc:Y,documentId:Gj,ensureFirestoreConfigured:Io,executeWrite:Dc,getAggregateFromServer:l1,getCountFromServer:Ip,getDoc:Pe,getDocs:we,getFirestore:Hj,increment:fn,limit:gi,onSnapshot:Bs,orderBy:as,query:be,serverTimestamp:te,setDoc:Bt,updateDoc:ge,where:_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="firebasestorage.googleapis.com",u1="storageBucket",NR=2*60*1e3,jR=10*60*1e3,kR=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends zs{constructor(e,n,s=0){super(Gm(e),`Firebase Storage: ${n} (${Gm(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var st;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(st||(st={}));function Gm(t){return"storage/"+t}function Ix(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(st.UNKNOWN,t)}function ER(t){return new dt(st.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function IR(t){return new dt(st.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function TR(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(st.UNAUTHENTICATED,t)}function SR(){return new dt(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CR(t){return new dt(st.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function d1(){return new dt(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function h1(){return new dt(st.CANCELED,"User canceled the upload/download.")}function AR(t){return new dt(st.INVALID_URL,"Invalid URL '"+t+"'.")}function RR(t){return new dt(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function PR(){return new dt(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+u1+"' property when initializing the app?")}function m1(){return new dt(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function DR(){return new dt(st.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function OR(){return new dt(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function LR(t){return new dt(st.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tp(t){return new dt(st.INVALID_ARGUMENT,t)}function f1(){return new dt(st.APP_DELETED,"The Firebase app was deleted.")}function MR(t){return new dt(st.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cl(t,e){return new dt(st.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function nl(t){throw new dt(st.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=On.makeFromUrl(e,n)}catch{return new On(e,"")}if(s.path==="")return s;throw RR(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function a(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(T){T.path_=decodeURIComponent(T.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${f}/${h}/b/${i}/o${g}`,"i"),j={bucket:1,path:3},A=n===c1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",k=new RegExp(`^https?://${A}/${i}/${I}`,"i"),_=[{regex:l,indices:u,postModify:a},{regex:w,indices:j,postModify:d},{regex:k,indices:{bucket:1,path:2},postModify:d}];for(let T=0;T<_.length;T++){const O=_[T],V=O.regex.exec(e);if(V){const y=V[O.indices.bucket];let p=V[O.indices.path];p||(p=""),s=new On(y,p),O.postModify(s);break}}if(s==null)throw AR(e);return s}}class VR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e,n){let s=1,i=null,a=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...I){d||(d=!0,e.apply(null,I))}function f(I){i=setTimeout(()=>{i=null,t(w,u())},I)}function g(){a&&clearTimeout(a)}function w(I,...k){if(d){g();return}if(I){g(),h.call(null,I,...k);return}if(u()||o){g(),h.call(null,I,...k);return}s<64&&(s*=2);let _;l===1?(l=2,_=0):_=(s+Math.random())*1e3,f(_)}let j=!1;function A(I){j||(j=!0,g(),!d&&(i!==null?(I||(l=2),clearTimeout(i),f(0)):I||(l=1)))}return f(0),a=setTimeout(()=>{o=!0,A(!0)},n),A}function UR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){return t!==void 0}function BR(t){return typeof t=="function"}function zR(t){return typeof t=="object"&&!Array.isArray(t)}function qh(t){return typeof t=="string"||t instanceof String}function Hv(t){return Tx()&&t instanceof Blob}function Tx(){return typeof Blob<"u"}function Wv(t,e,n,s){if(s<e)throw Tp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw Tp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function p1(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var Hi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Hi||(Hi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,s,i,a,o,l,u,d,h,f,g=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,j)=>{this.resolve_=w,this.reject_=j,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new Tu(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Hi.NO_ERROR,u=a.getStatus();if(!l||g1(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Hi.ABORT;s(!1,new Tu(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;s(!0,new Tu(d,a))})},n=(s,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());$R(u)?a(u):a()}catch(u){o(u)}else if(l!==null){const u=Ix();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?f1():h1();o(u)}else{const u=d1();o(u)}};this.canceled_?n(!1,new Tu(!1,null,!0)):this.backoffId_=FR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&UR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tu{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function HR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function WR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function KR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function GR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function QR(t,e,n,s,i,a,o=!0){const l=p1(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return KR(d,e),HR(d,n),WR(d,a),GR(d,s),new qR(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function YR(...t){const e=XR();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(Tx())return new Blob(t);throw new dt(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function JR(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){if(typeof atob>"u")throw LR("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qm{constructor(e,n){this.data=e,this.contentType=n||null}}function eP(t,e){switch(t){case Rs.RAW:return new Qm(x1(e));case Rs.BASE64:case Rs.BASE64URL:return new Qm(y1(t,e));case Rs.DATA_URL:return new Qm(nP(e),sP(e))}throw Ix()}function x1(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=s,o=t.charCodeAt(++n);s=65536|(a&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function tP(t){let e;try{e=decodeURIComponent(t)}catch{throw Cl(Rs.DATA_URL,"Malformed data URL.")}return x1(e)}function y1(t,e){switch(t){case Rs.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Cl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Rs.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Cl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ZR(e)}catch(i){throw i.message.includes("polyfill")?i:Cl(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}class v1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Cl(Rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=rP(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function nP(t){const e=new v1(t);return e.base64?y1(Rs.BASE64,e.rest):tP(e.rest)}function sP(t){return new v1(t).contentType}function rP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){let s=0,i="";Hv(e)?(this.data_=e,s=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Hv(this.data_)){const s=this.data_,i=JR(s,e,n);return i===null?null:new er(i)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new er(s,!0)}}static getBlob(...e){if(Tx()){const n=e.map(s=>s instanceof er?s.data_:s);return new er(YR.apply(null,n))}else{const n=e.map(o=>qh(o)?eP(Rs.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const i=new Uint8Array(s);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[a++]=o[l]}),new er(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t){let e;try{e=JSON.parse(t)}catch{return null}return zR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function aP(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function b1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t,e){return e}class hn{constructor(e,n,s,i){this.server=e,this.local=n||e,this.writable=!!s,this.xform=i||oP}}let Su=null;function lP(t){return!qh(t)||t.length<2?t:b1(t)}function Sx(){if(Su)return Su;const t=[];t.push(new hn("bucket")),t.push(new hn("generation")),t.push(new hn("metageneration")),t.push(new hn("name","fullPath",!0));function e(a,o){return lP(o)}const n=new hn("name");n.xform=e,t.push(n);function s(a,o){return o!==void 0?Number(o):o}const i=new hn("size");return i.xform=s,t.push(i),t.push(new hn("timeCreated")),t.push(new hn("updated")),t.push(new hn("md5Hash",null,!0)),t.push(new hn("cacheControl",null,!0)),t.push(new hn("contentDisposition",null,!0)),t.push(new hn("contentEncoding",null,!0)),t.push(new hn("contentLanguage",null,!0)),t.push(new hn("contentType",null,!0)),t.push(new hn("metadata","customMetadata",!0)),Su=t,Su}function cP(t,e){function n(){const s=t.bucket,i=t.fullPath,a=new On(s,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function uP(t,e,n){const s={};s.type="file";const i=n.length;for(let a=0;a<i;a++){const o=n[a];s[o.local]=o.xform(s,e[o.server])}return cP(s,t),s}function _1(t,e,n){const s=w1(e);return s===null?null:uP(t,s,n)}function dP(t,e,n,s){const i=w1(e);if(i===null||!qh(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const h=t.bucket,f=t.fullPath,g="/b/"+o(h)+"/o/"+o(f),w=Oc(g,n,s),j=p1({alt:"media",token:d});return w+j})[0]}function N1(t,e){const n={},s=e.length;for(let i=0;i<s;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class Co{constructor(e,n,s,i){this.url=e,this.method=n,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t){if(!t)throw Ix()}function Cx(t,e){function n(s,i){const a=_1(t,i,e);return cr(a!==null),a}return n}function hP(t,e){function n(s,i){const a=_1(t,i,e);return cr(a!==null),dP(a,i,t.host,t._protocol)}return n}function Lc(t){function e(n,s){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=SR():i=TR():n.getStatus()===402?i=IR(t.bucket):n.getStatus()===403?i=CR(t.path):i=s,i.status=n.getStatus(),i.serverResponse=s.serverResponse,i}return e}function j1(t){const e=Lc(t);function n(s,i){let a=e(s,i);return s.getStatus()===404&&(a=ER(t.path)),a.serverResponse=i.serverResponse,a}return n}function mP(t,e,n){const s=e.fullServerUrl(),i=Oc(s,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new Co(i,a,Cx(t,n),o);return l.errorHandler=j1(e),l}function fP(t,e,n){const s=e.fullServerUrl(),i=Oc(s,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new Co(i,a,hP(t,n),o);return l.errorHandler=j1(e),l}function pP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function k1(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=pP(null,e)),s}function E1(t,e,n,s,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let T=0;T<2;T++)_=_+Math.random().toString().slice(2);return _}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=k1(e,s,i),h=N1(d,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=er.getBlob(f,s,g);if(w===null)throw m1();const j={name:d.fullPath},A=Oc(a,t.host,t._protocol),I="POST",k=t.maxUploadRetryTime,v=new Co(A,I,Cx(t,n),k);return v.urlParams=j,v.headers=o,v.body=w.uploadData(),v.errorHandler=Lc(e),v}class zd{constructor(e,n,s,i){this.current=e,this.total=n,this.finalized=!!s,this.metadata=i||null}}function Ax(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{cr(!1)}return cr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function gP(t,e,n,s,i){const a=e.bucketOnlyServerUrl(),o=k1(e,s,i),l={name:o.fullPath},u=Oc(a,t.host,t._protocol),d="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=N1(o,n),g=t.maxUploadRetryTime;function w(A){Ax(A);let I;try{I=A.getResponseHeader("X-Goog-Upload-URL")}catch{cr(!1)}return cr(qh(I)),I}const j=new Co(u,d,w,g);return j.urlParams=l,j.headers=h,j.body=f,j.errorHandler=Lc(e),j}function xP(t,e,n,s){const i={"X-Goog-Upload-Command":"query"};function a(d){const h=Ax(d,["active","final"]);let f=null;try{f=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{cr(!1)}f||cr(!1);const g=Number(f);return cr(!isNaN(g)),new zd(g,s.size(),h==="final")}const o="POST",l=t.maxUploadRetryTime,u=new Co(n,o,a,l);return u.headers=i,u.errorHandler=Lc(e),u}const Kv=256*1024;function yP(t,e,n,s,i,a,o,l){const u=new zd(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw DR();const d=u.total-u.current;let h=d;i>0&&(h=Math.min(h,i));const f=u.current,g=f+h;let w="";h===0?w="finalize":d===h?w="upload, finalize":w="upload";const j={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${u.current}`},A=s.slice(f,g);if(A===null)throw m1();function I(T,O){const V=Ax(T,["active","final"]),y=u.current+h,p=s.size();let N;return V==="final"?N=Cx(e,a)(T,O):N=null,new zd(y,p,V==="final",N)}const k="POST",v=e.maxUploadRetryTime,_=new Co(n,k,I,v);return _.headers=j,_.body=A.uploadData(),_.progressCallback=l||null,_.errorHandler=Lc(t),_}const wn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xm(t){switch(t){case"running":case"pausing":case"canceling":return wn.RUNNING;case"paused":return wn.PAUSED;case"success":return wn.SUCCESS;case"canceled":return wn.CANCELED;case"error":return wn.ERROR;default:return wn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n,s){if(BR(e)||n!=null||s!=null)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class wP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,i){if(this.sent_)throw nl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class bP extends wP{initXhr(){this.xhr_.responseType="text"}}function Mi(){return new bP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=Sx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(st.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(g1(i.status,[]))if(a)i=d1();else{this.sleepTime=Math.max(this.sleepTime*2,kR),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(st.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const s=gP(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,Mi,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const i=xP(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Mi,n,s);this._request=a,a.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Kv*this._chunkMultiplier,n=new zd(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((i,a)=>{let o;try{o=yP(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const l=this._ref.storage._makeRequest(o,Mi,i,a,!1);this._request=l,l.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Kv*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=mP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(s,Mi,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=E1(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(s,Mi,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=h1(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Xm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,i){const a=new vP(n||void 0,s||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Xm(this._state)){case wn.SUCCESS:Ia(this._resolve.bind(null,this.snapshot))();break;case wn.CANCELED:case wn.ERROR:const n=this._reject;Ia(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Xm(this._state)){case wn.RUNNING:case wn.PAUSED:e.next&&Ia(e.next.bind(e,this.snapshot))();break;case wn.SUCCESS:e.complete&&Ia(e.complete.bind(e))();break;case wn.CANCELED:case wn.ERROR:e.error&&Ia(e.error.bind(e,this._error))();break;default:e.error&&Ia(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this._service=e,n instanceof On?this._location=n:this._location=On.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new oa(e,n)}get root(){const e=new On(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return b1(this._location.path)}get storage(){return this._service}get parent(){const e=iP(this._location.path);if(e===null)return null;const n=new On(this._location.bucket,e);return new oa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw MR(e)}}function NP(t,e,n){t._throwIfRoot("uploadBytes");const s=E1(t.storage,t._location,Sx(),new er(e,!0),n);return t.storage.makeRequestWithTokens(s,Mi).then(i=>({metadata:i,ref:t}))}function jP(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new _P(t,new er(e),n)}function kP(t){t._throwIfRoot("getDownloadURL");const e=fP(t.storage,t._location,Sx());return t.storage.makeRequestWithTokens(e,Mi).then(n=>{if(n===null)throw OR();return n})}function EP(t,e){const n=aP(t._location.path,e),s=new On(t._location.bucket,n);return new oa(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t){return/^[A-Za-z]+:\/\//.test(t)}function TP(t,e){return new oa(t,e)}function I1(t,e){if(t instanceof Rx){const n=t;if(n._bucket==null)throw PR();const s=new oa(n,n._bucket);return e!=null?I1(s,e):s}else return e!==void 0?EP(t,e):t}function SP(t,e){if(e&&IP(e)){if(t instanceof Rx)return TP(t,e);throw Tp("To use ref(service, url), the first argument must be a Storage instance.")}else return I1(t,e)}function Gv(t,e){const n=e==null?void 0:e[u1];return n==null?null:On.makeFromBucketSpec(n,t)}function CP(t,e,n,s={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:$_(i,t.app.options.projectId))}class Rx{constructor(e,n,s,i,a){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=c1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NR,this._maxUploadRetryTime=jR,this._requests=new Set,i!=null?this._bucket=On.makeFromBucketSpec(i,this._host):this._bucket=Gv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=On.makeFromBucketSpec(this._url,e):this._bucket=Gv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oa(this,e)}_makeRequest(e,n,s,i,a=!0){if(this._deleted)return new VR(f1());{const o=QR(e,this._appId,s,i,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const Qv="@firebase/storage",Xv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="storage";function cc(t,e,n){return t=Qe(t),NP(t,e,n)}function qd(t,e,n){return t=Qe(t),jP(t,e,n)}function br(t){return t=Qe(t),kP(t)}function _r(t,e){return t=Qe(t),SP(t,e)}function Hh(t=yh(),e){t=Qe(t);const s=xh(t,T1).getImmediate({identifier:e}),i=V_("storage");return i&&AP(s,...i),s}function AP(t,e,n,s={}){CP(t,e,n,s)}function RP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Rx(n,s,i,e,ua)}function PP(){Zi(new hi(T1,RP,"PUBLIC").setMultipleInstances(!0)),Ls(Qv,Xv,""),Ls(Qv,Xv,"esm2017")}PP();const DP={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},Rn=H_().length?yh():q_(DP),ts=H_().length>0?jC(Rn):fN(Rn,{persistence:[SN,NN]}),B=Hj(Rn),Hd=Hh(Rn),Cu="broast_session_location",S1=b.createContext({user:null,role:null,loading:!0,logout:async()=>{},userLocation:null,locationRequired:!1,refreshUserData:async()=>{}}),OP=({children:t})=>{const[e,n]=b.useState(null),[s,i]=b.useState(null),[a,o]=b.useState(!0),[l,u]=b.useState(null),[d,h]=b.useState(!1),f=async()=>{if(!e)return;const w=await Pe(Y(B,"users",e.uid));if(w.exists()){const j=w.data(),A=j==null?void 0:j.role,I=j==null?void 0:j.location,k=j==null?void 0:j.savedLocation;if(A==="customer"||A==="admin"){const v=k?{lat:k.lat,lng:k.lng}:I||null;u(v),v&&sessionStorage.setItem(Cu,JSON.stringify(v))}else u(I||null),I&&sessionStorage.setItem(Cu,JSON.stringify(I));h(!1)}};b.useEffect(()=>{const w=YS(ts,async j=>{if(n(j),j){const A=await Pe(Y(B,"users",j.uid)),I=A.data(),k=A.exists()?I==null?void 0:I.role:null;i(k);const v=I==null?void 0:I.location,_=I==null?void 0:I.savedLocation,T=sessionStorage.getItem(Cu),O=T?JSON.parse(T):null;let V=null;if(k==="customer"||k==="admin"?V=_?{lat:_.lat,lng:_.lng}:O||v||null:V=O||v||null,u(V),k==="customer"||k==="admin"?(h(!(!!_||!!O)),_&&!O&&sessionStorage.setItem(Cu,JSON.stringify({lat:_.lat,lng:_.lng}))):h(k==="owner"||k==="courier"?!v:!1),k==="owner")try{const y=Y(B,"restaurants",j.uid);(await Pe(y)).exists()||await Bt(y,{name:(I==null?void 0:I.restaurantName)||(I==null?void 0:I.name)||" ",ownerId:j.uid,email:(I==null?void 0:I.email)||j.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(y){console.warn("    ",y)}}else i(null),u(null),h(!1);o(!1)});return()=>w()},[]);const g=async()=>{await JS(ts)};return r.jsx(S1.Provider,{value:{user:e,role:s,loading:a,logout:g,userLocation:l,locationRequired:d,refreshUserData:f},children:t})},He=()=>b.useContext(S1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),Yv=t=>{const e=MP(t);return e.charAt(0).toUpperCase()+e.slice(1)},C1=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),VP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...l},u)=>b.createElement("svg",{ref:u,...FP,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:C1("lucide",i),...!a&&!VP(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>b.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=(t,e)=>{const n=b.forwardRef(({className:s,...i},a)=>b.createElement(UP,{ref:a,iconNode:e,className:C1(`lucide-${LP(Yv(t))}`,`lucide-${t}`,s),...i}));return n.displayName=Yv(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],BP=Z("arrow-left",$P);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ur=Z("arrow-right",zP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],td=Z("award",qP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],uc=Z("bell",HP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],dc=Z("briefcase",WP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Ps=Z("building-2",KP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],QP=Z("calendar",GP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],nd=Z("chart-column",XP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Jv=Z("check-check",YP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ns=Z("check",JP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],hc=Z("chef-hat",ZP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],A1=Z("chevron-down",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Sp=Z("chevron-left",t6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],s6=Z("chevron-right",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],i6=Z("chevron-up",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ar=Z("circle-alert",a6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],at=Z("circle-check-big",o6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],c6=Z("circle-check",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dr=Z("circle-x",u6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],mc=Z("clipboard-list",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Kt=Z("clock",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],Px=Z("code-xml",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],R1=Z("copy",f6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Wd=Z("credit-card",p6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Dt=Z("crown",g6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Zv=Z("dollar-sign",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Kd=Z("external-link",y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Al=Z("eye",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],ew=Z("file-check",w6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Dx=Z("file-text",b6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],N6=Z("funnel",_6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Ym=Z("gift",j6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],E6=Z("globe",k6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Gd=Z("heart",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Qd=Z("house",T6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],P1=Z("image",S6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],tw=Z("info",C6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],R6=Z("key-round",A6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],D6=Z("key",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Wi=Z("loader-circle",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ox=Z("lock",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Lx=Z("log-in",M6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mx=Z("mail",V6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Gt=Z("map-pin",F6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],$6=Z("map",U6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Cp=Z("medal",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],hr=Z("megaphone",z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],H6=Z("menu",q6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Mc=Z("message-circle",W6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M5 12h14",key:"1ays0h"}]],G6=Z("minus",K6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Ki=Z("navigation",Q6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],on=Z("package",X6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],fc=Z("pen-line",Y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Wh=Z("phone",J6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],e3=Z("play",Z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vc=Z("plus",t3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],rn=Z("refresh-cw",n3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],D1=Z("save",s3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],i3=Z("search",r3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],o3=Z("send",a3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],c3=Z("server",l3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ap=Z("settings",u3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Rp=Z("share-2",d3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],m3=Z("shield-check",h3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ao=Z("shield",f3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Nr=Z("shopping-bag",p3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Xd=Z("shopping-cart",g3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],y3=Z("smartphone",x3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],w3=Z("smile",v3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Vn=Z("sparkles",b3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nw=Z("square-check-big",_3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],sw=Z("square",N3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fo=Z("star",j3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],zt=Z("store",k3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],I3=Z("target",E3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],In=Z("trash-2",T3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],C3=Z("trending-up",S3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Pp=Z("triangle-alert",A3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ss=Z("truck",R3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Vx=Z("upload",P3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Jm=Z("user-check",D3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],L3=Z("user-minus",O3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],pc=Z("user-plus",M3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],rw=Z("user-x",V3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xn=Z("user",F3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$3=Z("users",U3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],po=Z("utensils",B3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],q3=Z("video",z3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Fx=Z("wallet",H3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jr=Z("x",W3),Je=({to:t,label:e,icon:n,onClick:s})=>{const{pathname:i}=_i(),a=i===t;return r.jsxs(ue,{to:t,onClick:s,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(a?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20 backdrop-blur-sm"),children:[n,r.jsx("span",{children:e})]})},K3=()=>{const{user:t,role:e,logout:n}=He(),[s,i]=b.useState(!1),[a,o]=b.useState(0),l=_i(),u=yn(),d=l.pathname==="/";return b.useEffect(()=>{i(!1)},[l.pathname]),b.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),b.useEffect(()=>{if(!(t!=null&&t.uid)){o(0);return}const h=be(re(B,"notifications"),_e("recipientId","==",t.uid),_e("read","==",!1)),f=Bs(h,g=>{o(g.size)},g=>{console.warn("Notifications listener error:",g),o(0)});return()=>f()},[t==null?void 0:t.uid]),r.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30",children:[r.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[!d&&r.jsx("button",{onClick:()=>u(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"",children:r.jsx(ur,{className:"w-5 h-5"})}),r.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[r.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),r.jsx("span",{className:"text-lg sm:text-2xl",children:" "})]})]}),r.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[r.jsx(Je,{to:"/restaurants",label:"",icon:r.jsx(zt,{className:"w-4 h-4"})}),e==="customer"&&r.jsxs(r.Fragment,{children:[r.jsx(Je,{to:"/cart",label:" "}),r.jsx(Je,{to:"/orders",label:""}),r.jsx(Je,{to:"/profile",label:"",icon:r.jsx(Xn,{className:"w-4 h-4"})})]}),e==="owner"&&r.jsxs(r.Fragment,{children:[r.jsx(Je,{to:"/owner",label:" "}),r.jsx(Je,{to:"/owner/orders",label:" "}),r.jsx(Je,{to:"/owner/courier-requests",label:""})]}),e==="courier"&&r.jsxs(r.Fragment,{children:[r.jsx(Je,{to:"/courier",label:" "}),r.jsx(Je,{to:"/courier/hiring",label:""})]}),e==="admin"&&r.jsx(Je,{to:"/admin",label:" "}),e==="developer"&&r.jsx(Je,{to:"/developer",label:" "}),t&&r.jsxs(ue,{to:"/notifications",className:"relative p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"",children:[r.jsx(uc,{className:"w-5 h-5"}),a>0&&r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold animate-pulse",children:a>9?"9+":a})]}),t?r.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:""}):r.jsx(Je,{to:"/login",label:""})]}),r.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white/20 hover:bg-white/30 transition backdrop-blur-sm",onClick:()=>i(!s),children:s?r.jsx(jr,{className:"w-6 h-6 text-white"}):r.jsx(H6,{className:"w-6 h-6 text-white"})})]}),s&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>i(!1)}),r.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] bg-gradient-to-b from-sky-500 to-sky-700 
        z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${s?"translate-x-0":"translate-x-full"}
      `,children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[r.jsx("span",{className:"text-white font-bold text-lg",children:""}),r.jsx("button",{onClick:()=>i(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:r.jsx(jr,{className:"w-5 h-5 text-white"})})]}),r.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[r.jsx(Je,{to:"/restaurants",label:"",icon:r.jsx(zt,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e==="customer"&&r.jsxs(r.Fragment,{children:[r.jsx(Je,{to:"/cart",label:"",icon:r.jsx(Xd,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx(Je,{to:"/orders",label:"",icon:r.jsx(on,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx(Je,{to:"/profile",label:"",icon:r.jsx(Xn,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),e==="owner"&&r.jsxs(r.Fragment,{children:[r.jsx(Je,{to:"/owner",label:" ",icon:r.jsx(Qd,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx(Je,{to:"/owner/orders",label:" ",icon:r.jsx(on,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx(Je,{to:"/owner/courier-requests",label:"",icon:r.jsx(ss,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),e==="courier"&&r.jsxs(r.Fragment,{children:[r.jsx(Je,{to:"/courier",label:" ",icon:r.jsx(ss,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx(Je,{to:"/courier/hiring",label:"",icon:r.jsx(on,{className:"w-5 h-5"}),onClick:()=>i(!1)})]}),e==="admin"&&r.jsx(Je,{to:"/admin",label:" ",icon:r.jsx(Ao,{className:"w-5 h-5"}),onClick:()=>i(!1)}),e==="developer"&&r.jsx(Je,{to:"/developer",label:" ",icon:r.jsx(Px,{className:"w-5 h-5"}),onClick:()=>i(!1)}),t&&r.jsx(Je,{to:"/notifications",label:` ${a>0?`(${a})`:""}`,icon:r.jsx(uc,{className:"w-5 h-5"}),onClick:()=>i(!1)}),r.jsx("div",{className:"h-px bg-white/20 my-2"}),t?r.jsx("button",{onClick:()=>{n(),i(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"  "}):r.jsx(Je,{to:"/login",label:" ",icon:r.jsx(Qd,{className:"w-5 h-5"}),onClick:()=>i(!1)})]})]})]})},O1=b.createContext(null),ls=()=>{const t=b.useContext(O1);if(!t)throw new Error("useDialog must be used within DialogProvider");return t},G3=({children:t})=>{const[e,n]=b.useState({isOpen:!1,message:"",type:"confirm"}),s=b.useCallback(u=>new Promise(d=>{n({...u,isOpen:!0,resolve:d})}),[]),i=b.useCallback(u=>{e.resolve&&e.resolve(u),n(d=>({...d,isOpen:!1}))},[e.resolve]),a=b.useCallback(async()=>{e.onConfirm&&await e.onConfirm(),i(!0)},[e.onConfirm,i]),o=b.useCallback(()=>{e.onCancel&&e.onCancel(),i(!1)},[e.onCancel,i]),l=b.useMemo(()=>({confirm:(u,d={})=>s({message:u,type:"confirm",title:d.title||"",confirmText:d.confirmText||"",cancelText:d.cancelText||"",...d}),alert:(u,d={})=>s({message:u,type:"alert",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),success:(u,d={})=>s({message:u,type:"success",title:d.title||" ",confirmText:d.confirmText||"",...d}).then(()=>{}),error:(u,d={})=>s({message:u,type:"error",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),warning:(u,d={})=>s({message:u,type:"warning",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),info:(u,d={})=>s({message:u,type:"info",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{})}),[s]);return r.jsxs(O1.Provider,{value:l,children:[t,r.jsx(Q3,{...e,onConfirm:a,onCancel:o})]})},Q3=({isOpen:t,title:e,message:n,type:s="confirm",confirmText:i="",cancelText:a="",dangerous:o,onConfirm:l,onCancel:u})=>{if(!t)return null;const h={confirm:{icon:r.jsx(tw,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:o?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:r.jsx(Pp,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:r.jsx(at,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:r.jsx(dr,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:r.jsx(Pp,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:r.jsx(tw,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[s],f=s==="confirm";return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:u}),r.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:g=>g.stopPropagation(),children:[r.jsxs("div",{className:"relative p-6 pb-0",children:[r.jsx("button",{onClick:u,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:r.jsx(jr,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:`w-16 h-16 rounded-full ${h.iconBg} ${h.iconColor} flex items-center justify-center`,children:h.icon})}),r.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:e})]}),r.jsx("div",{className:"p-6 pt-3",children:r.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),r.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${f?"flex-row-reverse":"justify-center"}`,children:[r.jsx("button",{onClick:l,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${h.buttonColor}`,children:i}),f&&r.jsx("button",{onClick:u,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:a})]})]})}),r.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},X3=()=>{const{user:t}=He(),e=yn(),n=ls(),s=async()=>{if(!(!t||!await n.confirm("     .     .",{title:"  ",dangerous:!0,confirmText:"  ",cancelText:""})))try{await Jn(Y(B,"users",t.uid)),await ZS(ts.currentUser),n.success("   "),e("/account-deleted")}catch(a){console.error("Error deleting account:",a),n.error("    .   .")}};return r.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:r.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),r.jsx("span",{className:"text-xl sm:text-2xl font-black",children:" "})]}),r.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["  ",r.jsx(Gd,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"}),"    ",new Date().getFullYear()]}),r.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[r.jsxs(ue,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[r.jsx(Ao,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),r.jsxs(ue,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[r.jsx(Px,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),t&&r.jsxs("button",{onClick:s,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[r.jsx(In,{className:"w-3 h-3 sm:w-4 sm:h-4"})," "]})]}),r.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),r.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"     "})]})})},Y3=()=>r.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[r.jsx(Vn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),r.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"            ! "}),r.jsx(Vn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),J3=({onLocationSaved:t})=>{const{user:e,role:n}=He(),[s,i]=b.useState(null),[a,o]=b.useState(!1),[l,u]=b.useState(!1),[d,h]=b.useState(null),[f,g]=b.useState(!1),[w,j]=b.useState(!1),A={lat:24.7136,lng:46.6753},I=b.useCallback(()=>{if(!navigator.geolocation){h("    ");return}u(!0),h(null),navigator.geolocation.getCurrentPosition(_=>{const T={lat:_.coords.latitude,lng:_.coords.longitude};i(T),u(!1),window.locationRequiredMap&&(window.locationRequiredMap.setView([T.lat,T.lng],17),window.locationRequiredMarker&&window.locationRequiredMarker.setLatLng([T.lat,T.lng]))},_=>{u(!1),_.code===1?h("   .     "):_.code===2?h("  .    GPS"):h("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);b.useEffect(()=>{if(!document.getElementById("leaflet-css")){const _=document.createElement("link");_.id="leaflet-css",_.rel="stylesheet",_.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(_)}if(window.L)g(!0);else{const _=document.createElement("script");_.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",_.onload=()=>g(!0),document.body.appendChild(_)}},[]),b.useEffect(()=>{if(!f||!window.L)return;const _=window.L;if(!document.getElementById("location-required-map"))return;window.locationRequiredMap&&window.locationRequiredMap.remove();const O=s||A,V=_.map("location-required-map",{zoomControl:!0,attributionControl:!1}).setView([O.lat,O.lng],12);_.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(V);const y=_.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),p=_.marker([O.lat,O.lng],{icon:y,draggable:!0}).addTo(V);return p.on("dragend",()=>{const N=p.getLatLng();i({lat:N.lat,lng:N.lng})}),V.on("click",N=>{const{lat:E,lng:R}=N.latlng;i({lat:E,lng:R}),p.setLatLng([E,R])}),window.locationRequiredMap=V,window.locationRequiredMarker=p,()=>{window.locationRequiredMap&&(window.locationRequiredMap.remove(),window.locationRequiredMap=null,window.locationRequiredMarker=null)}},[f]);const k=async()=>{if(!(!s||!e)){j(!0);try{if(await ge(Y(B,"users",e.uid),{location:s,locationUpdatedAt:new Date}),n==="owner")try{await ge(Y(B,"restaurants",e.uid),{geoLocation:s,locationUpdatedAt:new Date})}catch(_){console.warn("   :",_)}t()}catch{h("   .   ")}finally{j(!1)}}},v=()=>{switch(n){case"owner":return"";case"courier":return" ";default:return""}};return r.jsx("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-sky-50 via-white to-sky-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 p-6 text-white text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Gt,{className:"w-10 h-10"})}),r.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["  ",v()]}),r.jsx("p",{className:"text-sky-100 text-sm",children:n==="owner"?"    ":"     (15 )"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[d&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 flex items-center gap-3 text-red-700",children:[r.jsx(Pp,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("p",{className:"text-sm",children:d})]}),r.jsx("button",{onClick:I,disabled:l,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:l?r.jsxs(r.Fragment,{children:[r.jsx(Wi,{className:"w-5 h-5 animate-spin"}),"  ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ki,{className:"w-5 h-5"}),"   "]})}),r.jsxs("div",{className:"relative",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"      "}),r.jsx("div",{id:"location-required-map",className:"h-64 rounded-xl overflow-hidden border-2 border-gray-200",style:{background:"#f0f9ff"}}),!f&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:r.jsx(Wi,{className:"w-8 h-8 animate-spin text-sky-500"})})]}),s&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 flex items-center gap-3 text-green-700",children:[r.jsx(at,{className:"w-5 h-5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-semibold",children:"   "}),r.jsxs("p",{className:"text-xs text-green-600",children:[s.lat.toFixed(6),", ",s.lng.toFixed(6)]})]})]}),r.jsx("button",{onClick:k,disabled:!s||w,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:w?r.jsxs(r.Fragment,{children:[r.jsx(Wi,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(at,{className:"w-5 h-5"}),"  "]})}),r.jsx("p",{className:"text-xs text-gray-400 text-center",children:"       "})]})]})})},Ke=({to:t,icon:e,label:n,color:s,emoji:i})=>r.jsxs(ue,{to:t,className:`flex flex-col items-center justify-center gap-2 p-4 sm:p-5 rounded-2xl bg-gradient-to-br ${s} text-white shadow-lg active:scale-95 transition-all duration-200`,children:[r.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-white/20 rounded-xl flex items-center justify-center",children:i?r.jsx("span",{className:"text-2xl sm:text-3xl",children:i}):e}),r.jsx("span",{className:"font-bold text-sm sm:text-base text-center leading-tight",children:n})]}),Z3=()=>{var i;const{user:t,role:e,loading:n,logout:s}=He();return n?r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100",children:[r.jsx("div",{className:"w-20 h-20 mb-6 bg-gradient-to-br from-sky-500 to-sky-600 rounded-3xl flex items-center justify-center shadow-2xl animate-pulse",children:r.jsx("span",{className:"text-5xl",children:""})}),r.jsx(Wi,{className:"w-8 h-8 text-sky-500 animate-spin mb-3"}),r.jsx("p",{className:"text-sky-600 font-semibold",children:" ..."})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 px-3 py-4 sm:px-4 sm:py-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-3 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl sm:rounded-3xl flex items-center justify-center shadow-xl",children:r.jsx("span",{className:"text-4xl sm:text-5xl",children:""})}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-sky-600 to-sky-500 mb-1",children:" "}),t&&r.jsxs("p",{className:"text-sky-600/80 text-sm",children:[" ",t.displayName||((i=t.email)==null?void 0:i.split("@")[0])," "]})]}),!t&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ke,{to:"/restaurants",emoji:"",icon:r.jsx(zt,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Ke,{to:"/customer-login",emoji:"",icon:r.jsx(Wh,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),r.jsx(Ke,{to:"/login",emoji:"",icon:r.jsx(Lx,{className:"w-6 h-6"}),label:" ",color:"from-amber-500 to-orange-500"}),r.jsx(Ke,{to:"/register",emoji:"",icon:r.jsx(pc,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"})]}),r.jsx("p",{className:"text-center text-sky-600/70 text-xs",children:"      "})]}),e==="customer"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ke,{to:"/restaurants",emoji:"",icon:r.jsx(zt,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Ke,{to:"/cart",emoji:"",icon:r.jsx(Xd,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Ke,{to:"/orders",emoji:"",icon:r.jsx(on,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Ke,{to:"/profile",emoji:"",icon:r.jsx(Xn,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="owner"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ke,{to:"/owner",emoji:"",icon:r.jsx(hc,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Ke,{to:"/owner/orders",emoji:"",icon:r.jsx(mc,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Ke,{to:"/owner/menu",emoji:"",icon:r.jsx(zt,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Ke,{to:"/owner/edit",emoji:"",icon:r.jsx(Ap,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),r.jsx(Ke,{to:"/owner/courier-requests",emoji:"",icon:r.jsx(ss,{className:"w-6 h-6"}),label:"",color:"from-cyan-500 to-cyan-600"}),r.jsx(Ke,{to:"/profile",emoji:"",icon:r.jsx(Xn,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="courier"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ke,{to:"/courier",emoji:"",icon:r.jsx(ss,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Ke,{to:"/courier/hiring",emoji:"",icon:r.jsx(zt,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),r.jsx(Ke,{to:"/profile",emoji:"",icon:r.jsx(Xn,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="admin"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ke,{to:"/admin",emoji:"",icon:r.jsx(Ao,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Ke,{to:"/admin/restaurants",emoji:"",icon:r.jsx(zt,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Ke,{to:"/admin/orders",emoji:"",icon:r.jsx(on,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Ke,{to:"/restaurants",emoji:"",icon:r.jsx(Xd,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),r.jsx(Ke,{to:"/profile",emoji:"",icon:r.jsx(Xn,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="developer"&&r.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ke,{to:"/developer",emoji:"",icon:r.jsx(Px,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),r.jsx(Ke,{to:"/restaurants",emoji:"",icon:r.jsx(zt,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),r.jsx(Ke,{to:"/admin/orders",emoji:"",icon:r.jsx(on,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),r.jsx(Ke,{to:"/profile",emoji:"",icon:r.jsx(Xn,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),r.jsx("button",{onClick:s,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]})]})},Ux=["",""," "," ","","","","","","","","","",""," ","","","","",""," ","","","","","","","","","","","","","",""," ","","","",""];function eD(t,e){const s=Au(e.lat-t.lat),i=Au(e.lng-t.lng),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(Au(t.lat))*Math.cos(Au(e.lat))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function Au(t){return t*(Math.PI/180)}const Zm=15,iw=async(t,e,n)=>{try{await tt(re(B,"visitLogs"),{restaurantId:t,visitorId:e||null,visitorType:e?"customer":"anonymous",source:n||"direct",page:"menu",createdAt:te()});const s=Y(B,"restaurantStats",t),i=await Pe(s),a=new Date().toISOString().split("T")[0];if(i.exists()){const l=i.data().dailyViews||{};l[a]=(l[a]||0)+1,await ge(s,{totalProfileViews:fn(1),dailyViews:l,updatedAt:te()})}else await Bt(s,{totalProfileViews:1,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:0,appDownloads:0,dailyViews:{[a]:1},updatedAt:te()})}catch(s){console.warn("   :",s)}},tD=()=>{var _,T,O,V,y;const{userLocation:t,role:e,user:n}=He(),[s]=ph(),i=s.get("ref"),[a,o]=b.useState([]),[l,u]=b.useState([]),[d,h]=b.useState(0),[f,g]=b.useState(!0),[w,j]=b.useState(""),[A,I]=b.useState("grid");b.useEffect(()=>{(async()=>{const N=(await we(re(B,"restaurants"))).docs.map(R=>({id:R.id,...R.data()}));try{const R=be(re(B,"promotions"),_e("isActive","==",!0)),D=await we(R),S=new Date,X=D.docs.map(U=>{var M,$;return{id:U.id,...U.data(),expiresAt:($=(M=U.data().expiresAt)==null?void 0:M.toDate)==null?void 0:$.call(M)}}).filter(U=>!U.expiresAt||new Date(U.expiresAt)>S).map(U=>{const M=N.find($=>$.id===U.ownerId);return{...U,restaurantName:M==null?void 0:M.name}});u(X)}catch(R){console.warn("Error loading promotions:",R)}let E=[];t?(E=N.map(R=>{if(R.geoLocation){const D=eD(t,R.geoLocation);return{...R,distance:D}}return{...R,distance:void 0}}),(e==="customer"||e==="courier")&&(E=E.filter(R=>!R.geoLocation||R.distance===void 0?!1:R.distance<=Zm)),E.sort((R,D)=>{const S=R.packageType==="premium"?1:0,X=D.packageType==="premium"?1:0;if(X!==S)return X-S;const U={gold:3,silver:2,bronze:1},M=U[R.sellerTier||"bronze"]||0,$=U[D.sellerTier||"bronze"]||0;if($!==M)return $-M;const F=R.isVerified?1:0,H=D.isVerified?1:0;return H!==F?H-F:(R.distance||999)-(D.distance||999)})):E=N.sort((R,D)=>{const S={gold:3,silver:2,bronze:1},X=S[R.sellerTier||"bronze"]||0,U=S[D.sellerTier||"bronze"]||0;if(U!==X)return U-X;const M=R.isVerified?1:0;return(D.isVerified?1:0)-M}),o(E),g(!1)})()},[t,e]);const k=b.useMemo(()=>{const p=new Set(a.map(N=>N.city).filter(Boolean));return Ux.filter(N=>p.has(N))},[a]),v=b.useMemo(()=>w?a.filter(p=>p.city===w):a,[a,w]);return f?r.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."}):r.jsxs("div",{className:"py-10",children:[r.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-sky-600",children:"  "}),l.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[r.jsx(hr,{className:"w-5 h-5 text-purple-500"}),r.jsx("span",{className:"font-bold text-purple-600",children:" "})]}),r.jsxs("div",{className:"relative",children:[r.jsxs(ue,{to:`/menu?restaurant=${(_=l[d])==null?void 0:_.ownerId}`,onClick:async()=>{try{await ge(Y(B,"promotions",l[d].id),{viewsCount:fn(1)})}catch{}},className:"block bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden",children:[r.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(hr,{className:"w-3 h-3"}),""]}),((T=l[d])==null?void 0:T.mediaUrl)&&r.jsx("div",{className:"relative h-48",children:l[d].type==="video"?r.jsxs(r.Fragment,{children:[r.jsx("video",{src:l[d].mediaUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,autoPlay:!0,playsInline:!0}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:r.jsx(e3,{className:"w-6 h-6 text-white fill-white"})})})]}):r.jsx("img",{src:l[d].mediaUrl,alt:l[d].title,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:((O=l[d])==null?void 0:O.restaurantName)&&r.jsx("span",{className:"text-xs bg-white/20 text-white px-2 py-1 rounded-full",children:l[d].restaurantName})}),((V=l[d])==null?void 0:V.title)&&r.jsx("h3",{className:"text-lg font-bold text-white",children:l[d].title}),((y=l[d])==null?void 0:y.description)&&r.jsx("p",{className:"text-purple-100 text-sm mt-1 line-clamp-2",children:l[d].description})]})]}),l.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:p=>{p.preventDefault(),h(N=>N===0?l.length-1:N-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:r.jsx(Sp,{className:"w-5 h-5 text-gray-800"})}),r.jsx("button",{onClick:p=>{p.preventDefault(),h(N=>N===l.length-1?0:N+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:r.jsx(s6,{className:"w-5 h-5 text-gray-800"})})]}),l.length>1&&r.jsx("div",{className:"flex justify-center gap-2 mt-3",children:l.map((p,N)=>r.jsx("button",{onClick:()=>h(N),className:`w-2 h-2 rounded-full transition ${N===d?"bg-purple-500 w-4":"bg-gray-300"}`},N))})]})]}),k.length>0&&r.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[r.jsx(N6,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:":"})]}),r.jsx("button",{onClick:()=>j(""),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${w?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-sky-500 text-white shadow-lg"}`,children:""}),k.map(p=>r.jsxs("button",{onClick:()=>j(p),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1 ${w===p?"bg-sky-500 text-white shadow-lg":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:[r.jsx(Gt,{className:"w-4 h-4"}),p]},p)),w&&r.jsx("button",{onClick:()=>j(""),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:" ",children:r.jsx(jr,{className:"w-5 h-5"})})]}),v.length===0&&r.jsxs("div",{className:"text-center py-10",children:[r.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(ar,{className:"w-10 h-10 text-sky-500"})}),t?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:"     "}),r.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["   ",Zm,"  "]})]}):r.jsx(r.Fragment,{children:r.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:w?`     ${w}`:"    "})})]}),t&&v.length>0&&(e==="customer"||e==="courier")&&r.jsxs("div",{className:"mb-6 bg-sky-50 border border-sky-200 rounded-xl p-4 flex items-center gap-3",children:[r.jsx(Ki,{className:"w-6 h-6 text-sky-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sky-700 font-semibold",children:"    "}),r.jsxs("p",{className:"text-sky-600 text-sm",children:["  : ",Zm," "]})]})]}),v.filter(p=>p.packageType==="premium").length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dt,{className:"w-6 h-6 text-amber-500"}),r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"  "})]}),r.jsxs("span",{className:"text-sm text-gray-500",children:[v.filter(p=>p.packageType==="premium").length," "]})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:v.filter(p=>p.packageType==="premium").map(p=>r.jsxs(ue,{to:`/menu?restaurant=${p.id}${i?`&ref=${i}`:""}`,onClick:()=>iw(p.id,n==null?void 0:n.uid,i||"direct"),className:"group bg-gradient-to-br from-amber-50 via-white to-purple-50 border-2 border-amber-200 rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-2 transform transition-all duration-300 p-4 flex flex-col items-center text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"absolute top-2 right-2",children:r.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow flex items-center gap-1",children:[r.jsx(Dt,{className:"w-3 h-3"}),""]})}),p.distance!==void 0&&r.jsxs("div",{className:"absolute top-2 left-2 bg-sky-500/90 backdrop-blur text-white text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-0.5",children:[r.jsx(Ki,{className:"w-2.5 h-2.5"}),p.distance<1?`${Math.round(p.distance*1e3)}`:`${p.distance.toFixed(1)}`]}),r.jsxs("div",{className:"relative mt-4 mb-3",children:[p.logoUrl?r.jsx("img",{src:p.logoUrl,alt:p.name,className:"w-20 h-20 object-cover rounded-xl border-3 border-amber-300 shadow-lg group-hover:scale-110 transition-transform duration-300"}):r.jsx("div",{className:"w-20 h-20 flex items-center justify-center rounded-xl bg-gradient-to-br from-amber-100 to-orange-100 border-3 border-amber-300 shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx(po,{className:"w-8 h-8 text-amber-600"})}),p.isVerified&&r.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-white",children:r.jsx(at,{className:"w-3.5 h-3.5 text-white"})})]}),r.jsx("h3",{className:"font-bold text-sm text-gray-800 line-clamp-1",children:p.name}),p.city&&r.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-0.5 mt-1",children:[r.jsx(Gt,{className:"w-3 h-3"}),p.city]}),r.jsxs("div",{className:"flex items-center justify-center gap-3 mt-2 text-[10px] text-gray-400",children:[p.averageRating!==void 0&&p.averageRating>0&&r.jsxs("span",{className:"flex items-center gap-0.5",children:[r.jsx(fo,{className:"w-3 h-3 text-amber-400 fill-amber-400"}),p.averageRating.toFixed(1)]}),p.totalOrders!==void 0&&p.totalOrders>0&&r.jsxs("span",{className:"flex items-center gap-0.5",children:[r.jsx(Nr,{className:"w-3 h-3"}),p.totalOrders]})]}),r.jsxs("div",{className:"flex gap-1 mt-2",children:[p.sellerTier==="gold"&&r.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full",children:" Gold"}),p.sellerTier==="silver"&&r.jsx("span",{className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full",children:" Silver"})]})]},p.id))})]}),v.filter(p=>p.packageType!=="premium").length>0&&r.jsxs("div",{children:[v.filter(p=>p.packageType==="premium").length>0&&r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(po,{className:"w-5 h-5 text-gray-500"}),r.jsx("h2",{className:"text-lg font-bold text-gray-700",children:" "})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:v.filter(p=>p.packageType!=="premium").map(p=>r.jsxs(ue,{to:`/menu?restaurant=${p.id}${i?`&ref=${i}`:""}`,onClick:()=>iw(p.id,n==null?void 0:n.uid,i||"direct"),className:`bg-white border text-gray-800 rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center relative overflow-hidden ${p.sellerTier==="gold"?"border-amber-300 ring-2 ring-amber-200":"border-gray-200"}`,children:[r.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-1.5",children:[p.isVerified?r.jsxs("div",{className:"bg-green-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[r.jsx(at,{className:"w-3 h-3"})," "]}):r.jsx("div",{className:"bg-gray-400 text-white text-xs font-medium px-2.5 py-1 rounded-full flex items-center gap-1 shadow-sm",children:" "}),p.sellerTier==="gold"&&r.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[r.jsx(Dt,{className:"w-3 h-3"}),"Gold"]}),p.sellerTier==="silver"&&r.jsxs("div",{className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[r.jsx(Cp,{className:"w-3 h-3"}),"Silver"]})]}),p.distance!==void 0&&r.jsxs("div",{className:"absolute top-3 left-3 bg-sky-500 text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[r.jsx(Ki,{className:"w-3 h-3"}),p.distance<1?`${Math.round(p.distance*1e3)} `:`${p.distance.toFixed(1)} `]}),p.logoUrl?r.jsx("img",{src:p.logoUrl,alt:p.name,className:`w-28 h-28 object-cover rounded-full mb-4 ${p.sellerTier==="gold"?"border-4 border-amber-400 ring-4 ring-amber-100":p.sellerTier==="silver"?"border-4 border-gray-300":"border-4 border-sky-100"}`}):r.jsx("div",{className:`w-28 h-28 flex items-center justify-center rounded-full text-3xl mb-4 ${p.sellerTier==="gold"?"bg-amber-100 border-4 border-amber-400":p.sellerTier==="silver"?"bg-gray-100 border-4 border-gray-300":"bg-sky-100 border-4 border-sky-200"}`,children:""}),r.jsx("h3",{className:"font-bold text-xl text-gray-800",children:p.name}),p.city&&r.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center justify-center gap-1",children:[r.jsx(Gt,{className:"w-4 h-4"}),p.city]})]},p.id))})]})]})},aw="broast_cart";function $x(){const[t,e]=b.useState(()=>{try{const l=localStorage.getItem(aw);return l?JSON.parse(l):[]}catch{return[]}});b.useEffect(()=>{localStorage.setItem(aw,JSON.stringify(t))},[t]);const n=b.useCallback((l,u=1)=>{e(d=>{const h=d.findIndex(f=>f.id===l.id);if(h>=0){const f=[...d];return f[h]={...f[h],qty:f[h].qty+u,ownerId:l.ownerId??f[h].ownerId},f}return[...d,{...l,qty:u}]})},[]),s=b.useCallback(l=>e(u=>u.filter(d=>d.id!==l)),[]),i=b.useCallback((l,u)=>e(d=>d.map(h=>h.id===l?{...h,qty:u}:h)),[]),a=b.useCallback(()=>e([]),[]),o=b.useMemo(()=>t.reduce((l,u)=>l+u.price*u.qty,0),[t]);return{items:t,add:n,remove:s,changeQty:i,clear:a,subtotal:o}}const L1=b.createContext(null),vn=()=>{const t=b.useContext(L1);if(!t)throw new Error("useToast must be used within ToastProvider");return t},nD=({children:t})=>{const[e,n]=b.useState([]),s=b.useCallback(o=>{n(l=>l.filter(u=>u.id!==o))},[]),i=b.useCallback((o,l,u)=>{const d=Math.random().toString(36).slice(2),h={id:d,message:o,type:l,title:u==null?void 0:u.title,duration:(u==null?void 0:u.duration)??3e3};n(f=>[...f,h]),h.duration&&h.duration>0&&setTimeout(()=>s(d),h.duration)},[s]),a=b.useMemo(()=>({show:(o,l)=>i(o,(l==null?void 0:l.type)??"info",l),success:(o,l)=>i(o,"success",l),error:(o,l)=>i(o,"error",l),info:(o,l)=>i(o,"info",l),warning:(o,l)=>i(o,"warning",l)}),[i]);return r.jsxs(L1.Provider,{value:a,children:[t,r.jsx(iD,{items:e,onClose:s})]})},sD={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},rD={success:"",error:"",info:"",warning:""},iD=({items:t,onClose:e})=>(b.useEffect(()=>{},[]),r.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[r.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:t.map(n=>r.jsx("div",{className:`pointer-events-auto ${sD[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-xl leading-none",children:rD[n.type]}),r.jsxs("div",{className:"flex-1",children:[n.title&&r.jsx("div",{className:"font-bold",children:n.title}),r.jsx("div",{className:"text-sm",children:n.message})]}),r.jsx("button",{onClick:()=>e(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:""})]})},n.id))}),r.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),aD=(t,e)=>{const n=[];for(let s=0;s<t.length;s+=e)n.push(t.slice(s,s+e));return n},oD=()=>{var $;const[t,e]=b.useState([]),[n,s]=b.useState(!0),[i,a]=b.useState(null),[o,l]=b.useState(null),[u,d]=b.useState(!0),[h,f]=b.useState(!1),[g,w]=b.useState(null),[j,A]=b.useState(0),{add:I,subtotal:k,items:v}=$x(),{user:_,role:T}=He(),O=vn(),[V]=ph(),y=V.get("restaurant"),p=1.75,N=F=>{navigator.clipboard.writeText(F),O.success(" ! ")},E=()=>{navigator.share?navigator.share({title:(i==null?void 0:i.name)||" ",text:`  ${i==null?void 0:i.name}   `,url:window.location.href}):N(window.location.href)};b.useEffect(()=>{if(!y)return;(async()=>{try{const H=be(re(B,"storeFollowers"),_e("restaurantId","==",y)),L=await we(H);if(A(L.size),_){const se=be(re(B,"storeFollowers"),_e("restaurantId","==",y),_e("followerId","==",_.uid)),ee=await we(se);ee.empty||(f(!0),w(ee.docs[0].id))}}catch(H){console.warn("    :",H)}})()},[y,_]);const R=async()=>{var F;if(!_){O.warning("   ");return}if(y)try{if(h&&g){await Jn(Y(B,"storeFollowers",g)),f(!1),w(null),A(L=>Math.max(0,L-1));const H=Y(B,"restaurantStats",y);await ge(H,{followersCount:fn(-1)}).catch(()=>{}),O.info("  ")}else{const H=await tt(re(B,"storeFollowers"),{followerId:_.uid,followerName:_.displayName||((F=_.email)==null?void 0:F.split("@")[0])||"",restaurantId:y,createdAt:te()});f(!0),w(H.id),A(ee=>ee+1);const L=Y(B,"restaurantStats",y);(await Pe(L)).exists()?await ge(L,{followersCount:fn(1)}):await tt(re(B,"restaurantStats"),{restaurantId:y,totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:0,appDownloads:0,followersCount:1,dailyViews:{},updatedAt:te()}),O.success("    ! ")}}catch(H){console.error("  :",H),O.error("    ")}};b.useEffect(()=>{(async()=>{let F;if(y){F=be(re(B,"menuItems"),_e("available","==",!0),_e("ownerId","==",y));const de=await Pe(Y(B,"restaurants",y));de.exists()&&a({id:de.id,...de.data()});try{const Ce=be(re(B,"promotions"),_e("ownerId","==",y),_e("isActive","==",!0)),Ve=await we(Ce);if(!Ve.empty){const Xe=Ve.docs.map(Ye=>{var kt,un;return{id:Ye.id,...Ye.data(),expiresAt:(un=(kt=Ye.data().expiresAt)==null?void 0:kt.toDate)==null?void 0:un.call(kt)}}),Fe=new Date,Vt=Xe.filter(Ye=>!Ye.expiresAt||new Date(Ye.expiresAt)>Fe);if(Vt.length>0){const Ye=Vt[0];l(Ye),await ge(Y(B,"promotions",Ye.id),{viewsCount:fn(1)})}}}catch{}}else F=be(re(B,"menuItems"),_e("available","==",!0));const L=(await we(F)).docs.map(de=>({id:de.id,...de.data()})),se=[...new Set(L.map(de=>de.ownerId).filter(Boolean))],ee=new Map;if(se.length>0){const de=aD(se,30);for(const Ce of de){const Ve=be(re(B,"restaurants"),_e(Gj(),"in",Ce));(await we(Ve)).docs.forEach(Fe=>ee.set(Fe.id,{id:Fe.id,...Fe.data()}))}}const me=L.map(de=>({...de,restaurant:de.ownerId?ee.get(de.ownerId):void 0}));e(me),s(!1)})()},[y]);const D=F=>{var L;if(!F.ownerId){O.warning("    ");return}const H=(L=v[0])==null?void 0:L.ownerId;if(H&&H!==F.ownerId){O.warning("           ");return}I({id:F.id,name:F.name,price:F.price+p,ownerId:F.ownerId}),O.success("  ")};if(n)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),r.jsx("p",{className:"text-gray-400 text-lg",children:" ..."})]});const S=_&&(T==="customer"||T==="admin"||T==="developer"||!T),X=_&&y===_.uid,M=(F=>{switch(F){case"gold":return{label:"",bg:"bg-gradient-to-r from-yellow-400 to-amber-500",icon:""};case"silver":return{label:"",bg:"bg-gradient-to-r from-gray-300 to-gray-400",icon:""};default:return{label:"",bg:"bg-gradient-to-r from-orange-500 to-orange-600",icon:""}}})(i==null?void 0:i.sellerTier);return r.jsxs("div",{className:"min-h-screen pb-32 -mx-4 -mt-4",children:[X&&r.jsxs("div",{className:"bg-gradient-to-l from-emerald-500 to-teal-600 text-white p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ps,{className:"w-6 h-6"}),r.jsx("span",{className:"font-bold",children:" !  :"})]}),r.jsxs(ue,{to:"/",className:"bg-white text-emerald-600 px-4 py-2 rounded-full font-bold hover:bg-gray-100 transition flex items-center gap-2",children:[" ",r.jsx(ur,{className:"w-4 h-4"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"h-48 sm:h-56 bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black/20"}),r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-black/10 rounded-full translate-y-1/2 -translate-x-1/2"}),r.jsxs(ue,{to:"/restaurants",className:"absolute top-4 right-4 flex items-center gap-2 bg-black/30 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm font-bold hover:bg-black/50 transition",children:[r.jsx(ur,{className:"w-4 h-4"}),""]}),r.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[!X&&r.jsxs("button",{onClick:R,className:`flex items-center gap-2 px-4 py-2 backdrop-blur-sm rounded-full font-bold transition ${h?"bg-pink-500 text-white hover:bg-pink-600":"bg-black/30 text-white hover:bg-black/50"}`,children:[r.jsx(Gd,{className:`w-5 h-5 ${h?"fill-white":""}`}),r.jsx("span",{className:"text-sm",children:h?"":""})]}),r.jsx("button",{onClick:E,className:"p-3 bg-black/30 backdrop-blur-sm rounded-full text-white hover:bg-black/50 transition",children:r.jsx(Rp,{className:"w-5 h-5"})})]})]}),i&&r.jsx("div",{className:"mx-4 -mt-20 relative z-10",children:r.jsxs("div",{className:"bg-gray-900 rounded-3xl shadow-2xl border border-gray-800 overflow-hidden",children:[r.jsxs("div",{className:"p-6 text-center relative",children:[r.jsxs("div",{className:"relative inline-block mb-4",children:[r.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 p-1 shadow-2xl",children:r.jsx("div",{className:"w-full h-full rounded-full bg-white overflow-hidden",children:i.logoUrl?r.jsx("img",{src:i.logoUrl,alt:i.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full bg-gradient-to-br from-amber-50 to-orange-100 flex items-center justify-center",children:r.jsx("span",{className:"text-5xl",children:""})})})}),i.isVerified&&r.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-4 border-gray-900 shadow-lg",children:r.jsx(at,{className:"w-5 h-5 text-white"})})]}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-white mb-2",children:i.name}),i.city&&r.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 mb-3",children:[r.jsx(Gt,{className:"w-4 h-4"}),r.jsx("span",{children:i.city})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[r.jsxs("span",{className:`${M.bg} text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg`,children:[M.icon," ",M.label]}),i.isVerified&&r.jsx("span",{className:"bg-green-500 text-white text-xs font-bold px-3 py-1.5 rounded-full",children:" "})]})]}),r.jsxs("div",{className:"grid grid-cols-5 border-t border-gray-800",children:[r.jsxs("div",{className:"p-3 text-center border-l border-gray-800",children:[r.jsx(Gd,{className:"w-5 h-5 text-pink-400 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-black text-white",children:j}),r.jsx("p",{className:"text-[10px] text-gray-500",children:""})]}),r.jsxs("div",{className:"p-3 text-center border-l border-gray-800",children:[r.jsx(po,{className:"w-5 h-5 text-amber-400 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-black text-white",children:t.length}),r.jsx("p",{className:"text-[10px] text-gray-500",children:""})]}),r.jsxs("div",{className:"p-3 text-center border-l border-gray-800",children:[r.jsx(on,{className:"w-5 h-5 text-green-400 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-black text-white",children:i.totalOrders||0}),r.jsx("p",{className:"text-[10px] text-gray-500",children:""})]}),r.jsxs("div",{className:"p-3 text-center border-l border-gray-800",children:[r.jsx(fo,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-black text-white",children:(($=i.averageRating)==null?void 0:$.toFixed(1))||"0"}),r.jsx("p",{className:"text-[10px] text-gray-500",children:""})]}),r.jsxs("div",{className:"p-3 text-center",children:[r.jsx(Kt,{className:"w-5 h-5 text-sky-400 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-black text-white",children:i.onTimeDeliveryRate?`${Math.round(i.onTimeDeliveryRate)}%`:""}),r.jsx("p",{className:"text-[10px] text-gray-500",children:""})]})]}),r.jsxs("div",{className:"p-4 border-t border-gray-800 space-y-3",children:[i.phone&&r.jsxs("a",{href:`tel:${i.phone}`,className:"flex items-center justify-between p-3 bg-green-500/10 hover:bg-green-500/20 rounded-xl transition",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:r.jsx(Wh,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-bold",children:" "}),r.jsx("p",{className:"text-green-400 text-sm",dir:"ltr",children:i.phone})]})]}),r.jsx(ur,{className:"w-5 h-5 text-green-400 rotate-180"})]}),i.location&&r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800/50 rounded-xl",children:[r.jsx("div",{className:"w-10 h-10 bg-sky-500/20 rounded-xl flex items-center justify-center",children:r.jsx(Gt,{className:"w-5 h-5 text-sky-400"})}),r.jsx("p",{className:"text-gray-300 text-sm",children:i.location})]})]}),i.isHiring&&r.jsx("div",{className:"p-4 border-t border-gray-800",children:r.jsxs("div",{className:"bg-gradient-to-br from-purple-900/40 to-pink-900/40 rounded-2xl p-4 border border-purple-700/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-xl flex items-center justify-center",children:r.jsx(dc,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("span",{className:"text-purple-400 font-bold block",children:"  !"}),r.jsx("span",{className:"text-purple-300/70 text-xs",children:"  "})]})]}),i.hiringDescription&&r.jsx("p",{className:"text-gray-300 text-sm mb-4 leading-relaxed bg-gray-900/40 p-3 rounded-xl",children:i.hiringDescription}),i.hiringContact&&r.jsxs("a",{href:`https://wa.me/${i.hiringContact.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-xl font-bold transition",children:[r.jsx(Mc,{className:"w-5 h-5"})," "]})]})})]})})]}),o&&u&&r.jsxs("div",{className:"mx-4 mt-6 bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden relative",children:[r.jsx("button",{onClick:()=>d(!1),className:"absolute top-3 left-3 z-10 p-2 bg-black/40 hover:bg-black/60 rounded-full text-white transition",children:r.jsx(jr,{className:"w-4 h-4"})}),r.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(hr,{className:"w-3 h-3"}),""]}),o.mediaUrl&&r.jsx("img",{src:o.mediaUrl,alt:"",className:"w-full h-40 object-cover"}),r.jsxs("div",{className:"p-4",children:[o.title&&r.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:o.title}),o.description&&r.jsx("p",{className:"text-purple-100 text-sm",children:o.description})]})]}),r.jsxs("div",{className:"px-4 mt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-amber-500/20 rounded-xl flex items-center justify-center",children:r.jsx(po,{className:"w-5 h-5 text-amber-400"})}),r.jsx("h2",{className:"text-xl font-bold text-white",children:" "}),r.jsx("span",{className:"bg-amber-500/20 text-amber-400 text-sm font-bold px-3 py-1 rounded-full mr-auto",children:t.length})]}),t.length===0?r.jsxs("div",{className:"text-center py-16 bg-gray-800/30 rounded-2xl",children:[r.jsx(Nr,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400 text-lg",children:"   "})]}):r.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.map(F=>r.jsxs("div",{className:"bg-gray-800 rounded-2xl overflow-hidden border border-gray-700/50 hover:border-amber-500/50 shadow-lg transition-all",children:[r.jsxs("div",{className:"relative h-28 sm:h-36 overflow-hidden",children:[F.imageUrl?r.jsx("img",{src:F.imageUrl,alt:F.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-700 to-gray-800",children:r.jsx("span",{className:"text-4xl opacity-30",children:""})}),r.jsx("div",{className:"absolute bottom-2 left-2 bg-black/80 px-2 py-1 rounded-full",children:r.jsxs("span",{className:"font-black text-amber-400 text-sm",children:[(F.price+p).toFixed(0)," ."]})})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("h3",{className:"font-bold text-white text-sm mb-2 line-clamp-1",children:F.name}),S&&r.jsx("button",{onClick:()=>D(F),className:"w-full py-2 rounded-xl font-bold text-sm bg-gradient-to-r from-amber-500 to-orange-500 text-black",children:"+ "})]})]},F.id))})]}),k>0&&S&&r.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 bg-gradient-to-t from-gray-900 via-gray-900/98 to-transparent",children:r.jsxs(ue,{to:"/checkout",className:"flex items-center justify-between w-full max-w-lg mx-auto px-5 py-4 rounded-2xl bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-2xl font-bold",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Nr,{className:"w-6 h-6"}),r.jsx("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-amber-400 text-black text-xs font-black rounded-full flex items-center justify-center",children:v.reduce((F,H)=>F+H.qty,0)})]}),r.jsx("span",{children:" "})]}),r.jsxs("span",{className:"text-xl font-black",children:[k.toFixed(2)," ."]})]})})]})},lD=()=>{const{items:t,subtotal:e,remove:n,clear:s,changeQty:i}=$x();return t.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:r.jsx(Nr,{className:"w-12 h-12 text-gray-400"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-2",children:" "}),r.jsx("p",{className:"text-gray-500 mb-6",children:"   !"}),r.jsxs(ue,{to:"/restaurants",className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-sky-600 transition",children:[r.jsx(BP,{className:"w-5 h-5"})," "]})]}):r.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[r.jsx(Nr,{className:"w-6 h-6 text-primary"})," ",r.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:t.length})]})}),r.jsx("div",{className:"space-y-3",children:t.map(a=>r.jsxs("div",{className:"flex items-center gap-3 bg-white text-gray-900 p-3 sm:p-4 rounded-xl shadow-sm border border-gray-100",children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-3xl",children:""})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:a.name}),r.jsxs("p",{className:"text-primary font-bold text-sm",children:[a.price.toFixed(2)," ."]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("button",{onClick:()=>a.qty>1?i(a.id,a.qty-1):n(a.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:r.jsx(G6,{className:"w-4 h-4"})}),r.jsx("span",{className:"font-bold text-lg w-8 text-center",children:a.qty}),r.jsx("button",{onClick:()=>i(a.id,a.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:r.jsx(Vc,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(a.price*a.qty).toFixed(2)," ."]}),r.jsx("button",{onClick:()=>n(a.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:r.jsx(In,{className:"w-4 h-4"})})]})]},a.id))}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:" "}),r.jsxs("span",{className:"font-bold",children:[e.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:" "}),r.jsx("span",{className:"font-bold",children:"7.00 ."})]}),r.jsx("div",{className:"h-px bg-gray-200"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-bold text-lg",children:""}),r.jsxs("span",{className:"font-bold text-xl text-primary",children:[(e+7).toFixed(2)," ."]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[r.jsxs("button",{onClick:s,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:[r.jsx(In,{className:"w-5 h-5"})," "]}),r.jsx(ue,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition",children:"  "})]})]})},cD=()=>{const[t,e]=b.useState(""),[n,s]=b.useState(""),[i,a]=b.useState(!1),o=yn(),l=ls(),u=async d=>{d.preventDefault(),a(!0);try{const f=(await GS(ts,t,n)).user.uid,g=await Pe(Y(B,"users",f));if(g.exists()){const w=g.data();w.role==="owner"?o("/owner"):w.role==="admin"?o("/admin"):w.role==="developer"?o("/developer"):w.role==="courier"?o("/courier"):o("/")}else l.warning("   Auth       Firestore")}catch(h){l.error(h.message,{title:"   "})}finally{a(!1)}};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[r.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[r.jsxs("div",{className:"flex flex-col items-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:r.jsx("span",{className:"text-4xl",children:"  "})}),r.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),r.jsx("p",{className:"text-sky-500 mt-1",children:" "})]}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Mx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"email",placeholder:"",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:t,onChange:d=>e(d.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ox,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"password",placeholder:" ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:d=>s(d.target.value)})]}),r.jsx("button",{disabled:i,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50`,children:i?r.jsx(r.Fragment,{children:" ..."}):r.jsxs(r.Fragment,{children:[r.jsx(Lx,{className:"w-5 h-5"}),""]})})]}),r.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["  "," ",r.jsx(ue,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"  "})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[r.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"    "}),r.jsx(ue,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"   "})]})]})]})},uD=()=>{const[t]=ph(),e=t.get("ref_restaurant"),[n,s]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[u,d]=b.useState(""),[h,f]=b.useState(""),[g,w]=b.useState(""),[j,A]=b.useState(!1),[I,k]=b.useState(!1),v=yn();b.useEffect(()=>{e&&w("customer")},[e]);const _=g==="owner"||g==="courier",T=y=>{w(y),A(!1)},O=async y=>{if(y.preventDefault(),!g)return alert("  ");if(g==="owner"&&!u)return alert("  ");if(_&&!j)return alert("    ");k(!0);try{const p=await jl(ts,n,i);if(await Bt(Y(B,"users",p.user.uid),{name:o,email:n,role:g,restaurantName:g==="owner"?u:null,referredBy:e||null,createdAt:te()}),g==="owner"&&await Bt(Y(B,"restaurants",p.user.uid),{name:u||o||" ",ownerId:p.user.uid,email:n,phone:"",city:h||"",location:"",logoUrl:""},{merge:!0}),e&&g==="customer")try{await tt(re(B,"customerRegistrations"),{customerId:p.user.uid,customerName:o,customerEmail:n,restaurantId:e,registrationType:"website",createdAt:te()});const N=Y(B,"restaurantStats",e);(await Pe(N)).exists()?await ge(N,{registeredCustomers:fn(1),updatedAt:te()}):await Bt(N,{totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:0,whatsappShareCount:0,registeredCustomers:1,appDownloads:0,dailyViews:{},updatedAt:te()}),await tt(re(B,"notifications"),{recipientId:e,title:"     !",message:` "${o}"        `,type:"new_customer_registration",read:!1,createdAt:te()})}catch(N){console.warn("   :",N)}v("/")}catch(p){alert(p.message)}finally{k(!1)}},V=[{value:"customer",label:"",icon:$3,color:"sky"},{value:"courier",label:"",icon:ss,color:"emerald"},{value:"owner",label:" ",icon:hc,color:"orange"}];return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[r.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[r.jsxs("div",{className:"flex flex-col items-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:r.jsx(pc,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"  "})]}),r.jsxs("form",{onSubmit:O,className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xn,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",value:o,onChange:y=>l(y.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Mx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",type:"email",value:n,onChange:y=>s(y.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ox,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:" ",type:"password",value:i,onChange:y=>a(y.target.value)})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:V.map(y=>{const p=y.icon,N=g===y.value;return r.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${N?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[r.jsx("input",{type:"radio",name:"role",value:y.value,className:"hidden",onChange:()=>T(y.value)}),r.jsx(p,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm font-bold",children:y.label})]},y.value)})}),g==="owner"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx(zt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),r.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:" ",value:u,onChange:y=>d(y.target.value)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Gt,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400 pointer-events-none"}),r.jsxs("select",{value:h,onChange:y=>f(y.target.value),className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all appearance-none cursor-pointer",children:[r.jsx("option",{value:"",children:" "}),Ux.map(y=>r.jsx("option",{value:y,children:y},y))]})]}),r.jsxs("div",{onClick:()=>A(!j),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${j?"bg-green-50 border-green-400":"bg-orange-50 border-orange-200 hover:border-orange-300"}`,children:[j?r.jsx(nw,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):r.jsx(sw,{className:"w-6 h-6 text-orange-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm leading-relaxed",children:[r.jsxs("span",{className:j?"text-green-700":"text-orange-700",children:[" "," "]}),r.jsx(ue,{to:"/terms",target:"_blank",onClick:y=>y.stopPropagation(),className:"text-sky-600 hover:text-sky-800 font-bold underline",children:" "}),r.jsxs("span",{className:j?"text-green-700":"text-orange-700",children:[" ",""," "]}),r.jsx(ue,{to:"/privacy-policy",target:"_blank",onClick:y=>y.stopPropagation(),className:"text-sky-600 hover:text-sky-800 font-bold underline",children:" "}),r.jsxs("span",{className:j?"text-green-700":"text-orange-700",children:[" ","   "]})]})]})]}),g==="courier"&&r.jsxs("div",{onClick:()=>A(!j),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${j?"bg-green-50 border-green-400":"bg-emerald-50 border-emerald-200 hover:border-emerald-300"}`,children:[j?r.jsx(nw,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):r.jsx(sw,{className:"w-6 h-6 text-emerald-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm leading-relaxed",children:[r.jsxs("span",{className:j?"text-green-700":"text-emerald-700",children:[" "," "]}),r.jsx(ue,{to:"/courier-terms",target:"_blank",onClick:y=>y.stopPropagation(),className:"text-emerald-600 hover:text-emerald-800 font-bold underline",children:"  "}),r.jsxs("span",{className:j?"text-green-700":"text-emerald-700",children:[" ","    "]})]})]}),r.jsx("button",{disabled:I||_&&!j,className:`w-full flex items-center justify-center gap-3 text-white font-bold p-4 rounded-2xl shadow-xl transition-all ${_&&!j?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 shadow-sky-300/50 hover:scale-[1.02]"}`,children:I?" ...":r.jsxs(r.Fragment,{children:[r.jsx(pc,{className:"w-5 h-5"}),""]})}),_&&!j&&r.jsx("p",{className:`text-center text-sm p-3 rounded-xl ${g==="courier"?"text-emerald-600 bg-emerald-50":"text-orange-600 bg-orange-50"}`,children:"       "})]}),r.jsxs("p",{className:"mt-6 text-center text-sky-600",children:[" "," ",r.jsx(ue,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"  "})]})]})]})},ow=t=>{let e=t.replace(/\D/g,"");return e.startsWith("0")&&(e=e.substring(1)),e.startsWith("966")||(e="966"+e),"+"+e},dD=()=>{const[t,e]=b.useState(""),[n,s]=b.useState(""),[i,a]=b.useState("phone"),[o,l]=b.useState(!1),[u,d]=b.useState(null),[h,f]=b.useState(0),g=b.useRef(null),w=b.useRef(null),j=yn(),A=ls();b.useEffect(()=>(g.current&&!w.current&&(w.current=new Xy(ts,g.current,{size:"invisible",callback:()=>{},"expired-callback":()=>{w.current=null}})),()=>{w.current&&(w.current.clear(),w.current=null)}),[]),b.useEffect(()=>{if(h>0){const _=setTimeout(()=>f(h-1),1e3);return()=>clearTimeout(_)}},[h]);const I=async()=>{if(!t||t.length<9){A.warning("   ");return}const _=ow(t);l(!0);try{!w.current&&g.current&&(w.current=new Xy(ts,g.current,{size:"invisible"}));const T=await I4(ts,_,w.current);d(T),a("otp"),f(60),A.success("     ")}catch(T){console.error("OTP Error:",T),w.current&&(w.current.clear(),w.current=null),T.code==="auth/invalid-phone-number"?A.error("   "):T.code==="auth/too-many-requests"?A.error("   "):T.code==="auth/quota-exceeded"?A.error("     "):A.error(T.message||"  ")}finally{l(!1)}},k=async()=>{if(!n||n.length!==6){A.warning("     6 ");return}if(!u){A.error("    "),a("phone");return}l(!0);try{const _=await u.confirm(n),T=_.user.uid,O=_.user.phoneNumber,V=await Pe(Y(B,"users",T));V.exists()?A.success(" ! "):(await Bt(Y(B,"users",T),{phone:O,role:"customer",name:"",createdAt:te()}),A.success("   ! "));const y=V.exists()?V.data():{role:"customer"};y.role==="owner"?j("/owner"):y.role==="admin"?j("/admin"):y.role==="developer"?j("/developer"):y.role==="courier"?j("/courier"):j("/")}catch(_){console.error("Verify Error:",_),_.code==="auth/invalid-verification-code"?A.error("   "):_.code==="auth/code-expired"?(A.error("    "),a("phone")):A.error(_.message||" ")}finally{l(!1)}},v=()=>{h>0||(a("phone"),s(""),d(null))};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[r.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),r.jsx("div",{ref:g,id:"recaptcha-container"}),r.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[r.jsxs("div",{className:"flex flex-col items-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:r.jsx("span",{className:"text-4xl",children:""})}),r.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),r.jsx("p",{className:"text-sky-500 mt-1",children:i==="phone"?" ":"  "})]}),i==="phone"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Wh,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:t,onChange:_=>e(_.target.value.replace(/\D/g,"")),maxLength:10})]}),r.jsx("p",{className:"text-sm text-gray-500 text-center",children:"     SMS"}),r.jsx("button",{onClick:I,disabled:o||t.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(rn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ur,{className:"w-5 h-5"}),"  "]})})]}),i==="otp"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("p",{className:"text-gray-600",children:"   "}),r.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:ow(t)})]}),r.jsxs("div",{className:"relative",children:[r.jsx(R6,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),r.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:_=>s(_.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),r.jsx("button",{onClick:k,disabled:o||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(rn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Lx,{className:"w-5 h-5"})," "]})}),r.jsx("div",{className:"text-center",children:h>0?r.jsxs("p",{className:"text-gray-500 text-sm",children:["   ",r.jsx("span",{className:"font-bold text-sky-600",children:h})," "]}):r.jsx("button",{onClick:v,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"    "})}),r.jsx("button",{onClick:()=>{a("phone"),s("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"   "})]}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[r.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"   "}),r.jsx(ue,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"   "})]})]})]})};function hD(){return r.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"  -   "}),r.jsxs("p",{className:"mb-4",children:["   ",r.jsx("strong",{children:" "}),"          ."]}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1.  "}),r.jsx("p",{className:"mb-4",children:"                   .            ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2.  "}),r.jsx("p",{className:"mb-4",children:"               ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3.  "}),r.jsx("p",{className:"mb-4",children:"              .                 ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4.  "}),r.jsx("p",{className:"mb-4",children:"       (    )         ."}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5.  "}),r.jsxs("p",{className:"mb-4",children:["              .         :",r.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),r.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6.   "}),r.jsx("p",{className:"mb-4",children:"                  ."}),r.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["      ",new Date().toLocaleDateString("ar-SA"),"."]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx(ue,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"   "})})]})})}function mD(){return r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"   "}),r.jsx("p",{className:"text-gray-600 mb-6",children:"          ."}),r.jsx(ue,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"   "})]})}const fD="modulepreload",pD=function(t){return"/"+t},lw={},ef=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=pD(u),u in lw)return;lw[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":fD,d||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((g,w)=>{f.addEventListener("load",g),f.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},qe=({allow:t,children:e})=>{const{role:n,loading:s}=He();return s?r.jsx("div",{className:"p-8 text-center",children:" ..."}):!n||!t.includes(n)?r.jsx(fh,{to:"/",replace:!0}):r.jsx(r.Fragment,{children:e})},M1=({isOpen:t,onClose:e,onConfirm:n,initialLocation:s})=>{const[i,a]=b.useState(s||null),[o,l]=b.useState(""),[u,d]=b.useState(!1),[h,f]=b.useState(!1),[g,w]=b.useState(null),[j,A]=b.useState(!1),[I,k]=b.useState(""),[v,_]=b.useState([]),[T,O]=b.useState(!1),[V,y]=b.useState(!1),[p,N]=b.useState("map"),E={lat:24.7136,lng:46.6753},R=b.useCallback(async M=>{if(!M.trim()||M.length<2){_([]),y(!1);return}O(!0);try{const $=M.includes("")?M:`${M}, `,H=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent($)}&limit=5&accept-language=ar`,{headers:{Accept:"application/json"}})).json();_(H),y(H.length>0)}catch($){console.error("  :",$),_([])}finally{O(!1)}},[]),D=b.useCallback(M=>{const $={lat:parseFloat(M.lat),lng:parseFloat(M.lon)};a($),k(""),_([]),y(!1),window.leafletMap&&(window.leafletMap.setView([$.lat,$.lng],16,{animate:!0,duration:.5}),window.leafletMarker&&window.leafletMarker.setLatLng([$.lat,$.lng]));const F=M.display_name.split(",").slice(0,3).join("");l(F)},[]),S=b.useCallback(()=>{if(!navigator.geolocation){w("    ");return}f(!0),w(null),navigator.geolocation.getCurrentPosition(M=>{const $={lat:M.coords.latitude,lng:M.coords.longitude};a($),f(!1),window.leafletMap&&(window.leafletMap.setView([$.lat,$.lng],17),window.leafletMarker&&window.leafletMarker.setLatLng([$.lat,$.lng]))},M=>{f(!1),M.code===1?w("   .     "):M.code===2?w("  .    GPS"):w("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);b.useEffect(()=>{if(t){if(!document.getElementById("leaflet-css")){const M=document.createElement("link");M.id="leaflet-css",M.rel="stylesheet",M.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(M)}if(window.L)A(!0);else{const M=document.createElement("script");M.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",M.onload=()=>A(!0),document.body.appendChild(M)}}},[t]),b.useEffect(()=>{if(!t||!j||!window.L)return;const M=window.L;if(!document.getElementById("location-map"))return;window.leafletMap&&window.leafletMap.remove();const F=i||E,H=M.map("location-map",{zoomControl:!1,attributionControl:!1}).setView([F.lat,F.lng],i?17:12);M.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(H);const L=M.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),se=M.marker([F.lat,F.lng],{icon:L,draggable:!0}).addTo(H);return se.on("dragend",()=>{const ee=se.getLatLng();a({lat:ee.lat,lng:ee.lng})}),H.on("click",ee=>{const{lat:me,lng:de}=ee.latlng;se.setLatLng([me,de]),a({lat:me,lng:de})}),window.leafletMap=H,window.leafletMarker=se,i&&a(i),()=>{window.leafletMap&&(window.leafletMap.remove(),window.leafletMap=null,window.leafletMarker=null)}},[t,j]);const X=()=>{i&&window.leafletMap&&window.leafletMap.setView([i.lat,i.lng],17,{animate:!0,duration:.5})},U=()=>{if(p==="manual"){if(!o.trim()){w("  ");return}n({lat:24.7136,lng:46.6753},o);return}if(!i){w("  ");return}if(!o.trim()){w("  ");return}n(i,o)};return t?r.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),r.jsxs("div",{className:"relative w-full h-full sm:w-[95%] sm:h-[90%] sm:max-w-2xl sm:rounded-3xl overflow-hidden bg-white shadow-2xl flex flex-col",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(Gt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-lg",children:"  "}),r.jsx("p",{className:"text-sm text-white/80",children:p==="map"?"   ":"  "})]})]}),r.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition",children:r.jsx(jr,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsxs("button",{onClick:()=>N("map"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${p==="map"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[r.jsx($6,{className:"w-4 h-4"}),""]}),r.jsxs("button",{onClick:()=>N("manual"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${p==="manual"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[r.jsx(fc,{className:"w-4 h-4"})," "]})]}),p==="map"&&r.jsxs("div",{className:"relative",children:[r.jsx(i3,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:I,onChange:M=>{k(M.target.value),R(M.target.value)},onFocus:()=>v.length>0&&y(!0),placeholder:"     ...",className:"w-full bg-white/95 text-gray-800 rounded-xl p-3 pr-10 pl-10 focus:outline-none focus:ring-2 focus:ring-white/50 transition placeholder:text-gray-400"}),T&&r.jsx(Wi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-500 animate-spin"}),V&&v.length>0&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl overflow-hidden z-[1001] max-h-60 overflow-y-auto",children:v.map((M,$)=>r.jsxs("button",{onClick:()=>D(M),className:"w-full p-3 text-right hover:bg-sky-50 border-b border-gray-100 last:border-0 transition flex items-start gap-3",children:[r.jsx(Gt,{className:"w-5 h-5 text-sky-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-gray-700 text-sm leading-relaxed",children:M.display_name})]},$))})]})]}),p==="map"&&r.jsxs("div",{className:"flex-1 relative",children:[!j&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Wi,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-sky-600 font-medium",children:"  ..."})]})}),r.jsx("div",{id:"location-map",className:"w-full h-full"}),r.jsxs("div",{className:"absolute left-4 top-4 flex flex-col gap-2 z-[1000]",children:[r.jsx("button",{onClick:S,disabled:h,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition disabled:opacity-50",title:" ",children:h?r.jsx(Wi,{className:"w-5 h-5 text-sky-500 animate-spin"}):r.jsx(Ki,{className:"w-5 h-5 text-sky-500"})}),i&&r.jsx("button",{onClick:X,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition",title:"",children:r.jsx(I3,{className:"w-5 h-5 text-gray-600"})})]}),i&&r.jsxs("div",{className:"absolute right-4 top-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 z-[1000] max-w-[200px]",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[r.jsx(ns,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"  "})]}),r.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[i.lat.toFixed(6),", ",i.lng.toFixed(6)]})]})]}),p==="manual"&&r.jsx("div",{className:"flex-1 p-6 overflow-y-auto bg-gray-50",children:r.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(fc,{className:"w-10 h-10 text-sky-500"})}),r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"  "}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"     "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),r.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-xl p-3 bg-white focus:border-sky-400 focus:outline-none",onChange:M=>l($=>{const F=$.split("").slice(1);return M.target.value+(F.length?""+F.join(""):"")}),children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:" ",children:" "}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""}),r.jsx("option",{value:"",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",placeholder:":  ",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:M=>l($=>($.split("")[0]||"")+(M.target.value?" "+M.target.value:""))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),r.jsx("input",{type:"text",placeholder:":   ",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:M=>l($=>$.split("").slice(0,2).join("")+(M.target.value?" "+M.target.value:""))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),r.jsx("textarea",{placeholder:"    ...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none resize-none",onChange:M=>l($=>$.split("").slice(0,3).join("")+(M.target.value?" "+M.target.value:""))})]}),o&&r.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[r.jsx(ns,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:":"})]}),r.jsx("p",{className:"text-gray-700",children:o})]})]})}),r.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[g&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4 flex-shrink-0"}),g]}),p==="map"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx(y3,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",value:o,onChange:M=>l(M.target.value),placeholder:"  (:       ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 pr-10 focus:border-sky-400 focus:outline-none transition text-gray-800"})]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"      "})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:e,className:"flex-1 py-3 px-4 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition",children:""}),r.jsxs("button",{onClick:U,disabled:p==="map"&&!i,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:[r.jsx(ns,{className:"w-5 h-5"})," "]})]})]})]}),r.jsx("style",{children:`
        .custom-marker {
          background: transparent !important;
          border: none !important;
        }
        .leaflet-container {
          font-family: inherit;
        }
        .leaflet-control-zoom {
          display: none;
        }
        #location-map {
          background: #f0f9ff;
        }
      `})]}):null},tf=1,Ru=.75,nf=!1,gD=()=>{const{items:t,subtotal:e,clear:n}=$x(),{user:s}=He(),i=yn(),a=ls(),o=vn(),[l,u]=b.useState(""),[d,h]=b.useState(!1),[f,g]=b.useState(null),[w,j]=b.useState(null),[A,I]=b.useState(!1),[k,v]=b.useState("pickup"),_=k==="delivery"?7:0;t.reduce((y,p)=>y+p.qty,0);const T=e+_;b.useEffect(()=>{(async()=>{var R,D;if(t.length===0)return;let p=(R=t[0])==null?void 0:R.ownerId;if(!p&&((D=t[0])!=null&&D.id))try{const S=await Pe(Y(B,"menuItems",t[0].id)),X=S.exists()?S.data():null;p=(X==null?void 0:X.ownerId)||null}catch(S){console.error("    :",S)}if(!p){g(null);return}const N=await Pe(Y(B,"restaurants",p)),E=N.exists()?N.data():null;g({id:p,name:(E==null?void 0:E.name)||"",referredBy:E==null?void 0:E.referredBy,referrerType:E==null?void 0:E.referrerType})})()},[t]);const O=(y,p)=>{j(y),u(p),I(!1),o.success("   ! ")},V=async()=>{var M;if(!s)return;if(t.length===0){a.warning(" ");return}let y=f==null?void 0:f.id;if(!y&&((M=t[0])!=null&&M.id)){const $=await Pe(Y(B,"menuItems",t[0].id)),F=$.exists()?$.data():null;y=(F==null?void 0:F.ownerId)||null}if(!y){a.error("   .    .");return}h(!0);const p=(f==null?void 0:f.referrerType)==="admin"&&(f==null?void 0:f.referredBy),N=t.reduce(($,F)=>$+F.qty,0),E=tf+Ru,D=e-E*N,S=tf*N,X=p?Ru*N:0,U=S+(p?0:Ru*N);await tt(re(B,"orders"),{customerId:s.uid,restaurantId:y,restaurantName:(f==null?void 0:f.name)||"",items:t.map($=>({id:$.id,name:$.name,price:$.price,qty:$.qty,ownerId:$.ownerId??y})),subtotal:e,deliveryFee:_,total:T,status:"pending",deliveryType:k,address:k==="pickup"?"  ":l,location:k==="pickup"?null:w,createdAt:te(),updatedAt:te(),paymentMethod:"cod",restaurantEarnings:D,platformFee:S,platformFeePerItem:tf,adminCommission:X,adminCommissionPerItem:Ru,appEarnings:U,totalItemsCount:N,referredBy:(f==null?void 0:f.referredBy)||null});try{const $=Y(B,"wallets",y);if((await Pe($)).exists())await ge($,{balance:fn(D),totalEarnings:fn(D),updatedAt:te()});else{const{setDoc:H}=await ef(async()=>{const{setDoc:L}=await Promise.resolve().then(()=>Km);return{setDoc:L}},void 0);await H($,{balance:D,totalEarnings:D,totalWithdrawn:0,transactions:[],updatedAt:te()})}}catch{}if(p&&(f!=null&&f.referredBy)&&X>0)try{const $=Y(B,"wallets",f.referredBy);if((await Pe($)).exists())await ge($,{balance:fn(X),totalEarnings:fn(X),updatedAt:te()});else{const{setDoc:H}=await ef(async()=>{const{setDoc:L}=await Promise.resolve().then(()=>Km);return{setDoc:L}},void 0);await H($,{balance:X,totalEarnings:X,totalWithdrawn:0,transactions:[],updatedAt:te()})}}catch{}try{const $=Y(B,"wallets","app_earnings");if((await Pe($)).exists())await ge($,{balance:fn(U),totalEarnings:fn(U),updatedAt:te()});else{const{setDoc:H}=await ef(async()=>{const{setDoc:L}=await Promise.resolve().then(()=>Km);return{setDoc:L}},void 0);await H($,{balance:U,totalEarnings:U,totalWithdrawn:0,transactions:[],updatedAt:te()})}}catch{}n(),h(!1),i("/orders")};return r.jsx(qe,{allow:["customer","admin"],children:r.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[r.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 text-white shadow-lg",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(Nr,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold",children:" "}),r.jsx("p",{className:"text-sm text-white/80",children:(f==null?void 0:f.name)||" ..."})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[r.jsx(Nr,{className:"w-5 h-5 text-sky-500"}),r.jsx("span",{className:"font-bold text-gray-800",children:" "}),r.jsxs("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full mr-auto",children:[t.length," "]})]}),r.jsx("div",{className:"p-4 space-y-2",children:t.map(y=>r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center text-sm",children:[y.qty,""]}),r.jsx("span",{className:"text-gray-800 font-medium",children:y.name})]}),r.jsxs("span",{className:"font-bold text-sky-600",children:[(y.price*y.qty).toFixed(2)," ."]})]},y.id))})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[r.jsx(ss,{className:"w-5 h-5 text-sky-500"}),r.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsxs("button",{onClick:()=>v("pickup"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${k==="pickup"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${k==="pickup"?"bg-green-500":"bg-gray-100"}`,children:r.jsx(zt,{className:`w-6 h-6 ${k==="pickup"?"text-white":"text-gray-500"}`})}),r.jsxs("div",{className:"flex-1 text-right",children:[r.jsx("p",{className:`font-bold ${k==="pickup"?"text-green-700":"text-gray-800"}`,children:"  "}),r.jsx("p",{className:"text-sm text-gray-500",children:" -   "})]}),k==="pickup"&&r.jsx(ns,{className:"w-6 h-6 text-green-500"})]}),r.jsxs("div",{className:"w-full p-4 rounded-xl border-2 border-gray-200 bg-gray-50 flex items-center gap-4 opacity-60 cursor-not-allowed",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-gray-200",children:r.jsx(ss,{className:"w-6 h-6 text-gray-400"})}),r.jsxs("div",{className:"flex-1 text-right",children:[r.jsx("p",{className:"font-bold text-gray-500",children:" "}),r.jsx("p",{className:"text-sm text-gray-400",children:" : 7 ."})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:[r.jsx(dr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-semibold",children:" "})]})]})]})]}),nf,r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[r.jsx(Wd,{className:"w-5 h-5 text-amber-500"}),r.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[r.jsx("span",{children:" "}),r.jsxs("span",{className:"font-semibold",children:[e.toFixed(2)," ."]})]}),k==="delivery"&&r.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ss,{className:"w-4 h-4"}),r.jsx("span",{children:" "})]}),r.jsxs("span",{className:"font-semibold",children:[_.toFixed(2)," ."]})]}),k==="pickup"&&r.jsxs("div",{className:"flex items-center justify-between text-green-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zt,{className:"w-4 h-4"}),r.jsx("span",{children:"  "})]}),r.jsx("span",{className:"font-semibold",children:""})]}),r.jsx("div",{className:"h-px bg-gray-200 my-2"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-bold text-lg text-gray-800",children:""}),r.jsxs("span",{className:"font-black text-xl text-sky-600",children:[T.toFixed(2)," ."]})]})]})]}),r.jsx("button",{disabled:d||k==="delivery"&&nf,onClick:V,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-3",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"  ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ns,{className:"w-6 h-6"}),k==="pickup"?"  (  )":"  (  )"]})}),k==="delivery"&&nf,r.jsx(M1,{isOpen:A,onClose:()=>I(!1),onConfirm:O,initialLocation:w})]})})},xD=()=>{var O,V;const{user:t}=He(),e=yn(),n=vn(),[s,i]=b.useState(null),[a,o]=b.useState([]),[l,u]=b.useState(null),[d,h]=b.useState(null),[f,g]=b.useState(null),[w,j]=b.useState(!1),A=async(y,p)=>{j(!0),h(p);try{const N=await Pe(Y(B,"restaurants",y,"private","bankInfo"));if(N.exists()){const E=N.data();g({bankName:E.bankName||"",bankAccountName:E.bankAccountName||"",bankAccountNumber:E.bankAccountNumber||""})}else{const E=await Pe(Y(B,"restaurants",y));if(E.exists()){const R=E.data();g({bankName:R.bankName||"",bankAccountName:R.bankAccountName||"",bankAccountNumber:R.bankAccountNumber||""})}else g(null)}}catch{n.error("   "),g(null)}finally{j(!1)}},I=y=>{navigator.clipboard.writeText(y),n.success("   ! ")};b.useEffect(()=>{if(!t)return;i(null),u(null);const y=be(re(B,"orders"),_e("customerId","==",t.uid),as("createdAt","desc")),p=Bs(y,N=>{o(N.docs.map(E=>({id:E.id,...E.data()}))),i(null)},async N=>{console.error("TrackOrders onSnapshot error:",N),i("   Composite Index  customerId + createdAt.     .");const E=be(re(B,"orders"),_e("customerId","==",t.uid)),D=(await we(E)).docs.map(U=>({id:U.id,...U.data()})),S=be(re(B,"orders"),as("createdAt","desc"),gi(5));let X=[];try{X=(await we(S)).docs.map(M=>{var F,H,L,se;const $=M.data();return{id:M.id,customerId:$.customerId,restaurantId:$.restaurantId,createdAt:((se=(L=(H=(F=$.createdAt)==null?void 0:F.toDate)==null?void 0:H.call(F))==null?void 0:L.toISOString)==null?void 0:se.call(L))??null}})}catch{}u({uid:t.uid,fallbackCount:D.length,sample:X}),o(D)});return()=>p()},[t]);const k=y=>({pending:{text:" ",emoji:"",color:"bg-yellow-500",icon:Kt},accepted:{text:" ",emoji:"",color:"bg-blue-500",icon:at},preparing:{text:" ",emoji:"",color:"bg-orange-500",icon:hc},ready:{text:" ",emoji:"",color:"bg-purple-500",icon:on},out_for_delivery:{text:" ",emoji:"",color:"bg-sky-500",icon:ss},delivered:{text:" ",emoji:"",color:"bg-green-500",icon:at},cancelled:{text:"",emoji:"",color:"bg-red-500",icon:dr}})[y]||{text:y,emoji:"",color:"bg-gray-500",icon:on},v=y=>y.courierId&&y.status==="out_for_delivery",_=y=>{const p=["pending","accepted","preparing","ready"];return!y.courierId&&y.restaurantId&&p.includes(y.status)},T=y=>["pending","accepted"].includes(y.status);return r.jsxs("div",{className:"space-y-3",children:[r.jsx("h1",{className:"text-xl font-bold",children:""}),d&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>h(null),children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",onClick:y=>y.stopPropagation(),children:[r.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-4 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Wd,{className:"w-6 h-6"}),r.jsx("h2",{className:"text-lg font-bold",children:" "})]}),r.jsx("button",{onClick:()=>h(null),className:"p-1 hover:bg-white/20 rounded-lg",children:r.jsx(jr,{className:"w-5 h-5"})})]})}),r.jsx("div",{className:"p-5",children:w?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-10 h-10 border-3 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:" ..."})]}):f&&f.bankName&&f.bankAccountNumber?r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 bg-amber-50 p-3 rounded-xl",children:"          "}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ps,{className:"w-5 h-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:""}),r.jsx("p",{className:"font-bold text-gray-800",children:f.bankName})]})]}),r.jsxs("div",{className:"border-t pt-3",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"  "}),r.jsx("p",{className:"font-bold text-gray-800",children:f.bankAccountName})]}),r.jsxs("div",{className:"border-t pt-3",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"  / "}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-mono font-bold text-gray-800 flex-1 text-left",dir:"ltr",children:f.bankAccountNumber}),r.jsx("button",{onClick:()=>I(f.bankAccountNumber||""),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition",children:r.jsx(R1,{className:"w-4 h-4"})})]})]})]}),a.find(y=>y.id===d)&&r.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-sm text-green-600 mb-1",children:"  "}),r.jsxs("p",{className:"text-3xl font-black text-green-700",children:[(V=(O=a.find(y=>y.id===d))==null?void 0:O.total)==null?void 0:V.toFixed(2)," ."]})]}),r.jsx("p",{className:"text-xs text-gray-500 text-center",children:"       "})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ps,{className:"w-8 h-8 text-gray-400"})}),r.jsx("p",{className:"text-gray-600 font-semibold mb-2",children:"     "}),r.jsx("p",{className:"text-sm text-gray-500",children:"       "})]})})]})}),s&&r.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[s,l&&r.jsxs("div",{className:"mt-1",children:[r.jsxs("div",{children:["UID: ",r.jsx("b",{children:l.uid})]}),r.jsxs("div",{children:["  : ",r.jsx("b",{children:l.fallbackCount})]}),Array.isArray(l.sample)&&l.sample.length>0&&r.jsxs("div",{className:"mt-1",children:[r.jsx("div",{className:"font-semibold",children:" ( 5):"}),l.sample.map(y=>r.jsxs("div",{className:"truncate",children:["#",y.id,"  customerId: ",String(y.customerId),"  restaurantId: ",String(y.restaurantId),"  createdAt: ",y.createdAt||""]},y.id))]})]})]}),a.map(y=>{var p,N,E,R,D,S,X;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:`${k(y.status).color} px-4 py-3 flex items-center justify-between`,children:[r.jsxs("div",{className:"flex items-center gap-2 text-white",children:[r.jsx("span",{className:"text-xl",children:k(y.status).emoji}),r.jsx("span",{className:"font-bold",children:k(y.status).text})]}),r.jsxs("div",{className:"text-white/80 text-sm font-medium",children:["#",y.id.slice(-6)]})]}),r.jsxs("div",{className:"p-4",children:[y.restaurantName&&r.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold mb-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:String(y.restaurantName)})]}),r.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 rounded-xl p-3 mb-3",children:(p=y.items)==null?void 0:p.map(U=>`${U.name}${U.qty}`).join("  ")}),r.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:y.deliveryType==="pickup"?r.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-medium bg-green-50 rounded-xl p-3",children:[r.jsx(Gt,{className:"w-4 h-4"}),r.jsx("span",{children:"  "})]}):r.jsxs("div",{className:"space-y-1 bg-gray-50 rounded-xl p-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" :"}),r.jsxs("span",{children:[((E=(N=y.subtotal)==null?void 0:N.toFixed)==null?void 0:E.call(N,2))||""," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" :"}),y.deliveryFee!==void 0&&y.deliveryFee>0?r.jsxs("span",{className:"font-medium",children:[(D=(R=y.deliveryFee)==null?void 0:R.toFixed)==null?void 0:D.call(R,2)," ."]}):r.jsx("span",{className:"text-amber-600",children:"  "})]})]})}),r.jsxs("div",{className:"mt-3 pt-3 border-t space-y-3",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"font-bold text-lg text-primary",children:[": ",(X=(S=y.total)==null?void 0:S.toFixed)==null?void 0:X.call(S,2)," ."]})}),T(y)&&y.restaurantId&&r.jsxs("button",{onClick:()=>A(y.restaurantId,y.id),className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-500 to-green-600 
                             text-white rounded-xl font-bold shadow-lg hover:shadow-xl 
                             hover:scale-[1.02] transition-all duration-200`,children:[r.jsx(Wd,{className:"w-5 h-5"}),r.jsx("span",{children:"  "})]}),r.jsxs("div",{className:"flex gap-2",children:[v(y)&&r.jsxs("button",{onClick:()=>e(`/chat?orderId=${y.id}`),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-primary to-accent 
                               text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                               hover:scale-105 transition-all duration-200 animate-pulse`,children:[r.jsx(Mc,{className:"w-5 h-5"}),r.jsx("span",{children:"   "})]}),_(y)&&r.jsxs("button",{onClick:()=>e(`/chat?orderId=${y.id}`),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 
                               text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                               hover:scale-105 transition-all duration-200`,children:[r.jsx(zt,{className:"w-5 h-5"}),r.jsx("span",{children:"   "})]})]})]})]})]},y.id)}),a.length===0&&!s&&r.jsx("div",{className:"text-gray-600",children:"    ."})]})},yD=()=>{const{user:t,role:e}=He(),n=ls(),s=vn(),[i,a]=b.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[o,l]=b.useState([]),[u,d]=b.useState(0),[h,f]=b.useState(!1),[g,w]=b.useState(null),[j,A]=b.useState(""),[I,k]=b.useState(!0),[v,_]=b.useState(!1);b.useEffect(()=>{if(!t)return;(async()=>{const R=await Pe(Y(B,"users",t.uid));if(R.exists()){const D=R.data();a({name:D.name||"",phone:D.phone||t.phoneNumber||"",city:D.city||"",address:D.address||"",restaurantName:D.restaurantName||""}),D.savedLocations&&Array.isArray(D.savedLocations)?(l(D.savedLocations),d(D.defaultLocationIndex||0)):D.savedLocation&&(l([{...D.savedLocation,label:""}]),d(0))}k(!1)})()},[t]);const T=async E=>{if(E.preventDefault(),!!t){_(!0);try{const R=o[u]||null;await ge(Y(B,"users",t.uid),{name:i.name,phone:i.phone,city:i.city,address:i.address,savedLocation:R,savedLocations:o,defaultLocationIndex:u,...e==="owner"&&{restaurantName:i.restaurantName}}),n.success("   ! ")}catch{n.error("   ")}finally{_(!1)}}},O=(E,R)=>{const D={lat:E.lat,lng:E.lng,address:R,label:j||` ${o.length+1}`};l([...o,D]),A(""),f(!1),s.success("  !    ")},V=(E,R)=>{if(g===null)return;const D=[...o];D[g]={...D[g],lat:E.lat,lng:E.lng,address:R},l(D),w(null),f(!1),s.success("  !    ")},y=async E=>{if(!await n.confirm("    "))return;const D=o.filter((S,X)=>X!==E);l(D),u>=D.length?d(Math.max(0,D.length-1)):u>E&&d(u-1),s.info("  ")},p=E=>{d(E),s.success("   ")};if(I)return r.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[r.jsx(rn,{className:"w-6 h-6 animate-spin ml-2"}),"  ..."]});const N=()=>e==="owner"?"  ":e==="courier"?"  ":e==="admin"?"  ":" ";return r.jsxs("div",{className:"max-w-md mx-auto py-8 px-4",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center",children:r.jsx(Xn,{className:"w-6 h-6 text-sky-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-800",children:N()}),r.jsx("p",{className:"text-sm text-gray-500",children:(t==null?void 0:t.email)||(t==null?void 0:t.phoneNumber)})]})]}),r.jsxs("form",{onSubmit:T,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(Xn,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:i.name,onChange:E=>a({...i,name:E.target.value})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(Wh,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:i.phone,onChange:E=>a({...i,phone:E.target.value}),dir:"ltr"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(Ps,{className:"w-4 h-4 inline ml-1"}),""]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:": ",value:i.city,onChange:E=>a({...i,city:E.target.value})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(Gt,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"     ...",value:i.address,onChange:E=>a({...i,address:E.target.value})})]}),(e==="customer"||e==="admin")&&r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:[r.jsx(Ki,{className:"w-4 h-4"}),"  "]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[o.length,"/5"]})]}),o.length>0&&r.jsx("div",{className:"space-y-3 mb-4",children:o.map((E,R)=>r.jsxs("div",{className:`rounded-xl p-3 border-2 transition ${R===u?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${R===u?"bg-green-500":"bg-gray-400"}`,children:r.jsx(Gt,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("p",{className:"font-bold text-gray-800",children:E.label||` ${R+1}`}),R===u&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-500 text-white text-xs font-bold rounded-full",children:[r.jsx(fo,{className:"w-3 h-3"})," "]})]}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:E.address})]})]}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[R!==u&&r.jsxs("button",{type:"button",onClick:()=>p(R),className:"flex-1 py-2 px-3 rounded-lg border border-green-200 text-green-600 text-xs font-medium hover:bg-green-50 transition flex items-center justify-center gap-1",children:[r.jsx(ns,{className:"w-3 h-3"}),"  "]}),r.jsx("button",{type:"button",onClick:()=>{w(R),f(!0)},className:"flex-1 py-2 px-3 rounded-lg border border-sky-200 text-sky-600 text-xs font-medium hover:bg-sky-50 transition",children:""}),r.jsx("button",{type:"button",onClick:()=>y(R),className:"py-2 px-3 rounded-lg border border-red-200 text-red-500 hover:bg-red-50 transition",children:r.jsx(In,{className:"w-4 h-4"})})]})]},R))}),o.length<5&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",value:j,onChange:E=>A(E.target.value),placeholder:"  (:  ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 text-sm focus:border-sky-400 focus:outline-none"}),r.jsxs("button",{type:"button",onClick:()=>{w(null),f(!0)},className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-100 to-sky-50 border-2 border-dashed border-sky-300 text-sky-600 font-semibold hover:border-sky-400 transition flex items-center justify-center gap-3",children:[r.jsx(Vc,{className:"w-5 h-5"}),r.jsx("span",{children:"  "})]})]}),o.length===0&&r.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"     "})]}),e==="owner"&&r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[r.jsx(Qd,{className:"w-4 h-4 inline ml-1"})," "]}),r.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:i.restaurantName,onChange:E=>a({...i,restaurantName:E.target.value})})]}),r.jsx("button",{type:"submit",disabled:v,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:v?r.jsxs(r.Fragment,{children:[r.jsx(rn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(D1,{className:"w-5 h-5"})," "]})})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[r.jsx("p",{children:"      "}),(e==="customer"||e==="admin")&&r.jsx("p",{className:"mt-1",children:"    5  "})]})]}),r.jsx(M1,{isOpen:h,onClose:()=>{f(!1),w(null)},onConfirm:(E,R)=>{g!==null?V(E,R):O(E,R)},initialLocation:g!==null&&o[g]?{lat:o[g].lat,lng:o[g].lng}:null})]})},vD=()=>{const{user:t}=He(),e=vn(),[n,s]=b.useState(!0),[i,a]=b.useState(!1),[o,l]=b.useState(null),[u,d]=b.useState("overview"),[h,f]=b.useState({todayOrders:0,todayRevenue:0,weekOrders:0,weekRevenue:0,monthOrders:0,monthRevenue:0,totalOrders:0,totalRevenue:0,pendingOrders:0,preparingOrders:0,deliveredOrders:0,cancelledOrders:0,menuItems:0,availableItems:0,averageRating:0,deliveryRate:0,activePromotions:0,totalViews:0,uniqueCustomers:0,profileViews:0,menuViews:0,itemViews:0,shareClicks:0,whatsappShares:0,registeredViaLink:0,todayViews:0,followersCount:0}),[g,w]=b.useState(!1),[j,A]=b.useState(null),I=U=>{const M=`${window.location.origin}/menu?restaurant=${t==null?void 0:t.uid}`;return U?`${M}&ref=${U}`:M},k=async U=>{if(t!=null&&t.uid)try{const M=Y(B,"restaurantStats",t.uid),$={totalShareClicks:fn(1),updatedAt:te()};U==="whatsapp"&&($.whatsappShareCount=fn(1)),await ge(M,$).catch(async()=>{await Bt(M,{totalProfileViews:0,totalMenuViews:0,totalItemViews:0,totalShareClicks:1,whatsappShareCount:U==="whatsapp"?1:0,registeredCustomers:0,appDownloads:0,dailyViews:{},updatedAt:te()})})}catch(M){console.warn("   :",M)}},v=async()=>{const U=I("copy");await navigator.clipboard.writeText(U),w(!0),setTimeout(()=>w(!1),2e3),e.success("  ! "),k("copy")},_=()=>{const U=I("whatsapp"),M=encodeURIComponent(`    ${(o==null?void 0:o.name)||""}   !

${U}`);window.open(`https://wa.me/?text=${M}`,"_blank"),e.success("  ... "),k("whatsapp")},T=async()=>{const U=I("social");if(navigator.share)try{await navigator.share({title:(o==null?void 0:o.name)||"",text:`  ${o==null?void 0:o.name}   `,url:U}),k("social")}catch{v()}else v()},[O,V]=b.useState([]),[y,p]=b.useState([]),N=async()=>{var U,M,$;if(t!=null&&t.uid)try{const F=await Pe(Y(B,"restaurants",t.uid));F.exists()&&l(F.data());const H=be(re(B,"menuItems"),_e("ownerId","==",t.uid)),se=(await we(H)).docs.map(le=>({id:le.id,...le.data()})),ee=be(re(B,"orders"),_e("ownerId","==",t.uid),as("createdAt","desc")),de=(await we(ee)).docs.map(le=>({id:le.id,...le.data()}));let Ce=0,Ve=0;try{const le=be(re(B,"promotions"),_e("ownerId","==",t.uid));(await we(le)).docs.forEach(We=>{const Ue=We.data();Ue.isActive&&Ce++,Ve+=Ue.viewsCount||0})}catch{}const Xe=new Date,Fe=new Date(Xe.getFullYear(),Xe.getMonth(),Xe.getDate()),Vt=new Date(Fe.getTime()-7*24*60*60*1e3),Ye=new Date(Fe.getTime()-30*24*60*60*1e3),kt=de.filter(le=>{var We,Ue;return(((Ue=(We=le.createdAt)==null?void 0:We.toDate)==null?void 0:Ue.call(We))||new Date(0))>=Fe&&le.status!=="cancelled"}),un=de.filter(le=>{var We,Ue;return(((Ue=(We=le.createdAt)==null?void 0:We.toDate)==null?void 0:Ue.call(We))||new Date(0))>=Vt&&le.status!=="cancelled"}),Hs=de.filter(le=>{var We,Ue;return(((Ue=(We=le.createdAt)==null?void 0:We.toDate)==null?void 0:Ue.call(We))||new Date(0))>=Ye&&le.status!=="cancelled"}),ks=de.filter(le=>le.status==="delivered"),Ir=de.filter(le=>le.status==="pending"),ki=de.filter(le=>["accepted","preparing"].includes(le.status)),ma=de.filter(le=>le.status==="cancelled"),Ei=new Set(de.map(le=>le.customerId).filter(Boolean)),Ws={};ks.forEach(le=>{var Ne;(Ne=le.items)==null||Ne.forEach(We=>{const Ue=We.name||" ";Ws[Ue]=(Ws[Ue]||0)+(We.qty||1)})});const Bn=Object.entries(Ws).sort((le,Ne)=>Ne[1]-le[1]).slice(0,5).map(([le,Ne])=>({name:le,count:Ne}));p(Bn),V(de.slice(0,5));let Tr=0,Sr=0,Ks=0,zn=0,Cr=0,rt=0,pt=0,cs=0;try{const le=await Pe(Y(B,"restaurantStats",t.uid));if(le.exists()){const Ne=le.data();A(Ne),Tr=Ne.totalProfileViews||0,Sr=Ne.totalMenuViews||0,Ks=Ne.totalItemViews||0,zn=Ne.totalShareClicks||0,Cr=Ne.whatsappShareCount||0,rt=Ne.registeredCustomers||0,cs=Ne.followersCount||0;const We=new Date().toISOString().split("T")[0];pt=((U=Ne.dailyViews)==null?void 0:U[We])||0}}catch(le){console.warn("    :",le)}try{const le=be(re(B,"customerRegistrations"),_e("restaurantId","==",t.uid));rt=(await we(le)).size}catch{}try{const le=be(re(B,"storeFollowers"),_e("restaurantId","==",t.uid));cs=(await we(le)).size}catch{}f({todayOrders:kt.length,todayRevenue:kt.reduce((le,Ne)=>le+(Ne.subtotal||0),0),weekOrders:un.length,weekRevenue:un.reduce((le,Ne)=>le+(Ne.subtotal||0),0),monthOrders:Hs.length,monthRevenue:Hs.reduce((le,Ne)=>le+(Ne.subtotal||0),0),totalOrders:de.filter(le=>le.status!=="cancelled").length,totalRevenue:ks.reduce((le,Ne)=>le+(Ne.subtotal||0),0),pendingOrders:Ir.length,preparingOrders:ki.length,deliveredOrders:ks.length,cancelledOrders:ma.length,menuItems:se.length,availableItems:se.filter(le=>le.available).length,averageRating:((M=F.data())==null?void 0:M.rating)||0,deliveryRate:(($=F.data())==null?void 0:$.deliveryRate)||0,activePromotions:Ce,totalViews:Ve,uniqueCustomers:Ei.size,profileViews:Tr,menuViews:Sr,itemViews:Ks,shareClicks:zn,whatsappShares:Cr,registeredViaLink:rt,todayViews:pt,followersCount:cs})}catch(F){console.error("   :",F)}finally{s(!1),a(!1)}};b.useEffect(()=>{N()},[t==null?void 0:t.uid]);const E=()=>{a(!0),N()},R=U=>({pending:{label:" ",color:"bg-yellow-100 text-yellow-700",icon:Kt},accepted:{label:"",color:"bg-blue-100 text-blue-700",icon:at},preparing:{label:" ",color:"bg-orange-100 text-orange-700",icon:hc},ready:{label:" ",color:"bg-purple-100 text-purple-700",icon:on},out_for_delivery:{label:" ",color:"bg-indigo-100 text-indigo-700",icon:ss},delivered:{label:" ",color:"bg-green-100 text-green-700",icon:at},cancelled:{label:"",color:"bg-red-100 text-red-700",icon:ar}})[U]||{label:U,color:"bg-gray-100 text-gray-700",icon:Kt},D=U=>{switch(U){case"gold":return{label:"",color:"from-yellow-400 to-amber-500",icon:""};case"silver":return{label:"",color:"from-gray-300 to-gray-400",icon:""};default:return{label:"",color:"from-orange-500 to-orange-600",icon:""}}};if(n)return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:" ..."})]})});const S=(o==null?void 0:o.packageType)==="premium",X=D(o==null?void 0:o.sellerTier);return S?r.jsxs("div",{className:"space-y-6 pb-24 -mx-4 -mt-4",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"h-40 sm:h-48 bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0",children:[r.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-amber-500/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-500/20 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),r.jsx("button",{onClick:E,disabled:i,className:"absolute top-4 left-4 p-2 bg-white/10 hover:bg-white/20 rounded-xl transition z-10",children:r.jsx(rn,{className:`w-5 h-5 text-white ${i?"animate-spin":""}`})}),r.jsx("div",{className:"absolute top-4 right-4 z-10",children:r.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 px-4 py-1.5 rounded-full flex items-center gap-2 shadow-lg",children:[r.jsx(Dt,{className:"w-4 h-4 text-white"}),r.jsx("span",{className:"text-white font-bold text-sm",children:" "})]})})]}),r.jsx("div",{className:"relative px-4 -mt-16",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-5",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsxs("div",{className:"relative -mt-12",children:[r.jsx("div",{className:"w-24 h-24 rounded-2xl bg-white shadow-xl overflow-hidden border-4 border-white",children:o!=null&&o.logoUrl?r.jsx("img",{src:o.logoUrl,alt:o.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center",children:r.jsx(zt,{className:"w-10 h-10 text-amber-500"})})}),(o==null?void 0:o.isVerified)&&r.jsx("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center border-2 border-white",children:r.jsx(at,{className:"w-4 h-4 text-white"})})]}),r.jsxs("div",{className:"flex-1 pt-2",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:(o==null?void 0:o.name)||""}),r.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold text-white bg-gradient-to-r ${X.color}`,children:[X.icon," ",X.label]})]}),(o==null?void 0:o.city)&&r.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-1 mt-1",children:[r.jsx(Gt,{className:"w-3 h-3"}),o.city]}),r.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(fo,{className:"w-4 h-4 text-amber-500 fill-amber-500"}),r.jsx("span",{className:"font-bold",children:h.averageRating.toFixed(1)})]}),r.jsx("div",{className:"text-gray-300",children:"|"}),r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-bold text-gray-900",children:h.totalOrders})," "]}),r.jsx("div",{className:"text-gray-300",children:"|"}),r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-bold text-gray-900",children:h.menuItems})," "]})]})]})]}),r.jsxs("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 -mx-2 px-2",children:[r.jsxs(ue,{to:`/menu?restaurant=${t==null?void 0:t.uid}`,className:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[r.jsx(Al,{className:"w-4 h-4"})," "]}),r.jsxs(ue,{to:"/owner/edit",className:"flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[r.jsx(fc,{className:"w-4 h-4"}),""]}),r.jsxs(ue,{to:"/owner/promotion",className:"flex items-center gap-2 bg-purple-100 hover:bg-purple-200 text-purple-700 px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap",children:[r.jsx(hr,{className:"w-4 h-4"})," "]})]})]})})]}),r.jsxs("div",{className:"px-4 space-y-3",children:[h.pendingOrders>0&&r.jsx(ue,{to:"/owner/orders",className:"block bg-gradient-to-r from-red-500 to-orange-500 rounded-2xl p-4 text-white shadow-lg animate-pulse",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(uc,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h3",{className:"font-bold text-lg",children:[" ",h.pendingOrders,"  !"]}),r.jsx("p",{className:"text-white/80 text-sm",children:"  "})]}),r.jsx(ur,{className:"w-6 h-6"})]})}),!(o!=null&&o.bankName)&&r.jsx(ue,{to:"/owner/edit#bank",className:"block bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center",children:r.jsx(Ps,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-amber-700",children:"  "}),r.jsx("p",{className:"text-sm text-amber-600",children:"   "})]})]})})]}),r.jsx("div",{className:"px-4",children:r.jsxs("div",{className:"bg-gradient-to-br from-purple-600 via-pink-600 to-rose-500 rounded-2xl p-5 text-white shadow-xl relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 opacity-20",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white rounded-full -translate-y-1/2 translate-x-1/2"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white rounded-full translate-y-1/2 -translate-x-1/2"})]}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Rp,{className:"w-6 h-6"}),r.jsx("h2",{className:"text-lg font-bold",children:"  !"})]}),r.jsx("p",{className:"text-white/80 text-sm mb-4",children:"           !"}),r.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 mb-4",children:[r.jsx("p",{className:"text-white/60 text-xs mb-1",children:"  :"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex-1 bg-white/10 rounded-lg p-2 text-sm font-mono truncate",dir:"ltr",children:[window.location.origin,"/menu?restaurant=",t==null?void 0:t.uid]}),r.jsx("button",{onClick:v,className:`p-2 rounded-lg transition ${g?"bg-green-500":"bg-white/20 hover:bg-white/30"}`,children:g?r.jsx(at,{className:"w-5 h-5"}):r.jsx(R1,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:_,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl transition",children:[r.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),""]}),r.jsxs("button",{onClick:T,className:"flex-1 flex items-center justify-center gap-2 bg-white text-purple-600 font-bold py-3 rounded-xl hover:bg-purple-50 transition",children:[r.jsx(Rp,{className:"w-5 h-5"}),""]}),r.jsxs(ue,{to:`/menu?restaurant=${t==null?void 0:t.uid}`,className:"flex items-center justify-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-3 rounded-xl transition",children:[r.jsx(Al,{className:"w-5 h-5"}),""]})]}),r.jsxs("div",{className:"grid grid-cols-5 gap-2 mt-4 pt-4 border-t border-white/20",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-bold",children:h.followersCount}),r.jsx("p",{className:"text-white/70 text-[10px]",children:" "})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-bold",children:h.todayViews}),r.jsx("p",{className:"text-white/70 text-[10px]",children:" "})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-bold",children:h.profileViews}),r.jsx("p",{className:"text-white/70 text-[10px]",children:" "})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-bold",children:h.whatsappShares}),r.jsx("p",{className:"text-white/70 text-[10px]",children:" "})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-bold",children:h.registeredViaLink}),r.jsx("p",{className:"text-white/70 text-[10px]",children:" "})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 pt-2 border-t border-white/20",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold",children:h.uniqueCustomers}),r.jsx("p",{className:"text-white/70 text-xs",children:""})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold",children:h.totalViews}),r.jsx("p",{className:"text-white/70 text-xs",children:""})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold",children:h.totalOrders}),r.jsx("p",{className:"text-white/70 text-xs",children:""})]})]})]})]})}),r.jsx("div",{className:"px-4",children:r.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-emerald-700 rounded-2xl p-5 text-white shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fx,{className:"w-6 h-6"}),r.jsx("h2",{className:"text-lg font-bold",children:" "})]}),r.jsx(ue,{to:"/owner/orders",className:"text-white/80 text-sm hover:text-white",children:"  "})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[r.jsx("p",{className:"text-white/70 text-sm mb-1",children:""}),r.jsxs("p",{className:"text-2xl font-bold",children:[h.todayRevenue.toFixed(0)," ",r.jsx("span",{className:"text-sm",children:"."})]}),r.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[h.todayOrders," "]})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[r.jsx("p",{className:"text-white/70 text-sm mb-1",children:""}),r.jsxs("p",{className:"text-2xl font-bold",children:[h.weekRevenue.toFixed(0)," ",r.jsx("span",{className:"text-sm",children:"."})]}),r.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[h.weekOrders," "]})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-4",children:[r.jsx("p",{className:"text-white/70 text-sm mb-1",children:""}),r.jsxs("p",{className:"text-2xl font-bold",children:[h.monthRevenue.toFixed(0)," ",r.jsx("span",{className:"text-sm",children:"."})]}),r.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[h.monthOrders," "]})]}),r.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl p-4 ring-2 ring-white/30",children:[r.jsx("p",{className:"text-white/70 text-sm mb-1",children:""}),r.jsxs("p",{className:"text-2xl font-bold",children:[h.totalRevenue.toFixed(0)," ",r.jsx("span",{className:"text-sm",children:"."})]}),r.jsxs("p",{className:"text-white/60 text-xs mt-1",children:[h.deliveredOrders," "]})]})]})]})}),r.jsxs("div",{className:"px-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"  "}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs(ue,{to:"/owner/orders",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mb-3",children:r.jsx(mc,{className:"w-6 h-6 text-white"})}),r.jsx("h3",{className:"font-bold text-gray-900",children:""}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsxs("span",{className:"bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[h.pendingOrders," "]}),r.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[h.preparingOrders," "]})]})]}),r.jsxs(ue,{to:"/owner/menu",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center mb-3",children:r.jsx(po,{className:"w-6 h-6 text-white"})}),r.jsx("h3",{className:"font-bold text-gray-900",children:""}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[h.availableItems," "]}),r.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[h.menuItems," "]})]})]}),r.jsxs(ue,{to:"/owner/promotion",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center mb-3",children:r.jsx(hr,{className:"w-6 h-6 text-white"})}),r.jsx("h3",{className:"font-bold text-gray-900",children:""}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[h.activePromotions," "]}),r.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full text-xs font-bold flex items-center gap-1",children:[r.jsx(Al,{className:"w-3 h-3"}),h.totalViews]})]})]}),r.jsxs(ue,{to:"/owner/edit",className:"bg-white rounded-2xl shadow-lg p-4 hover:shadow-xl transition border border-gray-100",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-600 to-gray-700 rounded-xl flex items-center justify-center mb-3",children:r.jsx(Ap,{className:"w-6 h-6 text-white"})}),r.jsx("h3",{className:"font-bold text-gray-900",children:""}),r.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"  "})]})]})]}),r.jsxs("div",{className:"px-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"  "}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 border border-gray-100",children:r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsxs(ue,{to:"/owner/orders?status=pending",className:"text-center p-3 bg-yellow-50 rounded-xl hover:bg-yellow-100 transition",children:[r.jsx(Kt,{className:"w-6 h-6 text-yellow-500 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-bold text-yellow-700",children:h.pendingOrders}),r.jsx("p",{className:"text-xs text-yellow-600",children:""})]}),r.jsxs(ue,{to:"/owner/orders?status=preparing",className:"text-center p-3 bg-orange-50 rounded-xl hover:bg-orange-100 transition",children:[r.jsx(hc,{className:"w-6 h-6 text-orange-500 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-bold text-orange-700",children:h.preparingOrders}),r.jsx("p",{className:"text-xs text-orange-600",children:""})]}),r.jsxs(ue,{to:"/owner/orders?status=delivered",className:"text-center p-3 bg-green-50 rounded-xl hover:bg-green-100 transition",children:[r.jsx(at,{className:"w-6 h-6 text-green-500 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-bold text-green-700",children:h.deliveredOrders}),r.jsx("p",{className:"text-xs text-green-600",children:""})]}),r.jsxs(ue,{to:"/owner/orders?status=cancelled",className:"text-center p-3 bg-red-50 rounded-xl hover:bg-red-100 transition",children:[r.jsx(ar,{className:"w-6 h-6 text-red-500 mx-auto mb-1"}),r.jsx("p",{className:"text-lg font-bold text-red-700",children:h.cancelledOrders}),r.jsx("p",{className:"text-xs text-red-600",children:""})]})]})})]}),y.length>0&&r.jsxs("div",{className:"px-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"  "}),r.jsx(ue,{to:"/owner/menu",className:"text-amber-600 text-sm font-semibold",children:"  "})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:y.map((U,M)=>r.jsxs("div",{className:`flex items-center gap-3 p-4 ${M!==y.length-1?"border-b":""}`,children:[r.jsx("span",{className:"text-2xl w-8",children:M===0?"":M===1?"":M===2?"":`#${M+1}`}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"font-semibold text-gray-900",children:U.name})}),r.jsxs("div",{className:"bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-sm font-bold",children:[U.count," "]})]},M))})]}),O.length>0&&r.jsxs("div",{className:"px-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"  "}),r.jsx(ue,{to:"/owner/orders",className:"text-blue-600 text-sm font-semibold",children:"  "})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:O.map((U,M)=>{var H,L,se,ee;const $=R(U.status),F=$.icon;return r.jsxs(ue,{to:"/owner/orders",className:`flex items-center gap-3 p-4 hover:bg-gray-50 transition ${M!==O.length-1?"border-b":""}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${$.color}`,children:r.jsx(F,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-semibold text-gray-900",children:[((H=U.items)==null?void 0:H.length)||0," "]}),r.jsx("p",{className:"text-xs text-gray-500",children:((se=(L=U.createdAt)==null?void 0:L.toDate)==null?void 0:se.call(L).toLocaleDateString("ar-SA"))||""})]}),r.jsxs("div",{className:"text-left",children:[r.jsxs("p",{className:"font-bold text-green-600",children:[(ee=U.subtotal)==null?void 0:ee.toFixed(0)," ."]}),r.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${$.color}`,children:$.label})]})]},U.id)})})]}),r.jsxs("div",{className:"px-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"  "}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs(ue,{to:"/owner/edit#hiring",className:`flex items-center gap-3 bg-white rounded-2xl shadow p-4 border ${o!=null&&o.isHiring?"border-purple-300 bg-purple-50":"border-gray-100"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o!=null&&o.isHiring?"bg-purple-500":"bg-gray-200"}`,children:r.jsx(dc,{className:`w-5 h-5 ${o!=null&&o.isHiring?"text-white":"text-gray-500"}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:" "}),r.jsx("p",{className:"text-xs text-gray-500",children:o!=null&&o.isHiring?"   ":"    "})]})]}),r.jsxs(ue,{to:"/owner/edit#bank",className:`flex items-center gap-3 bg-white rounded-2xl shadow p-4 border ${o!=null&&o.bankName?"border-green-300 bg-green-50":"border-gray-100"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${o!=null&&o.bankName?"bg-green-500":"bg-gray-200"}`,children:r.jsx(Ps,{className:`w-5 h-5 ${o!=null&&o.bankName?"text-white":"text-gray-500"}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:" "}),r.jsx("p",{className:"text-xs text-gray-500",children:o!=null&&o.bankName?` ${o.bankName}`:"  "})]})]}),r.jsxs(ue,{to:"/owner/packages",className:"flex items-center gap-3 bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl shadow p-4 border border-amber-200",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center",children:r.jsx(Dt,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-amber-700",children:" "}),r.jsx("p",{className:"text-xs text-amber-600",children:"  "})]})]}),r.jsxs(ue,{to:`/menu?restaurant=${t==null?void 0:t.uid}`,className:"flex items-center gap-3 bg-white rounded-2xl shadow p-4 border border-gray-100",children:[r.jsx("div",{className:"w-10 h-10 bg-sky-500 rounded-xl flex items-center justify-center",children:r.jsx(E6,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:" "}),r.jsx("p",{className:"text-xs text-gray-500",children:"    "})]})]})]})]}),(o==null?void 0:o.bankName)&&r.jsx("div",{className:"px-4",children:r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Ps,{className:"w-5 h-5 text-green-600"}),r.jsx("h3",{className:"font-bold text-green-800",children:"   "})]}),r.jsxs("div",{className:"bg-white rounded-xl p-3 space-y-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-semibold",children:":"})," ",o.bankName]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-semibold",children:" :"})," ",o.bankAccountName]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-semibold",children:" :"})," ",o.bankAccountNumber]})]}),r.jsx("p",{className:"text-xs text-green-600 mt-2",children:"      "})]})})]}):r.jsxs("div",{className:"space-y-6 pb-20",children:[r.jsxs("div",{className:"bg-gradient-to-br from-amber-500 via-orange-500 to-red-500 rounded-3xl shadow-2xl p-6 text-white relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 opacity-10",children:r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white rounded-full -translate-y-1/2 translate-x-1/2"})}),r.jsxs("div",{className:"relative z-10 text-center py-6",children:[r.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Dt,{className:"w-10 h-10 text-yellow-300"})}),r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"    "}),r.jsx("p",{className:"text-white/80 mb-4",children:"         !"}),r.jsxs(ue,{to:"/owner/packages",className:"inline-flex items-center gap-2 bg-white text-amber-600 font-bold px-6 py-3 rounded-xl hover:bg-yellow-50 transition shadow-lg",children:[r.jsx(Vn,{className:"w-5 h-5"}),"  "]})]})]}),!(o!=null&&o.bankName)&&r.jsx(ue,{to:"/owner/edit#bank",className:"block bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-200 rounded-2xl p-4 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(Ps,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-red-700",children:"   !"}),r.jsx("p",{className:"text-sm text-red-600",children:"     "})]})]})}),h.pendingOrders>0&&r.jsx(ue,{to:"/owner/orders",className:"block bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-2xl p-4 hover:shadow-lg transition animate-pulse",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(Nr,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h3",{className:"font-bold text-yellow-700",children:["  ",h.pendingOrders,"   !"]}),r.jsx("p",{className:"text-sm text-yellow-600",children:"   "})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs(ue,{to:"/owner/packages",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-5 ring-2 ring-amber-300 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 py-1.5 text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-white text-sm font-bold",children:[r.jsx(Vn,{className:"w-4 h-4"}),r.jsx("span",{children:" "}),r.jsx(Vn,{className:"w-4 h-4"})]})}),r.jsx("div",{className:"h-6"}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(Dt,{className:"w-8 h-8 text-amber-500"}),r.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:"  "})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"      !"})]}),r.jsxs(ue,{to:"/owner/menu",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-yellow-50 to-white p-5",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(po,{className:"w-8 h-8 text-yellow-500"}),r.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:" "})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"   ."})]}),r.jsxs(ue,{to:"/owner/orders",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-green-50 to-white p-5",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(mc,{className:"w-8 h-8 text-green-500"}),r.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:" "})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"   ."}),h.pendingOrders>0&&r.jsxs("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold mt-2 inline-block",children:[h.pendingOrders," !"]})]}),r.jsxs(ue,{to:"/owner/edit",className:"rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br from-blue-50 to-white p-5",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(Ap,{className:"w-8 h-8 text-blue-500"}),r.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:""})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"  ."})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-lg p-6 text-white",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Dt,{className:"w-6 h-6 text-amber-400"}),r.jsx("h3",{className:"text-lg font-bold",children:"   "})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[r.jsx(nd,{className:"w-4 h-4 text-green-400"}),r.jsx("span",{children:"  "})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[r.jsx(fo,{className:"w-4 h-4 text-yellow-400"}),r.jsx("span",{children:"  "})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[r.jsx(hr,{className:"w-4 h-4 text-purple-400"}),r.jsx("span",{children:"  "})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[r.jsx(Ao,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{children:"  "})]})]}),r.jsx(ue,{to:"/owner/packages",className:"block w-full text-center bg-gradient-to-r from-amber-500 to-orange-500 text-white font-bold py-3 rounded-xl hover:from-amber-600 hover:to-orange-600 transition",children:"  "})]})]})},wD=({kind:t,message:e,onClose:n})=>{const s=t==="success"?"bg-green-600":t==="error"?"bg-rose-600":t==="warning"?"bg-amber-500":"bg-slate-800";return b.useEffect(()=>{const i=setTimeout(n,2500);return()=>clearTimeout(i)},[n]),r.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${s}`,children:e})},Pu=()=>({name:"",desc:"",price:0,available:!0,file:null});async function cw(t,e=900,n=.8){try{const s=await createImageBitmap(t),i=Math.min(1,e/s.width),a=Math.round(s.width*i),o=Math.round(s.height*i),l=document.createElement("canvas");l.width=a,l.height=o,l.getContext("2d").drawImage(s,0,0,a,o);const d=t.type.includes("png")?"image/png":"image/jpeg";return await new Promise(f=>l.toBlob(g=>f(g),d,n))}catch{return t}}const bD=()=>{const{user:t}=He(),e=ls(),[n,s]=b.useState([]),[i,a]=b.useState(!0),[o,l]=b.useState(Pu()),[u,d]=b.useState(!1),[h,f]=b.useState(null),[g,w]=b.useState(Pu()),[j,A]=b.useState(!1),I=b.useRef(null),[k,v]=b.useState(null),_=(S,X)=>v({kind:S,message:X}),T=Hh(Rn),O=b.useRef(null),V=async()=>{if(!t)return;a(!0);const S=be(re(B,"menuItems"),_e("ownerId","==",t.uid)),X=await we(S);s(X.docs.map(U=>({id:U.id,...U.data()}))),a(!1)};b.useEffect(()=>{V()},[t]);const y=async S=>{if(S.preventDefault(),!t){_("warning","    ");return}const X=Number(o.price||0);if(!o.name.trim()){_("warning","   ");return}if(!Number.isFinite(X)||X<=0){_("warning","   ");return}d(!0);const U="temp_"+Date.now(),M=o.file?URL.createObjectURL(o.file):void 0,$={_tempId:U,_optimistic:!0,_progress:o.file?1:100,name:o.name,desc:o.desc||"",price:X,imageUrl:M,available:o.available??!0,ownerId:t.uid};s(F=>[$,...F]);try{let F;if(o.file){const se=await cw(o.file),ee=o.file.name.replace(/\s+/g,"_").slice(-60),me=`menuImages/${t.uid}_${Date.now()}_${ee}`,de=_r(T,me),Ce=qd(de,se,{contentType:o.file.type||"image/jpeg"});await new Promise((Ve,Xe)=>{Ce.on("state_changed",Fe=>{const Vt=Math.round(Fe.bytesTransferred/Fe.totalBytes*100);s(Ye=>Ye.map(kt=>kt._tempId===U?{...kt,_progress:Vt}:kt))},Xe,async()=>{const Fe=await br(Ce.snapshot.ref);F=`${Fe}${Fe.includes("?")?"&":"?"}v=${Date.now()}`,Ve()})})}const H={name:$.name,desc:$.desc,price:X,imageUrl:F||"",available:$.available,ownerId:t.uid,...$.categoryId?{categoryId:$.categoryId}:{}},L=await tt(re(B,"menuItems"),H);s(se=>se.map(ee=>ee._tempId===U?{...ee,id:L.id,imageUrl:F||ee.imageUrl,_optimistic:!1,_progress:100}:ee)),_("success","    ")}catch(F){s(H=>H.filter(L=>L._tempId!==U)),_("error",`   : ${(F==null?void 0:F.message)||F}`)}finally{d(!1),l(Pu()),O.current&&(O.current.value=""),M&&URL.revokeObjectURL(M)}},p=async(S,X)=>{if(S){s(U=>U.map(M=>M.id===S?{...M,available:!X}:M));try{await ge(Y(B,"menuItems",S),{available:!X}),_("success","  ")}catch{s(U=>U.map(M=>M.id===S?{...M,available:!!X}:M)),_("error","  .  .")}}},N=async S=>{if(!S||!await e.confirm("       ",{dangerous:!0,title:" "}))return;const U=n;s(M=>M.filter($=>$.id!==S));try{await Jn(Y(B,"menuItems",S)),_("success"," ")}catch{s(U),_("error","  .  .")}},E=S=>{f(S.id||null),w({...S,file:null})},R=()=>{f(null),w(Pu()),I.current&&(I.current.value="")},D=async S=>{if(S.preventDefault(),!t||!h)return;const X=Number(g.price||0);if(!g.name.trim()){_("warning","   ");return}if(!Number.isFinite(X)||X<=0){_("warning","   ");return}A(!0);const U=n;s(M=>M.map($=>$.id===h?{...$,name:g.name,desc:g.desc,price:X,available:g.available}:$));try{let M=g.imageUrl;if(g.file){const $=await cw(g.file),F=g.file.name.replace(/\s+/g,"_").slice(-60),H=`menuImages/${t.uid}_${Date.now()}_${F}`,L=_r(T,H),se=qd(L,$,{contentType:g.file.type||"image/jpeg"});await new Promise((ee,me)=>{se.on("state_changed",null,me,async()=>{const de=await br(se.snapshot.ref);M=`${de}${de.includes("?")?"&":"?"}v=${Date.now()}`,ee()})})}await ge(Y(B,"menuItems",h),{name:g.name,desc:g.desc||"",price:X,available:g.available,...M?{imageUrl:M}:{}}),M&&s($=>$.map(F=>F.id===h?{...F,imageUrl:M}:F)),_("success","    "),R()}catch(M){s(U),_("error",`  : ${(M==null?void 0:M.message)||M}`)}finally{A(!1)}};return i?r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[r.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),r.jsx("div",{className:"space-y-3",children:[1,2,3].map(S=>r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},S))})]}):r.jsxs(r.Fragment,{children:[k&&r.jsx(wD,{kind:k.kind,message:k.message,onClose:()=>v(null)}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("form",{onSubmit:y,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[r.jsx("h2",{className:"text-lg font-bold",children:" "}),r.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:o.name,onChange:S=>l({...o,name:S.target.value})}),r.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:o.desc,onChange:S=>l({...o,desc:S.target.value})}),r.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(o.price)?o.price:0,onChange:S=>l({...o,price:Number(S.target.value)})}),r.jsx("input",{ref:O,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:S=>{var X;return l({...o,file:((X=S.target.files)==null?void 0:X[0])||null})}}),r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:o.available,onChange:S=>l({...o,available:S.target.checked})}),""]}),r.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:u,children:u?" ":""})]}),r.jsxs("div",{className:"space-y-3",children:[n.map(S=>{var X,U;return r.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:h===S.id?r.jsxs("form",{onSubmit:D,className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("img",{src:g.file?URL.createObjectURL(g.file):g.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:M=>{M.currentTarget.style.display="none"}}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{ref:I,type:"file",accept:"image/*",className:"w-full text-sm border rounded-lg p-2",onChange:M=>{var $;return w({...g,file:(($=M.target.files)==null?void 0:$[0])||null})}})]})]}),r.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:g.name,onChange:M=>w({...g,name:M.target.value})}),r.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:g.desc||"",onChange:M=>w({...g,desc:M.target.value})}),r.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(g.price)?g.price:0,onChange:M=>w({...g,price:Number(M.target.value)})}),r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:g.available,onChange:M=>w({...g,available:M.target.checked})}),""]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",disabled:j,className:"flex-1 px-4 py-2 rounded-xl bg-green-600 text-white disabled:opacity-60",children:j?" ":"  "}),r.jsx("button",{type:"button",onClick:R,disabled:j,className:"px-4 py-2 rounded-xl bg-gray-400 text-white disabled:opacity-60",children:""})]})]}):r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:S.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:M=>{M.currentTarget.style.display="none"}}),S._optimistic&&r.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:r.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:r.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${S._progress||1}%`}})})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-bold",children:S.name}),S.desc&&r.jsx("div",{className:"text-sm text-gray-600",children:S.desc}),r.jsxs("div",{className:"font-semibold mt-1",children:[(U=(X=S.price)==null?void 0:X.toFixed)==null?void 0:U.call(X,2)," ."]}),S._optimistic&&r.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" "})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsx("button",{onClick:()=>E(S),disabled:!!S._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-amber-500 text-white disabled:opacity-50",children:" "}),r.jsx("button",{onClick:()=>p(S.id,S.available),disabled:!!S._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:S.available?"":""}),r.jsx("button",{onClick:()=>N(S.id),disabled:!!S._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:""})]})]})},S.id||S._tempId)}),n.length===0&&r.jsx("div",{className:"text-gray-600",children:"   ."})]})]})]})},uw=t=>({pending:"  ",accepted:"  ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "})[t]||t,_D=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},ND=()=>{const{user:t}=He(),e=yn(),[n,s]=b.useState([]),[i,a]=b.useState(null),[o,l]=b.useState({}),u=b.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);b.useEffect(()=>{if(!u)return;a(null);const h=Bs(re(B,"orders"),f=>{const w=f.docs.map(j=>({id:j.id,...j.data()})).filter(j=>{var k,v;const A=j.restaurantId===u,I=((v=(k=j==null?void 0:j.items)==null?void 0:k[0])==null?void 0:v.ownerId)===u;return A||I});w.sort((j,A)=>{var v,_,T,O;const I=((_=(v=j.createdAt)==null?void 0:v.toMillis)==null?void 0:_.call(v))??0;return(((O=(T=A.createdAt)==null?void 0:T.toMillis)==null?void 0:O.call(T))??0)-I}),s(w),a(null)},f=>{console.error("Firestore error:",f),a("    .")});return()=>h()},[u]);const d=async(h,f,g)=>{const w={status:f,updatedAt:te()};if(f==="accepted"&&(g==null?void 0:g.deliveryType)==="delivery"){const j=o[h]||0;w.deliveryFee=j,w.total=(g.subtotal||0)+j}await ge(Y(B,"orders",h),w)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"  "}),i&&r.jsx("div",{className:"text-red-500 text-sm mb-2",children:i}),n.map(h=>{var f,g,w,j,A;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[r.jsxs("div",{className:"font-bold text-lg",children:[" #",h.id.slice(-6),r.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(f=h.items)==null?void 0:f.map(I=>`${I.name}${I.qty}`).join("  ")})]}),r.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(w=(g=h.total)==null?void 0:g.toFixed)==null?void 0:w.call(g,2)," ."]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-semibold",children:":"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${_D(h.status)}`,children:uw(h.status||"pending")})]}),r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:":"})," ",h.address]}),h.location&&r.jsxs("div",{className:"mt-3",children:[r.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"  :"}),r.jsx("iframe",{title:`map-${h.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${h.location.lat},${h.location.lng}&hl=ar&z=15&output=embed`})]}),h.status==="pending"&&h.deliveryType==="delivery"&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[r.jsx("label",{className:"block text-sm font-bold text-amber-800 mb-2",children:"     :"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:": 10",value:o[h.id]||"",onChange:I=>l(k=>({...k,[h.id]:parseFloat(I.target.value)||0})),className:"flex-1 px-4 py-3 border-2 border-amber-300 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-lg font-bold text-center"}),r.jsx("span",{className:"text-amber-700 font-bold",children:"."})]}),r.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"     "})]}),h.deliveryFee!==void 0&&h.deliveryFee>0&&r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:" :"})," ",(A=(j=h.deliveryFee)==null?void 0:j.toFixed)==null?void 0:A.call(j,2)," ."]}),r.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:[!h.courierId&&["pending","accepted","preparing","ready"].includes(h.status)&&r.jsxs("button",{onClick:()=>e(`/chat?orderId=${h.id}`),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gradient-to-r from-orange-500 to-amber-500 text-white hover:shadow-lg transition flex items-center gap-2",children:[r.jsx(Mc,{className:"w-4 h-4"}),"  "]}),["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(I=>{const k=I==="accepted"&&h.status==="pending"&&h.deliveryType==="delivery",v=o[h.id]!==void 0&&o[h.id]>=0,_=k&&!v;return r.jsx("button",{onClick:()=>d(h.id,I,h),disabled:_,className:`px-4 py-2 rounded-xl text-sm font-semibold transition ${_?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:_?"   ":"",children:uw(I)},I)})]})]},h.id)}),n.length===0&&!i&&r.jsx("div",{className:"text-gray-400 text-center text-lg",children:"    ."})]})},jD=()=>{const{user:t}=He(),e=vn(),[n,s]=b.useState({name:"",phone:"",city:"",location:"",logoUrl:"",allowPickup:!1,commercialLicenseUrl:"",licenseStatus:void 0,licenseNotes:"",bankName:"",bankAccountName:"",bankAccountNumber:"",isHiring:!1,hiringDescription:"",hiringContact:""}),[i,a]=b.useState(null),[o,l]=b.useState(""),[u,d]=b.useState(null),[h,f]=b.useState(!0),[g,w]=b.useState(!1),j=b.useMemo(()=>!g&&!!t,[g,t]);b.useEffect(()=>{t&&(async()=>{try{const T=await Pe(Y(B,"restaurants",t.uid));if(T.exists()){const O=T.data();let V={bankName:"",bankAccountName:"",bankAccountNumber:""};try{const y=await Pe(Y(B,"restaurants",t.uid,"private","bankInfo"));if(y.exists()){const p=y.data();V={bankName:p.bankName??"",bankAccountName:p.bankAccountName??"",bankAccountNumber:p.bankAccountNumber??""}}}catch{}s({name:O.name??"",phone:O.phone??"",city:O.city??"",location:O.location??"",logoUrl:O.logoUrl??"",allowPickup:O.allowPickup??!1,commercialLicenseUrl:O.commercialLicenseUrl??"",licenseStatus:O.licenseStatus,licenseNotes:O.licenseNotes??"",bankName:V.bankName,bankAccountName:V.bankAccountName,bankAccountNumber:V.bankAccountNumber,isHiring:O.isHiring??!1,hiringDescription:O.hiringDescription??"",hiringContact:O.hiringContact??""})}}catch{e.error("   ")}finally{f(!1)}})()},[t,e]),b.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]);const A=T=>{const{name:O,value:V}=T.target;s(y=>({...y,[O]:V}))},I=T=>{var V;const O=((V=T.target.files)==null?void 0:V[0])||null;if(a(O),O){const y=URL.createObjectURL(O);l(y)}else l("")},k=async()=>{if(!t||!i)return;if(!/^image\//.test(i.type)){e.warning("   ");return}const O=3*1024*1024;if(i.size>O){e.warning("        3MB");return}const V=i.name.replace(/\s+/g,"_"),y=`restaurants/${t.uid}/logo_${Date.now()}_${V}`,p=_r(Hd,y),N={contentType:i.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await cc(p,i,N);const E=await br(p);return`${E}${E.includes("?")?"&":"?"}v=${Date.now()}`},v=async(T,O)=>{if(!t||!T)return;if(!/^(image\/|application\/pdf)/.test(T.type)){e.warning("      PDF");return}const y=5*1024*1024;if(T.size>y){e.warning("        5MB");return}const p=T.name.replace(/\s+/g,"_"),N=`restaurants/${t.uid}/licenses/${O}_${Date.now()}_${p}`,E=_r(Hd,N),R={contentType:T.type,cacheControl:"public,max-age=31536000,immutable"};return await cc(E,T,R),await br(E)},_=async T=>{if(T.preventDefault(),!t){e.warning("    ");return}if(!n.name.trim()){e.warning("  ");return}w(!0);try{let O=n.logoUrl,V=n.commercialLicenseUrl,y=n.licenseStatus;if(i){e.info("    ");const D=await k();D&&(O=D)}if(u){e.info("     ");const D=await v(u,"commercial");D&&(V=D,y="pending")}const{bankName:p,bankAccountName:N,bankAccountNumber:E,...R}=n;await Bt(Y(B,"restaurants",t.uid),{...R,logoUrl:O,commercialLicenseUrl:V,licenseStatus:y},{merge:!0}),(p||N||E)&&await Bt(Y(B,"restaurants",t.uid,"private","bankInfo"),{bankName:p||"",bankAccountName:N||"",bankAccountNumber:E||""},{merge:!0}),o&&URL.revokeObjectURL(o),l(""),a(null),d(null),e.success("    ",{title:" "})}catch(O){e.error(` : ${(O==null?void 0:O.message)||"  "}`)}finally{w(!1)}};return h?r.jsx("div",{className:"p-6 text-center",children:" "}):r.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[r.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"  "}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block font-semibold",children:" "}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:o||n.logoUrl?r.jsx("img",{src:o||n.logoUrl,className:"w-full h-full object-cover",onError:T=>T.currentTarget.style.display="none",alt:"logo"}):null}),r.jsx("input",{type:"file",accept:"image/*",onChange:I})]}),i&&r.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",r.jsx("span",{className:"font-semibold",children:i.name})]})]}),r.jsx("input",{name:"name",placeholder:" ",value:n.name,onChange:A,className:"w-full border p-3 rounded-xl"}),r.jsx("input",{name:"phone",placeholder:" ",value:n.phone,onChange:A,className:"w-full border p-3 rounded-xl"}),r.jsxs("div",{className:"relative",children:[r.jsx(Gt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400 pointer-events-none"}),r.jsxs("select",{name:"city",value:n.city,onChange:T=>s(O=>({...O,city:T.target.value})),className:"w-full border p-3 pr-10 rounded-xl bg-white appearance-none cursor-pointer focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[r.jsx("option",{value:"",children:" "}),Ux.map(T=>r.jsx("option",{value:T,children:T},T))]})]}),r.jsx("input",{name:"location",placeholder:"",value:n.location,onChange:A,className:"w-full border p-3 rounded-xl"}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(zt,{className:"w-5 h-5 text-green-500"})," "]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:r.jsx(zt,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800",children:"  "}),r.jsx("p",{className:"text-sm text-gray-500",children:"      "})]})]}),r.jsx("button",{type:"button",onClick:()=>s(T=>({...T,allowPickup:!T.allowPickup})),className:`relative w-14 h-8 rounded-full transition-colors ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:r.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.allowPickup?"right-1":"left-1"}`})})]}),n.allowPickup&&r.jsx("p",{className:"mt-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:"         (  )"})]}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(Dx,{className:"w-5 h-5 text-sky-500"})," "]}),n.licenseStatus&&r.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 ${n.licenseStatus==="approved"?"bg-green-50 text-green-700":n.licenseStatus==="rejected"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[n.licenseStatus==="approved"&&r.jsx(at,{className:"w-5 h-5"}),n.licenseStatus==="rejected"&&r.jsx(ar,{className:"w-5 h-5"}),n.licenseStatus==="pending"&&r.jsx(Kt,{className:"w-5 h-5"}),r.jsxs("span",{className:"font-semibold",children:[n.licenseStatus==="approved"&&"   ",n.licenseStatus==="rejected"&&" ",n.licenseStatus==="pending"&&"  ..."]})]}),n.licenseNotes&&n.licenseStatus==="rejected"&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl text-red-600 text-sm",children:[r.jsx("strong",{children:":"})," ",n.licenseNotes]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[r.jsx(m3,{className:"w-4 h-4 text-orange-500"})," "]}),r.jsxs("div",{className:"flex items-center gap-3",children:[n.commercialLicenseUrl&&r.jsx("a",{href:n.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:text-sky-700 text-sm underline",children:"  "}),r.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:T=>{var O;return d(((O=T.target.files)==null?void 0:O[0])||null)},className:"text-sm"})]}),u&&r.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",r.jsx("span",{className:"font-semibold",children:u.name})]})]})]}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(Ps,{className:"w-5 h-5 text-green-500"}),"  "]}),r.jsx("p",{className:"text-sm text-gray-500 mb-4 bg-green-50 p-3 rounded-xl",children:"           "}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"relative",children:r.jsxs("select",{name:"bankName",value:n.bankName||"",onChange:T=>s(O=>({...O,bankName:T.target.value})),className:"w-full border p-3 rounded-xl bg-white appearance-none cursor-pointer focus:border-green-400 focus:ring-2 focus:ring-green-100",children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:"  "}),r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:"  "}),r.jsx("option",{value:" ",children:"  "}),r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"stc pay",children:"STC Pay"}),r.jsx("option",{value:"",children:""})]})}),r.jsx("input",{name:"bankAccountName",placeholder:"  ",value:n.bankAccountName||"",onChange:A,className:"w-full border p-3 rounded-xl focus:border-green-400 focus:ring-2 focus:ring-green-100"}),r.jsx("input",{name:"bankAccountNumber",placeholder:"   ",value:n.bankAccountNumber||"",onChange:A,className:"w-full border p-3 rounded-xl focus:border-green-400 focus:ring-2 focus:ring-green-100 font-mono text-left",dir:"ltr"}),n.bankName&&n.bankAccountName&&n.bankAccountNumber&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 text-green-700 text-sm",children:"    -      "})]})]}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(dc,{className:"w-5 h-5 text-purple-500"}),"  "]}),r.jsx("p",{className:"text-sm text-gray-500 mb-4 bg-purple-50 p-3 rounded-xl",children:"           "}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.isHiring?"bg-purple-500":"bg-gray-300"}`,children:r.jsx(dc,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-800",children:"  "}),r.jsx("p",{className:"text-sm text-gray-500",children:"    "})]})]}),r.jsx("button",{type:"button",onClick:()=>s(T=>({...T,isHiring:!T.isHiring})),className:`relative w-14 h-8 rounded-full transition-colors ${n.isHiring?"bg-purple-500":"bg-gray-300"}`,children:r.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.isHiring?"right-1":"left-1"}`})})]}),n.isHiring&&r.jsxs("div",{className:"space-y-3 bg-purple-50 p-4 rounded-xl",children:[r.jsx("textarea",{name:"hiringDescription",placeholder:"   (:       ...)",value:n.hiringDescription||"",onChange:T=>s(O=>({...O,hiringDescription:T.target.value})),className:"w-full border p-3 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-100 min-h-[100px]",rows:3}),r.jsx("input",{name:"hiringContact",placeholder:"   ()",value:n.hiringContact||"",onChange:A,className:"w-full border p-3 rounded-xl focus:border-purple-400 focus:ring-2 focus:ring-purple-100"}),n.hiringDescription&&n.hiringContact&&r.jsx("div",{className:"bg-purple-100 border border-purple-200 rounded-xl p-3 text-purple-700 text-sm",children:"      "})]})]}),r.jsx("button",{type:"submit",disabled:!j,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:g?" ":""})]})]})},kD=()=>{const{user:t}=He(),e=ls(),n=vn(),[s,i]=b.useState([]),[a,o]=b.useState(!0);b.useEffect(()=>{t&&(async()=>{const I=be(re(B,"hiringRequests"),_e("restaurantId","==",t.uid)),k=await we(I);i(k.docs.map(v=>({id:v.id,...v.data()}))),o(!1)})()},[t]);const l=async(I,k)=>{await ge(Y(B,"hiringRequests",I),{status:k}),i(v=>v.map(_=>_.id===I?{..._,status:k}:_)),n.success(k==="accepted"?"   ":"  ")},u=async I=>{await e.confirm(`    "${I.courierName}"`,{title:" ",confirmText:" ",cancelText:"",dangerous:!0})&&(await ge(Y(B,"hiringRequests",I.id),{status:"terminated"}),i(v=>v.map(_=>_.id===I.id?{..._,status:"terminated"}:_)),n.success("  "))},d=async I=>{await e.confirm(`    "${I.courierName}" `,{title:" ",confirmText:" ",cancelText:"",dangerous:!0})&&(await Jn(Y(B,"hiringRequests",I.id)),i(v=>v.filter(_=>_.id!==I.id)),n.success("  "))},h=async I=>{await ge(Y(B,"hiringRequests",I.id),{status:"accepted"}),i(k=>k.map(v=>v.id===I.id?{...v,status:"accepted"}:v)),n.success("    ")},f=I=>{switch(I){case"pending":return{text:" ",color:"bg-yellow-100 text-yellow-700",icon:Kt};case"accepted":return{text:" ",color:"bg-green-100 text-green-700",icon:at};case"rejected":return{text:"",color:"bg-red-100 text-red-700",icon:dr};case"terminated":return{text:"",color:"bg-gray-100 text-gray-700",icon:rw};default:return{text:I,color:"bg-gray-100 text-gray-700",icon:Kt}}};if(a)return r.jsx("div",{className:"text-center py-10",children:"  ..."});const g=s.filter(I=>I.status==="accepted"),w=s.filter(I=>I.status==="pending"),j=s.filter(I=>I.status==="terminated"),A=s.filter(I=>I.status==="rejected");return r.jsxs("div",{className:"py-6 space-y-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-6",children:"  "}),s.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-500 text-lg",children:"   "}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"     "})]}):r.jsxs(r.Fragment,{children:[g.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-green-600 mb-3 flex items-center gap-2",children:[r.jsx(Jm,{className:"w-5 h-5"}),"  (",g.length,")"]}),r.jsx("div",{className:"space-y-3",children:g.map(I=>{const k=f(I.status);return r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-green-500",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-800",children:I.courierName}),r.jsxs("div",{className:`text-xs px-2 py-1 rounded-full inline-flex items-center gap-1 ${k.color}`,children:[r.jsx(k.icon,{className:"w-3 h-3"}),k.text]})]})]}),r.jsxs("button",{onClick:()=>u(I),className:`flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-xl 
                                     hover:bg-red-100 transition-all font-medium`,children:[r.jsx(L3,{className:"w-4 h-4"}),""]})]})},I.id)})})]}),w.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-yellow-600 mb-3 flex items-center gap-2",children:[r.jsx(Kt,{className:"w-5 h-5"}),"  (",w.length,")"]}),r.jsx("div",{className:"space-y-3",children:w.map(I=>r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-yellow-500",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-800",children:I.courierName}),r.jsx("div",{className:"text-xs text-yellow-600",children:"  "})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>l(I.id,"accepted"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-green-500 text-white hover:bg-green-600 transition-all font-medium",children:[r.jsx(Jm,{className:"w-4 h-4"}),""]}),r.jsxs("button",{onClick:()=>l(I.id,"rejected"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-red-500 text-white hover:bg-red-600 transition-all font-medium",children:[r.jsx(dr,{className:"w-4 h-4"}),""]})]})]})},I.id))})]}),j.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-gray-500 mb-3 flex items-center gap-2",children:[r.jsx(rw,{className:"w-5 h-5"})," (",j.length,")"]}),r.jsx("div",{className:"space-y-3",children:j.map(I=>r.jsx("div",{className:"bg-gray-50 rounded-2xl shadow p-4 border-r-4 border-gray-400 opacity-75",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-600",children:I.courierName}),r.jsx("div",{className:"text-xs text-gray-500",children:""})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>h(I),className:`flex items-center gap-1 px-3 py-2 bg-green-100 text-green-600 rounded-xl 
                                     hover:bg-green-200 transition-all text-sm font-medium`,children:[r.jsx(Jm,{className:"w-4 h-4"})," "]}),r.jsxs("button",{onClick:()=>d(I),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                     hover:bg-red-200 transition-all text-sm font-medium`,children:[r.jsx(In,{className:"w-4 h-4"}),""]})]})]})},I.id))})]}),A.length>0&&r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-red-500 mb-3 flex items-center gap-2",children:[r.jsx(dr,{className:"w-5 h-5"})," (",A.length,")"]}),r.jsx("div",{className:"space-y-3",children:A.map(I=>r.jsx("div",{className:"bg-red-50 rounded-2xl shadow p-4 border-r-4 border-red-400 opacity-75",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-gray-600",children:I.courierName}),r.jsx("div",{className:"text-xs text-red-500",children:""})]})]}),r.jsxs("button",{onClick:()=>d(I),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                   hover:bg-red-200 transition-all text-sm font-medium`,children:[r.jsx(In,{className:"w-4 h-4"}),""]})]})},I.id))})]})]})]})},ED=()=>{const{user:t}=He(),e=vn(),n=ls(),[s,i]=b.useState("free"),[a,o]=b.useState(!0),[l,u]=b.useState(!1),[d,h]=b.useState(!1),[f,g]=b.useState(null),[w,j]=b.useState(!1),[A,I]=b.useState(null),k=b.useRef(null);b.useEffect(()=>{if(!t)return;(async()=>{try{const p=await Pe(Y(B,"restaurants",t.uid));if(p.exists()){const R=p.data();i((R==null?void 0:R.packageType)||"free")}const N=be(re(B,"packageRequests"),_e("restaurantId","==",t.uid)),E=await we(N);if(!E.empty){const D=E.docs.map(S=>({id:S.id,...S.data()})).find(S=>!["approved","rejected","expired"].includes(S.status));D&&g(D)}}catch(p){console.error("   :",p)}finally{o(!1)}})();const V=be(re(B,"packageRequests"),_e("restaurantId","==",t.uid)),y=Bs(V,p=>{if(!p.empty){const N=p.docs.map(D=>({id:D.id,...D.data()})),E=N.find(D=>!["approved","rejected","expired"].includes(D.status));g(E||null),N.find(D=>D.status==="approved")&&i("premium")}});return()=>y()},[t]);const v=async()=>{if(!t)return;if(s==="free"){e.info("     ");return}if(await n.confirm("         .",{title:"   ",confirmText:"  ",cancelText:""})){h(!0);try{await ge(Y(B,"restaurants",t.uid),{packageType:"free",packageRequest:null,updatedAt:te()}),i("free"),e.success("   ")}catch(V){console.error(":",V),e.error("    ")}finally{h(!1)}}},_=async()=>{if(!t)return;if(f){e.info("    ");return}if(await n.confirm("          .   ",{title:"    ",confirmText:"  ",cancelText:""})){u(!0);try{const y=(await Pe(Y(B,"restaurants",t.uid))).data(),p=await tt(re(B,"packageRequests"),{restaurantId:t.uid,restaurantName:(y==null?void 0:y.name)||" ",ownerName:(y==null?void 0:y.ownerName)||"",ownerPhone:(y==null?void 0:y.phone)||"",status:"pending",subscriptionAmount:99,subscriptionDuration:30,requestedAt:te(),createdAt:te(),updatedAt:te()});await ge(Y(B,"restaurants",t.uid),{packageRequest:"premium",packageRequestedAt:te(),updatedAt:te()});try{const N=be(re(B,"users"),_e("role","==","developer")),E=await we(N);if(E.empty){const R=be(re(B,"users"),_e("role","==","admin")),D=await we(R);for(const S of D.docs)await tt(re(B,"notifications"),{recipientId:S.id,title:"      ",message:`${(y==null?void 0:y.name)||" "}     `,type:"package_request",read:!1,data:{requestId:p.id,restaurantId:t.uid},createdAt:te()})}else for(const R of E.docs)await tt(re(B,"notifications"),{recipientId:R.id,title:"      ",message:`${(y==null?void 0:y.name)||" "}     `,type:"package_request",read:!1,data:{requestId:p.id,restaurantId:t.uid},createdAt:te()})}catch(N){console.warn("  :",N)}e.success("   !    ")}catch(V){console.error("   :",V),e.error("    ")}finally{u(!1)}}},T=async()=>{var O;if(!t||!f||!A){e.warning("    ");return}j(!0);try{const V=`paymentProofs/${t.uid}_${Date.now()}_${A.name}`,y=_r(Hd,V);await cc(y,A);const p=await br(y);await ge(Y(B,"packageRequests",f.id),{status:"payment_sent",paymentProofImageUrl:p,paymentSentAt:te(),updatedAt:te()});try{const E=((O=(await Pe(Y(B,"restaurants",t.uid))).data())==null?void 0:O.name)||" ",R=be(re(B,"users"),_e("role","==","developer")),D=await we(R);if(D.empty){const S=be(re(B,"users"),_e("role","==","admin")),X=await we(S);for(const U of X.docs)await tt(re(B,"notifications"),{recipientId:U.id,title:"    ",message:`${E}     `,type:"payment_proof_sent",read:!1,data:{requestId:f.id,restaurantId:t.uid},createdAt:te()})}else for(const S of D.docs)await tt(re(B,"notifications"),{recipientId:S.id,title:"    ",message:`${E}     `,type:"payment_proof_sent",read:!1,data:{requestId:f.id,restaurantId:t.uid},createdAt:te()})}catch(N){console.warn("  :",N)}e.success("    !     "),I(null),k.current&&(k.current.value="")}catch(V){console.error("   :",V),e.error(` : ${V.message}`)}finally{j(!1)}};return a?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:" ..."})]})}):r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-amber-100 to-yellow-100 px-5 py-2.5 rounded-full mb-4 shadow-sm",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsx("span",{className:"text-amber-700 font-bold text-lg",children:"  "})]}),r.jsx("h1",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-3",children:"   "}),r.jsx("p",{className:"text-gray-600 max-w-lg mx-auto",children:"              "})]}),f&&r.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl p-6 border-2 border-amber-200 shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center",children:r.jsx(Wd,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-amber-800",children:"   "}),r.jsxs("p",{className:"text-amber-600 text-sm",children:[f.status==="pending"&&"     ",f.status==="bank_sent"&&"     -    ",f.status==="payment_sent"&&"     -  "]})]})]}),f.status==="bank_sent"&&r.jsxs("div",{className:"space-y-4",children:[f.bankAccountImageUrl&&r.jsxs("div",{className:"bg-white rounded-xl p-4",children:[r.jsx("p",{className:"font-semibold text-gray-700 mb-2",children:"    :"}),r.jsxs("a",{href:f.bankAccountImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg transition",children:[r.jsx(Kd,{className:"w-5 h-5"}),"   "]}),r.jsxs("p",{className:"text-green-600 font-bold mt-2",children:["  : ",f.subscriptionAmount||99," "]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[r.jsx("p",{className:"font-semibold text-gray-700",children:"      :"}),r.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:O=>{var V;return I(((V=O.target.files)==null?void 0:V[0])||null)},className:"w-full border-2 border-dashed border-amber-300 rounded-xl p-4 bg-amber-50"}),A&&r.jsxs("p",{className:"text-sm text-green-600",children:["  : ",A.name]}),r.jsx("button",{onClick:T,disabled:w||!A,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 transition flex items-center justify-center gap-2",children:w?r.jsxs(r.Fragment,{children:[r.jsx(Kt,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Vx,{className:"w-5 h-5"}),"  "]})})]})]}),f.status==="payment_sent"&&r.jsxs("div",{className:"bg-purple-100 rounded-xl p-4 flex items-center gap-3",children:[r.jsx(Kt,{className:"w-8 h-8 text-purple-600 animate-pulse"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-purple-800",children:"     "}),r.jsx("p",{className:"text-purple-600 text-sm",children:"    ...   "})]})]}),f.status==="pending"&&r.jsxs("div",{className:"bg-yellow-100 rounded-xl p-4 flex items-center gap-3",children:[r.jsx(Kt,{className:"w-8 h-8 text-yellow-600 animate-pulse"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-yellow-800",children:"    "}),r.jsx("p",{className:"text-yellow-600 text-sm",children:"       ..."})]})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${s==="free"?"ring-4 ring-green-400 shadow-2xl":"shadow-lg hover:shadow-xl"}`,children:[s==="free"&&r.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[r.jsx(ns,{className:"w-4 h-4"})," "]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-6 md:p-8 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(Ym,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-black text-gray-900",children:" "}),r.jsx("p",{className:"text-green-600 font-semibold",children:"   "})]})]}),r.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center",children:[r.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[r.jsx("span",{className:"text-5xl font-black text-gray-900",children:"0"}),r.jsx("span",{className:"text-xl text-gray-600",children:"."})]}),r.jsx("p",{className:"text-green-600 font-medium mt-1",children:" "})]}),r.jsxs("div",{className:"space-y-4 flex-1",children:[r.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(fo,{className:"w-5 h-5 text-amber-500"})," :"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ri,{icon:r.jsx(Al,{className:"w-5 h-5"}),title:"  ",desc:"     ",included:!0}),r.jsx(Ri,{icon:r.jsx(Nr,{className:"w-5 h-5"}),title:" ",desc:"    ",included:!0}),r.jsx(Ri,{icon:r.jsx(Dx,{className:"w-5 h-5"}),title:"  ",desc:"    ",included:!0})]})]}),r.jsx("div",{className:"mt-6",children:s==="free"?r.jsxs("div",{className:"bg-green-100 text-green-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[r.jsx(ns,{className:"w-5 h-5"}),"    "]}):r.jsx("button",{onClick:v,disabled:d,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ym,{className:"w-6 h-6"}),"  ",r.jsx(Sp,{className:"w-5 h-5"})]})})})]})]}),r.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${s==="premium"?"ring-4 ring-amber-400 shadow-2xl":"shadow-lg hover:shadow-xl hover:scale-[1.01]"}`,children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-amber-500 py-2 text-center z-10",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 text-white font-bold",children:[r.jsx(Dt,{className:"w-5 h-5"}),r.jsx("span",{children:" "}),r.jsx(Dt,{className:"w-5 h-5"})]})}),s==="premium"&&r.jsxs("div",{className:"absolute top-12 right-4 bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[r.jsx(Dt,{className:"w-4 h-4"})," "]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-6 md:p-8 pt-14 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 via-yellow-400 to-orange-400 rounded-2xl flex items-center justify-center shadow-lg relative",children:[r.jsx(Dt,{className:"w-8 h-8 text-white"}),r.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow",children:r.jsx(Vn,{className:"w-4 h-4 text-amber-500"})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-black text-gray-900",children:" "}),r.jsx("p",{className:"text-amber-600 font-semibold",children:"  "})]})]}),r.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-400/10 via-yellow-400/10 to-orange-400/10"}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[r.jsx("span",{className:"text-5xl font-black bg-gradient-to-r from-amber-600 to-orange-500 bg-clip-text text-transparent",children:"99"}),r.jsx("span",{className:"text-xl text-gray-600",children:"."})]}),r.jsx("p",{className:"text-amber-600 font-medium mt-1",children:""})]})]}),r.jsxs("div",{className:"space-y-4 flex-1",children:[r.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(Dt,{className:"w-5 h-5 text-amber-500"}),"     :"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ri,{icon:r.jsx(C3,{className:"w-5 h-5"}),title:"   ",desc:"      ",included:!0,premium:!0}),r.jsx(Ri,{icon:r.jsx(td,{className:"w-5 h-5"}),title:"  ",desc:"    ",included:!0,premium:!0}),r.jsx(Ri,{icon:r.jsx(Qd,{className:"w-5 h-5"}),title:"   ",desc:"     ",included:!0,premium:!0}),r.jsx(Ri,{icon:r.jsx(QP,{className:"w-5 h-5"}),title:" ",desc:"     ",included:!0,premium:!0})]})]}),r.jsx("div",{className:"mt-6",children:s==="premium"?r.jsxs("div",{className:"bg-amber-100 text-amber-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[r.jsx(Dt,{className:"w-5 h-5"}),"    "]}):r.jsxs("button",{onClick:_,disabled:l,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 text-white font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 relative overflow-hidden group",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Dt,{className:"w-6 h-6"}),"   ",r.jsx(Sp,{className:"w-5 h-5"})]})]})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 px-6 py-4",children:r.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[r.jsx(Vn,{className:"w-5 h-5 text-amber-400"}),"   "]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),r.jsx("th",{className:"px-6 py-4 text-center font-bold text-green-600",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Ym,{className:"w-5 h-5"}),""]})}),r.jsx("th",{className:"px-6 py-4 text-center font-bold text-amber-600",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Dt,{className:"w-5 h-5"}),""]})})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100",children:[r.jsx(Pi,{label:"  ",free:!0,premium:!0}),r.jsx(Pi,{label:" ",free:!0,premium:!0}),r.jsx(Pi,{label:"  ",free:!0,premium:!0}),r.jsx(Pi,{label:"   ",premium:!0}),r.jsx(Pi,{label:"  ",premium:!0}),r.jsx(Pi,{label:"   ",premium:!0}),r.jsx(Pi,{label:" ",premium:!0})]})]})})]}),r.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 text-center",children:r.jsxs("p",{className:"text-gray-600",children:[r.jsx("span",{className:"font-bold text-sky-600",children:" :"})," ","       .     ."]})})]})},Ri=({icon:t,title:e,desc:n,included:s,premium:i})=>r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-xl transition ${s?i?"bg-gradient-to-r from-amber-100/50 to-yellow-100/50":"bg-white/50":"opacity-50"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${s?i?"bg-gradient-to-br from-amber-400 to-orange-400 text-white":"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:t}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:`font-bold ${s?"text-gray-800":"text-gray-400"}`,children:e}),i&&r.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-400 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:""})]}),r.jsx("p",{className:`text-sm ${s?"text-gray-500":"text-gray-400"}`,children:n})]}),s&&r.jsx(ns,{className:`w-5 h-5 flex-shrink-0 ${i?"text-amber-500":"text-green-500"}`})]}),Pi=({label:t,free:e,premium:n})=>r.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[r.jsx("td",{className:"px-6 py-4 text-gray-700 font-medium",children:t}),r.jsx("td",{className:"px-6 py-4 text-center",children:e?r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-green-100 rounded-full",children:r.jsx(ns,{className:"w-5 h-5 text-green-600"})}):r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:r.jsx("span",{className:"text-gray-400",children:""})})}),r.jsx("td",{className:"px-6 py-4 text-center",children:n?r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-amber-100 rounded-full",children:r.jsx(ns,{className:"w-5 h-5 text-amber-600"})}):r.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:r.jsx("span",{className:"text-gray-400",children:""})})})]}),sf=5,Du=24,ID=()=>{const{user:t}=He(),e=vn(),n=ls(),[s,i]=b.useState([]),[a,o]=b.useState(!0),[l,u]=b.useState(!1),[d,h]=b.useState(!1),[f,g]=b.useState(0),w=b.useRef(null),[j,A]=b.useState({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""});b.useEffect(()=>{t&&I()},[t]);const I=async()=>{if(t)try{const O=be(re(B,"promotions"),_e("ownerId","==",t.uid)),y=(await we(O)).docs.map(p=>{var N,E,R,D;return{id:p.id,...p.data(),expiresAt:(E=(N=p.data().expiresAt)==null?void 0:N.toDate)==null?void 0:E.call(N),createdAt:(D=(R=p.data().createdAt)==null?void 0:R.toDate)==null?void 0:D.call(R)}});y.sort((p,N)=>{var E,R;return(((E=N.createdAt)==null?void 0:E.getTime())||0)-(((R=p.createdAt)==null?void 0:R.getTime())||0)}),i(y)}catch(O){e.error("   "),console.error(O)}finally{o(!1)}},k=O=>O.expiresAt?new Date>new Date(O.expiresAt):!1,v=O=>{var E;const V=(E=O.target.files)==null?void 0:E[0];if(!V)return;const y=V.type.startsWith("image/"),p=V.type.startsWith("video/");if(!y&&!p){e.warning("    ");return}const N=p?50*1024*1024:10*1024*1024;if(V.size>N){e.warning(p?"       50 ":"       10 ");return}A({...j,type:p?"video":"image",mediaFile:V,mediaPreview:URL.createObjectURL(V)})},_=async O=>{if(O.preventDefault(),!!t){if(j.type!=="text"&&!j.mediaFile){e.warning("    ");return}if(!j.title.trim()&&!j.description.trim()&&!j.mediaFile){e.warning("   ");return}try{h(!0);let V="";if(j.mediaFile){const p=j.mediaFile.name.replace(/\s+/g,"_").slice(-60),N=`promotions/${t.uid}_${Date.now()}_${p}`,E=_r(Hd,N),R=qd(E,j.mediaFile);await new Promise((D,S)=>{R.on("state_changed",X=>{const U=Math.round(X.bytesTransferred/X.totalBytes*100);g(U)},S,async()=>{V=await br(R.snapshot.ref),D()})})}const y=new Date;y.setHours(y.getHours()+Du),await tt(re(B,"promotions"),{ownerId:t.uid,restaurantId:t.uid,type:j.type,title:j.title.trim(),description:j.description.trim(),mediaUrl:V,isActive:!0,isPaid:!0,price:sf,duration:Du,viewsCount:0,expiresAt:vt.fromDate(y),createdAt:te(),updatedAt:te()}),e.success(`  !    ${Du} `),A({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""}),u(!1),g(0),I()}catch(V){e.error("    "),console.error(V)}finally{h(!1)}}},T=async O=>{if(await n.confirm("    ",{dangerous:!0}))try{await Jn(Y(B,"promotions",O)),e.success("  "),I()}catch{e.error(" ")}};return a?r.jsxs("div",{className:"flex items-center justify-center h-96",children:[r.jsx(rn,{className:"w-6 h-6 animate-spin ml-2"})," ..."]}):r.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4 space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:r.jsx(hr,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" "}),r.jsx("p",{className:"text-gray-500 mt-2",children:"      "})]}),r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-4 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3",children:[r.jsx(Vn,{className:"w-5 h-5 text-purple-500"}),r.jsxs("span",{className:"text-lg font-bold text-purple-700",children:[sf," .   ",Du," "]}),r.jsx(Vn,{className:"w-5 h-5 text-purple-500"})]}),r.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"       "})]}),!l&&r.jsxs("button",{onClick:()=>u(!0),className:"w-full py-4 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[r.jsx(Vc,{className:"w-6 h-6"}),"  "]}),l&&r.jsxs("form",{onSubmit:_,className:"bg-white rounded-2xl shadow-xl p-6 space-y-4",children:[r.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:"  "}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>A({...j,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${j.type==="text"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[r.jsx(Dx,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>{var O;A({...j,type:"image"}),(O=w.current)==null||O.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${j.type==="image"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[r.jsx(P1,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:""})]}),r.jsxs("button",{type:"button",onClick:()=>{var O;A({...j,type:"video"}),(O=w.current)==null||O.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${j.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[r.jsx(q3,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:""})]})]})]}),r.jsx("input",{type:"file",ref:w,accept:"image/*,video/*",onChange:v,className:"hidden"}),j.mediaPreview&&r.jsxs("div",{className:"relative",children:[j.type==="video"?r.jsx("video",{src:j.mediaPreview,controls:!0,className:"w-full h-48 object-cover rounded-xl"}):r.jsx("img",{src:j.mediaPreview,alt:"",className:"w-full h-48 object-cover rounded-xl"}),r.jsx("button",{type:"button",onClick:()=>A({...j,mediaFile:null,mediaPreview:"",type:"text"}),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full",children:r.jsx(dr,{className:"w-4 h-4"})})]}),j.type!=="text"&&!j.mediaPreview&&r.jsxs("button",{type:"button",onClick:()=>{var O;return(O=w.current)==null?void 0:O.click()},className:"w-full py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-purple-400 transition flex items-center justify-center gap-2",children:[r.jsx(Vx,{className:"w-5 h-5"})," ",j.type==="video"?"":""]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),r.jsx("input",{type:"text",value:j.title,onChange:O=>A({...j,title:O.target.value}),placeholder:":   !",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"  "}),r.jsx("textarea",{value:j.description,onChange:O=>A({...j,description:O.target.value}),placeholder:"   ...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),d&&f>0&&r.jsx("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"bg-purple-500 h-full transition-all",style:{width:`${f}%`}})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",disabled:d,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:d?r.jsxs(r.Fragment,{children:[r.jsx(rn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(hr,{className:"w-5 h-5"}),"  (",sf," .)"]})}),r.jsx("button",{type:"button",onClick:()=>{u(!1),A({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""})},className:"px-4 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-medium",children:""})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"font-bold text-lg text-gray-800",children:""}),s.length===0?r.jsxs("div",{className:"text-center py-10 text-gray-400",children:[r.jsx(hr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"    "})]}):s.map(O=>r.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden ${k(O)?"opacity-60":""}`,children:[O.mediaUrl&&(O.type==="video"?r.jsx("video",{src:O.mediaUrl,controls:!0,className:"w-full h-48 object-cover"}):r.jsx("img",{src:O.mediaUrl,alt:O.title,className:"w-full h-48 object-cover"})),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[k(O)?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-500 text-xs font-medium rounded-full",children:[r.jsx(dr,{className:"w-3 h-3"})," "]}):O.isActive?r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-600 text-xs font-medium rounded-full",children:[r.jsx(at,{className:"w-3 h-3"})," "]}):r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-600 text-xs font-medium rounded-full",children:[r.jsx(Kt,{className:"w-3 h-3"}),"  "]}),r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-600 text-xs font-medium rounded-full",children:[r.jsx(Al,{className:"w-3 h-3"})," ",O.viewsCount," "]})]}),O.title&&r.jsx("h3",{className:"font-bold text-gray-800",children:O.title}),O.description&&r.jsx("p",{className:"text-gray-600 text-sm mt-1",children:O.description}),r.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[r.jsxs("span",{className:"text-xs text-gray-400",children:[O.expiresAt&&!k(O)&&r.jsxs(r.Fragment,{children:[": ",new Date(O.expiresAt).toLocaleString("ar-SA")]}),k(O)&&"  "]}),r.jsx("button",{onClick:()=>T(O.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",children:r.jsx(In,{className:"w-4 h-4"})})]})]})]},O.id))]}),r.jsxs(ue,{to:"/owner",className:"flex items-center justify-center gap-2 text-sky-600 hover:text-sky-700 py-4",children:[r.jsx(ur,{className:"w-5 h-5"}),"  "]})]})},TD=()=>{const{user:t}=He(),e=yn(),[n,s]=b.useState([]),[i,a]=b.useState([]);b.useEffect(()=>{if(!(t!=null&&t.uid))return;const u=be(re(B,"orders"),_e("status","in",["ready"]),as("createdAt","desc"),gi(20)),d=Bs(u,g=>s(g.docs.map(w=>({id:w.id,...w.data()})))),h=be(re(B,"orders"),_e("courierId","==",t.uid),as("createdAt","desc"),gi(20)),f=Bs(h,g=>a(g.docs.map(w=>({id:w.id,...w.data()}))));return()=>{d(),f()}},[t==null?void 0:t.uid]);const o=async u=>{t&&await ge(Y(B,"orders",u),{courierId:t.uid,status:"out_for_delivery",updatedAt:te()})},l=async u=>{await ge(Y(B,"orders",u),{status:"delivered",updatedAt:te()})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-2xl p-4 text-white shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(on,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm opacity-90",children:" "})]}),r.jsx("div",{className:"text-3xl font-bold",children:n.length})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ss,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm opacity-90",children:" "})]}),r.jsx("div",{className:"text-3xl font-bold",children:i.filter(u=>u.status!=="delivered").length})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:r.jsx(on,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h2",{className:"font-bold text-lg",children:"   "})]}),r.jsxs("div",{className:"space-y-3",children:[n.map(u=>{var d,h;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 flex items-center justify-between",children:[r.jsxs("span",{className:"text-white font-bold",children:["#",u.id.slice(-6)]}),r.jsx("span",{className:"text-white/90 text-sm",children:u.restaurantName||""})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[r.jsx(Gt,{className:"w-4 h-4"}),r.jsx("span",{className:"truncate",children:u.address})]}),r.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[r.jsx(Zv,{className:"w-5 h-5"}),r.jsxs("span",{children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]}),r.jsxs("button",{onClick:()=>o(u.id),className:`w-full py-3 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 
                               text-white font-bold flex items-center justify-center gap-2
                               hover:from-gray-900 hover:to-black transition-all shadow-lg hover:shadow-xl`,children:[r.jsx(ss,{className:"w-5 h-5"}),r.jsx("span",{children:"  "})]})]})]},u.id)}),n.length===0&&r.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl",children:[r.jsx("div",{className:"text-5xl mb-3",children:""}),r.jsx("p",{className:"text-gray-500",children:"    "}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"    "})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:r.jsx(Ki,{className:"w-5 h-5 text-green-600"})}),r.jsx("h2",{className:"font-bold text-lg",children:" "})]}),r.jsxs("div",{className:"space-y-3",children:[i.filter(u=>u.status!=="delivered").map(u=>{var d,h;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-blue-500 px-4 py-2 flex items-center justify-between",children:[r.jsxs("span",{className:"text-white font-bold",children:["#",u.id.slice(-6)]}),r.jsxs("div",{className:"flex items-center gap-1 text-white/90 text-sm",children:[r.jsx(Kt,{className:"w-3 h-3"}),r.jsx("span",{children:" "})]})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[r.jsx(Gt,{className:"w-4 h-4"}),r.jsx("span",{className:"truncate",children:u.address})]}),r.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[r.jsx(Zv,{className:"w-5 h-5"}),r.jsxs("span",{children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>e(`/chat?orderId=${u.id}`),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-primary to-accent 
                                 text-white font-bold flex items-center justify-center gap-2
                                 hover:shadow-lg transition-all`,children:[r.jsx(Mc,{className:"w-5 h-5"}),r.jsx("span",{children:" "})]}),r.jsxs("button",{onClick:()=>l(u.id),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 
                                 text-white font-bold flex items-center justify-center gap-2
                                 hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg hover:shadow-xl`,children:[r.jsx(at,{className:"w-5 h-5"}),r.jsx("span",{children:"  "})]})]})]})]},u.id)}),i.filter(u=>u.status!=="delivered").length===0&&r.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl",children:[r.jsx("div",{className:"text-5xl mb-3",children:""}),r.jsx("p",{className:"text-gray-500",children:"    "}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"    "})]})]})]})]}),i.filter(u=>u.status==="delivered").length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Vn,{className:"w-5 h-5 text-yellow-500"}),r.jsx("h3",{className:"font-bold text-gray-700",children:"  "})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3",children:i.filter(u=>u.status==="delivered").slice(0,6).map(u=>{var d,h;return r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"font-bold text-green-700",children:["#",u.id.slice(-6)]}),r.jsxs("span",{className:"text-green-600 font-bold",children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]})},u.id)})})]})]})},SD=()=>{const{user:t}=He(),e=ls(),[n,s]=b.useState([]),[i,a]=b.useState({}),[o,l]=b.useState(!0),[u,d]=b.useState(null);b.useEffect(()=>{if(!t)return;(async()=>{const w=(await we(re(B,"restaurants"))).docs.map(k=>({id:k.id,...k.data()}));s(w);const j=be(re(B,"hiringRequests"),_e("courierId","==",t.uid)),A=await we(j),I={};A.docs.forEach(k=>{const v=k.data();I[v.restaurantId]={restaurantId:v.restaurantId,status:v.status}}),a(I),l(!1)})()},[t]);const h=async f=>{if(!t){e.warning("  ");return}d(f.id),await tt(re(B,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"",restaurantId:f.id,restaurantName:f.name,status:"pending",createdAt:te()}),a(g=>({...g,[f.id]:{restaurantId:f.id,status:"pending"}})),d(null)};return o?r.jsx("div",{className:"text-center py-10 text-gray-300",children:"  ..."}):r.jsxs("div",{className:"py-8",children:[r.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[r.jsx(dc,{className:"w-7 h-7 text-yellow-400"})," "]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(f=>{const g=i[f.id];return r.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[f.logoUrl?r.jsx("img",{src:f.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):r.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:""}),r.jsx("h3",{className:"font-bold text-lg mb-2",children:f.name}),g?r.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${g.status==="pending"?"bg-gray-500 text-white":g.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[g.status==="pending"&&r.jsx(Kt,{className:"w-4 h-4"}),g.status==="accepted"&&r.jsx(c6,{className:"w-4 h-4"}),g.status==="rejected"&&r.jsx(dr,{className:"w-4 h-4"}),g.status==="pending"?" ":g.status==="accepted"?"  ":" "]}):r.jsx("button",{disabled:u===f.id,onClick:()=>h(f),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:u===f.id?"  ...":"  "})]},f.id)})})]})},CD=[{text:"  ",emoji:""},{text:" ! ",emoji:""},{text:"  ",emoji:""},{text:"  ",emoji:""},{text:" ",emoji:""},{text:"! ",emoji:""}],AD=[{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:"    ",emoji:""},{text:"! ",emoji:""},{text:" ",emoji:""}],RD=[{text:"  ! ",emoji:""},{text:"! ",emoji:""},{text:"  ",emoji:""},{text:"   ",emoji:""},{text:"  ",emoji:""},{text:" ! ",emoji:""}],PD=[{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:"   ",emoji:""}],DD=["","","","","","","","","","","",""],OD=()=>{const[t]=ph(),e=t.get("orderId"),n=yn(),{user:s,role:i}=He(),a=vn(),[o,l]=b.useState(null),[u,d]=b.useState([]),[h,f]=b.useState(""),[g,w]=b.useState(!1),[j,A]=b.useState(!1),[I,k]=b.useState(""),v=b.useRef(null),_=i==="courier",T=i==="owner",O=i==="customer"||i==="admin",V=o&&!o.courierId&&o.restaurantId,p=_?RD:T?PD:O&&V?AD:CD;b.useEffect(()=>{if(!e)return;const M=Bs(Y(B,"orders",e),$=>{if($.exists()){const F=$.data();l({id:$.id,status:F.status,address:F.address,total:F.total,customerId:F.customerId,courierId:F.courierId,restaurantId:F.restaurantId,restaurantName:F.restaurantName})}});return()=>M()},[e]),b.useEffect(()=>{if(!o)return;let M,$="customer";if(_||T?(M=o.customerId,$="customer"):O&&(o.courierId?(M=o.courierId,$="courier"):o.restaurantId&&(M=o.restaurantId,$="restaurant")),!M){k(V?o.restaurantName||"":" ");return}$==="restaurant"?Pe(Y(B,"restaurants",M)).then(F=>{var H;F.exists()?k(((H=F.data())==null?void 0:H.name)||""):k(o.restaurantName||"")}):Pe(Y(B,"users",M)).then(F=>{var H;if(F.exists()){const L=$==="courier"?"":"";k(((H=F.data())==null?void 0:H.name)||L)}})},[o,_,T,O,V]),b.useEffect(()=>{if(!e)return;const M=be(re(B,"orders",e,"messages"),as("createdAt","asc")),$=Bs(M,F=>{d(F.docs.map(H=>({id:H.id,...H.data()})))});return()=>$()},[e]),b.useEffect(()=>{var M;(M=v.current)==null||M.scrollIntoView({behavior:"smooth"})},[u]);const N=async M=>{if(!(!M.trim()||!s||!e)){w(!0);try{let $="customer";_?$="courier":T&&($="owner"),await tt(re(B,"orders",e,"messages"),{text:M.trim(),senderId:s.uid,senderRole:$,createdAt:te()}),f(""),A(!1)}catch{a.error("  ")}w(!1)}},E=M=>{f($=>$+M)},R=M=>M?M.toDate().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"",D=M=>({pending:{text:" ",color:"bg-yellow-500",emoji:""},accepted:{text:" ",color:"bg-blue-500",emoji:""},preparing:{text:" ",color:"bg-orange-500",emoji:""},ready:{text:"",color:"bg-purple-500",emoji:""},out_for_delivery:{text:" ",color:"bg-sky-500",emoji:""},delivered:{text:" ",color:"bg-green-500",emoji:""}})[M]||{text:M,color:"bg-gray-500",emoji:""},S=()=>_||T?"":V?"":"";if(!e)return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Mc,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500",children:"   "})]})});if(!o)return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:" ..."})]})});if(!((s==null?void 0:s.uid)===o.customerId||(s==null?void 0:s.uid)===o.courierId||(s==null?void 0:s.uid)===o.restaurantId))return r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-500",children:"     "})]})});const U=D(o.status);return r.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] max-w-2xl mx-auto",children:[r.jsxs("div",{className:`bg-gradient-to-r ${V?"from-orange-500 via-amber-500 to-yellow-500":"from-primary via-sky-500 to-accent"} rounded-t-3xl p-4 shadow-luxury`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>n(-1),className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center hover:bg-white/30 transition-all",children:r.jsx(ur,{className:"w-5 h-5 text-white"})}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:S()})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-white text-lg",children:I||(V?"":_||T?"":"")}),r.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-sm",children:[r.jsx("span",{className:`w-2 h-2 rounded-full ${o.status==="delivered"?"bg-green-400":"bg-yellow-400 animate-pulse"}`}),r.jsxs("span",{children:[U.emoji," ",U.text]})]})]})]})}),V?r.jsx(zt,{className:"w-6 h-6 text-white animate-pulse"}):r.jsx(Vn,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]}),r.jsxs("div",{className:"mt-3 flex items-center gap-4 text-white/90 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(on,{className:"w-4 h-4"}),r.jsxs("span",{children:["#",o.id.slice(-6)]})]}),o.restaurantName&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(zt,{className:"w-4 h-4"}),r.jsx("span",{children:o.restaurantName})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Gt,{className:"w-4 h-4"}),r.jsx("span",{className:"truncate max-w-[150px]",children:o.address})]})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-sky-50 to-white p-4 space-y-3",children:[u.length===0&&r.jsxs("div",{className:"text-center py-10",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-500",children:"  !"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"  "})]}),u.map((M,$)=>{const F=M.senderId===(s==null?void 0:s.uid);return r.jsx("div",{className:`flex ${F?"justify-start":"justify-end"}`,children:r.jsxs("div",{className:`
                  max-w-[80%] rounded-2xl px-4 py-3 shadow-md
                  ${F?"bg-gradient-to-br from-primary to-sky-600 text-white rounded-br-sm":"bg-white text-gray-800 rounded-bl-sm border border-gray-100"}
                  transform transition-all duration-300 hover:scale-[1.02]
                `,children:[r.jsx("p",{className:"text-base leading-relaxed",children:M.text}),r.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${F?"text-white/70":"text-gray-400"}`,children:[r.jsx(Kt,{className:"w-3 h-3"}),r.jsx("span",{children:R(M.createdAt)}),F&&r.jsx(Jv,{className:"w-3 h-3 mr-1"})]})]})},M.id)}),r.jsx("div",{ref:v})]}),r.jsx("div",{className:"bg-white border-t border-gray-100 px-3 py-2",children:r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:p.map((M,$)=>r.jsx("button",{onClick:()=>N(M.text),className:`flex-shrink-0 px-4 py-2 bg-gradient-to-r from-sky-50 to-blue-50 
                         rounded-full text-sm text-primary font-medium border border-sky-100
                         hover:from-sky-100 hover:to-blue-100 hover:shadow-md 
                         transition-all duration-200 active:scale-95`,children:M.text},$))})}),j&&r.jsx("div",{className:"bg-white border-t border-gray-100 px-4 py-3",children:r.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:DD.map((M,$)=>r.jsx("button",{onClick:()=>E(M),className:`w-10 h-10 text-2xl hover:bg-gray-100 rounded-full 
                           transition-all duration-200 hover:scale-125 active:scale-95`,children:M},$))})}),r.jsx("div",{className:"bg-white border-t border-gray-200 p-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>A(!j),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all
                       ${j?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:r.jsx(w3,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex-1 relative",children:r.jsx("input",{type:"text",value:h,onChange:M=>f(M.target.value),onKeyPress:M=>M.key==="Enter"&&N(h),placeholder:" ...",className:`w-full px-5 py-3 bg-gray-100 rounded-full text-gray-800 
                         placeholder-gray-400 focus:outline-none focus:ring-2 
                         focus:ring-primary/50 focus:bg-white transition-all`})}),r.jsx("button",{onClick:()=>N(h),disabled:!h.trim()||g,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all
                       ${h.trim()?"bg-gradient-to-r from-primary to-accent text-white shadow-lg hover:shadow-xl hover:scale-105":"bg-gray-200 text-gray-400"}
                       disabled:opacity-50 active:scale-95`,children:r.jsx(o3,{className:"w-5 h-5"})})]})}),o.status==="delivered"&&r.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-4 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[r.jsx(Jv,{className:"w-6 h-6"}),r.jsx("span",{className:"font-bold",children:"   ! "}),r.jsx(Gd,{className:"w-5 h-5 text-red-300 animate-pulse"})]}),r.jsx("p",{className:"text-white/80 text-sm mt-1",children:"   "})]})]})},LD=()=>{const{user:t}=He(),e=vn(),n=yn(),[s,i]=b.useState([]),[a,o]=b.useState(!0);b.useEffect(()=>{if(!t)return;const g=be(re(B,"notifications"),_e("recipientId","==",t.uid),as("createdAt","desc")),w=Bs(g,j=>{const A=j.docs.map(I=>({id:I.id,...I.data()}));i(A),o(!1)},j=>{console.error("Error fetching notifications:",j),o(!1)});return()=>w()},[t]);const l=async g=>{try{await ge(Y(B,"notifications",g),{read:!0})}catch(w){console.error("Error marking as read:",w)}},u=async()=>{const g=s.filter(w=>!w.read);try{await Promise.all(g.map(w=>ge(Y(B,"notifications",w.id),{read:!0}))),e.success("   ")}catch{e.error("  ")}},d=async g=>{try{await Jn(Y(B,"notifications",g)),e.success("  ")}catch{e.error("  ")}},h=g=>{if(!g)return"";const w=g.toDate(),A=new Date().getTime()-w.getTime(),I=Math.floor(A/6e4),k=Math.floor(A/36e5),v=Math.floor(A/864e5);return I<1?"":I<60?` ${I} `:k<24?` ${k} `:v<7?` ${v} `:w.toLocaleDateString("ar-SA")},f=s.filter(g=>!g.read).length;return a?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx(rn,{className:"w-8 h-8 animate-spin text-sky-500"})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[r.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:r.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[r.jsx(ur,{className:"w-5 h-5"}),""]}),r.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(uc,{className:"w-6 h-6 text-sky-500"}),"",f>0&&r.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:f})]}),f>0&&r.jsx("button",{onClick:u,className:"text-sm text-sky-600 hover:text-sky-800",children:" "})]})})}),r.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:s.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx(uc,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("p",{className:"text-gray-500",children:"  "})]}):r.jsx("div",{className:"space-y-3",children:s.map(g=>r.jsx("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition hover:shadow-md ${g.read?"border-gray-100":"border-sky-200 bg-sky-50/50"}`,onClick:()=>!g.read&&l(g.id),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-xl ${g.type==="license_reminder"?"bg-orange-100 text-orange-600":"bg-sky-100 text-sky-600"}`,children:r.jsx(ar,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:g.title}),r.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:h(g.createdAt)})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.message}),!g.read&&r.jsx("span",{className:"inline-block mt-2 text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded-full",children:""})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[!g.read&&r.jsx("button",{onClick:w=>{w.stopPropagation(),l(g.id)},className:"p-1.5 text-gray-400 hover:text-green-500 transition",title:" ",children:r.jsx(ns,{className:"w-4 h-4"})}),r.jsx("button",{onClick:w=>{w.stopPropagation(),d(g.id)},className:"p-1.5 text-gray-400 hover:text-red-500 transition",title:"",children:r.jsx(In,{className:"w-4 h-4"})})]})]})},g.id))})})]})},MD=()=>{var v,_;const{user:t,role:e}=He(),n=vn(),[s,i]=b.useState("dashboard"),[a,o]=b.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[l,u]=b.useState(0),[d,h]=b.useState(!0),[f,g]=b.useState(null),[w,j]=b.useState([]),[A,I]=b.useState("all");b.useEffect(()=>{t&&(async()=>{try{const O=(await Ip(re(B,"restaurants"))).data().count,V=be(re(B,"orders"),_e("status","==","pending"),gi(100)),p=(await we(V)).size,E=(await Ip(re(B,"orders"))).data().count,R=be(re(B,"orders"),gi(100)),S=(await we(R)).docs.reduce((X,U)=>X+(U.data().deliveryFee||0),0);try{const U=(await Pe(Y(B,"wallets",t.uid))).data();u((U==null?void 0:U.balance)||0)}catch{u(0)}try{const X=be(re(B,"tasks"),_e("assignedTo","==",t.uid)),M=(await we(X)).docs.map($=>({id:$.id,...$.data()}));j(M.sort(($,F)=>{var H,L;return(((H=F.createdAt)==null?void 0:H.seconds)||0)-(((L=$.createdAt)==null?void 0:L.seconds)||0)}))}catch(X){console.error("   :",X)}o({totalRestaurants:O,totalOrders:E,totalEarnings:S,pendingOrders:p})}catch(T){console.error("   :",T)}finally{h(!1)}})()},[t]);const k=async(T,O)=>{try{const V={status:O,updatedAt:te()};O==="completed"&&(V.completedAt=te()),await ge(Y(B,"tasks",T),V),j(y=>y.map(p=>p.id===T?{...p,status:O}:p)),n.success(O==="in_progress"?"  ":O==="completed"?"   ! ":"  ")}catch{n.error("   ")}};return b.useEffect(()=>{t&&(async()=>{try{const T=await Pe(Y(B,"users",t.uid));T.exists()&&g({uid:T.id,...T.data()})}catch(T){console.error("    :",T)}})()},[t]),d?r.jsx(qe,{allow:["admin"],children:r.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:" ..."})}):r.jsx(qe,{allow:["admin"],children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"  "}),r.jsx("p",{className:"text-gray-600 mt-2",children:"   ! "})]}),r.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[r.jsxs("button",{onClick:()=>i("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${s==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(nd,{className:"w-5 h-5"})," "]}),r.jsxs("button",{onClick:()=>i("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${s==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Xn,{className:"w-5 h-5"}),""]}),r.jsxs("button",{onClick:()=>i("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${s==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(mc,{className:"w-5 h-5"}),"",w.filter(T=>T.status==="pending"||T.status==="in_progress").length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:w.filter(T=>T.status==="pending"||T.status==="in_progress").length})]})]}),s==="profile"&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[r.jsx(Xn,{className:"w-6 h-6"}),""]}),f?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((v=f.name)==null?void 0:v.charAt(0))||((_=f.email)==null?void 0:_.charAt(0))||""}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:f.name||" "}),r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:" "})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:f.email})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),r.jsx("p",{className:"font-semibold text-gray-900",children:e==="admin"?"":e})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:f.uid})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[l.toFixed(2)," ."]})]})]})]}),r.jsx(ue,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"   "})]}):r.jsx("div",{className:"text-center py-8 text-gray-600",children:" ..."})]}),s==="tasks"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[r.jsx(mc,{className:"w-6 h-6"})," "]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(T=>r.jsxs("button",{onClick:()=>I(T),className:`px-4 py-2 rounded-xl font-semibold transition ${A===T?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[T==="all"&&" ",T==="pending"&&"  ",T==="in_progress"&&"  ",T==="completed"&&" "]},T))}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:w.filter(T=>T.status==="pending").length}),r.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w.filter(T=>T.status==="in_progress").length}),r.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),r.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:w.filter(T=>T.status==="completed").length}),r.jsx("p",{className:"text-sm text-green-700",children:""})]})]}),w.filter(T=>A==="all"||T.status===A).length===0?r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx("p",{className:"text-5xl mb-4",children:""}),r.jsxs("p",{className:"text-lg",children:["   ",A!=="all"&&"  "]}),r.jsx("p",{className:"text-sm mt-2",children:"      "})]}):r.jsx("div",{className:"space-y-4",children:w.filter(T=>A==="all"||T.status===A).map(T=>{var O,V,y;return r.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${T.status==="completed"?"bg-green-50 border-green-200":T.status==="in_progress"?"bg-blue-50 border-blue-200":T.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${T.priority==="high"?"bg-red-100 text-red-700":T.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:T.priority==="high"?" ":T.priority==="medium"?" ":" "}),r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${T.status==="pending"?"bg-yellow-100 text-yellow-700":T.status==="in_progress"?"bg-blue-100 text-blue-700":T.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[T.status==="pending"&&"  ",T.status==="in_progress"&&"  ",T.status==="completed"&&" ",T.status==="cancelled"&&" "]})]}),r.jsx("h3",{className:"font-bold text-lg text-gray-800",children:T.title}),T.description&&r.jsx("p",{className:"text-gray-600 mt-1",children:T.description}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[T.dueDate&&r.jsxs("span",{className:new Date(T.dueDate)<new Date&&T.status!=="completed"?"text-red-600 font-semibold":"",children:[" ",new Date(T.dueDate).toLocaleDateString("ar-SA"),new Date(T.dueDate)<new Date&&T.status!=="completed"&&" (!)"]}),r.jsxs("span",{children:[" ",((y=(V=(O=T.createdAt)==null?void 0:O.toDate)==null?void 0:V.call(O))==null?void 0:y.toLocaleDateString("ar-SA"))||" "]})]}),T.notes&&r.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:[" ",T.notes]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[T.status==="pending"&&r.jsx("button",{onClick:()=>k(T.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:" "}),T.status==="in_progress"&&r.jsxs("button",{onClick:()=>k(T.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[r.jsx(at,{className:"w-4 h-4"}),""]}),T.status==="completed"&&r.jsx("span",{className:"text-green-600 font-semibold text-center",children:"  "})]})]})},T.id)})})]})}),s==="dashboard"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-90",children:" "}),r.jsxs("h2",{className:"text-3xl font-bold",children:[l.toFixed(2)," ."]}),r.jsx("p",{className:"text-sm opacity-75 mt-2",children:"   50       "})]}),r.jsx(Fx,{className:"w-16 h-16 opacity-80"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:a.totalRestaurants})]}),r.jsx(Ps,{className:"w-12 h-12 text-primary opacity-30"})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:a.totalOrders})]}),r.jsx(Xd,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:a.pendingOrders})]}),r.jsx(nd,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" "}),r.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:a.totalEarnings.toFixed(2)})]}),r.jsx(nd,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ue,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"   "}),r.jsx(ue,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"     "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ue,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),r.jsx(ue,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:""}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"       "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ue,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),r.jsx(ue,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:" "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:[" : ",l.toFixed(2)," ."]}),r.jsx(ue,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]})]}),r.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 p-6 rounded-lg",children:[r.jsx("h4",{className:"font-bold text-sky-900 mb-2",children:"  :"}),r.jsxs("ul",{className:"text-sky-800 text-sm space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"50 "}),"         "]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"1 "}),"     (     )"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"1.5 "}),"       "]}),r.jsx("li",{children:"        "})]})]})]})]})})},VD=()=>{const{user:t,role:e}=He(),n=vn(),s=ls(),[i,a]=b.useState([]),[o,l]=b.useState(!0),[u,d]=b.useState(!1),[h,f]=b.useState(!1),[g,w]=b.useState(0),j=b.useRef(null),A=Hh(Rn),[I,k]=b.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});b.useEffect(()=>{v()},[]);const v=async()=>{try{const N=(await we(re(B,"restaurants"))).docs.map(E=>({id:E.id,...E.data()}));a(N)}catch(p){n.error("   "),console.error(p)}finally{l(!1)}},_=async p=>{if(p.preventDefault(),!I.name.trim()){n.warning("  ");return}try{f(!0);let N="";if(I.logoFile){const D=I.logoFile.name.replace(/\s+/g,"_").slice(-60),S=`uploads/restaurant_${Date.now()}_${D}`,X=_r(A,S),U=qd(X,I.logoFile,{contentType:I.logoFile.type||"image/jpeg"});await new Promise((M,$)=>{U.on("state_changed",F=>{const H=Math.round(F.bytesTransferred/F.totalBytes*100);w(H)},$,async()=>{N=await br(U.snapshot.ref),M()})})}const E=e==="admin",R=e==="developer";await tt(re(B,"restaurants"),{name:I.name,phone:I.phone,city:I.city,location:I.location,ownerId:"admin_"+Date.now(),email:(t==null?void 0:t.email)||"",logoUrl:N,createdAt:new Date,referredBy:E?t==null?void 0:t.uid:null,referrerType:E?"admin":R?"developer":null}),n.success("    "),E&&n.info("   75        "),k({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),d(!1),w(0),v()}catch(N){n.error("   "),console.error(N)}finally{f(!1)}},T=async p=>{if(await s.confirm("      ",{dangerous:!0,title:" "}))try{await Jn(Y(B,"restaurants",p)),n.success("   "),v()}catch(E){n.error("   "),console.error(E)}},O=async p=>{const N=!p.isVerified;if(await s.confirm(N?`    "${p.name}"`:`     "${p.name}"`,{title:N?"  ":"  ",confirmText:N?" ":"  "}))try{await ge(Y(B,"restaurants",p.id),{isVerified:N,verifiedAt:N?te():null,updatedAt:te()}),n.success(N?"   ":"  "),v()}catch(R){n.error(" "),console.error(R)}},V=async(p,N)=>{try{await ge(Y(B,"restaurants",p.id),{sellerTier:N,tierUpdatedAt:te(),updatedAt:te()});const E={bronze:"",silver:"",gold:""};n.success(`    ${E[N]} `),v()}catch(E){n.error(" "),console.error(E)}},y=({tier:p})=>{switch(p){case"gold":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(Dt,{className:"w-3 h-3"})," Gold"]});case"silver":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold rounded-full shadow",children:[r.jsx(Cp,{className:"w-3 h-3"})," Silver"]});default:return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-600 to-orange-600 text-white text-xs font-bold rounded-full shadow",children:[r.jsx(td,{className:"w-3 h-3"})," Bronze"]})}};return o?r.jsx(qe,{allow:["admin","developer"],children:r.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):r.jsx(qe,{allow:["admin","developer"],children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),r.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[r.jsx(Vc,{className:"w-5 h-5"}),"  "]})]}),u&&r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block font-semibold text-gray-700",children:" "}),r.jsxs("div",{className:"flex items-center gap-4",children:[I.logoPreview?r.jsx("img",{src:I.logoPreview,alt:" ",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):r.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:r.jsx(P1,{className:"w-8 h-8 text-gray-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("input",{ref:j,type:"file",accept:"image/*",className:"hidden",onChange:p=>{var E;const N=(E=p.target.files)==null?void 0:E[0];N&&k({...I,logoFile:N,logoPreview:URL.createObjectURL(N)})}}),r.jsxs("button",{type:"button",onClick:()=>{var p;return(p=j.current)==null?void 0:p.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[r.jsx(Vx,{className:"w-4 h-4"}),I.logoFile?" ":" "]}),I.logoFile&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:I.logoFile.name})]})]}),h&&g>0&&r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${g}%`}})})]}),r.jsx("input",{type:"text",placeholder:" ",value:I.name,onChange:p=>k({...I,name:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsx("input",{type:"text",placeholder:" ",value:I.phone,onChange:p=>k({...I,phone:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsx("input",{type:"text",placeholder:"",value:I.city,onChange:p=>k({...I,city:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsx("textarea",{placeholder:" / ",value:I.location,onChange:p=>k({...I,location:p.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",disabled:h,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:h?` ... ${g}%`:" "}),r.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:" "})]})]})]}),r.jsx("div",{className:"grid gap-4",children:i.length===0?r.jsx("div",{className:"text-center text-gray-500 py-12",children:"    "}):i.map(p=>r.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex gap-4",children:[p.logoUrl?r.jsx("img",{src:p.logoUrl,alt:p.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):r.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h3",{className:"text-xl font-bold text-primary",children:p.name}),p.isVerified&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[r.jsx(at,{className:"w-3 h-3"})," "]}),r.jsx(y,{tier:p.sellerTier})]}),p.city&&r.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",p.city]}),p.phone&&r.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",p.phone]}),p.location&&r.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",p.location]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>O(p),className:`p-2.5 rounded-xl transition flex items-center gap-1 text-sm font-semibold ${p.isVerified?"bg-green-100 hover:bg-green-200 text-green-700":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:p.isVerified?" ":" ",children:[r.jsx(Ao,{className:"w-4 h-4"}),p.isVerified?"":""]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{className:"p-2.5 rounded-xl bg-amber-100 hover:bg-amber-200 text-amber-700 transition flex items-center gap-1 text-sm font-semibold",children:[r.jsx(td,{className:"w-4 h-4"}),"",r.jsx(A1,{className:"w-3 h-3"})]}),r.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white rounded-xl shadow-xl border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 min-w-[140px]",children:[r.jsxs("button",{onClick:()=>V(p,"bronze"),className:`w-full px-4 py-2.5 text-right hover:bg-amber-50 transition flex items-center gap-2 first:rounded-t-xl ${p.sellerTier==="bronze"||!p.sellerTier?"bg-amber-50":""}`,children:[r.jsx(td,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"font-semibold",children:"Bronze"})]}),r.jsxs("button",{onClick:()=>V(p,"silver"),className:`w-full px-4 py-2.5 text-right hover:bg-gray-50 transition flex items-center gap-2 ${p.sellerTier==="silver"?"bg-gray-100":""}`,children:[r.jsx(Cp,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"font-semibold",children:"Silver"})]}),r.jsxs("button",{onClick:()=>V(p,"gold"),className:`w-full px-4 py-2.5 text-right hover:bg-yellow-50 transition flex items-center gap-2 last:rounded-b-xl ${p.sellerTier==="gold"?"bg-yellow-50":""}`,children:[r.jsx(Dt,{className:"w-4 h-4 text-amber-500"}),r.jsx("span",{className:"font-semibold",children:"Gold"})]})]})]}),r.jsx("button",{onClick:()=>T(p.id),className:"p-2.5 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:" ",children:r.jsx(In,{className:"w-4 h-4"})})]})]})},p.id))})]})})},rf={pending:"  ",accepted:" ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "},FD=()=>{const t=vn(),[e,n]=b.useState([]),[s,i]=b.useState(!0),[a,o]=b.useState("all");b.useEffect(()=>{l()},[a]);const l=async()=>{try{let u;a==="all"?u=be(re(B,"orders"),as("createdAt","desc")):u=be(re(B,"orders"),_e("status","==",a),as("createdAt","desc"));const h=(await we(u)).docs.map(f=>({id:f.id,...f.data()}));n(h)}catch(u){t.error("   "),console.error(u)}finally{i(!1)}};return s?r.jsx(qe,{allow:["admin","developer"],children:r.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):r.jsx(qe,{allow:["admin","developer"],children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),r.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[r.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${a==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[" (",e.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(u=>{const d=e.filter(h=>h.status===u).length;return r.jsxs("button",{onClick:()=>o(u),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${a===u?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[rf[u]," (",d,")"]},u)})]}),r.jsx("div",{className:"space-y-4",children:e.length===0?r.jsxs("div",{className:"text-center text-gray-500 py-12",children:["   ",a!=="all"&&` "${rf[a]}"`]}):e.map(u=>{var d,h;return r.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold",children:[" #",u.id.slice(-8)]}),r.jsx("p",{className:"text-gray-600 text-sm",children:u.createdAt?new Date(u.createdAt).toLocaleDateString("ar-SA"):""})]}),r.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${u.status==="pending"?"bg-yellow-500":u.status==="delivered"?"bg-green-600":u.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:rf[u.status]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:" ID"}),r.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[u.customerId.slice(0,12),"..."]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:""}),r.jsx("p",{className:"font-semibold text-gray-800",children:u.restaurantName||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:""}),r.jsx("p",{className:"text-sm text-gray-800",children:u.address})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:""}),r.jsxs("p",{className:"text-lg font-bold text-primary",children:[((d=u.total)==null?void 0:d.toFixed(2))||0," ."]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[r.jsx("p",{className:"font-semibold mb-2",children:":"}),r.jsx("div",{className:"space-y-1",children:(h=u.items)==null?void 0:h.map((f,g)=>r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsxs("span",{children:[f.name,"  ",f.qty]}),r.jsxs("span",{children:[(f.price*f.qty).toFixed(2)," ."]})]},g))})]})]},u.id)})})]})})},Kn={projectId:Rn.options.projectId,authDomain:Rn.options.authDomain,storageBucket:Rn.options.storageBucket,messagingSenderId:Rn.options.messagingSenderId,appId:Rn.options.appId},UD=()=>{var Hn,Si,Ci,$o;const{user:t}=He(),e=vn(),n=ls(),s=Hh(Rn),[i,a]=b.useState("overview"),[o,l]=b.useState(!0),[u,d]=b.useState(!1),[h,f]=b.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[g,w]=b.useState({}),[j,A]=b.useState([]),[I,k]=b.useState([]),[v,_]=b.useState([]),[T,O]=b.useState([]),[V,y]=b.useState(!1),[p,N]=b.useState({}),[E,R]=b.useState(null),[D,S]=b.useState({}),[X,U]=b.useState(!1),[M,$]=b.useState(null),[F,H]=b.useState({}),[L,se]=b.useState("all"),[ee,me]=b.useState("all"),[de,Ce]=b.useState(null),[Ve,Xe]=b.useState(!1),[Fe,Vt]=b.useState(""),[Ye,kt]=b.useState(""),[un,Hs]=b.useState(""),[ks,Ir]=b.useState(""),[ki,ma]=b.useState(!1),[Ei,Ws]=b.useState(!1),[Bn,Tr]=b.useState(""),[Sr,Ks]=b.useState(""),[zn,Cr]=b.useState(""),[rt,pt]=b.useState(""),[cs,le]=b.useState(!1),[Ne,We]=b.useState(!1),[Ue,Ro]=b.useState(""),[fa,pa]=b.useState(""),[Fc,Uc]=b.useState(""),[ga,Po]=b.useState(""),[Es,Ar]=b.useState(""),[Rr,xa]=b.useState(""),[Is,Do]=b.useState(!1),[us,$c]=b.useState([]),[Ii,ya]=b.useState(!1),[Et,va]=b.useState(""),[Pr,Gs]=b.useState(""),[wa,Oo]=b.useState(""),[Qs,Lo]=b.useState("medium"),[Bc,Dr]=b.useState(""),[Mo,ba]=b.useState(!1),[ds,Ts]=b.useState("all"),[qn,zc]=b.useState([]),[qc,Hc]=b.useState("all"),[Kh,Gh]=b.useState(null),[Bx,Vo]=b.useState(null),[Qh,Wc]=b.useState(99),[_a,Or]=b.useState(30);t!=null&&t.email;const Fo=async()=>{if(!Fe.trim()||!un.trim()){e.warning("    ");return}if(un.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${Fe}
 ${Ye||" "}

:         .`,{title:"  "})){ma(!0);try{const G=(await jl(ts,Fe.trim(),un)).user.uid;await Bt(Y(B,"users",G),{email:Fe.trim(),name:Ye.trim()||" ",phone:ks.trim()||"",role:"admin",createdAt:te()}),await Bt(Y(B,"wallets",G),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:te()}),e.success("     "),e.info("        "),Vt(""),kt(""),Hs(""),Ir(""),Xe(!1)}catch(K){console.error("   :",K),K.code==="auth/email-already-in-use"?e.error("   "):K.code==="auth/invalid-email"?e.error("   "):K.code==="auth/weak-password"?e.error("   "):e.error("  : "+(K.message||"  "))}finally{ma(!1)}}},Xh=async()=>{if(!Bn.trim()||!zn.trim()){e.warning("    ");return}if(zn.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${Bn}
 ${Sr||" "}
 ${rt||" "}`,{title:"  "})){le(!0);try{const G=(await jl(ts,Bn.trim(),zn)).user.uid;await Bt(Y(B,"users",G),{email:Bn.trim(),name:Sr.trim()||" ",phone:rt.trim()||"",role:"courier",createdAt:te()}),e.success("     "),e.info("        "),Tr(""),Ks(""),Cr(""),pt(""),Ws(!1)}catch(K){console.error("   :",K),K.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(K.message||"  "))}finally{le(!1)}}},Kc=async()=>{if(!Ue.trim()){e.warning("  ");return}if(!Es.trim()||!Rr.trim()){e.warning("   ");return}if(await n.confirm(`   :

 ${Ue}
 ${fa||" "}
  : ${Es}`,{title:"  "})){Do(!0);try{const G=(await jl(ts,Es.trim(),Rr)).user.uid;await Bt(Y(B,"users",G),{email:Es.trim(),name:Ue.trim()+" - ",role:"owner",createdAt:te()}),await Bt(Y(B,"restaurants",G),{name:Ue.trim(),ownerId:G,email:ga.trim()||Es.trim(),phone:Fc.trim()||"",city:fa.trim()||"",referredBy:t==null?void 0:t.uid,referrerType:"developer",createdAt:te()}),e.success("      "),e.info("        "),Ro(""),pa(""),Uc(""),Po(""),Ar(""),xa(""),We(!1)}catch(K){console.error("   :",K),K.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(K.message||"  "))}finally{Do(!1)}}},Gc=()=>{const C=new Date,K=new Date(C.getFullYear(),C.getMonth(),C.getDate()),G=new Date(K.getTime()-7*24*60*60*1e3),fe=new Date(K.getTime()-30*24*60*60*1e3),De=v.filter(Ie=>{var ht,It;return(((It=(ht=Ie.createdAt)==null?void 0:ht.toDate)==null?void 0:It.call(ht))||new Date(0))>=K&&Ie.status!=="cancelled"}),$e=v.filter(Ie=>{var ht,It;return(((It=(ht=Ie.createdAt)==null?void 0:ht.toDate)==null?void 0:It.call(ht))||new Date(0))>=G&&Ie.status!=="cancelled"}),Ct=v.filter(Ie=>{var ht,It;return(((It=(ht=Ie.createdAt)==null?void 0:ht.toDate)==null?void 0:It.call(ht))||new Date(0))>=fe&&Ie.status!=="cancelled"}),dn=v.filter(Ie=>Ie.status==="delivered");return{todayRevenue:De.reduce((Ie,Be)=>Ie+(Be.total||0),0),todayOrders:De.length,todayPlatformFee:De.reduce((Ie,Be)=>Ie+(Be.platformFee||0),0),weekRevenue:$e.reduce((Ie,Be)=>Ie+(Be.total||0),0),weekOrders:$e.length,weekPlatformFee:$e.reduce((Ie,Be)=>Ie+(Be.platformFee||0),0),monthRevenue:Ct.reduce((Ie,Be)=>Ie+(Be.total||0),0),monthOrders:Ct.length,monthPlatformFee:Ct.reduce((Ie,Be)=>Ie+(Be.platformFee||0),0),totalRevenue:dn.reduce((Ie,Be)=>Ie+(Be.total||0),0),totalPlatformFee:dn.reduce((Ie,Be)=>Ie+(Be.platformFee||0),0),totalAdminCommission:dn.reduce((Ie,Be)=>Ie+(Be.adminCommission||0),0)}},wt=async()=>{try{const[C,K,G,fe,De]=await Promise.all([we(re(B,"users")),we(re(B,"restaurants")),we(re(B,"menuItems")),we(re(B,"orders")),we(re(B,"wallets"))]);let $e={docs:[]};try{$e=await we(re(B,"tasks"))}catch{}let Ct={docs:[]};try{Ct=await we(re(B,"packageRequests"))}catch{}const dn=C.docs.map(pe=>({uid:pe.id,...pe.data()}));A(dn);const Ie=K.docs.map(pe=>({id:pe.id,...pe.data()}));k(Ie);const Be=fe.docs.map(pe=>({id:pe.id,...pe.data()}));_(Be);const ht=$e.docs.map(pe=>({id:pe.id,...pe.data()}));$c(ht.sort((pe,Mr)=>{var Sn,Wn;return(((Sn=Mr.createdAt)==null?void 0:Sn.seconds)||0)-(((Wn=pe.createdAt)==null?void 0:Wn.seconds)||0)}));const It=Ct.docs.map(pe=>({id:pe.id,...pe.data()}));zc(It.sort((pe,Mr)=>{var Sn,Wn;return(((Sn=Mr.createdAt)==null?void 0:Sn.seconds)||0)-(((Wn=pe.createdAt)==null?void 0:Wn.seconds)||0)}));const Na={};De.docs.forEach(pe=>{Na[pe.id]=pe.data()});const Zc=Na.app_earnings||{balance:0,totalEarnings:0},Bo=dn.filter(pe=>pe.role==="admin"),Lr=dn.filter(pe=>pe.role==="courier"),em=dn.filter(pe=>pe.role==="customer"),tm=dn.filter(pe=>pe.role==="owner"),nm=Bo.map(pe=>{const Mr=Ie.filter(Wn=>Wn.referredBy===pe.uid),Sn=Na[pe.uid]||{balance:0,totalEarnings:0};return{uid:pe.uid,email:pe.email,name:pe.name,walletBalance:Sn.balance||0,totalEarnings:Sn.totalEarnings||0,restaurantsCount:Mr.length,restaurants:Mr}});O(nm),f({users:dn.length,restaurants:Ie.length,menuItems:G.size,orders:Be.length,pendingOrders:Be.filter(pe=>pe.status==="pending").length,deliveredOrders:Be.filter(pe=>pe.status==="delivered").length,admins:Bo.length,couriers:Lr.length,customers:em.length,owners:tm.length,totalAppEarnings:Zc.totalEarnings||0});const hs=await Pe(Y(B,"settings","general"));if(hs.exists()){const pe=hs.data();w(pe),N(pe)}else{const pe={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};w(pe),N(pe)}}catch(C){console.error("   :",C),e.error("  ")}finally{l(!1),d(!1)}};b.useEffect(()=>{wt()},[]);const Ti=()=>{d(!0),wt(),e.info("  ...")},Uo=async()=>{try{await Bt(Y(B,"settings","general"),p,{merge:!0}),w(p),y(!1),e.success("    ")}catch(C){console.error("   :",C),e.error("  ")}},Qc=async C=>{try{await ge(Y(B,"restaurants",C),{...D,updatedAt:te()}),R(null),e.success("    "),wt()}catch(K){console.error("   :",K),e.error("  ")}},Xc=async(C,K)=>{try{if(!K.type.startsWith("image/")){e.warning("   ");return}if(K.size>5*1024*1024){e.warning("        5MB");return}U(!0);const G=K.name.replace(/\s+/g,"_"),fe=`restaurants/${C}/logo_${Date.now()}_${G}`,De=_r(s,fe),$e={contentType:K.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await cc(De,K,$e);const Ct=await br(De);await ge(Y(B,"restaurants",C),{logoUrl:Ct,updatedAt:te()}),e.success("    "),wt()}catch(G){console.error("   :",G),e.error("  ")}finally{U(!1)}},Yh=async C=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await Jn(Y(B,"restaurants",C)),e.success("   "),wt()}catch(G){console.error("   :",G),e.error("  ")}},Jh=async C=>{try{await ge(Y(B,"users",C),{...F,updatedAt:te()}),$(null),e.success("    "),wt()}catch(K){console.error("   :",K),e.error("  ")}},Yc=async C=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await Jn(Y(B,"users",C)),e.success("     "),e.warning(":      Firebase Auth"),wt()}catch(G){console.error("   :",G),e.error("  ")}},Jc=async(C,K)=>{try{await ge(Y(B,"orders",C),{status:K,updatedAt:te()}),e.success("    "),wt()}catch(G){console.error("   :",G),e.error("  ")}},Zh=C=>{switch(C){case"customer":return" ";case"owner":return"  ";case"courier":return" ";case"admin":return" ";case"developer":return" ";default:return C}},Xs=C=>{switch(C){case"pending":return"  ";case"accepted":return" ";case"preparing":return"  ";case"ready":return" ";case"out_for_delivery":return"  ";case"delivered":return"  ";case"cancelled":return" ";default:return C}};return o?r.jsx(qe,{allow:["developer"],children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx(rn,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-gray-600",children:"   ..."})]})})}):r.jsx(qe,{allow:["developer"],children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-extrabold text-primary",children:"   "}),r.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),r.jsxs("button",{onClick:Ti,disabled:u,className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(rn,{className:`w-5 h-5 ${u?"animate-spin":""}`}),""]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[{id:"overview",label:"  "},{id:"finance",label:" "},{id:"restaurants",label:" "},{id:"storeAnalytics",label:"  "},{id:"packages",label:"  "},{id:"licenses",label:" "},{id:"orders",label:" "},{id:"users",label:" "},{id:"couriers",label:" "},{id:"admins",label:" "},{id:"tasks",label:" "},{id:"settings",label:" "},{id:"tools",label:" "}].map(C=>r.jsx("button",{onClick:()=>a(C.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition ${i===C.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:C.label},C.id))}),i==="overview"&&r.jsxs("div",{className:"space-y-6",children:[qn.filter(C=>["pending","payment_sent"].includes(C.status)).length>0&&r.jsx("div",{className:"bg-gradient-to-r from-amber-100 to-orange-100 border-2 border-amber-300 rounded-2xl p-5 shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center animate-pulse",children:r.jsx(on,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-amber-800",children:"    "}),r.jsxs("p",{className:"text-amber-700",children:[qn.filter(C=>C.status==="pending").length>0&&r.jsxs("span",{children:[" ",qn.filter(C=>C.status==="pending").length,"  "]}),qn.filter(C=>C.status==="pending").length>0&&qn.filter(C=>C.status==="payment_sent").length>0&&"  ",qn.filter(C=>C.status==="payment_sent").length>0&&r.jsxs("span",{children:[" ",qn.filter(C=>C.status==="payment_sent").length,"  "]})]})]})]}),r.jsx("button",{onClick:()=>a("packages"),className:"bg-amber-500 hover:bg-amber-600 text-white px-6 py-3 rounded-xl font-bold shadow-lg transition transform hover:scale-105",children:"  "})]})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.users}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.restaurants}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.orders}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white text-center cursor-pointer hover:scale-105 transition",onClick:()=>a("packages"),children:[r.jsx("p",{className:"text-3xl font-bold",children:qn.filter(C=>C.status==="pending").length}),r.jsx("p",{className:"text-sm opacity-90",children:"  "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.couriers}),r.jsx("p",{className:"text-sm opacity-90",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-4 text-white text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:h.totalAppEarnings.toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  "})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(c3,{className:"w-6 h-6 text-orange-500"}),r.jsx("h2",{className:"text-xl font-bold",children:" Firebase"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),r.jsx("p",{className:"font-mono text-sm",children:Kn.projectId})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),r.jsx("p",{className:"font-mono text-sm",children:Kn.storageBucket})]})]}),r.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[r.jsx("a",{href:`https://console.firebase.google.com/project/${Kn.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:" Console"}),r.jsx("a",{href:`https://console.firebase.google.com/project/${Kn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:" Firestore"}),r.jsx("a",{href:`https://console.firebase.google.com/project/${Kn.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:" Auth"}),r.jsx("a",{href:`https://console.firebase.google.com/project/${Kn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:" Storage"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.customers}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.owners}),r.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:h.couriers}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.admins}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]}),r.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),r.jsx("p",{className:"text-sm text-gray-600",children:""})]})]})]})]}),i==="finance"&&r.jsx("div",{className:"space-y-6",children:(()=>{const C=Gc();return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:C.totalRevenue.toFixed(0)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:C.totalPlatformFee.toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:C.totalAdminCommission.toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),r.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-3xl font-bold",children:(C.totalPlatformFee+C.totalAdminCommission).toFixed(2)}),r.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]})]})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:" "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold",children:C.todayOrders})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsxs("span",{className:"font-bold",children:[C.todayRevenue.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[C.todayPlatformFee.toFixed(2)," ."]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"  7 "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold",children:C.weekOrders})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsxs("span",{className:"font-bold",children:[C.weekRevenue.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[C.weekPlatformFee.toFixed(2)," ."]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"  30 "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold",children:C.monthOrders})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsxs("span",{className:"font-bold",children:[C.monthRevenue.toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[C.monthPlatformFee.toFixed(2)," ."]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"   "}),r.jsx("div",{className:"space-y-3",children:I.map(K=>({...K,ordersCount:v.filter(G=>G.restaurantId===K.id&&G.status==="delivered").length,revenue:v.filter(G=>G.restaurantId===K.id&&G.status==="delivered").reduce((G,fe)=>G+(fe.total||0),0)})).sort((K,G)=>G.revenue-K.revenue).slice(0,5).map((K,G)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:G===0?"":G===1?"":G===2?"":`#${G+1}`}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:K.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[K.ordersCount," "]})]})]}),r.jsxs("p",{className:"font-bold text-green-600",children:[K.revenue.toFixed(2)," ."]})]},K.id))})]})]})})()}),i==="restaurants"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",I.length,")"]}),r.jsx("button",{onClick:()=>We(!Ne),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold",children:Ne?" ":"  "})]}),Ne&&r.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[r.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"text",placeholder:":  ",value:Ue,onChange:C=>Ro(C.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),r.jsx("input",{type:"text",placeholder:": ",value:fa,onChange:C=>pa(C.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Fc,onChange:C=>Uc(C.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:ga,onChange:C=>Po(C.target.value),className:"w-full border rounded-xl p-3"})]})]}),r.jsxs("div",{className:"border-t mt-4 pt-4",children:[r.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"    ( )"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   *"}),r.jsx("input",{type:"email",placeholder:"owner@example.com",value:Es,onChange:C=>Ar(C.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"password",placeholder:"6   ",value:Rr,onChange:C=>xa(C.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),r.jsx("button",{onClick:Kc,disabled:Is||!Ue.trim()||!Es.trim()||!Rr.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Is?r.jsxs(r.Fragment,{children:[r.jsx(rn,{className:"w-5 h-5 animate-spin"})," ..."]}):"  "})]}),r.jsx("div",{className:"space-y-4",children:I.map(C=>{var K;return r.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:E===C.id?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"text",value:D.name||"",onChange:G=>S({...D,name:G.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"text",value:D.phone||"",onChange:G=>S({...D,phone:G.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"email",value:D.email||"",onChange:G=>S({...D,email:G.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:""}),r.jsx("input",{type:"text",value:D.city||"",onChange:G=>S({...D,city:G.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-sm text-gray-600",children:""}),r.jsx("input",{type:"text",value:D.location||"",onChange:G=>S({...D,location:G.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-sm text-gray-600",children:"  ()"}),r.jsxs("select",{value:D.referredBy||"",onChange:G=>S({...D,referredBy:G.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[r.jsx("option",{value:"",children:"--   ( ) --"}),j.filter(G=>G.role==="admin").map(G=>r.jsxs("option",{value:G.uid,children:[" ",G.name||G.email]},G.uid))]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:" "}),r.jsx("input",{type:"file",accept:"image/*",onChange:G=>{var De;const fe=(De=G.target.files)==null?void 0:De[0];fe&&Xc(C.id,fe)},className:"w-full border rounded-xl p-2 mt-1",disabled:X}),X&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" ..."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>Qc(C.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[r.jsx(D1,{className:"w-4 h-4"})," "]}),r.jsxs("button",{onClick:()=>R(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[r.jsx(jr,{className:"w-4 h-4"})," "]})]})]}):r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:C.logoUrl?r.jsx("img",{src:C.logoUrl,alt:C.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg",children:C.name}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[C.phone&&r.jsxs("p",{children:[" ",C.phone]}),C.email&&r.jsxs("p",{children:[" ",C.email]}),C.city&&r.jsxs("p",{children:[" ",C.city]}),C.referredBy&&r.jsxs("p",{className:"text-purple-600",children:["  : ",((K=T.find(G=>G.uid===C.referredBy))==null?void 0:K.name)||C.referredBy.slice(0,8)]})]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{R(C.id),S(C)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"",children:r.jsx(fc,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>Yh(C.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"",children:r.jsx(In,{className:"w-5 h-5"})})]}),r.jsxs("select",{value:C.referredBy||"",onChange:async G=>{const fe=G.target.value;try{await ge(Y(B,"restaurants",C.id),{referredBy:fe||null,updatedAt:te()}),e.success(fe?"   ":"   "),wt()}catch{e.error("   ")}},className:"text-xs border rounded-lg p-1",title:" ",children:[r.jsx("option",{value:"",children:"  "}),j.filter(G=>G.role==="admin").map(G=>r.jsxs("option",{value:G.uid,children:[" ",G.name||G.email]},G.uid))]})]})]})},C.id)})})]}),i==="orders"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",v.length,")"]}),r.jsxs("select",{value:L,onChange:C=>se(C.target.value),className:"border rounded-xl p-2",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"accepted",children:""}),r.jsx("option",{value:"preparing",children:" "}),r.jsx("option",{value:"ready",children:""}),r.jsx("option",{value:"out_for_delivery",children:" "}),r.jsx("option",{value:"delivered",children:" "}),r.jsx("option",{value:"cancelled",children:""})]})]}),r.jsx("div",{className:"space-y-3",children:v.filter(C=>L==="all"||C.status===L).sort((C,K)=>{var G,fe;return(((G=K.createdAt)==null?void 0:G.seconds)||0)-(((fe=C.createdAt)==null?void 0:fe.seconds)||0)}).map(C=>{var K,G;return r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[r.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-bold",children:[" #",C.id.slice(-8)]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",C.restaurantName||""]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",C.address]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",(K=C.total)==null?void 0:K.toFixed(2)," ."]}),C.platformFee&&r.jsxs("p",{className:"text-xs text-green-600",children:[" : ",C.platformFee," .",C.adminCommission?` |  : ${C.adminCommission} .`:""]})]}),r.jsxs("div",{className:"text-left",children:[r.jsx("span",{className:`inline-block px-3 py-1 rounded-xl text-sm font-semibold ${C.status==="delivered"?"bg-green-100 text-green-700":C.status==="cancelled"?"bg-red-100 text-red-700":C.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:Xs(C.status)}),r.jsxs("select",{value:C.status,onChange:fe=>Jc(C.id,fe.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"accepted",children:""}),r.jsx("option",{value:"preparing",children:" "}),r.jsx("option",{value:"ready",children:""}),r.jsx("option",{value:"out_for_delivery",children:" "}),r.jsx("option",{value:"delivered",children:" "}),r.jsx("option",{value:"cancelled",children:""})]})]})]}),r.jsxs("div",{className:"mt-3 pt-3 border-t",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(G=C.items)==null?void 0:G.map((fe,De)=>r.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[fe.name,"  ",fe.qty]},De))})]})]},C.id)})})]}),i==="users"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",j.length,")"]}),r.jsxs("select",{value:ee,onChange:C=>me(C.target.value),className:"border rounded-xl p-2",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"customer",children:""}),r.jsx("option",{value:"owner",children:" "}),r.jsx("option",{value:"courier",children:""}),r.jsx("option",{value:"admin",children:""}),r.jsx("option",{value:"developer",children:""})]})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.filter(C=>ee==="all"||C.role===ee).map(C=>r.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:M===C.uid?r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"",value:F.name||"",onChange:K=>H({...F,name:K.target.value}),className:"w-full border rounded-xl p-2"}),r.jsx("input",{type:"text",placeholder:"",value:F.phone||"",onChange:K=>H({...F,phone:K.target.value}),className:"w-full border rounded-xl p-2"}),r.jsxs("select",{value:F.role||"customer",onChange:K=>H({...F,role:K.target.value}),className:"w-full border rounded-xl p-2",children:[r.jsx("option",{value:"customer",children:""}),r.jsx("option",{value:"owner",children:" "}),r.jsx("option",{value:"courier",children:""}),r.jsx("option",{value:"admin",children:""}),r.jsx("option",{value:"developer",children:""})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Jh(C.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:""}),r.jsx("button",{onClick:()=>$(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:""})]})]}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:C.name||" "}),r.jsx("p",{className:"text-sm text-gray-600",children:C.email}),r.jsx("p",{className:"text-xs mt-1",children:Zh(C.role)})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>{$(C.uid),H(C)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:r.jsx(fc,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Yc(C.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:r.jsx(In,{className:"w-4 h-4"})})]})]})})},C.uid))})]}),i==="couriers"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["  (",h.couriers,")"]}),r.jsx("button",{onClick:()=>Ws(!Ei),className:"flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-xl font-semibold",children:Ei?" ":"  "})]}),Ei&&r.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[r.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"   "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"email",placeholder:"courier@example.com",value:Bn,onChange:C=>Tr(C.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"password",placeholder:"6   ",value:zn,onChange:C=>Cr(C.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),r.jsx("input",{type:"text",placeholder:" ",value:Sr,onChange:C=>Ks(C.target.value),className:"w-full border rounded-xl p-3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:rt,onChange:C=>pt(C.target.value),className:"w-full border rounded-xl p-3"})]})]}),r.jsx("button",{onClick:Xh,disabled:cs||!Bn.trim()||!zn.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:cs?r.jsxs(r.Fragment,{children:[r.jsx(rn,{className:"w-5 h-5 animate-spin"})," ..."]}):"   "})]}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[j.filter(C=>C.role==="courier").map(C=>r.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:C.name||" "}),r.jsx("p",{className:"text-sm text-gray-600",children:C.email}),C.phone&&r.jsxs("p",{className:"text-sm text-gray-600",children:[" ",C.phone]})]})]}),r.jsx("div",{className:"mt-4 pt-3 border-t",children:r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-lg font-bold text-green-600",children:v.filter(K=>K.courierId===C.uid&&K.status==="delivered").length}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[r.jsx("p",{className:"text-lg font-bold text-blue-600",children:v.filter(K=>K.courierId===C.uid&&K.status==="out_for_delivery").length}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]})]})})]},C.uid)),h.couriers===0&&r.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"   "})]})]}),i==="admins"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["   (",T.length,")"]}),r.jsxs("button",{onClick:()=>Xe(!Ve),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[r.jsx(pc,{className:"w-5 h-5"}),Ve?"":" "]})]}),Ve&&r.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[r.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"    "}),r.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"           "}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"  :"}),r.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[j.filter(C=>C.role==="customer").slice(0,10).map(C=>r.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:C.name||" "}),r.jsx("p",{className:"text-sm text-gray-500",children:C.email})]}),r.jsx("button",{onClick:async()=>{if(await n.confirm(`   ${C.name||C.email}  `,{title:"  "}))try{await ge(Y(B,"users",C.uid),{role:"admin"}),e.success("     "),Xe(!1),wt()}catch{e.error("  ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:" "})]},C.uid)),j.filter(C=>C.role==="customer").length===0&&r.jsx("p",{className:"text-gray-500 text-center py-4",children:"    "})]})]}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"     :"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"email",placeholder:"admin@example.com",value:Fe,onChange:C=>Vt(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),r.jsx("input",{type:"password",placeholder:"  (6   )",value:un,onChange:C=>Hs(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),r.jsx("input",{type:"text",placeholder:" ",value:Ye,onChange:C=>kt(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),r.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:ks,onChange:C=>Ir(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),r.jsx("button",{onClick:Fo,disabled:ki||!Fe.trim()||!un.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:ki?r.jsxs(r.Fragment,{children:[r.jsx(rn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pc,{className:"w-5 h-5"}),"  "]})}),r.jsx("p",{className:"text-xs text-orange-600 mt-2",children:" :        .     ."})]}),r.jsx("div",{className:"border-t pt-4 mt-4",children:r.jsx("p",{className:"text-xs text-gray-500",children:'         ""'})})]}),r.jsxs("div",{className:"space-y-4",children:[T.map(C=>r.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[r.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>Ce(de===C.uid?null:C.uid),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:C.name||" "}),r.jsx("p",{className:"text-sm text-gray-600",children:C.email})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-left",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fx,{className:"w-4 h-4 text-green-600"}),r.jsxs("span",{className:"font-bold text-green-600",children:[C.walletBalance.toFixed(2)," ."]})]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[": ",C.totalEarnings.toFixed(2)," . | ",C.restaurantsCount," "]})]}),de===C.uid?r.jsx(i6,{className:"w-5 h-5 text-gray-400"}):r.jsx(A1,{className:"w-5 h-5 text-gray-400"})]})]})}),de===C.uid&&r.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[r.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["      (",C.restaurants.length,"):"]}),C.restaurants.length>0?r.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:C.restaurants.map(K=>r.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:K.logoUrl?r.jsx("img",{src:K.logoUrl,alt:K.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-sm",children:K.name}),r.jsx("p",{className:"text-xs text-gray-500",children:K.city||" "})]})]},K.id))}):r.jsx("p",{className:"text-gray-500 text-sm",children:"    "}),r.jsx("div",{className:"mt-4 pt-3 border-t",children:r.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[r.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-green-700",children:C.walletBalance.toFixed(2)}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-blue-700",children:C.totalEarnings.toFixed(2)}),r.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-purple-700",children:v.filter(K=>K.referredBy===C.uid).length}),r.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})})]})]},C.uid)),T.length===0&&r.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"   "})]})]}),i==="settings"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold",children:"  "}),V?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{y(!1),N(g)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:""}),r.jsx("button",{onClick:Uo,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:" "})]}):r.jsx("button",{onClick:()=>y(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:" "})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),V?r.jsx("input",{type:"number",value:p.deliveryFee||0,onChange:C=>N({...p,deliveryFee:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[g.deliveryFee||7," ."]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),V?r.jsx("input",{type:"number",step:"0.1",value:p.platformFee||1,onChange:C=>N({...p,platformFee:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[g.platformFee||1," ./"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),V?r.jsx("input",{type:"number",step:"0.05",value:p.adminCommissionRate||.75,onChange:C=>N({...p,adminCommissionRate:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[g.adminCommissionRate||.75," ./"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   "}),V?r.jsx("input",{type:"number",value:p.minOrderAmount||0,onChange:C=>N({...p,minOrderAmount:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):r.jsxs("p",{className:"text-2xl font-bold",children:[g.minOrderAmount||20," ."]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),V?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"time",value:((Hn=p.workingHours)==null?void 0:Hn.open)||"09:00",onChange:C=>N({...p,workingHours:{...p.workingHours,open:C.target.value}}),className:"flex-1 border rounded-xl p-3"}),r.jsx("input",{type:"time",value:((Si=p.workingHours)==null?void 0:Si.close)||"23:00",onChange:C=>N({...p,workingHours:{...p.workingHours,close:C.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):r.jsxs("p",{className:"text-2xl font-bold",children:[((Ci=g.workingHours)==null?void 0:Ci.open)||"09:00"," - ",(($o=g.workingHours)==null?void 0:$o.close)||"23:00"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),V?r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:p.maintenanceMode||!1,onChange:C=>N({...p,maintenanceMode:C.target.checked}),className:"w-6 h-6"}),r.jsx("span",{className:"text-lg",children:p.maintenanceMode?"":""})]}):r.jsx("p",{className:`text-2xl font-bold ${g.maintenanceMode?"text-red-600":"text-green-600"}`,children:g.maintenanceMode?" ":" "})]})]})}),r.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[r.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"   (  = 1.75 .):"}),r.jsxs("div",{className:"text-sky-800 space-y-2",children:[r.jsxs("p",{children:[" ",r.jsx("strong",{children:" :"})," ",g.platformFee||1," .   "]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:" :"})," ",g.adminCommissionRate||.75," .   "]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[r.jsx("p",{className:"font-bold mb-2",children:" :   5 "}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:"    :"})]}),r.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[r.jsxs("li",{children:["  : 5  ",g.adminCommissionRate||.75," = ",r.jsxs("strong",{children:[(5*(g.adminCommissionRate||.75)).toFixed(2)," ."]})]}),r.jsxs("li",{children:["  : 5  ",g.platformFee||1," = ",r.jsxs("strong",{children:[(5*(g.platformFee||1)).toFixed(2)," ."]})]}),r.jsxs("li",{className:"text-green-700",children:[": ",r.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})]}),r.jsxs("p",{className:"mt-2",children:[" ",r.jsx("strong",{children:"    :"})]}),r.jsx("ul",{className:"mr-6 list-disc text-sm",children:r.jsxs("li",{children:["    : 5  1.75 = ",r.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})})]})]})]})]}),i==="tasks"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold",children:"   "}),r.jsxs("button",{onClick:()=>ya(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[r.jsx(Vc,{className:"w-5 h-5"})," "]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(C=>r.jsxs("button",{onClick:()=>Ts(C),className:`px-4 py-2 rounded-xl font-semibold transition ${ds===C?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[C==="all"&&" ",C==="pending"&&"  ",C==="in_progress"&&"  ",C==="completed"&&" ",C==="cancelled"&&" "]},C))}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:us.filter(C=>C.status==="pending").length}),r.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:us.filter(C=>C.status==="in_progress").length}),r.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),r.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:us.filter(C=>C.status==="completed").length}),r.jsx("p",{className:"text-sm text-green-700",children:""})]}),r.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:us.filter(C=>C.status==="cancelled").length}),r.jsx("p",{className:"text-sm text-red-700",children:""})]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:us.filter(C=>ds==="all"||C.status===ds).length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("p",{className:"text-4xl mb-2",children:""}),r.jsxs("p",{children:["   ",ds!=="all"&&"  "]})]}):r.jsx("div",{className:"divide-y",children:us.filter(C=>ds==="all"||C.status===ds).map(C=>{var G,fe,De;const K=j.find($e=>$e.uid===C.assignedTo);return r.jsx("div",{className:"p-4 hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${C.priority==="high"?"bg-red-100 text-red-700":C.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:C.priority==="high"?" ":C.priority==="medium"?" ":" "}),r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${C.status==="pending"?"bg-yellow-100 text-yellow-700":C.status==="in_progress"?"bg-blue-100 text-blue-700":C.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[C.status==="pending"&&"  ",C.status==="in_progress"&&"  ",C.status==="completed"&&" ",C.status==="cancelled"&&" "]})]}),r.jsx("h3",{className:"font-bold text-gray-800",children:C.title}),C.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[r.jsxs("span",{children:[" ",(K==null?void 0:K.name)||C.assignedToName||" "]}),C.dueDate&&r.jsxs("span",{children:[" ",new Date(C.dueDate).toLocaleDateString("ar-SA")]}),r.jsxs("span",{children:[" ",((De=(fe=(G=C.createdAt)==null?void 0:G.toDate)==null?void 0:fe.call(G))==null?void 0:De.toLocaleDateString("ar-SA"))||" "]})]}),C.notes&&r.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:[" ",C.notes]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[C.status==="pending"&&r.jsx("button",{onClick:async()=>{try{await ge(Y(B,"tasks",C.id),{status:"in_progress",updatedAt:te()}),e.success("  "),wt()}catch{e.error("   ")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:" ",children:""}),(C.status==="pending"||C.status==="in_progress")&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:async()=>{try{await ge(Y(B,"tasks",C.id),{status:"completed",completedAt:te(),updatedAt:te()}),e.success("  "),wt()}catch{e.error("   ")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:" ",children:""}),r.jsx("button",{onClick:async()=>{if(await n.confirm("    ",{dangerous:!0}))try{await ge(Y(B,"tasks",C.id),{status:"cancelled",updatedAt:te()}),e.success("  "),wt()}catch{e.error("   ")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]}),r.jsx("button",{onClick:async()=>{if(await n.confirm("     ",{dangerous:!0}))try{await Jn(Y(B,"tasks",C.id)),e.success("  "),wt()}catch{e.error("   ")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]})]})},C.id)})})}),Ii&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"   "}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),r.jsx("input",{type:"text",value:Et,onChange:C=>va(C.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:":    "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),r.jsx("textarea",{value:Pr,onChange:C=>Gs(C.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:" ..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),r.jsxs("select",{value:wa,onChange:C=>Oo(C.target.value),className:"w-full border rounded-xl px-4 py-2",children:[r.jsx("option",{value:"",children:"--   --"}),j.filter(C=>C.role==="admin").map(C=>r.jsx("option",{value:C.uid,children:C.name||C.email},C.uid))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),r.jsxs("select",{value:Qs,onChange:C=>Lo(C.target.value),className:"w-full border rounded-xl px-4 py-2",children:[r.jsx("option",{value:"low",children:" "}),r.jsx("option",{value:"medium",children:" "}),r.jsx("option",{value:"high",children:" "})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:" "}),r.jsx("input",{type:"date",value:Bc,onChange:C=>Dr(C.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>{ya(!1),va(""),Gs(""),Oo(""),Lo("medium"),Dr("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:""}),r.jsx("button",{onClick:async()=>{if(!Et.trim()||!wa){e.error("   ");return}ba(!0);try{const C=j.find(K=>K.uid===wa);await tt(re(B,"tasks"),{title:Et.trim(),description:Pr.trim(),assignedTo:wa,assignedToName:(C==null?void 0:C.name)||(C==null?void 0:C.email)||"",status:"pending",priority:Qs,dueDate:Bc||null,createdBy:t==null?void 0:t.uid,createdAt:te(),updatedAt:te(),completedAt:null,notes:""}),e.success("   "),ya(!1),va(""),Gs(""),Oo(""),Lo("medium"),Dr(""),wt()}catch(C){console.error(C),e.error("   ")}finally{ba(!1)}},disabled:Mo,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:Mo?" ...":" "})]})]})})]}),i==="tools"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"  "}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("button",{onClick:()=>{const C={exportDate:new Date().toISOString(),users:j.length,restaurants:I.length,orders:v.length,admins:T.length,stats:h,settings:g},K=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),G=URL.createObjectURL(K),fe=document.createElement("a");fe.href=G,fe.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,fe.click(),e.success("   ")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:" "}),r.jsx("p",{className:"text-xs opacity-75",children:"  JSON"})]})]}),r.jsxs("button",{onClick:()=>{const C=[[" ","","","",""].join(","),...v.map(De=>{var $e,Ct,dn;return[De.id.slice(-8),De.restaurantName||" ",De.total,De.status,((dn=(Ct=($e=De.createdAt)==null?void 0:$e.toDate)==null?void 0:Ct.call($e))==null?void 0:dn.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),K=new Blob(["\uFEFF"+C],{type:"text/csv;charset=utf-8"}),G=URL.createObjectURL(K),fe=document.createElement("a");fe.href=G,fe.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,fe.click(),e.success("   ")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:" "}),r.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]}),r.jsxs("button",{onClick:()=>{const C=[["","","",""].join(","),...j.map(De=>[De.name||" ",De.email,De.role,De.phone||""].join(","))].join(`
`),K=new Blob(["\uFEFF"+C],{type:"text/csv;charset=utf-8"}),G=URL.createObjectURL(K),fe=document.createElement("a");fe.href=G,fe.download=`users-${new Date().toISOString().split("T")[0]}.csv`,fe.click(),e.success("   ")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:" "}),r.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:async()=>{const C=v.filter(G=>G.status==="pending");if(C.length===0){e.info("   ");return}if(await n.confirm(`  ${C.length}  .   `,{title:"  ",dangerous:!0}))try{await Promise.all(C.map(G=>ge(Y(B,"orders",G.id),{status:"cancelled",updatedAt:te()}))),e.success(`  ${C.length} `),wt()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:"  "}),r.jsxs("p",{className:"text-xs opacity-75",children:[v.filter(C=>C.status==="pending").length,"  "]})]})]}),r.jsxs("button",{onClick:async()=>{const C=new Date;C.setMonth(C.getMonth()-3);const K=v.filter(fe=>{var $e,Ct;return(((Ct=($e=fe.createdAt)==null?void 0:$e.toDate)==null?void 0:Ct.call($e))||new Date)<C&&(fe.status==="delivered"||fe.status==="cancelled")});if(K.length===0){e.info("   ");return}if(await n.confirm(`  ${K.length}   (  3 ).   `,{title:"  ",dangerous:!0}))try{await Promise.all(K.map(fe=>Jn(Y(B,"orders",fe.id)))),e.success(`  ${K.length}  `),wt()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-bold",children:"  "}),r.jsx("p",{className:"text-xs opacity-75",children:"   3 "})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("a",{href:`https://console.firebase.google.com/project/${Kn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Firestore"})]}),r.jsxs("a",{href:`https://console.firebase.google.com/project/${Kn.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Authentication"})]}),r.jsxs("a",{href:`https://console.firebase.google.com/project/${Kn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Storage"})]}),r.jsxs("a",{href:`https://console.firebase.google.com/project/${Kn.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Project ID"}),r.jsx("p",{className:"font-mono",children:Kn.projectId})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),r.jsx("p",{className:"font-mono",children:Kn.storageBucket})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:" "}),r.jsx("p",{className:"font-bold",children:g.appVersion||"1.0.0"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:" "}),r.jsx("p",{className:`font-bold ${g.maintenanceMode?"text-red-600":"text-green-600"}`,children:g.maintenanceMode?" ":" "})]})]})]})]}),i==="licenses"&&r.jsx($D,{restaurants:I,onUpdate:Ti,toast:e,dialog:n}),i==="packages"&&r.jsx(zD,{packageRequests:qn,onUpdate:Ti,toast:e,dialog:n,storage:s}),i==="storeAnalytics"&&r.jsx(BD,{restaurants:I,orders:v,toast:e}),r.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:r.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[r.jsxs("span",{children:[" ",t==null?void 0:t.email]}),r.jsxs("span",{children:[" ",t==null?void 0:t.uid.slice(0,12),"..."]}),r.jsxs("span",{children:[" ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},$D=({restaurants:t,onUpdate:e,toast:n,dialog:s})=>{const[i,a]=b.useState("pending"),[o,l]=b.useState({}),[u,d]=b.useState(null),[h,f]=b.useState(""),[g,w]=b.useState(null),[j,A]=b.useState(new Set),[I,k]=b.useState(""),[v,_]=b.useState([]),[T,O]=b.useState(!1),[V,y]=b.useState(!1);b.useEffect(()=>{i==="sent_messages"&&v.length===0&&p()},[i]);const p=async()=>{O(!0);try{const L=be(re(B,"notifications"),_e("type","==","license_reminder"),as("createdAt","desc"),gi(100)),ee=(await we(L)).docs.map(me=>{var de,Ce;return{id:me.id,...me.data(),createdAt:((Ce=(de=me.data().createdAt)==null?void 0:de.toDate)==null?void 0:Ce.call(de))||null}});_(ee)}catch(L){console.error("   :",L),n.warning("     notifications (type + createdAt)")}finally{O(!1)}},N=t.filter(L=>L.commercialLicenseUrl),E=t.filter(L=>!L.commercialLicenseUrl),R=N.filter(L=>i==="all"?!0:i==="missing"||i==="sent_messages"?!1:L.licenseStatus===i||!L.licenseStatus&&i==="pending"),D={all:N.length,pending:N.filter(L=>!L.licenseStatus||L.licenseStatus==="pending").length,approved:N.filter(L=>L.licenseStatus==="approved").length,rejected:N.filter(L=>L.licenseStatus==="rejected").length,missing:E.length,sent_messages:v.length},S=async(L,se)=>{if(!se.trim()){n.warning("  ");return}w(L.id);try{await tt(re(B,"notifications"),{type:"license_reminder",recipientId:L.ownerId,recipientType:"owner",restaurantId:L.id,restaurantName:L.name,title:" :   ",message:se,read:!1,createdAt:te()}),n.success(`    ${L.name}`),f("")}catch(ee){n.error("  : "+(ee.message||"  "))}finally{w(null)}},X=async()=>{if(!I.trim()){n.warning("  ");return}const L=j.size>0?E.filter(ee=>j.has(ee.id)):E;if(L.length===0){n.warning("    ");return}if(await s.confirm(`       ${L.length} `,{title:"  "})){y(!0);try{const ee=L.map(me=>tt(re(B,"notifications"),{type:"license_reminder",recipientId:me.ownerId,recipientType:"owner",restaurantId:me.id,restaurantName:me.name,title:" :   ",message:I,read:!1,createdAt:te()}));await Promise.all(ee),n.success(`    ${L.length}   `),k(""),A(new Set)}catch(ee){n.error("   : "+(ee.message||"  "))}finally{y(!1)}}},U=()=>{j.size===E.length?A(new Set):A(new Set(E.map(L=>L.id)))},M=L=>{const se=new Set(j);se.has(L)?se.delete(L):se.add(L),A(se)},$=async(L,se)=>{const ee=o[L]||"";if(se==="rejected"&&!ee.trim()){n.warning("   ");return}const me=se==="approved"?" ":"";if(await s.confirm(`    ${me}   `,{title:`${me} `})){d(L);try{await ge(Y(B,"restaurants",L),{licenseStatus:se,licenseNotes:se==="rejected"?ee:"",updatedAt:te()}),n.success(se==="approved"?"    ":"  "),l(Ce=>({...Ce,[L]:""})),e()}catch(Ce){n.error(" : "+(Ce.message||"  "))}finally{d(null)}}},F=async(L,se)=>{const ee=" ";if(await s.confirm(`     ${ee}  "${L.name}"
      .`,{title:`  ${ee}`})){d(L.id);try{const de={licenseStatus:null,licenseNotes:"",updatedAt:te(),commercialLicenseUrl:null};await ge(Y(B,"restaurants",L.id),de),await tt(re(B,"notifications"),{type:"license_deleted",recipientId:L.ownerId,recipientType:"owner",restaurantId:L.id,restaurantName:L.name,title:`   ${ee}`,message:`  ${ee}  .         .`,read:!1,createdAt:te()}),n.success(`  ${ee}    `),e()}catch(de){n.error("  : "+(de.message||"  "))}finally{d(null)}}},H=L=>{switch(L){case"approved":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[r.jsx(at,{className:"w-3 h-3"})," "]});case"rejected":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:[r.jsx(ar,{className:"w-3 h-3"})," "]});default:return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[r.jsx(Kt,{className:"w-3 h-3"}),"  "]})}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(ew,{className:"w-6 h-6 text-sky-500"})," "]}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:["pending","approved","rejected","all","missing","sent_messages"].map(L=>r.jsxs("button",{onClick:()=>a(L),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${i===L?L==="missing"?"bg-orange-500 text-white":L==="sent_messages"?"bg-purple-500 text-white":"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[L==="all"&&` (${D.all})`,L==="pending"&&`  (${D.pending})`,L==="approved"&&` (${D.approved})`,L==="rejected"&&` (${D.rejected})`,L==="missing"&&`   (${D.missing})`,L==="sent_messages"&&"  "]},L))})]}),i==="sent_messages"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-bold text-purple-700 flex items-center gap-2",children:"    "}),r.jsx("button",{onClick:p,disabled:T,className:"px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-xl font-medium transition disabled:opacity-50",children:T?"  ...":" "})]}),T?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-purple-200 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"  ..."})]}):v.length===0?r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-2xl",children:[r.jsx("p",{className:"text-gray-500",children:"    "}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"     "})]}):r.jsx("div",{className:"space-y-3",children:v.map(L=>r.jsx("div",{className:"bg-white rounded-xl shadow p-4 border-r-4 border-purple-500",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-bold text-gray-800",children:L.restaurantName||""}),L.read?r.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:" "}):r.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full",children:"  "})]}),r.jsx("p",{className:"text-sm text-gray-600 font-semibold mb-1",children:L.title}),r.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 p-3 rounded-lg",children:L.message})]}),r.jsx("div",{className:"text-left text-xs text-gray-400 whitespace-nowrap",children:L.createdAt?new Date(L.createdAt).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]})},L.id))})]}),i==="missing"&&r.jsx("div",{className:"space-y-4",children:E.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx(at,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),r.jsx("p",{className:"text-green-600 font-semibold",children:"    "})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-2xl p-5",children:[r.jsx("h3",{className:"font-bold text-orange-800 mb-3 flex items-center gap-2",children:"   "}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:j.size===E.length,onChange:U,className:"w-5 h-5 rounded border-orange-300 text-orange-500 focus:ring-orange-500"}),r.jsxs("span",{className:"text-sm text-orange-700",children:["  (",E.length,")"]})]}),j.size>0&&r.jsxs("span",{className:"text-sm bg-orange-200 text-orange-800 px-2 py-1 rounded-full",children:[": ",j.size]})]}),r.jsx("textarea",{placeholder:"      (    )...",value:I,onChange:L=>k(L.target.value),className:"w-full border border-orange-200 rounded-xl p-3 text-sm resize-none h-24 focus:ring-2 focus:ring-orange-400 focus:border-transparent"}),r.jsx("button",{onClick:X,disabled:V||!I.trim(),className:"mt-3 w-full flex items-center justify-center gap-2 bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:V?r.jsxs(r.Fragment,{children:[r.jsx(rn,{className:"w-5 h-5 animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:["   ",j.size>0?j.size:E.length," "]})})]}),r.jsx("div",{className:"grid gap-3",children:E.map(L=>r.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow-sm hover:shadow-md transition",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",checked:j.has(L.id),onChange:()=>M(L.id),className:"w-5 h-5 mt-1 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-800",children:L.name}),r.jsx("p",{className:"text-sm text-gray-500",children:L.city||" "})]}),r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-semibold",children:[r.jsx(ar,{className:"w-3 h-3"}),"  "]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[L.email&&r.jsxs("span",{children:[" ",L.email]}),L.phone&&r.jsxs("span",{children:[" ",L.phone]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",placeholder:" ...",value:g===L.id?h:"",onChange:se=>{w(L.id),f(se.target.value)},onFocus:()=>w(L.id),className:"flex-1 border rounded-lg px-3 py-2 text-sm"}),r.jsx("button",{onClick:()=>S(L,h),disabled:g===L.id&&!h.trim(),className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg text-sm font-medium transition disabled:opacity-50",children:""})]})]})]})},L.id))})]})}),i!=="missing"&&R.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx(ew,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),r.jsxs("p",{children:["   ",i==="pending"?" ":i==="approved"?" ":i==="rejected"?"":""]})]}):i!=="missing"&&r.jsx("div",{className:"grid gap-4",children:R.map(L=>r.jsxs("div",{className:"bg-white border rounded-2xl p-5 shadow-sm",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:L.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[L.city||" ","  ",L.email||" "]})]}),H(L.licenseStatus)]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:L.commercialLicenseUrl&&r.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"  "}),r.jsx("button",{onClick:()=>F(L),disabled:u===L.id,className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"  ",children:r.jsx(In,{className:"w-4 h-4"})})]}),r.jsxs("a",{href:L.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[r.jsx(Kd,{className:"w-4 h-4"})," "]})]})}),L.commercialLicenseUrl&&r.jsxs("button",{onClick:()=>F(L),disabled:u===L.id,className:"w-full flex items-center justify-center gap-2 mb-4 py-2 px-4 border-2 border-dashed border-red-200 text-red-500 hover:bg-red-50 hover:border-red-300 rounded-xl text-sm font-medium transition",children:[r.jsx(In,{className:"w-4 h-4"}),"    "]}),L.licenseStatus==="rejected"&&L.licenseNotes&&r.jsxs("div",{className:"bg-red-50 text-red-700 rounded-xl p-3 mb-4 text-sm",children:[r.jsx("strong",{children:" :"})," ",L.licenseNotes]}),L.licenseStatus!=="approved"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{placeholder:" ( )...",value:o[L.id]||"",onChange:se=>l(ee=>({...ee,[L.id]:se.target.value})),className:"w-full border rounded-xl p-3 text-sm resize-none h-20"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>$(L.id,"approved"),disabled:u===L.id,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(at,{className:"w-5 h-5"}),""]}),r.jsxs("button",{onClick:()=>$(L.id,"rejected"),disabled:u===L.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(ar,{className:"w-5 h-5"}),""]})]})]}),L.licenseStatus==="approved"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{placeholder:"  ...",value:o[L.id]||"",onChange:se=>l(ee=>({...ee,[L.id]:se.target.value})),className:"w-full border border-yellow-200 rounded-xl p-3 text-sm resize-none h-20 focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>$(L.id,"rejected"),disabled:u===L.id,className:"flex-1 flex items-center justify-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(ar,{className:"w-5 h-5"})," "]}),r.jsxs("button",{onClick:()=>F(L),disabled:u===L.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[r.jsx(In,{className:"w-5 h-5"}),"  "]})]})]})]},L.id))})]})},BD=({restaurants:t,orders:e,toast:n})=>{var f,g,w,j;const[s,i]=b.useState(null),[a,o]=b.useState({}),[l,u]=b.useState(!1),d=async A=>{var I;u(!0);try{const k=await Pe(Y(B,"restaurantStats",A)),v=k.exists()?k.data():null,_=e.filter(R=>R.restaurantId===A),T=_.filter(R=>R.status==="delivered"),O=be(re(B,"menuItems"),_e("ownerId","==",A)),V=await we(O);let y=0;try{const R=be(re(B,"customerRegistrations"),_e("restaurantId","==",A));y=(await we(R)).size}catch{}const p=T.reduce((R,D)=>R+(D.total||0),0),N=new Date().toISOString().split("T")[0],E=((I=v==null?void 0:v.dailyViews)==null?void 0:I[N])||0;o(R=>({...R,[A]:{totalOrders:_.length,deliveredOrders:T.length,totalRevenue:p,menuItemsCount:V.size,profileViews:(v==null?void 0:v.totalProfileViews)||0,menuViews:(v==null?void 0:v.totalMenuViews)||0,itemViews:(v==null?void 0:v.totalItemViews)||0,shareClicks:(v==null?void 0:v.totalShareClicks)||0,whatsappShares:(v==null?void 0:v.whatsappShareCount)||0,registeredCustomers:y,todayViews:E,dailyViews:(v==null?void 0:v.dailyViews)||{}}}))}catch(k){console.error("    :",k),n.error("   ")}finally{u(!1)}},h=A=>{i(A),a[A]||d(A)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold",children:"   "}),r.jsxs("span",{className:"text-gray-500",children:[t.length," "]})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(A=>{const I=a[A.id];return r.jsxs("div",{onClick:()=>h(A.id),className:`bg-white rounded-2xl shadow p-4 cursor-pointer transition hover:shadow-lg ${s===A.id?"ring-2 ring-sky-500":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[A.logoUrl?r.jsx("img",{src:A.logoUrl,alt:A.name,className:"w-12 h-12 rounded-xl object-cover"}):r.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center",children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-gray-900",children:A.name}),r.jsx("p",{className:"text-xs text-gray-500",children:A.city||" "})]})]}),I&&r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-blue-700",children:I.profileViews}),r.jsx("p",{className:"text-blue-600",children:""})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-green-700",children:I.deliveredOrders}),r.jsx("p",{className:"text-green-600",children:""})]}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-2",children:[r.jsx("p",{className:"font-bold text-purple-700",children:I.whatsappShares}),r.jsx("p",{className:"text-purple-600",children:""})]})]})]},A.id)})}),s&&r.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(rn,{className:"w-8 h-8 animate-spin mx-auto text-sky-500"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"  ..."})]}):a[s]?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[(f=t.find(A=>A.id===s))!=null&&f.logoUrl?r.jsx("img",{src:(g=t.find(A=>A.id===s))==null?void 0:g.logoUrl,alt:"",className:"w-16 h-16 rounded-xl object-cover"}):r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-xl flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold",children:(w=t.find(A=>A.id===s))==null?void 0:w.name}),r.jsx("p",{className:"text-gray-500",children:(j=t.find(A=>A.id===s))==null?void 0:j.city})]})]}),r.jsx("button",{onClick:()=>d(s),className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-xl",children:r.jsx(rn,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4",children:[r.jsx("p",{className:"text-3xl font-bold text-blue-700",children:a[s].profileViews}),r.jsx("p",{className:"text-sm text-blue-600",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4",children:[r.jsx("p",{className:"text-3xl font-bold text-green-700",children:a[s].todayViews}),r.jsx("p",{className:"text-sm text-green-600",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4",children:[r.jsx("p",{className:"text-3xl font-bold text-purple-700",children:a[s].whatsappShares}),r.jsx("p",{className:"text-sm text-purple-600",children:" "})]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl p-4",children:[r.jsx("p",{className:"text-3xl font-bold text-amber-700",children:a[s].shareClicks}),r.jsx("p",{className:"text-sm text-amber-600",children:" "})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[r.jsx("p",{className:"text-2xl font-bold",children:a[s].totalOrders}),r.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[r.jsx("p",{className:"text-2xl font-bold",children:a[s].deliveredOrders}),r.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),r.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:a[s].totalRevenue.toFixed(0)}),r.jsx("p",{className:"text-sm text-gray-600",children:" (.)"})]}),r.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4",children:[r.jsx("p",{className:"text-2xl font-bold",children:a[s].menuItemsCount}),r.jsx("p",{className:"text-sm text-gray-600",children:" "})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4",children:[r.jsx("h4",{className:"font-bold text-indigo-800 mb-2",children:"    "}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:a[s].registeredCustomers}),r.jsx("p",{className:"text-xs text-indigo-500",children:"   "})]}),r.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a[s].itemViews}),r.jsx("p",{className:"text-xs text-purple-500",children:" "})]})]})]}),Object.keys(a[s].dailyViews||{}).length>0&&r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[r.jsx("h4",{className:"font-bold text-gray-800 mb-3",children:"   ( 7 )"}),r.jsx("div",{className:"flex items-end gap-2 h-32",children:(()=>{const A=a[s].dailyViews||{},I=[];for(let v=6;v>=0;v--){const _=new Date;_.setDate(_.getDate()-v);const T=_.toISOString().split("T")[0];I.push({date:T,views:A[T]||0})}const k=Math.max(...I.map(v=>v.views),1);return I.map((v,_)=>r.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[r.jsx("div",{className:"w-full bg-sky-500 rounded-t",style:{height:`${v.views/k*100}%`,minHeight:v.views>0?"4px":"0"}}),r.jsx("span",{className:"text-xs text-gray-500",children:new Date(v.date).toLocaleDateString("ar-SA",{weekday:"short"})}),r.jsx("span",{className:"text-xs font-bold",children:v.views})]},v.date))})()})]})]}):r.jsx("p",{className:"text-center text-gray-500 py-8",children:"    "})})]})},zD=({packageRequests:t,onUpdate:e,toast:n,dialog:s,storage:i})=>{const[a,o]=b.useState("all"),[l,u]=b.useState(null),[d,h]=b.useState(null),[f,g]=b.useState(99),[w,j]=b.useState(null),[A,I]=b.useState(null),[k,v]=b.useState(""),[_,T]=b.useState(null),O=async(U,M)=>{if(!M.trim()){n.warning("  ");return}I(U.id);try{await tt(re(B,"notifications"),{recipientId:U.restaurantId,title:"   ",message:M.trim(),type:"admin_message",read:!1,data:{requestId:U.id},createdAt:te()}),n.success("   ! "),T(null),v("")}catch($){n.error(` : ${$.message}`)}finally{I(null)}},V=t.filter(U=>a==="all"?!0:U.status===a),y=t.filter(U=>U.status==="pending").length,p=t.filter(U=>U.status==="bank_sent").length,N=t.filter(U=>U.status==="payment_sent").length,E=t.filter(U=>U.status==="approved").length,R=U=>{switch(U){case"pending":return{label:" ",color:"bg-yellow-100 text-yellow-700",icon:""};case"bank_sent":return{label:" ",color:"bg-blue-100 text-blue-700",icon:""};case"payment_sent":return{label:" ",color:"bg-purple-100 text-purple-700",icon:""};case"approved":return{label:"",color:"bg-green-100 text-green-700",icon:""};case"rejected":return{label:"",color:"bg-red-100 text-red-700",icon:""};case"expired":return{label:"",color:"bg-gray-100 text-gray-700",icon:""};default:return{label:U,color:"bg-gray-100",icon:""}}},D=async U=>{if(!d){n.warning("    ");return}u(U);try{const M=`bankAccounts/${Date.now()}_${d.name}`,$=_r(i,M);await cc($,d);const F=await br($);await ge(Y(B,"packageRequests",U),{status:"bank_sent",bankAccountImageUrl:F,subscriptionAmount:f,bankSentAt:te(),updatedAt:te()});const H=t.find(L=>L.id===U);H&&await tt(re(B,"notifications"),{recipientId:H.restaurantId,title:"     ",message:`   ${f}      `,type:"package_bank_sent",read:!1,data:{requestId:U,amount:f},createdAt:te()}),n.success("     "),h(null),j(null),e()}catch(M){n.error(` : ${M.message}`)}finally{u(null)}},S=async U=>{if(await s.confirm(`     ${U.subscriptionAmount}      "${U.restaurantName}"`,{title:"    ",confirmText:"  "})){u(U.id);try{const $=new Date;$.setDate($.getDate()+(U.subscriptionDuration||30)),await ge(Y(B,"packageRequests",U.id),{status:"approved",approvedAt:te(),expiresAt:$,updatedAt:te()}),await ge(Y(B,"restaurants",U.restaurantId),{packageType:"premium",packageSubscribedAt:te(),packageExpiresAt:$,packageRequest:null,updatedAt:te()}),await tt(re(B,"notifications"),{recipientId:U.restaurantId,title:"    !",message:`!      ${$.toLocaleDateString("ar-SA")}`,type:"package_approved",read:!1,data:{requestId:U.id},createdAt:te()}),n.success("   ! "),e()}catch($){n.error(` : ${$.message}`)}finally{u(null)}}},X=async U=>{if(await s.confirm(`    "${U.restaurantName}"`,{title:"  ",confirmText:" ",dangerous:!0})){u(U.id);try{await ge(Y(B,"packageRequests",U.id),{status:"rejected",rejectedAt:te(),updatedAt:te()}),await tt(re(B,"notifications"),{recipientId:U.restaurantId,title:"    ",message:"       .     .",type:"package_rejected",read:!1,createdAt:te()}),n.success("  "),e()}catch($){n.error(` : ${$.message}`)}finally{u(null)}}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(on,{className:"w-8 h-8 text-amber-500"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"   "}),r.jsx("p",{className:"text-gray-600",children:"       "})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center border border-yellow-200",children:[r.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:y}),r.jsx("p",{className:"text-sm text-yellow-700",children:"  "})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center border border-blue-200",children:[r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:p}),r.jsx("p",{className:"text-sm text-blue-700",children:"  "})]}),r.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 text-center border border-purple-200",children:[r.jsx("p",{className:"text-3xl font-bold text-purple-600",children:N}),r.jsx("p",{className:"text-sm text-purple-700",children:"  "})]}),r.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center border border-green-200",children:[r.jsx("p",{className:"text-3xl font-bold text-green-600",children:E}),r.jsx("p",{className:"text-sm text-green-700",children:" "})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"all",label:""},{id:"pending",label:"  "},{id:"bank_sent",label:"  "},{id:"payment_sent",label:"  "},{id:"approved",label:" "},{id:"rejected",label:" "}].map(U=>r.jsx("button",{onClick:()=>o(U.id),className:`px-4 py-2 rounded-xl font-semibold transition ${a===U.id?"bg-amber-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:U.label},U.id))}),V.length===0?r.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-2xl",children:[r.jsx(on,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsxs("p",{className:"text-gray-500 text-lg",children:["   ",a!=="all"&&" "]})]}):r.jsx("div",{className:"space-y-4",children:V.map(U=>{var $,F,H,L,se,ee,me,de,Ce,Ve,Xe,Fe;const M=R(U.status);return r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-4 text-white",children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:U.restaurantName}),r.jsxs("p",{className:"text-white/80 text-sm",children:[U.ownerName||" ","  ",U.ownerPhone||" "]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[U.ownerPhone&&r.jsx("a",{href:`https://wa.me/${U.ownerPhone.replace(/[^0-9]/g,"").replace(/^0/,"966")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-xl text-sm font-semibold transition",children:" "}),r.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-bold ${M.color}`,children:[M.icon," ",M.label]})]})]})}),r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:" "}),r.jsx("p",{className:"font-semibold",children:((H=(F=($=U.requestedAt)==null?void 0:$.toDate)==null?void 0:F.call($))==null?void 0:H.toLocaleDateString("ar-SA"))||((ee=(se=(L=U.createdAt)==null?void 0:L.toDate)==null?void 0:se.call(L))==null?void 0:ee.toLocaleDateString("ar-SA"))||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:""}),r.jsxs("p",{className:"font-semibold text-green-600",children:[U.subscriptionAmount||99," ."]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:""}),r.jsxs("p",{className:"font-semibold",children:[U.subscriptionDuration||30," "]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:" "}),r.jsxs("p",{className:"font-mono text-xs",children:[U.restaurantId.slice(0,12),"..."]})]})]}),r.jsx("div",{className:"border-t pt-4",children:_===U.id?r.jsxs("div",{className:"space-y-3 bg-sky-50 p-4 rounded-xl",children:[r.jsx("h4",{className:"font-bold text-sky-600",children:"   "}),r.jsx("textarea",{value:k,onChange:Vt=>v(Vt.target.value),placeholder:"  ...",className:"w-full border rounded-lg p-3 resize-none",rows:3}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>O(U,k),disabled:A===U.id||!k.trim(),className:"flex-1 bg-sky-500 hover:bg-sky-600 text-white py-2 rounded-xl font-semibold disabled:opacity-50",children:A===U.id?" ...":"  "}),r.jsx("button",{onClick:()=>{T(null),v("")},className:"px-4 bg-gray-200 hover:bg-gray-300 rounded-xl",children:""})]})]}):r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>T(U.id),className:"flex items-center gap-2 bg-sky-100 hover:bg-sky-200 text-sky-700 px-4 py-2 rounded-xl font-semibold transition",children:"  "}),U.ownerPhone&&r.jsx("a",{href:`https://wa.me/${U.ownerPhone.replace(/[^0-9]/g,"").replace(/^0/,"966")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-xl font-semibold transition",children:" "}),!U.ownerPhone&&r.jsx("span",{className:"text-gray-400 text-sm self-center",children:"    "})]})}),U.status==="pending"&&r.jsxs("div",{className:"border-t pt-4 space-y-3",children:[r.jsx("h4",{className:"font-bold text-amber-600",children:"    "}),w===U.id?r.jsxs("div",{className:"space-y-3 bg-amber-50 p-4 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"   (IBAN)"}),r.jsx("input",{type:"file",accept:"image/*",onChange:Vt=>{var Ye;return h(((Ye=Vt.target.files)==null?void 0:Ye[0])||null)},className:"w-full border rounded-lg p-2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  ()"}),r.jsx("input",{type:"number",value:f,onChange:Vt=>g(Number(Vt.target.value)),className:"w-full border rounded-lg p-2",min:1})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>D(U.id),disabled:l===U.id||!d,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white py-2 rounded-xl font-semibold disabled:opacity-50",children:l===U.id?" ...":"  "}),r.jsx("button",{onClick:()=>{j(null),h(null)},className:"px-4 bg-gray-200 hover:bg-gray-300 rounded-xl",children:""})]})]}):r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>j(U.id),className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white py-3 rounded-xl font-semibold",children:"   "}),r.jsx("button",{onClick:()=>X(U),disabled:l===U.id,className:"px-6 bg-red-100 hover:bg-red-200 text-red-700 rounded-xl font-semibold",children:" "})]})]}),U.status==="bank_sent"&&r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[r.jsx("p",{className:"text-blue-700 font-semibold mb-2",children:"     "}),r.jsxs("p",{className:"text-blue-600 text-sm",children:["   ",U.subscriptionAmount,"   "]}),U.bankAccountImageUrl&&r.jsxs("a",{href:U.bankAccountImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:underline mt-2 text-sm",children:[r.jsx(Kd,{className:"w-4 h-4"}),"   "]})]})}),U.status==="payment_sent"&&r.jsxs("div",{className:"border-t pt-4 space-y-3",children:[r.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl",children:[r.jsx("p",{className:"text-purple-700 font-semibold mb-2",children:"    "}),U.paymentProofImageUrl&&r.jsxs("a",{href:U.paymentProofImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg text-purple-600 hover:bg-purple-100 transition",children:[r.jsx(Kd,{className:"w-5 h-5"}),"   "]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>S(U),disabled:l===U.id,className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-bold disabled:opacity-50",children:l===U.id?" ...":"    "}),r.jsx("button",{onClick:()=>X(U),disabled:l===U.id,className:"px-6 bg-red-100 hover:bg-red-200 text-red-700 rounded-xl font-semibold",children:" "})]})]}),U.status==="approved"&&r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"bg-green-50 p-4 rounded-xl flex items-center gap-3",children:[r.jsx(at,{className:"w-8 h-8 text-green-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-green-700 font-semibold",children:"  "}),r.jsxs("p",{className:"text-green-600 text-sm",children:[" : ",((Ce=(de=(me=U.expiresAt)==null?void 0:me.toDate)==null?void 0:de.call(me))==null?void 0:Ce.toLocaleDateString("ar-SA"))||"-"]})]})]})}),U.status==="rejected"&&r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"bg-red-50 p-4 rounded-xl",children:[r.jsx("p",{className:"text-red-700 font-semibold",children:"   "}),r.jsxs("p",{className:"text-red-600 text-sm",children:[": ",((Fe=(Xe=(Ve=U.rejectedAt)==null?void 0:Ve.toDate)==null?void 0:Xe.call(Ve))==null?void 0:Fe.toLocaleDateString("ar-SA"))||"-"]})]})})]})]},U.id)})})]})},qD="afrtalbyt2026@gmail.com",HD=()=>{const t=yn(),[e,n]=b.useState(""),[s,i]=b.useState(""),[a,o]=b.useState(!1),[l,u]=b.useState(""),[d,h]=b.useState(!1),f=async g=>{if(g.preventDefault(),u(""),e.trim().toLowerCase()!==qD){u("        ");return}if(s.length<6){u("     6   ");return}o(!0);try{const j=(await jl(ts,e.trim(),s)).user.uid;await Bt(Y(B,"users",j),{email:e.trim(),name:" ",role:"developer",createdAt:te()}),h(!0),setTimeout(()=>{t("/developer")},2e3)}catch(w){console.error("Setup error:",w),w.code==="auth/email-already-in-use"?u("      "):w.code==="auth/invalid-email"?u("   "):w.code==="auth/weak-password"?u("   "):u(" : "+(w.message||" "))}finally{o(!1)}};return d?r.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:r.jsxs("div",{className:"text-center bg-gradient-to-br from-green-500 to-emerald-600 text-white p-10 rounded-3xl shadow-2xl",children:[r.jsx(at,{className:"w-20 h-20 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"    !"}),r.jsx("p",{children:"   ..."})]})}):r.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 p-6 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ao,{className:"w-10 h-10 text-white"})}),r.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2",children:[r.jsx(Vn,{className:"w-6 h-6"}),"  ",r.jsx(Vn,{className:"w-6 h-6"})]}),r.jsx("p",{className:"text-white/80 text-sm mt-2",children:"   "})]}),r.jsxs("form",{onSubmit:f,className:"p-6 space-y-5",children:[l&&r.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 rounded-xl p-3 text-sm text-center",children:l}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[r.jsx(Mx,{className:"w-4 h-4"})," "]}),r.jsx("input",{type:"email",value:e,onChange:g=>n(g.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[r.jsx(D6,{className:"w-4 h-4"})," "]}),r.jsx("input",{type:"password",value:s,onChange:g=>i(g.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),r.jsx("button",{type:"submit",disabled:a,className:"w-full py-4 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white font-bold rounded-xl hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ox,{className:"w-5 h-5"}),"  "]})}),r.jsx("p",{className:"text-gray-500 text-xs text-center",children:"      "})]})]})})})},At=({children:t})=>{const{user:e,loading:n}=He();return n?r.jsx("div",{className:"p-8 text-center",children:" ..."}):e?r.jsx(r.Fragment,{children:t}):r.jsx(fh,{to:"/login",replace:!0})},WD=()=>{var d;const{role:t,loading:e}=He(),[n,s]=b.useState([]),[i,a]=b.useState(!0),[o,l]=b.useState(null);if(b.useEffect(()=>{e||t!=="developer"||(async()=>{try{l(null);const h=be(re(B,"orders"),as("createdAt","desc"),gi(10)),g=(await we(h)).docs.map(w=>{var A,I,k,v,_,T;const j=w.data();return{id:w.id,restaurantId:j.restaurantId??null,firstItemOwnerId:((I=(A=j==null?void 0:j.items)==null?void 0:A[0])==null?void 0:I.ownerId)??null,customerId:j.customerId??null,createdAtISO:((T=(_=(v=(k=j.createdAt)==null?void 0:k.toDate)==null?void 0:v.call(k))==null?void 0:_.toISOString)==null?void 0:T.call(_))??null}});s(g)}catch(h){if(String((h==null?void 0:h.message)||"").includes("index"))try{const g=(await we(re(B,"orders"))).docs.map(w=>{var A,I,k,v,_,T;const j=w.data();return{id:w.id,restaurantId:j.restaurantId??null,firstItemOwnerId:((I=(A=j==null?void 0:j.items)==null?void 0:A[0])==null?void 0:I.ownerId)??null,customerId:j.customerId??null,createdAtISO:((T=(_=(v=(k=j.createdAt)==null?void 0:k.toDate)==null?void 0:v.call(k))==null?void 0:_.toISOString)==null?void 0:T.call(_))??null}});s(g),l("     createdAt     .")}catch(f){l("     : "+((f==null?void 0:f.message)||f))}else l("  : "+((h==null?void 0:h.message)||h))}finally{a(!1)}})()},[e,t]),e)return r.jsx("div",{className:"p-8 text-center",children:" ..."});if(t!=="developer")return r.jsx(fh,{to:"/",replace:!0});const u=(d=Rn.options)==null?void 0:d.projectId;return r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("h1",{className:"text-xl font-bold",children:" DEBUG: Orders Snapshot ( )"}),r.jsxs("div",{className:"text-sm",children:["ProjectId: ",r.jsx("b",{children:String(u)})]}),o&&r.jsx("div",{className:"text-red-600 text-sm",children:o}),i&&r.jsx("div",{children:" Loading"}),!i&&n.length===0&&r.jsxs("div",{className:"text-gray-600",children:["     collection: ",r.jsx("code",{children:"orders"}),"   ."]}),n.map(h=>r.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[r.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",h.id]}),r.jsxs("div",{children:["restaurantId: ",r.jsx("b",{children:String(h.restaurantId)})]}),r.jsxs("div",{children:["items[0].ownerId: ",r.jsx("b",{children:String(h.firstItemOwnerId)})]}),r.jsxs("div",{children:["customerId: ",r.jsx("b",{children:String(h.customerId)})]}),r.jsxs("div",{children:["createdAt: ",r.jsx("b",{children:h.createdAtISO||""})]})]},h.id))]})};function KD(){const{locationRequired:t,refreshUserData:e,loading:n}=He();return!n&&t?r.jsx(J3,{onLocationSaved:e}):r.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[r.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[r.jsx(Y3,{}),r.jsx(K3,{})]}),r.jsx("div",{className:"h-[100px] sm:h-[120px]"}),r.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:r.jsxs(oI,{children:[r.jsx(Oe,{path:"/",element:r.jsx(Z3,{})}),r.jsx(Oe,{path:"/restaurants",element:r.jsx(tD,{})}),r.jsx(Oe,{path:"/menu",element:r.jsx(oD,{})}),r.jsx(Oe,{path:"/cart",element:r.jsx(lD,{})}),r.jsx(Oe,{path:"/login",element:r.jsx(cD,{})}),r.jsx(Oe,{path:"/customer-login",element:r.jsx(dD,{})}),r.jsx(Oe,{path:"/register",element:r.jsx(uD,{})}),r.jsx(Oe,{path:"/privacy-policy",element:r.jsx(hD,{})}),r.jsx(Oe,{path:"/account-deleted",element:r.jsx(mD,{})}),r.jsx(Oe,{path:"/setup-dev",element:r.jsx(HD,{})}),r.jsx(Oe,{path:"/chat",element:r.jsx(At,{children:r.jsx(qe,{allow:["customer","courier","owner","admin"],children:r.jsx(OD,{})})})}),r.jsx(Oe,{path:"/notifications",element:r.jsx(At,{children:r.jsx(qe,{allow:["customer","courier","owner","admin","developer"],children:r.jsx(LD,{})})})}),r.jsx(Oe,{path:"/checkout",element:r.jsx(At,{children:r.jsx(qe,{allow:["customer","admin"],children:r.jsx(gD,{})})})}),r.jsx(Oe,{path:"/orders",element:r.jsx(At,{children:r.jsx(qe,{allow:["customer","admin"],children:r.jsx(xD,{})})})}),r.jsx(Oe,{path:"/profile",element:r.jsx(At,{children:r.jsx(qe,{allow:["customer","courier","owner","admin","developer"],children:r.jsx(yD,{})})})}),r.jsx(Oe,{path:"/owner",element:r.jsx(At,{children:r.jsx(qe,{allow:["owner"],children:r.jsx(vD,{})})})}),r.jsx(Oe,{path:"/owner/menu",element:r.jsx(At,{children:r.jsx(qe,{allow:["owner"],children:r.jsx(bD,{})})})}),r.jsx(Oe,{path:"/owner/orders",element:r.jsx(At,{children:r.jsx(qe,{allow:["owner"],children:r.jsx(ND,{})})})}),r.jsx(Oe,{path:"/owner/edit",element:r.jsx(At,{children:r.jsx(qe,{allow:["owner"],children:r.jsx(jD,{})})})}),r.jsx(Oe,{path:"/owner/courier-requests",element:r.jsx(At,{children:r.jsx(qe,{allow:["owner","developer"],children:r.jsx(kD,{})})})}),r.jsx(Oe,{path:"/owner/packages",element:r.jsx(At,{children:r.jsx(qe,{allow:["owner"],children:r.jsx(ED,{})})})}),r.jsx(Oe,{path:"/owner/promotion",element:r.jsx(At,{children:r.jsx(qe,{allow:["owner"],children:r.jsx(ID,{})})})}),r.jsx(Oe,{path:"/courier",element:r.jsx(At,{children:r.jsx(qe,{allow:["courier","developer"],children:r.jsx(TD,{})})})}),r.jsx(Oe,{path:"/courier/hiring",element:r.jsx(At,{children:r.jsx(qe,{allow:["courier","developer"],children:r.jsx(SD,{})})})}),r.jsx(Oe,{path:"/admin",element:r.jsx(At,{children:r.jsx(qe,{allow:["admin","developer"],children:r.jsx(MD,{})})})}),r.jsx(Oe,{path:"/admin/restaurants",element:r.jsx(At,{children:r.jsx(qe,{allow:["admin","developer"],children:r.jsx(VD,{})})})}),r.jsx(Oe,{path:"/admin/orders",element:r.jsx(At,{children:r.jsx(qe,{allow:["admin","developer"],children:r.jsx(FD,{})})})}),r.jsx(Oe,{path:"/developer",element:r.jsx(At,{children:r.jsx(qe,{allow:["developer","admin"],children:r.jsx(UD,{})})})}),r.jsx(Oe,{path:"/__debug_orders",element:r.jsx(WD,{})}),r.jsx(Oe,{path:"*",element:r.jsx(fh,{to:"/",replace:!0})})]})}),r.jsx(X3,{})]})}b.createContext(void 0);const GD=({children:t})=>r.jsx(r.Fragment,{children:t});af.createRoot(document.getElementById("root")).render(r.jsx(bw.StrictMode,{children:r.jsx(pI,{children:r.jsx(nD,{children:r.jsx(G3,{children:r.jsx(OP,{children:r.jsxs(GD,{children:["   ",r.jsx(KD,{})]})})})})})}));
