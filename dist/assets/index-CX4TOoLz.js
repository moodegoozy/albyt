function jj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Ej(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $v={exports:{}},Pd={},Bv={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc=Symbol.for("react.element"),kj=Symbol.for("react.portal"),Tj=Symbol.for("react.fragment"),Ij=Symbol.for("react.strict_mode"),Sj=Symbol.for("react.profiler"),Cj=Symbol.for("react.provider"),Aj=Symbol.for("react.context"),Rj=Symbol.for("react.forward_ref"),Pj=Symbol.for("react.suspense"),Dj=Symbol.for("react.memo"),Oj=Symbol.for("react.lazy"),Bx=Symbol.iterator;function Lj(t){return t===null||typeof t!="object"?null:(t=Bx&&t[Bx]||t["@@iterator"],typeof t=="function"?t:null)}var zv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qv=Object.assign,Hv={};function eo(t,e,n){this.props=t,this.context=e,this.refs=Hv,this.updater=n||zv}eo.prototype.isReactComponent={};eo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wv(){}Wv.prototype=eo.prototype;function op(t,e,n){this.props=t,this.context=e,this.refs=Hv,this.updater=n||zv}var lp=op.prototype=new Wv;lp.constructor=op;qv(lp,eo.prototype);lp.isPureReactComponent=!0;var zx=Array.isArray,Kv=Object.prototype.hasOwnProperty,cp={current:null},Gv={key:!0,ref:!0,__self:!0,__source:!0};function Qv(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Kv.call(e,r)&&!Gv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:sc,type:t,key:a,ref:o,props:s,_owner:cp.current}}function Mj(t,e){return{$$typeof:sc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function up(t){return typeof t=="object"&&t!==null&&t.$$typeof===sc}function Vj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qx=/\/+/g;function Oh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Vj(""+t.key):e.toString(36)}function _u(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sc:case kj:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Oh(o,0):r,zx(s)?(n="",t!=null&&(n=t.replace(qx,"$&/")+"/"),_u(s,e,n,"",function(d){return d})):s!=null&&(up(s)&&(s=Mj(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(qx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",zx(t))for(var c=0;c<t.length;c++){a=t[c];var u=r+Oh(a,c);o+=_u(a,e,n,u,s)}else if(u=Lj(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=r+Oh(a,c++),o+=_u(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gc(t,e,n){if(t==null)return t;var r=[],s=0;return _u(t,r,"","",function(a){return e.call(n,a,s++)}),r}function Fj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},bu={transition:null},Uj={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:bu,ReactCurrentOwner:cp};function Xv(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Gc,forEach:function(t,e,n){Gc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gc(t,function(){e++}),e},toArray:function(t){return Gc(t,function(e){return e})||[]},only:function(t){if(!up(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=eo;me.Fragment=Tj;me.Profiler=Sj;me.PureComponent=op;me.StrictMode=Ij;me.Suspense=Pj;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uj;me.act=Xv;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qv({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=cp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Kv.call(e,u)&&!Gv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:sc,type:t.type,key:s,ref:a,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:Aj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Cj,_context:t},t.Consumer=t};me.createElement=Qv;me.createFactory=function(t){var e=Qv.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:Rj,render:t}};me.isValidElement=up;me.lazy=function(t){return{$$typeof:Oj,_payload:{_status:-1,_result:t},_init:Fj}};me.memo=function(t,e){return{$$typeof:Dj,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=bu.transition;bu.transition={};try{t()}finally{bu.transition=e}};me.unstable_act=Xv;me.useCallback=function(t,e){return Gt.current.useCallback(t,e)};me.useContext=function(t){return Gt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Gt.current.useEffect(t,e)};me.useId=function(){return Gt.current.useId()};me.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Gt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};me.useRef=function(t){return Gt.current.useRef(t)};me.useState=function(t){return Gt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Gt.current.useTransition()};me.version="18.3.1";Bv.exports=me;var T=Bv.exports;const Yv=Ej(T),$j=jj({__proto__:null,default:Yv},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bj=T,zj=Symbol.for("react.element"),qj=Symbol.for("react.fragment"),Hj=Object.prototype.hasOwnProperty,Wj=Bj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kj={key:!0,ref:!0,__self:!0,__source:!0};function Jv(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Hj.call(e,r)&&!Kj.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:zj,type:t,key:a,ref:o,props:s,_owner:Wj.current}}Pd.Fragment=qj;Pd.jsx=Jv;Pd.jsxs=Jv;$v.exports=Pd;var i=$v.exports,Df={},Zv={exports:{}},Nn={},ew={exports:{}},tw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,J){var ne=U.length;U.push(J);e:for(;0<ne;){var _e=ne-1>>>1,ye=U[_e];if(0<s(ye,J))U[_e]=J,U[ne]=ye,ne=_e;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var J=U[0],ne=U.pop();if(ne!==J){U[0]=ne;e:for(var _e=0,ye=U.length,He=ye>>>1;_e<He;){var on=2*(_e+1)-1,$n=U[on],ln=on+1,cn=U[ln];if(0>s($n,ne))ln<ye&&0>s(cn,$n)?(U[_e]=cn,U[ln]=ne,_e=ln):(U[_e]=$n,U[on]=ne,_e=on);else if(ln<ye&&0>s(cn,ne))U[_e]=cn,U[ln]=ne,_e=ln;else break e}}return J}function s(U,J){var ne=U.sortIndex-J.sortIndex;return ne!==0?ne:U.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,m=null,p=3,_=!1,b=!1,A=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(U){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=U)r(d),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(d)}}function E(U){if(A=!1,y(U),!b)if(n(u)!==null)b=!0,K(R);else{var J=n(d);J!==null&&z(E,J.startTime-U)}}function R(U,J){b=!1,A&&(A=!1,v(x),x=-1),_=!0;var ne=p;try{for(y(J),m=n(u);m!==null&&(!(m.expirationTime>J)||U&&!D());){var _e=m.callback;if(typeof _e=="function"){m.callback=null,p=m.priorityLevel;var ye=_e(m.expirationTime<=J);J=t.unstable_now(),typeof ye=="function"?m.callback=ye:m===n(u)&&r(u),y(J)}else r(u);m=n(u)}if(m!==null)var He=!0;else{var on=n(d);on!==null&&z(E,on.startTime-J),He=!1}return He}finally{m=null,p=ne,_=!1}}var L=!1,j=null,x=-1,k=5,S=-1;function D(){return!(t.unstable_now()-S<k)}function O(){if(j!==null){var U=t.unstable_now();S=U;var J=!0;try{J=j(!0,U)}finally{J?P():(L=!1,j=null)}}else L=!1}var P;if(typeof w=="function")P=function(){w(O)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,V=Q.port2;Q.port1.onmessage=O,P=function(){V.postMessage(null)}}else P=function(){N(O,0)};function K(U){j=U,L||(L=!0,P())}function z(U,J){x=N(function(){U(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){b||_||(b=!0,K(R))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var ne=p;p=J;try{return U()}finally{p=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,J){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ne=p;p=U;try{return J()}finally{p=ne}},t.unstable_scheduleCallback=function(U,J,ne){var _e=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?_e+ne:_e):ne=_e,U){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ne+ye,U={id:h++,callback:J,priorityLevel:U,startTime:ne,expirationTime:ye,sortIndex:-1},ne>_e?(U.sortIndex=ne,e(d,U),n(u)===null&&U===n(d)&&(A?(v(x),x=-1):A=!0,z(E,ne-_e))):(U.sortIndex=ye,e(u,U),b||_||(b=!0,K(R))),U},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(U){var J=p;return function(){var ne=p;p=J;try{return U.apply(this,arguments)}finally{p=ne}}}})(tw);ew.exports=tw;var Gj=ew.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qj=T,_n=Gj;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nw=new Set,El={};function Mi(t,e){Fa(t,e),Fa(t+"Capture",e)}function Fa(t,e){for(El[t]=e,t=0;t<e.length;t++)nw.add(e[t])}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Of=Object.prototype.hasOwnProperty,Xj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hx={},Wx={};function Yj(t){return Of.call(Wx,t)?!0:Of.call(Hx,t)?!1:Xj.test(t)?Wx[t]=!0:(Hx[t]=!0,!1)}function Jj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Zj(t,e,n,r){if(e===null||typeof e>"u"||Jj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var dp=/[\-:]([a-z])/g;function hp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dp,hp);At[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dp,hp);At[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dp,hp);At[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function fp(t,e,n,r){var s=At.hasOwnProperty(e)?At[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Zj(e,n,s,r)&&(n=null),r||s===null?Yj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ts=Qj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qc=Symbol.for("react.element"),pa=Symbol.for("react.portal"),ga=Symbol.for("react.fragment"),mp=Symbol.for("react.strict_mode"),Lf=Symbol.for("react.profiler"),rw=Symbol.for("react.provider"),sw=Symbol.for("react.context"),pp=Symbol.for("react.forward_ref"),Mf=Symbol.for("react.suspense"),Vf=Symbol.for("react.suspense_list"),gp=Symbol.for("react.memo"),fs=Symbol.for("react.lazy"),iw=Symbol.for("react.offscreen"),Kx=Symbol.iterator;function Uo(t){return t===null||typeof t!="object"?null:(t=Kx&&t[Kx]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,Lh;function Yo(t){if(Lh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lh=e&&e[1]||""}return`
`+Lh+t}var Mh=!1;function Vh(t,e){if(!t||Mh)return"";Mh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,c=a.length-1;1<=o&&0<=c&&s[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==a[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Mh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function e2(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=Vh(t.type,!1),t;case 11:return t=Vh(t.type.render,!1),t;case 1:return t=Vh(t.type,!0),t;default:return""}}function Ff(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ga:return"Fragment";case pa:return"Portal";case Lf:return"Profiler";case mp:return"StrictMode";case Mf:return"Suspense";case Vf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sw:return(t.displayName||"Context")+".Consumer";case rw:return(t._context.displayName||"Context")+".Provider";case pp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gp:return e=t.displayName||null,e!==null?e:Ff(t.type)||"Memo";case fs:e=t._payload,t=t._init;try{return Ff(t(e))}catch{}}return null}function t2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ff(e);case 8:return e===mp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function n2(t){var e=aw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xc(t){t._valueTracker||(t._valueTracker=n2(t))}function ow(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Uf(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lw(t,e){e=e.checked,e!=null&&fp(t,"checked",e,!1)}function $f(t,e){lw(t,e);var n=Ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bf(t,e.type,Ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bf(t,e,n){(e!=="number"||Bu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jo=Array.isArray;function Sa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ls(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function zf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Jo(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ls(n)}}function cw(t,e){var n=Ls(e.value),r=Ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yc,dw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yc=Yc||document.createElement("div"),Yc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r2=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){r2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function hw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function fw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var s2=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hf(t,e){if(e){if(s2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Wf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kf=null;function xp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gf=null,Ca=null,Aa=null;function Jx(t){if(t=oc(t)){if(typeof Gf!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Vd(e),Gf(t.stateNode,t.type,e))}}function mw(t){Ca?Aa?Aa.push(t):Aa=[t]:Ca=t}function pw(){if(Ca){var t=Ca,e=Aa;if(Aa=Ca=null,Jx(t),e)for(t=0;t<e.length;t++)Jx(e[t])}}function gw(t,e){return t(e)}function xw(){}var Fh=!1;function yw(t,e,n){if(Fh)return t(e,n);Fh=!0;try{return gw(t,e,n)}finally{Fh=!1,(Ca!==null||Aa!==null)&&(xw(),pw())}}function Tl(t,e){var n=t.stateNode;if(n===null)return null;var r=Vd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Qf=!1;if(Wr)try{var $o={};Object.defineProperty($o,"passive",{get:function(){Qf=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{Qf=!1}function i2(t,e,n,r,s,a,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ll=!1,zu=null,qu=!1,Xf=null,a2={onError:function(t){ll=!0,zu=t}};function o2(t,e,n,r,s,a,o,c,u){ll=!1,zu=null,i2.apply(a2,arguments)}function l2(t,e,n,r,s,a,o,c,u){if(o2.apply(this,arguments),ll){if(ll){var d=zu;ll=!1,zu=null}else throw Error(G(198));qu||(qu=!0,Xf=d)}}function Vi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zx(t){if(Vi(t)!==t)throw Error(G(188))}function c2(t){var e=t.alternate;if(!e){if(e=Vi(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Zx(s),t;if(a===r)return Zx(s),e;a=a.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=a;break}if(c===r){o=!0,r=s,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=s;break}if(c===r){o=!0,r=a,n=s;break}c=c.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function ww(t){return t=c2(t),t!==null?_w(t):null}function _w(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_w(t);if(e!==null)return e;t=t.sibling}return null}var bw=_n.unstable_scheduleCallback,e0=_n.unstable_cancelCallback,u2=_n.unstable_shouldYield,d2=_n.unstable_requestPaint,rt=_n.unstable_now,h2=_n.unstable_getCurrentPriorityLevel,yp=_n.unstable_ImmediatePriority,Nw=_n.unstable_UserBlockingPriority,Hu=_n.unstable_NormalPriority,f2=_n.unstable_LowPriority,jw=_n.unstable_IdlePriority,Dd=null,fr=null;function m2(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(Dd,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:x2,p2=Math.log,g2=Math.LN2;function x2(t){return t>>>=0,t===0?32:31-(p2(t)/g2|0)|0}var Jc=64,Zc=4194304;function Zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Zo(c):(a&=o,a!==0&&(r=Zo(a)))}else o=n&~s,o!==0?r=Zo(o):a!==0&&(r=Zo(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yn(e),s=1<<n,r|=t[n],e&=~s;return r}function y2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Yn(a),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=y2(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function Yf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ew(){var t=Jc;return Jc<<=1,!(Jc&4194240)&&(Jc=64),t}function Uh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ic(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=n}function w2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Yn(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function vp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ke=0;function kw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tw,wp,Iw,Sw,Cw,Jf=!1,eu=[],Es=null,ks=null,Ts=null,Il=new Map,Sl=new Map,ps=[],_2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t0(t,e){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(e.pointerId)}}function Bo(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=oc(e),e!==null&&wp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function b2(t,e,n,r,s){switch(e){case"focusin":return Es=Bo(Es,t,e,n,r,s),!0;case"dragenter":return ks=Bo(ks,t,e,n,r,s),!0;case"mouseover":return Ts=Bo(Ts,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Il.set(a,Bo(Il.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Sl.set(a,Bo(Sl.get(a)||null,t,e,n,r,s)),!0}return!1}function Aw(t){var e=di(t.target);if(e!==null){var n=Vi(e);if(n!==null){if(e=n.tag,e===13){if(e=vw(n),e!==null){t.blockedOn=e,Cw(t.priority,function(){Iw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kf=r,n.target.dispatchEvent(r),Kf=null}else return e=oc(n),e!==null&&wp(e),t.blockedOn=n,!1;e.shift()}return!0}function n0(t,e,n){Nu(t)&&n.delete(e)}function N2(){Jf=!1,Es!==null&&Nu(Es)&&(Es=null),ks!==null&&Nu(ks)&&(ks=null),Ts!==null&&Nu(Ts)&&(Ts=null),Il.forEach(n0),Sl.forEach(n0)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,Jf||(Jf=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,N2)))}function Cl(t){function e(s){return zo(s,t)}if(0<eu.length){zo(eu[0],t);for(var n=1;n<eu.length;n++){var r=eu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Es!==null&&zo(Es,t),ks!==null&&zo(ks,t),Ts!==null&&zo(Ts,t),Il.forEach(e),Sl.forEach(e),n=0;n<ps.length;n++)r=ps[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ps.length&&(n=ps[0],n.blockedOn===null);)Aw(n),n.blockedOn===null&&ps.shift()}var Ra=ts.ReactCurrentBatchConfig,Ku=!0;function j2(t,e,n,r){var s=ke,a=Ra.transition;Ra.transition=null;try{ke=1,_p(t,e,n,r)}finally{ke=s,Ra.transition=a}}function E2(t,e,n,r){var s=ke,a=Ra.transition;Ra.transition=null;try{ke=4,_p(t,e,n,r)}finally{ke=s,Ra.transition=a}}function _p(t,e,n,r){if(Ku){var s=Zf(t,e,n,r);if(s===null)Xh(t,e,r,Gu,n),t0(t,r);else if(b2(s,t,e,n,r))r.stopPropagation();else if(t0(t,r),e&4&&-1<_2.indexOf(t)){for(;s!==null;){var a=oc(s);if(a!==null&&Tw(a),a=Zf(t,e,n,r),a===null&&Xh(t,e,r,Gu,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Xh(t,e,r,null,n)}}var Gu=null;function Zf(t,e,n,r){if(Gu=null,t=xp(r),t=di(t),t!==null)if(e=Vi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gu=t,null}function Rw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h2()){case yp:return 1;case Nw:return 4;case Hu:case f2:return 16;case jw:return 536870912;default:return 16}default:return 16}}var _s=null,bp=null,ju=null;function Pw(){if(ju)return ju;var t,e=bp,n=e.length,r,s="value"in _s?_s.value:_s.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return ju=s.slice(t,1<r?1-r:void 0)}function Eu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tu(){return!0}function r0(){return!1}function jn(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?tu:r0,this.isPropagationStopped=r0,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tu)},persist:function(){},isPersistent:tu}),e}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Np=jn(to),ac=Qe({},to,{view:0,detail:0}),k2=jn(ac),$h,Bh,qo,Od=Qe({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qo&&(qo&&t.type==="mousemove"?($h=t.screenX-qo.screenX,Bh=t.screenY-qo.screenY):Bh=$h=0,qo=t),$h)},movementY:function(t){return"movementY"in t?t.movementY:Bh}}),s0=jn(Od),T2=Qe({},Od,{dataTransfer:0}),I2=jn(T2),S2=Qe({},ac,{relatedTarget:0}),zh=jn(S2),C2=Qe({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),A2=jn(C2),R2=Qe({},to,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),P2=jn(R2),D2=Qe({},to,{data:0}),i0=jn(D2),O2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=M2[t])?!!e[t]:!1}function jp(){return V2}var F2=Qe({},ac,{key:function(t){if(t.key){var e=O2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?L2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jp,charCode:function(t){return t.type==="keypress"?Eu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),U2=jn(F2),$2=Qe({},Od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a0=jn($2),B2=Qe({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jp}),z2=jn(B2),q2=Qe({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),H2=jn(q2),W2=Qe({},Od,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K2=jn(W2),G2=[9,13,27,32],Ep=Wr&&"CompositionEvent"in window,cl=null;Wr&&"documentMode"in document&&(cl=document.documentMode);var Q2=Wr&&"TextEvent"in window&&!cl,Dw=Wr&&(!Ep||cl&&8<cl&&11>=cl),o0=" ",l0=!1;function Ow(t,e){switch(t){case"keyup":return G2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xa=!1;function X2(t,e){switch(t){case"compositionend":return Lw(e);case"keypress":return e.which!==32?null:(l0=!0,o0);case"textInput":return t=e.data,t===o0&&l0?null:t;default:return null}}function Y2(t,e){if(xa)return t==="compositionend"||!Ep&&Ow(t,e)?(t=Pw(),ju=bp=_s=null,xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dw&&e.locale!=="ko"?null:e.data;default:return null}}var J2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!J2[t.type]:e==="textarea"}function Mw(t,e,n,r){mw(r),e=Qu(e,"onChange"),0<e.length&&(n=new Np("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ul=null,Al=null;function Z2(t){Gw(t,0)}function Ld(t){var e=wa(t);if(ow(e))return t}function eE(t,e){if(t==="change")return e}var Vw=!1;if(Wr){var qh;if(Wr){var Hh="oninput"in document;if(!Hh){var u0=document.createElement("div");u0.setAttribute("oninput","return;"),Hh=typeof u0.oninput=="function"}qh=Hh}else qh=!1;Vw=qh&&(!document.documentMode||9<document.documentMode)}function d0(){ul&&(ul.detachEvent("onpropertychange",Fw),Al=ul=null)}function Fw(t){if(t.propertyName==="value"&&Ld(Al)){var e=[];Mw(e,Al,t,xp(t)),yw(Z2,e)}}function tE(t,e,n){t==="focusin"?(d0(),ul=e,Al=n,ul.attachEvent("onpropertychange",Fw)):t==="focusout"&&d0()}function nE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ld(Al)}function rE(t,e){if(t==="click")return Ld(e)}function sE(t,e){if(t==="input"||t==="change")return Ld(e)}function iE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:iE;function Rl(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Of.call(e,s)||!nr(t[s],e[s]))return!1}return!0}function h0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function f0(t,e){var n=h0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=h0(n)}}function Uw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $w(){for(var t=window,e=Bu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bu(t.document)}return e}function kp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aE(t){var e=$w(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Uw(n.ownerDocument.documentElement,n)){if(r!==null&&kp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=f0(n,a);var o=f0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oE=Wr&&"documentMode"in document&&11>=document.documentMode,ya=null,em=null,dl=null,tm=!1;function m0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tm||ya==null||ya!==Bu(r)||(r=ya,"selectionStart"in r&&kp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dl&&Rl(dl,r)||(dl=r,r=Qu(em,"onSelect"),0<r.length&&(e=new Np("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ya)))}function nu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var va={animationend:nu("Animation","AnimationEnd"),animationiteration:nu("Animation","AnimationIteration"),animationstart:nu("Animation","AnimationStart"),transitionend:nu("Transition","TransitionEnd")},Wh={},Bw={};Wr&&(Bw=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Md(t){if(Wh[t])return Wh[t];if(!va[t])return t;var e=va[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Bw)return Wh[t]=e[n];return t}var zw=Md("animationend"),qw=Md("animationiteration"),Hw=Md("animationstart"),Ww=Md("transitionend"),Kw=new Map,p0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(t,e){Kw.set(t,e),Mi(e,[t])}for(var Kh=0;Kh<p0.length;Kh++){var Gh=p0[Kh],lE=Gh.toLowerCase(),cE=Gh[0].toUpperCase()+Gh.slice(1);zs(lE,"on"+cE)}zs(zw,"onAnimationEnd");zs(qw,"onAnimationIteration");zs(Hw,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(Ww,"onTransitionEnd");Fa("onMouseEnter",["mouseout","mouseover"]);Fa("onMouseLeave",["mouseout","mouseover"]);Fa("onPointerEnter",["pointerout","pointerover"]);Fa("onPointerLeave",["pointerout","pointerover"]);Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uE=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function g0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,l2(r,e,void 0,t),t.currentTarget=null}function Gw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==a&&s.isPropagationStopped())break e;g0(s,c,d),a=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==a&&s.isPropagationStopped())break e;g0(s,c,d),a=u}}}if(qu)throw t=Xf,qu=!1,Xf=null,t}function Ve(t,e){var n=e[am];n===void 0&&(n=e[am]=new Set);var r=t+"__bubble";n.has(r)||(Qw(e,t,2,!1),n.add(r))}function Qh(t,e,n){var r=0;e&&(r|=4),Qw(n,t,r,e)}var ru="_reactListening"+Math.random().toString(36).slice(2);function Pl(t){if(!t[ru]){t[ru]=!0,nw.forEach(function(n){n!=="selectionchange"&&(uE.has(n)||Qh(n,!1,t),Qh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ru]||(e[ru]=!0,Qh("selectionchange",!1,e))}}function Qw(t,e,n,r){switch(Rw(e)){case 1:var s=j2;break;case 4:s=E2;break;default:s=_p}n=s.bind(null,e,n,t),s=void 0,!Qf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xh(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=di(c),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}c=c.parentNode}}r=r.return}yw(function(){var d=a,h=xp(n),m=[];e:{var p=Kw.get(t);if(p!==void 0){var _=Np,b=t;switch(t){case"keypress":if(Eu(n)===0)break e;case"keydown":case"keyup":_=U2;break;case"focusin":b="focus",_=zh;break;case"focusout":b="blur",_=zh;break;case"beforeblur":case"afterblur":_=zh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=s0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=I2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=z2;break;case zw:case qw:case Hw:_=A2;break;case Ww:_=H2;break;case"scroll":_=k2;break;case"wheel":_=K2;break;case"copy":case"cut":case"paste":_=P2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=a0}var A=(e&4)!==0,N=!A&&t==="scroll",v=A?p!==null?p+"Capture":null:p;A=[];for(var w=d,y;w!==null;){y=w;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,v!==null&&(E=Tl(w,v),E!=null&&A.push(Dl(w,E,y)))),N)break;w=w.return}0<A.length&&(p=new _(p,b,null,n,h),m.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==Kf&&(b=n.relatedTarget||n.fromElement)&&(di(b)||b[Kr]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(b=n.relatedTarget||n.toElement,_=d,b=b?di(b):null,b!==null&&(N=Vi(b),b!==N||b.tag!==5&&b.tag!==6)&&(b=null)):(_=null,b=d),_!==b)){if(A=s0,E="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(A=a0,E="onPointerLeave",v="onPointerEnter",w="pointer"),N=_==null?p:wa(_),y=b==null?p:wa(b),p=new A(E,w+"leave",_,n,h),p.target=N,p.relatedTarget=y,E=null,di(h)===d&&(A=new A(v,w+"enter",b,n,h),A.target=y,A.relatedTarget=N,E=A),N=E,_&&b)t:{for(A=_,v=b,w=0,y=A;y;y=ua(y))w++;for(y=0,E=v;E;E=ua(E))y++;for(;0<w-y;)A=ua(A),w--;for(;0<y-w;)v=ua(v),y--;for(;w--;){if(A===v||v!==null&&A===v.alternate)break t;A=ua(A),v=ua(v)}A=null}else A=null;_!==null&&x0(m,p,_,A,!1),b!==null&&N!==null&&x0(m,N,b,A,!0)}}e:{if(p=d?wa(d):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var R=eE;else if(c0(p))if(Vw)R=sE;else{R=nE;var L=tE}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=rE);if(R&&(R=R(t,d))){Mw(m,R,n,h);break e}L&&L(t,p,d),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&Bf(p,"number",p.value)}switch(L=d?wa(d):window,t){case"focusin":(c0(L)||L.contentEditable==="true")&&(ya=L,em=d,dl=null);break;case"focusout":dl=em=ya=null;break;case"mousedown":tm=!0;break;case"contextmenu":case"mouseup":case"dragend":tm=!1,m0(m,n,h);break;case"selectionchange":if(oE)break;case"keydown":case"keyup":m0(m,n,h)}var j;if(Ep)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else xa?Ow(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Dw&&n.locale!=="ko"&&(xa||x!=="onCompositionStart"?x==="onCompositionEnd"&&xa&&(j=Pw()):(_s=h,bp="value"in _s?_s.value:_s.textContent,xa=!0)),L=Qu(d,x),0<L.length&&(x=new i0(x,t,null,n,h),m.push({event:x,listeners:L}),j?x.data=j:(j=Lw(n),j!==null&&(x.data=j)))),(j=Q2?X2(t,n):Y2(t,n))&&(d=Qu(d,"onBeforeInput"),0<d.length&&(h=new i0("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=j))}Gw(m,e)})}function Dl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Tl(t,n),a!=null&&r.unshift(Dl(t,a,s)),a=Tl(t,e),a!=null&&r.push(Dl(t,a,s))),t=t.return}return r}function ua(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function x0(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Tl(n,a),u!=null&&o.unshift(Dl(n,u,c))):s||(u=Tl(n,a),u!=null&&o.push(Dl(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dE=/\r\n?/g,hE=/\u0000|\uFFFD/g;function y0(t){return(typeof t=="string"?t:""+t).replace(dE,`
`).replace(hE,"")}function su(t,e,n){if(e=y0(e),y0(t)!==e&&n)throw Error(G(425))}function Xu(){}var nm=null,rm=null;function sm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var im=typeof setTimeout=="function"?setTimeout:void 0,fE=typeof clearTimeout=="function"?clearTimeout:void 0,v0=typeof Promise=="function"?Promise:void 0,mE=typeof queueMicrotask=="function"?queueMicrotask:typeof v0<"u"?function(t){return v0.resolve(null).then(t).catch(pE)}:im;function pE(t){setTimeout(function(){throw t})}function Yh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Cl(e)}function Is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function w0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var no=Math.random().toString(36).slice(2),dr="__reactFiber$"+no,Ol="__reactProps$"+no,Kr="__reactContainer$"+no,am="__reactEvents$"+no,gE="__reactListeners$"+no,xE="__reactHandles$"+no;function di(t){var e=t[dr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kr]||n[dr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=w0(t);t!==null;){if(n=t[dr])return n;t=w0(t)}return e}t=n,n=t.parentNode}return null}function oc(t){return t=t[dr]||t[Kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Vd(t){return t[Ol]||null}var om=[],_a=-1;function qs(t){return{current:t}}function $e(t){0>_a||(t.current=om[_a],om[_a]=null,_a--)}function Oe(t,e){_a++,om[_a]=t.current,t.current=e}var Ms={},Bt=qs(Ms),tn=qs(!1),bi=Ms;function Ua(t,e){var n=t.type.contextTypes;if(!n)return Ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function nn(t){return t=t.childContextTypes,t!=null}function Yu(){$e(tn),$e(Bt)}function _0(t,e,n){if(Bt.current!==Ms)throw Error(G(168));Oe(Bt,e),Oe(tn,n)}function Xw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,t2(t)||"Unknown",s));return Qe({},n,r)}function Ju(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ms,bi=Bt.current,Oe(Bt,t),Oe(tn,tn.current),!0}function b0(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=Xw(t,e,bi),r.__reactInternalMemoizedMergedChildContext=t,$e(tn),$e(Bt),Oe(Bt,t)):$e(tn),Oe(tn,n)}var Pr=null,Fd=!1,Jh=!1;function Yw(t){Pr===null?Pr=[t]:Pr.push(t)}function yE(t){Fd=!0,Yw(t)}function Hs(){if(!Jh&&Pr!==null){Jh=!0;var t=0,e=ke;try{var n=Pr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,Fd=!1}catch(s){throw Pr!==null&&(Pr=Pr.slice(t+1)),bw(yp,Hs),s}finally{ke=e,Jh=!1}}return null}var ba=[],Na=0,Zu=null,ed=0,Sn=[],Cn=0,Ni=null,Lr=1,Mr="";function oi(t,e){ba[Na++]=ed,ba[Na++]=Zu,Zu=t,ed=e}function Jw(t,e,n){Sn[Cn++]=Lr,Sn[Cn++]=Mr,Sn[Cn++]=Ni,Ni=t;var r=Lr;t=Mr;var s=32-Yn(r)-1;r&=~(1<<s),n+=1;var a=32-Yn(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Lr=1<<32-Yn(e)+s|n<<s|r,Mr=a+t}else Lr=1<<a|n<<s|r,Mr=t}function Tp(t){t.return!==null&&(oi(t,1),Jw(t,1,0))}function Ip(t){for(;t===Zu;)Zu=ba[--Na],ba[Na]=null,ed=ba[--Na],ba[Na]=null;for(;t===Ni;)Ni=Sn[--Cn],Sn[Cn]=null,Mr=Sn[--Cn],Sn[Cn]=null,Lr=Sn[--Cn],Sn[Cn]=null}var vn=null,gn=null,qe=!1,Gn=null;function Zw(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function N0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,gn=Is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ni!==null?{id:Lr,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,gn=null,!0):!1;default:return!1}}function lm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cm(t){if(qe){var e=gn;if(e){var n=e;if(!N0(t,e)){if(lm(t))throw Error(G(418));e=Is(n.nextSibling);var r=vn;e&&N0(t,e)?Zw(r,n):(t.flags=t.flags&-4097|2,qe=!1,vn=t)}}else{if(lm(t))throw Error(G(418));t.flags=t.flags&-4097|2,qe=!1,vn=t}}}function j0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function iu(t){if(t!==vn)return!1;if(!qe)return j0(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sm(t.type,t.memoizedProps)),e&&(e=gn)){if(lm(t))throw e_(),Error(G(418));for(;e;)Zw(t,e),e=Is(e.nextSibling)}if(j0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=Is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=vn?Is(t.stateNode.nextSibling):null;return!0}function e_(){for(var t=gn;t;)t=Is(t.nextSibling)}function $a(){gn=vn=null,qe=!1}function Sp(t){Gn===null?Gn=[t]:Gn.push(t)}var vE=ts.ReactCurrentBatchConfig;function Ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=s.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function au(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E0(t){var e=t._init;return e(t._payload)}function t_(t){function e(v,w){if(t){var y=v.deletions;y===null?(v.deletions=[w],v.flags|=16):y.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=Rs(v,w),v.index=0,v.sibling=null,v}function a(v,w,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<w?(v.flags|=2,w):y):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function c(v,w,y,E){return w===null||w.tag!==6?(w=af(y,v.mode,E),w.return=v,w):(w=s(w,y),w.return=v,w)}function u(v,w,y,E){var R=y.type;return R===ga?h(v,w,y.props.children,E,y.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===fs&&E0(R)===w.type)?(E=s(w,y.props),E.ref=Ho(v,w,y),E.return=v,E):(E=Ru(y.type,y.key,y.props,null,v.mode,E),E.ref=Ho(v,w,y),E.return=v,E)}function d(v,w,y,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==y.containerInfo||w.stateNode.implementation!==y.implementation?(w=of(y,v.mode,E),w.return=v,w):(w=s(w,y.children||[]),w.return=v,w)}function h(v,w,y,E,R){return w===null||w.tag!==7?(w=xi(y,v.mode,E,R),w.return=v,w):(w=s(w,y),w.return=v,w)}function m(v,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return w=af(""+w,v.mode,y),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qc:return y=Ru(w.type,w.key,w.props,null,v.mode,y),y.ref=Ho(v,null,w),y.return=v,y;case pa:return w=of(w,v.mode,y),w.return=v,w;case fs:var E=w._init;return m(v,E(w._payload),y)}if(Jo(w)||Uo(w))return w=xi(w,v.mode,y,null),w.return=v,w;au(v,w)}return null}function p(v,w,y,E){var R=w!==null?w.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return R!==null?null:c(v,w,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qc:return y.key===R?u(v,w,y,E):null;case pa:return y.key===R?d(v,w,y,E):null;case fs:return R=y._init,p(v,w,R(y._payload),E)}if(Jo(y)||Uo(y))return R!==null?null:h(v,w,y,E,null);au(v,y)}return null}function _(v,w,y,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(y)||null,c(w,v,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Qc:return v=v.get(E.key===null?y:E.key)||null,u(w,v,E,R);case pa:return v=v.get(E.key===null?y:E.key)||null,d(w,v,E,R);case fs:var L=E._init;return _(v,w,y,L(E._payload),R)}if(Jo(E)||Uo(E))return v=v.get(y)||null,h(w,v,E,R,null);au(w,E)}return null}function b(v,w,y,E){for(var R=null,L=null,j=w,x=w=0,k=null;j!==null&&x<y.length;x++){j.index>x?(k=j,j=null):k=j.sibling;var S=p(v,j,y[x],E);if(S===null){j===null&&(j=k);break}t&&j&&S.alternate===null&&e(v,j),w=a(S,w,x),L===null?R=S:L.sibling=S,L=S,j=k}if(x===y.length)return n(v,j),qe&&oi(v,x),R;if(j===null){for(;x<y.length;x++)j=m(v,y[x],E),j!==null&&(w=a(j,w,x),L===null?R=j:L.sibling=j,L=j);return qe&&oi(v,x),R}for(j=r(v,j);x<y.length;x++)k=_(j,v,x,y[x],E),k!==null&&(t&&k.alternate!==null&&j.delete(k.key===null?x:k.key),w=a(k,w,x),L===null?R=k:L.sibling=k,L=k);return t&&j.forEach(function(D){return e(v,D)}),qe&&oi(v,x),R}function A(v,w,y,E){var R=Uo(y);if(typeof R!="function")throw Error(G(150));if(y=R.call(y),y==null)throw Error(G(151));for(var L=R=null,j=w,x=w=0,k=null,S=y.next();j!==null&&!S.done;x++,S=y.next()){j.index>x?(k=j,j=null):k=j.sibling;var D=p(v,j,S.value,E);if(D===null){j===null&&(j=k);break}t&&j&&D.alternate===null&&e(v,j),w=a(D,w,x),L===null?R=D:L.sibling=D,L=D,j=k}if(S.done)return n(v,j),qe&&oi(v,x),R;if(j===null){for(;!S.done;x++,S=y.next())S=m(v,S.value,E),S!==null&&(w=a(S,w,x),L===null?R=S:L.sibling=S,L=S);return qe&&oi(v,x),R}for(j=r(v,j);!S.done;x++,S=y.next())S=_(j,v,x,S.value,E),S!==null&&(t&&S.alternate!==null&&j.delete(S.key===null?x:S.key),w=a(S,w,x),L===null?R=S:L.sibling=S,L=S);return t&&j.forEach(function(O){return e(v,O)}),qe&&oi(v,x),R}function N(v,w,y,E){if(typeof y=="object"&&y!==null&&y.type===ga&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Qc:e:{for(var R=y.key,L=w;L!==null;){if(L.key===R){if(R=y.type,R===ga){if(L.tag===7){n(v,L.sibling),w=s(L,y.props.children),w.return=v,v=w;break e}}else if(L.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===fs&&E0(R)===L.type){n(v,L.sibling),w=s(L,y.props),w.ref=Ho(v,L,y),w.return=v,v=w;break e}n(v,L);break}else e(v,L);L=L.sibling}y.type===ga?(w=xi(y.props.children,v.mode,E,y.key),w.return=v,v=w):(E=Ru(y.type,y.key,y.props,null,v.mode,E),E.ref=Ho(v,w,y),E.return=v,v=E)}return o(v);case pa:e:{for(L=y.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===y.containerInfo&&w.stateNode.implementation===y.implementation){n(v,w.sibling),w=s(w,y.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=of(y,v.mode,E),w.return=v,v=w}return o(v);case fs:return L=y._init,N(v,w,L(y._payload),E)}if(Jo(y))return b(v,w,y,E);if(Uo(y))return A(v,w,y,E);au(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,w!==null&&w.tag===6?(n(v,w.sibling),w=s(w,y),w.return=v,v=w):(n(v,w),w=af(y,v.mode,E),w.return=v,v=w),o(v)):n(v,w)}return N}var Ba=t_(!0),n_=t_(!1),td=qs(null),nd=null,ja=null,Cp=null;function Ap(){Cp=ja=nd=null}function Rp(t){var e=td.current;$e(td),t._currentValue=e}function um(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pa(t,e){nd=t,Cp=ja=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(Cp!==t)if(t={context:t,memoizedValue:e,next:null},ja===null){if(nd===null)throw Error(G(308));ja=t,nd.dependencies={lanes:0,firstContext:t}}else ja=ja.next=t;return e}var hi=null;function Pp(t){hi===null?hi=[t]:hi.push(t)}function r_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Pp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gr(t,r)}function Gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ms=!1;function Dp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gr(t,n)}return s=r.interleaved,s===null?(e.next=e,Pp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gr(t,n)}function ku(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vp(t,n)}}function k0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function rd(t,e,n,r){var s=t.updateQueue;ms=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=u))}if(a!==null){var m=s.baseState;o=0,h=d=u=null,c=a;do{var p=c.lane,_=c.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=t,A=c;switch(p=e,_=n,A.tag){case 1:if(b=A.payload,typeof b=="function"){m=b.call(_,m,p);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=A.payload,p=typeof b=="function"?b.call(_,m,p):b,p==null)break e;m=Qe({},m,p);break e;case 2:ms=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[c]:p.push(c))}else _={eventTime:_,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=_,u=m):h=h.next=_,o|=p;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;p=c,c=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Ei|=o,t.lanes=o,t.memoizedState=m}}function T0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var lc={},mr=qs(lc),Ll=qs(lc),Ml=qs(lc);function fi(t){if(t===lc)throw Error(G(174));return t}function Op(t,e){switch(Oe(Ml,e),Oe(Ll,t),Oe(mr,lc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qf(e,t)}$e(mr),Oe(mr,e)}function za(){$e(mr),$e(Ll),$e(Ml)}function i_(t){fi(Ml.current);var e=fi(mr.current),n=qf(e,t.type);e!==n&&(Oe(Ll,t),Oe(mr,n))}function Lp(t){Ll.current===t&&($e(mr),$e(Ll))}var Ke=qs(0);function sd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zh=[];function Mp(){for(var t=0;t<Zh.length;t++)Zh[t]._workInProgressVersionPrimary=null;Zh.length=0}var Tu=ts.ReactCurrentDispatcher,ef=ts.ReactCurrentBatchConfig,ji=0,Ge=null,pt=null,_t=null,id=!1,hl=!1,Vl=0,wE=0;function Dt(){throw Error(G(321))}function Vp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function Fp(t,e,n,r,s,a){if(ji=a,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tu.current=t===null||t.memoizedState===null?jE:EE,t=n(r,s),hl){a=0;do{if(hl=!1,Vl=0,25<=a)throw Error(G(301));a+=1,_t=pt=null,e.updateQueue=null,Tu.current=kE,t=n(r,s)}while(hl)}if(Tu.current=ad,e=pt!==null&&pt.next!==null,ji=0,_t=pt=Ge=null,id=!1,e)throw Error(G(300));return t}function Up(){var t=Vl!==0;return Vl=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ge.memoizedState=_t=t:_t=_t.next=t,_t}function Mn(){if(pt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=_t===null?Ge.memoizedState:_t.next;if(e!==null)_t=e,pt=t;else{if(t===null)throw Error(G(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},_t===null?Ge.memoizedState=_t=t:_t=_t.next=t}return _t}function Fl(t,e){return typeof e=="function"?e(t):e}function tf(t){var e=Mn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=pt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var c=o=null,u=null,d=a;do{var h=d.lane;if((ji&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,Ge.lanes|=h,Ei|=h}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=c,nr(r,e.memoizedState)||(en=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Ge.lanes|=a,Ei|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nf(t){var e=Mn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);nr(a,e.memoizedState)||(en=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function a_(){}function o_(t,e){var n=Ge,r=Mn(),s=e(),a=!nr(r.memoizedState,s);if(a&&(r.memoizedState=s,en=!0),r=r.queue,$p(u_.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,Ul(9,c_.bind(null,n,r,s,e),void 0,null),Nt===null)throw Error(G(349));ji&30||l_(n,e,s)}return s}function l_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function c_(t,e,n,r){e.value=n,e.getSnapshot=r,d_(e)&&h_(t)}function u_(t,e,n){return n(function(){d_(e)&&h_(t)})}function d_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function h_(t){var e=Gr(t,1);e!==null&&Jn(e,t,1,-1)}function I0(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:t},e.queue=t,t=t.dispatch=NE.bind(null,Ge,t),[e.memoizedState,t]}function Ul(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function f_(){return Mn().memoizedState}function Iu(t,e,n,r){var s=ur();Ge.flags|=t,s.memoizedState=Ul(1|e,n,void 0,r===void 0?null:r)}function Ud(t,e,n,r){var s=Mn();r=r===void 0?null:r;var a=void 0;if(pt!==null){var o=pt.memoizedState;if(a=o.destroy,r!==null&&Vp(r,o.deps)){s.memoizedState=Ul(e,n,a,r);return}}Ge.flags|=t,s.memoizedState=Ul(1|e,n,a,r)}function S0(t,e){return Iu(8390656,8,t,e)}function $p(t,e){return Ud(2048,8,t,e)}function m_(t,e){return Ud(4,2,t,e)}function p_(t,e){return Ud(4,4,t,e)}function g_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function x_(t,e,n){return n=n!=null?n.concat([t]):null,Ud(4,4,g_.bind(null,e,t),n)}function Bp(){}function y_(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v_(t,e){var n=Mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w_(t,e,n){return ji&21?(nr(n,e)||(n=Ew(),Ge.lanes|=n,Ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function _E(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=ef.transition;ef.transition={};try{t(!1),e()}finally{ke=n,ef.transition=r}}function __(){return Mn().memoizedState}function bE(t,e,n){var r=As(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},b_(t))N_(e,n);else if(n=r_(t,e,n,r),n!==null){var s=Wt();Jn(n,t,r,s),j_(n,e,r)}}function NE(t,e,n){var r=As(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(b_(t))N_(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(s.hasEagerState=!0,s.eagerState=c,nr(c,o)){var u=e.interleaved;u===null?(s.next=s,Pp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=r_(t,e,s,r),n!==null&&(s=Wt(),Jn(n,t,r,s),j_(n,e,r))}}function b_(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function N_(t,e){hl=id=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function j_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vp(t,n)}}var ad={readContext:Ln,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},jE={readContext:Ln,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:S0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Iu(4194308,4,g_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Iu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Iu(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bE.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:I0,useDebugValue:Bp,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=I0(!1),e=t[0];return t=_E.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,s=ur();if(qe){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),Nt===null)throw Error(G(349));ji&30||l_(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,S0(u_.bind(null,r,a,t),[t]),r.flags|=2048,Ul(9,c_.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=ur(),e=Nt.identifierPrefix;if(qe){var n=Mr,r=Lr;n=(r&~(1<<32-Yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EE={readContext:Ln,useCallback:y_,useContext:Ln,useEffect:$p,useImperativeHandle:x_,useInsertionEffect:m_,useLayoutEffect:p_,useMemo:v_,useReducer:tf,useRef:f_,useState:function(){return tf(Fl)},useDebugValue:Bp,useDeferredValue:function(t){var e=Mn();return w_(e,pt.memoizedState,t)},useTransition:function(){var t=tf(Fl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:o_,useId:__,unstable_isNewReconciler:!1},kE={readContext:Ln,useCallback:y_,useContext:Ln,useEffect:$p,useImperativeHandle:x_,useInsertionEffect:m_,useLayoutEffect:p_,useMemo:v_,useReducer:nf,useRef:f_,useState:function(){return nf(Fl)},useDebugValue:Bp,useDeferredValue:function(t){var e=Mn();return pt===null?e.memoizedState=t:w_(e,pt.memoizedState,t)},useTransition:function(){var t=nf(Fl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:o_,useId:__,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $d={isMounted:function(t){return(t=t._reactInternals)?Vi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Wt(),s=As(t),a=$r(r,s);a.payload=e,n!=null&&(a.callback=n),e=Ss(t,a,s),e!==null&&(Jn(e,t,s,r),ku(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Wt(),s=As(t),a=$r(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ss(t,a,s),e!==null&&(Jn(e,t,s,r),ku(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),r=As(t),s=$r(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ss(t,s,r),e!==null&&(Jn(e,t,r,n),ku(e,t,r))}};function C0(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Rl(n,r)||!Rl(s,a):!0}function E_(t,e,n){var r=!1,s=Ms,a=e.contextType;return typeof a=="object"&&a!==null?a=Ln(a):(s=nn(e)?bi:Bt.current,r=e.contextTypes,a=(r=r!=null)?Ua(t,s):Ms),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$d,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function A0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$d.enqueueReplaceState(e,e.state,null)}function hm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Dp(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Ln(a):(a=nn(e)?bi:Bt.current,s.context=Ua(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(dm(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$d.enqueueReplaceState(s,s.state,null),rd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function qa(t,e){try{var n="",r=e;do n+=e2(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function rf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TE=typeof WeakMap=="function"?WeakMap:Map;function k_(t,e,n){n=$r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ld||(ld=!0,Nm=r),fm(t,e)},n}function T_(t,e,n){n=$r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){fm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){fm(t,e),typeof r!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function R0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=$E.bind(null,t,e,n),e.then(t,t))}function P0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function D0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$r(-1,1),e.tag=2,Ss(n,e,1))),n.lanes|=1),t)}var IE=ts.ReactCurrentOwner,en=!1;function Ht(t,e,n,r){e.child=t===null?n_(e,null,n,r):Ba(e,t.child,n,r)}function O0(t,e,n,r,s){n=n.render;var a=e.ref;return Pa(e,s),r=Fp(t,e,n,r,a,s),n=Up(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qr(t,e,s)):(qe&&n&&Tp(e),e.flags|=1,Ht(t,e,r,s),e.child)}function L0(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Xp(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,I_(t,e,a,r,s)):(t=Ru(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Rl,n(o,r)&&t.ref===e.ref)return Qr(t,e,s)}return e.flags|=1,t=Rs(a,r),t.ref=e.ref,t.return=e,e.child=t}function I_(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Rl(a,r)&&t.ref===e.ref)if(en=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,Qr(t,e,s)}return mm(t,e,n,r,s)}function S_(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(ka,hn),hn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(ka,hn),hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Oe(ka,hn),hn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Oe(ka,hn),hn|=r;return Ht(t,e,s,n),e.child}function C_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mm(t,e,n,r,s){var a=nn(n)?bi:Bt.current;return a=Ua(e,a),Pa(e,s),n=Fp(t,e,n,r,a,s),r=Up(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qr(t,e,s)):(qe&&r&&Tp(e),e.flags|=1,Ht(t,e,n,s),e.child)}function M0(t,e,n,r,s){if(nn(n)){var a=!0;Ju(e)}else a=!1;if(Pa(e,s),e.stateNode===null)Su(t,e),E_(e,n,r),hm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ln(d):(d=nn(n)?bi:Bt.current,d=Ua(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&A0(e,o,r,d),ms=!1;var p=e.memoizedState;o.state=p,rd(e,r,o,s),u=e.memoizedState,c!==r||p!==u||tn.current||ms?(typeof h=="function"&&(dm(e,n,h,r),u=e.memoizedState),(c=ms||C0(e,n,c,r,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,s_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Wn(e.type,c),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ln(u):(u=nn(n)?bi:Bt.current,u=Ua(e,u));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||p!==u)&&A0(e,o,r,u),ms=!1,p=e.memoizedState,o.state=p,rd(e,r,o,s);var b=e.memoizedState;c!==m||p!==b||tn.current||ms?(typeof _=="function"&&(dm(e,n,_,r),b=e.memoizedState),(d=ms||C0(e,n,d,r,p,b,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return pm(t,e,n,r,a,s)}function pm(t,e,n,r,s,a){C_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&b0(e,n,!1),Qr(t,e,a);r=e.stateNode,IE.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ba(e,t.child,null,a),e.child=Ba(e,null,c,a)):Ht(t,e,c,a),e.memoizedState=r.state,s&&b0(e,n,!0),e.child}function A_(t){var e=t.stateNode;e.pendingContext?_0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_0(t,e.context,!1),Op(t,e.containerInfo)}function V0(t,e,n,r,s){return $a(),Sp(s),e.flags|=256,Ht(t,e,n,r),e.child}var gm={dehydrated:null,treeContext:null,retryLane:0};function xm(t){return{baseLanes:t,cachePool:null,transitions:null}}function R_(t,e,n){var r=e.pendingProps,s=Ke.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Oe(Ke,s&1),t===null)return cm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=qd(o,r,0,null),t=xi(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=xm(n),e.memoizedState=gm,t):zp(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return SE(t,e,o,r,c,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Rs(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?a=Rs(c,a):(a=xi(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?xm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=gm,r}return a=t.child,t=a.sibling,r=Rs(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zp(t,e){return e=qd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ou(t,e,n,r){return r!==null&&Sp(r),Ba(e,t.child,null,n),t=zp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SE(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=rf(Error(G(422))),ou(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=qd({mode:"visible",children:r.children},s,0,null),a=xi(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Ba(e,t.child,null,o),e.child.memoizedState=xm(o),e.memoizedState=gm,a);if(!(e.mode&1))return ou(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(G(419)),r=rf(a,r,void 0),ou(t,e,o,r)}if(c=(o&t.childLanes)!==0,en||c){if(r=Nt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Gr(t,s),Jn(r,t,s,-1))}return Qp(),r=rf(Error(G(421))),ou(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=BE.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,gn=Is(s.nextSibling),vn=e,qe=!0,Gn=null,t!==null&&(Sn[Cn++]=Lr,Sn[Cn++]=Mr,Sn[Cn++]=Ni,Lr=t.id,Mr=t.overflow,Ni=e),e=zp(e,r.children),e.flags|=4096,e)}function F0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),um(t.return,e,n)}function sf(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function P_(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Ht(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F0(t,n,e);else if(t.tag===19)F0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&sd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),sf(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&sd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}sf(e,!0,n,null,a);break;case"together":sf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Su(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function CE(t,e,n){switch(e.tag){case 3:A_(e),$a();break;case 5:i_(e);break;case 1:nn(e.type)&&Ju(e);break;case 4:Op(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Oe(td,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?R_(t,e,n):(Oe(Ke,Ke.current&1),t=Qr(t,e,n),t!==null?t.sibling:null);Oe(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return P_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,S_(t,e,n)}return Qr(t,e,n)}var D_,ym,O_,L_;D_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ym=function(){};O_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fi(mr.current);var a=null;switch(n){case"input":s=Uf(t,s),r=Uf(t,r),a=[];break;case"select":s=Qe({},s,{value:void 0}),r=Qe({},r,{value:void 0}),a=[];break;case"textarea":s=zf(t,s),r=zf(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xu)}Hf(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(El.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(El.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ve("scroll",t),a||c===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};L_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wo(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AE(t,e,n){var r=e.pendingProps;switch(Ip(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return nn(e.type)&&Yu(),Ot(e),null;case 3:return r=e.stateNode,za(),$e(tn),$e(Bt),Mp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(iu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(km(Gn),Gn=null))),ym(t,e),Ot(e),null;case 5:Lp(e);var s=fi(Ml.current);if(n=e.type,t!==null&&e.stateNode!=null)O_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return Ot(e),null}if(t=fi(mr.current),iu(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[dr]=e,r[Ol]=a,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(s=0;s<el.length;s++)Ve(el[s],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Gx(r,a),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ve("invalid",r);break;case"textarea":Xx(r,a),Ve("invalid",r)}Hf(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&su(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&su(r.textContent,c,t),s=["children",""+c]):El.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":Xc(r),Qx(r,a,!0);break;case"textarea":Xc(r),Yx(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Xu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[dr]=e,t[Ol]=r,D_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wf(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),s=r;break;case"iframe":case"object":case"embed":Ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<el.length;s++)Ve(el[s],t);s=r;break;case"source":Ve("error",t),s=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),s=r;break;case"details":Ve("toggle",t),s=r;break;case"input":Gx(t,r),s=Uf(t,r),Ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qe({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":Xx(t,r),s=zf(t,r),Ve("invalid",t);break;default:s=r}Hf(n,s),c=s;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?fw(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&dw(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&kl(t,u):typeof u=="number"&&kl(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(El.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Ve("scroll",t):u!=null&&fp(t,a,u,o))}switch(n){case"input":Xc(t),Qx(t,r,!1);break;case"textarea":Xc(t),Yx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ls(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Sa(t,!!r.multiple,a,!1):r.defaultValue!=null&&Sa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)L_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=fi(Ml.current),fi(mr.current),iu(e)){if(r=e.stateNode,n=e.memoizedProps,r[dr]=e,(a=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:su(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&su(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dr]=e,e.stateNode=r}return Ot(e),null;case 13:if($e(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&gn!==null&&e.mode&1&&!(e.flags&128))e_(),$a(),e.flags|=98560,a=!1;else if(a=iu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(G(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(G(317));a[dr]=e}else $a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),a=!1}else Gn!==null&&(km(Gn),Gn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?gt===0&&(gt=3):Qp())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return za(),ym(t,e),t===null&&Pl(e.stateNode.containerInfo),Ot(e),null;case 10:return Rp(e.type._context),Ot(e),null;case 17:return nn(e.type)&&Yu(),Ot(e),null;case 19:if($e(Ke),a=e.memoizedState,a===null)return Ot(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Wo(a,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sd(t),o!==null){for(e.flags|=128,Wo(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(Ke,Ke.current&1|2),e.child}t=t.sibling}a.tail!==null&&rt()>Ha&&(e.flags|=128,r=!0,Wo(a,!1),e.lanes=4194304)}else{if(!r)if(t=sd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!qe)return Ot(e),null}else 2*rt()-a.renderingStartTime>Ha&&n!==1073741824&&(e.flags|=128,r=!0,Wo(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=rt(),e.sibling=null,n=Ke.current,Oe(Ke,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return Gp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function RE(t,e){switch(Ip(e),e.tag){case 1:return nn(e.type)&&Yu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return za(),$e(tn),$e(Bt),Mp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lp(e),null;case 13:if($e(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));$a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ke),null;case 4:return za(),null;case 10:return Rp(e.type._context),null;case 22:case 23:return Gp(),null;case 24:return null;default:return null}}var lu=!1,Vt=!1,PE=typeof WeakSet=="function"?WeakSet:Set,te=null;function Ea(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function vm(t,e,n){try{n()}catch(r){et(t,e,r)}}var U0=!1;function DE(t,e){if(nm=Ku,t=$w(),kp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==a||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(_=m.firstChild)!==null;)p=m,m=_;for(;;){if(m===t)break t;if(p===n&&++d===s&&(c=o),p===a&&++h===r&&(u=o),(_=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rm={focusedElem:t,selectionRange:n},Ku=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var A=b.memoizedProps,N=b.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?A:Wn(e.type,A),N);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(E){et(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return b=U0,U0=!1,b}function fl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&vm(e,n,a)}s=s.next}while(s!==r)}}function Bd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function M_(t){var e=t.alternate;e!==null&&(t.alternate=null,M_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dr],delete e[Ol],delete e[am],delete e[gE],delete e[xE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function V_(t){return t.tag===5||t.tag===3||t.tag===4}function $0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||V_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _m(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xu));else if(r!==4&&(t=t.child,t!==null))for(_m(t,e,n),t=t.sibling;t!==null;)_m(t,e,n),t=t.sibling}function bm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bm(t,e,n),t=t.sibling;t!==null;)bm(t,e,n),t=t.sibling}var kt=null,Kn=!1;function ds(t,e,n){for(n=n.child;n!==null;)F_(t,e,n),n=n.sibling}function F_(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(Dd,n)}catch{}switch(n.tag){case 5:Vt||Ea(n,e);case 6:var r=kt,s=Kn;kt=null,ds(t,e,n),kt=r,Kn=s,kt!==null&&(Kn?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(Kn?(t=kt,n=n.stateNode,t.nodeType===8?Yh(t.parentNode,n):t.nodeType===1&&Yh(t,n),Cl(t)):Yh(kt,n.stateNode));break;case 4:r=kt,s=Kn,kt=n.stateNode.containerInfo,Kn=!0,ds(t,e,n),kt=r,Kn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&vm(n,e,o),s=s.next}while(s!==r)}ds(t,e,n);break;case 1:if(!Vt&&(Ea(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){et(n,e,c)}ds(t,e,n);break;case 21:ds(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,ds(t,e,n),Vt=r):ds(t,e,n);break;default:ds(t,e,n)}}function B0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new PE),e.forEach(function(r){var s=zE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:kt=c.stateNode,Kn=!1;break e;case 3:kt=c.stateNode.containerInfo,Kn=!0;break e;case 4:kt=c.stateNode.containerInfo,Kn=!0;break e}c=c.return}if(kt===null)throw Error(G(160));F_(a,o,s),kt=null,Kn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){et(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U_(e,t),e=e.sibling}function U_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),cr(t),r&4){try{fl(3,t,t.return),Bd(3,t)}catch(A){et(t,t.return,A)}try{fl(5,t,t.return)}catch(A){et(t,t.return,A)}}break;case 1:Hn(e,t),cr(t),r&512&&n!==null&&Ea(n,n.return);break;case 5:if(Hn(e,t),cr(t),r&512&&n!==null&&Ea(n,n.return),t.flags&32){var s=t.stateNode;try{kl(s,"")}catch(A){et(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&lw(s,a),Wf(c,o);var d=Wf(c,a);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?fw(s,m):h==="dangerouslySetInnerHTML"?dw(s,m):h==="children"?kl(s,m):fp(s,h,m,d)}switch(c){case"input":$f(s,a);break;case"textarea":cw(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var _=a.value;_!=null?Sa(s,!!a.multiple,_,!1):p!==!!a.multiple&&(a.defaultValue!=null?Sa(s,!!a.multiple,a.defaultValue,!0):Sa(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ol]=a}catch(A){et(t,t.return,A)}}break;case 6:if(Hn(e,t),cr(t),r&4){if(t.stateNode===null)throw Error(G(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(A){et(t,t.return,A)}}break;case 3:if(Hn(e,t),cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(A){et(t,t.return,A)}break;case 4:Hn(e,t),cr(t);break;case 13:Hn(e,t),cr(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Wp=rt())),r&4&&B0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(d=Vt)||h,Hn(e,t),Vt=d):Hn(e,t),cr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(te=t,h=t.child;h!==null;){for(m=te=h;te!==null;){switch(p=te,_=p.child,p.tag){case 0:case 11:case 14:case 15:fl(4,p,p.return);break;case 1:Ea(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(A){et(r,n,A)}}break;case 5:Ea(p,p.return);break;case 22:if(p.memoizedState!==null){q0(m);continue}}_!==null?(_.return=p,te=_):q0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=hw("display",o))}catch(A){et(t,t.return,A)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(A){et(t,t.return,A)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Hn(e,t),cr(t),r&4&&B0(t);break;case 21:break;default:Hn(e,t),cr(t)}}function cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(V_(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(kl(s,""),r.flags&=-33);var a=$0(t);bm(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=$0(t);_m(t,c,o);break;default:throw Error(G(161))}}catch(u){et(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OE(t,e,n){te=t,$_(t)}function $_(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var s=te,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||lu;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Vt;c=lu;var d=Vt;if(lu=o,(Vt=u)&&!d)for(te=s;te!==null;)o=te,u=o.child,o.tag===22&&o.memoizedState!==null?H0(s):u!==null?(u.return=o,te=u):H0(s);for(;a!==null;)te=a,$_(a),a=a.sibling;te=s,lu=c,Vt=d}z0(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,te=a):z0(t)}}function z0(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Bd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&T0(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}T0(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Cl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Vt||e.flags&512&&wm(e)}catch(p){et(e,e.return,p)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function q0(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function H0(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bd(4,e)}catch(u){et(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){et(e,s,u)}}var a=e.return;try{wm(e)}catch(u){et(e,a,u)}break;case 5:var o=e.return;try{wm(e)}catch(u){et(e,o,u)}}}catch(u){et(e,e.return,u)}if(e===t){te=null;break}var c=e.sibling;if(c!==null){c.return=e.return,te=c;break}te=e.return}}var LE=Math.ceil,od=ts.ReactCurrentDispatcher,qp=ts.ReactCurrentOwner,Pn=ts.ReactCurrentBatchConfig,we=0,Nt=null,dt=null,It=0,hn=0,ka=qs(0),gt=0,$l=null,Ei=0,zd=0,Hp=0,ml=null,Jt=null,Wp=0,Ha=1/0,Rr=null,ld=!1,Nm=null,Cs=null,cu=!1,bs=null,cd=0,pl=0,jm=null,Cu=-1,Au=0;function Wt(){return we&6?rt():Cu!==-1?Cu:Cu=rt()}function As(t){return t.mode&1?we&2&&It!==0?It&-It:vE.transition!==null?(Au===0&&(Au=Ew()),Au):(t=ke,t!==0||(t=window.event,t=t===void 0?16:Rw(t.type)),t):1}function Jn(t,e,n,r){if(50<pl)throw pl=0,jm=null,Error(G(185));ic(t,n,r),(!(we&2)||t!==Nt)&&(t===Nt&&(!(we&2)&&(zd|=n),gt===4&&gs(t,It)),rn(t,r),n===1&&we===0&&!(e.mode&1)&&(Ha=rt()+500,Fd&&Hs()))}function rn(t,e){var n=t.callbackNode;v2(t,e);var r=Wu(t,t===Nt?It:0);if(r===0)n!==null&&e0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&e0(n),e===1)t.tag===0?yE(W0.bind(null,t)):Yw(W0.bind(null,t)),mE(function(){!(we&6)&&Hs()}),n=null;else{switch(kw(r)){case 1:n=yp;break;case 4:n=Nw;break;case 16:n=Hu;break;case 536870912:n=jw;break;default:n=Hu}n=Q_(n,B_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function B_(t,e){if(Cu=-1,Au=0,we&6)throw Error(G(327));var n=t.callbackNode;if(Da()&&t.callbackNode!==n)return null;var r=Wu(t,t===Nt?It:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ud(t,r);else{e=r;var s=we;we|=2;var a=q_();(Nt!==t||It!==e)&&(Rr=null,Ha=rt()+500,gi(t,e));do try{FE();break}catch(c){z_(t,c)}while(!0);Ap(),od.current=a,we=s,dt!==null?e=0:(Nt=null,It=0,e=gt)}if(e!==0){if(e===2&&(s=Yf(t),s!==0&&(r=s,e=Em(t,s))),e===1)throw n=$l,gi(t,0),gs(t,r),rn(t,rt()),n;if(e===6)gs(t,r);else{if(s=t.current.alternate,!(r&30)&&!ME(s)&&(e=ud(t,r),e===2&&(a=Yf(t),a!==0&&(r=a,e=Em(t,a))),e===1))throw n=$l,gi(t,0),gs(t,r),rn(t,rt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:li(t,Jt,Rr);break;case 3:if(gs(t,r),(r&130023424)===r&&(e=Wp+500-rt(),10<e)){if(Wu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=im(li.bind(null,t,Jt,Rr),e);break}li(t,Jt,Rr);break;case 4:if(gs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Yn(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LE(r/1960))-r,10<r){t.timeoutHandle=im(li.bind(null,t,Jt,Rr),r);break}li(t,Jt,Rr);break;case 5:li(t,Jt,Rr);break;default:throw Error(G(329))}}}return rn(t,rt()),t.callbackNode===n?B_.bind(null,t):null}function Em(t,e){var n=ml;return t.current.memoizedState.isDehydrated&&(gi(t,e).flags|=256),t=ud(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&km(e)),t}function km(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function ME(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!nr(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gs(t,e){for(e&=~Hp,e&=~zd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yn(e),r=1<<n;t[n]=-1,e&=~r}}function W0(t){if(we&6)throw Error(G(327));Da();var e=Wu(t,0);if(!(e&1))return rn(t,rt()),null;var n=ud(t,e);if(t.tag!==0&&n===2){var r=Yf(t);r!==0&&(e=r,n=Em(t,r))}if(n===1)throw n=$l,gi(t,0),gs(t,e),rn(t,rt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,li(t,Jt,Rr),rn(t,rt()),null}function Kp(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Ha=rt()+500,Fd&&Hs())}}function ki(t){bs!==null&&bs.tag===0&&!(we&6)&&Da();var e=we;we|=1;var n=Pn.transition,r=ke;try{if(Pn.transition=null,ke=1,t)return t()}finally{ke=r,Pn.transition=n,we=e,!(we&6)&&Hs()}}function Gp(){hn=ka.current,$e(ka)}function gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fE(n)),dt!==null)for(n=dt.return;n!==null;){var r=n;switch(Ip(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yu();break;case 3:za(),$e(tn),$e(Bt),Mp();break;case 5:Lp(r);break;case 4:za();break;case 13:$e(Ke);break;case 19:$e(Ke);break;case 10:Rp(r.type._context);break;case 22:case 23:Gp()}n=n.return}if(Nt=t,dt=t=Rs(t.current,null),It=hn=e,gt=0,$l=null,Hp=zd=Ei=0,Jt=ml=null,hi!==null){for(e=0;e<hi.length;e++)if(n=hi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}hi=null}return t}function z_(t,e){do{var n=dt;try{if(Ap(),Tu.current=ad,id){for(var r=Ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}id=!1}if(ji=0,_t=pt=Ge=null,hl=!1,Vl=0,qp.current=null,n===null||n.return===null){gt=1,$l=e,dt=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=It,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=c,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=P0(o);if(_!==null){_.flags&=-257,D0(_,o,c,a,e),_.mode&1&&R0(a,d,e),e=_,u=d;var b=e.updateQueue;if(b===null){var A=new Set;A.add(u),e.updateQueue=A}else b.add(u);break e}else{if(!(e&1)){R0(a,d,e),Qp();break e}u=Error(G(426))}}else if(qe&&c.mode&1){var N=P0(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),D0(N,o,c,a,e),Sp(qa(u,c));break e}}a=u=qa(u,c),gt!==4&&(gt=2),ml===null?ml=[a]:ml.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var v=k_(a,u,e);k0(a,v);break e;case 1:c=u;var w=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Cs===null||!Cs.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e;var E=T_(a,c,e);k0(a,E);break e}}a=a.return}while(a!==null)}W_(n)}catch(R){e=R,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(!0)}function q_(){var t=od.current;return od.current=ad,t===null?ad:t}function Qp(){(gt===0||gt===3||gt===2)&&(gt=4),Nt===null||!(Ei&268435455)&&!(zd&268435455)||gs(Nt,It)}function ud(t,e){var n=we;we|=2;var r=q_();(Nt!==t||It!==e)&&(Rr=null,gi(t,e));do try{VE();break}catch(s){z_(t,s)}while(!0);if(Ap(),we=n,od.current=r,dt!==null)throw Error(G(261));return Nt=null,It=0,gt}function VE(){for(;dt!==null;)H_(dt)}function FE(){for(;dt!==null&&!u2();)H_(dt)}function H_(t){var e=G_(t.alternate,t,hn);t.memoizedProps=t.pendingProps,e===null?W_(t):dt=e,qp.current=null}function W_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RE(n,e),n!==null){n.flags&=32767,dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,dt=null;return}}else if(n=AE(n,e,hn),n!==null){dt=n;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);gt===0&&(gt=5)}function li(t,e,n){var r=ke,s=Pn.transition;try{Pn.transition=null,ke=1,UE(t,e,n,r)}finally{Pn.transition=s,ke=r}return null}function UE(t,e,n,r){do Da();while(bs!==null);if(we&6)throw Error(G(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(w2(t,a),t===Nt&&(dt=Nt=null,It=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cu||(cu=!0,Q_(Hu,function(){return Da(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Pn.transition,Pn.transition=null;var o=ke;ke=1;var c=we;we|=4,qp.current=null,DE(t,n),U_(n,t),aE(rm),Ku=!!nm,rm=nm=null,t.current=n,OE(n),d2(),we=c,ke=o,Pn.transition=a}else t.current=n;if(cu&&(cu=!1,bs=t,cd=s),a=t.pendingLanes,a===0&&(Cs=null),m2(n.stateNode),rn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ld)throw ld=!1,t=Nm,Nm=null,t;return cd&1&&t.tag!==0&&Da(),a=t.pendingLanes,a&1?t===jm?pl++:(pl=0,jm=t):pl=0,Hs(),null}function Da(){if(bs!==null){var t=kw(cd),e=Pn.transition,n=ke;try{if(Pn.transition=null,ke=16>t?16:t,bs===null)var r=!1;else{if(t=bs,bs=null,cd=0,we&6)throw Error(G(331));var s=we;for(we|=4,te=t.current;te!==null;){var a=te,o=a.child;if(te.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(te=d;te!==null;){var h=te;switch(h.tag){case 0:case 11:case 15:fl(8,h,a)}var m=h.child;if(m!==null)m.return=h,te=m;else for(;te!==null;){h=te;var p=h.sibling,_=h.return;if(M_(h),h===d){te=null;break}if(p!==null){p.return=_,te=p;break}te=_}}}var b=a.alternate;if(b!==null){var A=b.child;if(A!==null){b.child=null;do{var N=A.sibling;A.sibling=null,A=N}while(A!==null)}}te=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,te=o;else e:for(;te!==null;){if(a=te,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fl(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,te=v;break e}te=a.return}}var w=t.current;for(te=w;te!==null;){o=te;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,te=y;else e:for(o=w;te!==null;){if(c=te,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Bd(9,c)}}catch(R){et(c,c.return,R)}if(c===o){te=null;break e}var E=c.sibling;if(E!==null){E.return=c.return,te=E;break e}te=c.return}}if(we=s,Hs(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(Dd,t)}catch{}r=!0}return r}finally{ke=n,Pn.transition=e}}return!1}function K0(t,e,n){e=qa(n,e),e=k_(t,e,1),t=Ss(t,e,1),e=Wt(),t!==null&&(ic(t,1,e),rn(t,e))}function et(t,e,n){if(t.tag===3)K0(t,t,n);else for(;e!==null;){if(e.tag===3){K0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cs===null||!Cs.has(r))){t=qa(n,t),t=T_(e,t,1),e=Ss(e,t,1),t=Wt(),e!==null&&(ic(e,1,t),rn(e,t));break}}e=e.return}}function $E(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,Nt===t&&(It&n)===n&&(gt===4||gt===3&&(It&130023424)===It&&500>rt()-Wp?gi(t,0):Hp|=n),rn(t,e)}function K_(t,e){e===0&&(t.mode&1?(e=Zc,Zc<<=1,!(Zc&130023424)&&(Zc=4194304)):e=1);var n=Wt();t=Gr(t,e),t!==null&&(ic(t,e,n),rn(t,n))}function BE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),K_(t,n)}function zE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),K_(t,n)}var G_;G_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,CE(t,e,n);en=!!(t.flags&131072)}else en=!1,qe&&e.flags&1048576&&Jw(e,ed,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Su(t,e),t=e.pendingProps;var s=Ua(e,Bt.current);Pa(e,n),s=Fp(null,e,r,t,s,n);var a=Up();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(a=!0,Ju(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dp(e),s.updater=$d,e.stateNode=s,s._reactInternals=e,hm(e,r,t,n),e=pm(null,e,r,!0,a,n)):(e.tag=0,qe&&a&&Tp(e),Ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Su(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=HE(r),t=Wn(r,t),s){case 0:e=mm(null,e,r,t,n);break e;case 1:e=M0(null,e,r,t,n);break e;case 11:e=O0(null,e,r,t,n);break e;case 14:e=L0(null,e,r,Wn(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),mm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),M0(t,e,r,s,n);case 3:e:{if(A_(e),t===null)throw Error(G(387));r=e.pendingProps,a=e.memoizedState,s=a.element,s_(t,e),rd(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=qa(Error(G(423)),e),e=V0(t,e,r,n,s);break e}else if(r!==s){s=qa(Error(G(424)),e),e=V0(t,e,r,n,s);break e}else for(gn=Is(e.stateNode.containerInfo.firstChild),vn=e,qe=!0,Gn=null,n=n_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($a(),r===s){e=Qr(t,e,n);break e}Ht(t,e,r,n)}e=e.child}return e;case 5:return i_(e),t===null&&cm(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,sm(r,s)?o=null:a!==null&&sm(r,a)&&(e.flags|=32),C_(t,e),Ht(t,e,o,n),e.child;case 6:return t===null&&cm(e),null;case 13:return R_(t,e,n);case 4:return Op(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ba(e,null,r,n):Ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),O0(t,e,r,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Oe(td,r._currentValue),r._currentValue=o,a!==null)if(nr(a.value,o)){if(a.children===s.children&&!tn.current){e=Qr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=$r(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),um(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(G(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),um(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Pa(e,n),s=Ln(s),r=r(s),e.flags|=1,Ht(t,e,r,n),e.child;case 14:return r=e.type,s=Wn(r,e.pendingProps),s=Wn(r.type,s),L0(t,e,r,s,n);case 15:return I_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),Su(t,e),e.tag=1,nn(r)?(t=!0,Ju(e)):t=!1,Pa(e,n),E_(e,r,s),hm(e,r,s,n),pm(null,e,r,!0,t,n);case 19:return P_(t,e,n);case 22:return S_(t,e,n)}throw Error(G(156,e.tag))};function Q_(t,e){return bw(t,e)}function qE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new qE(t,e,n,r)}function Xp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HE(t){if(typeof t=="function")return Xp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pp)return 11;if(t===gp)return 14}return 2}function Rs(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ru(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Xp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ga:return xi(n.children,s,a,e);case mp:o=8,s|=8;break;case Lf:return t=Rn(12,n,e,s|2),t.elementType=Lf,t.lanes=a,t;case Mf:return t=Rn(13,n,e,s),t.elementType=Mf,t.lanes=a,t;case Vf:return t=Rn(19,n,e,s),t.elementType=Vf,t.lanes=a,t;case iw:return qd(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rw:o=10;break e;case sw:o=9;break e;case pp:o=11;break e;case gp:o=14;break e;case fs:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function xi(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function qd(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=iw,t.lanes=n,t.stateNode={isHidden:!1},t}function af(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function of(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uh(0),this.expirationTimes=Uh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yp(t,e,n,r,s,a,o,c,u){return t=new WE(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Rn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dp(a),t}function KE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function X_(t){if(!t)return Ms;t=t._reactInternals;e:{if(Vi(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(nn(n))return Xw(t,n,e)}return e}function Y_(t,e,n,r,s,a,o,c,u){return t=Yp(n,r,!0,t,s,a,o,c,u),t.context=X_(null),n=t.current,r=Wt(),s=As(n),a=$r(r,s),a.callback=e??null,Ss(n,a,s),t.current.lanes=s,ic(t,s,r),rn(t,r),t}function Hd(t,e,n,r){var s=e.current,a=Wt(),o=As(s);return n=X_(n),e.context===null?e.context=n:e.pendingContext=n,e=$r(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ss(s,e,o),t!==null&&(Jn(t,s,o,a),ku(t,s,o)),o}function dd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jp(t,e){G0(t,e),(t=t.alternate)&&G0(t,e)}function GE(){return null}var J_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zp(t){this._internalRoot=t}Wd.prototype.render=Zp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Hd(t,e,null,null)};Wd.prototype.unmount=Zp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ki(function(){Hd(null,t,null,null)}),e[Kr]=null}};function Wd(t){this._internalRoot=t}Wd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ps.length&&e!==0&&e<ps[n].priority;n++);ps.splice(n,0,t),n===0&&Aw(t)}};function eg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Q0(){}function QE(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=dd(o);a.call(d)}}var o=Y_(e,r,t,0,null,!1,!1,"",Q0);return t._reactRootContainer=o,t[Kr]=o.current,Pl(t.nodeType===8?t.parentNode:t),ki(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=dd(u);c.call(d)}}var u=Yp(t,0,!1,null,null,!1,!1,"",Q0);return t._reactRootContainer=u,t[Kr]=u.current,Pl(t.nodeType===8?t.parentNode:t),ki(function(){Hd(e,u,n,r)}),u}function Gd(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var c=s;s=function(){var u=dd(o);c.call(u)}}Hd(e,o,t,s)}else o=QE(n,e,t,s,r);return dd(o)}Tw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zo(e.pendingLanes);n!==0&&(vp(e,n|1),rn(e,rt()),!(we&6)&&(Ha=rt()+500,Hs()))}break;case 13:ki(function(){var r=Gr(t,1);if(r!==null){var s=Wt();Jn(r,t,1,s)}}),Jp(t,1)}};wp=function(t){if(t.tag===13){var e=Gr(t,134217728);if(e!==null){var n=Wt();Jn(e,t,134217728,n)}Jp(t,134217728)}};Iw=function(t){if(t.tag===13){var e=As(t),n=Gr(t,e);if(n!==null){var r=Wt();Jn(n,t,e,r)}Jp(t,e)}};Sw=function(){return ke};Cw=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Gf=function(t,e,n){switch(e){case"input":if($f(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Vd(r);if(!s)throw Error(G(90));ow(r),$f(r,s)}}}break;case"textarea":cw(t,n);break;case"select":e=n.value,e!=null&&Sa(t,!!n.multiple,e,!1)}};gw=Kp;xw=ki;var XE={usingClientEntryPoint:!1,Events:[oc,wa,Vd,mw,pw,Kp]},Ko={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YE={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ww(t),t===null?null:t.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||GE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{Dd=uu.inject(YE),fr=uu}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XE;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eg(e))throw Error(G(200));return KE(t,e,null,n)};Nn.createRoot=function(t,e){if(!eg(t))throw Error(G(299));var n=!1,r="",s=J_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yp(t,1,!1,null,null,n,!1,r,s),t[Kr]=e.current,Pl(t.nodeType===8?t.parentNode:t),new Zp(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=ww(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return ki(t)};Nn.hydrate=function(t,e,n){if(!Kd(e))throw Error(G(200));return Gd(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!eg(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=J_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Y_(e,null,t,1,n??null,s,!1,a,o),t[Kr]=e.current,Pl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Wd(e)};Nn.render=function(t,e,n){if(!Kd(e))throw Error(G(200));return Gd(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!Kd(t))throw Error(G(40));return t._reactRootContainer?(ki(function(){Gd(null,null,t,!1,function(){t._reactRootContainer=null,t[Kr]=null})}),!0):!1};Nn.unstable_batchedUpdates=Kp;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kd(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Gd(t,e,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function Z_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z_)}catch(t){console.error(t)}}Z_(),Zv.exports=Nn;var JE=Zv.exports,X0=JE;Df.createRoot=X0.createRoot,Df.hydrateRoot=X0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bl.apply(this,arguments)}var Ns;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ns||(Ns={}));const Y0="popstate";function ZE(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:c}=r.location;return Tm("",{pathname:a,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:hd(s)}return tk(e,n,null,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ek(){return Math.random().toString(36).substr(2,8)}function J0(t,e){return{usr:t.state,key:t.key,idx:e}}function Tm(t,e,n,r){return n===void 0&&(n=null),Bl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ro(e):e,{state:n,key:e&&e.key||r||ek()})}function hd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ro(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function tk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,c=Ns.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Bl({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){c=Ns.Pop;let N=h(),v=N==null?null:N-d;d=N,u&&u({action:c,location:A.location,delta:v})}function p(N,v){c=Ns.Push;let w=Tm(A.location,N,v);d=h()+1;let y=J0(w,d),E=A.createHref(w);try{o.pushState(y,"",E)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(E)}a&&u&&u({action:c,location:A.location,delta:1})}function _(N,v){c=Ns.Replace;let w=Tm(A.location,N,v);d=h();let y=J0(w,d),E=A.createHref(w);o.replaceState(y,"",E),a&&u&&u({action:c,location:A.location,delta:0})}function b(N){let v=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof N=="string"?N:hd(N);return w=w.replace(/ $/,"%20"),st(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let A={get action(){return c},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Y0,m),u=N,()=>{s.removeEventListener(Y0,m),u=null}},createHref(N){return e(s,N)},createURL:b,encodeLocation(N){let v=b(N);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:_,go(N){return o.go(N)}};return A}var Z0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Z0||(Z0={}));function nk(t,e,n){return n===void 0&&(n="/"),rk(t,e,n)}function rk(t,e,n,r){let s=typeof e=="string"?ro(e):e,a=tg(s.pathname||"/",n);if(a==null)return null;let o=tb(t);sk(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=gk(a);c=fk(o[u],d)}return c}function tb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(st(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Ps([r,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(st(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),tb(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:dk(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,o);else for(let u of nb(a.path))s(a,o,u)}),e}function nb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=nb(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function sk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ik=/^:[\w-]+$/,ak=3,ok=2,lk=1,ck=10,uk=-2,ey=t=>t==="*";function dk(t,e){let n=t.split("/"),r=n.length;return n.some(ey)&&(r+=uk),e&&(r+=ok),n.filter(s=>!ey(s)).reduce((s,a)=>s+(ik.test(a)?ak:a===""?lk:ck),r)}function hk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function fk(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",m=mk({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Ps([a,m.pathname]),pathnameBase:wk(Ps([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=Ps([a,m.pathnameBase]))}return o}function mk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,h,m)=>{let{paramName:p,isOptional:_}=h;if(p==="*"){let A=c[m]||"";o=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const b=c[m];return _&&!b?d[p]=void 0:d[p]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function pk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),eb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function gk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return eb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function tg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function xk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ro(t):t;return{pathname:n?n.startsWith("/")?n:yk(n,e):e,search:_k(r),hash:bk(s)}}function yk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function lf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ng(t,e){let n=vk(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function rg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ro(t):(s=Bl({},t),st(!s.pathname||!s.pathname.includes("?"),lf("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),lf("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),lf("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}c=m>=0?e[m]:"/"}let u=xk(s,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Ps=t=>t.join("/").replace(/\/\/+/g,"/"),wk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_k=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Nk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rb=["post","put","patch","delete"];new Set(rb);const jk=["get",...rb];new Set(jk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zl.apply(this,arguments)}const sg=T.createContext(null),Ek=T.createContext(null),Ws=T.createContext(null),Qd=T.createContext(null),Ks=T.createContext({outlet:null,matches:[],isDataRoute:!1}),sb=T.createContext(null);function kk(t,e){let{relative:n}=e===void 0?{}:e;so()||st(!1);let{basename:r,navigator:s}=T.useContext(Ws),{hash:a,pathname:o,search:c}=ab(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ps([r,o])),s.createHref({pathname:u,search:c,hash:a})}function so(){return T.useContext(Qd)!=null}function Gs(){return so()||st(!1),T.useContext(Qd).location}function ib(t){T.useContext(Ws).static||T.useLayoutEffect(t)}function Xt(){let{isDataRoute:t}=T.useContext(Ks);return t?Fk():Tk()}function Tk(){so()||st(!1);let t=T.useContext(sg),{basename:e,future:n,navigator:r}=T.useContext(Ws),{matches:s}=T.useContext(Ks),{pathname:a}=Gs(),o=JSON.stringify(ng(s,n.v7_relativeSplatPath)),c=T.useRef(!1);return ib(()=>{c.current=!0}),T.useCallback(function(d,h){if(h===void 0&&(h={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=rg(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ps([e,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[e,r,o,a,t])}function ab(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=T.useContext(Ws),{matches:s}=T.useContext(Ks),{pathname:a}=Gs(),o=JSON.stringify(ng(s,r.v7_relativeSplatPath));return T.useMemo(()=>rg(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function Ik(t,e){return Sk(t,e)}function Sk(t,e,n,r){so()||st(!1);let{navigator:s}=T.useContext(Ws),{matches:a}=T.useContext(Ks),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Gs(),h;if(e){var m;let N=typeof e=="string"?ro(e):e;u==="/"||(m=N.pathname)!=null&&m.startsWith(u)||st(!1),h=N}else h=d;let p=h.pathname||"/",_=p;if(u!=="/"){let N=u.replace(/^\//,"").split("/");_="/"+p.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=nk(t,{pathname:_}),A=Dk(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Ps([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Ps([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,r);return e&&A?T.createElement(Qd.Provider,{value:{location:zl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ns.Pop}},A):A}function Ck(){let t=Vk(),e=Nk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:s},n):null,null)}const Ak=T.createElement(Ck,null);class Rk extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?T.createElement(Ks.Provider,{value:this.props.routeContext},T.createElement(sb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Pk(t){let{routeContext:e,match:n,children:r}=t,s=T.useContext(sg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Ks.Provider,{value:e},r)}function Dk(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let h=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);h>=0||st(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:_}=n,b=m.route.loader&&p[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||b){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,p)=>{let _,b=!1,A=null,N=null;n&&(_=c&&m.route.id?c[m.route.id]:void 0,A=m.route.errorElement||Ak,u&&(d<0&&p===0?(Uk("route-fallback"),b=!0,N=null):d===p&&(b=!0,N=m.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),w=()=>{let y;return _?y=A:b?y=N:m.route.Component?y=T.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=h,T.createElement(Pk,{match:m,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:y})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?T.createElement(Rk,{location:n.location,revalidation:n.revalidation,component:A,error:_,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var ob=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ob||{}),lb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(lb||{});function Ok(t){let e=T.useContext(sg);return e||st(!1),e}function Lk(t){let e=T.useContext(Ek);return e||st(!1),e}function Mk(t){let e=T.useContext(Ks);return e||st(!1),e}function cb(t){let e=Mk(),n=e.matches[e.matches.length-1];return n.route.id||st(!1),n.route.id}function Vk(){var t;let e=T.useContext(sb),n=Lk(),r=cb();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Fk(){let{router:t}=Ok(ob.UseNavigateStable),e=cb(lb.UseNavigateStable),n=T.useRef(!1);return ib(()=>{n.current=!0}),T.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zl({fromRouteId:e},a)))},[t,e])}const ty={};function Uk(t,e,n){ty[t]||(ty[t]=!0)}function $k(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ig(t){let{to:e,replace:n,state:r,relative:s}=t;so()||st(!1);let{future:a,static:o}=T.useContext(Ws),{matches:c}=T.useContext(Ks),{pathname:u}=Gs(),d=Xt(),h=rg(e,ng(c,a.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(h);return T.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Ee(t){st(!1)}function Bk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ns.Pop,navigator:a,static:o=!1,future:c}=t;so()&&st(!1);let u=e.replace(/^\/*/,"/"),d=T.useMemo(()=>({basename:u,navigator:a,static:o,future:zl({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof r=="string"&&(r=ro(r));let{pathname:h="/",search:m="",hash:p="",state:_=null,key:b="default"}=r,A=T.useMemo(()=>{let N=tg(h,u);return N==null?null:{location:{pathname:N,search:m,hash:p,state:_,key:b},navigationType:s}},[u,h,m,p,_,b,s]);return A==null?null:T.createElement(Ws.Provider,{value:d},T.createElement(Qd.Provider,{children:n,value:A}))}function zk(t){let{children:e,location:n}=t;return Ik(Im(e),n)}new Promise(()=>{});function Im(t,e){e===void 0&&(e=[]);let n=[];return T.Children.forEach(t,(r,s)=>{if(!T.isValidElement(r))return;let a=[...e,s];if(r.type===T.Fragment){n.push.apply(n,Im(r.props.children,a));return}r.type!==Ee&&st(!1),!r.props.index||!r.props.children||st(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Im(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sm(){return Sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sm.apply(this,arguments)}function qk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Hk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Wk(t,e){return t.button===0&&(!e||e==="_self")&&!Hk(t)}function Cm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Kk(t,e){let n=Cm(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const Gk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Qk="6";try{window.__reactRouterVersion=Qk}catch{}const Xk="startTransition",ny=$j[Xk];function Yk(t){let{basename:e,children:n,future:r,window:s}=t,a=T.useRef();a.current==null&&(a.current=ZE({window:s,v5Compat:!0}));let o=a.current,[c,u]=T.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=T.useCallback(m=>{d&&ny?ny(()=>u(m)):u(m)},[u,d]);return T.useLayoutEffect(()=>o.listen(h),[o,h]),T.useEffect(()=>$k(r),[r]),T.createElement(Bk,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const Jk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=T.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,p=qk(e,Gk),{basename:_}=T.useContext(Ws),b,A=!1;if(typeof d=="string"&&Zk.test(d)&&(b=d,Jk))try{let y=new URL(window.location.href),E=d.startsWith("//")?new URL(y.protocol+d):new URL(d),R=tg(E.pathname,_);E.origin===y.origin&&R!=null?d=R+E.search+E.hash:A=!0}catch{}let N=kk(d,{relative:s}),v=eT(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:s,viewTransition:m});function w(y){r&&r(y),y.defaultPrevented||v(y)}return T.createElement("a",Sm({},p,{href:b||N,onClick:A||a?r:w,ref:n,target:u}))});var ry;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ry||(ry={}));var sy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sy||(sy={}));function eT(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=Xt(),d=Gs(),h=ab(t,{relative:o});return T.useCallback(m=>{if(Wk(m,n)){m.preventDefault();let p=r!==void 0?r:hd(d)===hd(h);u(t,{replace:p,state:s,preventScrollReset:a,relative:o,viewTransition:c})}},[d,u,h,r,s,n,t,a,o,c])}function ub(t){let e=T.useRef(Cm(t)),n=T.useRef(!1),r=Gs(),s=T.useMemo(()=>Kk(r.search,n.current?null:e.current),[r.search]),a=Xt(),o=T.useCallback((c,u)=>{const d=Cm(typeof c=="function"?c(s):c);n.current=!0,a("?"+d,u)},[a,s]);return[s,o]}var iy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},tT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=a>>2,m=(a&3)<<4|c>>4;let p=(c&15)<<2|d>>6,_=d&63;u||(_=64,o||(p=64)),r.push(n[h],n[m],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||d==null||m==null)throw new nT;const p=a<<2|c>>4;if(r.push(p),d!==64){const _=c<<4&240|d>>2;if(r.push(_),m!==64){const b=d<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rT=function(t){const e=db(t);return hb.encodeByteArray(e,!0)},fd=function(t){return rT(t).replace(/\./g,"")},fb=function(t){try{return hb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=()=>sT().__FIREBASE_DEFAULTS__,aT=()=>{if(typeof process>"u"||typeof iy>"u")return;const t=iy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fb(t[1]);return e&&JSON.parse(e)},Xd=()=>{try{return iT()||aT()||oT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mb=t=>{var e,n;return(n=(e=Xd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pb=t=>{const e=mb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gb=()=>{var t;return(t=Xd())===null||t===void 0?void 0:t.config},xb=t=>{var e;return(e=Xd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fd(JSON.stringify(n)),fd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function uT(){var t;const e=(t=Xd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mT(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pT(){return!uT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gT(){try{return typeof indexedDB=="object"}catch{return!1}}function xT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="FirebaseError";class jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yT,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?vT(a,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new jr(s,c,r)}}function vT(t,e){return t.replace(wT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const wT=/\{\$([^}]+)}/g;function _T(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function md(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(ay(a)&&ay(o)){if(!md(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ay(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function nl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bT(t,e){const n=new NT(t,e);return n.subscribe.bind(n)}class NT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=cf),s.error===void 0&&(s.error=cf),s.complete===void 0&&(s.complete=cf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t){return t&&t._delegate?t._delegate:t}class Vs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TT(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kT(t){return t===ci?void 0:t}function TT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ET(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const ST={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},CT=ge.INFO,AT={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},RT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ag{constructor(e){this.name=e,this._logLevel=CT,this._logHandler=RT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ST[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const PT=(t,e)=>e.some(n=>t instanceof n);let oy,ly;function DT(){return oy||(oy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OT(){return ly||(ly=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vb=new WeakMap,Am=new WeakMap,wb=new WeakMap,uf=new WeakMap,og=new WeakMap;function LT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Ds(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vb.set(n,t)}).catch(()=>{}),og.set(e,t),e}function MT(t){if(Am.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Am.set(t,e)}let Rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Am.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ds(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VT(t){Rm=t(Rm)}function FT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(df(this),e,...n);return wb.set(r,e.sort?e.sort():[e]),Ds(r)}:OT().includes(t)?function(...e){return t.apply(df(this),e),Ds(vb.get(this))}:function(...e){return Ds(t.apply(df(this),e))}}function UT(t){return typeof t=="function"?FT(t):(t instanceof IDBTransaction&&MT(t),PT(t,DT())?new Proxy(t,Rm):t)}function Ds(t){if(t instanceof IDBRequest)return LT(t);if(uf.has(t))return uf.get(t);const e=UT(t);return e!==t&&(uf.set(t,e),og.set(e,t)),e}const df=t=>og.get(t);function $T(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),c=Ds(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ds(o.result),u.oldVersion,u.newVersion,Ds(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const BT=["get","getKey","getAll","getAllKeys","count"],zT=["put","add","delete","clear"],hf=new Map;function cy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hf.get(e))return hf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=zT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BT.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return hf.set(e,a),a}VT(t=>({...t,get:(e,n,r)=>cy(e,n)||t.get(e,n,r),has:(e,n)=>!!cy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pm="@firebase/app",uy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new ag("@firebase/app"),WT="@firebase/app-compat",KT="@firebase/analytics-compat",GT="@firebase/analytics",QT="@firebase/app-check-compat",XT="@firebase/app-check",YT="@firebase/auth",JT="@firebase/auth-compat",ZT="@firebase/database",eI="@firebase/data-connect",tI="@firebase/database-compat",nI="@firebase/functions",rI="@firebase/functions-compat",sI="@firebase/installations",iI="@firebase/installations-compat",aI="@firebase/messaging",oI="@firebase/messaging-compat",lI="@firebase/performance",cI="@firebase/performance-compat",uI="@firebase/remote-config",dI="@firebase/remote-config-compat",hI="@firebase/storage",fI="@firebase/storage-compat",mI="@firebase/firestore",pI="@firebase/vertexai-preview",gI="@firebase/firestore-compat",xI="firebase",yI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="[DEFAULT]",vI={[Pm]:"fire-core",[WT]:"fire-core-compat",[GT]:"fire-analytics",[KT]:"fire-analytics-compat",[XT]:"fire-app-check",[QT]:"fire-app-check-compat",[YT]:"fire-auth",[JT]:"fire-auth-compat",[ZT]:"fire-rtdb",[eI]:"fire-data-connect",[tI]:"fire-rtdb-compat",[nI]:"fire-fn",[rI]:"fire-fn-compat",[sI]:"fire-iid",[iI]:"fire-iid-compat",[aI]:"fire-fcm",[oI]:"fire-fcm-compat",[lI]:"fire-perf",[cI]:"fire-perf-compat",[uI]:"fire-rc",[dI]:"fire-rc-compat",[hI]:"fire-gcs",[fI]:"fire-gcs-compat",[mI]:"fire-fst",[gI]:"fire-fst-compat",[pI]:"fire-vertex","fire-js":"fire-js",[xI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new Map,wI=new Map,Om=new Map;function dy(t,e){try{t.container.addComponent(e)}catch(n){Xr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ti(t){const e=t.name;if(Om.has(e))return Xr.debug(`There were multiple attempts to register component ${e}.`),!1;Om.set(e,t);for(const n of ql.values())dy(n,t);for(const n of wI.values())dy(n,t);return!0}function Yd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Os=new cc("app","Firebase",_I);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=yI;function _b(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Os.create("bad-app-name",{appName:String(s)});if(n||(n=gb()),!n)throw Os.create("no-options");const a=ql.get(s);if(a){if(md(n,a.options)&&md(r,a.config))return a;throw Os.create("duplicate-app",{appName:s})}const o=new IT(s);for(const u of Om.values())o.addComponent(u);const c=new bI(n,r,o);return ql.set(s,c),c}function Jd(t=Dm){const e=ql.get(t);if(!e&&t===Dm&&gb())return _b();if(!e)throw Os.create("no-app",{appName:t});return e}function bb(){return Array.from(ql.values())}function pr(t,e,n){var r;let s=(r=vI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xr.warn(c.join(" "));return}Ti(new Vs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="firebase-heartbeat-database",jI=1,Hl="firebase-heartbeat-store";let ff=null;function Nb(){return ff||(ff=$T(NI,jI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Os.create("idb-open",{originalErrorMessage:t.message})})),ff}async function EI(t){try{const n=(await Nb()).transaction(Hl),r=await n.objectStore(Hl).get(jb(t));return await n.done,r}catch(e){if(e instanceof jr)Xr.warn(e.message);else{const n=Os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xr.warn(n.message)}}}async function hy(t,e){try{const r=(await Nb()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,jb(t)),await r.done}catch(n){if(n instanceof jr)Xr.warn(n.message);else{const r=Os.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xr.warn(r.message)}}}function jb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=1024,TI=30*24*60*60*1e3;class II{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=fy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=TI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fy(),{heartbeatsToSend:r,unsentEntries:s}=SI(this._heartbeatsCache.heartbeats),a=fd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Xr.warn(n),""}}}function fy(){return new Date().toISOString().substring(0,10)}function SI(t,e=kI){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),my(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),my(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gT()?xT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function my(t){return fd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t){Ti(new Vs("platform-logger",e=>new qT(e),"PRIVATE")),Ti(new Vs("heartbeat",e=>new II(e),"PRIVATE")),pr(Pm,uy,t),pr(Pm,uy,"esm2017"),pr("fire-js","")}AI("");function lg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Eb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RI=Eb,kb=new cc("auth","Firebase",Eb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new ag("@firebase/auth");function PI(t,...e){pd.logLevel<=ge.WARN&&pd.warn(`Auth (${Fi}): ${t}`,...e)}function Pu(t,...e){pd.logLevel<=ge.ERROR&&pd.error(`Auth (${Fi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,...e){throw cg(t,...e)}function wn(t,...e){return cg(t,...e)}function Tb(t,e,n){const r=Object.assign(Object.assign({},RI()),{[e]:n});return new cc("auth","Firebase",r).create(e,{appName:t.name})}function gr(t){return Tb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kb.create(t,...e)}function re(t,e,...n){if(!t)throw cg(e,...n)}function Vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pu(e),new Error(e)}function Yr(t,e){t||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ib(){return py()==="http:"||py()==="https:"}function py(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ib()||hT()||"connection"in navigator)?navigator.onLine:!0}function OI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=cT()||fT()}get(){return DI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=new uc(3e4,6e4);function an(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fn(t,e,n,r,s={}){return Cb(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=io(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return dT()||(d.referrerPolicy="no-referrer"),Sb.fetch()(Ab(t,t.config.apiHost,n,c),d)})}async function Cb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},LI),e);try{const s=new FI(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw rl(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw rl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw rl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Tb(t,h,d);rr(t,h)}}catch(s){if(s instanceof jr)throw s;rr(t,"network-request-failed",{message:String(s)})}}async function Qs(t,e,n,r,s={}){const a=await Fn(t,e,n,r,s);return"mfaPendingCredential"in a&&rr(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Ab(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ug(t.config,s):`${t.config.apiScheme}://${s}`}function VI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wn(this.auth,"network-request-failed")),MI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=wn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t){return t!==void 0&&t.getResponse!==void 0}function xy(t){return t!==void 0&&t.enterprise!==void 0}class UI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return VI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(t){return(await Fn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function BI(t,e){return Fn(t,"GET","/v2/recaptchaConfig",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(t,e){return Fn(t,"POST","/v1/accounts:delete",e)}async function Rb(t,e){return Fn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qI(t,e=!1){const n=Le(t),r=await n.getIdToken(e),s=dg(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:gl(mf(s.auth_time)),issuedAtTime:gl(mf(s.iat)),expirationTime:gl(mf(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function mf(t){return Number(t)*1e3}function dg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pu("JWT malformed, contained fewer than 3 sections"),null;try{const s=fb(n);return s?JSON.parse(s):(Pu("Failed to decode base64 JWT payload"),null)}catch(s){return Pu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function yy(t){const e=dg(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jr&&HI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function HI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Wl(t,Rb(n,{idToken:r}));re(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Pb(a.providerUserInfo):[],c=GI(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),h=u?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Mm(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function KI(t){const e=Le(t);await gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Pb(t){return t.map(e=>{var{providerId:n}=e,r=lg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(t,e){const n=await Cb(t,{},async()=>{const r=io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=Ab(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Sb.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XI(t,e){return Fn(t,"POST","/v2/accounts:revokeToken",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=yy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await QI(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new Oa;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(re(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=lg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Mm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qI(this,e)}reload(){return KI(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(gr(this.auth));const e=await this.getIdToken();return await Wl(this,zI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,o,c,u,d,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,_=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:y,emailVerified:E,isAnonymous:R,providerData:L,stsTokenManager:j}=n;re(y&&j,e,"internal-error");const x=Oa.fromJSON(this.name,j);re(typeof y=="string",e,"internal-error"),hs(m,e.name),hs(p,e.name),re(typeof E=="boolean",e,"internal-error"),re(typeof R=="boolean",e,"internal-error"),hs(_,e.name),hs(b,e.name),hs(A,e.name),hs(N,e.name),hs(v,e.name),hs(w,e.name);const k=new Fr({uid:y,auth:e,email:p,emailVerified:E,displayName:m,isAnonymous:R,photoURL:b,phoneNumber:_,tenantId:A,stsTokenManager:x,createdAt:v,lastLoginAt:w});return L&&Array.isArray(L)&&(k.providerData=L.map(S=>Object.assign({},S))),N&&(k._redirectEventId=N),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new Oa;s.updateFromServerResponse(n);const a=new Fr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await gd(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Pb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new Oa;c.updateFromIdToken(r);const u=new Fr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Mm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new Map;function Ur(t){Yr(t instanceof Function,"Expected a class definition");let e=vy.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Db.type="NONE";const wy=Db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t,e,n){return`firebase:${t}:${e}:${n}`}class La{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Du(this.userKey,s.apiKey,a),this.fullPersistenceKey=Du("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new La(Ur(wy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||Ur(wy);const o=Du(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){const m=Fr._fromJSON(e,h);d!==a&&(c=m),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new La(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new La(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ob(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ub(e))return"Blackberry";if($b(e))return"Webos";if(Lb(e))return"Safari";if((e.includes("chrome/")||Mb(e))&&!e.includes("edge/"))return"Chrome";if(Fb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ob(t=zt()){return/firefox\//i.test(t)}function Lb(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mb(t=zt()){return/crios\//i.test(t)}function Vb(t=zt()){return/iemobile/i.test(t)}function Fb(t=zt()){return/android/i.test(t)}function Ub(t=zt()){return/blackberry/i.test(t)}function $b(t=zt()){return/webos/i.test(t)}function hg(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YI(t=zt()){var e;return hg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JI(){return mT()&&document.documentMode===10}function Bb(t=zt()){return hg(t)||Fb(t)||$b(t)||Ub(t)||/windows phone/i.test(t)||Vb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t,e=[]){let n;switch(t){case"Browser":n=_y(zt());break;case"Worker":n=`${_y(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(t,e={}){return Fn(t,"GET","/v2/passwordPolicy",an(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=6;class nS{constructor(e){var n,r,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:tS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new by(this),this.idTokenSubscription=new by(this),this.beforeStateQueue=new ZI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rb(this,{idToken:e}),r=await Fr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(gr(this));const n=e?Le(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eS(this),n=new nS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await XI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ns(t){return Le(t)}class by{constructor(e){this.auth=e,this.observer=null,this.addObserver=bT(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sS(t){dc=t}function fg(t){return dc.loadJS(t)}function iS(){return dc.recaptchaV2Script}function aS(){return dc.recaptchaEnterpriseScript}function oS(){return dc.gapiScript}function qb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const lS="recaptcha-enterprise",cS="NO_RECAPTCHA";class uS{constructor(e){this.type=lS,this.auth=ns(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{BI(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new UI(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(a,o,c){const u=window.grecaptcha;xy(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(cS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&xy(window.grecaptcha))s(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=aS();u.length!==0&&(u+=c),fg(u).then(()=>{s(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function Ny(t,e,n,r=!1){const s=new uS(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Vm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ny(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ny(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e){const n=Yd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(md(a,e??{}))return s;rr(s,"already-initialized")}return n.initialize({options:e})}function dS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hS(t,e,n){const r=ns(t);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=Wb(e),{host:o,port:c}=fS(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),mS()}function Wb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fS(t){const e=Wb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:jy(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:jy(o)}}}function jy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,n){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function pS(t,e){return Fn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(t,e){return Qs(t,"POST","/v1/accounts:signInWithPassword",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(t,e){return Qs(t,"POST","/v1/accounts:signInWithEmailLink",an(t,e))}async function yS(t,e){return Qs(t,"POST","/v1/accounts:signInWithEmailLink",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Zd{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Kl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(e,n,"signInWithPassword",gS);case"emailLink":return xS(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(e,r,"signUpPassword",pS);case"emailLink":return yS(e,{idToken:n,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t,e){return Qs(t,"POST","/v1/accounts:signInWithIdp",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="http://localhost";class Ii extends Zd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=lg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ii(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ma(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ma(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ma(e,n)}buildRequest(){const e={requestUri:vS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=io(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(t,e){return Fn(t,"POST","/v1/accounts:sendVerificationCode",an(t,e))}async function _S(t,e){return Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,e))}async function bS(t,e){const n=await Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,e));if(n.temporaryProof)throw rl(t,"account-exists-with-different-credential",n);return n}const NS={USER_NOT_FOUND:"user-not-found"};async function jS(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,n),NS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Zd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new xl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new xl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return _S(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return bS(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return jS(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:a}=e;return!r&&!n&&!s&&!a?null:new xl({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kS(t){const e=tl(nl(t)).link,n=e?tl(nl(e)).deep_link_id:null,r=tl(nl(t)).deep_link_id;return(r?tl(nl(r)).link:null)||r||n||e||t}class mg{constructor(e){var n,r,s,a,o,c;const u=tl(nl(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,m=ES((s=u.mode)!==null&&s!==void 0?s:null);re(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=kS(e);try{return new mg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.providerId=ao.PROVIDER_ID}static credential(e,n){return Kl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=mg.parseLink(n);return re(r,"argument-error"),Kl._fromEmailAndCode(e,r.code,r.tenantId)}}ao.PROVIDER_ID="password";ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Kb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends hc{constructor(){super("facebook.com")}static credential(e){return Ii._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ii._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ys.credential(n,r)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends hc{constructor(){super("github.com")}static credential(e){return Ii._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.GITHUB_SIGN_IN_METHOD="github.com";vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends hc{constructor(){super("twitter.com")}static credential(e,n){return Ii._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ws.credential(n,r)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(t,e){return Qs(t,"POST","/v1/accounts:signUp",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Fr._fromIdTokenResponse(e,r,s),o=Ey(r);return new Si({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ey(r);return new Si({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ey(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends jr{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,xd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new xd(e,n,r,s)}}function Gb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?xd._fromErrorAndOperation(t,a,e,r):a})}async function IS(t,e,n=!1){const r=await Wl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Si._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(t,e,n=!1){const{auth:r}=t;if(Qn(r.app))return Promise.reject(gr(r));const s="reauthenticate";try{const a=await Wl(t,Gb(r,s,e,t),n);re(a.idToken,r,"internal-error");const o=dg(a.idToken);re(o,r,"internal-error");const{sub:c}=o;return re(t.uid===c,r,"user-mismatch"),Si._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&rr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(t,e,n=!1){if(Qn(t.app))return Promise.reject(gr(t));const r="signIn",s=await Gb(t,r,e),a=await Si._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function Xb(t,e){return Qb(ns(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(t){const e=ns(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yl(t,e,n){if(Qn(t.app))return Promise.reject(gr(t));const r=ns(t),o=await Vm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Yb(t),u}),c=await Si._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function CS(t,e,n){return Qn(t.app)?Promise.reject(gr(t)):Xb(Le(t),ao.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yb(t),r})}function AS(t,e,n,r){return Le(t).onIdTokenChanged(e,n,r)}function RS(t,e,n){return Le(t).beforeAuthStateChanged(e,n)}function PS(t,e,n,r){return Le(t).onAuthStateChanged(e,n,r)}function DS(t){return Le(t).signOut()}async function OS(t){return Le(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t,e){return Fn(t,"POST","/v2/accounts/mfaEnrollment:start",an(t,e))}const yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yd,"1"),this.storage.removeItem(yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=1e3,VS=10;class Zb extends Jb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);JI()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,VS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zb.type="LOCAL";const e1=Zb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1 extends Jb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}t1.type="SESSION";const n1=t1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new eh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await FS(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=pg("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return window}function $S(t){ut().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(){return typeof ut().WorkerGlobalScope<"u"&&typeof ut().importScripts=="function"}async function BS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qS(){return gg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="firebaseLocalStorageDb",HS=1,vd="firebaseLocalStorage",s1="fbase_key";class fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function th(t,e){return t.transaction([vd],e?"readwrite":"readonly").objectStore(vd)}function WS(){const t=indexedDB.deleteDatabase(r1);return new fc(t).toPromise()}function Fm(){const t=indexedDB.open(r1,HS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vd,{keyPath:s1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vd)?e(r):(r.close(),await WS(),e(await Fm()))})})}async function ky(t,e,n){const r=th(t,!0).put({[s1]:e,value:n});return new fc(r).toPromise()}async function KS(t,e){const n=th(t,!1).get(e),r=await new fc(n).toPromise();return r===void 0?null:r.value}function Ty(t,e){const n=th(t,!0).delete(e);return new fc(n).toPromise()}const GS=800,QS=3;class i1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eh._getInstance(qS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await BS(),!this.activeServiceWorker)return;this.sender=new US(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fm();return await ky(e,yd,"1"),await Ty(e,yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ky(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>KS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ty(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=th(s,!1).getAll();return new fc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i1.type="LOCAL";const a1=i1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t,e){return Fn(t,"POST","/v2/accounts/mfaSignIn:start",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=500,JS=6e4,du=1e12;class ZS{constructor(e){this.auth=e,this.counter=du,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new eC(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||du;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||du;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||du;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class eC{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;re(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=tC(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},JS)},YS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function tC(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=qb("rcb"),nC=new uc(3e4,6e4);class rC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ut().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return re(sC(n),e,"argument-error"),this.shouldResolveImmediately(n)&&gy(ut().grecaptcha)?Promise.resolve(ut().grecaptcha):new Promise((r,s)=>{const a=ut().setTimeout(()=>{s(wn(e,"network-request-failed"))},nC.get());ut()[pf]=()=>{ut().clearTimeout(a),delete ut()[pf];const c=ut().grecaptcha;if(!c||!gy(c)){s(wn(e,"internal-error"));return}const u=c.render;c.render=(d,h)=>{const m=u(d,h);return this.counter++,m},this.hostLanguage=n,r(c)};const o=`${iS()}?${io({onload:pf,render:"explicit",hl:n})}`;fg(o).catch(()=>{clearTimeout(a),s(wn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ut().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function sC(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class iC{async load(e){return new ZS(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="recaptcha",aC={theme:"light",type:"image"};class Iy{constructor(e,n,r=Object.assign({},aC)){this.parameters=r,this.type=o1,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ns(e),this.isInvisible=this.parameters.size==="invisible",re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;re(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new iC:new rC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),s(o))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ut()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){re(Ib()&&!gg(),this.auth,"internal-error"),await oC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await $I(this.auth);re(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function oC(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=xl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function cC(t,e,n){if(Qn(t.app))return Promise.reject(gr(t));const r=ns(t),s=await uC(r,e,Le(n));return new lC(s,a=>Xb(r,a))}async function uC(t,e,n){var r;const s=await n.verify();try{re(typeof s=="string",t,"argument-error"),re(n.type===o1,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const o=a.session;if("phoneNumber"in a)return re(o.type==="enroll",t,"internal-error"),(await LS(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{re(o.type==="signin",t,"internal-error");const c=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;return re(c,t,"missing-multi-factor-info"),(await XS(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await wS(t,{phoneNumber:a.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t,e){return e?Ur(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends Zd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ma(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ma(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hC(t){return Qb(t.auth,new xg(t),t.bypassAuthState)}function fC(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),SS(n,new xg(t),t.bypassAuthState)}async function mC(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),IS(n,new xg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hC;case"linkViaPopup":case"linkViaRedirect":return mC;case"reauthViaPopup":case"reauthViaRedirect":return fC;default:rr(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new uc(2e3,1e4);class Ta extends l1{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pC.get())};e()}}Ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="pendingRedirect",Ou=new Map;class xC extends l1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ou.get(this.auth._key());if(!e){try{const r=await yC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ou.set(this.auth._key(),e)}return this.bypassAuthState||Ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yC(t,e){const n=_C(e),r=wC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function vC(t,e){Ou.set(t._key(),e)}function wC(t){return Ur(t._redirectPersistence)}function _C(t){return Du(gC,t.config.apiKey,t.name)}async function bC(t,e,n=!1){if(Qn(t.app))return Promise.reject(gr(t));const r=ns(t),s=dC(r,e),o=await new xC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=10*60*1e3;class jC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!c1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(e))}saveEventToCache(e){this.cachedEventUids.add(Sy(e)),this.lastProcessedEventTime=Date.now()}}function Sy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function c1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(t,e={}){return Fn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IC=/^https?/;async function SC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kC(t);for(const n of e)try{if(CC(n))return}catch{}rr(t,"unauthorized-domain")}function CC(t){const e=Lm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IC.test(n))return!1;if(TC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new uc(3e4,6e4);function Cy(){const t=ut().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RC(t){return new Promise((e,n)=>{var r,s,a;function o(){Cy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cy(),n(wn(t,"network-request-failed"))},timeout:AC.get()})}if(!((s=(r=ut().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=ut().gapi)===null||a===void 0)&&a.load)o();else{const c=qb("iframefcb");return ut()[c]=()=>{gapi.load?o():n(wn(t,"network-request-failed"))},fg(`${oS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Lu=null,e})}let Lu=null;function PC(t){return Lu=Lu||RC(t),Lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new uc(5e3,15e3),OC="__/auth/iframe",LC="emulator/auth/iframe",MC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FC(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ug(e,LC):`https://${t.config.authDomain}/${OC}`,r={apiKey:e.apiKey,appName:t.name,v:Fi},s=VC.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${io(r).slice(1)}`}async function UC(t){const e=await PC(t),n=ut().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:FC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MC,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),c=ut().setTimeout(()=>{a(o)},DC.get());function u(){ut().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BC=500,zC=600,qC="_blank",HC="http://localhost";class Ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WC(t,e,n,r=BC,s=zC){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},$C),{width:r.toString(),height:s.toString(),top:a,left:o}),d=zt().toLowerCase();n&&(c=Mb(d)?qC:n),Ob(d)&&(e=e||HC,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[_,b])=>`${p}${_}=${b},`,"");if(YI(d)&&c!=="_self")return KC(e||"",c),new Ay(null);const m=window.open(e||"",c,h);re(m,t,"popup-blocked");try{m.focus()}catch{}return new Ay(m)}function KC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="__/auth/handler",QC="emulator/auth/handler",XC=encodeURIComponent("fac");async function Ry(t,e,n,r,s,a){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fi,eventId:s};if(e instanceof Kb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_T(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof hc){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${XC}=${encodeURIComponent(u)}`:"";return`${YC(t)}?${io(c).slice(1)}${d}`}function YC({config:t}){return t.emulator?ug(t,QC):`https://${t.authDomain}/${GC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="webStorageSupport";class JC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n1,this._completeRedirectFn=bC,this._overrideRedirectResult=vC}async _openPopup(e,n,r,s){var a;Yr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Ry(e,n,r,Lm(),s);return WC(e,o,pg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await Ry(e,n,r,Lm(),s);return $S(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Yr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UC(e),r=new jC(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gf,{type:gf},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[gf];o!==void 0&&n(!!o),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bb()||Lb()||hg()}}const ZC=JC;var Py="@firebase/auth",Dy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nA(t){Ti(new Vs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zb(t)},d=new rS(r,s,a,u);return dS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ti(new Vs("auth-internal",e=>{const n=ns(e.getProvider("auth").getImmediate());return(r=>new eA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(Py,Dy,tA(t)),pr(Py,Dy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=5*60,sA=xb("authIdTokenMaxAge")||rA;let Oy=null;const iA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sA)return;const s=n==null?void 0:n.token;Oy!==s&&(Oy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function aA(t=Jd()){const e=Yd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Hb(t,{popupRedirectResolver:ZC,persistence:[a1,e1,n1]}),r=xb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=iA(a.toString());RS(n,o,()=>o(n.currentUser)),AS(n,c=>o(c))}}const s=mb("auth");return s&&hS(n,`http://${s}`),n}function oA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}sS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=wn("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",oA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nA("Browser");var lA="firebase",cA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(lA,cA,"app");var Ly=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,u1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,x){function k(){}k.prototype=x.prototype,j.D=x.prototype,j.prototype=new k,j.prototype.constructor=j,j.C=function(S,D,O){for(var P=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)P[Q-2]=arguments[Q];return x.prototype[D].apply(S,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,x,k){k||(k=0);var S=Array(16);if(typeof x=="string")for(var D=0;16>D;++D)S[D]=x.charCodeAt(k++)|x.charCodeAt(k++)<<8|x.charCodeAt(k++)<<16|x.charCodeAt(k++)<<24;else for(D=0;16>D;++D)S[D]=x[k++]|x[k++]<<8|x[k++]<<16|x[k++]<<24;x=j.g[0],k=j.g[1],D=j.g[2];var O=j.g[3],P=x+(O^k&(D^O))+S[0]+3614090360&4294967295;x=k+(P<<7&4294967295|P>>>25),P=O+(D^x&(k^D))+S[1]+3905402710&4294967295,O=x+(P<<12&4294967295|P>>>20),P=D+(k^O&(x^k))+S[2]+606105819&4294967295,D=O+(P<<17&4294967295|P>>>15),P=k+(x^D&(O^x))+S[3]+3250441966&4294967295,k=D+(P<<22&4294967295|P>>>10),P=x+(O^k&(D^O))+S[4]+4118548399&4294967295,x=k+(P<<7&4294967295|P>>>25),P=O+(D^x&(k^D))+S[5]+1200080426&4294967295,O=x+(P<<12&4294967295|P>>>20),P=D+(k^O&(x^k))+S[6]+2821735955&4294967295,D=O+(P<<17&4294967295|P>>>15),P=k+(x^D&(O^x))+S[7]+4249261313&4294967295,k=D+(P<<22&4294967295|P>>>10),P=x+(O^k&(D^O))+S[8]+1770035416&4294967295,x=k+(P<<7&4294967295|P>>>25),P=O+(D^x&(k^D))+S[9]+2336552879&4294967295,O=x+(P<<12&4294967295|P>>>20),P=D+(k^O&(x^k))+S[10]+4294925233&4294967295,D=O+(P<<17&4294967295|P>>>15),P=k+(x^D&(O^x))+S[11]+2304563134&4294967295,k=D+(P<<22&4294967295|P>>>10),P=x+(O^k&(D^O))+S[12]+1804603682&4294967295,x=k+(P<<7&4294967295|P>>>25),P=O+(D^x&(k^D))+S[13]+4254626195&4294967295,O=x+(P<<12&4294967295|P>>>20),P=D+(k^O&(x^k))+S[14]+2792965006&4294967295,D=O+(P<<17&4294967295|P>>>15),P=k+(x^D&(O^x))+S[15]+1236535329&4294967295,k=D+(P<<22&4294967295|P>>>10),P=x+(D^O&(k^D))+S[1]+4129170786&4294967295,x=k+(P<<5&4294967295|P>>>27),P=O+(k^D&(x^k))+S[6]+3225465664&4294967295,O=x+(P<<9&4294967295|P>>>23),P=D+(x^k&(O^x))+S[11]+643717713&4294967295,D=O+(P<<14&4294967295|P>>>18),P=k+(O^x&(D^O))+S[0]+3921069994&4294967295,k=D+(P<<20&4294967295|P>>>12),P=x+(D^O&(k^D))+S[5]+3593408605&4294967295,x=k+(P<<5&4294967295|P>>>27),P=O+(k^D&(x^k))+S[10]+38016083&4294967295,O=x+(P<<9&4294967295|P>>>23),P=D+(x^k&(O^x))+S[15]+3634488961&4294967295,D=O+(P<<14&4294967295|P>>>18),P=k+(O^x&(D^O))+S[4]+3889429448&4294967295,k=D+(P<<20&4294967295|P>>>12),P=x+(D^O&(k^D))+S[9]+568446438&4294967295,x=k+(P<<5&4294967295|P>>>27),P=O+(k^D&(x^k))+S[14]+3275163606&4294967295,O=x+(P<<9&4294967295|P>>>23),P=D+(x^k&(O^x))+S[3]+4107603335&4294967295,D=O+(P<<14&4294967295|P>>>18),P=k+(O^x&(D^O))+S[8]+1163531501&4294967295,k=D+(P<<20&4294967295|P>>>12),P=x+(D^O&(k^D))+S[13]+2850285829&4294967295,x=k+(P<<5&4294967295|P>>>27),P=O+(k^D&(x^k))+S[2]+4243563512&4294967295,O=x+(P<<9&4294967295|P>>>23),P=D+(x^k&(O^x))+S[7]+1735328473&4294967295,D=O+(P<<14&4294967295|P>>>18),P=k+(O^x&(D^O))+S[12]+2368359562&4294967295,k=D+(P<<20&4294967295|P>>>12),P=x+(k^D^O)+S[5]+4294588738&4294967295,x=k+(P<<4&4294967295|P>>>28),P=O+(x^k^D)+S[8]+2272392833&4294967295,O=x+(P<<11&4294967295|P>>>21),P=D+(O^x^k)+S[11]+1839030562&4294967295,D=O+(P<<16&4294967295|P>>>16),P=k+(D^O^x)+S[14]+4259657740&4294967295,k=D+(P<<23&4294967295|P>>>9),P=x+(k^D^O)+S[1]+2763975236&4294967295,x=k+(P<<4&4294967295|P>>>28),P=O+(x^k^D)+S[4]+1272893353&4294967295,O=x+(P<<11&4294967295|P>>>21),P=D+(O^x^k)+S[7]+4139469664&4294967295,D=O+(P<<16&4294967295|P>>>16),P=k+(D^O^x)+S[10]+3200236656&4294967295,k=D+(P<<23&4294967295|P>>>9),P=x+(k^D^O)+S[13]+681279174&4294967295,x=k+(P<<4&4294967295|P>>>28),P=O+(x^k^D)+S[0]+3936430074&4294967295,O=x+(P<<11&4294967295|P>>>21),P=D+(O^x^k)+S[3]+3572445317&4294967295,D=O+(P<<16&4294967295|P>>>16),P=k+(D^O^x)+S[6]+76029189&4294967295,k=D+(P<<23&4294967295|P>>>9),P=x+(k^D^O)+S[9]+3654602809&4294967295,x=k+(P<<4&4294967295|P>>>28),P=O+(x^k^D)+S[12]+3873151461&4294967295,O=x+(P<<11&4294967295|P>>>21),P=D+(O^x^k)+S[15]+530742520&4294967295,D=O+(P<<16&4294967295|P>>>16),P=k+(D^O^x)+S[2]+3299628645&4294967295,k=D+(P<<23&4294967295|P>>>9),P=x+(D^(k|~O))+S[0]+4096336452&4294967295,x=k+(P<<6&4294967295|P>>>26),P=O+(k^(x|~D))+S[7]+1126891415&4294967295,O=x+(P<<10&4294967295|P>>>22),P=D+(x^(O|~k))+S[14]+2878612391&4294967295,D=O+(P<<15&4294967295|P>>>17),P=k+(O^(D|~x))+S[5]+4237533241&4294967295,k=D+(P<<21&4294967295|P>>>11),P=x+(D^(k|~O))+S[12]+1700485571&4294967295,x=k+(P<<6&4294967295|P>>>26),P=O+(k^(x|~D))+S[3]+2399980690&4294967295,O=x+(P<<10&4294967295|P>>>22),P=D+(x^(O|~k))+S[10]+4293915773&4294967295,D=O+(P<<15&4294967295|P>>>17),P=k+(O^(D|~x))+S[1]+2240044497&4294967295,k=D+(P<<21&4294967295|P>>>11),P=x+(D^(k|~O))+S[8]+1873313359&4294967295,x=k+(P<<6&4294967295|P>>>26),P=O+(k^(x|~D))+S[15]+4264355552&4294967295,O=x+(P<<10&4294967295|P>>>22),P=D+(x^(O|~k))+S[6]+2734768916&4294967295,D=O+(P<<15&4294967295|P>>>17),P=k+(O^(D|~x))+S[13]+1309151649&4294967295,k=D+(P<<21&4294967295|P>>>11),P=x+(D^(k|~O))+S[4]+4149444226&4294967295,x=k+(P<<6&4294967295|P>>>26),P=O+(k^(x|~D))+S[11]+3174756917&4294967295,O=x+(P<<10&4294967295|P>>>22),P=D+(x^(O|~k))+S[2]+718787259&4294967295,D=O+(P<<15&4294967295|P>>>17),P=k+(O^(D|~x))+S[9]+3951481745&4294967295,j.g[0]=j.g[0]+x&4294967295,j.g[1]=j.g[1]+(D+(P<<21&4294967295|P>>>11))&4294967295,j.g[2]=j.g[2]+D&4294967295,j.g[3]=j.g[3]+O&4294967295}r.prototype.u=function(j,x){x===void 0&&(x=j.length);for(var k=x-this.blockSize,S=this.B,D=this.h,O=0;O<x;){if(D==0)for(;O<=k;)s(this,j,O),O+=this.blockSize;if(typeof j=="string"){for(;O<x;)if(S[D++]=j.charCodeAt(O++),D==this.blockSize){s(this,S),D=0;break}}else for(;O<x;)if(S[D++]=j[O++],D==this.blockSize){s(this,S),D=0;break}}this.h=D,this.o+=x},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var x=1;x<j.length-8;++x)j[x]=0;var k=8*this.o;for(x=j.length-8;x<j.length;++x)j[x]=k&255,k/=256;for(this.u(j),j=Array(16),x=k=0;4>x;++x)for(var S=0;32>S;S+=8)j[k++]=this.g[x]>>>S&255;return j};function a(j,x){var k=c;return Object.prototype.hasOwnProperty.call(k,j)?k[j]:k[j]=x(j)}function o(j,x){this.h=x;for(var k=[],S=!0,D=j.length-1;0<=D;D--){var O=j[D]|0;S&&O==x||(k[D]=O,S=!1)}this.g=k}var c={};function u(j){return-128<=j&&128>j?a(j,function(x){return new o([x|0],0>x?-1:0)}):new o([j|0],0>j?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return N(d(-j));for(var x=[],k=1,S=0;j>=k;S++)x[S]=j/k|0,k*=4294967296;return new o(x,0)}function h(j,x){if(j.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(j.charAt(0)=="-")return N(h(j.substring(1),x));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=d(Math.pow(x,8)),S=m,D=0;D<j.length;D+=8){var O=Math.min(8,j.length-D),P=parseInt(j.substring(D,D+O),x);8>O?(O=d(Math.pow(x,O)),S=S.j(O).add(d(P))):(S=S.j(k),S=S.add(d(P)))}return S}var m=u(0),p=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-N(this).m();for(var j=0,x=1,k=0;k<this.g.length;k++){var S=this.i(k);j+=(0<=S?S:4294967296+S)*x,x*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(b(this))return"0";if(A(this))return"-"+N(this).toString(j);for(var x=d(Math.pow(j,6)),k=this,S="";;){var D=E(k,x).g;k=v(k,D.j(x));var O=((0<k.g.length?k.g[0]:k.h)>>>0).toString(j);if(k=D,b(k))return O+S;for(;6>O.length;)O="0"+O;S=O+S}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function b(j){if(j.h!=0)return!1;for(var x=0;x<j.g.length;x++)if(j.g[x]!=0)return!1;return!0}function A(j){return j.h==-1}t.l=function(j){return j=v(this,j),A(j)?-1:b(j)?0:1};function N(j){for(var x=j.g.length,k=[],S=0;S<x;S++)k[S]=~j.g[S];return new o(k,~j.h).add(p)}t.abs=function(){return A(this)?N(this):this},t.add=function(j){for(var x=Math.max(this.g.length,j.g.length),k=[],S=0,D=0;D<=x;D++){var O=S+(this.i(D)&65535)+(j.i(D)&65535),P=(O>>>16)+(this.i(D)>>>16)+(j.i(D)>>>16);S=P>>>16,O&=65535,P&=65535,k[D]=P<<16|O}return new o(k,k[k.length-1]&-2147483648?-1:0)};function v(j,x){return j.add(N(x))}t.j=function(j){if(b(this)||b(j))return m;if(A(this))return A(j)?N(this).j(N(j)):N(N(this).j(j));if(A(j))return N(this.j(N(j)));if(0>this.l(_)&&0>j.l(_))return d(this.m()*j.m());for(var x=this.g.length+j.g.length,k=[],S=0;S<2*x;S++)k[S]=0;for(S=0;S<this.g.length;S++)for(var D=0;D<j.g.length;D++){var O=this.i(S)>>>16,P=this.i(S)&65535,Q=j.i(D)>>>16,V=j.i(D)&65535;k[2*S+2*D]+=P*V,w(k,2*S+2*D),k[2*S+2*D+1]+=O*V,w(k,2*S+2*D+1),k[2*S+2*D+1]+=P*Q,w(k,2*S+2*D+1),k[2*S+2*D+2]+=O*Q,w(k,2*S+2*D+2)}for(S=0;S<x;S++)k[S]=k[2*S+1]<<16|k[2*S];for(S=x;S<2*x;S++)k[S]=0;return new o(k,0)};function w(j,x){for(;(j[x]&65535)!=j[x];)j[x+1]+=j[x]>>>16,j[x]&=65535,x++}function y(j,x){this.g=j,this.h=x}function E(j,x){if(b(x))throw Error("division by zero");if(b(j))return new y(m,m);if(A(j))return x=E(N(j),x),new y(N(x.g),N(x.h));if(A(x))return x=E(j,N(x)),new y(N(x.g),x.h);if(30<j.g.length){if(A(j)||A(x))throw Error("slowDivide_ only works with positive integers.");for(var k=p,S=x;0>=S.l(j);)k=R(k),S=R(S);var D=L(k,1),O=L(S,1);for(S=L(S,2),k=L(k,2);!b(S);){var P=O.add(S);0>=P.l(j)&&(D=D.add(k),O=P),S=L(S,1),k=L(k,1)}return x=v(j,D.j(x)),new y(D,x)}for(D=m;0<=j.l(x);){for(k=Math.max(1,Math.floor(j.m()/x.m())),S=Math.ceil(Math.log(k)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),O=d(k),P=O.j(x);A(P)||0<P.l(j);)k-=S,O=d(k),P=O.j(x);b(O)&&(O=p),D=D.add(O),j=v(j,P)}return new y(D,j)}t.A=function(j){return E(this,j).h},t.and=function(j){for(var x=Math.max(this.g.length,j.g.length),k=[],S=0;S<x;S++)k[S]=this.i(S)&j.i(S);return new o(k,this.h&j.h)},t.or=function(j){for(var x=Math.max(this.g.length,j.g.length),k=[],S=0;S<x;S++)k[S]=this.i(S)|j.i(S);return new o(k,this.h|j.h)},t.xor=function(j){for(var x=Math.max(this.g.length,j.g.length),k=[],S=0;S<x;S++)k[S]=this.i(S)^j.i(S);return new o(k,this.h^j.h)};function R(j){for(var x=j.g.length+1,k=[],S=0;S<x;S++)k[S]=j.i(S)<<1|j.i(S-1)>>>31;return new o(k,j.h)}function L(j,x){var k=x>>5;x%=32;for(var S=j.g.length-k,D=[],O=0;O<S;O++)D[O]=0<x?j.i(O+k)>>>x|j.i(O+k+1)<<32-x:j.i(O+k);return new o(D,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,u1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,yi=o}).apply(typeof Ly<"u"?Ly:typeof self<"u"?self:typeof window<"u"?window:{});var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d1,sl,h1,Mu,Um,f1,m1,p1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof hu=="object"&&hu];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,f){if(f)e:{var g=r;l=l.split(".");for(var I=0;I<l.length-1;I++){var M=l[I];if(!(M in g))break e;g=g[M]}l=l[l.length-1],I=g[l],f=f(I),f!=I&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function a(l,f){l instanceof String&&(l+="");var g=0,I=!1,M={next:function(){if(!I&&g<l.length){var F=g++;return{value:f(F,l[F]),done:!1}}return I=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return a(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function m(l,f,g){if(!l)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,I),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function _(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var I=g.slice();return I.push.apply(I,arguments),l.apply(this,I)}}function b(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(I,M,F){for(var Y=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)Y[Ae-2]=arguments[Ae];return f.prototype[M].apply(I,Y)}}function A(l){const f=l.length;if(0<f){const g=Array(f);for(let I=0;I<f;I++)g[I]=l[I];return g}return[]}function N(l,f){for(let g=1;g<arguments.length;g++){const I=arguments[g];if(u(I)){const M=l.length||0,F=I.length||0;l.length=M+F;for(let Y=0;Y<F;Y++)l[M+Y]=I[Y]}else l.push(I)}}class v{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(l){return/^[\s\xa0]*$/.test(l)}function y(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function E(l){return E[" "](l),l}E[" "]=function(){};var R=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function L(l,f,g){for(const I in l)f.call(g,l[I],I,l)}function j(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function x(l){const f={};for(const g in l)f[g]=l[g];return f}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,f){let g,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(g in I)l[g]=I[g];for(let F=0;F<k.length;F++)g=k[F],Object.prototype.hasOwnProperty.call(I,g)&&(l[g]=I[g])}}function D(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function O(l){c.setTimeout(()=>{throw l},0)}function P(){var l=J;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Q{constructor(){this.h=this.g=null}add(f,g){const I=V.get();I.set(f,g),this.h?this.h.next=I:this.g=I,this.h=I}}var V=new v(()=>new K,l=>l.reset());class K{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let z,U=!1,J=new Q,ne=()=>{const l=c.Promise.resolve(void 0);z=()=>{l.then(_e)}};var _e=()=>{for(var l;l=P();){try{l.h.call(l.g)}catch(g){O(g)}var f=V;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}U=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var on=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};c.addEventListener("test",g,f),c.removeEventListener("test",g,f)}catch{}return l}();function $n(l,f){if(He.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,I=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(R){e:{try{E(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ln[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&$n.aa.h.call(this)}}b($n,He);var ln={2:"touch",3:"pen",4:"mouse"};$n.prototype.h=function(){$n.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),rs=0;function Sc(l,f,g,I,M){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!I,this.ha=M,this.key=++rs,this.da=this.fa=!1}function ss(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ys(l){this.src=l,this.g={},this.h=0}Ys.prototype.add=function(l,f,g,I,M){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var Y=Bi(l,f,I,M);return-1<Y?(f=l[Y],g||(f.fa=!1)):(f=new Sc(f,this.src,F,!!I,M),f.fa=g,l.push(f)),f};function kr(l,f){var g=f.type;if(g in l.g){var I=l.g[g],M=Array.prototype.indexOf.call(I,f,void 0),F;(F=0<=M)&&Array.prototype.splice.call(I,M,1),F&&(ss(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Bi(l,f,g,I){for(var M=0;M<l.length;++M){var F=l[M];if(!F.da&&F.listener==f&&F.capture==!!g&&F.ha==I)return M}return-1}var zi="closure_lm_"+(1e6*Math.random()|0),qi={};function mo(l,f,g,I,M){if(Array.isArray(f)){for(var F=0;F<f.length;F++)mo(l,f[F],g,I,M);return null}return g=vo(g),l&&l[cn]?l.K(f,g,d(I)?!!I.capture:!1,M):Cc(l,f,g,!1,I,M)}function Cc(l,f,g,I,M,F){if(!f)throw Error("Invalid event type");var Y=d(M)?!!M.capture:!!M,Ae=Hi(l);if(Ae||(l[zi]=Ae=new Ys(l)),g=Ae.add(f,g,I,Y,F),g.proxy)return g;if(I=po(),g.proxy=I,I.src=l,I.listener=g,l.addEventListener)on||(M=Y),M===void 0&&(M=!1),l.addEventListener(f.toString(),I,M);else if(l.attachEvent)l.attachEvent(xo(f.toString()),I);else if(l.addListener&&l.removeListener)l.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return g}function po(){function l(g){return f.call(l.src,l.listener,g)}const f=yo;return l}function go(l,f,g,I,M){if(Array.isArray(f))for(var F=0;F<f.length;F++)go(l,f[F],g,I,M);else I=d(I)?!!I.capture:!!I,g=vo(g),l&&l[cn]?(l=l.i,f=String(f).toString(),f in l.g&&(F=l.g[f],g=Bi(F,g,I,M),-1<g&&(ss(F[g]),Array.prototype.splice.call(F,g,1),F.length==0&&(delete l.g[f],l.h--)))):l&&(l=Hi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Bi(f,g,I,M)),(g=-1<l?f[l]:null)&&ir(g))}function ir(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[cn])kr(f.i,l);else{var g=l.type,I=l.proxy;f.removeEventListener?f.removeEventListener(g,I,l.capture):f.detachEvent?f.detachEvent(xo(g),I):f.addListener&&f.removeListener&&f.removeListener(I),(g=Hi(f))?(kr(g,l),g.h==0&&(g.src=null,f[zi]=null)):ss(l)}}}function xo(l){return l in qi?qi[l]:qi[l]="on"+l}function yo(l,f){if(l.da)l=!0;else{f=new $n(f,this);var g=l.listener,I=l.ha||l.src;l.fa&&ir(l),l=g.call(I,f)}return l}function Hi(l){return l=l[zi],l instanceof Ys?l:null}var Tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function vo(l){return typeof l=="function"?l:(l[Tr]||(l[Tr]=function(f){return l.handleEvent(f)}),l[Tr])}function ot(){ye.call(this),this.i=new Ys(this),this.M=this,this.F=null}b(ot,ye),ot.prototype[cn]=!0,ot.prototype.removeEventListener=function(l,f,g,I){go(this,l,f,g,I)};function xt(l,f){var g,I=l.F;if(I)for(g=[];I;I=I.F)g.push(I);if(l=l.M,I=f.type||f,typeof f=="string")f=new He(f,l);else if(f instanceof He)f.target=f.target||l;else{var M=f;f=new He(I,l),S(f,M)}if(M=!0,g)for(var F=g.length-1;0<=F;F--){var Y=f.g=g[F];M=Js(Y,I,!0,f)&&M}if(Y=f.g=l,M=Js(Y,I,!0,f)&&M,M=Js(Y,I,!1,f)&&M,g)for(F=0;F<g.length;F++)Y=f.g=g[F],M=Js(Y,I,!1,f)&&M}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],I=0;I<g.length;I++)ss(g[I]);delete l.g[f],l.h--}}this.F=null},ot.prototype.K=function(l,f,g,I){return this.i.add(String(l),f,!1,g,I)},ot.prototype.L=function(l,f,g,I){return this.i.add(String(l),f,!0,g,I)};function Js(l,f,g,I){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,F=0;F<f.length;++F){var Y=f[F];if(Y&&!Y.da&&Y.capture==g){var Ae=Y.listener,Et=Y.ha||Y.src;Y.fa&&kr(l.i,Y),M=Ae.call(Et,I)!==!1&&M}}return M&&!I.defaultPrevented}function wo(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:c.setTimeout(l,f||0)}function Wi(l){l.g=wo(()=>{l.g=null,l.i&&(l.i=!1,Wi(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Ac extends ye{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Wi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(l){ye.call(this),this.h=l,this.g={}}b(kn,ye);var _o=[];function Ki(l){L(l.g,function(f,g){this.g.hasOwnProperty(g)&&ir(f)},l),l.g={}}kn.prototype.N=function(){kn.aa.N.call(this),Ki(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gi=c.JSON.stringify,Rc=c.JSON.parse,Pc=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Qi(){}Qi.prototype.h=null;function bo(l){return l.h||(l.h=l.i())}function ar(){}var is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function as(){He.call(this,"d")}b(as,He);function Xi(){He.call(this,"c")}b(Xi,He);var or={},No=null;function Bn(){return No=No||new ot}or.La="serverreachability";function Dc(l){He.call(this,or.La,l)}b(Dc,He);function Zs(l){const f=Bn();xt(f,new Dc(f))}or.STAT_EVENT="statevent";function Yi(l,f){He.call(this,or.STAT_EVENT,l),this.stat=f}b(Yi,He);function mt(l){const f=Bn();xt(f,new Yi(f,l))}or.Ma="timingevent";function Ji(l,f){He.call(this,or.Ma,l),this.size=f}b(Ji,He);function os(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},f)}function Ir(){this.g=!0}Ir.prototype.xa=function(){this.g=!1};function Zi(l,f,g,I,M,F){l.info(function(){if(l.g)if(F)for(var Y="",Ae=F.split("&"),Et=0;Et<Ae.length;Et++){var Ne=Ae[Et].split("=");if(1<Ne.length){var Rt=Ne[0];Ne=Ne[1];var Pt=Rt.split("_");Y=2<=Pt.length&&Pt[1]=="type"?Y+(Rt+"="+Ne+"&"):Y+(Rt+"=redacted&")}}else Y=null;else Y=F;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+f+`
`+g+`
`+Y})}function jo(l,f,g,I,M,F,Y){l.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+f+`
`+g+`
`+F+" "+Y})}function Sr(l,f,g,I){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Oc(l,g)+(I?" "+I:"")})}function Eo(l,f){l.info(function(){return"TIMEOUT: "+f})}Ir.prototype.info=function(){};function Oc(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var I=g[l];if(!(2>I.length)){var M=I[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var Y=1;Y<M.length;Y++)M[Y]=""}}}}return Gi(g)}catch{return f}}var ls={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ko={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ea;function zn(){}b(zn,Qi),zn.prototype.g=function(){return new XMLHttpRequest},zn.prototype.i=function(){return{}},ea=new zn;function lr(l,f,g,I){this.j=l,this.i=f,this.l=g,this.R=I||1,this.U=new kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lc}function Lc(){this.i=null,this.g="",this.h=!1}var Mc={},To={};function Io(l,f,g){l.L=1,l.v=sa(he(f)),l.m=g,l.P=!0,lt(l,null)}function lt(l,f){l.F=Date.now(),ta(l),l.A=he(l.v);var g=l.A,I=l.R;Array.isArray(I)||(I=[String(I)]),wx(g.i,"t",I),l.C=0,g=l.j.J,l.h=new Lc,l.g=Vx(l.j,g?f:null,!l.m),0<l.O&&(l.M=new Ac(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,I=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(_o[0]=M.toString()),M=_o);for(var F=0;F<M.length;F++){var Y=mo(g,M[F],I||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Zs(),Zi(l.i,l.u,l.A,l.l,l.R,l.m)}lr.prototype.ca=function(l){l=l.target;const f=this.M;f&&Ar(l)==3?f.j():this.Y(l)},lr.prototype.Y=function(l){try{if(l==this.g)e:{const Pt=Ar(this.g);var f=this.g.Ba();const ca=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Tx(this.g)))){this.J||Pt!=4||f==7||(f==8||0>=ca?Zs(3):Zs(2)),Co(this);var g=this.g.Z();this.X=g;t:if(So(this)){var I=Tx(this.g);l="";var M=I.length,F=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cr(this),ei(this);var Y="";break t}this.h.i=new c.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(I[f],{stream:!(F&&f==M-1)});I.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,jo(this.i,this.u,this.A,this.l,this.R,Pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,Et=this.g;if((Ae=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ae)){var Ne=Ae;break t}}Ne=null}if(g=Ne)Sr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ao(this,g);else{this.o=!1,this.s=3,mt(12),Cr(this),ei(this);break e}}if(this.P){g=!0;let qn;for(;!this.J&&this.C<Y.length;)if(qn=Th(this,Y),qn==To){Pt==4&&(this.s=4,mt(14),g=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==Mc){this.s=4,mt(15),Sr(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else Sr(this.i,this.l,qn,null),Ao(this,qn);if(So(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||Y.length!=0||this.h.h||(this.s=1,mt(16),g=!1),this.o=this.o&&g,!g)Sr(this.i,this.l,Y,"[Invalid Chunked Response]"),Cr(this),ei(this);else if(0<Y.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Ph(Rt),Rt.M=!0,mt(11))}}else Sr(this.i,this.l,Y,null),Ao(this,Y);Pt==4&&Cr(this),this.o&&!this.J&&(Pt==4?Dx(this.j,this):(this.o=!1,ta(this)))}else bj(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Cr(this),ei(this)}}}catch{}finally{}};function So(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Th(l,f){var g=l.C,I=f.indexOf(`
`,g);return I==-1?To:(g=Number(f.substring(g,I)),isNaN(g)?Mc:(I+=1,I+g>f.length?To:(f=f.slice(I,I+g),l.C=I+g,f)))}lr.prototype.cancel=function(){this.J=!0,Cr(this)};function ta(l){l.S=Date.now()+l.I,Vc(l,l.I)}function Vc(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=os(p(l.ba,l),f)}function Co(l){l.B&&(c.clearTimeout(l.B),l.B=null)}lr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Eo(this.i,this.A),this.L!=2&&(Zs(),mt(17)),Cr(this),this.s=2,ei(this)):Vc(this,this.S-l)};function ei(l){l.j.G==0||l.J||Dx(l.j,l)}function Cr(l){Co(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Ki(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ao(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||na(g.h,l))){if(!l.K&&na(g.h,l)&&g.G==3){try{var I=g.Da.g.parse(f)}catch{I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Hc(g),zc(g);else break e;Rh(g),mt(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=os(p(g.Za,g),6e3));if(1>=Po(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else si(g,11)}else if((l.K||g.g==l)&&Hc(g),!w(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let Ne=M[f];if(g.T=Ne[0],Ne=Ne[1],g.G==2)if(Ne[0]=="c"){g.K=Ne[1],g.ia=Ne[2];const Rt=Ne[3];Rt!=null&&(g.la=Rt,g.j.info("VER="+g.la));const Pt=Ne[4];Pt!=null&&(g.Aa=Pt,g.j.info("SVER="+g.Aa));const ca=Ne[5];ca!=null&&typeof ca=="number"&&0<ca&&(I=1.5*ca,g.L=I,g.j.info("backChannelRequestTimeoutMs_="+I)),I=g;const qn=l.g;if(qn){const Kc=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kc){var F=I.h;F.g||Kc.indexOf("spdy")==-1&&Kc.indexOf("quic")==-1&&Kc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(ra(F,F.h),F.h=null))}if(I.D){const Dh=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Dh&&(I.ya=Dh,Ie(I.I,I.D,Dh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),I=g;var Y=l;if(I.qa=Mx(I,I.J?I.ia:null,I.W),Y.K){C(I.h,Y);var Ae=Y,Et=I.L;Et&&(Ae.I=Et),Ae.B&&(Co(Ae),ta(Ae)),I.g=Y}else Rx(I);0<g.i.length&&qc(g)}else Ne[0]!="stop"&&Ne[0]!="close"||si(g,7);else g.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?si(g,7):Ah(g):Ne[0]!="noop"&&g.l&&g.l.ta(Ne),g.v=0)}}Zs(4)}catch{}}var Ih=class{constructor(l,f){this.g=l,this.map=f}};function Fc(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ro(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Po(l){return l.h?1:l.g?l.g.size:0}function na(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function ra(l,f){l.g?l.g.add(f):l.h=f}function C(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Fc.prototype.cancel=function(){if(this.i=H(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function H(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return A(l.i)}function W(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,I=0;I<g;I++)f.push(l[I]);return f}f=[],g=0;for(I in l)f[g++]=l[I];return f}function le(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const I in l)f[g++]=I;return f}}}function be(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=le(l),I=W(l),M=I.length,F=0;F<M;F++)f.call(void 0,I[F],g&&g[F],l)}var Se=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Je(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var I=l[g].indexOf("="),M=null;if(0<=I){var F=l[g].substring(0,I);M=l[g].substring(I+1)}else F=l[g];f(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function yt(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof yt){this.h=l.h,Ce(this,l.j),this.o=l.o,this.g=l.g,We(this,l.s),this.l=l.l;var f=l.i,g=new Oo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),un(this,g),this.m=l.m}else l&&(f=String(l).match(Se))?(this.h=!1,Ce(this,f[1]||"",!0),this.o=ti(f[2]||""),this.g=ti(f[3]||"",!0),We(this,f[4]),this.l=ti(f[5]||"",!0),un(this,f[6]||"",!0),this.m=ti(f[7]||"")):(this.h=!1,this.i=new Oo(null,this.h))}yt.prototype.toString=function(){var l=[],f=this.j;f&&l.push(ni(f,Do,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(ni(f,Do,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(ni(g,g.charAt(0)=="/"?ia:fe,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",ni(g,aa)),l.join("")};function he(l){return new yt(l)}function Ce(l,f,g){l.j=g?ti(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function We(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function un(l,f,g){f instanceof Oo?(l.i=f,pj(l.i,l.h)):(g||(f=ni(f,ri)),l.i=new Oo(f,l.h))}function Ie(l,f,g){l.i.set(f,g)}function sa(l){return Ie(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ti(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ni(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,Sh),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Sh(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Do=/[#\/\?@]/g,fe=/[#\?:]/g,ia=/[#\?]/g,ri=/[#\?@]/g,aa=/#/g;function Oo(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function cs(l){l.g||(l.g=new Map,l.h=0,l.i&&Je(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Oo.prototype,t.add=function(l,f){cs(this),this.i=null,l=oa(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function yx(l,f){cs(l),f=oa(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function vx(l,f){return cs(l),f=oa(l,f),l.g.has(f)}t.forEach=function(l,f){cs(this),this.g.forEach(function(g,I){g.forEach(function(M){l.call(f,M,I,this)},this)},this)},t.na=function(){cs(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let I=0;I<f.length;I++){const M=l[I];for(let F=0;F<M.length;F++)g.push(f[I])}return g},t.V=function(l){cs(this);let f=[];if(typeof l=="string")vx(this,l)&&(f=f.concat(this.g.get(oa(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return cs(this),this.i=null,l=oa(this,l),vx(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function wx(l,f,g){yx(l,f),0<g.length&&(l.i=null,l.g.set(oa(l,f),A(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var I=f[g];const F=encodeURIComponent(String(I)),Y=this.V(I);for(I=0;I<Y.length;I++){var M=F;Y[I]!==""&&(M+="="+encodeURIComponent(String(Y[I]))),l.push(M)}}return this.i=l.join("&")};function oa(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function pj(l,f){f&&!l.j&&(cs(l),l.i=null,l.g.forEach(function(g,I){var M=I.toLowerCase();I!=M&&(yx(this,I),wx(this,M,g))},l)),l.j=f}function gj(l,f){const g=new Ir;if(c.Image){const I=new Image;I.onload=_(us,g,"TestLoadImage: loaded",!0,f,I),I.onerror=_(us,g,"TestLoadImage: error",!1,f,I),I.onabort=_(us,g,"TestLoadImage: abort",!1,f,I),I.ontimeout=_(us,g,"TestLoadImage: timeout",!1,f,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=l}else f(!1)}function xj(l,f){const g=new Ir,I=new AbortController,M=setTimeout(()=>{I.abort(),us(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:I.signal}).then(F=>{clearTimeout(M),F.ok?us(g,"TestPingServer: ok",!0,f):us(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),us(g,"TestPingServer: error",!1,f)})}function us(l,f,g,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(g)}catch{}}function yj(){this.g=new Pc}function vj(l,f,g){const I=g||"";try{be(l,function(M,F){let Y=M;d(M)&&(Y=Gi(M)),f.push(I+F+"="+encodeURIComponent(Y))})}catch(M){throw f.push(I+"type="+encodeURIComponent("_badmap")),M}}function Uc(l){this.l=l.Ub||null,this.j=l.eb||!1}b(Uc,Qi),Uc.prototype.g=function(){return new $c(this.l,this.j)},Uc.prototype.i=function(l){return function(){return l}}({});function $c(l,f){ot.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b($c,ot),t=$c.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Mo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||c).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Mo(this)),this.g&&(this.readyState=3,Mo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_x(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function _x(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Lo(this):Mo(this),this.readyState==3&&_x(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Lo(this))},t.Qa=function(l){this.g&&(this.response=l,Lo(this))},t.ga=function(){this.g&&Lo(this)};function Lo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Mo(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Mo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty($c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function bx(l){let f="";return L(l,function(g,I){f+=I,f+=":",f+=g,f+=`\r
`}),f}function Ch(l,f,g){e:{for(I in g){var I=!1;break e}I=!0}I||(g=bx(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Ie(l,f,g))}function Ze(l){ot.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ze,ot);var wj=/^https?$/i,_j=["POST","PUT"];t=Ze.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ea.g(),this.v=this.o?bo(this.o):bo(ea),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(F){Nx(this,F);return}if(l=g||"",g=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)g.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const F of I.keys())g.set(F,I.get(F));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(_j,f,void 0))||I||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Y]of g)this.g.setRequestHeader(F,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kx(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){Nx(this,F)}};function Nx(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,jx(l),Bc(l)}function jx(l){l.A||(l.A=!0,xt(l,"complete"),xt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,xt(this,"complete"),xt(this,"abort"),Bc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bc(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ex(this):this.bb())},t.bb=function(){Ex(this)};function Ex(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Ar(l)!=4||l.Z()!=2)){if(l.u&&Ar(l)==4)wo(l.Ea,0,l);else if(xt(l,"readystatechange"),Ar(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var I;if(I=Y===0){var M=String(l.D).match(Se)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),I=!wj.test(M?M.toLowerCase():"")}g=I}if(g)xt(l,"complete"),xt(l,"success");else{l.m=6;try{var F=2<Ar(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",jx(l)}}finally{Bc(l)}}}}function Bc(l,f){if(l.g){kx(l);const g=l.g,I=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||xt(l,"ready");try{g.onreadystatechange=I}catch{}}}function kx(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Ar(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Rc(f)}};function Tx(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function bj(l){const f={};l=(l.g&&2<=Ar(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<l.length;I++){if(w(l[I]))continue;var g=D(l[I]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=f[M]||[];f[M]=F,F.push(g)}j(f,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vo(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Ix(l){this.Aa=0,this.i=[],this.j=new Ir,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vo("baseRetryDelayMs",5e3,l),this.cb=Vo("retryDelaySeedMs",1e4,l),this.Wa=Vo("forwardChannelMaxRetries",2,l),this.wa=Vo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Fc(l&&l.concurrentRequestLimit),this.Da=new yj,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ix.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,I){mt(0),this.W=l,this.H=f||{},g&&I!==void 0&&(this.H.OSID=g,this.H.OAID=I),this.F=this.X,this.I=Mx(this,null,this.W),qc(this)};function Ah(l){if(Sx(l),l.G==3){var f=l.U++,g=he(l.I);if(Ie(g,"SID",l.K),Ie(g,"RID",f),Ie(g,"TYPE","terminate"),Fo(l,g),f=new lr(l,l.j,f),f.L=2,f.v=sa(he(g)),g=!1,c.navigator&&c.navigator.sendBeacon)try{g=c.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&c.Image&&(new Image().src=f.v,g=!0),g||(f.g=Vx(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ta(f)}Lx(l)}function zc(l){l.g&&(Ph(l),l.g.cancel(),l.g=null)}function Sx(l){zc(l),l.u&&(c.clearTimeout(l.u),l.u=null),Hc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function qc(l){if(!Ro(l.h)&&!l.s){l.s=!0;var f=l.Ga;z||ne(),U||(z(),U=!0),J.add(f,l),l.B=0}}function Nj(l,f){return Po(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=os(p(l.Ga,l,f),Ox(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new lr(this,this.j,l);let F=this.o;if(this.S&&(F?(F=x(F),S(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var I=this.i[g];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(f+=I,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ax(this,M,f),g=he(this.I),Ie(g,"RID",l),Ie(g,"CVER",22),this.D&&Ie(g,"X-HTTP-Session-Id",this.D),Fo(this,g),F&&(this.O?f="headers="+encodeURIComponent(String(bx(F)))+"&"+f:this.m&&Ch(g,this.m,F)),ra(this.h,M),this.Ua&&Ie(g,"TYPE","init"),this.P?(Ie(g,"$req",f),Ie(g,"SID","null"),M.T=!0,Io(M,g,null)):Io(M,g,f),this.G=2}}else this.G==3&&(l?Cx(this,l):this.i.length==0||Ro(this.h)||Cx(this))};function Cx(l,f){var g;f?g=f.l:g=l.U++;const I=he(l.I);Ie(I,"SID",l.K),Ie(I,"RID",g),Ie(I,"AID",l.T),Fo(l,I),l.m&&l.o&&Ch(I,l.m,l.o),g=new lr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Ax(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ra(l.h,g),Io(g,I,f)}function Fo(l,f){l.H&&L(l.H,function(g,I){Ie(f,I,g)}),l.l&&be({},function(g,I){Ie(f,I,g)})}function Ax(l,f,g){g=Math.min(l.i.length,g);var I=l.l?p(l.l.Na,l.l,l):null;e:{var M=l.i;let F=-1;for(;;){const Y=["count="+g];F==-1?0<g?(F=M[0].g,Y.push("ofs="+F)):F=0:Y.push("ofs="+F);let Ae=!0;for(let Et=0;Et<g;Et++){let Ne=M[Et].g;const Rt=M[Et].map;if(Ne-=F,0>Ne)F=Math.max(0,M[Et].g-100),Ae=!1;else try{vj(Rt,Y,"req"+Ne+"_")}catch{I&&I(Rt)}}if(Ae){I=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,I}function Rx(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;z||ne(),U||(z(),U=!0),J.add(f,l),l.v=0}}function Rh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=os(p(l.Fa,l),Ox(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Px(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=os(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),zc(this),Px(this))};function Ph(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Px(l){l.g=new lr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=he(l.qa);Ie(f,"RID","rpc"),Ie(f,"SID",l.K),Ie(f,"AID",l.T),Ie(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ie(f,"TO",l.ja),Ie(f,"TYPE","xmlhttp"),Fo(l,f),l.m&&l.o&&Ch(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=sa(he(f)),g.m=null,g.P=!0,lt(g,l)}t.Za=function(){this.C!=null&&(this.C=null,zc(this),Rh(this),mt(19))};function Hc(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Dx(l,f){var g=null;if(l.g==f){Hc(l),Ph(l),l.g=null;var I=2}else if(na(l.h,f))g=f.D,C(l.h,f),I=1;else return;if(l.G!=0){if(f.o)if(I==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;I=Bn(),xt(I,new Ji(I,g)),qc(l)}else Rx(l);else if(M=f.s,M==3||M==0&&0<f.X||!(I==1&&Nj(l,f)||I==2&&Rh(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),M){case 1:si(l,5);break;case 4:si(l,10);break;case 3:si(l,6);break;default:si(l,2)}}}function Ox(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function si(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),I=l.Xa;const M=!I;I=new yt(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ce(I,"https"),sa(I),M?gj(I.toString(),g):xj(I.toString(),g)}else mt(2);l.G=0,l.l&&l.l.sa(f),Lx(l),Sx(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Lx(l){if(l.G=0,l.ka=[],l.l){const f=H(l.h);(f.length!=0||l.i.length!=0)&&(N(l.ka,f),N(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function Mx(l,f,g){var I=g instanceof yt?he(g):new yt(g);if(I.g!="")f&&(I.g=f+"."+I.g),We(I,I.s);else{var M=c.location;I=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var F=new yt(null);I&&Ce(F,I),f&&(F.g=f),M&&We(F,M),g&&(F.l=g),I=F}return g=l.D,f=l.ya,g&&f&&Ie(I,g,f),Ie(I,"VER",l.la),Fo(l,I),I}function Vx(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ze(new Uc({eb:g})):new Ze(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fx(){}t=Fx.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wc(){}Wc.prototype.g=function(l,f){return new dn(l,f)};function dn(l,f){ot.call(this),this.g=new Ix(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!w(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new la(this)}b(dn,ot),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Ah(this.g)},dn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Gi(l),l=g);f.i.push(new Ih(f.Ya++,l)),f.G==3&&qc(f)},dn.prototype.N=function(){this.g.l=null,delete this.j,Ah(this.g),delete this.g,dn.aa.N.call(this)};function Ux(l){as.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}b(Ux,as);function $x(){Xi.call(this),this.status=1}b($x,Xi);function la(l){this.g=l}b(la,Fx),la.prototype.ua=function(){xt(this.g,"a")},la.prototype.ta=function(l){xt(this.g,new Ux(l))},la.prototype.sa=function(l){xt(this.g,new $x)},la.prototype.ra=function(){xt(this.g,"b")},Wc.prototype.createWebChannel=Wc.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,p1=function(){return new Wc},m1=function(){return Bn()},f1=or,Um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,Mu=ls,ko.COMPLETE="complete",h1=ko,ar.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",ot.prototype.listen=ot.prototype.K,sl=ar,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,d1=Ze}).apply(typeof hu<"u"?hu:typeof self<"u"?self:typeof window<"u"?window:{});const My="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new ag("@firebase/firestore");function Go(){return Ci.logLevel}function se(t,...e){if(Ci.logLevel<=ge.DEBUG){const n=e.map(yg);Ci.debug(`Firestore (${oo}): ${t}`,...n)}}function Jr(t,...e){if(Ci.logLevel<=ge.ERROR){const n=e.map(yg);Ci.error(`Firestore (${oo}): ${t}`,...n)}}function Ai(t,...e){if(Ci.logLevel<=ge.WARN){const n=e.map(yg);Ci.warn(`Firestore (${oo}): ${t}`,...n)}}function yg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: `+t;throw Jr(e),new Error(e)}function Te(t,e){t||oe()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class uA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dA{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Br,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Br)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new g1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Mt(e)}}class hA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const r=a=>{a.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new mA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=gA(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function Wa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new it(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new it(0,0))}static max(){return new ce(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),o=n.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends Gl{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const xA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Gl{construct(e,n,r){return new bt(e,n,r)}static isValidIdentifier(e){return xA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ee(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ee(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(a(),s++)}if(a(),o)throw new ee(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Fe.fromString(e))}static fromName(e){return new ie(Fe.fromString(e).popFirst(5))}static empty(){return new ie(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Fe(e.slice()))}}function yA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new Fs(s,ie.empty(),e)}function vA(t){return new Fs(t.readTime,t.key,-1)}class Fs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fs(ce.min(),ie.empty(),-1)}static max(){return new Fs(ce.max(),ie.empty(),-1)}}function wA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==_A)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,a=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++c,c===a&&r(o)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function NA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wg.oe=-1;function nh(t){return t==null}function wd(t){return t===0&&1/t==-1/0}function jA(t){return typeof t=="number"&&Number.isInteger(t)&&!wd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function y1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fu(this.root,e,this.comparator,!0)}}class fu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=s??Tt.EMPTY,this.right=a??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Tt(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,a){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new St(bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new v1("Invalid base64 string: "+a):a}}(e);return new jt(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const EA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(t){if(Te(!!t),typeof t=="string"){let e=0;const n=EA.exec(t);if(Te(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ri(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bg(t){const e=t.mapValue.fields.__previous_value__;return _g(e)?bg(e):e}function Ql(t){const e=Us(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n,r,s,a,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Ka{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ka("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu={mapValue:{}};function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_g(t)?4:IA(t)?9007199254740991:TA(t)?10:11:oe()}function wr(t,e){if(t===e)return!0;const n=Pi(t);if(n!==Pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ql(t).isEqual(Ql(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Us(s.timestampValue),c=Us(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Ri(s.bytesValue).isEqual(Ri(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return nt(s.geoPointValue.latitude)===nt(a.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return nt(s.integerValue)===nt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=nt(s.doubleValue),c=nt(a.doubleValue);return o===c?wd(o)===wd(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Wa(t.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},c=a.mapValue.fields||{};if(Vy(o)!==Vy(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!wr(o[u],c[u])))return!1;return!0}(t,e);default:return oe()}}function Xl(t,e){return(t.values||[]).find(n=>wr(n,e))!==void 0}function Ga(t,e){if(t===e)return 0;const n=Pi(t),r=Pi(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=nt(a.integerValue||a.doubleValue),u=nt(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Uy(t.timestampValue,e.timestampValue);case 4:return Uy(Ql(t),Ql(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Ri(a),u=Ri(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=je(c[d],u[d]);if(h!==0)return h}return je(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=je(nt(a.latitude),nt(o.latitude));return c!==0?c:je(nt(a.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $y(t.arrayValue,e.arrayValue);case 10:return function(a,o){var c,u,d,h;const m=a.fields||{},p=o.fields||{},_=(c=m.value)===null||c===void 0?void 0:c.arrayValue,b=(u=p.value)===null||u===void 0?void 0:u.arrayValue,A=je(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:$y(_,b)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===mu.mapValue&&o===mu.mapValue)return 0;if(a===mu.mapValue)return 1;if(o===mu.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=je(u[m],h[m]);if(p!==0)return p;const _=Ga(c[u[m]],d[h[m]]);if(_!==0)return _}return je(u.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function Uy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=Us(t),r=Us(e),s=je(n.seconds,r.seconds);return s!==0?s:je(n.nanos,r.nanos)}function $y(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Ga(n[s],r[s]);if(a)return a}return je(n.length,r.length)}function Qa(t){return $m(t)}function $m(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Us(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=$m(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${$m(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function By(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bm(t){return!!t&&"integerValue"in t}function Ng(t){return!!t&&"arrayValue"in t}function zy(t){return!!t&&"nullValue"in t}function qy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vu(t){return!!t&&"mapValue"in t}function TA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function IA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vl(n)}setAll(e){let n=bt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=vl(o):s.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Vu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Zt(vl(this.value))}}function w1(t){const e=[];return Ui(t.fields,(n,r)=>{const s=new bt([n]);if(Vu(r)){const a=w1(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,s,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Ft(e,0,ce.min(),ce.min(),ce.min(),Zt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ft(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ft(e,2,n,ce.min(),ce.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,ce.min(),ce.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n){this.position=e,this.inclusive=n}}function Hy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Ga(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function SA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{}class ht extends _1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AA(e,n,r):n==="array-contains"?new DA(e,r):n==="in"?new OA(e,r):n==="not-in"?new LA(e,r):n==="array-contains-any"?new MA(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RA(e,r):new PA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ga(n,this.value)):n!==null&&Pi(this.value)===Pi(n)&&this.matchesComparison(Ga(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends _1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new sr(e,n)}matches(e){return b1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function b1(t){return t.op==="and"}function N1(t){return CA(t)&&b1(t)}function CA(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function zm(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Qa(t.value);if(N1(t))return t.filters.map(e=>zm(e)).join(",");{const e=t.filters.map(n=>zm(n)).join(",");return`${t.op}(${e})`}}function j1(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&wr(r.value,s.value)}(t,e):t instanceof sr?function(r,s){return s instanceof sr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,c)=>a&&j1(o,s.filters[c]),!0):!1}(t,e):void oe()}function E1(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Qa(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(E1).join(" ,")+"}"}(t):"Filter"}class AA extends ht{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class RA extends ht{constructor(e,n){super(e,"in",n),this.keys=k1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class PA extends ht{constructor(e,n){super(e,"not-in",n),this.keys=k1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function k1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class DA extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ng(n)&&Xl(n.arrayValue,this.value)}}class OA extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xl(this.value.arrayValue,n)}}class LA extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Xl(this.value.arrayValue,n)}}class MA extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ng(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n=null,r=[],s=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function Ky(t,e=null,n=[],r=[],s=null,a=null,o=null){return new VA(t,e,n,r,s,a,o)}function jg(t){const e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>zm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qa(r)).join(",")),e.ue=n}return e.ue}function Eg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!j1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wy(t.startAt,e.startAt)&&Wy(t.endAt,e.endAt)}function qm(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n=null,r=[],s=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FA(t,e,n,r,s,a,o,c){return new lo(t,e,n,r,s,a,o,c)}function rh(t){return new lo(t)}function Gy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function T1(t){return t.collectionGroup!==null}function wl(t){const e=de(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new St(bt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Yl(a,r))}),n.has(bt.keyField().canonicalString())||e.ce.push(new Yl(bt.keyField(),r))}return e.ce}function xr(t){const e=de(t);return e.le||(e.le=UA(e,wl(t))),e.le}function UA(t,e){if(t.limitType==="F")return Ky(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Yl(s.field,a)});const n=t.endAt?new _d(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _d(t.startAt.position,t.startAt.inclusive):null;return Ky(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hm(t,e){const n=t.filters.concat([e]);return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bd(t,e,n){return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sh(t,e){return Eg(xr(t),xr(e))&&t.limitType===e.limitType}function I1(t){return`${jg(xr(t))}|lt:${t.limitType}`}function ha(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>E1(s)).join(", ")}]`),nh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Qa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Qa(s)).join(",")),`Target(${r})`}(xr(t))}; limitType=${t.limitType})`}function ih(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ie.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of wl(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=Hy(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,wl(r),s)||r.endAt&&!function(o,c,u){const d=Hy(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,wl(r),s))}(t,e)}function $A(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function S1(t){return(e,n)=>{let r=!1;for(const s of wl(t)){const a=BA(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function BA(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?Ga(u,d):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return y1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Xe(ie.comparator);function Zr(){return zA}const C1=new Xe(ie.comparator);function il(...t){let e=C1;for(const n of t)e=e.insert(n.key,n);return e}function A1(t){let e=C1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mi(){return _l()}function R1(){return _l()}function _l(){return new co(t=>t.toString(),(t,e)=>t.isEqual(e))}const qA=new Xe(ie.comparator),HA=new St(ie.comparator);function pe(...t){let e=HA;for(const n of t)e=e.add(n);return e}const WA=new St(je);function KA(){return WA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wd(e)?"-0":e}}function P1(t){return{integerValue:""+t}}function D1(t,e){return jA(e)?P1(e):kg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(){this._=void 0}}function GA(t,e,n){return t instanceof Jl?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&_g(a)&&(a=bg(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof Zl?L1(t,e):t instanceof ec?M1(t,e):function(s,a){const o=O1(s,a),c=Qy(o)+Qy(s.Pe);return Bm(o)&&Bm(s.Pe)?P1(c):kg(s.serializer,c)}(t,e)}function QA(t,e,n){return t instanceof Zl?L1(t,e):t instanceof ec?M1(t,e):n}function O1(t,e){return t instanceof tc?function(r){return Bm(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Jl extends ah{}class Zl extends ah{constructor(e){super(),this.elements=e}}function L1(t,e){const n=V1(e);for(const r of t.elements)n.some(s=>wr(s,r))||n.push(r);return{arrayValue:{values:n}}}class ec extends ah{constructor(e){super(),this.elements=e}}function M1(t,e){let n=V1(e);for(const r of t.elements)n=n.filter(s=>!wr(s,r));return{arrayValue:{values:n}}}class tc extends ah{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Qy(t){return nt(t.integerValue||t.doubleValue)}function V1(t){return Ng(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.field=e,this.transform=n}}function XA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Zl&&s instanceof Zl||r instanceof ec&&s instanceof ec?Wa(r.elements,s.elements,wr):r instanceof tc&&s instanceof tc?wr(r.Pe,s.Pe):r instanceof Jl&&s instanceof Jl}(t.transform,e.transform)}class YA{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class oh{}function U1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tg(t.key,Dn.none()):new gc(t.key,t.data,Dn.none());{const n=t.data,r=Zt.empty();let s=new St(bt.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Xs(t.key,r,new xn(s.toArray()),Dn.none())}}function JA(t,e,n){t instanceof gc?function(s,a,o){const c=s.value.clone(),u=Yy(s.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Xs?function(s,a,o){if(!Fu(s.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Yy(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll($1(s)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bl(t,e,n,r){return t instanceof gc?function(a,o,c,u){if(!Fu(a.precondition,o))return c;const d=a.value.clone(),h=Jy(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xs?function(a,o,c,u){if(!Fu(a.precondition,o))return c;const d=Jy(a.fieldTransforms,u,o),h=o.data;return h.setAll($1(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,o,c){return Fu(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function ZA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=O1(r.transform,s||null);a!=null&&(n===null&&(n=Zt.empty()),n.set(r.field,a))}return n||null}function Xy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wa(r,s,(a,o)=>XA(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gc extends oh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xs extends oh{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Yy(t,e,n){const r=new Map;Te(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,c=e.data.field(a.field);r.set(a.field,QA(o,c,n[s]))}return r}function Jy(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,GA(a,o,e))}return r}class Tg extends oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eR extends oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&JA(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=R1();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(s.key)?null:c;const u=U1(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Wa(this.mutations,e.mutations,(n,r)=>Xy(n,r))&&Wa(this.baseMutations,e.baseMutations,(n,r)=>Xy(n,r))}}class Ig{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Te(e.mutations.length===r.length);let s=function(){return qA}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new Ig(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,ve;function sR(t){switch(t){default:return oe();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function B1(t){if(t===void 0)return Jr("GRPC error has no .code"),B.UNKNOWN;switch(t){case ct.OK:return B.OK;case ct.CANCELLED:return B.CANCELLED;case ct.UNKNOWN:return B.UNKNOWN;case ct.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case ct.INTERNAL:return B.INTERNAL;case ct.UNAVAILABLE:return B.UNAVAILABLE;case ct.UNAUTHENTICATED:return B.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case ct.NOT_FOUND:return B.NOT_FOUND;case ct.ALREADY_EXISTS:return B.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return B.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case ct.ABORTED:return B.ABORTED;case ct.OUT_OF_RANGE:return B.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return B.UNIMPLEMENTED;case ct.DATA_LOSS:return B.DATA_LOSS;default:return oe()}}(ve=ct||(ct={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new yi([4294967295,4294967295],0);function Zy(t){const e=iR().encode(t),n=new u1;return n.update(e),new Uint8Array(n.digest())}function ev(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new yi([n,r],0),new yi([s,a],0)]}class Sg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new al(`Invalid padding: ${n}`);if(r<0)throw new al(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new al(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new al(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=yi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(yi.fromNumber(r)));return s.compare(aR)===1&&(s=new yi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Zy(e),[r,s]=ev(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Sg(a,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=Zy(e),[r,s]=ev(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lh(ce.min(),s,new Xe(je),Zr(),pe())}}class xc{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xc(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class z1{constructor(e,n){this.targetId=e,this.me=n}}class q1{constructor(e,n,r=jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class tv{constructor(){this.fe=0,this.ge=rv(),this.pe=jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new xc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=rv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zr(),this.qe=nv(),this.Qe=new Xe(je)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(qm(a))if(r===0){const o=new ie(a.path);this.Ue(n,o,Ft.newNoDocument(o,ce.min()))}else Te(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,c;try{o=Ri(r).toUint8Array()}catch(u){if(u instanceof v1)return Ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Sg(o,s,a)}catch(u){return Ai(u instanceof al?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const c=this.Je(o);if(c){if(a.current&&qm(c.target)){const u=new ie(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ft.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=pe();this.qe.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new lh(e,n,this.Qe,this.ke,r);return this.ke=Zr(),this.qe=nv(),this.Qe=new Xe(je),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new tv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(je),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function nv(){return new Xe(ie.comparator)}function rv(){return new Xe(ie.comparator)}const lR={asc:"ASCENDING",desc:"DESCENDING"},cR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uR={and:"AND",or:"OR"};class dR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wm(t,e){return t.useProto3Json||nh(e)?e:{value:e}}function Nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hR(t,e){return Nd(t,e.toTimestamp())}function yr(t){return Te(!!t),ce.fromTimestamp(function(n){const r=Us(n);return new it(r.seconds,r.nanos)}(t))}function Cg(t,e){return Km(t,e).canonicalString()}function Km(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function W1(t){const e=Fe.fromString(t);return Te(Y1(e)),e}function Gm(t,e){return Cg(t.databaseId,e.path)}function xf(t,e){const n=W1(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(G1(n))}function K1(t,e){return Cg(t.databaseId,e)}function fR(t){const e=W1(t);return e.length===4?Fe.emptyPath():G1(e)}function Qm(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G1(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sv(t,e,n){return{name:Gm(t,e),fields:n.value.mapValue.fields}}function mR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Te(h===void 0||typeof h=="string"),jt.fromBase64String(h||"")):(Te(h===void 0||h instanceof Buffer||h instanceof Uint8Array),jt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const h=d.code===void 0?B.UNKNOWN:B1(d.code);return new ee(h,d.message||"")}(o);n=new q1(r,s,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xf(t,r.document.name),a=yr(r.document.updateTime),o=r.document.createTime?yr(r.document.createTime):ce.min(),c=new Zt({mapValue:{fields:r.document.fields}}),u=Ft.newFoundDocument(s,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Uu(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xf(t,r.document),a=r.readTime?yr(r.readTime):ce.min(),o=Ft.newNoDocument(s,a),c=r.removedTargetIds||[];n=new Uu([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xf(t,r.document),a=r.removedTargetIds||[];n=new Uu([],a,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new rR(s,a),c=r.targetId;n=new z1(c,o)}}return n}function pR(t,e){let n;if(e instanceof gc)n={update:sv(t,e.key,e.value)};else if(e instanceof Tg)n={delete:Gm(t,e.key)};else if(e instanceof Xs)n={update:sv(t,e.key,e.data),updateMask:jR(e.fieldMask)};else{if(!(e instanceof eR))return oe();n={verify:Gm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof Jl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Zl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ec)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof tc)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:hR(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:oe()}(t,e.precondition)),n}function gR(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(s,a){let o=s.updateTime?yr(s.updateTime):yr(a);return o.isEqual(ce.min())&&(o=yr(a)),new YA(o,s.transformResults||[])}(n,e))):[]}function xR(t,e){return{documents:[K1(t,e.path)]}}function yR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=K1(t,s);const a=function(d){if(d.length!==0)return X1(sr.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:fa(p.field),direction:_R(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Wm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function vR(t){let e=fR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Te(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(m){const p=Q1(m);return p instanceof sr&&N1(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(b){return new Yl(ma(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let c=null;n.limit&&(c=function(m){let p;return p=typeof m=="object"?m.value:m,nh(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,_=m.values||[];return new _d(_,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,_=m.values||[];return new _d(_,p)}(n.endAt)),FA(e,s,o,a,c,"F",u,d)}function wR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Q1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ma(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ma(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ma(n.unaryFilter.field);return ht.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ma(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(ma(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>Q1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function _R(t){return lR[t]}function bR(t){return cR[t]}function NR(t){return uR[t]}function fa(t){return{fieldPath:t.canonicalString()}}function ma(t){return bt.fromServerFormat(t.fieldPath)}function X1(t){return t instanceof ht?function(n){if(n.op==="=="){if(qy(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NAN"}};if(zy(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qy(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NOT_NAN"}};if(zy(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(n.field),op:bR(n.op),value:n.value}}}(t):t instanceof sr?function(n){const r=n.getFilters().map(s=>X1(s));return r.length===1?r[0]:{compositeFilter:{op:NR(n.op),filters:r}}}(t):oe()}function jR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Y1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r,s,a=ce.min(),o=ce.min(),c=jt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.ct=e}}function kR(t){const e=vR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.un=new IR}addToCollectionParentIndex(e,n){return this.un.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Fs.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class IR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new St(Fe.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new St(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xa(0)}static kn(){return new Xa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.changes=new co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&bl(r.mutation,s,xn.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=mi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=il();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let a=Zr();const o=_l(),c=function(){return _l()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Xs)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),bl(h.mutation,d,h.mutation.getFieldMask(),it.now())):o.set(d.key,xn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var m;return c.set(d,new CR(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=_l();let s=new Xe((o,c)=>o-c),a=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||xn.empty();h=c.applyToLocalView(d,h),r.set(u,h);const m=(s.get(c.batchId)||pe()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,m=R1();h.forEach(p=>{if(!a.has(p)){const _=U1(n.get(p),r.get(p));_!==null&&m.set(p,_),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):T1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):q.resolve(mi());let c=-1,u=a;return o.next(d=>q.forEach(d,(h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),a.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,pe())).next(h=>({batchId:c,changes:A1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=il();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=il();return this.indexManager.getCollectionParents(e,a).next(c=>q.forEach(c,u=>{const d=function(m,p){return new lo(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ft.newInvalidDocument(h)))});let c=il();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&bl(h.mutation,d,xn.empty(),it.now()),ih(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:yr(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:kR(s.bundledQuery),readTime:yr(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.overlays=new Xe(ie.comparator),this.Ir=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mi();return q.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.ht(e,n,a)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=mi(),a=n.length+1,o=new ie(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Xe((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=mi(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=mi(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=s)););return q.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nR(n,r));let a=this.Ir.get(n);a===void 0&&(a=pe(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this.Tr=new St(wt.Er),this.dr=new St(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new wt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new wt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Fe([])),r=new wt(n,e),s=new wt(n,e+1),a=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Fe([])),r=new wt(n,e),s=new wt(n,e+1);let a=pe();return this.dr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new wt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class wt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||je(e.wr,n.wr)}static Ar(e,n){return je(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(wt.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tR(a,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new wt(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return q.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wt(n,0),s=new wt(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);a.push(c)}),q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(je);return n.forEach(s=>{const a=new wt(s,0),o=new wt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],c=>{r=r.add(c.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;ie.isDocumentKey(a)||(a=a.child(""));const o=new wt(new ie(a),0);let c=new St(je);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},o),q.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(n.mutations,s=>{const a=new wt(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new wt(n,0),s=this.br.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.Mr=e,this.docs=function(){return new Xe(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=Zr();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Ft.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Zr();const o=n.path,c=new ie(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||wA(vA(h),r)<=0||(s.has(h.key)||ih(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return q.resolve(a)}getAllFromCollectionGroup(e,n,r,s){oe()}Or(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MR(this)}getSize(e){return q.resolve(this.size)}}class MR extends SR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.persistence=e,this.Nr=new co(n=>jg(n),Eg),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ag,this.targetCount=0,this.kr=Xa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Xa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Kn(n),q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),q.waitFor(a).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new wg(0),this.Kr=!1,this.Kr=!0,this.$r=new DR,this.referenceDelegate=e(this),this.Ur=new VR(this),this.indexManager=new TR,this.remoteDocumentCache=function(s){return new LR(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ER(n),this.Gr=new RR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new OR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new UR(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,n){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class UR extends bA{constructor(e){super(),this.currentSequenceNumber=e}}class Rg{constructor(e){this.persistence=e,this.Jr=new Ag,this.Yr=null}static Zr(e){return new Rg(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const s=ie.fromPath(r);return this.ei(e,s).next(a=>{a||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return q.or([()=>q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=pe(),s=pe();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Pg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return pT()?8:NA(zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new $R;return this.Xi(e,n,o).next(c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>a.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Go()<=ge.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",ha(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(Go()<=ge.DEBUG&&se("QueryEngine","Query:",ha(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Go()<=ge.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",ha(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):q.resolve())}Yi(e,n){if(Gy(n))return q.resolve(null);let r=xr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=bd(n,null,"F"),r=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=pe(...a);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,bd(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Gy(n)||s.isEqual(ce.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,s)?q.resolve(null):(Go()<=ge.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ha(n)),this.rs(e,o,n,yA(s,-1)).next(c=>c))})}ts(e,n){let r=new St(S1(e));return n.forEach((s,a)=>{ih(e,a)&&(r=r.add(a))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return Go()<=ge.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",ha(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Xe(je),this._s=new co(a=>jg(a),Eg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function qR(t,e,n,r){return new zR(t,e,n,r)}async function J1(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=pe();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function HR(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,h){const m=d.batch,p=m.keys();let _=q.resolve();return p.forEach(b=>{_=_.next(()=>h.getEntry(u,b)).next(A=>{const N=d.docVersions.get(b);Te(N!==null),A.version.compareTo(N)<0&&(m.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),h.addEntry(A)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=pe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Z1(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function WR(t,e){const n=de(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;c.push(n.Ur.removeMatchingKeys(a,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(a,h.addedDocuments,m)));let _=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(jt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),s=s.insert(m,_),function(A,N,v){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,_,h)&&c.push(n.Ur.updateTargetData(a,_))});let u=Zr(),d=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),c.push(KR(a,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!r.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(a).next(m=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(h)}return q.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=s,a))}function KR(t,e,n){let r=pe(),s=pe();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Zr();return n.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):se("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function GR(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function QR(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(a=>a?(s=a,q.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new js(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Xm(t,e,n){const r=de(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pc(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function iv(t,e,n){const r=de(t);let s=ce.min(),a=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=de(u),p=m._s.get(h);return p!==void 0?q.resolve(m.os.get(p)):m.Ur.getTargetData(d,h)}(r,o,xr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?a:pe())).next(c=>(XR(r,$A(e),c),{documents:c,Ts:a})))}function XR(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class av{constructor(){this.activeTargetIds=KA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YR{constructor(){this.so=new av,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new av,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu=null;function yf(){return pu===null?pu=function(){return 268435456+Math.round(2147483648*Math.random())}():pu++,"0x"+pu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class tP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,o){const c=yf(),u=this.xo(n,r.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,s).then(h=>(se("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw Ai("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,a,o,c){return this.Mo(n,r,s,a,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),s&&s.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const s=ZR[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=yf();return new Promise((o,c)=>{const u=new d1;u.setWithCredentials(!0),u.listenOnce(h1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Mu.NO_ERROR:const h=u.getResponseJson();se(Lt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Mu.TIMEOUT:se(Lt,`RPC '${e}' ${a} timed out`),c(new ee(B.DEADLINE_EXCEEDED,"Request time out"));break;case Mu.HTTP_ERROR:const m=u.getStatus();if(se(Lt,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const b=function(N){const v=N.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(v)>=0?v:B.UNKNOWN}(_.status);c(new ee(b,_.message))}else c(new ee(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ee(B.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{se(Lt,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);se(Lt,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=yf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=p1(),c=m1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");se(Lt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const m=o.createWebChannel(h,u);let p=!1,_=!1;const b=new eP({Io:N=>{_?se(Lt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(p||(se(Lt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),se(Lt,`RPC '${e}' stream ${s} sending:`,N),m.send(N))},To:()=>m.close()}),A=(N,v,w)=>{N.listen(v,y=>{try{w(y)}catch(E){setTimeout(()=>{throw E},0)}})};return A(m,sl.EventType.OPEN,()=>{_||(se(Lt,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),A(m,sl.EventType.CLOSE,()=>{_||(_=!0,se(Lt,`RPC '${e}' stream ${s} transport closed`),b.So())}),A(m,sl.EventType.ERROR,N=>{_||(_=!0,Ai(Lt,`RPC '${e}' stream ${s} transport errored:`,N),b.So(new ee(B.UNAVAILABLE,"The operation could not be completed")))}),A(m,sl.EventType.MESSAGE,N=>{var v;if(!_){const w=N.data[0];Te(!!w);const y=w,E=y.error||((v=y[0])===null||v===void 0?void 0:v.error);if(E){se(Lt,`RPC '${e}' stream ${s} received error:`,E);const R=E.status;let L=function(k){const S=ct[k];if(S!==void 0)return B1(S)}(R),j=E.message;L===void 0&&(L=B.INTERNAL,j="Unknown error status: "+R+" with message "+E.message),_=!0,b.So(new ee(L,j)),m.close()}else se(Lt,`RPC '${e}' stream ${s} received:`,w),b.bo(w)}}),A(c,f1.STAT_EVENT,N=>{N.stat===Um.PROXY?se(Lt,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Um.NOPROXY&&se(Lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function vf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){return new dR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,r,s,a,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Jr(n.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ee(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nP extends tN{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=mR(this.serializer,e),r=function(a){if(!("targetChange"in a))return ce.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?yr(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Qm(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=qm(u)?{documents:xR(a,u)}:{query:yR(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=H1(a,o.resumeToken);const d=Wm(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ce.min())>0){c.readTime=Nd(a,o.snapshotVersion.toTimestamp());const d=Wm(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=wR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Qm(this.serializer),n.removeTarget=e,this.a_(n)}}class rP extends tN{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=gR(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Qm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Km(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(B.UNKNOWN,a.toString())})}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Km(n,r),s,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class iP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jr(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{$i(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=de(u);d.L_.add(4),await yc(d),d.q_.set("Unknown"),d.L_.delete(4),await uh(d)}(this))})}),this.q_=new iP(r,s)}}async function uh(t){if($i(t))for(const e of t.B_)await e(!0)}async function yc(t){for(const e of t.B_)await e(!1)}function nN(t,e){const n=de(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Mg(n)?Lg(n):uo(n).r_()&&Og(n,e))}function Dg(t,e){const n=de(t),r=uo(n);n.N_.delete(e),r.r_()&&rN(n,e),n.N_.size===0&&(r.r_()?r.o_():$i(n)&&n.q_.set("Unknown"))}function Og(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uo(t).A_(e)}function rN(t,e){t.Q_.xe(e),uo(t).R_(e)}function Lg(t){t.Q_=new oR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),uo(t).start(),t.q_.v_()}function Mg(t){return $i(t)&&!uo(t).n_()&&t.N_.size>0}function $i(t){return de(t).L_.size===0}function sN(t){t.Q_=void 0}async function oP(t){t.q_.set("Online")}async function lP(t){t.N_.forEach((e,n)=>{Og(t,e)})}async function cP(t,e){sN(t),Mg(t)?(t.q_.M_(e),Lg(t)):t.q_.set("Unknown")}async function uP(t,e,n){if(t.q_.set("Online"),e instanceof q1&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const c of a.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jd(t,r)}else if(e instanceof Uu?t.Q_.Ke(e):e instanceof z1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await Z1(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.N_.get(d);h&&a.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const h=a.N_.get(u);if(!h)return;a.N_.set(u,h.withResumeToken(jt.EMPTY_BYTE_STRING,h.snapshotVersion)),rN(a,u);const m=new js(h.target,u,d,h.sequenceNumber);Og(a,m)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await jd(t,r)}}async function jd(t,e,n){if(!pc(e))throw e;t.L_.add(1),await yc(t),t.q_.set("Offline"),n||(n=()=>Z1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await uh(t)})}function iN(t,e){return e().catch(n=>jd(t,n,e))}async function dh(t){const e=de(t),n=$s(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;dP(e);)try{const s=await GR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,hP(e,s)}catch(s){await jd(e,s)}aN(e)&&oN(e)}function dP(t){return $i(t)&&t.O_.length<10}function hP(t,e){t.O_.push(e);const n=$s(t);n.r_()&&n.V_&&n.m_(e.mutations)}function aN(t){return $i(t)&&!$s(t).n_()&&t.O_.length>0}function oN(t){$s(t).start()}async function fP(t){$s(t).p_()}async function mP(t){const e=$s(t);for(const n of t.O_)e.m_(n.mutations)}async function pP(t,e,n){const r=t.O_.shift(),s=Ig.from(r,e,n);await iN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await dh(t)}async function gP(t,e){e&&$s(t).V_&&await async function(r,s){if(function(o){return sR(o)&&o!==B.ABORTED}(s.code)){const a=r.O_.shift();$s(r).s_(),await iN(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await dh(r)}}(t,e),aN(t)&&oN(t)}async function lv(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=$i(n);n.L_.add(3),await yc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await uh(n)}async function xP(t,e){const n=de(t);e?(n.L_.delete(2),await uh(n)):e||(n.L_.add(2),await yc(n),n.q_.set("Unknown"))}function uo(t){return t.K_||(t.K_=function(n,r,s){const a=de(n);return a.w_(),new nP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:oP.bind(null,t),Ro:lP.bind(null,t),mo:cP.bind(null,t),d_:uP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Mg(t)?Lg(t):t.q_.set("Unknown")):(await t.K_.stop(),sN(t))})),t.K_}function $s(t){return t.U_||(t.U_=function(n,r,s){const a=de(n);return a.w_(),new rP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fP.bind(null,t),mo:gP.bind(null,t),f_:mP.bind(null,t),g_:pP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await dh(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,c=new Vg(e,n,o,s,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fg(t,e){if(Jr("AsyncQueue",`${e}: ${t}`),pc(t))return new ee(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=il(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new Va(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Va)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Va;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.W_=new Xe(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ya{constructor(e,n,r,s,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Ya(e,n,Va.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vP{constructor(){this.queries=uv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=de(n),a=s.queries;s.queries=uv(),a.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new ee(B.ABORTED,"Firestore shutting down"))}}function uv(){return new co(t=>I1(t),sh)}async function Ug(t,e){const n=de(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new yP,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Fg(o,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Bg(n)}async function $g(t,e){const n=de(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wP(t,e){const n=de(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&Bg(n)}function _P(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function Bg(t){t.Y_.forEach(e=>{e.next()})}var Ym,dv;(dv=Ym||(Ym={})).ea="default",dv.Cache="cache";class zg{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ya(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.key=e}}class cN{constructor(e){this.key=e}}class bP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=S1(e),this.Ra=new Va(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new cv,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),_=ih(this.query,m)?m:null,b=!!p&&this.mutatedKeys.has(p.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let N=!1;p&&_?p.data.isEqual(_.data)?b!==A&&(r.track({type:3,doc:_}),N=!0):this.ga(p,_)||(r.track({type:2,doc:_}),N=!0,(u&&this.Aa(_,u)>0||d&&this.Aa(_,d)<0)&&(c=!0)):!p&&_?(r.track({type:0,doc:_}),N=!0):p&&!_&&(r.track({type:1,doc:p}),N=!0,(u||d)&&(c=!0)),N&&(_?(o=o.add(_),a=A?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(_,b){const A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return A(_)-A(b)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Ya(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new cN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new lN(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ya.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class NP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jP{constructor(e){this.key=e,this.va=!1}}class EP{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new co(c=>I1(c),sh),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(ie.comparator),this.Na=new Map,this.La=new Ag,this.Ba={},this.ka=new Map,this.qa=Xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kP(t,e,n=!0){const r=pN(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await uN(r,e,n,!0),s}async function TP(t,e){const n=pN(t);await uN(n,e,!0,!1)}async function uN(t,e,n,r){const s=await QR(t.localStore,xr(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await IP(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&nN(t.remoteStore,s),c}async function IP(t,e,n,r,s){t.Ka=(m,p,_)=>async function(A,N,v,w){let y=N.view.ma(v);y.ns&&(y=await iv(A.localStore,N.query,!1).then(({documents:j})=>N.view.ma(j,y)));const E=w&&w.targetChanges.get(N.targetId),R=w&&w.targetMismatches.get(N.targetId)!=null,L=N.view.applyChanges(y,A.isPrimaryClient,E,R);return fv(A,N.targetId,L.wa),L.snapshot}(t,m,p,_);const a=await iv(t.localStore,e,!0),o=new bP(e,a.Ts),c=o.ma(a.documents),u=xc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);fv(t,n,d.wa);const h=new NP(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function SP(t,e,n){const r=de(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(o=>!sh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Xm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Dg(r.remoteStore,s.targetId),Jm(r,s.targetId)}).catch(mc)):(Jm(r,s.targetId),await Xm(r.localStore,s.targetId,!0))}async function CP(t,e){const n=de(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dg(n.remoteStore,r.targetId))}async function AP(t,e,n){const r=VP(t);try{const s=await function(o,c){const u=de(o),d=it.now(),h=c.reduce((_,b)=>_.add(b.key),pe());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let b=Zr(),A=pe();return u.cs.getEntries(_,h).next(N=>{b=N,b.forEach((v,w)=>{w.isValidDocument()||(A=A.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,b)).next(N=>{m=N;const v=[];for(const w of c){const y=ZA(w,m.get(w.key).overlayedDocument);y!=null&&v.push(new Xs(w.key,y,w1(y.value.mapValue),Dn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,v,c)}).next(N=>{p=N;const v=N.applyToLocalDocumentSet(m,A);return u.documentOverlayCache.saveOverlays(_,N.batchId,v)})}).then(()=>({batchId:p.batchId,changes:A1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Xe(je)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await vc(r,s.changes),await dh(r.remoteStore)}catch(s){const a=Fg(s,"Failed to persist write");n.reject(a)}}async function dN(t,e){const n=de(t);try{const r=await WR(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Na.get(a);o&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Te(o.va):s.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),await vc(n,r,e)}catch(r){await mc(r)}}function hv(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((a,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=de(o);u.onlineState=c;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.j_)p.Z_(c)&&(d=!0)}),d&&Bg(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RP(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let o=new Xe(ie.comparator);o=o.insert(a,Ft.newNoDocument(a,ce.min()));const c=pe().add(a),u=new lh(ce.min(),new Map,new Xe(je),o,c);await dN(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),qg(r)}else await Xm(r.localStore,e,!1).then(()=>Jm(r,e,n)).catch(mc)}async function PP(t,e){const n=de(t),r=e.batch.batchId;try{const s=await HR(n.localStore,e);fN(n,r,null),hN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vc(n,s)}catch(s){await mc(s)}}async function DP(t,e,n){const r=de(t);try{const s=await function(o,c){const u=de(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Te(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);fN(r,e,n),hN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vc(r,s)}catch(s){await mc(s)}}function hN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function fN(t,e,n){const r=de(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Jm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||mN(t,r)})}function mN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Dg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),qg(t))}function fv(t,e,n){for(const r of n)r instanceof lN?(t.La.addReference(r.key,e),OP(t,r)):r instanceof cN?(se("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||mN(t,r.key)):oe()}function OP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(r),qg(t))}function qg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Fe.fromString(e)),r=t.qa.next();t.Na.set(r,new jP(n)),t.Oa=t.Oa.insert(n,r),nN(t.remoteStore,new js(xr(rh(n.path)),r,"TargetPurposeLimboResolution",wg.oe))}}async function vc(t,e,n){const r=de(t),s=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Pg.Wi(u.targetId,d);a.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const h=de(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>q.forEach(d,p=>q.forEach(p.$i,_=>h.persistence.referenceDelegate.addReference(m,p.targetId,_)).next(()=>q.forEach(p.Ui,_=>h.persistence.referenceDelegate.removeReference(m,p.targetId,_)))))}catch(m){if(!pc(m))throw m;se("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const _=h.os.get(p),b=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(p,A)}}}(r.localStore,a))}async function LP(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await J1(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(c=>{c.forEach(u=>{u.reject(new ee(B.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vc(n,r.hs)}}function MP(t,e){const n=de(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let s=pe();const a=n.Ma.get(e);if(!a)return s;for(const o of a){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function pN(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RP.bind(null,e),e.Ca.d_=wP.bind(null,e.eventManager),e.Ca.$a=_P.bind(null,e.eventManager),e}function VP(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DP.bind(null,e),e}class Ed{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return qR(this.persistence,new BR,e.initialUser,this.serializer)}Ga(e){return new FR(Rg.Zr,this.serializer)}Wa(e){return new YR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ed.provider={build:()=>new Ed};class Zm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LP.bind(null,this.syncEngine),await xP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vP}()}createDatastore(e){const n=ch(e.databaseInfo.databaseId),r=function(a){return new tP(a)}(e.databaseInfo);return function(a,o,c,u){return new sP(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,c){return new aP(r,s,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>hv(this.syncEngine,n,0),function(){return ov.D()?new ov:new JR}())}createSyncEngine(e,n){return function(s,a,o,c,u,d,h){const m=new EP(s,a,o,c,u,d);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=de(s);se("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await yc(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zm.provider={build:()=>new Zm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Mt.UNAUTHENTICATED,this.clientId=vg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wf(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await J1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UP(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>lv(e.remoteStore,s)),t._onlineComponents=e}async function UP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await wf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ai("Error using user provided cache. Falling back to memory cache: "+n),await wf(t,new Ed)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await wf(t,new Ed);return t._offlineComponents}async function gN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await mv(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await mv(t,new Zm))),t._onlineComponents}function $P(t){return gN(t).then(e=>e.syncEngine)}async function kd(t){const e=await gN(t),n=e.eventManager;return n.onListen=kP.bind(null,e.syncEngine),n.onUnlisten=SP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CP.bind(null,e.syncEngine),n}function BP(t,e,n={}){const r=new Br;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const h=new Hg({next:p=>{h.Za(),o.enqueueAndForget(()=>$g(a,m));const _=p.docs.has(c);!_&&p.fromCache?d.reject(new ee(B.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&u&&u.source==="server"?d.reject(new ee(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new zg(rh(c.path),h,{includeMetadataChanges:!0,_a:!0});return Ug(a,m)}(await kd(t),t.asyncQueue,e,n,r)),r.promise}function zP(t,e,n={}){const r=new Br;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const h=new Hg({next:p=>{h.Za(),o.enqueueAndForget(()=>$g(a,m)),p.fromCache&&u.source==="server"?d.reject(new ee(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new zg(c,h,{includeMetadataChanges:!0,_a:!0});return Ug(a,m)}(await kd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t,e,n){if(!n)throw new ee(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vN(t,e,n,r){if(e===!0&&r===!0)throw new ee(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gv(t){if(!ie.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xv(t){if(ie.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hh(t);throw new ee(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function qP(t,e){if(e<=0)throw new ee(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ee(B.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new x1;switch(r.type){case"firstParty":return new fA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=pv.get(n);r&&(se("ComponentProvider","Removing Datastore"),pv.delete(n),r.terminate())}(this),Promise.resolve()}}function wN(t,e,n,r={}){var s;const a=(t=Kt(t,fh))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Mt.MOCK_USER;else{c=yb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ee(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Mt(d)}t._authCredentials=new uA(new g1(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Er(this.firestore,e,this._query)}}class Ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}}class zr extends Er{constructor(e,n,r){super(e,n,rh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new ie(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function ue(t,e,...n){if(t=Le(t),yN("collection","path",e),t instanceof fh){const r=Fe.fromString(e,...n);return xv(r),new zr(t,null,r)}{if(!(t instanceof Ct||t instanceof zr))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return xv(r),new zr(t.firestore,null,r)}}function Z(t,e,...n){if(t=Le(t),arguments.length===1&&(e=vg.newId()),yN("doc","path",e),t instanceof fh){const r=Fe.fromString(e,...n);return gv(r),new Ct(t,null,new ie(r))}{if(!(t instanceof Ct||t instanceof zr))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return gv(r),new Ct(t.firestore,t instanceof zr?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eN(this,"async_queue_retry"),this.Vu=()=>{const r=vf();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=vf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=vf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Br;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pc(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Jr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Vg.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function wv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class _r extends fh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,await e}}}function _N(t,e){const n=typeof t=="object"?t:Jd(),r=typeof t=="string"?t:"(default)",s=Yd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=pb("firestore");a&&wN(s,...a)}return s}function wc(t){if(t._terminated)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HP(t),t._firestoreClient}function HP(t){var e,n,r;const s=t._freezeSettings(),a=function(c,u,d,h){return new kA(c,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,xN(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new FP(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Di(jt.fromBase64String(e))}catch(n){throw new ee(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Di(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=/^__.*__$/;class KP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new gc(e,this.data,n,this.fieldTransforms)}}class bN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function NN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class Wg{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Wg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Td(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(NN(this.Cu)&&WP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class GP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ch(e)}Qu(e,n,r,s=!1){return new Wg({Cu:e,methodName:n,qu:r,path:bt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gh(t){const e=t._freezeSettings(),n=ch(t._databaseId);return new GP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jN(t,e,n,r,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);Qg("Data must be an object, but it was:",o,r);const c=EN(r,o);let u,d;if(a.merge)u=new xn(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const p=ep(e,m,n);if(!o.contains(p))throw new ee(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);TN(h,p)||h.push(p)}u=new xn(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new KP(new Zt(c),u,d)}class xh extends ho{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xh}}class Kg extends ho{_toFieldTransform(e){return new F1(e.path,new Jl)}isEqual(e){return e instanceof Kg}}class Gg extends ho{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new tc(e.serializer,D1(e.serializer,this.$u));return new F1(e.path,n)}isEqual(e){return e instanceof Gg&&this.$u===e.$u}}function QP(t,e,n,r){const s=t.Qu(1,e,n);Qg("Data must be an object, but it was:",s,r);const a=[],o=Zt.empty();Ui(r,(u,d)=>{const h=Xg(e,u,n);d=Le(d);const m=s.Nu(h);if(d instanceof xh)a.push(h);else{const p=bc(d,m);p!=null&&(a.push(h),o.set(h,p))}});const c=new xn(a);return new bN(o,c,s.fieldTransforms)}function XP(t,e,n,r,s,a){const o=t.Qu(1,e,n),c=[ep(e,r,n)],u=[s];if(a.length%2!=0)throw new ee(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)c.push(ep(e,a[p])),u.push(a[p+1]);const d=[],h=Zt.empty();for(let p=c.length-1;p>=0;--p)if(!TN(d,c[p])){const _=c[p];let b=u[p];b=Le(b);const A=o.Nu(_);if(b instanceof xh)d.push(_);else{const N=bc(b,A);N!=null&&(d.push(_),h.set(_,N))}}const m=new xn(d);return new bN(h,m,o.fieldTransforms)}function YP(t,e,n,r=!1){return bc(n,t.Qu(r?4:3,e))}function bc(t,e){if(kN(t=Le(t)))return Qg("Unsupported field value:",e,t),EN(t,e);if(t instanceof ho)return function(r,s){if(!NN(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const c of r){let u=bc(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return D1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=it.fromDate(r);return{timestampValue:Nd(s.serializer,a)}}if(r instanceof it){const a=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nd(s.serializer,a)}}if(r instanceof mh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Di)return{bytesValue:H1(s.serializer,r._byteString)};if(r instanceof Ct){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Cg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ph)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return kg(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${hh(r)}`)}(t,e)}function EN(t,e){const n={};return y1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,s)=>{const a=bc(s,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function kN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof mh||t instanceof Di||t instanceof Ct||t instanceof ho||t instanceof ph)}function Qg(t,e,n){if(!kN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=hh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ep(t,e,n){if((e=Le(e))instanceof _c)return e._internalPath;if(typeof e=="string")return Xg(t,e);throw Td("Field path arguments must be of type string or ",t,!1,void 0,n)}const JP=new RegExp("[~\\*/\\[\\]]");function Xg(t,e,n){if(e.search(JP)>=0)throw Td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _c(...e.split("."))._internalPath}catch{throw Td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Td(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new ee(B.INVALID_ARGUMENT,c+t+u)}function TN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZP extends IN{data(){return super.data()}}function yh(t,e){return typeof e=="string"?Xg(t,e):e instanceof _c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yg{}class vh extends Yg{}function at(t,e,...n){let r=[];e instanceof Yg&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof wh).length,c=a.filter(u=>u instanceof Nc).length;if(o>1||o>0&&c>0)throw new ee(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Nc extends vh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nc(e,n,r)}_apply(e){const n=this._parse(e);return CN(e._query,n),new Er(e.firestore,e.converter,Hm(e._query,n))}_parse(e){const n=gh(e.firestore);return function(a,o,c,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ee(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){bv(m,h);const _=[];for(const b of m)_.push(_v(u,a,b));p={arrayValue:{values:_}}}else p=_v(u,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||bv(m,h),p=YP(c,o,m,h==="in"||h==="not-in");return ht.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ft(t,e,n){const r=e,s=yh("where",t);return Nc._create(s,r,n)}class wh extends Yg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const c=a.getFlattenedFilters();for(const u of c)CN(o,u),o=Hm(o,u)}(e._query,n),new Er(e.firestore,e.converter,Hm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _h extends vh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _h(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new ee(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ee(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(a,o)}(e._query,this._field,this._direction);return new Er(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new lo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function br(t,e="asc"){const n=e,r=yh("orderBy",t);return _h._create(r,n)}class bh extends vh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new bh(e,n,r)}_apply(e){return new Er(e.firestore,e.converter,bd(e._query,this._limit,this._limitType))}}function Jg(t){return qP("limit",t),bh._create("limit",t,"F")}function _v(t,e,n){if(typeof(n=Le(n))=="string"){if(n==="")throw new ee(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T1(e)&&n.indexOf("/")!==-1)throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!ie.isDocumentKey(r))throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return By(t,new ie(r))}if(n instanceof Ct)return By(t,n._key);throw new ee(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(n)}.`)}function bv(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CN(t,e){const n=function(s,a){for(const o of s)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AN{convertValue(e,n="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ui(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>nt(o.doubleValue));return new ph(a)}convertGeoPoint(e){return new mh(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const n=Us(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Te(Y1(r));const s=new Ka(r.get(1),r.get(3)),a=new ie(r.popFirst(5));return s.isEqual(n)||Jr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zg extends IN{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Nl extends Zg{data(e={}){return super.data(e)}}class ex{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ia(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nl(this._firestore,this._userDataWriter,r.key,r,new Ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Nl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ia(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Nl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ia(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:e4(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function e4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){t=Kt(t,Ct);const e=Kt(t.firestore,_r);return BP(wc(e),t._key).then(n=>PN(e,t,n))}class tx extends AN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function Ue(t){t=Kt(t,Er);const e=Kt(t.firestore,_r),n=wc(e),r=new tx(e);return SN(t._query),zP(n,t._query).then(s=>new ex(e,r,t,s))}function fn(t,e,n){t=Kt(t,Ct);const r=Kt(t.firestore,_r),s=RN(t.converter,e,n);return jc(r,[jN(gh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Dn.none())])}function xe(t,e,n,...r){t=Kt(t,Ct);const s=Kt(t.firestore,_r),a=gh(s);let o;return o=typeof(e=Le(e))=="string"||e instanceof _c?XP(a,"updateDoc",t._key,e,n,r):QP(a,"updateDoc",t._key,e),jc(s,[o.toMutation(t._key,Dn.exists(!0))])}function Xn(t){return jc(Kt(t.firestore,_r),[new Tg(t._key,Dn.none())])}function Zn(t,e){const n=Kt(t.firestore,_r),r=Z(t),s=RN(t.converter,e);return jc(n,[jN(gh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Dn.exists(!1))]).then(()=>r)}function es(t,...e){var n,r,s;t=Le(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||wv(e[o])||(a=e[o],o++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(wv(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,h;if(t instanceof Ct)d=Kt(t.firestore,_r),h=rh(t._key.path),u={next:m=>{e[o]&&e[o](PN(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Kt(t,Er);d=Kt(m.firestore,_r),h=m._query;const p=new tx(d);u={next:_=>{e[o]&&e[o](new ex(d,p,m,_))},error:e[o+1],complete:e[o+2]},SN(t._query)}return function(p,_,b,A){const N=new Hg(A),v=new zg(_,N,b);return p.asyncQueue.enqueueAndForget(async()=>Ug(await kd(p),v)),()=>{N.Za(),p.asyncQueue.enqueueAndForget(async()=>$g(await kd(p),v))}}(wc(d),h,c,u)}function jc(t,e){return function(r,s){const a=new Br;return r.asyncQueue.enqueueAndForget(async()=>AP(await $P(r),s,a)),a.promise}(wc(t),e)}function PN(t,e,n){const r=n.docs.get(e._key),s=new tx(t);return new Zg(t,s,e._key,r,new Ia(n.hasPendingWrites,n.fromCache),e.converter)}function ae(){return new Kg("serverTimestamp")}function Dr(t){return new Gg("increment",t)}(function(e,n=!0){(function(s){oo=s})(Fi),Ti(new Vs("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new _r(new dA(r.getProvider("auth-internal")),new pA(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ee(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ka(d.options.projectId,h)}(o,s),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),pr(My,"4.7.3",e),pr(My,"4.7.3","esm2017")})();const _f=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:AN,Bytes:Di,CollectionReference:zr,DocumentReference:Ct,DocumentSnapshot:Zg,FieldPath:_c,FieldValue:ho,Firestore:_r,FirestoreError:ee,GeoPoint:mh,Query:Er,QueryCompositeFilterConstraint:wh,QueryConstraint:vh,QueryDocumentSnapshot:Nl,QueryFieldFilterConstraint:Nc,QueryLimitConstraint:bh,QueryOrderByConstraint:_h,QuerySnapshot:ex,SnapshotMetadata:Ia,Timestamp:it,VectorValue:ph,_AutoId:vg,_ByteString:jt,_DatabaseId:Ka,_DocumentKey:ie,_EmptyAuthCredentialsProvider:x1,_FieldPath:bt,_cast:Kt,_logWarn:Ai,_validateIsNotUsedTogether:vN,addDoc:Zn,collection:ue,connectFirestoreEmulator:wN,deleteDoc:Xn,doc:Z,ensureFirestoreConfigured:wc,executeWrite:jc,getDoc:tt,getDocs:Ue,getFirestore:_N,increment:Dr,limit:Jg,onSnapshot:es,orderBy:br,query:at,serverTimestamp:ae,setDoc:fn,updateDoc:xe,where:ft},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="firebasestorage.googleapis.com",ON="storageBucket",t4=2*60*1e3,n4=10*60*1e3,r4=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye extends jr{constructor(e,n,r=0){super(bf(e),`Firebase Storage: ${n} (${bf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ye.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Be;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Be||(Be={}));function bf(t){return"storage/"+t}function nx(){const t="An unknown error occurred, please check the error payload for server response.";return new Ye(Be.UNKNOWN,t)}function s4(t){return new Ye(Be.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function i4(t){return new Ye(Be.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function a4(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ye(Be.UNAUTHENTICATED,t)}function o4(){return new Ye(Be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function l4(t){return new Ye(Be.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function LN(){return new Ye(Be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MN(){return new Ye(Be.CANCELED,"User canceled the upload/download.")}function c4(t){return new Ye(Be.INVALID_URL,"Invalid URL '"+t+"'.")}function u4(t){return new Ye(Be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function d4(){return new Ye(Be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ON+"' property when initializing the app?")}function VN(){return new Ye(Be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function h4(){return new Ye(Be.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function f4(){return new Ye(Be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function m4(t){return new Ye(Be.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tp(t){return new Ye(Be.INVALID_ARGUMENT,t)}function FN(){return new Ye(Be.APP_DELETED,"The Firebase app was deleted.")}function p4(t){return new Ye(Be.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jl(t,e){return new Ye(Be.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qo(t){throw new Ye(Be.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=yn.makeFromUrl(e,n)}catch{return new yn(e,"")}if(r.path==="")return r;throw u4(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(E){E.path_=decodeURIComponent(E.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",_=new RegExp(`^https?://${m}/${h}/b/${s}/o${p}`,"i"),b={bucket:1,path:3},A=n===DN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",v=new RegExp(`^https?://${A}/${s}/${N}`,"i"),y=[{regex:c,indices:u,postModify:a},{regex:_,indices:b,postModify:d},{regex:v,indices:{bucket:1,path:2},postModify:d}];for(let E=0;E<y.length;E++){const R=y[E],L=R.regex.exec(e);if(L){const j=L[R.indices.bucket];let x=L[R.indices.path];x||(x=""),r=new yn(j,x),R.postModify(r);break}}if(r==null)throw c4(e);return r}}class g4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t,e,n){let r=1,s=null,a=null,o=!1,c=0;function u(){return c===2}let d=!1;function h(...N){d||(d=!0,e.apply(null,N))}function m(N){s=setTimeout(()=>{s=null,t(_,u())},N)}function p(){a&&clearTimeout(a)}function _(N,...v){if(d){p();return}if(N){p(),h.call(null,N,...v);return}if(u()||o){p(),h.call(null,N,...v);return}r<64&&(r*=2);let y;c===1?(c=2,y=0):y=(r+Math.random())*1e3,m(y)}let b=!1;function A(N){b||(b=!0,p(),!d&&(s!==null?(N||(c=2),clearTimeout(s),m(0)):N||(c=1)))}return m(0),a=setTimeout(()=>{o=!0,A(!0)},n),A}function y4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){return t!==void 0}function w4(t){return typeof t=="function"}function _4(t){return typeof t=="object"&&!Array.isArray(t)}function Nh(t){return typeof t=="string"||t instanceof String}function Nv(t){return rx()&&t instanceof Blob}function rx(){return typeof Blob<"u"}function jv(t,e,n,r){if(r<e)throw tp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw tp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function UN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var vi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(vi||(vi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n,r,s,a,o,c,u,d,h,m,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,b)=>{this.resolve_=_,this.reject_=b,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new gu(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===vi.NO_ERROR,u=a.getStatus();if(!c||$N(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===vi.ABORT;r(!1,new gu(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new gu(d,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());v4(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=nx();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?FN():MN();o(u)}else{const u=LN();o(u)}};this.canceled_?n(!1,new gu(!1,null,!0)):this.backoffId_=x4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&y4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function N4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function j4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function E4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function k4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function T4(t,e,n,r,s,a,o=!0){const c=UN(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return E4(d,e),N4(d,n),j4(d,a),k4(d,r),new b4(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function S4(...t){const e=I4();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(rx())return new Blob(t);throw new Ye(Be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function C4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){if(typeof atob>"u")throw m4("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Nf{constructor(e,n){this.data=e,this.contentType=n||null}}function R4(t,e){switch(t){case hr.RAW:return new Nf(BN(e));case hr.BASE64:case hr.BASE64URL:return new Nf(zN(t,e));case hr.DATA_URL:return new Nf(D4(e),O4(e))}throw nx()}function BN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function P4(t){let e;try{e=decodeURIComponent(t)}catch{throw jl(hr.DATA_URL,"Malformed data URL.")}return BN(e)}function zN(t,e){switch(t){case hr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw jl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case hr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw jl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=A4(e)}catch(s){throw s.message.includes("polyfill")?s:jl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class qN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw jl(hr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=L4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function D4(t){const e=new qN(t);return e.base64?zN(hr.BASE64,e.rest):P4(e.rest)}function O4(t){return new qN(t).contentType}function L4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){let r=0,s="";Nv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Nv(this.data_)){const r=this.data_,s=C4(r,e,n);return s===null?null:new Or(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Or(r,!0)}}static getBlob(...e){if(rx()){const n=e.map(r=>r instanceof Or?r.data_:r);return new Or(S4.apply(null,n))}else{const n=e.map(o=>Nh(o)?R4(hr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[a++]=o[c]}),new Or(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){let e;try{e=JSON.parse(t)}catch{return null}return _4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function V4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function WN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t,e){return e}class qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||F4}}let xu=null;function U4(t){return!Nh(t)||t.length<2?t:WN(t)}function sx(){if(xu)return xu;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(a,o){return U4(o)}const n=new qt("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new qt("size");return s.xform=r,t.push(s),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),xu=t,xu}function $4(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new yn(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function B4(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return $4(r,t),r}function KN(t,e,n){const r=HN(e);return r===null?null:B4(t,r,n)}function z4(t,e,n,r){const s=HN(e);if(s===null||!Nh(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const h=t.bucket,m=t.fullPath,p="/b/"+o(h)+"/o/"+o(m),_=Ec(p,n,r),b=UN({alt:"media",token:d});return _+b})[0]}function GN(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class fo{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t){if(!t)throw nx()}function ix(t,e){function n(r,s){const a=KN(t,s,e);return qr(a!==null),a}return n}function q4(t,e){function n(r,s){const a=KN(t,s,e);return qr(a!==null),z4(a,s,t.host,t._protocol)}return n}function kc(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=o4():s=a4():n.getStatus()===402?s=i4(t.bucket):n.getStatus()===403?s=l4(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function QN(t){const e=kc(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=s4(t.path)),a.serverResponse=s.serverResponse,a}return n}function H4(t,e,n){const r=e.fullServerUrl(),s=Ec(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new fo(s,a,ix(t,n),o);return c.errorHandler=QN(e),c}function W4(t,e,n){const r=e.fullServerUrl(),s=Ec(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new fo(s,a,q4(t,n),o);return c.errorHandler=QN(e),c}function K4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function XN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=K4(null,e)),r}function YN(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let y="";for(let E=0;E<2;E++)y=y+Math.random().toString().slice(2);return y}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=XN(e,r,s),h=GN(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",_=Or.getBlob(m,r,p);if(_===null)throw VN();const b={name:d.fullPath},A=Ec(a,t.host,t._protocol),N="POST",v=t.maxUploadRetryTime,w=new fo(A,N,ix(t,n),v);return w.urlParams=b,w.headers=o,w.body=_.uploadData(),w.errorHandler=kc(e),w}class Id{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function ax(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{qr(!1)}return qr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function G4(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o=XN(e,r,s),c={name:o.fullPath},u=Ec(a,t.host,t._protocol),d="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=GN(o,n),p=t.maxUploadRetryTime;function _(A){ax(A);let N;try{N=A.getResponseHeader("X-Goog-Upload-URL")}catch{qr(!1)}return qr(Nh(N)),N}const b=new fo(u,d,_,p);return b.urlParams=c,b.headers=h,b.body=m,b.errorHandler=kc(e),b}function Q4(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function a(d){const h=ax(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{qr(!1)}m||qr(!1);const p=Number(m);return qr(!isNaN(p)),new Id(p,r.size(),h==="final")}const o="POST",c=t.maxUploadRetryTime,u=new fo(n,o,a,c);return u.headers=s,u.errorHandler=kc(e),u}const Ev=256*1024;function X4(t,e,n,r,s,a,o,c){const u=new Id(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw h4();const d=u.total-u.current;let h=d;s>0&&(h=Math.min(h,s));const m=u.current,p=m+h;let _="";h===0?_="finalize":d===h?_="upload, finalize":_="upload";const b={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${u.current}`},A=r.slice(m,p);if(A===null)throw VN();function N(E,R){const L=ax(E,["active","final"]),j=u.current+h,x=r.size();let k;return L==="final"?k=ix(e,a)(E,R):k=null,new Id(j,x,L==="final",k)}const v="POST",w=e.maxUploadRetryTime,y=new fo(n,v,N,w);return y.headers=b,y.body=A.uploadData(),y.progressCallback=c||null,y.errorHandler=kc(t),y}const Yt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function jf(t){switch(t){case"running":case"pausing":case"canceling":return Yt.RUNNING;case"paused":return Yt.PAUSED;case"success":return Yt.SUCCESS;case"canceled":return Yt.CANCELED;case"error":return Yt.ERROR;default:return Yt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n,r){if(w4(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class J4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Qo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Z4 extends J4{initXhr(){this.xhr_.responseType="text"}}function ui(){return new Z4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=sx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Be.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if($N(s.status,[]))if(a)s=LN();else{this.sleepTime=Math.max(this.sleepTime*2,r4),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Be.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,a)=>{this._resolve=s,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=G4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ui,e,n);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=Q4(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(s,ui,n,r);this._request=a,a.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Ev*this._chunkMultiplier,n=new Id(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,a)=>{let o;try{o=X4(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(o,ui,s,a,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Ev*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=H4(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,ui,e,n);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=YN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ui,e,n);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=MN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=jf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const a=new Y4(n||void 0,r||void 0,s||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(jf(this._state)){case Yt.SUCCESS:da(this._resolve.bind(null,this.snapshot))();break;case Yt.CANCELED:case Yt.ERROR:const n=this._reject;da(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(jf(this._state)){case Yt.RUNNING:case Yt.PAUSED:e.next&&da(e.next.bind(e,this.snapshot))();break;case Yt.SUCCESS:e.complete&&da(e.complete.bind(e))();break;case Yt.CANCELED:case Yt.ERROR:e.error&&da(e.error.bind(e,this._error))();break;default:e.error&&da(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){this._service=e,n instanceof yn?this._location=n:this._location=yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Oi(e,n)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WN(this._location.path)}get storage(){return this._service}get parent(){const e=M4(this._location.path);if(e===null)return null;const n=new yn(this._location.bucket,e);return new Oi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw p4(e)}}function t5(t,e,n){t._throwIfRoot("uploadBytes");const r=YN(t.storage,t._location,sx(),new Or(e,!0),n);return t.storage.makeRequestWithTokens(r,ui).then(s=>({metadata:s,ref:t}))}function n5(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new e5(t,new Or(e),n)}function r5(t){t._throwIfRoot("getDownloadURL");const e=W4(t.storage,t._location,sx());return t.storage.makeRequestWithTokens(e,ui).then(n=>{if(n===null)throw f4();return n})}function s5(t,e){const n=V4(t._location.path,e),r=new yn(t._location.bucket,n);return new Oi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t){return/^[A-Za-z]+:\/\//.test(t)}function a5(t,e){return new Oi(t,e)}function JN(t,e){if(t instanceof ox){const n=t;if(n._bucket==null)throw d4();const r=new Oi(n,n._bucket);return e!=null?JN(r,e):r}else return e!==void 0?s5(t,e):t}function o5(t,e){if(e&&i5(e)){if(t instanceof ox)return a5(t,e);throw tp("To use ref(service, url), the first argument must be a Storage instance.")}else return JN(t,e)}function kv(t,e){const n=e==null?void 0:e[ON];return n==null?null:yn.makeFromBucketSpec(n,t)}function l5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:yb(s,t.app.options.projectId))}class ox{constructor(e,n,r,s,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=DN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=t4,this._maxUploadRetryTime=n4,this._requests=new Set,s!=null?this._bucket=yn.makeFromBucketSpec(s,this._host):this._bucket=kv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=kv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oi(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new g4(FN());{const o=T4(e,this._appId,r,s,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Tv="@firebase/storage",Iv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="storage";function np(t,e,n){return t=Le(t),t5(t,e,n)}function lx(t,e,n){return t=Le(t),n5(t,e,n)}function Ja(t){return t=Le(t),r5(t)}function Za(t,e){return t=Le(t),o5(t,e)}function jh(t=Jd(),e){t=Le(t);const r=Yd(t,ZN).getImmediate({identifier:e}),s=pb("storage");return s&&c5(r,...s),r}function c5(t,e,n,r={}){l5(t,e,n,r)}function u5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ox(n,r,s,e,Fi)}function d5(){Ti(new Vs(ZN,u5,"PUBLIC").setMultipleInstances(!0)),pr(Tv,Iv,""),pr(Tv,Iv,"esm2017")}d5();const h5={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},mn=bb().length?Jd():_b(h5),On=bb().length>0?aA(mn):Hb(mn,{persistence:[a1,e1]}),$=_N(mn),rp=jh(mn),yu="broast_session_location",ej=T.createContext({user:null,role:null,loading:!0,logout:async()=>{},userLocation:null,locationRequired:!1,refreshUserData:async()=>{}}),f5=({children:t})=>{const[e,n]=T.useState(null),[r,s]=T.useState(null),[a,o]=T.useState(!0),[c,u]=T.useState(null),[d,h]=T.useState(!1),m=async()=>{if(!e)return;const _=await tt(Z($,"users",e.uid));if(_.exists()){const b=_.data(),A=b==null?void 0:b.role,N=b==null?void 0:b.location,v=b==null?void 0:b.savedLocation;if(A==="customer"||A==="admin"){const w=v?{lat:v.lat,lng:v.lng}:N||null;u(w),w&&sessionStorage.setItem(yu,JSON.stringify(w))}else u(N||null),N&&sessionStorage.setItem(yu,JSON.stringify(N));h(!1)}};T.useEffect(()=>{const _=PS(On,async b=>{if(n(b),b){const A=await tt(Z($,"users",b.uid)),N=A.data(),v=A.exists()?N==null?void 0:N.role:null;s(v);const w=N==null?void 0:N.location,y=N==null?void 0:N.savedLocation,E=sessionStorage.getItem(yu),R=E?JSON.parse(E):null;let L=null;if(v==="customer"||v==="admin"?L=y?{lat:y.lat,lng:y.lng}:R||w||null:L=R||w||null,u(L),v==="customer"||v==="admin"?(h(!(!!y||!!R)),y&&!R&&sessionStorage.setItem(yu,JSON.stringify({lat:y.lat,lng:y.lng}))):h(v==="owner"||v==="courier"?!w:!1),v==="owner")try{const j=Z($,"restaurants",b.uid);(await tt(j)).exists()||await fn(j,{name:(N==null?void 0:N.restaurantName)||(N==null?void 0:N.name)||" ",ownerId:b.uid,email:(N==null?void 0:N.email)||b.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(j){console.warn("    ",j)}}else s(null),u(null),h(!1);o(!1)});return()=>_()},[]);const p=async()=>{await DS(On)};return i.jsx(ej.Provider,{value:{user:e,role:r,loading:a,logout:p,userLocation:c,locationRequired:d,refreshUserData:m},children:t})},ze=()=>T.useContext(ej);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),p5=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Sv=t=>{const e=p5(t);return e.charAt(0).toUpperCase()+e.slice(1)},tj=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),g5=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...c},u)=>T.createElement("svg",{ref:u,...x5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:tj("lucide",s),...!a&&!g5(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>T.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=(t,e)=>{const n=T.forwardRef(({className:r,...s},a)=>T.createElement(y5,{ref:a,iconNode:e,className:tj(`lucide-${m5(Sv(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Sv(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],w5=X("arrow-left",v5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Tc=X("arrow-right",_5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],$u=X("award",b5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Sd=X("bell",N5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],E5=X("briefcase",j5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],nj=X("building-2",k5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],I5=X("calendar",T5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ef=X("chart-column",S5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Cv=X("check-check",C5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Nr=X("check",A5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],cx=X("chef-hat",R5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rj=X("chevron-down",P5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],sp=X("chevron-left",D5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],L5=X("chevron-right",O5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],V5=X("chevron-up",M5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pi=X("circle-alert",F5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$t=X("circle-check-big",U5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],B5=X("circle-check",$5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Hr=X("circle-x",z5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Cd=X("clipboard-list",q5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vr=X("clock",H5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],ux=X("code-xml",W5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],G5=X("credit-card",K5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],In=X("crown",Q5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Av=X("dollar-sign",X5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],J5=X("external-link",Y5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sj=X("eye",Z5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Rv=X("file-check",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dx=X("file-text",t6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],r6=X("funnel",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],kf=X("gift",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ij=X("heart",i6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Ad=X("house",a6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],aj=X("image",o6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Pv=X("info",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],u6=X("key-round",c6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],h6=X("key",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wi=X("loader-circle",f6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hx=X("lock",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],fx=X("log-in",p6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],mx=X("mail",g6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],bn=X("map-pin",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],ip=X("medal",y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],_i=X("megaphone",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],_6=X("menu",w6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Eh=X("message-circle",b6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M5 12h14",key:"1ays0h"}]],j6=X("minus",N6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Li=X("navigation",E6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],er=X("package",k6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Dv=X("pen-line",T6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],px=X("phone",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],oj=X("play",S6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kh=X("plus",C6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pn=X("refresh-cw",A6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lj=X("save",R6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],D6=X("search",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],L6=X("send",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],V6=X("server",M6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cj=X("settings",F6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$6=X("shield-check",U6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ic=X("shield",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],nc=X("shopping-bag",z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Rd=X("shopping-cart",q6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],W6=X("smartphone",H6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],G6=X("smile",K6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Vn=X("sparkles",Q6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Y6=X("star",X6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Ut=X("store",J6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],e3=X("target",Z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sn=X("trash-2",t3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],r3=X("trending-up",n3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ap=X("triangle-alert",s3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],tr=X("truck",i3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],uj=X("upload",a3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Tf=X("user-check",o3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],c3=X("user-minus",l3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],rc=X("user-plus",u3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Ov=X("user-x",d3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],An=X("user",h3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],m3=X("users",f3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],g3=X("utensils",p3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],y3=X("video",x3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],dj=X("wallet",v3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bs=X("x",w3),Me=({to:t,label:e,icon:n,onClick:r})=>{const{pathname:s}=Gs(),a=s===t;return i.jsxs(Pe,{to:t,onClick:r,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(a?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20 backdrop-blur-sm"),children:[n,i.jsx("span",{children:e})]})},_3=()=>{const{user:t,role:e,logout:n}=ze(),[r,s]=T.useState(!1),[a,o]=T.useState(0),c=Gs(),u=Xt(),d=c.pathname==="/";return T.useEffect(()=>{s(!1)},[c.pathname]),T.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),T.useEffect(()=>{if(!t){o(0);return}const h=at(ue($,"notifications"),ft("recipientId","==",t.uid),ft("read","==",!1)),m=es(h,p=>{o(p.size)},()=>o(0));return()=>m()},[t]),i.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30",children:[i.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[!d&&i.jsx("button",{onClick:()=>u(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"",children:i.jsx(Tc,{className:"w-5 h-5"})}),i.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[i.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),i.jsx("span",{className:"text-lg sm:text-2xl",children:" "})]})]}),i.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[i.jsx(Me,{to:"/restaurants",label:"",icon:i.jsx(Ut,{className:"w-4 h-4"})}),e==="customer"&&i.jsxs(i.Fragment,{children:[i.jsx(Me,{to:"/cart",label:" "}),i.jsx(Me,{to:"/orders",label:""}),i.jsx(Me,{to:"/profile",label:"",icon:i.jsx(An,{className:"w-4 h-4"})})]}),e==="owner"&&i.jsxs(i.Fragment,{children:[i.jsx(Me,{to:"/owner",label:" "}),i.jsx(Me,{to:"/owner/orders",label:" "}),i.jsx(Me,{to:"/owner/courier-requests",label:""})]}),e==="courier"&&i.jsxs(i.Fragment,{children:[i.jsx(Me,{to:"/courier",label:" "}),i.jsx(Me,{to:"/courier/hiring",label:""})]}),e==="admin"&&i.jsx(Me,{to:"/admin",label:" "}),e==="developer"&&i.jsx(Me,{to:"/developer",label:" "}),t&&i.jsxs(Pe,{to:"/notifications",className:"relative p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"",children:[i.jsx(Sd,{className:"w-5 h-5"}),a>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold animate-pulse",children:a>9?"9+":a})]}),t?i.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:""}):i.jsx(Me,{to:"/login",label:""})]}),i.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white/20 hover:bg-white/30 transition backdrop-blur-sm",onClick:()=>s(!r),children:r?i.jsx(Bs,{className:"w-6 h-6 text-white"}):i.jsx(_6,{className:"w-6 h-6 text-white"})})]}),r&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>s(!1)}),i.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] bg-gradient-to-b from-sky-500 to-sky-700 
        z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${r?"translate-x-0":"translate-x-full"}
      `,children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[i.jsx("span",{className:"text-white font-bold text-lg",children:""}),i.jsx("button",{onClick:()=>s(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:i.jsx(Bs,{className:"w-5 h-5 text-white"})})]}),i.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[i.jsx(Me,{to:"/restaurants",label:"",icon:i.jsx(Ut,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="customer"&&i.jsxs(i.Fragment,{children:[i.jsx(Me,{to:"/cart",label:"",icon:i.jsx(Rd,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx(Me,{to:"/orders",label:"",icon:i.jsx(er,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx(Me,{to:"/profile",label:"",icon:i.jsx(An,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="owner"&&i.jsxs(i.Fragment,{children:[i.jsx(Me,{to:"/owner",label:" ",icon:i.jsx(Ad,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx(Me,{to:"/owner/orders",label:" ",icon:i.jsx(er,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx(Me,{to:"/owner/courier-requests",label:"",icon:i.jsx(tr,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="courier"&&i.jsxs(i.Fragment,{children:[i.jsx(Me,{to:"/courier",label:" ",icon:i.jsx(tr,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx(Me,{to:"/courier/hiring",label:"",icon:i.jsx(er,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="admin"&&i.jsx(Me,{to:"/admin",label:" ",icon:i.jsx(Ic,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="developer"&&i.jsx(Me,{to:"/developer",label:" ",icon:i.jsx(ux,{className:"w-5 h-5"}),onClick:()=>s(!1)}),t&&i.jsx(Me,{to:"/notifications",label:` ${a>0?`(${a})`:""}`,icon:i.jsx(Sd,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx("div",{className:"h-px bg-white/20 my-2"}),t?i.jsx("button",{onClick:()=>{n(),s(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"  "}):i.jsx(Me,{to:"/login",label:" ",icon:i.jsx(Ad,{className:"w-5 h-5"}),onClick:()=>s(!1)})]})]})]})},hj=T.createContext(null),Un=()=>{const t=T.useContext(hj);if(!t)throw new Error("useDialog must be used within DialogProvider");return t},b3=({children:t})=>{const[e,n]=T.useState({isOpen:!1,message:"",type:"confirm"}),r=T.useCallback(u=>new Promise(d=>{n({...u,isOpen:!0,resolve:d})}),[]),s=T.useCallback(u=>{e.resolve&&e.resolve(u),n(d=>({...d,isOpen:!1}))},[e.resolve]),a=T.useCallback(async()=>{e.onConfirm&&await e.onConfirm(),s(!0)},[e.onConfirm,s]),o=T.useCallback(()=>{e.onCancel&&e.onCancel(),s(!1)},[e.onCancel,s]),c=T.useMemo(()=>({confirm:(u,d={})=>r({message:u,type:"confirm",title:d.title||"",confirmText:d.confirmText||"",cancelText:d.cancelText||"",...d}),alert:(u,d={})=>r({message:u,type:"alert",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),success:(u,d={})=>r({message:u,type:"success",title:d.title||" ",confirmText:d.confirmText||"",...d}).then(()=>{}),error:(u,d={})=>r({message:u,type:"error",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),warning:(u,d={})=>r({message:u,type:"warning",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),info:(u,d={})=>r({message:u,type:"info",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{})}),[r]);return i.jsxs(hj.Provider,{value:c,children:[t,i.jsx(N3,{...e,onConfirm:a,onCancel:o})]})},N3=({isOpen:t,title:e,message:n,type:r="confirm",confirmText:s="",cancelText:a="",dangerous:o,onConfirm:c,onCancel:u})=>{if(!t)return null;const h={confirm:{icon:i.jsx(Pv,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:o?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:i.jsx(ap,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:i.jsx($t,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:i.jsx(Hr,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:i.jsx(ap,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:i.jsx(Pv,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[r],m=r==="confirm";return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:u}),i.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:p=>p.stopPropagation(),children:[i.jsxs("div",{className:"relative p-6 pb-0",children:[i.jsx("button",{onClick:u,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:i.jsx(Bs,{className:"w-5 h-5"})}),i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("div",{className:`w-16 h-16 rounded-full ${h.iconBg} ${h.iconColor} flex items-center justify-center`,children:h.icon})}),i.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:e})]}),i.jsx("div",{className:"p-6 pt-3",children:i.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),i.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${m?"flex-row-reverse":"justify-center"}`,children:[i.jsx("button",{onClick:c,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${h.buttonColor}`,children:s}),m&&i.jsx("button",{onClick:u,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:a})]})]})}),i.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},j3=()=>{const{user:t}=ze(),e=Xt(),n=Un(),r=async()=>{if(!(!t||!await n.confirm("     .     .",{title:"  ",dangerous:!0,confirmText:"  ",cancelText:""})))try{await Xn(Z($,"users",t.uid)),await OS(On.currentUser),n.success("   "),e("/account-deleted")}catch(a){console.error("Error deleting account:",a),n.error("    .   .")}};return i.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),i.jsx("span",{className:"text-xl sm:text-2xl font-black",children:" "})]}),i.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["  ",i.jsx(ij,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"}),"    ",new Date().getFullYear()]}),i.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[i.jsxs(Pe,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[i.jsx(Ic,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),i.jsxs(Pe,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[i.jsx(ux,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),t&&i.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[i.jsx(sn,{className:"w-3 h-3 sm:w-4 sm:h-4"})," "]})]}),i.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),i.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"     "})]})})},E3=()=>i.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:i.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[i.jsx(Vn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),i.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"            ! "}),i.jsx(Vn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),k3=({onLocationSaved:t})=>{const{user:e,role:n}=ze(),[r,s]=T.useState(null),[a,o]=T.useState(!1),[c,u]=T.useState(!1),[d,h]=T.useState(null),[m,p]=T.useState(!1),[_,b]=T.useState(!1),A={lat:24.7136,lng:46.6753},N=T.useCallback(()=>{if(!navigator.geolocation){h("    ");return}u(!0),h(null),navigator.geolocation.getCurrentPosition(y=>{const E={lat:y.coords.latitude,lng:y.coords.longitude};s(E),u(!1),window.locationRequiredMap&&(window.locationRequiredMap.setView([E.lat,E.lng],17),window.locationRequiredMarker&&window.locationRequiredMarker.setLatLng([E.lat,E.lng]))},y=>{u(!1),y.code===1?h("   .     "):y.code===2?h("  .    GPS"):h("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);T.useEffect(()=>{if(!document.getElementById("leaflet-css")){const y=document.createElement("link");y.id="leaflet-css",y.rel="stylesheet",y.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(y)}if(window.L)p(!0);else{const y=document.createElement("script");y.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",y.onload=()=>p(!0),document.body.appendChild(y)}},[]),T.useEffect(()=>{if(!m||!window.L)return;const y=window.L;if(!document.getElementById("location-required-map"))return;window.locationRequiredMap&&window.locationRequiredMap.remove();const R=r||A,L=y.map("location-required-map",{zoomControl:!0,attributionControl:!1}).setView([R.lat,R.lng],12);y.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(L);const j=y.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),x=y.marker([R.lat,R.lng],{icon:j,draggable:!0}).addTo(L);return x.on("dragend",()=>{const k=x.getLatLng();s({lat:k.lat,lng:k.lng})}),L.on("click",k=>{const{lat:S,lng:D}=k.latlng;s({lat:S,lng:D}),x.setLatLng([S,D])}),window.locationRequiredMap=L,window.locationRequiredMarker=x,()=>{window.locationRequiredMap&&(window.locationRequiredMap.remove(),window.locationRequiredMap=null,window.locationRequiredMarker=null)}},[m]);const v=async()=>{if(!(!r||!e)){b(!0);try{if(await xe(Z($,"users",e.uid),{location:r,locationUpdatedAt:new Date}),n==="owner")try{await xe(Z($,"restaurants",e.uid),{geoLocation:r,locationUpdatedAt:new Date})}catch(y){console.warn("   :",y)}t()}catch{h("   .   ")}finally{b(!1)}}},w=()=>{switch(n){case"owner":return"";case"courier":return" ";default:return""}};return i.jsx("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-sky-50 via-white to-sky-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 p-6 text-white text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(bn,{className:"w-10 h-10"})}),i.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["  ",w()]}),i.jsx("p",{className:"text-sky-100 text-sm",children:n==="owner"?"    ":"     (15 )"})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[d&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 flex items-center gap-3 text-red-700",children:[i.jsx(ap,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("p",{className:"text-sm",children:d})]}),i.jsx("button",{onClick:N,disabled:c,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:c?i.jsxs(i.Fragment,{children:[i.jsx(wi,{className:"w-5 h-5 animate-spin"}),"  ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Li,{className:"w-5 h-5"}),"   "]})}),i.jsxs("div",{className:"relative",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"      "}),i.jsx("div",{id:"location-required-map",className:"h-64 rounded-xl overflow-hidden border-2 border-gray-200",style:{background:"#f0f9ff"}}),!m&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:i.jsx(wi,{className:"w-8 h-8 animate-spin text-sky-500"})})]}),r&&i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 flex items-center gap-3 text-green-700",children:[i.jsx($t,{className:"w-5 h-5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-semibold",children:"   "}),i.jsxs("p",{className:"text-xs text-green-600",children:[r.lat.toFixed(6),", ",r.lng.toFixed(6)]})]})]}),i.jsx("button",{onClick:v,disabled:!r||_,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:_?i.jsxs(i.Fragment,{children:[i.jsx(wi,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx($t,{className:"w-5 h-5"}),"  "]})}),i.jsx("p",{className:"text-xs text-gray-400 text-center",children:"       "})]})]})})},De=({to:t,icon:e,label:n,color:r,emoji:s})=>i.jsxs(Pe,{to:t,className:`flex flex-col items-center justify-center gap-2 p-4 sm:p-5 rounded-2xl bg-gradient-to-br ${r} text-white shadow-lg active:scale-95 transition-all duration-200`,children:[i.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-white/20 rounded-xl flex items-center justify-center",children:s?i.jsx("span",{className:"text-2xl sm:text-3xl",children:s}):e}),i.jsx("span",{className:"font-bold text-sm sm:text-base text-center leading-tight",children:n})]}),T3=()=>{var s;const{user:t,role:e,loading:n,logout:r}=ze();return n?i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100",children:[i.jsx("div",{className:"w-20 h-20 mb-6 bg-gradient-to-br from-sky-500 to-sky-600 rounded-3xl flex items-center justify-center shadow-2xl animate-pulse",children:i.jsx("span",{className:"text-5xl",children:""})}),i.jsx(wi,{className:"w-8 h-8 text-sky-500 animate-spin mb-3"}),i.jsx("p",{className:"text-sky-600 font-semibold",children:" ..."})]}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 px-3 py-4 sm:px-4 sm:py-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-3 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl sm:rounded-3xl flex items-center justify-center shadow-xl",children:i.jsx("span",{className:"text-4xl sm:text-5xl",children:""})}),i.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-sky-600 to-sky-500 mb-1",children:" "}),t&&i.jsxs("p",{className:"text-sky-600/80 text-sm",children:[" ",t.displayName||((s=t.email)==null?void 0:s.split("@")[0])," "]})]}),!t&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(De,{to:"/restaurants",emoji:"",icon:i.jsx(Ut,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(De,{to:"/customer-login",emoji:"",icon:i.jsx(px,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),i.jsx(De,{to:"/login",emoji:"",icon:i.jsx(fx,{className:"w-6 h-6"}),label:" ",color:"from-amber-500 to-orange-500"}),i.jsx(De,{to:"/register",emoji:"",icon:i.jsx(rc,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"})]}),i.jsx("p",{className:"text-center text-sky-600/70 text-xs",children:"      "})]}),e==="customer"&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(De,{to:"/restaurants",emoji:"",icon:i.jsx(Ut,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(De,{to:"/cart",emoji:"",icon:i.jsx(Rd,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),i.jsx(De,{to:"/orders",emoji:"",icon:i.jsx(er,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),i.jsx(De,{to:"/profile",emoji:"",icon:i.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),i.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="owner"&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(De,{to:"/owner",emoji:"",icon:i.jsx(cx,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(De,{to:"/owner/orders",emoji:"",icon:i.jsx(Cd,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),i.jsx(De,{to:"/owner/menu",emoji:"",icon:i.jsx(Ut,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),i.jsx(De,{to:"/owner/edit",emoji:"",icon:i.jsx(cj,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),i.jsx(De,{to:"/owner/courier-requests",emoji:"",icon:i.jsx(tr,{className:"w-6 h-6"}),label:"",color:"from-cyan-500 to-cyan-600"}),i.jsx(De,{to:"/profile",emoji:"",icon:i.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),i.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="courier"&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(De,{to:"/courier",emoji:"",icon:i.jsx(tr,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(De,{to:"/courier/hiring",emoji:"",icon:i.jsx(Ut,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),i.jsx(De,{to:"/profile",emoji:"",icon:i.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),i.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="admin"&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(De,{to:"/admin",emoji:"",icon:i.jsx(Ic,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(De,{to:"/admin/restaurants",emoji:"",icon:i.jsx(Ut,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),i.jsx(De,{to:"/admin/orders",emoji:"",icon:i.jsx(er,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),i.jsx(De,{to:"/restaurants",emoji:"",icon:i.jsx(Rd,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),i.jsx(De,{to:"/profile",emoji:"",icon:i.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),i.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="developer"&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(De,{to:"/developer",emoji:"",icon:i.jsx(ux,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(De,{to:"/restaurants",emoji:"",icon:i.jsx(Ut,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),i.jsx(De,{to:"/admin/orders",emoji:"",icon:i.jsx(er,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),i.jsx(De,{to:"/profile",emoji:"",icon:i.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),i.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]})]})},gx=["",""," "," ","","","","","","","","","",""," ","","","","",""," ","","","","","","","","","","","","","",""," ","","","",""];function I3(t,e){const r=vu(e.lat-t.lat),s=vu(e.lng-t.lng),a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(vu(t.lat))*Math.cos(vu(e.lat))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function vu(t){return t*(Math.PI/180)}const If=15,S3=()=>{var b,A,N,v,w;const{userLocation:t,role:e}=ze(),[n,r]=T.useState([]),[s,a]=T.useState([]),[o,c]=T.useState(0),[u,d]=T.useState(!0),[h,m]=T.useState("");T.useEffect(()=>{(async()=>{const E=(await Ue(ue($,"restaurants"))).docs.map(L=>({id:L.id,...L.data()}));try{const L=at(ue($,"promotions"),ft("isActive","==",!0)),j=await Ue(L),x=new Date,k=j.docs.map(S=>{var D,O;return{id:S.id,...S.data(),expiresAt:(O=(D=S.data().expiresAt)==null?void 0:D.toDate)==null?void 0:O.call(D)}}).filter(S=>!S.expiresAt||new Date(S.expiresAt)>x).map(S=>{const D=E.find(O=>O.id===S.ownerId);return{...S,restaurantName:D==null?void 0:D.name}});a(k)}catch(L){console.warn("Error loading promotions:",L)}let R=[];t?(R=E.map(L=>{if(L.geoLocation){const j=I3(t,L.geoLocation);return{...L,distance:j}}return{...L,distance:void 0}}),(e==="customer"||e==="courier")&&(R=R.filter(L=>!L.geoLocation||L.distance===void 0?!1:L.distance<=If)),R.sort((L,j)=>{const x=L.packageType==="premium"?1:0,k=j.packageType==="premium"?1:0;if(k!==x)return k-x;const S={gold:3,silver:2,bronze:1},D=S[L.sellerTier||"bronze"]||0,O=S[j.sellerTier||"bronze"]||0;if(O!==D)return O-D;const P=L.isVerified?1:0,Q=j.isVerified?1:0;return Q!==P?Q-P:(L.distance||999)-(j.distance||999)})):R=E.sort((L,j)=>{const x={gold:3,silver:2,bronze:1},k=x[L.sellerTier||"bronze"]||0,S=x[j.sellerTier||"bronze"]||0;if(S!==k)return S-k;const D=L.isVerified?1:0;return(j.isVerified?1:0)-D}),r(R),d(!1)})()},[t,e]);const p=T.useMemo(()=>{const y=new Set(n.map(E=>E.city).filter(Boolean));return gx.filter(E=>y.has(E))},[n]),_=T.useMemo(()=>h?n.filter(y=>y.city===h):n,[n,h]);return u?i.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."}):i.jsxs("div",{className:"py-10",children:[i.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-sky-600",children:"  "}),s.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[i.jsx(_i,{className:"w-5 h-5 text-purple-500"}),i.jsx("span",{className:"font-bold text-purple-600",children:" "})]}),i.jsxs("div",{className:"relative",children:[i.jsxs(Pe,{to:`/menu?restaurant=${(b=s[o])==null?void 0:b.ownerId}`,onClick:async()=>{try{await xe(Z($,"promotions",s[o].id),{viewsCount:Dr(1)})}catch{}},className:"block bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden",children:[i.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[i.jsx(_i,{className:"w-3 h-3"}),""]}),((A=s[o])==null?void 0:A.mediaUrl)&&i.jsx("div",{className:"relative h-48",children:s[o].type==="video"?i.jsxs(i.Fragment,{children:[i.jsx("video",{src:s[o].mediaUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,autoPlay:!0,playsInline:!0}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:i.jsx(oj,{className:"w-6 h-6 text-white fill-white"})})})]}):i.jsx("img",{src:s[o].mediaUrl,alt:s[o].title,className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"flex items-center gap-2 mb-2",children:((N=s[o])==null?void 0:N.restaurantName)&&i.jsx("span",{className:"text-xs bg-white/20 text-white px-2 py-1 rounded-full",children:s[o].restaurantName})}),((v=s[o])==null?void 0:v.title)&&i.jsx("h3",{className:"text-lg font-bold text-white",children:s[o].title}),((w=s[o])==null?void 0:w.description)&&i.jsx("p",{className:"text-purple-100 text-sm mt-1 line-clamp-2",children:s[o].description})]})]}),s.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:y=>{y.preventDefault(),c(E=>E===0?s.length-1:E-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:i.jsx(sp,{className:"w-5 h-5 text-gray-800"})}),i.jsx("button",{onClick:y=>{y.preventDefault(),c(E=>E===s.length-1?0:E+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:i.jsx(L5,{className:"w-5 h-5 text-gray-800"})})]}),s.length>1&&i.jsx("div",{className:"flex justify-center gap-2 mt-3",children:s.map((y,E)=>i.jsx("button",{onClick:()=>c(E),className:`w-2 h-2 rounded-full transition ${E===o?"bg-purple-500 w-4":"bg-gray-300"}`},E))})]})]}),p.length>0&&i.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[i.jsx(r6,{className:"w-5 h-5"}),i.jsx("span",{className:"font-semibold",children:":"})]}),i.jsx("button",{onClick:()=>m(""),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${h?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-sky-500 text-white shadow-lg"}`,children:""}),p.map(y=>i.jsxs("button",{onClick:()=>m(y),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1 ${h===y?"bg-sky-500 text-white shadow-lg":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:[i.jsx(bn,{className:"w-4 h-4"}),y]},y)),h&&i.jsx("button",{onClick:()=>m(""),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:" ",children:i.jsx(Bs,{className:"w-5 h-5"})})]}),_.length===0&&i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(pi,{className:"w-10 h-10 text-sky-500"})}),t?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:"     "}),i.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["   ",If,"  "]})]}):i.jsx(i.Fragment,{children:i.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:h?`     ${h}`:"    "})})]}),t&&_.length>0&&(e==="customer"||e==="courier")&&i.jsxs("div",{className:"mb-6 bg-sky-50 border border-sky-200 rounded-xl p-4 flex items-center gap-3",children:[i.jsx(Li,{className:"w-6 h-6 text-sky-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sky-700 font-semibold",children:"    "}),i.jsxs("p",{className:"text-sky-600 text-sm",children:["  : ",If," "]})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(y=>i.jsxs(Pe,{to:`/menu?restaurant=${y.id}`,className:`bg-white border text-gray-800 rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center relative overflow-hidden ${y.sellerTier==="gold"?"border-amber-300 ring-2 ring-amber-200":"border-gray-200"}`,children:[i.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-1.5",children:[y.isVerified?i.jsxs("div",{className:"bg-green-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[i.jsx($t,{className:"w-3 h-3"})," "]}):i.jsx("div",{className:"bg-gray-400 text-white text-xs font-medium px-2.5 py-1 rounded-full flex items-center gap-1 shadow-sm",children:" "}),y.sellerTier==="gold"&&i.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[i.jsx(In,{className:"w-3 h-3"}),"Gold"]}),y.sellerTier==="silver"&&i.jsxs("div",{className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[i.jsx(ip,{className:"w-3 h-3"}),"Silver"]}),y.packageType==="premium"&&i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:" "})]}),y.distance!==void 0&&i.jsxs("div",{className:"absolute top-3 left-3 bg-sky-500 text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[i.jsx(Li,{className:"w-3 h-3"}),y.distance<1?`${Math.round(y.distance*1e3)} `:`${y.distance.toFixed(1)} `]}),y.logoUrl?i.jsx("img",{src:y.logoUrl,alt:y.name,className:`w-28 h-28 object-cover rounded-full mb-4 ${y.sellerTier==="gold"?"border-4 border-amber-400 ring-4 ring-amber-100":y.sellerTier==="silver"?"border-4 border-gray-300":"border-4 border-sky-100"}`}):i.jsx("div",{className:`w-28 h-28 flex items-center justify-center rounded-full text-3xl mb-4 ${y.sellerTier==="gold"?"bg-amber-100 border-4 border-amber-400":y.sellerTier==="silver"?"bg-gray-100 border-4 border-gray-300":"bg-sky-100 border-4 border-sky-200"}`,children:""}),i.jsx("h3",{className:"font-bold text-xl text-gray-800",children:y.name}),y.city&&i.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center justify-center gap-1",children:[i.jsx(bn,{className:"w-4 h-4"}),y.city]})]},y.id))})]})},Lv="broast_cart";function xx(){const[t,e]=T.useState(()=>{try{const c=localStorage.getItem(Lv);return c?JSON.parse(c):[]}catch{return[]}});T.useEffect(()=>{localStorage.setItem(Lv,JSON.stringify(t))},[t]);const n=(c,u=1)=>{e(d=>{const h=d.findIndex(m=>m.id===c.id);if(h>=0){const m=[...d];return m[h]={...m[h],qty:m[h].qty+u,ownerId:c.ownerId??m[h].ownerId},m}return[...d,{...c,qty:u}]})},r=c=>e(u=>u.filter(d=>d.id!==c)),s=(c,u)=>e(d=>d.map(h=>h.id===c?{...h,qty:u}:h)),a=()=>e([]),o=t.reduce((c,u)=>c+u.price*u.qty,0);return{items:t,add:n,remove:r,changeQty:s,clear:a,subtotal:o}}const fj=T.createContext(null),En=()=>{const t=T.useContext(fj);if(!t)throw new Error("useToast must be used within ToastProvider");return t},C3=({children:t})=>{const[e,n]=T.useState([]),r=T.useCallback(o=>{n(c=>c.filter(u=>u.id!==o))},[]),s=T.useCallback((o,c,u)=>{const d=Math.random().toString(36).slice(2),h={id:d,message:o,type:c,title:u==null?void 0:u.title,duration:(u==null?void 0:u.duration)??3e3};n(m=>[...m,h]),h.duration&&h.duration>0&&setTimeout(()=>r(d),h.duration)},[r]),a=T.useMemo(()=>({show:(o,c)=>s(o,(c==null?void 0:c.type)??"info",c),success:(o,c)=>s(o,"success",c),error:(o,c)=>s(o,"error",c),info:(o,c)=>s(o,"info",c),warning:(o,c)=>s(o,"warning",c)}),[s]);return i.jsxs(fj.Provider,{value:a,children:[t,i.jsx(P3,{items:e,onClose:r})]})},A3={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},R3={success:"",error:"",info:"",warning:""},P3=({items:t,onClose:e})=>(T.useEffect(()=>{},[]),i.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[i.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:t.map(n=>i.jsx("div",{className:`pointer-events-auto ${A3[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"text-xl leading-none",children:R3[n.type]}),i.jsxs("div",{className:"flex-1",children:[n.title&&i.jsx("div",{className:"font-bold",children:n.title}),i.jsx("div",{className:"text-sm",children:n.message})]}),i.jsx("button",{onClick:()=>e(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:""})]})},n.id))}),i.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),D3=()=>{const[t,e]=T.useState([]),[n,r]=T.useState(!0),[s,a]=T.useState(null),[o,c]=T.useState(null),[u,d]=T.useState(!0),{add:h,subtotal:m,items:p}=xx(),{user:_,role:b}=ze(),A=En(),[N]=ub(),v=N.get("restaurant");T.useEffect(()=>{(async()=>{let R;if(v){R=at(ue($,"menuItems"),ft("available","==",!0),ft("ownerId","==",v));const k=await tt(Z($,"restaurants",v));k.exists()&&a(k.data().name);try{const S=at(ue($,"promotions"),ft("ownerId","==",v),ft("isActive","==",!0)),D=await Ue(S);if(!D.empty){const O=D.docs.map(V=>{var K,z;return{id:V.id,...V.data(),expiresAt:(z=(K=V.data().expiresAt)==null?void 0:K.toDate)==null?void 0:z.call(K)}}),P=new Date,Q=O.filter(V=>!V.expiresAt||new Date(V.expiresAt)>P);if(Q.length>0){const V=Q[0];c(V),await xe(Z($,"promotions",V.id),{viewsCount:Dr(1)})}}}catch(S){console.warn("Error loading promotion:",S)}}else R=at(ue($,"menuItems"),ft("available","==",!0));const j=(await Ue(R)).docs.map(k=>({id:k.id,...k.data()})),x=await Promise.all(j.map(async k=>{if(!k.ownerId)return k;const S=await tt(Z($,"restaurants",k.ownerId));return S.exists()?{...k,restaurant:S.data()}:k}));e(x),r(!1)})()},[v]);const w=1.75,y=R=>{var j;if(!R.ownerId){A.warning("    ",{title:""});return}const L=(j=p[0])==null?void 0:j.ownerId;if(L&&L!==R.ownerId){A.warning("           ",{title:""});return}h({id:R.id,name:R.name,price:R.price+w,ownerId:R.ownerId}),A.success("    ")};if(n)return i.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."});const E=_&&(b==="customer"||b==="admin"||b==="developer"||!b);return i.jsxs("div",{className:"py-10",children:[i.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:s?`  ${s}`:"  "}),v&&i.jsx("div",{className:"text-center mb-6",children:i.jsx(Pe,{to:"/restaurants",className:"text-sky-400 hover:text-sky-300 underline",children:"   "})}),o&&u&&i.jsxs("div",{className:"mb-8 bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden relative",children:[i.jsx("button",{onClick:()=>d(!1),className:"absolute top-3 left-3 z-10 p-2 bg-black/40 hover:bg-black/60 rounded-full text-white transition",children:i.jsx(Bs,{className:"w-4 h-4"})}),i.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[i.jsx(_i,{className:"w-3 h-3"}),""]}),i.jsxs("div",{className:"relative",children:[o.mediaUrl&&i.jsx("div",{className:"relative",children:o.type==="video"?i.jsxs("div",{className:"relative",children:[i.jsx("video",{src:o.mediaUrl,controls:!0,className:"w-full h-56 object-cover",poster:""}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:i.jsx(oj,{className:"w-8 h-8 text-white fill-white"})})})]}):i.jsx("img",{src:o.mediaUrl,alt:o.title,className:"w-full h-56 object-cover"})}),i.jsxs("div",{className:"p-5",children:[o.title&&i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:o.title}),o.description&&i.jsx("p",{className:"text-purple-100 text-sm leading-relaxed",children:o.description})]})]})]}),t.length===0&&i.jsx("div",{className:"text-center text-gray-400",children:"    "}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(R=>i.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[R.restaurant&&i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[R.restaurant.logoUrl?i.jsx("img",{src:R.restaurant.logoUrl,alt:R.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):i.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:""}),i.jsx("span",{className:"font-semibold",children:R.restaurant.name})]}),i.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:R.imageUrl?i.jsx("img",{src:R.imageUrl,alt:R.name,className:"w-full h-full object-cover rounded-xl"}):i.jsx("span",{className:"text-gray-400",children:" "})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-lg",children:R.name}),R.desc&&i.jsx("p",{className:"text-sm text-gray-300 mt-1",children:R.desc})]}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[(R.price+w).toFixed(2)," ."]}),E&&i.jsx("button",{onClick:()=>y(R),disabled:!R.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${R.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"  "})]})]},R.id))}),m>0&&E&&i.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-40",children:i.jsxs(Pe,{to:"/checkout",className:"block w-full sm:w-auto text-center px-6 py-4 rounded-2xl bg-sky-600 text-white shadow-xl font-bold hover:bg-sky-700 transition text-base sm:text-lg",children:["    ",m.toFixed(2)," ."]})})]})},O3=()=>{const{items:t,subtotal:e,remove:n,clear:r,changeQty:s}=xx();return t.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:i.jsx(nc,{className:"w-12 h-12 text-gray-400"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-2",children:" "}),i.jsx("p",{className:"text-gray-500 mb-6",children:"   !"}),i.jsxs(Pe,{to:"/restaurants",className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-sky-600 transition",children:[i.jsx(w5,{className:"w-5 h-5"})," "]})]}):i.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[i.jsx(nc,{className:"w-6 h-6 text-primary"})," ",i.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:t.length})]})}),i.jsx("div",{className:"space-y-3",children:t.map(a=>i.jsxs("div",{className:"flex items-center gap-3 bg-white text-gray-900 p-3 sm:p-4 rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:a.name}),i.jsxs("p",{className:"text-primary font-bold text-sm",children:[a.price.toFixed(2)," ."]}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("button",{onClick:()=>a.qty>1?s(a.id,a.qty-1):n(a.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:i.jsx(j6,{className:"w-4 h-4"})}),i.jsx("span",{className:"font-bold text-lg w-8 text-center",children:a.qty}),i.jsx("button",{onClick:()=>s(a.id,a.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:i.jsx(kh,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(a.price*a.qty).toFixed(2)," ."]}),i.jsx("button",{onClick:()=>n(a.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:i.jsx(sn,{className:"w-4 h-4"})})]})]},a.id))}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-gray-600",children:[i.jsx("span",{children:" "}),i.jsxs("span",{className:"font-bold",children:[e.toFixed(2)," ."]})]}),i.jsxs("div",{className:"flex justify-between text-gray-600",children:[i.jsx("span",{children:" "}),i.jsx("span",{className:"font-bold",children:"7.00 ."})]}),i.jsx("div",{className:"h-px bg-gray-200"}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-bold text-lg",children:""}),i.jsxs("span",{className:"font-bold text-xl text-primary",children:[(e+7).toFixed(2)," ."]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[i.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:[i.jsx(sn,{className:"w-5 h-5"})," "]}),i.jsx(Pe,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition",children:"  "})]})]})},L3=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(""),[s,a]=T.useState(!1),o=Xt(),c=Un(),u=async d=>{d.preventDefault(),a(!0);try{const m=(await CS(On,t,n)).user.uid,p=await tt(Z($,"users",m));if(p.exists()){const _=p.data();console.log("  :",_),_.role==="owner"?o("/owner"):_.role==="admin"?o("/admin"):_.role==="developer"?o("/developer"):_.role==="courier"?o("/courier"):o("/")}else c.warning("   Auth       Firestore")}catch(h){c.error(h.message,{title:"   "})}finally{a(!1)}};return i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[i.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),i.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:i.jsx("span",{className:"text-4xl",children:"  "})}),i.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),i.jsx("p",{className:"text-sky-500 mt-1",children:" "})]}),i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(mx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{type:"email",placeholder:"",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:t,onChange:d=>e(d.target.value)})]}),i.jsxs("div",{className:"relative",children:[i.jsx(hx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{type:"password",placeholder:" ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:d=>r(d.target.value)})]}),i.jsx("button",{disabled:s,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50`,children:s?i.jsx(i.Fragment,{children:" ..."}):i.jsxs(i.Fragment,{children:[i.jsx(fx,{className:"w-5 h-5"}),""]})})]}),i.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["  "," ",i.jsx(Pe,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"  "})]}),i.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[i.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"    "}),i.jsx(Pe,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"   "})]})]})]})},M3=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(""),[s,a]=T.useState(""),[o,c]=T.useState(""),[u,d]=T.useState(""),[h,m]=T.useState(""),[p,_]=T.useState(!1),b=Xt(),A=async v=>{if(v.preventDefault(),!h)return alert("  ");if(h==="owner"&&!o)return alert("  ");_(!0);try{const w=await yl(On,t,n);await fn(Z($,"users",w.user.uid),{name:s,email:t,role:h,restaurantName:h==="owner"?o:null}),h==="owner"&&await fn(Z($,"restaurants",w.user.uid),{name:o||s||" ",ownerId:w.user.uid,email:t,phone:"",city:u||"",location:"",logoUrl:""},{merge:!0}),b("/")}catch(w){alert(w.message)}finally{_(!1)}},N=[{value:"customer",label:"",icon:m3,color:"sky"},{value:"courier",label:"",icon:tr,color:"emerald"},{value:"owner",label:" ",icon:cx,color:"orange"}];return i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[i.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),i.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:i.jsx(rc,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"  "})]}),i.jsxs("form",{onSubmit:A,className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(An,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",value:s,onChange:v=>a(v.target.value)})]}),i.jsxs("div",{className:"relative",children:[i.jsx(mx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",type:"email",value:t,onChange:v=>e(v.target.value)})]}),i.jsxs("div",{className:"relative",children:[i.jsx(hx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:" ",type:"password",value:n,onChange:v=>r(v.target.value)})]}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:N.map(v=>{const w=v.icon,y=h===v.value;return i.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${y?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[i.jsx("input",{type:"radio",name:"role",value:v.value,className:"hidden",onChange:()=>m(v.value)}),i.jsx(w,{className:"w-6 h-6"}),i.jsx("span",{className:"text-sm font-bold",children:v.label})]},v.value)})}),h==="owner"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative",children:[i.jsx(Ut,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),i.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:" ",value:o,onChange:v=>c(v.target.value)})]}),i.jsxs("div",{className:"relative",children:[i.jsx(bn,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400 pointer-events-none"}),i.jsxs("select",{value:u,onChange:v=>d(v.target.value),className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),gx.map(v=>i.jsx("option",{value:v,children:v},v))]})]})]}),i.jsx("button",{disabled:p,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02]",children:p?" ...":i.jsxs(i.Fragment,{children:[i.jsx(rc,{className:"w-5 h-5"}),""]})})]}),i.jsxs("p",{className:"mt-6 text-center text-sky-600",children:[" "," ",i.jsx(Pe,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"  "})]})]})]})},Mv=t=>{let e=t.replace(/\D/g,"");return e.startsWith("0")&&(e=e.substring(1)),e.startsWith("966")||(e="966"+e),"+"+e},V3=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(""),[s,a]=T.useState("phone"),[o,c]=T.useState(!1),[u,d]=T.useState(null),[h,m]=T.useState(0),p=T.useRef(null),_=T.useRef(null),b=Xt(),A=Un();T.useEffect(()=>(p.current&&!_.current&&(_.current=new Iy(On,p.current,{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired"),_.current=null}})),()=>{_.current&&(_.current.clear(),_.current=null)}),[]),T.useEffect(()=>{if(h>0){const y=setTimeout(()=>m(h-1),1e3);return()=>clearTimeout(y)}},[h]);const N=async()=>{if(!t||t.length<9){A.warning("   ");return}const y=Mv(t);console.log("Sending OTP to:",y),c(!0);try{!_.current&&p.current&&(_.current=new Iy(On,p.current,{size:"invisible"}));const E=await cC(On,y,_.current);d(E),a("otp"),m(60),A.success("     ")}catch(E){console.error("OTP Error:",E),_.current&&(_.current.clear(),_.current=null),E.code==="auth/invalid-phone-number"?A.error("   "):E.code==="auth/too-many-requests"?A.error("   "):E.code==="auth/quota-exceeded"?A.error("     "):A.error(E.message||"  ")}finally{c(!1)}},v=async()=>{if(!n||n.length!==6){A.warning("     6 ");return}if(!u){A.error("    "),a("phone");return}c(!0);try{const y=await u.confirm(n),E=y.user.uid,R=y.user.phoneNumber,L=await tt(Z($,"users",E));L.exists()?A.success(" ! "):(await fn(Z($,"users",E),{phone:R,role:"customer",name:"",createdAt:ae()}),A.success("   ! "));const j=L.exists()?L.data():{role:"customer"};j.role==="owner"?b("/owner"):j.role==="admin"?b("/admin"):j.role==="developer"?b("/developer"):j.role==="courier"?b("/courier"):b("/")}catch(y){console.error("Verify Error:",y),y.code==="auth/invalid-verification-code"?A.error("   "):y.code==="auth/code-expired"?(A.error("    "),a("phone")):A.error(y.message||" ")}finally{c(!1)}},w=()=>{h>0||(a("phone"),r(""),d(null))};return i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[i.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),i.jsx("div",{ref:p,id:"recaptcha-container"}),i.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),i.jsx("p",{className:"text-sky-500 mt-1",children:s==="phone"?" ":"  "})]}),s==="phone"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(px,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:t,onChange:y=>e(y.target.value.replace(/\D/g,"")),maxLength:10})]}),i.jsx("p",{className:"text-sm text-gray-500 text-center",children:"     SMS"}),i.jsx("button",{onClick:N,disabled:o||t.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:o?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Tc,{className:"w-5 h-5"}),"  "]})})]}),s==="otp"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("p",{className:"text-gray-600",children:"   "}),i.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:Mv(t)})]}),i.jsxs("div",{className:"relative",children:[i.jsx(u6,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:y=>r(y.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),i.jsx("button",{onClick:v,disabled:o||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:o?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(fx,{className:"w-5 h-5"})," "]})}),i.jsx("div",{className:"text-center",children:h>0?i.jsxs("p",{className:"text-gray-500 text-sm",children:["   ",i.jsx("span",{className:"font-bold text-sky-600",children:h})," "]}):i.jsx("button",{onClick:w,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"    "})}),i.jsx("button",{onClick:()=>{a("phone"),r("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"   "})]}),i.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[i.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"   "}),i.jsx(Pe,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"   "})]})]})]})};function F3(){return i.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:i.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"  -   "}),i.jsxs("p",{className:"mb-4",children:["   ",i.jsx("strong",{children:" "}),"          ."]}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1.  "}),i.jsx("p",{className:"mb-4",children:"                   .            ."}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2.  "}),i.jsx("p",{className:"mb-4",children:"               ."}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3.  "}),i.jsx("p",{className:"mb-4",children:"              .                 ."}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4.  "}),i.jsx("p",{className:"mb-4",children:"       (    )         ."}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5.  "}),i.jsxs("p",{className:"mb-4",children:["              .         :",i.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6.   "}),i.jsx("p",{className:"mb-4",children:"                  ."}),i.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["      ",new Date().toLocaleDateString("ar-SA"),"."]}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx(Pe,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"   "})})]})})}function U3(){return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"   "}),i.jsx("p",{className:"text-gray-600 mb-6",children:"          ."}),i.jsx(Pe,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"   "})]})}const $3="modulepreload",B3=function(t){return"/"+t},Vv={},Sf=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=B3(u),u in Vv)return;Vv[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":$3,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((p,_)=>{m.addEventListener("load",p),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},Re=({allow:t,children:e})=>{const{role:n,loading:r}=ze();return r?i.jsx("div",{className:"p-8 text-center",children:" ..."}):!n||!t.includes(n)?i.jsx(ig,{to:"/",replace:!0}):i.jsx(i.Fragment,{children:e})},mj=({isOpen:t,onClose:e,onConfirm:n,initialLocation:r})=>{const[s,a]=T.useState(r||null),[o,c]=T.useState(""),[u,d]=T.useState(!1),[h,m]=T.useState(!1),[p,_]=T.useState(null),[b,A]=T.useState(!1),[N,v]=T.useState(""),[w,y]=T.useState([]),[E,R]=T.useState(!1),[L,j]=T.useState(!1),x={lat:24.7136,lng:46.6753},k=T.useCallback(async Q=>{if(!Q.trim()||Q.length<2){y([]),j(!1);return}R(!0);try{const V=Q.includes("")?Q:`${Q}, `,z=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(V)}&limit=5&accept-language=ar`,{headers:{Accept:"application/json"}})).json();y(z),j(z.length>0)}catch(V){console.error("  :",V),y([])}finally{R(!1)}},[]),S=T.useCallback(Q=>{const V={lat:parseFloat(Q.lat),lng:parseFloat(Q.lon)};a(V),v(""),y([]),j(!1),window.leafletMap&&(window.leafletMap.setView([V.lat,V.lng],16,{animate:!0,duration:.5}),window.leafletMarker&&window.leafletMarker.setLatLng([V.lat,V.lng]));const K=Q.display_name.split(",").slice(0,3).join("");c(K)},[]),D=T.useCallback(()=>{if(!navigator.geolocation){_("    ");return}m(!0),_(null),navigator.geolocation.getCurrentPosition(Q=>{const V={lat:Q.coords.latitude,lng:Q.coords.longitude};a(V),m(!1),window.leafletMap&&(window.leafletMap.setView([V.lat,V.lng],17),window.leafletMarker&&window.leafletMarker.setLatLng([V.lat,V.lng]))},Q=>{m(!1),Q.code===1?_("   .     "):Q.code===2?_("  .    GPS"):_("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);T.useEffect(()=>{if(t){if(!document.getElementById("leaflet-css")){const Q=document.createElement("link");Q.id="leaflet-css",Q.rel="stylesheet",Q.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(Q)}if(window.L)A(!0);else{const Q=document.createElement("script");Q.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",Q.onload=()=>A(!0),document.body.appendChild(Q)}}},[t]),T.useEffect(()=>{if(!t||!b||!window.L)return;const Q=window.L;if(!document.getElementById("location-map"))return;window.leafletMap&&window.leafletMap.remove();const K=s||x,z=Q.map("location-map",{zoomControl:!1,attributionControl:!1}).setView([K.lat,K.lng],s?17:12);Q.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(z);const U=Q.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),J=Q.marker([K.lat,K.lng],{icon:U,draggable:!0}).addTo(z);return J.on("dragend",()=>{const ne=J.getLatLng();a({lat:ne.lat,lng:ne.lng})}),z.on("click",ne=>{const{lat:_e,lng:ye}=ne.latlng;J.setLatLng([_e,ye]),a({lat:_e,lng:ye})}),window.leafletMap=z,window.leafletMarker=J,s&&a(s),()=>{window.leafletMap&&(window.leafletMap.remove(),window.leafletMap=null,window.leafletMarker=null)}},[t,b]);const O=()=>{s&&window.leafletMap&&window.leafletMap.setView([s.lat,s.lng],17,{animate:!0,duration:.5})},P=()=>{if(!s){_("  ");return}if(!o.trim()){_("  ");return}n(s,o)};return t?i.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),i.jsxs("div",{className:"relative w-full h-full sm:w-[95%] sm:h-[90%] sm:max-w-2xl sm:rounded-3xl overflow-hidden bg-white shadow-2xl flex flex-col",children:[i.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:i.jsx(bn,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-lg",children:"  "}),i.jsx("p",{className:"text-sm text-white/80",children:"   "})]})]}),i.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition",children:i.jsx(Bs,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"relative",children:[i.jsx(D6,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",value:N,onChange:Q=>{v(Q.target.value),k(Q.target.value)},onFocus:()=>w.length>0&&j(!0),placeholder:"     ...",className:"w-full bg-white/95 text-gray-800 rounded-xl p-3 pr-10 pl-10 focus:outline-none focus:ring-2 focus:ring-white/50 transition placeholder:text-gray-400"}),E&&i.jsx(wi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-500 animate-spin"}),L&&w.length>0&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl overflow-hidden z-[1001] max-h-60 overflow-y-auto",children:w.map((Q,V)=>i.jsxs("button",{onClick:()=>S(Q),className:"w-full p-3 text-right hover:bg-sky-50 border-b border-gray-100 last:border-0 transition flex items-start gap-3",children:[i.jsx(bn,{className:"w-5 h-5 text-sky-500 flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"text-gray-700 text-sm leading-relaxed",children:Q.display_name})]},V))})]})]}),i.jsxs("div",{className:"flex-1 relative",children:[!b&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(wi,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-3"}),i.jsx("p",{className:"text-sky-600 font-medium",children:"  ..."})]})}),i.jsx("div",{id:"location-map",className:"w-full h-full"}),i.jsxs("div",{className:"absolute left-4 top-4 flex flex-col gap-2 z-[1000]",children:[i.jsx("button",{onClick:D,disabled:h,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition disabled:opacity-50",title:" ",children:h?i.jsx(wi,{className:"w-5 h-5 text-sky-500 animate-spin"}):i.jsx(Li,{className:"w-5 h-5 text-sky-500"})}),s&&i.jsx("button",{onClick:O,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition",title:"",children:i.jsx(e3,{className:"w-5 h-5 text-gray-600"})})]}),s&&i.jsxs("div",{className:"absolute right-4 top-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 z-[1000] max-w-[200px]",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[i.jsx(Nr,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium",children:"  "})]}),i.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[s.lat.toFixed(6),", ",s.lng.toFixed(6)]})]})]}),i.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[p&&i.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm flex items-center gap-2",children:[i.jsx(Bs,{className:"w-4 h-4 flex-shrink-0"}),p]}),i.jsxs("div",{className:"relative",children:[i.jsx(W6,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",value:o,onChange:Q=>c(Q.target.value),placeholder:"  (:       ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 pr-10 focus:border-sky-400 focus:outline-none transition text-gray-800"})]}),i.jsx("p",{className:"text-xs text-gray-500 text-center",children:"      "}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:e,className:"flex-1 py-3 px-4 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition",children:""}),i.jsxs("button",{onClick:P,disabled:!s,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:[i.jsx(Nr,{className:"w-5 h-5"})," "]})]})]})]}),i.jsx("style",{children:`
        .custom-marker {
          background: transparent !important;
          border: none !important;
        }
        .leaflet-container {
          font-family: inherit;
        }
        .leaflet-control-zoom {
          display: none;
        }
        #location-map {
          background: #f0f9ff;
        }
      `})]}):null},Cf=1,Xo=.75,Af=!1,z3=()=>{const{items:t,subtotal:e,clear:n}=xx(),{user:r}=ze(),s=Xt(),a=Un(),o=En(),[c,u]=T.useState(""),[d,h]=T.useState(!1),[m,p]=T.useState(null),[_,b]=T.useState(null),[A,N]=T.useState(!1),[v,w]=T.useState("pickup"),y=v==="delivery"?7:0;t.reduce((j,x)=>j+x.qty,0);const E=e+y;T.useEffect(()=>{(async()=>{var D,O;if(t.length===0)return;let x=(D=t[0])==null?void 0:D.ownerId;if(!x&&((O=t[0])!=null&&O.id))try{const P=await tt(Z($,"menuItems",t[0].id)),Q=P.exists()?P.data():null;x=(Q==null?void 0:Q.ownerId)||null}catch(P){console.error("    :",P)}if(!x){p(null);return}const k=await tt(Z($,"restaurants",x)),S=k.exists()?k.data():null;p({id:x,name:(S==null?void 0:S.name)||"",referredBy:S==null?void 0:S.referredBy,referrerType:S==null?void 0:S.referrerType})})()},[t]);const R=(j,x)=>{b(j),u(x),N(!1),o.success("   ! ")},L=async()=>{var K;if(!r)return;if(t.length===0){a.warning(" ");return}let j=m==null?void 0:m.id;if(!j&&((K=t[0])!=null&&K.id)){const z=await tt(Z($,"menuItems",t[0].id)),U=z.exists()?z.data():null;j=(U==null?void 0:U.ownerId)||null}if(!j){a.error("   .    .");return}h(!0);const x=(m==null?void 0:m.referrerType)==="admin"&&(m==null?void 0:m.referredBy),k=t.reduce((z,U)=>z+U.qty,0),S=Cf+Xo,O=e-S*k,P=Cf*k,Q=x?Xo*k:0,V=P+(x?0:Xo*k);await Zn(ue($,"orders"),{customerId:r.uid,restaurantId:j,restaurantName:(m==null?void 0:m.name)||"",items:t.map(z=>({id:z.id,name:z.name,price:z.price,qty:z.qty,ownerId:z.ownerId??j})),subtotal:e,deliveryFee:y,total:E,status:"pending",deliveryType:v,address:v==="pickup"?"  ":c,location:v==="pickup"?null:_,createdAt:ae(),updatedAt:ae(),paymentMethod:"cod",restaurantEarnings:O,platformFee:P,platformFeePerItem:Cf,adminCommission:Q,adminCommissionPerItem:Xo,appEarnings:V,totalItemsCount:k,referredBy:(m==null?void 0:m.referredBy)||null});try{const z=Z($,"wallets",j);if((await tt(z)).exists())await xe(z,{balance:Dr(O),totalEarnings:Dr(O),updatedAt:ae()});else{const{setDoc:J}=await Sf(async()=>{const{setDoc:ne}=await Promise.resolve().then(()=>_f);return{setDoc:ne}},void 0);await J(z,{balance:O,totalEarnings:O,totalWithdrawn:0,transactions:[],updatedAt:ae()})}console.log(`   ${O}    ${j}`)}catch(z){console.error("    :",z)}if(x&&(m!=null&&m.referredBy)&&Q>0)try{const z=Z($,"wallets",m.referredBy);if((await tt(z)).exists())await xe(z,{balance:Dr(Q),totalEarnings:Dr(Q),updatedAt:ae()});else{const{setDoc:J}=await Sf(async()=>{const{setDoc:ne}=await Promise.resolve().then(()=>_f);return{setDoc:ne}},void 0);await J(z,{balance:Q,totalEarnings:Q,totalWithdrawn:0,transactions:[],updatedAt:ae()})}console.log(`   ${Q}    ${m.referredBy} (${k}   ${Xo} .)`)}catch(z){console.error("    :",z)}try{const z=Z($,"wallets","app_earnings");if((await tt(z)).exists())await xe(z,{balance:Dr(V),totalEarnings:Dr(V),updatedAt:ae()});else{const{setDoc:J}=await Sf(async()=>{const{setDoc:ne}=await Promise.resolve().then(()=>_f);return{setDoc:ne}},void 0);await J(z,{balance:V,totalEarnings:V,totalWithdrawn:0,transactions:[],updatedAt:ae()})}console.log(`   ${V}   `)}catch(z){console.error("    :",z)}n(),h(!1),s("/orders")};return i.jsx(Re,{allow:["customer","admin"],children:i.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[i.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 text-white shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:i.jsx(nc,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold",children:" "}),i.jsx("p",{className:"text-sm text-white/80",children:(m==null?void 0:m.name)||" ..."})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[i.jsx(nc,{className:"w-5 h-5 text-sky-500"}),i.jsx("span",{className:"font-bold text-gray-800",children:" "}),i.jsxs("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full mr-auto",children:[t.length," "]})]}),i.jsx("div",{className:"p-4 space-y-2",children:t.map(j=>i.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center text-sm",children:[j.qty,""]}),i.jsx("span",{className:"text-gray-800 font-medium",children:j.name})]}),i.jsxs("span",{className:"font-bold text-sky-600",children:[(j.price*j.qty).toFixed(2)," ."]})]},j.id))})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[i.jsx(tr,{className:"w-5 h-5 text-sky-500"}),i.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsxs("button",{onClick:()=>w("pickup"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${v==="pickup"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${v==="pickup"?"bg-green-500":"bg-gray-100"}`,children:i.jsx(Ut,{className:`w-6 h-6 ${v==="pickup"?"text-white":"text-gray-500"}`})}),i.jsxs("div",{className:"flex-1 text-right",children:[i.jsx("p",{className:`font-bold ${v==="pickup"?"text-green-700":"text-gray-800"}`,children:"  "}),i.jsx("p",{className:"text-sm text-gray-500",children:" -   "})]}),v==="pickup"&&i.jsx(Nr,{className:"w-6 h-6 text-green-500"})]}),i.jsxs("div",{className:"w-full p-4 rounded-xl border-2 border-gray-200 bg-gray-50 flex items-center gap-4 opacity-60 cursor-not-allowed",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-gray-200",children:i.jsx(tr,{className:"w-6 h-6 text-gray-400"})}),i.jsxs("div",{className:"flex-1 text-right",children:[i.jsx("p",{className:"font-bold text-gray-500",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:" : 7 ."})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:[i.jsx(Hr,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-semibold",children:" "})]})]})]})]}),Af,i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[i.jsx(G5,{className:"w-5 h-5 text-amber-500"}),i.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),i.jsxs("div",{className:"p-4 space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[i.jsx("span",{children:" "}),i.jsxs("span",{className:"font-semibold",children:[e.toFixed(2)," ."]})]}),v==="delivery"&&i.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tr,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]}),i.jsxs("span",{className:"font-semibold",children:[y.toFixed(2)," ."]})]}),v==="pickup"&&i.jsxs("div",{className:"flex items-center justify-between text-green-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ut,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsx("span",{className:"font-semibold",children:""})]}),i.jsx("div",{className:"h-px bg-gray-200 my-2"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-bold text-lg text-gray-800",children:""}),i.jsxs("span",{className:"font-black text-xl text-sky-600",children:[E.toFixed(2)," ."]})]})]})]}),i.jsx("button",{disabled:d||v==="delivery"&&Af,onClick:L,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-3",children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"  ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Nr,{className:"w-6 h-6"}),v==="pickup"?"  (  )":"  (  )"]})}),v==="delivery"&&Af,i.jsx(mj,{isOpen:A,onClose:()=>N(!1),onConfirm:R,initialLocation:_})]})})},q3=()=>{const{user:t}=ze(),e=Xt(),[n,r]=T.useState(null),[s,a]=T.useState([]),[o,c]=T.useState(null);T.useEffect(()=>{if(!t)return;r(null),c(null);const m=at(ue($,"orders"),ft("customerId","==",t.uid),br("createdAt","desc")),p=es(m,_=>{a(_.docs.map(b=>({id:b.id,...b.data()}))),r(null)},async _=>{console.error("TrackOrders onSnapshot error:",_),r("   Composite Index  customerId + createdAt.     .");const b=at(ue($,"orders"),ft("customerId","==",t.uid)),N=(await Ue(b)).docs.map(y=>({id:y.id,...y.data()})),v=at(ue($,"orders"),br("createdAt","desc"),Jg(5));let w=[];try{w=(await Ue(v)).docs.map(E=>{var L,j,x,k;const R=E.data();return{id:E.id,customerId:R.customerId,restaurantId:R.restaurantId,createdAt:((k=(x=(j=(L=R.createdAt)==null?void 0:L.toDate)==null?void 0:j.call(L))==null?void 0:x.toISOString)==null?void 0:k.call(x))??null}})}catch{}c({uid:t.uid,fallbackCount:N.length,sample:w}),a(N)});return()=>p()},[t]);const u=m=>({pending:{text:" ",emoji:"",color:"bg-yellow-500",icon:vr},accepted:{text:" ",emoji:"",color:"bg-blue-500",icon:$t},preparing:{text:" ",emoji:"",color:"bg-orange-500",icon:cx},ready:{text:" ",emoji:"",color:"bg-purple-500",icon:er},out_for_delivery:{text:" ",emoji:"",color:"bg-sky-500",icon:tr},delivered:{text:" ",emoji:"",color:"bg-green-500",icon:$t},cancelled:{text:"",emoji:"",color:"bg-red-500",icon:Hr}})[m]||{text:m,emoji:"",color:"bg-gray-500",icon:er},d=m=>m.courierId&&m.status==="out_for_delivery",h=m=>{const p=["pending","accepted","preparing","ready"];return!m.courierId&&m.restaurantId&&p.includes(m.status)};return i.jsxs("div",{className:"space-y-3",children:[i.jsx("h1",{className:"text-xl font-bold",children:""}),n&&i.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[n,o&&i.jsxs("div",{className:"mt-1",children:[i.jsxs("div",{children:["UID: ",i.jsx("b",{children:o.uid})]}),i.jsxs("div",{children:["  : ",i.jsx("b",{children:o.fallbackCount})]}),Array.isArray(o.sample)&&o.sample.length>0&&i.jsxs("div",{className:"mt-1",children:[i.jsx("div",{className:"font-semibold",children:" ( 5):"}),o.sample.map(m=>i.jsxs("div",{className:"truncate",children:["#",m.id,"  customerId: ",String(m.customerId),"  restaurantId: ",String(m.restaurantId),"  createdAt: ",m.createdAt||""]},m.id))]})]})]}),s.map(m=>{var p,_,b,A,N,v,w;return i.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-shadow",children:[i.jsxs("div",{className:`${u(m.status).color} px-4 py-3 flex items-center justify-between`,children:[i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx("span",{className:"text-xl",children:u(m.status).emoji}),i.jsx("span",{className:"font-bold",children:u(m.status).text})]}),i.jsxs("div",{className:"text-white/80 text-sm font-medium",children:["#",m.id.slice(-6)]})]}),i.jsxs("div",{className:"p-4",children:[m.restaurantName&&i.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold mb-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:String(m.restaurantName)})]}),i.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 rounded-xl p-3 mb-3",children:(p=m.items)==null?void 0:p.map(y=>`${y.name}${y.qty}`).join("  ")}),i.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:m.deliveryType==="pickup"?i.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-medium bg-green-50 rounded-xl p-3",children:[i.jsx(bn,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}):i.jsxs("div",{className:"space-y-1 bg-gray-50 rounded-xl p-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:" :"}),i.jsxs("span",{children:[((b=(_=m.subtotal)==null?void 0:_.toFixed)==null?void 0:b.call(_,2))||""," ."]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:" :"}),m.deliveryFee!==void 0&&m.deliveryFee>0?i.jsxs("span",{className:"font-medium",children:[(N=(A=m.deliveryFee)==null?void 0:A.toFixed)==null?void 0:N.call(A,2)," ."]}):i.jsx("span",{className:"text-amber-600",children:"  "})]})]})}),i.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[i.jsxs("div",{className:"font-bold text-lg text-primary",children:[": ",(w=(v=m.total)==null?void 0:v.toFixed)==null?void 0:w.call(v,2)," ."]}),d(m)&&i.jsxs("button",{onClick:()=>e(`/chat?orderId=${m.id}`),className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-primary to-accent 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200 animate-pulse`,children:[i.jsx(Eh,{className:"w-5 h-5"}),i.jsx("span",{children:"   "})]}),h(m)&&i.jsxs("button",{onClick:()=>e(`/chat?orderId=${m.id}`),className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200`,children:[i.jsx(Ut,{className:"w-5 h-5"}),i.jsx("span",{children:"   "})]})]})]})]},m.id)}),s.length===0&&!n&&i.jsx("div",{className:"text-gray-600",children:"    ."})]})},H3=()=>{const{user:t,role:e}=ze(),n=Un(),r=En(),[s,a]=T.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[o,c]=T.useState(null),[u,d]=T.useState(!1),[h,m]=T.useState(!0),[p,_]=T.useState(!1);T.useEffect(()=>{if(!t)return;(async()=>{const v=await tt(Z($,"users",t.uid));if(v.exists()){const w=v.data();a({name:w.name||"",phone:w.phone||t.phoneNumber||"",city:w.city||"",address:w.address||"",restaurantName:w.restaurantName||""}),w.savedLocation&&c(w.savedLocation)}m(!1)})()},[t]);const b=async N=>{if(N.preventDefault(),!!t){_(!0);try{await xe(Z($,"users",t.uid),{name:s.name,phone:s.phone,city:s.city,address:s.address,savedLocation:o||null,...e==="owner"&&{restaurantName:s.restaurantName}}),n.success("   ! ")}catch{n.error("   ")}finally{_(!1)}}};if(h)return i.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[i.jsx(pn,{className:"w-6 h-6 animate-spin ml-2"}),"  ..."]});const A=()=>e==="owner"?"  ":e==="courier"?"  ":e==="admin"?"  ":" ";return i.jsxs("div",{className:"max-w-md mx-auto py-8 px-4",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center",children:i.jsx(An,{className:"w-6 h-6 text-sky-600"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-gray-800",children:A()}),i.jsx("p",{className:"text-sm text-gray-500",children:(t==null?void 0:t.email)||(t==null?void 0:t.phoneNumber)})]})]}),i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[i.jsx(An,{className:"w-4 h-4 inline ml-1"})," "]}),i.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:s.name,onChange:N=>a({...s,name:N.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[i.jsx(px,{className:"w-4 h-4 inline ml-1"})," "]}),i.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:s.phone,onChange:N=>a({...s,phone:N.target.value}),dir:"ltr"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[i.jsx(nj,{className:"w-4 h-4 inline ml-1"}),""]}),i.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:": ",value:s.city,onChange:N=>a({...s,city:N.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[i.jsx(bn,{className:"w-4 h-4 inline ml-1"})," "]}),i.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"     ...",value:s.address,onChange:N=>a({...s,address:N.target.value})})]}),(e==="customer"||e==="admin")&&i.jsxs("div",{className:"border-t pt-4 mt-4",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[i.jsx(Li,{className:"w-4 h-4 inline ml-1"}),"  "]}),o?i.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center flex-shrink-0",children:i.jsx(bn,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-green-700 mb-1",children:"  "}),i.jsx("p",{className:"text-sm text-gray-600",children:o.address}),i.jsxs("p",{className:"text-xs text-gray-400 mt-1 font-mono",children:[o.lat.toFixed(5),", ",o.lng.toFixed(5)]})]})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsx("button",{type:"button",onClick:()=>d(!0),className:"flex-1 py-2 px-3 rounded-lg border border-sky-200 text-sky-600 text-sm font-medium hover:bg-sky-50 transition",children:" "}),i.jsx("button",{type:"button",onClick:()=>{c(null),r.info("   ")},className:"py-2 px-3 rounded-lg border border-red-200 text-red-500 hover:bg-red-50 transition",children:i.jsx(sn,{className:"w-4 h-4"})})]})]}):i.jsxs("button",{type:"button",onClick:()=>d(!0),className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-100 to-sky-50 border-2 border-dashed border-sky-300 text-sky-600 font-semibold hover:border-sky-400 transition flex items-center justify-center gap-3",children:[i.jsx(Li,{className:"w-5 h-5"}),i.jsx("span",{children:"   "})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"         "})]}),e==="owner"&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[i.jsx(Ad,{className:"w-4 h-4 inline ml-1"})," "]}),i.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:s.restaurantName,onChange:N=>a({...s,restaurantName:N.target.value})})]}),i.jsx("button",{type:"submit",disabled:p,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:p?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(lj,{className:"w-5 h-5"})," "]})})]}),i.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[i.jsx("p",{children:"      "}),(e==="customer"||e==="admin")&&i.jsx("p",{className:"mt-1",children:"       "})]})]}),i.jsx(mj,{isOpen:u,onClose:()=>d(!1),onConfirm:(N,v)=>{c({lat:N.lat,lng:N.lng,address:v}),d(!1),r.success("  !    ")},initialLocation:o?{lat:o.lat,lng:o.lng}:null})]})},W3=()=>{const t=[{to:"/owner/packages",title:"  ",desc:"      .",icon:i.jsx(In,{className:"w-8 h-8 text-amber-500"}),color:"from-amber-50 via-yellow-50 to-orange-50",featured:!0},{to:"/owner/promotion",title:" ",desc:"   ()      -  !",icon:i.jsx(_i,{className:"w-8 h-8 text-purple-500"}),color:"from-purple-50 to-pink-50"},{to:"/owner/menu",title:" ",desc:"     .",icon:i.jsx(g3,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:" ",desc:"     .",icon:i.jsx(Cd,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"  ",desc:"     .",icon:i.jsx(cj,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>i.jsxs(Pe,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col relative overflow-hidden ${e.featured?"ring-2 ring-amber-300 sm:col-span-2":""}`,children:[e.featured&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 py-1.5 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-white text-sm font-bold",children:[i.jsx(Vn,{className:"w-4 h-4"}),i.jsx("span",{children:" "}),i.jsx(Vn,{className:"w-4 h-4"})]})}),i.jsx("div",{className:"h-8"})]}),i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,i.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),i.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},K3=({kind:t,message:e,onClose:n})=>{const r=t==="success"?"bg-green-600":t==="error"?"bg-rose-600":t==="warning"?"bg-amber-500":"bg-slate-800";return T.useEffect(()=>{const s=setTimeout(n,2500);return()=>clearTimeout(s)},[n]),i.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${r}`,children:e})},Fv=()=>({name:"",desc:"",price:0,available:!0,file:null});async function G3(t,e=900,n=.8){try{const r=await createImageBitmap(t),s=Math.min(1,e/r.width),a=Math.round(r.width*s),o=Math.round(r.height*s),c=document.createElement("canvas");c.width=a,c.height=o,c.getContext("2d").drawImage(r,0,0,a,o);const d=t.type.includes("png")?"image/png":"image/jpeg";return await new Promise(m=>c.toBlob(p=>m(p),d,n))}catch{return t}}const Q3=()=>{const{user:t}=ze(),e=Un(),[n,r]=T.useState([]),[s,a]=T.useState(!0),[o,c]=T.useState(Fv()),[u,d]=T.useState(!1),[h,m]=T.useState(null),p=(y,E)=>m({kind:y,message:E}),_=jh(mn),b=T.useRef(null),A=async()=>{if(!t)return;a(!0);const y=at(ue($,"menuItems"),ft("ownerId","==",t.uid)),E=await Ue(y);r(E.docs.map(R=>({id:R.id,...R.data()}))),a(!1)};T.useEffect(()=>{A()},[t]);const N=async y=>{if(y.preventDefault(),!t){p("warning","    ");return}const E=Number(o.price||0);if(!o.name.trim()){p("warning","   ");return}if(!Number.isFinite(E)||E<=0){p("warning","   ");return}d(!0);const R="temp_"+Date.now(),L=o.file?URL.createObjectURL(o.file):void 0,j={_tempId:R,_optimistic:!0,_progress:o.file?1:100,name:o.name,desc:o.desc||"",price:E,imageUrl:L,available:o.available??!0,ownerId:t.uid};r(x=>[j,...x]);try{let x;if(o.file){const D=await G3(o.file),O=o.file.name.replace(/\s+/g,"_").slice(-60),P=`menuImages/${t.uid}_${Date.now()}_${O}`,Q=Za(_,P),V=lx(Q,D,{contentType:o.file.type||"image/jpeg"});await new Promise((K,z)=>{V.on("state_changed",U=>{const J=Math.round(U.bytesTransferred/U.totalBytes*100);r(ne=>ne.map(_e=>_e._tempId===R?{..._e,_progress:J}:_e))},z,async()=>{const U=await Ja(V.snapshot.ref);x=`${U}${U.includes("?")?"&":"?"}v=${Date.now()}`,K()})})}const k={name:j.name,desc:j.desc,price:E,imageUrl:x||"",available:j.available,ownerId:t.uid,...j.categoryId?{categoryId:j.categoryId}:{}},S=await Zn(ue($,"menuItems"),k);r(D=>D.map(O=>O._tempId===R?{...O,id:S.id,imageUrl:x||O.imageUrl,_optimistic:!1,_progress:100}:O)),p("success","    ")}catch(x){r(k=>k.filter(S=>S._tempId!==R)),p("error",`   : ${(x==null?void 0:x.message)||x}`)}finally{d(!1),c(Fv()),b.current&&(b.current.value=""),L&&URL.revokeObjectURL(L)}},v=async(y,E)=>{if(y){r(R=>R.map(L=>L.id===y?{...L,available:!E}:L));try{await xe(Z($,"menuItems",y),{available:!E}),p("success","  ")}catch{r(R=>R.map(L=>L.id===y?{...L,available:!!E}:L)),p("error","  .  .")}}},w=async y=>{if(!y||!await e.confirm("       ",{dangerous:!0,title:" "}))return;const R=n;r(L=>L.filter(j=>j.id!==y));try{await Xn(Z($,"menuItems",y)),p("success"," ")}catch{r(R),p("error","  .  .")}};return s?i.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[i.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),i.jsx("div",{className:"space-y-3",children:[1,2,3].map(y=>i.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},y))})]}):i.jsxs(i.Fragment,{children:[h&&i.jsx(K3,{kind:h.kind,message:h.message,onClose:()=>m(null)}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[i.jsxs("form",{onSubmit:N,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[i.jsx("h2",{className:"text-lg font-bold",children:" "}),i.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:o.name,onChange:y=>c({...o,name:y.target.value})}),i.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:o.desc,onChange:y=>c({...o,desc:y.target.value})}),i.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(o.price)?o.price:0,onChange:y=>c({...o,price:Number(y.target.value)})}),i.jsx("input",{ref:b,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:y=>{var E;return c({...o,file:((E=y.target.files)==null?void 0:E[0])||null})}}),i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:o.available,onChange:y=>c({...o,available:y.target.checked})}),""]}),i.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:u,children:u?" ":""})]}),i.jsxs("div",{className:"space-y-3",children:[n.map(y=>{var E,R;return i.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:y.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:L=>{L.currentTarget.style.display="none"}}),y._optimistic&&i.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:i.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:i.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${y._progress||1}%`}})})})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-bold",children:y.name}),y.desc&&i.jsx("div",{className:"text-sm text-gray-600",children:y.desc}),i.jsxs("div",{className:"font-semibold mt-1",children:[(R=(E=y.price)==null?void 0:E.toFixed)==null?void 0:R.call(E,2)," ."]}),y._optimistic&&i.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" "})]}),i.jsx("button",{onClick:()=>v(y.id,y.available),disabled:!!y._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:y.available?"":""}),i.jsx("button",{onClick:()=>w(y.id),disabled:!!y._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:""})]},y.id||y._tempId)}),n.length===0&&i.jsx("div",{className:"text-gray-600",children:"   ."})]})]})]})},Uv=t=>({pending:"  ",accepted:"  ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "})[t]||t,X3=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},Y3=()=>{const{user:t}=ze(),e=Xt(),[n,r]=T.useState([]),[s,a]=T.useState(null),[o,c]=T.useState({}),u=T.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);T.useEffect(()=>{if(!u)return;a(null);const h=es(ue($,"orders"),m=>{const _=m.docs.map(b=>({id:b.id,...b.data()})).filter(b=>{var v,w;const A=b.restaurantId===u,N=((w=(v=b==null?void 0:b.items)==null?void 0:v[0])==null?void 0:w.ownerId)===u;return A||N});_.sort((b,A)=>{var w,y,E,R;const N=((y=(w=b.createdAt)==null?void 0:w.toMillis)==null?void 0:y.call(w))??0;return(((R=(E=A.createdAt)==null?void 0:E.toMillis)==null?void 0:R.call(E))??0)-N}),r(_),a(null)},m=>{console.error("Firestore error:",m),a("    .")});return()=>h()},[u]);const d=async(h,m,p)=>{const _={status:m,updatedAt:ae()};if(m==="accepted"&&(p==null?void 0:p.deliveryType)==="delivery"){const b=o[h]||0;_.deliveryFee=b,_.total=(p.subtotal||0)+b}await xe(Z($,"orders",h),_)};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"  "}),s&&i.jsx("div",{className:"text-red-500 text-sm mb-2",children:s}),n.map(h=>{var m,p,_,b,A;return i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[i.jsxs("div",{className:"font-bold text-lg",children:[" #",h.id.slice(-6),i.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(m=h.items)==null?void 0:m.map(N=>`${N.name}${N.qty}`).join("  ")})]}),i.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(_=(p=h.total)==null?void 0:p.toFixed)==null?void 0:_.call(p,2)," ."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-semibold",children:":"}),i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${X3(h.status)}`,children:Uv(h.status||"pending")})]}),i.jsxs("div",{className:"text-sm text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:":"})," ",h.address]}),h.location&&i.jsxs("div",{className:"mt-3",children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"  :"}),i.jsx("iframe",{title:`map-${h.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${h.location.lat},${h.location.lng}&hl=ar&z=15&output=embed`})]}),h.status==="pending"&&h.deliveryType==="delivery"&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[i.jsx("label",{className:"block text-sm font-bold text-amber-800 mb-2",children:"     :"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:": 10",value:o[h.id]||"",onChange:N=>c(v=>({...v,[h.id]:parseFloat(N.target.value)||0})),className:"flex-1 px-4 py-3 border-2 border-amber-300 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-lg font-bold text-center"}),i.jsx("span",{className:"text-amber-700 font-bold",children:"."})]}),i.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"     "})]}),h.deliveryFee!==void 0&&h.deliveryFee>0&&i.jsxs("div",{className:"text-sm text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:" :"})," ",(A=(b=h.deliveryFee)==null?void 0:b.toFixed)==null?void 0:A.call(b,2)," ."]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:[!h.courierId&&["pending","accepted","preparing","ready"].includes(h.status)&&i.jsxs("button",{onClick:()=>e(`/chat?orderId=${h.id}`),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gradient-to-r from-orange-500 to-amber-500 text-white hover:shadow-lg transition flex items-center gap-2",children:[i.jsx(Eh,{className:"w-4 h-4"}),"  "]}),["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(N=>{const v=N==="accepted"&&h.status==="pending"&&h.deliveryType==="delivery",w=o[h.id]!==void 0&&o[h.id]>=0,y=v&&!w;return i.jsx("button",{onClick:()=>d(h.id,N,h),disabled:y,className:`px-4 py-2 rounded-xl text-sm font-semibold transition ${y?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:y?"   ":"",children:Uv(N)},N)})]})]},h.id)}),n.length===0&&!s&&i.jsx("div",{className:"text-gray-400 text-center text-lg",children:"    ."})]})},J3=()=>{const{user:t}=ze(),e=En(),[n,r]=T.useState({name:"",phone:"",city:"",location:"",logoUrl:"",allowPickup:!1,commercialLicenseUrl:"",licenseStatus:void 0,licenseNotes:""}),[s,a]=T.useState(null),[o,c]=T.useState(""),[u,d]=T.useState(null),[h,m]=T.useState(!0),[p,_]=T.useState(!1),b=T.useMemo(()=>!p&&!!t,[p,t]);T.useEffect(()=>{t&&(async()=>{try{const E=await tt(Z($,"restaurants",t.uid));if(E.exists()){const R=E.data();r({name:R.name??"",phone:R.phone??"",city:R.city??"",location:R.location??"",logoUrl:R.logoUrl??"",allowPickup:R.allowPickup??!1,commercialLicenseUrl:R.commercialLicenseUrl??"",licenseStatus:R.licenseStatus,licenseNotes:R.licenseNotes??""})}}catch{e.error("   ")}finally{m(!1)}})()},[t,e]),T.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]);const A=E=>{const{name:R,value:L}=E.target;r(j=>({...j,[R]:L}))},N=E=>{var L;const R=((L=E.target.files)==null?void 0:L[0])||null;if(a(R),R){const j=URL.createObjectURL(R);c(j)}else c("")},v=async()=>{if(!t||!s)return;if(!/^image\//.test(s.type)){e.warning("   ");return}const R=3*1024*1024;if(s.size>R){e.warning("        3MB");return}const L=s.name.replace(/\s+/g,"_"),j=`restaurants/${t.uid}/logo_${Date.now()}_${L}`,x=Za(rp,j),k={contentType:s.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await np(x,s,k);const S=await Ja(x);return`${S}${S.includes("?")?"&":"?"}v=${Date.now()}`},w=async(E,R)=>{if(!t||!E)return;if(!/^(image\/|application\/pdf)/.test(E.type)){e.warning("      PDF");return}const j=5*1024*1024;if(E.size>j){e.warning("        5MB");return}const x=E.name.replace(/\s+/g,"_"),k=`restaurants/${t.uid}/licenses/${R}_${Date.now()}_${x}`,S=Za(rp,k),D={contentType:E.type,cacheControl:"public,max-age=31536000,immutable"};return await np(S,E,D),await Ja(S)},y=async E=>{if(E.preventDefault(),!t){e.warning("    ");return}if(!n.name.trim()){e.warning("  ");return}_(!0);try{let R=n.logoUrl,L=n.commercialLicenseUrl,j=n.licenseStatus;if(s){e.info("    ");const x=await v();x&&(R=x)}if(u){e.info("     ");const x=await w(u,"commercial");x&&(L=x,j="pending")}await fn(Z($,"restaurants",t.uid),{...n,logoUrl:R,commercialLicenseUrl:L,licenseStatus:j},{merge:!0}),o&&URL.revokeObjectURL(o),c(""),a(null),d(null),e.success("    ",{title:" "})}catch(R){e.error(` : ${(R==null?void 0:R.message)||"  "}`)}finally{_(!1)}};return h?i.jsx("div",{className:"p-6 text-center",children:" "}):i.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[i.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"  "}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block font-semibold",children:" "}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:o||n.logoUrl?i.jsx("img",{src:o||n.logoUrl,className:"w-full h-full object-cover",onError:E=>E.currentTarget.style.display="none",alt:"logo"}):null}),i.jsx("input",{type:"file",accept:"image/*",onChange:N})]}),s&&i.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",i.jsx("span",{className:"font-semibold",children:s.name})]})]}),i.jsx("input",{name:"name",placeholder:" ",value:n.name,onChange:A,className:"w-full border p-3 rounded-xl"}),i.jsx("input",{name:"phone",placeholder:" ",value:n.phone,onChange:A,className:"w-full border p-3 rounded-xl"}),i.jsxs("div",{className:"relative",children:[i.jsx(bn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400 pointer-events-none"}),i.jsxs("select",{name:"city",value:n.city,onChange:E=>r(R=>({...R,city:E.target.value})),className:"w-full border p-3 pr-10 rounded-xl bg-white appearance-none cursor-pointer focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[i.jsx("option",{value:"",children:" "}),gx.map(E=>i.jsx("option",{value:E,children:E},E))]})]}),i.jsx("input",{name:"location",placeholder:"",value:n.location,onChange:A,className:"w-full border p-3 rounded-xl"}),i.jsxs("div",{className:"border-t pt-4 mt-4",children:[i.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[i.jsx(Ut,{className:"w-5 h-5 text-green-500"})," "]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:i.jsx(Ut,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-800",children:"  "}),i.jsx("p",{className:"text-sm text-gray-500",children:"      "})]})]}),i.jsx("button",{type:"button",onClick:()=>r(E=>({...E,allowPickup:!E.allowPickup})),className:`relative w-14 h-8 rounded-full transition-colors ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:i.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.allowPickup?"right-1":"left-1"}`})})]}),n.allowPickup&&i.jsx("p",{className:"mt-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:"         (  )"})]}),i.jsxs("div",{className:"border-t pt-4 mt-4",children:[i.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[i.jsx(dx,{className:"w-5 h-5 text-sky-500"})," "]}),n.licenseStatus&&i.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 ${n.licenseStatus==="approved"?"bg-green-50 text-green-700":n.licenseStatus==="rejected"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[n.licenseStatus==="approved"&&i.jsx($t,{className:"w-5 h-5"}),n.licenseStatus==="rejected"&&i.jsx(pi,{className:"w-5 h-5"}),n.licenseStatus==="pending"&&i.jsx(vr,{className:"w-5 h-5"}),i.jsxs("span",{className:"font-semibold",children:[n.licenseStatus==="approved"&&"   ",n.licenseStatus==="rejected"&&" ",n.licenseStatus==="pending"&&"  ..."]})]}),n.licenseNotes&&n.licenseStatus==="rejected"&&i.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl text-red-600 text-sm",children:[i.jsx("strong",{children:":"})," ",n.licenseNotes]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[i.jsx($6,{className:"w-4 h-4 text-orange-500"})," "]}),i.jsxs("div",{className:"flex items-center gap-3",children:[n.commercialLicenseUrl&&i.jsx("a",{href:n.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:text-sky-700 text-sm underline",children:"  "}),i.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:E=>{var R;return d(((R=E.target.files)==null?void 0:R[0])||null)},className:"text-sm"})]}),u&&i.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",i.jsx("span",{className:"font-semibold",children:u.name})]})]})]}),i.jsx("button",{type:"submit",disabled:!b,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:p?" ":""})]})]})},Z3=()=>{const{user:t}=ze(),e=Un(),n=En(),[r,s]=T.useState([]),[a,o]=T.useState(!0);T.useEffect(()=>{t&&(async()=>{const N=at(ue($,"hiringRequests"),ft("restaurantId","==",t.uid)),v=await Ue(N);s(v.docs.map(w=>({id:w.id,...w.data()}))),o(!1)})()},[t]);const c=async(N,v)=>{await xe(Z($,"hiringRequests",N),{status:v}),s(w=>w.map(y=>y.id===N?{...y,status:v}:y)),n.success(v==="accepted"?"   ":"  ")},u=async N=>{await e.confirm(`    "${N.courierName}"`,{title:" ",confirmText:" ",cancelText:"",dangerous:!0})&&(await xe(Z($,"hiringRequests",N.id),{status:"terminated"}),s(w=>w.map(y=>y.id===N.id?{...y,status:"terminated"}:y)),n.success("  "))},d=async N=>{await e.confirm(`    "${N.courierName}" `,{title:" ",confirmText:" ",cancelText:"",dangerous:!0})&&(await Xn(Z($,"hiringRequests",N.id)),s(w=>w.filter(y=>y.id!==N.id)),n.success("  "))},h=async N=>{await xe(Z($,"hiringRequests",N.id),{status:"accepted"}),s(v=>v.map(w=>w.id===N.id?{...w,status:"accepted"}:w)),n.success("    ")},m=N=>{switch(N){case"pending":return{text:" ",color:"bg-yellow-100 text-yellow-700",icon:vr};case"accepted":return{text:" ",color:"bg-green-100 text-green-700",icon:$t};case"rejected":return{text:"",color:"bg-red-100 text-red-700",icon:Hr};case"terminated":return{text:"",color:"bg-gray-100 text-gray-700",icon:Ov};default:return{text:N,color:"bg-gray-100 text-gray-700",icon:vr}}};if(a)return i.jsx("div",{className:"text-center py-10",children:"  ..."});const p=r.filter(N=>N.status==="accepted"),_=r.filter(N=>N.status==="pending"),b=r.filter(N=>N.status==="terminated"),A=r.filter(N=>N.status==="rejected");return i.jsxs("div",{className:"py-6 space-y-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-6",children:"  "}),r.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-500 text-lg",children:"   "}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"     "})]}):i.jsxs(i.Fragment,{children:[p.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-green-600 mb-3 flex items-center gap-2",children:[i.jsx(Tf,{className:"w-5 h-5"}),"  (",p.length,")"]}),i.jsx("div",{className:"space-y-3",children:p.map(N=>{const v=m(N.status);return i.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-green-500",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-gray-800",children:N.courierName}),i.jsxs("div",{className:`text-xs px-2 py-1 rounded-full inline-flex items-center gap-1 ${v.color}`,children:[i.jsx(v.icon,{className:"w-3 h-3"}),v.text]})]})]}),i.jsxs("button",{onClick:()=>u(N),className:`flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-xl 
                                     hover:bg-red-100 transition-all font-medium`,children:[i.jsx(c3,{className:"w-4 h-4"}),""]})]})},N.id)})})]}),_.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-yellow-600 mb-3 flex items-center gap-2",children:[i.jsx(vr,{className:"w-5 h-5"}),"  (",_.length,")"]}),i.jsx("div",{className:"space-y-3",children:_.map(N=>i.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-yellow-500",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-gray-800",children:N.courierName}),i.jsx("div",{className:"text-xs text-yellow-600",children:"  "})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>c(N.id,"accepted"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-green-500 text-white hover:bg-green-600 transition-all font-medium",children:[i.jsx(Tf,{className:"w-4 h-4"}),""]}),i.jsxs("button",{onClick:()=>c(N.id,"rejected"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-red-500 text-white hover:bg-red-600 transition-all font-medium",children:[i.jsx(Hr,{className:"w-4 h-4"}),""]})]})]})},N.id))})]}),b.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-gray-500 mb-3 flex items-center gap-2",children:[i.jsx(Ov,{className:"w-5 h-5"})," (",b.length,")"]}),i.jsx("div",{className:"space-y-3",children:b.map(N=>i.jsx("div",{className:"bg-gray-50 rounded-2xl shadow p-4 border-r-4 border-gray-400 opacity-75",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-gray-600",children:N.courierName}),i.jsx("div",{className:"text-xs text-gray-500",children:""})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>h(N),className:`flex items-center gap-1 px-3 py-2 bg-green-100 text-green-600 rounded-xl 
                                     hover:bg-green-200 transition-all text-sm font-medium`,children:[i.jsx(Tf,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>d(N),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                     hover:bg-red-200 transition-all text-sm font-medium`,children:[i.jsx(sn,{className:"w-4 h-4"}),""]})]})]})},N.id))})]}),A.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-red-500 mb-3 flex items-center gap-2",children:[i.jsx(Hr,{className:"w-5 h-5"})," (",A.length,")"]}),i.jsx("div",{className:"space-y-3",children:A.map(N=>i.jsx("div",{className:"bg-red-50 rounded-2xl shadow p-4 border-r-4 border-red-400 opacity-75",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-gray-600",children:N.courierName}),i.jsx("div",{className:"text-xs text-red-500",children:""})]})]}),i.jsxs("button",{onClick:()=>d(N),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                   hover:bg-red-200 transition-all text-sm font-medium`,children:[i.jsx(sn,{className:"w-4 h-4"}),""]})]})},N.id))})]})]})]})},eD=()=>{const{user:t}=ze(),e=En(),n=Un(),[r,s]=T.useState("free"),[a,o]=T.useState(!0),[c,u]=T.useState(!1),[d,h]=T.useState(!1);T.useEffect(()=>{(async()=>{if(t)try{const b=await tt(Z($,"restaurants",t.uid));if(b.exists()){const A=b.data();s((A==null?void 0:A.packageType)||"free")}}catch(b){console.error("   :",b)}finally{o(!1)}})()},[t]);const m=async()=>{if(!t)return;if(r==="free"){e.info("     ");return}if(await n.confirm("         .",{title:"   ",confirmText:"  ",cancelText:""})){h(!0);try{await xe(Z($,"restaurants",t.uid),{packageType:"free",packageRequest:null,updatedAt:ae()}),s("free"),e.success("   ")}catch(b){console.error(":",b),e.error("    ")}finally{h(!1)}}},p=async()=>{if(!(!t||!await n.confirm("        .   ",{title:"    ",confirmText:"  ",cancelText:""}))){u(!0);try{await xe(Z($,"restaurants",t.uid),{packageRequest:"premium",packageRequestedAt:ae(),updatedAt:ae()}),e.success("   !    ")}catch(b){console.error("   :",b),e.error("    ")}finally{u(!1)}}};return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:" ..."})]})}):i.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-amber-100 to-yellow-100 px-5 py-2.5 rounded-full mb-4 shadow-sm",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"text-amber-700 font-bold text-lg",children:"  "})]}),i.jsx("h1",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-3",children:"   "}),i.jsx("p",{className:"text-gray-600 max-w-lg mx-auto",children:"              "})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${r==="free"?"ring-4 ring-green-400 shadow-2xl":"shadow-lg hover:shadow-xl"}`,children:[r==="free"&&i.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[i.jsx(Nr,{className:"w-4 h-4"})," "]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-6 md:p-8 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg",children:i.jsx(kf,{className:"w-8 h-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-gray-900",children:" "}),i.jsx("p",{className:"text-green-600 font-semibold",children:"   "})]})]}),i.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center",children:[i.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[i.jsx("span",{className:"text-5xl font-black text-gray-900",children:"0"}),i.jsx("span",{className:"text-xl text-gray-600",children:"."})]}),i.jsx("p",{className:"text-green-600 font-medium mt-1",children:" "})]}),i.jsxs("div",{className:"space-y-4 flex-1",children:[i.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(Y6,{className:"w-5 h-5 text-amber-500"})," :"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(ii,{icon:i.jsx(sj,{className:"w-5 h-5"}),title:"  ",desc:"     ",included:!0}),i.jsx(ii,{icon:i.jsx(nc,{className:"w-5 h-5"}),title:" ",desc:"    ",included:!0}),i.jsx(ii,{icon:i.jsx(dx,{className:"w-5 h-5"}),title:"  ",desc:"    ",included:!0})]})]}),i.jsx("div",{className:"mt-6",children:r==="free"?i.jsxs("div",{className:"bg-green-100 text-green-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[i.jsx(Nr,{className:"w-5 h-5"}),"    "]}):i.jsx("button",{onClick:m,disabled:d,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(kf,{className:"w-6 h-6"}),"  ",i.jsx(sp,{className:"w-5 h-5"})]})})})]})]}),i.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${r==="premium"?"ring-4 ring-amber-400 shadow-2xl":"shadow-lg hover:shadow-xl hover:scale-[1.01]"}`,children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-amber-500 py-2 text-center z-10",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-white font-bold",children:[i.jsx(In,{className:"w-5 h-5"}),i.jsx("span",{children:" "}),i.jsx(In,{className:"w-5 h-5"})]})}),r==="premium"&&i.jsxs("div",{className:"absolute top-12 right-4 bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[i.jsx(In,{className:"w-4 h-4"})," "]}),i.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-6 md:p-8 pt-14 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 via-yellow-400 to-orange-400 rounded-2xl flex items-center justify-center shadow-lg relative",children:[i.jsx(In,{className:"w-8 h-8 text-white"}),i.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow",children:i.jsx(Vn,{className:"w-4 h-4 text-amber-500"})})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-gray-900",children:" "}),i.jsx("p",{className:"text-amber-600 font-semibold",children:"  "})]})]}),i.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-400/10 via-yellow-400/10 to-orange-400/10"}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[i.jsx("span",{className:"text-5xl font-black bg-gradient-to-r from-amber-600 to-orange-500 bg-clip-text text-transparent",children:"99"}),i.jsx("span",{className:"text-xl text-gray-600",children:"."})]}),i.jsx("p",{className:"text-amber-600 font-medium mt-1",children:""})]})]}),i.jsxs("div",{className:"space-y-4 flex-1",children:[i.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(In,{className:"w-5 h-5 text-amber-500"}),"     :"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(ii,{icon:i.jsx(r3,{className:"w-5 h-5"}),title:"   ",desc:"      ",included:!0,premium:!0}),i.jsx(ii,{icon:i.jsx($u,{className:"w-5 h-5"}),title:"  ",desc:"    ",included:!0,premium:!0}),i.jsx(ii,{icon:i.jsx(Ad,{className:"w-5 h-5"}),title:"   ",desc:"     ",included:!0,premium:!0}),i.jsx(ii,{icon:i.jsx(I5,{className:"w-5 h-5"}),title:" ",desc:"     ",included:!0,premium:!0})]})]}),i.jsx("div",{className:"mt-6",children:r==="premium"?i.jsxs("div",{className:"bg-amber-100 text-amber-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[i.jsx(In,{className:"w-5 h-5"}),"    "]}):i.jsxs("button",{onClick:p,disabled:c,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 text-white font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),c?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(In,{className:"w-6 h-6"}),"   ",i.jsx(sp,{className:"w-5 h-5"})]})]})})]})]})]}),i.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 px-6 py-4",children:i.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[i.jsx(Vn,{className:"w-5 h-5 text-amber-400"}),"   "]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),i.jsx("th",{className:"px-6 py-4 text-center font-bold text-green-600",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(kf,{className:"w-5 h-5"}),""]})}),i.jsx("th",{className:"px-6 py-4 text-center font-bold text-amber-600",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(In,{className:"w-5 h-5"}),""]})})]})}),i.jsxs("tbody",{className:"divide-y divide-gray-100",children:[i.jsx(ai,{label:"  ",free:!0,premium:!0}),i.jsx(ai,{label:" ",free:!0,premium:!0}),i.jsx(ai,{label:"  ",free:!0,premium:!0}),i.jsx(ai,{label:"   ",premium:!0}),i.jsx(ai,{label:"  ",premium:!0}),i.jsx(ai,{label:"   ",premium:!0}),i.jsx(ai,{label:" ",premium:!0})]})]})})]}),i.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 text-center",children:i.jsxs("p",{className:"text-gray-600",children:[i.jsx("span",{className:"font-bold text-sky-600",children:" :"})," ","       .     ."]})})]})},ii=({icon:t,title:e,desc:n,included:r,premium:s})=>i.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-xl transition ${r?s?"bg-gradient-to-r from-amber-100/50 to-yellow-100/50":"bg-white/50":"opacity-50"}`,children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${r?s?"bg-gradient-to-br from-amber-400 to-orange-400 text-white":"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:t}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:`font-bold ${r?"text-gray-800":"text-gray-400"}`,children:e}),s&&i.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-400 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:""})]}),i.jsx("p",{className:`text-sm ${r?"text-gray-500":"text-gray-400"}`,children:n})]}),r&&i.jsx(Nr,{className:`w-5 h-5 flex-shrink-0 ${s?"text-amber-500":"text-green-500"}`})]}),ai=({label:t,free:e,premium:n})=>i.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[i.jsx("td",{className:"px-6 py-4 text-gray-700 font-medium",children:t}),i.jsx("td",{className:"px-6 py-4 text-center",children:e?i.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-green-100 rounded-full",children:i.jsx(Nr,{className:"w-5 h-5 text-green-600"})}):i.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:i.jsx("span",{className:"text-gray-400",children:""})})}),i.jsx("td",{className:"px-6 py-4 text-center",children:n?i.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-amber-100 rounded-full",children:i.jsx(Nr,{className:"w-5 h-5 text-amber-600"})}):i.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:i.jsx("span",{className:"text-gray-400",children:""})})})]}),Rf=5,wu=24,tD=()=>{const{user:t}=ze(),e=En(),n=Un(),[r,s]=T.useState([]),[a,o]=T.useState(!0),[c,u]=T.useState(!1),[d,h]=T.useState(!1),[m,p]=T.useState(0),_=T.useRef(null),[b,A]=T.useState({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""});T.useEffect(()=>{t&&N()},[t]);const N=async()=>{if(t)try{const R=at(ue($,"promotions"),ft("ownerId","==",t.uid)),j=(await Ue(R)).docs.map(x=>{var k,S,D,O;return{id:x.id,...x.data(),expiresAt:(S=(k=x.data().expiresAt)==null?void 0:k.toDate)==null?void 0:S.call(k),createdAt:(O=(D=x.data().createdAt)==null?void 0:D.toDate)==null?void 0:O.call(D)}});j.sort((x,k)=>{var S,D;return(((S=k.createdAt)==null?void 0:S.getTime())||0)-(((D=x.createdAt)==null?void 0:D.getTime())||0)}),s(j)}catch(R){e.error("   "),console.error(R)}finally{o(!1)}},v=R=>R.expiresAt?new Date>new Date(R.expiresAt):!1,w=R=>{var S;const L=(S=R.target.files)==null?void 0:S[0];if(!L)return;const j=L.type.startsWith("image/"),x=L.type.startsWith("video/");if(!j&&!x){e.warning("    ");return}const k=x?50*1024*1024:10*1024*1024;if(L.size>k){e.warning(x?"       50 ":"       10 ");return}A({...b,type:x?"video":"image",mediaFile:L,mediaPreview:URL.createObjectURL(L)})},y=async R=>{if(R.preventDefault(),!!t){if(b.type!=="text"&&!b.mediaFile){e.warning("    ");return}if(!b.title.trim()&&!b.description.trim()&&!b.mediaFile){e.warning("   ");return}try{h(!0);let L="";if(b.mediaFile){const x=b.mediaFile.name.replace(/\s+/g,"_").slice(-60),k=`promotions/${t.uid}_${Date.now()}_${x}`,S=Za(rp,k),D=lx(S,b.mediaFile);await new Promise((O,P)=>{D.on("state_changed",Q=>{const V=Math.round(Q.bytesTransferred/Q.totalBytes*100);p(V)},P,async()=>{L=await Ja(D.snapshot.ref),O()})})}const j=new Date;j.setHours(j.getHours()+wu),await Zn(ue($,"promotions"),{ownerId:t.uid,restaurantId:t.uid,type:b.type,title:b.title.trim(),description:b.description.trim(),mediaUrl:L,isActive:!0,isPaid:!0,price:Rf,duration:wu,viewsCount:0,expiresAt:it.fromDate(j),createdAt:ae(),updatedAt:ae()}),e.success(`  !    ${wu} `),A({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""}),u(!1),p(0),N()}catch(L){e.error("    "),console.error(L)}finally{h(!1)}}},E=async R=>{if(await n.confirm("    ",{dangerous:!0}))try{await Xn(Z($,"promotions",R)),e.success("  "),N()}catch{e.error(" ")}};return a?i.jsxs("div",{className:"flex items-center justify-center h-96",children:[i.jsx(pn,{className:"w-6 h-6 animate-spin ml-2"})," ..."]}):i.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4 space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:i.jsx(_i,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" "}),i.jsx("p",{className:"text-gray-500 mt-2",children:"      "})]}),i.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3",children:[i.jsx(Vn,{className:"w-5 h-5 text-purple-500"}),i.jsxs("span",{className:"text-lg font-bold text-purple-700",children:[Rf," .   ",wu," "]}),i.jsx(Vn,{className:"w-5 h-5 text-purple-500"})]}),i.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"       "})]}),!c&&i.jsxs("button",{onClick:()=>u(!0),className:"w-full py-4 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[i.jsx(kh,{className:"w-6 h-6"}),"  "]}),c&&i.jsxs("form",{onSubmit:y,className:"bg-white rounded-2xl shadow-xl p-6 space-y-4",children:[i.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:"  "}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>A({...b,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${b.type==="text"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[i.jsx(dx,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:""})]}),i.jsxs("button",{type:"button",onClick:()=>{var R;A({...b,type:"image"}),(R=_.current)==null||R.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${b.type==="image"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[i.jsx(aj,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:""})]}),i.jsxs("button",{type:"button",onClick:()=>{var R;A({...b,type:"video"}),(R=_.current)==null||R.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${b.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[i.jsx(y3,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:""})]})]})]}),i.jsx("input",{type:"file",ref:_,accept:"image/*,video/*",onChange:w,className:"hidden"}),b.mediaPreview&&i.jsxs("div",{className:"relative",children:[b.type==="video"?i.jsx("video",{src:b.mediaPreview,controls:!0,className:"w-full h-48 object-cover rounded-xl"}):i.jsx("img",{src:b.mediaPreview,alt:"",className:"w-full h-48 object-cover rounded-xl"}),i.jsx("button",{type:"button",onClick:()=>A({...b,mediaFile:null,mediaPreview:"",type:"text"}),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full",children:i.jsx(Hr,{className:"w-4 h-4"})})]}),b.type!=="text"&&!b.mediaPreview&&i.jsxs("button",{type:"button",onClick:()=>{var R;return(R=_.current)==null?void 0:R.click()},className:"w-full py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-purple-400 transition flex items-center justify-center gap-2",children:[i.jsx(uj,{className:"w-5 h-5"})," ",b.type==="video"?"":""]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),i.jsx("input",{type:"text",value:b.title,onChange:R=>A({...b,title:R.target.value}),placeholder:":   !",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"  "}),i.jsx("textarea",{value:b.description,onChange:R=>A({...b,description:R.target.value}),placeholder:"   ...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),d&&m>0&&i.jsx("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:"bg-purple-500 h-full transition-all",style:{width:`${m}%`}})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",disabled:d,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:d?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(_i,{className:"w-5 h-5"}),"  (",Rf," .)"]})}),i.jsx("button",{type:"button",onClick:()=>{u(!1),A({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""})},className:"px-4 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-medium",children:""})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"font-bold text-lg text-gray-800",children:""}),r.length===0?i.jsxs("div",{className:"text-center py-10 text-gray-400",children:[i.jsx(_i,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"    "})]}):r.map(R=>i.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden ${v(R)?"opacity-60":""}`,children:[R.mediaUrl&&(R.type==="video"?i.jsx("video",{src:R.mediaUrl,controls:!0,className:"w-full h-48 object-cover"}):i.jsx("img",{src:R.mediaUrl,alt:R.title,className:"w-full h-48 object-cover"})),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v(R)?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-500 text-xs font-medium rounded-full",children:[i.jsx(Hr,{className:"w-3 h-3"})," "]}):R.isActive?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-600 text-xs font-medium rounded-full",children:[i.jsx($t,{className:"w-3 h-3"})," "]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-600 text-xs font-medium rounded-full",children:[i.jsx(vr,{className:"w-3 h-3"}),"  "]}),i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-600 text-xs font-medium rounded-full",children:[i.jsx(sj,{className:"w-3 h-3"})," ",R.viewsCount," "]})]}),R.title&&i.jsx("h3",{className:"font-bold text-gray-800",children:R.title}),R.description&&i.jsx("p",{className:"text-gray-600 text-sm mt-1",children:R.description}),i.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[i.jsxs("span",{className:"text-xs text-gray-400",children:[R.expiresAt&&!v(R)&&i.jsxs(i.Fragment,{children:[": ",new Date(R.expiresAt).toLocaleString("ar-SA")]}),v(R)&&"  "]}),i.jsx("button",{onClick:()=>E(R.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",children:i.jsx(sn,{className:"w-4 h-4"})})]})]})]},R.id))]}),i.jsxs(Pe,{to:"/owner",className:"flex items-center justify-center gap-2 text-sky-600 hover:text-sky-700 py-4",children:[i.jsx(Tc,{className:"w-5 h-5"}),"  "]})]})},nD=()=>{const{user:t}=ze(),e=Xt(),[n,r]=T.useState([]),[s,a]=T.useState([]);T.useEffect(()=>{const u=at(ue($,"orders"),ft("status","in",["ready"]),br("createdAt","desc")),d=es(u,p=>r(p.docs.map(_=>({id:_.id,..._.data()})))),h=at(ue($,"orders"),ft("courierId","==",(t==null?void 0:t.uid)||""),br("createdAt","desc")),m=es(h,p=>a(p.docs.map(_=>({id:_.id,..._.data()}))));return()=>{d(),m()}},[t==null?void 0:t.uid]);const o=async u=>{t&&await xe(Z($,"orders",u),{courierId:t.uid,status:"out_for_delivery",updatedAt:ae()})},c=async u=>{await xe(Z($,"orders",u),{status:"delivered",updatedAt:ae()})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-2xl p-4 text-white shadow-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(er,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm opacity-90",children:" "})]}),i.jsx("div",{className:"text-3xl font-bold",children:n.length})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(tr,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm opacity-90",children:" "})]}),i.jsx("div",{className:"text-3xl font-bold",children:s.filter(u=>u.status!=="delivered").length})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:i.jsx(er,{className:"w-5 h-5 text-purple-600"})}),i.jsx("h2",{className:"font-bold text-lg",children:"   "})]}),i.jsxs("div",{className:"space-y-3",children:[n.map(u=>{var d,h;return i.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all",children:[i.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 flex items-center justify-between",children:[i.jsxs("span",{className:"text-white font-bold",children:["#",u.id.slice(-6)]}),i.jsx("span",{className:"text-white/90 text-sm",children:u.restaurantName||""})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[i.jsx(bn,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate",children:u.address})]}),i.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[i.jsx(Av,{className:"w-5 h-5"}),i.jsxs("span",{children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]}),i.jsxs("button",{onClick:()=>o(u.id),className:`w-full py-3 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 
                               text-white font-bold flex items-center justify-center gap-2
                               hover:from-gray-900 hover:to-black transition-all shadow-lg hover:shadow-xl`,children:[i.jsx(tr,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]})]},u.id)}),n.length===0&&i.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("p",{className:"text-gray-500",children:"    "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"    "})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:i.jsx(Li,{className:"w-5 h-5 text-green-600"})}),i.jsx("h2",{className:"font-bold text-lg",children:" "})]}),i.jsxs("div",{className:"space-y-3",children:[s.filter(u=>u.status!=="delivered").map(u=>{var d,h;return i.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all",children:[i.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-blue-500 px-4 py-2 flex items-center justify-between",children:[i.jsxs("span",{className:"text-white font-bold",children:["#",u.id.slice(-6)]}),i.jsxs("div",{className:"flex items-center gap-1 text-white/90 text-sm",children:[i.jsx(vr,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[i.jsx(bn,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate",children:u.address})]}),i.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[i.jsx(Av,{className:"w-5 h-5"}),i.jsxs("span",{children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>e(`/chat?orderId=${u.id}`),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-primary to-accent 
                                 text-white font-bold flex items-center justify-center gap-2
                                 hover:shadow-lg transition-all`,children:[i.jsx(Eh,{className:"w-5 h-5"}),i.jsx("span",{children:" "})]}),i.jsxs("button",{onClick:()=>c(u.id),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 
                                 text-white font-bold flex items-center justify-center gap-2
                                 hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg hover:shadow-xl`,children:[i.jsx($t,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]})]})]},u.id)}),s.filter(u=>u.status!=="delivered").length===0&&i.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("p",{className:"text-gray-500",children:"    "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"    "})]})]})]})]}),s.filter(u=>u.status==="delivered").length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Vn,{className:"w-5 h-5 text-yellow-500"}),i.jsx("h3",{className:"font-bold text-gray-700",children:"  "})]}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3",children:s.filter(u=>u.status==="delivered").slice(0,6).map(u=>{var d,h;return i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"font-bold text-green-700",children:["#",u.id.slice(-6)]}),i.jsxs("span",{className:"text-green-600 font-bold",children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]})},u.id)})})]})]})},rD=()=>{const{user:t}=ze(),e=Un(),[n,r]=T.useState([]),[s,a]=T.useState({}),[o,c]=T.useState(!0),[u,d]=T.useState(null);T.useEffect(()=>{if(!t)return;(async()=>{const _=(await Ue(ue($,"restaurants"))).docs.map(v=>({id:v.id,...v.data()}));r(_);const b=at(ue($,"hiringRequests"),ft("courierId","==",t.uid)),A=await Ue(b),N={};A.docs.forEach(v=>{const w=v.data();N[w.restaurantId]={restaurantId:w.restaurantId,status:w.status}}),a(N),c(!1)})()},[t]);const h=async m=>{if(!t){e.warning("  ");return}d(m.id),await Zn(ue($,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"",restaurantId:m.id,restaurantName:m.name,status:"pending",createdAt:ae()}),a(p=>({...p,[m.id]:{restaurantId:m.id,status:"pending"}})),d(null)};return o?i.jsx("div",{className:"text-center py-10 text-gray-300",children:"  ..."}):i.jsxs("div",{className:"py-8",children:[i.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[i.jsx(E5,{className:"w-7 h-7 text-yellow-400"})," "]}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(m=>{const p=s[m.id];return i.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[m.logoUrl?i.jsx("img",{src:m.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):i.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"font-bold text-lg mb-2",children:m.name}),p?i.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${p.status==="pending"?"bg-gray-500 text-white":p.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[p.status==="pending"&&i.jsx(vr,{className:"w-4 h-4"}),p.status==="accepted"&&i.jsx(B5,{className:"w-4 h-4"}),p.status==="rejected"&&i.jsx(Hr,{className:"w-4 h-4"}),p.status==="pending"?" ":p.status==="accepted"?"  ":" "]}):i.jsx("button",{disabled:u===m.id,onClick:()=>h(m),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:u===m.id?"  ...":"  "})]},m.id)})})]})},sD=[{text:"  ",emoji:""},{text:" ! ",emoji:""},{text:"  ",emoji:""},{text:"  ",emoji:""},{text:" ",emoji:""},{text:"! ",emoji:""}],iD=[{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:"    ",emoji:""},{text:"! ",emoji:""},{text:" ",emoji:""}],aD=[{text:"  ! ",emoji:""},{text:"! ",emoji:""},{text:"  ",emoji:""},{text:"   ",emoji:""},{text:"  ",emoji:""},{text:" ! ",emoji:""}],oD=[{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:"   ",emoji:""}],lD=["","","","","","","","","","","",""],cD=()=>{const[t]=ub(),e=t.get("orderId"),n=Xt(),{user:r,role:s}=ze(),a=En(),[o,c]=T.useState(null),[u,d]=T.useState([]),[h,m]=T.useState(""),[p,_]=T.useState(!1),[b,A]=T.useState(!1),[N,v]=T.useState(""),w=T.useRef(null),y=s==="courier",E=s==="owner",R=s==="customer"||s==="admin",L=o&&!o.courierId&&o.restaurantId,x=y?aD:E?oD:R&&L?iD:sD;T.useEffect(()=>{if(!e)return;const K=es(Z($,"orders",e),z=>{if(z.exists()){const U=z.data();c({id:z.id,status:U.status,address:U.address,total:U.total,customerId:U.customerId,courierId:U.courierId,restaurantId:U.restaurantId,restaurantName:U.restaurantName})}});return()=>K()},[e]),T.useEffect(()=>{if(!o)return;let K,z="customer";if(y||E?(K=o.customerId,z="customer"):R&&(o.courierId?(K=o.courierId,z="courier"):o.restaurantId&&(K=o.restaurantId,z="restaurant")),!K){v(L?o.restaurantName||"":" ");return}z==="restaurant"?tt(Z($,"restaurants",K)).then(U=>{var J;U.exists()?v(((J=U.data())==null?void 0:J.name)||""):v(o.restaurantName||"")}):tt(Z($,"users",K)).then(U=>{var J;if(U.exists()){const ne=z==="courier"?"":"";v(((J=U.data())==null?void 0:J.name)||ne)}})},[o,y,E,R,L]),T.useEffect(()=>{if(!e)return;const K=at(ue($,"orders",e,"messages"),br("createdAt","asc")),z=es(K,U=>{d(U.docs.map(J=>({id:J.id,...J.data()})))});return()=>z()},[e]),T.useEffect(()=>{var K;(K=w.current)==null||K.scrollIntoView({behavior:"smooth"})},[u]);const k=async K=>{if(!(!K.trim()||!r||!e)){_(!0);try{let z="customer";y?z="courier":E&&(z="owner"),await Zn(ue($,"orders",e,"messages"),{text:K.trim(),senderId:r.uid,senderRole:z,createdAt:ae()}),m(""),A(!1)}catch{a.error("  ")}_(!1)}},S=K=>{m(z=>z+K)},D=K=>K?K.toDate().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"",O=K=>({pending:{text:" ",color:"bg-yellow-500",emoji:""},accepted:{text:" ",color:"bg-blue-500",emoji:""},preparing:{text:" ",color:"bg-orange-500",emoji:""},ready:{text:"",color:"bg-purple-500",emoji:""},out_for_delivery:{text:" ",color:"bg-sky-500",emoji:""},delivered:{text:" ",color:"bg-green-500",emoji:""}})[K]||{text:K,color:"bg-gray-500",emoji:""},P=()=>y||E?"":L?"":"";if(!e)return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Eh,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),i.jsx("p",{className:"text-gray-500",children:"   "})]})});if(!o)return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:" ..."})]})});if(!((r==null?void 0:r.uid)===o.customerId||(r==null?void 0:r.uid)===o.courierId||(r==null?void 0:r.uid)===o.restaurantId))return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-500",children:"     "})]})});const V=O(o.status);return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] max-w-2xl mx-auto",children:[i.jsxs("div",{className:`bg-gradient-to-r ${L?"from-orange-500 via-amber-500 to-yellow-500":"from-primary via-sky-500 to-accent"} rounded-t-3xl p-4 shadow-luxury`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>n(-1),className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center hover:bg-white/30 transition-all",children:i.jsx(Tc,{className:"w-5 h-5 text-white"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:P()})}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-white text-lg",children:N||(L?"":y||E?"":"")}),i.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-sm",children:[i.jsx("span",{className:`w-2 h-2 rounded-full ${o.status==="delivered"?"bg-green-400":"bg-yellow-400 animate-pulse"}`}),i.jsxs("span",{children:[V.emoji," ",V.text]})]})]})]})}),L?i.jsx(Ut,{className:"w-6 h-6 text-white animate-pulse"}):i.jsx(Vn,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-4 text-white/90 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(er,{className:"w-4 h-4"}),i.jsxs("span",{children:["#",o.id.slice(-6)]})]}),o.restaurantName&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ut,{className:"w-4 h-4"}),i.jsx("span",{children:o.restaurantName})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(bn,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate max-w-[150px]",children:o.address})]})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-sky-50 to-white p-4 space-y-3",children:[u.length===0&&i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-500",children:"  !"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"  "})]}),u.map((K,z)=>{const U=K.senderId===(r==null?void 0:r.uid);return i.jsx("div",{className:`flex ${U?"justify-start":"justify-end"}`,children:i.jsxs("div",{className:`
                  max-w-[80%] rounded-2xl px-4 py-3 shadow-md
                  ${U?"bg-gradient-to-br from-primary to-sky-600 text-white rounded-br-sm":"bg-white text-gray-800 rounded-bl-sm border border-gray-100"}
                  transform transition-all duration-300 hover:scale-[1.02]
                `,children:[i.jsx("p",{className:"text-base leading-relaxed",children:K.text}),i.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${U?"text-white/70":"text-gray-400"}`,children:[i.jsx(vr,{className:"w-3 h-3"}),i.jsx("span",{children:D(K.createdAt)}),U&&i.jsx(Cv,{className:"w-3 h-3 mr-1"})]})]})},K.id)}),i.jsx("div",{ref:w})]}),i.jsx("div",{className:"bg-white border-t border-gray-100 px-3 py-2",children:i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:x.map((K,z)=>i.jsx("button",{onClick:()=>k(K.text),className:`flex-shrink-0 px-4 py-2 bg-gradient-to-r from-sky-50 to-blue-50 
                         rounded-full text-sm text-primary font-medium border border-sky-100
                         hover:from-sky-100 hover:to-blue-100 hover:shadow-md 
                         transition-all duration-200 active:scale-95`,children:K.text},z))})}),b&&i.jsx("div",{className:"bg-white border-t border-gray-100 px-4 py-3",children:i.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:lD.map((K,z)=>i.jsx("button",{onClick:()=>S(K),className:`w-10 h-10 text-2xl hover:bg-gray-100 rounded-full 
                           transition-all duration-200 hover:scale-125 active:scale-95`,children:K},z))})}),i.jsx("div",{className:"bg-white border-t border-gray-200 p-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>A(!b),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all
                       ${b?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:i.jsx(G6,{className:"w-5 h-5"})}),i.jsx("div",{className:"flex-1 relative",children:i.jsx("input",{type:"text",value:h,onChange:K=>m(K.target.value),onKeyPress:K=>K.key==="Enter"&&k(h),placeholder:" ...",className:`w-full px-5 py-3 bg-gray-100 rounded-full text-gray-800 
                         placeholder-gray-400 focus:outline-none focus:ring-2 
                         focus:ring-primary/50 focus:bg-white transition-all`})}),i.jsx("button",{onClick:()=>k(h),disabled:!h.trim()||p,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all
                       ${h.trim()?"bg-gradient-to-r from-primary to-accent text-white shadow-lg hover:shadow-xl hover:scale-105":"bg-gray-200 text-gray-400"}
                       disabled:opacity-50 active:scale-95`,children:i.jsx(L6,{className:"w-5 h-5"})})]})}),o.status==="delivered"&&i.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[i.jsx(Cv,{className:"w-6 h-6"}),i.jsx("span",{className:"font-bold",children:"   ! "}),i.jsx(ij,{className:"w-5 h-5 text-red-300 animate-pulse"})]}),i.jsx("p",{className:"text-white/80 text-sm mt-1",children:"   "})]})]})},uD=()=>{const{user:t}=ze(),e=En(),n=Xt(),[r,s]=T.useState([]),[a,o]=T.useState(!0);T.useEffect(()=>{if(!t)return;const p=at(ue($,"notifications"),ft("recipientId","==",t.uid),br("createdAt","desc")),_=es(p,b=>{const A=b.docs.map(N=>({id:N.id,...N.data()}));s(A),o(!1)},b=>{console.error("Error fetching notifications:",b),o(!1)});return()=>_()},[t]);const c=async p=>{try{await xe(Z($,"notifications",p),{read:!0})}catch(_){console.error("Error marking as read:",_)}},u=async()=>{const p=r.filter(_=>!_.read);try{await Promise.all(p.map(_=>xe(Z($,"notifications",_.id),{read:!0}))),e.success("   ")}catch{e.error("  ")}},d=async p=>{try{await Xn(Z($,"notifications",p)),e.success("  ")}catch{e.error("  ")}},h=p=>{if(!p)return"";const _=p.toDate(),A=new Date().getTime()-_.getTime(),N=Math.floor(A/6e4),v=Math.floor(A/36e5),w=Math.floor(A/864e5);return N<1?"":N<60?` ${N} `:v<24?` ${v} `:w<7?` ${w} `:_.toLocaleDateString("ar-SA")},m=r.filter(p=>!p.read).length;return a?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx(pn,{className:"w-8 h-8 animate-spin text-sky-500"})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[i.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:i.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[i.jsx(Tc,{className:"w-5 h-5"}),""]}),i.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[i.jsx(Sd,{className:"w-6 h-6 text-sky-500"}),"",m>0&&i.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:m})]}),m>0&&i.jsx("button",{onClick:u,className:"text-sm text-sky-600 hover:text-sky-800",children:" "})]})})}),i.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:r.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx(Sd,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),i.jsx("p",{className:"text-gray-500",children:"  "})]}):i.jsx("div",{className:"space-y-3",children:r.map(p=>i.jsx("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition hover:shadow-md ${p.read?"border-gray-100":"border-sky-200 bg-sky-50/50"}`,onClick:()=>!p.read&&c(p.id),children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`p-2 rounded-xl ${p.type==="license_reminder"?"bg-orange-100 text-orange-600":"bg-sky-100 text-sky-600"}`,children:i.jsx(pi,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("h3",{className:"font-semibold text-gray-800",children:p.title}),i.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:h(p.createdAt)})]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.message}),!p.read&&i.jsx("span",{className:"inline-block mt-2 text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded-full",children:""})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[!p.read&&i.jsx("button",{onClick:_=>{_.stopPropagation(),c(p.id)},className:"p-1.5 text-gray-400 hover:text-green-500 transition",title:" ",children:i.jsx(Nr,{className:"w-4 h-4"})}),i.jsx("button",{onClick:_=>{_.stopPropagation(),d(p.id)},className:"p-1.5 text-gray-400 hover:text-red-500 transition",title:"",children:i.jsx(sn,{className:"w-4 h-4"})})]})]})},p.id))})})]})},dD=()=>{var w,y;const{user:t,role:e}=ze(),n=En(),[r,s]=T.useState("dashboard"),[a,o]=T.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[c,u]=T.useState(0),[d,h]=T.useState(!0),[m,p]=T.useState(null),[_,b]=T.useState([]),[A,N]=T.useState("all");T.useEffect(()=>{t&&(async()=>{try{const R=(await Ue(ue($,"restaurants"))).size,j=(await Ue(ue($,"orders"))).docs.map(D=>({id:D.id,...D.data()})),x=j.length,k=j.filter(D=>D.status==="pending").length,S=j.reduce((D,O)=>D+(O.deliveryFee||0),0);try{const O=(await tt(Z($,"wallets",t.uid))).data();u((O==null?void 0:O.balance)||0)}catch{u(0)}try{const D=at(ue($,"tasks"),ft("assignedTo","==",t.uid)),P=(await Ue(D)).docs.map(Q=>({id:Q.id,...Q.data()}));b(P.sort((Q,V)=>{var K,z;return(((K=V.createdAt)==null?void 0:K.seconds)||0)-(((z=Q.createdAt)==null?void 0:z.seconds)||0)}))}catch(D){console.error("   :",D)}o({totalRestaurants:R,totalOrders:x,totalEarnings:S,pendingOrders:k})}catch(E){console.error("   :",E)}finally{h(!1)}})()},[t]);const v=async(E,R)=>{try{const L={status:R,updatedAt:ae()};R==="completed"&&(L.completedAt=ae()),await xe(Z($,"tasks",E),L),b(j=>j.map(x=>x.id===E?{...x,status:R}:x)),n.success(R==="in_progress"?"  ":R==="completed"?"   ! ":"  ")}catch{n.error("   ")}};return T.useEffect(()=>{t&&(async()=>{try{const E=await tt(Z($,"users",t.uid));E.exists()&&p({uid:E.id,...E.data()})}catch(E){console.error("    :",E)}})()},[t]),d?i.jsx(Re,{allow:["admin"],children:i.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:" ..."})}):i.jsx(Re,{allow:["admin"],children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"  "}),i.jsx("p",{className:"text-gray-600 mt-2",children:"   ! "})]}),i.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[i.jsxs("button",{onClick:()=>s("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[i.jsx(Ef,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>s("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[i.jsx(An,{className:"w-5 h-5"}),""]}),i.jsxs("button",{onClick:()=>s("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${r==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[i.jsx(Cd,{className:"w-5 h-5"}),"",_.filter(E=>E.status==="pending"||E.status==="in_progress").length>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:_.filter(E=>E.status==="pending"||E.status==="in_progress").length})]})]}),r==="profile"&&i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[i.jsx(An,{className:"w-6 h-6"}),""]}),m?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((w=m.name)==null?void 0:w.charAt(0))||((y=m.email)==null?void 0:y.charAt(0))||""}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m.name||" "}),i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:" "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),i.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:m.email})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),i.jsx("p",{className:"font-semibold text-gray-900",children:e==="admin"?"":e})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),i.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:m.uid})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),i.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[c.toFixed(2)," ."]})]})]})]}),i.jsx(Pe,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"   "})]}):i.jsx("div",{className:"text-center py-8 text-gray-600",children:" ..."})]}),r==="tasks"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[i.jsx(Cd,{className:"w-6 h-6"})," "]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(E=>i.jsxs("button",{onClick:()=>N(E),className:`px-4 py-2 rounded-xl font-semibold transition ${A===E?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[E==="all"&&" ",E==="pending"&&"  ",E==="in_progress"&&"  ",E==="completed"&&" "]},E))}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:_.filter(E=>E.status==="pending").length}),i.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),i.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:_.filter(E=>E.status==="in_progress").length}),i.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),i.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:_.filter(E=>E.status==="completed").length}),i.jsx("p",{className:"text-sm text-green-700",children:""})]})]}),_.filter(E=>A==="all"||E.status===A).length===0?i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("p",{className:"text-5xl mb-4",children:""}),i.jsxs("p",{className:"text-lg",children:["   ",A!=="all"&&"  "]}),i.jsx("p",{className:"text-sm mt-2",children:"      "})]}):i.jsx("div",{className:"space-y-4",children:_.filter(E=>A==="all"||E.status===A).map(E=>{var R,L,j;return i.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${E.status==="completed"?"bg-green-50 border-green-200":E.status==="in_progress"?"bg-blue-50 border-blue-200":E.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${E.priority==="high"?"bg-red-100 text-red-700":E.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:E.priority==="high"?" ":E.priority==="medium"?" ":" "}),i.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${E.status==="pending"?"bg-yellow-100 text-yellow-700":E.status==="in_progress"?"bg-blue-100 text-blue-700":E.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[E.status==="pending"&&"  ",E.status==="in_progress"&&"  ",E.status==="completed"&&" ",E.status==="cancelled"&&" "]})]}),i.jsx("h3",{className:"font-bold text-lg text-gray-800",children:E.title}),E.description&&i.jsx("p",{className:"text-gray-600 mt-1",children:E.description}),i.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[E.dueDate&&i.jsxs("span",{className:new Date(E.dueDate)<new Date&&E.status!=="completed"?"text-red-600 font-semibold":"",children:[" ",new Date(E.dueDate).toLocaleDateString("ar-SA"),new Date(E.dueDate)<new Date&&E.status!=="completed"&&" (!)"]}),i.jsxs("span",{children:[" ",((j=(L=(R=E.createdAt)==null?void 0:R.toDate)==null?void 0:L.call(R))==null?void 0:j.toLocaleDateString("ar-SA"))||" "]})]}),E.notes&&i.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:[" ",E.notes]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[E.status==="pending"&&i.jsx("button",{onClick:()=>v(E.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:" "}),E.status==="in_progress"&&i.jsxs("button",{onClick:()=>v(E.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[i.jsx($t,{className:"w-4 h-4"}),""]}),E.status==="completed"&&i.jsx("span",{className:"text-green-600 font-semibold text-center",children:"  "})]})]})},E.id)})})]})}),r==="dashboard"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm opacity-90",children:" "}),i.jsxs("h2",{className:"text-3xl font-bold",children:[c.toFixed(2)," ."]}),i.jsx("p",{className:"text-sm opacity-75 mt-2",children:"   50       "})]}),i.jsx(dj,{className:"w-16 h-16 opacity-80"})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:" "}),i.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:a.totalRestaurants})]}),i.jsx(nj,{className:"w-12 h-12 text-primary opacity-30"})]})}),i.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:" "}),i.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:a.totalOrders})]}),i.jsx(Rd,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),i.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:" "}),i.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:a.pendingOrders})]}),i.jsx(Ef,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),i.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:" "}),i.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:a.totalEarnings.toFixed(2)})]}),i.jsx(Ef,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[i.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"   "}),i.jsx(Pe,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[i.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"     "}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),i.jsx(Pe,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[i.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:""}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"       "}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),i.jsx(Pe,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:" "})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[i.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:[" : ",c.toFixed(2)," ."]}),i.jsx(Pe,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]})]}),i.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 p-6 rounded-lg",children:[i.jsx("h4",{className:"font-bold text-sky-900 mb-2",children:"  :"}),i.jsxs("ul",{className:"text-sky-800 text-sm space-y-1",children:[i.jsxs("li",{children:[" ",i.jsx("strong",{children:"50 "}),"         "]}),i.jsxs("li",{children:[" ",i.jsx("strong",{children:"1 "}),"     (     )"]}),i.jsxs("li",{children:[" ",i.jsx("strong",{children:"1.5 "}),"       "]}),i.jsx("li",{children:"        "})]})]})]})]})})},hD=()=>{const{user:t,role:e}=ze(),n=En(),r=Un(),[s,a]=T.useState([]),[o,c]=T.useState(!0),[u,d]=T.useState(!1),[h,m]=T.useState(!1),[p,_]=T.useState(0),b=T.useRef(null),A=jh(mn),[N,v]=T.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});T.useEffect(()=>{w()},[]);const w=async()=>{try{const k=(await Ue(ue($,"restaurants"))).docs.map(S=>({id:S.id,...S.data()}));a(k)}catch(x){n.error("   "),console.error(x)}finally{c(!1)}},y=async x=>{if(x.preventDefault(),!N.name.trim()){n.warning("  ");return}try{m(!0);let k="";if(N.logoFile){const O=N.logoFile.name.replace(/\s+/g,"_").slice(-60),P=`uploads/restaurant_${Date.now()}_${O}`,Q=Za(A,P),V=lx(Q,N.logoFile,{contentType:N.logoFile.type||"image/jpeg"});await new Promise((K,z)=>{V.on("state_changed",U=>{const J=Math.round(U.bytesTransferred/U.totalBytes*100);_(J)},z,async()=>{k=await Ja(V.snapshot.ref),K()})})}const S=e==="admin",D=e==="developer";await Zn(ue($,"restaurants"),{name:N.name,phone:N.phone,city:N.city,location:N.location,ownerId:"admin_"+Date.now(),email:(t==null?void 0:t.email)||"",logoUrl:k,createdAt:new Date,referredBy:S?t==null?void 0:t.uid:null,referrerType:S?"admin":D?"developer":null}),n.success("    "),S&&n.info("   75        "),v({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),d(!1),_(0),w()}catch(k){n.error("   "),console.error(k)}finally{m(!1)}},E=async x=>{if(await r.confirm("      ",{dangerous:!0,title:" "}))try{await Xn(Z($,"restaurants",x)),n.success("   "),w()}catch(S){n.error("   "),console.error(S)}},R=async x=>{const k=!x.isVerified;if(await r.confirm(k?`    "${x.name}"`:`     "${x.name}"`,{title:k?"  ":"  ",confirmText:k?" ":"  "}))try{await xe(Z($,"restaurants",x.id),{isVerified:k,verifiedAt:k?ae():null,updatedAt:ae()}),n.success(k?"   ":"  "),w()}catch(D){n.error(" "),console.error(D)}},L=async(x,k)=>{try{await xe(Z($,"restaurants",x.id),{sellerTier:k,tierUpdatedAt:ae(),updatedAt:ae()});const S={bronze:"",silver:"",gold:""};n.success(`    ${S[k]} `),w()}catch(S){n.error(" "),console.error(S)}},j=({tier:x})=>{switch(x){case"gold":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold rounded-full shadow",children:[i.jsx(In,{className:"w-3 h-3"})," Gold"]});case"silver":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold rounded-full shadow",children:[i.jsx(ip,{className:"w-3 h-3"})," Silver"]});default:return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-600 to-orange-600 text-white text-xs font-bold rounded-full shadow",children:[i.jsx($u,{className:"w-3 h-3"})," Bronze"]})}};return o?i.jsx(Re,{allow:["admin","developer"],children:i.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):i.jsx(Re,{allow:["admin","developer"],children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),i.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[i.jsx(kh,{className:"w-5 h-5"}),"  "]})]}),u&&i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block font-semibold text-gray-700",children:" "}),i.jsxs("div",{className:"flex items-center gap-4",children:[N.logoPreview?i.jsx("img",{src:N.logoPreview,alt:" ",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):i.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:i.jsx(aj,{className:"w-8 h-8 text-gray-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("input",{ref:b,type:"file",accept:"image/*",className:"hidden",onChange:x=>{var S;const k=(S=x.target.files)==null?void 0:S[0];k&&v({...N,logoFile:k,logoPreview:URL.createObjectURL(k)})}}),i.jsxs("button",{type:"button",onClick:()=>{var x;return(x=b.current)==null?void 0:x.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[i.jsx(uj,{className:"w-4 h-4"}),N.logoFile?" ":" "]}),N.logoFile&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N.logoFile.name})]})]}),h&&p>0&&i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${p}%`}})})]}),i.jsx("input",{type:"text",placeholder:" ",value:N.name,onChange:x=>v({...N,name:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),i.jsx("input",{type:"text",placeholder:" ",value:N.phone,onChange:x=>v({...N,phone:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),i.jsx("input",{type:"text",placeholder:"",value:N.city,onChange:x=>v({...N,city:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),i.jsx("textarea",{placeholder:" / ",value:N.location,onChange:x=>v({...N,location:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",disabled:h,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:h?` ... ${p}%`:" "}),i.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:" "})]})]})]}),i.jsx("div",{className:"grid gap-4",children:s.length===0?i.jsx("div",{className:"text-center text-gray-500 py-12",children:"    "}):s.map(x=>i.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex gap-4",children:[x.logoUrl?i.jsx("img",{src:x.logoUrl,alt:x.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):i.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"text-xl font-bold text-primary",children:x.name}),x.isVerified&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[i.jsx($t,{className:"w-3 h-3"})," "]}),i.jsx(j,{tier:x.sellerTier})]}),x.city&&i.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.city]}),x.phone&&i.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.phone]}),x.location&&i.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.location]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>R(x),className:`p-2.5 rounded-xl transition flex items-center gap-1 text-sm font-semibold ${x.isVerified?"bg-green-100 hover:bg-green-200 text-green-700":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:x.isVerified?" ":" ",children:[i.jsx(Ic,{className:"w-4 h-4"}),x.isVerified?"":""]}),i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{className:"p-2.5 rounded-xl bg-amber-100 hover:bg-amber-200 text-amber-700 transition flex items-center gap-1 text-sm font-semibold",children:[i.jsx($u,{className:"w-4 h-4"}),"",i.jsx(rj,{className:"w-3 h-3"})]}),i.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white rounded-xl shadow-xl border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 min-w-[140px]",children:[i.jsxs("button",{onClick:()=>L(x,"bronze"),className:`w-full px-4 py-2.5 text-right hover:bg-amber-50 transition flex items-center gap-2 first:rounded-t-xl ${x.sellerTier==="bronze"||!x.sellerTier?"bg-amber-50":""}`,children:[i.jsx($u,{className:"w-4 h-4 text-amber-600"}),i.jsx("span",{className:"font-semibold",children:"Bronze"})]}),i.jsxs("button",{onClick:()=>L(x,"silver"),className:`w-full px-4 py-2.5 text-right hover:bg-gray-50 transition flex items-center gap-2 ${x.sellerTier==="silver"?"bg-gray-100":""}`,children:[i.jsx(ip,{className:"w-4 h-4 text-gray-500"}),i.jsx("span",{className:"font-semibold",children:"Silver"})]}),i.jsxs("button",{onClick:()=>L(x,"gold"),className:`w-full px-4 py-2.5 text-right hover:bg-yellow-50 transition flex items-center gap-2 last:rounded-b-xl ${x.sellerTier==="gold"?"bg-yellow-50":""}`,children:[i.jsx(In,{className:"w-4 h-4 text-amber-500"}),i.jsx("span",{className:"font-semibold",children:"Gold"})]})]})]}),i.jsx("button",{onClick:()=>E(x.id),className:"p-2.5 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:" ",children:i.jsx(sn,{className:"w-4 h-4"})})]})]})},x.id))})]})})},Pf={pending:"  ",accepted:" ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "},fD=()=>{const t=En(),[e,n]=T.useState([]),[r,s]=T.useState(!0),[a,o]=T.useState("all");T.useEffect(()=>{c()},[a]);const c=async()=>{try{let u;a==="all"?u=at(ue($,"orders"),br("createdAt","desc")):u=at(ue($,"orders"),ft("status","==",a),br("createdAt","desc"));const h=(await Ue(u)).docs.map(m=>({id:m.id,...m.data()}));n(h)}catch(u){t.error("   "),console.error(u)}finally{s(!1)}};return r?i.jsx(Re,{allow:["admin","developer"],children:i.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):i.jsx(Re,{allow:["admin","developer"],children:i.jsxs("div",{className:"space-y-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),i.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[i.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${a==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[" (",e.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(u=>{const d=e.filter(h=>h.status===u).length;return i.jsxs("button",{onClick:()=>o(u),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${a===u?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[Pf[u]," (",d,")"]},u)})]}),i.jsx("div",{className:"space-y-4",children:e.length===0?i.jsxs("div",{className:"text-center text-gray-500 py-12",children:["   ",a!=="all"&&` "${Pf[a]}"`]}):e.map(u=>{var d,h;return i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold",children:[" #",u.id.slice(-8)]}),i.jsx("p",{className:"text-gray-600 text-sm",children:u.createdAt?new Date(u.createdAt).toLocaleDateString("ar-SA"):""})]}),i.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${u.status==="pending"?"bg-yellow-500":u.status==="delivered"?"bg-green-600":u.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:Pf[u.status]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:" ID"}),i.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[u.customerId.slice(0,12),"..."]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:""}),i.jsx("p",{className:"font-semibold text-gray-800",children:u.restaurantName||""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:""}),i.jsx("p",{className:"text-sm text-gray-800",children:u.address})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:""}),i.jsxs("p",{className:"text-lg font-bold text-primary",children:[((d=u.total)==null?void 0:d.toFixed(2))||0," ."]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[i.jsx("p",{className:"font-semibold mb-2",children:":"}),i.jsx("div",{className:"space-y-1",children:(h=u.items)==null?void 0:h.map((m,p)=>i.jsxs("div",{className:"flex justify-between text-gray-700",children:[i.jsxs("span",{children:[m.name,"  ",m.qty]}),i.jsxs("span",{children:[(m.price*m.qty).toFixed(2)," ."]})]},p))})]})]},u.id)})})]})})},Tn={projectId:mn.options.projectId,authDomain:mn.options.authDomain,storageBucket:mn.options.storageBucket,messagingSenderId:mn.options.messagingSenderId,appId:mn.options.appId},mD=()=>{var Ro,Po,na,ra;const{user:t}=ze(),e=En(),n=Un(),r=jh(mn),[s,a]=T.useState("overview"),[o,c]=T.useState(!0),[u,d]=T.useState(!1),[h,m]=T.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[p,_]=T.useState({}),[b,A]=T.useState([]),[N,v]=T.useState([]),[w,y]=T.useState([]),[E,R]=T.useState([]),[L,j]=T.useState(!1),[x,k]=T.useState({}),[S,D]=T.useState(null),[O,P]=T.useState({}),[Q,V]=T.useState(!1),[K,z]=T.useState(null),[U,J]=T.useState({}),[ne,_e]=T.useState("all"),[ye,He]=T.useState("all"),[on,$n]=T.useState(null),[ln,cn]=T.useState(!1),[rs,Sc]=T.useState(""),[ss,Ys]=T.useState(""),[kr,Bi]=T.useState(""),[zi,qi]=T.useState(""),[mo,Cc]=T.useState(!1),[po,go]=T.useState(!1),[ir,xo]=T.useState(""),[yo,Hi]=T.useState(""),[Tr,vo]=T.useState(""),[ot,xt]=T.useState(""),[Js,wo]=T.useState(!1),[Wi,Ac]=T.useState(!1),[kn,_o]=T.useState(""),[Ki,Gi]=T.useState(""),[Rc,Pc]=T.useState(""),[Qi,bo]=T.useState(""),[ar,is]=T.useState(""),[as,Xi]=T.useState(""),[or,No]=T.useState(!1),[Bn,Dc]=T.useState([]),[Zs,Yi]=T.useState(!1),[mt,Ji]=T.useState(""),[os,Ir]=T.useState(""),[Zi,jo]=T.useState(""),[Sr,Eo]=T.useState("medium"),[Oc,ls]=T.useState(""),[ko,ea]=T.useState(!1),[zn,lr]=T.useState("all");t!=null&&t.email;const Lc=async()=>{if(!rs.trim()||!kr.trim()){e.warning("    ");return}if(kr.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${rs}
 ${ss||" "}

:         .`,{title:"  "})){Cc(!0);try{const W=(await yl(On,rs.trim(),kr)).user.uid;await fn(Z($,"users",W),{email:rs.trim(),name:ss.trim()||" ",phone:zi.trim()||"",role:"admin",createdAt:ae()}),await fn(Z($,"wallets",W),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:ae()}),e.success("     "),e.info("        "),Sc(""),Ys(""),Bi(""),qi(""),cn(!1)}catch(H){console.error("   :",H),H.code==="auth/email-already-in-use"?e.error("   "):H.code==="auth/invalid-email"?e.error("   "):H.code==="auth/weak-password"?e.error("   "):e.error("  : "+(H.message||"  "))}finally{Cc(!1)}}},Mc=async()=>{if(!ir.trim()||!Tr.trim()){e.warning("    ");return}if(Tr.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${ir}
 ${yo||" "}
 ${ot||" "}`,{title:"  "})){wo(!0);try{const W=(await yl(On,ir.trim(),Tr)).user.uid;await fn(Z($,"users",W),{email:ir.trim(),name:yo.trim()||" ",phone:ot.trim()||"",role:"courier",createdAt:ae()}),e.success("     "),e.info("        "),xo(""),Hi(""),vo(""),xt(""),go(!1)}catch(H){console.error("   :",H),H.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(H.message||"  "))}finally{wo(!1)}}},To=async()=>{if(!kn.trim()){e.warning("  ");return}if(!ar.trim()||!as.trim()){e.warning("   ");return}if(await n.confirm(`   :

 ${kn}
 ${Ki||" "}
  : ${ar}`,{title:"  "})){No(!0);try{const W=(await yl(On,ar.trim(),as)).user.uid;await fn(Z($,"users",W),{email:ar.trim(),name:kn.trim()+" - ",role:"owner",createdAt:ae()}),await fn(Z($,"restaurants",W),{name:kn.trim(),ownerId:W,email:Qi.trim()||ar.trim(),phone:Rc.trim()||"",city:Ki.trim()||"",referredBy:t==null?void 0:t.uid,referrerType:"developer",createdAt:ae()}),e.success("      "),e.info("        "),_o(""),Gi(""),Pc(""),bo(""),is(""),Xi(""),Ac(!1)}catch(H){console.error("   :",H),H.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(H.message||"  "))}finally{No(!1)}}},Io=()=>{const C=new Date,H=new Date(C.getFullYear(),C.getMonth(),C.getDate()),W=new Date(H.getTime()-7*24*60*60*1e3),le=new Date(H.getTime()-30*24*60*60*1e3),be=w.filter(he=>{var We,un;return(((un=(We=he.createdAt)==null?void 0:We.toDate)==null?void 0:un.call(We))||new Date(0))>=H&&he.status!=="cancelled"}),Se=w.filter(he=>{var We,un;return(((un=(We=he.createdAt)==null?void 0:We.toDate)==null?void 0:un.call(We))||new Date(0))>=W&&he.status!=="cancelled"}),Je=w.filter(he=>{var We,un;return(((un=(We=he.createdAt)==null?void 0:We.toDate)==null?void 0:un.call(We))||new Date(0))>=le&&he.status!=="cancelled"}),yt=w.filter(he=>he.status==="delivered");return{todayRevenue:be.reduce((he,Ce)=>he+(Ce.total||0),0),todayOrders:be.length,todayPlatformFee:be.reduce((he,Ce)=>he+(Ce.platformFee||0),0),weekRevenue:Se.reduce((he,Ce)=>he+(Ce.total||0),0),weekOrders:Se.length,weekPlatformFee:Se.reduce((he,Ce)=>he+(Ce.platformFee||0),0),monthRevenue:Je.reduce((he,Ce)=>he+(Ce.total||0),0),monthOrders:Je.length,monthPlatformFee:Je.reduce((he,Ce)=>he+(Ce.platformFee||0),0),totalRevenue:yt.reduce((he,Ce)=>he+(Ce.total||0),0),totalPlatformFee:yt.reduce((he,Ce)=>he+(Ce.platformFee||0),0),totalAdminCommission:yt.reduce((he,Ce)=>he+(Ce.adminCommission||0),0)}},lt=async()=>{try{const[C,H,W,le,be]=await Promise.all([Ue(ue($,"users")),Ue(ue($,"restaurants")),Ue(ue($,"menuItems")),Ue(ue($,"orders")),Ue(ue($,"wallets"))]);let Se={docs:[]};try{Se=await Ue(ue($,"tasks"))}catch{console.log("   ")}const Je=C.docs.map(fe=>({uid:fe.id,...fe.data()}));A(Je);const yt=H.docs.map(fe=>({id:fe.id,...fe.data()}));v(yt);const he=le.docs.map(fe=>({id:fe.id,...fe.data()}));y(he);const Ce=Se.docs.map(fe=>({id:fe.id,...fe.data()}));Dc(Ce.sort((fe,ia)=>{var ri,aa;return(((ri=ia.createdAt)==null?void 0:ri.seconds)||0)-(((aa=fe.createdAt)==null?void 0:aa.seconds)||0)}));const We={};be.docs.forEach(fe=>{We[fe.id]=fe.data()});const un=We.app_earnings||{balance:0,totalEarnings:0},Ie=Je.filter(fe=>fe.role==="admin"),sa=Je.filter(fe=>fe.role==="courier"),ti=Je.filter(fe=>fe.role==="customer"),ni=Je.filter(fe=>fe.role==="owner"),Sh=Ie.map(fe=>{const ia=yt.filter(aa=>aa.referredBy===fe.uid),ri=We[fe.uid]||{balance:0,totalEarnings:0};return{uid:fe.uid,email:fe.email,name:fe.name,walletBalance:ri.balance||0,totalEarnings:ri.totalEarnings||0,restaurantsCount:ia.length,restaurants:ia}});R(Sh),m({users:Je.length,restaurants:yt.length,menuItems:W.size,orders:he.length,pendingOrders:he.filter(fe=>fe.status==="pending").length,deliveredOrders:he.filter(fe=>fe.status==="delivered").length,admins:Ie.length,couriers:sa.length,customers:ti.length,owners:ni.length,totalAppEarnings:un.totalEarnings||0});const Do=await tt(Z($,"settings","general"));if(Do.exists()){const fe=Do.data();_(fe),k(fe)}else{const fe={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};_(fe),k(fe)}}catch(C){console.error("   :",C),e.error("  ")}finally{c(!1),d(!1)}};T.useEffect(()=>{lt()},[]);const So=()=>{d(!0),lt(),e.info("  ...")},Th=async()=>{try{await fn(Z($,"settings","general"),x,{merge:!0}),_(x),j(!1),e.success("    ")}catch(C){console.error("   :",C),e.error("  ")}},ta=async C=>{try{await xe(Z($,"restaurants",C),{...O,updatedAt:ae()}),D(null),e.success("    "),lt()}catch(H){console.error("   :",H),e.error("  ")}},Vc=async(C,H)=>{try{if(!H.type.startsWith("image/")){e.warning("   ");return}if(H.size>5*1024*1024){e.warning("        5MB");return}V(!0);const W=H.name.replace(/\s+/g,"_"),le=`restaurants/${C}/logo_${Date.now()}_${W}`,be=Za(r,le),Se={contentType:H.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await np(be,H,Se);const Je=await Ja(be);await xe(Z($,"restaurants",C),{logoUrl:Je,updatedAt:ae()}),e.success("    "),lt()}catch(W){console.error("   :",W),e.error("  ")}finally{V(!1)}},Co=async C=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await Xn(Z($,"restaurants",C)),e.success("   "),lt()}catch(W){console.error("   :",W),e.error("  ")}},ei=async C=>{try{await xe(Z($,"users",C),{...U,updatedAt:ae()}),z(null),e.success("    "),lt()}catch(H){console.error("   :",H),e.error("  ")}},Cr=async C=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await Xn(Z($,"users",C)),e.success("     "),e.warning(":      Firebase Auth"),lt()}catch(W){console.error("   :",W),e.error("  ")}},Ao=async(C,H)=>{try{await xe(Z($,"orders",C),{status:H,updatedAt:ae()}),e.success("    "),lt()}catch(W){console.error("   :",W),e.error("  ")}},Ih=C=>{switch(C){case"customer":return" ";case"owner":return"  ";case"courier":return" ";case"admin":return" ";case"developer":return" ";default:return C}},Fc=C=>{switch(C){case"pending":return"  ";case"accepted":return" ";case"preparing":return"  ";case"ready":return" ";case"out_for_delivery":return"  ";case"delivered":return"  ";case"cancelled":return" ";default:return C}};return o?i.jsx(Re,{allow:["developer"],children:i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsxs("div",{className:"text-center",children:[i.jsx(pn,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-gray-600",children:"   ..."})]})})}):i.jsx(Re,{allow:["developer"],children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-extrabold text-primary",children:"   "}),i.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),i.jsxs("button",{onClick:So,disabled:u,className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition disabled:opacity-50",children:[i.jsx(pn,{className:`w-5 h-5 ${u?"animate-spin":""}`}),""]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[{id:"overview",label:"  "},{id:"finance",label:" "},{id:"restaurants",label:" "},{id:"licenses",label:" "},{id:"orders",label:" "},{id:"users",label:" "},{id:"couriers",label:" "},{id:"admins",label:" "},{id:"tasks",label:" "},{id:"settings",label:" "},{id:"tools",label:" "}].map(C=>i.jsx("button",{onClick:()=>a(C.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition ${s===C.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:C.label},C.id))}),s==="overview"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.users}),i.jsx("p",{className:"text-sm opacity-90",children:" "})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.restaurants}),i.jsx("p",{className:"text-sm opacity-90",children:" "})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.orders}),i.jsx("p",{className:"text-sm opacity-90",children:" "})]}),i.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.admins}),i.jsx("p",{className:"text-sm opacity-90",children:" "})]}),i.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.couriers}),i.jsx("p",{className:"text-sm opacity-90",children:" "})]}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.totalAppEarnings.toFixed(2)}),i.jsx("p",{className:"text-sm opacity-90",children:"  "})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(V6,{className:"w-6 h-6 text-orange-500"}),i.jsx("h2",{className:"text-xl font-bold",children:" Firebase"})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),i.jsx("p",{className:"font-mono text-sm",children:Tn.projectId})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),i.jsx("p",{className:"font-mono text-sm",children:Tn.storageBucket})]})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[i.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:" Console"}),i.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:" Firestore"}),i.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:" Auth"}),i.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:" Storage"})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.customers}),i.jsx("p",{className:"text-sm text-gray-600",children:""})]}),i.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.owners}),i.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),i.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:h.couriers}),i.jsx("p",{className:"text-sm text-gray-600",children:""})]}),i.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.admins}),i.jsx("p",{className:"text-sm text-gray-600",children:""})]}),i.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[i.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),i.jsx("p",{className:"text-sm text-gray-600",children:""})]})]})]})]}),s==="finance"&&i.jsx("div",{className:"space-y-6",children:(()=>{const C=Io();return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:C.totalRevenue.toFixed(0)}),i.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),i.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:C.totalPlatformFee.toFixed(2)}),i.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),i.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:C.totalAdminCommission.toFixed(2)}),i.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),i.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:(C.totalPlatformFee+C.totalAdminCommission).toFixed(2)}),i.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:" "}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsx("span",{className:"font-bold",children:C.todayOrders})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsxs("span",{className:"font-bold",children:[C.todayRevenue.toFixed(2)," ."]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("span",{className:"font-bold text-green-600",children:[C.todayPlatformFee.toFixed(2)," ."]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"  7 "}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsx("span",{className:"font-bold",children:C.weekOrders})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsxs("span",{className:"font-bold",children:[C.weekRevenue.toFixed(2)," ."]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("span",{className:"font-bold text-green-600",children:[C.weekPlatformFee.toFixed(2)," ."]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"  30 "}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsx("span",{className:"font-bold",children:C.monthOrders})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsxs("span",{className:"font-bold",children:[C.monthRevenue.toFixed(2)," ."]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("span",{className:"font-bold text-green-600",children:[C.monthPlatformFee.toFixed(2)," ."]})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"   "}),i.jsx("div",{className:"space-y-3",children:N.map(H=>({...H,ordersCount:w.filter(W=>W.restaurantId===H.id&&W.status==="delivered").length,revenue:w.filter(W=>W.restaurantId===H.id&&W.status==="delivered").reduce((W,le)=>W+(le.total||0),0)})).sort((H,W)=>W.revenue-H.revenue).slice(0,5).map((H,W)=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:W===0?"":W===1?"":W===2?"":`#${W+1}`}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:H.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[H.ordersCount," "]})]})]}),i.jsxs("p",{className:"font-bold text-green-600",children:[H.revenue.toFixed(2)," ."]})]},H.id))})]})]})})()}),s==="restaurants"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold",children:["   (",N.length,")"]}),i.jsx("button",{onClick:()=>Ac(!Wi),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold",children:Wi?" ":"  "})]}),Wi&&i.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[i.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"   "}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"text",placeholder:":  ",value:kn,onChange:C=>_o(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),i.jsx("input",{type:"text",placeholder:": ",value:Ki,onChange:C=>Gi(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),i.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Rc,onChange:C=>Pc(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),i.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:Qi,onChange:C=>bo(C.target.value),className:"w-full border rounded-xl p-3"})]})]}),i.jsxs("div",{className:"border-t mt-4 pt-4",children:[i.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"    ( )"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   *"}),i.jsx("input",{type:"email",placeholder:"owner@example.com",value:ar,onChange:C=>is(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"password",placeholder:"6   ",value:as,onChange:C=>Xi(C.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),i.jsx("button",{onClick:To,disabled:or||!kn.trim()||!ar.trim()||!as.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:or?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):"  "})]}),i.jsx("div",{className:"space-y-4",children:N.map(C=>{var H;return i.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:S===C.id?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600",children:" "}),i.jsx("input",{type:"text",value:O.name||"",onChange:W=>P({...O,name:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600",children:" "}),i.jsx("input",{type:"text",value:O.phone||"",onChange:W=>P({...O,phone:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600",children:" "}),i.jsx("input",{type:"email",value:O.email||"",onChange:W=>P({...O,email:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600",children:""}),i.jsx("input",{type:"text",value:O.city||"",onChange:W=>P({...O,city:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm text-gray-600",children:""}),i.jsx("input",{type:"text",value:O.location||"",onChange:W=>P({...O,location:W.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm text-gray-600",children:"  ()"}),i.jsxs("select",{value:O.referredBy||"",onChange:W=>P({...O,referredBy:W.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[i.jsx("option",{value:"",children:"--   ( ) --"}),b.filter(W=>W.role==="admin").map(W=>i.jsxs("option",{value:W.uid,children:[" ",W.name||W.email]},W.uid))]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600",children:" "}),i.jsx("input",{type:"file",accept:"image/*",onChange:W=>{var be;const le=(be=W.target.files)==null?void 0:be[0];le&&Vc(C.id,le)},className:"w-full border rounded-xl p-2 mt-1",disabled:Q}),Q&&i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" ..."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>ta(C.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[i.jsx(lj,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>D(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[i.jsx(Bs,{className:"w-4 h-4"})," "]})]})]}):i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:C.logoUrl?i.jsx("img",{src:C.logoUrl,alt:C.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-lg",children:C.name}),i.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[C.phone&&i.jsxs("p",{children:[" ",C.phone]}),C.email&&i.jsxs("p",{children:[" ",C.email]}),C.city&&i.jsxs("p",{children:[" ",C.city]}),C.referredBy&&i.jsxs("p",{className:"text-purple-600",children:["  : ",((H=E.find(W=>W.uid===C.referredBy))==null?void 0:H.name)||C.referredBy.slice(0,8)]})]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{D(C.id),P(C)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"",children:i.jsx(Dv,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>Co(C.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"",children:i.jsx(sn,{className:"w-5 h-5"})})]}),i.jsxs("select",{value:C.referredBy||"",onChange:async W=>{const le=W.target.value;try{await xe(Z($,"restaurants",C.id),{referredBy:le||null,updatedAt:ae()}),e.success(le?"   ":"   "),lt()}catch{e.error("   ")}},className:"text-xs border rounded-lg p-1",title:" ",children:[i.jsx("option",{value:"",children:"  "}),b.filter(W=>W.role==="admin").map(W=>i.jsxs("option",{value:W.uid,children:[" ",W.name||W.email]},W.uid))]})]})]})},C.id)})})]}),s==="orders"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold",children:["   (",w.length,")"]}),i.jsxs("select",{value:ne,onChange:C=>_e(C.target.value),className:"border rounded-xl p-2",children:[i.jsx("option",{value:"all",children:" "}),i.jsx("option",{value:"pending",children:" "}),i.jsx("option",{value:"accepted",children:""}),i.jsx("option",{value:"preparing",children:" "}),i.jsx("option",{value:"ready",children:""}),i.jsx("option",{value:"out_for_delivery",children:" "}),i.jsx("option",{value:"delivered",children:" "}),i.jsx("option",{value:"cancelled",children:""})]})]}),i.jsx("div",{className:"space-y-3",children:w.filter(C=>ne==="all"||C.status===ne).sort((C,H)=>{var W,le;return(((W=H.createdAt)==null?void 0:W.seconds)||0)-(((le=C.createdAt)==null?void 0:le.seconds)||0)}).map(C=>{var H,W;return i.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[i.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-bold",children:[" #",C.id.slice(-8)]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[" ",C.restaurantName||""]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[" ",C.address]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[" ",(H=C.total)==null?void 0:H.toFixed(2)," ."]}),C.platformFee&&i.jsxs("p",{className:"text-xs text-green-600",children:[" : ",C.platformFee," .",C.adminCommission?` |  : ${C.adminCommission} .`:""]})]}),i.jsxs("div",{className:"text-left",children:[i.jsx("span",{className:`inline-block px-3 py-1 rounded-xl text-sm font-semibold ${C.status==="delivered"?"bg-green-100 text-green-700":C.status==="cancelled"?"bg-red-100 text-red-700":C.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:Fc(C.status)}),i.jsxs("select",{value:C.status,onChange:le=>Ao(C.id,le.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[i.jsx("option",{value:"pending",children:" "}),i.jsx("option",{value:"accepted",children:""}),i.jsx("option",{value:"preparing",children:" "}),i.jsx("option",{value:"ready",children:""}),i.jsx("option",{value:"out_for_delivery",children:" "}),i.jsx("option",{value:"delivered",children:" "}),i.jsx("option",{value:"cancelled",children:""})]})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(W=C.items)==null?void 0:W.map((le,be)=>i.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[le.name,"  ",le.qty]},be))})]})]},C.id)})})]}),s==="users"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold",children:["   (",b.length,")"]}),i.jsxs("select",{value:ye,onChange:C=>He(C.target.value),className:"border rounded-xl p-2",children:[i.jsx("option",{value:"all",children:" "}),i.jsx("option",{value:"customer",children:""}),i.jsx("option",{value:"owner",children:" "}),i.jsx("option",{value:"courier",children:""}),i.jsx("option",{value:"admin",children:""}),i.jsx("option",{value:"developer",children:""})]})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.filter(C=>ye==="all"||C.role===ye).map(C=>i.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:K===C.uid?i.jsxs("div",{className:"space-y-3",children:[i.jsx("input",{type:"text",placeholder:"",value:U.name||"",onChange:H=>J({...U,name:H.target.value}),className:"w-full border rounded-xl p-2"}),i.jsx("input",{type:"text",placeholder:"",value:U.phone||"",onChange:H=>J({...U,phone:H.target.value}),className:"w-full border rounded-xl p-2"}),i.jsxs("select",{value:U.role||"customer",onChange:H=>J({...U,role:H.target.value}),className:"w-full border rounded-xl p-2",children:[i.jsx("option",{value:"customer",children:""}),i.jsx("option",{value:"owner",children:" "}),i.jsx("option",{value:"courier",children:""}),i.jsx("option",{value:"admin",children:""}),i.jsx("option",{value:"developer",children:""})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>ei(C.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:""}),i.jsx("button",{onClick:()=>z(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:""})]})]}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold",children:C.name||" "}),i.jsx("p",{className:"text-sm text-gray-600",children:C.email}),i.jsx("p",{className:"text-xs mt-1",children:Ih(C.role)})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>{z(C.uid),J(C)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:i.jsx(Dv,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>Cr(C.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:i.jsx(sn,{className:"w-4 h-4"})})]})]})})},C.uid))})]}),s==="couriers"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold",children:["  (",h.couriers,")"]}),i.jsx("button",{onClick:()=>go(!po),className:"flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-xl font-semibold",children:po?" ":"  "})]}),po&&i.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[i.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"   "}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"email",placeholder:"courier@example.com",value:ir,onChange:C=>xo(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"password",placeholder:"6   ",value:Tr,onChange:C=>vo(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),i.jsx("input",{type:"text",placeholder:" ",value:yo,onChange:C=>Hi(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),i.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:ot,onChange:C=>xt(C.target.value),className:"w-full border rounded-xl p-3"})]})]}),i.jsx("button",{onClick:Mc,disabled:Js||!ir.trim()||!Tr.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Js?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):"   "})]}),i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[b.filter(C=>C.role==="courier").map(C=>i.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold",children:C.name||" "}),i.jsx("p",{className:"text-sm text-gray-600",children:C.email}),C.phone&&i.jsxs("p",{className:"text-sm text-gray-600",children:[" ",C.phone]})]})]}),i.jsx("div",{className:"mt-4 pt-3 border-t",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[i.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[i.jsx("p",{className:"text-lg font-bold text-green-600",children:w.filter(H=>H.courierId===C.uid&&H.status==="delivered").length}),i.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),i.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[i.jsx("p",{className:"text-lg font-bold text-blue-600",children:w.filter(H=>H.courierId===C.uid&&H.status==="out_for_delivery").length}),i.jsx("p",{className:"text-xs text-gray-600",children:" "})]})]})})]},C.uid)),h.couriers===0&&i.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"   "})]})]}),s==="admins"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold",children:["   (",E.length,")"]}),i.jsxs("button",{onClick:()=>cn(!ln),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[i.jsx(rc,{className:"w-5 h-5"}),ln?"":" "]})]}),ln&&i.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[i.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"    "}),i.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"           "}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"  :"}),i.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[b.filter(C=>C.role==="customer").slice(0,10).map(C=>i.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:C.name||" "}),i.jsx("p",{className:"text-sm text-gray-500",children:C.email})]}),i.jsx("button",{onClick:async()=>{if(await n.confirm(`   ${C.name||C.email}  `,{title:"  "}))try{await xe(Z($,"users",C.uid),{role:"admin"}),e.success("     "),cn(!1),lt()}catch{e.error("  ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:" "})]},C.uid)),b.filter(C=>C.role==="customer").length===0&&i.jsx("p",{className:"text-gray-500 text-center py-4",children:"    "})]})]}),i.jsxs("div",{className:"border-t pt-4 mt-4",children:[i.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"     :"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"email",placeholder:"admin@example.com",value:rs,onChange:C=>Sc(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"password",placeholder:"  (6   )",value:kr,onChange:C=>Bi(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),i.jsx("input",{type:"text",placeholder:" ",value:ss,onChange:C=>Ys(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),i.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:zi,onChange:C=>qi(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),i.jsx("button",{onClick:Lc,disabled:mo||!rs.trim()||!kr.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:mo?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(rc,{className:"w-5 h-5"}),"  "]})}),i.jsx("p",{className:"text-xs text-orange-600 mt-2",children:" :        .     ."})]}),i.jsx("div",{className:"border-t pt-4 mt-4",children:i.jsx("p",{className:"text-xs text-gray-500",children:'         ""'})})]}),i.jsxs("div",{className:"space-y-4",children:[E.map(C=>i.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[i.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>$n(on===C.uid?null:C.uid),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold",children:C.name||" "}),i.jsx("p",{className:"text-sm text-gray-600",children:C.email})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-left",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(dj,{className:"w-4 h-4 text-green-600"}),i.jsxs("span",{className:"font-bold text-green-600",children:[C.walletBalance.toFixed(2)," ."]})]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[": ",C.totalEarnings.toFixed(2)," . | ",C.restaurantsCount," "]})]}),on===C.uid?i.jsx(V5,{className:"w-5 h-5 text-gray-400"}):i.jsx(rj,{className:"w-5 h-5 text-gray-400"})]})]})}),on===C.uid&&i.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[i.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["      (",C.restaurants.length,"):"]}),C.restaurants.length>0?i.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:C.restaurants.map(H=>i.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:H.logoUrl?i.jsx("img",{src:H.logoUrl,alt:H.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-sm",children:H.name}),i.jsx("p",{className:"text-xs text-gray-500",children:H.city||" "})]})]},H.id))}):i.jsx("p",{className:"text-gray-500 text-sm",children:"    "}),i.jsx("div",{className:"mt-4 pt-3 border-t",children:i.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[i.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[i.jsx("p",{className:"font-bold text-green-700",children:C.walletBalance.toFixed(2)}),i.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),i.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[i.jsx("p",{className:"font-bold text-blue-700",children:C.totalEarnings.toFixed(2)}),i.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),i.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[i.jsx("p",{className:"font-bold text-purple-700",children:w.filter(H=>H.referredBy===C.uid).length}),i.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})})]})]},C.uid)),E.length===0&&i.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"   "})]})]}),s==="settings"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold",children:"  "}),L?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{j(!1),k(p)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:""}),i.jsx("button",{onClick:Th,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:" "})]}):i.jsx("button",{onClick:()=>j(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:" "})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),L?i.jsx("input",{type:"number",value:x.deliveryFee||0,onChange:C=>k({...x,deliveryFee:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):i.jsxs("p",{className:"text-2xl font-bold",children:[p.deliveryFee||7," ."]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),L?i.jsx("input",{type:"number",step:"0.1",value:x.platformFee||1,onChange:C=>k({...x,platformFee:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):i.jsxs("p",{className:"text-2xl font-bold",children:[p.platformFee||1," ./"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),L?i.jsx("input",{type:"number",step:"0.05",value:x.adminCommissionRate||.75,onChange:C=>k({...x,adminCommissionRate:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):i.jsxs("p",{className:"text-2xl font-bold",children:[p.adminCommissionRate||.75," ./"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   "}),L?i.jsx("input",{type:"number",value:x.minOrderAmount||0,onChange:C=>k({...x,minOrderAmount:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):i.jsxs("p",{className:"text-2xl font-bold",children:[p.minOrderAmount||20," ."]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),L?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"time",value:((Ro=x.workingHours)==null?void 0:Ro.open)||"09:00",onChange:C=>k({...x,workingHours:{...x.workingHours,open:C.target.value}}),className:"flex-1 border rounded-xl p-3"}),i.jsx("input",{type:"time",value:((Po=x.workingHours)==null?void 0:Po.close)||"23:00",onChange:C=>k({...x,workingHours:{...x.workingHours,close:C.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):i.jsxs("p",{className:"text-2xl font-bold",children:[((na=p.workingHours)==null?void 0:na.open)||"09:00"," - ",((ra=p.workingHours)==null?void 0:ra.close)||"23:00"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),L?i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x.maintenanceMode||!1,onChange:C=>k({...x,maintenanceMode:C.target.checked}),className:"w-6 h-6"}),i.jsx("span",{className:"text-lg",children:x.maintenanceMode?"":""})]}):i.jsx("p",{className:`text-2xl font-bold ${p.maintenanceMode?"text-red-600":"text-green-600"}`,children:p.maintenanceMode?" ":" "})]})]})}),i.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[i.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"   (  = 1.75 .):"}),i.jsxs("div",{className:"text-sky-800 space-y-2",children:[i.jsxs("p",{children:[" ",i.jsx("strong",{children:" :"})," ",p.platformFee||1," .   "]}),i.jsxs("p",{children:[" ",i.jsx("strong",{children:" :"})," ",p.adminCommissionRate||.75," .   "]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[i.jsx("p",{className:"font-bold mb-2",children:" :   5 "}),i.jsxs("p",{children:[" ",i.jsx("strong",{children:"    :"})]}),i.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[i.jsxs("li",{children:["  : 5  ",p.adminCommissionRate||.75," = ",i.jsxs("strong",{children:[(5*(p.adminCommissionRate||.75)).toFixed(2)," ."]})]}),i.jsxs("li",{children:["  : 5  ",p.platformFee||1," = ",i.jsxs("strong",{children:[(5*(p.platformFee||1)).toFixed(2)," ."]})]}),i.jsxs("li",{className:"text-green-700",children:[": ",i.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})]}),i.jsxs("p",{className:"mt-2",children:[" ",i.jsx("strong",{children:"    :"})]}),i.jsx("ul",{className:"mr-6 list-disc text-sm",children:i.jsxs("li",{children:["    : 5  1.75 = ",i.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})})]})]})]})]}),s==="tasks"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold",children:"   "}),i.jsxs("button",{onClick:()=>Yi(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[i.jsx(kh,{className:"w-5 h-5"})," "]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(C=>i.jsxs("button",{onClick:()=>lr(C),className:`px-4 py-2 rounded-xl font-semibold transition ${zn===C?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[C==="all"&&" ",C==="pending"&&"  ",C==="in_progress"&&"  ",C==="completed"&&" ",C==="cancelled"&&" "]},C))}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Bn.filter(C=>C.status==="pending").length}),i.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),i.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Bn.filter(C=>C.status==="in_progress").length}),i.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),i.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:Bn.filter(C=>C.status==="completed").length}),i.jsx("p",{className:"text-sm text-green-700",children:""})]}),i.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-red-600",children:Bn.filter(C=>C.status==="cancelled").length}),i.jsx("p",{className:"text-sm text-red-700",children:""})]})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:Bn.filter(C=>zn==="all"||C.status===zn).length===0?i.jsxs("div",{className:"p-8 text-center text-gray-500",children:[i.jsx("p",{className:"text-4xl mb-2",children:""}),i.jsxs("p",{children:["   ",zn!=="all"&&"  "]})]}):i.jsx("div",{className:"divide-y",children:Bn.filter(C=>zn==="all"||C.status===zn).map(C=>{var W,le,be;const H=b.find(Se=>Se.uid===C.assignedTo);return i.jsx("div",{className:"p-4 hover:bg-gray-50",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${C.priority==="high"?"bg-red-100 text-red-700":C.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:C.priority==="high"?" ":C.priority==="medium"?" ":" "}),i.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${C.status==="pending"?"bg-yellow-100 text-yellow-700":C.status==="in_progress"?"bg-blue-100 text-blue-700":C.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[C.status==="pending"&&"  ",C.status==="in_progress"&&"  ",C.status==="completed"&&" ",C.status==="cancelled"&&" "]})]}),i.jsx("h3",{className:"font-bold text-gray-800",children:C.title}),C.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description}),i.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[i.jsxs("span",{children:[" ",(H==null?void 0:H.name)||C.assignedToName||" "]}),C.dueDate&&i.jsxs("span",{children:[" ",new Date(C.dueDate).toLocaleDateString("ar-SA")]}),i.jsxs("span",{children:[" ",((be=(le=(W=C.createdAt)==null?void 0:W.toDate)==null?void 0:le.call(W))==null?void 0:be.toLocaleDateString("ar-SA"))||" "]})]}),C.notes&&i.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:[" ",C.notes]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[C.status==="pending"&&i.jsx("button",{onClick:async()=>{try{await xe(Z($,"tasks",C.id),{status:"in_progress",updatedAt:ae()}),e.success("  "),lt()}catch{e.error("   ")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:" ",children:""}),(C.status==="pending"||C.status==="in_progress")&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:async()=>{try{await xe(Z($,"tasks",C.id),{status:"completed",completedAt:ae(),updatedAt:ae()}),e.success("  "),lt()}catch{e.error("   ")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:" ",children:""}),i.jsx("button",{onClick:async()=>{if(await n.confirm("    ",{dangerous:!0}))try{await xe(Z($,"tasks",C.id),{status:"cancelled",updatedAt:ae()}),e.success("  "),lt()}catch{e.error("   ")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]}),i.jsx("button",{onClick:async()=>{if(await n.confirm("     ",{dangerous:!0}))try{await Xn(Z($,"tasks",C.id)),e.success("  "),lt()}catch{e.error("   ")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]})]})},C.id)})})}),Zs&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"   "}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),i.jsx("input",{type:"text",value:mt,onChange:C=>Ji(C.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:":    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),i.jsx("textarea",{value:os,onChange:C=>Ir(C.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:" ..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),i.jsxs("select",{value:Zi,onChange:C=>jo(C.target.value),className:"w-full border rounded-xl px-4 py-2",children:[i.jsx("option",{value:"",children:"--   --"}),b.filter(C=>C.role==="admin").map(C=>i.jsx("option",{value:C.uid,children:C.name||C.email},C.uid))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),i.jsxs("select",{value:Sr,onChange:C=>Eo(C.target.value),className:"w-full border rounded-xl px-4 py-2",children:[i.jsx("option",{value:"low",children:" "}),i.jsx("option",{value:"medium",children:" "}),i.jsx("option",{value:"high",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:" "}),i.jsx("input",{type:"date",value:Oc,onChange:C=>ls(C.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>{Yi(!1),Ji(""),Ir(""),jo(""),Eo("medium"),ls("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:""}),i.jsx("button",{onClick:async()=>{if(!mt.trim()||!Zi){e.error("   ");return}ea(!0);try{const C=b.find(H=>H.uid===Zi);await Zn(ue($,"tasks"),{title:mt.trim(),description:os.trim(),assignedTo:Zi,assignedToName:(C==null?void 0:C.name)||(C==null?void 0:C.email)||"",status:"pending",priority:Sr,dueDate:Oc||null,createdBy:t==null?void 0:t.uid,createdAt:ae(),updatedAt:ae(),completedAt:null,notes:""}),e.success("   "),Yi(!1),Ji(""),Ir(""),jo(""),Eo("medium"),ls(""),lt()}catch(C){console.error(C),e.error("   ")}finally{ea(!1)}},disabled:ko,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:ko?" ...":" "})]})]})})]}),s==="tools"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-xl font-bold",children:"  "}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:()=>{const C={exportDate:new Date().toISOString(),users:b.length,restaurants:N.length,orders:w.length,admins:E.length,stats:h,settings:p},H=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),W=URL.createObjectURL(H),le=document.createElement("a");le.href=W,le.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,le.click(),e.success("   ")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:" "}),i.jsx("p",{className:"text-xs opacity-75",children:"  JSON"})]})]}),i.jsxs("button",{onClick:()=>{const C=[[" ","","","",""].join(","),...w.map(be=>{var Se,Je,yt;return[be.id.slice(-8),be.restaurantName||" ",be.total,be.status,((yt=(Je=(Se=be.createdAt)==null?void 0:Se.toDate)==null?void 0:Je.call(Se))==null?void 0:yt.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),H=new Blob(["\uFEFF"+C],{type:"text/csv;charset=utf-8"}),W=URL.createObjectURL(H),le=document.createElement("a");le.href=W,le.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,le.click(),e.success("   ")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:" "}),i.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]}),i.jsxs("button",{onClick:()=>{const C=[["","","",""].join(","),...b.map(be=>[be.name||" ",be.email,be.role,be.phone||""].join(","))].join(`
`),H=new Blob(["\uFEFF"+C],{type:"text/csv;charset=utf-8"}),W=URL.createObjectURL(H),le=document.createElement("a");le.href=W,le.download=`users-${new Date().toISOString().split("T")[0]}.csv`,le.click(),e.success("   ")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:" "}),i.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:async()=>{const C=w.filter(W=>W.status==="pending");if(C.length===0){e.info("   ");return}if(await n.confirm(`  ${C.length}  .   `,{title:"  ",dangerous:!0}))try{await Promise.all(C.map(W=>xe(Z($,"orders",W.id),{status:"cancelled",updatedAt:ae()}))),e.success(`  ${C.length} `),lt()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:"  "}),i.jsxs("p",{className:"text-xs opacity-75",children:[w.filter(C=>C.status==="pending").length,"  "]})]})]}),i.jsxs("button",{onClick:async()=>{const C=new Date;C.setMonth(C.getMonth()-3);const H=w.filter(le=>{var Se,Je;return(((Je=(Se=le.createdAt)==null?void 0:Se.toDate)==null?void 0:Je.call(Se))||new Date)<C&&(le.status==="delivered"||le.status==="cancelled")});if(H.length===0){e.info("   ");return}if(await n.confirm(`  ${H.length}   (  3 ).   `,{title:"  ",dangerous:!0}))try{await Promise.all(H.map(le=>Xn(Z($,"orders",le.id)))),e.success(`  ${H.length}  `),lt()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:"  "}),i.jsx("p",{className:"text-xs opacity-75",children:"   3 "})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"font-semibold",children:"Firestore"})]}),i.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"font-semibold",children:"Authentication"})]}),i.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"font-semibold",children:"Storage"})]}),i.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"Project ID"}),i.jsx("p",{className:"font-mono",children:Tn.projectId})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),i.jsx("p",{className:"font-mono",children:Tn.storageBucket})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:" "}),i.jsx("p",{className:"font-bold",children:p.appVersion||"1.0.0"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:" "}),i.jsx("p",{className:`font-bold ${p.maintenanceMode?"text-red-600":"text-green-600"}`,children:p.maintenanceMode?" ":" "})]})]})]})]}),s==="licenses"&&i.jsx(pD,{restaurants:N,onUpdate:So,toast:e,dialog:n}),i.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:i.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[i.jsxs("span",{children:[" ",t==null?void 0:t.email]}),i.jsxs("span",{children:[" ",t==null?void 0:t.uid.slice(0,12),"..."]}),i.jsxs("span",{children:[" ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},pD=({restaurants:t,onUpdate:e,toast:n,dialog:r})=>{const[s,a]=T.useState("pending"),[o,c]=T.useState({}),[u,d]=T.useState(null),[h,m]=T.useState(""),[p,_]=T.useState(null),[b,A]=T.useState(new Set),[N,v]=T.useState(""),[w,y]=T.useState(!1),E=t.filter(V=>V.commercialLicenseUrl),R=t.filter(V=>!V.commercialLicenseUrl),L=E.filter(V=>s==="all"?!0:s==="missing"?!1:V.licenseStatus===s||!V.licenseStatus&&s==="pending"),j={all:E.length,pending:E.filter(V=>!V.licenseStatus||V.licenseStatus==="pending").length,approved:E.filter(V=>V.licenseStatus==="approved").length,rejected:E.filter(V=>V.licenseStatus==="rejected").length,missing:R.length},x=async(V,K)=>{if(!K.trim()){n.warning("  ");return}_(V.id);try{await Zn(ue($,"notifications"),{type:"license_reminder",recipientId:V.ownerId,recipientType:"owner",restaurantId:V.id,restaurantName:V.name,title:" :   ",message:K,read:!1,createdAt:ae()}),n.success(`    ${V.name}`),m("")}catch(z){n.error("  : "+(z.message||"  "))}finally{_(null)}},k=async()=>{if(!N.trim()){n.warning("  ");return}const V=b.size>0?R.filter(z=>b.has(z.id)):R;if(V.length===0){n.warning("    ");return}if(await r.confirm(`       ${V.length} `,{title:"  "})){y(!0);try{const z=V.map(U=>Zn(ue($,"notifications"),{type:"license_reminder",recipientId:U.ownerId,recipientType:"owner",restaurantId:U.id,restaurantName:U.name,title:" :   ",message:N,read:!1,createdAt:ae()}));await Promise.all(z),n.success(`    ${V.length}   `),v(""),A(new Set)}catch(z){n.error("   : "+(z.message||"  "))}finally{y(!1)}}},S=()=>{b.size===R.length?A(new Set):A(new Set(R.map(V=>V.id)))},D=V=>{const K=new Set(b);K.has(V)?K.delete(V):K.add(V),A(K)},O=async(V,K)=>{const z=o[V]||"";if(K==="rejected"&&!z.trim()){n.warning("   ");return}const U=K==="approved"?" ":"";if(await r.confirm(`    ${U}   `,{title:`${U} `})){d(V);try{await xe(Z($,"restaurants",V),{licenseStatus:K,licenseNotes:K==="rejected"?z:"",updatedAt:ae()}),n.success(K==="approved"?"    ":"  "),c(ne=>({...ne,[V]:""})),e()}catch(ne){n.error(" : "+(ne.message||"  "))}finally{d(null)}}},P=async(V,K)=>{const z=" ";if(await r.confirm(`     ${z}  "${V.name}"
      .`,{title:`  ${z}`})){d(V.id);try{const J={licenseStatus:null,licenseNotes:"",updatedAt:ae(),commercialLicenseUrl:null};await xe(Z($,"restaurants",V.id),J),await Zn(ue($,"notifications"),{type:"license_deleted",recipientId:V.ownerId,recipientType:"owner",restaurantId:V.id,restaurantName:V.name,title:`   ${z}`,message:`  ${z}  .         .`,read:!1,createdAt:ae()}),n.success(`  ${z}    `),e()}catch(J){n.error("  : "+(J.message||"  "))}finally{d(null)}}},Q=V=>{switch(V){case"approved":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[i.jsx($t,{className:"w-3 h-3"})," "]});case"rejected":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:[i.jsx(pi,{className:"w-3 h-3"})," "]});default:return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[i.jsx(vr,{className:"w-3 h-3"}),"  "]})}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[i.jsx(Rv,{className:"w-6 h-6 text-sky-500"})," "]}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:["pending","approved","rejected","all","missing"].map(V=>i.jsxs("button",{onClick:()=>a(V),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${s===V?V==="missing"?"bg-orange-500 text-white":"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[V==="all"&&` (${j.all})`,V==="pending"&&`  (${j.pending})`,V==="approved"&&` (${j.approved})`,V==="rejected"&&` (${j.rejected})`,V==="missing"&&`   (${j.missing})`]},V))})]}),s==="missing"&&i.jsx("div",{className:"space-y-4",children:R.length===0?i.jsxs("div",{className:"text-center py-12 text-gray-400",children:[i.jsx($t,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),i.jsx("p",{className:"text-green-600 font-semibold",children:"    "})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-2xl p-5",children:[i.jsx("h3",{className:"font-bold text-orange-800 mb-3 flex items-center gap-2",children:"   "}),i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:b.size===R.length,onChange:S,className:"w-5 h-5 rounded border-orange-300 text-orange-500 focus:ring-orange-500"}),i.jsxs("span",{className:"text-sm text-orange-700",children:["  (",R.length,")"]})]}),b.size>0&&i.jsxs("span",{className:"text-sm bg-orange-200 text-orange-800 px-2 py-1 rounded-full",children:[": ",b.size]})]}),i.jsx("textarea",{placeholder:"      (    )...",value:N,onChange:V=>v(V.target.value),className:"w-full border border-orange-200 rounded-xl p-3 text-sm resize-none h-24 focus:ring-2 focus:ring-orange-400 focus:border-transparent"}),i.jsx("button",{onClick:k,disabled:w||!N.trim(),className:"mt-3 w-full flex items-center justify-center gap-2 bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:w?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:["   ",b.size>0?b.size:R.length," "]})})]}),i.jsx("div",{className:"grid gap-3",children:R.map(V=>i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow-sm hover:shadow-md transition",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:b.has(V.id),onChange:()=>D(V.id),className:"w-5 h-5 mt-1 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-800",children:V.name}),i.jsx("p",{className:"text-sm text-gray-500",children:V.city||" "})]}),i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-semibold",children:[i.jsx(pi,{className:"w-3 h-3"}),"  "]})]}),i.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[V.email&&i.jsxs("span",{children:[" ",V.email]}),V.phone&&i.jsxs("span",{children:[" ",V.phone]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",placeholder:" ...",value:p===V.id?h:"",onChange:K=>{_(V.id),m(K.target.value)},onFocus:()=>_(V.id),className:"flex-1 border rounded-lg px-3 py-2 text-sm"}),i.jsx("button",{onClick:()=>x(V,h),disabled:p===V.id&&!h.trim(),className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg text-sm font-medium transition disabled:opacity-50",children:""})]})]})]})},V.id))})]})}),s!=="missing"&&L.length===0?i.jsxs("div",{className:"text-center py-12 text-gray-400",children:[i.jsx(Rv,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),i.jsxs("p",{children:["   ",s==="pending"?" ":s==="approved"?" ":s==="rejected"?"":""]})]}):s!=="missing"&&i.jsx("div",{className:"grid gap-4",children:L.map(V=>i.jsxs("div",{className:"bg-white border rounded-2xl p-5 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:V.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[V.city||" ","  ",V.email||" "]})]}),Q(V.licenseStatus)]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:V.commercialLicenseUrl&&i.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"  "}),i.jsx("button",{onClick:()=>P(V),disabled:u===V.id,className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"  ",children:i.jsx(sn,{className:"w-4 h-4"})})]}),i.jsxs("a",{href:V.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[i.jsx(J5,{className:"w-4 h-4"})," "]})]})}),V.commercialLicenseUrl&&i.jsxs("button",{onClick:()=>P(V),disabled:u===V.id,className:"w-full flex items-center justify-center gap-2 mb-4 py-2 px-4 border-2 border-dashed border-red-200 text-red-500 hover:bg-red-50 hover:border-red-300 rounded-xl text-sm font-medium transition",children:[i.jsx(sn,{className:"w-4 h-4"}),"    "]}),V.licenseStatus==="rejected"&&V.licenseNotes&&i.jsxs("div",{className:"bg-red-50 text-red-700 rounded-xl p-3 mb-4 text-sm",children:[i.jsx("strong",{children:" :"})," ",V.licenseNotes]}),V.licenseStatus!=="approved"&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("textarea",{placeholder:" ( )...",value:o[V.id]||"",onChange:K=>c(z=>({...z,[V.id]:K.target.value})),className:"w-full border rounded-xl p-3 text-sm resize-none h-20"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>O(V.id,"approved"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[i.jsx($t,{className:"w-5 h-5"}),""]}),i.jsxs("button",{onClick:()=>O(V.id,"rejected"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[i.jsx(pi,{className:"w-5 h-5"}),""]})]})]}),V.licenseStatus==="approved"&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("textarea",{placeholder:"  ...",value:o[V.id]||"",onChange:K=>c(z=>({...z,[V.id]:K.target.value})),className:"w-full border border-yellow-200 rounded-xl p-3 text-sm resize-none h-20 focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>O(V.id,"rejected"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[i.jsx(pi,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>P(V),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[i.jsx(sn,{className:"w-5 h-5"}),"  "]})]})]})]},V.id))})]})},gD="afrtalbyt2026@gmail.com",xD=()=>{const t=Xt(),[e,n]=T.useState(""),[r,s]=T.useState(""),[a,o]=T.useState(!1),[c,u]=T.useState(""),[d,h]=T.useState(!1),m=async p=>{if(p.preventDefault(),u(""),e.trim().toLowerCase()!==gD){u("        ");return}if(r.length<6){u("     6   ");return}o(!0);try{const b=(await yl(On,e.trim(),r)).user.uid;await fn(Z($,"users",b),{email:e.trim(),name:" ",role:"developer",createdAt:ae()}),h(!0),setTimeout(()=>{t("/developer")},2e3)}catch(_){console.error("Setup error:",_),_.code==="auth/email-already-in-use"?u("      "):_.code==="auth/invalid-email"?u("   "):_.code==="auth/weak-password"?u("   "):u(" : "+(_.message||" "))}finally{o(!1)}};return d?i.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:i.jsxs("div",{className:"text-center bg-gradient-to-br from-green-500 to-emerald-600 text-white p-10 rounded-3xl shadow-2xl",children:[i.jsx($t,{className:"w-20 h-20 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"    !"}),i.jsx("p",{children:"   ..."})]})}):i.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:i.jsx("div",{className:"w-full max-w-md",children:i.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 p-6 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ic,{className:"w-10 h-10 text-white"})}),i.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2",children:[i.jsx(Vn,{className:"w-6 h-6"}),"  ",i.jsx(Vn,{className:"w-6 h-6"})]}),i.jsx("p",{className:"text-white/80 text-sm mt-2",children:"   "})]}),i.jsxs("form",{onSubmit:m,className:"p-6 space-y-5",children:[c&&i.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 rounded-xl p-3 text-sm text-center",children:c}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[i.jsx(mx,{className:"w-4 h-4"})," "]}),i.jsx("input",{type:"email",value:e,onChange:p=>n(p.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[i.jsx(h6,{className:"w-4 h-4"})," "]}),i.jsx("input",{type:"password",value:r,onChange:p=>s(p.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),i.jsx("button",{type:"submit",disabled:a,className:"w-full py-4 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white font-bold rounded-xl hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(hx,{className:"w-5 h-5"}),"  "]})}),i.jsx("p",{className:"text-gray-500 text-xs text-center",children:"      "})]})]})})})},vt=({children:t})=>{const{user:e,loading:n}=ze();return n?i.jsx("div",{className:"p-8 text-center",children:" ..."}):e?i.jsx(i.Fragment,{children:t}):i.jsx(ig,{to:"/login",replace:!0})},yD=()=>{var c;const[t,e]=T.useState([]),[n,r]=T.useState(!0),[s,a]=T.useState(null);T.useEffect(()=>{(async()=>{try{a(null);const u=at(ue($,"orders"),br("createdAt","desc"),Jg(10)),h=(await Ue(u)).docs.map(m=>{var _,b,A,N,v,w;const p=m.data();return{id:m.id,restaurantId:p.restaurantId??null,firstItemOwnerId:((b=(_=p==null?void 0:p.items)==null?void 0:_[0])==null?void 0:b.ownerId)??null,customerId:p.customerId??null,createdAtISO:((w=(v=(N=(A=p.createdAt)==null?void 0:A.toDate)==null?void 0:N.call(A))==null?void 0:v.toISOString)==null?void 0:w.call(v))??null}});e(h)}catch(u){if(String((u==null?void 0:u.message)||"").includes("index"))try{const h=(await Ue(ue($,"orders"))).docs.map(m=>{var _,b,A,N,v,w;const p=m.data();return{id:m.id,restaurantId:p.restaurantId??null,firstItemOwnerId:((b=(_=p==null?void 0:p.items)==null?void 0:_[0])==null?void 0:b.ownerId)??null,customerId:p.customerId??null,createdAtISO:((w=(v=(N=(A=p.createdAt)==null?void 0:A.toDate)==null?void 0:N.call(A))==null?void 0:v.toISOString)==null?void 0:w.call(v))??null}});e(h),a("     createdAt     .")}catch(d){a("     : "+((d==null?void 0:d.message)||d))}else a("  : "+((u==null?void 0:u.message)||u))}finally{r(!1)}})()},[]);const o=(c=mn.options)==null?void 0:c.projectId;return i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),i.jsxs("div",{className:"text-sm",children:["ProjectId: ",i.jsx("b",{children:String(o)})]}),s&&i.jsx("div",{className:"text-red-600 text-sm",children:s}),n&&i.jsx("div",{children:" Loading"}),!n&&t.length===0&&i.jsxs("div",{className:"text-gray-600",children:["     collection: ",i.jsx("code",{children:"orders"}),"   ."]}),t.map(u=>i.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[i.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",u.id]}),i.jsxs("div",{children:["restaurantId: ",i.jsx("b",{children:String(u.restaurantId)})]}),i.jsxs("div",{children:["items[0].ownerId: ",i.jsx("b",{children:String(u.firstItemOwnerId)})]}),i.jsxs("div",{children:["customerId: ",i.jsx("b",{children:String(u.customerId)})]}),i.jsxs("div",{children:["createdAt: ",i.jsx("b",{children:u.createdAtISO||""})]})]},u.id))]})};function vD(){const{locationRequired:t,refreshUserData:e,loading:n}=ze();return!n&&t?i.jsx(k3,{onLocationSaved:e}):i.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[i.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[i.jsx(E3,{}),i.jsx(_3,{})]}),i.jsx("div",{className:"h-[100px] sm:h-[120px]"}),i.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:i.jsxs(zk,{children:[i.jsx(Ee,{path:"/",element:i.jsx(T3,{})}),i.jsx(Ee,{path:"/restaurants",element:i.jsx(S3,{})}),i.jsx(Ee,{path:"/menu",element:i.jsx(D3,{})}),i.jsx(Ee,{path:"/cart",element:i.jsx(O3,{})}),i.jsx(Ee,{path:"/login",element:i.jsx(L3,{})}),i.jsx(Ee,{path:"/customer-login",element:i.jsx(V3,{})}),i.jsx(Ee,{path:"/register",element:i.jsx(M3,{})}),i.jsx(Ee,{path:"/privacy-policy",element:i.jsx(F3,{})}),i.jsx(Ee,{path:"/account-deleted",element:i.jsx(U3,{})}),i.jsx(Ee,{path:"/setup-dev",element:i.jsx(xD,{})}),i.jsx(Ee,{path:"/chat",element:i.jsx(vt,{children:i.jsx(Re,{allow:["customer","courier","owner","admin"],children:i.jsx(cD,{})})})}),i.jsx(Ee,{path:"/notifications",element:i.jsx(vt,{children:i.jsx(Re,{allow:["customer","courier","owner","admin","developer"],children:i.jsx(uD,{})})})}),i.jsx(Ee,{path:"/checkout",element:i.jsx(vt,{children:i.jsx(Re,{allow:["customer","admin"],children:i.jsx(z3,{})})})}),i.jsx(Ee,{path:"/orders",element:i.jsx(vt,{children:i.jsx(Re,{allow:["customer","admin"],children:i.jsx(q3,{})})})}),i.jsx(Ee,{path:"/profile",element:i.jsx(vt,{children:i.jsx(Re,{allow:["customer","courier","owner","admin","developer"],children:i.jsx(H3,{})})})}),i.jsx(Ee,{path:"/owner",element:i.jsx(vt,{children:i.jsx(Re,{allow:["owner"],children:i.jsx(W3,{})})})}),i.jsx(Ee,{path:"/owner/menu",element:i.jsx(vt,{children:i.jsx(Re,{allow:["owner"],children:i.jsx(Q3,{})})})}),i.jsx(Ee,{path:"/owner/orders",element:i.jsx(vt,{children:i.jsx(Re,{allow:["owner"],children:i.jsx(Y3,{})})})}),i.jsx(Ee,{path:"/owner/edit",element:i.jsx(vt,{children:i.jsx(Re,{allow:["owner"],children:i.jsx(J3,{})})})}),i.jsx(Ee,{path:"/owner/courier-requests",element:i.jsx(vt,{children:i.jsx(Re,{allow:["owner","developer"],children:i.jsx(Z3,{})})})}),i.jsx(Ee,{path:"/owner/packages",element:i.jsx(vt,{children:i.jsx(Re,{allow:["owner"],children:i.jsx(eD,{})})})}),i.jsx(Ee,{path:"/owner/promotion",element:i.jsx(vt,{children:i.jsx(Re,{allow:["owner"],children:i.jsx(tD,{})})})}),i.jsx(Ee,{path:"/courier",element:i.jsx(vt,{children:i.jsx(Re,{allow:["courier","developer"],children:i.jsx(nD,{})})})}),i.jsx(Ee,{path:"/courier/hiring",element:i.jsx(vt,{children:i.jsx(Re,{allow:["courier","developer"],children:i.jsx(rD,{})})})}),i.jsx(Ee,{path:"/admin",element:i.jsx(vt,{children:i.jsx(Re,{allow:["admin","developer"],children:i.jsx(dD,{})})})}),i.jsx(Ee,{path:"/admin/restaurants",element:i.jsx(vt,{children:i.jsx(Re,{allow:["admin","developer"],children:i.jsx(hD,{})})})}),i.jsx(Ee,{path:"/admin/orders",element:i.jsx(vt,{children:i.jsx(Re,{allow:["admin","developer"],children:i.jsx(fD,{})})})}),i.jsx(Ee,{path:"/developer",element:i.jsx(vt,{children:i.jsx(Re,{allow:["developer","admin"],children:i.jsx(mD,{})})})}),i.jsx(Ee,{path:"/__debug_orders",element:i.jsx(yD,{})}),i.jsx(Ee,{path:"*",element:i.jsx(ig,{to:"/",replace:!0})})]})}),i.jsx(j3,{})]})}T.createContext(void 0);const wD=({children:t})=>i.jsx(i.Fragment,{children:t});Df.createRoot(document.getElementById("root")).render(i.jsx(Yv.StrictMode,{children:i.jsx(Yk,{children:i.jsx(C3,{children:i.jsx(b3,{children:i.jsx(f5,{children:i.jsxs(wD,{children:["   ",i.jsx(vD,{})]})})})})})}));
