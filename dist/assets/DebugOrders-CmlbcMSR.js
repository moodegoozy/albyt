import{u as b,d as v,j as t,f as A}from"./index-FuU3jBZc.js";import{r as m,N as D}from"./vendor-react-C_wfuX_s.js";import{q as E,m as w,F as q,G as L,t as y}from"./vendor-firebase-Co4MdP0H.js";import"./vendor-icons-Dyg7S3Xx.js";const P=()=>{var S;const{role:x,loading:I}=b(),[p,j]=m.useState([]),[g,N]=m.useState(!0),[f,u]=m.useState(null);if(m.useEffect(()=>{I||x!=="developer"||(async()=>{try{u(null);const e=E(w(v,"orders"),q("createdAt","desc"),L(10)),h=(await y(e)).docs.map(n=>{var i,c,r,o,d,l;const s=n.data();return{id:n.id,restaurantId:s.restaurantId??null,firstItemOwnerId:((c=(i=s==null?void 0:s.items)==null?void 0:i[0])==null?void 0:c.ownerId)??null,customerId:s.customerId??null,createdAtISO:((l=(d=(o=(r=s.createdAt)==null?void 0:r.toDate)==null?void 0:o.call(r))==null?void 0:d.toISOString)==null?void 0:l.call(d))??null}});j(h)}catch(e){if(String((e==null?void 0:e.message)||"").includes("index"))try{const h=(await y(w(v,"orders"))).docs.map(n=>{var i,c,r,o,d,l;const s=n.data();return{id:n.id,restaurantId:s.restaurantId??null,firstItemOwnerId:((c=(i=s==null?void 0:s.items)==null?void 0:i[0])==null?void 0:c.ownerId)??null,customerId:s.customerId??null,createdAtISO:((l=(d=(o=(r=s.createdAt)==null?void 0:r.toDate)==null?void 0:o.call(r))==null?void 0:d.toISOString)==null?void 0:l.call(d))??null}});j(h),u("âš ï¸ Ù…Ø§ ÙÙŠÙ‡ ÙÙ‡Ø±Ø³ Ù„Ù€ createdAt â€” Ø¹Ø±Ø¶Ù†Ø§ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯ÙˆÙ† ØªØ±ØªÙŠØ¨.")}catch(a){u("âŒ ÙØ´Ù„ Ø§Ù„Ø¬Ù„Ø¨ Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† ØªØ±ØªÙŠØ¨: "+((a==null?void 0:a.message)||a))}else u("âŒ Ø®Ø·Ø£ Ø§Ù„Ø¬Ù„Ø¨: "+((e==null?void 0:e.message)||e))}finally{N(!1)}})()},[I,x]),I)return t.jsx("div",{className:"p-8 text-center",children:"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."});if(x!=="developer")return t.jsx(D,{to:"/",replace:!0});const O=(S=A.options)==null?void 0:S.projectId;return t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsx("h1",{className:"text-xl font-bold",children:"ðŸ”§ DEBUG: Orders Snapshot (Ù„Ù„Ù…Ø·ÙˆØ± ÙÙ‚Ø·)"}),t.jsxs("div",{className:"text-sm",children:["ProjectId: ",t.jsx("b",{children:String(O)})]}),f&&t.jsx("div",{className:"text-red-600 text-sm",children:f}),g&&t.jsx("div",{children:"â³ Loadingâ€¦"}),!g&&p.length===0&&t.jsxs("div",{className:"text-gray-600",children:["Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙŠ Ù…Ø³ØªÙ†Ø¯Ø§Øª ÙÙŠ collection: ",t.jsx("code",{children:"orders"})," ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹."]}),p.map(e=>t.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[t.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",e.id]}),t.jsxs("div",{children:["restaurantId: ",t.jsx("b",{children:String(e.restaurantId)})]}),t.jsxs("div",{children:["items[0].ownerId: ",t.jsx("b",{children:String(e.firstItemOwnerId)})]}),t.jsxs("div",{children:["customerId: ",t.jsx("b",{children:String(e.customerId)})]}),t.jsxs("div",{children:["createdAt: ",t.jsx("b",{children:e.createdAtISO||"â€”"})]})]},e.id))]})};export{P as DebugOrders};
