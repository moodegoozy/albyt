function xT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var S0={exports:{}},uc={},b0={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=Symbol.for("react.element"),ET=Symbol.for("react.portal"),TT=Symbol.for("react.fragment"),IT=Symbol.for("react.strict_mode"),NT=Symbol.for("react.profiler"),kT=Symbol.for("react.provider"),ST=Symbol.for("react.context"),bT=Symbol.for("react.forward_ref"),RT=Symbol.for("react.suspense"),AT=Symbol.for("react.memo"),CT=Symbol.for("react.lazy"),kg=Symbol.iterator;function PT(t){return t===null||typeof t!="object"?null:(t=kg&&t[kg]||t["@@iterator"],typeof t=="function"?t:null)}var R0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A0=Object.assign,C0={};function $i(t,e,n){this.props=t,this.context=e,this.refs=C0,this.updater=n||R0}$i.prototype.isReactComponent={};$i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function P0(){}P0.prototype=$i.prototype;function Pf(t,e,n){this.props=t,this.context=e,this.refs=C0,this.updater=n||R0}var jf=Pf.prototype=new P0;jf.constructor=Pf;A0(jf,$i.prototype);jf.isPureReactComponent=!0;var Sg=Array.isArray,j0=Object.prototype.hasOwnProperty,Df={current:null},D0={key:!0,ref:!0,__self:!0,__source:!0};function O0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)j0.call(e,r)&&!D0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:La,type:t,key:i,ref:o,props:s,_owner:Df.current}}function jT(t,e){return{$$typeof:La,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Of(t){return typeof t=="object"&&t!==null&&t.$$typeof===La}function DT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bg=/\/+/g;function yd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DT(""+t.key):e.toString(36)}function Zl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case La:case ET:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+yd(o,0):r,Sg(s)?(n="",t!=null&&(n=t.replace(bg,"$&/")+"/"),Zl(s,e,n,"",function(d){return d})):s!=null&&(Of(s)&&(s=jT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(bg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Sg(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+yd(i,l);o+=Zl(i,e,n,c,s)}else if(c=PT(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+yd(i,l++),o+=Zl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rl(t,e,n){if(t==null)return t;var r=[],s=0;return Zl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function OT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},eu={transition:null},LT={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:eu,ReactCurrentOwner:Df};function L0(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Rl,forEach:function(t,e,n){Rl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rl(t,function(){e++}),e},toArray:function(t){return Rl(t,function(e){return e})||[]},only:function(t){if(!Of(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=$i;ie.Fragment=TT;ie.Profiler=NT;ie.PureComponent=Pf;ie.StrictMode=IT;ie.Suspense=RT;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LT;ie.act=L0;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=A0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Df.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)j0.call(e,c)&&!D0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:La,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:ST,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kT,_context:t},t.Consumer=t};ie.createElement=O0;ie.createFactory=function(t){var e=O0.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:bT,render:t}};ie.isValidElement=Of;ie.lazy=function(t){return{$$typeof:CT,_payload:{_status:-1,_result:t},_init:OT}};ie.memo=function(t,e){return{$$typeof:AT,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=eu.transition;eu.transition={};try{t()}finally{eu.transition=e}};ie.unstable_act=L0;ie.useCallback=function(t,e){return At.current.useCallback(t,e)};ie.useContext=function(t){return At.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return At.current.useDeferredValue(t)};ie.useEffect=function(t,e){return At.current.useEffect(t,e)};ie.useId=function(){return At.current.useId()};ie.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return At.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};ie.useRef=function(t){return At.current.useRef(t)};ie.useState=function(t){return At.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return At.current.useTransition()};ie.version="18.3.1";b0.exports=ie;var C=b0.exports;const V0=wT(C),VT=xT({__proto__:null,default:V0},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT=C,UT=Symbol.for("react.element"),FT=Symbol.for("react.fragment"),BT=Object.prototype.hasOwnProperty,$T=MT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zT={key:!0,ref:!0,__self:!0,__source:!0};function M0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)BT.call(e,r)&&!zT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:UT,type:t,key:i,ref:o,props:s,_owner:$T.current}}uc.Fragment=FT;uc.jsx=M0;uc.jsxs=M0;S0.exports=uc;var u=S0.exports,ah={},U0={exports:{}},Qt={},F0={exports:{}},B0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var J=$.length;$.push(Q);e:for(;0<J;){var fe=J-1>>>1,me=$[fe];if(0<s(me,Q))$[fe]=Q,$[J]=me,J=fe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],J=$.pop();if(J!==Q){$[0]=J;e:for(var fe=0,me=$.length,xe=me>>>1;fe<xe;){var dn=2*(fe+1)-1,Ze=$[dn],hn=dn+1,fn=$[hn];if(0>s(Ze,J))hn<me&&0>s(fn,Ze)?($[fe]=fn,$[hn]=J,fe=hn):($[fe]=Ze,$[dn]=J,fe=dn);else if(hn<me&&0>s(fn,J))$[fe]=fn,$[hn]=J,fe=hn;else break e}}return Q}function s($,Q){var J=$.sortIndex-Q.sortIndex;return J!==0?J:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,p=null,g=3,E=!1,S=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=$)r(d),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(d)}}function P($){if(I=!1,v($),!S)if(n(c)!==null)S=!0,cn(V);else{var Q=n(d);Q!==null&&Xe(P,Q.startTime-$)}}function V($,Q){S=!1,I&&(I=!1,w(y),y=-1),E=!0;var J=g;try{for(v(Q),p=n(c);p!==null&&(!(p.expirationTime>Q)||$&&!A());){var fe=p.callback;if(typeof fe=="function"){p.callback=null,g=p.priorityLevel;var me=fe(p.expirationTime<=Q);Q=t.unstable_now(),typeof me=="function"?p.callback=me:p===n(c)&&r(c),v(Q)}else r(c);p=n(c)}if(p!==null)var xe=!0;else{var dn=n(d);dn!==null&&Xe(P,dn.startTime-Q),xe=!1}return xe}finally{p=null,g=J,E=!1}}var M=!1,T=null,y=-1,N=5,k=-1;function A(){return!(t.unstable_now()-k<N)}function j(){if(T!==null){var $=t.unstable_now();k=$;var Q=!0;try{Q=T(!0,$)}finally{Q?b():(M=!1,T=null)}}else M=!1}var b;if(typeof x=="function")b=function(){x(j)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,Yt=it.port2;it.port1.onmessage=j,b=function(){Yt.postMessage(null)}}else b=function(){R(j,0)};function cn($){T=$,M||(M=!0,b())}function Xe($,Q){y=R(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){S||E||(S=!0,cn(V))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var J=g;g=Q;try{return $()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=g;g=$;try{return Q()}finally{g=J}},t.unstable_scheduleCallback=function($,Q,J){var fe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?fe+J:fe):J=fe,$){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=J+me,$={id:f++,callback:Q,priorityLevel:$,startTime:J,expirationTime:me,sortIndex:-1},J>fe?($.sortIndex=J,e(d,$),n(c)===null&&$===n(d)&&(I?(w(y),y=-1):I=!0,Xe(P,J-fe))):($.sortIndex=me,e(c,$),S||E||(S=!0,cn(V))),$},t.unstable_shouldYield=A,t.unstable_wrapCallback=function($){var Q=g;return function(){var J=g;g=Q;try{return $.apply(this,arguments)}finally{g=J}}}})(B0);F0.exports=B0;var qT=F0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT=C,Gt=qT;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $0=new Set,ra={};function Ds(t,e){ki(t,e),ki(t+"Capture",e)}function ki(t,e){for(ra[t]=e,t=0;t<e.length;t++)$0.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lh=Object.prototype.hasOwnProperty,WT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rg={},Ag={};function KT(t){return lh.call(Ag,t)?!0:lh.call(Rg,t)?!1:WT.test(t)?Ag[t]=!0:(Rg[t]=!0,!1)}function GT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QT(t,e,n,r){if(e===null||typeof e>"u"||GT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lf=/[\-:]([a-z])/g;function Vf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lf,Vf);ht[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lf,Vf);ht[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lf,Vf);ht[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mf(t,e,n,r){var s=ht.hasOwnProperty(e)?ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QT(e,n,s,r)&&(n=null),r||s===null?KT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cr=HT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Al=Symbol.for("react.element"),ni=Symbol.for("react.portal"),ri=Symbol.for("react.fragment"),Uf=Symbol.for("react.strict_mode"),uh=Symbol.for("react.profiler"),z0=Symbol.for("react.provider"),q0=Symbol.for("react.context"),Ff=Symbol.for("react.forward_ref"),ch=Symbol.for("react.suspense"),dh=Symbol.for("react.suspense_list"),Bf=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),H0=Symbol.for("react.offscreen"),Cg=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,vd;function Co(t){if(vd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vd=e&&e[1]||""}return`
`+vd+t}var _d=!1;function xd(t,e){if(!t||_d)return"";_d=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{_d=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Co(t):""}function XT(t){switch(t.tag){case 5:return Co(t.type);case 16:return Co("Lazy");case 13:return Co("Suspense");case 19:return Co("SuspenseList");case 0:case 2:case 15:return t=xd(t.type,!1),t;case 11:return t=xd(t.type.render,!1),t;case 1:return t=xd(t.type,!0),t;default:return""}}function hh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ri:return"Fragment";case ni:return"Portal";case uh:return"Profiler";case Uf:return"StrictMode";case ch:return"Suspense";case dh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case q0:return(t.displayName||"Context")+".Consumer";case z0:return(t._context.displayName||"Context")+".Provider";case Ff:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bf:return e=t.displayName||null,e!==null?e:hh(t.type)||"Memo";case yr:e=t._payload,t=t._init;try{return hh(t(e))}catch{}}return null}function YT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hh(e);case 8:return e===Uf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function W0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JT(t){var e=W0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=JT(t))}function K0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=W0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fh(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function G0(t,e){e=e.checked,e!=null&&Mf(t,"checked",e,!1)}function ph(t,e){G0(t,e);var n=Fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mh(t,e.type,n):e.hasOwnProperty("defaultValue")&&mh(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mh(t,e,n){(e!=="number"||_u(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Po=Array.isArray;function gi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function gh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Po(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fr(n)}}function Q0(t,e){var n=Fr(e.value),r=Fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Og(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function X0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?X0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pl,Y0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pl=Pl||document.createElement("div"),Pl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZT=["Webkit","ms","Moz","O"];Object.keys(Bo).forEach(function(t){ZT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bo[e]=Bo[t]})});function J0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bo.hasOwnProperty(t)&&Bo[t]?(""+e).trim():e+"px"}function Z0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=J0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var eI=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vh(t,e){if(e){if(eI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function _h(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xh=null;function $f(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wh=null,yi=null,vi=null;function Lg(t){if(t=Ua(t)){if(typeof wh!="function")throw Error(B(280));var e=t.stateNode;e&&(e=pc(e),wh(t.stateNode,t.type,e))}}function e_(t){yi?vi?vi.push(t):vi=[t]:yi=t}function t_(){if(yi){var t=yi,e=vi;if(vi=yi=null,Lg(t),e)for(t=0;t<e.length;t++)Lg(e[t])}}function n_(t,e){return t(e)}function r_(){}var wd=!1;function s_(t,e,n){if(wd)return t(e,n);wd=!0;try{return n_(t,e,n)}finally{wd=!1,(yi!==null||vi!==null)&&(r_(),t_())}}function ia(t,e){var n=t.stateNode;if(n===null)return null;var r=pc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Eh=!1;if(nr)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){Eh=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{Eh=!1}function tI(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var $o=!1,xu=null,wu=!1,Th=null,nI={onError:function(t){$o=!0,xu=t}};function rI(t,e,n,r,s,i,o,l,c){$o=!1,xu=null,tI.apply(nI,arguments)}function sI(t,e,n,r,s,i,o,l,c){if(rI.apply(this,arguments),$o){if($o){var d=xu;$o=!1,xu=null}else throw Error(B(198));wu||(wu=!0,Th=d)}}function Os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vg(t){if(Os(t)!==t)throw Error(B(188))}function iI(t){var e=t.alternate;if(!e){if(e=Os(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Vg(s),t;if(i===r)return Vg(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function o_(t){return t=iI(t),t!==null?a_(t):null}function a_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=a_(t);if(e!==null)return e;t=t.sibling}return null}var l_=Gt.unstable_scheduleCallback,Mg=Gt.unstable_cancelCallback,oI=Gt.unstable_shouldYield,aI=Gt.unstable_requestPaint,Be=Gt.unstable_now,lI=Gt.unstable_getCurrentPriorityLevel,zf=Gt.unstable_ImmediatePriority,u_=Gt.unstable_UserBlockingPriority,Eu=Gt.unstable_NormalPriority,uI=Gt.unstable_LowPriority,c_=Gt.unstable_IdlePriority,cc=null,Rn=null;function cI(t){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(cc,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:fI,dI=Math.log,hI=Math.LN2;function fI(t){return t>>>=0,t===0?32:31-(dI(t)/hI|0)|0}var jl=64,Dl=4194304;function jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=jo(l):(i&=o,i!==0&&(r=jo(i)))}else o=n&~s,o!==0?r=jo(o):i!==0&&(r=jo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_n(e),s=1<<n,r|=t[n],e&=~s;return r}function pI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-_n(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=pI(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Ih(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d_(){var t=jl;return jl<<=1,!(jl&4194240)&&(jl=64),t}function Ed(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Va(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_n(e),t[e]=n}function gI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-_n(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function qf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_n(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function h_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f_,Hf,p_,m_,g_,Nh=!1,Ol=[],Rr=null,Ar=null,Cr=null,oa=new Map,aa=new Map,_r=[],yI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ug(t,e){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(e.pointerId)}}function To(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ua(e),e!==null&&Hf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vI(t,e,n,r,s){switch(e){case"focusin":return Rr=To(Rr,t,e,n,r,s),!0;case"dragenter":return Ar=To(Ar,t,e,n,r,s),!0;case"mouseover":return Cr=To(Cr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return oa.set(i,To(oa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,aa.set(i,To(aa.get(i)||null,t,e,n,r,s)),!0}return!1}function y_(t){var e=hs(t.target);if(e!==null){var n=Os(e);if(n!==null){if(e=n.tag,e===13){if(e=i_(n),e!==null){t.blockedOn=e,g_(t.priority,function(){p_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xh=r,n.target.dispatchEvent(r),xh=null}else return e=Ua(n),e!==null&&Hf(e),t.blockedOn=n,!1;e.shift()}return!0}function Fg(t,e,n){tu(t)&&n.delete(e)}function _I(){Nh=!1,Rr!==null&&tu(Rr)&&(Rr=null),Ar!==null&&tu(Ar)&&(Ar=null),Cr!==null&&tu(Cr)&&(Cr=null),oa.forEach(Fg),aa.forEach(Fg)}function Io(t,e){t.blockedOn===e&&(t.blockedOn=null,Nh||(Nh=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,_I)))}function la(t){function e(s){return Io(s,t)}if(0<Ol.length){Io(Ol[0],t);for(var n=1;n<Ol.length;n++){var r=Ol[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rr!==null&&Io(Rr,t),Ar!==null&&Io(Ar,t),Cr!==null&&Io(Cr,t),oa.forEach(e),aa.forEach(e),n=0;n<_r.length;n++)r=_r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_r.length&&(n=_r[0],n.blockedOn===null);)y_(n),n.blockedOn===null&&_r.shift()}var _i=cr.ReactCurrentBatchConfig,Iu=!0;function xI(t,e,n,r){var s=ge,i=_i.transition;_i.transition=null;try{ge=1,Wf(t,e,n,r)}finally{ge=s,_i.transition=i}}function wI(t,e,n,r){var s=ge,i=_i.transition;_i.transition=null;try{ge=4,Wf(t,e,n,r)}finally{ge=s,_i.transition=i}}function Wf(t,e,n,r){if(Iu){var s=kh(t,e,n,r);if(s===null)Pd(t,e,r,Nu,n),Ug(t,r);else if(vI(s,t,e,n,r))r.stopPropagation();else if(Ug(t,r),e&4&&-1<yI.indexOf(t)){for(;s!==null;){var i=Ua(s);if(i!==null&&f_(i),i=kh(t,e,n,r),i===null&&Pd(t,e,r,Nu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Pd(t,e,r,null,n)}}var Nu=null;function kh(t,e,n,r){if(Nu=null,t=$f(r),t=hs(t),t!==null)if(e=Os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nu=t,null}function v_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lI()){case zf:return 1;case u_:return 4;case Eu:case uI:return 16;case c_:return 536870912;default:return 16}default:return 16}}var Nr=null,Kf=null,nu=null;function __(){if(nu)return nu;var t,e=Kf,n=e.length,r,s="value"in Nr?Nr.value:Nr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return nu=s.slice(t,1<r?1-r:void 0)}function ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ll(){return!0}function Bg(){return!1}function Xt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ll:Bg,this.isPropagationStopped=Bg,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),e}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gf=Xt(zi),Ma=je({},zi,{view:0,detail:0}),EI=Xt(Ma),Td,Id,No,dc=je({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==No&&(No&&t.type==="mousemove"?(Td=t.screenX-No.screenX,Id=t.screenY-No.screenY):Id=Td=0,No=t),Td)},movementY:function(t){return"movementY"in t?t.movementY:Id}}),$g=Xt(dc),TI=je({},dc,{dataTransfer:0}),II=Xt(TI),NI=je({},Ma,{relatedTarget:0}),Nd=Xt(NI),kI=je({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),SI=Xt(kI),bI=je({},zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RI=Xt(bI),AI=je({},zi,{data:0}),zg=Xt(AI),CI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jI[t])?!!e[t]:!1}function Qf(){return DI}var OI=je({},Ma,{key:function(t){if(t.key){var e=CI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qf,charCode:function(t){return t.type==="keypress"?ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LI=Xt(OI),VI=je({},dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qg=Xt(VI),MI=je({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qf}),UI=Xt(MI),FI=je({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),BI=Xt(FI),$I=je({},dc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zI=Xt($I),qI=[9,13,27,32],Xf=nr&&"CompositionEvent"in window,zo=null;nr&&"documentMode"in document&&(zo=document.documentMode);var HI=nr&&"TextEvent"in window&&!zo,x_=nr&&(!Xf||zo&&8<zo&&11>=zo),Hg=" ",Wg=!1;function w_(t,e){switch(t){case"keyup":return qI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var si=!1;function WI(t,e){switch(t){case"compositionend":return E_(e);case"keypress":return e.which!==32?null:(Wg=!0,Hg);case"textInput":return t=e.data,t===Hg&&Wg?null:t;default:return null}}function KI(t,e){if(si)return t==="compositionend"||!Xf&&w_(t,e)?(t=__(),nu=Kf=Nr=null,si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return x_&&e.locale!=="ko"?null:e.data;default:return null}}var GI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GI[t.type]:e==="textarea"}function T_(t,e,n,r){e_(r),e=ku(e,"onChange"),0<e.length&&(n=new Gf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qo=null,ua=null;function QI(t){D_(t,0)}function hc(t){var e=ai(t);if(K0(e))return t}function XI(t,e){if(t==="change")return e}var I_=!1;if(nr){var kd;if(nr){var Sd="oninput"in document;if(!Sd){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),Sd=typeof Gg.oninput=="function"}kd=Sd}else kd=!1;I_=kd&&(!document.documentMode||9<document.documentMode)}function Qg(){qo&&(qo.detachEvent("onpropertychange",N_),ua=qo=null)}function N_(t){if(t.propertyName==="value"&&hc(ua)){var e=[];T_(e,ua,t,$f(t)),s_(QI,e)}}function YI(t,e,n){t==="focusin"?(Qg(),qo=e,ua=n,qo.attachEvent("onpropertychange",N_)):t==="focusout"&&Qg()}function JI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hc(ua)}function ZI(t,e){if(t==="click")return hc(e)}function eN(t,e){if(t==="input"||t==="change")return hc(e)}function tN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:tN;function ca(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!lh.call(e,s)||!wn(t[s],e[s]))return!1}return!0}function Xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yg(t,e){var n=Xg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xg(n)}}function k_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function S_(){for(var t=window,e=_u();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_u(t.document)}return e}function Yf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nN(t){var e=S_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k_(n.ownerDocument.documentElement,n)){if(r!==null&&Yf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Yg(n,i);var o=Yg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rN=nr&&"documentMode"in document&&11>=document.documentMode,ii=null,Sh=null,Ho=null,bh=!1;function Jg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bh||ii==null||ii!==_u(r)||(r=ii,"selectionStart"in r&&Yf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ho&&ca(Ho,r)||(Ho=r,r=ku(Sh,"onSelect"),0<r.length&&(e=new Gf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ii)))}function Vl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oi={animationend:Vl("Animation","AnimationEnd"),animationiteration:Vl("Animation","AnimationIteration"),animationstart:Vl("Animation","AnimationStart"),transitionend:Vl("Transition","TransitionEnd")},bd={},b_={};nr&&(b_=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function fc(t){if(bd[t])return bd[t];if(!oi[t])return t;var e=oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in b_)return bd[t]=e[n];return t}var R_=fc("animationend"),A_=fc("animationiteration"),C_=fc("animationstart"),P_=fc("transitionend"),j_=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(t,e){j_.set(t,e),Ds(e,[t])}for(var Rd=0;Rd<Zg.length;Rd++){var Ad=Zg[Rd],sN=Ad.toLowerCase(),iN=Ad[0].toUpperCase()+Ad.slice(1);Kr(sN,"on"+iN)}Kr(R_,"onAnimationEnd");Kr(A_,"onAnimationIteration");Kr(C_,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(P_,"onTransitionEnd");ki("onMouseEnter",["mouseout","mouseover"]);ki("onMouseLeave",["mouseout","mouseover"]);ki("onPointerEnter",["pointerout","pointerover"]);ki("onPointerLeave",["pointerout","pointerover"]);Ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function ey(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sI(r,e,void 0,t),t.currentTarget=null}function D_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;ey(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;ey(s,l,d),i=c}}}if(wu)throw t=Th,wu=!1,Th=null,t}function Ee(t,e){var n=e[jh];n===void 0&&(n=e[jh]=new Set);var r=t+"__bubble";n.has(r)||(O_(e,t,2,!1),n.add(r))}function Cd(t,e,n){var r=0;e&&(r|=4),O_(n,t,r,e)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function da(t){if(!t[Ml]){t[Ml]=!0,$0.forEach(function(n){n!=="selectionchange"&&(oN.has(n)||Cd(n,!1,t),Cd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ml]||(e[Ml]=!0,Cd("selectionchange",!1,e))}}function O_(t,e,n,r){switch(v_(e)){case 1:var s=xI;break;case 4:s=wI;break;default:s=Wf}n=s.bind(null,e,n,t),s=void 0,!Eh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Pd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=hs(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}s_(function(){var d=i,f=$f(n),p=[];e:{var g=j_.get(t);if(g!==void 0){var E=Gf,S=t;switch(t){case"keypress":if(ru(n)===0)break e;case"keydown":case"keyup":E=LI;break;case"focusin":S="focus",E=Nd;break;case"focusout":S="blur",E=Nd;break;case"beforeblur":case"afterblur":E=Nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=$g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=II;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=UI;break;case R_:case A_:case C_:E=SI;break;case P_:E=BI;break;case"scroll":E=EI;break;case"wheel":E=zI;break;case"copy":case"cut":case"paste":E=RI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=qg}var I=(e&4)!==0,R=!I&&t==="scroll",w=I?g!==null?g+"Capture":null:g;I=[];for(var x=d,v;x!==null;){v=x;var P=v.stateNode;if(v.tag===5&&P!==null&&(v=P,w!==null&&(P=ia(x,w),P!=null&&I.push(ha(x,P,v)))),R)break;x=x.return}0<I.length&&(g=new E(g,S,null,n,f),p.push({event:g,listeners:I}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==xh&&(S=n.relatedTarget||n.fromElement)&&(hs(S)||S[rr]))break e;if((E||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,E?(S=n.relatedTarget||n.toElement,E=d,S=S?hs(S):null,S!==null&&(R=Os(S),S!==R||S.tag!==5&&S.tag!==6)&&(S=null)):(E=null,S=d),E!==S)){if(I=$g,P="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(I=qg,P="onPointerLeave",w="onPointerEnter",x="pointer"),R=E==null?g:ai(E),v=S==null?g:ai(S),g=new I(P,x+"leave",E,n,f),g.target=R,g.relatedTarget=v,P=null,hs(f)===d&&(I=new I(w,x+"enter",S,n,f),I.target=v,I.relatedTarget=R,P=I),R=P,E&&S)t:{for(I=E,w=S,x=0,v=I;v;v=Qs(v))x++;for(v=0,P=w;P;P=Qs(P))v++;for(;0<x-v;)I=Qs(I),x--;for(;0<v-x;)w=Qs(w),v--;for(;x--;){if(I===w||w!==null&&I===w.alternate)break t;I=Qs(I),w=Qs(w)}I=null}else I=null;E!==null&&ty(p,g,E,I,!1),S!==null&&R!==null&&ty(p,R,S,I,!0)}}e:{if(g=d?ai(d):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var V=XI;else if(Kg(g))if(I_)V=eN;else{V=JI;var M=YI}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=ZI);if(V&&(V=V(t,d))){T_(p,V,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&mh(g,"number",g.value)}switch(M=d?ai(d):window,t){case"focusin":(Kg(M)||M.contentEditable==="true")&&(ii=M,Sh=d,Ho=null);break;case"focusout":Ho=Sh=ii=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,Jg(p,n,f);break;case"selectionchange":if(rN)break;case"keydown":case"keyup":Jg(p,n,f)}var T;if(Xf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else si?w_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(x_&&n.locale!=="ko"&&(si||y!=="onCompositionStart"?y==="onCompositionEnd"&&si&&(T=__()):(Nr=f,Kf="value"in Nr?Nr.value:Nr.textContent,si=!0)),M=ku(d,y),0<M.length&&(y=new zg(y,t,null,n,f),p.push({event:y,listeners:M}),T?y.data=T:(T=E_(n),T!==null&&(y.data=T)))),(T=HI?WI(t,n):KI(t,n))&&(d=ku(d,"onBeforeInput"),0<d.length&&(f=new zg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=T))}D_(p,e)})}function ha(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ku(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ia(t,n),i!=null&&r.unshift(ha(t,i,s)),i=ia(t,e),i!=null&&r.push(ha(t,i,s))),t=t.return}return r}function Qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ty(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=ia(n,i),c!=null&&o.unshift(ha(n,c,l))):s||(c=ia(n,i),c!=null&&o.push(ha(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aN=/\r\n?/g,lN=/\u0000|\uFFFD/g;function ny(t){return(typeof t=="string"?t:""+t).replace(aN,`
`).replace(lN,"")}function Ul(t,e,n){if(e=ny(e),ny(t)!==e&&n)throw Error(B(425))}function Su(){}var Rh=null,Ah=null;function Ch(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ph=typeof setTimeout=="function"?setTimeout:void 0,uN=typeof clearTimeout=="function"?clearTimeout:void 0,ry=typeof Promise=="function"?Promise:void 0,cN=typeof queueMicrotask=="function"?queueMicrotask:typeof ry<"u"?function(t){return ry.resolve(null).then(t).catch(dN)}:Ph;function dN(t){setTimeout(function(){throw t})}function jd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),la(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);la(e)}function Pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qi=Math.random().toString(36).slice(2),kn="__reactFiber$"+qi,fa="__reactProps$"+qi,rr="__reactContainer$"+qi,jh="__reactEvents$"+qi,hN="__reactListeners$"+qi,fN="__reactHandles$"+qi;function hs(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sy(t);t!==null;){if(n=t[kn])return n;t=sy(t)}return e}t=n,n=t.parentNode}return null}function Ua(t){return t=t[kn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function pc(t){return t[fa]||null}var Dh=[],li=-1;function Gr(t){return{current:t}}function Ie(t){0>li||(t.current=Dh[li],Dh[li]=null,li--)}function _e(t,e){li++,Dh[li]=t.current,t.current=e}var Br={},Et=Gr(Br),Vt=Gr(!1),xs=Br;function Si(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(t){return t=t.childContextTypes,t!=null}function bu(){Ie(Vt),Ie(Et)}function iy(t,e,n){if(Et.current!==Br)throw Error(B(168));_e(Et,e),_e(Vt,n)}function L_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,YT(t)||"Unknown",s));return je({},n,r)}function Ru(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,xs=Et.current,_e(Et,t),_e(Vt,Vt.current),!0}function oy(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=L_(t,e,xs),r.__reactInternalMemoizedMergedChildContext=t,Ie(Vt),Ie(Et),_e(Et,t)):Ie(Vt),_e(Vt,n)}var qn=null,mc=!1,Dd=!1;function V_(t){qn===null?qn=[t]:qn.push(t)}function pN(t){mc=!0,V_(t)}function Qr(){if(!Dd&&qn!==null){Dd=!0;var t=0,e=ge;try{var n=qn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qn=null,mc=!1}catch(s){throw qn!==null&&(qn=qn.slice(t+1)),l_(zf,Qr),s}finally{ge=e,Dd=!1}}return null}var ui=[],ci=0,Au=null,Cu=0,Zt=[],en=0,ws=null,Wn=1,Kn="";function ls(t,e){ui[ci++]=Cu,ui[ci++]=Au,Au=t,Cu=e}function M_(t,e,n){Zt[en++]=Wn,Zt[en++]=Kn,Zt[en++]=ws,ws=t;var r=Wn;t=Kn;var s=32-_n(r)-1;r&=~(1<<s),n+=1;var i=32-_n(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Wn=1<<32-_n(e)+s|n<<s|r,Kn=i+t}else Wn=1<<i|n<<s|r,Kn=t}function Jf(t){t.return!==null&&(ls(t,1),M_(t,1,0))}function Zf(t){for(;t===Au;)Au=ui[--ci],ui[ci]=null,Cu=ui[--ci],ui[ci]=null;for(;t===ws;)ws=Zt[--en],Zt[en]=null,Kn=Zt[--en],Zt[en]=null,Wn=Zt[--en],Zt[en]=null}var Kt=null,qt=null,be=!1,vn=null;function U_(t,e){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ay(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Kt=t,qt=Pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Kt=t,qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ws!==null?{id:Wn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Kt=t,qt=null,!0):!1;default:return!1}}function Oh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lh(t){if(be){var e=qt;if(e){var n=e;if(!ay(t,e)){if(Oh(t))throw Error(B(418));e=Pr(n.nextSibling);var r=Kt;e&&ay(t,e)?U_(r,n):(t.flags=t.flags&-4097|2,be=!1,Kt=t)}}else{if(Oh(t))throw Error(B(418));t.flags=t.flags&-4097|2,be=!1,Kt=t}}}function ly(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kt=t}function Fl(t){if(t!==Kt)return!1;if(!be)return ly(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ch(t.type,t.memoizedProps)),e&&(e=qt)){if(Oh(t))throw F_(),Error(B(418));for(;e;)U_(t,e),e=Pr(e.nextSibling)}if(ly(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qt=Pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qt=null}}else qt=Kt?Pr(t.stateNode.nextSibling):null;return!0}function F_(){for(var t=qt;t;)t=Pr(t.nextSibling)}function bi(){qt=Kt=null,be=!1}function ep(t){vn===null?vn=[t]:vn.push(t)}var mN=cr.ReactCurrentBatchConfig;function ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Bl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uy(t){var e=t._init;return e(t._payload)}function B_(t){function e(w,x){if(t){var v=w.deletions;v===null?(w.deletions=[x],w.flags|=16):v.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function s(w,x){return w=Lr(w,x),w.index=0,w.sibling=null,w}function i(w,x,v){return w.index=v,t?(v=w.alternate,v!==null?(v=v.index,v<x?(w.flags|=2,x):v):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,x,v,P){return x===null||x.tag!==6?(x=Bd(v,w.mode,P),x.return=w,x):(x=s(x,v),x.return=w,x)}function c(w,x,v,P){var V=v.type;return V===ri?f(w,x,v.props.children,P,v.key):x!==null&&(x.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===yr&&uy(V)===x.type)?(P=s(x,v.props),P.ref=ko(w,x,v),P.return=w,P):(P=cu(v.type,v.key,v.props,null,w.mode,P),P.ref=ko(w,x,v),P.return=w,P)}function d(w,x,v,P){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=$d(v,w.mode,P),x.return=w,x):(x=s(x,v.children||[]),x.return=w,x)}function f(w,x,v,P,V){return x===null||x.tag!==7?(x=ys(v,w.mode,P,V),x.return=w,x):(x=s(x,v),x.return=w,x)}function p(w,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Bd(""+x,w.mode,v),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Al:return v=cu(x.type,x.key,x.props,null,w.mode,v),v.ref=ko(w,null,x),v.return=w,v;case ni:return x=$d(x,w.mode,v),x.return=w,x;case yr:var P=x._init;return p(w,P(x._payload),v)}if(Po(x)||wo(x))return x=ys(x,w.mode,v,null),x.return=w,x;Bl(w,x)}return null}function g(w,x,v,P){var V=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return V!==null?null:l(w,x,""+v,P);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Al:return v.key===V?c(w,x,v,P):null;case ni:return v.key===V?d(w,x,v,P):null;case yr:return V=v._init,g(w,x,V(v._payload),P)}if(Po(v)||wo(v))return V!==null?null:f(w,x,v,P,null);Bl(w,v)}return null}function E(w,x,v,P,V){if(typeof P=="string"&&P!==""||typeof P=="number")return w=w.get(v)||null,l(x,w,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Al:return w=w.get(P.key===null?v:P.key)||null,c(x,w,P,V);case ni:return w=w.get(P.key===null?v:P.key)||null,d(x,w,P,V);case yr:var M=P._init;return E(w,x,v,M(P._payload),V)}if(Po(P)||wo(P))return w=w.get(v)||null,f(x,w,P,V,null);Bl(x,P)}return null}function S(w,x,v,P){for(var V=null,M=null,T=x,y=x=0,N=null;T!==null&&y<v.length;y++){T.index>y?(N=T,T=null):N=T.sibling;var k=g(w,T,v[y],P);if(k===null){T===null&&(T=N);break}t&&T&&k.alternate===null&&e(w,T),x=i(k,x,y),M===null?V=k:M.sibling=k,M=k,T=N}if(y===v.length)return n(w,T),be&&ls(w,y),V;if(T===null){for(;y<v.length;y++)T=p(w,v[y],P),T!==null&&(x=i(T,x,y),M===null?V=T:M.sibling=T,M=T);return be&&ls(w,y),V}for(T=r(w,T);y<v.length;y++)N=E(T,w,y,v[y],P),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?y:N.key),x=i(N,x,y),M===null?V=N:M.sibling=N,M=N);return t&&T.forEach(function(A){return e(w,A)}),be&&ls(w,y),V}function I(w,x,v,P){var V=wo(v);if(typeof V!="function")throw Error(B(150));if(v=V.call(v),v==null)throw Error(B(151));for(var M=V=null,T=x,y=x=0,N=null,k=v.next();T!==null&&!k.done;y++,k=v.next()){T.index>y?(N=T,T=null):N=T.sibling;var A=g(w,T,k.value,P);if(A===null){T===null&&(T=N);break}t&&T&&A.alternate===null&&e(w,T),x=i(A,x,y),M===null?V=A:M.sibling=A,M=A,T=N}if(k.done)return n(w,T),be&&ls(w,y),V;if(T===null){for(;!k.done;y++,k=v.next())k=p(w,k.value,P),k!==null&&(x=i(k,x,y),M===null?V=k:M.sibling=k,M=k);return be&&ls(w,y),V}for(T=r(w,T);!k.done;y++,k=v.next())k=E(T,w,y,k.value,P),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?y:k.key),x=i(k,x,y),M===null?V=k:M.sibling=k,M=k);return t&&T.forEach(function(j){return e(w,j)}),be&&ls(w,y),V}function R(w,x,v,P){if(typeof v=="object"&&v!==null&&v.type===ri&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Al:e:{for(var V=v.key,M=x;M!==null;){if(M.key===V){if(V=v.type,V===ri){if(M.tag===7){n(w,M.sibling),x=s(M,v.props.children),x.return=w,w=x;break e}}else if(M.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===yr&&uy(V)===M.type){n(w,M.sibling),x=s(M,v.props),x.ref=ko(w,M,v),x.return=w,w=x;break e}n(w,M);break}else e(w,M);M=M.sibling}v.type===ri?(x=ys(v.props.children,w.mode,P,v.key),x.return=w,w=x):(P=cu(v.type,v.key,v.props,null,w.mode,P),P.ref=ko(w,x,v),P.return=w,w=P)}return o(w);case ni:e:{for(M=v.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(w,x.sibling),x=s(x,v.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=$d(v,w.mode,P),x.return=w,w=x}return o(w);case yr:return M=v._init,R(w,x,M(v._payload),P)}if(Po(v))return S(w,x,v,P);if(wo(v))return I(w,x,v,P);Bl(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(w,x.sibling),x=s(x,v),x.return=w,w=x):(n(w,x),x=Bd(v,w.mode,P),x.return=w,w=x),o(w)):n(w,x)}return R}var Ri=B_(!0),$_=B_(!1),Pu=Gr(null),ju=null,di=null,tp=null;function np(){tp=di=ju=null}function rp(t){var e=Pu.current;Ie(Pu),t._currentValue=e}function Vh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xi(t,e){ju=t,tp=di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(tp!==t)if(t={context:t,memoizedValue:e,next:null},di===null){if(ju===null)throw Error(B(308));di=t,ju.dependencies={lanes:0,firstContext:t}}else di=di.next=t;return e}var fs=null;function sp(t){fs===null?fs=[t]:fs.push(t)}function z_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,sp(e)):(n.next=s.next,s.next=n),e.interleaved=n,sr(t,r)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vr=!1;function ip(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,sr(t,n)}return s=r.interleaved,s===null?(e.next=e,sp(r)):(e.next=s.next,s.next=e),r.interleaved=e,sr(t,n)}function su(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qf(t,n)}}function cy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Du(t,e,n,r){var s=t.updateQueue;vr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,f=d=c=null,l=i;do{var g=l.lane,E=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=t,I=l;switch(g=e,E=n,I.tag){case 1:if(S=I.payload,typeof S=="function"){p=S.call(E,p,g);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=I.payload,g=typeof S=="function"?S.call(E,p,g):S,g==null)break e;p=je({},p,g);break e;case 2:vr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else E={eventTime:E,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=E,c=p):f=f.next=E,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ts|=o,t.lanes=o,t.memoizedState=p}}function dy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Fa={},An=Gr(Fa),pa=Gr(Fa),ma=Gr(Fa);function ps(t){if(t===Fa)throw Error(B(174));return t}function op(t,e){switch(_e(ma,e),_e(pa,t),_e(An,Fa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yh(e,t)}Ie(An),_e(An,e)}function Ai(){Ie(An),Ie(pa),Ie(ma)}function H_(t){ps(ma.current);var e=ps(An.current),n=yh(e,t.type);e!==n&&(_e(pa,t),_e(An,n))}function ap(t){pa.current===t&&(Ie(An),Ie(pa))}var Ae=Gr(0);function Ou(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Od=[];function lp(){for(var t=0;t<Od.length;t++)Od[t]._workInProgressVersionPrimary=null;Od.length=0}var iu=cr.ReactCurrentDispatcher,Ld=cr.ReactCurrentBatchConfig,Es=0,Pe=null,Ye=null,tt=null,Lu=!1,Wo=!1,ga=0,gN=0;function gt(){throw Error(B(321))}function up(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function cp(t,e,n,r,s,i){if(Es=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,iu.current=t===null||t.memoizedState===null?xN:wN,t=n(r,s),Wo){i=0;do{if(Wo=!1,ga=0,25<=i)throw Error(B(301));i+=1,tt=Ye=null,e.updateQueue=null,iu.current=EN,t=n(r,s)}while(Wo)}if(iu.current=Vu,e=Ye!==null&&Ye.next!==null,Es=0,tt=Ye=Pe=null,Lu=!1,e)throw Error(B(300));return t}function dp(){var t=ga!==0;return ga=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Pe.memoizedState=tt=t:tt=tt.next=t,tt}function un(){if(Ye===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=tt===null?Pe.memoizedState:tt.next;if(e!==null)tt=e,Ye=t;else{if(t===null)throw Error(B(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},tt===null?Pe.memoizedState=tt=t:tt=tt.next=t}return tt}function ya(t,e){return typeof e=="function"?e(t):e}function Vd(t){var e=un(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((Es&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,Pe.lanes|=f,Ts|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,wn(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,Ts|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Md(t){var e=un(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wn(i,e.memoizedState)||(Lt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function W_(){}function K_(t,e){var n=Pe,r=un(),s=e(),i=!wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Lt=!0),r=r.queue,hp(X_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,va(9,Q_.bind(null,n,r,s,e),void 0,null),rt===null)throw Error(B(349));Es&30||G_(n,e,s)}return s}function G_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q_(t,e,n,r){e.value=n,e.getSnapshot=r,Y_(e)&&J_(t)}function X_(t,e,n){return n(function(){Y_(e)&&J_(t)})}function Y_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function J_(t){var e=sr(t,1);e!==null&&xn(e,t,1,-1)}function hy(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:t},e.queue=t,t=t.dispatch=_N.bind(null,Pe,t),[e.memoizedState,t]}function va(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Z_(){return un().memoizedState}function ou(t,e,n,r){var s=Nn();Pe.flags|=t,s.memoizedState=va(1|e,n,void 0,r===void 0?null:r)}function gc(t,e,n,r){var s=un();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,r!==null&&up(r,o.deps)){s.memoizedState=va(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=va(1|e,n,i,r)}function fy(t,e){return ou(8390656,8,t,e)}function hp(t,e){return gc(2048,8,t,e)}function ex(t,e){return gc(4,2,t,e)}function tx(t,e){return gc(4,4,t,e)}function nx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rx(t,e,n){return n=n!=null?n.concat([t]):null,gc(4,4,nx.bind(null,e,t),n)}function fp(){}function sx(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&up(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ix(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&up(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ox(t,e,n){return Es&21?(wn(n,e)||(n=d_(),Pe.lanes|=n,Ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function yN(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Ld.transition;Ld.transition={};try{t(!1),e()}finally{ge=n,Ld.transition=r}}function ax(){return un().memoizedState}function vN(t,e,n){var r=Or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lx(t))ux(e,n);else if(n=z_(t,e,n,r),n!==null){var s=bt();xn(n,t,r,s),cx(n,e,r)}}function _N(t,e,n){var r=Or(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lx(t))ux(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,wn(l,o)){var c=e.interleaved;c===null?(s.next=s,sp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=z_(t,e,s,r),n!==null&&(s=bt(),xn(n,t,r,s),cx(n,e,r))}}function lx(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function ux(t,e){Wo=Lu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qf(t,n)}}var Vu={readContext:ln,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},xN={readContext:ln,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:fy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ou(4194308,4,nx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return ou(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vN.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:hy,useDebugValue:fp,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=hy(!1),e=t[0];return t=yN.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=Nn();if(be){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),rt===null)throw Error(B(349));Es&30||G_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,fy(X_.bind(null,r,i,t),[t]),r.flags|=2048,va(9,Q_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Nn(),e=rt.identifierPrefix;if(be){var n=Kn,r=Wn;n=(r&~(1<<32-_n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wN={readContext:ln,useCallback:sx,useContext:ln,useEffect:hp,useImperativeHandle:rx,useInsertionEffect:ex,useLayoutEffect:tx,useMemo:ix,useReducer:Vd,useRef:Z_,useState:function(){return Vd(ya)},useDebugValue:fp,useDeferredValue:function(t){var e=un();return ox(e,Ye.memoizedState,t)},useTransition:function(){var t=Vd(ya)[0],e=un().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:K_,useId:ax,unstable_isNewReconciler:!1},EN={readContext:ln,useCallback:sx,useContext:ln,useEffect:hp,useImperativeHandle:rx,useInsertionEffect:ex,useLayoutEffect:tx,useMemo:ix,useReducer:Md,useRef:Z_,useState:function(){return Md(ya)},useDebugValue:fp,useDeferredValue:function(t){var e=un();return Ye===null?e.memoizedState=t:ox(e,Ye.memoizedState,t)},useTransition:function(){var t=Md(ya)[0],e=un().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:K_,useId:ax,unstable_isNewReconciler:!1};function gn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yc={isMounted:function(t){return(t=t._reactInternals)?Os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Or(t),i=Yn(r,s);i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(xn(e,t,s,r),su(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Or(t),i=Yn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(xn(e,t,s,r),su(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bt(),r=Or(t),s=Yn(n,r);s.tag=2,e!=null&&(s.callback=e),e=jr(t,s,r),e!==null&&(xn(e,t,r,n),su(e,t,r))}};function py(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ca(n,r)||!ca(s,i):!0}function dx(t,e,n){var r=!1,s=Br,i=e.contextType;return typeof i=="object"&&i!==null?i=ln(i):(s=Mt(e)?xs:Et.current,r=e.contextTypes,i=(r=r!=null)?Si(t,s):Br),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function my(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yc.enqueueReplaceState(e,e.state,null)}function Uh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ip(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ln(i):(i=Mt(e)?xs:Et.current,s.context=Si(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Mh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yc.enqueueReplaceState(s,s.state,null),Du(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ci(t,e){try{var n="",r=e;do n+=XT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ud(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TN=typeof WeakMap=="function"?WeakMap:Map;function hx(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Uu||(Uu=!0,Xh=r),Fh(t,e)},n}function fx(t,e,n){n=Yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Fh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fh(t,e),typeof r!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=VN.bind(null,t,e,n),e.then(t,t))}function yy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,jr(n,e,1))),n.lanes|=1),t)}var IN=cr.ReactCurrentOwner,Lt=!1;function kt(t,e,n,r){e.child=t===null?$_(e,null,n,r):Ri(e,t.child,n,r)}function _y(t,e,n,r,s){n=n.render;var i=e.ref;return xi(e,s),r=cp(t,e,n,r,i,s),n=dp(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(be&&n&&Jf(e),e.flags|=1,kt(t,e,r,s),e.child)}function xy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,px(t,e,i,r,s)):(t=cu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ca,n(o,r)&&t.ref===e.ref)return ir(t,e,s)}return e.flags|=1,t=Lr(i,r),t.ref=e.ref,t.return=e,e.child=t}function px(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ca(i,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,ir(t,e,s)}return Bh(t,e,n,r,s)}function mx(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(fi,zt),zt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(fi,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(fi,zt),zt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(fi,zt),zt|=r;return kt(t,e,s,n),e.child}function gx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bh(t,e,n,r,s){var i=Mt(n)?xs:Et.current;return i=Si(e,i),xi(e,s),n=cp(t,e,n,r,i,s),r=dp(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(be&&r&&Jf(e),e.flags|=1,kt(t,e,n,s),e.child)}function wy(t,e,n,r,s){if(Mt(n)){var i=!0;Ru(e)}else i=!1;if(xi(e,s),e.stateNode===null)au(t,e),dx(e,n,r),Uh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=ln(d):(d=Mt(n)?xs:Et.current,d=Si(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&my(e,o,r,d),vr=!1;var g=e.memoizedState;o.state=g,Du(e,r,o,s),c=e.memoizedState,l!==r||g!==c||Vt.current||vr?(typeof f=="function"&&(Mh(e,n,f,r),c=e.memoizedState),(l=vr||py(e,n,l,r,g,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,q_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:gn(e.type,l),o.props=d,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ln(c):(c=Mt(n)?xs:Et.current,c=Si(e,c));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==c)&&my(e,o,r,c),vr=!1,g=e.memoizedState,o.state=g,Du(e,r,o,s);var S=e.memoizedState;l!==p||g!==S||Vt.current||vr?(typeof E=="function"&&(Mh(e,n,E,r),S=e.memoizedState),(d=vr||py(e,n,d,r,g,S,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return $h(t,e,n,r,i,s)}function $h(t,e,n,r,s,i){gx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&oy(e,n,!1),ir(t,e,i);r=e.stateNode,IN.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ri(e,t.child,null,i),e.child=Ri(e,null,l,i)):kt(t,e,l,i),e.memoizedState=r.state,s&&oy(e,n,!0),e.child}function yx(t){var e=t.stateNode;e.pendingContext?iy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iy(t,e.context,!1),op(t,e.containerInfo)}function Ey(t,e,n,r,s){return bi(),ep(s),e.flags|=256,kt(t,e,n,r),e.child}var zh={dehydrated:null,treeContext:null,retryLane:0};function qh(t){return{baseLanes:t,cachePool:null,transitions:null}}function vx(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Ae,s&1),t===null)return Lh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=xc(o,r,0,null),t=ys(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=qh(n),e.memoizedState=zh,t):pp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return NN(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Lr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Lr(l,i):(i=ys(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?qh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=zh,r}return i=t.child,t=i.sibling,r=Lr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pp(t,e){return e=xc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $l(t,e,n,r){return r!==null&&ep(r),Ri(e,t.child,null,n),t=pp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NN(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ud(Error(B(422))),$l(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=xc({mode:"visible",children:r.children},s,0,null),i=ys(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ri(e,t.child,null,o),e.child.memoizedState=qh(o),e.memoizedState=zh,i);if(!(e.mode&1))return $l(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=Ud(i,r,void 0),$l(t,e,o,r)}if(l=(o&t.childLanes)!==0,Lt||l){if(r=rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,sr(t,s),xn(r,t,s,-1))}return xp(),r=Ud(Error(B(421))),$l(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=MN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,qt=Pr(s.nextSibling),Kt=e,be=!0,vn=null,t!==null&&(Zt[en++]=Wn,Zt[en++]=Kn,Zt[en++]=ws,Wn=t.id,Kn=t.overflow,ws=e),e=pp(e,r.children),e.flags|=4096,e)}function Ty(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vh(t.return,e,n)}function Fd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _x(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(kt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ty(t,n,e);else if(t.tag===19)Ty(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ou(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Fd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ou(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Fd(e,!0,n,null,i);break;case"together":Fd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function au(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kN(t,e,n){switch(e.tag){case 3:yx(e),bi();break;case 5:H_(e);break;case 1:Mt(e.type)&&Ru(e);break;case 4:op(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(Pu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?vx(t,e,n):(_e(Ae,Ae.current&1),t=ir(t,e,n),t!==null?t.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _x(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,mx(t,e,n)}return ir(t,e,n)}var xx,Hh,wx,Ex;xx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hh=function(){};wx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ps(An.current);var i=null;switch(n){case"input":s=fh(t,s),r=fh(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=gh(t,s),r=gh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Su)}vh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ra.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ra.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ee("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Ex=function(t,e,n,r){n!==r&&(e.flags|=4)};function So(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function SN(t,e,n){var r=e.pendingProps;switch(Zf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return Mt(e.type)&&bu(),yt(e),null;case 3:return r=e.stateNode,Ai(),Ie(Vt),Ie(Et),lp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vn!==null&&(Zh(vn),vn=null))),Hh(t,e),yt(e),null;case 5:ap(e);var s=ps(ma.current);if(n=e.type,t!==null&&e.stateNode!=null)wx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return yt(e),null}if(t=ps(An.current),Fl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[kn]=e,r[fa]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<Do.length;s++)Ee(Do[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Pg(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":Dg(r,i),Ee("invalid",r)}vh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,l,t),s=["children",""+l]):ra.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Cl(r),jg(r,i,!0);break;case"textarea":Cl(r),Og(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Su)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=X0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kn]=e,t[fa]=r,xx(t,e,!1,!1),e.stateNode=t;e:{switch(o=_h(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<Do.length;s++)Ee(Do[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":Pg(t,r),s=fh(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Dg(t,r),s=gh(t,r),Ee("invalid",t);break;default:s=r}vh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Z0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Y0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&sa(t,c):typeof c=="number"&&sa(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ra.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ee("scroll",t):c!=null&&Mf(t,i,c,o))}switch(n){case"input":Cl(t),jg(t,r,!1);break;case"textarea":Cl(t),Og(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?gi(t,!!r.multiple,i,!1):r.defaultValue!=null&&gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Su)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)Ex(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ps(ma.current),ps(An.current),Fl(e)){if(r=e.stateNode,n=e.memoizedProps,r[kn]=e,(i=r.nodeValue!==n)&&(t=Kt,t!==null))switch(t.tag){case 3:Ul(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ul(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kn]=e,e.stateNode=r}return yt(e),null;case 13:if(Ie(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&qt!==null&&e.mode&1&&!(e.flags&128))F_(),bi(),e.flags|=98560,i=!1;else if(i=Fl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[kn]=e}else bi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),i=!1}else vn!==null&&(Zh(vn),vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Je===0&&(Je=3):xp())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return Ai(),Hh(t,e),t===null&&da(e.stateNode.containerInfo),yt(e),null;case 10:return rp(e.type._context),yt(e),null;case 17:return Mt(e.type)&&bu(),yt(e),null;case 19:if(Ie(Ae),i=e.memoizedState,i===null)return yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)So(i,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ou(t),o!==null){for(e.flags|=128,So(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>Pi&&(e.flags|=128,r=!0,So(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ou(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),So(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return yt(e),null}else 2*Be()-i.renderingStartTime>Pi&&n!==1073741824&&(e.flags|=128,r=!0,So(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=Ae.current,_e(Ae,r?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return _p(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function bN(t,e){switch(Zf(e),e.tag){case 1:return Mt(e.type)&&bu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ai(),Ie(Vt),Ie(Et),lp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ap(e),null;case 13:if(Ie(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));bi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ae),null;case 4:return Ai(),null;case 10:return rp(e.type._context),null;case 22:case 23:return _p(),null;case 24:return null;default:return null}}var zl=!1,xt=!1,RN=typeof WeakSet=="function"?WeakSet:Set,H=null;function hi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function Wh(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var Iy=!1;function AN(t,e){if(Rh=Iu,t=S_(),Yf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var E;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(E=p.firstChild)!==null;)g=p,p=E;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(c=o),(E=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=E}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ah={focusedElem:t,selectionRange:n},Iu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var I=S.memoizedProps,R=S.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?I:gn(e.type,I),R);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(P){Ue(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return S=Iy,Iy=!1,S}function Ko(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Wh(e,n,i)}s=s.next}while(s!==r)}}function vc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Tx(t){var e=t.alternate;e!==null&&(t.alternate=null,Tx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[fa],delete e[jh],delete e[hN],delete e[fN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ix(t){return t.tag===5||t.tag===3||t.tag===4}function Ny(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ix(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Su));else if(r!==4&&(t=t.child,t!==null))for(Gh(t,e,n),t=t.sibling;t!==null;)Gh(t,e,n),t=t.sibling}function Qh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qh(t,e,n),t=t.sibling;t!==null;)Qh(t,e,n),t=t.sibling}var at=null,yn=!1;function mr(t,e,n){for(n=n.child;n!==null;)Nx(t,e,n),n=n.sibling}function Nx(t,e,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(cc,n)}catch{}switch(n.tag){case 5:xt||hi(n,e);case 6:var r=at,s=yn;at=null,mr(t,e,n),at=r,yn=s,at!==null&&(yn?(t=at,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(yn?(t=at,n=n.stateNode,t.nodeType===8?jd(t.parentNode,n):t.nodeType===1&&jd(t,n),la(t)):jd(at,n.stateNode));break;case 4:r=at,s=yn,at=n.stateNode.containerInfo,yn=!0,mr(t,e,n),at=r,yn=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Wh(n,e,o),s=s.next}while(s!==r)}mr(t,e,n);break;case 1:if(!xt&&(hi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ue(n,e,l)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,mr(t,e,n),xt=r):mr(t,e,n);break;default:mr(t,e,n)}}function ky(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RN),e.forEach(function(r){var s=UN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:at=l.stateNode,yn=!1;break e;case 3:at=l.stateNode.containerInfo,yn=!0;break e;case 4:at=l.stateNode.containerInfo,yn=!0;break e}l=l.return}if(at===null)throw Error(B(160));Nx(i,o,s),at=null,yn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ue(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kx(e,t),e=e.sibling}function kx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(e,t),In(t),r&4){try{Ko(3,t,t.return),vc(3,t)}catch(I){Ue(t,t.return,I)}try{Ko(5,t,t.return)}catch(I){Ue(t,t.return,I)}}break;case 1:mn(e,t),In(t),r&512&&n!==null&&hi(n,n.return);break;case 5:if(mn(e,t),In(t),r&512&&n!==null&&hi(n,n.return),t.flags&32){var s=t.stateNode;try{sa(s,"")}catch(I){Ue(t,t.return,I)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&G0(s,i),_h(l,o);var d=_h(l,i);for(o=0;o<c.length;o+=2){var f=c[o],p=c[o+1];f==="style"?Z0(s,p):f==="dangerouslySetInnerHTML"?Y0(s,p):f==="children"?sa(s,p):Mf(s,f,p,d)}switch(l){case"input":ph(s,i);break;case"textarea":Q0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?gi(s,!!i.multiple,E,!1):g!==!!i.multiple&&(i.defaultValue!=null?gi(s,!!i.multiple,i.defaultValue,!0):gi(s,!!i.multiple,i.multiple?[]:"",!1))}s[fa]=i}catch(I){Ue(t,t.return,I)}}break;case 6:if(mn(e,t),In(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(I){Ue(t,t.return,I)}}break;case 3:if(mn(e,t),In(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{la(e.containerInfo)}catch(I){Ue(t,t.return,I)}break;case 4:mn(e,t),In(t);break;case 13:mn(e,t),In(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yp=Be())),r&4&&ky(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(xt=(d=xt)||f,mn(e,t),xt=d):mn(e,t),In(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(p=H=f;H!==null;){switch(g=H,E=g.child,g.tag){case 0:case 11:case 14:case 15:Ko(4,g,g.return);break;case 1:hi(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(I){Ue(r,n,I)}}break;case 5:hi(g,g.return);break;case 22:if(g.memoizedState!==null){by(p);continue}}E!==null?(E.return=g,H=E):by(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=J0("display",o))}catch(I){Ue(t,t.return,I)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(I){Ue(t,t.return,I)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mn(e,t),In(t),r&4&&ky(t);break;case 21:break;default:mn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ix(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(sa(s,""),r.flags&=-33);var i=Ny(t);Qh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ny(t);Gh(t,l,o);break;default:throw Error(B(161))}}catch(c){Ue(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CN(t,e,n){H=t,Sx(t)}function Sx(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||zl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||xt;l=zl;var d=xt;if(zl=o,(xt=c)&&!d)for(H=s;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?Ry(s):c!==null?(c.return=o,H=c):Ry(s);for(;i!==null;)H=i,Sx(i),i=i.sibling;H=s,zl=l,xt=d}Sy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Sy(t)}}function Sy(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||vc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:gn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&dy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&la(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}xt||e.flags&512&&Kh(e)}catch(g){Ue(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function by(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Ry(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vc(4,e)}catch(c){Ue(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ue(e,s,c)}}var i=e.return;try{Kh(e)}catch(c){Ue(e,i,c)}break;case 5:var o=e.return;try{Kh(e)}catch(c){Ue(e,o,c)}}}catch(c){Ue(e,e.return,c)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var PN=Math.ceil,Mu=cr.ReactCurrentDispatcher,mp=cr.ReactCurrentOwner,sn=cr.ReactCurrentBatchConfig,ce=0,rt=null,We=null,ut=0,zt=0,fi=Gr(0),Je=0,_a=null,Ts=0,_c=0,gp=0,Go=null,jt=null,yp=0,Pi=1/0,zn=null,Uu=!1,Xh=null,Dr=null,ql=!1,kr=null,Fu=0,Qo=0,Yh=null,lu=-1,uu=0;function bt(){return ce&6?Be():lu!==-1?lu:lu=Be()}function Or(t){return t.mode&1?ce&2&&ut!==0?ut&-ut:mN.transition!==null?(uu===0&&(uu=d_()),uu):(t=ge,t!==0||(t=window.event,t=t===void 0?16:v_(t.type)),t):1}function xn(t,e,n,r){if(50<Qo)throw Qo=0,Yh=null,Error(B(185));Va(t,n,r),(!(ce&2)||t!==rt)&&(t===rt&&(!(ce&2)&&(_c|=n),Je===4&&xr(t,ut)),Ut(t,r),n===1&&ce===0&&!(e.mode&1)&&(Pi=Be()+500,mc&&Qr()))}function Ut(t,e){var n=t.callbackNode;mI(t,e);var r=Tu(t,t===rt?ut:0);if(r===0)n!==null&&Mg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mg(n),e===1)t.tag===0?pN(Ay.bind(null,t)):V_(Ay.bind(null,t)),cN(function(){!(ce&6)&&Qr()}),n=null;else{switch(h_(r)){case 1:n=zf;break;case 4:n=u_;break;case 16:n=Eu;break;case 536870912:n=c_;break;default:n=Eu}n=Ox(n,bx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bx(t,e){if(lu=-1,uu=0,ce&6)throw Error(B(327));var n=t.callbackNode;if(wi()&&t.callbackNode!==n)return null;var r=Tu(t,t===rt?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bu(t,r);else{e=r;var s=ce;ce|=2;var i=Ax();(rt!==t||ut!==e)&&(zn=null,Pi=Be()+500,gs(t,e));do try{ON();break}catch(l){Rx(t,l)}while(!0);np(),Mu.current=i,ce=s,We!==null?e=0:(rt=null,ut=0,e=Je)}if(e!==0){if(e===2&&(s=Ih(t),s!==0&&(r=s,e=Jh(t,s))),e===1)throw n=_a,gs(t,0),xr(t,r),Ut(t,Be()),n;if(e===6)xr(t,r);else{if(s=t.current.alternate,!(r&30)&&!jN(s)&&(e=Bu(t,r),e===2&&(i=Ih(t),i!==0&&(r=i,e=Jh(t,i))),e===1))throw n=_a,gs(t,0),xr(t,r),Ut(t,Be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:us(t,jt,zn);break;case 3:if(xr(t,r),(r&130023424)===r&&(e=yp+500-Be(),10<e)){if(Tu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ph(us.bind(null,t,jt,zn),e);break}us(t,jt,zn);break;case 4:if(xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-_n(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PN(r/1960))-r,10<r){t.timeoutHandle=Ph(us.bind(null,t,jt,zn),r);break}us(t,jt,zn);break;case 5:us(t,jt,zn);break;default:throw Error(B(329))}}}return Ut(t,Be()),t.callbackNode===n?bx.bind(null,t):null}function Jh(t,e){var n=Go;return t.current.memoizedState.isDehydrated&&(gs(t,e).flags|=256),t=Bu(t,e),t!==2&&(e=jt,jt=n,e!==null&&Zh(e)),t}function Zh(t){jt===null?jt=t:jt.push.apply(jt,t)}function jN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xr(t,e){for(e&=~gp,e&=~_c,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_n(e),r=1<<n;t[n]=-1,e&=~r}}function Ay(t){if(ce&6)throw Error(B(327));wi();var e=Tu(t,0);if(!(e&1))return Ut(t,Be()),null;var n=Bu(t,e);if(t.tag!==0&&n===2){var r=Ih(t);r!==0&&(e=r,n=Jh(t,r))}if(n===1)throw n=_a,gs(t,0),xr(t,e),Ut(t,Be()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,us(t,jt,zn),Ut(t,Be()),null}function vp(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Pi=Be()+500,mc&&Qr())}}function Is(t){kr!==null&&kr.tag===0&&!(ce&6)&&wi();var e=ce;ce|=1;var n=sn.transition,r=ge;try{if(sn.transition=null,ge=1,t)return t()}finally{ge=r,sn.transition=n,ce=e,!(ce&6)&&Qr()}}function _p(){zt=fi.current,Ie(fi)}function gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uN(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Zf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bu();break;case 3:Ai(),Ie(Vt),Ie(Et),lp();break;case 5:ap(r);break;case 4:Ai();break;case 13:Ie(Ae);break;case 19:Ie(Ae);break;case 10:rp(r.type._context);break;case 22:case 23:_p()}n=n.return}if(rt=t,We=t=Lr(t.current,null),ut=zt=e,Je=0,_a=null,gp=_c=Ts=0,jt=Go=null,fs!==null){for(e=0;e<fs.length;e++)if(n=fs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}fs=null}return t}function Rx(t,e){do{var n=We;try{if(np(),iu.current=Vu,Lu){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Lu=!1}if(Es=0,tt=Ye=Pe=null,Wo=!1,ga=0,mp.current=null,n===null||n.return===null){Je=1,_a=e,We=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=ut,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=yy(o);if(E!==null){E.flags&=-257,vy(E,o,l,i,e),E.mode&1&&gy(i,d,e),e=E,c=d;var S=e.updateQueue;if(S===null){var I=new Set;I.add(c),e.updateQueue=I}else S.add(c);break e}else{if(!(e&1)){gy(i,d,e),xp();break e}c=Error(B(426))}}else if(be&&l.mode&1){var R=yy(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),vy(R,o,l,i,e),ep(Ci(c,l));break e}}i=c=Ci(c,l),Je!==4&&(Je=2),Go===null?Go=[i]:Go.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=hx(i,c,e);cy(i,w);break e;case 1:l=c;var x=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Dr===null||!Dr.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=fx(i,l,e);cy(i,P);break e}}i=i.return}while(i!==null)}Px(n)}catch(V){e=V,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function Ax(){var t=Mu.current;return Mu.current=Vu,t===null?Vu:t}function xp(){(Je===0||Je===3||Je===2)&&(Je=4),rt===null||!(Ts&268435455)&&!(_c&268435455)||xr(rt,ut)}function Bu(t,e){var n=ce;ce|=2;var r=Ax();(rt!==t||ut!==e)&&(zn=null,gs(t,e));do try{DN();break}catch(s){Rx(t,s)}while(!0);if(np(),ce=n,Mu.current=r,We!==null)throw Error(B(261));return rt=null,ut=0,Je}function DN(){for(;We!==null;)Cx(We)}function ON(){for(;We!==null&&!oI();)Cx(We)}function Cx(t){var e=Dx(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?Px(t):We=e,mp.current=null}function Px(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bN(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,We=null;return}}else if(n=SN(n,e,zt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Je===0&&(Je=5)}function us(t,e,n){var r=ge,s=sn.transition;try{sn.transition=null,ge=1,LN(t,e,n,r)}finally{sn.transition=s,ge=r}return null}function LN(t,e,n,r){do wi();while(kr!==null);if(ce&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gI(t,i),t===rt&&(We=rt=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ql||(ql=!0,Ox(Eu,function(){return wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=sn.transition,sn.transition=null;var o=ge;ge=1;var l=ce;ce|=4,mp.current=null,AN(t,n),kx(n,t),nN(Ah),Iu=!!Rh,Ah=Rh=null,t.current=n,CN(n),aI(),ce=l,ge=o,sn.transition=i}else t.current=n;if(ql&&(ql=!1,kr=t,Fu=s),i=t.pendingLanes,i===0&&(Dr=null),cI(n.stateNode),Ut(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Uu)throw Uu=!1,t=Xh,Xh=null,t;return Fu&1&&t.tag!==0&&wi(),i=t.pendingLanes,i&1?t===Yh?Qo++:(Qo=0,Yh=t):Qo=0,Qr(),null}function wi(){if(kr!==null){var t=h_(Fu),e=sn.transition,n=ge;try{if(sn.transition=null,ge=16>t?16:t,kr===null)var r=!1;else{if(t=kr,kr=null,Fu=0,ce&6)throw Error(B(331));var s=ce;for(ce|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(H=d;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:Ko(8,f,i)}var p=f.child;if(p!==null)p.return=f,H=p;else for(;H!==null;){f=H;var g=f.sibling,E=f.return;if(Tx(f),f===d){H=null;break}if(g!==null){g.return=E,H=g;break}H=E}}}var S=i.alternate;if(S!==null){var I=S.child;if(I!==null){S.child=null;do{var R=I.sibling;I.sibling=null,I=R}while(I!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ko(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,H=w;break e}H=i.return}}var x=t.current;for(H=x;H!==null;){o=H;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,H=v;else e:for(o=x;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vc(9,l)}}catch(V){Ue(l,l.return,V)}if(l===o){H=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,H=P;break e}H=l.return}}if(ce=s,Qr(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(cc,t)}catch{}r=!0}return r}finally{ge=n,sn.transition=e}}return!1}function Cy(t,e,n){e=Ci(n,e),e=hx(t,e,1),t=jr(t,e,1),e=bt(),t!==null&&(Va(t,1,e),Ut(t,e))}function Ue(t,e,n){if(t.tag===3)Cy(t,t,n);else for(;e!==null;){if(e.tag===3){Cy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dr===null||!Dr.has(r))){t=Ci(n,t),t=fx(e,t,1),e=jr(e,t,1),t=bt(),e!==null&&(Va(e,1,t),Ut(e,t));break}}e=e.return}}function VN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(ut&n)===n&&(Je===4||Je===3&&(ut&130023424)===ut&&500>Be()-yp?gs(t,0):gp|=n),Ut(t,e)}function jx(t,e){e===0&&(t.mode&1?(e=Dl,Dl<<=1,!(Dl&130023424)&&(Dl=4194304)):e=1);var n=bt();t=sr(t,e),t!==null&&(Va(t,e,n),Ut(t,n))}function MN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jx(t,n)}function UN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),jx(t,n)}var Dx;Dx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,kN(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,be&&e.flags&1048576&&M_(e,Cu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;au(t,e),t=e.pendingProps;var s=Si(e,Et.current);xi(e,n),s=cp(null,e,r,t,s,n);var i=dp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(r)?(i=!0,Ru(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ip(e),s.updater=yc,e.stateNode=s,s._reactInternals=e,Uh(e,r,t,n),e=$h(null,e,r,!0,i,n)):(e.tag=0,be&&i&&Jf(e),kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(au(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=BN(r),t=gn(r,t),s){case 0:e=Bh(null,e,r,t,n);break e;case 1:e=wy(null,e,r,t,n);break e;case 11:e=_y(null,e,r,t,n);break e;case 14:e=xy(null,e,r,gn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gn(r,s),Bh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gn(r,s),wy(t,e,r,s,n);case 3:e:{if(yx(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,q_(t,e),Du(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ci(Error(B(423)),e),e=Ey(t,e,r,n,s);break e}else if(r!==s){s=Ci(Error(B(424)),e),e=Ey(t,e,r,n,s);break e}else for(qt=Pr(e.stateNode.containerInfo.firstChild),Kt=e,be=!0,vn=null,n=$_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bi(),r===s){e=ir(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return H_(e),t===null&&Lh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ch(r,s)?o=null:i!==null&&Ch(r,i)&&(e.flags|=32),gx(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&Lh(e),null;case 13:return vx(t,e,n);case 4:return op(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ri(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gn(r,s),_y(t,e,r,s,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(Pu,r._currentValue),r._currentValue=o,i!==null)if(wn(i.value,o)){if(i.children===s.children&&!Vt.current){e=ir(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Yn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Vh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Vh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,xi(e,n),s=ln(s),r=r(s),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,s=gn(r,e.pendingProps),s=gn(r.type,s),xy(t,e,r,s,n);case 15:return px(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gn(r,s),au(t,e),e.tag=1,Mt(r)?(t=!0,Ru(e)):t=!1,xi(e,n),dx(e,r,s),Uh(e,r,s,n),$h(null,e,r,!0,t,n);case 19:return _x(t,e,n);case 22:return mx(t,e,n)}throw Error(B(156,e.tag))};function Ox(t,e){return l_(t,e)}function FN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,r){return new FN(t,e,n,r)}function wp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BN(t){if(typeof t=="function")return wp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ff)return 11;if(t===Bf)return 14}return 2}function Lr(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")wp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ri:return ys(n.children,s,i,e);case Uf:o=8,s|=8;break;case uh:return t=nn(12,n,e,s|2),t.elementType=uh,t.lanes=i,t;case ch:return t=nn(13,n,e,s),t.elementType=ch,t.lanes=i,t;case dh:return t=nn(19,n,e,s),t.elementType=dh,t.lanes=i,t;case H0:return xc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z0:o=10;break e;case q0:o=9;break e;case Ff:o=11;break e;case Bf:o=14;break e;case yr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=nn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ys(t,e,n,r){return t=nn(7,t,r,e),t.lanes=n,t}function xc(t,e,n,r){return t=nn(22,t,r,e),t.elementType=H0,t.lanes=n,t.stateNode={isHidden:!1},t}function Bd(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function $d(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $N(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ed(0),this.expirationTimes=Ed(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ed(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ep(t,e,n,r,s,i,o,l,c){return t=new $N(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ip(i),t}function zN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Lx(t){if(!t)return Br;t=t._reactInternals;e:{if(Os(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Mt(n))return L_(t,n,e)}return e}function Vx(t,e,n,r,s,i,o,l,c){return t=Ep(n,r,!0,t,s,i,o,l,c),t.context=Lx(null),n=t.current,r=bt(),s=Or(n),i=Yn(r,s),i.callback=e??null,jr(n,i,s),t.current.lanes=s,Va(t,s,r),Ut(t,r),t}function wc(t,e,n,r){var s=e.current,i=bt(),o=Or(s);return n=Lx(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jr(s,e,o),t!==null&&(xn(t,s,o,i),su(t,s,o)),o}function $u(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Py(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tp(t,e){Py(t,e),(t=t.alternate)&&Py(t,e)}function qN(){return null}var Mx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ip(t){this._internalRoot=t}Ec.prototype.render=Ip.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));wc(t,e,null,null)};Ec.prototype.unmount=Ip.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Is(function(){wc(null,t,null,null)}),e[rr]=null}};function Ec(t){this._internalRoot=t}Ec.prototype.unstable_scheduleHydration=function(t){if(t){var e=m_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_r.length&&e!==0&&e<_r[n].priority;n++);_r.splice(n,0,t),n===0&&y_(t)}};function Np(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jy(){}function HN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=$u(o);i.call(d)}}var o=Vx(e,r,t,0,null,!1,!1,"",jy);return t._reactRootContainer=o,t[rr]=o.current,da(t.nodeType===8?t.parentNode:t),Is(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=$u(c);l.call(d)}}var c=Ep(t,0,!1,null,null,!1,!1,"",jy);return t._reactRootContainer=c,t[rr]=c.current,da(t.nodeType===8?t.parentNode:t),Is(function(){wc(e,c,n,r)}),c}function Ic(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=$u(o);l.call(c)}}wc(e,o,t,s)}else o=HN(n,e,t,s,r);return $u(o)}f_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jo(e.pendingLanes);n!==0&&(qf(e,n|1),Ut(e,Be()),!(ce&6)&&(Pi=Be()+500,Qr()))}break;case 13:Is(function(){var r=sr(t,1);if(r!==null){var s=bt();xn(r,t,1,s)}}),Tp(t,1)}};Hf=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=bt();xn(e,t,134217728,n)}Tp(t,134217728)}};p_=function(t){if(t.tag===13){var e=Or(t),n=sr(t,e);if(n!==null){var r=bt();xn(n,t,e,r)}Tp(t,e)}};m_=function(){return ge};g_=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};wh=function(t,e,n){switch(e){case"input":if(ph(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pc(r);if(!s)throw Error(B(90));K0(r),ph(r,s)}}}break;case"textarea":Q0(t,n);break;case"select":e=n.value,e!=null&&gi(t,!!n.multiple,e,!1)}};n_=vp;r_=Is;var WN={usingClientEntryPoint:!1,Events:[Ua,ai,pc,e_,t_,vp]},bo={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KN={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=o_(t),t===null?null:t.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance||qN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{cc=Hl.inject(KN),Rn=Hl}catch{}}Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WN;Qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Np(e))throw Error(B(200));return zN(t,e,null,n)};Qt.createRoot=function(t,e){if(!Np(t))throw Error(B(299));var n=!1,r="",s=Mx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ep(t,1,!1,null,null,n,!1,r,s),t[rr]=e.current,da(t.nodeType===8?t.parentNode:t),new Ip(e)};Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=o_(e),t=t===null?null:t.stateNode,t};Qt.flushSync=function(t){return Is(t)};Qt.hydrate=function(t,e,n){if(!Tc(e))throw Error(B(200));return Ic(null,t,e,!0,n)};Qt.hydrateRoot=function(t,e,n){if(!Np(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Mx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Vx(e,null,t,1,n??null,s,!1,i,o),t[rr]=e.current,da(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ec(e)};Qt.render=function(t,e,n){if(!Tc(e))throw Error(B(200));return Ic(null,t,e,!1,n)};Qt.unmountComponentAtNode=function(t){if(!Tc(t))throw Error(B(40));return t._reactRootContainer?(Is(function(){Ic(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Qt.unstable_batchedUpdates=vp;Qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tc(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Ic(t,e,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426";function Ux(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ux)}catch(t){console.error(t)}}Ux(),U0.exports=Qt;var GN=U0.exports,Dy=GN;ah.createRoot=Dy.createRoot,ah.hydrateRoot=Dy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xa(){return xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xa.apply(this,arguments)}var Sr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Sr||(Sr={}));const Oy="popstate";function QN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return ef("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zu(s)}return YN(e,n,null,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XN(){return Math.random().toString(36).substr(2,8)}function Ly(t,e){return{usr:t.state,key:t.key,idx:e}}function ef(t,e,n,r){return n===void 0&&(n=null),xa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hi(e):e,{state:n,key:e&&e.key||r||XN()})}function zu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function YN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Sr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(xa({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=Sr.Pop;let R=f(),w=R==null?null:R-d;d=R,c&&c({action:l,location:I.location,delta:w})}function g(R,w){l=Sr.Push;let x=ef(I.location,R,w);d=f()+1;let v=Ly(x,d),P=I.createHref(x);try{o.pushState(v,"",P)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(P)}i&&c&&c({action:l,location:I.location,delta:1})}function E(R,w){l=Sr.Replace;let x=ef(I.location,R,w);d=f();let v=Ly(x,d),P=I.createHref(x);o.replaceState(v,"",P),i&&c&&c({action:l,location:I.location,delta:0})}function S(R){let w=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof R=="string"?R:zu(R);return x=x.replace(/ $/,"%20"),$e(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let I={get action(){return l},get location(){return t(s,o)},listen(R){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Oy,p),c=R,()=>{s.removeEventListener(Oy,p),c=null}},createHref(R){return e(s,R)},createURL:S,encodeLocation(R){let w=S(R);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:E,go(R){return o.go(R)}};return I}var Vy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vy||(Vy={}));function JN(t,e,n){return n===void 0&&(n="/"),ZN(t,e,n)}function ZN(t,e,n,r){let s=typeof e=="string"?Hi(e):e,i=kp(s.pathname||"/",n);if(i==null)return null;let o=Bx(t);ek(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=hk(i);l=uk(o[c],d)}return l}function Bx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&($e(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Vr([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&($e(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Bx(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:ak(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of $x(i.path))s(i,o,c)}),e}function $x(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=$x(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function ek(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const tk=/^:[\w-]+$/,nk=3,rk=2,sk=1,ik=10,ok=-2,My=t=>t==="*";function ak(t,e){let n=t.split("/"),r=n.length;return n.some(My)&&(r+=ok),e&&(r+=rk),n.filter(s=>!My(s)).reduce((s,i)=>s+(tk.test(i)?nk:i===""?sk:ik),r)}function lk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function uk(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=ck({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Vr([i,p.pathname]),pathnameBase:gk(Vr([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Vr([i,p.pathnameBase]))}return o}function ck(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=dk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:E}=f;if(g==="*"){let I=l[p]||"";o=i.slice(0,i.length-I.length).replace(/(.)\/+$/,"$1")}const S=l[p];return E&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function dk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function hk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function fk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Hi(t):t;return{pathname:n?n.startsWith("/")?n:pk(n,e):e,search:yk(r),hash:vk(s)}}function pk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function zd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Sp(t,e){let n=mk(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Hi(t):(s=xa({},t),$e(!s.pathname||!s.pathname.includes("?"),zd("?","pathname","search",s)),$e(!s.pathname||!s.pathname.includes("#"),zd("#","pathname","hash",s)),$e(!s.search||!s.search.includes("#"),zd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=fk(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Vr=t=>t.join("/").replace(/\/\/+/g,"/"),gk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _k(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zx=["post","put","patch","delete"];new Set(zx);const xk=["get",...zx];new Set(xk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wa(){return wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wa.apply(this,arguments)}const Rp=C.createContext(null),wk=C.createContext(null),Xr=C.createContext(null),Nc=C.createContext(null),Yr=C.createContext({outlet:null,matches:[],isDataRoute:!1}),qx=C.createContext(null);function Ek(t,e){let{relative:n}=e===void 0?{}:e;Wi()||$e(!1);let{basename:r,navigator:s}=C.useContext(Xr),{hash:i,pathname:o,search:l}=Wx(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Vr([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Wi(){return C.useContext(Nc)!=null}function Jr(){return Wi()||$e(!1),C.useContext(Nc).location}function Hx(t){C.useContext(Xr).static||C.useLayoutEffect(t)}function Zr(){let{isDataRoute:t}=C.useContext(Yr);return t?Ok():Tk()}function Tk(){Wi()||$e(!1);let t=C.useContext(Rp),{basename:e,future:n,navigator:r}=C.useContext(Xr),{matches:s}=C.useContext(Yr),{pathname:i}=Jr(),o=JSON.stringify(Sp(s,n.v7_relativeSplatPath)),l=C.useRef(!1);return Hx(()=>{l.current=!0}),C.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=bp(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Vr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function Wx(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(Xr),{matches:s}=C.useContext(Yr),{pathname:i}=Jr(),o=JSON.stringify(Sp(s,r.v7_relativeSplatPath));return C.useMemo(()=>bp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Ik(t,e){return Nk(t,e)}function Nk(t,e,n,r){Wi()||$e(!1);let{navigator:s}=C.useContext(Xr),{matches:i}=C.useContext(Yr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Jr(),f;if(e){var p;let R=typeof e=="string"?Hi(e):e;c==="/"||(p=R.pathname)!=null&&p.startsWith(c)||$e(!1),f=R}else f=d;let g=f.pathname||"/",E=g;if(c!=="/"){let R=c.replace(/^\//,"").split("/");E="/"+g.replace(/^\//,"").split("/").slice(R.length).join("/")}let S=JN(t,{pathname:E}),I=Ak(S&&S.map(R=>Object.assign({},R,{params:Object.assign({},l,R.params),pathname:Vr([c,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?c:Vr([c,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,n,r);return e&&I?C.createElement(Nc.Provider,{value:{location:wa({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Sr.Pop}},I):I}function kk(){let t=Dk(),e=_k(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,null)}const Sk=C.createElement(kk,null);class bk extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(Yr.Provider,{value:this.props.routeContext},C.createElement(qx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rk(t){let{routeContext:e,match:n,children:r}=t,s=C.useContext(Rp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(Yr.Provider,{value:e},r)}function Ak(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||$e(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:E}=n,S=p.route.loader&&g[p.route.id]===void 0&&(!E||E[p.route.id]===void 0);if(p.route.lazy||S){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let E,S=!1,I=null,R=null;n&&(E=l&&p.route.id?l[p.route.id]:void 0,I=p.route.errorElement||Sk,c&&(d<0&&g===0?(Lk("route-fallback"),S=!0,R=null):d===g&&(S=!0,R=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,g+1)),x=()=>{let v;return E?v=I:S?v=R:p.route.Component?v=C.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=f,C.createElement(Rk,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:v})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?C.createElement(bk,{location:n.location,revalidation:n.revalidation,component:I,error:E,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var Kx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Kx||{}),Gx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gx||{});function Ck(t){let e=C.useContext(Rp);return e||$e(!1),e}function Pk(t){let e=C.useContext(wk);return e||$e(!1),e}function jk(t){let e=C.useContext(Yr);return e||$e(!1),e}function Qx(t){let e=jk(),n=e.matches[e.matches.length-1];return n.route.id||$e(!1),n.route.id}function Dk(){var t;let e=C.useContext(qx),n=Pk(),r=Qx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ok(){let{router:t}=Ck(Kx.UseNavigateStable),e=Qx(Gx.UseNavigateStable),n=C.useRef(!1);return Hx(()=>{n.current=!0}),C.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,wa({fromRouteId:e},i)))},[t,e])}const Uy={};function Lk(t,e,n){Uy[t]||(Uy[t]=!0)}function Vk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ap(t){let{to:e,replace:n,state:r,relative:s}=t;Wi()||$e(!1);let{future:i,static:o}=C.useContext(Xr),{matches:l}=C.useContext(Yr),{pathname:c}=Jr(),d=Zr(),f=bp(e,Sp(l,i.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(f);return C.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function Se(t){$e(!1)}function Mk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Sr.Pop,navigator:i,static:o=!1,future:l}=t;Wi()&&$e(!1);let c=e.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:c,navigator:i,static:o,future:wa({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Hi(r));let{pathname:f="/",search:p="",hash:g="",state:E=null,key:S="default"}=r,I=C.useMemo(()=>{let R=kp(f,c);return R==null?null:{location:{pathname:R,search:p,hash:g,state:E,key:S},navigationType:s}},[c,f,p,g,E,S,s]);return I==null?null:C.createElement(Xr.Provider,{value:d},C.createElement(Nc.Provider,{children:n,value:I}))}function Uk(t){let{children:e,location:n}=t;return Ik(tf(e),n)}new Promise(()=>{});function tf(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let i=[...e,s];if(r.type===C.Fragment){n.push.apply(n,tf(r.props.children,i));return}r.type!==Se&&$e(!1),!r.props.index||!r.props.children||$e(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=tf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nf(){return nf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nf.apply(this,arguments)}function Fk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Bk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $k(t,e){return t.button===0&&(!e||e==="_self")&&!Bk(t)}function rf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function zk(t,e){let n=rf(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const qk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Hk="6";try{window.__reactRouterVersion=Hk}catch{}const Wk="startTransition",Fy=VT[Wk];function Kk(t){let{basename:e,children:n,future:r,window:s}=t,i=C.useRef();i.current==null&&(i.current=QN({window:s,v5Compat:!0}));let o=i.current,[l,c]=C.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=C.useCallback(p=>{d&&Fy?Fy(()=>c(p)):c(p)},[c,d]);return C.useLayoutEffect(()=>o.listen(f),[o,f]),C.useEffect(()=>Vk(r),[r]),C.createElement(Mk,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Gk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=C.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:p}=e,g=Fk(e,qk),{basename:E}=C.useContext(Xr),S,I=!1;if(typeof d=="string"&&Qk.test(d)&&(S=d,Gk))try{let v=new URL(window.location.href),P=d.startsWith("//")?new URL(v.protocol+d):new URL(d),V=kp(P.pathname,E);P.origin===v.origin&&V!=null?d=V+P.search+P.hash:I=!0}catch{}let R=Ek(d,{relative:s}),w=Xk(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:p});function x(v){r&&r(v),v.defaultPrevented||w(v)}return C.createElement("a",nf({},g,{href:S||R,onClick:I||i?r:x,ref:n,target:c}))});var By;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(By||(By={}));var $y;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($y||($y={}));function Xk(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Zr(),d=Jr(),f=Wx(t,{relative:o});return C.useCallback(p=>{if($k(p,n)){p.preventDefault();let g=r!==void 0?r:zu(d)===zu(f);c(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,r,s,n,t,i,o,l])}function Yk(t){let e=C.useRef(rf(t)),n=C.useRef(!1),r=Jr(),s=C.useMemo(()=>zk(r.search,n.current?null:e.current),[r.search]),i=Zr(),o=C.useCallback((l,c)=>{const d=rf(typeof l=="function"?l(s):l);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}var zy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Jk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Yx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,E=d&63;c||(E=64,o||(g=64)),r.push(n[f],n[p],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Jk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new Zk;const g=i<<2|l>>4;if(r.push(g),d!==64){const E=l<<4&240|d>>2;if(r.push(E),p!==64){const S=d<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eS=function(t){const e=Xx(t);return Yx.encodeByteArray(e,!0)},qu=function(t){return eS(t).replace(/\./g,"")},Jx=function(t){try{return Yx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=()=>tS().__FIREBASE_DEFAULTS__,rS=()=>{if(typeof process>"u"||typeof zy>"u")return;const t=zy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jx(t[1]);return e&&JSON.parse(e)},kc=()=>{try{return nS()||rS()||sS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Zx=t=>{var e,n;return(n=(e=kc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ew=t=>{const e=Zx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},tw=()=>{var t;return(t=kc())===null||t===void 0?void 0:t.config},nw=t=>{var e;return(e=kc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qu(JSON.stringify(n)),qu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function aS(){var t;const e=(t=kc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dS(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hS(){return!aS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fS(){try{return typeof indexedDB=="object"}catch{return!1}}function pS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="FirebaseError";class Mn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mS,Object.setPrototypeOf(this,Mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ba.prototype.create)}}class Ba{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?gS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Mn(s,l,r)}}function gS(t,e){return t.replace(yS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yS=/\{\$([^}]+)}/g;function vS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(qy(i)&&qy(o)){if(!Hu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Oo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Lo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function _S(t,e){const n=new xS(t,e);return n.subscribe.bind(n)}class xS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=qd),s.error===void 0&&(s.error=qd),s.complete===void 0&&(s.complete=qd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class $r{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IS(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TS(t){return t===cs?void 0:t}function IS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ES(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const kS={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},SS=ae.INFO,bS={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},RS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=bS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cp{constructor(e){this.name=e,this._logLevel=SS,this._logHandler=RS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const AS=(t,e)=>e.some(n=>t instanceof n);let Hy,Wy;function CS(){return Hy||(Hy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PS(){return Wy||(Wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sw=new WeakMap,sf=new WeakMap,iw=new WeakMap,Hd=new WeakMap,Pp=new WeakMap;function jS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Mr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sw.set(n,t)}).catch(()=>{}),Pp.set(e,t),e}function DS(t){if(sf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});sf.set(t,e)}let of={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OS(t){of=t(of)}function LS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wd(this),e,...n);return iw.set(r,e.sort?e.sort():[e]),Mr(r)}:PS().includes(t)?function(...e){return t.apply(Wd(this),e),Mr(sw.get(this))}:function(...e){return Mr(t.apply(Wd(this),e))}}function VS(t){return typeof t=="function"?LS(t):(t instanceof IDBTransaction&&DS(t),AS(t,CS())?new Proxy(t,of):t)}function Mr(t){if(t instanceof IDBRequest)return jS(t);if(Hd.has(t))return Hd.get(t);const e=VS(t);return e!==t&&(Hd.set(t,e),Pp.set(e,t)),e}const Wd=t=>Pp.get(t);function MS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Mr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Mr(o.result),c.oldVersion,c.newVersion,Mr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const US=["get","getKey","getAll","getAllKeys","count"],FS=["put","add","delete","clear"],Kd=new Map;function Ky(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kd.get(e))return Kd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=FS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||US.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Kd.set(e,i),i}OS(t=>({...t,get:(e,n,r)=>Ky(e,n)||t.get(e,n,r),has:(e,n)=>!!Ky(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($S(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $S(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const af="@firebase/app",Gy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Cp("@firebase/app"),zS="@firebase/app-compat",qS="@firebase/analytics-compat",HS="@firebase/analytics",WS="@firebase/app-check-compat",KS="@firebase/app-check",GS="@firebase/auth",QS="@firebase/auth-compat",XS="@firebase/database",YS="@firebase/data-connect",JS="@firebase/database-compat",ZS="@firebase/functions",e2="@firebase/functions-compat",t2="@firebase/installations",n2="@firebase/installations-compat",r2="@firebase/messaging",s2="@firebase/messaging-compat",i2="@firebase/performance",o2="@firebase/performance-compat",a2="@firebase/remote-config",l2="@firebase/remote-config-compat",u2="@firebase/storage",c2="@firebase/storage-compat",d2="@firebase/firestore",h2="@firebase/vertexai-preview",f2="@firebase/firestore-compat",p2="firebase",m2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="[DEFAULT]",g2={[af]:"fire-core",[zS]:"fire-core-compat",[HS]:"fire-analytics",[qS]:"fire-analytics-compat",[KS]:"fire-app-check",[WS]:"fire-app-check-compat",[GS]:"fire-auth",[QS]:"fire-auth-compat",[XS]:"fire-rtdb",[YS]:"fire-data-connect",[JS]:"fire-rtdb-compat",[ZS]:"fire-fn",[e2]:"fire-fn-compat",[t2]:"fire-iid",[n2]:"fire-iid-compat",[r2]:"fire-fcm",[s2]:"fire-fcm-compat",[i2]:"fire-perf",[o2]:"fire-perf-compat",[a2]:"fire-rc",[l2]:"fire-rc-compat",[u2]:"fire-gcs",[c2]:"fire-gcs-compat",[d2]:"fire-fst",[f2]:"fire-fst-compat",[h2]:"fire-vertex","fire-js":"fire-js",[p2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Map,y2=new Map,uf=new Map;function Qy(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ns(t){const e=t.name;if(uf.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;uf.set(e,t);for(const n of Ea.values())Qy(n,t);for(const n of y2.values())Qy(n,t);return!0}function Sc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new Ba("app","Firebase",v2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=m2;function ow(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ur.create("bad-app-name",{appName:String(s)});if(n||(n=tw()),!n)throw Ur.create("no-options");const i=Ea.get(s);if(i){if(Hu(n,i.options)&&Hu(r,i.config))return i;throw Ur.create("duplicate-app",{appName:s})}const o=new NS(s);for(const c of uf.values())o.addComponent(c);const l=new _2(n,r,o);return Ea.set(s,l),l}function bc(t=lf){const e=Ea.get(t);if(!e&&t===lf&&tw())return ow();if(!e)throw Ur.create("no-app",{appName:t});return e}function aw(){return Array.from(Ea.values())}function Cn(t,e,n){var r;let s=(r=g2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(l.join(" "));return}Ns(new $r(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2="firebase-heartbeat-database",w2=1,Ta="firebase-heartbeat-store";let Gd=null;function lw(){return Gd||(Gd=MS(x2,w2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ta)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ur.create("idb-open",{originalErrorMessage:t.message})})),Gd}async function E2(t){try{const n=(await lw()).transaction(Ta),r=await n.objectStore(Ta).get(uw(t));return await n.done,r}catch(e){if(e instanceof Mn)or.warn(e.message);else{const n=Ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function Xy(t,e){try{const r=(await lw()).transaction(Ta,"readwrite");await r.objectStore(Ta).put(e,uw(t)),await r.done}catch(n){if(n instanceof Mn)or.warn(n.message);else{const r=Ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function uw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=1024,I2=30*24*60*60*1e3;class N2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new S2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=I2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Yy(),{heartbeatsToSend:r,unsentEntries:s}=k2(this._heartbeatsCache.heartbeats),i=qu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return or.warn(n),""}}}function Yy(){return new Date().toISOString().substring(0,10)}function k2(t,e=T2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Jy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Jy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class S2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fS()?pS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await E2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Jy(t){return qu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){Ns(new $r("platform-logger",e=>new BS(e),"PRIVATE")),Ns(new $r("heartbeat",e=>new N2(e),"PRIVATE")),Cn(af,Gy,t),Cn(af,Gy,"esm2017"),Cn("fire-js","")}b2("");function jp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function cw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R2=cw,dw=new Ba("auth","Firebase",cw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new Cp("@firebase/auth");function A2(t,...e){Wu.logLevel<=ae.WARN&&Wu.warn(`Auth (${Ls}): ${t}`,...e)}function du(t,...e){Wu.logLevel<=ae.ERROR&&Wu.error(`Auth (${Ls}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,...e){throw Dp(t,...e)}function Pn(t,...e){return Dp(t,...e)}function hw(t,e,n){const r=Object.assign(Object.assign({},R2()),{[e]:n});return new Ba("auth","Firebase",r).create(e,{appName:t.name})}function Jn(t){return hw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dw.create(t,...e)}function X(t,e,...n){if(!t)throw Dp(e,...n)}function Gn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw du(e),new Error(e)}function ar(t,e){t||Gn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function C2(){return Zy()==="http:"||Zy()==="https:"}function Zy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(C2()||uS()||"connection"in navigator)?navigator.onLine:!0}function j2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=oS()||cS()}get(){return P2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new za(3e4,6e4);function es(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ts(t,e,n,r,s={}){return pw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=$a(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return lS()||(d.referrerPolicy="no-referrer"),fw.fetch()(mw(t,t.config.apiHost,n,l),d)})}async function pw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},D2),e);try{const s=new V2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Wl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Wl(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw hw(t,f,d);En(t,f)}}catch(s){if(s instanceof Mn)throw s;En(t,"network-request-failed",{message:String(s)})}}async function qa(t,e,n,r,s={}){const i=await ts(t,e,n,r,s);return"mfaPendingCredential"in i&&En(t,"multi-factor-auth-required",{_serverResponse:i}),i}function mw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Op(t.config,s):`${t.config.apiScheme}://${s}`}function L2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class V2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pn(this.auth,"network-request-failed")),O2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Pn(t,e,r);return s.customData._tokenResponse=n,s}function ev(t){return t!==void 0&&t.enterprise!==void 0}class M2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return L2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function U2(t,e){return ts(t,"GET","/v2/recaptchaConfig",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t,e){return ts(t,"POST","/v1/accounts:delete",e)}async function gw(t,e){return ts(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function B2(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),s=Lp(r);X(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Xo(Qd(s.auth_time)),issuedAtTime:Xo(Qd(s.iat)),expirationTime:Xo(Qd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Qd(t){return Number(t)*1e3}function Lp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return du("JWT malformed, contained fewer than 3 sections"),null;try{const s=Jx(n);return s?JSON.parse(s):(du("Failed to decode base64 JWT payload"),null)}catch(s){return du("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function tv(t){const e=Lp(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Mn&&$2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ia(t,gw(n,{idToken:r}));X(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?yw(i.providerUserInfo):[],l=H2(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new df(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function q2(t){const e=Ne(t);await Ku(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function H2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function yw(t){return t.map(e=>{var{providerId:n}=e,r=jp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(t,e){const n=await pw(t,{},async()=>{const r=$a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=mw(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",fw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function K2(t,e){return ts(t,"POST","/v2/accounts:revokeToken",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=tv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await W2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ei;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(X(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(X(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ei,this.toJSON())}_performRefresh(){return Gn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=jp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new df(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ia(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return B2(this,e)}reload(){return q2(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ku(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(Jn(this.auth));const e=await this.getIdToken();return await Ia(this,F2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,E=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(l=n.tenantId)!==null&&l!==void 0?l:void 0,R=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:v,emailVerified:P,isAnonymous:V,providerData:M,stsTokenManager:T}=n;X(v&&T,e,"internal-error");const y=Ei.fromJSON(this.name,T);X(typeof v=="string",e,"internal-error"),gr(p,e.name),gr(g,e.name),X(typeof P=="boolean",e,"internal-error"),X(typeof V=="boolean",e,"internal-error"),gr(E,e.name),gr(S,e.name),gr(I,e.name),gr(R,e.name),gr(w,e.name),gr(x,e.name);const N=new Qn({uid:v,auth:e,email:g,emailVerified:P,displayName:p,isAnonymous:V,photoURL:S,phoneNumber:E,tenantId:I,stsTokenManager:y,createdAt:w,lastLoginAt:x});return M&&Array.isArray(M)&&(N.providerData=M.map(k=>Object.assign({},k))),R&&(N._redirectEventId=R),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ei;s.updateFromServerResponse(n);const i=new Qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ku(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];X(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?yw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ei;l.updateFromIdToken(r);const c=new Qn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new df(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=new Map;function Xn(t){ar(t instanceof Function,"Expected a class definition");let e=nv.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vw.type="NONE";const rv=vw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ti{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=hu(this.userKey,s.apiKey,i),this.fullPersistenceKey=hu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ti(Xn(rv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Xn(rv);const o=hu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const p=Qn._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ti(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ti(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ew(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_w(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Iw(e))return"Blackberry";if(Nw(e))return"Webos";if(xw(e))return"Safari";if((e.includes("chrome/")||ww(e))&&!e.includes("edge/"))return"Chrome";if(Tw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _w(t=Tt()){return/firefox\//i.test(t)}function xw(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ww(t=Tt()){return/crios\//i.test(t)}function Ew(t=Tt()){return/iemobile/i.test(t)}function Tw(t=Tt()){return/android/i.test(t)}function Iw(t=Tt()){return/blackberry/i.test(t)}function Nw(t=Tt()){return/webos/i.test(t)}function Vp(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function G2(t=Tt()){var e;return Vp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Q2(){return dS()&&document.documentMode===10}function kw(t=Tt()){return Vp(t)||Tw(t)||Nw(t)||Iw(t)||/windows phone/i.test(t)||Ew(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e=[]){let n;switch(t){case"Browser":n=sv(Tt());break;case"Worker":n=`${sv(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ls}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e={}){return ts(t,"GET","/v2/passwordPolicy",es(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=6;class Z2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:J2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iv(this),this.idTokenSubscription=new iv(this),this.beforeStateQueue=new X2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ti.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gw(this,{idToken:e}),r=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Sn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ku(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=j2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(Jn(this));const n=e?Ne(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(Jn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(Jn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Y2(this),n=new Z2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ba("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await K2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Ti.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&A2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vs(t){return Ne(t)}class iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=_S(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tb(t){Rc=t}function bw(t){return Rc.loadJS(t)}function nb(){return Rc.recaptchaEnterpriseScript}function rb(){return Rc.gapiScript}function sb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ib="recaptcha-enterprise",ob="NO_RECAPTCHA";class ab{constructor(e){this.type=ib,this.auth=Vs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{U2(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new M2(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;ev(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(ob)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&ev(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=nb();c.length!==0&&(c+=l),bw(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function ov(t,e,n,r=!1){const s=new ab(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function hf(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ov(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ov(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t,e){const n=Sc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Hu(i,e??{}))return s;En(s,"already-initialized")}return n.initialize({options:e})}function lb(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ub(t,e,n){const r=Vs(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Aw(e),{host:o,port:l}=cb(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),db()}function Aw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cb(t){const e=Aw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:av(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:av(o)}}}function av(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function db(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gn("not implemented")}_getIdTokenResponse(e){return Gn("not implemented")}_linkToIdToken(e,n){return Gn("not implemented")}_getReauthenticationResolver(e){return Gn("not implemented")}}async function hb(t,e){return ts(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fb(t,e){return qa(t,"POST","/v1/accounts:signInWithPassword",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pb(t,e){return qa(t,"POST","/v1/accounts:signInWithEmailLink",es(t,e))}async function mb(t,e){return qa(t,"POST","/v1/accounts:signInWithEmailLink",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Mp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Na(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Na(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hf(e,n,"signInWithPassword",fb);case"emailLink":return pb(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hf(e,r,"signUpPassword",hb);case"emailLink":return mb(e,{idToken:n,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t,e){return qa(t,"POST","/v1/accounts:signInWithIdp",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="http://localhost";class ks extends Mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):En("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=jp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ks(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ii(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ii(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ii(e,n)}buildRequest(){const e={requestUri:gb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$a(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vb(t){const e=Oo(Lo(t)).link,n=e?Oo(Lo(e)).deep_link_id:null,r=Oo(Lo(t)).deep_link_id;return(r?Oo(Lo(r)).link:null)||r||n||e||t}class Up{constructor(e){var n,r,s,i,o,l;const c=Oo(Lo(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,p=yb((s=c.mode)!==null&&s!==void 0?s:null);X(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=vb(e);try{return new Up(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.providerId=Ki.PROVIDER_ID}static credential(e,n){return Na._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Up.parseLink(n);return X(r,"argument-error"),Na._fromEmailAndCode(e,r.code,r.tenantId)}}Ki.PROVIDER_ID="password";Ki.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ki.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends Cw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Ha{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ks._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Er.credential(n,r)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Ha{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Ha{constructor(){super("twitter.com")}static credential(e,n){return ks._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(t,e){return qa(t,"POST","/v1/accounts:signUp",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qn._fromIdTokenResponse(e,r,s),o=lv(r);return new Ss({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=lv(r);return new Ss({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends Mn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Gu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Gu(e,n,r,s)}}function Pw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Gu._fromErrorAndOperation(t,i,e,r):i})}async function xb(t,e,n=!1){const r=await Ia(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ss._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(t,e,n=!1){const{auth:r}=t;if(Sn(r.app))return Promise.reject(Jn(r));const s="reauthenticate";try{const i=await Ia(t,Pw(r,s,e,t),n);X(i.idToken,r,"internal-error");const o=Lp(i.idToken);X(o,r,"internal-error");const{sub:l}=o;return X(t.uid===l,r,"user-mismatch"),Ss._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&En(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(t,e,n=!1){if(Sn(t.app))return Promise.reject(Jn(t));const r="signIn",s=await Pw(t,r,e),i=await Ss._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Eb(t,e){return jw(Vs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dw(t){const e=Vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Tb(t,e,n){if(Sn(t.app))return Promise.reject(Jn(t));const r=Vs(t),o=await hf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_b).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Dw(t),c}),l=await Ss._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Ib(t,e,n){return Sn(t.app)?Promise.reject(Jn(t)):Eb(Ne(t),Ki.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Dw(t),r})}function Nb(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function kb(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function Sb(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function bb(t){return Ne(t).signOut()}async function Rb(t){return Ne(t).delete()}const Qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qu,"1"),this.storage.removeItem(Qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=1e3,Cb=10;class Lw extends Ow{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Q2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Cb):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ab)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lw.type="LOCAL";const Vw=Lw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends Ow{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Mw.type="SESSION";const Uw=Mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ac(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await Pb(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ac.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Fp("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return window}function Db(t){jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(){return typeof jn().WorkerGlobalScope<"u"&&typeof jn().importScripts=="function"}async function Ob(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Lb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Vb(){return Fw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="firebaseLocalStorageDb",Mb=1,Xu="firebaseLocalStorage",$w="fbase_key";class Wa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cc(t,e){return t.transaction([Xu],e?"readwrite":"readonly").objectStore(Xu)}function Ub(){const t=indexedDB.deleteDatabase(Bw);return new Wa(t).toPromise()}function ff(){const t=indexedDB.open(Bw,Mb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xu,{keyPath:$w})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xu)?e(r):(r.close(),await Ub(),e(await ff()))})})}async function uv(t,e,n){const r=Cc(t,!0).put({[$w]:e,value:n});return new Wa(r).toPromise()}async function Fb(t,e){const n=Cc(t,!1).get(e),r=await new Wa(n).toPromise();return r===void 0?null:r.value}function cv(t,e){const n=Cc(t,!0).delete(e);return new Wa(n).toPromise()}const Bb=800,$b=3;class zw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ff(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$b)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ac._getInstance(Vb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ob(),!this.activeServiceWorker)return;this.sender=new jb(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Lb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ff();return await uv(e,Qu,"1"),await cv(e,Qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>uv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Fb(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Cc(s,!1).getAll();return new Wa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zw.type="LOCAL";const qw=zw;new za(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t,e){return e?Xn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends Mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ii(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ii(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qb(t){return jw(t.auth,new Bp(t),t.bypassAuthState)}function Hb(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),wb(n,new Bp(t),t.bypassAuthState)}async function Wb(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),xb(n,new Bp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qb;case"linkViaPopup":case"linkViaRedirect":return Wb;case"reauthViaPopup":case"reauthViaRedirect":return Hb;default:En(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=new za(2e3,1e4);class pi extends Hw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,pi.currentPopupAction&&pi.currentPopupAction.cancel(),pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Kb.get())};e()}}pi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="pendingRedirect",fu=new Map;class Qb extends Hw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fu.get(this.auth._key());if(!e){try{const r=await Xb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fu.set(this.auth._key(),e)}return this.bypassAuthState||fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xb(t,e){const n=Zb(e),r=Jb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Yb(t,e){fu.set(t._key(),e)}function Jb(t){return Xn(t._redirectPersistence)}function Zb(t){return hu(Gb,t.config.apiKey,t.name)}async function eR(t,e,n=!1){if(Sn(t.app))return Promise.reject(Jn(t));const r=Vs(t),s=zb(r,e),o=await new Qb(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=10*60*1e3;class nR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ww(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tR&&this.cachedEventUids.clear(),this.cachedEventUids.has(dv(e))}saveEventToCache(e){this.cachedEventUids.add(dv(e)),this.lastProcessedEventTime=Date.now()}}function dv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ww({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ww(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e={}){return ts(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oR=/^https?/;async function aR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sR(t);for(const n of e)try{if(lR(n))return}catch{}En(t,"unauthorized-domain")}function lR(t){const e=cf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oR.test(n))return!1;if(iR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new za(3e4,6e4);function hv(){const t=jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cR(t){return new Promise((e,n)=>{var r,s,i;function o(){hv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hv(),n(Pn(t,"network-request-failed"))},timeout:uR.get()})}if(!((s=(r=jn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=jn().gapi)===null||i===void 0)&&i.load)o();else{const l=sb("iframefcb");return jn()[l]=()=>{gapi.load?o():n(Pn(t,"network-request-failed"))},bw(`${rb()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw pu=null,e})}let pu=null;function dR(t){return pu=pu||cR(t),pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new za(5e3,15e3),fR="__/auth/iframe",pR="emulator/auth/iframe",mR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yR(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Op(e,pR):`https://${t.config.authDomain}/${fR}`,r={apiKey:e.apiKey,appName:t.name,v:Ls},s=gR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$a(r).slice(1)}`}async function vR(t){const e=await dR(t),n=jn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:yR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Pn(t,"network-request-failed"),l=jn().setTimeout(()=>{i(o)},hR.get());function c(){jn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xR=500,wR=600,ER="_blank",TR="http://localhost";class fv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IR(t,e,n,r=xR,s=wR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},_R),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Tt().toLowerCase();n&&(l=ww(d)?ER:n),_w(d)&&(e=e||TR,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[E,S])=>`${g}${E}=${S},`,"");if(G2(d)&&l!=="_self")return NR(e||"",l),new fv(null);const p=window.open(e||"",l,f);X(p,t,"popup-blocked");try{p.focus()}catch{}return new fv(p)}function NR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="__/auth/handler",SR="emulator/auth/handler",bR=encodeURIComponent("fac");async function pv(t,e,n,r,s,i){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ls,eventId:s};if(e instanceof Cw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Ha){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${bR}=${encodeURIComponent(c)}`:"";return`${RR(t)}?${$a(l).slice(1)}${d}`}function RR({config:t}){return t.emulator?Op(t,SR):`https://${t.authDomain}/${kR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="webStorageSupport";class AR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uw,this._completeRedirectFn=eR,this._overrideRedirectResult=Yb}async _openPopup(e,n,r,s){var i;ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await pv(e,n,r,cf(),s);return IR(e,o,Fp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await pv(e,n,r,cf(),s);return Db(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vR(e),r=new nR(e);return n.register("authEvent",s=>(X(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xd,{type:Xd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Xd];o!==void 0&&n(!!o),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kw()||xw()||Vp()}}const CR=AR;var mv="@firebase/auth",gv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DR(t){Ns(new $r("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sw(t)},d=new eb(r,s,i,c);return lb(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ns(new $r("auth-internal",e=>{const n=Vs(e.getProvider("auth").getImmediate());return(r=>new PR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cn(mv,gv,jR(t)),Cn(mv,gv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=5*60,LR=nw("authIdTokenMaxAge")||OR;let yv=null;const VR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LR)return;const s=n==null?void 0:n.token;yv!==s&&(yv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MR(t=bc()){const e=Sc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Rw(t,{popupRedirectResolver:CR,persistence:[qw,Vw,Uw]}),r=nw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=VR(i.toString());kb(n,o,()=>o(n.currentUser)),Nb(n,l=>o(l))}}const s=Zx("auth");return s&&ub(n,`http://${s}`),n}function UR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Pn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",UR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DR("Browser");var FR="firebase",BR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn(FR,BR,"app");var vv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,Kw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,y){function N(){}N.prototype=y.prototype,T.D=y.prototype,T.prototype=new N,T.prototype.constructor=T,T.C=function(k,A,j){for(var b=Array(arguments.length-2),it=2;it<arguments.length;it++)b[it-2]=arguments[it];return y.prototype[A].apply(k,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,N){N||(N=0);var k=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)k[A]=y.charCodeAt(N++)|y.charCodeAt(N++)<<8|y.charCodeAt(N++)<<16|y.charCodeAt(N++)<<24;else for(A=0;16>A;++A)k[A]=y[N++]|y[N++]<<8|y[N++]<<16|y[N++]<<24;y=T.g[0],N=T.g[1],A=T.g[2];var j=T.g[3],b=y+(j^N&(A^j))+k[0]+3614090360&4294967295;y=N+(b<<7&4294967295|b>>>25),b=j+(A^y&(N^A))+k[1]+3905402710&4294967295,j=y+(b<<12&4294967295|b>>>20),b=A+(N^j&(y^N))+k[2]+606105819&4294967295,A=j+(b<<17&4294967295|b>>>15),b=N+(y^A&(j^y))+k[3]+3250441966&4294967295,N=A+(b<<22&4294967295|b>>>10),b=y+(j^N&(A^j))+k[4]+4118548399&4294967295,y=N+(b<<7&4294967295|b>>>25),b=j+(A^y&(N^A))+k[5]+1200080426&4294967295,j=y+(b<<12&4294967295|b>>>20),b=A+(N^j&(y^N))+k[6]+2821735955&4294967295,A=j+(b<<17&4294967295|b>>>15),b=N+(y^A&(j^y))+k[7]+4249261313&4294967295,N=A+(b<<22&4294967295|b>>>10),b=y+(j^N&(A^j))+k[8]+1770035416&4294967295,y=N+(b<<7&4294967295|b>>>25),b=j+(A^y&(N^A))+k[9]+2336552879&4294967295,j=y+(b<<12&4294967295|b>>>20),b=A+(N^j&(y^N))+k[10]+4294925233&4294967295,A=j+(b<<17&4294967295|b>>>15),b=N+(y^A&(j^y))+k[11]+2304563134&4294967295,N=A+(b<<22&4294967295|b>>>10),b=y+(j^N&(A^j))+k[12]+1804603682&4294967295,y=N+(b<<7&4294967295|b>>>25),b=j+(A^y&(N^A))+k[13]+4254626195&4294967295,j=y+(b<<12&4294967295|b>>>20),b=A+(N^j&(y^N))+k[14]+2792965006&4294967295,A=j+(b<<17&4294967295|b>>>15),b=N+(y^A&(j^y))+k[15]+1236535329&4294967295,N=A+(b<<22&4294967295|b>>>10),b=y+(A^j&(N^A))+k[1]+4129170786&4294967295,y=N+(b<<5&4294967295|b>>>27),b=j+(N^A&(y^N))+k[6]+3225465664&4294967295,j=y+(b<<9&4294967295|b>>>23),b=A+(y^N&(j^y))+k[11]+643717713&4294967295,A=j+(b<<14&4294967295|b>>>18),b=N+(j^y&(A^j))+k[0]+3921069994&4294967295,N=A+(b<<20&4294967295|b>>>12),b=y+(A^j&(N^A))+k[5]+3593408605&4294967295,y=N+(b<<5&4294967295|b>>>27),b=j+(N^A&(y^N))+k[10]+38016083&4294967295,j=y+(b<<9&4294967295|b>>>23),b=A+(y^N&(j^y))+k[15]+3634488961&4294967295,A=j+(b<<14&4294967295|b>>>18),b=N+(j^y&(A^j))+k[4]+3889429448&4294967295,N=A+(b<<20&4294967295|b>>>12),b=y+(A^j&(N^A))+k[9]+568446438&4294967295,y=N+(b<<5&4294967295|b>>>27),b=j+(N^A&(y^N))+k[14]+3275163606&4294967295,j=y+(b<<9&4294967295|b>>>23),b=A+(y^N&(j^y))+k[3]+4107603335&4294967295,A=j+(b<<14&4294967295|b>>>18),b=N+(j^y&(A^j))+k[8]+1163531501&4294967295,N=A+(b<<20&4294967295|b>>>12),b=y+(A^j&(N^A))+k[13]+2850285829&4294967295,y=N+(b<<5&4294967295|b>>>27),b=j+(N^A&(y^N))+k[2]+4243563512&4294967295,j=y+(b<<9&4294967295|b>>>23),b=A+(y^N&(j^y))+k[7]+1735328473&4294967295,A=j+(b<<14&4294967295|b>>>18),b=N+(j^y&(A^j))+k[12]+2368359562&4294967295,N=A+(b<<20&4294967295|b>>>12),b=y+(N^A^j)+k[5]+4294588738&4294967295,y=N+(b<<4&4294967295|b>>>28),b=j+(y^N^A)+k[8]+2272392833&4294967295,j=y+(b<<11&4294967295|b>>>21),b=A+(j^y^N)+k[11]+1839030562&4294967295,A=j+(b<<16&4294967295|b>>>16),b=N+(A^j^y)+k[14]+4259657740&4294967295,N=A+(b<<23&4294967295|b>>>9),b=y+(N^A^j)+k[1]+2763975236&4294967295,y=N+(b<<4&4294967295|b>>>28),b=j+(y^N^A)+k[4]+1272893353&4294967295,j=y+(b<<11&4294967295|b>>>21),b=A+(j^y^N)+k[7]+4139469664&4294967295,A=j+(b<<16&4294967295|b>>>16),b=N+(A^j^y)+k[10]+3200236656&4294967295,N=A+(b<<23&4294967295|b>>>9),b=y+(N^A^j)+k[13]+681279174&4294967295,y=N+(b<<4&4294967295|b>>>28),b=j+(y^N^A)+k[0]+3936430074&4294967295,j=y+(b<<11&4294967295|b>>>21),b=A+(j^y^N)+k[3]+3572445317&4294967295,A=j+(b<<16&4294967295|b>>>16),b=N+(A^j^y)+k[6]+76029189&4294967295,N=A+(b<<23&4294967295|b>>>9),b=y+(N^A^j)+k[9]+3654602809&4294967295,y=N+(b<<4&4294967295|b>>>28),b=j+(y^N^A)+k[12]+3873151461&4294967295,j=y+(b<<11&4294967295|b>>>21),b=A+(j^y^N)+k[15]+530742520&4294967295,A=j+(b<<16&4294967295|b>>>16),b=N+(A^j^y)+k[2]+3299628645&4294967295,N=A+(b<<23&4294967295|b>>>9),b=y+(A^(N|~j))+k[0]+4096336452&4294967295,y=N+(b<<6&4294967295|b>>>26),b=j+(N^(y|~A))+k[7]+1126891415&4294967295,j=y+(b<<10&4294967295|b>>>22),b=A+(y^(j|~N))+k[14]+2878612391&4294967295,A=j+(b<<15&4294967295|b>>>17),b=N+(j^(A|~y))+k[5]+4237533241&4294967295,N=A+(b<<21&4294967295|b>>>11),b=y+(A^(N|~j))+k[12]+1700485571&4294967295,y=N+(b<<6&4294967295|b>>>26),b=j+(N^(y|~A))+k[3]+2399980690&4294967295,j=y+(b<<10&4294967295|b>>>22),b=A+(y^(j|~N))+k[10]+4293915773&4294967295,A=j+(b<<15&4294967295|b>>>17),b=N+(j^(A|~y))+k[1]+2240044497&4294967295,N=A+(b<<21&4294967295|b>>>11),b=y+(A^(N|~j))+k[8]+1873313359&4294967295,y=N+(b<<6&4294967295|b>>>26),b=j+(N^(y|~A))+k[15]+4264355552&4294967295,j=y+(b<<10&4294967295|b>>>22),b=A+(y^(j|~N))+k[6]+2734768916&4294967295,A=j+(b<<15&4294967295|b>>>17),b=N+(j^(A|~y))+k[13]+1309151649&4294967295,N=A+(b<<21&4294967295|b>>>11),b=y+(A^(N|~j))+k[4]+4149444226&4294967295,y=N+(b<<6&4294967295|b>>>26),b=j+(N^(y|~A))+k[11]+3174756917&4294967295,j=y+(b<<10&4294967295|b>>>22),b=A+(y^(j|~N))+k[2]+718787259&4294967295,A=j+(b<<15&4294967295|b>>>17),b=N+(j^(A|~y))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+j&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var N=y-this.blockSize,k=this.B,A=this.h,j=0;j<y;){if(A==0)for(;j<=N;)s(this,T,j),j+=this.blockSize;if(typeof T=="string"){for(;j<y;)if(k[A++]=T.charCodeAt(j++),A==this.blockSize){s(this,k),A=0;break}}else for(;j<y;)if(k[A++]=T[j++],A==this.blockSize){s(this,k),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var N=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=N&255,N/=256;for(this.u(T),T=Array(16),y=N=0;4>y;++y)for(var k=0;32>k;k+=8)T[N++]=this.g[y]>>>k&255;return T};function i(T,y){var N=l;return Object.prototype.hasOwnProperty.call(N,T)?N[T]:N[T]=y(T)}function o(T,y){this.h=y;for(var N=[],k=!0,A=T.length-1;0<=A;A--){var j=T[A]|0;k&&j==y||(N[A]=j,k=!1)}this.g=N}var l={};function c(T){return-128<=T&&128>T?i(T,function(y){return new o([y|0],0>y?-1:0)}):new o([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(d(-T));for(var y=[],N=1,k=0;T>=N;k++)y[k]=T/N|0,N*=4294967296;return new o(y,0)}function f(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return R(f(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=d(Math.pow(y,8)),k=p,A=0;A<T.length;A+=8){var j=Math.min(8,T.length-A),b=parseInt(T.substring(A,A+j),y);8>j?(j=d(Math.pow(y,j)),k=k.j(j).add(d(b))):(k=k.j(N),k=k.add(d(b)))}return k}var p=c(0),g=c(1),E=c(16777216);t=o.prototype,t.m=function(){if(I(this))return-R(this).m();for(var T=0,y=1,N=0;N<this.g.length;N++){var k=this.i(N);T+=(0<=k?k:4294967296+k)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S(this))return"0";if(I(this))return"-"+R(this).toString(T);for(var y=d(Math.pow(T,6)),N=this,k="";;){var A=P(N,y).g;N=w(N,A.j(y));var j=((0<N.g.length?N.g[0]:N.h)>>>0).toString(T);if(N=A,S(N))return j+k;for(;6>j.length;)j="0"+j;k=j+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function S(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function I(T){return T.h==-1}t.l=function(T){return T=w(this,T),I(T)?-1:S(T)?0:1};function R(T){for(var y=T.g.length,N=[],k=0;k<y;k++)N[k]=~T.g[k];return new o(N,~T.h).add(g)}t.abs=function(){return I(this)?R(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),N=[],k=0,A=0;A<=y;A++){var j=k+(this.i(A)&65535)+(T.i(A)&65535),b=(j>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);k=b>>>16,j&=65535,b&=65535,N[A]=b<<16|j}return new o(N,N[N.length-1]&-2147483648?-1:0)};function w(T,y){return T.add(R(y))}t.j=function(T){if(S(this)||S(T))return p;if(I(this))return I(T)?R(this).j(R(T)):R(R(this).j(T));if(I(T))return R(this.j(R(T)));if(0>this.l(E)&&0>T.l(E))return d(this.m()*T.m());for(var y=this.g.length+T.g.length,N=[],k=0;k<2*y;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(var A=0;A<T.g.length;A++){var j=this.i(k)>>>16,b=this.i(k)&65535,it=T.i(A)>>>16,Yt=T.i(A)&65535;N[2*k+2*A]+=b*Yt,x(N,2*k+2*A),N[2*k+2*A+1]+=j*Yt,x(N,2*k+2*A+1),N[2*k+2*A+1]+=b*it,x(N,2*k+2*A+1),N[2*k+2*A+2]+=j*it,x(N,2*k+2*A+2)}for(k=0;k<y;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=y;k<2*y;k++)N[k]=0;return new o(N,0)};function x(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function v(T,y){this.g=T,this.h=y}function P(T,y){if(S(y))throw Error("division by zero");if(S(T))return new v(p,p);if(I(T))return y=P(R(T),y),new v(R(y.g),R(y.h));if(I(y))return y=P(T,R(y)),new v(R(y.g),y.h);if(30<T.g.length){if(I(T)||I(y))throw Error("slowDivide_ only works with positive integers.");for(var N=g,k=y;0>=k.l(T);)N=V(N),k=V(k);var A=M(N,1),j=M(k,1);for(k=M(k,2),N=M(N,2);!S(k);){var b=j.add(k);0>=b.l(T)&&(A=A.add(N),j=b),k=M(k,1),N=M(N,1)}return y=w(T,A.j(y)),new v(A,y)}for(A=p;0<=T.l(y);){for(N=Math.max(1,Math.floor(T.m()/y.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),j=d(N),b=j.j(y);I(b)||0<b.l(T);)N-=k,j=d(N),b=j.j(y);S(j)&&(j=g),A=A.add(j),T=w(T,b)}return new v(A,T)}t.A=function(T){return P(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),N=[],k=0;k<y;k++)N[k]=this.i(k)&T.i(k);return new o(N,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),N=[],k=0;k<y;k++)N[k]=this.i(k)|T.i(k);return new o(N,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),N=[],k=0;k<y;k++)N[k]=this.i(k)^T.i(k);return new o(N,this.h^T.h)};function V(T){for(var y=T.g.length+1,N=[],k=0;k<y;k++)N[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(N,T.h)}function M(T,y){var N=y>>5;y%=32;for(var k=T.g.length-N,A=[],j=0;j<k;j++)A[j]=0<y?T.i(j+N)>>>y|T.i(j+N+1)<<32-y:T.i(j+N);return new o(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,vs=o}).apply(typeof vv<"u"?vv:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gw,Vo,Qw,mu,pf,Xw,Yw,Jw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var D=a[_];if(!(D in m))break e;m=m[D]}a=a[a.length-1],_=m[a],h=h(_),h!=_&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,_=!1,D={next:function(){if(!_&&m<a.length){var O=m++;return{value:h(O,a[O]),done:!1}}return _=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,_),a.apply(h,D)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function E(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function S(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(_,D,O){for(var z=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)z[ve-2]=arguments[ve];return h.prototype[D].apply(_,z)}}function I(a){const h=a.length;if(0<h){const m=Array(h);for(let _=0;_<h;_++)m[_]=a[_];return m}return[]}function R(a,h){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(c(_)){const D=a.length||0,O=_.length||0;a.length=D+O;for(let z=0;z<O;z++)a[D+z]=_[z]}else a.push(_)}}class w{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(a){return/^[\s\xa0]*$/.test(a)}function v(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function P(a){return P[" "](a),a}P[" "]=function(){};var V=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function M(a,h,m){for(const _ in a)h.call(m,a[_],_,a)}function T(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function y(a){const h={};for(const m in a)h[m]=a[m];return h}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,h){let m,_;for(let D=1;D<arguments.length;D++){_=arguments[D];for(m in _)a[m]=_[m];for(let O=0;O<N.length;O++)m=N[O],Object.prototype.hasOwnProperty.call(_,m)&&(a[m]=_[m])}}function A(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function j(a){l.setTimeout(()=>{throw a},0)}function b(){var a=Q;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class it{constructor(){this.h=this.g=null}add(h,m){const _=Yt.get();_.set(h,m),this.h?this.h.next=_:this.g=_,this.h=_}}var Yt=new w(()=>new cn,a=>a.reset());class cn{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,$=!1,Q=new it,J=()=>{const a=l.Promise.resolve(void 0);Xe=()=>{a.then(fe)}};var fe=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(m){j(m)}var h=Yt;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var dn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function Ze(a,h){if(xe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(V){e:{try{P(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:hn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ze.aa.h.call(this)}}S(Ze,xe);var hn={2:"touch",3:"pen",4:"mouse"};Ze.prototype.h=function(){Ze.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var fn="closure_listenable_"+(1e6*Math.random()|0),ed=0;function td(a,h,m,_,D){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!_,this.ha=D,this.key=++ed,this.da=this.fa=!1}function Bs(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $s(a){this.src=a,this.g={},this.h=0}$s.prototype.add=function(a,h,m,_,D){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var z=no(a,h,_,D);return-1<z?(h=a[z],m||(h.fa=!1)):(h=new td(h,this.src,O,!!_,D),h.fa=m,a.push(h)),h};function to(a,h){var m=h.type;if(m in a.g){var _=a.g[m],D=Array.prototype.indexOf.call(_,h,void 0),O;(O=0<=D)&&Array.prototype.splice.call(_,D,1),O&&(Bs(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function no(a,h,m,_){for(var D=0;D<a.length;++D){var O=a[D];if(!O.da&&O.listener==h&&O.capture==!!m&&O.ha==_)return D}return-1}var ro="closure_lm_"+(1e6*Math.random()|0),so={};function io(a,h,m,_,D){if(Array.isArray(h)){for(var O=0;O<h.length;O++)io(a,h[O],m,_,D);return null}return m=Fn(m),a&&a[fn]?a.K(h,m,d(_)?!!_.capture:!1,D):al(a,h,m,!1,_,D)}function al(a,h,m,_,D,O){if(!h)throw Error("Invalid event type");var z=d(D)?!!D.capture:!!D,ve=Re(a);if(ve||(a[ro]=ve=new $s(a)),m=ve.add(h,m,_,z,O),m.proxy)return m;if(_=ll(),m.proxy=_,_.src=a,_.listener=m,a.addEventListener)dn||(D=z),D===void 0&&(D=!1),a.addEventListener(h.toString(),_,D);else if(a.attachEvent)a.attachEvent(Z(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ll(){function a(m){return h.call(a.src,a.listener,m)}const h=re;return a}function oo(a,h,m,_,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)oo(a,h[O],m,_,D);else _=d(_)?!!_.capture:!!_,m=Fn(m),a&&a[fn]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],m=no(O,m,_,D),-1<m&&(Bs(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=Re(a))&&(h=a.g[h.toString()],a=-1,h&&(a=no(h,m,_,D)),(m=-1<a?h[a]:null)&&L(m))}function L(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[fn])to(h.i,a);else{var m=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(m,_,a.capture):h.detachEvent?h.detachEvent(Z(m),_):h.addListener&&h.removeListener&&h.removeListener(_),(m=Re(h))?(to(m,a),m.h==0&&(m.src=null,h[ro]=null)):Bs(a)}}}function Z(a){return a in so?so[a]:so[a]="on"+a}function re(a,h){if(a.da)a=!0;else{h=new Ze(h,this);var m=a.listener,_=a.ha||a.src;a.fa&&L(a),a=m.call(_,h)}return a}function Re(a){return a=a[ro],a instanceof $s?a:null}var Jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fn(a){return typeof a=="function"?a:(a[Jt]||(a[Jt]=function(h){return a.handleEvent(h)}),a[Jt])}function ze(){me.call(this),this.i=new $s(this),this.M=this,this.F=null}S(ze,me),ze.prototype[fn]=!0,ze.prototype.removeEventListener=function(a,h,m,_){oo(this,a,h,m,_)};function qe(a,h){var m,_=a.F;if(_)for(m=[];_;_=_.F)m.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new xe(h,a);else if(h instanceof xe)h.target=h.target||a;else{var D=h;h=new xe(_,a),k(h,D)}if(D=!0,m)for(var O=m.length-1;0<=O;O--){var z=h.g=m[O];D=dr(z,_,!0,h)&&D}if(z=h.g=a,D=dr(z,_,!0,h)&&D,D=dr(z,_,!1,h)&&D,m)for(O=0;O<m.length;O++)z=h.g=m[O],D=dr(z,_,!1,h)&&D}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],_=0;_<m.length;_++)Bs(m[_]);delete a.g[h],a.h--}}this.F=null},ze.prototype.K=function(a,h,m,_){return this.i.add(String(a),h,!1,m,_)},ze.prototype.L=function(a,h,m,_){return this.i.add(String(a),h,!0,m,_)};function dr(a,h,m,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,O=0;O<h.length;++O){var z=h[O];if(z&&!z.da&&z.capture==m){var ve=z.listener,ot=z.ha||z.src;z.fa&&to(a.i,z),D=ve.call(ot,_)!==!1&&D}}return D&&!_.defaultPrevented}function ul(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function ao(a){a.g=ul(()=>{a.g=null,a.i&&(a.i=!1,ao(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class nd extends me{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ao(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(a){me.call(this),this.h=a,this.g={}}S(rs,me);var cl=[];function dl(a){M(a.g,function(h,m){this.g.hasOwnProperty(m)&&L(h)},a),a.g={}}rs.prototype.N=function(){rs.aa.N.call(this),dl(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zs=l.JSON.stringify,se=l.JSON.parse,hl=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function qs(){}qs.prototype.h=null;function fl(a){return a.h||(a.h=a.i())}function Lm(){}var lo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rd(){xe.call(this,"d")}S(rd,xe);function sd(){xe.call(this,"c")}S(sd,xe);var ss={},Vm=null;function pl(){return Vm=Vm||new ze}ss.La="serverreachability";function Mm(a){xe.call(this,ss.La,a)}S(Mm,xe);function uo(a){const h=pl();qe(h,new Mm(h))}ss.STAT_EVENT="statevent";function Um(a,h){xe.call(this,ss.STAT_EVENT,a),this.stat=h}S(Um,xe);function It(a){const h=pl();qe(h,new Um(h,a))}ss.Ma="timingevent";function Fm(a,h){xe.call(this,ss.Ma,a),this.size=h}S(Fm,xe);function co(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function ho(){this.g=!0}ho.prototype.xa=function(){this.g=!1};function Y1(a,h,m,_,D,O){a.info(function(){if(a.g)if(O)for(var z="",ve=O.split("&"),ot=0;ot<ve.length;ot++){var de=ve[ot].split("=");if(1<de.length){var pt=de[0];de=de[1];var mt=pt.split("_");z=2<=mt.length&&mt[1]=="type"?z+(pt+"="+de+"&"):z+(pt+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+_+") [attempt "+D+"]: "+h+`
`+m+`
`+z})}function J1(a,h,m,_,D,O,z){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+D+"]: "+h+`
`+m+`
`+O+" "+z})}function Hs(a,h,m,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+eT(a,m)+(_?" "+_:"")})}function Z1(a,h){a.info(function(){return"TIMEOUT: "+h})}ho.prototype.info=function(){};function eT(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var _=m[a];if(!(2>_.length)){var D=_[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<D.length;z++)D[z]=""}}}}return zs(m)}catch{return h}}var ml={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},id;function gl(){}S(gl,qs),gl.prototype.g=function(){return new XMLHttpRequest},gl.prototype.i=function(){return{}},id=new gl;function hr(a,h,m,_){this.j=a,this.i=h,this.l=m,this.R=_||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $m}function $m(){this.i=null,this.g="",this.h=!1}var zm={},od={};function ad(a,h,m){a.L=1,a.v=xl(Bn(h)),a.m=m,a.P=!0,qm(a,null)}function qm(a,h){a.F=Date.now(),yl(a),a.A=Bn(a.v);var m=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),sg(m.i,"t",_),a.C=0,m=a.j.J,a.h=new $m,a.g=Eg(a.j,m?h:null,!a.m),0<a.O&&(a.M=new nd(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,_=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(cl[0]=D.toString()),D=cl);for(var O=0;O<D.length;O++){var z=io(m,D[O],_||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),uo(),Y1(a.i,a.u,a.A,a.l,a.R,a.m)}hr.prototype.ca=function(a){a=a.target;const h=this.M;h&&$n(a)==3?h.j():this.Y(a)},hr.prototype.Y=function(a){try{if(a==this.g)e:{const mt=$n(this.g);var h=this.g.Ba();const Gs=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||dg(this.g)))){this.J||mt!=4||h==7||(h==8||0>=Gs?uo(3):uo(2)),ld(this);var m=this.g.Z();this.X=m;t:if(Hm(this)){var _=dg(this.g);a="";var D=_.length,O=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){is(this),fo(this);var z="";break t}this.h.i=new l.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(O&&h==D-1)});_.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,J1(this.i,this.u,this.A,this.l,this.R,mt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,ot=this.g;if((ve=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(ve)){var de=ve;break t}}de=null}if(m=de)Hs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ud(this,m);else{this.o=!1,this.s=3,It(12),is(this),fo(this);break e}}if(this.P){m=!0;let pn;for(;!this.J&&this.C<z.length;)if(pn=tT(this,z),pn==od){mt==4&&(this.s=4,It(14),m=!1),Hs(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==zm){this.s=4,It(15),Hs(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else Hs(this.i,this.l,pn,null),ud(this,pn);if(Hm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||z.length!=0||this.h.h||(this.s=1,It(16),m=!1),this.o=this.o&&m,!m)Hs(this.i,this.l,z,"[Invalid Chunked Response]"),is(this),fo(this);else if(0<z.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),md(pt),pt.M=!0,It(11))}}else Hs(this.i,this.l,z,null),ud(this,z);mt==4&&is(this),this.o&&!this.J&&(mt==4?vg(this.j,this):(this.o=!1,yl(this)))}else vT(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),is(this),fo(this)}}}catch{}finally{}};function Hm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function tT(a,h){var m=a.C,_=h.indexOf(`
`,m);return _==-1?od:(m=Number(h.substring(m,_)),isNaN(m)?zm:(_+=1,_+m>h.length?od:(h=h.slice(_,_+m),a.C=_+m,h)))}hr.prototype.cancel=function(){this.J=!0,is(this)};function yl(a){a.S=Date.now()+a.I,Wm(a,a.I)}function Wm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=co(g(a.ba,a),h)}function ld(a){a.B&&(l.clearTimeout(a.B),a.B=null)}hr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Z1(this.i,this.A),this.L!=2&&(uo(),It(17)),is(this),this.s=2,fo(this)):Wm(this,this.S-a)};function fo(a){a.j.G==0||a.J||vg(a.j,a)}function is(a){ld(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,dl(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function ud(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||cd(m.h,a))){if(!a.K&&cd(m.h,a)&&m.G==3){try{var _=m.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var D=_;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)kl(m),Il(m);else break e;pd(m),It(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=co(g(m.Za,m),6e3));if(1>=Qm(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else as(m,11)}else if((a.K||m.g==a)&&kl(m),!x(h))for(D=m.Da.g.parse(h),h=0;h<D.length;h++){let de=D[h];if(m.T=de[0],de=de[1],m.G==2)if(de[0]=="c"){m.K=de[1],m.ia=de[2];const pt=de[3];pt!=null&&(m.la=pt,m.j.info("VER="+m.la));const mt=de[4];mt!=null&&(m.Aa=mt,m.j.info("SVER="+m.Aa));const Gs=de[5];Gs!=null&&typeof Gs=="number"&&0<Gs&&(_=1.5*Gs,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const pn=a.g;if(pn){const bl=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bl){var O=_.h;O.g||bl.indexOf("spdy")==-1&&bl.indexOf("quic")==-1&&bl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(dd(O,O.h),O.h=null))}if(_.D){const gd=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;gd&&(_.ya=gd,we(_.I,_.D,gd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var z=a;if(_.qa=wg(_,_.J?_.ia:null,_.W),z.K){Xm(_.h,z);var ve=z,ot=_.L;ot&&(ve.I=ot),ve.B&&(ld(ve),yl(ve)),_.g=z}else gg(_);0<m.i.length&&Nl(m)}else de[0]!="stop"&&de[0]!="close"||as(m,7);else m.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?as(m,7):fd(m):de[0]!="noop"&&m.l&&m.l.ta(de),m.v=0)}}uo(4)}catch{}}var nT=class{constructor(a,h){this.g=a,this.map=h}};function Km(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Qm(a){return a.h?1:a.g?a.g.size:0}function cd(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function dd(a,h){a.g?a.g.add(h):a.h=h}function Xm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Km.prototype.cancel=function(){if(this.i=Ym(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ym(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return I(a.i)}function rT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],m=a.length,_=0;_<m;_++)h.push(a[_]);return h}h=[],m=0;for(_ in a)h[m++]=a[_];return h}function sT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const _ in a)h[m++]=_;return h}}}function Jm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=sT(a),_=rT(a),D=_.length,O=0;O<D;O++)h.call(void 0,_[O],m&&m[O],a)}var Zm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iT(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var _=a[m].indexOf("="),D=null;if(0<=_){var O=a[m].substring(0,_);D=a[m].substring(_+1)}else O=a[m];h(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function os(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof os){this.h=a.h,vl(this,a.j),this.o=a.o,this.g=a.g,_l(this,a.s),this.l=a.l;var h=a.i,m=new go;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),eg(this,m),this.m=a.m}else a&&(h=String(a).match(Zm))?(this.h=!1,vl(this,h[1]||"",!0),this.o=po(h[2]||""),this.g=po(h[3]||"",!0),_l(this,h[4]),this.l=po(h[5]||"",!0),eg(this,h[6]||"",!0),this.m=po(h[7]||"")):(this.h=!1,this.i=new go(null,this.h))}os.prototype.toString=function(){var a=[],h=this.j;h&&a.push(mo(h,tg,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(mo(h,tg,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(mo(m,m.charAt(0)=="/"?lT:aT,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",mo(m,cT)),a.join("")};function Bn(a){return new os(a)}function vl(a,h,m){a.j=m?po(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function _l(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function eg(a,h,m){h instanceof go?(a.i=h,dT(a.i,a.h)):(m||(h=mo(h,uT)),a.i=new go(h,a.h))}function we(a,h,m){a.i.set(h,m)}function xl(a){return we(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function po(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function mo(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,oT),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function oT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var tg=/[#\/\?@]/g,aT=/[#\?:]/g,lT=/[#\?]/g,uT=/[#\?@]/g,cT=/#/g;function go(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function fr(a){a.g||(a.g=new Map,a.h=0,a.i&&iT(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=go.prototype,t.add=function(a,h){fr(this),this.i=null,a=Ws(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function ng(a,h){fr(a),h=Ws(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function rg(a,h){return fr(a),h=Ws(a,h),a.g.has(h)}t.forEach=function(a,h){fr(this),this.g.forEach(function(m,_){m.forEach(function(D){a.call(h,D,_,this)},this)},this)},t.na=function(){fr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let _=0;_<h.length;_++){const D=a[_];for(let O=0;O<D.length;O++)m.push(h[_])}return m},t.V=function(a){fr(this);let h=[];if(typeof a=="string")rg(this,a)&&(h=h.concat(this.g.get(Ws(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return fr(this),this.i=null,a=Ws(this,a),rg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function sg(a,h,m){ng(a,h),0<m.length&&(a.i=null,a.g.set(Ws(a,h),I(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var _=h[m];const O=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var D=O;z[_]!==""&&(D+="="+encodeURIComponent(String(z[_]))),a.push(D)}}return this.i=a.join("&")};function Ws(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function dT(a,h){h&&!a.j&&(fr(a),a.i=null,a.g.forEach(function(m,_){var D=_.toLowerCase();_!=D&&(ng(this,_),sg(this,D,m))},a)),a.j=h}function hT(a,h){const m=new ho;if(l.Image){const _=new Image;_.onload=E(pr,m,"TestLoadImage: loaded",!0,h,_),_.onerror=E(pr,m,"TestLoadImage: error",!1,h,_),_.onabort=E(pr,m,"TestLoadImage: abort",!1,h,_),_.ontimeout=E(pr,m,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function fT(a,h){const m=new ho,_=new AbortController,D=setTimeout(()=>{_.abort(),pr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(O=>{clearTimeout(D),O.ok?pr(m,"TestPingServer: ok",!0,h):pr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),pr(m,"TestPingServer: error",!1,h)})}function pr(a,h,m,_,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),_(m)}catch{}}function pT(){this.g=new hl}function mT(a,h,m){const _=m||"";try{Jm(a,function(D,O){let z=D;d(D)&&(z=zs(D)),h.push(_+O+"="+encodeURIComponent(z))})}catch(D){throw h.push(_+"type="+encodeURIComponent("_badmap")),D}}function wl(a){this.l=a.Ub||null,this.j=a.eb||!1}S(wl,qs),wl.prototype.g=function(){return new El(this.l,this.j)},wl.prototype.i=function(a){return function(){return a}}({});function El(a,h){ze.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(El,ze),t=El.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,vo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,vo(this)),this.g&&(this.readyState=3,vo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ig(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ig(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?yo(this):vo(this),this.readyState==3&&ig(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,yo(this))},t.Qa=function(a){this.g&&(this.response=a,yo(this))},t.ga=function(){this.g&&yo(this)};function yo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,vo(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function vo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(El.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function og(a){let h="";return M(a,function(m,_){h+=_,h+=":",h+=m,h+=`\r
`}),h}function hd(a,h,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=og(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):we(a,h,m))}function Le(a){ze.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Le,ze);var gT=/^https?$/i,yT=["POST","PUT"];t=Le.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():id.g(),this.v=this.o?fl(this.o):fl(id),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){ag(this,O);return}if(a=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var D in _)m.set(D,_[D]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const O of _.keys())m.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(yT,h,void 0))||_||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of m)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cg(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){ag(this,O)}};function ag(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,lg(a),Tl(a)}function lg(a){a.A||(a.A=!0,qe(a,"complete"),qe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,qe(this,"complete"),qe(this,"abort"),Tl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tl(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ug(this):this.bb())},t.bb=function(){ug(this)};function ug(a){if(a.h&&typeof o<"u"&&(!a.v[1]||$n(a)!=4||a.Z()!=2)){if(a.u&&$n(a)==4)ul(a.Ea,0,a);else if(qe(a,"readystatechange"),$n(a)==4){a.h=!1;try{const z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var _;if(_=z===0){var D=String(a.D).match(Zm)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),_=!gT.test(D?D.toLowerCase():"")}m=_}if(m)qe(a,"complete"),qe(a,"success");else{a.m=6;try{var O=2<$n(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",lg(a)}}finally{Tl(a)}}}}function Tl(a,h){if(a.g){cg(a);const m=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||qe(a,"ready");try{m.onreadystatechange=_}catch{}}}function cg(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function $n(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),se(h)}};function dg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function vT(a){const h={};a=(a.g&&2<=$n(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(x(a[_]))continue;var m=A(a[_]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=h[D]||[];h[D]=O,O.push(m)}T(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _o(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function hg(a){this.Aa=0,this.i=[],this.j=new ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_o("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_o("baseRetryDelayMs",5e3,a),this.cb=_o("retryDelaySeedMs",1e4,a),this.Wa=_o("forwardChannelMaxRetries",2,a),this.wa=_o("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Km(a&&a.concurrentRequestLimit),this.Da=new pT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hg.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,_){It(0),this.W=a,this.H=h||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=wg(this,null,this.W),Nl(this)};function fd(a){if(fg(a),a.G==3){var h=a.U++,m=Bn(a.I);if(we(m,"SID",a.K),we(m,"RID",h),we(m,"TYPE","terminate"),xo(a,m),h=new hr(a,a.j,h),h.L=2,h.v=xl(Bn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=Eg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),yl(h)}xg(a)}function Il(a){a.g&&(md(a),a.g.cancel(),a.g=null)}function fg(a){Il(a),a.u&&(l.clearTimeout(a.u),a.u=null),kl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Nl(a){if(!Gm(a.h)&&!a.s){a.s=!0;var h=a.Ga;Xe||J(),$||(Xe(),$=!0),Q.add(h,a),a.B=0}}function _T(a,h){return Qm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=co(g(a.Ga,a,h),_g(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new hr(this,this.j,a);let O=this.o;if(this.S&&(O?(O=y(O),k(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=mg(this,D,h),m=Bn(this.I),we(m,"RID",a),we(m,"CVER",22),this.D&&we(m,"X-HTTP-Session-Id",this.D),xo(this,m),O&&(this.O?h="headers="+encodeURIComponent(String(og(O)))+"&"+h:this.m&&hd(m,this.m,O)),dd(this.h,D),this.Ua&&we(m,"TYPE","init"),this.P?(we(m,"$req",h),we(m,"SID","null"),D.T=!0,ad(D,m,null)):ad(D,m,h),this.G=2}}else this.G==3&&(a?pg(this,a):this.i.length==0||Gm(this.h)||pg(this))};function pg(a,h){var m;h?m=h.l:m=a.U++;const _=Bn(a.I);we(_,"SID",a.K),we(_,"RID",m),we(_,"AID",a.T),xo(a,_),a.m&&a.o&&hd(_,a.m,a.o),m=new hr(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=mg(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),dd(a.h,m),ad(m,_,h)}function xo(a,h){a.H&&M(a.H,function(m,_){we(h,_,m)}),a.l&&Jm({},function(m,_){we(h,_,m)})}function mg(a,h,m){m=Math.min(a.i.length,m);var _=a.l?g(a.l.Na,a.l,a):null;e:{var D=a.i;let O=-1;for(;;){const z=["count="+m];O==-1?0<m?(O=D[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let ve=!0;for(let ot=0;ot<m;ot++){let de=D[ot].g;const pt=D[ot].map;if(de-=O,0>de)O=Math.max(0,D[ot].g-100),ve=!1;else try{mT(pt,z,"req"+de+"_")}catch{_&&_(pt)}}if(ve){_=z.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,_}function gg(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Xe||J(),$||(Xe(),$=!0),Q.add(h,a),a.v=0}}function pd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=co(g(a.Fa,a),_g(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,yg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=co(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Il(this),yg(this))};function md(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function yg(a){a.g=new hr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Bn(a.qa);we(h,"RID","rpc"),we(h,"SID",a.K),we(h,"AID",a.T),we(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&we(h,"TO",a.ja),we(h,"TYPE","xmlhttp"),xo(a,h),a.m&&a.o&&hd(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=xl(Bn(h)),m.m=null,m.P=!0,qm(m,a)}t.Za=function(){this.C!=null&&(this.C=null,Il(this),pd(this),It(19))};function kl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function vg(a,h){var m=null;if(a.g==h){kl(a),md(a),a.g=null;var _=2}else if(cd(a.h,h))m=h.D,Xm(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var D=a.B;_=pl(),qe(_,new Fm(_,m)),Nl(a)}else gg(a);else if(D=h.s,D==3||D==0&&0<h.X||!(_==1&&_T(a,h)||_==2&&pd(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),D){case 1:as(a,5);break;case 4:as(a,10);break;case 3:as(a,6);break;default:as(a,2)}}}function _g(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function as(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),_=a.Xa;const D=!_;_=new os(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vl(_,"https"),xl(_),D?hT(_.toString(),m):fT(_.toString(),m)}else It(2);a.G=0,a.l&&a.l.sa(h),xg(a),fg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function xg(a){if(a.G=0,a.ka=[],a.l){const h=Ym(a.h);(h.length!=0||a.i.length!=0)&&(R(a.ka,h),R(a.ka,a.i),a.h.i.length=0,I(a.i),a.i.length=0),a.l.ra()}}function wg(a,h,m){var _=m instanceof os?Bn(m):new os(m);if(_.g!="")h&&(_.g=h+"."+_.g),_l(_,_.s);else{var D=l.location;_=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var O=new os(null);_&&vl(O,_),h&&(O.g=h),D&&_l(O,D),m&&(O.l=m),_=O}return m=a.D,h=a.ya,m&&h&&we(_,m,h),we(_,"VER",a.la),xo(a,_),_}function Eg(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Le(new wl({eb:m})):new Le(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tg(){}t=Tg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sl(){}Sl.prototype.g=function(a,h){return new Bt(a,h)};function Bt(a,h){ze.call(this),this.g=new hg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!x(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ks(this)}S(Bt,ze),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){fd(this.g)},Bt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=zs(a),a=m);h.i.push(new nT(h.Ya++,a)),h.G==3&&Nl(h)},Bt.prototype.N=function(){this.g.l=null,delete this.j,fd(this.g),delete this.g,Bt.aa.N.call(this)};function Ig(a){rd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}S(Ig,rd);function Ng(){sd.call(this),this.status=1}S(Ng,sd);function Ks(a){this.g=a}S(Ks,Tg),Ks.prototype.ua=function(){qe(this.g,"a")},Ks.prototype.ta=function(a){qe(this.g,new Ig(a))},Ks.prototype.sa=function(a){qe(this.g,new Ng)},Ks.prototype.ra=function(){qe(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,Jw=function(){return new Sl},Yw=function(){return pl()},Xw=ss,pf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ml.NO_ERROR=0,ml.TIMEOUT=8,ml.HTTP_ERROR=6,mu=ml,Bm.COMPLETE="complete",Qw=Bm,Lm.EventType=lo,lo.OPEN="a",lo.CLOSE="b",lo.ERROR="c",lo.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Vo=Lm,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,Gw=Le}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const _v="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new Cp("@firebase/firestore");function Ro(){return bs.logLevel}function W(t,...e){if(bs.logLevel<=ae.DEBUG){const n=e.map($p);bs.debug(`Firestore (${Gi}): ${t}`,...n)}}function lr(t,...e){if(bs.logLevel<=ae.ERROR){const n=e.map($p);bs.error(`Firestore (${Gi}): ${t}`,...n)}}function Rs(t,...e){if(bs.logLevel<=ae.WARN){const n=e.map($p);bs.warn(`Firestore (${Gi}): ${t}`,...n)}}function $p(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Gi}) INTERNAL ASSERTION FAILED: `+t;throw lr(e),new Error(e)}function ye(t,e){t||Y()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Mn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class $R{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zR{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new Zw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new _t(e)}}class qR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new WR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=GR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function ji(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Qe(0,0))}static max(){return new ee(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ka.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ka?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Te extends ka{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const QR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends ka{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return QR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Te.fromString(e))}static fromName(e){return new G(Te.fromString(e).popFirst(5))}static empty(){return new G(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Te(e.slice()))}}function XR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new zr(s,G.empty(),e)}function YR(t){return new zr(t.readTime,t.key,-1)}class zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zr(ee.min(),G.empty(),-1)}static max(){return new zr(ee.max(),G.empty(),-1)}}function JR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==ZR)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function tA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ga(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}qp.oe=-1;function Pc(t){return t==null}function Yu(t){return t===0&&1/t==-1/0}function nA(t){return typeof t=="number"&&Number.isInteger(t)&&!Yu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||lt.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gl(this.root,e,this.comparator,!0)}}class Gl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??lt.RED,this.left=s??lt.EMPTY,this.right=i??lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new lt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return lt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wv(this.data.getIterator())}getIteratorFrom(e){return new wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new ct(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nE("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const rA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(t){if(ye(!!t),typeof t=="string"){let e=0;const n=rA.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function As(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wp(t){const e=t.mapValue.fields.__previous_value__;return Hp(e)?Wp(e):e}function Sa(t){const e=qr(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n,r,s,i,o,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class Di{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Di("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Di&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql={mapValue:{}};function Cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hp(t)?4:oA(t)?9007199254740991:iA(t)?10:11:Y()}function Ln(t,e){if(t===e)return!0;const n=Cs(t);if(n!==Cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Sa(t).isEqual(Sa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=qr(s.timestampValue),l=qr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return As(s.bytesValue).isEqual(As(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),l=Fe(i.doubleValue);return o===l?Yu(o)===Yu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ji(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(xv(o)!==xv(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Ln(o[c],l[c])))return!1;return!0}(t,e);default:return Y()}}function ba(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function Oi(t,e){if(t===e)return 0;const n=Cs(t),r=Cs(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Fe(i.integerValue||i.doubleValue),c=Fe(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Ev(t.timestampValue,e.timestampValue);case 4:return Ev(Sa(t),Sa(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(i,o){const l=As(i),c=As(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=he(l[d],c[d]);if(f!==0)return f}return he(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=he(Fe(i.latitude),Fe(o.latitude));return l!==0?l:he(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Tv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,f;const p=i.fields||{},g=o.fields||{},E=(l=p.value)===null||l===void 0?void 0:l.arrayValue,S=(c=g.value)===null||c===void 0?void 0:c.arrayValue,I=he(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return I!==0?I:Tv(E,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ql.mapValue&&o===Ql.mapValue)return 0;if(i===Ql.mapValue)return 1;if(o===Ql.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=he(c[p],f[p]);if(g!==0)return g;const E=Oi(l[c[p]],d[f[p]]);if(E!==0)return E}return he(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function Ev(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=qr(t),r=qr(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function Tv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Oi(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function Li(t){return mf(t)}function mf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return As(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=mf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${mf(n.fields[o])}`;return s+"}"}(t.mapValue):Y()}function Iv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gf(t){return!!t&&"integerValue"in t}function Kp(t){return!!t&&"arrayValue"in t}function Nv(t){return!!t&&"nullValue"in t}function kv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gu(t){return!!t&&"mapValue"in t}function iA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ms(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yo(n)}setAll(e){let n=nt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Yo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());gu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ms(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Dt(Yo(this.value))}}function rE(t){const e=[];return Ms(t.fields,(n,r)=>{const s=new nt([n]);if(gu(r)){const i=rE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wt(e,0,ee.min(),ee.min(),ee.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new wt(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new wt(e,2,n,ee.min(),ee.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,ee.min(),ee.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this.position=e,this.inclusive=n}}function Sv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Oi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function bv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n="asc"){this.field=e,this.dir=n}}function aA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{}class Ke extends sE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uA(e,n,r):n==="array-contains"?new hA(e,r):n==="in"?new fA(e,r):n==="not-in"?new pA(e,r):n==="array-contains-any"?new mA(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cA(e,r):new dA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Oi(n,this.value)):n!==null&&Cs(this.value)===Cs(n)&&this.matchesComparison(Oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends sE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Tn(e,n)}matches(e){return iE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function iE(t){return t.op==="and"}function oE(t){return lA(t)&&iE(t)}function lA(t){for(const e of t.filters)if(e instanceof Tn)return!1;return!0}function yf(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Li(t.value);if(oE(t))return t.filters.map(e=>yf(e)).join(",");{const e=t.filters.map(n=>yf(n)).join(",");return`${t.op}(${e})`}}function aE(t,e){return t instanceof Ke?function(r,s){return s instanceof Ke&&r.op===s.op&&r.field.isEqual(s.field)&&Ln(r.value,s.value)}(t,e):t instanceof Tn?function(r,s){return s instanceof Tn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&aE(o,s.filters[l]),!0):!1}(t,e):void Y()}function lE(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Li(n.value)}`}(t):t instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map(lE).join(" ,")+"}"}(t):"Filter"}class uA extends Ke{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class cA extends Ke{constructor(e,n){super(e,"in",n),this.keys=uE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dA extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=uE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class hA extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kp(n)&&ba(n.arrayValue,this.value)}}class fA extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ba(this.value.arrayValue,n)}}class pA extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ba(this.value.arrayValue,n)}}class mA extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ba(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Rv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new gA(t,e,n,r,s,i,o)}function Gp(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Li(r)).join(",")),e.ue=n}return e.ue}function Qp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bv(t.startAt,e.startAt)&&bv(t.endAt,e.endAt)}function vf(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function yA(t,e,n,r,s,i,o,l){return new Qi(t,e,n,r,s,i,o,l)}function jc(t){return new Qi(t)}function Av(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cE(t){return t.collectionGroup!==null}function Jo(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ct(nt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ra(i,r))}),n.has(nt.keyField().canonicalString())||e.ce.push(new Ra(nt.keyField(),r))}return e.ce}function Dn(t){const e=te(t);return e.le||(e.le=vA(e,Jo(t))),e.le}function vA(t,e){if(t.limitType==="F")return Rv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ra(s.field,i)});const n=t.endAt?new Ju(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ju(t.startAt.position,t.startAt.inclusive):null;return Rv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _f(t,e){const n=t.filters.concat([e]);return new Qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zu(t,e,n){return new Qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dc(t,e){return Qp(Dn(t),Dn(e))&&t.limitType===e.limitType}function dE(t){return`${Gp(Dn(t))}|lt:${t.limitType}`}function Zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>lE(s)).join(", ")}]`),Pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Li(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Li(s)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function Oc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Jo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=Sv(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,Jo(r),s)||r.endAt&&!function(o,l,c){const d=Sv(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,Jo(r),s))}(t,e)}function _A(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hE(t){return(e,n)=>{let r=!1;for(const s of Jo(t)){const i=xA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xA(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Oi(c,d):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return tE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new De(G.comparator);function ur(){return wA}const fE=new De(G.comparator);function Mo(...t){let e=fE;for(const n of t)e=e.insert(n.key,n);return e}function pE(t){let e=fE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return Zo()}function mE(){return Zo()}function Zo(){return new Xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const EA=new De(G.comparator),TA=new ct(G.comparator);function oe(...t){let e=TA;for(const n of t)e=e.add(n);return e}const IA=new ct(he);function NA(){return IA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yu(e)?"-0":e}}function gE(t){return{integerValue:""+t}}function yE(t,e){return nA(e)?gE(e):Xp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function kA(t,e,n){return t instanceof Aa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hp(i)&&(i=Wp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ca?_E(t,e):t instanceof Pa?xE(t,e):function(s,i){const o=vE(s,i),l=Cv(o)+Cv(s.Pe);return gf(o)&&gf(s.Pe)?gE(l):Xp(s.serializer,l)}(t,e)}function SA(t,e,n){return t instanceof Ca?_E(t,e):t instanceof Pa?xE(t,e):n}function vE(t,e){return t instanceof ja?function(r){return gf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Aa extends Lc{}class Ca extends Lc{constructor(e){super(),this.elements=e}}function _E(t,e){const n=wE(e);for(const r of t.elements)n.some(s=>Ln(s,r))||n.push(r);return{arrayValue:{values:n}}}class Pa extends Lc{constructor(e){super(),this.elements=e}}function xE(t,e){let n=wE(e);for(const r of t.elements)n=n.filter(s=>!Ln(s,r));return{arrayValue:{values:n}}}class ja extends Lc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Cv(t){return Fe(t.integerValue||t.doubleValue)}function wE(t){return Kp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){this.field=e,this.transform=n}}function bA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ca&&s instanceof Ca||r instanceof Pa&&s instanceof Pa?ji(r.elements,s.elements,Ln):r instanceof ja&&s instanceof ja?Ln(r.Pe,s.Pe):r instanceof Aa&&s instanceof Aa}(t.transform,e.transform)}class RA{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vc{}function TE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yp(t.key,on.none()):new Qa(t.key,t.data,on.none());{const n=t.data,r=Dt.empty();let s=new ct(nt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ns(t.key,r,new Ht(s.toArray()),on.none())}}function AA(t,e,n){t instanceof Qa?function(s,i,o){const l=s.value.clone(),c=jv(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ns?function(s,i,o){if(!yu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=jv(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(IE(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ea(t,e,n,r){return t instanceof Qa?function(i,o,l,c){if(!yu(i.precondition,o))return l;const d=i.value.clone(),f=Dv(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ns?function(i,o,l,c){if(!yu(i.precondition,o))return l;const d=Dv(i.fieldTransforms,c,o),f=o.data;return f.setAll(IE(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return yu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function CA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=vE(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function Pv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ji(r,s,(i,o)=>bA(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qa extends Vc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ns extends Vc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function IE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jv(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,SA(o,l,n[s]))}return r}function Dv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,kA(i,o,e))}return r}class Yp extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PA extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&AA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ea(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ea(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=mE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=TE(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&ji(this.mutations,e.mutations,(n,r)=>Pv(n,r))&&ji(this.baseMutations,e.baseMutations,(n,r)=>Pv(n,r))}}class Jp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return EA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Jp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,le;function LA(t){switch(t){default:return Y();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function NE(t){if(t===void 0)return lr("GRPC error has no .code"),U.UNKNOWN;switch(t){case He.OK:return U.OK;case He.CANCELLED:return U.CANCELLED;case He.UNKNOWN:return U.UNKNOWN;case He.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case He.INTERNAL:return U.INTERNAL;case He.UNAVAILABLE:return U.UNAVAILABLE;case He.UNAUTHENTICATED:return U.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case He.NOT_FOUND:return U.NOT_FOUND;case He.ALREADY_EXISTS:return U.ALREADY_EXISTS;case He.PERMISSION_DENIED:return U.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case He.ABORTED:return U.ABORTED;case He.OUT_OF_RANGE:return U.OUT_OF_RANGE;case He.UNIMPLEMENTED:return U.UNIMPLEMENTED;case He.DATA_LOSS:return U.DATA_LOSS;default:return Y()}}(le=He||(He={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new vs([4294967295,4294967295],0);function Ov(t){const e=VA().encode(t),n=new Kw;return n.update(e),new Uint8Array(n.digest())}function Lv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vs([n,r],0),new vs([s,i],0)]}class Zp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Uo(`Invalid padding: ${n}`);if(r<0)throw new Uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Uo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Uo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=vs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(vs.fromNumber(r)));return s.compare(MA)===1&&(s=new vs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ov(e),[r,s]=Lv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Zp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Ov(e),[r,s]=Lv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Uo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mc(ee.min(),s,new De(he),ur(),oe())}}class Xa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xa(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class kE{constructor(e,n){this.targetId=e,this.me=n}}class SE{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Vv{constructor(){this.fe=0,this.ge=Uv(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new Xa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Uv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class UA{constructor(e){this.Le=e,this.Be=new Map,this.ke=ur(),this.qe=Mv(),this.Qe=new De(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(vf(i))if(r===0){const o=new G(i.path);this.Ue(n,o,wt.newNoDocument(o,ee.min()))}else ye(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=As(r).toUint8Array()}catch(c){if(c instanceof nE)return Rs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Zp(o,s,i)}catch(c){return Rs(c instanceof Uo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&vf(l.target)){const c=new G(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,wt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=oe();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Mc(e,n,this.Qe,this.ke,r);return this.ke=ur(),this.qe=Mv(),this.Qe=new De(he),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Vv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ct(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Mv(){return new De(G.comparator)}function Uv(){return new De(G.comparator)}const FA={asc:"ASCENDING",desc:"DESCENDING"},BA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$A={and:"AND",or:"OR"};class zA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xf(t,e){return t.useProto3Json||Pc(e)?e:{value:e}}function ec(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qA(t,e){return ec(t,e.toTimestamp())}function On(t){return ye(!!t),ee.fromTimestamp(function(n){const r=qr(n);return new Qe(r.seconds,r.nanos)}(t))}function em(t,e){return wf(t,e).canonicalString()}function wf(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RE(t){const e=Te.fromString(t);return ye(DE(e)),e}function Ef(t,e){return em(t.databaseId,e.path)}function Yd(t,e){const n=RE(e);if(n.get(1)!==t.databaseId.projectId)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(CE(n))}function AE(t,e){return em(t.databaseId,e)}function HA(t){const e=RE(t);return e.length===4?Te.emptyPath():CE(e)}function Tf(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CE(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Fv(t,e,n){return{name:Ef(t,e),fields:n.value.mapValue.fields}}function WA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ye(f===void 0||typeof f=="string"),st.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array),st.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?U.UNKNOWN:NE(d.code);return new q(f,d.message||"")}(o);n=new SE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Yd(t,r.document.name),i=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):ee.min(),l=new Dt({mapValue:{fields:r.document.fields}}),c=wt.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new vu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Yd(t,r.document),i=r.readTime?On(r.readTime):ee.min(),o=wt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new vu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Yd(t,r.document),i=r.removedTargetIds||[];n=new vu([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new OA(s,i),l=r.targetId;n=new kE(l,o)}}return n}function KA(t,e){let n;if(e instanceof Qa)n={update:Fv(t,e.key,e.value)};else if(e instanceof Yp)n={delete:Ef(t,e.key)};else if(e instanceof ns)n={update:Fv(t,e.key,e.data),updateMask:nC(e.fieldMask)};else{if(!(e instanceof PA))return Y();n={verify:Ef(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Aa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ca)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Pa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ja)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:qA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function GA(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?On(s.updateTime):On(i);return o.isEqual(ee.min())&&(o=On(i)),new RA(o,s.transformResults||[])}(n,e))):[]}function QA(t,e){return{documents:[AE(t,e.path)]}}function XA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AE(t,s);const i=function(d){if(d.length!==0)return jE(Tn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ei(g.field),direction:ZA(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=xf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function YA(t){let e=HA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=PE(p);return g instanceof Tn&&oE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(S){return new Ra(ti(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Pc(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,E=p.values||[];return new Ju(E,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,E=p.values||[];return new Ju(E,g)}(n.endAt)),yA(e,s,o,i,l,"F",c,d)}function JA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ti(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ti(n.unaryFilter.field);return Ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ti(n.unaryFilter.field);return Ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ti(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(ti(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(r=>PE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function ZA(t){return FA[t]}function eC(t){return BA[t]}function tC(t){return $A[t]}function ei(t){return{fieldPath:t.canonicalString()}}function ti(t){return nt.fromServerFormat(t.fieldPath)}function jE(t){return t instanceof Ke?function(n){if(n.op==="=="){if(kv(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NAN"}};if(Nv(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kv(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NAN"}};if(Nv(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(n.field),op:eC(n.op),value:n.value}}}(t):t instanceof Tn?function(n){const r=n.getFilters().map(s=>jE(s));return r.length===1?r[0]:{compositeFilter:{op:tC(n.op),filters:r}}}(t):Y()}function nC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,s,i=ee.min(),o=ee.min(),l=st.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.ct=e}}function sC(t){const e=YA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.un=new oC}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(zr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class oC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ct(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ct(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Vi(0)}static kn(){return new Vi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.changes=new Xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ea(r.mutation,s,Ht.empty(),Qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Mo();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=ur();const o=Zo(),l=function(){return Zo()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof ns)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ea(f.mutation,d,f.mutation.getFieldMask(),Qe.now())):o.set(d.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new lC(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Zo();let s=new De((o,l)=>o-l),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Ht.empty();f=l.applyToLocalView(d,f),r.set(c,f);const p=(s.get(l.batchId)||oe()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,p=mE();f.forEach(g=>{if(!i.has(g)){const E=TE(n.get(g),r.get(g));E!==null&&p.set(g,E),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ms());let l=-1,c=i;return o.next(d=>F.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,oe())).next(f=>({batchId:l,changes:pE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=Mo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Mo();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,c=>{const d=function(p,g){return new Qi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,wt.newInvalidDocument(f)))});let l=Mo();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&ea(f.mutation,d,Ht.empty(),Qe.now()),Oc(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:On(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:sC(s.bundledQuery),readTime:On(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.overlays=new De(G.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ms();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ms(),i=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ms(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=ms(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DA(n,r));let i=this.Ir.get(n);i===void 0&&(i=oe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(){this.Tr=new ct(et.Er),this.dr=new ct(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new et(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new et(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Te([])),r=new et(n,e),s=new et(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Te([])),r=new et(n,e),s=new et(n,e+1);let i=oe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new et(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ct(et.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jA(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new et(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),s=new et(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(he);return n.forEach(s=>{const i=new et(s,0),o=new et(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new et(new G(i),0);let l=new ct(he);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new et(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.Mr=e,this.docs=function(){return new De(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ur();const o=n.path,l=new G(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||JR(YR(f),r)<=0||(s.has(f.key)||Oc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mC(this)}getSize(e){return F.resolve(this.size)}}class mC extends aC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.persistence=e,this.Nr=new Xi(n=>Gp(n),Qp),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new tm,this.targetCount=0,this.kr=Vi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Vi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new qp(0),this.Kr=!1,this.Kr=!0,this.$r=new hC,this.referenceDelegate=e(this),this.Ur=new gC(this),this.indexManager=new iC,this.remoteDocumentCache=function(s){return new pC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new rC(n),this.Gr=new cC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new fC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new vC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class vC extends eA{constructor(e){super(),this.currentSequenceNumber=e}}class nm{constructor(e){this.persistence=e,this.Jr=new tm,this.Yr=null}static Zr(e){return new nm(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=G.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new rm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hS()?8:tA(Tt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new _C;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ro()<=ae.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Ro()<=ae.DEBUG&&W("QueryEngine","Query:",Zs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ro()<=ae.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):F.resolve())}Yi(e,n){if(Av(n))return F.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Zu(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=oe(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,l);return this.ns(n,d,o,c.readTime)?this.Yi(e,Zu(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return Av(n)||s.isEqual(ee.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Ro()<=ae.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zs(n)),this.rs(e,o,n,XR(s,-1)).next(l=>l))})}ts(e,n){let r=new ct(hE(e));return n.forEach((s,i)=>{Oc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ro()<=ae.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Zs(n)),this.Ji.getDocumentsMatchingQuery(e,n,zr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new De(he),this._s=new Xi(i=>Gp(i),Qp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function EC(t,e,n,r){return new wC(t,e,n,r)}async function OE(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=oe();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function TC(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const p=d.batch,g=p.keys();let E=F.resolve();return g.forEach(S=>{E=E.next(()=>f.getEntry(c,S)).next(I=>{const R=d.docVersions.get(S);ye(R!==null),I.version.compareTo(R)<0&&(p.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),f.addEntry(I)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=oe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function LE(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function IC(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let E=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(st.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),s=s.insert(p,E),function(I,R,w){return I.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,E,f)&&l.push(n.Ur.updateTargetData(i,E))});let c=ur(),d=oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(NC(i,o,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!r.isEqual(ee.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function NC(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ur();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function kC(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function SC(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function If(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ga(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Bv(t,e,n){const r=te(t);let s=ee.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const p=te(c),g=p._s.get(f);return g!==void 0?F.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,o,Dn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:oe())).next(l=>(bC(r,_A(e),l),{documents:l,Ts:i})))}function bC(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class $v{constructor(){this.activeTargetIds=NA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RC{constructor(){this.so=new $v,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl=null;function Jd(){return Xl===null?Xl=function(){return 268435456+Math.round(2147483648*Math.random())}():Xl++,"0x"+Xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class jC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Jd(),c=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(f=>(W("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Rs("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",c,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=CC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Jd();return new Promise((o,l)=>{const c=new Gw;c.setWithCredentials(!0),c.listenOnce(Qw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case mu.NO_ERROR:const f=c.getResponseJson();W(vt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case mu.TIMEOUT:W(vt,`RPC '${e}' ${i} timed out`),l(new q(U.DEADLINE_EXCEEDED,"Request time out"));break;case mu.HTTP_ERROR:const p=c.getStatus();if(W(vt,`RPC '${e}' ${i} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const S=function(R){const w=R.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(E.status);l(new q(S,E.message))}else l(new q(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new q(U.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(vt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);W(vt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Jd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Jw(),l=Yw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");W(vt,`Creating RPC '${e}' stream ${s}: ${f}`,c);const p=o.createWebChannel(f,c);let g=!1,E=!1;const S=new PC({Io:R=>{E?W(vt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(W(vt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),W(vt,`RPC '${e}' stream ${s} sending:`,R),p.send(R))},To:()=>p.close()}),I=(R,w,x)=>{R.listen(w,v=>{try{x(v)}catch(P){setTimeout(()=>{throw P},0)}})};return I(p,Vo.EventType.OPEN,()=>{E||(W(vt,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),I(p,Vo.EventType.CLOSE,()=>{E||(E=!0,W(vt,`RPC '${e}' stream ${s} transport closed`),S.So())}),I(p,Vo.EventType.ERROR,R=>{E||(E=!0,Rs(vt,`RPC '${e}' stream ${s} transport errored:`,R),S.So(new q(U.UNAVAILABLE,"The operation could not be completed")))}),I(p,Vo.EventType.MESSAGE,R=>{var w;if(!E){const x=R.data[0];ye(!!x);const v=x,P=v.error||((w=v[0])===null||w===void 0?void 0:w.error);if(P){W(vt,`RPC '${e}' stream ${s} received error:`,P);const V=P.status;let M=function(N){const k=He[N];if(k!==void 0)return NE(k)}(V),T=P.message;M===void 0&&(M=U.INTERNAL,T="Unknown error status: "+V+" with message "+P.message),E=!0,S.So(new q(M,T)),p.close()}else W(vt,`RPC '${e}' stream ${s} received:`,x),S.bo(x)}}),I(l,Xw.STAT_EVENT,R=>{R.stat===pf.PROXY?W(vt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===pf.NOPROXY&&W(vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function Zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){return new zA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new VE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DC extends ME{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=WA(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?On(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Tf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=vf(c)?{documents:QA(i,c)}:{query:XA(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=bE(i,o.resumeToken);const d=xf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=ec(i,o.snapshotVersion.toTimestamp());const d=xf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=JA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Tf(this.serializer),n.removeTarget=e,this.a_(n)}}class OC extends ME{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=GA(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Tf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,wf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,wf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class VC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(lr(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Us(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=te(c);d.L_.add(4),await Ya(d),d.q_.set("Unknown"),d.L_.delete(4),await Fc(d)}(this))})}),this.q_=new VC(r,s)}}async function Fc(t){if(Us(t))for(const e of t.B_)await e(!0)}async function Ya(t){for(const e of t.B_)await e(!1)}function UE(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),am(n)?om(n):Yi(n).r_()&&im(n,e))}function sm(t,e){const n=te(t),r=Yi(n);n.N_.delete(e),r.r_()&&FE(n,e),n.N_.size===0&&(r.r_()?r.o_():Us(n)&&n.q_.set("Unknown"))}function im(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yi(t).A_(e)}function FE(t,e){t.Q_.xe(e),Yi(t).R_(e)}function om(t){t.Q_=new UA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Yi(t).start(),t.q_.v_()}function am(t){return Us(t)&&!Yi(t).n_()&&t.N_.size>0}function Us(t){return te(t).L_.size===0}function BE(t){t.Q_=void 0}async function UC(t){t.q_.set("Online")}async function FC(t){t.N_.forEach((e,n)=>{im(t,e)})}async function BC(t,e){BE(t),am(t)?(t.q_.M_(e),om(t)):t.q_.set("Unknown")}async function $C(t,e,n){if(t.q_.set("Online"),e instanceof SE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tc(t,r)}else if(e instanceof vu?t.Q_.Ke(e):e instanceof kE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await LE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=i.N_.get(c);if(!f)return;i.N_.set(c,f.withResumeToken(st.EMPTY_BYTE_STRING,f.snapshotVersion)),FE(i,c);const p=new br(f.target,c,d,f.sequenceNumber);im(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await tc(t,r)}}async function tc(t,e,n){if(!Ga(e))throw e;t.L_.add(1),await Ya(t),t.q_.set("Offline"),n||(n=()=>LE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Fc(t)})}function $E(t,e){return e().catch(n=>tc(t,n,e))}async function Bc(t){const e=te(t),n=Hr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zC(e);)try{const s=await kC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,qC(e,s)}catch(s){await tc(e,s)}zE(e)&&qE(e)}function zC(t){return Us(t)&&t.O_.length<10}function qC(t,e){t.O_.push(e);const n=Hr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function zE(t){return Us(t)&&!Hr(t).n_()&&t.O_.length>0}function qE(t){Hr(t).start()}async function HC(t){Hr(t).p_()}async function WC(t){const e=Hr(t);for(const n of t.O_)e.m_(n.mutations)}async function KC(t,e,n){const r=t.O_.shift(),s=Jp.from(r,e,n);await $E(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bc(t)}async function GC(t,e){e&&Hr(t).V_&&await async function(r,s){if(function(o){return LA(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Hr(r).s_(),await $E(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bc(r)}}(t,e),zE(t)&&qE(t)}async function qv(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Us(n);n.L_.add(3),await Ya(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Fc(n)}async function QC(t,e){const n=te(t);e?(n.L_.delete(2),await Fc(n)):e||(n.L_.add(2),await Ya(n),n.q_.set("Unknown"))}function Yi(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new DC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:UC.bind(null,t),Ro:FC.bind(null,t),mo:BC.bind(null,t),d_:$C.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),am(t)?om(t):t.q_.set("Unknown")):(await t.K_.stop(),BE(t))})),t.K_}function Hr(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new OC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HC.bind(null,t),mo:GC.bind(null,t),f_:WC.bind(null,t),g_:KC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Bc(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new lm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function um(t,e){if(lr("AsyncQueue",`${e}: ${t}`),Ga(t))return new q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Mo(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new Ni(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ni)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ni;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.W_=new De(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mi{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Mi(e,n,Ni.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class YC{constructor(){this.queries=Wv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=Wv(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new q(U.ABORTED,"Firestore shutting down"))}}function Wv(){return new Xi(t=>dE(t),Dc)}async function cm(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new XC,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=um(o,`Initialization of query '${Zs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&hm(n)}async function dm(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JC(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&hm(n)}function ZC(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function hm(t){t.Y_.forEach(e=>{e.next()})}var Nf,Kv;(Kv=Nf||(Nf={})).ea="default",Kv.Cache="cache";class fm{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.key=e}}class WE{constructor(e){this.key=e}}class eP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=hE(e),this.Ra=new Ni(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Hv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),E=Oc(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),I=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;g&&E?g.data.isEqual(E.data)?S!==I&&(r.track({type:3,doc:E}),R=!0):this.ga(g,E)||(r.track({type:2,doc:E}),R=!0,(c&&this.Aa(E,c)>0||d&&this.Aa(E,d)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),R=!0):g&&!E&&(r.track({type:1,doc:g}),R=!0,(c||d)&&(l=!0)),R&&(E?(o=o.add(E),i=I?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(E,S){const I=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return I(E)-I(S)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new Mi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new WE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new HE(r))}),n}ba(e){this.Ta=e.Ts,this.da=oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Mi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nP{constructor(e){this.key=e,this.va=!1}}class rP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xi(l=>dE(l),Dc),this.Ma=new Map,this.xa=new Set,this.Oa=new De(G.comparator),this.Na=new Map,this.La=new tm,this.Ba={},this.ka=new Map,this.qa=Vi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sP(t,e,n=!0){const r=JE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await KE(r,e,n,!0),s}async function iP(t,e){const n=JE(t);await KE(n,e,!0,!1)}async function KE(t,e,n,r){const s=await SC(t.localStore,Dn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await oP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&UE(t.remoteStore,s),l}async function oP(t,e,n,r,s){t.Ka=(p,g,E)=>async function(I,R,w,x){let v=R.view.ma(w);v.ns&&(v=await Bv(I.localStore,R.query,!1).then(({documents:T})=>R.view.ma(T,v)));const P=x&&x.targetChanges.get(R.targetId),V=x&&x.targetMismatches.get(R.targetId)!=null,M=R.view.applyChanges(v,I.isPrimaryClient,P,V);return Qv(I,R.targetId,M.wa),M.snapshot}(t,p,g,E);const i=await Bv(t.localStore,e,!0),o=new eP(e,i.Ts),l=o.ma(i.documents),c=Xa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);Qv(t,n,d.wa);const f=new tP(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function aP(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Dc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await If(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sm(r.remoteStore,s.targetId),kf(r,s.targetId)}).catch(Ka)):(kf(r,s.targetId),await If(r.localStore,s.targetId,!0))}async function lP(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sm(n.remoteStore,r.targetId))}async function uP(t,e,n){const r=gP(t);try{const s=await function(o,l){const c=te(o),d=Qe.now(),f=l.reduce((E,S)=>E.add(S.key),oe());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=ur(),I=oe();return c.cs.getEntries(E,f).next(R=>{S=R,S.forEach((w,x)=>{x.isValidDocument()||(I=I.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,S)).next(R=>{p=R;const w=[];for(const x of l){const v=CA(x,p.get(x.key).overlayedDocument);v!=null&&w.push(new ns(x.key,v,rE(v.value.mapValue),on.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,w,l)}).next(R=>{g=R;const w=R.applyToLocalDocumentSet(p,I);return c.documentOverlayCache.saveOverlays(E,R.batchId,w)})}).then(()=>({batchId:g.batchId,changes:pE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new De(he)),d=d.insert(l,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Ja(r,s.changes),await Bc(r.remoteStore)}catch(s){const i=um(s,"Failed to persist write");n.reject(i)}}async function GE(t,e){const n=te(t);try{const r=await IC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ye(o.va):s.removedDocuments.size>0&&(ye(o.va),o.va=!1))}),await Ja(n,r,e)}catch(r){await Ka(r)}}function Gv(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=te(o);c.onlineState=l;let d=!1;c.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(d=!0)}),d&&hm(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cP(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new De(G.comparator);o=o.insert(i,wt.newNoDocument(i,ee.min()));const l=oe().add(i),c=new Mc(ee.min(),new Map,new De(he),o,l);await GE(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),pm(r)}else await If(r.localStore,e,!1).then(()=>kf(r,e,n)).catch(Ka)}async function dP(t,e){const n=te(t),r=e.batch.batchId;try{const s=await TC(n.localStore,e);XE(n,r,null),QE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ja(n,s)}catch(s){await Ka(s)}}async function hP(t,e,n){const r=te(t);try{const s=await function(o,l){const c=te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(ye(p!==null),f=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);XE(r,e,n),QE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ja(r,s)}catch(s){await Ka(s)}}function QE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function XE(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function kf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||YE(t,r)})}function YE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(sm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),pm(t))}function Qv(t,e,n){for(const r of n)r instanceof HE?(t.La.addReference(r.key,e),fP(t,r)):r instanceof WE?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||YE(t,r.key)):Y()}function fP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),pm(t))}function pm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Te.fromString(e)),r=t.qa.next();t.Na.set(r,new nP(n)),t.Oa=t.Oa.insert(n,r),UE(t.remoteStore,new br(Dn(jc(n.path)),r,"TargetPurposeLimboResolution",qp.oe))}}async function Ja(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=rm.Wi(c.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const f=te(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,g=>F.forEach(g.$i,E=>f.persistence.referenceDelegate.addReference(p,g.targetId,E)).next(()=>F.forEach(g.Ui,E=>f.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))}catch(p){if(!Ga(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const E=f.os.get(g),S=E.snapshotVersion,I=E.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(g,I)}}}(r.localStore,i))}async function pP(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await OE(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new q(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ja(n,r.hs)}}function mP(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return oe().add(r.key);{let s=oe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function JE(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cP.bind(null,e),e.Ca.d_=JC.bind(null,e.eventManager),e.Ca.$a=ZC.bind(null,e.eventManager),e}function gP(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hP.bind(null,e),e}class nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return EC(this.persistence,new xC,e.initialUser,this.serializer)}Ga(e){return new yC(nm.Zr,this.serializer)}Wa(e){return new RC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nc.provider={build:()=>new nc};class Sf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pP.bind(null,this.syncEngine),await QC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new YC}()}createDatastore(e){const n=Uc(e.databaseInfo.databaseId),r=function(i){return new jC(i)}(e.databaseInfo);return function(i,o,l,c){return new LC(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new MC(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Gv(this.syncEngine,n,0),function(){return zv.D()?new zv:new AC}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,f){const p=new rP(s,i,o,l,c,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ya(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Sf.provider={build:()=>new Sf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=zp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=um(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function eh(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await OE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vP(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>qv(e.remoteStore,s)),t._onlineComponents=e}async function vP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await eh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Rs("Error using user provided cache. Falling back to memory cache: "+n),await eh(t,new nc)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await eh(t,new nc);return t._offlineComponents}async function ZE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Xv(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Xv(t,new Sf))),t._onlineComponents}function _P(t){return ZE(t).then(e=>e.syncEngine)}async function rc(t){const e=await ZE(t),n=e.eventManager;return n.onListen=sP.bind(null,e.syncEngine),n.onUnlisten=aP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lP.bind(null,e.syncEngine),n}function xP(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new mm({next:g=>{f.Za(),o.enqueueAndForget(()=>dm(i,p));const E=g.docs.has(l);!E&&g.fromCache?d.reject(new q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&c&&c.source==="server"?d.reject(new q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new fm(jc(l.path),f,{includeMetadataChanges:!0,_a:!0});return cm(i,p)}(await rc(t),t.asyncQueue,e,n,r)),r.promise}function wP(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new mm({next:g=>{f.Za(),o.enqueueAndForget(()=>dm(i,p)),g.fromCache&&c.source==="server"?d.reject(new q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new fm(l,f,{includeMetadataChanges:!0,_a:!0});return cm(i,p)}(await rc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t,e,n){if(!n)throw new q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function n1(t,e,n,r){if(e===!0&&r===!0)throw new q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jv(t){if(!G.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zv(t){if(G.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $c(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Rt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$c(t);throw new q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function EP(t,e){if(e<=0)throw new q(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eE;switch(r.type){case"firstParty":return new HR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Yv.get(n);r&&(W("ComponentProvider","Removing Datastore"),Yv.delete(n),r.terminate())}(this),Promise.resolve()}}function r1(t,e,n,r={}){var s;const i=(t=Rt(t,zc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=_t.MOCK_USER;else{l=rw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new _t(d)}t._authCredentials=new $R(new Zw(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Un(this.firestore,e,this._query)}}class dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}}class er extends Un{constructor(e,n,r){super(e,n,jc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new G(e))}withConverter(e){return new er(this.firestore,e,this._path)}}function pe(t,e,...n){if(t=Ne(t),t1("collection","path",e),t instanceof zc){const r=Te.fromString(e,...n);return Zv(r),new er(t,null,r)}{if(!(t instanceof dt||t instanceof er))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Zv(r),new er(t.firestore,null,r)}}function ue(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=zp.newId()),t1("doc","path",e),t instanceof zc){const r=Te.fromString(e,...n);return Jv(r),new dt(t,null,new G(r))}{if(!(t instanceof dt||t instanceof er))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Jv(r),new dt(t.firestore,t instanceof er?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new VE(this,"async_queue_retry"),this.Vu=()=>{const r=Zd();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Zd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Zd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Zn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ga(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw lr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=lm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function n0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Vn extends zc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new t0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new t0(e),this._firestoreClient=void 0,await e}}}function s1(t,e){const n=typeof t=="object"?t:bc(),r=typeof t=="string"?t:"(default)",s=Sc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ew("firestore");i&&r1(s,...i)}return s}function Za(t){if(t._terminated)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TP(t),t._firestoreClient}function TP(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,f){return new sA(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,e1(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new yP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ps(st.fromBase64String(e))}catch(n){throw new q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ps(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=/^__.*__$/;class NP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qa(e,this.data,n,this.fieldTransforms)}}class i1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function o1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class gm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new gm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(o1(this.Cu)&&IP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class kP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uc(e)}Qu(e,n,r,s=!1){return new gm({Cu:e,methodName:n,qu:r,path:nt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wc(t){const e=t._freezeSettings(),n=Uc(t._databaseId);return new kP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function a1(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);_m("Data must be an object, but it was:",o,r);const l=l1(r,o);let c,d;if(i.merge)c=new Ht(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=bf(e,p,n);if(!o.contains(g))throw new q(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);c1(f,g)||f.push(g)}c=new Ht(f),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new NP(new Dt(l),c,d)}class Kc extends Ji{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}class ym extends Ji{_toFieldTransform(e){return new EE(e.path,new Aa)}isEqual(e){return e instanceof ym}}class vm extends Ji{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new ja(e.serializer,yE(e.serializer,this.$u));return new EE(e.path,n)}isEqual(e){return e instanceof vm&&this.$u===e.$u}}function SP(t,e,n,r){const s=t.Qu(1,e,n);_m("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();Ms(r,(c,d)=>{const f=xm(e,c,n);d=Ne(d);const p=s.Nu(f);if(d instanceof Kc)i.push(f);else{const g=tl(d,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new Ht(i);return new i1(o,l,s.fieldTransforms)}function bP(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[bf(e,r,n)],c=[s];if(i.length%2!=0)throw new q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(bf(e,i[g])),c.push(i[g+1]);const d=[],f=Dt.empty();for(let g=l.length-1;g>=0;--g)if(!c1(d,l[g])){const E=l[g];let S=c[g];S=Ne(S);const I=o.Nu(E);if(S instanceof Kc)d.push(E);else{const R=tl(S,I);R!=null&&(d.push(E),f.set(E,R))}}const p=new Ht(d);return new i1(f,p,o.fieldTransforms)}function RP(t,e,n,r=!1){return tl(n,t.Qu(r?4:3,e))}function tl(t,e){if(u1(t=Ne(t)))return _m("Unsupported field value:",e,t),l1(t,e);if(t instanceof Ji)return function(r,s){if(!o1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=tl(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Qe.fromDate(r);return{timestampValue:ec(s.serializer,i)}}if(r instanceof Qe){const i=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ec(s.serializer,i)}}if(r instanceof qc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ps)return{bytesValue:bE(s.serializer,r._byteString)};if(r instanceof dt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:em(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Hc)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Xp(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${$c(r)}`)}(t,e)}function l1(t,e){const n={};return tE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(t,(r,s)=>{const i=tl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function u1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof qc||t instanceof Ps||t instanceof dt||t instanceof Ji||t instanceof Hc)}function _m(t,e,n){if(!u1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=$c(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function bf(t,e,n){if((e=Ne(e))instanceof el)return e._internalPath;if(typeof e=="string")return xm(t,e);throw sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const AP=new RegExp("[~\\*/\\[\\]]");function xm(t,e,n){if(e.search(AP)>=0)throw sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new el(...e.split("."))._internalPath}catch{throw sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(U.INVALID_ARGUMENT,l+t+c)}function c1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CP extends d1{data(){return super.data()}}function Gc(t,e){return typeof e=="string"?xm(t,e):e instanceof el?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wm{}class Qc extends wm{}function Ft(t,e,...n){let r=[];e instanceof wm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Xc).length,l=i.filter(c=>c instanceof nl).length;if(o>1||o>0&&l>0)throw new q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class nl extends Qc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new nl(e,n,r)}_apply(e){const n=this._parse(e);return f1(e._query,n),new Un(e.firestore,e.converter,_f(e._query,n))}_parse(e){const n=Wc(e.firestore);return function(i,o,l,c,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){s0(p,f);const E=[];for(const S of p)E.push(r0(c,i,S));g={arrayValue:{values:E}}}else g=r0(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||s0(p,f),g=RP(l,o,p,f==="in"||f==="not-in");return Ke.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function an(t,e,n){const r=e,s=Gc("where",t);return nl._create(s,r,n)}class Xc extends wm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xc(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)f1(o,c),o=_f(o,c)}(e._query,n),new Un(e.firestore,e.converter,_f(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yc extends Qc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yc(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ra(i,o)}(e._query,this._field,this._direction);return new Un(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Qi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Wr(t,e="asc"){const n=e,r=Gc("orderBy",t);return Yc._create(r,n)}class Jc extends Qc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jc(e,n,r)}_apply(e){return new Un(e.firestore,e.converter,Zu(e._query,this._limit,this._limitType))}}function Em(t){return EP("limit",t),Jc._create("limit",t,"F")}function r0(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cE(e)&&n.indexOf("/")!==-1)throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!G.isDocumentKey(r))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iv(t,new G(r))}if(n instanceof dt)return Iv(t,n._key);throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$c(n)}.`)}function s0(t,e){if(!Array.isArray(t)||t.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function f1(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class p1{convertValue(e,n="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ms(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new Hc(i)}convertGeoPoint(e){return new qc(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Sa(e));default:return null}}convertTimestamp(e){const n=qr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);ye(DE(r));const s=new Di(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tm extends d1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ta(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ta extends Tm{data(e={}){return super.data(e)}}class Im{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new mi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ta(this._firestore,this._userDataWriter,r.key,r,new mi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new ta(s._firestore,s._userDataWriter,l.doc.key,l.doc,new mi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new ta(s._firestore,s._userDataWriter,l.doc.key,l.doc,new mi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:PP(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){t=Rt(t,dt);const e=Rt(t.firestore,Vn);return xP(Za(e),t._key).then(n=>g1(e,t,n))}class Nm extends p1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function Ge(t){t=Rt(t,Un);const e=Rt(t.firestore,Vn),n=Za(e),r=new Nm(e);return h1(t._query),wP(n,t._query).then(s=>new Im(e,r,t,s))}function Ui(t,e,n){t=Rt(t,dt);const r=Rt(t.firestore,Vn),s=m1(t.converter,e,n);return sl(r,[a1(Wc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,on.none())])}function rn(t,e,n,...r){t=Rt(t,dt);const s=Rt(t.firestore,Vn),i=Wc(s);let o;return o=typeof(e=Ne(e))=="string"||e instanceof el?bP(i,"updateDoc",t._key,e,n,r):SP(i,"updateDoc",t._key,e),sl(s,[o.toMutation(t._key,on.exists(!0))])}function Fi(t){return sl(Rt(t.firestore,Vn),[new Yp(t._key,on.none())])}function rl(t,e){const n=Rt(t.firestore,Vn),r=ue(t),s=m1(t.converter,e);return sl(n,[a1(Wc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function Da(t,...e){var n,r,s;t=Ne(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||n0(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(n0(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let c,d,f;if(t instanceof dt)d=Rt(t.firestore,Vn),f=jc(t._key.path),c={next:p=>{e[o]&&e[o](g1(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Rt(t,Un);d=Rt(p.firestore,Vn),f=p._query;const g=new Nm(d);c={next:E=>{e[o]&&e[o](new Im(d,g,p,E))},error:e[o+1],complete:e[o+2]},h1(t._query)}return function(g,E,S,I){const R=new mm(I),w=new fm(E,R,S);return g.asyncQueue.enqueueAndForget(async()=>cm(await rc(g),w)),()=>{R.Za(),g.asyncQueue.enqueueAndForget(async()=>dm(await rc(g),w))}}(Za(d),f,l,c)}function sl(t,e){return function(r,s){const i=new Zn;return r.asyncQueue.enqueueAndForget(async()=>uP(await _P(r),s,i)),i.promise}(Za(t),e)}function g1(t,e,n){const r=n.docs.get(e._key),s=new Nm(t);return new Tm(t,s,e._key,r,new mi(n.hasPendingWrites,n.fromCache),e.converter)}function St(){return new ym("serverTimestamp")}function Fo(t){return new vm("increment",t)}(function(e,n=!0){(function(s){Gi=s})(Ls),Ns(new $r("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Vn(new zR(r.getProvider("auth-internal")),new KR(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Di(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Cn(_v,"4.7.3",e),Cn(_v,"4.7.3","esm2017")})();const i0=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:p1,Bytes:Ps,CollectionReference:er,DocumentReference:dt,DocumentSnapshot:Tm,FieldPath:el,FieldValue:Ji,Firestore:Vn,FirestoreError:q,GeoPoint:qc,Query:Un,QueryCompositeFilterConstraint:Xc,QueryConstraint:Qc,QueryDocumentSnapshot:ta,QueryFieldFilterConstraint:nl,QueryLimitConstraint:Jc,QueryOrderByConstraint:Yc,QuerySnapshot:Im,SnapshotMetadata:mi,Timestamp:Qe,VectorValue:Hc,_AutoId:zp,_ByteString:st,_DatabaseId:Di,_DocumentKey:G,_EmptyAuthCredentialsProvider:eE,_FieldPath:nt,_cast:Rt,_logWarn:Rs,_validateIsNotUsedTogether:n1,addDoc:rl,collection:pe,connectFirestoreEmulator:r1,deleteDoc:Fi,doc:ue,ensureFirestoreConfigured:Za,executeWrite:sl,getDoc:Ot,getDocs:Ge,getFirestore:s1,increment:Fo,limit:Em,onSnapshot:Da,orderBy:Wr,query:Ft,serverTimestamp:St,setDoc:Ui,updateDoc:rn,where:an},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="firebasestorage.googleapis.com",v1="storageBucket",jP=2*60*1e3,DP=10*60*1e3,OP=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe extends Mn{constructor(e,n,r=0){super(th(e),`Firebase Storage: ${n} (${th(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Oe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return th(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ke;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ke||(ke={}));function th(t){return"storage/"+t}function km(){const t="An unknown error occurred, please check the error payload for server response.";return new Oe(ke.UNKNOWN,t)}function LP(t){return new Oe(ke.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function VP(t){return new Oe(ke.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function MP(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Oe(ke.UNAUTHENTICATED,t)}function UP(){return new Oe(ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function FP(t){return new Oe(ke.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function _1(){return new Oe(ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function x1(){return new Oe(ke.CANCELED,"User canceled the upload/download.")}function BP(t){return new Oe(ke.INVALID_URL,"Invalid URL '"+t+"'.")}function $P(t){return new Oe(ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function zP(){return new Oe(ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+v1+"' property when initializing the app?")}function w1(){return new Oe(ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qP(){return new Oe(ke.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function HP(){return new Oe(ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function WP(t){return new Oe(ke.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rf(t){return new Oe(ke.INVALID_ARGUMENT,t)}function E1(){return new Oe(ke.APP_DELETED,"The Firebase app was deleted.")}function KP(t){return new Oe(ke.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function na(t,e){return new Oe(ke.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ao(t){throw new Oe(ke.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Wt.makeFromUrl(e,n)}catch{return new Wt(e,"")}if(r.path==="")return r;throw $P(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(P){P.path_=decodeURIComponent(P.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",E=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),S={bucket:1,path:3},I=n===y1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",w=new RegExp(`^https?://${I}/${s}/${R}`,"i"),v=[{regex:l,indices:c,postModify:i},{regex:E,indices:S,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let P=0;P<v.length;P++){const V=v[P],M=V.regex.exec(e);if(M){const T=M[V.indices.bucket];let y=M[V.indices.path];y||(y=""),r=new Wt(T,y),V.postModify(r);break}}if(r==null)throw BP(e);return r}}class GP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let d=!1;function f(...R){d||(d=!0,e.apply(null,R))}function p(R){s=setTimeout(()=>{s=null,t(E,c())},R)}function g(){i&&clearTimeout(i)}function E(R,...w){if(d){g();return}if(R){g(),f.call(null,R,...w);return}if(c()||o){g(),f.call(null,R,...w);return}r<64&&(r*=2);let v;l===1?(l=2,v=0):v=(r+Math.random())*1e3,p(v)}let S=!1;function I(R){S||(S=!0,g(),!d&&(s!==null?(R||(l=2),clearTimeout(s),p(0)):R||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,I(!0)},n),I}function XP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){return t!==void 0}function JP(t){return typeof t=="function"}function ZP(t){return typeof t=="object"&&!Array.isArray(t)}function Zc(t){return typeof t=="string"||t instanceof String}function o0(t){return Sm()&&t instanceof Blob}function Sm(){return typeof Blob<"u"}function a0(t,e,n,r){if(r<e)throw Rf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Rf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function T1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var _s;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(_s||(_s={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n,r,s,i,o,l,c,d,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Yl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===_s.NO_ERROR,c=i.getStatus();if(!l||I1(c,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===_s.ABORT;r(!1,new Yl(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new Yl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());YP(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=km();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?E1():x1();o(c)}else{const c=_1();o(c)}};this.canceled_?n(!1,new Yl(!1,null,!0)):this.backoffId_=QP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ij(t,e,n,r,s,i,o=!0){const l=T1(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return rj(d,e),tj(d,n),nj(d,i),sj(d,r),new ej(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aj(...t){const e=oj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Sm())return new Blob(t);throw new Oe(ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){if(typeof atob>"u")throw WP("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nh{constructor(e,n){this.data=e,this.contentType=n||null}}function cj(t,e){switch(t){case bn.RAW:return new nh(N1(e));case bn.BASE64:case bn.BASE64URL:return new nh(k1(t,e));case bn.DATA_URL:return new nh(hj(e),fj(e))}throw km()}function N1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function dj(t){let e;try{e=decodeURIComponent(t)}catch{throw na(bn.DATA_URL,"Malformed data URL.")}return N1(e)}function k1(t,e){switch(t){case bn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw na(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case bn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw na(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=uj(e)}catch(s){throw s.message.includes("polyfill")?s:na(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class S1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw na(bn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=pj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function hj(t){const e=new S1(t);return e.base64?k1(bn.BASE64,e.rest):dj(e.rest)}function fj(t){return new S1(t).contentType}function pj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){let r=0,s="";o0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(o0(this.data_)){const r=this.data_,s=lj(r,e,n);return s===null?null:new Hn(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Hn(r,!0)}}static getBlob(...e){if(Sm()){const n=e.map(r=>r instanceof Hn?r.data_:r);return new Hn(aj.apply(null,n))}else{const n=e.map(o=>Zc(o)?cj(bn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new Hn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t){let e;try{e=JSON.parse(t)}catch{return null}return ZP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function gj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function R1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t,e){return e}class Nt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||yj}}let Jl=null;function vj(t){return!Zc(t)||t.length<2?t:R1(t)}function bm(){if(Jl)return Jl;const t=[];t.push(new Nt("bucket")),t.push(new Nt("generation")),t.push(new Nt("metageneration")),t.push(new Nt("name","fullPath",!0));function e(i,o){return vj(o)}const n=new Nt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Nt("size");return s.xform=r,t.push(s),t.push(new Nt("timeCreated")),t.push(new Nt("updated")),t.push(new Nt("md5Hash",null,!0)),t.push(new Nt("cacheControl",null,!0)),t.push(new Nt("contentDisposition",null,!0)),t.push(new Nt("contentEncoding",null,!0)),t.push(new Nt("contentLanguage",null,!0)),t.push(new Nt("contentType",null,!0)),t.push(new Nt("metadata","customMetadata",!0)),Jl=t,Jl}function _j(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Wt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function xj(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return _j(r,t),r}function A1(t,e,n){const r=b1(e);return r===null?null:xj(t,r,n)}function wj(t,e,n,r){const s=b1(e);if(s===null||!Zc(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,p=t.fullPath,g="/b/"+o(f)+"/o/"+o(p),E=il(g,n,r),S=T1({alt:"media",token:d});return E+S})[0]}function C1(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Zi{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t){if(!t)throw km()}function Rm(t,e){function n(r,s){const i=A1(t,s,e);return tr(i!==null),i}return n}function Ej(t,e){function n(r,s){const i=A1(t,s,e);return tr(i!==null),wj(i,s,t.host,t._protocol)}return n}function ol(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=UP():s=MP():n.getStatus()===402?s=VP(t.bucket):n.getStatus()===403?s=FP(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function P1(t){const e=ol(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=LP(t.path)),i.serverResponse=s.serverResponse,i}return n}function Tj(t,e,n){const r=e.fullServerUrl(),s=il(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new Zi(s,i,Rm(t,n),o);return l.errorHandler=P1(e),l}function Ij(t,e,n){const r=e.fullServerUrl(),s=il(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new Zi(s,i,Ej(t,n),o);return l.errorHandler=P1(e),l}function Nj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function j1(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Nj(null,e)),r}function D1(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let v="";for(let P=0;P<2;P++)v=v+Math.random().toString().slice(2);return v}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const d=j1(e,r,s),f=C1(d,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+c+"--",E=Hn.getBlob(p,r,g);if(E===null)throw w1();const S={name:d.fullPath},I=il(i,t.host,t._protocol),R="POST",w=t.maxUploadRetryTime,x=new Zi(I,R,Rm(t,n),w);return x.urlParams=S,x.headers=o,x.body=E.uploadData(),x.errorHandler=ol(e),x}class ic{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Am(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{tr(!1)}return tr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function kj(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=j1(e,r,s),l={name:o.fullPath},c=il(i,t.host,t._protocol),d="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=C1(o,n),g=t.maxUploadRetryTime;function E(I){Am(I);let R;try{R=I.getResponseHeader("X-Goog-Upload-URL")}catch{tr(!1)}return tr(Zc(R)),R}const S=new Zi(c,d,E,g);return S.urlParams=l,S.headers=f,S.body=p,S.errorHandler=ol(e),S}function Sj(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(d){const f=Am(d,["active","final"]);let p=null;try{p=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{tr(!1)}p||tr(!1);const g=Number(p);return tr(!isNaN(g)),new ic(g,r.size(),f==="final")}const o="POST",l=t.maxUploadRetryTime,c=new Zi(n,o,i,l);return c.headers=s,c.errorHandler=ol(e),c}const l0=256*1024;function bj(t,e,n,r,s,i,o,l){const c=new ic(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw qP();const d=c.total-c.current;let f=d;s>0&&(f=Math.min(f,s));const p=c.current,g=p+f;let E="";f===0?E="finalize":d===f?E="upload, finalize":E="upload";const S={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${c.current}`},I=r.slice(p,g);if(I===null)throw w1();function R(P,V){const M=Am(P,["active","final"]),T=c.current+f,y=r.size();let N;return M==="final"?N=Rm(e,i)(P,V):N=null,new ic(T,y,M==="final",N)}const w="POST",x=e.maxUploadRetryTime,v=new Zi(n,w,R,x);return v.headers=S,v.body=I.uploadData(),v.progressCallback=l||null,v.errorHandler=ol(t),v}const Pt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function rh(t){switch(t){case"running":case"pausing":case"canceling":return Pt.RUNNING;case"paused":return Pt.PAUSED;case"success":return Pt.SUCCESS;case"canceled":return Pt.CANCELED;case"error":return Pt.ERROR;default:return Pt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n,r){if(JP(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Aj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_s.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_s.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_s.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ao("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ao("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ao("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ao("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ao("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Cj extends Aj{initXhr(){this.xhr_.responseType="text"}}function ds(){return new Cj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=bm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(ke.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(I1(s.status,[]))if(i)s=_1();else{this.sleepTime=Math.max(this.sleepTime*2,OP),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(ke.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=kj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ds,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=Sj(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,ds,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=l0*this._chunkMultiplier,n=new ic(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=bj(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,ds,s,i,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){l0*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Tj(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,ds,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=D1(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ds,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=x1(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=rh(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new Rj(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(rh(this._state)){case Pt.SUCCESS:Xs(this._resolve.bind(null,this.snapshot))();break;case Pt.CANCELED:case Pt.ERROR:const n=this._reject;Xs(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(rh(this._state)){case Pt.RUNNING:case Pt.PAUSED:e.next&&Xs(e.next.bind(e,this.snapshot))();break;case Pt.SUCCESS:e.complete&&Xs(e.complete.bind(e))();break;case Pt.CANCELED:case Pt.ERROR:e.error&&Xs(e.error.bind(e,this._error))();break;default:e.error&&Xs(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this._service=e,n instanceof Wt?this._location=n:this._location=Wt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new js(e,n)}get root(){const e=new Wt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R1(this._location.path)}get storage(){return this._service}get parent(){const e=mj(this._location.path);if(e===null)return null;const n=new Wt(this._location.bucket,e);return new js(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw KP(e)}}function jj(t,e,n){t._throwIfRoot("uploadBytes");const r=D1(t.storage,t._location,bm(),new Hn(e,!0),n);return t.storage.makeRequestWithTokens(r,ds).then(s=>({metadata:s,ref:t}))}function Dj(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Pj(t,new Hn(e),n)}function Oj(t){t._throwIfRoot("getDownloadURL");const e=Ij(t.storage,t._location,bm());return t.storage.makeRequestWithTokens(e,ds).then(n=>{if(n===null)throw HP();return n})}function Lj(t,e){const n=gj(t._location.path,e),r=new Wt(t._location.bucket,n);return new js(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){return/^[A-Za-z]+:\/\//.test(t)}function Mj(t,e){return new js(t,e)}function O1(t,e){if(t instanceof Cm){const n=t;if(n._bucket==null)throw zP();const r=new js(n,n._bucket);return e!=null?O1(r,e):r}else return e!==void 0?Lj(t,e):t}function Uj(t,e){if(e&&Vj(e)){if(t instanceof Cm)return Mj(t,e);throw Rf("To use ref(service, url), the first argument must be a Storage instance.")}else return O1(t,e)}function u0(t,e){const n=e==null?void 0:e[v1];return n==null?null:Wt.makeFromBucketSpec(n,t)}function Fj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:rw(s,t.app.options.projectId))}class Cm{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=y1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jP,this._maxUploadRetryTime=DP,this._requests=new Set,s!=null?this._bucket=Wt.makeFromBucketSpec(s,this._host):this._bucket=u0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wt.makeFromBucketSpec(this._url,e):this._bucket=u0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){a0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){a0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new js(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new GP(E1());{const o=ij(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const c0="@firebase/storage",d0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="storage";function V1(t,e,n){return t=Ne(t),jj(t,e,n)}function Bj(t,e,n){return t=Ne(t),Dj(t,e,n)}function Pm(t){return t=Ne(t),Oj(t)}function jm(t,e){return t=Ne(t),Uj(t,e)}function Dm(t=bc(),e){t=Ne(t);const r=Sc(t,L1).getImmediate({identifier:e}),s=ew("storage");return s&&$j(r,...s),r}function $j(t,e,n,r={}){Fj(t,e,n,r)}function zj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Cm(n,r,s,e,Ls)}function qj(){Ns(new $r(L1,zj,"PUBLIC").setMultipleInstances(!0)),Cn(c0,d0,""),Cn(c0,d0,"esm2017")}qj();const Hj={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},tn=aw().length?bc():ow(Hj),Oa=aw().length>0?MR(tn):Rw(tn,{persistence:[qw,Vw]}),K=s1(tn),Wj=Dm(tn),M1=C.createContext({user:null,role:null,loading:!0,logout:async()=>{}}),Kj=({children:t})=>{const[e,n]=C.useState(null),[r,s]=C.useState(null),[i,o]=C.useState(!0);C.useEffect(()=>{const c=Sb(Oa,async d=>{if(n(d),d){const f=await Ot(ue(K,"users",d.uid)),p=f.data(),g=f.exists()?p==null?void 0:p.role:null;if(s(g),g==="owner")try{const E=ue(K,"restaurants",d.uid);(await Ot(E)).exists()||await Ui(E,{name:(p==null?void 0:p.restaurantName)||(p==null?void 0:p.name)||" ",ownerId:d.uid,email:(p==null?void 0:p.email)||d.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(E){console.warn("    ",E)}}else s(null);o(!1)});return()=>c()},[]);const l=async()=>{await bb(Oa)};return u.jsx(M1.Provider,{value:{user:e,role:r,loading:i,logout:l},children:t})},ft=()=>C.useContext(M1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),h0=t=>{const e=Qj(t);return e.charAt(0).toUpperCase()+e.slice(1)},U1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Xj=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>C.createElement("svg",{ref:c,...Yj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:U1("lucide",s),...!i&&!Xj(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,f])=>C.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(t,e)=>{const n=C.forwardRef(({className:r,...s},i)=>C.createElement(Jj,{ref:i,iconNode:e,className:U1(`lucide-${Gj(h0(t))}`,`lucide-${t}`,r),...s}));return n.displayName=h0(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Af=ne("arrow-left",Zj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],t4=ne("arrow-right",e4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],r4=ne("briefcase",n4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],i4=ne("building-2",s4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],f0=ne("chart-column",o4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],F1=ne("chef-hat",a4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],u4=ne("chevron-down",l4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],d4=ne("chevron-up",c4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],f4=ne("circle-check-big",h4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],m4=ne("circle-check",p4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],B1=ne("circle-x",g4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],v4=ne("clipboard-list",y4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],x4=ne("clock",_4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],$1=ne("code-xml",w4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],T4=ne("heart",E4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],p0=ne("house",I4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],m0=ne("info",N4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],z1=ne("lock",k4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],b4=ne("log-in",S4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],q1=ne("mail",R4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],C4=ne("menu",A4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M5 12h14",key:"1ays0h"}]],j4=ne("minus",P4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],sh=ne("package",D4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],g0=ne("pen-line",O4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],H1=ne("plus",L4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],y0=ne("refresh-cw",V4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],U4=ne("save",M4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],B4=ne("server",F4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],z4=ne("settings",$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],W1=ne("shield",q4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],v0=ne("shopping-bag",H4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],K1=ne("shopping-cart",W4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],oc=ne("sparkles",K4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ih=ne("star",G4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Cf=ne("store",Q4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Bi=ne("trash-2",X4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_0=ne("triangle-alert",Y4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ac=ne("truck",J4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],x0=ne("user-plus",Z4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],tD=ne("user",eD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],rD=ne("users",nD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],iD=ne("utensils",sD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],G1=ne("wallet",oD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lc=ne("x",aD),Ve=({to:t,label:e,icon:n,onClick:r})=>{const{pathname:s}=Jr(),i=s===t;return u.jsxs(Ce,{to:t,onClick:r,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(i?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20 backdrop-blur-sm"),children:[n,u.jsx("span",{children:e})]})},lD=()=>{const{user:t,role:e,logout:n}=ft(),[r,s]=C.useState(!1),i=Jr(),o=Zr(),l=i.pathname==="/";return C.useEffect(()=>{s(!1)},[i.pathname]),C.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),u.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30",children:[u.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[!l&&u.jsx("button",{onClick:()=>o(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"",children:u.jsx(t4,{className:"w-5 h-5"})}),u.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[u.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:u.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),u.jsx("span",{className:"text-lg sm:text-2xl",children:" "})]})]}),u.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[u.jsx(Ve,{to:"/restaurants",label:"",icon:u.jsx(Cf,{className:"w-4 h-4"})}),e==="customer"&&u.jsxs(u.Fragment,{children:[u.jsx(Ve,{to:"/cart",label:" "}),u.jsx(Ve,{to:"/orders",label:""})]}),e==="owner"&&u.jsxs(u.Fragment,{children:[u.jsx(Ve,{to:"/owner",label:" "}),u.jsx(Ve,{to:"/owner/orders",label:" "}),u.jsx(Ve,{to:"/owner/courier-requests",label:""})]}),e==="courier"&&u.jsxs(u.Fragment,{children:[u.jsx(Ve,{to:"/courier",label:" "}),u.jsx(Ve,{to:"/courier/hiring",label:""})]}),e==="admin"&&u.jsx(Ve,{to:"/admin",label:" "}),e==="developer"&&u.jsx(Ve,{to:"/developer",label:" "}),t?u.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:""}):u.jsx(Ve,{to:"/login",label:""})]}),u.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white/20 hover:bg-white/30 transition backdrop-blur-sm",onClick:()=>s(!r),children:r?u.jsx(lc,{className:"w-6 h-6 text-white"}):u.jsx(C4,{className:"w-6 h-6 text-white"})})]}),r&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>s(!1)}),u.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] bg-gradient-to-b from-sky-500 to-sky-700 
        z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${r?"translate-x-0":"translate-x-full"}
      `,children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[u.jsx("span",{className:"text-white font-bold text-lg",children:""}),u.jsx("button",{onClick:()=>s(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:u.jsx(lc,{className:"w-5 h-5 text-white"})})]}),u.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[u.jsx(Ve,{to:"/restaurants",label:"",icon:u.jsx(Cf,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="customer"&&u.jsxs(u.Fragment,{children:[u.jsx(Ve,{to:"/cart",label:"",icon:u.jsx(K1,{className:"w-5 h-5"}),onClick:()=>s(!1)}),u.jsx(Ve,{to:"/orders",label:"",icon:u.jsx(sh,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="owner"&&u.jsxs(u.Fragment,{children:[u.jsx(Ve,{to:"/owner",label:" ",icon:u.jsx(p0,{className:"w-5 h-5"}),onClick:()=>s(!1)}),u.jsx(Ve,{to:"/owner/orders",label:" ",icon:u.jsx(sh,{className:"w-5 h-5"}),onClick:()=>s(!1)}),u.jsx(Ve,{to:"/owner/courier-requests",label:"",icon:u.jsx(ac,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="courier"&&u.jsxs(u.Fragment,{children:[u.jsx(Ve,{to:"/courier",label:" ",icon:u.jsx(ac,{className:"w-5 h-5"}),onClick:()=>s(!1)}),u.jsx(Ve,{to:"/courier/hiring",label:"",icon:u.jsx(sh,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="admin"&&u.jsx(Ve,{to:"/admin",label:" ",icon:u.jsx(W1,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="developer"&&u.jsx(Ve,{to:"/developer",label:" ",icon:u.jsx($1,{className:"w-5 h-5"}),onClick:()=>s(!1)}),u.jsx("div",{className:"h-px bg-white/20 my-2"}),t?u.jsx("button",{onClick:()=>{n(),s(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"  "}):u.jsx(Ve,{to:"/login",label:" ",icon:u.jsx(p0,{className:"w-5 h-5"}),onClick:()=>s(!1)})]})]})]})},Q1=C.createContext(null),Fs=()=>{const t=C.useContext(Q1);if(!t)throw new Error("useDialog must be used within DialogProvider");return t},uD=({children:t})=>{const[e,n]=C.useState({isOpen:!1,message:"",type:"confirm"}),r=C.useCallback(c=>new Promise(d=>{n({...c,isOpen:!0,resolve:d})}),[]),s=C.useCallback(c=>{e.resolve&&e.resolve(c),n(d=>({...d,isOpen:!1}))},[e.resolve]),i=C.useCallback(async()=>{e.onConfirm&&await e.onConfirm(),s(!0)},[e.onConfirm,s]),o=C.useCallback(()=>{e.onCancel&&e.onCancel(),s(!1)},[e.onCancel,s]),l=C.useMemo(()=>({confirm:(c,d={})=>r({message:c,type:"confirm",title:d.title||"",confirmText:d.confirmText||"",cancelText:d.cancelText||"",...d}),alert:(c,d={})=>r({message:c,type:"alert",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),success:(c,d={})=>r({message:c,type:"success",title:d.title||" ",confirmText:d.confirmText||"",...d}).then(()=>{}),error:(c,d={})=>r({message:c,type:"error",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),warning:(c,d={})=>r({message:c,type:"warning",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),info:(c,d={})=>r({message:c,type:"info",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{})}),[r]);return u.jsxs(Q1.Provider,{value:l,children:[t,u.jsx(cD,{...e,onConfirm:i,onCancel:o})]})},cD=({isOpen:t,title:e,message:n,type:r="confirm",confirmText:s="",cancelText:i="",dangerous:o,onConfirm:l,onCancel:c})=>{if(!t)return null;const f={confirm:{icon:u.jsx(m0,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:o?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:u.jsx(_0,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:u.jsx(f4,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:u.jsx(B1,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:u.jsx(_0,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:u.jsx(m0,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[r],p=r==="confirm";return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:c}),u.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:g=>g.stopPropagation(),children:[u.jsxs("div",{className:"relative p-6 pb-0",children:[u.jsx("button",{onClick:c,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:u.jsx(lc,{className:"w-5 h-5"})}),u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{className:`w-16 h-16 rounded-full ${f.iconBg} ${f.iconColor} flex items-center justify-center`,children:f.icon})}),u.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:e})]}),u.jsx("div",{className:"p-6 pt-3",children:u.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),u.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${p?"flex-row-reverse":"justify-center"}`,children:[u.jsx("button",{onClick:l,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${f.buttonColor}`,children:s}),p&&u.jsx("button",{onClick:c,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:i})]})]})}),u.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},dD=()=>{const{user:t}=ft(),e=Zr(),n=Fs(),r=async()=>{if(!(!t||!await n.confirm("     .     .",{title:"  ",dangerous:!0,confirmText:"  ",cancelText:""})))try{await Fi(ue(K,"users",t.uid)),await Rb(Oa.currentUser),n.success("   "),e("/account-deleted")}catch(i){console.error("Error deleting account:",i),n.error("    .   .")}};return u.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:u.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[u.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:u.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),u.jsx("span",{className:"text-xl sm:text-2xl font-black",children:" "})]}),u.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["  ",u.jsx(T4,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"}),"    ",new Date().getFullYear()]}),u.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[u.jsxs(Ce,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[u.jsx(W1,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),u.jsxs(Ce,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[u.jsx($1,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),t&&u.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[u.jsx(Bi,{className:"w-3 h-3 sm:w-4 sm:h-4"})," "]})]}),u.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),u.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"     "})]})})},hD=()=>u.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:u.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[u.jsx(oc,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),u.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"            ! "}),u.jsx(oc,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),fD=()=>{const{user:t}=ft();return u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 text-center px-4 sm:px-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-64 sm:w-96 h-64 sm:h-96 bg-gradient-to-br from-sky-400/20 to-sky-300/10 rounded-full blur-3xl animate-pulse"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-gradient-to-tl from-sky-500/20 to-sky-400/10 rounded-full blur-3xl animate-pulse delay-1000"}),u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] sm:w-[600px] h-[300px] sm:h-[600px] bg-gradient-radial from-sky-200/30 to-transparent rounded-full blur-3xl"}),u.jsx("div",{className:"hidden sm:block absolute top-20 left-20 text-sky-300 float",children:u.jsx(oc,{className:"w-8 h-8"})}),u.jsx("div",{className:"hidden sm:block absolute top-40 right-32 text-sky-400 float delay-500",children:u.jsx(ih,{className:"w-6 h-6 fill-current"})}),u.jsx("div",{className:"hidden sm:block absolute bottom-32 left-32 text-sky-300 float delay-1000",children:u.jsx(ih,{className:"w-5 h-5 fill-current"})}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center max-w-3xl w-full",children:[u.jsxs("div",{className:"mb-6 sm:mb-8 relative",children:[u.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 bg-gradient-to-br from-sky-500 to-sky-600 rounded-[2rem] sm:rounded-[2.5rem] flex items-center justify-center shadow-2xl shadow-sky-300/50 glow",children:u.jsx("span",{className:"text-5xl sm:text-7xl drop-shadow-lg",children:""})}),u.jsx("div",{className:"absolute -top-1 -right-1 sm:-top-2 sm:-right-2 w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-full flex items-center justify-center shadow-lg",children:u.jsx(oc,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})})]}),u.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 mb-4 sm:mb-6 drop-shadow-sm",children:" "}),u.jsxs("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl text-sky-700/80 max-w-2xl mb-6 sm:mb-10 leading-relaxed font-medium px-2",children:["      ",u.jsx("br",{className:"hidden sm:block"}),u.jsx("span",{className:"text-sky-500",children:"        "})," "]}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-4 mb-6 sm:mb-10 px-2",children:[u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[u.jsx(F1,{className:"w-4 h-4 sm:w-5 sm:h-5 text-sky-500"}),u.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:"  "})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[u.jsx(ac,{className:"w-4 h-4 sm:w-5 sm:h-5 text-sky-500"}),u.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:" "})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 bg-white/80 backdrop-blur-sm px-3 sm:px-5 py-2 sm:py-3 rounded-xl sm:rounded-2xl shadow-lg border border-sky-100",children:[u.jsx(ih,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 fill-yellow-500"}),u.jsx("span",{className:"text-sky-700 font-semibold text-xs sm:text-base",children:" "})]})]}),u.jsxs("div",{className:"relative mb-8 sm:mb-12",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-sky-400/30 to-sky-500/30 rounded-[1.5rem] sm:rounded-[2rem] blur-2xl scale-110"}),u.jsx("img",{src:"/landing.png",alt:"  ",className:"relative w-56 sm:w-72 md:w-80 lg:w-96 rounded-[1.5rem] sm:rounded-[2rem] shadow-2xl shadow-sky-200/50 border-2 sm:border-4 border-white object-cover hover:scale-105 transition-transform duration-500"})]}),t?u.jsxs(Ce,{to:"/restaurants",className:"group flex items-center gap-2 sm:gap-3 px-8 sm:px-10 py-4 sm:py-5 rounded-full text-lg sm:text-xl font-bold text-white bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 shadow-2xl shadow-sky-300/50 hover:shadow-sky-400/60 hover:scale-105 transition-all duration-300",children:["  ",u.jsx(Af,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform"})]}):u.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-5 w-full px-4",children:[u.jsxs(Ce,{to:"/login",className:"group flex items-center justify-center gap-2 sm:gap-3 w-full max-w-xs px-8 sm:px-12 py-4 sm:py-5 rounded-full text-lg sm:text-xl font-bold text-white bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 shadow-2xl shadow-sky-300/50 hover:shadow-sky-400/60 hover:scale-105 transition-all duration-300",children:[" ",u.jsx(Af,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform"})]}),u.jsxs("p",{className:"text-sky-600/80 text-base sm:text-lg",children:[" "," ",u.jsx(Ce,{to:"/register",className:"text-sky-500 font-bold hover:text-sky-600 hover:underline transition",children:"   "})]})]})]})]})},pD=()=>{const[t,e]=C.useState([]),[n,r]=C.useState(!0);return C.useEffect(()=>{(async()=>{const s=await Ge(pe(K,"restaurants"));e(s.docs.map(i=>({id:i.id,...i.data()}))),r(!1)})()},[]),n?u.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."}):u.jsxs("div",{className:"py-10",children:[u.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:"  "}),t.length===0&&u.jsx("div",{className:"text-center text-gray-400",children:"    "}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>u.jsxs(Ce,{to:`/menu?restaurant=${s.id}`,className:"bg-gray-800 text-white rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center",children:[s.logoUrl?u.jsx("img",{src:s.logoUrl,alt:s.name,className:"w-28 h-28 object-cover rounded-full border-4 border-gray-700 mb-4"}):u.jsx("div",{className:"w-28 h-28 flex items-center justify-center bg-gray-600 rounded-full text-3xl mb-4",children:""}),u.jsx("h3",{className:"font-bold text-xl",children:s.name}),s.city&&u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.city})]},s.id))})]})},w0="broast_cart";function Om(){const[t,e]=C.useState(()=>{try{const l=localStorage.getItem(w0);return l?JSON.parse(l):[]}catch{return[]}});C.useEffect(()=>{localStorage.setItem(w0,JSON.stringify(t))},[t]);const n=(l,c=1)=>{e(d=>{const f=d.findIndex(p=>p.id===l.id);if(f>=0){const p=[...d];return p[f]={...p[f],qty:p[f].qty+c,ownerId:l.ownerId??p[f].ownerId},p}return[...d,{...l,qty:c}]})},r=l=>e(c=>c.filter(d=>d.id!==l)),s=(l,c)=>e(d=>d.map(f=>f.id===l?{...f,qty:c}:f)),i=()=>e([]),o=t.reduce((l,c)=>l+c.price*c.qty,0);return{items:t,add:n,remove:r,changeQty:s,clear:i,subtotal:o}}const X1=C.createContext(null),eo=()=>{const t=C.useContext(X1);if(!t)throw new Error("useToast must be used within ToastProvider");return t},mD=({children:t})=>{const[e,n]=C.useState([]),r=C.useCallback(o=>{n(l=>l.filter(c=>c.id!==o))},[]),s=C.useCallback((o,l,c)=>{const d=Math.random().toString(36).slice(2),f={id:d,message:o,type:l,title:c==null?void 0:c.title,duration:(c==null?void 0:c.duration)??3e3};n(p=>[...p,f]),f.duration&&f.duration>0&&setTimeout(()=>r(d),f.duration)},[r]),i=C.useMemo(()=>({show:(o,l)=>s(o,(l==null?void 0:l.type)??"info",l),success:(o,l)=>s(o,"success",l),error:(o,l)=>s(o,"error",l),info:(o,l)=>s(o,"info",l),warning:(o,l)=>s(o,"warning",l)}),[s]);return u.jsxs(X1.Provider,{value:i,children:[t,u.jsx(vD,{items:e,onClose:r})]})},gD={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},yD={success:"",error:"",info:"",warning:""},vD=({items:t,onClose:e})=>(C.useEffect(()=>{},[]),u.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[u.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:t.map(n=>u.jsx("div",{className:`pointer-events-auto ${gD[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"text-xl leading-none",children:yD[n.type]}),u.jsxs("div",{className:"flex-1",children:[n.title&&u.jsx("div",{className:"font-bold",children:n.title}),u.jsx("div",{className:"text-sm",children:n.message})]}),u.jsx("button",{onClick:()=>e(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:""})]})},n.id))}),u.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),_D=()=>{const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(null),{add:o,subtotal:l,items:c}=Om(),{role:d}=ft(),f=eo(),[p]=Yk(),g=p.get("restaurant");C.useEffect(()=>{(async()=>{let I;if(g){I=Ft(pe(K,"menuItems"),an("available","==",!0),an("ownerId","==",g));const v=await Ot(ue(K,"restaurants",g));v.exists()&&i(v.data().name)}else I=Ft(pe(K,"menuItems"),an("available","==",!0));const w=(await Ge(I)).docs.map(v=>({id:v.id,...v.data()})),x=await Promise.all(w.map(async v=>{if(!v.ownerId)return v;const P=await Ot(ue(K,"restaurants",v.ownerId));return P.exists()?{...v,restaurant:P.data()}:v}));e(x),r(!1)})()},[g]);const E=I=>{var w;if(!I.ownerId){f.warning("    ",{title:""});return}const R=(w=c[0])==null?void 0:w.ownerId;if(R&&R!==I.ownerId){f.warning("           ",{title:""});return}o({id:I.id,name:I.name,price:I.price,ownerId:I.ownerId}),f.success("    ")};if(n)return u.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."});const S=d==="customer"||d==="admin";return u.jsxs("div",{className:"py-10",children:[u.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:s?`  ${s}`:"  "}),g&&u.jsx("div",{className:"text-center mb-6",children:u.jsx(Ce,{to:"/restaurants",className:"text-sky-400 hover:text-sky-300 underline",children:"   "})}),t.length===0&&u.jsx("div",{className:"text-center text-gray-400",children:"    "}),u.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(I=>u.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[I.restaurant&&u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[I.restaurant.logoUrl?u.jsx("img",{src:I.restaurant.logoUrl,alt:I.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):u.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:""}),u.jsx("span",{className:"font-semibold",children:I.restaurant.name})]}),u.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:I.imageUrl?u.jsx("img",{src:I.imageUrl,alt:I.name,className:"w-full h-full object-cover rounded-xl"}):u.jsx("span",{className:"text-gray-400",children:" "})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-lg",children:I.name}),I.desc&&u.jsx("p",{className:"text-sm text-gray-300 mt-1",children:I.desc})]}),u.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[u.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[I.price.toFixed(2)," ."]}),S&&u.jsx("button",{onClick:()=>E(I),disabled:!I.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${I.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"  "})]})]},I.id))}),l>0&&S&&u.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-40",children:u.jsxs(Ce,{to:"/checkout",className:"block w-full sm:w-auto text-center px-6 py-4 rounded-2xl bg-sky-600 text-white shadow-xl font-bold hover:bg-sky-700 transition text-base sm:text-lg",children:["    ",l.toFixed(2)," ."]})})]})},xD=()=>{const{items:t,subtotal:e,remove:n,clear:r,changeQty:s}=Om();return t.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[u.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:u.jsx(v0,{className:"w-12 h-12 text-gray-400"})}),u.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-2",children:" "}),u.jsx("p",{className:"text-gray-500 mb-6",children:"   !"}),u.jsxs(Ce,{to:"/restaurants",className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-sky-600 transition",children:[u.jsx(Af,{className:"w-5 h-5"})," "]})]}):u.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[u.jsx(v0,{className:"w-6 h-6 text-primary"})," ",u.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:t.length})]})}),u.jsx("div",{className:"space-y-3",children:t.map(i=>u.jsxs("div",{className:"flex items-center gap-3 bg-white text-gray-900 p-3 sm:p-4 rounded-xl shadow-sm border border-gray-100",children:[u.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:i.name}),u.jsxs("p",{className:"text-primary font-bold text-sm",children:[i.price.toFixed(2)," ."]}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("button",{onClick:()=>i.qty>1?s(i.id,i.qty-1):n(i.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:u.jsx(j4,{className:"w-4 h-4"})}),u.jsx("span",{className:"font-bold text-lg w-8 text-center",children:i.qty}),u.jsx("button",{onClick:()=>s(i.id,i.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:u.jsx(H1,{className:"w-4 h-4"})})]})]}),u.jsxs("div",{className:"flex flex-col items-end gap-2",children:[u.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(i.price*i.qty).toFixed(2)," ."]}),u.jsx("button",{onClick:()=>n(i.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:u.jsx(Bi,{className:"w-4 h-4"})})]})]},i.id))}),u.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-3",children:[u.jsxs("div",{className:"flex justify-between text-gray-600",children:[u.jsx("span",{children:" "}),u.jsxs("span",{className:"font-bold",children:[e.toFixed(2)," ."]})]}),u.jsxs("div",{className:"flex justify-between text-gray-600",children:[u.jsx("span",{children:" "}),u.jsx("span",{className:"font-bold",children:"7.00 ."})]}),u.jsx("div",{className:"h-px bg-gray-200"}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"font-bold text-lg",children:""}),u.jsxs("span",{className:"font-bold text-xl text-primary",children:[(e+7).toFixed(2)," ."]})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[u.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:[u.jsx(Bi,{className:"w-5 h-5"})," "]}),u.jsx(Ce,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition",children:"  "})]})]})},wD=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(!1),o=Zr(),l=Fs(),c=async d=>{d.preventDefault(),i(!0);try{const p=(await Ib(Oa,t,n)).user.uid,g=await Ot(ue(K,"users",p));if(g.exists()){const E=g.data();console.log("  :",E),E.role==="owner"?o("/owner"):E.role==="admin"?o("/admin"):E.role==="developer"?o("/developer"):E.role==="courier"?o("/courier"):o("/")}else l.warning("   Auth       Firestore")}catch(f){l.error(f.message,{title:"   "})}finally{i(!1)}};return u.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[u.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),u.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[u.jsxs("div",{className:"flex flex-col items-center mb-8",children:[u.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:u.jsx("span",{className:"text-4xl",children:"  "})}),u.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),u.jsx("p",{className:"text-sky-500 mt-1",children:" "})]}),u.jsxs("form",{onSubmit:c,className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(q1,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),u.jsx("input",{type:"email",placeholder:"",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:t,onChange:d=>e(d.target.value)})]}),u.jsxs("div",{className:"relative",children:[u.jsx(z1,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),u.jsx("input",{type:"password",placeholder:" ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:d=>r(d.target.value)})]}),u.jsx("button",{disabled:s,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50`,children:s?u.jsx(u.Fragment,{children:" ..."}):u.jsxs(u.Fragment,{children:[u.jsx(b4,{className:"w-5 h-5"}),""]})})]}),u.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["  "," ",u.jsx(Ce,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"  "})]})]})]})},ED=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(""),[o,l]=C.useState(""),[c,d]=C.useState(""),[f,p]=C.useState(!1),g=Zr(),E=Fs(),S=async R=>{if(R.preventDefault(),!c){E.warning("  ");return}if(c==="owner"&&!o){E.warning("  ");return}p(!0);try{const w=await Tb(Oa,t,n);await Ui(ue(K,"users",w.user.uid),{name:s,email:t,role:c,restaurantName:c==="owner"?o:null}),c==="owner"&&await Ui(ue(K,"restaurants",w.user.uid),{name:o||s||" ",ownerId:w.user.uid,email:t,phone:"",city:"",location:"",logoUrl:""},{merge:!0}),g("/")}catch(w){E.error(w.message,{title:"   "})}finally{p(!1)}},I=[{value:"customer",label:"",icon:rD,color:"sky"},{value:"courier",label:"",icon:ac,color:"emerald"},{value:"owner",label:" ",icon:F1,color:"orange"}];return u.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[u.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),u.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[u.jsxs("div",{className:"flex flex-col items-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:u.jsx(x0,{className:"w-8 h-8 text-white"})}),u.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"  "})]}),u.jsxs("form",{onSubmit:S,className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(tD,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),u.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",value:s,onChange:R=>i(R.target.value)})]}),u.jsxs("div",{className:"relative",children:[u.jsx(q1,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),u.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",type:"email",value:t,onChange:R=>e(R.target.value)})]}),u.jsxs("div",{className:"relative",children:[u.jsx(z1,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),u.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:" ",type:"password",value:n,onChange:R=>r(R.target.value)})]}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:I.map(R=>{const w=R.icon,x=c===R.value;return u.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${x?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[u.jsx("input",{type:"radio",name:"role",value:R.value,className:"hidden",onChange:()=>d(R.value)}),u.jsx(w,{className:"w-6 h-6"}),u.jsx("span",{className:"text-sm font-bold",children:R.label})]},R.value)})}),c==="owner"&&u.jsxs("div",{className:"relative",children:[u.jsx(Cf,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),u.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:" ",value:o,onChange:R=>l(R.target.value)})]}),u.jsx("button",{disabled:f,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02]",children:f?" ...":u.jsxs(u.Fragment,{children:[u.jsx(x0,{className:"w-5 h-5"}),""]})})]}),u.jsxs("p",{className:"mt-6 text-center text-sky-600",children:[" "," ",u.jsx(Ce,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"  "})]})]})]})};function TD(){return u.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:u.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"  -   "}),u.jsxs("p",{className:"mb-4",children:["   ",u.jsx("strong",{children:" "}),"          ."]}),u.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1.  "}),u.jsx("p",{className:"mb-4",children:"                   .            ."}),u.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2.  "}),u.jsx("p",{className:"mb-4",children:"               ."}),u.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3.  "}),u.jsx("p",{className:"mb-4",children:"              .                 ."}),u.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4.  "}),u.jsx("p",{className:"mb-4",children:"       (    )         ."}),u.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5.  "}),u.jsxs("p",{className:"mb-4",children:["              .         :",u.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),u.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6.   "}),u.jsx("p",{className:"mb-4",children:"                  ."}),u.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["      ",new Date().toLocaleDateString("ar-SA"),"."]}),u.jsx("div",{className:"mt-8 text-center",children:u.jsx(Ce,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"   "})})]})})}function ID(){return u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"   "}),u.jsx("p",{className:"text-gray-600 mb-6",children:"          ."}),u.jsx(Ce,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"   "})]})}const ND="modulepreload",kD=function(t){return"/"+t},E0={},T0=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=kD(c),c in E0)return;E0[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":ND,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,E)=>{p.addEventListener("load",g),p.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Me=({allow:t,children:e})=>{const{role:n,loading:r}=ft();return r?u.jsx("div",{className:"p-8 text-center",children:" ..."}):!n||!t.includes(n)?u.jsx(Ap,{to:"/",replace:!0}):u.jsx(u.Fragment,{children:e})},I0=1.5,Ys=.5,SD=()=>{const{items:t,subtotal:e,clear:n}=Om(),{user:r}=ft(),s=Zr(),i=Fs(),o=eo(),[l,c]=C.useState(""),[d,f]=C.useState(!1),[p,g]=C.useState(null),[E,S]=C.useState(null),I=7,R=e+I;C.useEffect(()=>{(async()=>{var T,y;if(t.length===0)return;let P=(T=t[0])==null?void 0:T.ownerId;if(!P&&((y=t[0])!=null&&y.id))try{const N=await Ot(ue(K,"menuItems",t[0].id)),k=N.exists()?N.data():null;P=(k==null?void 0:k.ownerId)||null}catch(N){console.error("    :",N)}if(!P){g(null);return}const V=await Ot(ue(K,"restaurants",P)),M=V.exists()?V.data():null;g({id:P,name:(M==null?void 0:M.name)||"",referredBy:M==null?void 0:M.referredBy,referrerType:M==null?void 0:M.referrerType})})()},[t]);const w=()=>{if(!navigator.geolocation){i.warning("    ");return}navigator.geolocation.getCurrentPosition(v=>{console.log("  :",v.coords),S({lat:v.coords.latitude,lng:v.coords.longitude}),o.success("    ")},v=>{console.error("   :",v),i.error("  .      .")},{enableHighAccuracy:!0})},x=async()=>{var T;if(!r)return;if(t.length===0){i.warning(" ");return}if(!l){i.warning(" ");return}if(!E){i.warning("   ");return}let v=p==null?void 0:p.id;if(!v&&((T=t[0])!=null&&T.id)){const y=await Ot(ue(K,"menuItems",t[0].id)),N=y.exists()?y.data():null;v=(N==null?void 0:N.ownerId)||null}if(!v){i.error("   .    .");return}f(!0);const P=(p==null?void 0:p.referrerType)==="admin"&&(p==null?void 0:p.referredBy),V=P?Ys:0,M=I0-V;if(await rl(pe(K,"orders"),{customerId:r.uid,restaurantId:v,restaurantName:(p==null?void 0:p.name)||"",items:t.map(y=>({id:y.id,name:y.name,price:y.price,qty:y.qty,ownerId:y.ownerId??v})),subtotal:e,deliveryFee:I,total:R,status:"pending",address:l,location:E,createdAt:St(),updatedAt:St(),paymentMethod:"cod",platformFee:I0,adminCommission:V,referredBy:(p==null?void 0:p.referredBy)||null}),P&&(p!=null&&p.referredBy))try{const y=ue(K,"wallets",p.referredBy);if((await Ot(y)).exists())await rn(y,{balance:Fo(Ys),totalEarnings:Fo(Ys),updatedAt:St()});else{const{setDoc:k}=await T0(async()=>{const{setDoc:A}=await Promise.resolve().then(()=>i0);return{setDoc:A}},void 0);await k(y,{balance:Ys,totalEarnings:Ys,totalWithdrawn:0,transactions:[],updatedAt:St()})}console.log(`   ${Ys}    ${p.referredBy}`)}catch(y){console.error("    :",y)}try{const y=ue(K,"wallets","app_earnings");if((await Ot(y)).exists())await rn(y,{balance:Fo(M),totalEarnings:Fo(M),updatedAt:St()});else{const{setDoc:k}=await T0(async()=>{const{setDoc:A}=await Promise.resolve().then(()=>i0);return{setDoc:A}},void 0);await k(y,{balance:M,totalEarnings:M,totalWithdrawn:0,transactions:[],updatedAt:St()})}console.log(`   ${M}   `)}catch(y){console.error("    :",y)}n(),f(!1),s("/orders")};return u.jsx(Me,{allow:["customer","admin"],children:u.jsxs("div",{className:"max-w-xl mx-auto bg-white rounded-2xl shadow p-6 text-gray-900",children:[u.jsx("h1",{className:"text-xl font-bold mb-4",children:" "}),u.jsx("div",{className:"border rounded-xl p-3 text-gray-800",children:t.map(v=>u.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[u.jsxs("span",{className:"text-sm",children:[v.name,"  ",v.qty]}),u.jsxs("span",{className:"font-semibold",children:[(v.price*v.qty).toFixed(2)," ."]})]},v.id))}),u.jsx("input",{className:"w-full border rounded-xl p-3 text-gray-900 placeholder-gray-500 mt-3",placeholder:" ",value:l,onChange:v=>c(v.target.value)}),u.jsx("button",{onClick:w,className:"w-full mt-3 rounded-xl p-3 bg-blue-600 text-white font-semibold hover:bg-blue-700",children:"   "}),E&&u.jsx("iframe",{title:" ",width:"100%",height:"250",style:{borderRadius:"12px",marginTop:"10px"},loading:"lazy",allowFullScreen:!0,src:`https://maps.google.com/maps?hl=ar&q=${E.lat},${E.lng}&z=15&output=embed`}),u.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-gray-800 mt-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{children:""}),u.jsxs("span",{children:[e.toFixed(2)," ."]})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{children:" "}),u.jsxs("span",{children:[I.toFixed(2)," ."]})]}),u.jsxs("div",{className:"flex items-center justify-between font-bold text-lg mt-1 text-gray-900",children:[u.jsx("span",{children:""}),u.jsxs("span",{children:[R.toFixed(2)," ."]})]})]}),u.jsx("button",{disabled:d,onClick:x,className:"w-full rounded-xl p-3 bg-green-600 hover:bg-green-700 text-white font-bold mt-3",children:d?"...":"  (  )"})]})})},bD=()=>{const{user:t}=ft(),[e,n]=C.useState(null),[r,s]=C.useState([]),[i,o]=C.useState(null);C.useEffect(()=>{if(!t)return;n(null),o(null);const c=Ft(pe(K,"orders"),an("customerId","==",t.uid),Wr("createdAt","desc")),d=Da(c,f=>{s(f.docs.map(p=>({id:p.id,...p.data()}))),n(null)},async f=>{console.error("TrackOrders onSnapshot error:",f),n("   Composite Index  customerId + createdAt.     .");const p=Ft(pe(K,"orders"),an("customerId","==",t.uid)),E=(await Ge(p)).docs.map(R=>({id:R.id,...R.data()})),S=Ft(pe(K,"orders"),Wr("createdAt","desc"),Em(5));let I=[];try{I=(await Ge(S)).docs.map(w=>{var v,P,V,M;const x=w.data();return{id:w.id,customerId:x.customerId,restaurantId:x.restaurantId,createdAt:((M=(V=(P=(v=x.createdAt)==null?void 0:v.toDate)==null?void 0:P.call(v))==null?void 0:V.toISOString)==null?void 0:M.call(V))??null}})}catch{}o({uid:t.uid,fallbackCount:E.length,sample:I}),s(E)});return()=>d()},[t]);const l=c=>({pending:" ",accepted:" ",preparing:" ",ready:" ",out_for_delivery:" ",delivered:" ",cancelled:""})[c]||c;return u.jsxs("div",{className:"space-y-3",children:[u.jsx("h1",{className:"text-xl font-bold",children:""}),e&&u.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[e,i&&u.jsxs("div",{className:"mt-1",children:[u.jsxs("div",{children:["UID: ",u.jsx("b",{children:i.uid})]}),u.jsxs("div",{children:["  : ",u.jsx("b",{children:i.fallbackCount})]}),Array.isArray(i.sample)&&i.sample.length>0&&u.jsxs("div",{className:"mt-1",children:[u.jsx("div",{className:"font-semibold",children:" ( 5):"}),i.sample.map(c=>u.jsxs("div",{className:"truncate",children:["#",c.id,"  customerId: ",String(c.customerId),"  restaurantId: ",String(c.restaurantId),"  createdAt: ",c.createdAt||""]},c.id))]})]})]}),r.map(c=>{var d,f,p;return u.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"font-bold",children:[" #",c.id.slice(-6)]}),u.jsx("div",{className:"text-sm px-3 py-1 rounded-full bg-gray-900 text-white",children:l(c.status)})]}),c.restaurantName&&u.jsxs("div",{className:"mt-1 text-yellow-600 font-semibold",children:[": ",String(c.restaurantName)]}),u.jsx("div",{className:"mt-2 text-sm text-gray-700",children:(d=c.items)==null?void 0:d.map(g=>`${g.name}${g.qty}`).join("  ")}),u.jsxs("div",{className:"mt-2 font-bold",children:[": ",(p=(f=c.total)==null?void 0:f.toFixed)==null?void 0:p.call(f,2)," ."]})]},c.id)}),r.length===0&&!e&&u.jsx("div",{className:"text-gray-600",children:"    ."})]})},RD=()=>{const t=[{to:"/owner/menu",title:" ",desc:"     .",icon:u.jsx(iD,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:" ",desc:"     .",icon:u.jsx(v4,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"  ",desc:"     .",icon:u.jsx(z4,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>u.jsxs(Ce,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col`,children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,u.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),u.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},AD=({kind:t,message:e,onClose:n})=>{const r=t==="success"?"bg-green-600":t==="error"?"bg-rose-600":t==="warning"?"bg-amber-500":"bg-slate-800";return C.useEffect(()=>{const s=setTimeout(n,2500);return()=>clearTimeout(s)},[n]),u.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${r}`,children:e})},N0=()=>({name:"",desc:"",price:0,available:!0,file:null});async function CD(t,e=900,n=.8){try{const r=await createImageBitmap(t),s=Math.min(1,e/r.width),i=Math.round(r.width*s),o=Math.round(r.height*s),l=document.createElement("canvas");l.width=i,l.height=o,l.getContext("2d").drawImage(r,0,0,i,o);const d=t.type.includes("png")?"image/png":"image/jpeg";return await new Promise(p=>l.toBlob(g=>p(g),d,n))}catch{return t}}const PD=()=>{const{user:t}=ft(),e=Fs(),[n,r]=C.useState([]),[s,i]=C.useState(!0),[o,l]=C.useState(N0()),[c,d]=C.useState(!1),[f,p]=C.useState(null),g=(v,P)=>p({kind:v,message:P}),E=Dm(tn),S=C.useRef(null),I=async()=>{if(!t)return;i(!0);const v=Ft(pe(K,"menuItems"),an("ownerId","==",t.uid)),P=await Ge(v);r(P.docs.map(V=>({id:V.id,...V.data()}))),i(!1)};C.useEffect(()=>{I()},[t]);const R=async v=>{if(v.preventDefault(),!t){g("warning","    ");return}const P=Number(o.price||0);if(!o.name.trim()){g("warning","   ");return}if(!Number.isFinite(P)||P<=0){g("warning","   ");return}d(!0);const V="temp_"+Date.now(),M=o.file?URL.createObjectURL(o.file):void 0,T={_tempId:V,_optimistic:!0,_progress:o.file?1:100,name:o.name,desc:o.desc||"",price:P,imageUrl:M,available:o.available??!0,ownerId:t.uid};r(y=>[T,...y]);try{let y;if(o.file){const A=await CD(o.file),j=o.file.name.replace(/\s+/g,"_").slice(-60),b=`menuImages/${t.uid}_${Date.now()}_${j}`,it=jm(E,b),Yt=Bj(it,A,{contentType:o.file.type||"image/jpeg"});await new Promise((cn,Xe)=>{Yt.on("state_changed",$=>{const Q=Math.round($.bytesTransferred/$.totalBytes*100);r(J=>J.map(fe=>fe._tempId===V?{...fe,_progress:Q}:fe))},Xe,async()=>{const $=await Pm(Yt.snapshot.ref);y=`${$}${$.includes("?")?"&":"?"}v=${Date.now()}`,cn()})})}const N={name:T.name,desc:T.desc,price:P,imageUrl:y||"",available:T.available,ownerId:t.uid,...T.categoryId?{categoryId:T.categoryId}:{}},k=await rl(pe(K,"menuItems"),N);r(A=>A.map(j=>j._tempId===V?{...j,id:k.id,imageUrl:y||j.imageUrl,_optimistic:!1,_progress:100}:j)),g("success","    ")}catch(y){r(N=>N.filter(k=>k._tempId!==V)),g("error",`   : ${(y==null?void 0:y.message)||y}`)}finally{d(!1),l(N0()),S.current&&(S.current.value=""),M&&URL.revokeObjectURL(M)}},w=async(v,P)=>{if(v){r(V=>V.map(M=>M.id===v?{...M,available:!P}:M));try{await rn(ue(K,"menuItems",v),{available:!P}),g("success","  ")}catch{r(V=>V.map(M=>M.id===v?{...M,available:!!P}:M)),g("error","  .  .")}}},x=async v=>{if(!v||!await e.confirm("       ",{dangerous:!0,title:" "}))return;const V=n;r(M=>M.filter(T=>T.id!==v));try{await Fi(ue(K,"menuItems",v)),g("success"," ")}catch{r(V),g("error","  .  .")}};return s?u.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[u.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),u.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),u.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),u.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),u.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),u.jsx("div",{className:"space-y-3",children:[1,2,3].map(v=>u.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[u.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),u.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),u.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},v))})]}):u.jsxs(u.Fragment,{children:[f&&u.jsx(AD,{kind:f.kind,message:f.message,onClose:()=>p(null)}),u.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[u.jsxs("form",{onSubmit:R,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[u.jsx("h2",{className:"text-lg font-bold",children:" "}),u.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:o.name,onChange:v=>l({...o,name:v.target.value})}),u.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:o.desc,onChange:v=>l({...o,desc:v.target.value})}),u.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(o.price)?o.price:0,onChange:v=>l({...o,price:Number(v.target.value)})}),u.jsx("input",{ref:S,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:v=>{var P;return l({...o,file:((P=v.target.files)==null?void 0:P[0])||null})}}),u.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"checkbox",checked:o.available,onChange:v=>l({...o,available:v.target.checked})}),""]}),u.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:c,children:c?" ":""})]}),u.jsxs("div",{className:"space-y-3",children:[n.map(v=>{var P,V;return u.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:v.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:M=>{M.currentTarget.style.display="none"}}),v._optimistic&&u.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:u.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:u.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${v._progress||1}%`}})})})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-bold",children:v.name}),v.desc&&u.jsx("div",{className:"text-sm text-gray-600",children:v.desc}),u.jsxs("div",{className:"font-semibold mt-1",children:[(V=(P=v.price)==null?void 0:P.toFixed)==null?void 0:V.call(P,2)," ."]}),v._optimistic&&u.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" "})]}),u.jsx("button",{onClick:()=>w(v.id,v.available),disabled:!!v._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:v.available?"":""}),u.jsx("button",{onClick:()=>x(v.id),disabled:!!v._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:""})]},v.id||v._tempId)}),n.length===0&&u.jsx("div",{className:"text-gray-600",children:"   ."})]})]})]})},k0=t=>({pending:"  ",accepted:"  ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "})[t]||t,jD=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},DD=()=>{const{user:t}=ft(),[e,n]=C.useState([]),[r,s]=C.useState(null),i=C.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);C.useEffect(()=>{if(!i)return;s(null);const l=Da(pe(K,"orders"),c=>{const f=c.docs.map(p=>({id:p.id,...p.data()})).filter(p=>{var S,I;const g=p.restaurantId===i,E=((I=(S=p==null?void 0:p.items)==null?void 0:S[0])==null?void 0:I.ownerId)===i;return g||E});f.sort((p,g)=>{var I,R,w,x;const E=((R=(I=p.createdAt)==null?void 0:I.toMillis)==null?void 0:R.call(I))??0;return(((x=(w=g.createdAt)==null?void 0:w.toMillis)==null?void 0:x.call(w))??0)-E}),n(f),s(null)},c=>{console.error("Firestore error:",c),s("    .")});return()=>l()},[i]);const o=async(l,c)=>{await rn(ue(K,"orders",l),{status:c,updatedAt:St()})};return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"  "}),r&&u.jsx("div",{className:"text-red-500 text-sm mb-2",children:r}),e.map(l=>{var c,d,f;return u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[u.jsxs("div",{className:"font-bold text-lg",children:[" #",l.id.slice(-6),u.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(c=l.items)==null?void 0:c.map(p=>`${p.name}${p.qty}`).join("  ")})]}),u.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(f=(d=l.total)==null?void 0:d.toFixed)==null?void 0:f.call(d,2)," ."]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm font-semibold",children:":"}),u.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${jD(l.status)}`,children:k0(l.status||"pending")})]}),u.jsxs("div",{className:"text-sm text-gray-700",children:[u.jsx("span",{className:"font-semibold",children:":"})," ",l.address]}),l.location&&u.jsxs("div",{className:"mt-3",children:[u.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"  :"}),u.jsx("iframe",{title:`map-${l.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${l.location.lat},${l.location.lng}&hl=ar&z=15&output=embed`})]}),u.jsx("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(p=>u.jsx("button",{onClick:()=>o(l.id,p),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gray-100 hover:bg-gray-200 transition",children:k0(p)},p))})]},l.id)}),e.length===0&&!r&&u.jsx("div",{className:"text-gray-400 text-center text-lg",children:"    ."})]})},OD=()=>{const{user:t}=ft(),e=eo(),[n,r]=C.useState({name:"",phone:"",city:"",location:"",logoUrl:""}),[s,i]=C.useState(null),[o,l]=C.useState(""),[c,d]=C.useState(!0),[f,p]=C.useState(!1),g=C.useMemo(()=>!f&&!!t,[f,t]);C.useEffect(()=>{t&&(async()=>{try{const w=await Ot(ue(K,"restaurants",t.uid));if(w.exists()){const x=w.data();r({name:x.name??"",phone:x.phone??"",city:x.city??"",location:x.location??"",logoUrl:x.logoUrl??""})}}catch{e.error("   ")}finally{d(!1)}})()},[t,e]),C.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]);const E=w=>{const{name:x,value:v}=w.target;r(P=>({...P,[x]:v}))},S=w=>{var v;const x=((v=w.target.files)==null?void 0:v[0])||null;if(i(x),x){const P=URL.createObjectURL(x);l(P)}else l("")},I=async()=>{if(!t||!s)return;if(!/^image\//.test(s.type)){e.warning("   ");return}const x=3*1024*1024;if(s.size>x){e.warning("        3MB");return}const v=s.name.replace(/\s+/g,"_"),P=`restaurants/${t.uid}/logo_${Date.now()}_${v}`,V=jm(Wj,P),M={contentType:s.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await V1(V,s,M);const T=await Pm(V);return`${T}${T.includes("?")?"&":"?"}v=${Date.now()}`},R=async w=>{if(w.preventDefault(),!t){e.warning("    ");return}if(!n.name.trim()){e.warning("  ");return}p(!0);try{let x=n.logoUrl;if(s){e.info("    ");const v=await I();v&&(x=v)}await Ui(ue(K,"restaurants",t.uid),{...n,logoUrl:x},{merge:!0}),o&&URL.revokeObjectURL(o),l(""),i(null),e.success("    ",{title:" "})}catch(x){e.error(` : ${(x==null?void 0:x.message)||"  "}`)}finally{p(!1)}};return c?u.jsx("div",{className:"p-6 text-center",children:" "}):u.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[u.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"  "}),u.jsxs("form",{onSubmit:R,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block font-semibold",children:" "}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:o||n.logoUrl?u.jsx("img",{src:o||n.logoUrl,className:"w-full h-full object-cover",onError:w=>w.currentTarget.style.display="none",alt:"logo"}):null}),u.jsx("input",{type:"file",accept:"image/*",onChange:S})]}),s&&u.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",u.jsx("span",{className:"font-semibold",children:s.name})]})]}),u.jsx("input",{name:"name",placeholder:" ",value:n.name,onChange:E,className:"w-full border p-3 rounded-xl"}),u.jsx("input",{name:"phone",placeholder:" ",value:n.phone,onChange:E,className:"w-full border p-3 rounded-xl"}),u.jsx("input",{name:"city",placeholder:"",value:n.city,onChange:E,className:"w-full border p-3 rounded-xl"}),u.jsx("input",{name:"location",placeholder:"",value:n.location,onChange:E,className:"w-full border p-3 rounded-xl"}),u.jsx("button",{type:"submit",disabled:!g,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:f?" ":""})]})]})},LD=()=>{const{user:t}=ft(),[e,n]=C.useState([]),[r,s]=C.useState(!0);C.useEffect(()=>{t&&(async()=>{const o=Ft(pe(K,"hiringRequests"),an("restaurantId","==",t.uid)),l=await Ge(o);n(l.docs.map(c=>({id:c.id,...c.data()}))),s(!1)})()},[t]);const i=async(o,l)=>{await rn(ue(K,"hiringRequests",o),{status:l}),n(c=>c.map(d=>d.id===o?{...d,status:l}:d))};return r?u.jsx("div",{className:"text-center py-10",children:" ..."}):u.jsxs("div",{className:"py-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-yellow-400 text-center mb-6",children:" "}),e.length===0?u.jsx("div",{className:"text-gray-400 text-center",children:"  "}):u.jsx("div",{className:"space-y-3",children:e.map(o=>u.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-bold",children:o.courierName}),u.jsx("div",{className:"text-sm text-gray-600",children:o.status==="pending"?" ":o.status})]}),o.status==="pending"&&u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>i(o.id,"accepted"),className:"px-3 py-1 rounded bg-green-500 text-white",children:""}),u.jsx("button",{onClick:()=>i(o.id,"rejected"),className:"px-3 py-1 rounded bg-red-500 text-white",children:""})]})]},o.id))})]})},VD=()=>{const{user:t}=ft(),[e,n]=C.useState([]),[r,s]=C.useState([]);C.useEffect(()=>{const l=Ft(pe(K,"orders"),an("status","in",["ready"]),Wr("createdAt","desc")),c=Da(l,p=>n(p.docs.map(g=>({id:g.id,...g.data()})))),d=Ft(pe(K,"orders"),an("courierId","==",(t==null?void 0:t.uid)||""),Wr("createdAt","desc")),f=Da(d,p=>s(p.docs.map(g=>({id:g.id,...g.data()}))));return()=>{c(),f()}},[t==null?void 0:t.uid]);const i=async l=>{t&&await rn(ue(K,"orders",l),{courierId:t.uid,status:"out_for_delivery",updatedAt:St()})},o=async l=>{await rn(ue(K,"orders",l),{status:"delivered",updatedAt:St()})};return u.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold mb-3",children:"  "}),u.jsxs("div",{className:"space-y-3",children:[e.map(l=>{var c,d;return u.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[u.jsxs("div",{className:"font-bold",children:["#",l.id.slice(-6),"  ",(d=(c=l.total)==null?void 0:c.toFixed)==null?void 0:d.call(c,2)," ."]}),u.jsxs("div",{className:"text-sm text-gray-600",children:[": ",l.address]}),u.jsx("button",{onClick:()=>i(l.id),className:"mt-2 px-3 py-2 rounded-xl bg-gray-900 text-white text-sm",children:" "})]},l.id)}),e.length===0&&u.jsx("div",{className:"text-gray-600",children:"    ."})]})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"font-bold mb-3",children:""}),u.jsxs("div",{className:"space-y-3",children:[r.map(l=>{var c,d;return u.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[u.jsxs("div",{className:"font-bold",children:["#",l.id.slice(-6),"  ",(d=(c=l.total)==null?void 0:c.toFixed)==null?void 0:d.call(c,2)," ."]}),u.jsxs("div",{className:"text-sm text-gray-600",children:[": ",l.address]}),u.jsx("button",{onClick:()=>o(l.id),className:"mt-2 px-3 py-2 rounded-xl bg-green-600 text-white text-sm",children:" "})]},l.id)}),r.length===0&&u.jsx("div",{className:"text-gray-600",children:"    ."})]})]})]})},MD=()=>{const{user:t}=ft(),e=Fs(),[n,r]=C.useState([]),[s,i]=C.useState({}),[o,l]=C.useState(!0),[c,d]=C.useState(null);C.useEffect(()=>{if(!t)return;(async()=>{const E=(await Ge(pe(K,"restaurants"))).docs.map(w=>({id:w.id,...w.data()}));r(E);const S=Ft(pe(K,"hiringRequests"),an("courierId","==",t.uid)),I=await Ge(S),R={};I.docs.forEach(w=>{const x=w.data();R[x.restaurantId]={restaurantId:x.restaurantId,status:x.status}}),i(R),l(!1)})()},[t]);const f=async p=>{if(!t){e.warning("  ");return}d(p.id),await rl(pe(K,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"",restaurantId:p.id,restaurantName:p.name,status:"pending",createdAt:St()}),i(g=>({...g,[p.id]:{restaurantId:p.id,status:"pending"}})),d(null)};return o?u.jsx("div",{className:"text-center py-10 text-gray-300",children:"  ..."}):u.jsxs("div",{className:"py-8",children:[u.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[u.jsx(r4,{className:"w-7 h-7 text-yellow-400"})," "]}),u.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(p=>{const g=s[p.id];return u.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[p.logoUrl?u.jsx("img",{src:p.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):u.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:""}),u.jsx("h3",{className:"font-bold text-lg mb-2",children:p.name}),g?u.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${g.status==="pending"?"bg-gray-500 text-white":g.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[g.status==="pending"&&u.jsx(x4,{className:"w-4 h-4"}),g.status==="accepted"&&u.jsx(m4,{className:"w-4 h-4"}),g.status==="rejected"&&u.jsx(B1,{className:"w-4 h-4"}),g.status==="pending"?" ":g.status==="accepted"?"  ":" "]}):u.jsx("button",{disabled:c===p.id,onClick:()=>f(p),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:c===p.id?"  ...":"  "})]},p.id)})})]})},UD=()=>{const{user:t}=ft(),[e,n]=C.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[r,s]=C.useState(0),[i,o]=C.useState(!0);return C.useEffect(()=>{t&&(async()=>{try{const c=(await Ge(pe(K,"restaurants"))).size,f=(await Ge(pe(K,"orders"))).docs.map(S=>({id:S.id,...S.data()})),p=f.length,g=f.filter(S=>S.status==="pending").length,E=f.reduce((S,I)=>S+(I.deliveryFee||0),0);try{const I=(await Ot(ue(K,"wallets",t.uid))).data();s((I==null?void 0:I.balance)||0)}catch{s(0)}n({totalRestaurants:c,totalOrders:p,totalEarnings:E,pendingOrders:g})}catch(l){console.error("   :",l)}finally{o(!1)}})()},[t]),i?u.jsx(Me,{allow:["admin"],children:u.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:" ..."})}):u.jsx(Me,{allow:["admin"],children:u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"  "}),u.jsx("p",{className:"text-gray-600 mt-2",children:"   ! "})]}),u.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm opacity-90",children:" "}),u.jsxs("h2",{className:"text-3xl font-bold",children:[r.toFixed(2)," ."]}),u.jsx("p",{className:"text-sm opacity-75 mt-2",children:"   50       "})]}),u.jsx(G1,{className:"w-16 h-16 opacity-80"})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600 text-sm",children:" "}),u.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:e.totalRestaurants})]}),u.jsx(i4,{className:"w-12 h-12 text-primary opacity-30"})]})}),u.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600 text-sm",children:" "}),u.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:e.totalOrders})]}),u.jsx(K1,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),u.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600 text-sm",children:" "}),u.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:e.pendingOrders})]}),u.jsx(f0,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),u.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600 text-sm",children:" "}),u.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:e.totalEarnings.toFixed(2)})]}),u.jsx(f0,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[u.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),u.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ce,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"   "}),u.jsx(Ce,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[u.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),u.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"     "}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ce,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),u.jsx(Ce,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[u.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:""}),u.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"       "}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(Ce,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),u.jsx(Ce,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:" "})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[u.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),u.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:[" : ",r.toFixed(2)," ."]}),u.jsx(Ce,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]})]}),u.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 p-6 rounded-lg",children:[u.jsx("h4",{className:"font-bold text-sky-900 mb-2",children:"  :"}),u.jsxs("ul",{className:"text-sky-800 text-sm space-y-1",children:[u.jsxs("li",{children:[" ",u.jsx("strong",{children:"50 "}),"         "]}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"1 "}),"     (     )"]}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"1.5 "}),"       "]}),u.jsx("li",{children:"        "})]})]})]})})},FD=()=>{const{user:t,role:e}=ft(),n=eo(),r=Fs(),[s,i]=C.useState([]),[o,l]=C.useState(!0),[c,d]=C.useState(!1),[f,p]=C.useState({name:"",phone:"",city:"",location:""});C.useEffect(()=>{g()},[]);const g=async()=>{try{const R=(await Ge(pe(K,"restaurants"))).docs.map(w=>({id:w.id,...w.data()}));i(R)}catch(I){n.error("   "),console.error(I)}finally{l(!1)}},E=async I=>{if(I.preventDefault(),!f.name.trim()){n.warning("  ");return}try{const R=e==="admin",w=e==="developer";await rl(pe(K,"restaurants"),{...f,ownerId:"admin_"+Date.now(),email:(t==null?void 0:t.email)||"",logoUrl:"",createdAt:new Date,referredBy:R?t==null?void 0:t.uid:null,referrerType:R?"admin":w?"developer":null}),n.success("    "),R&&n.info("   50      "),p({name:"",phone:"",city:"",location:""}),d(!1),g()}catch(R){n.error("   "),console.error(R)}},S=async I=>{if(await r.confirm("      ",{dangerous:!0,title:" "}))try{await Fi(ue(K,"restaurants",I)),n.success("   "),g()}catch(w){n.error("   "),console.error(w)}};return o?u.jsx(Me,{allow:["admin","developer"],children:u.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):u.jsx(Me,{allow:["admin","developer"],children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),u.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[u.jsx(H1,{className:"w-5 h-5"}),"  "]})]}),c&&u.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),u.jsxs("form",{onSubmit:E,className:"space-y-4",children:[u.jsx("input",{type:"text",placeholder:" ",value:f.name,onChange:I=>p({...f,name:I.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),u.jsx("input",{type:"text",placeholder:" ",value:f.phone,onChange:I=>p({...f,phone:I.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),u.jsx("input",{type:"text",placeholder:"",value:f.city,onChange:I=>p({...f,city:I.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),u.jsx("textarea",{placeholder:" / ",value:f.location,onChange:I=>p({...f,location:I.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{type:"submit",className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition",children:" "}),u.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:" "})]})]})]}),u.jsx("div",{className:"grid gap-4",children:s.length===0?u.jsx("div",{className:"text-center text-gray-500 py-12",children:"    "}):s.map(I=>u.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"text-xl font-bold text-primary",children:I.name}),I.city&&u.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",I.city]}),I.phone&&u.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",I.phone]}),I.location&&u.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",I.location]})]}),u.jsx("button",{onClick:()=>S(I.id),className:"p-3 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:" ",children:u.jsx(Bi,{className:"w-5 h-5"})})]})},I.id))})]})})},oh={pending:"  ",accepted:" ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "},BD=()=>{const t=eo(),[e,n]=C.useState([]),[r,s]=C.useState(!0),[i,o]=C.useState("all");C.useEffect(()=>{l()},[i]);const l=async()=>{try{let c;i==="all"?c=Ft(pe(K,"orders"),Wr("createdAt","desc")):c=Ft(pe(K,"orders"),an("status","==",i),Wr("createdAt","desc"));const f=(await Ge(c)).docs.map(p=>({id:p.id,...p.data()}));n(f)}catch(c){t.error("   "),console.error(c)}finally{s(!1)}};return r?u.jsx(Me,{allow:["admin","developer"],children:u.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):u.jsx(Me,{allow:["admin","developer"],children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),u.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[u.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${i==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[" (",e.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(c=>{const d=e.filter(f=>f.status===c).length;return u.jsxs("button",{onClick:()=>o(c),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${i===c?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[oh[c]," (",d,")"]},c)})]}),u.jsx("div",{className:"space-y-4",children:e.length===0?u.jsxs("div",{className:"text-center text-gray-500 py-12",children:["   ",i!=="all"&&` "${oh[i]}"`]}):e.map(c=>{var d,f;return u.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-bold",children:[" #",c.id.slice(-8)]}),u.jsx("p",{className:"text-gray-600 text-sm",children:c.createdAt?new Date(c.createdAt).toLocaleDateString("ar-SA"):""})]}),u.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${c.status==="pending"?"bg-yellow-500":c.status==="delivered"?"bg-green-600":c.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:oh[c.status]})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600 text-sm",children:" ID"}),u.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[c.customerId.slice(0,12),"..."]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600 text-sm",children:""}),u.jsx("p",{className:"font-semibold text-gray-800",children:c.restaurantName||""})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600 text-sm",children:""}),u.jsx("p",{className:"text-sm text-gray-800",children:c.address})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600 text-sm",children:""}),u.jsxs("p",{className:"text-lg font-bold text-primary",children:[((d=c.total)==null?void 0:d.toFixed(2))||0," ."]})]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[u.jsx("p",{className:"font-semibold mb-2",children:":"}),u.jsx("div",{className:"space-y-1",children:(f=c.items)==null?void 0:f.map((p,g)=>u.jsxs("div",{className:"flex justify-between text-gray-700",children:[u.jsxs("span",{children:[p.name,"  ",p.qty]}),u.jsxs("span",{children:[(p.price*p.qty).toFixed(2)," ."]})]},g))})]})]},c.id)})})]})})},Js={projectId:tn.options.projectId,authDomain:tn.options.authDomain,storageBucket:tn.options.storageBucket,messagingSenderId:tn.options.messagingSenderId,appId:tn.options.appId},$D=()=>{var io,al,ll,oo;const{user:t}=ft(),e=eo(),n=Dm(tn),[r,s]=C.useState("overview"),[i,o]=C.useState(!0),[l,c]=C.useState(!1),[d,f]=C.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[p,g]=C.useState({}),[E,S]=C.useState([]),[I,R]=C.useState([]),[w,x]=C.useState([]),[v,P]=C.useState([]),[V,M]=C.useState(!1),[T,y]=C.useState({}),[N,k]=C.useState(null),[A,j]=C.useState({}),[b,it]=C.useState(!1),[Yt,cn]=C.useState(null),[Xe,$]=C.useState({}),[Q,J]=C.useState("all"),[fe,me]=C.useState("all"),[xe,dn]=C.useState(null),Ze=async()=>{try{const[L,Z,re,Re,Jt]=await Promise.all([Ge(pe(K,"users")),Ge(pe(K,"restaurants")),Ge(pe(K,"menuItems")),Ge(pe(K,"orders")),Ge(pe(K,"wallets"))]),Fn=L.docs.map(se=>({uid:se.id,...se.data()}));S(Fn);const ze=Z.docs.map(se=>({id:se.id,...se.data()}));R(ze);const qe=Re.docs.map(se=>({id:se.id,...se.data()}));x(qe);const dr={};Jt.docs.forEach(se=>{dr[se.id]=se.data()});const ul=dr.app_earnings||{balance:0,totalEarnings:0},ao=Fn.filter(se=>se.role==="admin"),nd=Fn.filter(se=>se.role==="courier"),rs=Fn.filter(se=>se.role==="customer"),cl=Fn.filter(se=>se.role==="owner"),dl=ao.map(se=>{const hl=ze.filter(fl=>fl.referredBy===se.uid),qs=dr[se.uid]||{balance:0,totalEarnings:0};return{uid:se.uid,email:se.email,name:se.name,walletBalance:qs.balance||0,totalEarnings:qs.totalEarnings||0,restaurantsCount:hl.length,restaurants:hl}});P(dl),f({users:Fn.length,restaurants:ze.length,menuItems:re.size,orders:qe.length,pendingOrders:qe.filter(se=>se.status==="pending").length,deliveredOrders:qe.filter(se=>se.status==="delivered").length,admins:ao.length,couriers:nd.length,customers:rs.length,owners:cl.length,totalAppEarnings:ul.totalEarnings||0});const zs=await Ot(ue(K,"settings","general"));if(zs.exists()){const se=zs.data();g(se),y(se)}else{const se={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1.5,adminCommissionRate:.5};g(se),y(se)}}catch(L){console.error("   :",L),e.error("  ")}finally{o(!1),c(!1)}};C.useEffect(()=>{Ze()},[]);const hn=()=>{c(!0),Ze(),e.info("  ...")},fn=async()=>{try{await Ui(ue(K,"settings","general"),T,{merge:!0}),g(T),M(!1),e.success("    ")}catch(L){console.error("   :",L),e.error("  ")}},ed=async L=>{try{await rn(ue(K,"restaurants",L),{...A,updatedAt:St()}),k(null),e.success("    "),Ze()}catch(Z){console.error("   :",Z),e.error("  ")}},td=async(L,Z)=>{try{it(!0);const re=`restaurants/${L}/logo_${Date.now()}_${Z.name}`,Re=jm(n,re);await V1(Re,Z);const Jt=await Pm(Re);await rn(ue(K,"restaurants",L),{logoUrl:Jt,updatedAt:St()}),e.success("    "),Ze()}catch(re){console.error("   :",re),e.error("  ")}finally{it(!1)}},Bs=async L=>{if(await new Promise(re=>{const Re=window.confirm("         !");re(Re)}))try{await Fi(ue(K,"restaurants",L)),e.success("   "),Ze()}catch(re){console.error("   :",re),e.error("  ")}},$s=async L=>{try{await rn(ue(K,"users",L),{...Xe,updatedAt:St()}),cn(null),e.success("    "),Ze()}catch(Z){console.error("   :",Z),e.error("  ")}},to=async L=>{if(await new Promise(re=>{const Re=window.confirm("         !");re(Re)}))try{await Fi(ue(K,"users",L)),e.success("     "),e.warning(":      Firebase Auth"),Ze()}catch(re){console.error("   :",re),e.error("  ")}},no=async(L,Z)=>{try{await rn(ue(K,"orders",L),{status:Z,updatedAt:St()}),e.success("    "),Ze()}catch(re){console.error("   :",re),e.error("  ")}},ro=L=>{switch(L){case"customer":return" ";case"owner":return"  ";case"courier":return" ";case"admin":return" ";case"developer":return" ";default:return L}},so=L=>{switch(L){case"pending":return"  ";case"accepted":return" ";case"preparing":return"  ";case"ready":return" ";case"out_for_delivery":return"  ";case"delivered":return"  ";case"cancelled":return" ";default:return L}};return i?u.jsx(Me,{allow:["developer"],children:u.jsx("div",{className:"flex items-center justify-center h-96",children:u.jsxs("div",{className:"text-center",children:[u.jsx(y0,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-lg text-gray-600",children:"   ..."})]})})}):u.jsx(Me,{allow:["developer"],children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-extrabold text-primary",children:"   "}),u.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),u.jsxs("button",{onClick:hn,disabled:l,className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition disabled:opacity-50",children:[u.jsx(y0,{className:`w-5 h-5 ${l?"animate-spin":""}`}),""]})]}),u.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[{id:"overview",label:"  "},{id:"restaurants",label:" "},{id:"orders",label:" "},{id:"users",label:" "},{id:"couriers",label:" "},{id:"admins",label:" "},{id:"settings",label:" "}].map(L=>u.jsx("button",{onClick:()=>s(L.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition ${r===L.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:L.label},L.id))}),r==="overview"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[u.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[u.jsx("p",{className:"text-3xl font-bold",children:d.users}),u.jsx("p",{className:"text-sm opacity-90",children:" "})]}),u.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[u.jsx("p",{className:"text-3xl font-bold",children:d.restaurants}),u.jsx("p",{className:"text-sm opacity-90",children:" "})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[u.jsx("p",{className:"text-3xl font-bold",children:d.orders}),u.jsx("p",{className:"text-sm opacity-90",children:" "})]}),u.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white text-center",children:[u.jsx("p",{className:"text-3xl font-bold",children:d.admins}),u.jsx("p",{className:"text-sm opacity-90",children:" "})]}),u.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-4 text-white text-center",children:[u.jsx("p",{className:"text-3xl font-bold",children:d.couriers}),u.jsx("p",{className:"text-sm opacity-90",children:" "})]}),u.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-4 text-white text-center",children:[u.jsx("p",{className:"text-3xl font-bold",children:d.totalAppEarnings.toFixed(2)}),u.jsx("p",{className:"text-sm opacity-90",children:"  "})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(B4,{className:"w-6 h-6 text-orange-500"}),u.jsx("h2",{className:"text-xl font-bold",children:" Firebase"})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[u.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),u.jsx("p",{className:"font-mono text-sm",children:Js.projectId})]}),u.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[u.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),u.jsx("p",{className:"font-mono text-sm",children:Js.storageBucket})]})]}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[u.jsx("a",{href:`https://console.firebase.google.com/project/${Js.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:" Console"}),u.jsx("a",{href:`https://console.firebase.google.com/project/${Js.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:" Firestore"}),u.jsx("a",{href:`https://console.firebase.google.com/project/${Js.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:" Auth"}),u.jsx("a",{href:`https://console.firebase.google.com/project/${Js.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:" Storage"})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[u.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[u.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.customers}),u.jsx("p",{className:"text-sm text-gray-600",children:""})]}),u.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[u.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.owners}),u.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),u.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[u.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:d.couriers}),u.jsx("p",{className:"text-sm text-gray-600",children:""})]}),u.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[u.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d.admins}),u.jsx("p",{className:"text-sm text-gray-600",children:""})]}),u.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[u.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),u.jsx("p",{className:"text-sm text-gray-600",children:""})]})]})]})]}),r==="restaurants"&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("h2",{className:"text-xl font-bold",children:["   (",I.length,")"]})}),u.jsx("div",{className:"space-y-4",children:I.map(L=>{var Z;return u.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:N===L.id?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600",children:" "}),u.jsx("input",{type:"text",value:A.name||"",onChange:re=>j({...A,name:re.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600",children:" "}),u.jsx("input",{type:"text",value:A.phone||"",onChange:re=>j({...A,phone:re.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600",children:" "}),u.jsx("input",{type:"email",value:A.email||"",onChange:re=>j({...A,email:re.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600",children:""}),u.jsx("input",{type:"text",value:A.city||"",onChange:re=>j({...A,city:re.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"text-sm text-gray-600",children:""}),u.jsx("input",{type:"text",value:A.location||"",onChange:re=>j({...A,location:re.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600",children:" "}),u.jsx("input",{type:"file",accept:"image/*",onChange:re=>{var Jt;const Re=(Jt=re.target.files)==null?void 0:Jt[0];Re&&td(L.id,Re)},className:"w-full border rounded-xl p-2 mt-1",disabled:b}),b&&u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" ..."})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>ed(L.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[u.jsx(U4,{className:"w-4 h-4"})," "]}),u.jsxs("button",{onClick:()=>k(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[u.jsx(lc,{className:"w-4 h-4"})," "]})]})]}):u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:L.logoUrl?u.jsx("img",{src:L.logoUrl,alt:L.name,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-lg",children:L.name}),u.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[L.phone&&u.jsxs("p",{children:[" ",L.phone]}),L.email&&u.jsxs("p",{children:[" ",L.email]}),L.city&&u.jsxs("p",{children:[" ",L.city]}),L.referredBy&&u.jsxs("p",{className:"text-purple-600",children:["  : ",((Z=v.find(re=>re.uid===L.referredBy))==null?void 0:Z.name)||L.referredBy.slice(0,8)]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{k(L.id),j(L)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",children:u.jsx(g0,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>Bs(L.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",children:u.jsx(Bi,{className:"w-5 h-5"})})]})]})},L.id)})})]}),r==="orders"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[u.jsxs("h2",{className:"text-xl font-bold",children:["   (",w.length,")"]}),u.jsxs("select",{value:Q,onChange:L=>J(L.target.value),className:"border rounded-xl p-2",children:[u.jsx("option",{value:"all",children:" "}),u.jsx("option",{value:"pending",children:" "}),u.jsx("option",{value:"accepted",children:""}),u.jsx("option",{value:"preparing",children:" "}),u.jsx("option",{value:"ready",children:""}),u.jsx("option",{value:"out_for_delivery",children:" "}),u.jsx("option",{value:"delivered",children:" "}),u.jsx("option",{value:"cancelled",children:""})]})]}),u.jsx("div",{className:"space-y-3",children:w.filter(L=>Q==="all"||L.status===Q).sort((L,Z)=>{var re,Re;return(((re=Z.createdAt)==null?void 0:re.seconds)||0)-(((Re=L.createdAt)==null?void 0:Re.seconds)||0)}).map(L=>{var Z,re;return u.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[u.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"font-bold",children:[" #",L.id.slice(-8)]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[" ",L.restaurantName||""]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[" ",L.address]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[" ",(Z=L.total)==null?void 0:Z.toFixed(2)," ."]}),L.platformFee&&u.jsxs("p",{className:"text-xs text-green-600",children:[" : ",L.platformFee," .",L.adminCommission?` |  : ${L.adminCommission} .`:""]})]}),u.jsxs("div",{className:"text-left",children:[u.jsx("span",{className:`inline-block px-3 py-1 rounded-xl text-sm font-semibold ${L.status==="delivered"?"bg-green-100 text-green-700":L.status==="cancelled"?"bg-red-100 text-red-700":L.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:so(L.status)}),u.jsxs("select",{value:L.status,onChange:Re=>no(L.id,Re.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[u.jsx("option",{value:"pending",children:" "}),u.jsx("option",{value:"accepted",children:""}),u.jsx("option",{value:"preparing",children:" "}),u.jsx("option",{value:"ready",children:""}),u.jsx("option",{value:"out_for_delivery",children:" "}),u.jsx("option",{value:"delivered",children:" "}),u.jsx("option",{value:"cancelled",children:""})]})]})]}),u.jsxs("div",{className:"mt-3 pt-3 border-t",children:[u.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:(re=L.items)==null?void 0:re.map((Re,Jt)=>u.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[Re.name,"  ",Re.qty]},Jt))})]})]},L.id)})})]}),r==="users"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[u.jsxs("h2",{className:"text-xl font-bold",children:["   (",E.length,")"]}),u.jsxs("select",{value:fe,onChange:L=>me(L.target.value),className:"border rounded-xl p-2",children:[u.jsx("option",{value:"all",children:" "}),u.jsx("option",{value:"customer",children:""}),u.jsx("option",{value:"owner",children:" "}),u.jsx("option",{value:"courier",children:""}),u.jsx("option",{value:"admin",children:""}),u.jsx("option",{value:"developer",children:""})]})]}),u.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.filter(L=>fe==="all"||L.role===fe).map(L=>u.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:Yt===L.uid?u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",placeholder:"",value:Xe.name||"",onChange:Z=>$({...Xe,name:Z.target.value}),className:"w-full border rounded-xl p-2"}),u.jsx("input",{type:"text",placeholder:"",value:Xe.phone||"",onChange:Z=>$({...Xe,phone:Z.target.value}),className:"w-full border rounded-xl p-2"}),u.jsxs("select",{value:Xe.role||"customer",onChange:Z=>$({...Xe,role:Z.target.value}),className:"w-full border rounded-xl p-2",children:[u.jsx("option",{value:"customer",children:""}),u.jsx("option",{value:"owner",children:" "}),u.jsx("option",{value:"courier",children:""}),u.jsx("option",{value:"admin",children:""}),u.jsx("option",{value:"developer",children:""})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>$s(L.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:""}),u.jsx("button",{onClick:()=>cn(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:""})]})]}):u.jsx(u.Fragment,{children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold",children:L.name||" "}),u.jsx("p",{className:"text-sm text-gray-600",children:L.email}),u.jsx("p",{className:"text-xs mt-1",children:ro(L.role)})]}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>{cn(L.uid),$(L)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:u.jsx(g0,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>to(L.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:u.jsx(Bi,{className:"w-4 h-4"})})]})]})})},L.uid))})]}),r==="couriers"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h2",{className:"text-xl font-bold",children:["  (",d.couriers,")"]}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[E.filter(L=>L.role==="courier").map(L=>u.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:""}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold",children:L.name||" "}),u.jsx("p",{className:"text-sm text-gray-600",children:L.email}),L.phone&&u.jsxs("p",{className:"text-sm text-gray-600",children:[" ",L.phone]})]})]}),u.jsx("div",{className:"mt-4 pt-3 border-t",children:u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[u.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[u.jsx("p",{className:"text-lg font-bold text-green-600",children:w.filter(Z=>Z.courierId===L.uid&&Z.status==="delivered").length}),u.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),u.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[u.jsx("p",{className:"text-lg font-bold text-blue-600",children:w.filter(Z=>Z.courierId===L.uid&&Z.status==="out_for_delivery").length}),u.jsx("p",{className:"text-xs text-gray-600",children:" "})]})]})})]},L.uid)),d.couriers===0&&u.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"   "})]})]}),r==="admins"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h2",{className:"text-xl font-bold",children:["   (",v.length,")"]}),u.jsxs("div",{className:"space-y-4",children:[v.map(L=>u.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[u.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>dn(xe===L.uid?null:L.uid),children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold",children:L.name||" "}),u.jsx("p",{className:"text-sm text-gray-600",children:L.email})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-left",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(G1,{className:"w-4 h-4 text-green-600"}),u.jsxs("span",{className:"font-bold text-green-600",children:[L.walletBalance.toFixed(2)," ."]})]}),u.jsxs("p",{className:"text-xs text-gray-500",children:[": ",L.totalEarnings.toFixed(2)," . | ",L.restaurantsCount," "]})]}),xe===L.uid?u.jsx(d4,{className:"w-5 h-5 text-gray-400"}):u.jsx(u4,{className:"w-5 h-5 text-gray-400"})]})]})}),xe===L.uid&&u.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[u.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["      (",L.restaurants.length,"):"]}),L.restaurants.length>0?u.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:L.restaurants.map(Z=>u.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:Z.logoUrl?u.jsx("img",{src:Z.logoUrl,alt:Z.name,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-sm",children:Z.name}),u.jsx("p",{className:"text-xs text-gray-500",children:Z.city||" "})]})]},Z.id))}):u.jsx("p",{className:"text-gray-500 text-sm",children:"    "}),u.jsx("div",{className:"mt-4 pt-3 border-t",children:u.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[u.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[u.jsx("p",{className:"font-bold text-green-700",children:L.walletBalance.toFixed(2)}),u.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),u.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[u.jsx("p",{className:"font-bold text-blue-700",children:L.totalEarnings.toFixed(2)}),u.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),u.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[u.jsx("p",{className:"font-bold text-purple-700",children:w.filter(Z=>Z.referredBy===L.uid).length}),u.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})})]})]},L.uid)),v.length===0&&u.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"   "})]})]}),r==="settings"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-xl font-bold",children:"  "}),V?u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{M(!1),y(p)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:""}),u.jsx("button",{onClick:fn,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:" "})]}):u.jsx("button",{onClick:()=>M(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:" "})]}),u.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),V?u.jsx("input",{type:"number",value:T.deliveryFee||0,onChange:L=>y({...T,deliveryFee:Number(L.target.value)}),className:"w-full border rounded-xl p-3"}):u.jsxs("p",{className:"text-2xl font-bold",children:[p.deliveryFee||7," ."]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),V?u.jsx("input",{type:"number",step:"0.5",value:T.platformFee||1.5,onChange:L=>y({...T,platformFee:Number(L.target.value)}),className:"w-full border rounded-xl p-3"}):u.jsxs("p",{className:"text-2xl font-bold",children:[p.platformFee||1.5," ."]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),V?u.jsx("input",{type:"number",step:"0.1",value:T.adminCommissionRate||.5,onChange:L=>y({...T,adminCommissionRate:Number(L.target.value)}),className:"w-full border rounded-xl p-3"}):u.jsxs("p",{className:"text-2xl font-bold",children:[p.adminCommissionRate||.5," ."]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   "}),V?u.jsx("input",{type:"number",value:T.minOrderAmount||0,onChange:L=>y({...T,minOrderAmount:Number(L.target.value)}),className:"w-full border rounded-xl p-3"}):u.jsxs("p",{className:"text-2xl font-bold",children:[p.minOrderAmount||20," ."]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),V?u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"time",value:((io=T.workingHours)==null?void 0:io.open)||"09:00",onChange:L=>y({...T,workingHours:{...T.workingHours,open:L.target.value}}),className:"flex-1 border rounded-xl p-3"}),u.jsx("input",{type:"time",value:((al=T.workingHours)==null?void 0:al.close)||"23:00",onChange:L=>y({...T,workingHours:{...T.workingHours,close:L.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):u.jsxs("p",{className:"text-2xl font-bold",children:[((ll=p.workingHours)==null?void 0:ll.open)||"09:00"," - ",((oo=p.workingHours)==null?void 0:oo.close)||"23:00"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),V?u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:T.maintenanceMode||!1,onChange:L=>y({...T,maintenanceMode:L.target.checked}),className:"w-6 h-6"}),u.jsx("span",{className:"text-lg",children:T.maintenanceMode?"":""})]}):u.jsx("p",{className:`text-2xl font-bold ${p.maintenanceMode?"text-red-600":"text-green-600"}`,children:p.maintenanceMode?" ":" "})]})]})}),u.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[u.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"  :"}),u.jsxs("div",{className:"text-sky-800 space-y-2",children:[u.jsxs("p",{children:[" ",u.jsx("strong",{children:" :"})," ",p.platformFee||1.5," .   "]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"    :"})]}),u.jsxs("ul",{className:"mr-6 list-disc",children:[u.jsxs("li",{children:["   ",p.adminCommissionRate||.5," ."]}),u.jsxs("li",{children:["   ",(p.platformFee||1.5)-(p.adminCommissionRate||.5)," ."]})]}),u.jsxs("p",{children:[" ",u.jsx("strong",{children:"    :"}),"    ",p.platformFee||1.5," . "]})]})]})]}),u.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:u.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[u.jsxs("span",{children:[" ",t==null?void 0:t.email]}),u.jsxs("span",{children:[" ",t==null?void 0:t.uid.slice(0,12),"..."]}),u.jsxs("span",{children:[" ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},$t=({children:t})=>{const{user:e,loading:n}=ft();return n?u.jsx("div",{className:"p-8 text-center",children:" ..."}):e?u.jsx(u.Fragment,{children:t}):u.jsx(Ap,{to:"/login",replace:!0})},zD=()=>{var l;const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(null);C.useEffect(()=>{(async()=>{try{i(null);const c=Ft(pe(K,"orders"),Wr("createdAt","desc"),Em(10)),f=(await Ge(c)).docs.map(p=>{var E,S,I,R,w,x;const g=p.data();return{id:p.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((S=(E=g==null?void 0:g.items)==null?void 0:E[0])==null?void 0:S.ownerId)??null,customerId:g.customerId??null,createdAtISO:((x=(w=(R=(I=g.createdAt)==null?void 0:I.toDate)==null?void 0:R.call(I))==null?void 0:w.toISOString)==null?void 0:x.call(w))??null}});e(f)}catch(c){if(String((c==null?void 0:c.message)||"").includes("index"))try{const f=(await Ge(pe(K,"orders"))).docs.map(p=>{var E,S,I,R,w,x;const g=p.data();return{id:p.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((S=(E=g==null?void 0:g.items)==null?void 0:E[0])==null?void 0:S.ownerId)??null,customerId:g.customerId??null,createdAtISO:((x=(w=(R=(I=g.createdAt)==null?void 0:I.toDate)==null?void 0:R.call(I))==null?void 0:w.toISOString)==null?void 0:x.call(w))??null}});e(f),i("     createdAt     .")}catch(d){i("     : "+((d==null?void 0:d.message)||d))}else i("  : "+((c==null?void 0:c.message)||c))}finally{r(!1)}})()},[]);const o=(l=tn.options)==null?void 0:l.projectId;return u.jsxs("div",{className:"p-4 space-y-3",children:[u.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),u.jsxs("div",{className:"text-sm",children:["ProjectId: ",u.jsx("b",{children:String(o)})]}),s&&u.jsx("div",{className:"text-red-600 text-sm",children:s}),n&&u.jsx("div",{children:" Loading"}),!n&&t.length===0&&u.jsxs("div",{className:"text-gray-600",children:["     collection: ",u.jsx("code",{children:"orders"}),"   ."]}),t.map(c=>u.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[u.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",c.id]}),u.jsxs("div",{children:["restaurantId: ",u.jsx("b",{children:String(c.restaurantId)})]}),u.jsxs("div",{children:["items[0].ownerId: ",u.jsx("b",{children:String(c.firstItemOwnerId)})]}),u.jsxs("div",{children:["customerId: ",u.jsx("b",{children:String(c.customerId)})]}),u.jsxs("div",{children:["createdAt: ",u.jsx("b",{children:c.createdAtISO||""})]})]},c.id))]})};function qD(){return u.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[u.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[u.jsx(hD,{}),u.jsx(lD,{})]}),u.jsx("div",{className:"h-[100px] sm:h-[120px]"}),u.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:u.jsxs(Uk,{children:[u.jsx(Se,{path:"/",element:u.jsx(fD,{})}),u.jsx(Se,{path:"/restaurants",element:u.jsx(pD,{})}),u.jsx(Se,{path:"/menu",element:u.jsx(_D,{})}),u.jsx(Se,{path:"/cart",element:u.jsx(xD,{})}),u.jsx(Se,{path:"/login",element:u.jsx(wD,{})}),u.jsx(Se,{path:"/register",element:u.jsx(ED,{})}),u.jsx(Se,{path:"/privacy-policy",element:u.jsx(TD,{})}),u.jsx(Se,{path:"/account-deleted",element:u.jsx(ID,{})}),u.jsx(Se,{path:"/checkout",element:u.jsx($t,{children:u.jsx(Me,{allow:["customer","admin"],children:u.jsx(SD,{})})})}),u.jsx(Se,{path:"/orders",element:u.jsx($t,{children:u.jsx(Me,{allow:["customer","admin"],children:u.jsx(bD,{})})})}),u.jsx(Se,{path:"/owner",element:u.jsx($t,{children:u.jsx(Me,{allow:["owner"],children:u.jsx(RD,{})})})}),u.jsx(Se,{path:"/owner/menu",element:u.jsx($t,{children:u.jsx(Me,{allow:["owner"],children:u.jsx(PD,{})})})}),u.jsx(Se,{path:"/owner/orders",element:u.jsx($t,{children:u.jsx(Me,{allow:["owner"],children:u.jsx(DD,{})})})}),u.jsx(Se,{path:"/owner/edit",element:u.jsx($t,{children:u.jsx(Me,{allow:["owner"],children:u.jsx(OD,{})})})}),u.jsx(Se,{path:"/owner/courier-requests",element:u.jsx($t,{children:u.jsx(Me,{allow:["owner"],children:u.jsx(LD,{})})})}),u.jsx(Se,{path:"/courier",element:u.jsx($t,{children:u.jsx(Me,{allow:["courier"],children:u.jsx(VD,{})})})}),u.jsx(Se,{path:"/courier/hiring",element:u.jsx($t,{children:u.jsx(Me,{allow:["courier"],children:u.jsx(MD,{})})})}),u.jsx(Se,{path:"/admin",element:u.jsx($t,{children:u.jsx(Me,{allow:["admin","developer"],children:u.jsx(UD,{})})})}),u.jsx(Se,{path:"/admin/restaurants",element:u.jsx($t,{children:u.jsx(Me,{allow:["admin","developer"],children:u.jsx(FD,{})})})}),u.jsx(Se,{path:"/admin/orders",element:u.jsx($t,{children:u.jsx(Me,{allow:["admin","developer"],children:u.jsx(BD,{})})})}),u.jsx(Se,{path:"/developer",element:u.jsx($t,{children:u.jsx(Me,{allow:["developer","admin"],children:u.jsx($D,{})})})}),u.jsx(Se,{path:"/__debug_orders",element:u.jsx(zD,{})}),u.jsx(Se,{path:"*",element:u.jsx(Ap,{to:"/",replace:!0})})]})}),u.jsx(dD,{})]})}C.createContext(void 0);const HD=({children:t})=>u.jsx(u.Fragment,{children:t});ah.createRoot(document.getElementById("root")).render(u.jsx(V0.StrictMode,{children:u.jsx(Kk,{children:u.jsx(mD,{children:u.jsx(uD,{children:u.jsx(Kj,{children:u.jsxs(HD,{children:["   ",u.jsx(qD,{})]})})})})})}));
